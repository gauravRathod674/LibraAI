(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const s of u)if(s.type==="childList")for(const w of s.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&o(w)}).observe(document,{childList:!0,subtree:!0});function r(u){const s={};return u.integrity&&(s.integrity=u.integrity),u.referrerpolicy&&(s.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?s.credentials="include":u.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(u){if(u.ep)return;u.ep=!0;const s=r(u);fetch(u.href,s)}})();/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(e,n){const r=new Set(e.split(","));return n?o=>r.has(o.toLowerCase()):o=>r.has(o)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),isModelListener=e=>e.startsWith("onUpdate:"),extend$3=Object.assign,remove=(e,n)=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)},hasOwnProperty$e=Object.prototype.hasOwnProperty,hasOwn$1=(e,n)=>hasOwnProperty$e.call(e,n),isArray$4=Array.isArray,isMap=e=>toTypeString$1(e)==="[object Map]",isSet=e=>toTypeString$1(e)==="[object Set]",isDate$2=e=>toTypeString$1(e)==="[object Date]",isFunction$3=e=>typeof e=="function",isString$4=e=>typeof e=="string",isSymbol$2=e=>typeof e=="symbol",isObject$5=e=>e!==null&&typeof e=="object",isPromise$1=e=>(isObject$5(e)||isFunction$3(e))&&isFunction$3(e.then)&&isFunction$3(e.catch),objectToString$3=Object.prototype.toString,toTypeString$1=e=>objectToString$3.call(e),toRawType=e=>toTypeString$1(e).slice(8,-1),isPlainObject$4=e=>toTypeString$1(e)==="[object Object]",isIntegerKey=e=>isString$4(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const n=Object.create(null);return r=>n[r]||(n[r]=e(r))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(n,r)=>r?r.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize$1(e)}`:""),hasChanged=(e,n)=>!Object.is(e,n),invokeArrayFns=(e,n)=>{for(let r=0;r<e.length;r++)e[r](n)},def=(e,n,r,o=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:o,value:r})},looseToNumber=e=>{const n=parseFloat(e);return isNaN(n)?e:n},toNumber$1=e=>{const n=isString$4(e)?Number(e):NaN;return isNaN(n)?e:n};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(e){if(isArray$4(e)){const n={};for(let r=0;r<e.length;r++){const o=e[r],u=isString$4(o)?parseStringStyle(o):normalizeStyle(o);if(u)for(const s in u)n[s]=u[s]}return n}else if(isString$4(e)||isObject$5(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const n={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(r=>{if(r){const o=r.split(propertyDelimiterRE);o.length>1&&(n[o[0].trim()]=o[1].trim())}}),n}function normalizeClass(e){let n="";if(isString$4(e))n=e;else if(isArray$4(e))for(let r=0;r<e.length;r++){const o=normalizeClass(e[r]);o&&(n+=o+" ")}else if(isObject$5(e))for(const r in e)e[r]&&(n+=r+" ");return n.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}function looseCompareArrays(e,n){if(e.length!==n.length)return!1;let r=!0;for(let o=0;r&&o<e.length;o++)r=looseEqual(e[o],n[o]);return r}function looseEqual(e,n){if(e===n)return!0;let r=isDate$2(e),o=isDate$2(n);if(r||o)return r&&o?e.getTime()===n.getTime():!1;if(r=isSymbol$2(e),o=isSymbol$2(n),r||o)return e===n;if(r=isArray$4(e),o=isArray$4(n),r||o)return r&&o?looseCompareArrays(e,n):!1;if(r=isObject$5(e),o=isObject$5(n),r||o){if(!r||!o)return!1;const u=Object.keys(e).length,s=Object.keys(n).length;if(u!==s)return!1;for(const w in e){const g=e.hasOwnProperty(w),v=n.hasOwnProperty(w);if(g&&!v||!g&&v||!looseEqual(e[w],n[w]))return!1}}return String(e)===String(n)}function looseIndexOf(e,n){return e.findIndex(r=>looseEqual(r,n))}const toDisplayString$1=e=>isString$4(e)?e:e==null?"":isArray$4(e)||isObject$5(e)&&(e.toString===objectToString$3||!isFunction$3(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,n)=>n&&n.__v_isRef?replacer(e,n.value):isMap(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((r,[o,u],s)=>(r[stringifySymbol(o,s)+" =>"]=u,r),{})}:isSet(n)?{[`Set(${n.size})`]:[...n.values()].map(r=>stringifySymbol(r))}:isSymbol$2(n)?stringifySymbol(n):isObject$5(n)&&!isArray$4(n)&&!isPlainObject$4(n)?String(n):n,stringifySymbol=(e,n="")=>{var r;return isSymbol$2(e)?`Symbol(${(r=e.description)!=null?r:n})`:e};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!n&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const r=activeEffectScope;try{return activeEffectScope=this,n()}finally{activeEffectScope=r}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(n){if(this._active){let r,o;for(r=0,o=this.effects.length;r<o;r++)this.effects[r].stop();for(r=0,o=this.cleanups.length;r<o;r++)this.cleanups[r]();if(this.scopes)for(r=0,o=this.scopes.length;r<o;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!n){const u=this.parent.scopes.pop();u&&u!==this&&(this.parent.scopes[this.index]=u,u.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,n=activeEffectScope){n&&n.active&&n.effects.push(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e){activeEffectScope&&activeEffectScope.cleanups.push(e)}let activeEffect;class ReactiveEffect{constructor(n,r,o,u){this.fn=n,this.trigger=r,this.scheduler=o,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,recordEffectScope(this,u)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,pauseTracking();for(let n=0;n<this._depsLength;n++){const r=this.deps[n];if(r.computed&&(triggerComputed(r.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),resetTracking()}return this._dirtyLevel>=4}set dirty(n){this._dirtyLevel=n?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let n=shouldTrack,r=activeEffect;try{return shouldTrack=!0,activeEffect=this,this._runnings++,preCleanupEffect(this),this.fn()}finally{postCleanupEffect(this),this._runnings--,activeEffect=r,shouldTrack=n}}stop(){this.active&&(preCleanupEffect(this),postCleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function triggerComputed(e){return e.value}function preCleanupEffect(e){e._trackId++,e._depsLength=0}function postCleanupEffect(e){if(e.deps.length>e._depsLength){for(let n=e._depsLength;n<e.deps.length;n++)cleanupDepEffect(e.deps[n],e);e.deps.length=e._depsLength}}function cleanupDepEffect(e,n){const r=e.get(n);r!==void 0&&n._trackId!==r&&(e.delete(n),e.size===0&&e.cleanup())}function effect(e,n){e.effect instanceof ReactiveEffect&&(e=e.effect.fn);const r=new ReactiveEffect(e,NOOP,()=>{r.dirty&&r.run()});n&&(extend$3(r,n),n.scope&&recordEffectScope(r,n.scope)),(!n||!n.lazy)&&r.run();const o=r.run.bind(r);return o.effect=r,o}let shouldTrack=!0,pauseScheduleStack=0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function pauseScheduling(){pauseScheduleStack++}function resetScheduling(){for(pauseScheduleStack--;!pauseScheduleStack&&queueEffectSchedulers.length;)queueEffectSchedulers.shift()()}function trackEffect(e,n,r){if(n.get(e)!==e._trackId){n.set(e,e._trackId);const o=e.deps[e._depsLength];o!==n?(o&&cleanupDepEffect(o,e),e.deps[e._depsLength++]=n):e._depsLength++}}const queueEffectSchedulers=[];function triggerEffects(e,n,r){pauseScheduling();for(const o of e.keys()){let u;o._dirtyLevel<n&&(u!=null?u:u=e.get(o)===o._trackId)&&(o._shouldSchedule||(o._shouldSchedule=o._dirtyLevel===0),o._dirtyLevel=n),o._shouldSchedule&&(u!=null?u:u=e.get(o)===o._trackId)&&(o.trigger(),(!o._runnings||o.allowRecurse)&&o._dirtyLevel!==2&&(o._shouldSchedule=!1,o.scheduler&&queueEffectSchedulers.push(o.scheduler)))}resetScheduling()}const createDep=(e,n)=>{const r=new Map;return r.cleanup=e,r.computed=n,r},targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");function track(e,n,r){if(shouldTrack&&activeEffect){let o=targetMap.get(e);o||targetMap.set(e,o=new Map);let u=o.get(r);u||o.set(r,u=createDep(()=>o.delete(r))),trackEffect(activeEffect,u)}}function trigger$1(e,n,r,o,u,s){const w=targetMap.get(e);if(!w)return;let g=[];if(n==="clear")g=[...w.values()];else if(r==="length"&&isArray$4(e)){const v=Number(o);w.forEach((y,m)=>{(m==="length"||!isSymbol$2(m)&&m>=v)&&g.push(y)})}else switch(r!==void 0&&g.push(w.get(r)),n){case"add":isArray$4(e)?isIntegerKey(r)&&g.push(w.get("length")):(g.push(w.get(ITERATE_KEY)),isMap(e)&&g.push(w.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$4(e)||(g.push(w.get(ITERATE_KEY)),isMap(e)&&g.push(w.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&g.push(w.get(ITERATE_KEY));break}pauseScheduling();for(const v of g)v&&triggerEffects(v,4);resetScheduling()}function getDepFromReactive(e,n){const r=targetMap.get(e);return r&&r.get(n)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol$2)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(n=>{e[n]=function(...r){const o=toRaw(this);for(let s=0,w=this.length;s<w;s++)track(o,"get",s+"");const u=o[n](...r);return u===-1||u===!1?o[n](...r.map(toRaw)):u}}),["push","pop","shift","unshift","splice"].forEach(n=>{e[n]=function(...r){pauseTracking(),pauseScheduling();const o=toRaw(this)[n].apply(this,r);return resetScheduling(),resetTracking(),o}}),e}function hasOwnProperty$d(e){isSymbol$2(e)||(e=String(e));const n=toRaw(this);return track(n,"has",e),n.hasOwnProperty(e)}class BaseReactiveHandler{constructor(n=!1,r=!1){this._isReadonly=n,this._isShallow=r}get(n,r,o){const u=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!u;if(r==="__v_isReadonly")return u;if(r==="__v_isShallow")return s;if(r==="__v_raw")return o===(u?s?shallowReadonlyMap:readonlyMap:s?shallowReactiveMap:reactiveMap).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(o)?n:void 0;const w=isArray$4(n);if(!u){if(w&&hasOwn$1(arrayInstrumentations,r))return Reflect.get(arrayInstrumentations,r,o);if(r==="hasOwnProperty")return hasOwnProperty$d}const g=Reflect.get(n,r,o);return(isSymbol$2(r)?builtInSymbols.has(r):isNonTrackableKeys(r))||(u||track(n,"get",r),s)?g:isRef(g)?w&&isIntegerKey(r)?g:g.value:isObject$5(g)?u?readonly(g):reactive(g):g}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(n=!1){super(!1,n)}set(n,r,o,u){let s=n[r];if(!this._isShallow){const v=isReadonly(s);if(!isShallow(o)&&!isReadonly(o)&&(s=toRaw(s),o=toRaw(o)),!isArray$4(n)&&isRef(s)&&!isRef(o))return v?!1:(s.value=o,!0)}const w=isArray$4(n)&&isIntegerKey(r)?Number(r)<n.length:hasOwn$1(n,r),g=Reflect.set(n,r,o,u);return n===toRaw(u)&&(w?hasChanged(o,s)&&trigger$1(n,"set",r,o):trigger$1(n,"add",r,o)),g}deleteProperty(n,r){const o=hasOwn$1(n,r);n[r];const u=Reflect.deleteProperty(n,r);return u&&o&&trigger$1(n,"delete",r,void 0),u}has(n,r){const o=Reflect.has(n,r);return(!isSymbol$2(r)||!builtInSymbols.has(r))&&track(n,"has",r),o}ownKeys(n){return track(n,"iterate",isArray$4(n)?"length":ITERATE_KEY),Reflect.ownKeys(n)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(n=!1){super(!0,n)}set(n,r){return!0}deleteProperty(n,r){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get$1(e,n,r=!1,o=!1){e=e.__v_raw;const u=toRaw(e),s=toRaw(n);r||(hasChanged(n,s)&&track(u,"get",n),track(u,"get",s));const{has:w}=getProto(u),g=o?toShallow:r?toReadonly:toReactive;if(w.call(u,n))return g(e.get(n));if(w.call(u,s))return g(e.get(s));e!==u&&e.get(n)}function has(e,n=!1){const r=this.__v_raw,o=toRaw(r),u=toRaw(e);return n||(hasChanged(e,u)&&track(o,"has",e),track(o,"has",u)),e===u?r.has(e):r.has(e)||r.has(u)}function size$1(e,n=!1){return e=e.__v_raw,!n&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const n=toRaw(this);return getProto(n).has.call(n,e)||(n.add(e),trigger$1(n,"add",e,e)),this}function set(e,n){n=toRaw(n);const r=toRaw(this),{has:o,get:u}=getProto(r);let s=o.call(r,e);s||(e=toRaw(e),s=o.call(r,e));const w=u.call(r,e);return r.set(e,n),s?hasChanged(n,w)&&trigger$1(r,"set",e,n):trigger$1(r,"add",e,n),this}function deleteEntry(e){const n=toRaw(this),{has:r,get:o}=getProto(n);let u=r.call(n,e);u||(e=toRaw(e),u=r.call(n,e)),o&&o.call(n,e);const s=n.delete(e);return u&&trigger$1(n,"delete",e,void 0),s}function clear(){const e=toRaw(this),n=e.size!==0,r=e.clear();return n&&trigger$1(e,"clear",void 0,void 0),r}function createForEach(e,n){return function(o,u){const s=this,w=s.__v_raw,g=toRaw(w),v=n?toShallow:e?toReadonly:toReactive;return!e&&track(g,"iterate",ITERATE_KEY),w.forEach((y,m)=>o.call(u,v(y),v(m),s))}}function createIterableMethod(e,n,r){return function(...o){const u=this.__v_raw,s=toRaw(u),w=isMap(s),g=e==="entries"||e===Symbol.iterator&&w,v=e==="keys"&&w,y=u[e](...o),m=r?toShallow:n?toReadonly:toReactive;return!n&&track(s,"iterate",v?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:d,done:f}=y.next();return f?{value:d,done:f}:{value:g?[m(d[0]),m(d[1])]:m(d),done:f}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function createInstrumentations(){const e={get(s){return get$1(this,s)},get size(){return size$1(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},n={get(s){return get$1(this,s,!1,!0)},get size(){return size$1(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},r={get(s){return get$1(this,s,!0)},get size(){return size$1(this,!0)},has(s){return has.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},o={get(s){return get$1(this,s,!0,!0)},get size(){return size$1(this,!0)},has(s){return has.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=createIterableMethod(s,!1,!1),r[s]=createIterableMethod(s,!0,!1),n[s]=createIterableMethod(s,!1,!0),o[s]=createIterableMethod(s,!0,!0)}),[e,r,n,o]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,n){const r=n?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(o,u,s)=>u==="__v_isReactive"?!e:u==="__v_isReadonly"?e:u==="__v_raw"?o:Reflect.get(hasOwn$1(r,u)&&u in o?r:o,u,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,n,r,o,u){if(!isObject$5(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const s=u.get(e);if(s)return s;const w=getTargetType(e);if(w===0)return e;const g=new Proxy(e,w===2?o:r);return u.set(e,g),g}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return e?!!e.__v_raw:!1}function toRaw(e){const n=e&&e.__v_raw;return n?toRaw(n):e}function markRaw(e){return Object.isExtensible(e)&&def(e,"__v_skip",!0),e}const toReactive=e=>isObject$5(e)?reactive(e):e,toReadonly=e=>isObject$5(e)?readonly(e):e;class ComputedRefImpl{constructor(n,r,o,u){this.getter=n,this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ReactiveEffect(()=>n(this._value),()=>triggerRefValue(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!u,this.__v_isReadonly=o}get value(){const n=toRaw(this);return(!n._cacheable||n.effect.dirty)&&hasChanged(n._value,n._value=n.effect.run())&&triggerRefValue(n,4),trackRefValue(n),n.effect._dirtyLevel>=2&&triggerRefValue(n,2),n._value}set value(n){this._setter(n)}get _dirty(){return this.effect.dirty}set _dirty(n){this.effect.dirty=n}}function computed$1(e,n,r=!1){let o,u;const s=isFunction$3(e);return s?(o=e,u=NOOP):(o=e.get,u=e.set),new ComputedRefImpl(o,u,s||!u,r)}function trackRefValue(e){var n;shouldTrack&&activeEffect&&(e=toRaw(e),trackEffect(activeEffect,(n=e.dep)!=null?n:e.dep=createDep(()=>e.dep=void 0,e instanceof ComputedRefImpl?e:void 0)))}function triggerRefValue(e,n=4,r){e=toRaw(e);const o=e.dep;o&&triggerEffects(o,n)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,n){return isRef(e)?e:new RefImpl(e,n)}class RefImpl{constructor(n,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?n:toRaw(n),this._value=r?n:toReactive(n)}get value(){return trackRefValue(this),this._value}set value(n){const r=this.__v_isShallow||isShallow(n)||isReadonly(n);n=r?n:toRaw(n),hasChanged(n,this._rawValue)&&(this._rawValue=n,this._value=r?n:toReactive(n),triggerRefValue(this,4))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,n,r)=>unref(Reflect.get(e,n,r)),set:(e,n,r,o)=>{const u=e[n];return isRef(u)&&!isRef(r)?(u.value=r,!0):Reflect.set(e,n,r,o)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}function toRefs(e){const n=isArray$4(e)?new Array(e.length):{};for(const r in e)n[r]=propertyToRef(e,r);return n}class ObjectRefImpl{constructor(n,r,o){this._object=n,this._key=r,this._defaultValue=o,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(e,n,r){return isRef(e)?e:isFunction$3(e)?new GetterRefImpl(e):isObject$5(e)&&arguments.length>1?propertyToRef(e,n,r):ref(e)}function propertyToRef(e,n,r){const o=e[n];return isRef(o)?o:new ObjectRefImpl(e,n,r)}/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack$1=[];function warn$1$1(e,...n){pauseTracking();const r=stack$1.length?stack$1[stack$1.length-1].component:null,o=r&&r.appContext.config.warnHandler,u=getComponentTrace();if(o)callWithErrorHandling(o,r,11,[e+n.map(s=>{var w,g;return(g=(w=s.toString)==null?void 0:w.call(s))!=null?g:JSON.stringify(s)}).join(""),r&&r.proxy,u.map(({vnode:s})=>`at <${formatComponentName(r,s.type)}>`).join(`
`),u]);else{const s=[`[Vue warn]: ${e}`,...n];u.length&&s.push(`
`,...formatTrace(u)),console.warn(...s)}resetTracking()}function getComponentTrace(){let e=stack$1[stack$1.length-1];if(!e)return[];const n=[];for(;e;){const r=n[0];r&&r.vnode===e?r.recurseCount++:n.push({vnode:e,recurseCount:0});const o=e.component&&e.component.parent;e=o&&o.vnode}return n}function formatTrace(e){const n=[];return e.forEach((r,o)=>{n.push(...o===0?[]:[`
`],...formatTraceEntry(r))}),n}function formatTraceEntry({vnode:e,recurseCount:n}){const r=n>0?`... (${n} recursive calls)`:"",o=e.component?e.component.parent==null:!1,u=` at <${formatComponentName(e.component,e.type,o)}`,s=">"+r;return e.props?[u,...formatProps(e.props),s]:[u+s]}function formatProps(e){const n=[],r=Object.keys(e);return r.slice(0,3).forEach(o=>{n.push(...formatProp(o,e[o]))}),r.length>3&&n.push(" ..."),n}function formatProp(e,n,r){return isString$4(n)?(n=JSON.stringify(n),r?n:[`${e}=${n}`]):typeof n=="number"||typeof n=="boolean"||n==null?r?n:[`${e}=${n}`]:isRef(n)?(n=formatProp(e,toRaw(n.value),!0),r?n:[`${e}=Ref<`,n,">"]):isFunction$3(n)?[`${e}=fn${n.name?`<${n.name}>`:""}`]:(n=toRaw(n),r?n:[`${e}=`,n])}function callWithErrorHandling(e,n,r,o){try{return o?e(...o):e()}catch(u){handleError(u,n,r)}}function callWithAsyncErrorHandling(e,n,r,o){if(isFunction$3(e)){const u=callWithErrorHandling(e,n,r,o);return u&&isPromise$1(u)&&u.catch(s=>{handleError(s,n,r)}),u}if(isArray$4(e)){const u=[];for(let s=0;s<e.length;s++)u.push(callWithAsyncErrorHandling(e[s],n,r,o));return u}}function handleError(e,n,r,o=!0){const u=n?n.vnode:null;if(n){let s=n.parent;const w=n.proxy,g=`https://vuejs.org/error-reference/#runtime-${r}`;for(;s;){const y=s.ec;if(y){for(let m=0;m<y.length;m++)if(y[m](e,w,g)===!1)return}s=s.parent}const v=n.appContext.config.errorHandler;if(v){pauseTracking(),callWithErrorHandling(v,null,10,[e,w,g]),resetTracking();return}}logError(e,r,u,o)}function logError(e,n,r,o=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const n=currentFlushPromise||resolvedPromise;return e?n.then(this?e.bind(this):e):n}function findInsertionIndex(e){let n=flushIndex+1,r=queue.length;for(;n<r;){const o=n+r>>>1,u=queue[o],s=getId(u);s<e||s===e&&u.pre?n=o+1:r=o}return n}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const n=queue.indexOf(e);n>flushIndex&&queue.splice(n,1)}function queuePostFlushCb(e){isArray$4(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,n,r=isFlushing?flushIndex+1:0){for(;r<queue.length;r++){const o=queue[r];if(o&&o.pre){if(e&&o.id!==e.uid)continue;queue.splice(r,1),r--,o()}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const n=[...new Set(pendingPostFlushCbs)].sort((r,o)=>getId(r)-getId(o));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...n);return}for(activePostFlushCbs=n,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,n)=>{const r=getId(e)-getId(n);if(r===0){if(e.pre&&!n.pre)return-1;if(n.pre&&!e.pre)return 1}return r};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const n=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&r.active!==!1&&callWithErrorHandling(r,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(e,n,...r){if(e.isUnmounted)return;const o=e.vnode.props||EMPTY_OBJ;let u=r;const s=n.startsWith("update:"),w=s&&n.slice(7);if(w&&w in o){const m=`${w==="modelValue"?"model":w}Modifiers`,{number:d,trim:f}=o[m]||EMPTY_OBJ;f&&(u=r.map(x=>isString$4(x)?x.trim():x)),d&&(u=r.map(looseToNumber))}let g,v=o[g=toHandlerKey(n)]||o[g=toHandlerKey(camelize(n))];!v&&s&&(v=o[g=toHandlerKey(hyphenate(n))]),v&&callWithAsyncErrorHandling(v,e,6,u);const y=o[g+"Once"];if(y){if(!e.emitted)e.emitted={};else if(e.emitted[g])return;e.emitted[g]=!0,callWithAsyncErrorHandling(y,e,6,u)}}function normalizeEmitsOptions(e,n,r=!1){const o=n.emitsCache,u=o.get(e);if(u!==void 0)return u;const s=e.emits;let w={},g=!1;if(!isFunction$3(e)){const v=y=>{const m=normalizeEmitsOptions(y,n,!0);m&&(g=!0,extend$3(w,m))};!r&&n.mixins.length&&n.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}return!s&&!g?(isObject$5(e)&&o.set(e,null),null):(isArray$4(s)?s.forEach(v=>w[v]=null):extend$3(w,s),isObject$5(e)&&o.set(e,w),w)}function isEmitListener(e,n){return!e||!isOn(n)?!1:(n=n.slice(2).replace(/Once$/,""),hasOwn$1(e,n[0].toLowerCase()+n.slice(1))||hasOwn$1(e,hyphenate(n))||hasOwn$1(e,n))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const n=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,n}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}function withCtx(e,n=currentRenderingInstance,r){if(!n||e._n)return e;const o=(...u)=>{o._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(n);let w;try{w=e(...u)}finally{setCurrentRenderingInstance(s),o._d&&setBlockTracking(1)}return w};return o._n=!0,o._c=!0,o._d=!0,o}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:n,vnode:r,proxy:o,withProxy:u,propsOptions:[s],slots:w,attrs:g,emit:v,render:y,renderCache:m,props:d,data:f,setupState:x,ctx:k,inheritAttrs:P}=e,S=setCurrentRenderingInstance(e);let E,M;try{if(r.shapeFlag&4){const D=u||o,I=D;E=normalizeVNode(y.call(I,D,m,d,x,f,k)),M=g}else{const D=n;E=normalizeVNode(D.length>1?D(d,{attrs:g,slots:w,emit:v}):D(d,null)),M=n.props?g:getFunctionalFallthrough(g)}}catch(D){blockStack.length=0,handleError(D,e,1),E=createVNode(Comment)}let T=E;if(M&&P!==!1){const D=Object.keys(M),{shapeFlag:I}=T;D.length&&I&7&&(s&&D.some(isModelListener)&&(M=filterModelListeners(M,s)),T=cloneVNode(T,M,!1,!0))}return r.dirs&&(T=cloneVNode(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(r.dirs):r.dirs),r.transition&&(T.transition=r.transition),E=T,setCurrentRenderingInstance(S),E}const getFunctionalFallthrough=e=>{let n;for(const r in e)(r==="class"||r==="style"||isOn(r))&&((n||(n={}))[r]=e[r]);return n},filterModelListeners=(e,n)=>{const r={};for(const o in e)(!isModelListener(o)||!(o.slice(9)in n))&&(r[o]=e[o]);return r};function shouldUpdateComponent(e,n,r){const{props:o,children:u,component:s}=e,{props:w,children:g,patchFlag:v}=n,y=s.emitsOptions;if(n.dirs||n.transition)return!0;if(r&&v>=0){if(v&1024)return!0;if(v&16)return o?hasPropsChanged(o,w,y):!!w;if(v&8){const m=n.dynamicProps;for(let d=0;d<m.length;d++){const f=m[d];if(w[f]!==o[f]&&!isEmitListener(y,f))return!0}}}else return(u||g)&&(!g||!g.$stable)?!0:o===w?!1:o?w?hasPropsChanged(o,w,y):!0:!!w;return!1}function hasPropsChanged(e,n,r){const o=Object.keys(n);if(o.length!==Object.keys(e).length)return!0;for(let u=0;u<o.length;u++){const s=o[u];if(n[s]!==e[s]&&!isEmitListener(r,s))return!0}return!1}function updateHOCHostEl({vnode:e,parent:n},r){for(;n;){const o=n.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=n.vnode).el=r,n=n.parent;else break}}const COMPONENTS="components";function resolveComponent(e,n){return resolveAsset(COMPONENTS,e,!0,n)||e}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveAsset(e,n,r=!0,o=!1){const u=currentRenderingInstance||currentInstance;if(u){const s=u.type;if(e===COMPONENTS){const g=getComponentName(s,!1);if(g&&(g===n||g===camelize(n)||g===capitalize$1(camelize(n))))return s}const w=resolve(u[e]||s[e],n)||resolve(u.appContext[e],n);return!w&&o?s:w}}function resolve(e,n){return e&&(e[n]||e[camelize(n)]||e[capitalize$1(camelize(n))])}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,n){n&&n.pendingBranch?isArray$4(e)?n.effects.push(...e):n.effects.push(e):queuePostFlushCb(e)}const ssrContextKey$1=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey$1);function watchEffect(e,n){return doWatch(e,null,n)}const INITIAL_WATCHER_VALUE={};function watch(e,n,r){return doWatch(e,n,r)}function doWatch(e,n,{immediate:r,deep:o,flush:u,once:s,onTrack:w,onTrigger:g}=EMPTY_OBJ){if(n&&s){const N=n;n=(...O)=>{N(...O),I()}}const v=currentInstance,y=N=>o===!0?N:traverse(N,o===!1?1:void 0);let m,d=!1,f=!1;if(isRef(e)?(m=()=>e.value,d=isShallow(e)):isReactive(e)?(m=()=>y(e),d=!0):isArray$4(e)?(f=!0,d=e.some(N=>isReactive(N)||isShallow(N)),m=()=>e.map(N=>{if(isRef(N))return N.value;if(isReactive(N))return y(N);if(isFunction$3(N))return callWithErrorHandling(N,v,2)})):isFunction$3(e)?n?m=()=>callWithErrorHandling(e,v,2):m=()=>(x&&x(),callWithAsyncErrorHandling(e,v,3,[k])):m=NOOP,n&&o){const N=m;m=()=>traverse(N())}let x,k=N=>{x=T.onStop=()=>{callWithErrorHandling(N,v,4),x=T.onStop=void 0}},P;if(isInSSRComponentSetup)if(k=NOOP,n?r&&callWithAsyncErrorHandling(n,v,3,[m(),f?[]:void 0,k]):m(),u==="sync"){const N=useSSRContext();P=N.__watcherHandles||(N.__watcherHandles=[])}else return NOOP;let S=f?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const E=()=>{if(!(!T.active||!T.dirty))if(n){const N=T.run();(o||d||(f?N.some((O,F)=>hasChanged(O,S[F])):hasChanged(N,S)))&&(x&&x(),callWithAsyncErrorHandling(n,v,3,[N,S===INITIAL_WATCHER_VALUE?void 0:f&&S[0]===INITIAL_WATCHER_VALUE?[]:S,k]),S=N)}else T.run()};E.allowRecurse=!!n;let M;u==="sync"?M=E:u==="post"?M=()=>queuePostRenderEffect(E,v&&v.suspense):(E.pre=!0,v&&(E.id=v.uid),M=()=>queueJob(E));const T=new ReactiveEffect(m,NOOP,M),D=getCurrentScope(),I=()=>{T.stop(),D&&remove(D.effects,T)};return n?r?E():S=T.run():u==="post"?queuePostRenderEffect(T.run.bind(T),v&&v.suspense):T.run(),P&&P.push(I),I}function instanceWatch(e,n,r){const o=this.proxy,u=isString$4(e)?e.includes(".")?createPathGetter(o,e):()=>o[e]:e.bind(o,o);let s;isFunction$3(n)?s=n:(s=n.handler,r=n);const w=setCurrentInstance(this),g=doWatch(u,s.bind(o),r);return w(),g}function createPathGetter(e,n){const r=n.split(".");return()=>{let o=e;for(let u=0;u<r.length&&o;u++)o=o[r[u]];return o}}function traverse(e,n=1/0,r){if(n<=0||!isObject$5(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),n--,isRef(e))traverse(e.value,n,r);else if(isArray$4(e))for(let o=0;o<e.length;o++)traverse(e[o],n,r);else if(isSet(e)||isMap(e))e.forEach(o=>{traverse(o,n,r)});else if(isPlainObject$4(e))for(const o in e)traverse(e[o],n,r);return e}function withDirectives(e,n){if(currentRenderingInstance===null)return e;const r=getExposeProxy(currentRenderingInstance)||currentRenderingInstance.proxy,o=e.dirs||(e.dirs=[]);for(let u=0;u<n.length;u++){let[s,w,g,v=EMPTY_OBJ]=n[u];s&&(isFunction$3(s)&&(s={mounted:s,updated:s}),s.deep&&traverse(w),o.push({dir:s,instance:r,value:w,oldValue:void 0,arg:g,modifiers:v}))}return e}function invokeDirectiveHook(e,n,r,o){const u=e.dirs,s=n&&n.dirs;for(let w=0;w<u.length;w++){const g=u[w];s&&(g.oldValue=s[w].value);let v=g.dir[o];v&&(pauseTracking(),callWithAsyncErrorHandling(v,r,8,[e.el,g,e,n]),resetTracking())}}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(e,{slots:n}){const r=getCurrentInstance(),o=useTransitionState();return()=>{const u=n.default&&getTransitionRawChildren(n.default(),!0);if(!u||!u.length)return;let s=u[0];if(u.length>1){for(const f of u)if(f.type!==Comment){s=f;break}}const w=toRaw(e),{mode:g}=w;if(o.isLeaving)return emptyPlaceholder(s);const v=getKeepAliveChild(s);if(!v)return emptyPlaceholder(s);const y=resolveTransitionHooks(v,w,o,r);setTransitionHooks(v,y);const m=r.subTree,d=m&&getKeepAliveChild(m);if(d&&d.type!==Comment&&!isSameVNodeType(v,d)){const f=resolveTransitionHooks(d,w,o,r);if(setTransitionHooks(d,f),g==="out-in"&&v.type!==Comment)return o.isLeaving=!0,f.afterLeave=()=>{o.isLeaving=!1,r.update.active!==!1&&(r.effect.dirty=!0,r.update())},emptyPlaceholder(s);g==="in-out"&&v.type!==Comment&&(f.delayLeave=(x,k,P)=>{const S=getLeavingNodesForType(o,d);S[String(d.key)]=d,x[leaveCbKey]=()=>{k(),x[leaveCbKey]=void 0,delete y.delayedLeave},y.delayedLeave=P})}return s}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,n){const{leavingVNodes:r}=e;let o=r.get(n.type);return o||(o=Object.create(null),r.set(n.type,o)),o}function resolveTransitionHooks(e,n,r,o){const{appear:u,mode:s,persisted:w=!1,onBeforeEnter:g,onEnter:v,onAfterEnter:y,onEnterCancelled:m,onBeforeLeave:d,onLeave:f,onAfterLeave:x,onLeaveCancelled:k,onBeforeAppear:P,onAppear:S,onAfterAppear:E,onAppearCancelled:M}=n,T=String(e.key),D=getLeavingNodesForType(r,e),I=(F,U)=>{F&&callWithAsyncErrorHandling(F,o,9,U)},N=(F,U)=>{const Y=U[1];I(F,U),isArray$4(F)?F.every(Q=>Q.length<=1)&&Y():F.length<=1&&Y()},O={mode:s,persisted:w,beforeEnter(F){let U=g;if(!r.isMounted)if(u)U=P||g;else return;F[leaveCbKey]&&F[leaveCbKey](!0);const Y=D[T];Y&&isSameVNodeType(e,Y)&&Y.el[leaveCbKey]&&Y.el[leaveCbKey](),I(U,[F])},enter(F){let U=v,Y=y,Q=m;if(!r.isMounted)if(u)U=S||v,Y=E||y,Q=M||m;else return;let q=!1;const ne=F[enterCbKey$1]=J=>{q||(q=!0,J?I(Q,[F]):I(Y,[F]),O.delayedLeave&&O.delayedLeave(),F[enterCbKey$1]=void 0)};U?N(U,[F,ne]):ne()},leave(F,U){const Y=String(e.key);if(F[enterCbKey$1]&&F[enterCbKey$1](!0),r.isUnmounting)return U();I(d,[F]);let Q=!1;const q=F[leaveCbKey]=ne=>{Q||(Q=!0,U(),ne?I(k,[F]):I(x,[F]),F[leaveCbKey]=void 0,D[Y]===e&&delete D[Y])};D[Y]=e,f?N(f,[F,q]):q()},clone(F){return resolveTransitionHooks(F,n,r,o)}};return O}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){if(!isKeepAlive(e))return e;const{shapeFlag:n,children:r}=e;if(r){if(n&16)return r[0];if(n&32&&isFunction$3(r.default))return r.default()}}function setTransitionHooks(e,n){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,n):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function getTransitionRawChildren(e,n=!1,r){let o=[],u=0;for(let s=0;s<e.length;s++){let w=e[s];const g=r==null?w.key:String(r)+String(w.key!=null?w.key:s);w.type===Fragment?(w.patchFlag&128&&u++,o=o.concat(getTransitionRawChildren(w.children,n,g))):(n||w.type!==Comment)&&o.push(g!=null?cloneVNode(w,{key:g}):w)}if(u>1)for(let s=0;s<o.length;s++)o[s].patchFlag=-2;return o}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(e,n){return isFunction$3(e)?(()=>extend$3({name:e.name},n,{setup:e}))():e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,n){registerKeepAliveHook(e,"a",n)}function onDeactivated(e,n){registerKeepAliveHook(e,"da",n)}function registerKeepAliveHook(e,n,r=currentInstance){const o=e.__wdc||(e.__wdc=()=>{let u=r;for(;u;){if(u.isDeactivated)return;u=u.parent}return e()});if(injectHook(n,o,r),r){let u=r.parent;for(;u&&u.parent;)isKeepAlive(u.parent.vnode)&&injectToKeepAliveRoot(o,n,r,u),u=u.parent}}function injectToKeepAliveRoot(e,n,r,o){const u=injectHook(n,e,o,!0);onUnmounted(()=>{remove(o[n],u)},r)}function injectHook(e,n,r=currentInstance,o=!1){if(r){const u=r[e]||(r[e]=[]),s=n.__weh||(n.__weh=(...w)=>{if(r.isUnmounted)return;pauseTracking();const g=setCurrentInstance(r),v=callWithAsyncErrorHandling(n,r,e,w);return g(),resetTracking(),v});return o?u.unshift(s):u.push(s),s}}const createHook=e=>(n,r=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...o)=>n(...o),r),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,n=currentInstance){injectHook("ec",e,n)}function renderList(e,n,r,o){let u;const s=r&&r[o];if(isArray$4(e)||isString$4(e)){u=new Array(e.length);for(let w=0,g=e.length;w<g;w++)u[w]=n(e[w],w,void 0,s&&s[w])}else if(typeof e=="number"){u=new Array(e);for(let w=0;w<e;w++)u[w]=n(w+1,w,void 0,s&&s[w])}else if(isObject$5(e))if(e[Symbol.iterator])u=Array.from(e,(w,g)=>n(w,g,void 0,s&&s[g]));else{const w=Object.keys(e);u=new Array(w.length);for(let g=0,v=w.length;g<v;g++){const y=w[g];u[g]=n(e[y],y,g,s&&s[g])}}else u=[];return r&&(r[o]=u),u}function createSlots(e,n){for(let r=0;r<n.length;r++){const o=n[r];if(isArray$4(o))for(let u=0;u<o.length;u++)e[o[u].name]=o[u].fn;else o&&(e[o.name]=o.key?(...u)=>{const s=o.fn(...u);return s&&(s.key=o.key),s}:o.fn)}return e}function renderSlot(e,n,r={},o,u){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return n!=="default"&&(r.name=n),createVNode("slot",r,o&&o());let s=e[n];s&&s._c&&(s._d=!1),openBlock();const w=s&&ensureValidVNode$1(s(r)),g=createBlock(Fragment,{key:r.key||w&&w.key||`_${n}`},w||(o?o():[]),w&&e._===1?64:-2);return!u&&g.scopeId&&(g.slotScopeIds=[g.scopeId+"-s"]),s&&s._c&&(s._d=!0),g}function ensureValidVNode$1(e){return e.some(n=>isVNode$1(n)?!(n.type===Comment||n.type===Fragment&&!ensureValidVNode$1(n.children)):!0)?e:null}function toHandlers(e,n){const r={};for(const o in e)r[n&&/[A-Z]/.test(o)?`on:${o}`:toHandlerKey(o)]=e[o];return r}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend$3(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,queueJob(e.update)}),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,n)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn$1(e,n),PublicInstanceProxyHandlers={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:r,setupState:o,data:u,props:s,accessCache:w,type:g,appContext:v}=e;let y;if(n[0]!=="$"){const x=w[n];if(x!==void 0)switch(x){case 1:return o[n];case 2:return u[n];case 4:return r[n];case 3:return s[n]}else{if(hasSetupBinding(o,n))return w[n]=1,o[n];if(u!==EMPTY_OBJ&&hasOwn$1(u,n))return w[n]=2,u[n];if((y=e.propsOptions[0])&&hasOwn$1(y,n))return w[n]=3,s[n];if(r!==EMPTY_OBJ&&hasOwn$1(r,n))return w[n]=4,r[n];shouldCacheAccess&&(w[n]=0)}}const m=publicPropertiesMap[n];let d,f;if(m)return n==="$attrs"&&track(e.attrs,"get",""),m(e);if((d=g.__cssModules)&&(d=d[n]))return d;if(r!==EMPTY_OBJ&&hasOwn$1(r,n))return w[n]=4,r[n];if(f=v.config.globalProperties,hasOwn$1(f,n))return f[n]},set({_:e},n,r){const{data:o,setupState:u,ctx:s}=e;return hasSetupBinding(u,n)?(u[n]=r,!0):o!==EMPTY_OBJ&&hasOwn$1(o,n)?(o[n]=r,!0):hasOwn$1(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(s[n]=r,!0)},has({_:{data:e,setupState:n,accessCache:r,ctx:o,appContext:u,propsOptions:s}},w){let g;return!!r[w]||e!==EMPTY_OBJ&&hasOwn$1(e,w)||hasSetupBinding(n,w)||(g=s[0])&&hasOwn$1(g,w)||hasOwn$1(o,w)||hasOwn$1(publicPropertiesMap,w)||hasOwn$1(u.config.globalProperties,w)},defineProperty(e,n,r){return r.get!=null?e._.accessCache[n]=0:hasOwn$1(r,"value")&&this.set(e,n,r.value,null),Reflect.defineProperty(e,n,r)}};function normalizePropsOrEmits(e){return isArray$4(e)?e.reduce((n,r)=>(n[r]=null,n),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const n=resolveMergedOptions(e),r=e.proxy,o=e.ctx;shouldCacheAccess=!1,n.beforeCreate&&callHook$1(n.beforeCreate,e,"bc");const{data:u,computed:s,methods:w,watch:g,provide:v,inject:y,created:m,beforeMount:d,mounted:f,beforeUpdate:x,updated:k,activated:P,deactivated:S,beforeDestroy:E,beforeUnmount:M,destroyed:T,unmounted:D,render:I,renderTracked:N,renderTriggered:O,errorCaptured:F,serverPrefetch:U,expose:Y,inheritAttrs:Q,components:q,directives:ne,filters:J}=n;if(y&&resolveInjections(y,o,null),w)for(const j in w){const Z=w[j];isFunction$3(Z)&&(o[j]=Z.bind(r))}if(u){const j=u.call(r,r);isObject$5(j)&&(e.data=reactive(j))}if(shouldCacheAccess=!0,s)for(const j in s){const Z=s[j],W=isFunction$3(Z)?Z.bind(r,r):isFunction$3(Z.get)?Z.get.bind(r,r):NOOP,te=!isFunction$3(Z)&&isFunction$3(Z.set)?Z.set.bind(r):NOOP,le=computed({get:W,set:te});Object.defineProperty(o,j,{enumerable:!0,configurable:!0,get:()=>le.value,set:oe=>le.value=oe})}if(g)for(const j in g)createWatcher(g[j],o,r,j);if(v){const j=isFunction$3(v)?v.call(r):v;Reflect.ownKeys(j).forEach(Z=>{provide(Z,j[Z])})}m&&callHook$1(m,e,"c");function X(j,Z){isArray$4(Z)?Z.forEach(W=>j(W.bind(r))):Z&&j(Z.bind(r))}if(X(onBeforeMount,d),X(onMounted,f),X(onBeforeUpdate,x),X(onUpdated,k),X(onActivated,P),X(onDeactivated,S),X(onErrorCaptured,F),X(onRenderTracked,N),X(onRenderTriggered,O),X(onBeforeUnmount,M),X(onUnmounted,D),X(onServerPrefetch,U),isArray$4(Y))if(Y.length){const j=e.exposed||(e.exposed={});Y.forEach(Z=>{Object.defineProperty(j,Z,{get:()=>r[Z],set:W=>r[Z]=W})})}else e.exposed||(e.exposed={});I&&e.render===NOOP&&(e.render=I),Q!=null&&(e.inheritAttrs=Q),q&&(e.components=q),ne&&(e.directives=ne)}function resolveInjections(e,n,r=NOOP){isArray$4(e)&&(e=normalizeInject(e));for(const o in e){const u=e[o];let s;isObject$5(u)?"default"in u?s=inject(u.from||o,u.default,!0):s=inject(u.from||o):s=inject(u),isRef(s)?Object.defineProperty(n,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:w=>s.value=w}):n[o]=s}}function callHook$1(e,n,r){callWithAsyncErrorHandling(isArray$4(e)?e.map(o=>o.bind(n.proxy)):e.bind(n.proxy),n,r)}function createWatcher(e,n,r,o){const u=o.includes(".")?createPathGetter(r,o):()=>r[o];if(isString$4(e)){const s=n[e];isFunction$3(s)&&watch(u,s)}else if(isFunction$3(e))watch(u,e.bind(r));else if(isObject$5(e))if(isArray$4(e))e.forEach(s=>createWatcher(s,n,r,o));else{const s=isFunction$3(e.handler)?e.handler.bind(r):n[e.handler];isFunction$3(s)&&watch(u,s,e)}}function resolveMergedOptions(e){const n=e.type,{mixins:r,extends:o}=n,{mixins:u,optionsCache:s,config:{optionMergeStrategies:w}}=e.appContext,g=s.get(n);let v;return g?v=g:!u.length&&!r&&!o?v=n:(v={},u.length&&u.forEach(y=>mergeOptions(v,y,w,!0)),mergeOptions(v,n,w)),isObject$5(n)&&s.set(n,v),v}function mergeOptions(e,n,r,o=!1){const{mixins:u,extends:s}=n;s&&mergeOptions(e,s,r,!0),u&&u.forEach(w=>mergeOptions(e,w,r,!0));for(const w in n)if(!(o&&w==="expose")){const g=internalOptionMergeStrats[w]||r&&r[w];e[w]=g?g(e[w],n[w]):n[w]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,n){return n?e?function(){return extend$3(isFunction$3(e)?e.call(this,this):e,isFunction$3(n)?n.call(this,this):n)}:n:e}function mergeInject(e,n){return mergeObjectOptions(normalizeInject(e),normalizeInject(n))}function normalizeInject(e){if(isArray$4(e)){const n={};for(let r=0;r<e.length;r++)n[e[r]]=e[r];return n}return e}function mergeAsArray(e,n){return e?[...new Set([].concat(e,n))]:n}function mergeObjectOptions(e,n){return e?extend$3(Object.create(null),e,n):n}function mergeEmitsOrPropsOptions(e,n){return e?isArray$4(e)&&isArray$4(n)?[...new Set([...e,...n])]:extend$3(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(n!=null?n:{})):n}function mergeWatchOptions(e,n){if(!e)return n;if(!n)return e;const r=extend$3(Object.create(null),e);for(const o in n)r[o]=mergeAsArray(e[o],n[o]);return r}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,n){return function(o,u=null){isFunction$3(o)||(o=extend$3({},o)),u!=null&&!isObject$5(u)&&(u=null);const s=createAppContext(),w=new WeakSet;let g=!1;const v=s.app={_uid:uid$1++,_component:o,_props:u,_container:null,_context:s,_instance:null,version:version$2,get config(){return s.config},set config(y){},use(y,...m){return w.has(y)||(y&&isFunction$3(y.install)?(w.add(y),y.install(v,...m)):isFunction$3(y)&&(w.add(y),y(v,...m))),v},mixin(y){return s.mixins.includes(y)||s.mixins.push(y),v},component(y,m){return m?(s.components[y]=m,v):s.components[y]},directive(y,m){return m?(s.directives[y]=m,v):s.directives[y]},mount(y,m,d){if(!g){const f=createVNode(o,u);return f.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),m&&n?n(f,y):e(f,y,d),g=!0,v._container=y,y.__vue_app__=v,getExposeProxy(f.component)||f.component.proxy}},unmount(){g&&(e(null,v._container),delete v._container.__vue_app__)},provide(y,m){return s.provides[y]=m,v},runWithContext(y){const m=currentApp;currentApp=v;try{return y()}finally{currentApp=m}}};return v}}let currentApp=null;function provide(e,n){if(currentInstance){let r=currentInstance.provides;const o=currentInstance.parent&&currentInstance.parent.provides;o===r&&(r=currentInstance.provides=Object.create(o)),r[e]=n}}function inject(e,n,r=!1){const o=currentInstance||currentRenderingInstance;if(o||currentApp){const u=o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:currentApp._context.provides;if(u&&e in u)return u[e];if(arguments.length>1)return r&&isFunction$3(n)?n.call(o&&o.proxy):n}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=e=>Object.getPrototypeOf(e)===internalObjectProto;function initProps(e,n,r,o=!1){const u={},s=createInternalObject();e.propsDefaults=Object.create(null),setFullProps(e,n,u,s);for(const w in e.propsOptions[0])w in u||(u[w]=void 0);r?e.props=o?u:shallowReactive(u):e.type.props?e.props=u:e.props=s,e.attrs=s}function updateProps(e,n,r,o){const{props:u,attrs:s,vnode:{patchFlag:w}}=e,g=toRaw(u),[v]=e.propsOptions;let y=!1;if((o||w>0)&&!(w&16)){if(w&8){const m=e.vnode.dynamicProps;for(let d=0;d<m.length;d++){let f=m[d];if(isEmitListener(e.emitsOptions,f))continue;const x=n[f];if(v)if(hasOwn$1(s,f))x!==s[f]&&(s[f]=x,y=!0);else{const k=camelize(f);u[k]=resolvePropValue(v,g,k,x,e,!1)}else x!==s[f]&&(s[f]=x,y=!0)}}}else{setFullProps(e,n,u,s)&&(y=!0);let m;for(const d in g)(!n||!hasOwn$1(n,d)&&((m=hyphenate(d))===d||!hasOwn$1(n,m)))&&(v?r&&(r[d]!==void 0||r[m]!==void 0)&&(u[d]=resolvePropValue(v,g,d,void 0,e,!0)):delete u[d]);if(s!==g)for(const d in s)(!n||!hasOwn$1(n,d)&&!0)&&(delete s[d],y=!0)}y&&trigger$1(e.attrs,"set","")}function setFullProps(e,n,r,o){const[u,s]=e.propsOptions;let w=!1,g;if(n)for(let v in n){if(isReservedProp(v))continue;const y=n[v];let m;u&&hasOwn$1(u,m=camelize(v))?!s||!s.includes(m)?r[m]=y:(g||(g={}))[m]=y:isEmitListener(e.emitsOptions,v)||(!(v in o)||y!==o[v])&&(o[v]=y,w=!0)}if(s){const v=toRaw(r),y=g||EMPTY_OBJ;for(let m=0;m<s.length;m++){const d=s[m];r[d]=resolvePropValue(u,v,d,y[d],e,!hasOwn$1(y,d))}}return w}function resolvePropValue(e,n,r,o,u,s){const w=e[r];if(w!=null){const g=hasOwn$1(w,"default");if(g&&o===void 0){const v=w.default;if(w.type!==Function&&!w.skipFactory&&isFunction$3(v)){const{propsDefaults:y}=u;if(r in y)o=y[r];else{const m=setCurrentInstance(u);o=y[r]=v.call(null,n),m()}}else o=v}w[0]&&(s&&!g?o=!1:w[1]&&(o===""||o===hyphenate(r))&&(o=!0))}return o}function normalizePropsOptions(e,n,r=!1){const o=n.propsCache,u=o.get(e);if(u)return u;const s=e.props,w={},g=[];let v=!1;if(!isFunction$3(e)){const m=d=>{v=!0;const[f,x]=normalizePropsOptions(d,n,!0);extend$3(w,f),x&&g.push(...x)};!r&&n.mixins.length&&n.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!s&&!v)return isObject$5(e)&&o.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$4(s))for(let m=0;m<s.length;m++){const d=camelize(s[m]);validatePropName(d)&&(w[d]=EMPTY_OBJ)}else if(s)for(const m in s){const d=camelize(m);if(validatePropName(d)){const f=s[m],x=w[d]=isArray$4(f)||isFunction$3(f)?{type:f}:extend$3({},f);if(x){const k=getTypeIndex(Boolean,x.type),P=getTypeIndex(String,x.type);x[0]=k>-1,x[1]=P<0||k<P,(k>-1||hasOwn$1(x,"default"))&&g.push(d)}}}const y=[w,g];return isObject$5(e)&&o.set(e,y),y}function validatePropName(e){return e[0]!=="$"&&!isReservedProp(e)}function getType(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function isSameType(e,n){return getType(e)===getType(n)}function getTypeIndex(e,n){return isArray$4(n)?n.findIndex(r=>isSameType(r,e)):isFunction$3(n)&&isSameType(n,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray$4(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,n,r)=>{if(n._n)return n;const o=withCtx((...u)=>normalizeSlotValue(n(...u)),r);return o._c=!1,o},normalizeObjectSlots=(e,n,r)=>{const o=e._ctx;for(const u in e){if(isInternalKey(u))continue;const s=e[u];if(isFunction$3(s))n[u]=normalizeSlot(u,s,o);else if(s!=null){const w=normalizeSlotValue(s);n[u]=()=>w}}},normalizeVNodeSlots=(e,n)=>{const r=normalizeSlotValue(n);e.slots.default=()=>r},initSlots=(e,n)=>{const r=e.slots=createInternalObject();if(e.vnode.shapeFlag&32){const o=n._;o?(extend$3(r,n),def(r,"_",o,!0)):normalizeObjectSlots(n,r)}else n&&normalizeVNodeSlots(e,n)},updateSlots=(e,n,r)=>{const{vnode:o,slots:u}=e;let s=!0,w=EMPTY_OBJ;if(o.shapeFlag&32){const g=n._;g?r&&g===1?s=!1:(extend$3(u,n),!r&&g===1&&delete u._):(s=!n.$stable,normalizeObjectSlots(n,u)),w=n}else n&&(normalizeVNodeSlots(e,n),w={default:1});if(s)for(const g in u)!isInternalKey(g)&&w[g]==null&&delete u[g]};function setRef(e,n,r,o,u=!1){if(isArray$4(e)){e.forEach((f,x)=>setRef(f,n&&(isArray$4(n)?n[x]:n),r,o,u));return}if(isAsyncWrapper(o)&&!u)return;const s=o.shapeFlag&4?getExposeProxy(o.component)||o.component.proxy:o.el,w=u?null:s,{i:g,r:v}=e,y=n&&n.r,m=g.refs===EMPTY_OBJ?g.refs={}:g.refs,d=g.setupState;if(y!=null&&y!==v&&(isString$4(y)?(m[y]=null,hasOwn$1(d,y)&&(d[y]=null)):isRef(y)&&(y.value=null)),isFunction$3(v))callWithErrorHandling(v,g,12,[w,m]);else{const f=isString$4(v),x=isRef(v);if(f||x){const k=()=>{if(e.f){const P=f?hasOwn$1(d,v)?d[v]:m[v]:v.value;u?isArray$4(P)&&remove(P,s):isArray$4(P)?P.includes(s)||P.push(s):f?(m[v]=[s],hasOwn$1(d,v)&&(d[v]=m[v])):(v.value=[s],e.k&&(m[e.k]=v.value))}else f?(m[v]=w,hasOwn$1(d,v)&&(d[v]=w)):x&&(v.value=w,e.k&&(m[e.k]=w))};w?(k.id=-1,queuePostRenderEffect(k,r)):k()}}}function initFeatureFlags$2(){typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&(getGlobalThis$1().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,n){initFeatureFlags$2();const r=getGlobalThis$1();r.__VUE__=!0;const{insert:o,remove:u,patchProp:s,createElement:w,createText:g,createComment:v,setText:y,setElementText:m,parentNode:d,nextSibling:f,setScopeId:x=NOOP,insertStaticContent:k}=e,P=(_e,we,Se,$e=null,Be=null,Oe=null,Ge=void 0,Ie=null,je=!!we.dynamicChildren)=>{if(_e===we)return;_e&&!isSameVNodeType(_e,we)&&($e=Ce(_e),oe(_e,Be,Oe,!0),_e=null),we.patchFlag===-2&&(je=!1,we.dynamicChildren=null);const{type:qe,ref:Ue,shapeFlag:Je}=we;switch(qe){case Text$2:S(_e,we,Se,$e);break;case Comment:E(_e,we,Se,$e);break;case Static:_e==null&&M(we,Se,$e,Ge);break;case Fragment:q(_e,we,Se,$e,Be,Oe,Ge,Ie,je);break;default:Je&1?I(_e,we,Se,$e,Be,Oe,Ge,Ie,je):Je&6?ne(_e,we,Se,$e,Be,Oe,Ge,Ie,je):(Je&64||Je&128)&&qe.process(_e,we,Se,$e,Be,Oe,Ge,Ie,je,Le)}Ue!=null&&Be&&setRef(Ue,_e&&_e.ref,Oe,we||_e,!we)},S=(_e,we,Se,$e)=>{if(_e==null)o(we.el=g(we.children),Se,$e);else{const Be=we.el=_e.el;we.children!==_e.children&&y(Be,we.children)}},E=(_e,we,Se,$e)=>{_e==null?o(we.el=v(we.children||""),Se,$e):we.el=_e.el},M=(_e,we,Se,$e)=>{[_e.el,_e.anchor]=k(_e.children,we,Se,$e,_e.el,_e.anchor)},T=({el:_e,anchor:we},Se,$e)=>{let Be;for(;_e&&_e!==we;)Be=f(_e),o(_e,Se,$e),_e=Be;o(we,Se,$e)},D=({el:_e,anchor:we})=>{let Se;for(;_e&&_e!==we;)Se=f(_e),u(_e),_e=Se;u(we)},I=(_e,we,Se,$e,Be,Oe,Ge,Ie,je)=>{we.type==="svg"?Ge="svg":we.type==="math"&&(Ge="mathml"),_e==null?N(we,Se,$e,Be,Oe,Ge,Ie,je):U(_e,we,Be,Oe,Ge,Ie,je)},N=(_e,we,Se,$e,Be,Oe,Ge,Ie)=>{let je,qe;const{props:Ue,shapeFlag:Je,transition:et,dirs:nt}=_e;if(je=_e.el=w(_e.type,Oe,Ue&&Ue.is,Ue),Je&8?m(je,_e.children):Je&16&&F(_e.children,je,null,$e,Be,resolveChildrenNamespace(_e,Oe),Ge,Ie),nt&&invokeDirectiveHook(_e,null,$e,"created"),O(je,_e,_e.scopeId,Ge,$e),Ue){for(const gt in Ue)gt!=="value"&&!isReservedProp(gt)&&s(je,gt,null,Ue[gt],Oe,_e.children,$e,Be,ke);"value"in Ue&&s(je,"value",null,Ue.value,Oe),(qe=Ue.onVnodeBeforeMount)&&invokeVNodeHook(qe,$e,_e)}nt&&invokeDirectiveHook(_e,null,$e,"beforeMount");const st=needTransition(Be,et);st&&et.beforeEnter(je),o(je,we,Se),((qe=Ue&&Ue.onVnodeMounted)||st||nt)&&queuePostRenderEffect(()=>{qe&&invokeVNodeHook(qe,$e,_e),st&&et.enter(je),nt&&invokeDirectiveHook(_e,null,$e,"mounted")},Be)},O=(_e,we,Se,$e,Be)=>{if(Se&&x(_e,Se),$e)for(let Oe=0;Oe<$e.length;Oe++)x(_e,$e[Oe]);if(Be){let Oe=Be.subTree;if(we===Oe){const Ge=Be.vnode;O(_e,Ge,Ge.scopeId,Ge.slotScopeIds,Be.parent)}}},F=(_e,we,Se,$e,Be,Oe,Ge,Ie,je=0)=>{for(let qe=je;qe<_e.length;qe++){const Ue=_e[qe]=Ie?cloneIfMounted(_e[qe]):normalizeVNode(_e[qe]);P(null,Ue,we,Se,$e,Be,Oe,Ge,Ie)}},U=(_e,we,Se,$e,Be,Oe,Ge)=>{const Ie=we.el=_e.el;let{patchFlag:je,dynamicChildren:qe,dirs:Ue}=we;je|=_e.patchFlag&16;const Je=_e.props||EMPTY_OBJ,et=we.props||EMPTY_OBJ;let nt;if(Se&&toggleRecurse(Se,!1),(nt=et.onVnodeBeforeUpdate)&&invokeVNodeHook(nt,Se,we,_e),Ue&&invokeDirectiveHook(we,_e,Se,"beforeUpdate"),Se&&toggleRecurse(Se,!0),qe?Y(_e.dynamicChildren,qe,Ie,Se,$e,resolveChildrenNamespace(we,Be),Oe):Ge||Z(_e,we,Ie,null,Se,$e,resolveChildrenNamespace(we,Be),Oe,!1),je>0){if(je&16)Q(Ie,we,Je,et,Se,$e,Be);else if(je&2&&Je.class!==et.class&&s(Ie,"class",null,et.class,Be),je&4&&s(Ie,"style",Je.style,et.style,Be),je&8){const st=we.dynamicProps;for(let gt=0;gt<st.length;gt++){const _t=st[gt],wt=Je[_t],He=et[_t];(He!==wt||_t==="value")&&s(Ie,_t,wt,He,Be,_e.children,Se,$e,ke)}}je&1&&_e.children!==we.children&&m(Ie,we.children)}else!Ge&&qe==null&&Q(Ie,we,Je,et,Se,$e,Be);((nt=et.onVnodeUpdated)||Ue)&&queuePostRenderEffect(()=>{nt&&invokeVNodeHook(nt,Se,we,_e),Ue&&invokeDirectiveHook(we,_e,Se,"updated")},$e)},Y=(_e,we,Se,$e,Be,Oe,Ge)=>{for(let Ie=0;Ie<we.length;Ie++){const je=_e[Ie],qe=we[Ie],Ue=je.el&&(je.type===Fragment||!isSameVNodeType(je,qe)||je.shapeFlag&70)?d(je.el):Se;P(je,qe,Ue,null,$e,Be,Oe,Ge,!0)}},Q=(_e,we,Se,$e,Be,Oe,Ge)=>{if(Se!==$e){if(Se!==EMPTY_OBJ)for(const Ie in Se)!isReservedProp(Ie)&&!(Ie in $e)&&s(_e,Ie,Se[Ie],null,Ge,we.children,Be,Oe,ke);for(const Ie in $e){if(isReservedProp(Ie))continue;const je=$e[Ie],qe=Se[Ie];je!==qe&&Ie!=="value"&&s(_e,Ie,qe,je,Ge,we.children,Be,Oe,ke)}"value"in $e&&s(_e,"value",Se.value,$e.value,Ge)}},q=(_e,we,Se,$e,Be,Oe,Ge,Ie,je)=>{const qe=we.el=_e?_e.el:g(""),Ue=we.anchor=_e?_e.anchor:g("");let{patchFlag:Je,dynamicChildren:et,slotScopeIds:nt}=we;nt&&(Ie=Ie?Ie.concat(nt):nt),_e==null?(o(qe,Se,$e),o(Ue,Se,$e),F(we.children||[],Se,Ue,Be,Oe,Ge,Ie,je)):Je>0&&Je&64&&et&&_e.dynamicChildren?(Y(_e.dynamicChildren,et,Se,Be,Oe,Ge,Ie),(we.key!=null||Be&&we===Be.subTree)&&traverseStaticChildren(_e,we,!0)):Z(_e,we,Se,Ue,Be,Oe,Ge,Ie,je)},ne=(_e,we,Se,$e,Be,Oe,Ge,Ie,je)=>{we.slotScopeIds=Ie,_e==null?we.shapeFlag&512?Be.ctx.activate(we,Se,$e,Ge,je):J(we,Se,$e,Be,Oe,Ge,je):re(_e,we,je)},J=(_e,we,Se,$e,Be,Oe,Ge)=>{const Ie=_e.component=createComponentInstance(_e,$e,Be);if(isKeepAlive(_e)&&(Ie.ctx.renderer=Le),setupComponent(Ie),Ie.asyncDep){if(Be&&Be.registerDep(Ie,X),!_e.el){const je=Ie.subTree=createVNode(Comment);E(null,je,we,Se)}}else X(Ie,_e,we,Se,Be,Oe,Ge)},re=(_e,we,Se)=>{const $e=we.component=_e.component;if(shouldUpdateComponent(_e,we,Se))if($e.asyncDep&&!$e.asyncResolved){j($e,we,Se);return}else $e.next=we,invalidateJob($e.update),$e.effect.dirty=!0,$e.update();else we.el=_e.el,$e.vnode=we},X=(_e,we,Se,$e,Be,Oe,Ge)=>{const Ie=()=>{if(_e.isMounted){let{next:Ue,bu:Je,u:et,parent:nt,vnode:st}=_e;{const Ve=locateNonHydratedAsyncRoot(_e);if(Ve){Ue&&(Ue.el=st.el,j(_e,Ue,Ge)),Ve.asyncDep.then(()=>{_e.isUnmounted||Ie()});return}}let gt=Ue,_t;toggleRecurse(_e,!1),Ue?(Ue.el=st.el,j(_e,Ue,Ge)):Ue=st,Je&&invokeArrayFns(Je),(_t=Ue.props&&Ue.props.onVnodeBeforeUpdate)&&invokeVNodeHook(_t,nt,Ue,st),toggleRecurse(_e,!0);const wt=renderComponentRoot(_e),He=_e.subTree;_e.subTree=wt,P(He,wt,d(He.el),Ce(He),_e,Be,Oe),Ue.el=wt.el,gt===null&&updateHOCHostEl(_e,wt.el),et&&queuePostRenderEffect(et,Be),(_t=Ue.props&&Ue.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(_t,nt,Ue,st),Be)}else{let Ue;const{el:Je,props:et}=we,{bm:nt,m:st,parent:gt}=_e,_t=isAsyncWrapper(we);if(toggleRecurse(_e,!1),nt&&invokeArrayFns(nt),!_t&&(Ue=et&&et.onVnodeBeforeMount)&&invokeVNodeHook(Ue,gt,we),toggleRecurse(_e,!0),Je&&ye){const wt=()=>{_e.subTree=renderComponentRoot(_e),ye(Je,_e.subTree,_e,Be,null)};_t?we.type.__asyncLoader().then(()=>!_e.isUnmounted&&wt()):wt()}else{const wt=_e.subTree=renderComponentRoot(_e);P(null,wt,Se,$e,_e,Be,Oe),we.el=wt.el}if(st&&queuePostRenderEffect(st,Be),!_t&&(Ue=et&&et.onVnodeMounted)){const wt=we;queuePostRenderEffect(()=>invokeVNodeHook(Ue,gt,wt),Be)}(we.shapeFlag&256||gt&&isAsyncWrapper(gt.vnode)&&gt.vnode.shapeFlag&256)&&_e.a&&queuePostRenderEffect(_e.a,Be),_e.isMounted=!0,we=Se=$e=null}},je=_e.effect=new ReactiveEffect(Ie,NOOP,()=>queueJob(qe),_e.scope),qe=_e.update=()=>{je.dirty&&je.run()};qe.id=_e.uid,toggleRecurse(_e,!0),qe()},j=(_e,we,Se)=>{we.component=_e;const $e=_e.vnode.props;_e.vnode=we,_e.next=null,updateProps(_e,we.props,$e,Se),updateSlots(_e,we.children,Se),pauseTracking(),flushPreFlushCbs(_e),resetTracking()},Z=(_e,we,Se,$e,Be,Oe,Ge,Ie,je=!1)=>{const qe=_e&&_e.children,Ue=_e?_e.shapeFlag:0,Je=we.children,{patchFlag:et,shapeFlag:nt}=we;if(et>0){if(et&128){te(qe,Je,Se,$e,Be,Oe,Ge,Ie,je);return}else if(et&256){W(qe,Je,Se,$e,Be,Oe,Ge,Ie,je);return}}nt&8?(Ue&16&&ke(qe,Be,Oe),Je!==qe&&m(Se,Je)):Ue&16?nt&16?te(qe,Je,Se,$e,Be,Oe,Ge,Ie,je):ke(qe,Be,Oe,!0):(Ue&8&&m(Se,""),nt&16&&F(Je,Se,$e,Be,Oe,Ge,Ie,je))},W=(_e,we,Se,$e,Be,Oe,Ge,Ie,je)=>{_e=_e||EMPTY_ARR,we=we||EMPTY_ARR;const qe=_e.length,Ue=we.length,Je=Math.min(qe,Ue);let et;for(et=0;et<Je;et++){const nt=we[et]=je?cloneIfMounted(we[et]):normalizeVNode(we[et]);P(_e[et],nt,Se,null,Be,Oe,Ge,Ie,je)}qe>Ue?ke(_e,Be,Oe,!0,!1,Je):F(we,Se,$e,Be,Oe,Ge,Ie,je,Je)},te=(_e,we,Se,$e,Be,Oe,Ge,Ie,je)=>{let qe=0;const Ue=we.length;let Je=_e.length-1,et=Ue-1;for(;qe<=Je&&qe<=et;){const nt=_e[qe],st=we[qe]=je?cloneIfMounted(we[qe]):normalizeVNode(we[qe]);if(isSameVNodeType(nt,st))P(nt,st,Se,null,Be,Oe,Ge,Ie,je);else break;qe++}for(;qe<=Je&&qe<=et;){const nt=_e[Je],st=we[et]=je?cloneIfMounted(we[et]):normalizeVNode(we[et]);if(isSameVNodeType(nt,st))P(nt,st,Se,null,Be,Oe,Ge,Ie,je);else break;Je--,et--}if(qe>Je){if(qe<=et){const nt=et+1,st=nt<Ue?we[nt].el:$e;for(;qe<=et;)P(null,we[qe]=je?cloneIfMounted(we[qe]):normalizeVNode(we[qe]),Se,st,Be,Oe,Ge,Ie,je),qe++}}else if(qe>et)for(;qe<=Je;)oe(_e[qe],Be,Oe,!0),qe++;else{const nt=qe,st=qe,gt=new Map;for(qe=st;qe<=et;qe++){const Fe=we[qe]=je?cloneIfMounted(we[qe]):normalizeVNode(we[qe]);Fe.key!=null&&gt.set(Fe.key,qe)}let _t,wt=0;const He=et-st+1;let Ve=!1,ze=0;const Ne=new Array(He);for(qe=0;qe<He;qe++)Ne[qe]=0;for(qe=nt;qe<=Je;qe++){const Fe=_e[qe];if(wt>=He){oe(Fe,Be,Oe,!0);continue}let Ye;if(Fe.key!=null)Ye=gt.get(Fe.key);else for(_t=st;_t<=et;_t++)if(Ne[_t-st]===0&&isSameVNodeType(Fe,we[_t])){Ye=_t;break}Ye===void 0?oe(Fe,Be,Oe,!0):(Ne[Ye-st]=qe+1,Ye>=ze?ze=Ye:Ve=!0,P(Fe,we[Ye],Se,null,Be,Oe,Ge,Ie,je),wt++)}const We=Ve?getSequence(Ne):EMPTY_ARR;for(_t=We.length-1,qe=He-1;qe>=0;qe--){const Fe=st+qe,Ye=we[Fe],Ke=Fe+1<Ue?we[Fe+1].el:$e;Ne[qe]===0?P(null,Ye,Se,Ke,Be,Oe,Ge,Ie,je):Ve&&(_t<0||qe!==We[_t]?le(Ye,Se,Ke,2):_t--)}}},le=(_e,we,Se,$e,Be=null)=>{const{el:Oe,type:Ge,transition:Ie,children:je,shapeFlag:qe}=_e;if(qe&6){le(_e.component.subTree,we,Se,$e);return}if(qe&128){_e.suspense.move(we,Se,$e);return}if(qe&64){Ge.move(_e,we,Se,Le);return}if(Ge===Fragment){o(Oe,we,Se);for(let Je=0;Je<je.length;Je++)le(je[Je],we,Se,$e);o(_e.anchor,we,Se);return}if(Ge===Static){T(_e,we,Se);return}if($e!==2&&qe&1&&Ie)if($e===0)Ie.beforeEnter(Oe),o(Oe,we,Se),queuePostRenderEffect(()=>Ie.enter(Oe),Be);else{const{leave:Je,delayLeave:et,afterLeave:nt}=Ie,st=()=>o(Oe,we,Se),gt=()=>{Je(Oe,()=>{st(),nt&&nt()})};et?et(Oe,st,gt):gt()}else o(Oe,we,Se)},oe=(_e,we,Se,$e=!1,Be=!1)=>{const{type:Oe,props:Ge,ref:Ie,children:je,dynamicChildren:qe,shapeFlag:Ue,patchFlag:Je,dirs:et}=_e;if(Ie!=null&&setRef(Ie,null,Se,_e,!0),Ue&256){we.ctx.deactivate(_e);return}const nt=Ue&1&&et,st=!isAsyncWrapper(_e);let gt;if(st&&(gt=Ge&&Ge.onVnodeBeforeUnmount)&&invokeVNodeHook(gt,we,_e),Ue&6)ve(_e.component,Se,$e);else{if(Ue&128){_e.suspense.unmount(Se,$e);return}nt&&invokeDirectiveHook(_e,null,we,"beforeUnmount"),Ue&64?_e.type.remove(_e,we,Se,Be,Le,$e):qe&&(Oe!==Fragment||Je>0&&Je&64)?ke(qe,we,Se,!1,!0):(Oe===Fragment&&Je&384||!Be&&Ue&16)&&ke(je,we,Se),$e&&Ee(_e)}(st&&(gt=Ge&&Ge.onVnodeUnmounted)||nt)&&queuePostRenderEffect(()=>{gt&&invokeVNodeHook(gt,we,_e),nt&&invokeDirectiveHook(_e,null,we,"unmounted")},Se)},Ee=_e=>{const{type:we,el:Se,anchor:$e,transition:Be}=_e;if(we===Fragment){Ae(Se,$e);return}if(we===Static){D(_e);return}const Oe=()=>{u(Se),Be&&!Be.persisted&&Be.afterLeave&&Be.afterLeave()};if(_e.shapeFlag&1&&Be&&!Be.persisted){const{leave:Ge,delayLeave:Ie}=Be,je=()=>Ge(Se,Oe);Ie?Ie(_e.el,Oe,je):je()}else Oe()},Ae=(_e,we)=>{let Se;for(;_e!==we;)Se=f(_e),u(_e),_e=Se;u(we)},ve=(_e,we,Se)=>{const{bum:$e,scope:Be,update:Oe,subTree:Ge,um:Ie}=_e;$e&&invokeArrayFns($e),Be.stop(),Oe&&(Oe.active=!1,oe(Ge,_e,we,Se)),Ie&&queuePostRenderEffect(Ie,we),queuePostRenderEffect(()=>{_e.isUnmounted=!0},we),we&&we.pendingBranch&&!we.isUnmounted&&_e.asyncDep&&!_e.asyncResolved&&_e.suspenseId===we.pendingId&&(we.deps--,we.deps===0&&we.resolve())},ke=(_e,we,Se,$e=!1,Be=!1,Oe=0)=>{for(let Ge=Oe;Ge<_e.length;Ge++)oe(_e[Ge],we,Se,$e,Be)},Ce=_e=>_e.shapeFlag&6?Ce(_e.component.subTree):_e.shapeFlag&128?_e.suspense.next():f(_e.anchor||_e.el);let Pe=!1;const Me=(_e,we,Se)=>{_e==null?we._vnode&&oe(we._vnode,null,null,!0):P(we._vnode||null,_e,we,null,null,null,Se),Pe||(Pe=!0,flushPreFlushCbs(),flushPostFlushCbs(),Pe=!1),we._vnode=_e},Le={p:P,um:oe,m:le,r:Ee,mt:J,mc:F,pc:Z,pbc:Y,n:Ce,o:e};let Te,ye;return n&&([Te,ye]=n(Le)),{render:Me,hydrate:Te,createApp:createAppAPI(Me,Te)}}function resolveChildrenNamespace({type:e,props:n},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:r}function toggleRecurse({effect:e,update:n},r){e.allowRecurse=n.allowRecurse=r}function needTransition(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function traverseStaticChildren(e,n,r=!1){const o=e.children,u=n.children;if(isArray$4(o)&&isArray$4(u))for(let s=0;s<o.length;s++){const w=o[s];let g=u[s];g.shapeFlag&1&&!g.dynamicChildren&&((g.patchFlag<=0||g.patchFlag===32)&&(g=u[s]=cloneIfMounted(u[s]),g.el=w.el),r||traverseStaticChildren(w,g)),g.type===Text$2&&(g.el=w.el)}}function getSequence(e){const n=e.slice(),r=[0];let o,u,s,w,g;const v=e.length;for(o=0;o<v;o++){const y=e[o];if(y!==0){if(u=r[r.length-1],e[u]<y){n[o]=u,r.push(o);continue}for(s=0,w=r.length-1;s<w;)g=s+w>>1,e[r[g]]<y?s=g+1:w=g;y<e[r[s]]&&(s>0&&(n[o]=r[s-1]),r[s]=o)}}for(s=r.length,w=r[s-1];s-- >0;)r[s]=w,w=n[w];return r}function locateNonHydratedAsyncRoot(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:locateNonHydratedAsyncRoot(n)}const isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||e.disabled===""),isTargetSVG=e=>typeof SVGElement<"u"&&e instanceof SVGElement,isTargetMathML=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,resolveTarget=(e,n)=>{const r=e&&e.to;return isString$4(r)?n?n(r):null:r},TeleportImpl={name:"Teleport",__isTeleport:!0,process(e,n,r,o,u,s,w,g,v,y){const{mc:m,pc:d,pbc:f,o:{insert:x,querySelector:k,createText:P,createComment:S}}=y,E=isTeleportDisabled(n.props);let{shapeFlag:M,children:T,dynamicChildren:D}=n;if(e==null){const I=n.el=P(""),N=n.anchor=P("");x(I,r,o),x(N,r,o);const O=n.target=resolveTarget(n.props,k),F=n.targetAnchor=P("");O&&(x(F,O),w==="svg"||isTargetSVG(O)?w="svg":(w==="mathml"||isTargetMathML(O))&&(w="mathml"));const U=(Y,Q)=>{M&16&&m(T,Y,Q,u,s,w,g,v)};E?U(r,N):O&&U(O,F)}else{n.el=e.el;const I=n.anchor=e.anchor,N=n.target=e.target,O=n.targetAnchor=e.targetAnchor,F=isTeleportDisabled(e.props),U=F?r:N,Y=F?I:O;if(w==="svg"||isTargetSVG(N)?w="svg":(w==="mathml"||isTargetMathML(N))&&(w="mathml"),D?(f(e.dynamicChildren,D,U,u,s,w,g),traverseStaticChildren(e,n,!0)):v||d(e,n,U,Y,u,s,w,g,!1),E)F?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):moveTeleport(n,r,I,y,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const Q=n.target=resolveTarget(n.props,k);Q&&moveTeleport(n,Q,null,y,0)}else F&&moveTeleport(n,N,O,y,1)}updateCssVars(n)},remove(e,n,r,o,{um:u,o:{remove:s}},w){const{shapeFlag:g,children:v,anchor:y,targetAnchor:m,target:d,props:f}=e;if(d&&s(m),w&&s(y),g&16){const x=w||!isTeleportDisabled(f);for(let k=0;k<v.length;k++){const P=v[k];u(P,n,r,x,!!P.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,n,r,{o:{insert:o},m:u},s=2){s===0&&o(e.targetAnchor,n,r);const{el:w,anchor:g,shapeFlag:v,children:y,props:m}=e,d=s===2;if(d&&o(w,n,r),(!d||isTeleportDisabled(m))&&v&16)for(let f=0;f<y.length;f++)u(y[f],n,r,2);d&&o(g,n,r)}function hydrateTeleport(e,n,r,o,u,s,{o:{nextSibling:w,parentNode:g,querySelector:v}},y){const m=n.target=resolveTarget(n.props,v);if(m){const d=m._lpa||m.firstChild;if(n.shapeFlag&16)if(isTeleportDisabled(n.props))n.anchor=y(w(e),n,g(e),r,o,u,s),n.targetAnchor=d;else{n.anchor=w(e);let f=d;for(;f;)if(f=w(f),f&&f.nodeType===8&&f.data==="teleport anchor"){n.targetAnchor=f,m._lpa=n.targetAnchor&&w(n.targetAnchor);break}y(d,n,m,r,o,u,s)}updateCssVars(n)}return n.anchor&&w(n.anchor)}const Teleport=TeleportImpl;function updateCssVars(e){const n=e.ctx;if(n&&n.ut){let r=e.children[0].el;for(;r&&r!==e.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}const Fragment=Symbol.for("v-fgt"),Text$2=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,n,r,o,u,s){return setupBlock(createBaseVNode(e,n,r,o,u,s,!0))}function createBlock(e,n,r,o,u){return setupBlock(createVNode(e,n,r,o,u,!0))}function isVNode$1(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,n){return e.type===n.type&&e.key===n.key}const normalizeKey=({key:e})=>e!=null?e:null,normalizeRef=({ref:e,ref_key:n,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?isString$4(e)||isRef(e)||isFunction$3(e)?{i:currentRenderingInstance,r:e,k:n,f:!!r}:e:null);function createBaseVNode(e,n=null,r=null,o=0,u=null,s=e===Fragment?0:1,w=!1,g=!1){const v={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&normalizeKey(n),ref:n&&normalizeRef(n),scopeId:currentScopeId,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:o,dynamicProps:u,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return g?(normalizeChildren(v,r),s&128&&e.normalize(v)):r&&(v.shapeFlag|=isString$4(r)?8:16),isBlockTreeEnabled>0&&!w&&currentBlock&&(v.patchFlag>0||s&6)&&v.patchFlag!==32&&currentBlock.push(v),v}const createVNode=_createVNode;function _createVNode(e,n=null,r=null,o=0,u=null,s=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode$1(e)){const g=cloneVNode(e,n,!0);return r&&normalizeChildren(g,r),isBlockTreeEnabled>0&&!s&&currentBlock&&(g.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=g:currentBlock.push(g)),g.patchFlag|=-2,g}if(isClassComponent(e)&&(e=e.__vccOpts),n){n=guardReactiveProps(n);let{class:g,style:v}=n;g&&!isString$4(g)&&(n.class=normalizeClass(g)),isObject$5(v)&&(isProxy(v)&&!isArray$4(v)&&(v=extend$3({},v)),n.style=normalizeStyle(v))}const w=isString$4(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$5(e)?4:isFunction$3(e)?2:0;return createBaseVNode(e,n,r,o,u,w,s,!0)}function guardReactiveProps(e){return e?isProxy(e)||isInternalObject(e)?extend$3({},e):e:null}function cloneVNode(e,n,r=!1,o=!1){const{props:u,ref:s,patchFlag:w,children:g,transition:v}=e,y=n?mergeProps(u||{},n):u,m={__v_isVNode:!0,__v_skip:!0,type:e.type,props:y,key:y&&normalizeKey(y),ref:n&&n.ref?r&&s?isArray$4(s)?s.concat(normalizeRef(n)):[s,normalizeRef(n)]:normalizeRef(n):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:g,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Fragment?w===-1?16:w|16:w,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:v,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return v&&o&&(m.transition=v.clone(m)),m}function createTextVNode(e=" ",n=0){return createVNode(Text$2,null,e,n)}function createStaticVNode(e,n){const r=createVNode(Static,null,e);return r.staticCount=n,r}function createCommentVNode(e="",n=!1){return n?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray$4(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text$2,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,n){let r=0;const{shapeFlag:o}=e;if(n==null)n=null;else if(isArray$4(n))r=16;else if(typeof n=="object")if(o&65){const u=n.default;u&&(u._c&&(u._d=!1),normalizeChildren(e,u()),u._c&&(u._d=!0));return}else{r=32;const u=n._;!u&&!isInternalObject(n)?n._ctx=currentRenderingInstance:u===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else isFunction$3(n)?(n={default:n,_ctx:currentRenderingInstance},r=32):(n=String(n),o&64?(r=16,n=[createTextVNode(n)]):r=8);e.children=n,e.shapeFlag|=r}function mergeProps(...e){const n={};for(let r=0;r<e.length;r++){const o=e[r];for(const u in o)if(u==="class")n.class!==o.class&&(n.class=normalizeClass([n.class,o.class]));else if(u==="style")n.style=normalizeStyle([n.style,o.style]);else if(isOn(u)){const s=n[u],w=o[u];w&&s!==w&&!(isArray$4(s)&&s.includes(w))&&(n[u]=s?[].concat(s,w):w)}else u!==""&&(n[u]=o[u])}return n}function invokeVNodeHook(e,n,r,o=null){callWithAsyncErrorHandling(e,n,7,[r,o])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,n,r){const o=e.type,u=(n?n.appContext:e.appContext)||emptyAppContext,s={uid:uid++,vnode:e,type:o,parent:n,appContext:u,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(u.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(o,u),emitsOptions:normalizeEmitsOptions(o,u),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:o.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=n?n.root:s,s.emit=emit.bind(null,s),e.ce&&e.ce(s),s}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const e=getGlobalThis$1(),n=(r,o)=>{let u;return(u=e[r])||(u=e[r]=[]),u.push(o),s=>{u.length>1?u.forEach(w=>w(s)):u[0](s)}};internalSetCurrentInstance=n("__VUE_INSTANCE_SETTERS__",r=>currentInstance=r),setInSSRSetupState=n("__VUE_SSR_SETTERS__",r=>isInSSRComponentSetup=r)}const setCurrentInstance=e=>{const n=currentInstance;return internalSetCurrentInstance(e),e.scope.on(),()=>{e.scope.off(),internalSetCurrentInstance(n)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,n=!1){n&&setInSSRSetupState(n);const{props:r,children:o}=e.vnode,u=isStatefulComponent(e);initProps(e,r,u,n),initSlots(e,o);const s=u?setupStatefulComponent(e,n):void 0;return n&&setInSSRSetupState(!1),s}function setupStatefulComponent(e,n){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,PublicInstanceProxyHandlers);const{setup:o}=r;if(o){const u=e.setupContext=o.length>1?createSetupContext(e):null,s=setCurrentInstance(e);pauseTracking();const w=callWithErrorHandling(o,e,0,[e.props,u]);if(resetTracking(),s(),isPromise$1(w)){if(w.then(unsetCurrentInstance,unsetCurrentInstance),n)return w.then(g=>{handleSetupResult(e,g,n)}).catch(g=>{handleError(g,e,0)});e.asyncDep=w}else handleSetupResult(e,w,n)}else finishComponentSetup(e,n)}function handleSetupResult(e,n,r){isFunction$3(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:isObject$5(n)&&(e.setupState=proxyRefs(n)),finishComponentSetup(e,r)}let compile$1;function finishComponentSetup(e,n,r){const o=e.type;if(!e.render){if(!n&&compile$1&&!o.render){const u=o.template||resolveMergedOptions(e).template;if(u){const{isCustomElement:s,compilerOptions:w}=e.appContext.config,{delimiters:g,compilerOptions:v}=o,y=extend$3(extend$3({isCustomElement:s,delimiters:g},w),v);o.render=compile$1(u,y)}}e.render=o.render||NOOP}{const u=setCurrentInstance(e);pauseTracking();try{applyOptions(e)}finally{resetTracking(),u()}}}const attrsProxyHandlers={get(e,n){return track(e,"get",""),e[n]}};function createSetupContext(e){const n=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,attrsProxyHandlers),slots:e.slots,emit:e.emit,expose:n}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(n,r){if(r in n)return n[r];if(r in publicPropertiesMap)return publicPropertiesMap[r](e)},has(n,r){return r in n||r in publicPropertiesMap}}))}const classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,n=>n.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,n=!0){return isFunction$3(e)?e.displayName||e.name:e.name||n&&e.__name}function formatComponentName(e,n,r=!1){let o=getComponentName(n);if(!o&&n.__file){const u=n.__file.match(/([^/\\]+)\.\w+$/);u&&(o=u[1])}if(!o&&e&&e.parent){const u=s=>{for(const w in s)if(s[w]===n)return w};o=u(e.components||e.parent.type.components)||u(e.appContext.components)}return o?classify(o):r?"App":"Anonymous"}function isClassComponent(e){return isFunction$3(e)&&"__vccOpts"in e}const computed=(e,n)=>computed$1(e,n,isInSSRComponentSetup);function h$1(e,n,r){const o=arguments.length;return o===2?isObject$5(n)&&!isArray$4(n)?isVNode$1(n)?createVNode(e,null,[n]):createVNode(e,n):createVNode(e,null,n):(o>3?r=Array.prototype.slice.call(arguments,2):o===3&&isVNode$1(r)&&(r=[r]),createVNode(e,n,r))}const version$2="3.4.27";/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,n,r)=>{n.insertBefore(e,r||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,r,o)=>{const u=n==="svg"?doc.createElementNS(svgNS,e):n==="mathml"?doc.createElementNS(mathmlNS,e):doc.createElement(e,r?{is:r}:void 0);return e==="select"&&o&&o.multiple!=null&&u.setAttribute("multiple",o.multiple),u},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,r,o,u,s){const w=r?r.previousSibling:n.lastChild;if(u&&(u===s||u.nextSibling))for(;n.insertBefore(u.cloneNode(!0),r),!(u===s||!(u=u.nextSibling)););else{templateContainer.innerHTML=o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e;const g=templateContainer.content;if(o==="svg"||o==="mathml"){const v=g.firstChild;for(;v.firstChild;)g.appendChild(v.firstChild);g.removeChild(v)}n.insertBefore(g,r)}return[w?w.nextSibling:n.firstChild,r?r.previousSibling:n.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),Transition=(e,{slots:n})=>h$1(BaseTransition,resolveTransitionProps(e),n);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$3({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(e,n=[])=>{isArray$4(e)?e.forEach(r=>r(...n)):e&&e(...n)},hasExplicitCallback=e=>e?isArray$4(e)?e.some(n=>n.length>1):e.length>1:!1;function resolveTransitionProps(e){const n={};for(const q in e)q in DOMTransitionPropsValidators||(n[q]=e[q]);if(e.css===!1)return n;const{name:r="v",type:o,duration:u,enterFromClass:s=`${r}-enter-from`,enterActiveClass:w=`${r}-enter-active`,enterToClass:g=`${r}-enter-to`,appearFromClass:v=s,appearActiveClass:y=w,appearToClass:m=g,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:x=`${r}-leave-to`}=e,k=normalizeDuration(u),P=k&&k[0],S=k&&k[1],{onBeforeEnter:E,onEnter:M,onEnterCancelled:T,onLeave:D,onLeaveCancelled:I,onBeforeAppear:N=E,onAppear:O=M,onAppearCancelled:F=T}=n,U=(q,ne,J)=>{removeTransitionClass(q,ne?m:g),removeTransitionClass(q,ne?y:w),J&&J()},Y=(q,ne)=>{q._isLeaving=!1,removeTransitionClass(q,d),removeTransitionClass(q,x),removeTransitionClass(q,f),ne&&ne()},Q=q=>(ne,J)=>{const re=q?O:M,X=()=>U(ne,q,J);callHook(re,[ne,X]),nextFrame(()=>{removeTransitionClass(ne,q?v:s),addTransitionClass(ne,q?m:g),hasExplicitCallback(re)||whenTransitionEnds(ne,o,P,X)})};return extend$3(n,{onBeforeEnter(q){callHook(E,[q]),addTransitionClass(q,s),addTransitionClass(q,w)},onBeforeAppear(q){callHook(N,[q]),addTransitionClass(q,v),addTransitionClass(q,y)},onEnter:Q(!1),onAppear:Q(!0),onLeave(q,ne){q._isLeaving=!0;const J=()=>Y(q,ne);addTransitionClass(q,d),addTransitionClass(q,f),forceReflow(),nextFrame(()=>{!q._isLeaving||(removeTransitionClass(q,d),addTransitionClass(q,x),hasExplicitCallback(D)||whenTransitionEnds(q,o,S,J))}),callHook(D,[q,J])},onEnterCancelled(q){U(q,!1),callHook(T,[q])},onAppearCancelled(q){U(q,!0),callHook(F,[q])},onLeaveCancelled(q){Y(q),callHook(I,[q])}})}function normalizeDuration(e){if(e==null)return null;if(isObject$5(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const n=NumberOf(e);return[n,n]}}function NumberOf(e){return toNumber$1(e)}function addTransitionClass(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[vtcKey]||(e[vtcKey]=new Set)).add(n)}function removeTransitionClass(e,n){n.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const r=e[vtcKey];r&&(r.delete(n),r.size||(e[vtcKey]=void 0))}function nextFrame(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let endId=0;function whenTransitionEnds(e,n,r,o){const u=e._endId=++endId,s=()=>{u===e._endId&&o()};if(r)return setTimeout(s,r);const{type:w,timeout:g,propCount:v}=getTransitionInfo(e,n);if(!w)return o();const y=w+"end";let m=0;const d=()=>{e.removeEventListener(y,f),s()},f=x=>{x.target===e&&++m>=v&&d()};setTimeout(()=>{m<v&&d()},g+1),e.addEventListener(y,f)}function getTransitionInfo(e,n){const r=window.getComputedStyle(e),o=k=>(r[k]||"").split(", "),u=o(`${TRANSITION}Delay`),s=o(`${TRANSITION}Duration`),w=getTimeout(u,s),g=o(`${ANIMATION}Delay`),v=o(`${ANIMATION}Duration`),y=getTimeout(g,v);let m=null,d=0,f=0;n===TRANSITION?w>0&&(m=TRANSITION,d=w,f=s.length):n===ANIMATION?y>0&&(m=ANIMATION,d=y,f=v.length):(d=Math.max(w,y),m=d>0?w>y?TRANSITION:ANIMATION:null,f=m?m===TRANSITION?s.length:v.length:0);const x=m===TRANSITION&&/\b(transform|all)(,|$)/.test(o(`${TRANSITION}Property`).toString());return{type:m,timeout:d,propCount:f,hasTransform:x}}function getTimeout(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((r,o)=>toMs(r)+toMs(e[o])))}function toMs(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(e,n,r){const o=e[vtcKey];o&&(n=(n?[n,...o]:[...o]).join(" ")),n==null?e.removeAttribute("class"):r?e.setAttribute("class",n):e.className=n}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(e,{value:n},{transition:r}){e[vShowOriginalDisplay]=e.style.display==="none"?"":e.style.display,r&&n?r.beforeEnter(e):setDisplay(e,n)},mounted(e,{value:n},{transition:r}){r&&n&&r.enter(e)},updated(e,{value:n,oldValue:r},{transition:o}){!n!=!r&&(o?n?(o.beforeEnter(e),setDisplay(e,!0),o.enter(e)):o.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,n))},beforeUnmount(e,{value:n}){setDisplay(e,n)}};function setDisplay(e,n){e.style.display=n?e[vShowOriginalDisplay]:"none",e[vShowHidden]=!n}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(e,n,r){const o=e.style,u=isString$4(r);let s=!1;if(r&&!u){if(n)if(isString$4(n))for(const w of n.split(";")){const g=w.slice(0,w.indexOf(":")).trim();r[g]==null&&setStyle(o,g,"")}else for(const w in n)r[w]==null&&setStyle(o,w,"");for(const w in r)w==="display"&&(s=!0),setStyle(o,w,r[w])}else if(u){if(n!==r){const w=o[CSS_VAR_TEXT];w&&(r+=";"+w),o.cssText=r,s=displayRE.test(r)}}else n&&e.removeAttribute("style");vShowOriginalDisplay in e&&(e[vShowOriginalDisplay]=s?o.display:"",e[vShowHidden]&&(o.display="none"))}const importantRE=/\s*!important$/;function setStyle(e,n,r){if(isArray$4(r))r.forEach(o=>setStyle(e,n,o));else if(r==null&&(r=""),n.startsWith("--"))e.setProperty(n,r);else{const o=autoPrefix(e,n);importantRE.test(r)?e.setProperty(hyphenate(o),r.replace(importantRE,""),"important"):e[o]=r}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,n){const r=prefixCache[n];if(r)return r;let o=camelize(n);if(o!=="filter"&&o in e)return prefixCache[n]=o;o=capitalize$1(o);for(let u=0;u<prefixes.length;u++){const s=prefixes[u]+o;if(s in e)return prefixCache[n]=s}return n}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,n,r,o,u){if(o&&n.startsWith("xlink:"))r==null?e.removeAttributeNS(xlinkNS,n.slice(6,n.length)):e.setAttributeNS(xlinkNS,n,r);else{const s=isSpecialBooleanAttr(n);r==null||s&&!includeBooleanAttr(r)?e.removeAttribute(n):e.setAttribute(n,s?"":r)}}function patchDOMProp(e,n,r,o,u,s,w){if(n==="innerHTML"||n==="textContent"){o&&w(o,u,s),e[n]=r==null?"":r;return}const g=e.tagName;if(n==="value"&&g!=="PROGRESS"&&!g.includes("-")){const y=g==="OPTION"?e.getAttribute("value")||"":e.value,m=r==null?"":r;(y!==m||!("_value"in e))&&(e.value=m),r==null&&e.removeAttribute(n),e._value=r;return}let v=!1;if(r===""||r==null){const y=typeof e[n];y==="boolean"?r=includeBooleanAttr(r):r==null&&y==="string"?(r="",v=!0):y==="number"&&(r=0,v=!0)}try{e[n]=r}catch{}v&&e.removeAttribute(n)}function addEventListener(e,n,r,o){e.addEventListener(n,r,o)}function removeEventListener(e,n,r,o){e.removeEventListener(n,r,o)}const veiKey=Symbol("_vei");function patchEvent(e,n,r,o,u=null){const s=e[veiKey]||(e[veiKey]={}),w=s[n];if(o&&w)w.value=o;else{const[g,v]=parseName(n);if(o){const y=s[n]=createInvoker(o,u);addEventListener(e,g,y,v)}else w&&(removeEventListener(e,g,w,v),s[n]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let n;if(optionsModifierRE.test(e)){n={};let o;for(;o=e.match(optionsModifierRE);)e=e.slice(0,e.length-o[0].length),n[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),n]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,n){const r=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=r.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(o,r.value),n,5,[o])};return r.value=e,r.attached=getNow(),r}function patchStopImmediatePropagation(e,n){if(isArray$4(n)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},n.map(o=>u=>!u._stopped&&o&&o(u))}else return n}const isNativeOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,patchProp=(e,n,r,o,u,s,w,g,v)=>{const y=u==="svg";n==="class"?patchClass(e,o,y):n==="style"?patchStyle(e,r,o):isOn(n)?isModelListener(n)||patchEvent(e,n,r,o,w):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):shouldSetAsProp(e,n,o,y))?patchDOMProp(e,n,o,s,w,g,v):(n==="true-value"?e._trueValue=o:n==="false-value"&&(e._falseValue=o),patchAttr(e,n,o,y))};function shouldSetAsProp(e,n,r,o){if(o)return!!(n==="innerHTML"||n==="textContent"||n in e&&isNativeOn(n)&&isFunction$3(r));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const u=e.tagName;if(u==="IMG"||u==="VIDEO"||u==="CANVAS"||u==="SOURCE")return!1}return isNativeOn(n)&&isString$4(r)?!1:n in e}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),TransitionGroupImpl={name:"TransitionGroup",props:extend$3({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(e,{slots:n}){const r=getCurrentInstance(),o=useTransitionState();let u,s;return onUpdated(()=>{if(!u.length)return;const w=e.moveClass||`${e.name||"v"}-move`;if(!hasCSSTransform(u[0].el,r.vnode.el,w))return;u.forEach(callPendingCbs),u.forEach(recordPosition);const g=u.filter(applyTranslation);forceReflow(),g.forEach(v=>{const y=v.el,m=y.style;addTransitionClass(y,w),m.transform=m.webkitTransform=m.transitionDuration="";const d=y[moveCbKey]=f=>{f&&f.target!==y||(!f||/transform$/.test(f.propertyName))&&(y.removeEventListener("transitionend",d),y[moveCbKey]=null,removeTransitionClass(y,w))};y.addEventListener("transitionend",d)})}),()=>{const w=toRaw(e),g=resolveTransitionProps(w);let v=w.tag||Fragment;if(u=[],s)for(let y=0;y<s.length;y++){const m=s[y];m.el&&m.el instanceof Element&&(u.push(m),setTransitionHooks(m,resolveTransitionHooks(m,g,o,r)),positionMap.set(m,m.el.getBoundingClientRect()))}s=n.default?getTransitionRawChildren(n.default()):[];for(let y=0;y<s.length;y++){const m=s[y];m.key!=null&&setTransitionHooks(m,resolveTransitionHooks(m,g,o,r))}return createVNode(v,null,s)}}},removeMode=e=>delete e.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(e){const n=e.el;n[moveCbKey]&&n[moveCbKey](),n[enterCbKey]&&n[enterCbKey]()}function recordPosition(e){newPositionMap.set(e,e.el.getBoundingClientRect())}function applyTranslation(e){const n=positionMap.get(e),r=newPositionMap.get(e),o=n.left-r.left,u=n.top-r.top;if(o||u){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${o}px,${u}px)`,s.transitionDuration="0s",e}}function hasCSSTransform(e,n,r){const o=e.cloneNode(),u=e[vtcKey];u&&u.forEach(g=>{g.split(/\s+/).forEach(v=>v&&o.classList.remove(v))}),r.split(/\s+/).forEach(g=>g&&o.classList.add(g)),o.style.display="none";const s=n.nodeType===1?n:n.parentNode;s.appendChild(o);const{hasTransform:w}=getTransitionInfo(o);return s.removeChild(o),w}const getModelAssigner=e=>{const n=e.props["onUpdate:modelValue"]||!1;return isArray$4(n)?r=>invokeArrayFns(n,r):n};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(e,{modifiers:{lazy:n,trim:r,number:o}},u){e[assignKey]=getModelAssigner(u);const s=o||u.props&&u.props.type==="number";addEventListener(e,n?"change":"input",w=>{if(w.target.composing)return;let g=e.value;r&&(g=g.trim()),s&&(g=looseToNumber(g)),e[assignKey](g)}),r&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),n||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:n}){e.value=n==null?"":n},beforeUpdate(e,{value:n,modifiers:{lazy:r,trim:o,number:u}},s){if(e[assignKey]=getModelAssigner(s),e.composing)return;const w=(u||e.type==="number")&&!/^0\d/.test(e.value)?looseToNumber(e.value):e.value,g=n==null?"":n;w!==g&&(document.activeElement===e&&e.type!=="range"&&(r||o&&e.value.trim()===g)||(e.value=g))}},vModelCheckbox={deep:!0,created(e,n,r){e[assignKey]=getModelAssigner(r),addEventListener(e,"change",()=>{const o=e._modelValue,u=getValue$1(e),s=e.checked,w=e[assignKey];if(isArray$4(o)){const g=looseIndexOf(o,u),v=g!==-1;if(s&&!v)w(o.concat(u));else if(!s&&v){const y=[...o];y.splice(g,1),w(y)}}else if(isSet(o)){const g=new Set(o);s?g.add(u):g.delete(u),w(g)}else w(getCheckboxValue(e,s))})},mounted:setChecked,beforeUpdate(e,n,r){e[assignKey]=getModelAssigner(r),setChecked(e,n,r)}};function setChecked(e,{value:n,oldValue:r},o){e._modelValue=n,isArray$4(n)?e.checked=looseIndexOf(n,o.props.value)>-1:isSet(n)?e.checked=n.has(o.props.value):n!==r&&(e.checked=looseEqual(n,getCheckboxValue(e,!0)))}const vModelRadio={created(e,{value:n},r){e.checked=looseEqual(n,r.props.value),e[assignKey]=getModelAssigner(r),addEventListener(e,"change",()=>{e[assignKey](getValue$1(e))})},beforeUpdate(e,{value:n,oldValue:r},o){e[assignKey]=getModelAssigner(o),n!==r&&(e.checked=looseEqual(n,o.props.value))}},vModelSelect={deep:!0,created(e,{value:n,modifiers:{number:r}},o){const u=isSet(n);addEventListener(e,"change",()=>{const s=Array.prototype.filter.call(e.options,w=>w.selected).map(w=>r?looseToNumber(getValue$1(w)):getValue$1(w));e[assignKey](e.multiple?u?new Set(s):s:s[0]),e._assigning=!0,nextTick(()=>{e._assigning=!1})}),e[assignKey]=getModelAssigner(o)},mounted(e,{value:n,modifiers:{number:r}}){setSelected(e,n)},beforeUpdate(e,n,r){e[assignKey]=getModelAssigner(r)},updated(e,{value:n,modifiers:{number:r}}){e._assigning||setSelected(e,n)}};function setSelected(e,n,r){const o=e.multiple,u=isArray$4(n);if(!(o&&!u&&!isSet(n))){for(let s=0,w=e.options.length;s<w;s++){const g=e.options[s],v=getValue$1(g);if(o)if(u){const y=typeof v;y==="string"||y==="number"?g.selected=n.some(m=>String(m)===String(v)):g.selected=looseIndexOf(n,v)>-1}else g.selected=n.has(v);else if(looseEqual(getValue$1(g),n)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!o&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function getValue$1(e){return"_value"in e?e._value:e.value}function getCheckboxValue(e,n){const r=n?"_trueValue":"_falseValue";return r in e?e[r]:n}const vModelDynamic={created(e,n,r){callModelHook(e,n,r,null,"created")},mounted(e,n,r){callModelHook(e,n,r,null,"mounted")},beforeUpdate(e,n,r,o){callModelHook(e,n,r,o,"beforeUpdate")},updated(e,n,r,o){callModelHook(e,n,r,o,"updated")}};function resolveDynamicModel(e,n){switch(e){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(n){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(e,n,r,o,u){const w=resolveDynamicModel(e.tagName,r.props&&r.props.type)[u];w&&w(e,n,r,o)}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>systemModifiers.some(r=>e[`${r}Key`]&&!n.includes(r))},withModifiers=(e,n)=>{const r=e._withMods||(e._withMods={}),o=n.join(".");return r[o]||(r[o]=(u,...s)=>{for(let w=0;w<n.length;w++){const g=modifierGuards[n[w]];if(g&&g(u,n))return}return e(u,...s)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,n)=>{const r=e._withKeys||(e._withKeys={}),o=n.join(".");return r[o]||(r[o]=u=>{if(!("key"in u))return;const s=hyphenate(u.key);if(n.some(w=>w===s||keyNames[w]===s))return e(u)})},rendererOptions=extend$3({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const n=ensureRenderer().createApp(...e),{mount:r}=n;return n.mount=o=>{const u=normalizeContainer(o);if(!u)return;const s=n._component;!isFunction$3(s)&&!s.render&&!s.template&&(s.template=u.innerHTML),u.innerHTML="";const w=r(u,!1,resolveRootNamespace(u));return u instanceof Element&&(u.removeAttribute("v-cloak"),u.setAttribute("data-v-app","")),w},n};function resolveRootNamespace(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function normalizeContainer(e){return isString$4(e)?document.querySelector(e):e}/*!
  * shared v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const inBrowser$1=typeof window<"u",makeSymbol=(e,n=!1)=>n?Symbol.for(e):Symbol(e),generateFormatCacheKey=(e,n,r)=>friendlyJSONstringify({l:e,k:n,s:r}),friendlyJSONstringify=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$1=e=>typeof e=="number"&&isFinite(e),isDate$1=e=>toTypeString(e)==="[object Date]",isRegExp=e=>toTypeString(e)==="[object RegExp]",isEmptyObject=e=>isPlainObject$3(e)&&Object.keys(e).length===0,assign$2=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function escapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$c=Object.prototype.hasOwnProperty;function hasOwn(e,n){return hasOwnProperty$c.call(e,n)}const isArray$3=Array.isArray,isFunction$2=e=>typeof e=="function",isString$3=e=>typeof e=="string",isBoolean=e=>typeof e=="boolean",isObject$4=e=>e!==null&&typeof e=="object",isPromise=e=>isObject$4(e)&&isFunction$2(e.then)&&isFunction$2(e.catch),objectToString$2=Object.prototype.toString,toTypeString=e=>objectToString$2.call(e),isPlainObject$3=e=>{if(!isObject$4(e))return!1;const n=Object.getPrototypeOf(e);return n===null||n.constructor===Object},toDisplayString=e=>e==null?"":isArray$3(e)||isPlainObject$3(e)&&e.toString===objectToString$2?JSON.stringify(e,null,2):String(e);function join$1(e,n=""){return e.reduce((r,o,u)=>u===0?r+o:r+n+o,"")}function incrementer(e){let n=e;return()=>++n}function warn$3(e,n){typeof console<"u"&&(console.warn("[intlify] "+e),n&&console.warn(n.stack))}const isNotObjectOrIsArray=e=>!isObject$4(e)||isArray$3(e);function deepCopy(e,n){if(isNotObjectOrIsArray(e)||isNotObjectOrIsArray(n))throw new Error("Invalid value");const r=[{src:e,des:n}];for(;r.length;){const{src:o,des:u}=r.pop();Object.keys(o).forEach(s=>{isNotObjectOrIsArray(o[s])||isNotObjectOrIsArray(u[s])?u[s]=o[s]:r.push({src:o[s],des:u[s]})})}}/*!
  * message-compiler v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function createPosition(e,n,r){return{line:e,column:n,offset:r}}function createLocation(e,n,r){const o={start:e,end:n};return r!=null&&(o.source=r),o}const RE_ARGS=/\{([0-9a-zA-Z]+)\}/g;function format$4(e,...n){return n.length===1&&isObject$3(n[0])&&(n=n[0]),(!n||!n.hasOwnProperty)&&(n={}),e.replace(RE_ARGS,(r,o)=>n.hasOwnProperty(o)?n[o]:"")}const assign$1=Object.assign,isString$2=e=>typeof e=="string",isObject$3=e=>e!==null&&typeof e=="object";function join(e,n=""){return e.reduce((r,o,u)=>u===0?r+o:r+n+o,"")}const CompileWarnCodes={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},warnMessages={[CompileWarnCodes.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function createCompileWarn(e,n,...r){const o=format$4(warnMessages[e]||"",...r||[]),u={message:String(o),code:e};return n&&(u.location=n),u}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},errorMessages={[CompileErrorCodes.EXPECTED_TOKEN]:"Expected token: '{0}'",[CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[CompileErrorCodes.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[CompileErrorCodes.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[CompileErrorCodes.EMPTY_PLACEHOLDER]:"Empty placeholder",[CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[CompileErrorCodes.INVALID_LINKED_FORMAT]:"Invalid linked format",[CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function createCompileError(e,n,r={}){const{domain:o,messages:u,args:s}=r,w=format$4((u||errorMessages)[e]||"",...s||[]),g=new SyntaxError(String(w));return g.code=e,n&&(g.location=n),g.domain=o,g}function defaultOnError(e){throw e}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS=String.fromCharCode(8232),CHAR_PS=String.fromCharCode(8233);function createScanner(e){const n=e;let r=0,o=1,u=1,s=0;const w=O=>n[O]===CHAR_CR&&n[O+1]===CHAR_LF,g=O=>n[O]===CHAR_LF,v=O=>n[O]===CHAR_PS,y=O=>n[O]===CHAR_LS,m=O=>w(O)||g(O)||v(O)||y(O),d=()=>r,f=()=>o,x=()=>u,k=()=>s,P=O=>w(O)||v(O)||y(O)?CHAR_LF:n[O],S=()=>P(r),E=()=>P(r+s);function M(){return s=0,m(r)&&(o++,u=0),w(r)&&r++,r++,u++,n[r]}function T(){return w(r+s)&&s++,s++,n[r+s]}function D(){r=0,o=1,u=1,s=0}function I(O=0){s=O}function N(){const O=r+s;for(;O!==r;)M();s=0}return{index:d,line:f,column:x,peekOffset:k,charAt:P,currentChar:S,currentPeek:E,next:M,peek:T,reset:D,resetPeek:I,skipToPeek:N}}const EOF=void 0,DOT=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(e,n={}){const r=n.location!==!1,o=createScanner(e),u=()=>o.index(),s=()=>createPosition(o.line(),o.column(),o.index()),w=s(),g=u(),v={currentType:14,offset:g,startLoc:w,endLoc:w,lastType:14,lastOffset:g,lastStartLoc:w,lastEndLoc:w,braceNest:0,inLinked:!1,text:""},y=()=>v,{onError:m}=n;function d(Ie,je,qe,...Ue){const Je=y();if(je.column+=qe,je.offset+=qe,m){const et=r?createLocation(Je.startLoc,je):null,nt=createCompileError(Ie,et,{domain:ERROR_DOMAIN$3,args:Ue});m(nt)}}function f(Ie,je,qe){Ie.endLoc=s(),Ie.currentType=je;const Ue={type:je};return r&&(Ue.loc=createLocation(Ie.startLoc,Ie.endLoc)),qe!=null&&(Ue.value=qe),Ue}const x=Ie=>f(Ie,14);function k(Ie,je){return Ie.currentChar()===je?(Ie.next(),je):(d(CompileErrorCodes.EXPECTED_TOKEN,s(),0,je),"")}function P(Ie){let je="";for(;Ie.currentPeek()===CHAR_SP||Ie.currentPeek()===CHAR_LF;)je+=Ie.currentPeek(),Ie.peek();return je}function S(Ie){const je=P(Ie);return Ie.skipToPeek(),je}function E(Ie){if(Ie===EOF)return!1;const je=Ie.charCodeAt(0);return je>=97&&je<=122||je>=65&&je<=90||je===95}function M(Ie){if(Ie===EOF)return!1;const je=Ie.charCodeAt(0);return je>=48&&je<=57}function T(Ie,je){const{currentType:qe}=je;if(qe!==2)return!1;P(Ie);const Ue=E(Ie.currentPeek());return Ie.resetPeek(),Ue}function D(Ie,je){const{currentType:qe}=je;if(qe!==2)return!1;P(Ie);const Ue=Ie.currentPeek()==="-"?Ie.peek():Ie.currentPeek(),Je=M(Ue);return Ie.resetPeek(),Je}function I(Ie,je){const{currentType:qe}=je;if(qe!==2)return!1;P(Ie);const Ue=Ie.currentPeek()===LITERAL_DELIMITER;return Ie.resetPeek(),Ue}function N(Ie,je){const{currentType:qe}=je;if(qe!==8)return!1;P(Ie);const Ue=Ie.currentPeek()===".";return Ie.resetPeek(),Ue}function O(Ie,je){const{currentType:qe}=je;if(qe!==9)return!1;P(Ie);const Ue=E(Ie.currentPeek());return Ie.resetPeek(),Ue}function F(Ie,je){const{currentType:qe}=je;if(!(qe===8||qe===12))return!1;P(Ie);const Ue=Ie.currentPeek()===":";return Ie.resetPeek(),Ue}function U(Ie,je){const{currentType:qe}=je;if(qe!==10)return!1;const Ue=()=>{const et=Ie.currentPeek();return et==="{"?E(Ie.peek()):et==="@"||et==="%"||et==="|"||et===":"||et==="."||et===CHAR_SP||!et?!1:et===CHAR_LF?(Ie.peek(),Ue()):q(Ie,!1)},Je=Ue();return Ie.resetPeek(),Je}function Y(Ie){P(Ie);const je=Ie.currentPeek()==="|";return Ie.resetPeek(),je}function Q(Ie){const je=P(Ie),qe=Ie.currentPeek()==="%"&&Ie.peek()==="{";return Ie.resetPeek(),{isModulo:qe,hasSpace:je.length>0}}function q(Ie,je=!0){const qe=(Je=!1,et="",nt=!1)=>{const st=Ie.currentPeek();return st==="{"?et==="%"?!1:Je:st==="@"||!st?et==="%"?!0:Je:st==="%"?(Ie.peek(),qe(Je,"%",!0)):st==="|"?et==="%"||nt?!0:!(et===CHAR_SP||et===CHAR_LF):st===CHAR_SP?(Ie.peek(),qe(!0,CHAR_SP,nt)):st===CHAR_LF?(Ie.peek(),qe(!0,CHAR_LF,nt)):!0},Ue=qe();return je&&Ie.resetPeek(),Ue}function ne(Ie,je){const qe=Ie.currentChar();return qe===EOF?EOF:je(qe)?(Ie.next(),qe):null}function J(Ie){const je=Ie.charCodeAt(0);return je>=97&&je<=122||je>=65&&je<=90||je>=48&&je<=57||je===95||je===36}function re(Ie){return ne(Ie,J)}function X(Ie){const je=Ie.charCodeAt(0);return je>=97&&je<=122||je>=65&&je<=90||je>=48&&je<=57||je===95||je===36||je===45}function j(Ie){return ne(Ie,X)}function Z(Ie){const je=Ie.charCodeAt(0);return je>=48&&je<=57}function W(Ie){return ne(Ie,Z)}function te(Ie){const je=Ie.charCodeAt(0);return je>=48&&je<=57||je>=65&&je<=70||je>=97&&je<=102}function le(Ie){return ne(Ie,te)}function oe(Ie){let je="",qe="";for(;je=W(Ie);)qe+=je;return qe}function Ee(Ie){S(Ie);const je=Ie.currentChar();return je!=="%"&&d(CompileErrorCodes.EXPECTED_TOKEN,s(),0,je),Ie.next(),"%"}function Ae(Ie){let je="";for(;;){const qe=Ie.currentChar();if(qe==="{"||qe==="}"||qe==="@"||qe==="|"||!qe)break;if(qe==="%")if(q(Ie))je+=qe,Ie.next();else break;else if(qe===CHAR_SP||qe===CHAR_LF)if(q(Ie))je+=qe,Ie.next();else{if(Y(Ie))break;je+=qe,Ie.next()}else je+=qe,Ie.next()}return je}function ve(Ie){S(Ie);let je="",qe="";for(;je=j(Ie);)qe+=je;return Ie.currentChar()===EOF&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,s(),0),qe}function ke(Ie){S(Ie);let je="";return Ie.currentChar()==="-"?(Ie.next(),je+=`-${oe(Ie)}`):je+=oe(Ie),Ie.currentChar()===EOF&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,s(),0),je}function Ce(Ie){return Ie!==LITERAL_DELIMITER&&Ie!==CHAR_LF}function Pe(Ie){S(Ie),k(Ie,"'");let je="",qe="";for(;je=ne(Ie,Ce);)je==="\\"?qe+=Me(Ie):qe+=je;const Ue=Ie.currentChar();return Ue===CHAR_LF||Ue===EOF?(d(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,s(),0),Ue===CHAR_LF&&(Ie.next(),k(Ie,"'")),qe):(k(Ie,"'"),qe)}function Me(Ie){const je=Ie.currentChar();switch(je){case"\\":case"'":return Ie.next(),`\\${je}`;case"u":return Le(Ie,je,4);case"U":return Le(Ie,je,6);default:return d(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,s(),0,je),""}}function Le(Ie,je,qe){k(Ie,je);let Ue="";for(let Je=0;Je<qe;Je++){const et=le(Ie);if(!et){d(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,s(),0,`\\${je}${Ue}${Ie.currentChar()}`);break}Ue+=et}return`\\${je}${Ue}`}function Te(Ie){return Ie!=="{"&&Ie!=="}"&&Ie!==CHAR_SP&&Ie!==CHAR_LF}function ye(Ie){S(Ie);let je="",qe="";for(;je=ne(Ie,Te);)qe+=je;return qe}function _e(Ie){let je="",qe="";for(;je=re(Ie);)qe+=je;return qe}function we(Ie){const je=qe=>{const Ue=Ie.currentChar();return Ue==="{"||Ue==="%"||Ue==="@"||Ue==="|"||Ue==="("||Ue===")"||!Ue||Ue===CHAR_SP?qe:(qe+=Ue,Ie.next(),je(qe))};return je("")}function Se(Ie){S(Ie);const je=k(Ie,"|");return S(Ie),je}function $e(Ie,je){let qe=null;switch(Ie.currentChar()){case"{":return je.braceNest>=1&&d(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,s(),0),Ie.next(),qe=f(je,2,"{"),S(Ie),je.braceNest++,qe;case"}":return je.braceNest>0&&je.currentType===2&&d(CompileErrorCodes.EMPTY_PLACEHOLDER,s(),0),Ie.next(),qe=f(je,3,"}"),je.braceNest--,je.braceNest>0&&S(Ie),je.inLinked&&je.braceNest===0&&(je.inLinked=!1),qe;case"@":return je.braceNest>0&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,s(),0),qe=Be(Ie,je)||x(je),je.braceNest=0,qe;default:{let Je=!0,et=!0,nt=!0;if(Y(Ie))return je.braceNest>0&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,s(),0),qe=f(je,1,Se(Ie)),je.braceNest=0,je.inLinked=!1,qe;if(je.braceNest>0&&(je.currentType===5||je.currentType===6||je.currentType===7))return d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,s(),0),je.braceNest=0,Oe(Ie,je);if(Je=T(Ie,je))return qe=f(je,5,ve(Ie)),S(Ie),qe;if(et=D(Ie,je))return qe=f(je,6,ke(Ie)),S(Ie),qe;if(nt=I(Ie,je))return qe=f(je,7,Pe(Ie)),S(Ie),qe;if(!Je&&!et&&!nt)return qe=f(je,13,ye(Ie)),d(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,qe.value),S(Ie),qe;break}}return qe}function Be(Ie,je){const{currentType:qe}=je;let Ue=null;const Je=Ie.currentChar();switch((qe===8||qe===9||qe===12||qe===10)&&(Je===CHAR_LF||Je===CHAR_SP)&&d(CompileErrorCodes.INVALID_LINKED_FORMAT,s(),0),Je){case"@":return Ie.next(),Ue=f(je,8,"@"),je.inLinked=!0,Ue;case".":return S(Ie),Ie.next(),f(je,9,".");case":":return S(Ie),Ie.next(),f(je,10,":");default:return Y(Ie)?(Ue=f(je,1,Se(Ie)),je.braceNest=0,je.inLinked=!1,Ue):N(Ie,je)||F(Ie,je)?(S(Ie),Be(Ie,je)):O(Ie,je)?(S(Ie),f(je,12,_e(Ie))):U(Ie,je)?(S(Ie),Je==="{"?$e(Ie,je)||Ue:f(je,11,we(Ie))):(qe===8&&d(CompileErrorCodes.INVALID_LINKED_FORMAT,s(),0),je.braceNest=0,je.inLinked=!1,Oe(Ie,je))}}function Oe(Ie,je){let qe={type:14};if(je.braceNest>0)return $e(Ie,je)||x(je);if(je.inLinked)return Be(Ie,je)||x(je);switch(Ie.currentChar()){case"{":return $e(Ie,je)||x(je);case"}":return d(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,s(),0),Ie.next(),f(je,3,"}");case"@":return Be(Ie,je)||x(je);default:{if(Y(Ie))return qe=f(je,1,Se(Ie)),je.braceNest=0,je.inLinked=!1,qe;const{isModulo:Je,hasSpace:et}=Q(Ie);if(Je)return et?f(je,0,Ae(Ie)):f(je,4,Ee(Ie));if(q(Ie))return f(je,0,Ae(Ie));break}}return qe}function Ge(){const{currentType:Ie,offset:je,startLoc:qe,endLoc:Ue}=v;return v.lastType=Ie,v.lastOffset=je,v.lastStartLoc=qe,v.lastEndLoc=Ue,v.offset=u(),v.startLoc=s(),o.currentChar()===EOF?f(v,14):Oe(o,v)}return{nextToken:Ge,currentOffset:u,currentPosition:s,context:y}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(e,n,r){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const o=parseInt(n||r,16);return o<=55295||o>=57344?String.fromCodePoint(o):"\uFFFD"}}}function createParser(e={}){const n=e.location!==!1,{onError:r,onWarn:o}=e;function u(T,D,I,N,...O){const F=T.currentPosition();if(F.offset+=N,F.column+=N,r){const U=n?createLocation(I,F):null,Y=createCompileError(D,U,{domain:ERROR_DOMAIN$2,args:O});r(Y)}}function s(T,D,I,N,...O){const F=T.currentPosition();if(F.offset+=N,F.column+=N,o){const U=n?createLocation(I,F):null;o(createCompileWarn(D,U,O))}}function w(T,D,I){const N={type:T};return n&&(N.start=D,N.end=D,N.loc={start:I,end:I}),N}function g(T,D,I,N){N&&(T.type=N),n&&(T.end=D,T.loc&&(T.loc.end=I))}function v(T,D){const I=T.context(),N=w(3,I.offset,I.startLoc);return N.value=D,g(N,T.currentOffset(),T.currentPosition()),N}function y(T,D){const I=T.context(),{lastOffset:N,lastStartLoc:O}=I,F=w(5,N,O);return F.index=parseInt(D,10),T.nextToken(),g(F,T.currentOffset(),T.currentPosition()),F}function m(T,D,I){const N=T.context(),{lastOffset:O,lastStartLoc:F}=N,U=w(4,O,F);return U.key=D,I===!0&&(U.modulo=!0),T.nextToken(),g(U,T.currentOffset(),T.currentPosition()),U}function d(T,D){const I=T.context(),{lastOffset:N,lastStartLoc:O}=I,F=w(9,N,O);return F.value=D.replace(KNOWN_ESCAPES,fromEscapeSequence),T.nextToken(),g(F,T.currentOffset(),T.currentPosition()),F}function f(T){const D=T.nextToken(),I=T.context(),{lastOffset:N,lastStartLoc:O}=I,F=w(8,N,O);return D.type!==12?(u(T,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,I.lastStartLoc,0),F.value="",g(F,N,O),{nextConsumeToken:D,node:F}):(D.value==null&&u(T,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,getTokenCaption(D)),F.value=D.value||"",g(F,T.currentOffset(),T.currentPosition()),{node:F})}function x(T,D){const I=T.context(),N=w(7,I.offset,I.startLoc);return N.value=D,g(N,T.currentOffset(),T.currentPosition()),N}function k(T){const D=T.context(),I=w(6,D.offset,D.startLoc);let N=T.nextToken();if(N.type===9){const O=f(T);I.modifier=O.node,N=O.nextConsumeToken||T.nextToken()}switch(N.type!==10&&u(T,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(N)),N=T.nextToken(),N.type===2&&(N=T.nextToken()),N.type){case 11:N.value==null&&u(T,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(N)),I.key=x(T,N.value||"");break;case 5:N.value==null&&u(T,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(N)),I.key=m(T,N.value||"");break;case 6:N.value==null&&u(T,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(N)),I.key=y(T,N.value||"");break;case 7:N.value==null&&u(T,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(N)),I.key=d(T,N.value||"");break;default:{u(T,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,D.lastStartLoc,0);const O=T.context(),F=w(7,O.offset,O.startLoc);return F.value="",g(F,O.offset,O.startLoc),I.key=F,g(I,O.offset,O.startLoc),{nextConsumeToken:N,node:I}}}return g(I,T.currentOffset(),T.currentPosition()),{node:I}}function P(T){const D=T.context(),I=D.currentType===1?T.currentOffset():D.offset,N=D.currentType===1?D.endLoc:D.startLoc,O=w(2,I,N);O.items=[];let F=null,U=null;do{const q=F||T.nextToken();switch(F=null,q.type){case 0:q.value==null&&u(T,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(q)),O.items.push(v(T,q.value||""));break;case 6:q.value==null&&u(T,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(q)),O.items.push(y(T,q.value||""));break;case 4:U=!0;break;case 5:q.value==null&&u(T,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(q)),O.items.push(m(T,q.value||"",!!U)),U&&(s(T,CompileWarnCodes.USE_MODULO_SYNTAX,D.lastStartLoc,0,getTokenCaption(q)),U=null);break;case 7:q.value==null&&u(T,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(q)),O.items.push(d(T,q.value||""));break;case 8:{const ne=k(T);O.items.push(ne.node),F=ne.nextConsumeToken||null;break}}}while(D.currentType!==14&&D.currentType!==1);const Y=D.currentType===1?D.lastOffset:T.currentOffset(),Q=D.currentType===1?D.lastEndLoc:T.currentPosition();return g(O,Y,Q),O}function S(T,D,I,N){const O=T.context();let F=N.items.length===0;const U=w(1,D,I);U.cases=[],U.cases.push(N);do{const Y=P(T);F||(F=Y.items.length===0),U.cases.push(Y)}while(O.currentType!==14);return F&&u(T,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,I,0),g(U,T.currentOffset(),T.currentPosition()),U}function E(T){const D=T.context(),{offset:I,startLoc:N}=D,O=P(T);return D.currentType===14?O:S(T,I,N,O)}function M(T){const D=createTokenizer(T,assign$1({},e)),I=D.context(),N=w(0,I.offset,I.startLoc);return n&&N.loc&&(N.loc.source=T),N.body=E(D),e.onCacheKey&&(N.cacheKey=e.onCacheKey(T)),I.currentType!==14&&u(D,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,T[I.offset]||""),g(N,D.currentOffset(),D.currentPosition()),N}return{parse:M}}function getTokenCaption(e){if(e.type===14)return"EOF";const n=(e.value||"").replace(/\r?\n/gu,"\\n");return n.length>10?n.slice(0,9)+"\u2026":n}function createTransformer(e,n={}){const r={ast:e,helpers:new Set};return{context:()=>r,helper:s=>(r.helpers.add(s),s)}}function traverseNodes(e,n){for(let r=0;r<e.length;r++)traverseNode(e[r],n)}function traverseNode(e,n){switch(e.type){case 1:traverseNodes(e.cases,n),n.helper("plural");break;case 2:traverseNodes(e.items,n);break;case 6:{traverseNode(e.key,n),n.helper("linked"),n.helper("type");break}case 5:n.helper("interpolate"),n.helper("list");break;case 4:n.helper("interpolate"),n.helper("named");break}}function transform(e,n={}){const r=createTransformer(e);r.helper("normalize"),e.body&&traverseNode(e.body,r);const o=r.context();e.helpers=Array.from(o.helpers)}function optimize(e){const n=e.body;return n.type===2?optimizeMessageNode(n):n.cases.forEach(r=>optimizeMessageNode(r)),e}function optimizeMessageNode(e){if(e.items.length===1){const n=e.items[0];(n.type===3||n.type===9)&&(e.static=n.value,delete n.value)}else{const n=[];for(let r=0;r<e.items.length;r++){const o=e.items[r];if(!(o.type===3||o.type===9)||o.value==null)break;n.push(o.value)}if(n.length===e.items.length){e.static=join(n);for(let r=0;r<e.items.length;r++){const o=e.items[r];(o.type===3||o.type===9)&&delete o.value}}}}const ERROR_DOMAIN$1="minifier";function minify(e){switch(e.t=e.type,e.type){case 0:{const n=e;minify(n.body),n.b=n.body,delete n.body;break}case 1:{const n=e,r=n.cases;for(let o=0;o<r.length;o++)minify(r[o]);n.c=r,delete n.cases;break}case 2:{const n=e,r=n.items;for(let o=0;o<r.length;o++)minify(r[o]);n.i=r,delete n.items,n.static&&(n.s=n.static,delete n.static);break}case 3:case 9:case 8:case 7:{const n=e;n.value&&(n.v=n.value,delete n.value);break}case 6:{const n=e;minify(n.key),n.k=n.key,delete n.key,n.modifier&&(minify(n.modifier),n.m=n.modifier,delete n.modifier);break}case 5:{const n=e;n.i=n.index,delete n.index;break}case 4:{const n=e;n.k=n.key,delete n.key;break}default:throw createCompileError(CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:ERROR_DOMAIN$1,args:[e.type]})}delete e.type}const ERROR_DOMAIN="parser";function createCodeGenerator(e,n){const{sourceMap:r,filename:o,breakLineCode:u,needIndent:s}=n,w=n.location!==!1,g={filename:o,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:u,needIndent:s,indentLevel:0};w&&e.loc&&(g.source=e.loc.source);const v=()=>g;function y(S,E){g.code+=S}function m(S,E=!0){const M=E?u:"";y(s?M+"  ".repeat(S):M)}function d(S=!0){const E=++g.indentLevel;S&&m(E)}function f(S=!0){const E=--g.indentLevel;S&&m(E)}function x(){m(g.indentLevel)}return{context:v,push:y,indent:d,deindent:f,newline:x,helper:S=>`_${S}`,needIndent:()=>g.needIndent}}function generateLinkedNode(e,n){const{helper:r}=e;e.push(`${r("linked")}(`),generateNode(e,n.key),n.modifier?(e.push(", "),generateNode(e,n.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function generateMessageNode(e,n){const{helper:r,needIndent:o}=e;e.push(`${r("normalize")}([`),e.indent(o());const u=n.items.length;for(let s=0;s<u&&(generateNode(e,n.items[s]),s!==u-1);s++)e.push(", ");e.deindent(o()),e.push("])")}function generatePluralNode(e,n){const{helper:r,needIndent:o}=e;if(n.cases.length>1){e.push(`${r("plural")}([`),e.indent(o());const u=n.cases.length;for(let s=0;s<u&&(generateNode(e,n.cases[s]),s!==u-1);s++)e.push(", ");e.deindent(o()),e.push("])")}}function generateResource(e,n){n.body?generateNode(e,n.body):e.push("null")}function generateNode(e,n){const{helper:r}=e;switch(n.type){case 0:generateResource(e,n);break;case 1:generatePluralNode(e,n);break;case 2:generateMessageNode(e,n);break;case 6:generateLinkedNode(e,n);break;case 8:e.push(JSON.stringify(n.value),n);break;case 7:e.push(JSON.stringify(n.value),n);break;case 5:e.push(`${r("interpolate")}(${r("list")}(${n.index}))`,n);break;case 4:e.push(`${r("interpolate")}(${r("named")}(${JSON.stringify(n.key)}))`,n);break;case 9:e.push(JSON.stringify(n.value),n);break;case 3:e.push(JSON.stringify(n.value),n);break;default:throw createCompileError(CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:ERROR_DOMAIN,args:[n.type]})}}const generate=(e,n={})=>{const r=isString$2(n.mode)?n.mode:"normal",o=isString$2(n.filename)?n.filename:"message.intl",u=!!n.sourceMap,s=n.breakLineCode!=null?n.breakLineCode:r==="arrow"?";":`
`,w=n.needIndent?n.needIndent:r!=="arrow",g=e.helpers||[],v=createCodeGenerator(e,{mode:r,filename:o,sourceMap:u,breakLineCode:s,needIndent:w});v.push(r==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),v.indent(w),g.length>0&&(v.push(`const { ${join(g.map(d=>`${d}: _${d}`),", ")} } = ctx`),v.newline()),v.push("return "),generateNode(v,e),v.deindent(w),v.push("}"),delete e.helpers;const{code:y,map:m}=v.context();return{ast:e,code:y,map:m?m.toJSON():void 0}};function baseCompile$1(e,n={}){const r=assign$1({},n),o=!!r.jit,u=!!r.minify,s=r.optimize==null?!0:r.optimize,g=createParser(r).parse(e);return o?(s&&optimize(g),u&&minify(g),{ast:g,code:""}):(transform(g,r),generate(g,r))}/*!
  * core-base v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function initFeatureFlags$1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],["["]:[4],o:[7]};pathStateMachine[1]={w:[1],["."]:[2],["["]:[4],o:[7]};pathStateMachine[2]={w:[2],i:[3,0],[0]:[3,0]};pathStateMachine[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};pathStateMachine[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};pathStateMachine[5]={["'"]:[4,0],o:8,l:[5,0]};pathStateMachine[6]={['"']:[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(e){return literalValueRE.test(e)}function stripQuotes(e){const n=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return n===r&&(n===34||n===39)?e.slice(1,-1):e}function getPathCharType(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(e){const n=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:isLiteral(n)?stripQuotes(n):"*"+n}function parse$1(e){const n=[];let r=-1,o=0,u=0,s,w,g,v,y,m,d;const f=[];f[0]=()=>{w===void 0?w=g:w+=g},f[1]=()=>{w!==void 0&&(n.push(w),w=void 0)},f[2]=()=>{f[0](),u++},f[3]=()=>{if(u>0)u--,o=4,f[0]();else{if(u=0,w===void 0||(w=formatSubPath(w),w===!1))return!1;f[1]()}};function x(){const k=e[r+1];if(o===5&&k==="'"||o===6&&k==='"')return r++,g="\\"+k,f[0](),!0}for(;o!==null;)if(r++,s=e[r],!(s==="\\"&&x())){if(v=getPathCharType(s),d=pathStateMachine[o],y=d[v]||d.l||8,y===8||(o=y[0],y[1]!==void 0&&(m=f[y[1]],m&&(g=s,m()===!1))))return;if(o===7)return n}}const cache$1=new Map;function resolveWithKeyValue(e,n){return isObject$4(e)?e[n]:null}function resolveValue(e,n){if(!isObject$4(e))return null;let r=cache$1.get(n);if(r||(r=parse$1(n),r&&cache$1.set(n,r)),!r)return null;const o=r.length;let u=e,s=0;for(;s<o;){const w=u[r[s]];if(w===void 0||isFunction$2(u))return null;u=w,s++}return u}const DEFAULT_MODIFIER=e=>e,DEFAULT_MESSAGE=e=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=e=>e.length===0?"":join$1(e),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(e,n){return e=Math.abs(e),n===2?e?e>1?1:0:1:e?Math.min(e,2):0}function getPluralIndex(e){const n=isNumber$1(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(isNumber$1(e.named.count)||isNumber$1(e.named.n))?isNumber$1(e.named.count)?e.named.count:isNumber$1(e.named.n)?e.named.n:n:n}function normalizeNamed(e,n){n.count||(n.count=e),n.n||(n.n=e)}function createMessageContext(e={}){const n=e.locale,r=getPluralIndex(e),o=isObject$4(e.pluralRules)&&isString$3(n)&&isFunction$2(e.pluralRules[n])?e.pluralRules[n]:pluralDefault,u=isObject$4(e.pluralRules)&&isString$3(n)&&isFunction$2(e.pluralRules[n])?pluralDefault:void 0,s=E=>E[o(r,E.length,u)],w=e.list||[],g=E=>w[E],v=e.named||{};isNumber$1(e.pluralIndex)&&normalizeNamed(r,v);const y=E=>v[E];function m(E){const M=isFunction$2(e.messages)?e.messages(E):isObject$4(e.messages)?e.messages[E]:!1;return M||(e.parent?e.parent.message(E):DEFAULT_MESSAGE)}const d=E=>e.modifiers?e.modifiers[E]:DEFAULT_MODIFIER,f=isPlainObject$3(e.processor)&&isFunction$2(e.processor.normalize)?e.processor.normalize:DEFAULT_NORMALIZE,x=isPlainObject$3(e.processor)&&isFunction$2(e.processor.interpolate)?e.processor.interpolate:DEFAULT_INTERPOLATE,k=isPlainObject$3(e.processor)&&isString$3(e.processor.type)?e.processor.type:DEFAULT_MESSAGE_DATA_TYPE,S={list:g,named:y,plural:s,linked:(E,...M)=>{const[T,D]=M;let I="text",N="";M.length===1?isObject$4(T)?(N=T.modifier||N,I=T.type||I):isString$3(T)&&(N=T||N):M.length===2&&(isString$3(T)&&(N=T||N),isString$3(D)&&(I=D||I));const O=m(E)(S),F=I==="vnode"&&isArray$3(O)&&N?O[0]:O;return N?d(N)(F,I):F},message:m,type:k,interpolate:x,normalize:f,values:assign$2({},w,v)};return S}let devtools=null;function setDevToolsHook(e){devtools=e}function initI18nDevTools(e,n,r){devtools&&devtools.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:n,meta:r})}const translateDevTools=createDevToolsHook("function:translate");function createDevToolsHook(e){return n=>devtools&&devtools.emit(e,n)}const code$1$1=CompileWarnCodes.__EXTEND_POINT__,inc$1$1=incrementer(code$1$1),CoreWarnCodes={NOT_FOUND_KEY:code$1$1,FALLBACK_TO_TRANSLATE:inc$1$1(),CANNOT_FORMAT_NUMBER:inc$1$1(),FALLBACK_TO_NUMBER_FORMAT:inc$1$1(),CANNOT_FORMAT_DATE:inc$1$1(),FALLBACK_TO_DATE_FORMAT:inc$1$1(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:inc$1$1(),__EXTEND_POINT__:inc$1$1()},code$2=CompileErrorCodes.__EXTEND_POINT__,inc$2=incrementer(code$2),CoreErrorCodes={INVALID_ARGUMENT:code$2,INVALID_DATE_ARGUMENT:inc$2(),INVALID_ISO_DATE_ARGUMENT:inc$2(),NOT_SUPPORT_NON_STRING_MESSAGE:inc$2(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:inc$2(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:inc$2(),NOT_SUPPORT_LOCALE_TYPE:inc$2(),__EXTEND_POINT__:inc$2()};function createCoreError(e){return createCompileError(e,null,void 0)}function getLocale(e,n){return n.locale!=null?resolveLocale(n.locale):resolveLocale(e.locale)}let _resolveLocale;function resolveLocale(e){if(isString$3(e))return e;if(isFunction$2(e)){if(e.resolvedOnce&&_resolveLocale!=null)return _resolveLocale;if(e.constructor.name==="Function"){const n=e();if(isPromise(n))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return _resolveLocale=n}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_TYPE)}function fallbackWithSimple(e,n,r){return[...new Set([r,...isArray$3(n)?n:isObject$4(n)?Object.keys(n):isString$3(n)?[n]:[r]])]}function fallbackWithLocaleChain(e,n,r){const o=isString$3(r)?r:DEFAULT_LOCALE,u=e;u.__localeChainCache||(u.__localeChainCache=new Map);let s=u.__localeChainCache.get(o);if(!s){s=[];let w=[r];for(;isArray$3(w);)w=appendBlockToChain(s,w,n);const g=isArray$3(n)||!isPlainObject$3(n)?n:n.default?n.default:null;w=isString$3(g)?[g]:g,isArray$3(w)&&appendBlockToChain(s,w,!1),u.__localeChainCache.set(o,s)}return s}function appendBlockToChain(e,n,r){let o=!0;for(let u=0;u<n.length&&isBoolean(o);u++){const s=n[u];isString$3(s)&&(o=appendLocaleToChain(e,n[u],r))}return o}function appendLocaleToChain(e,n,r){let o;const u=n.split("-");do{const s=u.join("-");o=appendItemToChain(e,s,r),u.splice(-1,1)}while(u.length&&o===!0);return o}function appendItemToChain(e,n,r){let o=!1;if(!e.includes(n)&&(o=!0,n)){o=n[n.length-1]!=="!";const u=n.replace(/!/g,"");e.push(u),(isArray$3(r)||isPlainObject$3(r))&&r[u]&&(o=r[u])}return o}const VERSION$2="9.13.1",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(e,n)=>n==="text"&&isString$3(e)?e.toUpperCase():n==="vnode"&&isObject$4(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,n)=>n==="text"&&isString$3(e)?e.toLowerCase():n==="vnode"&&isObject$4(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,n)=>n==="text"&&isString$3(e)?capitalize(e):n==="vnode"&&isObject$4(e)&&"__v_isVNode"in e?capitalize(e.children):e}}let _compiler;function registerMessageCompiler(e){_compiler=e}let _resolver;function registerMessageResolver(e){_resolver=e}let _fallbacker;function registerLocaleFallbacker(e){_fallbacker=e}let _additionalMeta=null;const setAdditionalMeta=e=>{_additionalMeta=e},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=e=>{_fallbackContext=e},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(e={}){const n=isFunction$2(e.onWarn)?e.onWarn:warn$3,r=isString$3(e.version)?e.version:VERSION$2,o=isString$3(e.locale)||isFunction$2(e.locale)?e.locale:DEFAULT_LOCALE,u=isFunction$2(o)?DEFAULT_LOCALE:o,s=isArray$3(e.fallbackLocale)||isPlainObject$3(e.fallbackLocale)||isString$3(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:u,w=isPlainObject$3(e.messages)?e.messages:{[u]:{}},g=isPlainObject$3(e.datetimeFormats)?e.datetimeFormats:{[u]:{}},v=isPlainObject$3(e.numberFormats)?e.numberFormats:{[u]:{}},y=assign$2({},e.modifiers||{},getDefaultLinkedModifiers()),m=e.pluralRules||{},d=isFunction$2(e.missing)?e.missing:null,f=isBoolean(e.missingWarn)||isRegExp(e.missingWarn)?e.missingWarn:!0,x=isBoolean(e.fallbackWarn)||isRegExp(e.fallbackWarn)?e.fallbackWarn:!0,k=!!e.fallbackFormat,P=!!e.unresolving,S=isFunction$2(e.postTranslation)?e.postTranslation:null,E=isPlainObject$3(e.processor)?e.processor:null,M=isBoolean(e.warnHtmlMessage)?e.warnHtmlMessage:!0,T=!!e.escapeParameter,D=isFunction$2(e.messageCompiler)?e.messageCompiler:_compiler,I=isFunction$2(e.messageResolver)?e.messageResolver:_resolver||resolveWithKeyValue,N=isFunction$2(e.localeFallbacker)?e.localeFallbacker:_fallbacker||fallbackWithSimple,O=isObject$4(e.fallbackContext)?e.fallbackContext:void 0,F=e,U=isObject$4(F.__datetimeFormatters)?F.__datetimeFormatters:new Map,Y=isObject$4(F.__numberFormatters)?F.__numberFormatters:new Map,Q=isObject$4(F.__meta)?F.__meta:{};_cid++;const q={version:r,cid:_cid,locale:o,fallbackLocale:s,messages:w,modifiers:y,pluralRules:m,missing:d,missingWarn:f,fallbackWarn:x,fallbackFormat:k,unresolving:P,postTranslation:S,processor:E,warnHtmlMessage:M,escapeParameter:T,messageCompiler:D,messageResolver:I,localeFallbacker:N,fallbackContext:O,onWarn:n,__meta:Q};return q.datetimeFormats=g,q.numberFormats=v,q.__datetimeFormatters=U,q.__numberFormatters=Y,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(q,r,Q),q}function handleMissing(e,n,r,o,u){const{missing:s,onWarn:w}=e;if(s!==null){const g=s(e,r,n,u);return isString$3(g)?g:n}else return n}function updateFallbackLocale(e,n,r){const o=e;o.__localeChainCache=new Map,e.localeFallbacker(e,r,n)}function isAlmostSameLocale(e,n){return e===n?!1:e.split("-")[0]===n.split("-")[0]}function isImplicitFallback(e,n){const r=n.indexOf(e);if(r===-1)return!1;for(let o=r+1;o<n.length;o++)if(isAlmostSameLocale(e,n[o]))return!0;return!1}function format$3(e){return r=>formatParts(r,e)}function formatParts(e,n){const r=n.b||n.body;if((r.t||r.type)===1){const o=r,u=o.c||o.cases;return e.plural(u.reduce((s,w)=>[...s,formatMessageParts(e,w)],[]))}else return formatMessageParts(e,r)}function formatMessageParts(e,n){const r=n.s||n.static;if(r)return e.type==="text"?r:e.normalize([r]);{const o=(n.i||n.items).reduce((u,s)=>[...u,formatMessagePart(e,s)],[]);return e.normalize(o)}}function formatMessagePart(e,n){const r=n.t||n.type;switch(r){case 3:{const o=n;return o.v||o.value}case 9:{const o=n;return o.v||o.value}case 4:{const o=n;return e.interpolate(e.named(o.k||o.key))}case 5:{const o=n;return e.interpolate(e.list(o.i!=null?o.i:o.index))}case 6:{const o=n,u=o.m||o.modifier;return e.linked(formatMessagePart(e,o.k||o.key),u?formatMessagePart(e,u):void 0,e.type)}case 7:{const o=n;return o.v||o.value}case 8:{const o=n;return o.v||o.value}default:throw new Error(`unhandled node type on format message part: ${r}`)}}const defaultOnCacheKey=e=>e;let compileCache=Object.create(null);const isMessageAST=e=>isObject$4(e)&&(e.t===0||e.type===0)&&("b"in e||"body"in e);function baseCompile(e,n={}){let r=!1;const o=n.onError||defaultOnError;return n.onError=u=>{r=!0,o(u)},{...baseCompile$1(e,n),detectError:r}}const compileToFunction=(e,n)=>{if(!isString$3(e))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_NON_STRING_MESSAGE);{isBoolean(n.warnHtmlMessage)&&n.warnHtmlMessage;const o=(n.onCacheKey||defaultOnCacheKey)(e),u=compileCache[o];if(u)return u;const{code:s,detectError:w}=baseCompile(e,n),g=new Function(`return ${s}`)();return w?g:compileCache[o]=g}};function compile(e,n){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&isString$3(e)){isBoolean(n.warnHtmlMessage)&&n.warnHtmlMessage;const o=(n.onCacheKey||defaultOnCacheKey)(e),u=compileCache[o];if(u)return u;const{ast:s,detectError:w}=baseCompile(e,{...n,location:!1,jit:!0}),g=format$3(s);return w?g:compileCache[o]=g}else{const r=e.cacheKey;if(r){const o=compileCache[r];return o||(compileCache[r]=format$3(e))}else return format$3(e)}}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=e=>isFunction$2(e);function translate(e,...n){const{fallbackFormat:r,postTranslation:o,unresolving:u,messageCompiler:s,fallbackLocale:w,messages:g}=e,[v,y]=parseTranslateArgs(...n),m=isBoolean(y.missingWarn)?y.missingWarn:e.missingWarn,d=isBoolean(y.fallbackWarn)?y.fallbackWarn:e.fallbackWarn,f=isBoolean(y.escapeParameter)?y.escapeParameter:e.escapeParameter,x=!!y.resolvedMessage,k=isString$3(y.default)||isBoolean(y.default)?isBoolean(y.default)?s?v:()=>v:y.default:r?s?v:()=>v:"",P=r||k!=="",S=getLocale(e,y);f&&escapeParams(y);let[E,M,T]=x?[v,S,g[S]||{}]:resolveMessageFormat(e,v,S,w,d,m),D=E,I=v;if(!x&&!(isString$3(D)||isMessageAST(D)||isMessageFunction(D))&&P&&(D=k,I=D),!x&&(!(isString$3(D)||isMessageAST(D)||isMessageFunction(D))||!isString$3(M)))return u?NOT_REOSLVED:v;let N=!1;const O=()=>{N=!0},F=isMessageFunction(D)?D:compileMessageFormat(e,v,M,D,I,O);if(N)return D;const U=getMessageContextOptions(e,M,T,y),Y=createMessageContext(U),Q=evaluateMessage(e,F,Y),q=o?o(Q,v):Q;if(__INTLIFY_PROD_DEVTOOLS__){const ne={timestamp:Date.now(),key:isString$3(v)?v:isMessageFunction(D)?D.key:"",locale:M||(isMessageFunction(D)?D.locale:""),format:isString$3(D)?D:isMessageFunction(D)?D.source:"",message:q};ne.meta=assign$2({},e.__meta,getAdditionalMeta()||{}),translateDevTools(ne)}return q}function escapeParams(e){isArray$3(e.list)?e.list=e.list.map(n=>isString$3(n)?escapeHtml(n):n):isObject$4(e.named)&&Object.keys(e.named).forEach(n=>{isString$3(e.named[n])&&(e.named[n]=escapeHtml(e.named[n]))})}function resolveMessageFormat(e,n,r,o,u,s){const{messages:w,onWarn:g,messageResolver:v,localeFallbacker:y}=e,m=y(e,o,r);let d={},f,x=null;const k="translate";for(let P=0;P<m.length&&(f=m[P],d=w[f]||{},(x=v(d,n))===null&&(x=d[n]),!(isString$3(x)||isMessageAST(x)||isMessageFunction(x)));P++)if(!isImplicitFallback(f,m)){const S=handleMissing(e,n,f,s,k);S!==n&&(x=S)}return[x,f,d]}function compileMessageFormat(e,n,r,o,u,s){const{messageCompiler:w,warnHtmlMessage:g}=e;if(isMessageFunction(o)){const y=o;return y.locale=y.locale||r,y.key=y.key||n,y}if(w==null){const y=()=>o;return y.locale=r,y.key=n,y}const v=w(o,getCompileContext(e,r,u,o,g,s));return v.locale=r,v.key=n,v.source=o,v}function evaluateMessage(e,n,r){return n(r)}function parseTranslateArgs(...e){const[n,r,o]=e,u={};if(!isString$3(n)&&!isNumber$1(n)&&!isMessageFunction(n)&&!isMessageAST(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const s=isNumber$1(n)?String(n):(isMessageFunction(n),n);return isNumber$1(r)?u.plural=r:isString$3(r)?u.default=r:isPlainObject$3(r)&&!isEmptyObject(r)?u.named=r:isArray$3(r)&&(u.list=r),isNumber$1(o)?u.plural=o:isString$3(o)?u.default=o:isPlainObject$3(o)&&assign$2(u,o),[s,u]}function getCompileContext(e,n,r,o,u,s){return{locale:n,key:r,warnHtmlMessage:u,onError:w=>{throw s&&s(w),w},onCacheKey:w=>generateFormatCacheKey(n,r,w)}}function getMessageContextOptions(e,n,r,o){const{modifiers:u,pluralRules:s,messageResolver:w,fallbackLocale:g,fallbackWarn:v,missingWarn:y,fallbackContext:m}=e,f={locale:n,modifiers:u,pluralRules:s,messages:x=>{let k=w(r,x);if(k==null&&m){const[,,P]=resolveMessageFormat(m,x,n,g,v,y);k=w(P,x)}if(isString$3(k)||isMessageAST(k)){let P=!1;const E=compileMessageFormat(e,x,n,k,x,()=>{P=!0});return P?NOOP_MESSAGE_FUNCTION:E}else return isMessageFunction(k)?k:NOOP_MESSAGE_FUNCTION}};return e.processor&&(f.processor=e.processor),o.list&&(f.list=o.list),o.named&&(f.named=o.named),isNumber$1(o.plural)&&(f.pluralIndex=o.plural),f}function datetime(e,...n){const{datetimeFormats:r,unresolving:o,fallbackLocale:u,onWarn:s,localeFallbacker:w}=e,{__datetimeFormatters:g}=e,[v,y,m,d]=parseDateTimeArgs(...n),f=isBoolean(m.missingWarn)?m.missingWarn:e.missingWarn;isBoolean(m.fallbackWarn)?m.fallbackWarn:e.fallbackWarn;const x=!!m.part,k=getLocale(e,m),P=w(e,u,k);if(!isString$3(v)||v==="")return new Intl.DateTimeFormat(k,d).format(y);let S={},E,M=null;const T="datetime format";for(let N=0;N<P.length&&(E=P[N],S=r[E]||{},M=S[v],!isPlainObject$3(M));N++)handleMissing(e,v,E,f,T);if(!isPlainObject$3(M)||!isString$3(E))return o?NOT_REOSLVED:v;let D=`${E}__${v}`;isEmptyObject(d)||(D=`${D}__${JSON.stringify(d)}`);let I=g.get(D);return I||(I=new Intl.DateTimeFormat(E,assign$2({},M,d)),g.set(D,I)),x?I.formatToParts(y):I.format(y)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...e){const[n,r,o,u]=e,s={};let w={},g;if(isString$3(n)){const v=n.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!v)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const y=v[3]?v[3].trim().startsWith("T")?`${v[1].trim()}${v[3].trim()}`:`${v[1].trim()}T${v[3].trim()}`:v[1].trim();g=new Date(y);try{g.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate$1(n)){if(isNaN(n.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);g=n}else if(isNumber$1(n))g=n;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$3(r)?s.key=r:isPlainObject$3(r)&&Object.keys(r).forEach(v=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(v)?w[v]=r[v]:s[v]=r[v]}),isString$3(o)?s.locale=o:isPlainObject$3(o)&&(w=o),isPlainObject$3(u)&&(w=u),[s.key||"",g,s,w]}function clearDateTimeFormat(e,n,r){const o=e;for(const u in r){const s=`${n}__${u}`;!o.__datetimeFormatters.has(s)||o.__datetimeFormatters.delete(s)}}function number(e,...n){const{numberFormats:r,unresolving:o,fallbackLocale:u,onWarn:s,localeFallbacker:w}=e,{__numberFormatters:g}=e,[v,y,m,d]=parseNumberArgs(...n),f=isBoolean(m.missingWarn)?m.missingWarn:e.missingWarn;isBoolean(m.fallbackWarn)?m.fallbackWarn:e.fallbackWarn;const x=!!m.part,k=getLocale(e,m),P=w(e,u,k);if(!isString$3(v)||v==="")return new Intl.NumberFormat(k,d).format(y);let S={},E,M=null;const T="number format";for(let N=0;N<P.length&&(E=P[N],S=r[E]||{},M=S[v],!isPlainObject$3(M));N++)handleMissing(e,v,E,f,T);if(!isPlainObject$3(M)||!isString$3(E))return o?NOT_REOSLVED:v;let D=`${E}__${v}`;isEmptyObject(d)||(D=`${D}__${JSON.stringify(d)}`);let I=g.get(D);return I||(I=new Intl.NumberFormat(E,assign$2({},M,d)),g.set(D,I)),x?I.formatToParts(y):I.format(y)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...e){const[n,r,o,u]=e,s={};let w={};if(!isNumber$1(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const g=n;return isString$3(r)?s.key=r:isPlainObject$3(r)&&Object.keys(r).forEach(v=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(v)?w[v]=r[v]:s[v]=r[v]}),isString$3(o)?s.locale=o:isPlainObject$3(o)&&(w=o),isPlainObject$3(u)&&(w=u),[s.key||"",g,s,w]}function clearNumberFormat(e,n,r){const o=e;for(const u in r){const s=`${n}__${u}`;!o.__numberFormatters.has(s)||o.__numberFormatters.delete(s)}}initFeatureFlags$1();/*!
  * vue-i18n v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const VERSION$1="9.13.1";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}const code$1=CoreWarnCodes.__EXTEND_POINT__,inc$1=incrementer(code$1);inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1();const code=CoreErrorCodes.__EXTEND_POINT__,inc=incrementer(code),I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSTALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSTALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(e,...n){return createCompileError(e,null,void 0)}const TranslateVNodeSymbol=makeSymbol("__translateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules");makeSymbol("__intlifyMeta");const InejctWithOptionSymbol=makeSymbol("__injectWithOption"),DisposeSymbol=makeSymbol("__dispose");function handleFlatJson(e){if(!isObject$4(e))return e;for(const n in e)if(!!hasOwn(e,n))if(!n.includes("."))isObject$4(e[n])&&handleFlatJson(e[n]);else{const r=n.split("."),o=r.length-1;let u=e,s=!1;for(let w=0;w<o;w++){if(r[w]in u||(u[r[w]]={}),!isObject$4(u[r[w]])){s=!0;break}u=u[r[w]]}s||(u[r[o]]=e[n],delete e[n]),isObject$4(u[r[o]])&&handleFlatJson(u[r[o]])}return e}function getLocaleMessages(e,n){const{messages:r,__i18n:o,messageResolver:u,flatJson:s}=n,w=isPlainObject$3(r)?r:isArray$3(o)?{}:{[e]:{}};if(isArray$3(o)&&o.forEach(g=>{if("locale"in g&&"resource"in g){const{locale:v,resource:y}=g;v?(w[v]=w[v]||{},deepCopy(y,w[v])):deepCopy(y,w)}else isString$3(g)&&deepCopy(JSON.parse(g),w)}),u==null&&s)for(const g in w)hasOwn(w,g)&&handleFlatJson(w[g]);return w}function getComponentOptions(e){return e.type}function adjustI18nResources(e,n,r){let o=isObject$4(n.messages)?n.messages:{};"__i18nGlobal"in r&&(o=getLocaleMessages(e.locale.value,{messages:o,__i18n:r.__i18nGlobal}));const u=Object.keys(o);u.length&&u.forEach(s=>{e.mergeLocaleMessage(s,o[s])});{if(isObject$4(n.datetimeFormats)){const s=Object.keys(n.datetimeFormats);s.length&&s.forEach(w=>{e.mergeDateTimeFormat(w,n.datetimeFormats[w])})}if(isObject$4(n.numberFormats)){const s=Object.keys(n.numberFormats);s.length&&s.forEach(w=>{e.mergeNumberFormat(w,n.numberFormats[w])})}}}function createTextNode(e){return createVNode(Text$2,null,e,0)}const DEVTOOLS_META="__INTLIFY_META__",NOOP_RETURN_ARRAY=()=>[],NOOP_RETURN_FALSE=()=>!1;let composerID=0;function defineCoreMissingHandler(e){return(n,r,o,u)=>e(r,o,getCurrentInstance()||void 0,u)}const getMetaInfo=()=>{const e=getCurrentInstance();let n=null;return e&&(n=getComponentOptions(e)[DEVTOOLS_META])?{[DEVTOOLS_META]:n}:null};function createComposer(e={},n){const{__root:r,__injectWithOption:o}=e,u=r===void 0,s=e.flatJson,w=inBrowser$1?ref:shallowRef,g=!!e.translateExistCompatible;let v=isBoolean(e.inheritLocale)?e.inheritLocale:!0;const y=w(r&&v?r.locale.value:isString$3(e.locale)?e.locale:DEFAULT_LOCALE),m=w(r&&v?r.fallbackLocale.value:isString$3(e.fallbackLocale)||isArray$3(e.fallbackLocale)||isPlainObject$3(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:y.value),d=w(getLocaleMessages(y.value,e)),f=w(isPlainObject$3(e.datetimeFormats)?e.datetimeFormats:{[y.value]:{}}),x=w(isPlainObject$3(e.numberFormats)?e.numberFormats:{[y.value]:{}});let k=r?r.missingWarn:isBoolean(e.missingWarn)||isRegExp(e.missingWarn)?e.missingWarn:!0,P=r?r.fallbackWarn:isBoolean(e.fallbackWarn)||isRegExp(e.fallbackWarn)?e.fallbackWarn:!0,S=r?r.fallbackRoot:isBoolean(e.fallbackRoot)?e.fallbackRoot:!0,E=!!e.fallbackFormat,M=isFunction$2(e.missing)?e.missing:null,T=isFunction$2(e.missing)?defineCoreMissingHandler(e.missing):null,D=isFunction$2(e.postTranslation)?e.postTranslation:null,I=r?r.warnHtmlMessage:isBoolean(e.warnHtmlMessage)?e.warnHtmlMessage:!0,N=!!e.escapeParameter;const O=r?r.modifiers:isPlainObject$3(e.modifiers)?e.modifiers:{};let F=e.pluralRules||r&&r.pluralRules,U;U=(()=>{u&&setFallbackContext(null);const nt={version:VERSION$1,locale:y.value,fallbackLocale:m.value,messages:d.value,modifiers:O,pluralRules:F,missing:T===null?void 0:T,missingWarn:k,fallbackWarn:P,fallbackFormat:E,unresolving:!0,postTranslation:D===null?void 0:D,warnHtmlMessage:I,escapeParameter:N,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};nt.datetimeFormats=f.value,nt.numberFormats=x.value,nt.__datetimeFormatters=isPlainObject$3(U)?U.__datetimeFormatters:void 0,nt.__numberFormatters=isPlainObject$3(U)?U.__numberFormatters:void 0;const st=createCoreContext(nt);return u&&setFallbackContext(st),st})(),updateFallbackLocale(U,y.value,m.value);function Q(){return[y.value,m.value,d.value,f.value,x.value]}const q=computed({get:()=>y.value,set:nt=>{y.value=nt,U.locale=y.value}}),ne=computed({get:()=>m.value,set:nt=>{m.value=nt,U.fallbackLocale=m.value,updateFallbackLocale(U,y.value,nt)}}),J=computed(()=>d.value),re=computed(()=>f.value),X=computed(()=>x.value);function j(){return isFunction$2(D)?D:null}function Z(nt){D=nt,U.postTranslation=nt}function W(){return M}function te(nt){nt!==null&&(T=defineCoreMissingHandler(nt)),M=nt,U.missing=T}const le=(nt,st,gt,_t,wt,He)=>{Q();let Ve;try{__INTLIFY_PROD_DEVTOOLS__&&setAdditionalMeta(getMetaInfo()),u||(U.fallbackContext=r?getFallbackContext():void 0),Ve=nt(U)}finally{__INTLIFY_PROD_DEVTOOLS__&&setAdditionalMeta(null),u||(U.fallbackContext=void 0)}if(gt!=="translate exists"&&isNumber$1(Ve)&&Ve===NOT_REOSLVED||gt==="translate exists"&&!Ve){const[ze,Ne]=st();return r&&S?_t(r):wt(ze)}else{if(He(Ve))return Ve;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function oe(...nt){return le(st=>Reflect.apply(translate,null,[st,...nt]),()=>parseTranslateArgs(...nt),"translate",st=>Reflect.apply(st.t,st,[...nt]),st=>st,st=>isString$3(st))}function Ee(...nt){const[st,gt,_t]=nt;if(_t&&!isObject$4(_t))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return oe(st,gt,assign$2({resolvedMessage:!0},_t||{}))}function Ae(...nt){return le(st=>Reflect.apply(datetime,null,[st,...nt]),()=>parseDateTimeArgs(...nt),"datetime format",st=>Reflect.apply(st.d,st,[...nt]),()=>MISSING_RESOLVE_VALUE,st=>isString$3(st))}function ve(...nt){return le(st=>Reflect.apply(number,null,[st,...nt]),()=>parseNumberArgs(...nt),"number format",st=>Reflect.apply(st.n,st,[...nt]),()=>MISSING_RESOLVE_VALUE,st=>isString$3(st))}function ke(nt){return nt.map(st=>isString$3(st)||isNumber$1(st)||isBoolean(st)?createTextNode(String(st)):st)}const Pe={normalize:ke,interpolate:nt=>nt,type:"vnode"};function Me(...nt){return le(st=>{let gt;const _t=st;try{_t.processor=Pe,gt=Reflect.apply(translate,null,[_t,...nt])}finally{_t.processor=null}return gt},()=>parseTranslateArgs(...nt),"translate",st=>st[TranslateVNodeSymbol](...nt),st=>[createTextNode(st)],st=>isArray$3(st))}function Le(...nt){return le(st=>Reflect.apply(number,null,[st,...nt]),()=>parseNumberArgs(...nt),"number format",st=>st[NumberPartsSymbol](...nt),NOOP_RETURN_ARRAY,st=>isString$3(st)||isArray$3(st))}function Te(...nt){return le(st=>Reflect.apply(datetime,null,[st,...nt]),()=>parseDateTimeArgs(...nt),"datetime format",st=>st[DatetimePartsSymbol](...nt),NOOP_RETURN_ARRAY,st=>isString$3(st)||isArray$3(st))}function ye(nt){F=nt,U.pluralRules=F}function _e(nt,st){return le(()=>{if(!nt)return!1;const gt=isString$3(st)?st:y.value,_t=$e(gt),wt=U.messageResolver(_t,nt);return g?wt!=null:isMessageAST(wt)||isMessageFunction(wt)||isString$3(wt)},()=>[nt],"translate exists",gt=>Reflect.apply(gt.te,gt,[nt,st]),NOOP_RETURN_FALSE,gt=>isBoolean(gt))}function we(nt){let st=null;const gt=fallbackWithLocaleChain(U,m.value,y.value);for(let _t=0;_t<gt.length;_t++){const wt=d.value[gt[_t]]||{},He=U.messageResolver(wt,nt);if(He!=null){st=He;break}}return st}function Se(nt){const st=we(nt);return st!=null?st:r?r.tm(nt)||{}:{}}function $e(nt){return d.value[nt]||{}}function Be(nt,st){if(s){const gt={[nt]:st};for(const _t in gt)hasOwn(gt,_t)&&handleFlatJson(gt[_t]);st=gt[nt]}d.value[nt]=st,U.messages=d.value}function Oe(nt,st){d.value[nt]=d.value[nt]||{};const gt={[nt]:st};if(s)for(const _t in gt)hasOwn(gt,_t)&&handleFlatJson(gt[_t]);st=gt[nt],deepCopy(st,d.value[nt]),U.messages=d.value}function Ge(nt){return f.value[nt]||{}}function Ie(nt,st){f.value[nt]=st,U.datetimeFormats=f.value,clearDateTimeFormat(U,nt,st)}function je(nt,st){f.value[nt]=assign$2(f.value[nt]||{},st),U.datetimeFormats=f.value,clearDateTimeFormat(U,nt,st)}function qe(nt){return x.value[nt]||{}}function Ue(nt,st){x.value[nt]=st,U.numberFormats=x.value,clearNumberFormat(U,nt,st)}function Je(nt,st){x.value[nt]=assign$2(x.value[nt]||{},st),U.numberFormats=x.value,clearNumberFormat(U,nt,st)}composerID++,r&&inBrowser$1&&(watch(r.locale,nt=>{v&&(y.value=nt,U.locale=nt,updateFallbackLocale(U,y.value,m.value))}),watch(r.fallbackLocale,nt=>{v&&(m.value=nt,U.fallbackLocale=nt,updateFallbackLocale(U,y.value,m.value))}));const et={id:composerID,locale:q,fallbackLocale:ne,get inheritLocale(){return v},set inheritLocale(nt){v=nt,nt&&r&&(y.value=r.locale.value,m.value=r.fallbackLocale.value,updateFallbackLocale(U,y.value,m.value))},get availableLocales(){return Object.keys(d.value).sort()},messages:J,get modifiers(){return O},get pluralRules(){return F||{}},get isGlobal(){return u},get missingWarn(){return k},set missingWarn(nt){k=nt,U.missingWarn=k},get fallbackWarn(){return P},set fallbackWarn(nt){P=nt,U.fallbackWarn=P},get fallbackRoot(){return S},set fallbackRoot(nt){S=nt},get fallbackFormat(){return E},set fallbackFormat(nt){E=nt,U.fallbackFormat=E},get warnHtmlMessage(){return I},set warnHtmlMessage(nt){I=nt,U.warnHtmlMessage=nt},get escapeParameter(){return N},set escapeParameter(nt){N=nt,U.escapeParameter=nt},t:oe,getLocaleMessage:$e,setLocaleMessage:Be,mergeLocaleMessage:Oe,getPostTranslationHandler:j,setPostTranslationHandler:Z,getMissingHandler:W,setMissingHandler:te,[SetPluralRulesSymbol]:ye};return et.datetimeFormats=re,et.numberFormats=X,et.rt=Ee,et.te=_e,et.tm=Se,et.d=Ae,et.n=ve,et.getDateTimeFormat=Ge,et.setDateTimeFormat=Ie,et.mergeDateTimeFormat=je,et.getNumberFormat=qe,et.setNumberFormat=Ue,et.mergeNumberFormat=Je,et[InejctWithOptionSymbol]=o,et[TranslateVNodeSymbol]=Me,et[DatetimePartsSymbol]=Te,et[NumberPartsSymbol]=Le,et}function convertComposerOptions(e){const n=isString$3(e.locale)?e.locale:DEFAULT_LOCALE,r=isString$3(e.fallbackLocale)||isArray$3(e.fallbackLocale)||isPlainObject$3(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:n,o=isFunction$2(e.missing)?e.missing:void 0,u=isBoolean(e.silentTranslationWarn)||isRegExp(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,s=isBoolean(e.silentFallbackWarn)||isRegExp(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,w=isBoolean(e.fallbackRoot)?e.fallbackRoot:!0,g=!!e.formatFallbackMessages,v=isPlainObject$3(e.modifiers)?e.modifiers:{},y=e.pluralizationRules,m=isFunction$2(e.postTranslation)?e.postTranslation:void 0,d=isString$3(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,f=!!e.escapeParameterHtml,x=isBoolean(e.sync)?e.sync:!0;let k=e.messages;if(isPlainObject$3(e.sharedMessages)){const N=e.sharedMessages;k=Object.keys(N).reduce((F,U)=>{const Y=F[U]||(F[U]={});return assign$2(Y,N[U]),F},k||{})}const{__i18n:P,__root:S,__injectWithOption:E}=e,M=e.datetimeFormats,T=e.numberFormats,D=e.flatJson,I=e.translateExistCompatible;return{locale:n,fallbackLocale:r,messages:k,flatJson:D,datetimeFormats:M,numberFormats:T,missing:o,missingWarn:u,fallbackWarn:s,fallbackRoot:w,fallbackFormat:g,modifiers:v,pluralRules:y,postTranslation:m,warnHtmlMessage:d,escapeParameter:f,messageResolver:e.messageResolver,inheritLocale:x,translateExistCompatible:I,__i18n:P,__root:S,__injectWithOption:E}}function createVueI18n(e={},n){{const r=createComposer(convertComposerOptions(e)),{__extender:o}=e,u={id:r.id,get locale(){return r.locale.value},set locale(s){r.locale.value=s},get fallbackLocale(){return r.fallbackLocale.value},set fallbackLocale(s){r.fallbackLocale.value=s},get messages(){return r.messages.value},get datetimeFormats(){return r.datetimeFormats.value},get numberFormats(){return r.numberFormats.value},get availableLocales(){return r.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(s){},get missing(){return r.getMissingHandler()},set missing(s){r.setMissingHandler(s)},get silentTranslationWarn(){return isBoolean(r.missingWarn)?!r.missingWarn:r.missingWarn},set silentTranslationWarn(s){r.missingWarn=isBoolean(s)?!s:s},get silentFallbackWarn(){return isBoolean(r.fallbackWarn)?!r.fallbackWarn:r.fallbackWarn},set silentFallbackWarn(s){r.fallbackWarn=isBoolean(s)?!s:s},get modifiers(){return r.modifiers},get formatFallbackMessages(){return r.fallbackFormat},set formatFallbackMessages(s){r.fallbackFormat=s},get postTranslation(){return r.getPostTranslationHandler()},set postTranslation(s){r.setPostTranslationHandler(s)},get sync(){return r.inheritLocale},set sync(s){r.inheritLocale=s},get warnHtmlInMessage(){return r.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(s){r.warnHtmlMessage=s!=="off"},get escapeParameterHtml(){return r.escapeParameter},set escapeParameterHtml(s){r.escapeParameter=s},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(s){},get pluralizationRules(){return r.pluralRules||{}},__composer:r,t(...s){const[w,g,v]=s,y={};let m=null,d=null;if(!isString$3(w))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const f=w;return isString$3(g)?y.locale=g:isArray$3(g)?m=g:isPlainObject$3(g)&&(d=g),isArray$3(v)?m=v:isPlainObject$3(v)&&(d=v),Reflect.apply(r.t,r,[f,m||d||{},y])},rt(...s){return Reflect.apply(r.rt,r,[...s])},tc(...s){const[w,g,v]=s,y={plural:1};let m=null,d=null;if(!isString$3(w))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const f=w;return isString$3(g)?y.locale=g:isNumber$1(g)?y.plural=g:isArray$3(g)?m=g:isPlainObject$3(g)&&(d=g),isString$3(v)?y.locale=v:isArray$3(v)?m=v:isPlainObject$3(v)&&(d=v),Reflect.apply(r.t,r,[f,m||d||{},y])},te(s,w){return r.te(s,w)},tm(s){return r.tm(s)},getLocaleMessage(s){return r.getLocaleMessage(s)},setLocaleMessage(s,w){r.setLocaleMessage(s,w)},mergeLocaleMessage(s,w){r.mergeLocaleMessage(s,w)},d(...s){return Reflect.apply(r.d,r,[...s])},getDateTimeFormat(s){return r.getDateTimeFormat(s)},setDateTimeFormat(s,w){r.setDateTimeFormat(s,w)},mergeDateTimeFormat(s,w){r.mergeDateTimeFormat(s,w)},n(...s){return Reflect.apply(r.n,r,[...s])},getNumberFormat(s){return r.getNumberFormat(s)},setNumberFormat(s,w){r.setNumberFormat(s,w)},mergeNumberFormat(s,w){r.mergeNumberFormat(s,w)},getChoiceIndex(s,w){return-1}};return u.__extender=o,u}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:e},n){return n.length===1&&n[0]==="default"?(e.default?e.default():[]).reduce((o,u)=>[...o,...u.type===Fragment?u.children:[u]],[]):n.reduce((r,o)=>{const u=e[o];return u&&(r[o]=u()),r},{})}function getFragmentableTag(e){return Fragment}const TranslationImpl=defineComponent({name:"i18n-t",props:assign$2({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>isNumber$1(e)||!isNaN(e)}},baseFormatProps),setup(e,n){const{slots:r,attrs:o}=n,u=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return()=>{const s=Object.keys(r).filter(d=>d!=="_"),w={};e.locale&&(w.locale=e.locale),e.plural!==void 0&&(w.plural=isString$3(e.plural)?+e.plural:e.plural);const g=getInterpolateArg(n,s),v=u[TranslateVNodeSymbol](e.keypath,g,w),y=assign$2({},o),m=isString$3(e.tag)||isObject$4(e.tag)?e.tag:getFragmentableTag();return h$1(m,y,v)}}}),Translation=TranslationImpl;function isVNode(e){return isArray$3(e)&&!isString$3(e[0])}function renderFormatter(e,n,r,o){const{slots:u,attrs:s}=n;return()=>{const w={part:!0};let g={};e.locale&&(w.locale=e.locale),isString$3(e.format)?w.key=e.format:isObject$4(e.format)&&(isString$3(e.format.key)&&(w.key=e.format.key),g=Object.keys(e.format).reduce((f,x)=>r.includes(x)?assign$2({},f,{[x]:e.format[x]}):f,{}));const v=o(e.value,w,g);let y=[w.key];isArray$3(v)?y=v.map((f,x)=>{const k=u[f.type],P=k?k({[f.type]:f.value,index:x,parts:v}):[f.value];return isVNode(P)&&(P[0].key=`${f.type}-${x}`),P}):isString$3(v)&&(y=[v]);const m=assign$2({},s),d=isString$3(e.tag)||isObject$4(e.tag)?e.tag:getFragmentableTag();return h$1(d,m,y)}}const NumberFormatImpl=defineComponent({name:"i18n-n",props:assign$2({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,n){const r=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return renderFormatter(e,n,NUMBER_FORMAT_OPTIONS_KEYS,(...o)=>r[NumberPartsSymbol](...o))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=defineComponent({name:"i18n-d",props:assign$2({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,n){const r=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return renderFormatter(e,n,DATETIME_FORMAT_OPTIONS_KEYS,(...o)=>r[DatetimePartsSymbol](...o))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$2(e,n){const r=e;if(e.mode==="composition")return r.__getInstance(n)||e.global;{const o=r.__getInstance(n);return o!=null?o.__composer:e.global.__composer}}function vTDirective(e){const n=w=>{const{instance:g,modifiers:v,value:y}=w;if(!g||!g.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const m=getComposer$2(e,g.$),d=parseValue(y);return[Reflect.apply(m.t,m,[...makeParams(d)]),m]};return{created:(w,g)=>{const[v,y]=n(g);inBrowser$1&&e.global===y&&(w.__i18nWatcher=watch(y.locale,()=>{g.instance&&g.instance.$forceUpdate()})),w.__composer=y,w.textContent=v},unmounted:w=>{inBrowser$1&&w.__i18nWatcher&&(w.__i18nWatcher(),w.__i18nWatcher=void 0,delete w.__i18nWatcher),w.__composer&&(w.__composer=void 0,delete w.__composer)},beforeUpdate:(w,{value:g})=>{if(w.__composer){const v=w.__composer,y=parseValue(g);w.textContent=Reflect.apply(v.t,v,[...makeParams(y)])}},getSSRProps:w=>{const[g]=n(w);return{textContent:g}}}}function parseValue(e){if(isString$3(e))return{path:e};if(isPlainObject$3(e)){if(!("path"in e))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return e}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(e){const{path:n,locale:r,args:o,choice:u,plural:s}=e,w={},g=o||{};return isString$3(r)&&(w.locale=r),isNumber$1(u)&&(w.plural=u),isNumber$1(s)&&(w.plural=s),[n,g,w]}function apply$1(e,n,...r){const o=isPlainObject$3(r[0])?r[0]:{},u=!!o.useI18nComponentName;(isBoolean(o.globalInstall)?o.globalInstall:!0)&&([u?"i18n":Translation.name,"I18nT"].forEach(w=>e.component(w,Translation)),[NumberFormat.name,"I18nN"].forEach(w=>e.component(w,NumberFormat)),[DatetimeFormat.name,"I18nD"].forEach(w=>e.component(w,DatetimeFormat))),e.directive("t",vTDirective(n))}function defineMixin(e,n,r){return{beforeCreate(){const o=getCurrentInstance();if(!o)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const u=this.$options;if(u.i18n){const s=u.i18n;if(u.__i18n&&(s.__i18n=u.__i18n),s.__root=n,this===this.$root)this.$i18n=mergeToGlobal(e,s);else{s.__injectWithOption=!0,s.__extender=r.__vueI18nExtend,this.$i18n=createVueI18n(s);const w=this.$i18n;w.__extender&&(w.__disposer=w.__extender(this.$i18n))}}else if(u.__i18n)if(this===this.$root)this.$i18n=mergeToGlobal(e,u);else{this.$i18n=createVueI18n({__i18n:u.__i18n,__injectWithOption:!0,__extender:r.__vueI18nExtend,__root:n});const s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}else this.$i18n=e;u.__i18nGlobal&&adjustI18nResources(n,u,u),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$tc=(...s)=>this.$i18n.tc(...s),this.$te=(s,w)=>this.$i18n.te(s,w),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s),r.__setInstance(o,this.$i18n)},mounted(){},unmounted(){const o=getCurrentInstance();if(!o)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const u=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,u.__disposer&&(u.__disposer(),delete u.__disposer,delete u.__extender),r.__deleteInstance(o),delete this.$i18n}}}function mergeToGlobal(e,n){e.locale=n.locale||e.locale,e.fallbackLocale=n.fallbackLocale||e.fallbackLocale,e.missing=n.missing||e.missing,e.silentTranslationWarn=n.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=n.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=n.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=n.postTranslation||e.postTranslation,e.warnHtmlInMessage=n.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=n.escapeParameterHtml||e.escapeParameterHtml,e.sync=n.sync||e.sync,e.__composer[SetPluralRulesSymbol](n.pluralizationRules||e.pluralizationRules);const r=getLocaleMessages(e.locale,{messages:n.messages,__i18n:n.__i18n});return Object.keys(r).forEach(o=>e.mergeLocaleMessage(o,r[o])),n.datetimeFormats&&Object.keys(n.datetimeFormats).forEach(o=>e.mergeDateTimeFormat(o,n.datetimeFormats[o])),n.numberFormats&&Object.keys(n.numberFormats).forEach(o=>e.mergeNumberFormat(o,n.numberFormats[o])),e}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(e={},n){const r=__VUE_I18N_LEGACY_API__&&isBoolean(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,o=isBoolean(e.globalInjection)?e.globalInjection:!0,u=__VUE_I18N_LEGACY_API__&&r?!!e.allowComposition:!0,s=new Map,[w,g]=createGlobal(e,r),v=makeSymbol("");function y(f){return s.get(f)||null}function m(f,x){s.set(f,x)}function d(f){s.delete(f)}{const f={get mode(){return __VUE_I18N_LEGACY_API__&&r?"legacy":"composition"},get allowComposition(){return u},async install(x,...k){if(x.__VUE_I18N_SYMBOL__=v,x.provide(x.__VUE_I18N_SYMBOL__,f),isPlainObject$3(k[0])){const E=k[0];f.__composerExtend=E.__composerExtend,f.__vueI18nExtend=E.__vueI18nExtend}let P=null;!r&&o&&(P=injectGlobalFields(x,f.global)),__VUE_I18N_FULL_INSTALL__&&apply$1(x,f,...k),__VUE_I18N_LEGACY_API__&&r&&x.mixin(defineMixin(g,g.__composer,f));const S=x.unmount;x.unmount=()=>{P&&P(),f.dispose(),S()}},get global(){return g},dispose(){w.stop()},__instances:s,__getInstance:y,__setInstance:m,__deleteInstance:d};return f}}function useI18n(e={}){const n=getCurrentInstance();if(n==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!n.isCE&&n.appContext.app!=null&&!n.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSTALLED);const r=getI18nInstance(n),o=getGlobalComposer(r),u=getComponentOptions(n),s=getScope(e,u);if(__VUE_I18N_LEGACY_API__&&r.mode==="legacy"&&!e.__useComponent){if(!r.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(n,s,o,e)}if(s==="global")return adjustI18nResources(o,e,u),o;if(s==="parent"){let v=getComposer(r,n,e.__useComponent);return v==null&&(v=o),v}const w=r;let g=w.__getInstance(n);if(g==null){const v=assign$2({},e);"__i18n"in u&&(v.__i18n=u.__i18n),o&&(v.__root=o),g=createComposer(v),w.__composerExtend&&(g[DisposeSymbol]=w.__composerExtend(g)),setupLifeCycle(w,n,g),w.__setInstance(n,g)}return g}function createGlobal(e,n,r){const o=effectScope();{const u=__VUE_I18N_LEGACY_API__&&n?o.run(()=>createVueI18n(e)):o.run(()=>createComposer(e));if(u==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[o,u]}}function getI18nInstance(e){{const n=inject(e.isCE?I18nInjectionKey:e.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw createI18nError(e.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return n}}function getScope(e,n){return isEmptyObject(e)?"__i18n"in n?"local":"global":e.useScope?e.useScope:"local"}function getGlobalComposer(e){return e.mode==="composition"?e.global:e.global.__composer}function getComposer(e,n,r=!1){let o=null;const u=n.root;let s=getParentComponentInstance(n,r);for(;s!=null;){const w=e;if(e.mode==="composition")o=w.__getInstance(s);else if(__VUE_I18N_LEGACY_API__){const g=w.__getInstance(s);g!=null&&(o=g.__composer,r&&o&&!o[InejctWithOptionSymbol]&&(o=null))}if(o!=null||u===s)break;s=s.parent}return o}function getParentComponentInstance(e,n=!1){return e==null?null:n&&e.vnode.ctx||e.parent}function setupLifeCycle(e,n,r){onMounted(()=>{},n),onUnmounted(()=>{const o=r;e.__deleteInstance(n);const u=o[DisposeSymbol];u&&(u(),delete o[DisposeSymbol])},n)}function useI18nForLegacy(e,n,r,o={}){const u=n==="local",s=shallowRef(null);if(u&&e.proxy&&!(e.proxy.$options.i18n||e.proxy.$options.__i18n))throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const w=isBoolean(o.inheritLocale)?o.inheritLocale:!isString$3(o.locale),g=ref(!u||w?r.locale.value:isString$3(o.locale)?o.locale:DEFAULT_LOCALE),v=ref(!u||w?r.fallbackLocale.value:isString$3(o.fallbackLocale)||isArray$3(o.fallbackLocale)||isPlainObject$3(o.fallbackLocale)||o.fallbackLocale===!1?o.fallbackLocale:g.value),y=ref(getLocaleMessages(g.value,o)),m=ref(isPlainObject$3(o.datetimeFormats)?o.datetimeFormats:{[g.value]:{}}),d=ref(isPlainObject$3(o.numberFormats)?o.numberFormats:{[g.value]:{}}),f=u?r.missingWarn:isBoolean(o.missingWarn)||isRegExp(o.missingWarn)?o.missingWarn:!0,x=u?r.fallbackWarn:isBoolean(o.fallbackWarn)||isRegExp(o.fallbackWarn)?o.fallbackWarn:!0,k=u?r.fallbackRoot:isBoolean(o.fallbackRoot)?o.fallbackRoot:!0,P=!!o.fallbackFormat,S=isFunction$2(o.missing)?o.missing:null,E=isFunction$2(o.postTranslation)?o.postTranslation:null,M=u?r.warnHtmlMessage:isBoolean(o.warnHtmlMessage)?o.warnHtmlMessage:!0,T=!!o.escapeParameter,D=u?r.modifiers:isPlainObject$3(o.modifiers)?o.modifiers:{},I=o.pluralRules||u&&r.pluralRules;function N(){return[g.value,v.value,y.value,m.value,d.value]}const O=computed({get:()=>s.value?s.value.locale.value:g.value,set:we=>{s.value&&(s.value.locale.value=we),g.value=we}}),F=computed({get:()=>s.value?s.value.fallbackLocale.value:v.value,set:we=>{s.value&&(s.value.fallbackLocale.value=we),v.value=we}}),U=computed(()=>s.value?s.value.messages.value:y.value),Y=computed(()=>m.value),Q=computed(()=>d.value);function q(){return s.value?s.value.getPostTranslationHandler():E}function ne(we){s.value&&s.value.setPostTranslationHandler(we)}function J(){return s.value?s.value.getMissingHandler():S}function re(we){s.value&&s.value.setMissingHandler(we)}function X(we){return N(),we()}function j(...we){return s.value?X(()=>Reflect.apply(s.value.t,null,[...we])):X(()=>"")}function Z(...we){return s.value?Reflect.apply(s.value.rt,null,[...we]):""}function W(...we){return s.value?X(()=>Reflect.apply(s.value.d,null,[...we])):X(()=>"")}function te(...we){return s.value?X(()=>Reflect.apply(s.value.n,null,[...we])):X(()=>"")}function le(we){return s.value?s.value.tm(we):{}}function oe(we,Se){return s.value?s.value.te(we,Se):!1}function Ee(we){return s.value?s.value.getLocaleMessage(we):{}}function Ae(we,Se){s.value&&(s.value.setLocaleMessage(we,Se),y.value[we]=Se)}function ve(we,Se){s.value&&s.value.mergeLocaleMessage(we,Se)}function ke(we){return s.value?s.value.getDateTimeFormat(we):{}}function Ce(we,Se){s.value&&(s.value.setDateTimeFormat(we,Se),m.value[we]=Se)}function Pe(we,Se){s.value&&s.value.mergeDateTimeFormat(we,Se)}function Me(we){return s.value?s.value.getNumberFormat(we):{}}function Le(we,Se){s.value&&(s.value.setNumberFormat(we,Se),d.value[we]=Se)}function Te(we,Se){s.value&&s.value.mergeNumberFormat(we,Se)}const ye={get id(){return s.value?s.value.id:-1},locale:O,fallbackLocale:F,messages:U,datetimeFormats:Y,numberFormats:Q,get inheritLocale(){return s.value?s.value.inheritLocale:w},set inheritLocale(we){s.value&&(s.value.inheritLocale=we)},get availableLocales(){return s.value?s.value.availableLocales:Object.keys(y.value)},get modifiers(){return s.value?s.value.modifiers:D},get pluralRules(){return s.value?s.value.pluralRules:I},get isGlobal(){return s.value?s.value.isGlobal:!1},get missingWarn(){return s.value?s.value.missingWarn:f},set missingWarn(we){s.value&&(s.value.missingWarn=we)},get fallbackWarn(){return s.value?s.value.fallbackWarn:x},set fallbackWarn(we){s.value&&(s.value.missingWarn=we)},get fallbackRoot(){return s.value?s.value.fallbackRoot:k},set fallbackRoot(we){s.value&&(s.value.fallbackRoot=we)},get fallbackFormat(){return s.value?s.value.fallbackFormat:P},set fallbackFormat(we){s.value&&(s.value.fallbackFormat=we)},get warnHtmlMessage(){return s.value?s.value.warnHtmlMessage:M},set warnHtmlMessage(we){s.value&&(s.value.warnHtmlMessage=we)},get escapeParameter(){return s.value?s.value.escapeParameter:T},set escapeParameter(we){s.value&&(s.value.escapeParameter=we)},t:j,getPostTranslationHandler:q,setPostTranslationHandler:ne,getMissingHandler:J,setMissingHandler:re,rt:Z,d:W,n:te,tm:le,te:oe,getLocaleMessage:Ee,setLocaleMessage:Ae,mergeLocaleMessage:ve,getDateTimeFormat:ke,setDateTimeFormat:Ce,mergeDateTimeFormat:Pe,getNumberFormat:Me,setNumberFormat:Le,mergeNumberFormat:Te};function _e(we){we.locale.value=g.value,we.fallbackLocale.value=v.value,Object.keys(y.value).forEach(Se=>{we.mergeLocaleMessage(Se,y.value[Se])}),Object.keys(m.value).forEach(Se=>{we.mergeDateTimeFormat(Se,m.value[Se])}),Object.keys(d.value).forEach(Se=>{we.mergeNumberFormat(Se,d.value[Se])}),we.escapeParameter=T,we.fallbackFormat=P,we.fallbackRoot=k,we.fallbackWarn=x,we.missingWarn=f,we.warnHtmlMessage=M}return onBeforeMount(()=>{if(e.proxy==null||e.proxy.$i18n==null)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const we=s.value=e.proxy.$i18n.__composer;n==="global"?(g.value=we.locale.value,v.value=we.fallbackLocale.value,y.value=we.messages.value,m.value=we.datetimeFormats.value,d.value=we.numberFormats.value):u&&_e(we)}),ye}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(e,n){const r=Object.create(null);return globalExportProps.forEach(u=>{const s=Object.getOwnPropertyDescriptor(n,u);if(!s)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const w=isRef(s.value)?{get(){return s.value.value},set(g){s.value.value=g}}:{get(){return s.get&&s.get()}};Object.defineProperty(r,u,w)}),e.config.globalProperties.$i18n=r,globalExportMethods.forEach(u=>{const s=Object.getOwnPropertyDescriptor(n,u);if(!s||!s.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${u}`,s)}),()=>{delete e.config.globalProperties.$i18n,globalExportMethods.forEach(u=>{delete e.config.globalProperties[`$${u}`]})}}initFeatureFlags();__INTLIFY_JIT_COMPILATION__?registerMessageCompiler(compile):registerMessageCompiler(compileToFunction);registerMessageResolver(resolveValue);registerLocaleFallbacker(fallbackWithLocaleChain);if(__INTLIFY_PROD_DEVTOOLS__){const e=getGlobalThis();e.__INTLIFY__=!0,setDevToolsHook(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const header$5={leftPanel:"Left Panel",fullScreen:"Full Screen",pan:"Pan",cropPage:"Snip",zoomIn:"Zoom In",zoomOut:"Zoom Out",light:"Light",dark:"Dark",lightMode:"Light Mode",darkMode:"Dark Mode",viewer:"Viewer",annotations:"Annotations",forms:"Forms",signatures:"Signatures",security:"Security",compare:"Compare Documents",editor:"Content Editor",document:"Document Editor",separation:"Color Separation",measurement:"Measurement",note:"Note",highlight:"Highlight",underline:"Underline",strikeout:"Strikeout",squiggly:"Squiggly",ink:"Ink",circle:"Circle",arc:"Arc",polygon:"Polygon",polyline:"Multiline",square:"Rectangle",arrow:"Arrow",line:"Line",freetext:"Free Text",stamp:"Stamp",image:"Image",link:"Link",textField:"Text Field",checkbox:"Check Box",radioButton:"Radio Button",listBox:"List Box",comboButton:"Combo Button",button:"Push Button",openFile:"Open File",search:"Search",rightPanel:"Right Panel",viewSetting:"View Setting",download:"Download",flatten:"Save as Flattened PDF",print:"Print",settings:{settings:"Settings",author:"Author",annotator:"Annotator",language:"Language",highlightLink:"Highlight Link",highlightForm:"Highlight Form",fillConsecutively:"Fill Form Fields Consecutively",creationInfo:"Creation Information",version:"Version"},addText:"Add Text",addImage:"Add Image",undo:"Undo",redo:"Redo",createSignField:"Create/ Set Signature Field",addDigitalSign:"Add Digital Signature",addElectronicSign:"Add Electronic Signature",verifyDigitalSign:"Verify Digital Signature",measureLine:"Line",measureMultiline:"Multiline",measurePolygon:"Polygon",measureRectangle:"Rectangle",measureCircle:"Circle/ Ellipse",measureCurve:"Curve",measureArc:"Arc",compareClickTip:"Click here to start."},nextPage$6="Next",previousPage$6="Previous",loading$5="Loading",upload$5="Open File",exit$5="Exit",leftPanel$5={thumbnails:"Thumbnails",outlines:"Outlines",noOutlines:"No Outlines",layers:"Layers",noLayers:"No Layers",menu:"Menu",showAll:"Show All",hideAll:"Hide All",restoreSettings:"Restore Default Settings",exportLayers:"Export File Layers",layerProperty:"Layer Property",exportLayer:"Export This Layer",annotations:"Annotations",noAnnotations:"No Annotations",importAnnotations:"Import Annotations",exportAnnotations:"Export Annotations",search:"Search",searchPdf:"Search PDF",page:"Page",whichPage:["Page",""],previousPhrase:"Find the previous occurrence of the phrase",nextPhrase:"Find the next occurrence of the phrase",results:"Results",noResults:"No results",signature:"Signature",signatureList:"Digital Signature List",signatureDetails:"Signature Details",certificationDetails:"Certification Details",noSignatures:"No Signatures",marked:"Marked",unmarked:"Unmarked",accepted:"Accepted",rejected:"Rejected",cancelled:"Cancelled",completed:"Completed",none:"None",edit:"Edit",delete:"Delete",replyPlaceholder:"Reply or add thoughts",reply:"Reply",confirm:"Confirm"},pageModePanel$5={displayMode:"Display Mode",singlePage:"Single Page",twoPages:"Two Pages",coverMode:"Cover Mode",splitView:"Scroll",vertical:"Vertical Scrolling",horizontal:"Horizontal Scrolling",themes:"Themes"},stampPanel$5={standard:"Standard",dynamic:"Dynamic",custom:"Custom",blank:"Create Here",create:"Create"},linkPanel$5={linkTo:"Link to",url:"URL",goToPages:"Go To Pages",email:"Email",go:"Go"},rightPanel$5={general:"General",name:"Name",formField:"Form Field",visible:"Visible",hidden:"Hidden",properties:"Properties",requried:"Requried",differentNameError:"Please choose a different name.",buttonText:"Button Text",appearance:"Appearance",backgroundColor:"Background Color",preferences:"Preferences",alignment:"Alignment",left:"Left",center:"Center",right:"Right",defaultValue:"Default Value",multiLine:"Multi-line",buttonStyle:"Button Style",check:"Check",circle:"Circle",cross:"Cross",diamond:"Diamond",square:"Square",star:"Star",defaultChecked:"Button is checked by default",item:"Item",itemList:"Item List",option:"Item",selectAction:"Select Action",none:"None",goPage:"Go To Pages",openLink:"Open a Web Link",addUrl:"Add URL",addPage:"Add Page",radioBtnTip1:"1 button in group. At lease 2 buttons needed.",radioBtnTip2:"To create a set of mutualy exclusive radio buttons (i.e., where only one can be selected at a time), please give the fields the same name.",listBoxTip:"Select an item in the item list to make it the default option."},prevent$5={title:"Not Available in Server-Backed",standalone:"Standalone",description:"Content Editor is only available on Standalone. Change to Standalone to edit PDF content.",description1:"Document Editor is only available on Standalone. Change to Standalone to edit PDF pages."},passwordDialog$5={enterPwd:"Enter the Password to View the Document",enterPwdPlaceholder:"Please Enter the Password",wrongPwd:"Wrong Password",long:"Password is too long, maximum 20 characters.",sameWord:"Document Password and Permission Password can't be the same",encryptPdf:"Encrypt Your PDF",encrypt:"Encrypt",supportTip:"Support: Numbers, letters, {'@'}, $, !, %, ?, & ",removePwdSuccess:"Password Removed Successfully!",removePwdFailure:"Failed to Remove the Password.",setPwdSuccess:"Password set successfully! Download the file to take effect.",setPwdFailure:"Failed to Set Passwords for this Document.",documentPassword:"Document Password",permissionPassword:"Permission Password",disablePrinting:"Disable printing",disableCopying:"Disable copying",disableEdit:"Disable annotation, form, measurement, redaction(add, delete and modify)",note:["Note\uFF1A","- All changes will take effect after downloading.","- You can reset your password anytime before downloading."],enterPermissionPwd:"Enter the Permission Password"},ok$5="OK",cancel$5="Cancel",signatures$5={tip:"Please create a signature field first, then select the type of signature.",danger:"Please select a blank signature field to sign.",trackpad:"Trackpad",lineWidth:"Line Width",keyboard:"Keyboard",signHere:"Sign Here",image:"Image",selectFile:"Select a File",none:"None",clear:"Clear",save:"Save",uploadError:"Please upload images less than 1MB",selectTypeDialog:{selectType:"Select Signature Type",signWithElectronic:"Sign with Electronic Signatures",signWithElectronicDesc:"Draw, type, or upload image signatures to sign files.",signWithDigital:"Sign with Digital Signatures",signWithDigitalDesc:"Create or upload a digital certificate with a unique digital ID to sign files.",startSigning:"Start Signing"},detailsDialog:{title:"Digital Signature Details",signBy:"Valid signature, signed by ",signingTime:"Signing Time",validitySummary:"Validity Summary",validIdentity:"The signer's identity is valid.",invalidIdentity:"The signer's identity is invalid.",unknownIdentity:"Signature validity is unknown because it has not been included in your list of trusted certificates and none of its parent certificates are trusted certificates.",expiredCertificate:"The file was signed with a certificate that has expired. If you acquired this file recently, it may not be authentic.",validSignature:"The signature is valid.",invalidSignature:"The signature is invalid.",notModifiedDoc:"The document has not been modified since this signature was applied.",alteredDoc:"The document has been altered or corrupted since it was signed by the current user.",viewCertificateDetails:"View Certificate Details",unknownSignature:"Signature validity is unknown.",atLeastOneInvalid:"At least one signature is invalid.",viewAllSignatures:"View All Signatures"},certificateViewerDialog:{title:"Certificate Viewer",abstracts:"Abstracts",summary:"Summary",issuedTo:"Issued to:",issuer:"Issuer:",validFrom:"Valid from:",validTo:"Valid to:",intendedUsage:"Intended Usage:",details:"Details",version:"Version",algorithm:"Algorithm",subject:"Subject",serialNumber:"Serial Number",certificatePolicy:"Certificate Policy:",crlDistributionPoints:"CRL Distribution Points:",issuerInfoAccess:"Issuer Information Access:",issuerKeyIdentifier:"Issuer\u2018s Key Identifier:",subjectKeyIdentifier:"Subject\u2018s Key Identifier:",basicConstraints:"Basic Constraints:",keyUsage:"Key Usage:",publicKey:"Public Key:",X509:"X.509 Data:",SHA1Digest:"SHA1 Digest:",MD5Digest:"MD5 Digest:",trust:"Trust",trustedTo:"This Certificate Is Trusted to:",sign:"Sign document or data",certify:"Certify document",addToTrust:"Add to Trusted Certificates",done:"Done"},deleteConfirm:"Are you sure to delete it?",addDigitalFileDialog:{title:"Add a Digital ID",desc:"Browse a digital ID file. Digital IDs are password-protected. If you do not know the password, you cannot obtain a digital ID.",certificateFile:"Certificate File",uploadFile:"Upload certificate file",upload:"Upload",password:"Password",enterPassword:"Enter the password of the certificate file",invalidPassword:"Invalid Password"},appearanceDialog:{title:"Add Digital Signature",signHere:"Sign Here!",includeText:"Include Text",name:"Name",dName:"Distinguishable name",date:"Date",ComPDFKitVersion:"ComPDFKit Version",logo:"Logo",location:"Location",reason:"Reason",signReason:"Reason",docOwner:"I am the owner of the document",approvingDoc:"I am approving the document",reviewedDoc:"I have reviewed this document",labels:"Labels",text:"Text",type:"Type",textAlignment:"Text Alignment"},title:"Add Electronic Signature",noSignatures:"Start creating your signature template!",mySignatures:"My Signatures",createSignature:"Create Signatures",saveSignature:"Save to My Signature Templates.",dropFile:"Drop image here or",apply:"Apply",full:"Your signature templates are full. Please delete some to create new ones."},color$5="Color",opacity$5="Opacity",font$5="Font",regular$5="Regular",oblique$5="Oblique",bold$5="Bold",boldOblique$5="Bold Oblique",warning$4="Warning",colon$4=": ",compare$6={startCompare:"Start to Compare",exit:"Exit",oldFile:"Old File",newFile:"New File",dropFile:["Drop a PDF file here","or"],chooseOldFile:"Choose Your Old File",chooseNewFile:"Choose Your New File",comingSoon:"The Comparison Results Are Coming Soon!",contentComparison:"Content Comparison",compareItems:"Compare Items",text:"Text",images:"Images",colorMark:"Color to Mark differences",replacedContent:"Replaced Content",insertedContent:"Inserted Content",deletedContent:"Deleted Content",overlayComparison:"Overlay Comparison",blendMode:"Blend Mode",normal:"Normal",multiply:"Multiply",screen:"Screen",overlay:"Overlay",darken:"Darken",lighten:"Lighten",colorDodge:"ColorDodge",colorBurn:"ColorBurn",hardLight:"HardLight",softLight:"SoftLight",difference:"Difference",exclusion:"Exclusion",hue:"Hue",saturation:"Saturation",colour:"Colour",luminosity:"Luminosity",return:"Return",compare:"Compare",downloadOptions:"Select an Output Option",downloadTwoFiles:"Save and Download Separately",downloadOneFile:"Merge into One File",printSetting:"Print Setting",printOldFile:"Print the comparison result of the old file",printNewFile:"Print the comparison result of the new file",byComPDFKit:"Comparison Results by ComPDFKit"},editorPanel$5={textProp:"Text Properties",fontColor:"Font Color",textStyle:"Text Style",spacing:"Spacing",characterSpacing:"Character Spacing",lineSpacing:"Line Spacing",paragraphSpacing:"Paragraph Spacing",imageProp:"Image Properties",rotate:"Rotate",rotateLeft:"Rotate Left",rotateRight:"Rotate Right",flip:"Flip",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",tools:"Tools",replace:"Replace",export:"Export",crop:"Crop",maximum:"Maximum upload image size: 2MB."},documentEditor$5={save:"Save",saveAs:"Save As...",insert:"Insert",delete:"Delete",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",copy:"Copy",extract:"Extract",replace:"Replace",move:"Move",selectAll:"Select All",dialog:{insertPages:"Insert Pages",blankPage:"Blank Page",customPage:"Custom Blank Page",fromPdf:"From PDF",selectFile:"Select a File",pageRange:"Page Range",allPages:"All Pages",oddPage:"Odd Pages Only",evenPage:"Even Pages Only",customRange:"Custom Range",insertTo:"Insert to",firstPage:"First Page",lastPage:"Last Page",page:"Page",pageTip:"e.g. 3, 5-10",before:"Before",after:"After"},deleteConfirmText:"Do you want to delete page",eachPage:"Each page in a separate file",deleteAfter:"Delete page after extraction",moveTo:"Move after page:",inputPageTip:"Input 0 to maximum page number"},paste$5="Paste",properties$5="Properties",security$5={pwdProtection:"Password Protection",encryption:"Encryption",decryption:"Decryption",redaction:"Redaction",fillBlack:"Fill Black",fillWhite:"Fill White",caution:"Caution",enterTip:"The redacted content will be permanently removed from this document. Please confirm your action.",understand:"Understand and Start",applyTip:"After applying redactions, the redacted content will be permanently removed.",exit:"Exit",apply:"Apply",note:"Note",exitTip:"Your redactions have not been applied. Are you sure to exit?",exitConfirm:"Exit",saveTip:["All redacted content in this document will be permanently deleted and cannot be recovered.","Are you sure you want to redact them and save the file?"],save:"Save"},layer$5={show:"Show",hide:"Hide",lock:"Lock",unlock:"Unlock",lockedTip:"The current layer is locked. To change its visibility, please unlock it in the layer properties first.",ok:"OK",setProperty:"Set Layer Property",layerProperty:"Layer Property",layerName:"Layer Name",enterLayerName:"Please enter the layer name",defaultSettings:"Default Settings",defaultShow:"Default show when opening files",defaultHide:"Default hide when opening files",lockLayer:"Lock Layer",printProperty:"Print Property",always:"Always",never:"Never",printVisible:"Print when visible",exportProperty:"Export Property",exportVisible:"Export when visible",copyLink:"Copy Link",technicalDoc:"Technical Document"},colorSeparation$5={toggleColor:"Toggle colors",notShowTip:"The color will be not show in document",accessOnPc:"This feature is not available for Mobile, please access on PC for the best experience"},measurement$5={scale:"Scale",length:"Length",precision:"Precision",angle:"Angle",radius:"Radius",perimeter:"Perimeter",area:"Area",arcLength:"Arc Length",rectangleWidth:"Width",rectanglelength:"Length",xTip:"X-axis distance",yTip:"Y-axis distance",lineAngleTip:"Enter the angle between the line and the horizontal to adjust its slope. Rotate from the starting point: counterclockwise is [0\xB0, 180\xB0], clockwise is [-180\xB0, 0\xB0].",multilineAngleTip:"Uneditable, only displays the angle at the turning point between two lines during measurement.",circlrRadiusTip:"Radius for circle, or semi-major axis for ellipse. Upon input, the selected shape will be adjusted to a perfect circle with the specified radius.",rectangleLengthTip:"Horizontally",rectangleWidthTip:"Vertically",reply:"Reply",drawingDimensions:"Drawing dimensions",actualSize:"Actual size",settingScale:"Scale",pt:"pt",in:"in",mm:"mm",cm:"cm",m:"m",km:"km",ft:"ft",yd:"yd",mi:"mi",measurementSettings:"Measurement Settings",scaleError:"Scale should be greater than 0.",showCaption:"Show Caption",done:"Done",howToMeasureCurve:"How to measure a curve?",measureCurveStep:["Step 1: Select the start and end points;","Step 2: Drag the blue control point to adjust the shape."],gotIt:"Got it"},measurementPanel$5={appearance:"Appearance",lineWidth:"Line Width",lineColor:"Line Color",fillColor:"Fill Color",fillOpacity:"Fill Opacity",lineTextOpacity:"Line & Text Opacity",lineOpacity:"Line Opacity",lineStyle:"Line and Border Style",lineBorderStyle:"Line and Border Style",start:"Start",end:"End",fontColor:"Font Color",fontStyle:"Font Style",note:"Note"},freetextPanel$5={title:"Free text",fontStyle:"Font Style",fontColor:"Font Color",borderWidth:"Border Width",borderColor:"Border Color",textBorderOpacity:"Border & Text Opacity",fillColor:"Fill Color",fillOpacity:"Fill Opacity"},customeStamp$5={title:"Custom Stamp",preview:"Preview",addText:"Add Text",addShape:"Add Shape",addDateTime:"Add Date and Time",properties:"Properties",clear:"Clear",cancel:"Cancel",ok:"OK",font:"Font",fontColor:"Font Color",fontStyle:"Font Style",fontSize:"Font Size",alignment:"Alignment",fillColor:"Fill Color",opacity:"Opacity",shape:"Shape",borderColor:"Border Color",borderWidth:"Border Width",borderOpacity:"Border Opacity",fillOpacity:"Fill Opacity",dateTime:"Date and Time",createHere:"Create Here"},en={header:header$5,nextPage:nextPage$6,previousPage:previousPage$6,loading:loading$5,upload:upload$5,exit:exit$5,leftPanel:leftPanel$5,pageModePanel:pageModePanel$5,stampPanel:stampPanel$5,linkPanel:linkPanel$5,rightPanel:rightPanel$5,prevent:prevent$5,passwordDialog:passwordDialog$5,ok:ok$5,cancel:cancel$5,continue:"Continue",signatures:signatures$5,color:color$5,opacity:opacity$5,font:font$5,regular:regular$5,oblique:oblique$5,bold:bold$5,boldOblique:boldOblique$5,delete:"Delete",warning:warning$4,colon:colon$4,compare:compare$6,editorPanel:editorPanel$5,documentEditor:documentEditor$5,paste:paste$5,properties:properties$5,security:security$5,layer:layer$5,colorSeparation:colorSeparation$5,measurement:measurement$5,measurementPanel:measurementPanel$5,freetextPanel:freetextPanel$5,customeStamp:customeStamp$5},header$4={leftPanel:"\u5DE6\u4FA7\u9762\u677F",fullScreen:"\u5168\u5C4F",pan:"\u6EDA\u52A8\u5DE5\u5177",cropPage:"\u622A\u53D6",zoomIn:"\u653E\u5927",zoomOut:"\u7F29\u5C0F",light:"\u65E5\u95F4",dark:"\u591C\u95F4",lightMode:"\u65E5\u95F4\u6A21\u5F0F",darkMode:"\u591C\u95F4\u6A21\u5F0F",viewer:"\u67E5\u770B",annotations:"\u6CE8\u91CA",forms:"\u8868\u5355",signatures:"\u7B7E\u540D",security:"\u5B89\u5168",compare:"\u6587\u6863\u5BF9\u6BD4",editor:"\u5185\u5BB9\u7F16\u8F91\u5668",document:"\u9875\u9762\u7F16\u8F91",separation:"\u5206\u8272",measurement:"\u6D4B\u91CF",note:"\u4FBF\u7B7E",highlight:"\u9AD8\u4EAE",underline:"\u4E0B\u5212\u7EBF",strikeout:"\u5220\u9664\u7EBF",squiggly:"\u6CE2\u6D6A\u7EBF",ink:"\u624B\u7ED8",circle:"\u5706",arc:"\u5706\u5F27",polygon:"\u591A\u8FB9\u5F62",polyline:"\u6298\u7EBF",square:"\u77E9\u5F62",arrow:"\u7BAD\u5934",line:"\u7EBF",freetext:"\u6587\u672C",stamp:"\u56FE\u7AE0",image:"\u56FE\u7247",link:"\u94FE\u63A5",textField:"\u6587\u672C\u57DF",checkbox:"\u590D\u9009\u6846",radioButton:"\u5355\u9009\u6309\u94AE",listBox:"\u5217\u8868\u6846",comboButton:"\u4E0B\u62C9\u83DC\u5355",button:"\u6309\u94AE",openFile:"\u4E0A\u4F20\u6587\u6863",search:"\u641C\u7D22",rightPanel:"\u53F3\u4FA7\u9762\u677F",viewSetting:"\u9875\u9762\u663E\u793A",download:"\u4E0B\u8F7D",flatten:"\u5C55\u5E73\u540E\u4E0B\u8F7D",print:"\u6253\u5370",settings:{settings:"\u8BBE\u7F6E",author:"\u6587\u6863\u4F5C\u8005",annotator:"\u6CE8\u91CA\u4F5C\u8005",language:"\u8BED\u8A00\u8BBE\u7F6E",highlightLink:"\u9AD8\u4EAE\u94FE\u63A5",highlightForm:"\u9AD8\u4EAE\u8868\u5355",fillConsecutively:"\u8FDE\u7EED\u586B\u5199\u8868\u5355\u5B57\u6BB5",creationInfo:"\u521B\u5EFA\u4FE1\u606F",version:"\u7248\u672C"},addText:"\u6DFB\u52A0\u6587\u5B57",addImage:"\u6DFB\u52A0\u56FE\u7247",undo:"\u64A4\u9500",redo:"\u91CD\u505A",createSignField:"\u6DFB\u52A0/\u8BBE\u7F6E\u7B7E\u540D\u57DF",addDigitalSign:"\u6DFB\u52A0\u6570\u5B57\u7B7E\u540D",addElectronicSign:"\u6DFB\u52A0\u7535\u5B50\u7B7E\u540D",verifyDigitalSign:"\u9A8C\u8BC1\u6570\u5B57\u7B7E\u540D",measureLine:"\u7EBF\u6BB5",measureMultiline:"\u6298\u7EBF",measurePolygon:"\u591A\u8FB9\u5F62",measureRectangle:"\u77E9\u5F62",measureCircle:"\u5706\u5F62/ \u692D\u5706",measureCurve:"\u66F2\u7EBF",measureArc:"\u5706\u5F27",compareClickTip:"\u5355\u51FB\u6B64\u5904\u5F00\u59CB"},nextPage$5="\u4E0B\u4E00\u9875",previousPage$5="\u4E0A\u4E00\u9875",loading$4="\u52A0\u8F7D\u4E2D",upload$4="\u4E0A\u4F20",exit$4="\u9000\u51FA",leftPanel$4={thumbnails:"\u7F29\u7565\u56FE",outlines:"\u5927\u7EB2",noOutlines:"\u65E0\u5927\u7EB2",layers:"\u56FE\u5C42",noLayers:"\u65E0\u56FE\u5C42",menu:"\u83DC\u5355",showAll:"\u5168\u90E8\u663E\u793A",hideAll:"\u5168\u90E8\u9690\u85CF",restoreSettings:"\u6062\u590D\u9ED8\u8BA4\u72B6\u6001",exportLayers:"\u5BFC\u51FA\u6587\u4EF6\u56FE\u5C42",layerProperty:"\u56FE\u5C42\u5C5E\u6027",exportLayer:"\u5BFC\u51FA\u6B64\u56FE\u5C42",annotations:"\u6CE8\u91CA\u5217\u8868",noAnnotations:"\u6CA1\u6709\u6CE8\u91CA",importAnnotations:"\u5BFC\u5165\u6CE8\u91CA",exportAnnotations:"\u5BFC\u51FA\u6CE8\u91CA",search:"\u641C\u7D22",searchPdf:"\u641C\u7D22PDF",page:"\u9875\u7801",whichPage:["\u7B2C","\u9875"],previousPhrase:"\u67E5\u770B\u4E0A\u4E00\u4E2A\u7ED3\u679C",nextPhrase:"\u67E5\u770B\u4E0B\u4E00\u4E2A\u7ED3\u679C",results:"\u7ED3\u679C",noResults:"\u65E0\u641C\u7D22\u7ED3\u679C",signature:"\u7B7E\u540D",signatureList:"\u6570\u5B57\u7B7E\u540D\u5217\u8868",signatureDetails:"\u67E5\u770B\u7B7E\u540D\u8BE6\u60C5",certificationDetails:"\u67E5\u770B\u8BC1\u4E66\u8BE6\u60C5",noSignatures:"\u6CA1\u6709\u7B7E\u540D",marked:"\u5DF2\u6807\u8BB0",unmarked:"\u672A\u6807\u8BB0",accepted:"\u5DF2\u63A5\u53D7",rejected:"\u5DF2\u62D2\u7EDD",cancelled:"\u5DF2\u53D6\u6D88",completed:"\u5DF2\u5B8C\u6210",none:"\u65E0",edit:"\u7F16\u8F91",delete:"\u5220\u9664",replyPlaceholder:"\u56DE\u590D",reply:"\u4FDD\u5B58",confirm:"\u4FDD\u5B58"},pageModePanel$4={displayMode:"\u9605\u8BFB\u6A21\u5F0F",vertical:"\u5782\u76F4\u6EDA\u52A8",horizontal:"\u6C34\u5E73\u6EDA\u52A8",splitView:"\u5206\u5C4F\u89C6\u56FE",singlePage:"\u5355\u9875",twoPages:"\u53CC\u9875",coverMode:"\u5C01\u9762\u6A21\u5F0F",themes:"\u4E3B\u9898"},stampPanel$4={standard:"\u6807\u51C6\u56FE\u7AE0",dynamic:"\u52A8\u6001\u56FE\u7AE0",custom:"\u81EA\u5B9A\u4E49\u56FE\u7AE0",blank:"\u8BF7\u521B\u5EFA\u56FE\u7AE0",create:"\u521B\u5EFA\u56FE\u7AE0"},linkPanel$4={linkTo:"\u94FE\u63A5\u5230",url:"\u8D85\u94FE\u63A5",goToPages:"\u8DF3\u8F6C\u5230\u9875\u9762",email:"\u7535\u5B50\u90AE\u7BB1",go:"\u524D\u5F80"},rightPanel$4={general:"\u901A\u7528",name:"\u540D\u79F0",formField:"\u8868\u683C\u680F\u4F4D",visible:"\u53EF\u89C1",hidden:"\u9690\u85CF",properties:"\u5C5E\u6027",requried:"\u5FC5\u586B",differentNameError:"\u8BE5\u540D\u79F0\u5DF2\u5B58\u5728",buttonText:"\u6309\u94AE\u6587\u5B57",appearance:"\u5916\u89C2",backgroundColor:"\u80CC\u666F\u8272",preferences:"\u9009\u9879",alignment:"\u6587\u672C\u5BF9\u9F50",left:"\u5DE6\u5BF9\u9F50",center:"\u5C45\u4E2D",right:"\u53F3\u5BF9\u9F50",defaultValue:"\u9884\u8BBE\u503C",multiLine:"\u591A\u884C",buttonStyle:"\u6309\u94AE\u6837\u5F0F",check:"\u52FE\u9009",circle:"\u5706\u5F62",cross:"\u5206\u53C9",diamond:"\u83F1\u5F62",square:"\u65B9\u5F62",star:"\u661F\u5F62",defaultChecked:"\u9884\u8BBE\u4E3A\u5DF2\u9009\u53D6",item:"\u9879\u76EE",option:"\u9009\u9879",itemList:"\u9879\u76EE\u6E05\u5355",selectAction:"\u9009\u62E9\u52A8\u4F5C",none:"\u65E0",goPage:"\u8DF3\u8F6C\u5230\u9875\u9762",openLink:"\u6253\u5F00\u7F51\u9875\u94FE\u63A5",addUrl:"\u6DFB\u52A0\u94FE\u63A5",addPage:"\u52A0\u5165\u9875\u9762",radioBtnTip1:"\u8B66\u544A\uFF1A\u7EC4\u4E2D\u53EA\u6709\u4E00\u4E2A\u6309\u94AE\u3002\u81F3\u5C11\u9700\u89812\u4E2A\u6309\u94AE\u3002",radioBtnTip2:"\u63D0\u793A\uFF1A\u8981\u521B\u5EFA\u4E00\u7EC4\u4E92\u65A5\u7684\u5355\u9009\u6309\u94AE\uFF08\u5373\u4E00\u6B21\u53EA\u80FD\u9009\u62E9\u4E00\u4E2A\uFF09\uFF0C\u8BF7\u786E\u4FDD\u5404\u57DF\u540D\u76F8\u540C\u3002",listBoxTip:"\u4ECE\u9879\u76EE\u6E05\u5355\u4E2D\u9009\u62E9\u4E00\u4E2A\u9009\u9879\uFF0C\u4F5C\u4E3A\u9ED8\u8BA4\u9009\u9879\u3002"},prevent$4={title:"\u4E0D\u53EF\u7528",standalone:"\u79BB\u7EBF\u7248",description:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u5185\u5BB9\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u5185\u5BB9\u7F16\u8F91\u3002",description1:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u6587\u6863\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u6587\u6863\u7F16\u8F91\u3002"},passwordDialog$4={enterPwd:"\u8F93\u5165\u5BC6\u7801\u67E5\u770B\u6587\u6863",enterPwdPlaceholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",wrongPwd:"\u5BC6\u7801\u9519\u8BEF",long:"\u5BC6\u7801\u8FC7\u957F\uFF0C\u6700\u591A\u8F93\u516520\u4E2A\u5B57\u7B26",sameWord:"\u6587\u6863\u5BC6\u7801\u548C\u6743\u9650\u5BC6\u7801\u4E0D\u80FD\u76F8\u540C",encryptPdf:"\u52A0\u5BC6",encrypt:"\u52A0\u5BC6",supportTip:"\u652F\u6301\u5B57\u7B26\uFF1A\u6570\u5B57\u3001\u5B57\u6BCD\u3001{'@'}\u3001$\u3001!\u3001%\u3001?\u3001& ",removePwdSuccess:"\u5BC6\u7801\u5DF2\u79FB\u9664\uFF01",removePwdFailure:"\u5BC6\u7801\u79FB\u9664\u5931\u8D25\uFF01",setPwdSuccess:"\u5BC6\u7801\u8BBE\u7F6E\u6210\u529F\uFF01\u4E0B\u8F7D\u6587\u4EF6\u540E\u751F\u6548\u3002",setPwdFailure:"\u5BC6\u7801\u8BBE\u7F6E\u5931\u8D25\uFF01",documentPassword:"\u6587\u6863\u5BC6\u7801",permissionPassword:"\u6743\u9650\u5BC6\u7801",disablePrinting:"\u7981\u6B62\u6253\u5370",disableCopying:"\u7981\u6B62\u590D\u5236",disableEdit:"\u7981\u7528\u6CE8\u91CA\u3001\u8868\u5355\u3001\u6D4B\u91CF\u3001\u6807\u8BB0\u5BC6\u6587\uFF08\u6DFB\u52A0\u3001\u5220\u9664\u548C\u4FEE\u6539\uFF09",note:["\u6CE8\u610F\uFF1A","- \u6240\u6709\u66F4\u6539\u5C06\u5728\u4E0B\u8F7D\u540E\u751F\u6548\u3002","- \u5728\u4E0B\u8F7D\u6587\u6863\u524D\uFF0C\u60A8\u53EF\u4EE5\u968F\u65F6\u91CD\u7F6E\u5BC6\u7801\u3002"],enterPermissionPwd:"\u8BF7\u8F93\u5165\u6587\u6863\u5BC6\u7801"},ok$4="\u786E\u5B9A",cancel$4="\u53D6\u6D88",signatures$4={tip:"\u8BF7\u5148\u521B\u5EFA\u4E00\u4E2A\u7B7E\u540D\u57DF\uFF0C\u7136\u540E\u518D\u9009\u62E9\u7B7E\u540D\u7C7B\u578B",danger:"\u8BF7\u9009\u4E2D\u4E00\u4E2A\u7A7A\u7B7E\u540D\u57DF\u8FDB\u884C\u7B7E\u540D\u3002",trackpad:"\u89E6\u6478\u677F",lineWidth:"\u5BBD\u5EA6",keyboard:"\u952E\u76D8",signHere:"\u8BF7\u5728\u6B64\u5904\u8F93\u5165\u7B7E\u540D",image:"\u56FE\u7247",selectFile:"\u9009\u62E9\u6587\u4EF6",none:"\u65E0",clear:"\u6E05\u9664",save:"\u4FDD\u5B58",uploadError:"\u8BF7\u4E0A\u4F201M\u4EE5\u5185\u7684\u56FE\u7247",selectTypeDialog:{selectType:"\u8BF7\u9009\u62E9\u7B7E\u540D\u7C7B\u578B",signWithElectronic:"\u7535\u5B50\u7B7E\u540D",signWithElectronicDesc:"\u901A\u8FC7\u7ED8\u5236\u3001\u56FE\u7247\u3001\u6216\u8F93\u5165\u6587\u5B57\u8FDB\u884C\u6587\u4EF6\u7B7E\u7F72\u3002",signWithDigital:"\u6570\u5B57\u7B7E\u540D\uFF08\u6570\u5B57\u8BC1\u4E66\u7B7E\u7F72\uFF09",signWithDigitalDesc:"\u901A\u8FC7\u521B\u5EFA\u6216\u4E0A\u4F20\u5E26\u6709\u552F\u4E00\u6570\u5B57ID\u7684\u6570\u5B57\u8BC1\u4E66\u7B7E\u7F72\u6587\u4EF6\u3002",startSigning:"\u5F00\u59CB\u7B7E\u540D"},detailsDialog:{title:"\u6570\u5B57\u7B7E\u540D\u8BE6\u7EC6\u4FE1\u606F",signBy:"\u7B7E\u540D\u6709\u6548\uFF0C\u7B7E\u7F72\u8005\u4E3A",signingTime:"\u7B7E\u7F72\u65F6\u95F4",validitySummary:"\u6709\u6548\u6027\u5C0F\u7ED3",validIdentity:"\u7B7E\u540D\u8005\u7684\u8EAB\u4EFD\u6709\u6548\u3002",invalidIdentity:"\u7B7E\u540D\u8005\u7684\u8EAB\u4EFD\u65E0\u6548\u3002",unknownIdentity:"\u7B7E\u540D\u6709\u6548\u6027\u672A\u77E5\uFF0C\u56E0\u4E3A\u5B83\u672A\u5305\u542B\u5728\u60A8\u7684\u53D7\u4FE1\u4EFB\u8BC1\u4E66\u5217\u8868\u4E2D\uFF0C\u5E76\u4E14\u5B83\u7684\u7236\u8BC1\u4E66\u90FD\u4E0D\u662F\u53D7\u4FE1\u4EFB\u8BC1\u4E66\u3002",expiredCertificate:"\u8BE5\u6587\u4EF6\u662F\u7528\u5DF2\u8FC7\u671F\u7684\u8BC1\u4E66\u7B7E\u540D\u7684\u3002\u5982\u679C\u60A8\u6700\u8FD1\u83B7\u53D6\u4E86\u6B64\u6587\u4EF6\uFF0C\u5219\u8BE5\u6587\u4EF6\u53EF\u80FD\u4E0D\u771F\u5B9E\u3002",invalidSignature:"\u7B7E\u540D\u65E0\u6548\u3002",validSignature:"\u7B7E\u540D\u6709\u6548\u3002",notModifiedDoc:"\u81EA\u5E94\u7528\u6B64\u7B7E\u540D\u4EE5\u6765\uFF0C\u6587\u6863\u672A\u88AB\u4FEE\u6539\u3002",alteredDoc:"\u81EA\u5F53\u524D\u7528\u6237\u7B7E\u7F72\u6587\u6863\u4EE5\u6765\uFF0C\u8BE5\u6587\u6863\u5DF2\u88AB\u66F4\u6539\u6216\u635F\u574F\u3002",viewCertificateDetails:"\u67E5\u770B\u8BC1\u4E66\u7EC6\u8282",unknownSignature:"\u7B7E\u540D\u6709\u6548\u6027\u672A\u77E5\u3002",atLeastOneInvalid:"\u81F3\u5C11\u4E00\u4E2A\u7B7E\u540D\u65E0\u6548\uFF0C\u6587\u6863\u53EF\u80FD\u88AB\u7BE1\u6539\u3002",viewAllSignatures:"\u67E5\u770B\u6240\u6709\u7B7E\u540D"},certificateViewerDialog:{title:"\u8BC1\u4E66\u67E5\u770B\u7A0B\u5E8F",abstracts:"\u6458\u8981",summary:"\u5C0F\u7ED3",issuedTo:"\u9881\u53D1\u7ED9",issuer:"\u9881\u53D1\u8005",validFrom:"\u6709\u6548\u8D77\u59CB\u65E5\u671F",validTo:"\u6709\u6548\u622A\u6B62\u65E5\u671F",intendedUsage:"\u9884\u671F\u7528\u9014",details:"\u8BE6\u7EC6\u4FE1\u606F",version:"\u7248\u672C",algorithm:"\u7B7E\u540D\u7B97\u6CD5",subject:"\u4E3B\u9898",serialNumber:"\u5E8F\u5217\u53F7",certificatePolicy:"\u8BC1\u4E66\u7B56\u7565",crlDistributionPoints:"CRL\u5206\u53D1\u70B9",issuerInfoAccess:"\u9881\u53D1\u673A\u6784\u4FE1\u606F\u8BBF\u95EE",issuerKeyIdentifier:"\u9881\u53D1\u673A\u6784\u5BC6\u94A5\u6807\u8BC6\u7B26",subjectKeyIdentifier:"\u4E3B\u4F53\u5BC6\u94A5\u6807\u8BC6\u7B26",basicConstraints:"\u57FA\u672C\u7EA6\u675F",keyUsage:"\u5BC6\u94A5\u7528\u6CD5",publicKey:"\u516C\u94A5",X509:"X.509",SHA1Digest:"SHA1",MD5Digest:"MD5",trust:"\u4FE1\u4EFB",trustedTo:"\u672C\u8BC1\u4E66\u4FE1\u4EFB\u4E8E\uFF1A",sign:"\u7B7E\u540D\u6587\u6863\u6216\u6570\u636E",certify:"\u9A8C\u8BC1\u6587\u6863",addToTrust:"\u6DFB\u52A0\u5230\u53EF\u4FE1\u4EFB\u8BC1\u4E66",done:"\u5173\u95ED"},deleteConfirm:"\u786E\u5B9A\u5220\u9664\u8BE5\u5185\u5BB9\uFF1F",addDigitalFileDialog:{title:"\u6DFB\u52A0\u6570\u5B57\u8EAB\u4EFD\u8BC1",desc:"\u6D4F\u89C8\u6570\u5B57\u8EAB\u4EFD\u8BC1\u6587\u4EF6\u3002\u6570\u5B57\u8EAB\u4EFD\u8BC1\u53D7\u5BC6\u7801\u4FDD\u62A4\u3002\u5982\u679C\u4F60\u4E0D\u77E5\u9053\u5BC6\u7801\uFF0C\u4F60\u5C31\u65E0\u6CD5\u83B7\u53D6\u6570\u5B57\u8EAB\u4EFD\u8BC1\u3002",certificateFile:"\u8BC1\u4E66\u6587\u4EF6",uploadFile:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6",upload:"\u6D4F\u89C8",password:"\u8BC1\u4E66\u5BC6\u7801",enterPassword:"\u8BF7\u8F93\u5165\u8BC1\u4E66\u5BC6\u7801",invalidPassword:"\u5BC6\u7801\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5"},appearanceDialog:{title:"\u6DFB\u52A0\u6570\u5B57\u7B7E\u540D",signHere:"\u8BF7\u5728\u6B64\u5904\u8F93\u5165\u7B7E\u540D\uFF01",includeText:"\u5305\u542B\u6587\u672C",name:"\u540D\u79F0",dName:"\u8FA8\u522B\u540D",date:"\u65E5\u671F",ComPDFKitVersion:"ComPDFKit \u7248\u672C",logo:"\u5FBD\u6807",location:"\u4F4D\u7F6E",reason:"\u539F\u56E0",signReason:"\u7B7E\u7F72\u539F\u56E0",docOwner:"\u6211\u662F\u8BE5\u6587\u6863\u7684\u4F5C\u8005",approvingDoc:"\u6211\u6B63\u5728\u6279\u51C6\u8BE5\u6587\u6863",reviewedDoc:"\u6211\u5DF2\u5BA1\u9605\u8BE5\u6587\u6863",labels:"\u6807\u7B7E",text:"\u5B57\u4F53",type:"\u5B57\u5F62",textAlignment:"\u5BF9\u9F50\u65B9\u5F0F"},title:"\u6DFB\u52A0\u7535\u5B50\u7B7E\u540D",noSignatures:"\u5F00\u59CB\u521B\u5EFA\u60A8\u7684\u7B7E\u540D\u6A21\u677F\uFF01",mySignatures:"\u6211\u7684\u7B7E\u540D",createSignature:"\u521B\u5EFA\u7B7E\u540D",saveSignature:"\u4FDD\u5B58\u81F3\u6211\u7684\u7B7E\u540D\u6A21\u677F",dropFile:"\u5C06\u56FE\u7247\u62D6\u81F3\u6B64\u5904\uFF0C\u6216",apply:"\u5E94\u7528",full:"\u60A8\u7684\u7B7E\u540D\u6A21\u677F\u5DF2\u6EE1\uFF0C\u8BF7\u5220\u9664\u540E\u518D\u65B0\u589E\u3002"},color$4="\u989C\u8272",opacity$4="\u4E0D\u900F\u660E\u5EA6",font$4="\u5B57\u4F53",regular$4="\u5E38\u89C4",oblique$4="\u659C\u4F53",bold$4="\u7C97\u4F53",boldOblique$4="\u7C97\u659C\u4F53",warning$3="\u6CE8\u610F",colon$3="\uFF1A",compare$5={startCompare:"\u5F00\u59CB\u5BF9\u6BD4",exit:"\u9000\u51FA\u5BF9\u6BD4",oldFile:"\u65E7\u6587\u4EF6",newFile:"\u65B0\u6587\u4EF6",dropFile:["\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C","\u6216"],chooseOldFile:"\u6DFB\u52A0\u65E7\u6587\u4EF6",chooseNewFile:"\u6DFB\u52A0\u65B0\u6587\u4EF6",comingSoon:"\u5BF9\u6BD4\u5373\u5C06\u5B8C\u6210\uFF01",contentComparison:"\u5E76\u6392\u5BF9\u6BD4",compareItems:"\u5BF9\u6BD4\u5185\u5BB9\u9009\u62E9",text:"\u6587\u5B57",images:"\u56FE\u7247",colorMark:"\u6807\u8BB0\u989C\u8272",replacedContent:"\u88AB\u66FF\u6362\u7684\u5185\u5BB9",insertedContent:"\u88AB\u63D2\u5165\u7684\u5185\u5BB9",deletedContent:"\u5DF2\u5220\u9664\u7684\u5185\u5BB9",overlayComparison:"\u53E0\u52A0\u5BF9\u6BD4",blendMode:"\u6DF7\u5408\u6A21\u5F0F",normal:"\u666E\u901A",multiply:"\u6B63\u7247\u53E0\u5E95",screen:"\u6EE4\u8272",overlay:"\u53E0\u52A0",darken:"\u53D8\u6697",lighten:"\u53D8\u4EAE",colorDodge:"\u989C\u8272\u51CF\u6DE1",colorBurn:"\u989C\u8272\u52A0\u6DF1",hardLight:"\u5F3A\u5149",softLight:"\u67D4\u5149",difference:"\u5DEE\u503C",exclusion:"\u6392\u9664",hue:"\u8272\u76F8",saturation:"\u9971\u548C\u5EA6",colour:"\u989C\u8272",luminosity:"\u660E\u5EA6",return:"\u8FD4\u56DE",compare:"\u5F00\u59CB\u5BF9\u6BD4",downloadOptions:"\u7ED3\u679C\u6587\u4EF6\u6837\u5F0F",downloadTwoFiles:"\u5BF9\u6BD4\u7ED3\u679C\u5206\u5F00\u4FDD\u5B58\uFF0C\u7ED3\u679C\u6587\u4EF6\u4E3A2\u4EFD",downloadOneFile:"\u5408\u5E76\u5BF9\u6BD4\u7ED3\u679C\uFF0C\u7ED3\u679C\u6587\u4EF6\u4E3A1\u4EFD\u6587\u4EF6",printSetting:"\u6253\u5370\u6587\u4EF6\u9009\u62E9",printOldFile:"\u6253\u5370\u65E7\u6587\u6863\u7684\u5BF9\u6BD4\u7ED3\u679C\u6587\u4EF6",printNewFile:"\u6253\u5370\u65B0\u6587\u6863\u7684\u5BF9\u6BD4\u7ED3\u679C\u6587\u4EF6",byComPDFKit:"\u7531ComPDFKit\u63D0\u4F9B\u5BF9\u6BD4"},editorPanel$4={textProp:"\u6587\u5B57\u5C5E\u6027",fontColor:"\u6587\u5B57\u989C\u8272",textStyle:"\u6587\u5B57\u6837\u5F0F",spacing:"\u95F4\u8DDD",characterSpacing:"\u5B57\u95F4\u8DDD",lineSpacing:"\u884C\u95F4\u8DDD",paragraphSpacing:"\u6BB5\u95F4\u8DDD",imageProp:"\u56FE\u7247\u5C5E\u6027",rotate:"\u65CB\u8F6C",rotateLeft:"\u5DE6\u65CB\u8F6C",rotateRight:"\u53F3\u65CB\u8F6C",flip:"\u7FFB\u8F6C",flipHorizontal:"\u6C34\u5E73\u7FFB\u8F6C",flipVertical:"\u5782\u76F4\u7FFB\u8F6C",tools:"\u5DE5\u5177",replace:"\u66FF\u6362",export:"\u5BFC\u51FA",crop:"\u88C1\u526A",maximum:"\u56FE\u7247\u5927\u5C0F\u4E0A\u9650\uFF1A2MB\u3002"},documentEditor$4={save:"\u4FDD\u5B58",saveAs:"\u53E6\u5B58\u4E3A",insert:"\u63D2\u5165",delete:"\u5220\u9664",rotateRight:"\u53F3\u65CB\u8F6C",rotateLeft:"\u5DE6\u65CB\u8F6C",copy:"\u590D\u5236",extract:"\u63D0\u53D6",replace:"\u66FF\u6362",move:"\u79FB\u52A8",selectAll:"\u5168\u9009",dialog:{insertPages:"\u9875\u9762\u8303\u56F4",blankPage:"\u7A7A\u767D\u9875",customPage:"\u81EA\u5B9A\u4E49\u7A7A\u767D\u9875",fromPdf:"\u4ECE\u5176\u4ED6PDF",selectFile:"\u9009\u62E9\u6587\u4EF6",pageRange:"\u9875\u9762\u8303\u56F4",allPages:"\u6240\u6709\u9875\u9762",oddPage:"\u5947\u6570\u9875",evenPage:"\u5076\u6570\u9875",customRange:"\u81EA\u5B9A\u4E49\u8303\u56F4",insertTo:"\u9875\u9762\u63D2\u5165\u4F4D\u7F6E",firstPage:"\u9996\u9875",lastPage:"\u672B\u9875",page:"\u9875\u9762",pageTip:"\u4F8B\uFF1A3, 5-10",before:"\u524D",after:"\u540E"},deleteConfirmText:"\u786E\u8BA4\u8981\u5220\u9664\u6240\u9009\u9875\u9762\u5417\uFF1F",eachPage:"\u6BCF\u9875\u4F5C\u4E3A\u5355\u4E2A\u6587\u4EF6",deleteAfter:"\u63D0\u53D6\u540E\u5220\u9664\u9875\u9762",moveTo:"\u79FB\u52A8\u5230",inputPageTip:"\u8F93\u51650~\u6587\u6863\u6700\u5927\u9875\u7801\u6570"},paste$4="\u7C98\u8D34",properties$4="\u5C5E\u6027",security$4={pwdProtection:"\u5BC6\u7801\u4FDD\u62A4",encryption:"\u6587\u6863\u52A0\u5BC6",decryption:"\u6587\u6863\u89E3\u5BC6",redaction:"\u6807\u8BB0\u5BC6\u6587",fillBlack:"\u586B\u5145\u9ED1\u8272",fillWhite:"\u586B\u5145\u767D\u8272",caution:"\u63D0\u793A",enterTip:"\u672C\u6587\u6863\u4E2D\u5DF2\u88AB\u6807\u8BB0\u7684\u5185\u5BB9\u5C06\u88AB\u6C38\u4E45\u5220\u9664\u3002\u8BF7\u786E\u8BA4\u60A8\u7684\u64CD\u4F5C\u3002",understand:"\u6211\u5DF2\u77E5\u6653\uFF0C\u5F00\u59CB\u4F7F\u7528",applyTip:"\u5E94\u7528\u6807\u8BB0\u5BC6\u6587\u540E\uFF0C\u88AB\u6807\u8BB0\u7684\u5185\u5BB9\u5C06\u88AB\u6C38\u4E45\u5220\u9664\u3002",exit:"\u9000\u51FA",apply:"\u5E94\u7528",note:"\u63D0\u793A",exitTip:"\u60A8\u7684\u6807\u8BB0\u5185\u5BB9\u5C1A\u672A\u751F\u6548\u3002\u786E\u5B9A\u8981\u9000\u51FA\u5417\uFF1F",exitConfirm:"\u786E\u8BA4",saveTip:["\u63D0\u793A\uFF1A\u6587\u6863\u4E2D\u88AB\u6807\u8BB0\u7684\u5185\u5BB9\u5C06\u88AB\u6C38\u4E45\u5220\u9664\u4E14\u4E0D\u53EF\u6062\u590D\u3002","\u786E\u5B9A\u5220\u9664\u6240\u6709\u6807\u8BB0\u5185\u5BB9\u5E76\u4FDD\u5B58\u6587\u6863\uFF1F"],save:"\u786E\u8BA4"},layer$4={show:"\u663E\u793A",hide:"\u9690\u85CF",lock:"\u9501\u5B9A",unlock:"\u89E3\u9501",lockedTip:"\u5F53\u524D\u56FE\u5C42\u5DF2\u9501\u5B9A\u3002\u8981\u66F4\u6539\u5176\u53EF\u89C1\u6027\uFF0C\u8BF7\u5148\u5728\u56FE\u5C42\u5C5E\u6027\u4E2D\u5C06\u5176\u89E3\u9501\u3002",ok:"\u597D\u7684",setProperty:"\u8BBE\u7F6E\u56FE\u5C42\u5C5E\u6027",layerProperty:"\u56FE\u5C42\u5C5E\u6027",layerName:"\u56FE\u5C42\u540D\u79F0",enterLayerName:"\u8BF7\u8F93\u5165\u56FE\u5C42\u540D\u79F0",defaultSettings:"\u9ED8\u8BA4\u72B6\u6001",defaultShow:"\u6253\u5F00\u6587\u4EF6\u65F6\u9ED8\u8BA4\u663E\u793A",defaultHide:"\u6253\u5F00\u6587\u4EF6\u65F6\u9ED8\u8BA4\u9690\u85CF",lockLayer:"\u9501\u5B9A\u56FE\u5C42",printProperty:"\u6253\u5370\u5C5E\u6027",always:"\u603B\u662F",never:"\u4ECE\u4E0D",printVisible:"\u53EF\u89C1\u65F6\u6253\u5370",exportProperty:"\u5BFC\u51FA\u5C5E\u6027",exportVisible:"\u53EF\u89C1\u65F6\u5BFC\u51FA",copyLink:"\u590D\u5236\u94FE\u63A5",technicalDoc:"\u6280\u672F\u6587\u6863"},colorSeparation$4={toggleColor:"\u5207\u6362\u989C\u8272",notShowTip:"\u8BE5\u989C\u8272\u5C06\u4E0D\u4F1A\u5728\u6587\u6863\u4E2D\u663E\u793A",accessOnPc:"\u8BE5\u529F\u80FD\u4E0D\u9002\u7528\u4E8E\u79FB\u52A8\u8BBE\u5907\uFF0C\u8BF7\u5728 PC \u7AEF\u8BBF\u95EE\u4EE5\u83B7\u5F97\u6700\u4F73\u4F53\u9A8C"},measurement$4={scale:"\u6BD4\u4F8B",length:"\u957F\u5EA6",precision:"\u7CBE\u5EA6",angle:"\u89D2\u5EA6",radius:"\u534A\u5F84",perimeter:"\u5468\u957F",area:"\u9762\u79EF",arcLength:"\u5F27\u957F",rectangleWidth:"\u5BBD",rectanglelength:"\u957F",xTip:"X\u8F74\u8DDD\u79BB",yTip:"Y\u8F74\u8DDD\u79BB",lineAngleTip:"\u8F93\u5165\u7EBF\u6BB5\u4E0E\u6C34\u5E73\u7EBF\u4E4B\u95F4\u7684\u89D2\u5EA6\u6765\u8C03\u6574\u5176\u659C\u7387\u3002\u4ECE\u8D77\u70B9\u65CB\u8F6C\uFF1A\u9006\u65F6\u9488\u4E3A [0\xB0, 180\xB0]\uFF0C\u987A\u65F6\u9488\u4E3A [-180\xB0, 0\xB0]\u3002",multilineAngleTip:"\u4E0D\u53EF\u7F16\u8F91\uFF0C\u4EC5\u5728\u6D4B\u91CF\u65F6\u663E\u793A\u4E24\u6761\u7EBF\u4E4B\u95F4\u7684\u8F6C\u6298\u70B9\u7684\u89D2\u5EA6\u3002",circlrRadiusTip:"\u5706\u7684\u534A\u5F84\uFF0C\u6216\u692D\u5706\u7684\u534A\u957F\u8F74\u3002\u8F93\u5165\u540E\uFF0C\u6240\u9009\u5F62\u72B6\u5C06\u88AB\u8C03\u6574\u4E3A\u76F8\u5E94\u7684\u6B63\u5706\u3002",rectangleLengthTip:"\u6C34\u5E73\u65B9\u5411",rectangleWidthTip:"\u5782\u76F4\u65B9\u5411",reply:"\u56DE\u590D",drawingDimensions:"\u56FE\u7EB8\u5C3A\u5BF8",actualSize:"\u771F\u5B9E\u5C3A\u5BF8",settingScale:"\u6D4B\u91CF\u6BD4\u4F8B",pt:"\u70B9",in:"\u82F1\u5BF8",mm:"\u6BEB\u7C73",cm:"\u5398\u7C73",m:"\u7C73",km:"\u5343\u7C73",ft:"\u82F1\u5C3A",yd:"\u7801",mi:"\u82F1\u91CC",measurementSettings:"\u6D4B\u91CF\u8BBE\u7F6E",scaleError:"\u6BD4\u4F8B\u5C3A\u9700\u5927\u4E8E0\u3002",showCaption:"\u6587\u5B57\u5C55\u793A",done:"\u786E\u8BA4",howToMeasureCurve:"\u5982\u4F55\u6D4B\u91CF\u66F2\u7EBF\uFF1F",measureCurveStep:["\u7B2C\u4E00\u6B65\uFF1A\u9009\u62E9\u66F2\u7EBF\u8D77\u70B9\u548C\u7EC8\u70B9\uFF1B","\u7B2C\u4E8C\u6B65\uFF1A\u62D6\u52A8\u84DD\u8272\u63A7\u5236\u70B9\u8C03\u6574\u66F2\u7EBF\u5F62\u72B6\u3002"],gotIt:"\u5173\u95ED"},measurementPanel$4={appearance:"\u6807\u6CE8\u5916\u89C2\u8BBE\u7F6E",lineColor:"\u7EBF\u6761\u989C\u8272",fillColor:"\u586B\u5145\u989C\u8272",fillOpacity:"\u586B\u5145\u4E0D\u900F\u660E\u5EA6",lineTextOpacity:"\u7EBF\u6BB5 & \u6587\u672C\u4E0D\u900F\u660E\u5EA6",lineOpacity:"\u7EBF\u6761\u4E0D\u900F\u660E\u5EA6",lineWidth:"\u7EBF\u5BBD",lineStyle:"\u7EBF\u578B",lineBorderStyle:"\u7EBF\u6761 & \u8FB9\u6846\u7C7B\u578B",start:"\u7EBF\u5934",end:"\u7EBF\u5C3E",fontColor:"\u5B57\u4F53\u989C\u8272",fontStyle:"\u5B57\u4F53\u6837\u5F0F",note:"\u6279\u6CE8"},freetextPanel$4={title:"\u6587\u672C",fontStyle:"\u5B57\u4F53\u6837\u5F0F",fontColor:"\u5B57\u4F53\u989C\u8272",borderWidth:"\u8FB9\u6846\u5BBD\u5EA6",borderColor:"\u8FB9\u6846\u989C\u8272",textBorderOpacity:"\u8FB9\u6846\u548C\u6587\u5B57\u4E0D\u900F\u660E\u5EA6",fillColor:"\u586B\u5145\u989C\u8272",fillOpacity:"\u586B\u5145\u4E0D\u900F\u660E\u5EA6"},customeStamp$4={title:"\u81EA\u5B9A\u4E49\u56FE\u7AE0",preview:"\u9884\u89C8",addText:"\u6DFB\u52A0\u6587\u5B57",addShape:"\u6DFB\u52A0\u5F62\u72B6",addDateTime:"\u6DFB\u52A0\u65E5\u671F\u548C\u65F6\u95F4",properties:"\u5C5E\u6027",clear:"\u6E05\u9664",cancel:"\u53D6\u6D88",ok:"\u786E\u5B9A",font:"\u5B57\u4F53",fontColor:"\u5B57\u4F53\u989C\u8272",fontStyle:"\u5B57\u4F53\u6837\u5F0F",fontSize:"\u5B57\u53F7",alignment:"\u6587\u672C\u5BF9\u9F50",fillColor:"\u586B\u5145\u989C\u8272",opacity:"\u4E0D\u900F\u660E\u5EA6",shape:"\u5F62\u72B6",borderColor:"\u8FB9\u6846\u989C\u8272",borderWidth:"\u8FB9\u6846\u5BBD\u5EA6",borderOpacity:"\u8FB9\u6846\u4E0D\u900F\u660E\u5EA6",fillOpacity:"\u586B\u5145\u4E0D\u900F\u660E\u5EA6",dateTime:"\u65E5\u671F\u548C\u65F6\u95F4",createHere:"\u5728\u6B64\u521B\u5EFA"},zhCN={header:header$4,nextPage:nextPage$5,previousPage:previousPage$5,loading:loading$4,upload:upload$4,exit:exit$4,leftPanel:leftPanel$4,pageModePanel:pageModePanel$4,stampPanel:stampPanel$4,linkPanel:linkPanel$4,rightPanel:rightPanel$4,prevent:prevent$4,passwordDialog:passwordDialog$4,ok:ok$4,cancel:cancel$4,continue:"\u7EE7\u7EED",signatures:signatures$4,color:color$4,opacity:opacity$4,font:font$4,regular:regular$4,oblique:oblique$4,bold:bold$4,boldOblique:boldOblique$4,delete:"\u5220\u9664",warning:warning$3,colon:colon$3,compare:compare$5,editorPanel:editorPanel$4,documentEditor:documentEditor$4,paste:paste$4,properties:properties$4,security:security$4,layer:layer$4,colorSeparation:colorSeparation$4,measurement:measurement$4,measurementPanel:measurementPanel$4,freetextPanel:freetextPanel$4,customeStamp:customeStamp$4},header$3={leftPanel:"\u5DE6\u30D1\u30CD\u30EB",fullScreen:"\u5168\u753B\u9762\u8868\u793A",pan:"\u30D1\u30F3",cropPage:"\u5207\u308A\u53D6\u308A",zoomIn:"\u30BA\u30FC\u30E0\u30A4\u30F3",zoomOut:"\u30BA\u30FC\u30E0\u30A2\u30A6\u30C8",light:"\u660E\u308B\u3044",dark:"\u6697\u3044",lightMode:"\u30E9\u30A4\u30C8\u30E2\u30FC\u30C9",darkMode:"\u30C0\u30FC\u30AF\u30E2\u30FC\u30C9",viewer:"\u30D3\u30E5\u30FC\u30A2",annotations:"\u6CE8\u91C8",forms:"\u30D5\u30A9\u30FC\u30E0",signatures:"\u7F72\u540D",security:"\u5B89\u5168",compare:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306E\u6BD4\u8F03",editor:"\u30B3\u30F3\u30C6\u30F3\u30C4\u7DE8\u96C6",document:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u7DE8\u96C6",separation:"\u8272\u5206\u89E3",measurement:"\u6E2C\u5B9A",note:"\u6CE8\u8A18",highlight:"\u30CF\u30A4\u30E9\u30A4\u30C8",underline:"\u4E0B\u7DDA",strikeout:"\u53D6\u6D88\u7DDA",squiggly:"\u6CE2\u7DDA",ink:"\u30A4\u30F3\u30AF",circle:"\u4E38",square:"\u56DB\u89D2",arrow:"\u77E2\u5370",line:"\u30E9\u30A4\u30F3",freetext:"\u30D5\u30EA\u30FC\u30C6\u30AD\u30B9\u30C8",stamp:"\u30B9\u30BF\u30F3\u30D7",image:"\u753B\u50CF",link:"\u30EA\u30F3\u30AF",textField:"\u30C6\u30AD\u30B9\u30C8\u30D5\u30A3\u30FC\u30EB\u30C9",checkbox:"\u30C1\u30A7\u30C3\u30AF\u30DC\u30C3\u30AF\u30B9",radioButton:"\u30E9\u30B8\u30AA\u30DC\u30BF\u30F3",listBox:"\u30EA\u30B9\u30C8\u30DC\u30C3\u30AF\u30B9",comboButton:"\u30B3\u30F3\u30DC\u30DC\u30BF\u30F3",button:"\u62BC\u3057\u30DC\u30BF\u30F3",openFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u304F",search:"\u691C\u7D22",rightPanel:"\u53F3\u30D1\u30CD\u30EB",viewSetting:"\u8868\u793A\u8A2D\u5B9A",download:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",flatten:"\u30D5\u30E9\u30C3\u30C8\u5316\u3055\u308C\u305F PDF \u3068\u3057\u3066\u4FDD\u5B58",print:"\u5370\u5237",settings:{settings:"\u8A2D\u5B9A",author:"\u8457\u8005",annotator:"\u6CE8\u91C8\u8005",language:"\u8A00\u8A9E",highlightLink:"\u30CF\u30A4\u30E9\u30A4\u30C8\u30EA\u30F3\u30AF",highlightForm:"\u30CF\u30A4\u30E9\u30A4\u30C8\u30D5\u30A9\u30FC\u30E0",fillConsecutively:"\u9023\u7D9A\u3057\u3066\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",creationInfo:"\u5275\u4F5C\u60C5\u5831",version:"\u30D0\u30FC\u30B8\u30E7\u30F3"},addText:"\u30C6\u30AD\u30B9\u30C8\u306E\u8FFD\u52A0",addImage:"\u753B\u50CF\u306E\u8FFD\u52A0",undo:"\u5143\u306B\u623B\u3059",redo:"\u3084\u308A\u76F4\u3057",createSignField:"\u7F72\u540D\u30D5\u30A3\u30FC\u30EB\u30C9\u306E\u4F5C\u6210/\u8A2D\u5B9A",addDigitalSign:"\u30C7\u30B8\u30BF\u30EB\u7F72\u540D\u306E\u8FFD\u52A0",addElectronicSign:"\u96FB\u5B50\u7F72\u540D\u306E\u8FFD\u52A0",verifyDigitalSign:"\u30C7\u30B8\u30BF\u30EB\u7F72\u540D\u306E\u691C\u8A3C",measureLine:"\u30E9\u30A4\u30F3",measureMultiline:"\u8907\u6570\u884C",measurePolygon:"\u30DD\u30EA\u30B4\u30F3",measureRectangle:"\u77E9\u5F62",measureCircle:"\u4E38"},nextPage$4="\u6B21",previousPage$4="\u524D",loading$3="\u8AAD\u307F\u8FBC\u307F\u4E2D",upload$3="\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",exit$3="\u9000\u51FA",leftPanel$3={thumbnails:"\u30B5\u30E0\u30CD\u30A4\u30EB",outlines:"\u6982\u8981",noOutlines:"\u30A2\u30A6\u30C8\u30E9\u30A4\u30F3\u306A\u3057",layers:"\u30EC\u30A4\u30E4\u30FC",noLayers:"\u30EC\u30A4\u30E4\u30FC\u306A\u3057",menu:"\u30E1\u30CB\u30E5\u30FC",showAll:"\u3059\u3079\u3066\u8868\u793A",hideAll:"\u3059\u3079\u3066\u96A0\u3059",restoreSettings:"\u30C7\u30D5\u30A9\u30EB\u30C8\u8A2D\u5B9A\u306E\u5FA9\u5143",exportLayers:"\u30D5\u30A1\u30A4\u30EB\u30EC\u30A4\u30E4\u30FC\u306E\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",layerProperty:"\u30EC\u30A4\u30E4\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3",exportLayer:"\u3053\u306E\u30EC\u30A4\u30E4\u30FC\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",annotations:"\u6CE8\u91C8",noAnnotations:"\u6CE8\u91C8\u306A\u3057",importAnnotations:"\u6CE8\u91C8\u306E\u30A4\u30F3\u30DD\u30FC\u30C8",exportAnnotations:"\u6CE8\u91C8\u306E\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",search:"\u691C\u7D22",searchPdf:"PDF\u3092\u691C\u7D22",page:"\u30DA\u30FC\u30B8",whichPage:["","\u30DA\u30FC\u30B8\u76EE"],previousPhrase:"\u524D\u306B\u51FA\u73FE\u3057\u305F\u30D5\u30EC\u30FC\u30BA\u3092\u691C\u7D22",nextPhrase:"\u6B21\u306B\u51FA\u73FE\u3059\u308B\u30D5\u30EC\u30FC\u30BA\u3092\u691C\u7D22",results:"\u7D50\u679C",noResults:"\u7D50\u679C\u306A\u3057",signature:"\u7F72\u540D",signatureList:"\u30C7\u30B8\u30BF\u30EB\u7F72\u540D\u30EA\u30B9\u30C8",signatureDetails:"\u7F72\u540D\u306E\u8A73\u7D30",certificationDetails:"\u8A8D\u8A3C\u306E\u8A73\u7D30",noSignatures:"\u7F72\u540D\u306A\u3057",marked:"\u30DE\u30FC\u30AF\u3042\u308A",unmarked:"\u30DE\u30FC\u30AF\u306A\u3057",accepted:"\u627F\u8A8D\u3055\u308C\u307E\u3057\u305F",rejected:"\u62D2\u5426\u3055\u308C\u307E\u3057\u305F",cancelled:"\u30AD\u30E3\u30F3\u30BB\u30EB",completed:"\u5B8C\u4E86\u3057\u307E\u3057\u305F",none:"\u306A\u3057",edit:"\u7DE8\u96C6",delete:"\u6D88\u53BB",replyPlaceholder:"\u8FD4\u4FE1\u307E\u305F\u306F\u610F\u898B\u3092\u8FFD\u52A0",reply:"\u8FD4\u4FE1",confirm:"\u78BA\u8A8D"},pageModePanel$3={displayMode:"\u8868\u793A\u30E2\u30FC\u30C9",singlePage:"\u5358\u4E00\u30DA\u30FC\u30B8",twoPages:"2 \u30DA\u30FC\u30B8",coverMode:"\u30AB\u30D0\u30FC\u30E2\u30FC\u30C9",splitView:"\u30B9\u30AF\u30ED\u30FC\u30EB",vertical:"\u7E26\u30B9\u30AF\u30ED\u30FC\u30EB",horizontal:"\u6A2A\u30B9\u30AF\u30ED\u30FC\u30EB",themes:"\u30C6\u30FC\u30DE"},stampPanel$3={standard:"\u6A19\u6E96",dynamic:"\u52D5\u7684",custom:"\u30AB\u30B9\u30BF\u30E0",blank:"\u3053\u3053\u3067\u4F5C\u6210",create:"\u4F5C\u6210\u3059\u308B"},linkPanel$3={linkTo:"\u3078\u306E\u30EA\u30F3\u30AF",url:"URL",goToPages:"\u30DA\u30FC\u30B8\u306B\u79FB\u52D5",email:"\u96FB\u5B50\u30E1\u30FC\u30EB",go:"\u79FB\u52D5"},rightPanel$3={general:"\u4E00\u822C",name:"\u540D\u524D",formField:"\u30D5\u30A9\u30FC\u30E0\u30D5\u30A3\u30FC\u30EB\u30C9",visible:"\u898B\u3048\u308B",hidden:"\u96A0\u3059",properties:"\u30D7\u30ED\u30D1\u30C6\u30A3",requried:"\u5FC5\u9808",differentNameError:"\u5225\u306E\u540D\u524D\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",buttonText:"\u30DC\u30BF\u30F3\u306E\u30C6\u30AD\u30B9\u30C8",appearance:"\u5916\u89B3",backgroundColor:"\u80CC\u666F\u8272",preferences:"\u8A2D\u5B9A",alignment:"\u4F4D\u7F6E\u5408\u308F\u305B",left:"\u5DE6",center:"\u4E2D\u5FC3",right:"\u53F3",defaultValue:"\u30C7\u30D5\u30A9\u30EB\u30C8\u5024",multiLine:"\u8907\u6570\u884C",buttonStyle:"\u30DC\u30BF\u30F3\u306E\u30B9\u30BF\u30A4\u30EB",check:"\u30C1\u30A7\u30C3\u30AF",circle:"\u4E38",cross:"\u30AF\u30ED\u30B9",diamond:"\u30C0\u30A4\u30E4\u30E2\u30F3\u30C9",square:"\u56DB\u89D2",star:"\u661F",defaultChecked:"\u30DC\u30BF\u30F3\u306F\u30C7\u30D5\u30A9\u30EB\u30C8\u3067\u30C1\u30A7\u30C3\u30AF\u3055\u308C\u3066\u3044\u307E\u3059",item:"\u30A2\u30A4\u30C6\u30E0",itemList:"\u30A2\u30A4\u30C6\u30E0\u4E00\u89A7",option:"\u30A2\u30A4\u30C6\u30E0",selectAction:"\u30A2\u30AF\u30B7\u30E7\u30F3\u306E\u9078\u629E",none:"\u306A\u3057",goPage:"\u30DA\u30FC\u30B8\u306B\u79FB\u52D5",openLink:"Web \u30EA\u30F3\u30AF\u3092\u958B\u304F",addUrl:"URL\u3092\u8FFD\u52A0",addPage:"\u30DA\u30FC\u30B8\u3092\u8FFD\u52A0",radioBtnTip1:"\u30B0\u30EB\u30FC\u30D7\u306B 1 \u3064\u306E\u30DC\u30BF\u30F3\u3001\u5C11\u306A\u304F\u3068\u30822\u3064\u306E\u30DC\u30BF\u30F3\u304C\u5FC5\u8981\u3067\u3059",radioBtnTip2:"\u76F8\u4E92\u306B\u6392\u4ED6\u7684\u306A\u30E9\u30B8\u30AA\u30DC\u30BF\u30F3\u306E\u30BB\u30C3\u30C8\u3092\u4F5C\u6210\u3059\u308B\u306B\u306F\u3001\u30D5\u30A3\u30FC\u30EB\u30C9\u306B\u540C\u3058\u540D\u524D\u3092\u4ED8\u3051\u3066\u304F\u3060\u3055\u3044",listBoxTip:"\u9805\u76EE\u30EA\u30B9\u30C8\u5185\u306E\u9805\u76EE\u3092\u9078\u629E\u3057\u3001\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u30AA\u30D7\u30B7\u30E7\u30F3\u306B\u3057\u307E\u3059"},prevent$3={title:"Not Available in Server-Backed",standalone:"Standalone",description:"Content Editor is only available on Standalone. Change to Standalone to edit PDF content.",description1:"Document Editor is only available on Standalone. Change to Standalone to edit PDF pages."},passwordDialog$3={enterPwd:"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u3092\u8868\u793A\u3057\u3066\u304F\u3060\u3055\u3044",enterPwdPlaceholder:"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",wrongPwd:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u9593\u9055\u3063\u3066\u3044\u307E\u3059",long:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u9577\u3059\u304E\u307E\u3059\u3002\u6700\u5927 20 \u6587\u5B57\u3067\u3059\u3002",sameWord:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u30D1\u30B9\u30EF\u30FC\u30C9\u3068\u6A29\u9650\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u540C\u3058\u306B\u3059\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093",encryptPdf:"PDF\u3092\u6697\u53F7\u5316\u3059\u308B",encrypt:"\u6697\u53F7\u5316\u3059\u308B",supportTip:"\u30B5\u30DD\u30FC\u30C8: \u6570\u5B57\u3001\u6587\u5B57\u3001{'@'}\u3001$\u3001!\u3001%\u3001?\u3001&",removePwdSuccess:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u6B63\u5E38\u306B\u524A\u9664\u3055\u308C\u307E\u3057\u305F",removePwdFailure:"\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u524A\u9664\u306B\u5931\u6557\u3057\u307E\u3057\u305F",setPwdSuccess:"\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u6B63\u5E38\u306B\u8A2D\u5B9A\u3055\u308C\u307E\u3057\u305F\u3002\u30D5\u30A1\u30A4\u30EB\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u3066\u6709\u52B9\u306B\u3057\u307E\u3059\u3002",setPwdFailure:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306E\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u8A2D\u5B9A\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",documentPassword:"\u6587\u66F8\u306E\u30D1\u30B9\u30EF\u30FC\u30C9",permissionPassword:"\u8A31\u53EF\u30D1\u30B9\u30EF\u30FC\u30C9",disablePrinting:"\u5370\u5237\u3092\u7121\u52B9\u306B\u3059\u308B",disableCopying:"\u30B3\u30D4\u30FC\u3092\u7121\u52B9\u306B\u3059\u308B",disableEdit:"\u6CE8\u91C8\u3001\u30D5\u30A9\u30FC\u30E0\u3001\u6E2C\u5B9A\u3001\u58A8\u6D88\u3057\uFF08\u8FFD\u52A0\u3001\u524A\u9664\u3001\u5909\u66F4\uFF09\u3092\u7121\u52B9\u306B\u3059\u308B",note:["\u6CE8\u8A18\uFF1A","\u3059\u3079\u3066\u306E\u5909\u66F4\u306F\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u5F8C\u306B\u6709\u52B9\u306B\u306A\u308A\u307E\u3059","\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u524D\u3067\u3044\u3064\u3067\u3082\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u30EA\u30BB\u30C3\u30C8\u3067\u304D\u307E\u3059"],enterPermissionPwd:"\u8A31\u53EF\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"},ok$3="OK",cancel$3="\u30AD\u30E3\u30F3\u30BB\u30EB",signatures$3={tip:"\u7F72\u540D\u30D5\u30A3\u30FC\u30EB\u30C9\u3092\u4F5C\u6210\u3057\u3066\u304B\u3089\u3001\u7F72\u540D\u306E\u7A2E\u985E\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",danger:"\u7F72\u540D\u3059\u308B\u306B\u306F\u7A7A\u767D\u306E\u7F72\u540D\u30D5\u30A3\u30FC\u30EB\u30C9\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002",trackpad:"\u30C8\u30E9\u30C3\u30AF\u30D1\u30C3\u30C9",lineWidth:"\u7DDA\u5E45",keyboard:"\u30AD\u30FC\u30DC\u30FC\u30C9",signHere:"\u3053\u3053\u306B\u7F72\u540D\u3057\u3066\u304F\u3060\u3055\u3044",image:"\u753B\u50CF",selectFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",none:"\u306A\u3057",clear:"\u30AF\u30EA\u30A2",save:"\u4FDD\u5B58",uploadError:"1MB\u672A\u6E80\u306E\u753B\u50CF\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u304F\u3060\u3055\u3044",selectTypeDialog:{selectType:"\u7F72\u540D\u30BF\u30A4\u30D7\u306E\u9078\u629E",signWithElectronic:"\u96FB\u5B50\u7F72\u540D\u306B\u3088\u308B\u7F72\u540D",signWithElectronicDesc:"\u753B\u50CF\u7F72\u540D\u3092\u63CF\u753B\u3001\u5165\u529B\u3001\u307E\u305F\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u30D5\u30A1\u30A4\u30EB\u306B\u7F72\u540D\u3057\u307E\u3059",signWithDigital:"\u30C7\u30B8\u30BF\u30EB\u7F72\u540D\u306B\u3088\u308B\u7F72\u540D",signWithDigitalDesc:"\u30D5\u30A1\u30A4\u30EB\u306B\u7F72\u540D\u3059\u308B\u305F\u3081\u306E\u56FA\u6709\u306E\u30C7\u30B8\u30BF\u30EBID\u3092\u6301\u3064\u30C7\u30B8\u30BF\u30EB\u8A3C\u660E\u66F8\u3092\u4F5C\u6210\u307E\u305F\u306F\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u307E\u3059",startSigning:"\u7F72\u540D\u3092\u958B\u59CB\u3059\u308B"},detailsDialog:{title:"\u30C7\u30B8\u30BF\u30EB\u7F72\u540D\u306E\u8A73\u7D30",signBy:"\u6709\u52B9\u306A\u7F72\u540D\u3001\u7F72\u540D\u8005",signingTime:"\u7F72\u540D\u6642\u9593",validitySummary:"\u6709\u52B9\u6027\u306E\u6982\u8981",validIdentity:"\u7F72\u540D\u8005\u306E\u8EAB\u5143\u306F\u6709\u52B9\u3067\u3059",invalidIdentity:"\u7F72\u540D\u8005\u306E\u8EAB\u5143\u304C\u7121\u52B9\u3067\u3059",unknownIdentity:"\u7F72\u540D\u306F\u4FE1\u983C\u3067\u304D\u308B\u8A3C\u660E\u66F8\u306E\u30EA\u30B9\u30C8\u306B\u542B\u307E\u308C\u3066\u304A\u3089\u305A\u3001\u305D\u306E\u8A3C\u660E\u66F8\u3082\u4FE1\u983C\u3067\u304D\u308B\u8A3C\u660E\u66F8\u3067\u306F\u306A\u3044\u305F\u3081\u3001\u7F72\u540D\u306E\u6709\u52B9\u6027\u306F\u4E0D\u660E\u3067\u3059",expiredCertificate:"\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u306F\u6709\u52B9\u671F\u9650\u304C\u5207\u308C\u305F\u8A3C\u660E\u66F8\u3067\u7F72\u540D\u3055\u308C\u3066\u3044\u308B\u305F\u3081\u3001\u3053\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u6700\u8FD1\u53D6\u5F97\u3057\u305F\u5834\u5408\u306F\u672C\u7269\u3067\u306F\u306A\u3044\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059",validSignature:"\u7F72\u540D\u306F\u6709\u52B9\u3067\u3059",invalidSignature:"\u7F72\u540D\u306F\u7121\u52B9\u3067\u3059",notModifiedDoc:"\u3053\u306E\u7F72\u540D\u304C\u9069\u7528\u3055\u308C\u3066\u304B\u3089\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306F\u5909\u66F4\u3055\u308C\u3066\u3044\u307E\u305B\u3093",alteredDoc:"\u73FE\u5728\u306E\u30E6\u30FC\u30B6\u30FC\u304C\u7F72\u540D\u3057\u3066\u304B\u3089\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u304C\u5909\u66F4\u307E\u305F\u306F\u7834\u640D\u3057\u3066\u3044\u307E\u3059",viewCertificateDetails:"\u8A3C\u660E\u66F8\u306E\u8A73\u7D30\u3092\u8868\u793A\u3059\u308B",unknownSignature:"\u7F72\u540D\u306E\u6709\u52B9\u6027\u306F\u4E0D\u660E\u3067\u3059",atLeastOneInvalid:"\u5C11\u306A\u304F\u3068\u30821\u3064\u306E\u7F72\u540D\u304C\u7121\u52B9\u3067\u3059",viewAllSignatures:"\u3059\u3079\u3066\u306E\u7F72\u540D\u3092\u8868\u793A"},certificateViewerDialog:{title:"\u8A3C\u660E\u66F8\u30D3\u30E5\u30FC\u30A2",abstracts:"\u6284\u9332",summary:"\u307E\u3068\u3081",issuedTo:"\u767A\u884C\u5BFE\u8C61\u8005:",issuer:"\u767A\u884C\u8005:",validFrom:"\u6709\u52B9\u671F\u9650:",validTo:"\u6709\u52B9\u671F\u9650:",intendedUsage:"\u4F7F\u7528\u76EE\u7684:",details:"\u8A73\u7D30",version:"\u30D0\u30FC\u30B8\u30E7\u30F3",algorithm:"\u30A2\u30EB\u30B4\u30EA\u30BA\u30E0",subject:"\u4E3B\u984C",serialNumber:"\u30B7\u30EA\u30A2\u30EB\u30CA\u30F3\u30D0\u30FC",certificatePolicy:"\u8A3C\u660E\u66F8\u30DD\u30EA\u30B7\u30FC:",crlDistributionPoints:"CRL \u914D\u5E03\u30DD\u30A4\u30F3\u30C8:",issuerInfoAccess:"\u767A\u884C\u8005\u60C5\u5831\u3078\u306E\u30A2\u30AF\u30BB\u30B9:",issuerKeyIdentifier:"\u767A\u884C\u8005\u306E\u30AD\u30FC\u8B58\u5225\u5B50:",subjectKeyIdentifier:"\u30B5\u30D6\u30B8\u30A7\u30AF\u30C8\u306E\u30AD\u30FC\u8B58\u5225\u5B50:",basicConstraints:"\u57FA\u672C\u7684\u306A\u5236\u7D04:",keyUsage:"\u30AD\u30FC\u306E\u4F7F\u7528\u6CD5:",publicKey:"\u516C\u958B\u9375:",X509:"X.509 \u30C7\u30FC\u30BF:",SHA1Digest:"SHA1 \u30C0\u30A4\u30B8\u30A7\u30B9\u30C8:",MD5Digest:"MD5 \u30C0\u30A4\u30B8\u30A7\u30B9\u30C8:",trust:"\u4FE1\u983C",trustedTo:"\u3053\u306E\u8A3C\u660E\u66F8\u306F\u4EE5\u4E0B\u306B\u5BFE\u3057\u3066\u4FE1\u983C\u3055\u308C\u307E\u3059:",sign:"\u6587\u66F8\u307E\u305F\u306F\u30C7\u30FC\u30BF\u306B\u7F72\u540D\u3059\u308B",certify:"\u8A3C\u660E\u66F8\u985E",addToTrust:"\u4FE1\u983C\u3067\u304D\u308B\u8A3C\u660E\u66F8\u306B\u8FFD\u52A0",done:"\u7D42\u4E86"},deleteConfirm:"\u524A\u9664\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B?",addDigitalFileDialog:{title:"\u30C7\u30B8\u30BF\u30EBID\u3092\u8FFD\u52A0\u3059\u308B",desc:"\u30C7\u30B8\u30BF\u30EBID\u30D5\u30A1\u30A4\u30EB\u3092\u53C2\u7167\u3057\u307E\u3059\u3002\u30C7\u30B8\u30BF\u30EBID\u306F\u30D1\u30B9\u30EF\u30FC\u30C9\u3067\u4FDD\u8B77\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u5206\u304B\u3089\u306A\u3044\u5834\u5408\u3001\u30C7\u30B8\u30BF\u30EBID\u3092\u53D6\u5F97\u3059\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093\u3002",certificateFile:"\u8A3C\u660E\u66F8\u30D5\u30A1\u30A4\u30EB",uploadFile:"\u8A3C\u660E\u66F8\u30D5\u30A1\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3059\u308B",upload:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",password:"\u30D1\u30B9\u30EF\u30FC\u30C9",enterPassword:"\u8A3C\u660E\u66F8\u306E\u30D1\u30B9\u30EF\u30FC\u30C9",invalidPassword:"\u7121\u52B9\u306A\u30D1\u30B9\u30EF\u30FC\u30C9"},appearanceDialog:{title:"\u30C7\u30B8\u30BF\u30EB\u7F72\u540D\u306E\u8FFD\u52A0",signHere:"\u3053\u3053\u306B\u7F72\u540D\u3057\u3066\u304F\u3060\u3055\u3044",includeText:"\u30C6\u30AD\u30B9\u30C8\u3092\u542B\u3081\u308B",name:"\u540D\u524D",dName:"\u8B58\u5225\u53EF\u80FD\u306A\u540D\u524D",date:"\u65E5\u4ED8",ComPDFKitVersion:"ComPDFKit \u30D0\u30FC\u30B8\u30E7\u30F3",logo:"\u30ED\u30B4",location:"\u4F4D\u7F6E",reason:"\u7406\u7531",signReason:"\u7406\u7531",docOwner:"\u79C1\u306F\u6587\u66F8\u306E\u6240\u6709\u8005\u3067\u3059",approvingDoc:"\u6587\u66F8\u3092\u627F\u8A8D\u3057\u3066\u3044\u307E\u3059",reviewedDoc:"\u6587\u66F8\u3092\u78BA\u8A8D\u3057\u307E\u3057\u305F",labels:"\u30E9\u30D9\u30EB",text:"\u6587\u7AE0",type:"\u30BF\u30A4\u30D7",textAlignment:"\u30C6\u30AD\u30B9\u30C8\u306E\u914D\u7F6E"},title:"\u96FB\u5B50\u7F72\u540D\u306E\u8FFD\u52A0",noSignatures:"\u7F72\u540D\u30C6\u30F3\u30D7\u30EC\u30FC\u30C8\u306E\u4F5C\u6210\u3092\u958B\u59CB\u3057\u3066\u304F\u3060\u3055\u3044\u3002",mySignatures:"\u79C1\u306E\u7F72\u540D",createSignature:"\u7F72\u540D\u306E\u4F5C\u6210",saveSignature:"\u79C1\u306E\u7F72\u540D\u30C6\u30F3\u30D7\u30EC\u30FC\u30C8\u306B\u4FDD\u5B58\u3057\u307E\u3059\u3002",dropFile:"\u3053\u3053\u306B\u753B\u50CF\u3092\u30C9\u30ED\u30C3\u30D7\u3059\u308B\u304B\u3001",apply:"\u9069\u7528\u3059\u308B",full:"\u7F72\u540D\u30C6\u30F3\u30D7\u30EC\u30FC\u30C8\u304C\u3044\u3063\u3071\u3044\u3067\u3059\u3002\u65B0\u3057\u3044\u3082\u306E\u3092\u4F5C\u6210\u3059\u308B\u306B\u306F\u3001\u3044\u304F\u3064\u304B\u3092\u524A\u9664\u3057\u3066\u304F\u3060\u3055\u3044\u3002"},color$3="\u8272",opacity$3="\u4E0D\u900F\u660E\u5EA6",font$3="\u30D5\u30A9\u30F3\u30C8",regular$3="\u901A\u5E38",oblique$3="\u659C\u3081",bold$3="\u592A\u5B57",boldOblique$3="\u592A\u5B57\u659C\u7DDA",warning$2="Warning",colon$2=": ",compare$4={startCompare:"\u6BD4\u8F03\u3092\u958B\u59CB\u3059\u308B",exit:"\u9000\u51FA",oldFile:"\u53E4\u3044\u30D5\u30A1\u30A4\u30EB",newFile:"\u65B0\u3057\u3044\u30D5\u30A1\u30A4\u30EB",dropFile:["\u3053\u3053\u306B PDF \u30D5\u30A1\u30A4\u30EB\u3092\u30C9\u30ED\u30C3\u30D7\u3057\u307E\u3059","\u307E\u305F\u306F"],chooseOldFile:"\u53E4\u3044\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",chooseNewFile:"\u65B0\u3057\u3044\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",comingSoon:"\u6BD4\u8F03\u7D50\u679C\u306F\u8FD1\u65E5\u516C\u958B\u4E88\u5B9A\u3067\u3059",contentComparison:"\u5185\u5BB9\u306E\u6BD4\u8F03",compareItems:"\u9805\u76EE\u306E\u6BD4\u8F03",text:"\u6587\u7AE0",images:"\u753B\u50CF",colorMark:"\u8272\u3068\u30DE\u30FC\u30AF\u306E\u9055\u3044",replacedContent:"\u7F6E\u304D\u63DB\u3048\u3089\u308C\u305F\u30B3\u30F3\u30C6\u30F3\u30C4",insertedContent:"\u633F\u5165\u3055\u308C\u305F\u30B3\u30F3\u30C6\u30F3\u30C4",deletedContent:"\u524A\u9664\u3055\u308C\u305F\u30B3\u30F3\u30C6\u30F3\u30C4",overlayComparison:"\u30AA\u30FC\u30D0\u30FC\u30EC\u30A4\u306E\u6BD4\u8F03",blendMode:"\u30D6\u30EC\u30F3\u30C9\u30E2\u30FC\u30C9",normal:"\u666E\u901A",multiply:"\u4E57\u7B97",screen:"\u753B\u9762",overlay:"\u304B\u3076\u305B\u308B",darken:"\u6697\u304F\u3059\u308B",lighten:"\u660E\u308B\u304F\u3059\u308B",colorDodge:"\u30AB\u30E9\u30FC\u30C0\u30C3\u30B8",colorBurn:"\u30AB\u30E9\u30FC\u30D0\u30FC\u30F3",hardLight:"\u30CF\u30FC\u30C9\u30E9\u30A4\u30C8",softLight:"\u30BD\u30D5\u30C8\u30E9\u30A4\u30C8",difference:"\u9055\u3044",exclusion:"\u9664\u5916",hue:"\u8272\u76F8",saturation:"\u98FD\u548C",colour:"\u8272",luminosity:"\u660E\u308B\u3055",return:"\u623B\u308B",compare:"\u6BD4\u8F03",downloadOptions:"\u51FA\u529B\u30AA\u30D7\u30B7\u30E7\u30F3\u306E\u9078\u629E",downloadTwoFiles:"\u500B\u5225\u306B\u4FDD\u5B58\u3057\u3066\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",downloadOneFile:"1\u3064\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u7D50\u5408",printSetting:"\u5370\u5237\u8A2D\u5B9A",printOldFile:"\u53E4\u3044\u30D5\u30A1\u30A4\u30EB\u306E\u6BD4\u8F03\u7D50\u679C\u3092\u51FA\u529B\u3059\u308B",printNewFile:"\u65B0\u3057\u3044\u30D5\u30A1\u30A4\u30EB\u306E\u6BD4\u8F03\u7D50\u679C\u3092\u51FA\u529B\u3059\u308B",byComPDFKit:"ComPDFKit\u306B\u3088\u308B\u6BD4\u8F03\u7D50\u679C"},editorPanel$3={textProp:"\u30C6\u30AD\u30B9\u30C8\u306E\u30D7\u30ED\u30D1\u30C6\u30A3",fontColor:"\u30D5\u30A9\u30F3\u30C8\u306E\u8272",textStyle:"\u30C6\u30AD\u30B9\u30C8\u30B9\u30BF\u30A4\u30EB",spacing:"\u9593\u9694",characterSpacing:"\u6587\u5B57\u9593\u9694",lineSpacing:"\u884C\u9593",paragraphSpacing:"\u6BB5\u843D\u306E\u9593\u9694",imageProp:"\u753B\u50CF\u306E\u30D7\u30ED\u30D1\u30C6\u30A3",rotate:"\u56DE\u8EE2",rotateLeft:"\u5DE6\u306B\u56DE\u8EE2",rotateRight:"\u53F3\u306B\u56DE\u8EE2",flip:"\u53CD\u8EE2",flipHorizontal:"\u6C34\u5E73\u65B9\u5411\u306B\u53CD\u8EE2",flipVertical:"\u5782\u76F4\u65B9\u5411\u306B\u53CD\u8EE2",tools:"\u30C4\u30FC\u30EB",replace:"\u7F6E\u63DB",export:"\u51FA\u529B",crop:"\u5207\u308A\u53D6\u308A",maximum:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u753B\u50CF\u306E\u6700\u5927\u30B5\u30A4\u30BA: 2MB\u3002"},documentEditor$3={save:"\u4FDD\u5B58",saveAs:"\u540D\u524D\u3092\u4ED8\u3051\u3066\u4FDD\u5B58...",insert:"\u633F\u5165",delete:"\u6D88\u53BB",rotateRight:"\u53F3\u306B\u56DE\u8EE2",rotateLeft:"\u5DE6\u306B\u56DE\u8EE2",copy:"\u30B3\u30D4\u30FC",extract:"\u62BD\u51FA",replace:"\u4EA4\u63DB",move:"\u79FB\u52D5",selectAll:"\u3059\u3079\u3066\u9078\u629E",dialog:{insertPages:"\u30DA\u30FC\u30B8\u306E\u633F\u5165",blankPage:"\u7A7A\u767D\u306E\u30DA\u30FC\u30B8",customPage:"\u30AB\u30B9\u30BF\u30E0\u306E\u7A7A\u767D\u30DA\u30FC\u30B8",fromPdf:"PDF\u304B\u3089",selectFile:"\u30D5\u30A1\u30A4\u30EB\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",pageRange:"\u30DA\u30FC\u30B8\u7BC4\u56F2",allPages:"\u3059\u3079\u3066\u306E\u30DA\u30FC\u30B8",oddPage:"\u5947\u6570\u30DA\u30FC\u30B8\u306E\u307F",evenPage:"\u5076\u6570\u30DA\u30FC\u30B8\u306E\u307F",customRange:"\u30AB\u30B9\u30BF\u30E0\u7BC4\u56F2",insertTo:"\u633F\u5165\u5148",firstPage:"\u6700\u521D\u306E\u30DA\u30FC\u30B8",lastPage:"\u6700\u5F8C\u306E\u30DA\u30FC\u30B8",page:"\u30DA\u30FC\u30B8",pageTip:"\u4F8B\u3048\u30703\u30015\uFF5E10",before:"\u524D\u306B",after:"\u5F8C"},deleteConfirmText:"\u30DA\u30FC\u30B8\u3092\u524A\u9664\u3057\u307E\u3059\u304B?",eachPage:"\u500B\u5225\u306E\u30D5\u30A1\u30A4\u30EB\u5185\u306E\u5404\u30DA\u30FC\u30B8",deleteAfter:"\u62BD\u51FA\u5F8C\u306B\u30DA\u30FC\u30B8\u3092\u524A\u9664\u3059\u308B",moveTo:"\u30DA\u30FC\u30B8\u306E\u5F8C\u306B\u79FB\u52D5:",inputPageTip:"0\u304B\u3089\u6700\u5927\u30DA\u30FC\u30B8\u756A\u53F7\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"},paste$3="\u8CBC\u308A\u4ED8\u3051",properties$3="\u30D7\u30ED\u30D1\u30C6\u30A3",security$3={pwdProtection:"\u30D1\u30B9\u30EF\u30FC\u30C9\u4FDD\u8B77",encryption:"\u6697\u53F7\u5316",decryption:"\u5FA9\u53F7\u5316",redaction:"\u58A8\u6D88\u3057",fillBlack:"\u9ED2\u3067\u5857\u308A\u3064\u3076\u3059",fillWhite:"\u767D\u3067\u5857\u308A\u3064\u3076\u3059",caution:"\u6CE8\u610F",enterTip:"\u7DE8\u96C6\u3055\u308C\u305F\u30B3\u30F3\u30C6\u30F3\u30C4\u306F\u3053\u306E\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u304B\u3089\u6C38\u4E45\u306B\u524A\u9664\u3055\u308C\u307E\u3059\u3002\u30A2\u30AF\u30B7\u30E7\u30F3\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002",understand:"\u7406\u89E3\u3057\u3066\u59CB\u3081\u308B",applyTip:"\u7DE8\u96C6\u3092\u9069\u7528\u3059\u308B\u3068\u3001\u7DE8\u96C6\u3055\u308C\u305F\u30B3\u30F3\u30C6\u30F3\u30C4\u306F\u5B8C\u5168\u306B\u524A\u9664\u3055\u308C\u307E\u3059\u3002",exit:"\u9000\u51FA",apply:"\u9069\u7528",note:"\u6CE8\u8A18",exitTip:"\u7DE8\u96C6\u306F\u9069\u7528\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002\u672C\u5F53\u306B\u9000\u51FA\u3057\u307E\u3059\u304B?",exitConfirm:"\u9000\u51FA",saveTip:["\u3053\u306E\u6587\u66F8\u5185\u306E\u3059\u3079\u3066\u306E\u7DE8\u96C6\u3055\u308C\u305F\u30B3\u30F3\u30C6\u30F3\u30C4\u306F\u5B8C\u5168\u306B\u524A\u9664\u3055\u308C\u3001\u5FA9\u5143\u3059\u308B\u3053\u3068\u306F\u3067\u304D\u307E\u305B\u3093\u3002","\u305D\u308C\u3089\u3092\u7DE8\u96C6\u3057\u3066\u30D5\u30A1\u30A4\u30EB\u3092\u4FDD\u5B58\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B?"],save:"\u4FDD\u5B58"},layer$3={show:"\u8868\u793A",hide:"\u96A0\u3059",lock:"\u30ED\u30C3\u30AF",unlock:"\u30ED\u30C3\u30AF\u3092\u89E3\u9664",lockedTip:"\u73FE\u5728\u306E\u30EC\u30A4\u30E4\u30FC\u306F\u30ED\u30C3\u30AF\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u8868\u793A/\u975E\u8868\u793A\u3092\u5909\u66F4\u3059\u308B\u306B\u306F\u3001\u307E\u305A\u30EC\u30A4\u30E4\u30FC\u306E\u30D7\u30ED\u30D1\u30C6\u30A3\u3067\u30ED\u30C3\u30AF\u3092\u89E3\u9664\u3057\u3066\u304F\u3060\u3055\u3044\u3002",ok:"OK",setProperty:"\u30EC\u30A4\u30E4\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3\u306E\u8A2D\u5B9A",layerProperty:"\u30EC\u30A4\u30E4\u30FC\u30D7\u30ED\u30D1\u30C6\u30A3",layerName:"\u30EC\u30A4\u30E4\u30FC\u540D",enterLayerName:"\u30EC\u30A4\u30E4\u30FC\u540D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044",defaultSettings:"\u30C7\u30D5\u30A9\u30EB\u30C8\u8A2D\u5B9A",defaultShow:"\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u304F\u3068\u304D\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u8868\u793A",defaultHide:"\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u304F\u3068\u304D\u306E\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u975E\u8868\u793A",lockLayer:"\u30ED\u30C3\u30AF\u30EC\u30A4\u30E4\u30FC",printProperty:"\u5370\u5237\u30D7\u30ED\u30D1\u30C6\u30A3",always:"\u3044\u3064\u3082",never:"\u4E00\u5EA6\u3082\u306A\u3044",printVisible:"\u8868\u793A\u3055\u308C\u3066\u3044\u308B\u3068\u304D\u306B\u5370\u5237\u3059\u308B",exportProperty:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u30D7\u30ED\u30D1\u30C6\u30A3",exportVisible:"\u8868\u793A\u3055\u308C\u305F\u3089\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",copyLink:"\u30EA\u30F3\u30AF\u3092\u30B3\u30D4\u30FC"},colorSeparation$3={toggleColor:"\u8272\u306E\u5207\u308A\u66FF\u3048",notShowTip:"\u8272\u306F\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8\u306B\u8868\u793A\u3055\u308C\u307E\u305B\u3093",accessOnPc:"\u3053\u306E\u6A5F\u80FD\u306F\u30E2\u30D0\u30A4\u30EB\u3067\u306F\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002\u6700\u9AD8\u306E\u30A8\u30AF\u30B9\u30DA\u30EA\u30A8\u30F3\u30B9\u3092\u5F97\u308B\u306B\u306F PC \u3067\u30A2\u30AF\u30BB\u30B9\u3057\u3066\u304F\u3060\u3055\u3044\u3002"},measurement$3={scale:"\u898F\u6A21",length:"\u9577\u3055",precision:"\u7CBE\u5EA6",angle:"\u89D2\u5EA6",radius:"\u534A\u5F84",perimeter:"\u5468\u56F2",area:"\u30A8\u30EA\u30A2",reply:"\u8FD4\u4E8B",drawingToActual:"\u56F3\u9762\u5BF8\u6CD5\uFF1A\u5B9F\u5BF8",settingScale:"\u898F\u6A21",pt:"\u30DD\u30A4\u30F3\u30C8",in:"\u3067",mm:"mm",cm:"cm",m:"\u30E1\u30FC\u30C8\u30EB",km:"km",ft:"\u30D5\u30A3\u30FC\u30C8",yd:"\u30E4\u30FC\u30C9",mi:"\u79C1",measurementSettings:"\u6E2C\u5B9A\u8A2D\u5B9A",scaleError:"\u30B9\u30B1\u30FC\u30EB\u306F 0 \u3088\u308A\u5927\u304D\u304F\u306A\u3051\u308C\u3070\u306A\u308A\u307E\u305B\u3093",showCaption:"\u30AD\u30E3\u30D7\u30B7\u30E7\u30F3\u3092\u8868\u793A",done:"\u7D42\u308F\u308A"},measurementPanel$3={appearance:"\u5916\u89B3",lineColor:"\u7DDA\u306E\u8272",fillColor:"\u5857\u308A\u3064\u3076\u3057\u306E\u8272",lineWidth:"\u7DDA\u306E\u5E45",lineStyle:"\u7DDA\u3068\u67A0\u7DDA\u306E\u30B9\u30BF\u30A4\u30EB",start:"\u59CB\u3081\u308B",end:"\u7D42\u308F\u308A",fontColor:"\u30D5\u30A9\u30F3\u30C8\u306E\u8272",fontStyle:"\u30D5\u30A9\u30F3\u30C8\u30B9\u30BF\u30A4\u30EB",note:"\u6CE8\u8A18"},freetextPanel$3={title:"\u30D5\u30EA\u30FC\u30C6\u30AD\u30B9\u30C8",fontStyle:"\u30D5\u30A9\u30F3\u30C8\u30B9\u30BF\u30A4\u30EB",fontColor:"\u30D5\u30A9\u30F3\u30C8\u306E\u8272",borderWidth:"\u67A0\u7DDA\u306E\u5E45",borderColor:"\u67A0\u7DDA\u306E\u8272",textBorderOpacity:"\u5883\u754C\u7DDA\u3068\u30C6\u30AD\u30B9\u30C8\u306E\u4E0D\u900F\u660E\u5EA6",fillColor:"\u5857\u308A\u3064\u3076\u3057\u306E\u8272",fillOpacity:"\u5857\u308A\u3064\u3076\u3057\u306E\u4E0D\u900F\u660E\u5EA6"},customeStamp$3={title:"\u30AB\u30B9\u30BF\u30E0\u30B9\u30BF\u30F3\u30D7",preview:"\u30D7\u30EC\u30D3\u30E5\u30FC",addText:"\u30C6\u30AD\u30B9\u30C8\u306E\u8FFD\u52A0",addShape:"\u5F62\u72B6\u306E\u8FFD\u52A0",addDateTime:"\u65E5\u4ED8\u3068\u6642\u523B\u3092\u8FFD\u52A0\u3059\u308B",properties:"\u30D7\u30ED\u30D1\u30C6\u30A3",clear:"\u30AF\u30EA\u30A2",cancel:"\u30AD\u30E3\u30F3\u30BB\u30EB",ok:"\u308F\u304B\u308A\u307E\u3057\u305F",font:"\u30D5\u30A9\u30F3\u30C8",fontColor:"\u30D5\u30A9\u30F3\u30C8\u306E\u8272",fontStyle:"\u30D5\u30A9\u30F3\u30C8\u30B9\u30BF\u30A4\u30EB",fontSize:"\u30D5\u30A9\u30F3\u30C8\u30B5\u30A4\u30BA",alignment:"\u4F4D\u7F6E\u5408\u308F\u305B",fillColor:"\u5857\u308A\u3064\u3076\u3057\u306E\u8272",opacity:"\u4E0D\u900F\u660E\u5EA6",shape:"\u5F62",borderColor:"\u67A0\u7DDA\u306E\u8272",borderWidth:"\u67A0\u7DDA\u306E\u5E45",borderOpacity:"\u5883\u754C\u7DDA\u306E\u4E0D\u900F\u660E\u5EA6",fillOpacity:"\u5857\u308A\u3064\u3076\u3057\u306E\u4E0D\u900F\u660E\u5EA6",dateTime:"\u65E5\u6642",createHere:"\u3053\u3053\u3067\u4F5C\u6210"},ja={header:header$3,nextPage:nextPage$4,previousPage:previousPage$4,loading:loading$3,upload:upload$3,exit:exit$3,leftPanel:leftPanel$3,pageModePanel:pageModePanel$3,stampPanel:stampPanel$3,linkPanel:linkPanel$3,rightPanel:rightPanel$3,prevent:prevent$3,passwordDialog:passwordDialog$3,ok:ok$3,cancel:cancel$3,continue:"\u7D9A\u3051\u308B",signatures:signatures$3,color:color$3,opacity:opacity$3,font:font$3,regular:regular$3,oblique:oblique$3,bold:bold$3,boldOblique:boldOblique$3,delete:"\u6D88\u53BB",warning:warning$2,colon:colon$2,compare:compare$4,editorPanel:editorPanel$3,documentEditor:documentEditor$3,paste:paste$3,properties:properties$3,security:security$3,layer:layer$3,colorSeparation:colorSeparation$3,measurement:measurement$3,measurementPanel:measurementPanel$3,freetextPanel:freetextPanel$3,customeStamp:customeStamp$3},header$2={leftPanel:"\u0E41\u0E1C\u0E07\u0E14\u0E49\u0E32\u0E19\u0E0B\u0E49\u0E32\u0E22",fullScreen:"\u0E40\u0E15\u0E47\u0E21\u0E08\u0E2D",pan:"\u0E01\u0E23\u0E30\u0E17\u0E30",cropPage:"\u0E2A\u0E19\u0E34\u0E1B",zoomIn:"\u0E0B\u0E39\u0E21\u0E40\u0E02\u0E49\u0E32",zoomOut:"\u0E0B\u0E39\u0E21\u0E2D\u0E2D\u0E01",light:"\u0E41\u0E2A\u0E07\u0E2A\u0E27\u0E48\u0E32\u0E07",dark:"\u0E21\u0E37\u0E14",lightMode:"\u0E42\u0E2B\u0E21\u0E14\u0E41\u0E2A\u0E07",darkMode:"\u0E42\u0E2B\u0E21\u0E14\u0E21\u0E37\u0E14",openFile:"\u0E40\u0E1B\u0E34\u0E14\u0E44\u0E1F\u0E25\u0E4C",search:"\u0E04\u0E49\u0E19\u0E2B\u0E32",rightPanel:"\u0E41\u0E1C\u0E07\u0E14\u0E49\u0E32\u0E19\u0E02\u0E27\u0E32",viewSetting:"\u0E14\u0E39\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32",download:"\u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14",flatten:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E40\u0E1B\u0E47\u0E19 PDF \u0E41\u0E1A\u0E1A\u0E40\u0E23\u0E35\u0E22\u0E1A\u0E46",print:"\u0E1E\u0E34\u0E21\u0E1E\u0E4C",viewer:"\u0E1C\u0E39\u0E49\u0E14\u0E39",annotations:"\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A",forms:"\u0E41\u0E1A\u0E1A\u0E1F\u0E2D\u0E23\u0E4C\u0E21",signatures:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",security:"\u0E04\u0E27\u0E32\u0E21\u0E1B\u0E25\u0E2D\u0E14\u0E20\u0E31\u0E22",compare:"\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",editor:"\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E21\u0E37\u0E2D\u0E41\u0E01\u0E49\u0E44\u0E02\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32",document:"\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E21\u0E37\u0E2D\u0E41\u0E01\u0E49\u0E44\u0E02\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",separation:"\u0E01\u0E32\u0E23\u0E41\u0E22\u0E01\u0E2A\u0E35",measurement:"\u0E01\u0E32\u0E23\u0E27\u0E31\u0E14",note:"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38",highlight:"\u0E44\u0E2E\u0E44\u0E25\u0E17\u0E4C",underline:"\u0E02\u0E35\u0E14\u0E40\u0E2A\u0E49\u0E19\u0E43\u0E15\u0E49",strikeout:"\u0E02\u0E35\u0E14\u0E06\u0E48\u0E32",squiggly:"\u0E44\u0E01\u0E48\u0E40\u0E02\u0E35\u0E48\u0E22",ink:"\u0E2B\u0E21\u0E36\u0E01",circle:"\u0E27\u0E07\u0E01\u0E25\u0E21",square:"\u0E2A\u0E35\u0E48\u0E40\u0E2B\u0E25\u0E35\u0E48\u0E22\u0E21",arrow:"\u0E25\u0E39\u0E01\u0E28\u0E23",line:"\u0E40\u0E2A\u0E49\u0E19",freetext:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E1F\u0E23\u0E35",stamp:"\u0E41\u0E2A\u0E15\u0E21\u0E1B\u0E4C",image:"\u0E20\u0E32\u0E1E",link:"\u0E25\u0E34\u0E07\u0E04\u0E4C",textField:"\u0E0A\u0E48\u0E2D\u0E07\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",checkbox:"\u0E01\u0E25\u0E48\u0E2D\u0E07\u0E01\u0E32\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E2B\u0E21\u0E32\u0E22",radioButton:"\u0E1B\u0E38\u0E48\u0E21\u0E27\u0E34\u0E17\u0E22\u0E38",listBox:"\u0E01\u0E25\u0E48\u0E2D\u0E07\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",comboButton:"\u0E1B\u0E38\u0E48\u0E21\u0E04\u0E2D\u0E21\u0E42\u0E1A",button:"\u0E1B\u0E38\u0E48\u0E21\u0E01\u0E14",settings:{settings:"\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32",author:"\u0E1C\u0E39\u0E49\u0E40\u0E02\u0E35\u0E22\u0E19",annotator:"\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A",language:"\u0E20\u0E32\u0E29\u0E32",highlightLink:"\u0E44\u0E2E\u0E44\u0E25\u0E17\u0E4C\u0E25\u0E34\u0E07\u0E04\u0E4C",highlightForm:"\u0E44\u0E2E\u0E44\u0E25\u0E17\u0E4C\u0E1F\u0E2D\u0E23\u0E4C\u0E21",fillConsecutively:"\u0E01\u0E23\u0E2D\u0E01\u0E44\u0E1B\u0E40\u0E23\u0E37\u0E48\u0E2D\u0E22\u0E46",creationInfo:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E01\u0E32\u0E23\u0E2A\u0E23\u0E49\u0E32\u0E07",version:"\u0E40\u0E27\u0E2D\u0E23\u0E4C\u0E0A\u0E31\u0E19"},addText:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",addImage:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E23\u0E39\u0E1B\u0E20\u0E32\u0E1E",undo:"\u0E40\u0E25\u0E34\u0E01\u0E17\u0E33",redo:"\u0E17\u0E33\u0E0B\u0E49\u0E33",createSignField:"\u0E2A\u0E23\u0E49\u0E32\u0E07/\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",addDigitalSign:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",addElectronicSign:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E2D\u0E34\u0E40\u0E25\u0E47\u0E01\u0E17\u0E23\u0E2D\u0E19\u0E34\u0E01\u0E2A\u0E4C",verifyDigitalSign:"\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",measureLine:"\u0E40\u0E2A\u0E49\u0E19",measureMultiline:"\u0E2B\u0E25\u0E32\u0E22\u0E1A\u0E23\u0E23\u0E17\u0E31\u0E14",measurePolygon:"\u0E23\u0E39\u0E1B\u0E2B\u0E25\u0E32\u0E22\u0E40\u0E2B\u0E25\u0E35\u0E48\u0E22\u0E21",measureRectangle:"\u0E2A\u0E35\u0E48\u0E40\u0E2B\u0E25\u0E35\u0E48\u0E22\u0E21\u0E1C\u0E37\u0E19\u0E1C\u0E49\u0E32",measureCircle:"\u0E27\u0E07\u0E01\u0E25\u0E21"},nextPage$3="\u0E15\u0E48\u0E2D\u0E44\u0E1B",previousPage$3="\u0E01\u0E48\u0E2D\u0E19\u0E2B\u0E19\u0E49\u0E32",loading$2="\u0E01\u0E33\u0E25\u0E31\u0E07\u0E42\u0E2B\u0E25\u0E14",upload$2="\u0E2D\u0E31\u0E1B\u0E42\u0E2B\u0E25\u0E14",exit$2="\u0E2D\u0E2D\u0E01",leftPanel$2={thumbnails:"\u0E20\u0E32\u0E1E\u0E02\u0E19\u0E32\u0E14\u0E22\u0E48\u0E2D",outlines:"\u0E42\u0E04\u0E23\u0E07\u0E23\u0E48\u0E32\u0E07",noOutlines:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E42\u0E04\u0E23\u0E07\u0E23\u0E48\u0E32\u0E07",layers:"\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",noLayers:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",menu:"\u0E40\u0E21\u0E19\u0E39",showAll:"\u0E41\u0E2A\u0E14\u0E07\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",hideAll:"\u0E0B\u0E48\u0E2D\u0E19\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",restoreSettings:"\u0E04\u0E37\u0E19\u0E04\u0E48\u0E32\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19",exportLayers:"\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",layerProperty:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E02\u0E2D\u0E07\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",exportLayer:"\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C\u0E19\u0E35\u0E49",annotations:"\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A",noAnnotations:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A",importAnnotations:"\u0E19\u0E33\u0E40\u0E02\u0E49\u0E32\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A",exportAnnotations:"\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A",search:"\u0E04\u0E49\u0E19\u0E2B\u0E32",searchPdf:"\u0E04\u0E49\u0E19\u0E2B\u0E32 PDF",page:"\u0E2B\u0E19\u0E49\u0E32\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",whichPage:["\u0E2B\u0E19\u0E49\u0E32",""],previousPhrase:"\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E27\u0E25\u0E35\u0E17\u0E35\u0E48\u0E40\u0E01\u0E34\u0E14\u0E02\u0E36\u0E49\u0E19\u0E01\u0E48\u0E2D\u0E19\u0E2B\u0E19\u0E49\u0E32",nextPhrase:"\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E27\u0E25\u0E35\u0E16\u0E31\u0E14\u0E44\u0E1B",results:"\u0E1C\u0E25\u0E25\u0E31\u0E1E\u0E18\u0E4C",noResults:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E1C\u0E25\u0E25\u0E31\u0E1E\u0E18\u0E4C",signature:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",signatureList:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",signatureDetails:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",certificationDetails:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E01\u0E32\u0E23\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",noSignatures:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",marked:"\u0E17\u0E33\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E2B\u0E21\u0E32\u0E22",unmarked:"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E2B\u0E21\u0E32\u0E22",accepted:"\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E22\u0E2D\u0E21\u0E23\u0E31\u0E1A",rejected:"\u0E1B\u0E0F\u0E34\u0E40\u0E2A\u0E18",cancelled:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",completed:"\u0E2A\u0E21\u0E1A\u0E39\u0E23\u0E13\u0E4C",none:"\u0E44\u0E21\u0E48\u0E21\u0E35",edit:"\u0E41\u0E01\u0E49\u0E44\u0E02",delete:"\u0E25\u0E1A",replyPlaceholder:"\u0E15\u0E2D\u0E1A\u0E01\u0E25\u0E31\u0E1A\u0E2B\u0E23\u0E37\u0E2D\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E04\u0E27\u0E32\u0E21\u0E04\u0E34\u0E14",reply:"\u0E15\u0E2D\u0E1A",confirm:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19"},pageModePanel$2={displayMode:"\u0E42\u0E2B\u0E21\u0E14\u0E01\u0E32\u0E23\u0E41\u0E2A\u0E14\u0E07\u0E1C\u0E25",singlePage:"\u0E2B\u0E19\u0E49\u0E32\u0E40\u0E14\u0E35\u0E22\u0E27",twoPages:"\u0E2A\u0E2D\u0E07\u0E2B\u0E19\u0E49\u0E32",coverMode:"\u0E42\u0E2B\u0E21\u0E14\u0E1B\u0E01",splitView:"\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19",vertical:"\u0E01\u0E32\u0E23\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E41\u0E19\u0E27\u0E15\u0E31\u0E49\u0E07",horizontal:"\u0E01\u0E32\u0E23\u0E40\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E41\u0E19\u0E27\u0E19\u0E2D\u0E19",themes:"\u0E18\u0E35\u0E21\u0E2A\u0E4C"},stampPanel$2={standard:"\u0E21\u0E32\u0E15\u0E23\u0E10\u0E32\u0E19",dynamic:"\u0E1E\u0E25\u0E27\u0E31\u0E15",custom:"\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E40\u0E2D\u0E07",blank:"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E17\u0E35\u0E48\u0E19\u0E35\u0E48",create:"\u0E2A\u0E23\u0E49\u0E32\u0E07"},linkPanel$2={linkTo:"\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E21\u0E42\u0E22\u0E07\u0E44\u0E1B\u0E22\u0E31\u0E07",url:"URL",goToPages:"\u0E44\u0E1B\u0E17\u0E35\u0E48\u0E2B\u0E19\u0E49\u0E32",email:"\u0E2D\u0E35\u0E40\u0E21\u0E25",go:"\u0E44\u0E1B"},rightPanel$2={general:"\u0E17\u0E31\u0E48\u0E27\u0E44\u0E1B",name:"\u0E0A\u0E37\u0E48\u0E2D",formField:"\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E41\u0E1A\u0E1A\u0E1F\u0E2D\u0E23\u0E4C\u0E21",visible:"\u0E21\u0E2D\u0E07\u0E40\u0E2B\u0E47\u0E19\u0E44\u0E14\u0E49",hidden:"\u0E17\u0E35\u0E48\u0E0B\u0E48\u0E2D\u0E19\u0E2D\u0E22\u0E39\u0E48",properties:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34",requried:"\u0E08\u0E33\u0E40\u0E1B\u0E47\u0E19",differentNameError:"\u0E42\u0E1B\u0E23\u0E14\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E2D\u0E37\u0E48\u0E19",buttonText:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E02\u0E2D\u0E07\u0E1B\u0E38\u0E48\u0E21",appearance:"\u0E23\u0E39\u0E1B\u0E23\u0E48\u0E32\u0E07",backgroundColor:"\u0E2A\u0E35\u0E1E\u0E37\u0E49\u0E19\u0E2B\u0E25\u0E31\u0E07",preferences:"\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32",alignment:"\u0E01\u0E32\u0E23\u0E08\u0E31\u0E14\u0E15\u0E33\u0E41\u0E2B\u0E19\u0E48\u0E07",left:"\u0E0B\u0E49\u0E32\u0E22",center:"\u0E28\u0E39\u0E19\u0E22\u0E4C",right:"\u0E02\u0E27\u0E32",defaultValue:"\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19",multiLine:"\u0E2B\u0E25\u0E32\u0E22\u0E1A\u0E23\u0E23\u0E17\u0E31\u0E14",buttonStyle:"\u0E2A\u0E44\u0E15\u0E25\u0E4C\u0E1B\u0E38\u0E48\u0E21",check:"\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A",circle:"\u0E27\u0E07\u0E01\u0E25\u0E21",cross:"\u0E02\u0E49\u0E32\u0E21",diamond:"\u0E40\u0E1E\u0E0A\u0E23",square:"\u0E2A\u0E35\u0E48\u0E40\u0E2B\u0E25\u0E35\u0E48\u0E22\u0E21",star:"\u0E14\u0E32\u0E27",defaultChecked:"\u0E1B\u0E38\u0E48\u0E21\u0E08\u0E30\u0E16\u0E39\u0E01\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E42\u0E14\u0E22\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19",item:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",itemList:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",option:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",selectAction:"\u0E40\u0E25\u0E37\u0E2D\u0E01 \u0E01\u0E32\u0E23\u0E14\u0E33\u0E40\u0E19\u0E34\u0E19\u0E01\u0E32\u0E23",none:"\u0E44\u0E21\u0E48\u0E21\u0E35",goPage:"\u0E44\u0E1B\u0E17\u0E35\u0E48\u0E2B\u0E19\u0E49\u0E32",openLink:"\u0E40\u0E1B\u0E34\u0E14\u0E40\u0E27\u0E47\u0E1A\u0E25\u0E34\u0E07\u0E04\u0E4C",addUrl:"\u0E40\u0E1E\u0E34\u0E48\u0E21 URL",addPage:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E2B\u0E19\u0E49\u0E32",radioBtnTip1:"1 \u0E1B\u0E38\u0E48\u0E21\u0E43\u0E19\u0E01\u0E25\u0E38\u0E48\u0E21 \u0E08\u0E33\u0E40\u0E1B\u0E47\u0E19\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35\u0E1B\u0E38\u0E48\u0E21\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22 2 \u0E1B\u0E38\u0E48\u0E21",radioBtnTip2:"\u0E2B\u0E32\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E0A\u0E38\u0E14\u0E1B\u0E38\u0E48\u0E21\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49\u0E23\u0E48\u0E27\u0E21\u0E01\u0E31\u0E19\u0E42\u0E14\u0E22\u0E40\u0E09\u0E1E\u0E32\u0E30 (\u0E40\u0E0A\u0E48\u0E19 \u0E42\u0E14\u0E22\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E14\u0E49\u0E40\u0E1E\u0E35\u0E22\u0E07\u0E1B\u0E38\u0E48\u0E21\u0E40\u0E14\u0E35\u0E22\u0E27\u0E43\u0E19\u0E41\u0E15\u0E48\u0E25\u0E30\u0E04\u0E23\u0E31\u0E49\u0E07) \u0E42\u0E1B\u0E23\u0E14\u0E15\u0E31\u0E49\u0E07\u0E0A\u0E37\u0E48\u0E2D\u0E0A\u0E48\u0E2D\u0E07\u0E43\u0E2B\u0E49\u0E40\u0E2B\u0E21\u0E37\u0E2D\u0E19\u0E01\u0E31\u0E19",listBoxTip:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E43\u0E19\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E43\u0E2B\u0E49\u0E40\u0E1B\u0E47\u0E19\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19"},prevent$2={title:"Not Available in Server-Backed",standalone:"Standalone",description:"Content Editor is only available on Standalone. Change to Standalone to edit PDF content.",description1:"Document Editor is only available on Standalone. Change to Standalone to edit PDF pages."},passwordDialog$2={enterPwd:"\u0E1B\u0E49\u0E2D\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E14\u0E39\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",enterPwdPlaceholder:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19",wrongPwd:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E1C\u0E34\u0E14",long:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E22\u0E32\u0E27\u0E40\u0E01\u0E34\u0E19\u0E44\u0E1B \u0E2A\u0E39\u0E07\u0E2A\u0E38\u0E14 20 \u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",sameWord:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E41\u0E25\u0E30\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E2A\u0E34\u0E17\u0E18\u0E34\u0E4C\u0E15\u0E49\u0E2D\u0E07\u0E44\u0E21\u0E48\u0E40\u0E2B\u0E21\u0E37\u0E2D\u0E19\u0E01\u0E31\u0E19",encryptPdf:"\u0E40\u0E02\u0E49\u0E32\u0E23\u0E2B\u0E31\u0E2A PDF \u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13",encrypt:"\u0E40\u0E02\u0E49\u0E32\u0E23\u0E2B\u0E31\u0E2A",supportTip:"\u0E2A\u0E19\u0E31\u0E1A\u0E2A\u0E19\u0E38\u0E19: \u0E15\u0E31\u0E27\u0E40\u0E25\u0E02, \u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23, {'@'}, $, !, %, ?, &",removePwdSuccess:"\u0E25\u0E1A\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08\u0E41\u0E25\u0E49\u0E27!",removePwdFailure:"\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E25\u0E1A\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E14\u0E49",setPwdSuccess:"\u0E15\u0E31\u0E49\u0E07\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22\u0E41\u0E25\u0E49\u0E27! \u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E43\u0E2B\u0E49\u0E21\u0E35\u0E1C\u0E25",setPwdFailure:"\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E15\u0E31\u0E49\u0E07\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E19\u0E35\u0E49\u0E44\u0E14\u0E49",documentPassword:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",permissionPassword:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E01\u0E32\u0E23\u0E2D\u0E19\u0E38\u0E0D\u0E32\u0E15",disablePrinting:"\u0E1B\u0E34\u0E14\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E01\u0E32\u0E23\u0E1E\u0E34\u0E21\u0E1E\u0E4C",disableCopying:"\u0E1B\u0E34\u0E14\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E01\u0E32\u0E23\u0E04\u0E31\u0E14\u0E25\u0E2D\u0E01",disableEdit:"\u0E1B\u0E34\u0E14\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22\u0E1B\u0E23\u0E30\u0E01\u0E2D\u0E1A \u0E41\u0E1A\u0E1A\u0E1F\u0E2D\u0E23\u0E4C\u0E21 \u0E01\u0E32\u0E23\u0E27\u0E31\u0E14 \u0E01\u0E32\u0E23\u0E17\u0E33\u0E0B\u0E49\u0E33 (\u0E40\u0E1E\u0E34\u0E48\u0E21 \u0E25\u0E1A \u0E41\u0E25\u0E30\u0E41\u0E01\u0E49\u0E44\u0E02)",note:["\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38:","- \u0E01\u0E32\u0E23\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E41\u0E1B\u0E25\u0E07\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14\u0E08\u0E30\u0E21\u0E35\u0E1C\u0E25\u0E2B\u0E25\u0E31\u0E07\u0E08\u0E32\u0E01\u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14","- \u0E04\u0E38\u0E13\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E23\u0E35\u0E40\u0E0B\u0E47\u0E15\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E14\u0E49\u0E15\u0E25\u0E2D\u0E14\u0E40\u0E27\u0E25\u0E32\u0E01\u0E48\u0E2D\u0E19\u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14"],enterPermissionPwd:"\u0E1B\u0E49\u0E2D\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E01\u0E32\u0E23\u0E2D\u0E19\u0E38\u0E0D\u0E32\u0E15"},ok$2="\u0E15\u0E01\u0E25\u0E07",cancel$2="\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",signatures$2={tip:"\u0E42\u0E1B\u0E23\u0E14\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E01\u0E48\u0E2D\u0E19 \u0E08\u0E32\u0E01\u0E19\u0E31\u0E49\u0E19\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E2D\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",danger:"\u0E42\u0E1B\u0E23\u0E14\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1F\u0E34\u0E25\u0E14\u0E4C\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E27\u0E48\u0E32\u0E07\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E25\u0E07\u0E19\u0E32\u0E21",trackpad:"\u0E41\u0E17\u0E23\u0E47\u0E04\u0E41\u0E1E\u0E14",lineWidth:"\u0E04\u0E27\u0E32\u0E21\u0E01\u0E27\u0E49\u0E32\u0E07\u0E02\u0E2D\u0E07\u0E40\u0E2A\u0E49\u0E19",keyboard:"\u0E04\u0E35\u0E22\u0E4C\u0E1A\u0E2D\u0E23\u0E4C\u0E14",signHere:"\u0E25\u0E07\u0E0A\u0E37\u0E48\u0E2D\u0E17\u0E35\u0E48\u0E19\u0E35\u0E48",image:"\u0E20\u0E32\u0E1E",selectFile:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C",none:"\u0E44\u0E21\u0E48\u0E21\u0E35",clear:"\u0E0A\u0E31\u0E14\u0E40\u0E08\u0E19",save:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",uploadError:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E2D\u0E31\u0E1E\u0E42\u0E2B\u0E25\u0E14\u0E23\u0E39\u0E1B\u0E20\u0E32\u0E1E\u0E17\u0E35\u0E48\u0E21\u0E35\u0E02\u0E19\u0E32\u0E14\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19 1MB",selectTypeDialog:{selectType:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",signWithElectronic:"\u0E25\u0E07\u0E19\u0E32\u0E21\u0E14\u0E49\u0E27\u0E22\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E2D\u0E34\u0E40\u0E25\u0E47\u0E01\u0E17\u0E23\u0E2D\u0E19\u0E34\u0E01\u0E2A\u0E4C",signWithElectronicDesc:"\u0E27\u0E32\u0E14 \u0E1E\u0E34\u0E21\u0E1E\u0E4C \u0E2B\u0E23\u0E37\u0E2D\u0E2D\u0E31\u0E1E\u0E42\u0E2B\u0E25\u0E14\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E23\u0E39\u0E1B\u0E20\u0E32\u0E1E\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E0B\u0E47\u0E19\u0E0A\u0E37\u0E48\u0E2D\u0E44\u0E1F\u0E25\u0E4C",signWithDigital:"\u0E25\u0E07\u0E19\u0E32\u0E21\u0E14\u0E49\u0E27\u0E22\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",signWithDigitalDesc:"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E2B\u0E23\u0E37\u0E2D\u0E2D\u0E31\u0E1B\u0E42\u0E2B\u0E25\u0E14\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E14\u0E49\u0E27\u0E22\u0E23\u0E2B\u0E31\u0E2A\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E0B\u0E49\u0E33\u0E01\u0E31\u0E19\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E0B\u0E47\u0E19\u0E0A\u0E37\u0E48\u0E2D\u0E44\u0E1F\u0E25\u0E4C",startSigning:"\u0E40\u0E23\u0E34\u0E48\u0E21\u0E01\u0E32\u0E23\u0E25\u0E07\u0E19\u0E32\u0E21"},detailsDialog:{title:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",signBy:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E41\u0E25\u0E30\u0E25\u0E07\u0E19\u0E32\u0E21\u0E42\u0E14\u0E22",signingTime:"\u0E40\u0E27\u0E25\u0E32\u0E25\u0E07\u0E19\u0E32\u0E21",validitySummary:"\u0E2A\u0E23\u0E38\u0E1B\u0E04\u0E27\u0E32\u0E21\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E2D\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",validIdentity:"Or \u0E15\u0E31\u0E27\u0E15\u0E19\u0E02\u0E2D\u0E07\u0E1C\u0E39\u0E49\u0E25\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07",invalidIdentity:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E23\u0E30\u0E1A\u0E38\u0E15\u0E31\u0E27\u0E15\u0E19\u0E02\u0E2D\u0E07\u0E1C\u0E39\u0E49\u0E25\u0E07\u0E19\u0E32\u0E21\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07",unknownIdentity:"\u0E44\u0E21\u0E48\u0E17\u0E23\u0E32\u0E1A\u0E04\u0E27\u0E32\u0E21\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E2D\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E40\u0E19\u0E37\u0E48\u0E2D\u0E07\u0E08\u0E32\u0E01\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49\u0E23\u0E27\u0E21\u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E17\u0E35\u0E48\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E16\u0E37\u0E2D\u0E44\u0E14\u0E49\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13 \u0E41\u0E25\u0E30\u0E44\u0E21\u0E48\u0E21\u0E35\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E2B\u0E25\u0E31\u0E01\u0E43\u0E14\u0E17\u0E35\u0E48\u0E40\u0E1B\u0E47\u0E19\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E17\u0E35\u0E48\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E16\u0E37\u0E2D\u0E44\u0E14\u0E49",expiredCertificate:"\u0E44\u0E1F\u0E25\u0E4C\u0E16\u0E39\u0E01\u0E40\u0E0B\u0E47\u0E19\u0E0A\u0E37\u0E48\u0E2D\u0E14\u0E49\u0E27\u0E22\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E17\u0E35\u0E48\u0E2B\u0E21\u0E14\u0E2D\u0E32\u0E22\u0E38\u0E41\u0E25\u0E49\u0E27 \u0E2B\u0E32\u0E01\u0E04\u0E38\u0E13\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A\u0E44\u0E1F\u0E25\u0E4C\u0E19\u0E35\u0E49\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E40\u0E23\u0E47\u0E27\u0E46 \u0E19\u0E35\u0E49 \u0E44\u0E1F\u0E25\u0E4C\u0E19\u0E31\u0E49\u0E19\u0E2D\u0E32\u0E08\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E02\u0E2D\u0E07\u0E41\u0E17\u0E49",validSignature:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07",invalidSignature:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07",notModifiedDoc:"\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E41\u0E01\u0E49\u0E44\u0E02\u0E19\u0E31\u0E1A\u0E15\u0E31\u0E49\u0E07\u0E41\u0E15\u0E48\u0E21\u0E35\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E19\u0E35\u0E49",alteredDoc:"\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E17\u0E35\u0E48\u0E25\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E44\u0E27\u0E49\u0E21\u0E35\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E41\u0E1B\u0E25\u0E07\u0E2B\u0E25\u0E31\u0E07\u0E08\u0E32\u0E01\u0E17\u0E35\u0E48\u0E16\u0E39\u0E01\u0E40\u0E0B\u0E47\u0E19 \u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E1F\u0E25\u0E4C\u0E2D\u0E32\u0E08\u0E40\u0E2A\u0E35\u0E22\u0E2B\u0E32\u0E22 \u0E17\u0E33\u0E43\u0E2B\u0E49\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E04\u0E27\u0E32\u0E21\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E44\u0E14\u0E49\u0E2D\u0E35\u0E01\u0E15\u0E48\u0E2D\u0E44\u0E1B",viewCertificateDetails:"\u0E14\u0E39\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",unknownSignature:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E23\u0E32\u0E01\u0E0F\u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E04\u0E27\u0E32\u0E21\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E44\u0E14\u0E49\u0E43\u0E19\u0E02\u0E13\u0E30\u0E19\u0E35\u0E49",atLeastOneInvalid:"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E44\u0E14\u0E49\u0E2B\u0E21\u0E14\u0E2D\u0E32\u0E22\u0E38\u0E41\u0E25\u0E49\u0E27",viewAllSignatures:"\u0E41\u0E2A\u0E14\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14"},certificateViewerDialog:{title:"\u0E1C\u0E39\u0E49\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",abstracts:"\u0E1A\u0E17\u0E04\u0E31\u0E14\u0E22\u0E48\u0E2D",summary:"\u0E2A\u0E23\u0E38\u0E1B",issuedTo:"\u0E2D\u0E2D\u0E01\u0E43\u0E2B\u0E49\u0E01\u0E31\u0E1A:",issuer:"\u0E1C\u0E39\u0E49\u0E43\u0E2B\u0E49\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E17\u0E35\u0E48\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07:",validFrom:"\u0E27\u0E31\u0E19\u0E41\u0E25\u0E30\u0E40\u0E27\u0E25\u0E32\u0E17\u0E35\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E44\u0E14\u0E49:",validTo:"\u0E27\u0E31\u0E19\u0E41\u0E25\u0E30\u0E40\u0E27\u0E25\u0E32\u0E17\u0E35\u0E48\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E2B\u0E21\u0E14\u0E2D\u0E32\u0E22\u0E38:",intendedUsage:"\u0E27\u0E31\u0E15\u0E16\u0E38\u0E1B\u0E23\u0E30\u0E2A\u0E07\u0E04\u0E4C\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19:",details:"\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14",version:"\u0E40\u0E27\u0E2D\u0E23\u0E4C\u0E0A\u0E31\u0E19",algorithm:"\u0E2D\u0E31\u0E25\u0E01\u0E2D\u0E23\u0E34\u0E17\u0E36\u0E21",subject:"\u0E40\u0E23\u0E37\u0E48\u0E2D\u0E07",serialNumber:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E25\u0E02\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",certificatePolicy:"\u0E41\u0E19\u0E27\u0E19\u0E42\u0E22\u0E1A\u0E32\u0E22\u0E02\u0E2D\u0E07\u0E1C\u0E39\u0E49\u0E43\u0E2B\u0E49\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07:",crlDistributionPoints:"\u0E27\u0E34\u0E18\u0E35\u0E01\u0E32\u0E23\u0E40\u0E02\u0E49\u0E32\u0E16\u0E36\u0E07\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E40\u0E1E\u0E34\u0E01\u0E16\u0E2D\u0E19\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07 (CRL)\u0E42\u0E14\u0E22\u0E41\u0E2A\u0E14\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E25\u0E33\u0E14\u0E31\u0E1A\u0E02\u0E2D\u0E07\u0E41\u0E2B\u0E25\u0E48\u0E07\u0E40\u0E1C\u0E22\u0E41\u0E1E\u0E23\u0E48\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E40\u0E1E\u0E34\u0E01\u0E16\u0E2D\u0E19\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07:",issuerInfoAccess:"\u0E42\u0E14\u0E22\u0E41\u0E2A\u0E14\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E25\u0E33\u0E14\u0E31\u0E1A\u0E02\u0E2D\u0E07\u0E41\u0E2B\u0E25\u0E48\u0E07\u0E40\u0E1C\u0E22\u0E41\u0E1E\u0E23\u0E48\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E40\u0E1E\u0E34\u0E01\u0E16\u0E2D\u0E19\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07:",issuerKeyIdentifier:"\u0E1C\u0E39\u0E49\u0E43\u0E2B\u0E49\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E17\u0E35\u0E48\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E19\u0E35\u0E49:",subjectKeyIdentifier:"\u0E2A\u0E48\u0E27\u0E19\u0E15\u0E31\u0E27\u0E0B\u0E36\u0E48\u0E07\u0E1C\u0E39\u0E49\u0E43\u0E2B\u0E49\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E43\u0E0A\u0E49\u0E25\u0E07\u0E25\u0E32\u0E22\u0E21\u0E37\u0E2D\u0E0A\u0E37\u0E48\u0E2D\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E19\u0E35\u0E49:",basicConstraints:"\u0E02\u0E49\u0E2D\u0E08\u0E33\u0E01\u0E31\u0E14\u0E1E\u0E37\u0E49\u0E19\u0E10\u0E32\u0E19:",keyUsage:"\u0E27\u0E31\u0E15\u0E16\u0E38\u0E1B\u0E23\u0E30\u0E2A\u0E07\u0E04\u0E4C\u0E02\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49 public key \u0E0B\u0E36\u0E48\u0E07\u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07:",publicKey:"\u0E01\u0E38\u0E0D\u0E41\u0E08\u0E2A\u0E32\u0E18\u0E32\u0E23\u0E13\u0E30:",X509:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 X.509:",SHA1Digest:"\u0E02\u0E19\u0E32\u0E14 Messenger Digest \u0E02\u0E2D\u0E07 SHA1:",MD5Digest:"\u0E02\u0E19\u0E32\u0E14 Messenger Digest \u0E02\u0E2D\u0E07 MD5:",trust:"\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E16\u0E37\u0E2D\u0E44\u0E14\u0E49",trustedTo:"\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E19\u0E35\u0E49\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E16\u0E37\u0E2D\u0E44\u0E14\u0E49\u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A:",sign:"\u0E25\u0E07\u0E19\u0E32\u0E21\u0E43\u0E19\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E2B\u0E23\u0E37\u0E2D\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25",certify:"\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",addToTrust:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07\u0E17\u0E35\u0E48\u0E40\u0E0A\u0E37\u0E48\u0E2D\u0E16\u0E37\u0E2D\u0E44\u0E14\u0E49",done:"\u0E2A\u0E33\u0E40\u0E23\u0E47\u0E08\u0E41\u0E25\u0E49\u0E27"},deleteConfirm:"\u0E04\u0E38\u0E13\u0E41\u0E19\u0E48\u0E43\u0E08\u0E2B\u0E23\u0E37\u0E2D\u0E27\u0E48\u0E32\u0E08\u0E30\u0E25\u0E1A\u0E21\u0E31\u0E19?",addDigitalFileDialog:{title:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E23\u0E2B\u0E31\u0E2A\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",desc:"\u0E40\u0E23\u0E35\u0E22\u0E01\u0E14\u0E39\u0E44\u0E1F\u0E25\u0E4C ID \u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25 \u0E23\u0E2B\u0E31\u0E2A\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E21\u0E35\u0E01\u0E32\u0E23\u0E1B\u0E49\u0E2D\u0E07\u0E01\u0E31\u0E19\u0E14\u0E49\u0E27\u0E22\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19 \u0E2B\u0E32\u0E01\u0E04\u0E38\u0E13\u0E44\u0E21\u0E48\u0E17\u0E23\u0E32\u0E1A\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19 \u0E04\u0E38\u0E13\u0E08\u0E30\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E23\u0E31\u0E1A\u0E23\u0E2B\u0E31\u0E2A\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25\u0E44\u0E14\u0E49",certificateFile:"\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",uploadFile:"\u0E2D\u0E31\u0E1B\u0E42\u0E2B\u0E25\u0E14\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",upload:"\u0E2D\u0E31\u0E1B\u0E42\u0E2B\u0E25\u0E14",password:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19",enterPassword:"\u0E1B\u0E49\u0E2D\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E02\u0E2D\u0E07\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E1A\u0E23\u0E31\u0E1A\u0E23\u0E2D\u0E07",invalidPassword:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"},appearanceDialog:{title:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E14\u0E34\u0E08\u0E34\u0E17\u0E31\u0E25",signHere:"\u0E25\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E02\u0E2D\u0E07\u0E17\u0E48\u0E32\u0E19\u0E17\u0E35\u0E48\u0E19\u0E35\u0E48",includeText:"\u0E23\u0E27\u0E21\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",name:"\u0E0A\u0E37\u0E48\u0E2D",dName:"\u0E0A\u0E37\u0E48\u0E2D\u0E02\u0E2D\u0E07\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E17\u0E35\u0E48\u0E21\u0E35\u0E2A\u0E34\u0E17\u0E18\u0E34",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48",ComPDFKitVersion:"\u0E40\u0E27\u0E2D\u0E23\u0E4C\u0E0A\u0E31\u0E19 ComPDFKit",logo:"\u0E42\u0E25\u0E42\u0E01\u0E49",location:"\u0E17\u0E35\u0E48\u0E15\u0E31\u0E49\u0E07",reason:"\u0E40\u0E2B\u0E15\u0E38\u0E1C\u0E25",signReason:"\u0E40\u0E2B\u0E15\u0E38\u0E1C\u0E25",docOwner:"\u0E09\u0E31\u0E19\u0E40\u0E1B\u0E47\u0E19\u0E40\u0E08\u0E49\u0E32\u0E02\u0E2D\u0E07\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",approvingDoc:"\u0E09\u0E31\u0E19\u0E01\u0E33\u0E25\u0E31\u0E07\u0E2D\u0E19\u0E38\u0E21\u0E31\u0E15\u0E34\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",reviewedDoc:"\u0E09\u0E31\u0E19\u0E44\u0E14\u0E49\u0E15\u0E23\u0E27\u0E08\u0E2A\u0E2D\u0E1A\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E19\u0E35\u0E49\u0E41\u0E25\u0E49\u0E27",labels:"\u0E1B\u0E49\u0E32\u0E22\u0E01\u0E33\u0E01\u0E31\u0E1A",text:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",type:"\u0E1E\u0E34\u0E21\u0E1E\u0E4C",textAlignment:"\u0E01\u0E32\u0E23\u0E08\u0E31\u0E14\u0E15\u0E33\u0E41\u0E2B\u0E19\u0E48\u0E07\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21"},title:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E2D\u0E34\u0E40\u0E25\u0E47\u0E01\u0E17\u0E23\u0E2D\u0E19\u0E34\u0E01\u0E2A\u0E4C",noSignatures:"\u0E40\u0E23\u0E34\u0E48\u0E21\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E40\u0E17\u0E21\u0E40\u0E1E\u0E25\u0E15\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13!",mySignatures:"\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E02\u0E2D\u0E07\u0E09\u0E31\u0E19",createSignature:"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19",saveSignature:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E25\u0E07\u0E43\u0E19\u0E40\u0E17\u0E21\u0E40\u0E1E\u0E25\u0E15\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E02\u0E2D\u0E07\u0E09\u0E31\u0E19",dropFile:"\u0E27\u0E32\u0E07\u0E23\u0E39\u0E1B\u0E20\u0E32\u0E1E\u0E17\u0E35\u0E48\u0E19\u0E35\u0E48\u0E2B\u0E23\u0E37\u0E2D",apply:"\u0E19\u0E33\u0E21\u0E32\u0E43\u0E0A\u0E49",full:"\u0E40\u0E17\u0E21\u0E40\u0E1E\u0E25\u0E15\u0E25\u0E32\u0E22\u0E40\u0E0B\u0E47\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E40\u0E15\u0E47\u0E21\u0E41\u0E25\u0E49\u0E27 \u0E42\u0E1B\u0E23\u0E14\u0E25\u0E1A\u0E1A\u0E32\u0E07\u0E2A\u0E48\u0E27\u0E19\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E43\u0E2B\u0E21\u0E48"},color$2="\u0E2A\u0E35",opacity$2="\u0E04\u0E27\u0E32\u0E21\u0E17\u0E36\u0E1A",font$2="\u0E41\u0E1A\u0E1A\u0E2D\u0E31\u0E01\u0E29\u0E23",regular$2="\u0E1B\u0E01\u0E15\u0E34",oblique$2="\u0E40\u0E09\u0E35\u0E22\u0E07",bold$2="\u0E15\u0E31\u0E27\u0E2B\u0E19\u0E32",boldOblique$2="\u0E15\u0E31\u0E27\u0E2B\u0E19\u0E32\u0E40\u0E2D\u0E35\u0E22\u0E07",compare$3={startCompare:"\u0E40\u0E23\u0E34\u0E48\u0E21\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A",exit:"\u0E2D\u0E2D\u0E01",oldFile:"\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E01\u0E48\u0E32",newFile:"\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E2B\u0E21\u0E48",dropFile:["\u0E27\u0E32\u0E07\u0E44\u0E1F\u0E25\u0E4C PDF \u0E17\u0E35\u0E48\u0E19\u0E35\u0E48","\u0E2B\u0E23\u0E37\u0E2D"],chooseOldFile:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E01\u0E48\u0E32\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13",chooseNewFile:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E2B\u0E21\u0E48\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13",comingSoon:"\u0E1C\u0E25\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E01\u0E33\u0E25\u0E31\u0E07\u0E08\u0E30\u0E21\u0E32\u0E40\u0E23\u0E47\u0E27\u0E46 \u0E19\u0E35\u0E49!",contentComparison:"\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32",compareItems:"\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",text:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",images:"\u0E23\u0E39\u0E1B\u0E20\u0E32\u0E1E",colorMark:"\u0E2A\u0E35\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E17\u0E33\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E2B\u0E21\u0E32\u0E22\u0E04\u0E27\u0E32\u0E21\u0E41\u0E15\u0E01\u0E15\u0E48\u0E32\u0E07",replacedContent:"\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E17\u0E35\u0E48\u0E16\u0E39\u0E01\u0E41\u0E17\u0E19\u0E17\u0E35\u0E48",insertedContent:"\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E17\u0E35\u0E48\u0E41\u0E17\u0E23\u0E01",deletedContent:"\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E17\u0E35\u0E48\u0E16\u0E39\u0E01\u0E25\u0E1A",overlayComparison:"\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E01\u0E32\u0E23\u0E0B\u0E49\u0E2D\u0E19\u0E17\u0E31\u0E1A",blendMode:"\u0E42\u0E2B\u0E21\u0E14\u0E1C\u0E2A\u0E21\u0E1C\u0E2A\u0E32\u0E19",normal:"\u0E1B\u0E01\u0E15\u0E34",multiply:"\u0E04\u0E39\u0E13",screen:"\u0E2B\u0E19\u0E49\u0E32\u0E08\u0E2D",overlay:"\u0E0B\u0E49\u0E2D\u0E19\u0E17\u0E31\u0E1A",darken:"\u0E40\u0E02\u0E49\u0E21\u0E02\u0E36\u0E49\u0E19",lighten:"\u0E2D\u0E48\u0E2D\u0E19\u0E25\u0E07",colorDodge:"\u0E2A\u0E35\u0E14\u0E2D\u0E14\u0E08\u0E4C",colorBurn:"\u0E2A\u0E35\u0E40\u0E1A\u0E34\u0E23\u0E4C\u0E19",hardLight:"\u0E41\u0E2A\u0E07\u0E40\u0E02\u0E49\u0E21",softLight:"\u0E41\u0E2A\u0E07\u0E2D\u0E48\u0E2D\u0E19",difference:"\u0E04\u0E27\u0E32\u0E21\u0E41\u0E15\u0E01\u0E15\u0E48\u0E32\u0E07",exclusion:"\u0E01\u0E32\u0E23\u0E22\u0E01\u0E40\u0E27\u0E49\u0E19",hue:"\u0E04\u0E48\u0E32\u0E2A\u0E35\u0E2A\u0E31\u0E19",saturation:"\u0E04\u0E27\u0E32\u0E21\u0E2D\u0E34\u0E48\u0E21\u0E15\u0E31\u0E27",colour:"\u0E2A\u0E35",luminosity:"\u0E04\u0E27\u0E32\u0E21\u0E2A\u0E48\u0E2D\u0E07\u0E2A\u0E27\u0E48\u0E32\u0E07",return:"\u0E01\u0E25\u0E31\u0E1A",compare:"\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A",downloadOptions:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E41\u0E1A\u0E1A\u0E01\u0E32\u0E23\u0E41\u0E2A\u0E14\u0E07\u0E1C\u0E25",downloadTwoFiles:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E41\u0E25\u0E30\u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14\u0E41\u0E22\u0E01\u0E01\u0E31\u0E19",downloadOneFile:"\u0E23\u0E27\u0E21\u0E40\u0E1B\u0E47\u0E19\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E14\u0E35\u0E22\u0E27",printSetting:"\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E01\u0E32\u0E23\u0E1E\u0E34\u0E21\u0E1E\u0E4C",printOldFile:"\u0E1E\u0E34\u0E21\u0E1E\u0E4C\u0E1C\u0E25\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E44\u0E1F\u0E25\u0E4C\u0E40\u0E01\u0E48\u0E32",printNewFile:"\u0E1E\u0E34\u0E21\u0E1E\u0E4C\u0E1C\u0E25\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E02\u0E2D\u0E07\u0E44\u0E1F\u0E25\u0E4C\u0E43\u0E2B\u0E21\u0E48",byComPDFKit:"\u0E1C\u0E25\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E23\u0E35\u0E22\u0E1A\u0E40\u0E17\u0E35\u0E22\u0E1A\u0E42\u0E14\u0E22 ComPDFKit"},editorPanel$2={textProp:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",fontColor:"\u0E2A\u0E35\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",textStyle:"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",spacing:"\u0E23\u0E30\u0E22\u0E30\u0E2B\u0E48\u0E32\u0E07",characterSpacing:"\u0E01\u0E32\u0E23\u0E40\u0E27\u0E49\u0E19\u0E27\u0E23\u0E23\u0E04\u0E2D\u0E31\u0E01\u0E02\u0E23\u0E30",lineSpacing:"\u0E23\u0E30\u0E22\u0E30\u0E2B\u0E48\u0E32\u0E07\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1A\u0E23\u0E23\u0E17\u0E31\u0E14",paragraphSpacing:"\u0E23\u0E30\u0E22\u0E30\u0E2B\u0E48\u0E32\u0E07\u0E22\u0E48\u0E2D\u0E2B\u0E19\u0E49\u0E32",imageProp:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E02\u0E2D\u0E07\u0E20\u0E32\u0E1E",rotate:"\u0E2B\u0E21\u0E38\u0E19",rotateLeft:"\u0E2B\u0E21\u0E38\u0E19\u0E44\u0E1B\u0E17\u0E32\u0E07\u0E0B\u0E49\u0E32\u0E22",rotateRight:"\u0E2B\u0E21\u0E38\u0E19\u0E44\u0E1B\u0E17\u0E32\u0E07\u0E02\u0E27\u0E32",flip:"\u0E1E\u0E25\u0E34\u0E01",flipHorizontal:"\u0E1E\u0E25\u0E34\u0E01\u0E41\u0E19\u0E27\u0E19\u0E2D\u0E19",flipVertical:"\u0E1E\u0E25\u0E34\u0E01\u0E41\u0E19\u0E27\u0E15\u0E31\u0E49\u0E07",tools:"\u0E40\u0E04\u0E23\u0E37\u0E48\u0E2D\u0E07\u0E21\u0E37\u0E2D",replace:"\u0E41\u0E17\u0E19\u0E17\u0E35\u0E48",export:"\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01",crop:"\u0E04\u0E23\u0E2D\u0E1A\u0E15\u0E31\u0E14",maximum:"\u0E02\u0E19\u0E32\u0E14\u0E2D\u0E31\u0E1E\u0E42\u0E2B\u0E25\u0E14\u0E20\u0E32\u0E1E\u0E2A\u0E39\u0E07\u0E2A\u0E38\u0E14: 2MB"},documentEditor$2={save:"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38",saveAs:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E40\u0E1B\u0E47\u0E19...",insert:"\u0E41\u0E17\u0E23\u0E01",delete:"\u0E25\u0E1A",rotateRight:"\u0E2B\u0E21\u0E38\u0E19\u0E44\u0E1B\u0E17\u0E32\u0E07\u0E02\u0E27\u0E32",rotateLeft:"\u0E2B\u0E21\u0E38\u0E19\u0E44\u0E1B\u0E17\u0E32\u0E07\u0E0B\u0E49\u0E32\u0E22",copy:"\u0E2A\u0E33\u0E40\u0E19\u0E32",extract:"\u0E01\u0E32\u0E23\u0E41\u0E22\u0E01\u0E2B\u0E23\u0E37\u0E2D\u0E14\u0E36\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25",replace:"\u0E41\u0E17\u0E19\u0E17\u0E35\u0E48",move:"\u0E40\u0E04\u0E25\u0E37\u0E48\u0E2D\u0E19\u0E44\u0E2B\u0E27",selectAll:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14",dialog:{insertPages:"\u0E41\u0E17\u0E23\u0E01\u0E2B\u0E19\u0E49\u0E32",blankPage:"\u0E2B\u0E19\u0E49\u0E32\u0E27\u0E48\u0E32\u0E07",customPage:"\u0E2B\u0E19\u0E49\u0E32\u0E27\u0E48\u0E32\u0E07\u0E41\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E40\u0E2D\u0E07",fromPdf:"\u0E08\u0E32\u0E01 PDF",selectFile:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E1F\u0E25\u0E4C",pageRange:"\u0E0A\u0E48\u0E27\u0E07\u0E2B\u0E19\u0E49\u0E32",allPages:"\u0E17\u0E38\u0E01\u0E2B\u0E19\u0E49\u0E32",oddPage:"\u0E2B\u0E19\u0E49\u0E32\u0E04\u0E35\u0E48\u0E40\u0E17\u0E48\u0E32\u0E19\u0E31\u0E49\u0E19",evenPage:"\u0E2B\u0E19\u0E49\u0E32\u0E04\u0E39\u0E48\u0E40\u0E17\u0E48\u0E32\u0E19\u0E31\u0E49\u0E19",customRange:"\u0E0A\u0E48\u0E27\u0E07\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E40\u0E2D\u0E07",insertTo:"\u0E40\u0E41\u0E17\u0E23\u0E01\u0E40\u0E02\u0E49\u0E32\u0E44\u0E1B",firstPage:"\u0E2B\u0E19\u0E49\u0E32\u0E41\u0E23\u0E01",lastPage:"\u0E2B\u0E19\u0E49\u0E32\u0E2A\u0E38\u0E14\u0E17\u0E49\u0E32\u0E22",page:"\u0E2B\u0E19\u0E49\u0E32\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",pageTip:"\u0E40\u0E0A\u0E48\u0E19 3, 5-10",before:"\u0E01\u0E48\u0E2D\u0E19",after:"\u0E2B\u0E25\u0E31\u0E07\u0E08\u0E32\u0E01"},deleteConfirmText:"\u0E04\u0E38\u0E13\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E25\u0E1A\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E2B\u0E19\u0E49\u0E32\u0E19\u0E35\u0E49\u0E43\u0E0A\u0E48\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48 ?",eachPage:"\u0E41\u0E22\u0E01\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E41\u0E15\u0E48\u0E25\u0E30\u0E2B\u0E19\u0E49\u0E32\u0E40\u0E1B\u0E47\u0E19\u0E44\u0E1F\u0E25\u0E4C\u0E17\u0E35\u0E48\u0E41\u0E22\u0E01\u0E01\u0E31\u0E19",deleteAfter:"\u0E25\u0E1A\u0E2B\u0E19\u0E49\u0E32\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E14\u0E31\u0E07\u0E19\u0E35\u0E49\u0E2B\u0E25\u0E31\u0E07\u0E08\u0E32\u0E01\u0E32\u0E23\u0E41\u0E15\u0E01\u0E44\u0E1F\u0E25\u0E4C",moveTo:"\u0E22\u0E49\u0E32\u0E22\u0E44\u0E1B\u0E2D\u0E22\u0E39\u0E48\u0E2B\u0E25\u0E31\u0E07\u0E2B\u0E19\u0E49\u0E32\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48 ",inputPageTip:"\u0E1B\u0E49\u0E2D\u0E19 0 \u0E16\u0E36\u0E07\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E25\u0E02\u0E2B\u0E19\u0E49\u0E32\u0E2A\u0E39\u0E07\u0E2A\u0E38\u0E14"},paste$2="\u0E41\u0E1B\u0E30",properties$2="\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34",security$2={pwdProtection:"\u0E01\u0E32\u0E23\u0E1B\u0E49\u0E2D\u0E07\u0E01\u0E31\u0E19\u0E14\u0E49\u0E27\u0E22\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19",encryption:"\u0E01\u0E32\u0E23\u0E40\u0E02\u0E49\u0E32\u0E23\u0E2B\u0E31\u0E2A",decryption:"\u0E01\u0E32\u0E23\u0E16\u0E2D\u0E14\u0E23\u0E2B\u0E31\u0E2A",redaction:"\u0E01\u0E32\u0E23\u0E1B\u0E01\u0E1B\u0E34\u0E14\u0E41\u0E01\u0E49\u0E44\u0E02\u0E2B\u0E23\u0E37\u0E2D\u0E01\u0E32\u0E23\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E16\u0E32\u0E27\u0E23",fillBlack:"\u0E40\u0E15\u0E34\u0E21\u0E2A\u0E35\u0E14\u0E33",fillWhite:"\u0E40\u0E15\u0E34\u0E21\u0E04\u0E27\u0E32\u0E21\u0E02\u0E32\u0E27",caution:"\u0E04\u0E33\u0E40\u0E15\u0E37\u0E2D\u0E19",enterTip:"\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E17\u0E35\u0E48\u0E16\u0E39\u0E01\u0E41\u0E01\u0E49\u0E44\u0E02\u0E08\u0E30\u0E16\u0E39\u0E01\u0E25\u0E1A\u0E2D\u0E2D\u0E01\u0E08\u0E32\u0E01\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E19\u0E35\u0E49\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E16\u0E32\u0E27\u0E23 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E01\u0E23\u0E30\u0E17\u0E33\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13",understand:"\u0E40\u0E02\u0E49\u0E32\u0E43\u0E08\u0E41\u0E25\u0E30\u0E40\u0E23\u0E34\u0E48\u0E21",applyTip:"\u0E2B\u0E25\u0E31\u0E07\u0E08\u0E32\u0E01\u0E43\u0E0A\u0E49\u0E1F\u0E31\u0E07\u0E01\u0E4C\u0E0A\u0E31\u0E19\u0E1B\u0E01\u0E1B\u0E34\u0E14\u0E19\u0E35\u0E49 \u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E17\u0E35\u0E48\u0E1B\u0E01\u0E1B\u0E34\u0E14\u0E08\u0E30\u0E16\u0E39\u0E01\u0E25\u0E1A\u0E2D\u0E2D\u0E01\u0E08\u0E32\u0E01\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E19\u0E35\u0E49\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E16\u0E32\u0E27\u0E23",exit:"\u0E2D\u0E2D\u0E01",apply:"\u0E19\u0E33\u0E21\u0E32\u0E43\u0E0A\u0E49",note:"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38",exitTip:"\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E22\u0E31\u0E07\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E41\u0E01\u0E49\u0E44\u0E02 \u0E04\u0E38\u0E13\u0E41\u0E19\u0E48\u0E43\u0E08\u0E2B\u0E23\u0E37\u0E2D\u0E27\u0E48\u0E32\u0E08\u0E30\u0E2D\u0E2D\u0E01\u0E08\u0E32\u0E01\u0E01\u0E32\u0E23\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19",exitConfirm:"\u0E2D\u0E2D\u0E01",saveTip:["\u0E40\u0E19\u0E37\u0E49\u0E2D\u0E2B\u0E32\u0E17\u0E35\u0E48\u0E16\u0E39\u0E01\u0E41\u0E01\u0E49\u0E44\u0E02\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14\u0E43\u0E19\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E19\u0E35\u0E49\u0E08\u0E30\u0E16\u0E39\u0E01\u0E25\u0E1A\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E16\u0E32\u0E27\u0E23\u0E41\u0E25\u0E30\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E01\u0E39\u0E49\u0E04\u0E37\u0E19\u0E44\u0E14\u0E49","\u0E04\u0E38\u0E13\u0E41\u0E19\u0E48\u0E43\u0E08\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48\u0E27\u0E48\u0E32\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E41\u0E01\u0E49\u0E44\u0E02\u0E41\u0E25\u0E30\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E44\u0E1F\u0E25\u0E4C"],save:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01"},layer$2={show:"\u0E41\u0E2A\u0E14\u0E07",hide:"\u0E0B\u0E48\u0E2D\u0E19",lock:"\u0E25\u0E47\u0E2D\u0E04",unlock:"\u0E1B\u0E25\u0E14\u0E25\u0E47\u0E2D\u0E04",lockedTip:"\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C\u0E1B\u0E31\u0E08\u0E08\u0E38\u0E1A\u0E31\u0E19\u0E16\u0E39\u0E01\u0E25\u0E47\u0E2D\u0E04 \u0E2B\u0E32\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E01\u0E32\u0E23\u0E21\u0E2D\u0E07\u0E40\u0E2B\u0E47\u0E19 \u0E42\u0E1B\u0E23\u0E14\u0E1B\u0E25\u0E14\u0E25\u0E47\u0E2D\u0E04\u0E43\u0E19\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E02\u0E2D\u0E07\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C\u0E01\u0E48\u0E2D\u0E19",ok:"\u0E15\u0E01\u0E25\u0E07",setProperty:"\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",layerProperty:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E02\u0E2D\u0E07\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",layerName:"\u0E0A\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",enterLayerName:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",defaultSettings:"\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19",defaultShow:"\u0E41\u0E2A\u0E14\u0E07\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E40\u0E1B\u0E34\u0E14\u0E44\u0E1F\u0E25\u0E4C",defaultHide:"\u0E0B\u0E48\u0E2D\u0E19\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E40\u0E1B\u0E34\u0E14\u0E44\u0E1F\u0E25\u0E4C",lockLayer:"\u0E25\u0E47\u0E2D\u0E04\u0E40\u0E25\u0E40\u0E22\u0E2D\u0E23\u0E4C",printProperty:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34\u0E01\u0E32\u0E23\u0E1E\u0E34\u0E21\u0E1E\u0E4C",always:"\u0E40\u0E2A\u0E21\u0E2D",never:"\u0E44\u0E21\u0E48\u0E40\u0E04\u0E22",printVisible:"\u0E1E\u0E34\u0E21\u0E1E\u0E4C\u0E01\u0E23\u0E13\u0E35\u0E17\u0E35\u0E48\u0E21\u0E2D\u0E07\u0E40\u0E2B\u0E47\u0E19\u0E44\u0E14\u0E49",exportProperty:"\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34",exportVisible:"\u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E21\u0E2D\u0E07\u0E40\u0E2B\u0E47\u0E19\u0E44\u0E14\u0E49",copyLink:"\u0E04\u0E31\u0E14\u0E25\u0E2D\u0E01\u0E25\u0E34\u0E07\u0E04\u0E4C"},colorSeparation$2={toggleColor:"\u0E2A\u0E25\u0E31\u0E1A\u0E2A\u0E35",notShowTip:"\u0E2A\u0E35\u0E08\u0E30\u0E44\u0E21\u0E48\u0E41\u0E2A\u0E14\u0E07\u0E43\u0E19\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23",accessOnPc:"\u0E1F\u0E35\u0E40\u0E08\u0E2D\u0E23\u0E4C\u0E19\u0E35\u0E49\u0E43\u0E0A\u0E49\u0E44\u0E21\u0E48\u0E44\u0E14\u0E49\u0E01\u0E31\u0E1A\u0E21\u0E37\u0E2D\u0E16\u0E37\u0E2D \u0E42\u0E1B\u0E23\u0E14\u0E40\u0E02\u0E49\u0E32\u0E43\u0E0A\u0E49\u0E1A\u0E19\u0E1E\u0E35\u0E0B\u0E35\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E1B\u0E23\u0E30\u0E2A\u0E1A\u0E01\u0E32\u0E23\u0E13\u0E4C\u0E17\u0E35\u0E48\u0E14\u0E35\u0E17\u0E35\u0E48\u0E2A\u0E38\u0E14"},measurement$2={scale:"\u0E21\u0E32\u0E15\u0E23\u0E32\u0E2A\u0E48\u0E27\u0E19",length:"\u0E04\u0E27\u0E32\u0E21\u0E22\u0E32\u0E27",precision:"\u0E04\u0E27\u0E32\u0E21\u0E41\u0E21\u0E48\u0E19\u0E22\u0E33",angle:"\u0E21\u0E38\u0E21",radius:"\u0E23\u0E31\u0E28\u0E21\u0E35",perimeter:"\u0E1B\u0E23\u0E34\u0E21\u0E13\u0E11\u0E25",area:"\u0E1E\u0E37\u0E49\u0E19\u0E17\u0E35\u0E48",reply:"\u0E15\u0E2D\u0E1A",drawingToActual:"\u0E02\u0E19\u0E32\u0E14\u0E01\u0E32\u0E23\u0E27\u0E32\u0E14: \u0E02\u0E19\u0E32\u0E14\u0E08\u0E23\u0E34\u0E07",settingScale:"\u0E21\u0E32\u0E15\u0E23\u0E32\u0E2A\u0E48\u0E27\u0E19",pt:"\u0E08\u0E38\u0E14",in:"\u0E43\u0E19",mm:"\u0E21\u0E21",cm:"\u0E0B\u0E21",m:"\u0E21",km:"\u0E01\u0E21",ft:"\u0E1F\u0E38\u0E15",yd:"\u0E1B\u0E35",mi:"\u0E44\u0E21\u0E25\u0E4C",measurementSettings:"\u0E01\u0E32\u0E23\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32\u0E01\u0E32\u0E23\u0E27\u0E31\u0E14",scaleError:"\u0E2A\u0E40\u0E01\u0E25\u0E04\u0E27\u0E23\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32 0",showCaption:"\u0E41\u0E2A\u0E14\u0E07\u0E04\u0E33\u0E1A\u0E23\u0E23\u0E22\u0E32\u0E22\u0E20\u0E32\u0E1E",done:"\u0E40\u0E2A\u0E23\u0E47\u0E08\u0E41\u0E25\u0E49\u0E27"},measurementPanel$2={appearance:"\u0E23\u0E39\u0E1B\u0E23\u0E48\u0E32\u0E07",lineColor:"\u0E2A\u0E35\u0E02\u0E2D\u0E07\u0E40\u0E2A\u0E49\u0E19",fillColor:"\u0E40\u0E15\u0E34\u0E21\u0E2A\u0E35",lineWidth:"\u0E04\u0E27\u0E32\u0E21\u0E01\u0E27\u0E49\u0E32\u0E07\u0E02\u0E2D\u0E07\u0E40\u0E2A\u0E49\u0E19",lineStyle:"\u0E25\u0E31\u0E01\u0E29\u0E13\u0E30\u0E40\u0E2A\u0E49\u0E19\u0E41\u0E25\u0E30\u0E40\u0E2A\u0E49\u0E19\u0E02\u0E2D\u0E1A",start:"\u0E40\u0E23\u0E34\u0E48\u0E21",end:"\u0E08\u0E1A",fontColor:"\u0E2A\u0E35\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",fontStyle:"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",note:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01"},freetextPanel$2={title:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E1F\u0E23\u0E35",fontStyle:"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",fontColor:"\u0E2A\u0E35\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",borderWidth:"\u0E04\u0E27\u0E32\u0E21\u0E01\u0E27\u0E49\u0E32\u0E07\u0E02\u0E2D\u0E07\u0E40\u0E2A\u0E49\u0E19\u0E02\u0E2D\u0E1A",borderColor:"\u0E2A\u0E35\u0E02\u0E2D\u0E1A",textBorderOpacity:"\u0E04\u0E27\u0E32\u0E21\u0E17\u0E36\u0E1A\u0E02\u0E2D\u0E07\u0E40\u0E2A\u0E49\u0E19\u0E02\u0E2D\u0E1A\u0E41\u0E25\u0E30\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",fillColor:"\u0E40\u0E15\u0E34\u0E21\u0E2A\u0E35",fillOpacity:"\u0E40\u0E15\u0E34\u0E21\u0E04\u0E27\u0E32\u0E21\u0E17\u0E36\u0E1A"},customeStamp$2={title:"\u0E41\u0E2A\u0E15\u0E21\u0E1B\u0E4C\u0E41\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E40\u0E2D\u0E07",preview:"\u0E14\u0E39\u0E15\u0E31\u0E27\u0E2D\u0E22\u0E48\u0E32\u0E07",addText:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21",addShape:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E23\u0E39\u0E1B\u0E23\u0E48\u0E32\u0E07",addDateTime:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E30\u0E40\u0E27\u0E25\u0E32",properties:"\u0E04\u0E38\u0E13\u0E2A\u0E21\u0E1A\u0E31\u0E15\u0E34",clear:"\u0E0A\u0E31\u0E14\u0E40\u0E08\u0E19",cancel:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",ok:"\u0E15\u0E01\u0E25\u0E07",font:"\u0E41\u0E1A\u0E1A\u0E2D\u0E31\u0E01\u0E29\u0E23",fontColor:"\u0E2A\u0E35\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",fontStyle:"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",fontSize:"\u0E02\u0E19\u0E32\u0E14\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",alignment:"\u0E01\u0E32\u0E23\u0E08\u0E31\u0E14\u0E15\u0E33\u0E41\u0E2B\u0E19\u0E48\u0E07",fillColor:"\u0E40\u0E15\u0E34\u0E21\u0E2A\u0E35",opacity:"\u0E04\u0E27\u0E32\u0E21\u0E17\u0E36\u0E1A",shape:"\u0E23\u0E39\u0E1B\u0E23\u0E48\u0E32\u0E07",borderColor:"\u0E2A\u0E35\u0E02\u0E2D\u0E1A",borderWidth:"\u0E04\u0E27\u0E32\u0E21\u0E01\u0E27\u0E49\u0E32\u0E07\u0E02\u0E2D\u0E07\u0E40\u0E2A\u0E49\u0E19\u0E02\u0E2D\u0E1A",borderOpacity:"\u0E04\u0E27\u0E32\u0E21\u0E17\u0E36\u0E1A\u0E02\u0E2D\u0E07\u0E40\u0E2A\u0E49\u0E19\u0E02\u0E2D\u0E1A",fillOpacity:"\u0E40\u0E15\u0E34\u0E21\u0E04\u0E27\u0E32\u0E21\u0E17\u0E36\u0E1A",dateTime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E25\u0E30\u0E40\u0E27\u0E25\u0E32",createHere:"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E17\u0E35\u0E48\u0E19\u0E35\u0E48"},th={header:header$2,nextPage:nextPage$3,previousPage:previousPage$3,loading:loading$2,upload:upload$2,exit:exit$2,leftPanel:leftPanel$2,pageModePanel:pageModePanel$2,stampPanel:stampPanel$2,linkPanel:linkPanel$2,rightPanel:rightPanel$2,prevent:prevent$2,passwordDialog:passwordDialog$2,ok:ok$2,cancel:cancel$2,continue:"\u0E14\u0E33\u0E40\u0E19\u0E34\u0E19\u0E01\u0E32\u0E23\u0E15\u0E48\u0E2D",signatures:signatures$2,color:color$2,opacity:opacity$2,font:font$2,regular:regular$2,oblique:oblique$2,bold:bold$2,boldOblique:boldOblique$2,delete:"\u0E25\u0E1A",compare:compare$3,editorPanel:editorPanel$2,documentEditor:documentEditor$2,paste:paste$2,properties:properties$2,security:security$2,layer:layer$2,colorSeparation:colorSeparation$2,measurement:measurement$2,measurementPanel:measurementPanel$2,freetextPanel:freetextPanel$2,customeStamp:customeStamp$2},header$1={leftPanel:"\u5DE6\u5074\u9762\u677F",fullScreen:"\u5168\u87A2\u5E55",pan:"\u6EFE\u52D5\u5DE5\u5177",cropPage:"\u622A\u53D6",zoomIn:"\u653E\u5927",zoomOut:"\u7E2E\u5C0F",light:"\u65E5\u9593",dark:"\u591C\u9593",lightMode:"\u65E5\u9593\u6A21\u5F0F",darkMode:"\u591C\u9593\u6A21\u5F0F",viewer:"\u67E5\u770B",annotations:"\u8A3B\u89E3",forms:"\u8868\u55AE",signatures:"\u7C3D\u540D",security:"\u5B89\u5168",compare:"\u6587\u4EF6\u5C0D\u6BD4",editor:"\u5167\u5BB9\u7DE8\u8F2F\u5668",document:"\u9801\u9762\u7DE8\u8F2F",separation:"\u5206\u8272",measurement:"\u6E2C\u91CF",note:"\u4FBF\u7C64",highlight:"\u9AD8\u4EAE",underline:"\u5E95\u7DDA",strikeout:"\u522A\u9664\u7DDA",squiggly:"\u6CE2\u6D6A\u7DDA",ink:"\u624B\u7E6A",circle:"\u5713",square:"\u9577\u65B9\u5F62",arrow:"\u7BAD\u982D",line:"\u7DDA",freetext:"\u6587\u5B57",stamp:"\u5716\u7AE0",image:"\u5716\u7247",link:"\u9023\u7D50",textField:"\u6587\u5B57\u57DF",checkbox:"\u8907\u9078\u6846",radioButton:"\u55AE\u9078\u6309\u9215",listBox:"\u5217\u9336\u6846",comboButton:"\u4E0B\u62C9\u5F0F\u9078\u55AE",button:"\u6309\u94AE",openFile:"\u4E0A\u50B3\u6587\u6A94",search:"\u641C\u5C0B",rightPanel:"\u53F3\u5074\u9762\u677F",viewSetting:"\u9801\u9762\u986F\u793A",download:"\u4E0B\u8F09",flatten:"\u5C55\u5E73\u5F8C\u4E0B\u8F09",print:"\u5217\u5370",settings:{settings:"\u8A2D\u5B9A",author:"\u6587\u4EF6\u4F5C\u8005",annotator:"\u8A3B\u91CB\u4F5C\u8005",language:"\u8A9E\u8A00\u8A2D\u5B9A",highlightLink:"\u9AD8\u4EAE\u9023\u7D50",highlightForm:"\u9AD8\u4EAE\u8868\u55AE",fillConsecutively:"\u9023\u7E8C\u586B\u5BEB",creationInfo:"\u5275\u5EFA\u8A0A\u606F",version:"\u7248\u672C"},addText:"\u65B0\u589E\u6587\u5B57",addImage:"\u65B0\u589E\u5716\u7247",undo:"\u64A4\u92B7",redo:"\u91CD\u505A",createSignField:"\u65B0\u589E/\u8A2D\u5B9A\u7C3D\u540D\u57DF",addDigitalSign:"\u65B0\u589E\u6578\u4F4D\u7C3D\u540D",addElectronicSign:"\u65B0\u589E\u96FB\u5B50\u7C3D\u540D",verifyDigitalSign:"\u9A57\u8B49\u6578\u4F4D\u7C3D\u540D",measureLine:"\u7DDA",measureMultiline:"\u6298\u7DDA",measurePolygon:"\u6240\u505A",measureRectangle:"\u66F2\u7DDA",measureCircle:"\u5713\u5F62"},nextPage$2="\u4E0B\u4E00\u9801",previousPage$2="\u4E0A\u4E00\u9801",loading$1="\u8F09\u5165\u4E2D",upload$1="\u4E0A\u50B3",exit$1="\u9000\u51FA",leftPanel$1={thumbnails:"\u7E2E\u5716",outlines:"\u5927\u7DB1",noOutlines:"\u7121\u5927\u7DB1",layers:"\u5716\u5C64",noLayers:"\u7121\u5716\u5C64",menu:"\u9078\u55AE",showAll:"\u5168\u90E8\u986F\u793A",hideAll:"\u5168\u90E8\u96B1\u85CF",restoreSettings:"\u6062\u5FA9\u9810\u8A2D\u72C0\u614B",exportLayers:"\u532F\u51FA\u6587\u4EF6\u5716\u5C64",layerProperty:"\u5716\u5C64\u5C6C\u6027",exportLayer:"\u532F\u51FA\u6B64\u5716\u5C64",annotations:"\u8A3B\u91CB\u5217\u8868",noAnnotations:"\u6C92\u6709\u8A3B\u91CB",importAnnotations:"\u5C0E\u5165\u8A3B\u91CB",exportAnnotations:"\u5C0E\u51FA\u8A3B\u91CB",search:"\u641C\u5C0B",searchPdf:"\u641C\u5C0BPDF",page:"\u9801\u78BC",whichPage:["\u7B2C","\u9801"],previousPhrase:"\u770B\u4E0A\u4E00\u500B\u7D50\u679C",nextPhrase:"\u67E5\u770B\u4E0B\u4E00\u500B\u7D50\u679C",results:"\u7D50\u679C",noResults:"\u7121\u641C\u5C0B\u7D50\u679C",signature:"\u7C3D\u540D",signatureList:"\u6578\u4F4D\u7C3D\u540D\u5217\u8868",signatureDetails:"\u770B\u7C3D\u540D\u8A73\u60C5",certificationDetails:"\u67E5\u770B\u8B49\u66F8\u8A73\u60C5",noSignatures:"\u6C92\u6709\u7C3D\u540D",marked:"\u5DF2\u6A19\u8A18",unmarked:"\u672A\u6A19\u8A18",accepted:"\u5DF2\u63A5\u53D7",rejected:"\u5DF2\u62D2\u7D55",cancelled:"\u5DF2\u53D6\u6D88",completed:"\u5DF2\u5B8C\u6210",none:"\u7121",edit:"\u7DE8\u8F2F",delete:"\u522A\u9664",replyPlaceholder:"\u56DE\u8986",reply:"\u5132\u5B58",confirm:"\u5132\u5B58"},pageModePanel$1={displayMode:"\u95B1\u8B80\u6A21\u5F0F",vertical:"\u5782\u76F4\u6EFE\u52D5",horizontal:"\u6C34\u5E73\u6372\u52D5",splitView:"\u5206\u5272\u756B\u9762\u8996\u5716",singlePage:"\u55AE\u9801",twoPages:"\u96D9\u9801",coverMode:"\u5C01\u9762\u6A21\u5F0F",themes:"\u4E3B\u984C"},stampPanel$1={standard:"\u6A19\u6E96\u5716\u7AE0",dynamic:"\u52D5\u614B\u5716\u7AE0",custom:"\u81EA\u8A02\u5716\u7AE0",blank:"\u8ACB\u5EFA\u7ACB\u5716\u7AE0",create:"\u5275\u5EFA\u5716\u7AE0"},linkPanel$1={linkTo:"\u9023\u7D50\u5230",url:"\u8D85\u9023\u7D50",goToPages:"\u8DF3\u5230\u9801\u9762",email:"\u96FB\u5B50\u90F5\u4EF6\u4FE1\u7BB1",go:"\u524D\u5F80"},rightPanel$1={general:"\u4E00\u822C",name:"\u540D\u7A31",formField:"\u8868\u683C\u6B04\u4F4D",visible:"\u53EF\u898B",hidden:"\u96B1\u85CF",properties:"\u5C6C\u6027",requried:"\u5FC5\u586B",differentNameError:"\u8A72\u540D\u7A31\u5DF2\u5B58\u5728",buttonText:"\u6309\u9215\u6587\u5B57",appearance:"\u5916\u89C0",backgroundColor:"\u80CC\u666F\u8272",preferences:"\u9078\u9805",alignment:"\u6587\u5B57\u5C0D\u9F4A",left:"\u5DE6\u5C0D\u9F4A",center:"\u5C45\u4E2D",right:"\u53F3\u5C0D\u9F4A",defaultValue:"\u9810\u8A2D\u503C",multiLine:"\u591A\u884C",buttonStyle:"\u6309\u9215\u6A23\u5F0F",check:"\u52FE\u9078",circle:"\u5713\u5F62",cross:"\u5206\u5C94",diamond:"\u83F1\u5F62",square:"\u65B9\u5F62",star:"\u661F\u5F62",defaultChecked:"\u9810\u8A2D\u70BA\u5DF2\u9078\u53D6",item:"\u5C08\u6848",option:"\u9078\u9805",itemList:"\u9805\u76EE\u6E05\u55AE",selectAction:"\u9078\u64C7\u52D5\u4F5C",none:"\u7121",goPage:"\u8DF3\u5230\u9801\u9762",openLink:"\u6253\u958B\u7DB2\u9801\u9023\u7D50",addUrl:"\u6DFB\u52A0\u9023\u7D50",addPage:"\u52A0\u5165\u9801\u9762",radioBtnTip1:"\u8B66\u544A\uFF1A\u7D44\u4E2D\u53EA\u6709\u4E00\u500B\u6309\u9215\u3002\u81F3\u5C11\u9700\u89812\u500B\u6309\u9215\u3002",radioBtnTip2:"\u63D0\u793A\uFF1A\u82E5\u8981\u5EFA\u7ACB\u4E00\u7D44\u4E92\u65A5\u7684\u55AE\u9078\u6309\u9215\uFF08\u5373\u4E00\u6B21\u53EA\u80FD\u9078\u64C7\u4E00\u500B\uFF09\uFF0C\u8ACB\u78BA\u4FDD\u5404\u7DB2\u57DF\u76F8\u540C\u3002",listBoxTip:"\u5F9E\u9805\u76EE\u6E05\u55AE\u4E2D\u9078\u64C7\u4E00\u500B\u9078\u9805\uFF0C\u4F5C\u70BA\u9810\u8A2D\u9078\u9805\u3002"},prevent$1={title:"\u4E0D\u53EF\u7528",standalone:"\u79BB\u7EBF\u7248",description:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u5185\u5BB9\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u5185\u5BB9\u7F16\u8F91\u3002",description1:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u6587\u6863\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u6587\u6863\u7F16\u8F91\u3002"},passwordDialog$1={enterPwd:"\u8F38\u5165\u5BC6\u78BC\u67E5\u770B\u6587\u6A94",enterPwdPlaceholder:"\u8ACB\u8F38\u5165\u5BC6\u78BC",wrongPwd:"\u5BC6\u78BC\u932F\u8AA4",long:"\u5BC6\u78BC\u904E\u9577\uFF0C\u6700\u591A\u8F38\u516520\u500B\u5B57\u7B26",sameWord:"\u6587\u4EF6\u5BC6\u78BC\u548C\u6B0A\u9650\u5BC6\u78BC\u4E0D\u80FD\u76F8\u540C",encryptPdf:"\u52A0\u5BC6",encrypt:"\u52A0\u5BC6",supportTip:"\u652F\u6301\u5B57\uFF1A\u6578\u5B57\u3001\u5B57\u6BCD\u3001{'@'}\u3001$\u3001!\u3001%\u3001?\u3001&",removePwdSuccess:"\u5BC6\u78BC\u5DF2\u79FB\u9664\uFF01",removePwdFailure:"\u5BC6\u78BC\u79FB\u9664\u5931\u6557\uFF01",setPwdSuccess:"\u5BC6\u78BC\u8A2D\u5B9A\u6210\u529F\uFF01\u4E0B\u8F09\u6587\u4EF6\u5F8C\u751F\u6548\u3002",setPwdFailure:"\u5BC6\u78BC\u8A2D\u5B9A\u5931\u6557\uFF01",documentPassword:"\u6587\u4EF6\u5BC6\u78BC",permissionPassword:"\u6B0A\u9650\u5BC6\u78BC",disablePrinting:"\u7981\u6B62\u5217\u5370",disableCopying:"\u7981\u6B62\u8907\u88FD",disableEdit:"\u505C\u7528\u8A3B\u91CB\u3001\u8868\u55AE\u3001\u6E2C\u91CF\u3001\u6A19\u8A18\u5BC6\u6587\uFF08\u65B0\u589E\u3001\u522A\u9664\u548C\u4FEE\u6539\uFF09",note:["\u6CE8\u610F\uFF1A","- \u6240\u6709\u8B8A\u66F4\u5C07\u5728\u4E0B\u8F09\u5F8C\u751F\u6548\u3002","- \u5728\u4E0B\u8F09\u6587\u4EF6\u4E4B\u524D\uFF0C\u60A8\u53EF\u4EE5\u96A8\u6642\u91CD\u8A2D\u5BC6\u78BC\u3002"],enterPermissionPwd:"\u8ACB\u8F38\u5165\u6587\u4EF6\u5BC6\u78BC"},ok$1="\u78BA\u5B9A",cancel$1="\u53D6\u6D88",signatures$1={tip:"\u8ACB\u5148\u5EFA\u7ACB\u4E00\u500B\u7C3D\u7AE0\u57DF\uFF0C\u7136\u5F8C\u518D\u9078\u64C7\u7C3D\u7AE0\u985E\u578B",danger:"\u8ACB\u9078\u53D6\u4E00\u500B\u7A7A\u7C3D\u7AE0\u57DF\u9032\u884C\u7C3D\u7AE0\u3002",trackpad:"\u89F8\u63A7\u677F",lineWidth:"\u5BEC\u5EA6",keyboard:"\u9375\u76E4",signHere:"\u8ACB\u5728\u6B64\u8F38\u5165\u7C3D\u540D",image:"\u5716\u7247",selectFile:"\u9078\u64C7\u6587\u4EF6",none:"\u7121",clear:"\u6E05\u9664",save:"\u5132\u5B58",uploadError:"\u8ACB\u4E0A\u50B31M\u4EE5\u5167\u7684\u5716\u7247",selectTypeDialog:{selectType:"\u8ACB\u9078\u64C7\u7C3D\u540D\u985E\u578B",signWithElectronic:"\u96FB\u5B50\u7C3D\u540D",signWithElectronicDesc:"\u900F\u904E\u7E6A\u88FD\u3001\u5716\u7247\u3001\u6216\u8F38\u5165\u6587\u5B57\u9032\u884C\u6587\u4EF6\u7C3D\u7F72\u3002",signWithDigital:"\u6578\u4F4D\u7C3D\u7AE0\uFF08\u6578\u4F4D\u6191\u8B49\u7C3D\u7F72\uFF09",signWithDigitalDesc:"\u900F\u904E\u5EFA\u7ACB\u6216\u4E0A\u50B3\u5E36\u6709\u552F\u4E00\u6578\u4F4DID\u7684\u6578\u4F4D\u6191\u8B49\u4F86\u7C3D\u7F72\u6587\u4EF6\u3002",startSigning:"\u958B\u59CB\u7C3D\u540D"},detailsDialog:{title:"\u6578\u4F4D\u7C3D\u540D\u8A73\u7D30\u4FE1\u606F",signBy:"\u7C3D\u540D\u6709\u6548\uFF0C\u7C3D\u7F72\u8005\u70BA",signingTime:"\u7C3D\u7D04\u6642\u9593",validitySummary:"\u6709\u6548\u6027\u5C0F\u7D50",validIdentity:"\u7C3D\u540D\u8005\u7684\u8EAB\u5206\u6709\u6548\u3002",invalidIdentity:"\u7C3D\u540D\u8005\u7684\u8EAB\u5206\u7121\u6548\u3002",unknownIdentity:"\u7C3D\u7AE0\u6709\u6548\u6027\u672A\u77E5\uFF0C\u56E0\u70BA\u5B83\u672A\u5305\u542B\u5728\u60A8\u7684\u53D7\u4FE1\u4EFB\u6191\u8B49\u6E05\u55AE\u4E2D\uFF0C\u800C\u4E14\u5B83\u7684\u7236\u6191\u8B49\u90FD\u4E0D\u662F\u53D7\u4FE1\u4EFB\u6191\u8B49\u3002",expiredCertificate:"\u8A72\u6587\u4EF6\u662F\u7528\u5DF2\u904E\u671F\u7684\u6191\u8B49\u7C3D\u7F72\u7684\u3002\u5982\u679C\u60A8\u6700\u8FD1\u53D6\u5F97\u4E86\u6B64\u6587\u4EF6\uFF0C\u5247\u8A72\u6587\u4EF6\u53EF\u80FD\u4E0D\u771F\u5BE6\u3002",invalidSignature:"\u7C3D\u540D\u7121\u6548\u3002",validSignature:"\u7C3D\u540D\u6709\u6548\u3002",notModifiedDoc:"\u81EA\u5957\u7528\u6B64\u7C3D\u540D\u4EE5\u4F86\uFF0C\u6587\u4EF6\u672A\u88AB\u4FEE\u6539\u3002",alteredDoc:"\u81EA\u5F9E\u76EE\u524D\u4F7F\u7528\u8005\u7C3D\u7F72\u6587\u4EF6\u4EE5\u4F86\uFF0C\u8A72\u6587\u4EF6\u5DF2\u88AB\u66F4\u6539\u6216\u640D\u58DE\u3002",viewCertificateDetails:"\u67E5\u770B\u8B49\u66F8\u7D30\u7BC0",unknownSignature:"\u7C3D\u540D\u6709\u6548\u6027\u672A\u77E5\u3002",atLeastOneInvalid:"\u81F3\u5C11\u4E00\u500B\u7C3D\u540D\u7121\u6548\uFF0C\u6587\u4EF6\u53EF\u80FD\u88AB\u7AC4\u6539\u3002",viewAllSignatures:"\u67E5\u770B\u6240\u6709\u7C3D\u540D"},certificateViewerDialog:{title:"\u8B49\u66F8\u67E5\u770B\u7A0B\u5F0F",abstracts:"\u6458\u8981",summary:"\u5C0F\u7D50",issuedTo:"\u9812\u767C\u7D66",issuer:"\u9812\u767C\u8005",validFrom:"\u6709\u6548\u8D77\u59CB\u65E5\u671F",validTo:"\u6709\u6548\u622A\u6B62\u65E5\u671F",intendedUsage:"\u9810\u671F\u7528\u9014",details:"\u8A73\u7D30\u8CC7\u8A0A",version:"\u7248\u672C",algorithm:"\u7C3D\u540D\u6F14\u7B97\u6CD5",subject:"\u4E3B\u984C",serialNumber:"\u5E8F\u865F",certificatePolicy:"\u8B49\u66F8\u7B56\u7565",crlDistributionPoints:"CRL\u5206\u767C\u9EDE",issuerInfoAccess:"\u9812\u767C\u6A5F\u69CB\u8CC7\u8A0A\u8A2A\u554F",issuerKeyIdentifier:"\u9812\u767C\u6A5F\u69CB\u5BC6\u9470\u6A19\u8B58\u7B26",subjectKeyIdentifier:"\u4E3B\u9AD4\u5BC6\u9470\u6A19\u8B58\u7B26",basicConstraints:"\u57FA\u672C\u7D04\u675F",keyUsage:"\u5BC6\u9470\u7528\u6CD5",publicKey:"\u516C\u9470",X509:"X.509",SHA1Digest:"SHA1",MD5Digest:"MD5",trust:"\u4FE1\u4EFB",trustedTo:"\u672C\u8B49\u66F8\u4FE1\u4EFB\u65BC\uFF1A",sign:"\u7C3D\u7F72\u6587\u6A94\u6216\u6578\u64DA",certify:"\u9A57\u8B49\u6587\u6A94",addToTrust:"\u65B0\u589E\u81F3\u53EF\u4FE1\u4EFB\u8B49\u66F8",done:"\u95DC\u9589"},deleteConfirm:"\u78BA\u5B9A\u522A\u9664\u8A72\u5167\u5BB9\uFF1F",addDigitalFileDialog:{title:"\u65B0\u589E\u6578\u4F4D\u8EAB\u5206\u8B49",desc:"\u700F\u89BD\u6578\u4F4D\u8EAB\u5206\u8B49\u6587\u4EF6\u3002\u6578\u4F4D\u8EAB\u5206\u8B49\u53D7\u5BC6\u78BC\u4FDD\u8B77\u3002\u5982\u679C\u4F60\u4E0D\u77E5\u9053\u5BC6\u78BC\uFF0C\u4F60\u5C31\u7121\u6CD5\u53D6\u5F97\u6578\u4F4D\u8EAB\u5206\u8B49\u3002",certificateFile:"\u8B49\u66F8\u6587\u4EF6",uploadFile:"\u4E0A\u50B3\u8B49\u66F8\u6587\u4EF6",upload:"\u700F\u89BD",password:"\u8B49\u66F8\u5BC6\u78BC",enterPassword:"\u8ACB\u8F38\u5165\u8B49\u66F8\u5BC6\u78BC",invalidPassword:"\u5BC6\u78BC\u932F\u8AA4\uFF0C\u8ACB\u91CD\u8A66"},appearanceDialog:{title:"\u65B0\u589E\u6578\u4F4D\u7C3D\u540D",signHere:"\u8ACB\u5728\u6B64\u8F38\u5165\u7C3D\u540D\uFF01",includeText:"\u5305\u542B\u6587\u5B57",name:"\u540D\u7A31",dName:"\u8FA8\u5225\u540D",date:"\u65E5\u671F",ComPDFKitVersion:"ComPDFKit \u7248\u672C",logo:"\u6A19\u8A8C",location:"\u4F4D\u7F6E",reason:"\u539F\u56E0",signReason:"\u7C3D\u7F72\u539F\u56E0",docOwner:"\u6211\u662F\u8A72\u6587\u4EF6\u7684\u4F5C\u8005",approvingDoc:"\u6211\u6B63\u5728\u6279\u51C6\u8A72\u6587\u6A94",reviewedDoc:"\u6211\u5DF2\u5BE9\u95B1\u8A72\u6587\u6A94",labels:"\u6A19\u7C64",text:"\u5B57\u9AD4",type:"\u5B57\u5F62",textAlignment:"\u5C0D\u9F4A\u65B9\u5F0F"},title:"\u65B0\u589E\u96FB\u5B50\u7C3D\u540D",noSignatures:"\u958B\u59CB\u5EFA\u7ACB\u60A8\u7684\u7C3D\u540D\u7BC4\u672C\uFF01",mySignatures:"\u6211\u7684\u7C3D\u540D",createSignature:"\u5EFA\u7ACB\u7C3D\u540D",saveSignature:"\u5132\u5B58\u81F3\u6211\u7684\u7C3D\u540D\u6A21\u677F",dropFile:"\u5C07\u5716\u7247\u62D6\u81F3\u6B64\u8655\uFF0C\u6216",apply:"\u61C9\u7528",full:"\u60A8\u7684\u7C3D\u540D\u7BC4\u672C\u5DF2\u6EFF\uFF0C\u8ACB\u522A\u9664\u5F8C\u518D\u65B0\u589E\u3002"},color$1="\u984F\u8272",opacity$1="\u4E0D\u900F\u660E\u5EA6",font$1="\u5B57\u9AD4",regular$1="\u5E38\u898F",oblique$1="\u659C\u9AD4",bold$1="\u7C97\u9AD4",boldOblique$1="\u7C97\u659C\u9AD4",warning$1="\u6CE8\u610F",colon$1="\uFF1A",compare$2={startCompare:"\u958B\u59CB\u5C0D\u6BD4",exit:"\u9000\u51FA\u5C0D\u6BD4",oldFile:"\u820A\u6587\u4EF6",newFile:"\u65B0\u6587\u4EF6",dropFile:["\u5C07\u6587\u4EF6\u62D6\u5230\u6B64\u8655\uFF0C","\u6216"],chooseOldFile:"\u65B0\u589E\u820A\u6587\u4EF6",chooseNewFile:"\u65B0\u589E\u6587\u4EF6",comingSoon:"\u5C0D\u6BD4\u5373\u5C07\u5B8C\u6210\uFF01",contentComparison:"\u4E26\u6392\u5C0D\u6BD4",compareItems:"\u5C0D\u6BD4\u5167\u5BB9\u9078\u64C7",text:"\u6587\u5B57",images:"\u5716\u7247",colorMark:"\u6A19\u8A18\u984F\u8272",replacedContent:"\u88AB\u66FF\u63DB\u7684\u5167\u5BB9",insertedContent:"\u88AB\u63D2\u5165\u7684\u5167\u5BB9",deletedContent:"\u5DF2\u522A\u9664\u7684\u5167\u5BB9",overlayComparison:"\u758A\u52A0\u5C0D\u6BD4",blendMode:"\u6DF7\u5408\u6A21\u5F0F",normal:"\u666E\u901A",multiply:"\u6B63\u7247\u758A\u5E95",screen:"\u6FFE\u8272",overlay:"\u758A\u52A0",darken:"\u8B8A\u6697",lighten:"\u8B8A\u4EAE",colorDodge:"\u8272\u5F69\u6E1B\u6DE1",colorBurn:"\u984F\u8272\u52A0\u6DF1",hardLight:"\u5F37\u5149",softLight:"\u67D4\u5149",difference:"\u5DEE\u503C",exclusion:"\u6392\u9664",hue:"\u8272\u76F8",saturation:"\u98FD\u548C\u5EA6",colour:"\u984F\u8272",luminosity:"\u660E\u5EA6",return:"\u8FD4\u56DE",compare:"\u958B\u59CB\u5C0D\u6BD4",downloadOptions:"\u7D50\u679C\u6587\u4EF6\u6A23\u5F0F",downloadTwoFiles:"\u5C0D\u6BD4\u7D50\u679C\u5206\u958B\u4FDD\u5B58\uFF0C\u7D50\u679C\u6587\u4EF6\u70BA2\u4EFD",downloadOneFile:"\u5408\u4F75\u5C0D\u6BD4\u7D50\u679C\uFF0C\u7D50\u679C\u6587\u4EF6\u70BA1\u4EFD\u6587\u4EF6",printSetting:"\u5217\u5370\u6587\u4EF6\u9078\u64C7",printOldFile:"\u5217\u5370\u820A\u6587\u4EF6\u7684\u6BD4\u8F03\u7D50\u679C\u6587\u4EF6",printNewFile:"\u5217\u5370\u65B0\u6587\u4EF6\u7684\u6BD4\u8F03\u7D50\u679C\u6587\u4EF6",byComPDFKit:"\u7531ComPDFKit\u63D0\u4F9B\u5C0D\u6BD4"},editorPanel$1={textProp:"\u6587\u5B57\u5C6C\u6027",fontColor:"\u6587\u5B57\u984F\u8272",textStyle:"\u6587\u5B57\u6A23\u5F0F",spacing:"\u9593\u8DDD",characterSpacing:"\u5B57\u9593\u8DDD",lineSpacing:"\u884C\u9593\u8DDD",paragraphSpacing:"\u6BB5\u9593\u8DDD",imageProp:"\u5716\u7247\u5C6C\u6027",rotate:"\u65CB\u8F49",rotateLeft:"\u5DE6\u65CB\u8F49",rotateRight:"\u53F3\u65CB\u8F49",flip:"\u7FFB\u8F49",flipHorizontal:"\u6C34\u5E73\u7FFB\u8F49",flipVertical:"\u5782\u76F4\u7FFB\u8F49",tools:"\u5DE5\u5177",replace:"\u66FF\u63DB",export:"\u532F\u51FA",crop:"\u88C1\u5207",maximum:"\u5716\u7247\u5927\u5C0F\u4E0A\u9650\uFF1A2MB\u3002"},documentEditor$1={save:"\u5132\u5B58",saveAs:"\u53E6\u5B58\u70BA",insert:"\u63D2\u5165",delete:"\u522A\u9664",rotateRight:"\u53F3\u65CB\u8F49",rotateLeft:"\u5DE6\u65CB\u8F49",copy:"\u8907\u88FD",extract:"\u63D0\u53D6",replace:"\u66FF\u63DB",move:"\u79FB\u52D5",selectAll:"\u5168\u9078",dialog:{insertPages:"\u9801\u9762\u7BC4\u570D",blankPage:"\u7A7A\u767D\u9801",customPage:"\u81EA\u8A02\u7A7A\u767D\u9801",fromPdf:"\u5F9E\u5176\u4ED6PDF",selectFile:"\u9078\u64C7\u6587\u4EF6",pageRange:"\u9801\u9762\u7BC4\u570D",allPages:"\u6240\u6709\u9801\u9762",oddPage:"\u5947\u6578\u9801",evenPage:"\u5076\u6578\u9801",customRange:"\u81EA\u8A02\u7BC4\u570D",insertTo:"\u9801\u9762\u63D2\u5165\u4F4D\u7F6E",firstPage:"\u9996\u9801",lastPage:"\u672B\u9801",page:"\u9801\u9762",pageTip:"\u4F8B\uFF1A3, 5-10",before:"\u524D",after:"\u5F8C"},deleteConfirmText:"\u78BA\u8A8D\u8981\u522A\u9664\u6240\u9078\u9801\u9762\u55CE\uFF1F",eachPage:"\u6BCF\u9801\u4F5C\u70BA\u55AE\u4E00\u6587\u4EF6",deleteAfter:"\u64F7\u53D6\u5F8C\u522A\u9664\u9801\u9762",moveTo:"\u79FB\u52D5\u5230",inputPageTip:"\u8F38\u51650~\u6587\u6A94\u6700\u5927\u9801\u78BC\u6578"},paste$1="\u8CBC\u4E0A",properties$1="\u5C6C\u6027",security$1={pwdProtection:"\u5BC6\u78BC\u4FDD\u8B77",encryption:"\u6587\u4EF6\u52A0\u5BC6",decryption:"\u6587\u4EF6\u89E3\u5BC6",redaction:"\u6A19\u8A18\u5BC6\u6587",fillBlack:"\u586B\u5145\u9ED1\u8272",fillWhite:"\u586B\u5145\u767D\u8272",caution:"\u63D0\u793A",enterTip:"\u672C\u6587\u6A94\u4E2D\u5DF2\u88AB\u6A19\u8A18\u7684\u5167\u5BB9\u5C07\u6703\u6C38\u4E45\u522A\u9664\u3002\u8ACB\u78BA\u8A8D\u60A8\u7684\u64CD\u4F5C\u3002",understand:"\u6211\u5DF2\u77E5\u66C9\uFF0C\u958B\u59CB\u4F7F\u7528",applyTip:"\u61C9\u7528\u6A19\u8A18\u5BC6\u6587\u5F8C\uFF0C\u88AB\u6A19\u8A18\u7684\u5167\u5BB9\u5C07\u6703\u6C38\u4E45\u522A\u9664\u3002",exit:"\u9000\u51FA",apply:"\u61C9\u7528",note:"\u63D0\u793A",exitTip:"\u60A8\u7684\u6A19\u8A18\u5167\u5BB9\u5C1A\u672A\u751F\u6548\u3002\u78BA\u5B9A\u8981\u9000\u51FA\u55CE\uFF1F",exitConfirm:"\u78BA\u8A8D",saveTip:["\u63D0\u793A\uFF1A\u6587\u4EF6\u4E2D\u88AB\u6A19\u8A18\u7684\u5167\u5BB9\u5C07\u6C38\u4E45\u522A\u9664\u4E14\u4E0D\u53EF\u6062\u5FA9\u3002","\u78BA\u5B9A\u522A\u9664\u6240\u6709\u6A19\u8A18\u5167\u5BB9\u4E26\u5132\u5B58\u6587\u4EF6\uFF1F"],save:"\u78BA\u8A8D"},layer$1={show:"\u986F\u793A",hide:"\u96B1\u85CF",lock:"\u9396\u5B9A",unlock:"\u89E3\u9396",lockedTip:"\u76EE\u524D\u5716\u5C64\u5DF2\u9396\u5B9A\u3002\u82E5\u8981\u8B8A\u66F4\u5176\u53EF\u898B\u6027\uFF0C\u8ACB\u5148\u5728\u5716\u5C64\u5C6C\u6027\u4E2D\u5C07\u5176\u89E3\u9396\u3002",ok:"\u597D\u7684",setProperty:"\u8A2D\u5B9A\u5716\u5C64\u5C6C\u6027",layerProperty:"\u5716\u5C64\u5C6C\u6027",layerName:"\u5716\u5C64\u540D\u7A31",enterLayerName:"\u8ACB\u8F38\u5165\u5716\u5C64\u540D\u7A31",defaultSettings:"\u9810\u8A2D\u72C0\u614B",defaultShow:"\u958B\u555F\u6A94\u6848\u6642\u9810\u8A2D\u986F\u793A",defaultHide:"\u958B\u555F\u6A94\u6848\u6642\u9810\u8A2D\u96B1\u85CF",lockLayer:"\u9396\u5B9A\u5716\u5C64",printProperty:"\u5217\u5370\u5C6C\u6027",always:"\u7E3D\u662F",never:"\u5F9E\u4E0D",printVisible:"\u53EF\u898B\u6642\u5217\u5370",exportProperty:"\u5C0E\u51FA\u5C6C\u6027",exportVisible:"\u53EF\u898B\u6642\u532F\u51FA",copyLink:"\u8907\u88FD\u9023\u7D50",technicalDoc:"\u6280\u672F\u6587\u6863"},colorSeparation$1={toggleColor:"\u5207\u63DB\u984F\u8272",notShowTip:"\u8A72\u984F\u8272\u5C07\u4E0D\u6703\u5728\u6587\u4EF6\u4E2D\u986F\u793A",accessOnPc:"\u6B64\u529F\u80FD\u4E0D\u9069\u7528\u65BC\u884C\u52D5\u8A2D\u5099\uFF0C\u8ACB\u5728 PC \u7AEF\u5B58\u53D6\u4EE5\u7372\u5F97\u6700\u4F73\u9AD4\u9A57"},measurement$1={scale:"\u6BD4\u4F8B",length:"\u9577\u5EA6",precision:"\u7CBE\u78BA\u5EA6",angle:"\u89D2\u5EA6",radius:"\u534A\u5F91",perimeter:"\u9031\u9577",area:"\u9762\u7A4D",reply:"\u56DE\u8986",drawingToActual:"\u5716\u7D19\u5C3A\u5BF8: \u771F\u5BE6\u5C3A\u5BF8",settingScale:"\u6E2C\u91CF\u6BD4\u4F8B",pt:"\u9EDE",in:"\u82F1\u540B",mm:"\u6BEB\u7C73",cm:"\u516C\u5206",m:"\u7C73",km:"\u9577\u5EA6",ft:"\u82F1\u5C3A",yd:"\u78BC",mi:"\u82F1\u54E9",measurementSettings:"\u6E2C\u91CF\u8A2D\u5B9A",scaleError:"\u6BD4\u4F8B\u5C3A\u9700\u5927\u65BC0\u3002",showCaption:"\u6587\u5B57\u5C55\u793A",done:"\u78BA\u8A8D"},measurementPanel$1={appearance:"\u5916\u89C0\u8A2D\u5B9A",lineColor:"\u7DDA\u689D\u984F\u8272",fillColor:"\u586B\u5145\u984F\u8272",lineWidth:"\u7DDA\u5BEC",lineStyle:"\u7DDA\u578B",start:"\u7DDA\u982D",end:"\u7DDA\u5C3E",fontColor:"\u5B57\u9AD4\u984F\u8272",fontStyle:"\u5B57\u9AD4\u6A23\u5F0F",note:"\u6279\u8A3B"},freetextPanel$1={title:"\u6587\u5B57",fontStyle:"\u5B57\u9AD4\u6A23\u5F0F",fontColor:"\u5B57\u9AD4\u984F\u8272",borderWidth:"\u908A\u6846\u5BEC\u5EA6",borderColor:"\u908A\u6846\u984F\u8272",textBorderOpacity:"\u908A\u6846\u548C\u6587\u5B57\u4E0D\u900F\u660E\u5EA6",fillColor:"\u586B\u6EFF\u984F\u8272",fillOpacity:"\u586B\u6EFF\u4E0D\u900F\u660E\u5EA6"},customeStamp$1={title:"\u81EA\u8A02\u5716\u7AE0",preview:"\u9810\u89BD",addText:"\u65B0\u589E\u6587\u5B57",addShape:"\u6DFB\u52A0\u5F62\u72C0",addDateTime:"\u65B0\u589E\u65E5\u671F\u548C\u6642\u9593",properties:"\u5C6C\u6027",clear:"\u6E05\u9664",cancel:"\u53D6\u6D88",ok:"\u78BA\u5B9A",font:"\u5B57\u9AD4",fontColor:"\u5B57\u9AD4\u984F\u8272",fontStyle:"\u5B57\u9AD4\u6A23\u5F0F",fontSize:"\u865F\u78BC",alignment:"\u6587\u5B57\u5C0D\u9F4A",fillColor:"\u586B\u6EFF\u984F\u8272",opacity:"\u4E0D\u900F\u660E\u5EA6",shape:"\u5F62\u72C0",borderColor:"\u908A\u6846\u984F\u8272",borderWidth:"\u908A\u6846\u5BEC\u5EA6",borderOpacity:"\u908A\u6846\u4E0D\u900F\u660E\u5EA6",fillOpacity:"\u586B\u6EFF\u4E0D\u900F\u660E\u5EA6",dateTime:"\u65E5\u671F\u548C\u6642\u9593",createHere:"\u5728\u6B64\u5275\u5EFA"},zhTW={header:header$1,nextPage:nextPage$2,previousPage:previousPage$2,loading:loading$1,upload:upload$1,exit:exit$1,leftPanel:leftPanel$1,pageModePanel:pageModePanel$1,stampPanel:stampPanel$1,linkPanel:linkPanel$1,rightPanel:rightPanel$1,prevent:prevent$1,passwordDialog:passwordDialog$1,ok:ok$1,cancel:cancel$1,continue:"\u7E7C\u7E8C",signatures:signatures$1,color:color$1,opacity:opacity$1,font:font$1,regular:regular$1,oblique:oblique$1,bold:bold$1,boldOblique:boldOblique$1,delete:"\u5220\u9664",warning:warning$1,colon:colon$1,compare:compare$2,editorPanel:editorPanel$1,documentEditor:documentEditor$1,paste:paste$1,properties:properties$1,security:security$1,layer:layer$1,colorSeparation:colorSeparation$1,measurement:measurement$1,measurementPanel:measurementPanel$1,freetextPanel:freetextPanel$1,customeStamp:customeStamp$1},header={leftPanel:"Panneau gauche",fullScreen:"Plein \xE9cran",pan:"Po\xEAle",cropPage:"Couper",zoomIn:"Zoomer",zoomOut:"Zoom arri\xE8re",light:"Lumi\xE8re",dark:"Sombre",lightMode:"Mode lumi\xE8re",darkMode:"Mode sombre",viewer:"Visionneuse",annotations:"Annotations",forms:"Formulaires",signatures:"Signature",security:"S\xE9curit\xE9",compare:"Comparer des documents",editor:"\xC9diteur de contenu",document:"\xC9diteur de documents",separation:"S\xE9paration des couleurs",measurement:"Mesures",note:"Note",highlight:"Souligner",underline:"Souligner",strikeout:"Barr\xE9",squiggly:"Onduleux",ink:"Encre",circle:"Cercle",square:"Carr\xE9",arrow:"Fl\xE8che",line:"Doubler",freetext:"Texte libre",stamp:"Timbre",image:"Image",link:"Lien",textField:"Champ de texte",checkbox:"Case \xE0 cocher",radioButton:"Bouton radio",listBox:"Zone de liste",comboButton:"Bouton combin\xE9",button:"Bouton poussoir",openFile:"Ouvrir le fichier",search:"Recherche",rightPanel:"Panneau droit",viewSetting:"Afficher les param\xE8tres",download:"T\xE9l\xE9charger",flatten:"Enregistrer au format PDF aplati",print:"Imprimer",settings:{settings:"Param\xE8tres",author:"Auteur",annotator:"Annotateur",language:"Langue",highlightLink:"Mettre en surbrillance le lien",highlightForm:"Formulaire de surbrillance",fillConsecutively:"Remplir cons\xE9cutivement",creationInfo:"Informations sur la cr\xE9ation",version:"Version"},addText:"Ajouter du texte",addImage:"Ajouter une image",undo:"D\xE9faire",redo:"Refaire",createSignField:"Cr\xE9er/D\xE9finir un champ de signature",addDigitalSign:"Ajouter une signature num\xE9rique",addElectronicSign:"Ajouter une signature \xE9lectronique",verifyDigitalSign:"V\xE9rifier la signature num\xE9rique",measureLine:"Doubler",measureMultiline:"Multiligne",measurePolygon:"Polygone",measureRectangle:"Rectangle",measureCircle:"Cercle"},nextPage$1="Suivant",previousPage$1="Pr\xE9c\xE9dent",loading="Chargement",upload="T\xE9l\xE9charger",exit="Sortie",leftPanel={thumbnails:"Miniatures",outlines:"Grandes lignes",noOutlines:"Aucun contour",layers:"Annotations",noLayers:"Aucune annotation",menu:"Importer des annotations",showAll:"Exporter les annotations",hideAll:"Calques",restoreSettings:"Pas de calques",exportLayers:"Menu",layerProperty:"Afficher tout",exportLayer:"Masquer tout",annotations:"Restaurer les param\xE8tres par d\xE9faut",noAnnotations:"Exporter des calques de fichiers",importAnnotations:"Propri\xE9t\xE9 de calque",exportAnnotations:"Exporter ce calque",search:"Recherche",searchPdf:"Rechercher un PDF",page:"Page",whichPage:["Page",""],previousPhrase:"Trouver l'occurrence pr\xE9c\xE9dente de la phrase",nextPhrase:"Trouver l'occurrence suivante de la phrase",results:"R\xE9sultats",noResults:"Aucun r\xE9sultat",signature:"Signature",signatureList:"Liste de signatures num\xE9riques",signatureDetails:"D\xE9tails de la signature",certificationDetails:"D\xE9tails des certifications",noSignatures:"Aucune signature",marked:"Marqu\xE9",unmarked:"Non marqu\xE9",accepted:"Accept\xE9",rejected:"Rejet\xE9",cancelled:"Annul\xE9",completed:"Compl\xE9t\xE9",none:"Aucun",edit:"Modifier",delete:"Supprimer",replyPlaceholder:"R\xE9pondez ou ajoutez des id\xE9es",reply:"R\xE9pondre",confirm:"Confirmer"},pageModePanel={displayMode:"Mode d'affichage",vertical:"D\xE9filement vertical",horizontal:"D\xE9filement horizontal",splitView:"Rouleau",singlePage:"Page unique",twoPages:"Deux pages",coverMode:"Mode couverture",themes:"Th\xE8mes"},stampPanel={standard:"Standard",dynamic:"Dynamique",custom:"Coutume",blank:"Cr\xE9er ici",create:"Cr\xE9er"},linkPanel={linkTo:"Lien vers",url:"URL",goToPages:"Aller aux pages",email:"E-mail",go:"Aller"},rightPanel={general:"G\xE9n\xE9ral",name:"Nom",formField:"Champ de formulaire",visible:"Visible",hidden:"Cach\xE9",properties:"Propri\xE9t\xE9s",requried:"Obligatoire",differentNameError:"Veuillez choisir un autre nom.",buttonText:"Texte du bouton",appearance:"Apparence",backgroundColor:"Couleur d'arri\xE8re-plan",preferences:"Pr\xE9f\xE9rences",alignment:"Alignement",left:"Gauche",center:"Centre",right:"Droite",defaultValue:"Valeur par d\xE9faut",multiLine:"Multiligne",buttonStyle:"Style de bouton",check:"V\xE9rifier",circle:"Cercle",cross:"Croix",diamond:"Diamant",square:"Carr\xE9",star:"\xC9toile",defaultChecked:"Le bouton est coch\xE9 par d\xE9faut",item:"Article",option:"Liste d'articles",itemList:"Article",selectAction:"S\xE9lectionnez une action",none:"Aucun",goPage:"Aller aux pages",openLink:"Ouvrir un lien Web",addUrl:"Ajouter une URL",addPage:"Ajouter une page",radioBtnTip1:"1 bouton en groupe. Au moins 2 boutons n\xE9cessaires.",radioBtnTip2:"Pour cr\xE9er un ensemble de boutons radio mutuellement exclusifs (c'est-\xE0-dire o\xF9 un seul peut \xEAtre s\xE9lectionn\xE9 \xE0 la fois), veuillez donner le m\xEAme nom aux champs.",listBoxTip:"S\xE9lectionnez un \xE9l\xE9ment dans la liste des \xE9l\xE9ments pour en faire l'option par d\xE9faut."},prevent={title:"\u4E0D\u53EF\u7528",standalone:"\u79BB\u7EBF\u7248",description:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u5185\u5BB9\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u5185\u5BB9\u7F16\u8F91\u3002",description1:"\u5728\u7EBF\u7248\u4E0D\u652F\u6301\u6587\u6863\u7F16\u8F91\uFF0C\u8BF7\u5207\u6362\u5230\u79BB\u7EBF\u7248\uFF08Standalone\uFF09\u6A21\u5F0F\u4F7F\u7528\u6587\u6863\u7F16\u8F91\u3002"},passwordDialog={enterPwd:"Entrez le mot de passe pour afficher le document",enterPwdPlaceholder:"Veuillez entrer le mot de passe",wrongPwd:"Mauvais mot de passe",long:"Le mot de passe est trop long, maximum 20 caract\xE8res.",sameWord:"Le mot de passe du document et le mot de passe d'autorisation ne peuvent pas \xEAtre identiques",encryptPdf:"Cryptez votre PDF",encrypt:"Chiffrer",supportTip:"Prise en charge: chiffres, lettres, {'@'}, $, !, %, ?, &",removePwdSuccess:"Mot de passe supprim\xE9 avec succ\xE8s!",removePwdFailure:"\xC9chec de la suppression du mot de passe.",setPwdSuccess:"Mot de passe d\xE9fini avec succ\xE8s\xA0! T\xE9l\xE9chargez le fichier pour prendre effet.",setPwdFailure:"\xC9chec de la d\xE9finition des mots de passe pour ce document.",documentPassword:"Mot de passe du document",permissionPassword:"Mot de passe d'autorisation",disablePrinting:"D\xE9sactiver l'impression",disableCopying:"D\xE9sactiver la copie",disableEdit:"D\xE9sactiver l'annotation, le formulaire, la mesure, la r\xE9daction (ajouter, supprimer et modifier)",note:["Note:","- Toutes les modifications prendront effet apr\xE8s le t\xE9l\xE9chargement.","- Vous pouvez r\xE9initialiser votre mot de passe \xE0 tout moment avant de t\xE9l\xE9charger."],enterPermissionPwd:"Entrez le mot de passe d'autorisation"},ok="D'ACCORD",cancel="Annuler",signatures={tip:"Veuillez d'abord cr\xE9er un champ de signature, puis s\xE9lectionner le type de signature.",danger:"Veuillez s\xE9lectionner un champ de signature vide pour signer.",trackpad:"Pav\xE9 tactile",lineWidth:"Largeur de ligne",keyboard:"Clavier",signHere:"Signez ici",image:"Image",selectFile:"S\xE9lectionnez un fichier",none:"Aucun",clear:"Clair",save:"Sauvegarder",uploadError:"Veuillez t\xE9l\xE9charger des images de moins de 1 Mo",selectTypeDialog:{selectType:"S\xE9lectionnez le type de signature",signWithElectronic:"Signer avec des signatures \xE9lectroniques",signWithElectronicDesc:"Dessinez, saisissez ou t\xE9l\xE9chargez des signatures d'image pour signer des fichiers.",signWithDigital:"Signer avec des signatures num\xE9riques",signWithDigitalDesc:"Cr\xE9ez ou t\xE9l\xE9chargez un certificat num\xE9rique avec un identifiant num\xE9rique unique pour signer des fichiers.",startSigning:"Commencez \xE0 signer"},detailsDialog:{title:"D\xE9tails de la signature num\xE9rique",signBy:"Signature valide, sign\xE9e par",signingTime:"Heure de signature",validitySummary:"R\xE9sum\xE9 de validit\xE9",validIdentity:"L'identit\xE9 du signataire est valide.",invalidIdentity:"L'identit\xE9 du signataire n'est pas valide.",unknownIdentity:"La validit\xE9 de la signature est inconnue car elle n'a pas \xE9t\xE9 incluse dans votre liste de certificats de confiance et aucun de ses certificats parents n'est des certificats de confiance.",expiredCertificate:"Le fichier a \xE9t\xE9 sign\xE9 avec un certificat qui a expir\xE9. Si vous avez acquis ce fichier r\xE9cemment, il se peut qu'il ne soit pas authentique.",invalidSignature:"La signature est valide.",validSignature:"La signature n'est pas valide.",notModifiedDoc:"Le document n'a pas \xE9t\xE9 modifi\xE9 depuis l'apposition de cette signature.",alteredDoc:"Le document a \xE9t\xE9 modifi\xE9 ou corrompu depuis sa signature par l'utilisateur actuel.",viewCertificateDetails:"Afficher les d\xE9tails du certificat",unknownSignature:"La validit\xE9 de la signature est inconnue.",atLeastOneInvalid:"Au moins une signature n'est pas valide.",viewAllSignatures:"Afficher toutes les signatures"},certificateViewerDialog:{title:"Visionneuse de certificats",abstracts:"R\xE9sum\xE9s",summary:"R\xE9sum\xE9",issuedTo:"D\xE9livr\xE9 \xE0:",issuer:"\xC9metteur:",validFrom:"Valable \xE0 partir de:",validTo:"Valable jusqu'\xE0:",intendedUsage:"Utilisation pr\xE9vue:",details:"D\xE9tails",version:"Version",algorithm:"Algorithme",subject:"Sujet",serialNumber:"Num\xE9ro de s\xE9rie",certificatePolicy:"Politique de certification:",crlDistributionPoints:"Points de distribution des listes de r\xE9vocation de certificats:",issuerInfoAccess:"Acc\xE8s aux informations sur l'\xE9metteur:",issuerKeyIdentifier:"Identifiant cl\xE9 de l'\xE9metteur:",subjectKeyIdentifier:"Identifiant cl\xE9 du sujet:",basicConstraints:"Contraintes de base:",keyUsage:"Utilisation cl\xE9:",publicKey:"Cl\xE9 publique:",X509:"Donn\xE9es X.509:",SHA1Digest:"R\xE9sum\xE9 SHA1:",MD5Digest:"R\xE9sum\xE9 MD5:",trust:"Confiance",trustedTo:"Ce certificat est fiable pour:",sign:"Signer un document ou des donn\xE9es",certify:"Certifier le document",addToTrust:"Ajouter aux certificats de confiance",done:"Fait"},deleteConfirm:"\xCAtes-vous s\xFBr de le supprimer?",addDigitalFileDialog:{title:"Ajouter une identification num\xE9rique",desc:"Parcourez un fichier d'identification num\xE9rique. Les identifiants num\xE9riques sont prot\xE9g\xE9s par mot de passe. Si vous ne connaissez pas le mot de passe, vous ne pouvez pas obtenir d'identification num\xE9rique.",certificateFile:"Fichier de certificat",uploadFile:"T\xE9l\xE9charger le fichier de certificat",upload:"T\xE9l\xE9charger",password:"Mot de passe",enterPassword:"Entrez le mot de passe du fichier de certificat",invalidPassword:"Mot de passe invalide"},appearanceDialog:{title:"Ajouter une signature num\xE9rique",signHere:"Signez ici !",includeText:"Inclure du texte",name:"Nom",dName:"Nom distinctif",date:"Date",ComPDFKitVersion:"Version ComPDFKit",logo:"Logo",location:"Emplacement",reason:"Raison",signReason:"Raison",docOwner:"Je suis le propri\xE9taire du document",approvingDoc:"J'approuve le document",reviewedDoc:"J'ai examin\xE9 ce document",labels:"\xC9tiquettes",text:"Texte",type:"Taper",textAlignment:"Alignement du texte"},title:"Ajouter une signature \xE9lectronique",noSignatures:"Commencez \xE0 cr\xE9er votre mod\xE8le de signature\xA0!",mySignatures:"Mes signatures",createSignature:"Cr\xE9er des signatures",saveSignature:"Enregistrer dans Mes mod\xE8les de signature.",dropFile:"D\xE9posez l'image ici ou",apply:"Appliquer",full:"Vos mod\xE8les de signature sont pleins. Veuillez en supprimer quelques-uns pour en cr\xE9er de nouveaux."},color="Couleur",opacity="Opacit\xE9",font="Fonte",regular="R\xE9gulier",oblique="Oblique",bold="Audacieux",boldOblique="Oblique gras",warning="Avertissement",colon="\uFF1A",compare$1={startCompare:"Commencez \xE0 comparer",exit:"Sortie",oldFile:"Ancien fichier",newFile:"Nouveau fichier",dropFile:["D\xE9posez un fichier PDF ici","ou"],chooseOldFile:"Choisissez votre ancien fichier",chooseNewFile:"Choisissez votre nouveau fichier",comingSoon:"Les r\xE9sultats de la comparaison arrivent bient\xF4t\xA0!",contentComparison:"Comparaison de contenu",compareItems:"Comparer les articles",text:"Texte",images:"Images",colorMark:"Couleur pour marquer les diff\xE9rences",replacedContent:"Contenu remplac\xE9",insertedContent:"Contenu ins\xE9r\xE9",deletedContent:"Contenu supprim\xE9",overlayComparison:"Comparaison de superposition",blendMode:"Mode de fusion",normal:"Normale",multiply:"Multiplier",screen:"\xC9cran",overlay:"Recouvrir",darken:"Assombrir",lighten:"All\xE9ger",colorDodge:"CouleurDodge",colorBurn:"CouleurBurn",hardLight:"Lumi\xE8re dure",softLight:"Lumi\xE8re douce",difference:"Diff\xE9rence",exclusion:"Exclusion",hue:"Teinte",saturation:"Saturation",colour:"Couleur",luminosity:"Luminosit\xE9",return:"Retour",compare:"Comparer",downloadOptions:"S\xE9lectionnez une option de sortie",downloadTwoFiles:"Enregistrer et t\xE9l\xE9charger s\xE9par\xE9ment",downloadOneFile:"Fusionner en un seul fichier",printSetting:"Param\xE8tres d'impression",printOldFile:"Imprimer le r\xE9sultat de la comparaison de l'ancien fichier",printNewFile:"Imprimer le r\xE9sultat de la comparaison du nouveau fichier",byComPDFKit:"R\xE9sultats de comparaison par ComPDFKit"},editorPanel={textProp:"Propri\xE9t\xE9s du texte",fontColor:"Couleur de police",textStyle:"Style de texte",spacing:"Espacement",characterSpacing:"Espacement des caract\xE8res",lineSpacing:"Espacement des lignes",paragraphSpacing:"Espacement des paragraphes",imageProp:"Propri\xE9t\xE9s de l'image",rotate:"Tourner",rotateLeft:"Faire pivoter \xE0 gauche",rotateRight:"Faire pivoter \xE0 droite",flip:"Retourner",flipHorizontal:"Retourner horizontalement",flipVertical:"Retourner verticalement",tools:"Outils",replace:"Remplacer",export:"Exporter",crop:"Recadrer",maximum:"Taille maximale de l'image de t\xE9l\xE9chargement: 2 Mo."},documentEditor={save:"Sauvegarder",saveAs:"Enregistrer sous...",insert:"Ins\xE9rer",delete:"Supprimer",rotateRight:"Faire pivoter \xE0 droite",rotateLeft:"Faire pivoter \xE0 gauche",copy:"Copie",extract:"Extrait",replace:"Remplacer",move:"Se d\xE9placer",selectAll:"S\xE9lectionner tout",dialog:{insertPages:"Ins\xE9rer des pages",blankPage:"Page blanche",customPage:"Page vierge personnalis\xE9e",fromPdf:"\xC0 partir du PDF",selectFile:"S\xE9lectionnez un fichier",pageRange:"Plage de pages",allPages:"Toutes les pages",oddPage:"Pages impaires uniquement",evenPage:"Pages paires uniquement",customRange:"Gamme personnalis\xE9e",insertTo:"Ins\xE9rer dans",firstPage:"Premi\xE8re page",lastPage:"Derni\xE8re page",page:"Page",pageTip:"par ex. 3, 5-10",before:"Avant",after:"Apr\xE8s"},deleteConfirmText:"Voulez-vous supprimer la page",eachPage:"Chaque page dans un fichier s\xE9par\xE9",deleteAfter:"Supprimer la page apr\xE8s l'extraction",moveTo:"D\xE9placer apr\xE8s la page:",inputPageTip:"Entrez 0 au num\xE9ro de page maximum"},paste="Coller",properties="Propri\xE9t\xE9s",security={pwdProtection:"Protection par mot de passe",encryption:"Cryptage",decryption:"D\xE9cryptage",redaction:"R\xE9daction",fillBlack:"Remplir en noir",fillWhite:"Remplir en blanc",caution:"Prudence",enterTip:"Le contenu expurg\xE9 sera d\xE9finitivement supprim\xE9 de ce document. Veuillez confirmer votre action.",understand:"Comprendre et d\xE9marrer",applyTip:"Apr\xE8s avoir appliqu\xE9 les expurgations, le contenu expurg\xE9 sera d\xE9finitivement supprim\xE9.",exit:"Sortie",apply:"Appliquer",note:"Note",exitTip:"Vos suppressions n'ont pas \xE9t\xE9 appliqu\xE9es. Etes-vous s\xFBr de sortir ?",exitConfirm:"Sortie",saveTip:["Tout le contenu expurg\xE9 de ce document sera d\xE9finitivement supprim\xE9 et ne pourra pas \xEAtre r\xE9cup\xE9r\xE9.","\xCAtes-vous s\xFBr de vouloir les expurger et enregistrer le fichier?"],save:"Sauvegarder"},layer={show:"Montrer",hide:"Cacher",lock:"Verrouillage",unlock:"Ouvrir",lockedTip:"Le calque actuel est verrouill\xE9. Pour modifier sa visibilit\xE9, veuillez d'abord le d\xE9verrouiller dans les propri\xE9t\xE9s du calque.",ok:"D'ACCORD",setProperty:"D\xE9finir la propri\xE9t\xE9 du calque",layerProperty:"Propri\xE9t\xE9 de calque",layerName:"Nom du calque",enterLayerName:"Veuillez entrer le nom du calque",defaultSettings:"Param\xE8tres par d\xE9faut",defaultShow:"Affichage par d\xE9faut lors de l'ouverture de fichiers",defaultHide:"Masquer par d\xE9faut lors de l'ouverture de fichiers",lockLayer:"Calque de verrouillage",printProperty:"Imprimer la propri\xE9t\xE9",always:"Toujours",never:"Jamais",printVisible:"Imprimer lorsqu'il est visible",exportProperty:"Propri\xE9t\xE9 d'exportation",exportVisible:"Exporter lorsqu'il est visible",copyLink:"Copier le lien",technicalDoc:"\u6280\u672F\u6587\u6863"},colorSeparation={toggleColor:"Changer les couleurs",notShowTip:"La couleur ne sera pas affich\xE9e dans le document",accessOnPc:"Cette fonctionnalit\xE9 n'est pas disponible pour mobile, veuillez y acc\xE9der sur PC pour la meilleure exp\xE9rience"},measurement={scale:"\xC9chelle",length:"Longueur",precision:"Pr\xE9cision",angle:"Angle",radius:"Rayon",perimeter:"P\xE9rim\xE8tre",area:"Zone",reply:"R\xE9pondre",drawingToActual:"Dimensions du dessin : Taille r\xE9elle",settingScale:"\xC9chelle",pt:"pt",in:"dans",mm:"mm",cm:"cm",m:"m",km:"kilom\xE8tres",ft:"pi",yd:"yd",mi:"mi",measurementSettings:"Param\xE8tres de mesure",scaleError:"L'\xE9chelle doit \xEAtre sup\xE9rieure \xE0 0",showCaption:"Afficher la l\xE9gende",done:"Fait"},measurementPanel={appearance:"Apparence",lineColor:"Couleur de ligne",fillColor:"Couleur de remplissage",lineWidth:"Largeur de ligne",lineStyle:"Style de ligne et de bordure",start:"Commencer",end:"Fin",fontColor:"Couleur de police",fontStyle:"Style de police",note:"Note"},freetextPanel={title:"Texte libre",fontStyle:"Style de police",fontColor:"Couleur de police",borderWidth:"Largeur de la bordure",borderColor:"Couleur de la bordure",textBorderOpacity:"Opacit\xE9 des bordures et du texte",fillColor:"Couleur de remplissage",fillOpacity:"Opacit\xE9 de remplissage"},customeStamp={title:"Timbre personnalis\xE9",preview:"Aper\xE7u",addText:"Ajouter du texte",addShape:"Ajouter une forme",addDateTime:"Ajouter la date et l'heure",properties:"Propri\xE9t\xE9s",clear:"Clair",cancel:"Annuler",ok:"D'ACCORD",font:"Fonte",fontColor:"Couleur de police",fontStyle:"Style de police",fontSize:"Taille de la police",alignment:"Alignement",fillColor:"Couleur de remplissage",opacity:"Opacit\xE9",shape:"Forme",borderColor:"Couleur de la bordure",borderWidth:"Largeur de la bordure",borderOpacity:"Opacit\xE9 des bordures",fillOpacity:"Opacit\xE9 de remplissage",dateTime:"Date et heure",createHere:"Cr\xE9er ici"},fr={header,nextPage:nextPage$1,previousPage:previousPage$1,loading,upload,exit,leftPanel,pageModePanel,stampPanel,linkPanel,rightPanel,prevent,passwordDialog,ok,cancel,continue:"Continuer",signatures,color,opacity,font,regular,oblique,bold,boldOblique,delete:"Supprimer",warning,colon,compare:compare$1,editorPanel,documentEditor,paste,properties,security,layer,colorSeparation,measurement,measurementPanel,freetextPanel,customeStamp};let language=window.localStorage.getItem("currentLanguage")||"en";const supportLanguages=["zh-CN","en","ja","th","zh-TW","fr"];language&&!supportLanguages.includes(language)&&(language="en");const i18n=createI18n({legacy:!1,locale:language,fallbackLocale:"en",messages:{en,"zh-CN":zhCN,"zh-TW":zhTW,fr,ja,th}});function plugin$1(e){let n=".",r="__",o="--",u;if(e){let k=e.blockPrefix;k&&(n=k),k=e.elementPrefix,k&&(r=k),k=e.modifierPrefix,k&&(o=k)}const s={install(k){u=k.c;const P=k.context;P.bem={},P.bem.b=null,P.bem.els=null}};function w(k){let P,S;return{before(E){P=E.bem.b,S=E.bem.els,E.bem.els=null},after(E){E.bem.b=P,E.bem.els=S},$({context:E,props:M}){return k=typeof k=="string"?k:k({context:E,props:M}),E.bem.b=k,`${(M==null?void 0:M.bPrefix)||n}${E.bem.b}`}}}function g(k){let P;return{before(S){P=S.bem.els},after(S){S.bem.els=P},$({context:S,props:E}){return k=typeof k=="string"?k:k({context:S,props:E}),S.bem.els=k.split(",").map(M=>M.trim()),S.bem.els.map(M=>`${(E==null?void 0:E.bPrefix)||n}${S.bem.b}${r}${M}`).join(", ")}}}function v(k){return{$({context:P,props:S}){k=typeof k=="string"?k:k({context:P,props:S});const E=k.split(",").map(D=>D.trim());function M(D){return E.map(I=>`&${(S==null?void 0:S.bPrefix)||n}${P.bem.b}${D!==void 0?`${r}${D}`:""}${o}${I}`).join(", ")}const T=P.bem.els;return T!==null?M(T[0]):M()}}}function y(k){return{$({context:P,props:S}){k=typeof k=="string"?k:k({context:P,props:S});const E=P.bem.els;return`&:not(${(S==null?void 0:S.bPrefix)||n}${P.bem.b}${E!==null&&E.length>0?`${r}${E[0]}`:""}${o}${k})`}}}return Object.assign(s,{cB:(...k)=>u(w(k[0]),k[1],k[2]),cE:(...k)=>u(g(k[0]),k[1],k[2]),cM:(...k)=>u(v(k[0]),k[1],k[2]),cNotM:(...k)=>u(y(k[0]),k[1],k[2])}),s}function ampCount(e){let n=0;for(let r=0;r<e.length;++r)e[r]==="&"&&++n;return n}const separatorRegex=/\s*,(?![^(]*\))\s*/g,extraSpaceRegex=/\s+/g;function resolveSelectorWithAmp(e,n){const r=[];return n.split(separatorRegex).forEach(o=>{let u=ampCount(o);if(u){if(u===1){e.forEach(w=>{r.push(o.replace("&",w))});return}}else{e.forEach(w=>{r.push((w&&w+" ")+o)});return}let s=[o];for(;u--;){const w=[];s.forEach(g=>{e.forEach(v=>{w.push(g.replace("&",v))})}),s=w}s.forEach(w=>r.push(w))}),r}function resolveSelector(e,n){const r=[];return n.split(separatorRegex).forEach(o=>{e.forEach(u=>{r.push((u&&u+" ")+o)})}),r}function parseSelectorPath(e){let n=[""];return e.forEach(r=>{r=r&&r.trim(),r&&(r.includes("&")?n=resolveSelectorWithAmp(n,r):n=resolveSelector(n,r))}),n.join(", ").replace(extraSpaceRegex," ")}function removeElement(e){if(!e)return;const n=e.parentElement;n&&n.removeChild(e)}function queryElement(e,n){return(n!=null?n:document.head).querySelector(`style[cssr-id="${e}"]`)}function createElement$1(e){const n=document.createElement("style");return n.setAttribute("cssr-id",e),n}function isMediaOrSupports(e){return e?/^\s*@(s|m)/.test(e):!1}const kebabRegex=/[A-Z]/g;function kebabCase(e){return e.replace(kebabRegex,n=>"-"+n.toLowerCase())}function unwrapProperty(e,n="  "){return typeof e=="object"&&e!==null?` {
`+Object.entries(e).map(r=>n+`  ${kebabCase(r[0])}: ${r[1]};`).join(`
`)+`
`+n+"}":`: ${e};`}function unwrapProperties(e,n,r){return typeof e=="function"?e({context:n.context,props:r}):e}function createStyle(e,n,r,o){if(!n)return"";const u=unwrapProperties(n,r,o);if(!u)return"";if(typeof u=="string")return`${e} {
${u}
}`;const s=Object.keys(u);if(s.length===0)return r.config.keepEmptyBlock?e+` {
}`:"";const w=e?[e+" {"]:[];return s.forEach(g=>{const v=u[g];if(g==="raw"){w.push(`
`+v+`
`);return}g=kebabCase(g),v!=null&&w.push(`  ${g}${unwrapProperty(v)}`)}),e&&w.push("}"),w.join(`
`)}function loopCNodeListWithCallback(e,n,r){!e||e.forEach(o=>{if(Array.isArray(o))loopCNodeListWithCallback(o,n,r);else if(typeof o=="function"){const u=o(n);Array.isArray(u)?loopCNodeListWithCallback(u,n,r):u&&r(u)}else o&&r(o)})}function traverseCNode(e,n,r,o,u){const s=e.$;let w="";if(!s||typeof s=="string")isMediaOrSupports(s)?w=s:n.push(s);else if(typeof s=="function"){const y=s({context:o.context,props:u});isMediaOrSupports(y)?w=y:n.push(y)}else if(s.before&&s.before(o.context),!s.$||typeof s.$=="string")isMediaOrSupports(s.$)?w=s.$:n.push(s.$);else if(s.$){const y=s.$({context:o.context,props:u});isMediaOrSupports(y)?w=y:n.push(y)}const g=parseSelectorPath(n),v=createStyle(g,e.props,o,u);w?r.push(`${w} {`):v.length&&r.push(v),e.children&&loopCNodeListWithCallback(e.children,{context:o.context,props:u},y=>{if(typeof y=="string"){const m=createStyle(g,{raw:y},o,u);r.push(m)}else traverseCNode(y,n,r,o,u)}),n.pop(),w&&r.push("}"),s&&s.after&&s.after(o.context)}function render$1(e,n,r){const o=[];return traverseCNode(e,[],o,n,r),o.join(`

`)}function murmur2(e){for(var n=0,r,o=0,u=e.length;u>=4;++o,u-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,n=(r&65535)*1540483477+((r>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(u){case 3:n^=(e.charCodeAt(o+2)&255)<<16;case 2:n^=(e.charCodeAt(o+1)&255)<<8;case 1:n^=e.charCodeAt(o)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}typeof window<"u"&&(window.__cssrContext={});function unmount(e,n,r,o){const{els:u}=n;if(r===void 0)u.forEach(removeElement),n.els=[];else{const s=queryElement(r,o);s&&u.includes(s)&&(removeElement(s),n.els=u.filter(w=>w!==s))}}function addElementToList(e,n){e.push(n)}function mount(e,n,r,o,u,s,w,g,v){let y;if(r===void 0&&(y=n.render(o),r=murmur2(y)),v){v.adapter(r,y!=null?y:n.render(o));return}g===void 0&&(g=document.head);const m=queryElement(r,g);if(m!==null&&!s)return m;const d=m!=null?m:createElement$1(r);if(y===void 0&&(y=n.render(o)),d.textContent=y,m!==null)return m;if(w){const f=g.querySelector(`meta[name="${w}"]`);if(f)return g.insertBefore(d,f),addElementToList(n.els,d),d}return u?g.insertBefore(d,g.querySelector("style, link")):g.appendChild(d),addElementToList(n.els,d),d}function wrappedRender(e){return render$1(this,this.instance,e)}function wrappedMount(e={}){const{id:n,ssr:r,props:o,head:u=!1,force:s=!1,anchorMetaName:w,parent:g}=e;return mount(this.instance,this,n,o,u,s,w,g,r)}function wrappedUnmount(e={}){const{id:n,parent:r}=e;unmount(this.instance,this,n,r)}const createCNode=function(e,n,r,o){return{instance:e,$:n,props:r,children:o,els:[],render:wrappedRender,mount:wrappedMount,unmount:wrappedUnmount}},c$2=function(e,n,r,o){return Array.isArray(n)?createCNode(e,{$:null},null,n):Array.isArray(r)?createCNode(e,n,null,r):Array.isArray(o)?createCNode(e,n,r,o):createCNode(e,n,r,null)};function CssRender(e={}){const n={c:(...r)=>c$2(n,...r),use:(r,...o)=>r.install(n,...o),find:queryElement,context:{},config:e};return n}function exists(e,n){if(e===void 0)return!1;if(n){const{context:{ids:r}}=n;return r.has(e)}return queryElement(e)!==null}const namespace="n",prefix$1=`.${namespace}-`,elementPrefix="__",modifierPrefix="--",cssr=CssRender(),plugin=plugin$1({blockPrefix:prefix$1,elementPrefix,modifierPrefix});cssr.use(plugin);const{c:c$1,find:find$1}=cssr,{cB,cE,cM,cNotM}=plugin;function insideModal(e){return c$1(({props:{bPrefix:n}})=>`${n||prefix$1}modal, ${n||prefix$1}drawer`,[e])}function insidePopover(e){return c$1(({props:{bPrefix:n}})=>`${n||prefix$1}popover`,[e])}function asModal(e){return c$1(({props:{bPrefix:n}})=>`&${n||prefix$1}modal`,e)}const cCB=(...e)=>c$1(">",[cB(...e)]);function createKey(e,n){return e+(n==="default"?"":n.replace(/^[a-z]/,r=>r.toUpperCase()))}let onceCbs=[];const paramsMap=new WeakMap;function flushOnceCallbacks(){onceCbs.forEach(e=>e(...paramsMap.get(e))),onceCbs=[]}function beforeNextFrameOnce(e,...n){paramsMap.set(e,n),!onceCbs.includes(e)&&onceCbs.push(e)===1&&requestAnimationFrame(flushOnceCallbacks)}function happensIn(e,n){let{target:r}=e;for(;r;){if(r.dataset&&r.dataset[n]!==void 0)return!0;r=r.parentElement}return!1}function getPreciseEventTarget(e){return e.composedPath()[0]||null}function depx(e){return typeof e=="string"?e.endsWith("px")?Number(e.slice(0,e.length-2)):Number(e):e}function pxfy(e){if(e!=null)return typeof e=="number"?`${e}px`:e.endsWith("px")?e:`${e}px`}function getMargin(e,n){const r=e.trim().split(/\s+/g),o={top:r[0]};switch(r.length){case 1:o.right=r[0],o.bottom=r[0],o.left=r[0];break;case 2:o.right=r[1],o.left=r[1],o.bottom=r[0];break;case 3:o.right=r[1],o.bottom=r[2],o.left=r[1];break;case 4:o.right=r[1],o.bottom=r[2],o.left=r[3];break;default:throw new Error("[seemly/getMargin]:"+e+" is not a valid value.")}return n===void 0?o:o[n]}const colors={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"};function hsl2hsv(e,n,r){n/=100,r/=100;const o=n*Math.min(r,1-r)+r;return[e,o?(2-2*r/o)*100:0,o*100]}function hsv2hsl(e,n,r){n/=100,r/=100;const o=r-r*n/2,u=Math.min(o,1-o);return[e,u?(r-o)/u*100:0,o*100]}function hsv2rgb(e,n,r){n/=100,r/=100;let o=(u,s=(u+e/60)%6)=>r-r*n*Math.max(Math.min(s,4-s,1),0);return[o(5)*255,o(3)*255,o(1)*255]}function rgb2hsv(e,n,r){e/=255,n/=255,r/=255;let o=Math.max(e,n,r),u=o-Math.min(e,n,r),s=u&&(o==e?(n-r)/u:o==n?2+(r-e)/u:4+(e-n)/u);return[60*(s<0?s+6:s),o&&u/o*100,o*100]}function rgb2hsl(e,n,r){e/=255,n/=255,r/=255;let o=Math.max(e,n,r),u=o-Math.min(e,n,r),s=1-Math.abs(o+o-u-1),w=u&&(o==e?(n-r)/u:o==n?2+(r-e)/u:4+(e-n)/u);return[60*(w<0?w+6:w),s?u/s*100:0,(o+o-u)*50]}function hsl2rgb(e,n,r){n/=100,r/=100;let o=n*Math.min(r,1-r),u=(s,w=(s+e/30)%12)=>r-o*Math.max(Math.min(w-3,9-w,1),-1);return[u(0)*255,u(8)*255,u(4)*255]}const prefix="^\\s*",suffix="\\s*$",percent="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))%\\s*",float="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",hex="([0-9A-Fa-f])",dhex="([0-9A-Fa-f]{2})",hslRegex=new RegExp(`${prefix}hsl\\s*\\(${float},${percent},${percent}\\)${suffix}`),hsvRegex=new RegExp(`${prefix}hsv\\s*\\(${float},${percent},${percent}\\)${suffix}`),hslaRegex=new RegExp(`${prefix}hsla\\s*\\(${float},${percent},${percent},${float}\\)${suffix}`),hsvaRegex=new RegExp(`${prefix}hsva\\s*\\(${float},${percent},${percent},${float}\\)${suffix}`),rgbRegex=new RegExp(`${prefix}rgb\\s*\\(${float},${float},${float}\\)${suffix}`),rgbaRegex=new RegExp(`${prefix}rgba\\s*\\(${float},${float},${float},${float}\\)${suffix}`),sHexRegex=new RegExp(`${prefix}#${hex}${hex}${hex}${suffix}`),hexRegex=new RegExp(`${prefix}#${dhex}${dhex}${dhex}${suffix}`),sHexaRegex=new RegExp(`${prefix}#${hex}${hex}${hex}${hex}${suffix}`),hexaRegex=new RegExp(`${prefix}#${dhex}${dhex}${dhex}${dhex}${suffix}`);function parseHex(e){return parseInt(e,16)}function hsla(e){try{let n;if(n=hslaRegex.exec(e))return[roundDeg(n[1]),roundPercent(n[5]),roundPercent(n[9]),roundAlpha(n[13])];if(n=hslRegex.exec(e))return[roundDeg(n[1]),roundPercent(n[5]),roundPercent(n[9]),1];throw new Error(`[seemly/hsla]: Invalid color value ${e}.`)}catch(n){throw n}}function hsva(e){try{let n;if(n=hsvaRegex.exec(e))return[roundDeg(n[1]),roundPercent(n[5]),roundPercent(n[9]),roundAlpha(n[13])];if(n=hsvRegex.exec(e))return[roundDeg(n[1]),roundPercent(n[5]),roundPercent(n[9]),1];throw new Error(`[seemly/hsva]: Invalid color value ${e}.`)}catch(n){throw n}}function rgba(e){try{let n;if(n=hexRegex.exec(e))return[parseHex(n[1]),parseHex(n[2]),parseHex(n[3]),1];if(n=rgbRegex.exec(e))return[roundChannel(n[1]),roundChannel(n[5]),roundChannel(n[9]),1];if(n=rgbaRegex.exec(e))return[roundChannel(n[1]),roundChannel(n[5]),roundChannel(n[9]),roundAlpha(n[13])];if(n=sHexRegex.exec(e))return[parseHex(n[1]+n[1]),parseHex(n[2]+n[2]),parseHex(n[3]+n[3]),1];if(n=hexaRegex.exec(e))return[parseHex(n[1]),parseHex(n[2]),parseHex(n[3]),roundAlpha(parseHex(n[4])/255)];if(n=sHexaRegex.exec(e))return[parseHex(n[1]+n[1]),parseHex(n[2]+n[2]),parseHex(n[3]+n[3]),roundAlpha(parseHex(n[4]+n[4])/255)];if(e in colors)return rgba(colors[e]);throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(n){throw n}}function normalizeAlpha$1(e){return e>1?1:e<0?0:e}function stringifyRgb(e,n,r){return`rgb(${roundChannel(e)}, ${roundChannel(n)}, ${roundChannel(r)})`}function stringifyRgba(e,n,r,o){return`rgba(${roundChannel(e)}, ${roundChannel(n)}, ${roundChannel(r)}, ${normalizeAlpha$1(o)})`}function compositeChannel(e,n,r,o,u){return roundChannel((e*n*(1-o)+r*o)/u)}function composite(e,n){Array.isArray(e)||(e=rgba(e)),Array.isArray(n)||(n=rgba(n));const r=e[3],o=n[3],u=roundAlpha(r+o-r*o);return stringifyRgba(compositeChannel(e[0],r,n[0],o,u),compositeChannel(e[1],r,n[1],o,u),compositeChannel(e[2],r,n[2],o,u),u)}function changeColor(e,n){const[r,o,u,s=1]=Array.isArray(e)?e:rgba(e);return n.alpha?stringifyRgba(r,o,u,n.alpha):stringifyRgba(r,o,u,s)}function scaleColor(e,n){const[r,o,u,s=1]=Array.isArray(e)?e:rgba(e),{lightness:w=1,alpha:g=1}=n;return toRgbaString([r*w,o*w,u*w,s*g])}function roundAlpha(e){const n=Math.round(Number(e)*100)/100;return n>1?1:n<0?0:n}function roundDeg(e){const n=Math.round(Number(e));return n>=360||n<0?0:n}function roundChannel(e){const n=Math.round(Number(e));return n>255?255:n<0?0:n}function roundPercent(e){const n=Math.round(Number(e));return n>100?100:n<0?0:n}function toRgbString(e){const[n,r,o]=Array.isArray(e)?e:rgba(e);return stringifyRgb(n,r,o)}function toRgbaString(e){const[n,r,o]=e;return 3 in e?`rgba(${roundChannel(n)}, ${roundChannel(r)}, ${roundChannel(o)}, ${roundAlpha(e[3])})`:`rgba(${roundChannel(n)}, ${roundChannel(r)}, ${roundChannel(o)}, 1)`}function toHsvString(e){return`hsv(${roundDeg(e[0])}, ${roundPercent(e[1])}%, ${roundPercent(e[2])}%)`}function toHsvaString(e){const[n,r,o]=e;return 3 in e?`hsva(${roundDeg(n)}, ${roundPercent(r)}%, ${roundPercent(o)}%, ${roundAlpha(e[3])})`:`hsva(${roundDeg(n)}, ${roundPercent(r)}%, ${roundPercent(o)}%, 1)`}function toHslString(e){return`hsl(${roundDeg(e[0])}, ${roundPercent(e[1])}%, ${roundPercent(e[2])}%)`}function toHslaString(e){const[n,r,o]=e;return 3 in e?`hsla(${roundDeg(n)}, ${roundPercent(r)}%, ${roundPercent(o)}%, ${roundAlpha(e[3])})`:`hsla(${roundDeg(n)}, ${roundPercent(r)}%, ${roundPercent(o)}%, 1)`}function toHexaString(e){if(typeof e=="string"){let o;if(o=hexRegex.exec(e))return`${o[0]}FF`;if(o=hexaRegex.exec(e))return o[0];if(o=sHexRegex.exec(e))return`#${o[1]}${o[1]}${o[2]}${o[2]}${o[3]}${o[3]}FF`;if(o=sHexaRegex.exec(e))return`#${o[1]}${o[1]}${o[2]}${o[2]}${o[3]}${o[3]}${o[4]}${o[4]}`;throw new Error(`[seemly/toHexString]: Invalid hex value ${e}.`)}const n=`#${e.slice(0,3).map(o=>roundChannel(o).toString(16).toUpperCase().padStart(2,"0")).join("")}`,r=e.length===3?"FF":roundChannel(e[3]*255).toString(16).padStart(2,"0").toUpperCase();return n+r}function toHexString(e){if(typeof e=="string"){let n;if(n=hexRegex.exec(e))return n[0];if(n=hexaRegex.exec(e))return n[0].slice(0,7);if(n=sHexRegex.exec(e)||sHexaRegex.exec(e))return`#${n[1]}${n[1]}${n[2]}${n[2]}${n[3]}${n[3]}`;throw new Error(`[seemly/toHexString]: Invalid hex value ${e}.`)}return`#${e.slice(0,3).map(n=>roundChannel(n).toString(16).toUpperCase().padStart(2,"0")).join("")}`}function createId(e=8){return Math.random().toString(16).slice(2,2+e)}function getEventTarget(e){return e.composedPath()[0]}const traps={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function createTrapHandler(e,n,r){if(e==="mousemoveoutside"){const o=u=>{n.contains(getEventTarget(u))||r(u)};return{mousemove:o,touchstart:o}}else if(e==="clickoutside"){let o=!1;const u=w=>{o=!n.contains(getEventTarget(w))},s=w=>{!o||n.contains(getEventTarget(w))||r(w)};return{mousedown:u,mouseup:s,touchstart:u,touchend:s}}return console.error(`[evtd/create-trap-handler]: name \`${e}\` is invalid. This could be a bug of evtd.`),{}}function ensureTrapHandlers(e,n,r){const o=traps[e];let u=o.get(n);u===void 0&&o.set(n,u=new WeakMap);let s=u.get(r);return s===void 0&&u.set(r,s=createTrapHandler(e,n,r)),s}function trapOn(e,n,r,o){if(e==="mousemoveoutside"||e==="clickoutside"){const u=ensureTrapHandlers(e,n,r);return Object.keys(u).forEach(s=>{on$1(s,document,u[s],o)}),!0}return!1}function trapOff(e,n,r,o){if(e==="mousemoveoutside"||e==="clickoutside"){const u=ensureTrapHandlers(e,n,r);return Object.keys(u).forEach(s=>{off$1(s,document,u[s],o)}),!0}return!1}function createDelegate(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const e=new WeakMap,n=new WeakMap;function r(){e.set(this,!0)}function o(){e.set(this,!0),n.set(this,!0)}function u(O,F,U){const Y=O[F];return O[F]=function(){return U.apply(O,arguments),Y.apply(O,arguments)},O}function s(O,F){O[F]=Event.prototype[F]}const w=new WeakMap,g=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function v(){var O;return(O=w.get(this))!==null&&O!==void 0?O:null}function y(O,F){g!==void 0&&Object.defineProperty(O,"currentTarget",{configurable:!0,enumerable:!0,get:F!=null?F:g.get})}const m={bubble:{},capture:{}},d={};function f(){const O=function(F){const{type:U,eventPhase:Y,bubbles:Q}=F,q=getEventTarget(F);if(Y===2)return;const ne=Y===1?"capture":"bubble";let J=q;const re=[];for(;J===null&&(J=window),re.push(J),J!==window;)J=J.parentNode||null;const X=m.capture[U],j=m.bubble[U];if(u(F,"stopPropagation",r),u(F,"stopImmediatePropagation",o),y(F,v),ne==="capture"){if(X===void 0)return;for(let Z=re.length-1;Z>=0&&!e.has(F);--Z){const W=re[Z],te=X.get(W);if(te!==void 0){w.set(F,W);for(const le of te){if(n.has(F))break;le(F)}}if(Z===0&&!Q&&j!==void 0){const le=j.get(W);if(le!==void 0)for(const oe of le){if(n.has(F))break;oe(F)}}}}else if(ne==="bubble"){if(j===void 0)return;for(let Z=0;Z<re.length&&!e.has(F);++Z){const W=re[Z],te=j.get(W);if(te!==void 0){w.set(F,W);for(const le of te){if(n.has(F))break;le(F)}}}}s(F,"stopPropagation"),s(F,"stopImmediatePropagation"),y(F)};return O.displayName="evtdUnifiedHandler",O}function x(){const O=function(F){const{type:U,eventPhase:Y}=F;if(Y!==2)return;const Q=d[U];Q!==void 0&&Q.forEach(q=>q(F))};return O.displayName="evtdUnifiedWindowEventHandler",O}const k=f(),P=x();function S(O,F){const U=m[O];return U[F]===void 0&&(U[F]=new Map,window.addEventListener(F,k,O==="capture")),U[F]}function E(O){return d[O]===void 0&&(d[O]=new Set,window.addEventListener(O,P)),d[O]}function M(O,F){let U=O.get(F);return U===void 0&&O.set(F,U=new Set),U}function T(O,F,U,Y){const Q=m[F][U];if(Q!==void 0){const q=Q.get(O);if(q!==void 0&&q.has(Y))return!0}return!1}function D(O,F){const U=d[O];return!!(U!==void 0&&U.has(F))}function I(O,F,U,Y){let Q;if(typeof Y=="object"&&Y.once===!0?Q=X=>{N(O,F,Q,Y),U(X)}:Q=U,trapOn(O,F,Q,Y))return;const ne=Y===!0||typeof Y=="object"&&Y.capture===!0?"capture":"bubble",J=S(ne,O),re=M(J,F);if(re.has(Q)||re.add(Q),F===window){const X=E(O);X.has(Q)||X.add(Q)}}function N(O,F,U,Y){if(trapOff(O,F,U,Y))return;const q=Y===!0||typeof Y=="object"&&Y.capture===!0,ne=q?"capture":"bubble",J=S(ne,O),re=M(J,F);if(F===window&&!T(F,q?"bubble":"capture",O,U)&&D(O,U)){const j=d[O];j.delete(U),j.size===0&&(window.removeEventListener(O,P),d[O]=void 0)}re.has(U)&&re.delete(U),re.size===0&&J.delete(F),J.size===0&&(window.removeEventListener(O,k,ne==="capture"),m[ne][O]=void 0)}return{on:I,off:N}}const{on:on$1,off:off$1}=createDelegate();function useFalseUntilTruthy(e){const n=ref(!!e.value);if(n.value)return readonly(n);const r=watch(e,o=>{o&&(n.value=!0,r())});return readonly(n)}function useMemo(e){const n=computed(e),r=ref(n.value);return watch(n,o=>{r.value=o}),typeof e=="function"?r:{__v_isRef:!0,get value(){return r.value},set value(o){e.set(o)}}}function hasInstance(){return getCurrentInstance()!==null}const isBrowser$2=typeof window<"u";let fontsReady,isFontReady;const init$1=()=>{var e,n;fontsReady=isBrowser$2?(n=(e=document)===null||e===void 0?void 0:e.fonts)===null||n===void 0?void 0:n.ready:void 0,isFontReady=!1,fontsReady!==void 0?fontsReady.then(()=>{isFontReady=!0}):isFontReady=!0};init$1();function onFontsReady(e){if(isFontReady)return;let n=!1;onMounted(()=>{isFontReady||fontsReady==null||fontsReady.then(()=>{n||e()})}),onBeforeUnmount(()=>{n=!0})}const mousePositionRef=ref(null);function clickHandler(e){if(e.clientX>0||e.clientY>0)mousePositionRef.value={x:e.clientX,y:e.clientY};else{const{target:n}=e;if(n instanceof Element){const{left:r,top:o,width:u,height:s}=n.getBoundingClientRect();r>0||o>0?mousePositionRef.value={x:r+u/2,y:o+s/2}:mousePositionRef.value={x:0,y:0}}else mousePositionRef.value=null}}let usedCount$1=0,managable$1=!0;function useClickPosition(){if(!isBrowser$2)return readonly(ref(null));usedCount$1===0&&on$1("click",document,clickHandler,!0);const e=()=>{usedCount$1+=1};return managable$1&&(managable$1=hasInstance())?(onBeforeMount(e),onBeforeUnmount(()=>{usedCount$1-=1,usedCount$1===0&&off$1("click",document,clickHandler,!0)})):e(),readonly(mousePositionRef)}const clickedTimeRef=ref(void 0);let usedCount=0;function handleClick(){clickedTimeRef.value=Date.now()}let managable=!0;function useClicked(e){if(!isBrowser$2)return readonly(ref(!1));const n=ref(!1);let r=null;function o(){r!==null&&window.clearTimeout(r)}function u(){o(),n.value=!0,r=window.setTimeout(()=>{n.value=!1},e)}usedCount===0&&on$1("click",window,handleClick,!0);const s=()=>{usedCount+=1,on$1("click",window,u,!0)};return managable&&(managable=hasInstance())?(onBeforeMount(s),onBeforeUnmount(()=>{usedCount-=1,usedCount===0&&off$1("click",window,handleClick,!0),off$1("click",window,u,!0),o()})):s(),readonly(n)}function useMergedState(e,n){return watch(e,r=>{r!==void 0&&(n.value=r)}),computed(()=>e.value===void 0?n.value:e.value)}function isMounted(){const e=ref(!1);return onMounted(()=>{e.value=!0}),readonly(e)}function useCompitable(e,n){return computed(()=>{for(const r of n)if(e[r]!==void 0)return e[r];return e[n[n.length-1]]})}const isIos=(typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function useIsIos(){return isIos}function createInjectionKey(e){return e}const internalSelectionMenuInjectionKey="n-internal-select-menu",internalSelectionMenuBodyInjectionKey="n-internal-select-menu-body",drawerBodyInjectionKey="n-drawer-body",modalBodyInjectionKey="n-modal-body",modalProviderInjectionKey$1="n-modal-provider",modalInjectionKey="n-modal",popoverBodyInjectionKey="n-popover-body",teleportDisabled="__disabled__";function useAdjustedTo(e){const n=inject(modalBodyInjectionKey,null),r=inject(drawerBodyInjectionKey,null),o=inject(popoverBodyInjectionKey,null),u=inject(internalSelectionMenuBodyInjectionKey,null),s=ref();if(typeof document<"u"){s.value=document.fullscreenElement;const w=()=>{s.value=document.fullscreenElement};onMounted(()=>{on$1("fullscreenchange",document,w)}),onBeforeUnmount(()=>{off$1("fullscreenchange",document,w)})}return useMemo(()=>{var w;const{to:g}=e;return g!==void 0?g===!1?teleportDisabled:g===!0?s.value||"body":g:n!=null&&n.value?(w=n.value.$el)!==null&&w!==void 0?w:n.value:r!=null&&r.value?r.value:o!=null&&o.value?o.value:u!=null&&u.value?u.value:g!=null?g:s.value||"body"})}useAdjustedTo.tdkey=teleportDisabled;useAdjustedTo.propTo={type:[String,Object,Boolean],default:void 0};const isBrowser$1=typeof document<"u"&&typeof window<"u",isComposingRef=ref(!1);function compositionStartHandler(){isComposingRef.value=!0}function compositionEndHandler(){isComposingRef.value=!1}let mountedCount=0;function useIsComposing(){return isBrowser$1&&(onBeforeMount(()=>{mountedCount||(window.addEventListener("compositionstart",compositionStartHandler),window.addEventListener("compositionend",compositionEndHandler)),mountedCount++}),onBeforeUnmount(()=>{mountedCount<=1?(window.removeEventListener("compositionstart",compositionStartHandler),window.removeEventListener("compositionend",compositionEndHandler),mountedCount=0):mountedCount--})),isComposingRef}let lockCount=0,originalMarginRight="",originalOverflow="",originalOverflowX="",originalOverflowY="";const lockHtmlScrollRightCompensationRef=ref("0px");function useLockHtmlScroll(e){if(typeof document>"u")return;const n=document.documentElement;let r,o=!1;const u=()=>{n.style.marginRight=originalMarginRight,n.style.overflow=originalOverflow,n.style.overflowX=originalOverflowX,n.style.overflowY=originalOverflowY,lockHtmlScrollRightCompensationRef.value="0px"};onMounted(()=>{r=watch(e,s=>{if(s){if(!lockCount){const w=window.innerWidth-n.offsetWidth;w>0&&(originalMarginRight=n.style.marginRight,n.style.marginRight=`${w}px`,lockHtmlScrollRightCompensationRef.value=`${w}px`),originalOverflow=n.style.overflow,originalOverflowX=n.style.overflowX,originalOverflowY=n.style.overflowY,n.style.overflow="hidden",n.style.overflowX="hidden",n.style.overflowY="hidden"}o=!0,lockCount++}else lockCount--,lockCount||u(),o=!1},{immediate:!0})}),onBeforeUnmount(()=>{r==null||r(),o&&(lockCount--,lockCount||u(),o=!1)})}function useReactivated(e){const n={isDeactivated:!1};let r=!1;return onActivated(()=>{if(n.isDeactivated=!1,!r){r=!0;return}e()}),onDeactivated(()=>{n.isDeactivated=!0,r||(r=!0)}),n}function getSlot(e,n,r="default"){const o=n[r];if(o===void 0)throw new Error(`[vueuc/${e}]: slot[${r}] is empty.`);return o()}function flatten$2(e,n=!0,r=[]){return e.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&r.push(createTextVNode(String(o)));return}if(Array.isArray(o)){flatten$2(o,n,r);return}if(o.type===Fragment){if(o.children===null)return;Array.isArray(o.children)&&flatten$2(o.children,n,r)}else o.type!==Comment&&r.push(o)}}),r}function getFirstVNode(e,n,r="default"){const o=n[r];if(o===void 0)throw new Error(`[vueuc/${e}]: slot[${r}] is empty.`);const u=flatten$2(o());if(u.length===1)return u[0];throw new Error(`[vueuc/${e}]: slot[${r}] should have exactly one child.`)}let viewMeasurer=null;function ensureViewBoundingRect(){if(viewMeasurer===null&&(viewMeasurer=document.getElementById("v-binder-view-measurer"),viewMeasurer===null)){viewMeasurer=document.createElement("div"),viewMeasurer.id="v-binder-view-measurer";const{style:e}=viewMeasurer;e.position="fixed",e.left="0",e.right="0",e.top="0",e.bottom="0",e.pointerEvents="none",e.visibility="hidden",document.body.appendChild(viewMeasurer)}return viewMeasurer.getBoundingClientRect()}function getPointRect(e,n){const r=ensureViewBoundingRect();return{top:n,left:e,height:0,width:0,right:r.width-e,bottom:r.height-n}}function getRect$1(e){const n=e.getBoundingClientRect(),r=ensureViewBoundingRect();return{left:n.left-r.left,top:n.top-r.top,bottom:r.height+r.top-n.bottom,right:r.width+r.left-n.right,width:n.width,height:n.height}}function getParentNode(e){return e.nodeType===9?null:e.parentNode}function getScrollParent(e){if(e===null)return null;const n=getParentNode(e);if(n===null)return null;if(n.nodeType===9)return document;if(n.nodeType===1){const{overflow:r,overflowX:o,overflowY:u}=getComputedStyle(n);if(/(auto|scroll|overlay)/.test(r+u+o))return n}return getScrollParent(n)}const Binder=defineComponent({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(e){var n;provide("VBinder",(n=getCurrentInstance())===null||n===void 0?void 0:n.proxy);const r=inject("VBinder",null),o=ref(null),u=E=>{o.value=E,r&&e.syncTargetWithParent&&r.setTargetRef(E)};let s=[];const w=()=>{let E=o.value;for(;E=getScrollParent(E),E!==null;)s.push(E);for(const M of s)on$1("scroll",M,d,!0)},g=()=>{for(const E of s)off$1("scroll",E,d,!0);s=[]},v=new Set,y=E=>{v.size===0&&w(),v.has(E)||v.add(E)},m=E=>{v.has(E)&&v.delete(E),v.size===0&&g()},d=()=>{beforeNextFrameOnce(f)},f=()=>{v.forEach(E=>E())},x=new Set,k=E=>{x.size===0&&on$1("resize",window,S),x.has(E)||x.add(E)},P=E=>{x.has(E)&&x.delete(E),x.size===0&&off$1("resize",window,S)},S=()=>{x.forEach(E=>E())};return onBeforeUnmount(()=>{off$1("resize",window,S),g()}),{targetRef:o,setTargetRef:u,addScrollListener:y,removeScrollListener:m,addResizeListener:k,removeResizeListener:P}},render(){return getSlot("binder",this.$slots)}}),VBinder=Binder,VTarget=defineComponent({name:"Target",setup(){const{setTargetRef:e,syncTarget:n}=inject("VBinder");return{syncTarget:n,setTargetDirective:{mounted:e,updated:e}}},render(){const{syncTarget:e,setTargetDirective:n}=this;return e?withDirectives(getFirstVNode("follower",this.$slots),[[n]]):getFirstVNode("follower",this.$slots)}}),ctxKey$1="@@mmoContext",mousemoveoutside={mounted(e,{value:n}){e[ctxKey$1]={handler:void 0},typeof n=="function"&&(e[ctxKey$1].handler=n,on$1("mousemoveoutside",e,n))},updated(e,{value:n}){const r=e[ctxKey$1];typeof n=="function"?r.handler?r.handler!==n&&(off$1("mousemoveoutside",e,r.handler),r.handler=n,on$1("mousemoveoutside",e,n)):(e[ctxKey$1].handler=n,on$1("mousemoveoutside",e,n)):r.handler&&(off$1("mousemoveoutside",e,r.handler),r.handler=void 0)},unmounted(e){const{handler:n}=e[ctxKey$1];n&&off$1("mousemoveoutside",e,n),e[ctxKey$1].handler=void 0}},mousemoveoutside$1=mousemoveoutside,ctxKey="@@coContext",clickoutside={mounted(e,{value:n,modifiers:r}){e[ctxKey]={handler:void 0},typeof n=="function"&&(e[ctxKey].handler=n,on$1("clickoutside",e,n,{capture:r.capture}))},updated(e,{value:n,modifiers:r}){const o=e[ctxKey];typeof n=="function"?o.handler?o.handler!==n&&(off$1("clickoutside",e,o.handler,{capture:r.capture}),o.handler=n,on$1("clickoutside",e,n,{capture:r.capture})):(e[ctxKey].handler=n,on$1("clickoutside",e,n,{capture:r.capture})):o.handler&&(off$1("clickoutside",e,o.handler,{capture:r.capture}),o.handler=void 0)},unmounted(e,{modifiers:n}){const{handler:r}=e[ctxKey];r&&off$1("clickoutside",e,r,{capture:n.capture}),e[ctxKey].handler=void 0}},clickoutside$1=clickoutside;function warn$2(e,n){console.error(`[vdirs/${e}]: ${n}`)}class ZIndexManager{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(n,r){const{elementZIndex:o}=this;if(r!==void 0){n.style.zIndex=`${r}`,o.delete(n);return}const{nextZIndex:u}=this;o.has(n)&&o.get(n)+1===this.nextZIndex||(n.style.zIndex=`${u}`,o.set(n,u),this.nextZIndex=u+1,this.squashState())}unregister(n,r){const{elementZIndex:o}=this;o.has(n)?o.delete(n):r===void 0&&warn$2("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:n}=this;n||(this.nextZIndex=2e3),this.nextZIndex-n>2500&&this.rearrange()}rearrange(){const n=Array.from(this.elementZIndex.entries());n.sort((r,o)=>r[1]-o[1]),this.nextZIndex=2e3,n.forEach(r=>{const o=r[0],u=this.nextZIndex++;`${u}`!==o.style.zIndex&&(o.style.zIndex=`${u}`)})}}const zIndexManager=new ZIndexManager,ctx="@@ziContext",zindexable={mounted(e,n){const{value:r={}}=n,{zIndex:o,enabled:u}=r;e[ctx]={enabled:!!u,initialized:!1},u&&(zIndexManager.ensureZIndex(e,o),e[ctx].initialized=!0)},updated(e,n){const{value:r={}}=n,{zIndex:o,enabled:u}=r,s=e[ctx].enabled;u&&!s&&(zIndexManager.ensureZIndex(e,o),e[ctx].initialized=!0),e[ctx].enabled=!!u},unmounted(e,n){if(!e[ctx].initialized)return;const{value:r={}}=n,{zIndex:o}=r;zIndexManager.unregister(e,o)}},zindexable$1=zindexable,ssrContextKey="@css-render/vue3-ssr";function createStyleString(e,n){return`<style cssr-id="${e}">
${n}
</style>`}function ssrAdapter(e,n,r){const{styles:o,ids:u}=r;u.has(e)||o!==null&&(u.add(e),o.push(createStyleString(e,n)))}const isBrowser=typeof document<"u";function useSsrAdapter(){if(isBrowser)return;const e=inject(ssrContextKey,null);if(e!==null)return{adapter:(n,r)=>ssrAdapter(n,r,e),context:e}}function warn$1(e,n){console.error(`[vueuc/${e}]: ${n}`)}const{c}=CssRender(),cssrAnchorMetaName$1="vueuc-style";function lowBit(e){return e&-e}class FinweckTree{constructor(n,r){this.l=n,this.min=r;const o=new Array(n+1);for(let u=0;u<n+1;++u)o[u]=0;this.ft=o}add(n,r){if(r===0)return;const{l:o,ft:u}=this;for(n+=1;n<=o;)u[n]+=r,n+=lowBit(n)}get(n){return this.sum(n+1)-this.sum(n)}sum(n){if(n===void 0&&(n=this.l),n<=0)return 0;const{ft:r,min:o,l:u}=this;if(n>u)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let s=n*o;for(;n>0;)s+=r[n],n-=lowBit(n);return s}getBound(n){let r=0,o=this.l;for(;o>r;){const u=Math.floor((r+o)/2),s=this.sum(u);if(s>n){o=u;continue}else if(s<n){if(r===u)return this.sum(r+1)<=n?r+1:u;r=u}else return u}return r}}function resolveTo(e){return typeof e=="string"?document.querySelector(e):e()}const LazyTeleport=defineComponent({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(e){return{showTeleport:useFalseUntilTruthy(toRef(e,"show")),mergedTo:computed(()=>{const{to:n}=e;return n!=null?n:"body"})}},render(){return this.showTeleport?this.disabled?getSlot("lazy-teleport",this.$slots):h$1(Teleport,{disabled:this.disabled,to:this.mergedTo},getSlot("lazy-teleport",this.$slots)):null}}),oppositionPositions={top:"bottom",bottom:"top",left:"right",right:"left"},oppositeAligns={start:"end",center:"center",end:"start"},propToCompare={top:"height",bottom:"height",left:"width",right:"width"},transformOrigins={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},overlapTransformOrigin={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},oppositeAlignCssPositionProps={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},keepOffsetDirection={top:!0,bottom:!1,left:!0,right:!1},cssPositionToOppositeAlign={top:"end",bottom:"start",left:"end",right:"start"};function getPlacementAndOffsetOfFollower(e,n,r,o,u,s){if(!u||s)return{placement:e,top:0,left:0};const[w,g]=e.split("-");let v=g!=null?g:"center",y={top:0,left:0};const m=(x,k,P)=>{let S=0,E=0;const M=r[x]-n[k]-n[x];return M>0&&o&&(P?E=keepOffsetDirection[k]?M:-M:S=keepOffsetDirection[k]?M:-M),{left:S,top:E}},d=w==="left"||w==="right";if(v!=="center"){const x=oppositeAlignCssPositionProps[e],k=oppositionPositions[x],P=propToCompare[x];if(r[P]>n[P]){if(n[x]+n[P]<r[P]){const S=(r[P]-n[P])/2;n[x]<S||n[k]<S?n[x]<n[k]?(v=oppositeAligns[g],y=m(P,k,d)):y=m(P,x,d):v="center"}}else r[P]<n[P]&&n[k]<0&&n[x]>n[k]&&(v=oppositeAligns[g])}else{const x=w==="bottom"||w==="top"?"left":"top",k=oppositionPositions[x],P=propToCompare[x],S=(r[P]-n[P])/2;(n[x]<S||n[k]<S)&&(n[x]>n[k]?(v=cssPositionToOppositeAlign[x],y=m(P,x,d)):(v=cssPositionToOppositeAlign[k],y=m(P,k,d)))}let f=w;return n[w]<r[propToCompare[w]]&&n[w]<n[oppositionPositions[w]]&&(f=oppositionPositions[w]),{placement:v!=="center"?`${f}-${v}`:f,left:y.left,top:y.top}}function getProperTransformOrigin(e,n){return n?overlapTransformOrigin[e]:transformOrigins[e]}function getOffset(e,n,r,o,u,s){if(s)switch(e){case"bottom-start":return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left)}px`,transform:""};case"top-end":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left)}px`,transform:""};case"left-end":return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(r.top-n.top)}px`,left:`${Math.round(r.left-n.left+r.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(r.top-n.top+r.height/2)}px`,left:`${Math.round(r.left-n.left+r.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(r.top-n.top+r.height/2)}px`,left:`${Math.round(r.left-n.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(r.top-n.top+r.height)}px`,left:`${Math.round(r.left-n.left+r.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(e){case"bottom-start":return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+u)}px`,transform:""};case"bottom-end":return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+r.width+u)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+u)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+r.width+u)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+r.width+u)}px`,transform:""};case"right-end":return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+r.width+u)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+u)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+u)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(r.top-n.top+o)}px`,left:`${Math.round(r.left-n.left+r.width/2+u)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(r.top-n.top+r.height/2+o)}px`,left:`${Math.round(r.left-n.left+r.width+u)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(r.top-n.top+r.height/2+o)}px`,left:`${Math.round(r.left-n.left+u)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(r.top-n.top+r.height+o)}px`,left:`${Math.round(r.left-n.left+r.width/2+u)}px`,transform:"translateX(-50%)"}}}const style$r=c([c(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),c(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[c("> *",{pointerEvents:"all"})])]),VFollower=defineComponent({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(e){const n=inject("VBinder"),r=useMemo(()=>e.enabled!==void 0?e.enabled:e.show),o=ref(null),u=ref(null),s=()=>{const{syncTrigger:f}=e;f.includes("scroll")&&n.addScrollListener(v),f.includes("resize")&&n.addResizeListener(v)},w=()=>{n.removeScrollListener(v),n.removeResizeListener(v)};onMounted(()=>{r.value&&(v(),s())});const g=useSsrAdapter();style$r.mount({id:"vueuc/binder",head:!0,anchorMetaName:cssrAnchorMetaName$1,ssr:g}),onBeforeUnmount(()=>{w()}),onFontsReady(()=>{r.value&&v()});const v=()=>{if(!r.value)return;const f=o.value;if(f===null)return;const x=n.targetRef,{x:k,y:P,overlap:S}=e,E=k!==void 0&&P!==void 0?getPointRect(k,P):getRect$1(x);f.style.setProperty("--v-target-width",`${Math.round(E.width)}px`),f.style.setProperty("--v-target-height",`${Math.round(E.height)}px`);const{width:M,minWidth:T,placement:D,internalShift:I,flip:N}=e;f.setAttribute("v-placement",D),S?f.setAttribute("v-overlap",""):f.removeAttribute("v-overlap");const{style:O}=f;M==="target"?O.width=`${E.width}px`:M!==void 0?O.width=M:O.width="",T==="target"?O.minWidth=`${E.width}px`:T!==void 0?O.minWidth=T:O.minWidth="";const F=getRect$1(f),U=getRect$1(u.value),{left:Y,top:Q,placement:q}=getPlacementAndOffsetOfFollower(D,E,F,I,N,S),ne=getProperTransformOrigin(q,S),{left:J,top:re,transform:X}=getOffset(q,U,E,Q,Y,S);f.setAttribute("v-placement",q),f.style.setProperty("--v-offset-left",`${Math.round(Y)}px`),f.style.setProperty("--v-offset-top",`${Math.round(Q)}px`),f.style.transform=`translateX(${J}) translateY(${re}) ${X}`,f.style.setProperty("--v-transform-origin",ne),f.style.transformOrigin=ne};watch(r,f=>{f?(s(),y()):w()});const y=()=>{nextTick().then(v).catch(f=>console.error(f))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(f=>{watch(toRef(e,f),v)}),["teleportDisabled"].forEach(f=>{watch(toRef(e,f),y)}),watch(toRef(e,"syncTrigger"),f=>{f.includes("resize")?n.addResizeListener(v):n.removeResizeListener(v),f.includes("scroll")?n.addScrollListener(v):n.removeScrollListener(v)});const m=isMounted(),d=useMemo(()=>{const{to:f}=e;if(f!==void 0)return f;m.value});return{VBinder:n,mergedEnabled:r,offsetContainerRef:u,followerRef:o,mergedTo:d,syncPosition:v}},render(){return h$1(LazyTeleport,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var e,n;const r=h$1("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[h$1("div",{class:"v-binder-follower-content",ref:"followerRef"},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e))]);return this.zindexable?withDirectives(r,[[zindexable$1,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):r}})}});var resizeObservers=[],hasActiveObservations=function(){return resizeObservers.some(function(e){return e.activeTargets.length>0})},hasSkippedObservations=function(){return resizeObservers.some(function(e){return e.skippedTargets.length>0})},msg="ResizeObserver loop completed with undelivered notifications.",deliverResizeLoopError=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:msg}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=msg),window.dispatchEvent(e)},ResizeObserverBoxOptions;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(ResizeObserverBoxOptions||(ResizeObserverBoxOptions={}));var freeze=function(e){return Object.freeze(e)},ResizeObserverSize=function(){function e(n,r){this.inlineSize=n,this.blockSize=r,freeze(this)}return e}(),DOMRectReadOnly=function(){function e(n,r,o,u){return this.x=n,this.y=r,this.width=o,this.height=u,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,freeze(this)}return e.prototype.toJSON=function(){var n=this,r=n.x,o=n.y,u=n.top,s=n.right,w=n.bottom,g=n.left,v=n.width,y=n.height;return{x:r,y:o,top:u,right:s,bottom:w,left:g,width:v,height:y}},e.fromRect=function(n){return new e(n.x,n.y,n.width,n.height)},e}(),isSVG=function(e){return e instanceof SVGElement&&"getBBox"in e},isHidden=function(e){if(isSVG(e)){var n=e.getBBox(),r=n.width,o=n.height;return!r&&!o}var u=e,s=u.offsetWidth,w=u.offsetHeight;return!(s||w||e.getClientRects().length)},isElement=function(e){var n;if(e instanceof Element)return!0;var r=(n=e==null?void 0:e.ownerDocument)===null||n===void 0?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},isReplacedElement=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},global$1=typeof window<"u"?window:{},cache=new WeakMap,scrollRegexp=/auto|scroll/,verticalRegexp=/^tb|vertical/,IE=/msie|trident/i.test(global$1.navigator&&global$1.navigator.userAgent),parseDimension=function(e){return parseFloat(e||"0")},size=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=!1),new ResizeObserverSize((r?n:e)||0,(r?e:n)||0)},zeroBoxes=freeze({devicePixelContentBoxSize:size(),borderBoxSize:size(),contentBoxSize:size(),contentRect:new DOMRectReadOnly(0,0,0,0)}),calculateBoxSizes=function(e,n){if(n===void 0&&(n=!1),cache.has(e)&&!n)return cache.get(e);if(isHidden(e))return cache.set(e,zeroBoxes),zeroBoxes;var r=getComputedStyle(e),o=isSVG(e)&&e.ownerSVGElement&&e.getBBox(),u=!IE&&r.boxSizing==="border-box",s=verticalRegexp.test(r.writingMode||""),w=!o&&scrollRegexp.test(r.overflowY||""),g=!o&&scrollRegexp.test(r.overflowX||""),v=o?0:parseDimension(r.paddingTop),y=o?0:parseDimension(r.paddingRight),m=o?0:parseDimension(r.paddingBottom),d=o?0:parseDimension(r.paddingLeft),f=o?0:parseDimension(r.borderTopWidth),x=o?0:parseDimension(r.borderRightWidth),k=o?0:parseDimension(r.borderBottomWidth),P=o?0:parseDimension(r.borderLeftWidth),S=d+y,E=v+m,M=P+x,T=f+k,D=g?e.offsetHeight-T-e.clientHeight:0,I=w?e.offsetWidth-M-e.clientWidth:0,N=u?S+M:0,O=u?E+T:0,F=o?o.width:parseDimension(r.width)-N-I,U=o?o.height:parseDimension(r.height)-O-D,Y=F+S+I+M,Q=U+E+D+T,q=freeze({devicePixelContentBoxSize:size(Math.round(F*devicePixelRatio),Math.round(U*devicePixelRatio),s),borderBoxSize:size(Y,Q,s),contentBoxSize:size(F,U,s),contentRect:new DOMRectReadOnly(d,v,F,U)});return cache.set(e,q),q},calculateBoxSize=function(e,n,r){var o=calculateBoxSizes(e,r),u=o.borderBoxSize,s=o.contentBoxSize,w=o.devicePixelContentBoxSize;switch(n){case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:return w;case ResizeObserverBoxOptions.BORDER_BOX:return u;default:return s}},ResizeObserverEntry=function(){function e(n){var r=calculateBoxSizes(n);this.target=n,this.contentRect=r.contentRect,this.borderBoxSize=freeze([r.borderBoxSize]),this.contentBoxSize=freeze([r.contentBoxSize]),this.devicePixelContentBoxSize=freeze([r.devicePixelContentBoxSize])}return e}(),calculateDepthForNode=function(e){if(isHidden(e))return 1/0;for(var n=0,r=e.parentNode;r;)n+=1,r=r.parentNode;return n},broadcastActiveObservations=function(){var e=1/0,n=[];resizeObservers.forEach(function(w){if(w.activeTargets.length!==0){var g=[];w.activeTargets.forEach(function(y){var m=new ResizeObserverEntry(y.target),d=calculateDepthForNode(y.target);g.push(m),y.lastReportedSize=calculateBoxSize(y.target,y.observedBox),d<e&&(e=d)}),n.push(function(){w.callback.call(w.observer,g,w.observer)}),w.activeTargets.splice(0,w.activeTargets.length)}});for(var r=0,o=n;r<o.length;r++){var u=o[r];u()}return e},gatherActiveObservationsAtDepth=function(e){resizeObservers.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(u){u.isActive()&&(calculateDepthForNode(u.target)>e?r.activeTargets.push(u):r.skippedTargets.push(u))})})},process$1=function(){var e=0;for(gatherActiveObservationsAtDepth(e);hasActiveObservations();)e=broadcastActiveObservations(),gatherActiveObservationsAtDepth(e);return hasSkippedObservations()&&deliverResizeLoopError(),e>0},trigger,callbacks=[],notify=function(){return callbacks.splice(0).forEach(function(e){return e()})},queueMicroTask=function(e){if(!trigger){var n=0,r=document.createTextNode(""),o={characterData:!0};new MutationObserver(function(){return notify()}).observe(r,o),trigger=function(){r.textContent="".concat(n?n--:n++)}}callbacks.push(e),trigger()},queueResizeObserver=function(e){queueMicroTask(function(){requestAnimationFrame(e)})},watching=0,isWatching=function(){return!!watching},CATCH_PERIOD=250,observerConfig={attributes:!0,characterData:!0,childList:!0,subtree:!0},events=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],time=function(e){return e===void 0&&(e=0),Date.now()+e},scheduled=!1,Scheduler=function(){function e(){var n=this;this.stopped=!0,this.listener=function(){return n.schedule()}}return e.prototype.run=function(n){var r=this;if(n===void 0&&(n=CATCH_PERIOD),!scheduled){scheduled=!0;var o=time(n);queueResizeObserver(function(){var u=!1;try{u=process$1()}finally{if(scheduled=!1,n=o-time(),!isWatching())return;u?r.run(1e3):n>0?r.run(n):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var n=this,r=function(){return n.observer&&n.observer.observe(document.body,observerConfig)};document.body?r():global$1.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var n=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),events.forEach(function(r){return global$1.addEventListener(r,n.listener,!0)}))},e.prototype.stop=function(){var n=this;this.stopped||(this.observer&&this.observer.disconnect(),events.forEach(function(r){return global$1.removeEventListener(r,n.listener,!0)}),this.stopped=!0)},e}(),scheduler=new Scheduler,updateCount=function(e){!watching&&e>0&&scheduler.start(),watching+=e,!watching&&scheduler.stop()},skipNotifyOnElement=function(e){return!isSVG(e)&&!isReplacedElement(e)&&getComputedStyle(e).display==="inline"},ResizeObservation=function(){function e(n,r){this.target=n,this.observedBox=r||ResizeObserverBoxOptions.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var n=calculateBoxSize(this.target,this.observedBox,!0);return skipNotifyOnElement(this.target)&&(this.lastReportedSize=n),this.lastReportedSize.inlineSize!==n.inlineSize||this.lastReportedSize.blockSize!==n.blockSize},e}(),ResizeObserverDetail=function(){function e(n,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=n,this.callback=r}return e}(),observerMap=new WeakMap,getObservationIndex=function(e,n){for(var r=0;r<e.length;r+=1)if(e[r].target===n)return r;return-1},ResizeObserverController=function(){function e(){}return e.connect=function(n,r){var o=new ResizeObserverDetail(n,r);observerMap.set(n,o)},e.observe=function(n,r,o){var u=observerMap.get(n),s=u.observationTargets.length===0;getObservationIndex(u.observationTargets,r)<0&&(s&&resizeObservers.push(u),u.observationTargets.push(new ResizeObservation(r,o&&o.box)),updateCount(1),scheduler.schedule())},e.unobserve=function(n,r){var o=observerMap.get(n),u=getObservationIndex(o.observationTargets,r),s=o.observationTargets.length===1;u>=0&&(s&&resizeObservers.splice(resizeObservers.indexOf(o),1),o.observationTargets.splice(u,1),updateCount(-1))},e.disconnect=function(n){var r=this,o=observerMap.get(n);o.observationTargets.slice().forEach(function(u){return r.unobserve(n,u.target)}),o.activeTargets.splice(0,o.activeTargets.length)},e}(),ResizeObserver$1=function(){function e(n){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof n!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");ResizeObserverController.connect(this,n)}return e.prototype.observe=function(n,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(n))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.observe(this,n,r)},e.prototype.unobserve=function(n){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!isElement(n))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");ResizeObserverController.unobserve(this,n)},e.prototype.disconnect=function(){ResizeObserverController.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();class ResizeObserverDelegate{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||ResizeObserver$1)(this.handleResize),this.elHandlersMap=new Map}handleResize(n){for(const r of n){const o=this.elHandlersMap.get(r.target);o!==void 0&&o(r)}}registerHandler(n,r){this.elHandlersMap.set(n,r),this.observer.observe(n)}unregisterHandler(n){!this.elHandlersMap.has(n)||(this.elHandlersMap.delete(n),this.observer.unobserve(n))}}const resizeObserverManager=new ResizeObserverDelegate,VResizeObserver=defineComponent({name:"ResizeObserver",props:{onResize:Function},setup(e){let n=!1;const r=getCurrentInstance().proxy;function o(u){const{onResize:s}=e;s!==void 0&&s(u)}onMounted(()=>{const u=r.$el;if(u===void 0){warn$1("resize-observer","$el does not exist.");return}if(u.nextElementSibling!==u.nextSibling&&u.nodeType===3&&u.nodeValue!==""){warn$1("resize-observer","$el can not be observed (it may be a text node).");return}u.nextElementSibling!==null&&(resizeObserverManager.registerHandler(u.nextElementSibling,o),n=!0)}),onBeforeUnmount(()=>{n&&resizeObserverManager.unregisterHandler(r.$el.nextElementSibling)})},render(){return renderSlot(this.$slots,"default")}});let maybeTouch;function ensureMaybeTouch(){return typeof document>"u"?!1:(maybeTouch===void 0&&("matchMedia"in window?maybeTouch=window.matchMedia("(pointer:coarse)").matches:maybeTouch=!1),maybeTouch)}let wheelScale;function ensureWheelScale(){return typeof document>"u"?1:(wheelScale===void 0&&(wheelScale="chrome"in window?window.devicePixelRatio:1),wheelScale)}const xScrollInjextionKey="VVirtualListXScroll";function setupXScroll({columnsRef:e,renderColRef:n,renderItemWithColsRef:r}){const o=ref(0),u=ref(0),s=computed(()=>{const y=e.value;if(y.length===0)return null;const m=new FinweckTree(y.length,0);return y.forEach((d,f)=>{m.add(f,d.width)}),m}),w=useMemo(()=>{const y=s.value;return y!==null?Math.max(y.getBound(u.value)-1,0):0}),g=y=>{const m=s.value;return m!==null?m.sum(y):0},v=useMemo(()=>{const y=s.value;return y!==null?Math.min(y.getBound(u.value+o.value)+1,e.value.length-1):0});return provide(xScrollInjextionKey,{startIndexRef:w,endIndexRef:v,columnsRef:e,renderColRef:n,renderItemWithColsRef:r,getLeft:g}),{listWidthRef:o,scrollLeftRef:u}}const VirtualListRow=defineComponent({name:"VirtualListRow",props:{index:{type:Number,required:!0},item:{type:Object,required:!0}},setup(){const{startIndexRef:e,endIndexRef:n,columnsRef:r,getLeft:o,renderColRef:u,renderItemWithColsRef:s}=inject(xScrollInjextionKey);return{startIndex:e,endIndex:n,columns:r,renderCol:u,renderItemWithCols:s,getLeft:o}},render(){const{startIndex:e,endIndex:n,columns:r,renderCol:o,renderItemWithCols:u,getLeft:s,item:w}=this;if(u!=null)return u({itemIndex:this.index,startColIndex:e,endColIndex:n,allColumns:r,item:w,getLeft:s});if(o!=null){const g=[];for(let v=e;v<=n;++v){const y=r[v];g.push(o({column:y,left:s(v),item:w}))}return g}return null}}),styles=c(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[c("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[c("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),VVirtualList=defineComponent({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},columns:{type:Array,default:()=>[]},renderCol:Function,renderItemWithCols:Function,items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(e){const n=useSsrAdapter();styles.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:cssrAnchorMetaName$1,ssr:n}),onMounted(()=>{const{defaultScrollIndex:ne,defaultScrollKey:J}=e;ne!=null?S({index:ne}):J!=null&&S({key:J})});let r=!1,o=!1;onActivated(()=>{if(r=!1,!o){o=!0;return}S({top:x.value,left:w.value})}),onDeactivated(()=>{r=!0,o||(o=!0)});const u=useMemo(()=>{if(e.renderCol==null&&e.renderItemWithCols==null||e.columns.length===0)return;let ne=0;return e.columns.forEach(J=>{ne+=J.width}),ne}),s=computed(()=>{const ne=new Map,{keyField:J}=e;return e.items.forEach((re,X)=>{ne.set(re[J],X)}),ne}),{scrollLeftRef:w,listWidthRef:g}=setupXScroll({columnsRef:toRef(e,"columns"),renderColRef:toRef(e,"renderCol"),renderItemWithColsRef:toRef(e,"renderItemWithCols")}),v=ref(null),y=ref(void 0),m=new Map,d=computed(()=>{const{items:ne,itemSize:J,keyField:re}=e,X=new FinweckTree(ne.length,J);return ne.forEach((j,Z)=>{const W=j[re],te=m.get(W);te!==void 0&&X.add(Z,te)}),X}),f=ref(0),x=ref(0),k=useMemo(()=>Math.max(d.value.getBound(x.value-depx(e.paddingTop))-1,0)),P=computed(()=>{const{value:ne}=y;if(ne===void 0)return[];const{items:J,itemSize:re}=e,X=k.value,j=Math.min(X+Math.ceil(ne/re+1),J.length-1),Z=[];for(let W=X;W<=j;++W)Z.push(J[W]);return Z}),S=(ne,J)=>{if(typeof ne=="number"){D(ne,J,"auto");return}const{left:re,top:X,index:j,key:Z,position:W,behavior:te,debounce:le=!0}=ne;if(re!==void 0||X!==void 0)D(re,X,te);else if(j!==void 0)T(j,te,le);else if(Z!==void 0){const oe=s.value.get(Z);oe!==void 0&&T(oe,te,le)}else W==="bottom"?D(0,Number.MAX_SAFE_INTEGER,te):W==="top"&&D(0,0,te)};let E,M=null;function T(ne,J,re){const{value:X}=d,j=X.sum(ne)+depx(e.paddingTop);if(!re)v.value.scrollTo({left:0,top:j,behavior:J});else{E=ne,M!==null&&window.clearTimeout(M),M=window.setTimeout(()=>{E=void 0,M=null},16);const{scrollTop:Z,offsetHeight:W}=v.value;if(j>Z){const te=X.get(ne);j+te<=Z+W||v.value.scrollTo({left:0,top:j+te-W,behavior:J})}else v.value.scrollTo({left:0,top:j,behavior:J})}}function D(ne,J,re){v.value.scrollTo({left:ne,top:J,behavior:re})}function I(ne,J){var re,X,j;if(r||e.ignoreItemResize||q(J.target))return;const{value:Z}=d,W=s.value.get(ne),te=Z.get(W),le=(j=(X=(re=J.borderBoxSize)===null||re===void 0?void 0:re[0])===null||X===void 0?void 0:X.blockSize)!==null&&j!==void 0?j:J.contentRect.height;if(le===te)return;le-e.itemSize===0?m.delete(ne):m.set(ne,le-e.itemSize);const Ee=le-te;if(Ee===0)return;Z.add(W,Ee);const Ae=v.value;if(Ae!=null){if(E===void 0){const ve=Z.sum(W);Ae.scrollTop>ve&&Ae.scrollBy(0,Ee)}else if(W<E)Ae.scrollBy(0,Ee);else if(W===E){const ve=Z.sum(W);le+ve>Ae.scrollTop+Ae.offsetHeight&&Ae.scrollBy(0,Ee)}Q()}f.value++}const N=!ensureMaybeTouch();let O=!1;function F(ne){var J;(J=e.onScroll)===null||J===void 0||J.call(e,ne),(!N||!O)&&Q()}function U(ne){var J;if((J=e.onWheel)===null||J===void 0||J.call(e,ne),N){const re=v.value;if(re!=null){if(ne.deltaX===0&&(re.scrollTop===0&&ne.deltaY<=0||re.scrollTop+re.offsetHeight>=re.scrollHeight&&ne.deltaY>=0))return;ne.preventDefault(),re.scrollTop+=ne.deltaY/ensureWheelScale(),re.scrollLeft+=ne.deltaX/ensureWheelScale(),Q(),O=!0,beforeNextFrameOnce(()=>{O=!1})}}}function Y(ne){if(r||q(ne.target))return;if(e.renderCol==null&&e.renderItemWithCols==null){if(ne.contentRect.height===y.value)return}else if(ne.contentRect.height===y.value&&ne.contentRect.width===g.value)return;y.value=ne.contentRect.height,g.value=ne.contentRect.width;const{onResize:J}=e;J!==void 0&&J(ne)}function Q(){const{value:ne}=v;ne!=null&&(x.value=ne.scrollTop,w.value=ne.scrollLeft)}function q(ne){let J=ne;for(;J!==null;){if(J.style.display==="none")return!0;J=J.parentElement}return!1}return{listHeight:y,listStyle:{overflow:"auto"},keyToIndex:s,itemsStyle:computed(()=>{const{itemResizable:ne}=e,J=pxfy(d.value.sum());return f.value,[e.itemsStyle,{boxSizing:"content-box",width:pxfy(u.value),height:ne?"":J,minHeight:ne?J:"",paddingTop:pxfy(e.paddingTop),paddingBottom:pxfy(e.paddingBottom)}]}),visibleItemsStyle:computed(()=>(f.value,{transform:`translateY(${pxfy(d.value.sum(k.value))})`})),viewportItems:P,listElRef:v,itemsElRef:ref(null),scrollTo:S,handleListResize:Y,handleListScroll:F,handleListWheel:U,handleItemResize:I}},render(){const{itemResizable:e,keyField:n,keyToIndex:r,visibleItemsTag:o}=this;return h$1(VResizeObserver,{onResize:this.handleListResize},{default:()=>{var u,s;return h$1("div",mergeProps(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?h$1("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[h$1(o,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>{const{renderCol:w,renderItemWithCols:g}=this;return this.viewportItems.map(v=>{const y=v[n],m=r.get(y),d=w!=null?h$1(VirtualListRow,{index:m,item:v}):void 0,f=g!=null?h$1(VirtualListRow,{index:m,item:v}):void 0,x=this.$slots.default({item:v,renderedCols:d,renderedItemWithCols:f,index:m})[0];return e?h$1(VResizeObserver,{key:y,onResize:k=>this.handleItemResize(y,k)},{default:()=>x}):(x.key=y,x)})}})]):(s=(u=this.$slots).empty)===null||s===void 0?void 0:s.call(u)])}})}}),hiddenAttr="v-hidden",style$q=c("[v-hidden]",{display:"none!important"}),VOverflow=defineComponent({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(e,{slots:n}){const r=ref(null),o=ref(null);function u(w){const{value:g}=r,{getCounter:v,getTail:y}=e;let m;if(v!==void 0?m=v():m=o.value,!g||!m)return;m.hasAttribute(hiddenAttr)&&m.removeAttribute(hiddenAttr);const{children:d}=g;if(w.showAllItemsBeforeCalculate)for(const T of d)T.hasAttribute(hiddenAttr)&&T.removeAttribute(hiddenAttr);const f=g.offsetWidth,x=[],k=n.tail?y==null?void 0:y():null;let P=k?k.offsetWidth:0,S=!1;const E=g.children.length-(n.tail?1:0);for(let T=0;T<E-1;++T){if(T<0)continue;const D=d[T];if(S){D.hasAttribute(hiddenAttr)||D.setAttribute(hiddenAttr,"");continue}else D.hasAttribute(hiddenAttr)&&D.removeAttribute(hiddenAttr);const I=D.offsetWidth;if(P+=I,x[T]=I,P>f){const{updateCounter:N}=e;for(let O=T;O>=0;--O){const F=E-1-O;N!==void 0?N(F):m.textContent=`${F}`;const U=m.offsetWidth;if(P-=x[O],P+U<=f||O===0){S=!0,T=O-1,k&&(T===-1?(k.style.maxWidth=`${f-U}px`,k.style.boxSizing="border-box"):k.style.maxWidth="");const{onUpdateCount:Y}=e;Y&&Y(F);break}}}}const{onUpdateOverflow:M}=e;S?M!==void 0&&M(!0):(M!==void 0&&M(!1),m.setAttribute(hiddenAttr,""))}const s=useSsrAdapter();return style$q.mount({id:"vueuc/overflow",head:!0,anchorMetaName:cssrAnchorMetaName$1,ssr:s}),onMounted(()=>u({showAllItemsBeforeCalculate:!1})),{selfRef:r,counterRef:o,sync:u}},render(){const{$slots:e}=this;return nextTick(()=>this.sync({showAllItemsBeforeCalculate:!1})),h$1("div",{class:"v-overflow",ref:"selfRef"},[renderSlot(e,"default"),e.counter?e.counter():h$1("span",{style:{display:"inline-block"},ref:"counterRef"}),e.tail?e.tail():null])}});function isHTMLElement(e){return e instanceof HTMLElement}function focusFirstDescendant(e){for(let n=0;n<e.childNodes.length;n++){const r=e.childNodes[n];if(isHTMLElement(r)&&(attemptFocus(r)||focusFirstDescendant(r)))return!0}return!1}function focusLastDescendant(e){for(let n=e.childNodes.length-1;n>=0;n--){const r=e.childNodes[n];if(isHTMLElement(r)&&(attemptFocus(r)||focusLastDescendant(r)))return!0}return!1}function attemptFocus(e){if(!isFocusable(e))return!1;try{e.focus({preventScroll:!0})}catch{}return document.activeElement===e}function isFocusable(e){if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return e.type!=="hidden"&&e.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let stack=[];const FocusTrap=defineComponent({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(e){const n=createId(),r=ref(null),o=ref(null);let u=!1,s=!1;const w=typeof document>"u"?null:document.activeElement;function g(){return stack[stack.length-1]===n}function v(S){var E;S.code==="Escape"&&g()&&((E=e.onEsc)===null||E===void 0||E.call(e,S))}onMounted(()=>{watch(()=>e.active,S=>{S?(d(),on$1("keydown",document,v)):(off$1("keydown",document,v),u&&f())},{immediate:!0})}),onBeforeUnmount(()=>{off$1("keydown",document,v),u&&f()});function y(S){if(!s&&g()){const E=m();if(E===null||E.contains(getPreciseEventTarget(S)))return;x("first")}}function m(){const S=r.value;if(S===null)return null;let E=S;for(;E=E.nextSibling,!(E===null||E instanceof Element&&E.tagName==="DIV"););return E}function d(){var S;if(!e.disabled){if(stack.push(n),e.autoFocus){const{initialFocusTo:E}=e;E===void 0?x("first"):(S=resolveTo(E))===null||S===void 0||S.focus({preventScroll:!0})}u=!0,document.addEventListener("focus",y,!0)}}function f(){var S;if(e.disabled||(document.removeEventListener("focus",y,!0),stack=stack.filter(M=>M!==n),g()))return;const{finalFocusTo:E}=e;E!==void 0?(S=resolveTo(E))===null||S===void 0||S.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&w instanceof HTMLElement&&(s=!0,w.focus({preventScroll:!0}),s=!1)}function x(S){if(!!g()&&e.active){const E=r.value,M=o.value;if(E!==null&&M!==null){const T=m();if(T==null||T===M){s=!0,E.focus({preventScroll:!0}),s=!1;return}s=!0;const D=S==="first"?focusFirstDescendant(T):focusLastDescendant(T);s=!1,D||(s=!0,E.focus({preventScroll:!0}),s=!1)}}}function k(S){if(s)return;const E=m();E!==null&&(S.relatedTarget!==null&&E.contains(S.relatedTarget)?x("last"):x("first"))}function P(S){s||(S.relatedTarget!==null&&S.relatedTarget===r.value?x("last"):x("first"))}return{focusableStartRef:r,focusableEndRef:o,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:k,handleEndFocus:P}},render(){const{default:e}=this.$slots;if(e===void 0)return null;if(this.disabled)return e();const{active:n,focusableStyle:r}=this;return h$1(Fragment,null,[h$1("div",{"aria-hidden":"true",tabindex:n?"0":"-1",ref:"focusableStartRef",style:r,onFocus:this.handleStartFocus}),e(),h$1("div",{"aria-hidden":"true",style:r,ref:"focusableEndRef",tabindex:n?"0":"-1",onFocus:this.handleEndFocus})])}});function useOnResize(e,n){n&&(onMounted(()=>{const{value:r}=e;r&&resizeObserverManager.registerHandler(r,n)}),watch(e,(r,o)=>{o&&resizeObserverManager.unregisterHandler(o)},{deep:!1}),onBeforeUnmount(()=>{const{value:r}=e;r&&resizeObserverManager.unregisterHandler(r)}))}function color2Class(e){return e.replace(/#|\(|\)|,|\s|\./g,"_")}const pureNumberRegex=/^(\d|\.)+$/,numberRegex=/(\d|\.)+/;function formatLength(e,{c:n=1,offset:r=0,attachPx:o=!0}={}){if(typeof e=="number"){const u=(e+r)*n;return u===0?"0":`${u}px`}else if(typeof e=="string")if(pureNumberRegex.test(e)){const u=(Number(e)+r)*n;return o?u===0?"0":`${u}px`:`${u}`}else{const u=numberRegex.exec(e);return u?e.replace(numberRegex,String((Number(u[0])+r)*n)):e}return e}function rtlInset(e){const{left:n,right:r,top:o,bottom:u}=getMargin(e);return`${o} ${n} ${u} ${r}`}let _isJsdom;function isJsdom(){return _isJsdom===void 0&&(_isJsdom=navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),_isJsdom}const eventSet=new WeakSet;function markEventEffectPerformed(e){eventSet.add(e)}function eventEffectNotPerformed(e){return!eventSet.has(e)}function getTitleAttribute(e){switch(typeof e){case"string":return e||void 0;case"number":return String(e);default:return}}function warn(e,n){console.error(`[naive/${e}]: ${n}`)}function throwError(e,n){throw new Error(`[naive/${e}]: ${n}`)}function call(e,...n){if(Array.isArray(e))e.forEach(r=>call(r,...n));else return e(...n)}function createRefSetter(e){return n=>{n?e.value=n.$el:e.value=null}}function flatten$1(e,n=!0,r=[]){return e.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&r.push(createTextVNode(String(o)));return}if(Array.isArray(o)){flatten$1(o,n,r);return}if(o.type===Fragment){if(o.children===null)return;Array.isArray(o.children)&&flatten$1(o.children,n,r)}else{if(o.type===Comment&&n)return;r.push(o)}}}),r}function getFirstSlotVNode(e,n="default",r=void 0){const o=e[n];if(!o)return warn("getFirstSlotVNode",`slot[${n}] is empty`),null;const u=flatten$1(o(r));return u.length===1?u[0]:(warn("getFirstSlotVNode",`slot[${n}] should have exactly one child`),null)}function getFirstSlotVNodeWithTypedProps(e,n,r){if(!n)return null;const o=flatten$1(n(r));return o.length===1?o[0]:(warn("getFirstSlotVNode",`slot[${e}] should have exactly one child`),null)}function keep(e,n=[],r){const o={};return n.forEach(u=>{o[u]=e[u]}),Object.assign(o,r)}function keysOf(e){return Object.keys(e)}function mergeEventHandlers(e){const n=e.filter(r=>r!==void 0);if(n.length!==0)return n.length===1?n[0]:r=>{e.forEach(o=>{o&&o(r)})}}function omit(e,n=[],r){const o={};return Object.getOwnPropertyNames(e).forEach(s=>{n.includes(s)||(o[s]=e[s])}),Object.assign(o,r)}function render(e,...n){return typeof e=="function"?e(...n):typeof e=="string"?createTextVNode(e):typeof e=="number"?createTextVNode(String(e)):null}function ensureValidVNode(e){return e.some(n=>isVNode$1(n)?!(n.type===Comment||n.type===Fragment&&!ensureValidVNode(n.children)):!0)?e:null}function resolveSlot(e,n){return e&&ensureValidVNode(e())||n()}function resolveSlotWithTypedProps(e,n,r){return e&&ensureValidVNode(e(n))||r(n)}function resolveWrappedSlot(e,n){const r=e&&ensureValidVNode(e());return n(r||null)}function isSlotEmpty(e){return!(e&&ensureValidVNode(e()))}const Wrapper=defineComponent({render(){var e,n;return(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e)}}),configProviderInjectionKey="n-config-provider",defaultClsPrefix="n";function useConfig(e={},n={defaultBordered:!0}){const r=inject(configProviderInjectionKey,null);return{inlineThemeDisabled:r==null?void 0:r.inlineThemeDisabled,mergedRtlRef:r==null?void 0:r.mergedRtlRef,mergedComponentPropsRef:r==null?void 0:r.mergedComponentPropsRef,mergedBreakpointsRef:r==null?void 0:r.mergedBreakpointsRef,mergedBorderedRef:computed(()=>{var o,u;const{bordered:s}=e;return s!==void 0?s:(u=(o=r==null?void 0:r.mergedBorderedRef.value)!==null&&o!==void 0?o:n.defaultBordered)!==null&&u!==void 0?u:!0}),mergedClsPrefixRef:r?r.mergedClsPrefixRef:shallowRef(defaultClsPrefix),namespaceRef:computed(()=>r==null?void 0:r.mergedNamespaceRef.value)}}function useThemeClass(e,n,r,o){r||throwError("useThemeClass","cssVarsRef is not passed");const u=inject(configProviderInjectionKey,null),s=u==null?void 0:u.mergedThemeHashRef,w=u==null?void 0:u.styleMountTarget,g=ref(""),v=useSsrAdapter();let y;const m=`__${e}`,d=()=>{let f=m;const x=n?n.value:void 0,k=s==null?void 0:s.value;k&&(f+=`-${k}`),x&&(f+=`-${x}`);const{themeOverrides:P,builtinThemeOverrides:S}=o;P&&(f+=`-${murmur2(JSON.stringify(P))}`),S&&(f+=`-${murmur2(JSON.stringify(S))}`),g.value=f,y=()=>{const E=r.value;let M="";for(const T in E)M+=`${T}: ${E[T]};`;c$1(`.${f}`,M).mount({id:f,ssr:v,parent:w}),y=void 0}};return watchEffect(()=>{d()}),{themeClass:g,onRender:()=>{y==null||y()}}}const formItemInjectionKey="n-form-item";function useFormItem(e,{defaultSize:n="medium",mergedSize:r,mergedDisabled:o}={}){const u=inject(formItemInjectionKey,null);provide(formItemInjectionKey,null);const s=computed(r?()=>r(u):()=>{const{size:v}=e;if(v)return v;if(u){const{mergedSize:y}=u;if(y.value!==void 0)return y.value}return n}),w=computed(o?()=>o(u):()=>{const{disabled:v}=e;return v!==void 0?v:u?u.disabled.value:!1}),g=computed(()=>{const{status:v}=e;return v||(u==null?void 0:u.mergedValidationStatus.value)});return onBeforeUnmount(()=>{u&&u.restoreValidation()}),{mergedSizeRef:s,mergedDisabledRef:w,mergedStatusRef:g,nTriggerFormBlur(){u&&u.handleContentBlur()},nTriggerFormChange(){u&&u.handleContentChange()},nTriggerFormFocus(){u&&u.handleContentFocus()},nTriggerFormInput(){u&&u.handleContentInput()}}}const enUS$1={name:"en-US",global:{undo:"Undo",redo:"Redo",confirm:"Confirm",clear:"Clear"},Popconfirm:{positiveText:"Confirm",negativeText:"Cancel"},Cascader:{placeholder:"Please Select",loading:"Loading",loadingRequiredMessage:e=>`Please load all ${e}'s descendants before checking it.`},Time:{dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss"},DatePicker:{yearFormat:"yyyy",monthFormat:"MMM",dayFormat:"eeeeee",yearTypeFormat:"yyyy",monthTypeFormat:"yyyy-MM",dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss",quarterFormat:"yyyy-qqq",weekFormat:"YYYY-w",clear:"Clear",now:"Now",confirm:"Confirm",selectTime:"Select Time",selectDate:"Select Date",datePlaceholder:"Select Date",datetimePlaceholder:"Select Date and Time",monthPlaceholder:"Select Month",yearPlaceholder:"Select Year",quarterPlaceholder:"Select Quarter",weekPlaceholder:"Select Week",startDatePlaceholder:"Start Date",endDatePlaceholder:"End Date",startDatetimePlaceholder:"Start Date and Time",endDatetimePlaceholder:"End Date and Time",startMonthPlaceholder:"Start Month",endMonthPlaceholder:"End Month",monthBeforeYear:!0,firstDayOfWeek:6,today:"Today"},DataTable:{checkTableAll:"Select all in the table",uncheckTableAll:"Unselect all in the table",confirm:"Confirm",clear:"Clear"},LegacyTransfer:{sourceTitle:"Source",targetTitle:"Target"},Transfer:{selectAll:"Select all",unselectAll:"Unselect all",clearAll:"Clear",total:e=>`Total ${e} items`,selected:e=>`${e} items selected`},Empty:{description:"No Data"},Select:{placeholder:"Please Select"},TimePicker:{placeholder:"Select Time",positiveText:"OK",negativeText:"Cancel",now:"Now",clear:"Clear"},Pagination:{goto:"Goto",selectionSuffix:"page"},DynamicTags:{add:"Add"},Log:{loading:"Loading"},Input:{placeholder:"Please Input"},InputNumber:{placeholder:"Please Input"},DynamicInput:{create:"Create"},ThemeEditor:{title:"Theme Editor",clearAllVars:"Clear All Variables",clearSearch:"Clear Search",filterCompName:"Filter Component Name",filterVarName:"Filter Variable Name",import:"Import",export:"Export",restore:"Reset to Default"},Image:{tipPrevious:"Previous picture (\u2190)",tipNext:"Next picture (\u2192)",tipCounterclockwise:"Counterclockwise",tipClockwise:"Clockwise",tipZoomOut:"Zoom out",tipZoomIn:"Zoom in",tipDownload:"Download",tipClose:"Close (Esc)",tipOriginalSize:"Zoom to original size"}},enUS$2=enUS$1;function buildFormatLongFn(e){return(n={})=>{const r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}function buildLocalizeFn(e){return(n,r)=>{const o=r!=null&&r.context?String(r.context):"standalone";let u;if(o==="formatting"&&e.formattingValues){const w=e.defaultFormattingWidth||e.defaultWidth,g=r!=null&&r.width?String(r.width):w;u=e.formattingValues[g]||e.formattingValues[w]}else{const w=e.defaultWidth,g=r!=null&&r.width?String(r.width):e.defaultWidth;u=e.values[g]||e.values[w]}const s=e.argumentCallback?e.argumentCallback(n):n;return u[s]}}function buildMatchFn(e){return(n,r={})=>{const o=r.width,u=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],s=n.match(u);if(!s)return null;const w=s[0],g=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth],v=Array.isArray(g)?findIndex$1(g,d=>d.test(w)):findKey(g,d=>d.test(w));let y;y=e.valueCallback?e.valueCallback(v):v,y=r.valueCallback?r.valueCallback(y):y;const m=n.slice(w.length);return{value:y,rest:m}}}function findKey(e,n){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n(e[r]))return r}function findIndex$1(e,n){for(let r=0;r<e.length;r++)if(n(e[r]))return r}function buildMatchPatternFn(e){return(n,r={})=>{const o=n.match(e.matchPattern);if(!o)return null;const u=o[0],s=n.match(e.parsePattern);if(!s)return null;let w=e.valueCallback?e.valueCallback(s[0]):s[0];w=r.valueCallback?r.valueCallback(w):w;const g=n.slice(u.length);return{value:w,rest:g}}}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(e,n,r)=>{let o;const u=formatDistanceLocale[e];return typeof u=="string"?o=u:n===1?o=u.one:o=u.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+o:o+" ago":o},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(e,n,r,o)=>formatRelativeLocale[e],eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(e,n)=>{const r=Number(e),o=r%100;if(o>20||o<10)switch(o%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:e=>e-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})},matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:e=>parseInt(e,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:e=>e+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}},dateEnUs={name:"en-US",locale:enUS},dateEnUS=dateEnUs;var freeGlobal$1=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$2=freeGlobal$1;var freeSelf$1=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal$2||freeSelf$1||Function("return this")();const root$2=root$1;var Symbol$1=root$2.Symbol;const Symbol$2=Symbol$1;var objectProto$f=Object.prototype,hasOwnProperty$b=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(e){var n=hasOwnProperty$b.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var o=!0}catch{}var u=nativeObjectToString$1.call(e);return o&&(n?e[symToStringTag$1]=r:delete e[symToStringTag$1]),u}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString$1(e){return nativeObjectToString.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(e){return e==null?e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString$1(e)}function isObjectLike$1(e){return e!=null&&typeof e=="object"}var symbolTag$2="[object Symbol]";function isSymbol$1(e){return typeof e=="symbol"||isObjectLike$1(e)&&baseGetTag(e)==symbolTag$2}function arrayMap(e,n){for(var r=-1,o=e==null?0:e.length,u=Array(o);++r<o;)u[r]=n(e[r],r,e);return u}var isArray$1=Array.isArray;const isArray$2=isArray$1;var INFINITY$1=1/0,symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString(e){if(typeof e=="string")return e;if(isArray$2(e))return arrayMap(e,baseToString)+"";if(isSymbol$1(e))return symbolToString?symbolToString.call(e):"";var n=e+"";return n=="0"&&1/e==-INFINITY$1?"-0":n}function isObject$2(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function identity$1(e){return e}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(e){if(!isObject$2(e))return!1;var n=baseGetTag(e);return n==funcTag$1||n==genTag||n==asyncTag||n==proxyTag}var coreJsData=root$2["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(e){if(e!=null){try{return funcToString$2.call(e)}catch{}try{return e+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$a=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$a).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){if(!isObject$2(e)||isMasked(e))return!1;var n=isFunction$1(e)?reIsNative:reIsHostCtor;return n.test(toSource(e))}function getValue(e,n){return e==null?void 0:e[n]}function getNative(e,n){var r=getValue(e,n);return baseIsNative(r)?r:void 0}var WeakMap$1=getNative(root$2,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function e(){}return function(n){if(!isObject$2(n))return{};if(objectCreate)return objectCreate(n);e.prototype=n;var r=new e;return e.prototype=void 0,r}}();const baseCreate$1=baseCreate;function apply(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}function copyArray(e,n){var r=-1,o=e.length;for(n||(n=Array(o));++r<o;)n[r]=e[r];return n}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var n=0,r=0;return function(){var o=nativeNow(),u=HOT_SPAN-(o-r);if(r=o,u>0){if(++n>=HOT_COUNT)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function constant(e){return function(){return e}}var defineProperty=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(e,n){return defineProperty$1(e,"toString",{configurable:!0,enumerable:!1,value:constant(n),writable:!0})}:identity$1;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,n){var r=typeof e;return n=n==null?MAX_SAFE_INTEGER$1:n,!!n&&(r=="number"||r!="symbol"&&reIsUint.test(e))&&e>-1&&e%1==0&&e<n}function baseAssignValue(e,n,r){n=="__proto__"&&defineProperty$1?defineProperty$1(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}function eq(e,n){return e===n||e!==e&&n!==n}var objectProto$c=Object.prototype,hasOwnProperty$9=objectProto$c.hasOwnProperty;function assignValue(e,n,r){var o=e[n];(!(hasOwnProperty$9.call(e,n)&&eq(o,r))||r===void 0&&!(n in e))&&baseAssignValue(e,n,r)}function copyObject(e,n,r,o){var u=!r;r||(r={});for(var s=-1,w=n.length;++s<w;){var g=n[s],v=o?o(r[g],e[g],g,r,e):void 0;v===void 0&&(v=e[g]),u?baseAssignValue(r,g,v):assignValue(r,g,v)}return r}var nativeMax$1=Math.max;function overRest(e,n,r){return n=nativeMax$1(n===void 0?e.length-1:n,0),function(){for(var o=arguments,u=-1,s=nativeMax$1(o.length-n,0),w=Array(s);++u<s;)w[u]=o[n+u];u=-1;for(var g=Array(n+1);++u<n;)g[u]=o[u];return g[n]=r(w),apply(e,this,g)}}function baseRest(e,n){return setToString$1(overRest(e,n,identity$1),e+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isArrayLike(e){return e!=null&&isLength(e.length)&&!isFunction$1(e)}function isIterateeCall(e,n,r){if(!isObject$2(r))return!1;var o=typeof n;return(o=="number"?isArrayLike(r)&&isIndex(n,r.length):o=="string"&&n in r)?eq(r[n],e):!1}function createAssigner(e){return baseRest(function(n,r){var o=-1,u=r.length,s=u>1?r[u-1]:void 0,w=u>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(u--,s):void 0,w&&isIterateeCall(r[0],r[1],w)&&(s=u<3?void 0:s,u=1),n=Object(n);++o<u;){var g=r[o];g&&e(n,g,o,s)}return n})}var objectProto$b=Object.prototype;function isPrototype(e){var n=e&&e.constructor,r=typeof n=="function"&&n.prototype||objectProto$b;return e===r}function baseTimes(e,n){for(var r=-1,o=Array(e);++r<e;)o[r]=n(r);return o}var argsTag$2="[object Arguments]";function baseIsArguments(e){return isObjectLike$1(e)&&baseGetTag(e)==argsTag$2}var objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike$1(e)&&hasOwnProperty$8.call(e,"callee")&&!propertyIsEnumerable$1.call(e,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$2.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse;const isBuffer$2=isBuffer$1;var argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$3="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(e){return isObjectLike$1(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(e){return function(n){return e(n)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$2.process,nodeUtil=function(){try{var e=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return e||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$2=isTypedArray$1;var objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function arrayLikeKeys(e,n){var r=isArray$2(e),o=!r&&isArguments$1(e),u=!r&&!o&&isBuffer$2(e),s=!r&&!o&&!u&&isTypedArray$2(e),w=r||o||u||s,g=w?baseTimes(e.length,String):[],v=g.length;for(var y in e)(n||hasOwnProperty$7.call(e,y))&&!(w&&(y=="length"||u&&(y=="offset"||y=="parent")||s&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||isIndex(y,v)))&&g.push(y);return g}function overArg(e,n){return function(r){return e(n(r))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function baseKeys(e){if(!isPrototype(e))return nativeKeys$1(e);var n=[];for(var r in Object(e))hasOwnProperty$6.call(e,r)&&r!="constructor"&&n.push(r);return n}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function nativeKeysIn(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}var objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function baseKeysIn(e){if(!isObject$2(e))return nativeKeysIn(e);var n=isPrototype(e),r=[];for(var o in e)o=="constructor"&&(n||!hasOwnProperty$5.call(e,o))||r.push(o);return r}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,n){if(isArray$2(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||isSymbol$1(e)?!0:reIsPlainProp.test(e)||!reIsDeepProp.test(e)||n!=null&&e in Object(n)}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty;function hashGet(e){var n=this.__data__;if(nativeCreate$1){var r=n[e];return r===HASH_UNDEFINED$2?void 0:r}return hasOwnProperty$4.call(n,e)?n[e]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty;function hashHas(e){var n=this.__data__;return nativeCreate$1?n[e]!==void 0:hasOwnProperty$3.call(n,e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nativeCreate$1&&n===void 0?HASH_UNDEFINED$1:n,this}function Hash(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(e,n){for(var r=e.length;r--;)if(eq(e[r][0],n))return r;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var n=this.__data__,r=assocIndexOf(n,e);if(r<0)return!1;var o=n.length-1;return r==o?n.pop():splice.call(n,r,1),--this.size,!0}function listCacheGet(e){var n=this.__data__,r=assocIndexOf(n,e);return r<0?void 0:n[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,n){var r=this.__data__,o=assocIndexOf(r,e);return o<0?(++this.size,r.push([e,n])):r[o][1]=n,this}function ListCache(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$2,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function getMapData(e,n){var r=e.__data__;return isKeyable(n)?r[typeof n=="string"?"string":"hash"]:r.map}function mapCacheDelete(e){var n=getMapData(this,e).delete(e);return this.size-=n?1:0,n}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,n){var r=getMapData(this,e),o=r.size;return r.set(e,n),this.size+=r.size==o?0:1,this}function MapCache(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var r=function(){var o=arguments,u=n?n.apply(this,o):o[0],s=r.cache;if(s.has(u))return s.get(u);var w=e.apply(this,o);return r.cache=s.set(u,w)||s,w};return r.cache=new(memoize.Cache||MapCache),r}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var n=memoize(e,function(o){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),o}),r=n.cache;return n}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(rePropName,function(r,o,u,s){n.push(u?s.replace(reEscapeChar,"$1"):o||r)}),n});const stringToPath$1=stringToPath;function toString$1(e){return e==null?"":baseToString(e)}function castPath(e,n){return isArray$2(e)?e:isKey(e,n)?[e]:stringToPath$1(toString$1(e))}var INFINITY=1/0;function toKey(e){if(typeof e=="string"||isSymbol$1(e))return e;var n=e+"";return n=="0"&&1/e==-INFINITY?"-0":n}function baseGet(e,n){n=castPath(n,e);for(var r=0,o=n.length;e!=null&&r<o;)e=e[toKey(n[r++])];return r&&r==o?e:void 0}function get(e,n,r){var o=e==null?void 0:baseGet(e,n);return o===void 0?r:o}function arrayPush(e,n){for(var r=-1,o=n.length,u=e.length;++r<o;)e[u+r]=n[r];return e}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$2="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$2=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$2(e){if(!isObjectLike$1(e)||baseGetTag(e)!=objectTag$2)return!1;var n=getPrototype$1(e);if(n===null)return!0;var r=hasOwnProperty$2.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&funcToString.call(r)==objectCtorString}function baseSlice(e,n,r){var o=-1,u=e.length;n<0&&(n=-n>u?0:u+n),r=r>u?u:r,r<0&&(r+=u),u=n>r?0:r-n>>>0,n>>>=0;for(var s=Array(u);++o<u;)s[o]=e[o+n];return s}function castSlice(e,n,r){var o=e.length;return r=r===void 0?o:r,!n&&r>=o?e:baseSlice(e,n,r)}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsZWJ$1="\\u200d",reHasUnicode=RegExp("["+rsZWJ$1+rsAstralRange$1+rsComboRange$1+rsVarRange$1+"]");function hasUnicode(e){return reHasUnicode.test(e)}function asciiToArray(e){return e.split("")}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray(e){return e.match(reUnicode)||[]}function stringToArray(e){return hasUnicode(e)?unicodeToArray(e):asciiToArray(e)}function createCaseFirst(e){return function(n){n=toString$1(n);var r=hasUnicode(n)?stringToArray(n):void 0,o=r?r[0]:n.charAt(0),u=r?castSlice(r,1).join(""):n.slice(1);return o[e]()+u}}var upperFirst=createCaseFirst("toUpperCase");const upperFirst$1=upperFirst;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}var LARGE_ARRAY_SIZE=200;function stackSet(e,n){var r=this.__data__;if(r instanceof ListCache){var o=r.__data__;if(!Map$2||o.length<LARGE_ARRAY_SIZE-1)return o.push([e,n]),this.size=++r.size,this;r=this.__data__=new MapCache(o)}return r.set(e,n),this.size=r.size,this}function Stack(e){var n=this.__data__=new ListCache(e);this.size=n.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$2.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(e,n){if(n)return e.slice();var r=e.length,o=allocUnsafe?allocUnsafe(r):new e.constructor(r);return e.copy(o),o}function arrayFilter(e,n){for(var r=-1,o=e==null?0:e.length,u=0,s=[];++r<o;){var w=e[r];n(w,r,e)&&(s[u++]=w)}return s}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(e){return e==null?[]:(e=Object(e),arrayFilter(nativeGetSymbols(e),function(n){return propertyIsEnumerable.call(e,n)}))}:stubArray;const getSymbols$1=getSymbols;function baseGetAllKeys(e,n,r){var o=n(e);return isArray$2(e)?o:arrayPush(o,r(e))}function getAllKeys(e){return baseGetAllKeys(e,keys,getSymbols$1)}var DataView$1=getNative(root$2,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$2,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$2,"Set");const Set$2=Set$1;var mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$1||Map$2&&getTag(new Map$2)!=mapTag$1||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$1||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag)&&(getTag=function(e){var n=baseGetTag(e),r=n==objectTag$1?e.constructor:void 0,o=r?toSource(r):"";if(o)switch(o){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return n});const getTag$1=getTag;var Uint8Array$1=root$2.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(e){var n=new e.constructor(e.byteLength);return new Uint8Array$2(n).set(new Uint8Array$2(e)),n}function cloneTypedArray(e,n){var r=n?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function initCloneObject(e){return typeof e.constructor=="function"&&!isPrototype(e)?baseCreate$1(getPrototype$1(e)):{}}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function SetCache(e){var n=-1,r=e==null?0:e.length;for(this.__data__=new MapCache;++n<r;)this.add(e[n])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(e,n){for(var r=-1,o=e==null?0:e.length;++r<o;)if(n(e[r],r,e))return!0;return!1}function cacheHas(e,n){return e.has(n)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(e,n,r,o,u,s){var w=r&COMPARE_PARTIAL_FLAG$5,g=e.length,v=n.length;if(g!=v&&!(w&&v>g))return!1;var y=s.get(e),m=s.get(n);if(y&&m)return y==n&&m==e;var d=-1,f=!0,x=r&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(s.set(e,n),s.set(n,e);++d<g;){var k=e[d],P=n[d];if(o)var S=w?o(P,k,d,n,e,s):o(k,P,d,e,n,s);if(S!==void 0){if(S)continue;f=!1;break}if(x){if(!arraySome(n,function(E,M){if(!cacheHas(x,M)&&(k===E||u(k,E,r,o,s)))return x.push(M)})){f=!1;break}}else if(!(k===P||u(k,P,r,o,s))){f=!1;break}}return s.delete(e),s.delete(n),f}function mapToArray(e){var n=-1,r=Array(e.size);return e.forEach(function(o,u){r[++n]=[u,o]}),r}function setToArray(e){var n=-1,r=Array(e.size);return e.forEach(function(o){r[++n]=o}),r}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(e,n,r,o,u,s,w){switch(r){case dataViewTag:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case arrayBufferTag:return!(e.byteLength!=n.byteLength||!s(new Uint8Array$2(e),new Uint8Array$2(n)));case boolTag:case dateTag:case numberTag:return eq(+e,+n);case errorTag:return e.name==n.name&&e.message==n.message;case regexpTag:case stringTag:return e==n+"";case mapTag:var g=mapToArray;case setTag:var v=o&COMPARE_PARTIAL_FLAG$4;if(g||(g=setToArray),e.size!=n.size&&!v)return!1;var y=w.get(e);if(y)return y==n;o|=COMPARE_UNORDERED_FLAG$2,w.set(e,n);var m=equalArrays(g(e),g(n),o,u,s,w);return w.delete(e),m;case symbolTag$1:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(n)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty;function equalObjects(e,n,r,o,u,s){var w=r&COMPARE_PARTIAL_FLAG$3,g=getAllKeys(e),v=g.length,y=getAllKeys(n),m=y.length;if(v!=m&&!w)return!1;for(var d=v;d--;){var f=g[d];if(!(w?f in n:hasOwnProperty$1.call(n,f)))return!1}var x=s.get(e),k=s.get(n);if(x&&k)return x==n&&k==e;var P=!0;s.set(e,n),s.set(n,e);for(var S=w;++d<v;){f=g[d];var E=e[f],M=n[f];if(o)var T=w?o(M,E,f,n,e,s):o(E,M,f,e,n,s);if(!(T===void 0?E===M||u(E,M,r,o,s):T)){P=!1;break}S||(S=f=="constructor")}if(P&&!S){var D=e.constructor,I=n.constructor;D!=I&&"constructor"in e&&"constructor"in n&&!(typeof D=="function"&&D instanceof D&&typeof I=="function"&&I instanceof I)&&(P=!1)}return s.delete(e),s.delete(n),P}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty;function baseIsEqualDeep(e,n,r,o,u,s){var w=isArray$2(e),g=isArray$2(n),v=w?arrayTag:getTag$1(e),y=g?arrayTag:getTag$1(n);v=v==argsTag?objectTag:v,y=y==argsTag?objectTag:y;var m=v==objectTag,d=y==objectTag,f=v==y;if(f&&isBuffer$2(e)){if(!isBuffer$2(n))return!1;w=!0,m=!1}if(f&&!m)return s||(s=new Stack),w||isTypedArray$2(e)?equalArrays(e,n,r,o,u,s):equalByTag(e,n,v,r,o,u,s);if(!(r&COMPARE_PARTIAL_FLAG$2)){var x=m&&hasOwnProperty.call(e,"__wrapped__"),k=d&&hasOwnProperty.call(n,"__wrapped__");if(x||k){var P=x?e.value():e,S=k?n.value():n;return s||(s=new Stack),u(P,S,r,o,s)}}return f?(s||(s=new Stack),equalObjects(e,n,r,o,u,s)):!1}function baseIsEqual(e,n,r,o,u){return e===n?!0:e==null||n==null||!isObjectLike$1(e)&&!isObjectLike$1(n)?e!==e&&n!==n:baseIsEqualDeep(e,n,r,o,baseIsEqual,u)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(e,n,r,o){var u=r.length,s=u,w=!o;if(e==null)return!s;for(e=Object(e);u--;){var g=r[u];if(w&&g[2]?g[1]!==e[g[0]]:!(g[0]in e))return!1}for(;++u<s;){g=r[u];var v=g[0],y=e[v],m=g[1];if(w&&g[2]){if(y===void 0&&!(v in e))return!1}else{var d=new Stack;if(o)var f=o(y,m,v,e,n,d);if(!(f===void 0?baseIsEqual(m,y,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,o,d):f))return!1}}return!0}function isStrictComparable(e){return e===e&&!isObject$2(e)}function getMatchData(e){for(var n=keys(e),r=n.length;r--;){var o=n[r],u=e[o];n[r]=[o,u,isStrictComparable(u)]}return n}function matchesStrictComparable(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}function baseMatches(e){var n=getMatchData(e);return n.length==1&&n[0][2]?matchesStrictComparable(n[0][0],n[0][1]):function(r){return r===e||baseIsMatch(r,e,n)}}function baseHasIn(e,n){return e!=null&&n in Object(e)}function hasPath(e,n,r){n=castPath(n,e);for(var o=-1,u=n.length,s=!1;++o<u;){var w=toKey(n[o]);if(!(s=e!=null&&r(e,w)))break;e=e[w]}return s||++o!=u?s:(u=e==null?0:e.length,!!u&&isLength(u)&&isIndex(w,u)&&(isArray$2(e)||isArguments$1(e)))}function hasIn(e,n){return e!=null&&hasPath(e,n,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(e,n){return isKey(e)&&isStrictComparable(n)?matchesStrictComparable(toKey(e),n):function(r){var o=get(r,e);return o===void 0&&o===n?hasIn(r,e):baseIsEqual(n,o,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(e){return function(n){return n==null?void 0:n[e]}}function basePropertyDeep(e){return function(n){return baseGet(n,e)}}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function baseIteratee(e){return typeof e=="function"?e:e==null?identity$1:typeof e=="object"?isArray$2(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function createBaseFor(e){return function(n,r,o){for(var u=-1,s=Object(n),w=o(n),g=w.length;g--;){var v=w[e?g:++u];if(r(s[v],v,s)===!1)break}return n}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(e,n){return e&&baseFor$1(e,n,keys)}function createBaseEach(e,n){return function(r,o){if(r==null)return r;if(!isArrayLike(r))return e(r,o);for(var u=r.length,s=n?u:-1,w=Object(r);(n?s--:++s<u)&&o(w[s],s,w)!==!1;);return r}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;function assignMergeValue(e,n,r){(r!==void 0&&!eq(e[n],r)||r===void 0&&!(n in e))&&baseAssignValue(e,n,r)}function isArrayLikeObject(e){return isObjectLike$1(e)&&isArrayLike(e)}function safeGet(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}function toPlainObject(e){return copyObject(e,keysIn(e))}function baseMergeDeep(e,n,r,o,u,s,w){var g=safeGet(e,r),v=safeGet(n,r),y=w.get(v);if(y){assignMergeValue(e,r,y);return}var m=s?s(g,v,r+"",e,n,w):void 0,d=m===void 0;if(d){var f=isArray$2(v),x=!f&&isBuffer$2(v),k=!f&&!x&&isTypedArray$2(v);m=v,f||x||k?isArray$2(g)?m=g:isArrayLikeObject(g)?m=copyArray(g):x?(d=!1,m=cloneBuffer(v,!0)):k?(d=!1,m=cloneTypedArray(v,!0)):m=[]:isPlainObject$2(v)||isArguments$1(v)?(m=g,isArguments$1(g)?m=toPlainObject(g):(!isObject$2(g)||isFunction$1(g))&&(m=initCloneObject(v))):d=!1}d&&(w.set(v,m),u(m,v,o,s,w),w.delete(v)),assignMergeValue(e,r,m)}function baseMerge(e,n,r,o,u){e!==n&&baseFor$1(n,function(s,w){if(u||(u=new Stack),isObject$2(s))baseMergeDeep(e,n,w,r,baseMerge,o,u);else{var g=o?o(safeGet(e,w),s,w+"",e,n,u):void 0;g===void 0&&(g=s),assignMergeValue(e,w,g)}},keysIn)}function baseMap(e,n){var r=-1,o=isArrayLike(e)?Array(e.length):[];return baseEach$1(e,function(u,s,w){o[++r]=n(u,s,w)}),o}function map(e,n){var r=isArray$2(e)?arrayMap:baseMap;return r(e,baseIteratee(n))}var merge$2=createAssigner(function(e,n,r){baseMerge(e,n,r)});const merge$3=merge$2;function useLocale(e){const{mergedLocaleRef:n,mergedDateLocaleRef:r}=inject(configProviderInjectionKey,null)||{},o=computed(()=>{var s,w;return(w=(s=n==null?void 0:n.value)===null||s===void 0?void 0:s[e])!==null&&w!==void 0?w:enUS$2[e]});return{dateLocaleRef:computed(()=>{var s;return(s=r==null?void 0:r.value)!==null&&s!==void 0?s:dateEnUS}),localeRef:o}}const cssrAnchorMetaName="naive-ui-style";function useRtl(e,n,r){if(!n)return;const o=useSsrAdapter(),u=computed(()=>{const{value:g}=n;if(!g)return;const v=g[e];if(!!v)return v}),s=inject(configProviderInjectionKey,null),w=()=>{watchEffect(()=>{const{value:g}=r,v=`${g}${e}Rtl`;if(exists(v,o))return;const{value:y}=u;!y||y.style.mount({id:v,head:!0,anchorMetaName:cssrAnchorMetaName,props:{bPrefix:g?`.${g}-`:void 0},ssr:o,parent:s==null?void 0:s.styleMountTarget})})};return o?w():onBeforeMount(w),u}const commonVariables$8={fontFamily:'v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontFamilyMono:"v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace",fontWeight:"400",fontWeightStrong:"500",cubicBezierEaseInOut:"cubic-bezier(.4, 0, .2, 1)",cubicBezierEaseOut:"cubic-bezier(0, 0, .2, 1)",cubicBezierEaseIn:"cubic-bezier(.4, 0, 1, 1)",borderRadius:"3px",borderRadiusSmall:"2px",fontSize:"14px",fontSizeMini:"12px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",lineHeight:"1.6",heightMini:"16px",heightTiny:"22px",heightSmall:"28px",heightMedium:"34px",heightLarge:"40px",heightHuge:"46px"},{fontSize,fontFamily,lineHeight}=commonVariables$8,globalStyle=c$1("body",`
 margin: 0;
 font-size: ${fontSize};
 font-family: ${fontFamily};
 line-height: ${lineHeight};
 -webkit-text-size-adjust: 100%;
 -webkit-tap-highlight-color: transparent;
`,[c$1("input",`
 font-family: inherit;
 font-size: inherit;
 `)]);function useStyle(e,n,r){if(!n)return;const o=useSsrAdapter(),u=inject(configProviderInjectionKey,null),s=()=>{const w=r.value;n.mount({id:w===void 0?e:w+e,head:!0,anchorMetaName:cssrAnchorMetaName,props:{bPrefix:w?`.${w}-`:void 0},ssr:o,parent:u==null?void 0:u.styleMountTarget}),u!=null&&u.preflightStyleDisabled||globalStyle.mount({id:"n-global",head:!0,anchorMetaName:cssrAnchorMetaName,ssr:o,parent:u==null?void 0:u.styleMountTarget})};o?s():onBeforeMount(s)}function createTheme(e){return e}function useTheme(e,n,r,o,u,s){const w=useSsrAdapter(),g=inject(configProviderInjectionKey,null);if(r){const y=()=>{const m=s==null?void 0:s.value;r.mount({id:m===void 0?n:m+n,head:!0,props:{bPrefix:m?`.${m}-`:void 0},anchorMetaName:cssrAnchorMetaName,ssr:w,parent:g==null?void 0:g.styleMountTarget}),g!=null&&g.preflightStyleDisabled||globalStyle.mount({id:"n-global",head:!0,anchorMetaName:cssrAnchorMetaName,ssr:w,parent:g==null?void 0:g.styleMountTarget})};w?y():onBeforeMount(y)}return computed(()=>{var y;const{theme:{common:m,self:d,peers:f={}}={},themeOverrides:x={},builtinThemeOverrides:k={}}=u,{common:P,peers:S}=x,{common:E=void 0,[e]:{common:M=void 0,self:T=void 0,peers:D={}}={}}=(g==null?void 0:g.mergedThemeRef.value)||{},{common:I=void 0,[e]:N={}}=(g==null?void 0:g.mergedThemeOverridesRef.value)||{},{common:O,peers:F={}}=N,U=merge$3({},m||M||E||o.common,I,O,P),Y=merge$3((y=d||T||o.self)===null||y===void 0?void 0:y(U),k,N,x);return{common:U,self:Y,peers:merge$3({},o.peers,D,f),peerOverrides:merge$3({},k.peers,F,S)}})}useTheme.props={theme:Object,themeOverrides:Object,builtinThemeOverrides:Object};const style$p=cB("base-icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
 transform: translateZ(0);
`,[c$1("svg",`
 height: 1em;
 width: 1em;
 `)]),NBaseIcon=defineComponent({name:"BaseIcon",props:{role:String,ariaLabel:String,ariaDisabled:{type:Boolean,default:void 0},ariaHidden:{type:Boolean,default:void 0},clsPrefix:{type:String,required:!0},onClick:Function,onMousedown:Function,onMouseup:Function},setup(e){useStyle("-base-icon",style$p,toRef(e,"clsPrefix"))},render(){return h$1("i",{class:`${this.clsPrefix}-base-icon`,onClick:this.onClick,onMousedown:this.onMousedown,onMouseup:this.onMouseup,role:this.role,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,"aria-disabled":this.ariaDisabled},this.$slots)}}),NIconSwitchTransition=defineComponent({name:"BaseIconSwitchTransition",setup(e,{slots:n}){const r=isMounted();return()=>h$1(Transition,{name:"icon-switch-transition",appear:r.value},n)}}),AddIcon=defineComponent({name:"Add",render(){return h$1("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h$1("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}});function replaceable(e,n){const r=defineComponent({render(){return n()}});return defineComponent({name:upperFirst$1(e),setup(){var o;const u=(o=inject(configProviderInjectionKey,null))===null||o===void 0?void 0:o.mergedIconsRef;return()=>{var s;const w=(s=u==null?void 0:u.value)===null||s===void 0?void 0:s[e];return w?w():h$1(r,null)}}})}const FinishedIcon=defineComponent({name:"Checkmark",render(){return h$1("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},h$1("g",{fill:"none"},h$1("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),ChevronDownIcon=defineComponent({name:"ChevronDown",render(){return h$1("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h$1("path",{d:"M3.14645 5.64645C3.34171 5.45118 3.65829 5.45118 3.85355 5.64645L8 9.79289L12.1464 5.64645C12.3417 5.45118 12.6583 5.45118 12.8536 5.64645C13.0488 5.84171 13.0488 6.15829 12.8536 6.35355L8.35355 10.8536C8.15829 11.0488 7.84171 11.0488 7.64645 10.8536L3.14645 6.35355C2.95118 6.15829 2.95118 5.84171 3.14645 5.64645Z",fill:"currentColor"}))}}),ClearIcon=replaceable("clear",()=>h$1("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h$1("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},h$1("g",{fill:"currentColor","fill-rule":"nonzero"},h$1("path",{d:"M8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 Z M6.5343055,5.83859116 C6.33943736,5.70359511 6.07001296,5.72288026 5.89644661,5.89644661 L5.89644661,5.89644661 L5.83859116,5.9656945 C5.70359511,6.16056264 5.72288026,6.42998704 5.89644661,6.60355339 L5.89644661,6.60355339 L7.293,8 L5.89644661,9.39644661 L5.83859116,9.4656945 C5.70359511,9.66056264 5.72288026,9.92998704 5.89644661,10.1035534 L5.89644661,10.1035534 L5.9656945,10.1614088 C6.16056264,10.2964049 6.42998704,10.2771197 6.60355339,10.1035534 L6.60355339,10.1035534 L8,8.707 L9.39644661,10.1035534 L9.4656945,10.1614088 C9.66056264,10.2964049 9.92998704,10.2771197 10.1035534,10.1035534 L10.1035534,10.1035534 L10.1614088,10.0343055 C10.2964049,9.83943736 10.2771197,9.57001296 10.1035534,9.39644661 L10.1035534,9.39644661 L8.707,8 L10.1035534,6.60355339 L10.1614088,6.5343055 C10.2964049,6.33943736 10.2771197,6.07001296 10.1035534,5.89644661 L10.1035534,5.89644661 L10.0343055,5.83859116 C9.83943736,5.70359511 9.57001296,5.72288026 9.39644661,5.89644661 L9.39644661,5.89644661 L8,7.293 L6.60355339,5.89644661 Z"}))))),ErrorIcon$1=replaceable("close",()=>h$1("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0},h$1("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},h$1("g",{fill:"currentColor","fill-rule":"nonzero"},h$1("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),EmptyIcon=defineComponent({name:"Empty",render(){return h$1("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h$1("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),h$1("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),ErrorIcon=replaceable("error",()=>h$1("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h$1("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},h$1("g",{"fill-rule":"nonzero"},h$1("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M17.8838835,16.1161165 L17.7823881,16.0249942 C17.3266086,15.6583353 16.6733914,15.6583353 16.2176119,16.0249942 L16.1161165,16.1161165 L16.0249942,16.2176119 C15.6583353,16.6733914 15.6583353,17.3266086 16.0249942,17.7823881 L16.1161165,17.8838835 L22.233,24 L16.1161165,30.1161165 L16.0249942,30.2176119 C15.6583353,30.6733914 15.6583353,31.3266086 16.0249942,31.7823881 L16.1161165,31.8838835 L16.2176119,31.9750058 C16.6733914,32.3416647 17.3266086,32.3416647 17.7823881,31.9750058 L17.8838835,31.8838835 L24,25.767 L30.1161165,31.8838835 L30.2176119,31.9750058 C30.6733914,32.3416647 31.3266086,32.3416647 31.7823881,31.9750058 L31.8838835,31.8838835 L31.9750058,31.7823881 C32.3416647,31.3266086 32.3416647,30.6733914 31.9750058,30.2176119 L31.8838835,30.1161165 L25.767,24 L31.8838835,17.8838835 L31.9750058,17.7823881 C32.3416647,17.3266086 32.3416647,16.6733914 31.9750058,16.2176119 L31.8838835,16.1161165 L31.7823881,16.0249942 C31.3266086,15.6583353 30.6733914,15.6583353 30.2176119,16.0249942 L30.1161165,16.1161165 L24,22.233 L17.8838835,16.1161165 L17.7823881,16.0249942 L17.8838835,16.1161165 Z"}))))),EyeIcon=defineComponent({name:"Eye",render(){return h$1("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},h$1("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"}),h$1("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"}))}}),EyeOffIcon=defineComponent({name:"EyeOff",render(){return h$1("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},h$1("path",{d:"M432 448a15.92 15.92 0 0 1-11.31-4.69l-352-352a16 16 0 0 1 22.62-22.62l352 352A16 16 0 0 1 432 448z",fill:"currentColor"}),h$1("path",{d:"M255.66 384c-41.49 0-81.5-12.28-118.92-36.5c-34.07-22-64.74-53.51-88.7-91v-.08c19.94-28.57 41.78-52.73 65.24-72.21a2 2 0 0 0 .14-2.94L93.5 161.38a2 2 0 0 0-2.71-.12c-24.92 21-48.05 46.76-69.08 76.92a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416a239.13 239.13 0 0 0 75.8-12.58a2 2 0 0 0 .77-3.31l-21.58-21.58a4 4 0 0 0-3.83-1a204.8 204.8 0 0 1-51.16 6.47z",fill:"currentColor"}),h$1("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96a227.34 227.34 0 0 0-74.89 12.83a2 2 0 0 0-.75 3.31l21.55 21.55a4 4 0 0 0 3.88 1a192.82 192.82 0 0 1 50.21-6.69c40.69 0 80.58 12.43 118.55 37c34.71 22.4 65.74 53.88 89.76 91a.13.13 0 0 1 0 .16a310.72 310.72 0 0 1-64.12 72.73a2 2 0 0 0-.15 2.95l19.9 19.89a2 2 0 0 0 2.7.13a343.49 343.49 0 0 0 68.64-78.48a32.2 32.2 0 0 0-.1-34.78z",fill:"currentColor"}),h$1("path",{d:"M256 160a95.88 95.88 0 0 0-21.37 2.4a2 2 0 0 0-1 3.38l112.59 112.56a2 2 0 0 0 3.38-1A96 96 0 0 0 256 160z",fill:"currentColor"}),h$1("path",{d:"M165.78 233.66a2 2 0 0 0-3.38 1a96 96 0 0 0 115 115a2 2 0 0 0 1-3.38z",fill:"currentColor"}))}}),InfoIcon=replaceable("info",()=>h$1("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h$1("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},h$1("g",{"fill-rule":"nonzero"},h$1("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"}))))),RemoveIcon=defineComponent({name:"Remove",render(){return h$1("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},h$1("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),SuccessIcon=replaceable("success",()=>h$1("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h$1("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},h$1("g",{"fill-rule":"nonzero"},h$1("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.6338835,17.6161165 C32.1782718,17.1605048 31.4584514,17.1301307 30.9676119,17.5249942 L30.8661165,17.6161165 L20.75,27.732233 L17.1338835,24.1161165 C16.6457281,23.6279612 15.8542719,23.6279612 15.3661165,24.1161165 C14.9105048,24.5717282 14.8801307,25.2915486 15.2749942,25.7823881 L15.3661165,25.8838835 L19.8661165,30.3838835 C20.3217282,30.8394952 21.0415486,30.8698693 21.5323881,30.4750058 L21.6338835,30.3838835 L32.6338835,19.3838835 C33.1220388,18.8957281 33.1220388,18.1042719 32.6338835,17.6161165 Z"}))))),WarningIcon=replaceable("warning",()=>h$1("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},h$1("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},h$1("g",{"fill-rule":"nonzero"},h$1("path",{d:"M12,2 C17.523,2 22,6.478 22,12 C22,17.522 17.523,22 12,22 C6.477,22 2,17.522 2,12 C2,6.478 6.477,2 12,2 Z M12.0018002,15.0037242 C11.450254,15.0037242 11.0031376,15.4508407 11.0031376,16.0023869 C11.0031376,16.553933 11.450254,17.0010495 12.0018002,17.0010495 C12.5533463,17.0010495 13.0004628,16.553933 13.0004628,16.0023869 C13.0004628,15.4508407 12.5533463,15.0037242 12.0018002,15.0037242 Z M11.99964,7 C11.4868042,7.00018474 11.0642719,7.38637706 11.0066858,7.8837365 L11,8.00036004 L11.0018003,13.0012393 L11.00857,13.117858 C11.0665141,13.6151758 11.4893244,14.0010638 12.0021602,14.0008793 C12.514996,14.0006946 12.9375283,13.6145023 12.9951144,13.1171428 L13.0018002,13.0005193 L13,7.99964009 L12.9932303,7.8830214 C12.9352861,7.38570354 12.5124758,6.99981552 11.99964,7 Z"}))))),{cubicBezierEaseInOut:cubicBezierEaseInOut$3}=commonVariables$8;function iconSwitchTransition({originalTransform:e="",left:n=0,top:r=0,transition:o=`all .3s ${cubicBezierEaseInOut$3} !important`}={}){return[c$1("&.icon-switch-transition-enter-from, &.icon-switch-transition-leave-to",{transform:`${e} scale(0.75)`,left:n,top:r,opacity:0}),c$1("&.icon-switch-transition-enter-to, &.icon-switch-transition-leave-from",{transform:`scale(1) ${e}`,left:n,top:r,opacity:1}),c$1("&.icon-switch-transition-enter-active, &.icon-switch-transition-leave-active",{transformOrigin:"center",position:"absolute",left:n,top:r,transition:o})]}const style$o=cB("base-clear",`
 flex-shrink: 0;
 height: 1em;
 width: 1em;
 position: relative;
`,[c$1(">",[cE("clear",`
 font-size: var(--n-clear-size);
 height: 1em;
 width: 1em;
 cursor: pointer;
 color: var(--n-clear-color);
 transition: color .3s var(--n-bezier);
 display: flex;
 `,[c$1("&:hover",`
 color: var(--n-clear-color-hover)!important;
 `),c$1("&:active",`
 color: var(--n-clear-color-pressed)!important;
 `)]),cE("placeholder",`
 display: flex;
 `),cE("clear, placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[iconSwitchTransition({originalTransform:"translateX(-50%) translateY(-50%)",left:"50%",top:"50%"})])])]),NBaseClear=defineComponent({name:"BaseClear",props:{clsPrefix:{type:String,required:!0},show:Boolean,onClear:Function},setup(e){return useStyle("-base-clear",style$o,toRef(e,"clsPrefix")),{handleMouseDown(n){n.preventDefault()}}},render(){const{clsPrefix:e}=this;return h$1("div",{class:`${e}-base-clear`},h$1(NIconSwitchTransition,null,{default:()=>{var n,r;return this.show?h$1("div",{key:"dismiss",class:`${e}-base-clear__clear`,onClick:this.onClear,onMousedown:this.handleMouseDown,"data-clear":!0},resolveSlot(this.$slots.icon,()=>[h$1(NBaseIcon,{clsPrefix:e},{default:()=>h$1(ClearIcon,null)})])):h$1("div",{key:"icon",class:`${e}-base-clear__placeholder`},(r=(n=this.$slots).placeholder)===null||r===void 0?void 0:r.call(n))}}))}}),style$n=cB("base-close",`
 display: flex;
 align-items: center;
 justify-content: center;
 cursor: pointer;
 background-color: transparent;
 color: var(--n-close-icon-color);
 border-radius: var(--n-close-border-radius);
 height: var(--n-close-size);
 width: var(--n-close-size);
 font-size: var(--n-close-icon-size);
 outline: none;
 border: none;
 position: relative;
 padding: 0;
`,[cM("absolute",`
 height: var(--n-close-icon-size);
 width: var(--n-close-icon-size);
 `),c$1("&::before",`
 content: "";
 position: absolute;
 width: var(--n-close-size);
 height: var(--n-close-size);
 left: 50%;
 top: 50%;
 transform: translateY(-50%) translateX(-50%);
 transition: inherit;
 border-radius: inherit;
 `),cNotM("disabled",[c$1("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),c$1("&:hover::before",`
 background-color: var(--n-close-color-hover);
 `),c$1("&:focus::before",`
 background-color: var(--n-close-color-hover);
 `),c$1("&:active",`
 color: var(--n-close-icon-color-pressed);
 `),c$1("&:active::before",`
 background-color: var(--n-close-color-pressed);
 `)]),cM("disabled",`
 cursor: not-allowed;
 color: var(--n-close-icon-color-disabled);
 background-color: transparent;
 `),cM("round",[c$1("&::before",`
 border-radius: 50%;
 `)])]),NBaseClose=defineComponent({name:"BaseClose",props:{isButtonTag:{type:Boolean,default:!0},clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},focusable:{type:Boolean,default:!0},round:Boolean,onClick:Function,absolute:Boolean},setup(e){return useStyle("-base-close",style$n,toRef(e,"clsPrefix")),()=>{const{clsPrefix:n,disabled:r,absolute:o,round:u,isButtonTag:s}=e;return h$1(s?"button":"div",{type:s?"button":void 0,tabindex:r||!e.focusable?-1:0,"aria-disabled":r,"aria-label":"close",role:s?void 0:"button",disabled:r,class:[`${n}-base-close`,o&&`${n}-base-close--absolute`,r&&`${n}-base-close--disabled`,u&&`${n}-base-close--round`],onMousedown:g=>{e.focusable||g.preventDefault()},onClick:e.onClick},h$1(NBaseIcon,{clsPrefix:n},{default:()=>h$1(ErrorIcon$1,null)}))}}}),NFadeInExpandTransition=defineComponent({name:"FadeInExpandTransition",props:{appear:Boolean,group:Boolean,mode:String,onLeave:Function,onAfterLeave:Function,onAfterEnter:Function,width:Boolean,reverse:Boolean},setup(e,{slots:n}){function r(g){e.width?g.style.maxWidth=`${g.offsetWidth}px`:g.style.maxHeight=`${g.offsetHeight}px`,g.offsetWidth}function o(g){e.width?g.style.maxWidth="0":g.style.maxHeight="0",g.offsetWidth;const{onLeave:v}=e;v&&v()}function u(g){e.width?g.style.maxWidth="":g.style.maxHeight="";const{onAfterLeave:v}=e;v&&v()}function s(g){if(g.style.transition="none",e.width){const v=g.offsetWidth;g.style.maxWidth="0",g.offsetWidth,g.style.transition="",g.style.maxWidth=`${v}px`}else if(e.reverse)g.style.maxHeight=`${g.offsetHeight}px`,g.offsetHeight,g.style.transition="",g.style.maxHeight="0";else{const v=g.offsetHeight;g.style.maxHeight="0",g.offsetWidth,g.style.transition="",g.style.maxHeight=`${v}px`}g.offsetWidth}function w(g){var v;e.width?g.style.maxWidth="":e.reverse||(g.style.maxHeight=""),(v=e.onAfterEnter)===null||v===void 0||v.call(e)}return()=>{const{group:g,width:v,appear:y,mode:m}=e,d=g?TransitionGroup:Transition,f={name:v?"fade-in-width-expand-transition":"fade-in-height-expand-transition",appear:y,onEnter:s,onAfterEnter:w,onBeforeLeave:r,onLeave:o,onAfterLeave:u};return g||(f.mode=m),h$1(d,f,n)}}}),FocusDetector=defineComponent({props:{onFocus:Function,onBlur:Function},setup(e){return()=>h$1("div",{style:"width: 0; height: 0",tabindex:0,onFocus:e.onFocus,onBlur:e.onBlur})}}),style$m=c$1([c$1("@keyframes rotator",`
 0% {
 -webkit-transform: rotate(0deg);
 transform: rotate(0deg);
 }
 100% {
 -webkit-transform: rotate(360deg);
 transform: rotate(360deg);
 }`),cB("base-loading",`
 position: relative;
 line-height: 0;
 width: 1em;
 height: 1em;
 `,[cE("transition-wrapper",`
 position: absolute;
 width: 100%;
 height: 100%;
 `,[iconSwitchTransition()]),cE("placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[iconSwitchTransition({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),cE("container",`
 animation: rotator 3s linear infinite both;
 `,[cE("icon",`
 height: 1em;
 width: 1em;
 `)])])]),duration="1.6s",exposedLoadingProps={strokeWidth:{type:Number,default:28},stroke:{type:String,default:void 0}},NBaseLoading=defineComponent({name:"BaseLoading",props:Object.assign({clsPrefix:{type:String,required:!0},show:{type:Boolean,default:!0},scale:{type:Number,default:1},radius:{type:Number,default:100}},exposedLoadingProps),setup(e){useStyle("-base-loading",style$m,toRef(e,"clsPrefix"))},render(){const{clsPrefix:e,radius:n,strokeWidth:r,stroke:o,scale:u}=this,s=n/u;return h$1("div",{class:`${e}-base-loading`,role:"img","aria-label":"loading"},h$1(NIconSwitchTransition,null,{default:()=>this.show?h$1("div",{key:"icon",class:`${e}-base-loading__transition-wrapper`},h$1("div",{class:`${e}-base-loading__container`},h$1("svg",{class:`${e}-base-loading__icon`,viewBox:`0 0 ${2*s} ${2*s}`,xmlns:"http://www.w3.org/2000/svg",style:{color:o}},h$1("g",null,h$1("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${s} ${s};270 ${s} ${s}`,begin:"0s",dur:duration,fill:"freeze",repeatCount:"indefinite"}),h$1("circle",{class:`${e}-base-loading__icon`,fill:"none",stroke:"currentColor","stroke-width":r,"stroke-linecap":"round",cx:s,cy:s,r:n-r/2,"stroke-dasharray":5.67*n,"stroke-dashoffset":18.48*n},h$1("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${s} ${s};135 ${s} ${s};450 ${s} ${s}`,begin:"0s",dur:duration,fill:"freeze",repeatCount:"indefinite"}),h$1("animate",{attributeName:"stroke-dashoffset",values:`${5.67*n};${1.42*n};${5.67*n}`,begin:"0s",dur:duration,fill:"freeze",repeatCount:"indefinite"})))))):h$1("div",{key:"placeholder",class:`${e}-base-loading__placeholder`},this.$slots)}))}}),{cubicBezierEaseInOut:cubicBezierEaseInOut$2}=commonVariables$8;function fadeInTransition({name:e="fade-in",enterDuration:n="0.2s",leaveDuration:r="0.2s",enterCubicBezier:o=cubicBezierEaseInOut$2,leaveCubicBezier:u=cubicBezierEaseInOut$2}={}){return[c$1(`&.${e}-transition-enter-active`,{transition:`all ${n} ${o}!important`}),c$1(`&.${e}-transition-leave-active`,{transition:`all ${r} ${u}!important`}),c$1(`&.${e}-transition-enter-from, &.${e}-transition-leave-to`,{opacity:0}),c$1(`&.${e}-transition-leave-from, &.${e}-transition-enter-to`,{opacity:1})]}const base={neutralBase:"#FFF",neutralInvertBase:"#000",neutralTextBase:"#000",neutralPopover:"#fff",neutralCard:"#fff",neutralModal:"#fff",neutralBody:"#fff",alpha1:"0.82",alpha2:"0.72",alpha3:"0.38",alpha4:"0.24",alpha5:"0.18",alphaClose:"0.6",alphaDisabled:"0.5",alphaDisabledInput:"0.02",alphaPending:"0.05",alphaTablePending:"0.02",alphaPressed:"0.07",alphaAvatar:"0.2",alphaRail:"0.14",alphaProgressRail:".08",alphaBorder:"0.12",alphaDivider:"0.06",alphaInput:"0",alphaAction:"0.02",alphaTab:"0.04",alphaScrollbar:"0.25",alphaScrollbarHover:"0.4",alphaCode:"0.05",alphaTag:"0.02",primaryHover:"#36ad6a",primaryDefault:"#18a058",primaryActive:"#0c7a43",primarySuppl:"#36ad6a",infoHover:"#4098fc",infoDefault:"#2080f0",infoActive:"#1060c9",infoSuppl:"#4098fc",errorHover:"#de576d",errorDefault:"#d03050",errorActive:"#ab1f3f",errorSuppl:"#de576d",warningHover:"#fcb040",warningDefault:"#f0a020",warningActive:"#c97c10",warningSuppl:"#fcb040",successHover:"#36ad6a",successDefault:"#18a058",successActive:"#0c7a43",successSuppl:"#36ad6a"},baseBackgroundRgb=rgba(base.neutralBase),baseInvertBackgroundRgb=rgba(base.neutralInvertBase),overlayPrefix=`rgba(${baseInvertBackgroundRgb.slice(0,3).join(", ")}, `;function overlay(e){return`${overlayPrefix+String(e)})`}function neutral(e){const n=Array.from(baseInvertBackgroundRgb);return n[3]=Number(e),composite(baseBackgroundRgb,n)}const derived=Object.assign(Object.assign({name:"common"},commonVariables$8),{baseColor:base.neutralBase,primaryColor:base.primaryDefault,primaryColorHover:base.primaryHover,primaryColorPressed:base.primaryActive,primaryColorSuppl:base.primarySuppl,infoColor:base.infoDefault,infoColorHover:base.infoHover,infoColorPressed:base.infoActive,infoColorSuppl:base.infoSuppl,successColor:base.successDefault,successColorHover:base.successHover,successColorPressed:base.successActive,successColorSuppl:base.successSuppl,warningColor:base.warningDefault,warningColorHover:base.warningHover,warningColorPressed:base.warningActive,warningColorSuppl:base.warningSuppl,errorColor:base.errorDefault,errorColorHover:base.errorHover,errorColorPressed:base.errorActive,errorColorSuppl:base.errorSuppl,textColorBase:base.neutralTextBase,textColor1:"rgb(31, 34, 37)",textColor2:"rgb(51, 54, 57)",textColor3:"rgb(118, 124, 130)",textColorDisabled:neutral(base.alpha4),placeholderColor:neutral(base.alpha4),placeholderColorDisabled:neutral(base.alpha5),iconColor:neutral(base.alpha4),iconColorHover:scaleColor(neutral(base.alpha4),{lightness:.75}),iconColorPressed:scaleColor(neutral(base.alpha4),{lightness:.9}),iconColorDisabled:neutral(base.alpha5),opacity1:base.alpha1,opacity2:base.alpha2,opacity3:base.alpha3,opacity4:base.alpha4,opacity5:base.alpha5,dividerColor:"rgb(239, 239, 245)",borderColor:"rgb(224, 224, 230)",closeIconColor:neutral(Number(base.alphaClose)),closeIconColorHover:neutral(Number(base.alphaClose)),closeIconColorPressed:neutral(Number(base.alphaClose)),closeColorHover:"rgba(0, 0, 0, .09)",closeColorPressed:"rgba(0, 0, 0, .13)",clearColor:neutral(base.alpha4),clearColorHover:scaleColor(neutral(base.alpha4),{lightness:.75}),clearColorPressed:scaleColor(neutral(base.alpha4),{lightness:.9}),scrollbarColor:overlay(base.alphaScrollbar),scrollbarColorHover:overlay(base.alphaScrollbarHover),scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",progressRailColor:neutral(base.alphaProgressRail),railColor:"rgb(219, 219, 223)",popoverColor:base.neutralPopover,tableColor:base.neutralCard,cardColor:base.neutralCard,modalColor:base.neutralModal,bodyColor:base.neutralBody,tagColor:"#eee",avatarColor:neutral(base.alphaAvatar),invertedColor:"rgb(0, 20, 40)",inputColor:neutral(base.alphaInput),codeColor:"rgb(244, 244, 248)",tabColor:"rgb(247, 247, 250)",actionColor:"rgb(250, 250, 252)",tableHeaderColor:"rgb(250, 250, 252)",hoverColor:"rgb(243, 243, 245)",tableColorHover:"rgba(0, 0, 100, 0.03)",tableColorStriped:"rgba(0, 0, 100, 0.02)",pressedColor:"rgb(237, 237, 239)",opacityDisabled:base.alphaDisabled,inputColorDisabled:"rgb(250, 250, 252)",buttonColor2:"rgba(46, 51, 56, .05)",buttonColor2Hover:"rgba(46, 51, 56, .09)",buttonColor2Pressed:"rgba(46, 51, 56, .13)",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"}),commonLight=derived,commonVars$5={railInsetHorizontalBottom:"auto 2px 4px 2px",railInsetHorizontalTop:"4px 2px auto 2px",railInsetVerticalRight:"2px 4px 2px auto",railInsetVerticalLeft:"2px auto 2px 4px",railColor:"transparent"};function self$l(e){const{scrollbarColor:n,scrollbarColorHover:r,scrollbarHeight:o,scrollbarWidth:u,scrollbarBorderRadius:s}=e;return Object.assign(Object.assign({},commonVars$5),{height:o,width:u,borderRadius:s,color:n,colorHover:r})}const scrollbarLight={name:"Scrollbar",common:commonLight,self:self$l},scrollbarLight$1=scrollbarLight,style$l=cB("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[c$1(">",[cB("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 min-height: inherit;
 max-height: inherit;
 scrollbar-width: none;
 `,[c$1("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),c$1(">",[cB("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])])]),c$1(">, +",[cB("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 background: var(--n-scrollbar-rail-color);
 -webkit-user-select: none;
 `,[cM("horizontal",`
 height: var(--n-scrollbar-height);
 `,[c$1(">",[cE("scrollbar",`
 height: var(--n-scrollbar-height);
 border-radius: var(--n-scrollbar-border-radius);
 right: 0;
 `)])]),cM("horizontal--top",`
 top: var(--n-scrollbar-rail-top-horizontal-top); 
 right: var(--n-scrollbar-rail-right-horizontal-top); 
 bottom: var(--n-scrollbar-rail-bottom-horizontal-top); 
 left: var(--n-scrollbar-rail-left-horizontal-top); 
 `),cM("horizontal--bottom",`
 top: var(--n-scrollbar-rail-top-horizontal-bottom); 
 right: var(--n-scrollbar-rail-right-horizontal-bottom); 
 bottom: var(--n-scrollbar-rail-bottom-horizontal-bottom); 
 left: var(--n-scrollbar-rail-left-horizontal-bottom); 
 `),cM("vertical",`
 width: var(--n-scrollbar-width);
 `,[c$1(">",[cE("scrollbar",`
 width: var(--n-scrollbar-width);
 border-radius: var(--n-scrollbar-border-radius);
 bottom: 0;
 `)])]),cM("vertical--left",`
 top: var(--n-scrollbar-rail-top-vertical-left); 
 right: var(--n-scrollbar-rail-right-vertical-left); 
 bottom: var(--n-scrollbar-rail-bottom-vertical-left); 
 left: var(--n-scrollbar-rail-left-vertical-left); 
 `),cM("vertical--right",`
 top: var(--n-scrollbar-rail-top-vertical-right); 
 right: var(--n-scrollbar-rail-right-vertical-right); 
 bottom: var(--n-scrollbar-rail-bottom-vertical-right); 
 left: var(--n-scrollbar-rail-left-vertical-right); 
 `),cM("disabled",[c$1(">",[cE("scrollbar","pointer-events: none;")])]),c$1(">",[cE("scrollbar",`
 z-index: 1;
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--n-scrollbar-color);
 transition: background-color .2s var(--n-scrollbar-bezier);
 `,[fadeInTransition(),c$1("&:hover","background-color: var(--n-scrollbar-color-hover);")])])])])]),scrollbarProps=Object.assign(Object.assign({},useTheme.props),{duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:[String,Array],contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function,internalHoistYRail:Boolean,yPlacement:{type:String,default:"right"},xPlacement:{type:String,default:"bottom"}}),Scrollbar=defineComponent({name:"Scrollbar",props:scrollbarProps,inheritAttrs:!1,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:r,mergedRtlRef:o}=useConfig(e),u=useRtl("Scrollbar",o,n),s=ref(null),w=ref(null),g=ref(null),v=ref(null),y=ref(null),m=ref(null),d=ref(null),f=ref(null),x=ref(null),k=ref(null),P=ref(null),S=ref(0),E=ref(0),M=ref(!1),T=ref(!1);let D=!1,I=!1,N,O,F=0,U=0,Y=0,Q=0;const q=useIsIos(),ne=useTheme("Scrollbar","-scrollbar",style$l,scrollbarLight$1,e,n),J=computed(()=>{const{value:Fe}=f,{value:Ye}=m,{value:Ke}=k;return Fe===null||Ye===null||Ke===null?0:Math.min(Fe,Ke*Fe/Ye+depx(ne.value.self.width)*1.5)}),re=computed(()=>`${J.value}px`),X=computed(()=>{const{value:Fe}=x,{value:Ye}=d,{value:Ke}=P;return Fe===null||Ye===null||Ke===null?0:Ke*Fe/Ye+depx(ne.value.self.height)*1.5}),j=computed(()=>`${X.value}px`),Z=computed(()=>{const{value:Fe}=f,{value:Ye}=S,{value:Ke}=m,{value:Ze}=k;if(Fe===null||Ke===null||Ze===null)return 0;{const ot=Ke-Fe;return ot?Ye/ot*(Ze-J.value):0}}),W=computed(()=>`${Z.value}px`),te=computed(()=>{const{value:Fe}=x,{value:Ye}=E,{value:Ke}=d,{value:Ze}=P;if(Fe===null||Ke===null||Ze===null)return 0;{const ot=Ke-Fe;return ot?Ye/ot*(Ze-X.value):0}}),le=computed(()=>`${te.value}px`),oe=computed(()=>{const{value:Fe}=f,{value:Ye}=m;return Fe!==null&&Ye!==null&&Ye>Fe}),Ee=computed(()=>{const{value:Fe}=x,{value:Ye}=d;return Fe!==null&&Ye!==null&&Ye>Fe}),Ae=computed(()=>{const{trigger:Fe}=e;return Fe==="none"||M.value}),ve=computed(()=>{const{trigger:Fe}=e;return Fe==="none"||T.value}),ke=computed(()=>{const{container:Fe}=e;return Fe?Fe():w.value}),Ce=computed(()=>{const{content:Fe}=e;return Fe?Fe():g.value}),Pe=(Fe,Ye)=>{if(!e.scrollable)return;if(typeof Fe=="number"){_e(Fe,Ye!=null?Ye:0,0,!1,"auto");return}const{left:Ke,top:Ze,index:ot,elSize:Qe,position:at,behavior:rt,el:ct,debounce:ht=!0}=Fe;(Ke!==void 0||Ze!==void 0)&&_e(Ke!=null?Ke:0,Ze!=null?Ze:0,0,!1,rt),ct!==void 0?_e(0,ct.offsetTop,ct.offsetHeight,ht,rt):ot!==void 0&&Qe!==void 0?_e(0,ot*Qe,Qe,ht,rt):at==="bottom"?_e(0,Number.MAX_SAFE_INTEGER,0,!1,rt):at==="top"&&_e(0,0,0,!1,rt)},Me=useReactivated(()=>{e.container||Pe({top:S.value,left:E.value})}),Le=()=>{Me.isDeactivated||et()},Te=Fe=>{if(Me.isDeactivated)return;const{onResize:Ye}=e;Ye&&Ye(Fe),et()},ye=(Fe,Ye)=>{if(!e.scrollable)return;const{value:Ke}=ke;!Ke||(typeof Fe=="object"?Ke.scrollBy(Fe):Ke.scrollBy(Fe,Ye||0))};function _e(Fe,Ye,Ke,Ze,ot){const{value:Qe}=ke;if(!!Qe){if(Ze){const{scrollTop:at,offsetHeight:rt}=Qe;if(Ye>at){Ye+Ke<=at+rt||Qe.scrollTo({left:Fe,top:Ye+Ke-rt,behavior:ot});return}}Qe.scrollTo({left:Fe,top:Ye,behavior:ot})}}function we(){Ge(),Ie(),et()}function Se(){$e()}function $e(){Be(),Oe()}function Be(){O!==void 0&&window.clearTimeout(O),O=window.setTimeout(()=>{T.value=!1},e.duration)}function Oe(){N!==void 0&&window.clearTimeout(N),N=window.setTimeout(()=>{M.value=!1},e.duration)}function Ge(){N!==void 0&&window.clearTimeout(N),M.value=!0}function Ie(){O!==void 0&&window.clearTimeout(O),T.value=!0}function je(Fe){const{onScroll:Ye}=e;Ye&&Ye(Fe),qe()}function qe(){const{value:Fe}=ke;Fe&&(S.value=Fe.scrollTop,E.value=Fe.scrollLeft*(u!=null&&u.value?-1:1))}function Ue(){const{value:Fe}=Ce;Fe&&(m.value=Fe.offsetHeight,d.value=Fe.offsetWidth);const{value:Ye}=ke;Ye&&(f.value=Ye.offsetHeight,x.value=Ye.offsetWidth);const{value:Ke}=y,{value:Ze}=v;Ke&&(P.value=Ke.offsetWidth),Ze&&(k.value=Ze.offsetHeight)}function Je(){const{value:Fe}=ke;Fe&&(S.value=Fe.scrollTop,E.value=Fe.scrollLeft*(u!=null&&u.value?-1:1),f.value=Fe.offsetHeight,x.value=Fe.offsetWidth,m.value=Fe.scrollHeight,d.value=Fe.scrollWidth);const{value:Ye}=y,{value:Ke}=v;Ye&&(P.value=Ye.offsetWidth),Ke&&(k.value=Ke.offsetHeight)}function et(){!e.scrollable||(e.useUnifiedContainer?Je():(Ue(),qe()))}function nt(Fe){var Ye;return!(!((Ye=s.value)===null||Ye===void 0)&&Ye.contains(getPreciseEventTarget(Fe)))}function st(Fe){Fe.preventDefault(),Fe.stopPropagation(),I=!0,on$1("mousemove",window,gt,!0),on$1("mouseup",window,_t,!0),U=E.value,Y=u!=null&&u.value?window.innerWidth-Fe.clientX:Fe.clientX}function gt(Fe){if(!I)return;N!==void 0&&window.clearTimeout(N),O!==void 0&&window.clearTimeout(O);const{value:Ye}=x,{value:Ke}=d,{value:Ze}=X;if(Ye===null||Ke===null)return;const Qe=(u!=null&&u.value?window.innerWidth-Fe.clientX-Y:Fe.clientX-Y)*(Ke-Ye)/(Ye-Ze),at=Ke-Ye;let rt=U+Qe;rt=Math.min(at,rt),rt=Math.max(rt,0);const{value:ct}=ke;if(ct){ct.scrollLeft=rt*(u!=null&&u.value?-1:1);const{internalOnUpdateScrollLeft:ht}=e;ht&&ht(rt)}}function _t(Fe){Fe.preventDefault(),Fe.stopPropagation(),off$1("mousemove",window,gt,!0),off$1("mouseup",window,_t,!0),I=!1,et(),nt(Fe)&&$e()}function wt(Fe){Fe.preventDefault(),Fe.stopPropagation(),D=!0,on$1("mousemove",window,He,!0),on$1("mouseup",window,Ve,!0),F=S.value,Q=Fe.clientY}function He(Fe){if(!D)return;N!==void 0&&window.clearTimeout(N),O!==void 0&&window.clearTimeout(O);const{value:Ye}=f,{value:Ke}=m,{value:Ze}=J;if(Ye===null||Ke===null)return;const Qe=(Fe.clientY-Q)*(Ke-Ye)/(Ye-Ze),at=Ke-Ye;let rt=F+Qe;rt=Math.min(at,rt),rt=Math.max(rt,0);const{value:ct}=ke;ct&&(ct.scrollTop=rt)}function Ve(Fe){Fe.preventDefault(),Fe.stopPropagation(),off$1("mousemove",window,He,!0),off$1("mouseup",window,Ve,!0),D=!1,et(),nt(Fe)&&$e()}watchEffect(()=>{const{value:Fe}=Ee,{value:Ye}=oe,{value:Ke}=n,{value:Ze}=y,{value:ot}=v;Ze&&(Fe?Ze.classList.remove(`${Ke}-scrollbar-rail--disabled`):Ze.classList.add(`${Ke}-scrollbar-rail--disabled`)),ot&&(Ye?ot.classList.remove(`${Ke}-scrollbar-rail--disabled`):ot.classList.add(`${Ke}-scrollbar-rail--disabled`))}),onMounted(()=>{e.container||et()}),onBeforeUnmount(()=>{N!==void 0&&window.clearTimeout(N),O!==void 0&&window.clearTimeout(O),off$1("mousemove",window,He,!0),off$1("mouseup",window,Ve,!0)});const ze=computed(()=>{const{common:{cubicBezierEaseInOut:Fe},self:{color:Ye,colorHover:Ke,height:Ze,width:ot,borderRadius:Qe,railInsetHorizontalTop:at,railInsetHorizontalBottom:rt,railInsetVerticalRight:ct,railInsetVerticalLeft:ht,railColor:yt}}=ne.value,{top:bt,right:$t,bottom:At,left:Ft}=getMargin(at),{top:Ht,right:Ot,bottom:Mt,left:pt}=getMargin(rt),{top:xt,right:Tt,bottom:Ct,left:Nt}=getMargin(u!=null&&u.value?rtlInset(ct):ct),{top:jt,right:nn,bottom:Wt,left:cn}=getMargin(u!=null&&u.value?rtlInset(ht):ht);return{"--n-scrollbar-bezier":Fe,"--n-scrollbar-color":Ye,"--n-scrollbar-color-hover":Ke,"--n-scrollbar-border-radius":Qe,"--n-scrollbar-width":ot,"--n-scrollbar-height":Ze,"--n-scrollbar-rail-top-horizontal-top":bt,"--n-scrollbar-rail-right-horizontal-top":$t,"--n-scrollbar-rail-bottom-horizontal-top":At,"--n-scrollbar-rail-left-horizontal-top":Ft,"--n-scrollbar-rail-top-horizontal-bottom":Ht,"--n-scrollbar-rail-right-horizontal-bottom":Ot,"--n-scrollbar-rail-bottom-horizontal-bottom":Mt,"--n-scrollbar-rail-left-horizontal-bottom":pt,"--n-scrollbar-rail-top-vertical-right":xt,"--n-scrollbar-rail-right-vertical-right":Tt,"--n-scrollbar-rail-bottom-vertical-right":Ct,"--n-scrollbar-rail-left-vertical-right":Nt,"--n-scrollbar-rail-top-vertical-left":jt,"--n-scrollbar-rail-right-vertical-left":nn,"--n-scrollbar-rail-bottom-vertical-left":Wt,"--n-scrollbar-rail-left-vertical-left":cn,"--n-scrollbar-rail-color":yt}}),Ne=r?useThemeClass("scrollbar",void 0,ze,e):void 0;return Object.assign(Object.assign({},{scrollTo:Pe,scrollBy:ye,sync:et,syncUnifiedContainer:Je,handleMouseEnterWrapper:we,handleMouseLeaveWrapper:Se}),{mergedClsPrefix:n,rtlEnabled:u,containerScrollTop:S,wrapperRef:s,containerRef:w,contentRef:g,yRailRef:v,xRailRef:y,needYBar:oe,needXBar:Ee,yBarSizePx:re,xBarSizePx:j,yBarTopPx:W,xBarLeftPx:le,isShowXBar:Ae,isShowYBar:ve,isIos:q,handleScroll:je,handleContentResize:Le,handleContainerResize:Te,handleYScrollMouseDown:wt,handleXScrollMouseDown:st,cssVars:r?void 0:ze,themeClass:Ne==null?void 0:Ne.themeClass,onRender:Ne==null?void 0:Ne.onRender})},render(){var e;const{$slots:n,mergedClsPrefix:r,triggerDisplayManually:o,rtlEnabled:u,internalHoistYRail:s,yPlacement:w,xPlacement:g,xScrollable:v}=this;if(!this.scrollable)return(e=n.default)===null||e===void 0?void 0:e.call(n);const y=this.trigger==="none",m=(x,k)=>h$1("div",{ref:"yRailRef",class:[`${r}-scrollbar-rail`,`${r}-scrollbar-rail--vertical`,`${r}-scrollbar-rail--vertical--${w}`,x],"data-scrollbar-rail":!0,style:[k||"",this.verticalRailStyle],"aria-hidden":!0},h$1(y?Wrapper:Transition,y?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?h$1("div",{class:`${r}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),d=()=>{var x,k;return(x=this.onRender)===null||x===void 0||x.call(this),h$1("div",mergeProps(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${r}-scrollbar`,this.themeClass,u&&`${r}-scrollbar--rtl`],style:this.cssVars,onMouseenter:o?void 0:this.handleMouseEnterWrapper,onMouseleave:o?void 0:this.handleMouseLeaveWrapper}),[this.container?(k=n.default)===null||k===void 0?void 0:k.call(n):h$1("div",{role:"none",ref:"containerRef",class:[`${r}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},h$1(VResizeObserver,{onResize:this.handleContentResize},{default:()=>h$1("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${r}-scrollbar-content`,this.contentClass]},n)})),s?null:m(void 0,void 0),v&&h$1("div",{ref:"xRailRef",class:[`${r}-scrollbar-rail`,`${r}-scrollbar-rail--horizontal`,`${r}-scrollbar-rail--horizontal--${g}`],style:this.horizontalRailStyle,"data-scrollbar-rail":!0,"aria-hidden":!0},h$1(y?Wrapper:Transition,y?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?h$1("div",{class:`${r}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,right:u?this.xBarLeftPx:void 0,left:u?void 0:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])},f=this.container?d():h$1(VResizeObserver,{onResize:this.handleContainerResize},{default:d});return s?h$1(Fragment,null,f,m(this.themeClass,this.cssVars)):f}}),NScrollbar=Scrollbar,XScrollbar=Scrollbar;function toArray$1(e){return Array.isArray(e)?e:[e]}const TRAVERSE_COMMAND={STOP:"STOP"};function traverseWithCb(e,n){const r=n(e);e.children!==void 0&&r!==TRAVERSE_COMMAND.STOP&&e.children.forEach(o=>traverseWithCb(o,n))}function getNonLeafKeys(e,n={}){const{preserveGroup:r=!1}=n,o=[],u=r?w=>{w.isLeaf||(o.push(w.key),s(w.children))}:w=>{w.isLeaf||(w.isGroup||o.push(w.key),s(w.children))};function s(w){w.forEach(u)}return s(e),o}function isLeaf(e,n){const{isLeaf:r}=e;return r!==void 0?r:!n(e)}function defaultGetChildren(e){return e.children}function defaultGetKey(e){return e.key}function isIgnored(){return!1}function isShallowLoaded(e,n){const{isLeaf:r}=e;return!(r===!1&&!Array.isArray(n(e)))}function isDisabled(e){return e.disabled===!0}function isExpilicitlyNotLoaded(e,n){return e.isLeaf===!1&&!Array.isArray(n(e))}function unwrapCheckedKeys(e){var n;return e==null?[]:Array.isArray(e)?e:(n=e.checkedKeys)!==null&&n!==void 0?n:[]}function unwrapIndeterminateKeys(e){var n;return e==null||Array.isArray(e)?[]:(n=e.indeterminateKeys)!==null&&n!==void 0?n:[]}function merge$1(e,n){const r=new Set(e);return n.forEach(o=>{r.has(o)||r.add(o)}),Array.from(r)}function minus(e,n){const r=new Set(e);return n.forEach(o=>{r.has(o)&&r.delete(o)}),Array.from(r)}function isGroup(e){return(e==null?void 0:e.type)==="group"}function createIndexGetter(e){const n=new Map;return e.forEach((r,o)=>{n.set(r.key,o)}),r=>{var o;return(o=n.get(r))!==null&&o!==void 0?o:null}}class SubtreeNotLoadedError extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function getExtendedCheckedKeySetAfterCheck(e,n,r,o){return getExtendedCheckedKeySet(n.concat(e),r,o,!1)}function getAvailableAscendantNodeSet(e,n){const r=new Set;return e.forEach(o=>{const u=n.treeNodeMap.get(o);if(u!==void 0){let s=u.parent;for(;s!==null&&!(s.disabled||r.has(s.key));)r.add(s.key),s=s.parent}}),r}function getExtendedCheckedKeySetAfterUncheck(e,n,r,o){const u=getExtendedCheckedKeySet(n,r,o,!1),s=getExtendedCheckedKeySet(e,r,o,!0),w=getAvailableAscendantNodeSet(e,r),g=[];return u.forEach(v=>{(s.has(v)||w.has(v))&&g.push(v)}),g.forEach(v=>u.delete(v)),u}function getCheckedKeys(e,n){const{checkedKeys:r,keysToCheck:o,keysToUncheck:u,indeterminateKeys:s,cascade:w,leafOnly:g,checkStrategy:v,allowNotLoaded:y}=e;if(!w)return o!==void 0?{checkedKeys:merge$1(r,o),indeterminateKeys:Array.from(s)}:u!==void 0?{checkedKeys:minus(r,u),indeterminateKeys:Array.from(s)}:{checkedKeys:Array.from(r),indeterminateKeys:Array.from(s)};const{levelTreeNodeMap:m}=n;let d;u!==void 0?d=getExtendedCheckedKeySetAfterUncheck(u,r,n,y):o!==void 0?d=getExtendedCheckedKeySetAfterCheck(o,r,n,y):d=getExtendedCheckedKeySet(r,n,y,!1);const f=v==="parent",x=v==="child"||g,k=d,P=new Set,S=Math.max.apply(null,Array.from(m.keys()));for(let E=S;E>=0;E-=1){const M=E===0,T=m.get(E);for(const D of T){if(D.isLeaf)continue;const{key:I,shallowLoaded:N}=D;if(x&&N&&D.children.forEach(Y=>{!Y.disabled&&!Y.isLeaf&&Y.shallowLoaded&&k.has(Y.key)&&k.delete(Y.key)}),D.disabled||!N)continue;let O=!0,F=!1,U=!0;for(const Y of D.children){const Q=Y.key;if(!Y.disabled){if(U&&(U=!1),k.has(Q))F=!0;else if(P.has(Q)){F=!0,O=!1;break}else if(O=!1,F)break}}O&&!U?(f&&D.children.forEach(Y=>{!Y.disabled&&k.has(Y.key)&&k.delete(Y.key)}),k.add(I)):F&&P.add(I),M&&x&&k.has(I)&&k.delete(I)}}return{checkedKeys:Array.from(k),indeterminateKeys:Array.from(P)}}function getExtendedCheckedKeySet(e,n,r,o){const{treeNodeMap:u,getChildren:s}=n,w=new Set,g=new Set(e);return e.forEach(v=>{const y=u.get(v);y!==void 0&&traverseWithCb(y,m=>{if(m.disabled)return TRAVERSE_COMMAND.STOP;const{key:d}=m;if(!w.has(d)&&(w.add(d),g.add(d),isExpilicitlyNotLoaded(m.rawNode,s))){if(o)return TRAVERSE_COMMAND.STOP;if(!r)throw new SubtreeNotLoadedError}})}),g}function getPath(e,{includeGroup:n=!1,includeSelf:r=!0},o){var u;const s=o.treeNodeMap;let w=e==null?null:(u=s.get(e))!==null&&u!==void 0?u:null;const g={keyPath:[],treeNodePath:[],treeNode:w};if(w!=null&&w.ignored)return g.treeNode=null,g;for(;w;)!w.ignored&&(n||!w.isGroup)&&g.treeNodePath.push(w),w=w.parent;return g.treeNodePath.reverse(),r||g.treeNodePath.pop(),g.keyPath=g.treeNodePath.map(v=>v.key),g}function getFirstAvailableNode(e){if(e.length===0)return null;const n=e[0];return n.isGroup||n.ignored||n.disabled?n.getNext():n}function rawGetNext(e,n){const r=e.siblings,o=r.length,{index:u}=e;return n?r[(u+1)%o]:u===r.length-1?null:r[u+1]}function move(e,n,{loop:r=!1,includeDisabled:o=!1}={}){const u=n==="prev"?rawGetPrev:rawGetNext,s={reverse:n==="prev"};let w=!1,g=null;function v(y){if(y!==null){if(y===e){if(!w)w=!0;else if(!e.disabled&&!e.isGroup){g=e;return}}else if((!y.disabled||o)&&!y.ignored&&!y.isGroup){g=y;return}if(y.isGroup){const m=getChild$1(y,s);m!==null?g=m:v(u(y,r))}else{const m=u(y,!1);if(m!==null)v(m);else{const d=rawGetParent(y);d!=null&&d.isGroup?v(u(d,r)):r&&v(u(y,!0))}}}}return v(e),g}function rawGetPrev(e,n){const r=e.siblings,o=r.length,{index:u}=e;return n?r[(u-1+o)%o]:u===0?null:r[u-1]}function rawGetParent(e){return e.parent}function getChild$1(e,n={}){const{reverse:r=!1}=n,{children:o}=e;if(o){const{length:u}=o,s=r?u-1:0,w=r?-1:u,g=r?-1:1;for(let v=s;v!==w;v+=g){const y=o[v];if(!y.disabled&&!y.ignored)if(y.isGroup){const m=getChild$1(y,n);if(m!==null)return m}else return y}}return null}const moveMethods={getChild(){return this.ignored?null:getChild$1(this)},getParent(){const{parent:e}=this;return e!=null&&e.isGroup?e.getParent():e},getNext(e={}){return move(this,"next",e)},getPrev(e={}){return move(this,"prev",e)}};function flatten(e,n){const r=n?new Set(n):void 0,o=[];function u(s){s.forEach(w=>{o.push(w),!(w.isLeaf||!w.children||w.ignored)&&(w.isGroup||r===void 0||r.has(w.key))&&u(w.children)})}return u(e),o}function contains(e,n){const r=e.key;for(;n;){if(n.key===r)return!0;n=n.parent}return!1}function createTreeNodes(e,n,r,o,u,s=null,w=0){const g=[];return e.forEach((v,y)=>{var m;const d=Object.create(o);if(d.rawNode=v,d.siblings=g,d.level=w,d.index=y,d.isFirstChild=y===0,d.isLastChild=y+1===e.length,d.parent=s,!d.ignored){const f=u(v);Array.isArray(f)&&(d.children=createTreeNodes(f,n,r,o,u,d,w+1))}g.push(d),n.set(d.key,d),r.has(w)||r.set(w,[]),(m=r.get(w))===null||m===void 0||m.push(d)}),g}function createTreeMate(e,n={}){var r;const o=new Map,u=new Map,{getDisabled:s=isDisabled,getIgnored:w=isIgnored,getIsGroup:g=isGroup,getKey:v=defaultGetKey}=n,y=(r=n.getChildren)!==null&&r!==void 0?r:defaultGetChildren,m=n.ignoreEmptyChildren?D=>{const I=y(D);return Array.isArray(I)?I.length?I:null:I}:y,d=Object.assign({get key(){return v(this.rawNode)},get disabled(){return s(this.rawNode)},get isGroup(){return g(this.rawNode)},get isLeaf(){return isLeaf(this.rawNode,m)},get shallowLoaded(){return isShallowLoaded(this.rawNode,m)},get ignored(){return w(this.rawNode)},contains(D){return contains(this,D)}},moveMethods),f=createTreeNodes(e,o,u,d,m);function x(D){if(D==null)return null;const I=o.get(D);return I&&!I.isGroup&&!I.ignored?I:null}function k(D){if(D==null)return null;const I=o.get(D);return I&&!I.ignored?I:null}function P(D,I){const N=k(D);return N?N.getPrev(I):null}function S(D,I){const N=k(D);return N?N.getNext(I):null}function E(D){const I=k(D);return I?I.getParent():null}function M(D){const I=k(D);return I?I.getChild():null}const T={treeNodes:f,treeNodeMap:o,levelTreeNodeMap:u,maxLevel:Math.max(...u.keys()),getChildren:m,getFlattenedNodes(D){return flatten(f,D)},getNode:x,getPrev:P,getNext:S,getParent:E,getChild:M,getFirstAvailableNode(){return getFirstAvailableNode(f)},getPath(D,I={}){return getPath(D,I,T)},getCheckedKeys(D,I={}){const{cascade:N=!0,leafOnly:O=!1,checkStrategy:F="all",allowNotLoaded:U=!1}=I;return getCheckedKeys({checkedKeys:unwrapCheckedKeys(D),indeterminateKeys:unwrapIndeterminateKeys(D),cascade:N,leafOnly:O,checkStrategy:F,allowNotLoaded:U},T)},check(D,I,N={}){const{cascade:O=!0,leafOnly:F=!1,checkStrategy:U="all",allowNotLoaded:Y=!1}=N;return getCheckedKeys({checkedKeys:unwrapCheckedKeys(I),indeterminateKeys:unwrapIndeterminateKeys(I),keysToCheck:D==null?[]:toArray$1(D),cascade:O,leafOnly:F,checkStrategy:U,allowNotLoaded:Y},T)},uncheck(D,I,N={}){const{cascade:O=!0,leafOnly:F=!1,checkStrategy:U="all",allowNotLoaded:Y=!1}=N;return getCheckedKeys({checkedKeys:unwrapCheckedKeys(I),indeterminateKeys:unwrapIndeterminateKeys(I),keysToUncheck:D==null?[]:toArray$1(D),cascade:O,leafOnly:F,checkStrategy:U,allowNotLoaded:Y},T)},getNonLeafKeys(D={}){return getNonLeafKeys(f,D)}};return T}const commonVars$4={iconSizeTiny:"28px",iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};function self$k(e){const{textColorDisabled:n,iconColor:r,textColor2:o,fontSizeTiny:u,fontSizeSmall:s,fontSizeMedium:w,fontSizeLarge:g,fontSizeHuge:v}=e;return Object.assign(Object.assign({},commonVars$4),{fontSizeTiny:u,fontSizeSmall:s,fontSizeMedium:w,fontSizeLarge:g,fontSizeHuge:v,textColor:n,iconColor:r,extraTextColor:o})}const emptyLight={name:"Empty",common:commonLight,self:self$k},emptyLight$1=emptyLight,style$k=cB("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--n-font-size);
`,[cE("icon",`
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 line-height: var(--n-icon-size);
 color: var(--n-icon-color);
 transition:
 color .3s var(--n-bezier);
 `,[c$1("+",[cE("description",`
 margin-top: 8px;
 `)])]),cE("description",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),cE("extra",`
 text-align: center;
 transition: color .3s var(--n-bezier);
 margin-top: 12px;
 color: var(--n-extra-text-color);
 `)]),emptyProps=Object.assign(Object.assign({},useTheme.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),NEmpty=defineComponent({name:"Empty",props:emptyProps,slots:Object,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:r,mergedComponentPropsRef:o}=useConfig(e),u=useTheme("Empty","-empty",style$k,emptyLight$1,e,n),{localeRef:s}=useLocale("Empty"),w=computed(()=>{var m,d,f;return(m=e.description)!==null&&m!==void 0?m:(f=(d=o==null?void 0:o.value)===null||d===void 0?void 0:d.Empty)===null||f===void 0?void 0:f.description}),g=computed(()=>{var m,d;return((d=(m=o==null?void 0:o.value)===null||m===void 0?void 0:m.Empty)===null||d===void 0?void 0:d.renderIcon)||(()=>h$1(EmptyIcon,null))}),v=computed(()=>{const{size:m}=e,{common:{cubicBezierEaseInOut:d},self:{[createKey("iconSize",m)]:f,[createKey("fontSize",m)]:x,textColor:k,iconColor:P,extraTextColor:S}}=u.value;return{"--n-icon-size":f,"--n-font-size":x,"--n-bezier":d,"--n-text-color":k,"--n-icon-color":P,"--n-extra-text-color":S}}),y=r?useThemeClass("empty",computed(()=>{let m="";const{size:d}=e;return m+=d[0],m}),v,e):void 0;return{mergedClsPrefix:n,mergedRenderIcon:g,localizedDescription:computed(()=>w.value||s.value.description),cssVars:r?void 0:v,themeClass:y==null?void 0:y.themeClass,onRender:y==null?void 0:y.onRender}},render(){const{$slots:e,mergedClsPrefix:n,onRender:r}=this;return r==null||r(),h$1("div",{class:[`${n}-empty`,this.themeClass],style:this.cssVars},this.showIcon?h$1("div",{class:`${n}-empty__icon`},e.icon?e.icon():h$1(NBaseIcon,{clsPrefix:n},{default:this.mergedRenderIcon})):null,this.showDescription?h$1("div",{class:`${n}-empty__description`},e.default?e.default():this.localizedDescription):null,e.extra?h$1("div",{class:`${n}-empty__extra`},e.extra()):null)}}),commonVariables$7={height:"calc(var(--n-option-height) * 7.6)",paddingTiny:"4px 0",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingTiny:"0 12px",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};function self$j(e){const{borderRadius:n,popoverColor:r,textColor3:o,dividerColor:u,textColor2:s,primaryColorPressed:w,textColorDisabled:g,primaryColor:v,opacityDisabled:y,hoverColor:m,fontSizeTiny:d,fontSizeSmall:f,fontSizeMedium:x,fontSizeLarge:k,fontSizeHuge:P,heightTiny:S,heightSmall:E,heightMedium:M,heightLarge:T,heightHuge:D}=e;return Object.assign(Object.assign({},commonVariables$7),{optionFontSizeTiny:d,optionFontSizeSmall:f,optionFontSizeMedium:x,optionFontSizeLarge:k,optionFontSizeHuge:P,optionHeightTiny:S,optionHeightSmall:E,optionHeightMedium:M,optionHeightLarge:T,optionHeightHuge:D,borderRadius:n,color:r,groupHeaderTextColor:o,actionDividerColor:u,optionTextColor:s,optionTextColorPressed:w,optionTextColorDisabled:g,optionTextColorActive:v,optionOpacityDisabled:y,optionCheckColor:v,optionColorPending:m,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:m,actionTextColor:s,loadingColor:v})}const internalSelectMenuLight={name:"InternalSelectMenu",common:commonLight,peers:{Scrollbar:scrollbarLight$1,Empty:emptyLight$1},self:self$j},internalSelectMenuLight$1=internalSelectMenuLight,NSelectGroupHeader=defineComponent({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:e,renderOptionRef:n,labelFieldRef:r,nodePropsRef:o}=inject(internalSelectionMenuInjectionKey);return{labelField:r,nodeProps:o,renderLabel:e,renderOption:n}},render(){const{clsPrefix:e,renderLabel:n,renderOption:r,nodeProps:o,tmNode:{rawNode:u}}=this,s=o==null?void 0:o(u),w=n?n(u,!1):render(u[this.labelField],u,!1),g=h$1("div",Object.assign({},s,{class:[`${e}-base-select-group-header`,s==null?void 0:s.class]}),w);return u.render?u.render({node:g,option:u}):r?r({node:g,option:u,selected:!1}):g}});function renderCheckMark(e,n){return h$1(Transition,{name:"fade-in-scale-up-transition"},{default:()=>e?h$1(NBaseIcon,{clsPrefix:n,class:`${n}-base-select-option__check`},{default:()=>h$1(FinishedIcon)}):null})}const NSelectOption=defineComponent({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const{valueRef:n,pendingTmNodeRef:r,multipleRef:o,valueSetRef:u,renderLabelRef:s,renderOptionRef:w,labelFieldRef:g,valueFieldRef:v,showCheckmarkRef:y,nodePropsRef:m,handleOptionClick:d,handleOptionMouseEnter:f}=inject(internalSelectionMenuInjectionKey),x=useMemo(()=>{const{value:E}=r;return E?e.tmNode.key===E.key:!1});function k(E){const{tmNode:M}=e;M.disabled||d(E,M)}function P(E){const{tmNode:M}=e;M.disabled||f(E,M)}function S(E){const{tmNode:M}=e,{value:T}=x;M.disabled||T||f(E,M)}return{multiple:o,isGrouped:useMemo(()=>{const{tmNode:E}=e,{parent:M}=E;return M&&M.rawNode.type==="group"}),showCheckmark:y,nodeProps:m,isPending:x,isSelected:useMemo(()=>{const{value:E}=n,{value:M}=o;if(E===null)return!1;const T=e.tmNode.rawNode[v.value];if(M){const{value:D}=u;return D.has(T)}else return E===T}),labelField:g,renderLabel:s,renderOption:w,handleMouseMove:S,handleMouseEnter:P,handleClick:k}},render(){const{clsPrefix:e,tmNode:{rawNode:n},isSelected:r,isPending:o,isGrouped:u,showCheckmark:s,nodeProps:w,renderOption:g,renderLabel:v,handleClick:y,handleMouseEnter:m,handleMouseMove:d}=this,f=renderCheckMark(r,e),x=v?[v(n,r),s&&f]:[render(n[this.labelField],n,r),s&&f],k=w==null?void 0:w(n),P=h$1("div",Object.assign({},k,{class:[`${e}-base-select-option`,n.class,k==null?void 0:k.class,{[`${e}-base-select-option--disabled`]:n.disabled,[`${e}-base-select-option--selected`]:r,[`${e}-base-select-option--grouped`]:u,[`${e}-base-select-option--pending`]:o,[`${e}-base-select-option--show-checkmark`]:s}],style:[(k==null?void 0:k.style)||"",n.style||""],onClick:mergeEventHandlers([y,k==null?void 0:k.onClick]),onMouseenter:mergeEventHandlers([m,k==null?void 0:k.onMouseenter]),onMousemove:mergeEventHandlers([d,k==null?void 0:k.onMousemove])}),h$1("div",{class:`${e}-base-select-option__content`},x));return n.render?n.render({node:P,option:n,selected:r}):g?g({node:P,option:n,selected:r}):P}}),{cubicBezierEaseIn:cubicBezierEaseIn$1,cubicBezierEaseOut:cubicBezierEaseOut$1}=commonVariables$8;function fadeInScaleUpTransition({transformOrigin:e="inherit",duration:n=".2s",enterScale:r=".9",originalTransform:o="",originalTransition:u=""}={}){return[c$1("&.fade-in-scale-up-transition-leave-active",{transformOrigin:e,transition:`opacity ${n} ${cubicBezierEaseIn$1}, transform ${n} ${cubicBezierEaseIn$1} ${u&&`,${u}`}`}),c$1("&.fade-in-scale-up-transition-enter-active",{transformOrigin:e,transition:`opacity ${n} ${cubicBezierEaseOut$1}, transform ${n} ${cubicBezierEaseOut$1} ${u&&`,${u}`}`}),c$1("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${o} scale(${r})`}),c$1("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${o} scale(1)`})]}const style$j=cB("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--n-border-radius);
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-color);
`,[cB("scrollbar",`
 max-height: var(--n-height);
 `),cB("virtual-list",`
 max-height: var(--n-height);
 `),cB("base-select-option",`
 min-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 display: flex;
 align-items: center;
 `,[cE("content",`
 z-index: 1;
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),cB("base-select-group-header",`
 min-height: var(--n-option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),cB("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),cE("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),cE("loading",`
 color: var(--n-loading-color);
 font-size: var(--n-loading-size);
 `),cE("header",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),cE("action",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),cB("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--n-option-padding);
 color: var(--n-group-header-text-color);
 `),cB("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--n-option-padding);
 transition:
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 box-sizing: border-box;
 color: var(--n-option-text-color);
 opacity: 1;
 `,[cM("show-checkmark",`
 padding-right: calc(var(--n-option-padding-right) + 20px);
 `),c$1("&::before",`
 content: "";
 position: absolute;
 left: 4px;
 right: 4px;
 top: 0;
 bottom: 0;
 border-radius: var(--n-border-radius);
 transition: background-color .3s var(--n-bezier);
 `),c$1("&:active",`
 color: var(--n-option-text-color-pressed);
 `),cM("grouped",`
 padding-left: calc(var(--n-option-padding-left) * 1.5);
 `),cM("pending",[c$1("&::before",`
 background-color: var(--n-option-color-pending);
 `)]),cM("selected",`
 color: var(--n-option-text-color-active);
 `,[c$1("&::before",`
 background-color: var(--n-option-color-active);
 `),cM("pending",[c$1("&::before",`
 background-color: var(--n-option-color-active-pending);
 `)])]),cM("disabled",`
 cursor: not-allowed;
 `,[cNotM("selected",`
 color: var(--n-option-text-color-disabled);
 `),cM("selected",`
 opacity: var(--n-option-opacity-disabled);
 `)]),cE("check",`
 font-size: 16px;
 position: absolute;
 right: calc(var(--n-option-padding-right) - 4px);
 top: calc(50% - 7px);
 color: var(--n-option-check-color);
 transition: color .3s var(--n-bezier);
 `,[fadeInScaleUpTransition({enterScale:"0.5"})])])]),NInternalSelectMenu=defineComponent({name:"InternalSelectMenu",props:Object.assign(Object.assign({},useTheme.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(e){const{mergedClsPrefixRef:n,mergedRtlRef:r}=useConfig(e),o=useRtl("InternalSelectMenu",r,n),u=useTheme("InternalSelectMenu","-internal-select-menu",style$j,internalSelectMenuLight$1,e,toRef(e,"clsPrefix")),s=ref(null),w=ref(null),g=ref(null),v=computed(()=>e.treeMate.getFlattenedNodes()),y=computed(()=>createIndexGetter(v.value)),m=ref(null);function d(){const{treeMate:oe}=e;let Ee=null;const{value:Ae}=e;Ae===null?Ee=oe.getFirstAvailableNode():(e.multiple?Ee=oe.getNode((Ae||[])[(Ae||[]).length-1]):Ee=oe.getNode(Ae),(!Ee||Ee.disabled)&&(Ee=oe.getFirstAvailableNode())),J(Ee||null)}function f(){const{value:oe}=m;oe&&!e.treeMate.getNode(oe.key)&&(m.value=null)}let x;watch(()=>e.show,oe=>{oe?x=watch(()=>e.treeMate,()=>{e.resetMenuOnOptionsChange?(e.autoPending?d():f(),nextTick(re)):f()},{immediate:!0}):x==null||x()},{immediate:!0}),onBeforeUnmount(()=>{x==null||x()});const k=computed(()=>depx(u.value.self[createKey("optionHeight",e.size)])),P=computed(()=>getMargin(u.value.self[createKey("padding",e.size)])),S=computed(()=>e.multiple&&Array.isArray(e.value)?new Set(e.value):new Set),E=computed(()=>{const oe=v.value;return oe&&oe.length===0});function M(oe){const{onToggle:Ee}=e;Ee&&Ee(oe)}function T(oe){const{onScroll:Ee}=e;Ee&&Ee(oe)}function D(oe){var Ee;(Ee=g.value)===null||Ee===void 0||Ee.sync(),T(oe)}function I(){var oe;(oe=g.value)===null||oe===void 0||oe.sync()}function N(){const{value:oe}=m;return oe||null}function O(oe,Ee){Ee.disabled||J(Ee,!1)}function F(oe,Ee){Ee.disabled||M(Ee)}function U(oe){var Ee;happensIn(oe,"action")||(Ee=e.onKeyup)===null||Ee===void 0||Ee.call(e,oe)}function Y(oe){var Ee;happensIn(oe,"action")||(Ee=e.onKeydown)===null||Ee===void 0||Ee.call(e,oe)}function Q(oe){var Ee;(Ee=e.onMousedown)===null||Ee===void 0||Ee.call(e,oe),!e.focusable&&oe.preventDefault()}function q(){const{value:oe}=m;oe&&J(oe.getNext({loop:!0}),!0)}function ne(){const{value:oe}=m;oe&&J(oe.getPrev({loop:!0}),!0)}function J(oe,Ee=!1){m.value=oe,Ee&&re()}function re(){var oe,Ee;const Ae=m.value;if(!Ae)return;const ve=y.value(Ae.key);ve!==null&&(e.virtualScroll?(oe=w.value)===null||oe===void 0||oe.scrollTo({index:ve}):(Ee=g.value)===null||Ee===void 0||Ee.scrollTo({index:ve,elSize:k.value}))}function X(oe){var Ee,Ae;!((Ee=s.value)===null||Ee===void 0)&&Ee.contains(oe.target)&&((Ae=e.onFocus)===null||Ae===void 0||Ae.call(e,oe))}function j(oe){var Ee,Ae;!((Ee=s.value)===null||Ee===void 0)&&Ee.contains(oe.relatedTarget)||(Ae=e.onBlur)===null||Ae===void 0||Ae.call(e,oe)}provide(internalSelectionMenuInjectionKey,{handleOptionMouseEnter:O,handleOptionClick:F,valueSetRef:S,pendingTmNodeRef:m,nodePropsRef:toRef(e,"nodeProps"),showCheckmarkRef:toRef(e,"showCheckmark"),multipleRef:toRef(e,"multiple"),valueRef:toRef(e,"value"),renderLabelRef:toRef(e,"renderLabel"),renderOptionRef:toRef(e,"renderOption"),labelFieldRef:toRef(e,"labelField"),valueFieldRef:toRef(e,"valueField")}),provide(internalSelectionMenuBodyInjectionKey,s),onMounted(()=>{const{value:oe}=g;oe&&oe.sync()});const Z=computed(()=>{const{size:oe}=e,{common:{cubicBezierEaseInOut:Ee},self:{height:Ae,borderRadius:ve,color:ke,groupHeaderTextColor:Ce,actionDividerColor:Pe,optionTextColorPressed:Me,optionTextColor:Le,optionTextColorDisabled:Te,optionTextColorActive:ye,optionOpacityDisabled:_e,optionCheckColor:we,actionTextColor:Se,optionColorPending:$e,optionColorActive:Be,loadingColor:Oe,loadingSize:Ge,optionColorActivePending:Ie,[createKey("optionFontSize",oe)]:je,[createKey("optionHeight",oe)]:qe,[createKey("optionPadding",oe)]:Ue}}=u.value;return{"--n-height":Ae,"--n-action-divider-color":Pe,"--n-action-text-color":Se,"--n-bezier":Ee,"--n-border-radius":ve,"--n-color":ke,"--n-option-font-size":je,"--n-group-header-text-color":Ce,"--n-option-check-color":we,"--n-option-color-pending":$e,"--n-option-color-active":Be,"--n-option-color-active-pending":Ie,"--n-option-height":qe,"--n-option-opacity-disabled":_e,"--n-option-text-color":Le,"--n-option-text-color-active":ye,"--n-option-text-color-disabled":Te,"--n-option-text-color-pressed":Me,"--n-option-padding":Ue,"--n-option-padding-left":getMargin(Ue,"left"),"--n-option-padding-right":getMargin(Ue,"right"),"--n-loading-color":Oe,"--n-loading-size":Ge}}),{inlineThemeDisabled:W}=e,te=W?useThemeClass("internal-select-menu",computed(()=>e.size[0]),Z,e):void 0,le={selfRef:s,next:q,prev:ne,getPendingTmNode:N};return useOnResize(s,e.onResize),Object.assign({mergedTheme:u,mergedClsPrefix:n,rtlEnabled:o,virtualListRef:w,scrollbarRef:g,itemSize:k,padding:P,flattenedNodes:v,empty:E,virtualListContainer(){const{value:oe}=w;return oe==null?void 0:oe.listElRef},virtualListContent(){const{value:oe}=w;return oe==null?void 0:oe.itemsElRef},doScroll:T,handleFocusin:X,handleFocusout:j,handleKeyUp:U,handleKeyDown:Y,handleMouseDown:Q,handleVirtualListResize:I,handleVirtualListScroll:D,cssVars:W?void 0:Z,themeClass:te==null?void 0:te.themeClass,onRender:te==null?void 0:te.onRender},le)},render(){const{$slots:e,virtualScroll:n,clsPrefix:r,mergedTheme:o,themeClass:u,onRender:s}=this;return s==null||s(),h$1("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${r}-base-select-menu`,this.rtlEnabled&&`${r}-base-select-menu--rtl`,u,this.multiple&&`${r}-base-select-menu--multiple`],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},resolveWrappedSlot(e.header,w=>w&&h$1("div",{class:`${r}-base-select-menu__header`,"data-header":!0,key:"header"},w)),this.loading?h$1("div",{class:`${r}-base-select-menu__loading`},h$1(NBaseLoading,{clsPrefix:r,strokeWidth:20})):this.empty?h$1("div",{class:`${r}-base-select-menu__empty`,"data-empty":!0},resolveSlot(e.empty,()=>[h$1(NEmpty,{theme:o.peers.Empty,themeOverrides:o.peerOverrides.Empty,size:this.size})])):h$1(NScrollbar,{ref:"scrollbarRef",theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar,scrollable:this.scrollable,container:n?this.virtualListContainer:void 0,content:n?this.virtualListContent:void 0,onScroll:n?void 0:this.doScroll},{default:()=>n?h$1(VVirtualList,{ref:"virtualListRef",class:`${r}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:w})=>w.isGroup?h$1(NSelectGroupHeader,{key:w.key,clsPrefix:r,tmNode:w}):w.ignored?null:h$1(NSelectOption,{clsPrefix:r,key:w.key,tmNode:w})}):h$1("div",{class:`${r}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(w=>w.isGroup?h$1(NSelectGroupHeader,{key:w.key,clsPrefix:r,tmNode:w}):h$1(NSelectOption,{clsPrefix:r,key:w.key,tmNode:w})))}),resolveWrappedSlot(e.action,w=>w&&[h$1("div",{class:`${r}-base-select-menu__action`,"data-action":!0,key:"action"},w),h$1(FocusDetector,{onFocus:this.onTabOut,key:"focus-detector"})]))}}),commonVariables$6={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"};function self$i(e){const{boxShadow2:n,popoverColor:r,textColor2:o,borderRadius:u,fontSize:s,dividerColor:w}=e;return Object.assign(Object.assign({},commonVariables$6),{fontSize:s,borderRadius:u,color:r,dividerColor:w,textColor:o,boxShadow:n})}const popoverLight={name:"Popover",common:commonLight,self:self$i},popoverLight$1=popoverLight,oppositePlacement={top:"bottom",bottom:"top",left:"right",right:"left"},arrowSize="var(--n-arrow-height) * 1.414",style$i=c$1([cB("popover",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 position: relative;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 box-shadow: var(--n-box-shadow);
 word-break: break-word;
 `,[c$1(">",[cB("scrollbar",`
 height: inherit;
 max-height: inherit;
 `)]),cNotM("raw",`
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 `,[cNotM("scrollable",[cNotM("show-header-or-footer","padding: var(--n-padding);")])]),cE("header",`
 padding: var(--n-padding);
 border-bottom: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),cE("footer",`
 padding: var(--n-padding);
 border-top: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),cM("scrollable, show-header-or-footer",[cE("content",`
 padding: var(--n-padding);
 `)])]),cB("popover-shared",`
 transform-origin: inherit;
 `,[cB("popover-arrow-wrapper",`
 position: absolute;
 overflow: hidden;
 pointer-events: none;
 `,[cB("popover-arrow",`
 transition: background-color .3s var(--n-bezier);
 position: absolute;
 display: block;
 width: calc(${arrowSize});
 height: calc(${arrowSize});
 box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);
 transform: rotate(45deg);
 background-color: var(--n-color);
 pointer-events: all;
 `)]),c$1("&.popover-transition-enter-from, &.popover-transition-leave-to",`
 opacity: 0;
 transform: scale(.85);
 `),c$1("&.popover-transition-enter-to, &.popover-transition-leave-from",`
 transform: scale(1);
 opacity: 1;
 `),c$1("&.popover-transition-enter-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-out),
 transform .15s var(--n-bezier-ease-out);
 `),c$1("&.popover-transition-leave-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-in),
 transform .15s var(--n-bezier-ease-in);
 `)]),placementStyle("top-start",`
 top: calc(${arrowSize} / -2);
 left: calc(${getArrowOffset("top-start")} - var(--v-offset-left));
 `),placementStyle("top",`
 top: calc(${arrowSize} / -2);
 transform: translateX(calc(${arrowSize} / -2)) rotate(45deg);
 left: 50%;
 `),placementStyle("top-end",`
 top: calc(${arrowSize} / -2);
 right: calc(${getArrowOffset("top-end")} + var(--v-offset-left));
 `),placementStyle("bottom-start",`
 bottom: calc(${arrowSize} / -2);
 left: calc(${getArrowOffset("bottom-start")} - var(--v-offset-left));
 `),placementStyle("bottom",`
 bottom: calc(${arrowSize} / -2);
 transform: translateX(calc(${arrowSize} / -2)) rotate(45deg);
 left: 50%;
 `),placementStyle("bottom-end",`
 bottom: calc(${arrowSize} / -2);
 right: calc(${getArrowOffset("bottom-end")} + var(--v-offset-left));
 `),placementStyle("left-start",`
 left: calc(${arrowSize} / -2);
 top: calc(${getArrowOffset("left-start")} - var(--v-offset-top));
 `),placementStyle("left",`
 left: calc(${arrowSize} / -2);
 transform: translateY(calc(${arrowSize} / -2)) rotate(45deg);
 top: 50%;
 `),placementStyle("left-end",`
 left: calc(${arrowSize} / -2);
 bottom: calc(${getArrowOffset("left-end")} + var(--v-offset-top));
 `),placementStyle("right-start",`
 right: calc(${arrowSize} / -2);
 top: calc(${getArrowOffset("right-start")} - var(--v-offset-top));
 `),placementStyle("right",`
 right: calc(${arrowSize} / -2);
 transform: translateY(calc(${arrowSize} / -2)) rotate(45deg);
 top: 50%;
 `),placementStyle("right-end",`
 right: calc(${arrowSize} / -2);
 bottom: calc(${getArrowOffset("right-end")} + var(--v-offset-top));
 `),...map({top:["right-start","left-start"],right:["top-end","bottom-end"],bottom:["right-end","left-end"],left:["top-start","bottom-start"]},(e,n)=>{const r=["right","left"].includes(n),o=r?"width":"height";return e.map(u=>{const s=u.split("-")[1]==="end",g=`calc((${`var(--v-target-${o}, 0px)`} - ${arrowSize}) / 2)`,v=getArrowOffset(u);return c$1(`[v-placement="${u}"] >`,[cB("popover-shared",[cM("center-arrow",[cB("popover-arrow",`${n}: calc(max(${g}, ${v}) ${s?"+":"-"} var(--v-offset-${r?"left":"top"}));`)])])])})})]);function getArrowOffset(e){return["top","bottom"].includes(e.split("-")[0])?"var(--n-arrow-offset)":"var(--n-arrow-offset-vertical)"}function placementStyle(e,n){const r=e.split("-")[0],o=["top","bottom"].includes(r)?"height: var(--n-space-arrow);":"width: var(--n-space-arrow);";return c$1(`[v-placement="${e}"] >`,[cB("popover-shared",`
 margin-${oppositePlacement[r]}: var(--n-space);
 `,[cM("show-arrow",`
 margin-${oppositePlacement[r]}: var(--n-space-arrow);
 `),cM("overlap",`
 margin: 0;
 `),cCB("popover-arrow-wrapper",`
 right: 0;
 left: 0;
 top: 0;
 bottom: 0;
 ${r}: 100%;
 ${oppositePlacement[r]}: auto;
 ${o}
 `,[cB("popover-arrow",n)])])])}const popoverBodyProps=Object.assign(Object.assign({},useTheme.props),{to:useAdjustedTo.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowPointToCenter:Boolean,arrowClass:String,arrowStyle:[String,Object],arrowWrapperClass:String,arrowWrapperStyle:[String,Object],displayDirective:String,x:Number,y:Number,flip:Boolean,overlap:Boolean,placement:String,width:[Number,String],keepAliveOnHover:Boolean,scrollable:Boolean,contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],internalDeactivateImmediately:Boolean,animated:Boolean,onClickoutside:Function,internalTrapFocus:Boolean,internalOnAfterLeave:Function,minWidth:Number,maxWidth:Number});function renderArrow({arrowClass:e,arrowStyle:n,arrowWrapperClass:r,arrowWrapperStyle:o,clsPrefix:u}){return h$1("div",{key:"__popover-arrow__",style:o,class:[`${u}-popover-arrow-wrapper`,r]},h$1("div",{class:[`${u}-popover-arrow`,e],style:n}))}const NPopoverBody=defineComponent({name:"PopoverBody",inheritAttrs:!1,props:popoverBodyProps,setup(e,{slots:n,attrs:r}){const{namespaceRef:o,mergedClsPrefixRef:u,inlineThemeDisabled:s}=useConfig(e),w=useTheme("Popover","-popover",style$i,popoverLight$1,e,u),g=ref(null),v=inject("NPopover"),y=ref(null),m=ref(e.show),d=ref(!1);watchEffect(()=>{const{show:O}=e;O&&!isJsdom()&&!e.internalDeactivateImmediately&&(d.value=!0)});const f=computed(()=>{const{trigger:O,onClickoutside:F}=e,U=[],{positionManuallyRef:{value:Y}}=v;return Y||(O==="click"&&!F&&U.push([clickoutside$1,D,void 0,{capture:!0}]),O==="hover"&&U.push([mousemoveoutside$1,T])),F&&U.push([clickoutside$1,D,void 0,{capture:!0}]),(e.displayDirective==="show"||e.animated&&d.value)&&U.push([vShow,e.show]),U}),x=computed(()=>{const{common:{cubicBezierEaseInOut:O,cubicBezierEaseIn:F,cubicBezierEaseOut:U},self:{space:Y,spaceArrow:Q,padding:q,fontSize:ne,textColor:J,dividerColor:re,color:X,boxShadow:j,borderRadius:Z,arrowHeight:W,arrowOffset:te,arrowOffsetVertical:le}}=w.value;return{"--n-box-shadow":j,"--n-bezier":O,"--n-bezier-ease-in":F,"--n-bezier-ease-out":U,"--n-font-size":ne,"--n-text-color":J,"--n-color":X,"--n-divider-color":re,"--n-border-radius":Z,"--n-arrow-height":W,"--n-arrow-offset":te,"--n-arrow-offset-vertical":le,"--n-padding":q,"--n-space":Y,"--n-space-arrow":Q}}),k=computed(()=>{const O=e.width==="trigger"?void 0:formatLength(e.width),F=[];O&&F.push({width:O});const{maxWidth:U,minWidth:Y}=e;return U&&F.push({maxWidth:formatLength(U)}),Y&&F.push({maxWidth:formatLength(Y)}),s||F.push(x.value),F}),P=s?useThemeClass("popover",void 0,x,e):void 0;v.setBodyInstance({syncPosition:S}),onBeforeUnmount(()=>{v.setBodyInstance(null)}),watch(toRef(e,"show"),O=>{e.animated||(O?m.value=!0:m.value=!1)});function S(){var O;(O=g.value)===null||O===void 0||O.syncPosition()}function E(O){e.trigger==="hover"&&e.keepAliveOnHover&&e.show&&v.handleMouseEnter(O)}function M(O){e.trigger==="hover"&&e.keepAliveOnHover&&v.handleMouseLeave(O)}function T(O){e.trigger==="hover"&&!I().contains(getPreciseEventTarget(O))&&v.handleMouseMoveOutside(O)}function D(O){(e.trigger==="click"&&!I().contains(getPreciseEventTarget(O))||e.onClickoutside)&&v.handleClickOutside(O)}function I(){return v.getTriggerElement()}provide(popoverBodyInjectionKey,y),provide(drawerBodyInjectionKey,null),provide(modalBodyInjectionKey,null);function N(){if(P==null||P.onRender(),!(e.displayDirective==="show"||e.show||e.animated&&d.value))return null;let F;const U=v.internalRenderBodyRef.value,{value:Y}=u;if(U)F=U([`${Y}-popover-shared`,P==null?void 0:P.themeClass.value,e.overlap&&`${Y}-popover-shared--overlap`,e.showArrow&&`${Y}-popover-shared--show-arrow`,e.arrowPointToCenter&&`${Y}-popover-shared--center-arrow`],y,k.value,E,M);else{const{value:Q}=v.extraClassRef,{internalTrapFocus:q}=e,ne=!isSlotEmpty(n.header)||!isSlotEmpty(n.footer),J=()=>{var re,X;const j=ne?h$1(Fragment,null,resolveWrappedSlot(n.header,te=>te?h$1("div",{class:[`${Y}-popover__header`,e.headerClass],style:e.headerStyle},te):null),resolveWrappedSlot(n.default,te=>te?h$1("div",{class:[`${Y}-popover__content`,e.contentClass],style:e.contentStyle},n):null),resolveWrappedSlot(n.footer,te=>te?h$1("div",{class:[`${Y}-popover__footer`,e.footerClass],style:e.footerStyle},te):null)):e.scrollable?(re=n.default)===null||re===void 0?void 0:re.call(n):h$1("div",{class:[`${Y}-popover__content`,e.contentClass],style:e.contentStyle},n),Z=e.scrollable?h$1(XScrollbar,{contentClass:ne?void 0:`${Y}-popover__content ${(X=e.contentClass)!==null&&X!==void 0?X:""}`,contentStyle:ne?void 0:e.contentStyle},{default:()=>j}):j,W=e.showArrow?renderArrow({arrowClass:e.arrowClass,arrowStyle:e.arrowStyle,arrowWrapperClass:e.arrowWrapperClass,arrowWrapperStyle:e.arrowWrapperStyle,clsPrefix:Y}):null;return[Z,W]};F=h$1("div",mergeProps({class:[`${Y}-popover`,`${Y}-popover-shared`,P==null?void 0:P.themeClass.value,Q.map(re=>`${Y}-${re}`),{[`${Y}-popover--scrollable`]:e.scrollable,[`${Y}-popover--show-header-or-footer`]:ne,[`${Y}-popover--raw`]:e.raw,[`${Y}-popover-shared--overlap`]:e.overlap,[`${Y}-popover-shared--show-arrow`]:e.showArrow,[`${Y}-popover-shared--center-arrow`]:e.arrowPointToCenter}],ref:y,style:k.value,onKeydown:v.handleKeydown,onMouseenter:E,onMouseleave:M},r),q?h$1(FocusTrap,{active:e.show,autoFocus:!0},{default:J}):J())}return withDirectives(F,f.value)}return{displayed:d,namespace:o,isMounted:v.isMountedRef,zIndex:v.zIndexRef,followerRef:g,adjustedTo:useAdjustedTo(e),followerEnabled:m,renderContentNode:N}},render(){return h$1(VFollower,{ref:"followerRef",zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,flip:this.flip,placement:this.placement,containerClass:this.namespace,overlap:this.overlap,width:this.width==="trigger"?"target":void 0,teleportDisabled:this.adjustedTo===useAdjustedTo.tdkey},{default:()=>this.animated?h$1(Transition,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{var e;(e=this.internalOnAfterLeave)===null||e===void 0||e.call(this),this.followerEnabled=!1,this.displayed=!1}},{default:this.renderContentNode}):this.renderContentNode()})}}),bodyPropKeys=Object.keys(popoverBodyProps),triggerEventMap={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};function appendEvents(e,n,r){triggerEventMap[n].forEach(o=>{e.props?e.props=Object.assign({},e.props):e.props={};const u=e.props[o],s=r[o];u?e.props[o]=(...w)=>{u(...w),s(...w)}:e.props[o]=s})}const popoverBaseProps={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,arrowPointToCenter:Boolean,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowClass:String,arrowStyle:[String,Object],arrowWrapperClass:String,arrowWrapperStyle:[String,Object],flip:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,keepAliveOnHover:{type:Boolean,default:!0},zIndex:Number,to:useAdjustedTo.propTo,scrollable:Boolean,contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],internalDeactivateImmediately:Boolean,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},internalTrapFocus:Boolean,internalExtraClass:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},popoverProps=Object.assign(Object.assign(Object.assign({},useTheme.props),popoverBaseProps),{internalOnAfterLeave:Function,internalRenderBody:Function}),NPopover=defineComponent({name:"Popover",inheritAttrs:!1,props:popoverProps,slots:Object,__popover__:!0,setup(e){const n=isMounted(),r=ref(null),o=computed(()=>e.show),u=ref(e.defaultShow),s=useMergedState(o,u),w=useMemo(()=>e.disabled?!1:s.value),g=()=>{if(e.disabled)return!0;const{getDisabled:re}=e;return!!(re!=null&&re())},v=()=>g()?!1:s.value,y=useCompitable(e,["arrow","showArrow"]),m=computed(()=>e.overlap?!1:y.value);let d=null;const f=ref(null),x=ref(null),k=useMemo(()=>e.x!==void 0&&e.y!==void 0);function P(re){const{"onUpdate:show":X,onUpdateShow:j,onShow:Z,onHide:W}=e;u.value=re,X&&call(X,re),j&&call(j,re),re&&Z&&call(Z,!0),re&&W&&call(W,!1)}function S(){d&&d.syncPosition()}function E(){const{value:re}=f;re&&(window.clearTimeout(re),f.value=null)}function M(){const{value:re}=x;re&&(window.clearTimeout(re),x.value=null)}function T(){const re=g();if(e.trigger==="focus"&&!re){if(v())return;P(!0)}}function D(){const re=g();if(e.trigger==="focus"&&!re){if(!v())return;P(!1)}}function I(){const re=g();if(e.trigger==="hover"&&!re){if(M(),f.value!==null||v())return;const X=()=>{P(!0),f.value=null},{delay:j}=e;j===0?X():f.value=window.setTimeout(X,j)}}function N(){const re=g();if(e.trigger==="hover"&&!re){if(E(),x.value!==null||!v())return;const X=()=>{P(!1),x.value=null},{duration:j}=e;j===0?X():x.value=window.setTimeout(X,j)}}function O(){N()}function F(re){var X;!v()||(e.trigger==="click"&&(E(),M(),P(!1)),(X=e.onClickoutside)===null||X===void 0||X.call(e,re))}function U(){if(e.trigger==="click"&&!g()){E(),M();const re=!v();P(re)}}function Y(re){!e.internalTrapFocus||re.key==="Escape"&&(E(),M(),P(!1))}function Q(re){u.value=re}function q(){var re;return(re=r.value)===null||re===void 0?void 0:re.targetRef}function ne(re){d=re}return provide("NPopover",{getTriggerElement:q,handleKeydown:Y,handleMouseEnter:I,handleMouseLeave:N,handleClickOutside:F,handleMouseMoveOutside:O,setBodyInstance:ne,positionManuallyRef:k,isMountedRef:n,zIndexRef:toRef(e,"zIndex"),extraClassRef:toRef(e,"internalExtraClass"),internalRenderBodyRef:toRef(e,"internalRenderBody")}),watchEffect(()=>{s.value&&g()&&P(!1)}),{binderInstRef:r,positionManually:k,mergedShowConsideringDisabledProp:w,uncontrolledShow:u,mergedShowArrow:m,getMergedShow:v,setShow:Q,handleClick:U,handleMouseEnter:I,handleMouseLeave:N,handleFocus:T,handleBlur:D,syncPosition:S}},render(){var e;const{positionManually:n,$slots:r}=this;let o,u=!1;if(!n&&(o=getFirstSlotVNode(r,"trigger"),o)){o=cloneVNode(o),o=o.type===Text$2?h$1("span",[o]):o;const s={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if(!((e=o.type)===null||e===void 0)&&e.__popover__)u=!0,o.props||(o.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),o.props.internalSyncTargetWithParent=!0,o.props.internalInheritedEventHandlers?o.props.internalInheritedEventHandlers=[s,...o.props.internalInheritedEventHandlers]:o.props.internalInheritedEventHandlers=[s];else{const{internalInheritedEventHandlers:w}=this,g=[s,...w],v={onBlur:y=>{g.forEach(m=>{m.onBlur(y)})},onFocus:y=>{g.forEach(m=>{m.onFocus(y)})},onClick:y=>{g.forEach(m=>{m.onClick(y)})},onMouseenter:y=>{g.forEach(m=>{m.onMouseenter(y)})},onMouseleave:y=>{g.forEach(m=>{m.onMouseleave(y)})}};appendEvents(o,w?"nested":n?"manual":this.trigger,v)}}return h$1(VBinder,{ref:"binderInstRef",syncTarget:!u,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const s=this.getMergedShow();return[this.internalTrapFocus&&s?withDirectives(h$1("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0}}),[[zindexable$1,{enabled:s,zIndex:this.zIndex}]]):null,n?null:h$1(VTarget,null,{default:()=>o}),h$1(NPopoverBody,keep(this.$props,bodyPropKeys,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:s})),{default:()=>{var w,g;return(g=(w=this.$slots).default)===null||g===void 0?void 0:g.call(w)},header:()=>{var w,g;return(g=(w=this.$slots).header)===null||g===void 0?void 0:g.call(w)},footer:()=>{var w,g;return(g=(w=this.$slots).footer)===null||g===void 0?void 0:g.call(w)}})]}})}}),commonVariables$5={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px"};function self$h(e){const{textColor2:n,primaryColorHover:r,primaryColorPressed:o,primaryColor:u,infoColor:s,successColor:w,warningColor:g,errorColor:v,baseColor:y,borderColor:m,opacityDisabled:d,tagColor:f,closeIconColor:x,closeIconColorHover:k,closeIconColorPressed:P,borderRadiusSmall:S,fontSizeMini:E,fontSizeTiny:M,fontSizeSmall:T,fontSizeMedium:D,heightMini:I,heightTiny:N,heightSmall:O,heightMedium:F,closeColorHover:U,closeColorPressed:Y,buttonColor2Hover:Q,buttonColor2Pressed:q,fontWeightStrong:ne}=e;return Object.assign(Object.assign({},commonVariables$5),{closeBorderRadius:S,heightTiny:I,heightSmall:N,heightMedium:O,heightLarge:F,borderRadius:S,opacityDisabled:d,fontSizeTiny:E,fontSizeSmall:M,fontSizeMedium:T,fontSizeLarge:D,fontWeightStrong:ne,textColorCheckable:n,textColorHoverCheckable:n,textColorPressedCheckable:n,textColorChecked:y,colorCheckable:"#0000",colorHoverCheckable:Q,colorPressedCheckable:q,colorChecked:u,colorCheckedHover:r,colorCheckedPressed:o,border:`1px solid ${m}`,textColor:n,color:f,colorBordered:"rgb(250, 250, 252)",closeIconColor:x,closeIconColorHover:k,closeIconColorPressed:P,closeColorHover:U,closeColorPressed:Y,borderPrimary:`1px solid ${changeColor(u,{alpha:.3})}`,textColorPrimary:u,colorPrimary:changeColor(u,{alpha:.12}),colorBorderedPrimary:changeColor(u,{alpha:.1}),closeIconColorPrimary:u,closeIconColorHoverPrimary:u,closeIconColorPressedPrimary:u,closeColorHoverPrimary:changeColor(u,{alpha:.12}),closeColorPressedPrimary:changeColor(u,{alpha:.18}),borderInfo:`1px solid ${changeColor(s,{alpha:.3})}`,textColorInfo:s,colorInfo:changeColor(s,{alpha:.12}),colorBorderedInfo:changeColor(s,{alpha:.1}),closeIconColorInfo:s,closeIconColorHoverInfo:s,closeIconColorPressedInfo:s,closeColorHoverInfo:changeColor(s,{alpha:.12}),closeColorPressedInfo:changeColor(s,{alpha:.18}),borderSuccess:`1px solid ${changeColor(w,{alpha:.3})}`,textColorSuccess:w,colorSuccess:changeColor(w,{alpha:.12}),colorBorderedSuccess:changeColor(w,{alpha:.1}),closeIconColorSuccess:w,closeIconColorHoverSuccess:w,closeIconColorPressedSuccess:w,closeColorHoverSuccess:changeColor(w,{alpha:.12}),closeColorPressedSuccess:changeColor(w,{alpha:.18}),borderWarning:`1px solid ${changeColor(g,{alpha:.35})}`,textColorWarning:g,colorWarning:changeColor(g,{alpha:.15}),colorBorderedWarning:changeColor(g,{alpha:.12}),closeIconColorWarning:g,closeIconColorHoverWarning:g,closeIconColorPressedWarning:g,closeColorHoverWarning:changeColor(g,{alpha:.12}),closeColorPressedWarning:changeColor(g,{alpha:.18}),borderError:`1px solid ${changeColor(v,{alpha:.23})}`,textColorError:v,colorError:changeColor(v,{alpha:.1}),colorBorderedError:changeColor(v,{alpha:.08}),closeIconColorError:v,closeIconColorHoverError:v,closeIconColorPressedError:v,closeColorHoverError:changeColor(v,{alpha:.12}),closeColorPressedError:changeColor(v,{alpha:.18})})}const tagLight={name:"Tag",common:commonLight,self:self$h},tagLight$1=tagLight,commonProps={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},style$h=cB("tag",`
 --n-close-margin: var(--n-close-margin-top) var(--n-close-margin-right) var(--n-close-margin-bottom) var(--n-close-margin-left);
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition: 
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 line-height: 1;
 height: var(--n-height);
 font-size: var(--n-font-size);
`,[cM("strong",`
 font-weight: var(--n-font-weight-strong);
 `),cE("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--n-border);
 transition: border-color .3s var(--n-bezier);
 `),cE("icon",`
 display: flex;
 margin: 0 4px 0 0;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 font-size: var(--n-avatar-size-override);
 `),cE("avatar",`
 display: flex;
 margin: 0 6px 0 0;
 `),cE("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `),cM("round",`
 padding: 0 calc(var(--n-height) / 3);
 border-radius: calc(var(--n-height) / 2);
 `,[cE("icon",`
 margin: 0 4px 0 calc((var(--n-height) - 8px) / -2);
 `),cE("avatar",`
 margin: 0 6px 0 calc((var(--n-height) - 8px) / -2);
 `),cM("closable",`
 padding: 0 calc(var(--n-height) / 4) 0 calc(var(--n-height) / 3);
 `)]),cM("icon, avatar",[cM("round",`
 padding: 0 calc(var(--n-height) / 3) 0 calc(var(--n-height) / 2);
 `)]),cM("disabled",`
 cursor: not-allowed !important;
 opacity: var(--n-opacity-disabled);
 `),cM("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--n-text-color-checkable);
 background-color: var(--n-color-checkable);
 `,[cNotM("disabled",[c$1("&:hover","background-color: var(--n-color-hover-checkable);",[cNotM("checked","color: var(--n-text-color-hover-checkable);")]),c$1("&:active","background-color: var(--n-color-pressed-checkable);",[cNotM("checked","color: var(--n-text-color-pressed-checkable);")])]),cM("checked",`
 color: var(--n-text-color-checked);
 background-color: var(--n-color-checked);
 `,[cNotM("disabled",[c$1("&:hover","background-color: var(--n-color-checked-hover);"),c$1("&:active","background-color: var(--n-color-checked-pressed);")])])])]),tagProps=Object.assign(Object.assign(Object.assign({},useTheme.props),commonProps),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,strong:Boolean,triggerClickOnClose:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalCloseFocusable:{type:Boolean,default:!0},internalCloseIsButtonTag:{type:Boolean,default:!0},onCheckedChange:Function}),tagInjectionKey="n-tag",NTag=defineComponent({name:"Tag",props:tagProps,slots:Object,setup(e){const n=ref(null),{mergedBorderedRef:r,mergedClsPrefixRef:o,inlineThemeDisabled:u,mergedRtlRef:s}=useConfig(e),w=useTheme("Tag","-tag",style$h,tagLight$1,e,o);provide(tagInjectionKey,{roundRef:toRef(e,"round")});function g(){if(!e.disabled&&e.checkable){const{checked:x,onCheckedChange:k,onUpdateChecked:P,"onUpdate:checked":S}=e;P&&P(!x),S&&S(!x),k&&k(!x)}}function v(x){if(e.triggerClickOnClose||x.stopPropagation(),!e.disabled){const{onClose:k}=e;k&&call(k,x)}}const y={setTextContent(x){const{value:k}=n;k&&(k.textContent=x)}},m=useRtl("Tag",s,o),d=computed(()=>{const{type:x,size:k,color:{color:P,textColor:S}={}}=e,{common:{cubicBezierEaseInOut:E},self:{padding:M,closeMargin:T,borderRadius:D,opacityDisabled:I,textColorCheckable:N,textColorHoverCheckable:O,textColorPressedCheckable:F,textColorChecked:U,colorCheckable:Y,colorHoverCheckable:Q,colorPressedCheckable:q,colorChecked:ne,colorCheckedHover:J,colorCheckedPressed:re,closeBorderRadius:X,fontWeightStrong:j,[createKey("colorBordered",x)]:Z,[createKey("closeSize",k)]:W,[createKey("closeIconSize",k)]:te,[createKey("fontSize",k)]:le,[createKey("height",k)]:oe,[createKey("color",x)]:Ee,[createKey("textColor",x)]:Ae,[createKey("border",x)]:ve,[createKey("closeIconColor",x)]:ke,[createKey("closeIconColorHover",x)]:Ce,[createKey("closeIconColorPressed",x)]:Pe,[createKey("closeColorHover",x)]:Me,[createKey("closeColorPressed",x)]:Le}}=w.value,Te=getMargin(T);return{"--n-font-weight-strong":j,"--n-avatar-size-override":`calc(${oe} - 8px)`,"--n-bezier":E,"--n-border-radius":D,"--n-border":ve,"--n-close-icon-size":te,"--n-close-color-pressed":Le,"--n-close-color-hover":Me,"--n-close-border-radius":X,"--n-close-icon-color":ke,"--n-close-icon-color-hover":Ce,"--n-close-icon-color-pressed":Pe,"--n-close-icon-color-disabled":ke,"--n-close-margin-top":Te.top,"--n-close-margin-right":Te.right,"--n-close-margin-bottom":Te.bottom,"--n-close-margin-left":Te.left,"--n-close-size":W,"--n-color":P||(r.value?Z:Ee),"--n-color-checkable":Y,"--n-color-checked":ne,"--n-color-checked-hover":J,"--n-color-checked-pressed":re,"--n-color-hover-checkable":Q,"--n-color-pressed-checkable":q,"--n-font-size":le,"--n-height":oe,"--n-opacity-disabled":I,"--n-padding":M,"--n-text-color":S||Ae,"--n-text-color-checkable":N,"--n-text-color-checked":U,"--n-text-color-hover-checkable":O,"--n-text-color-pressed-checkable":F}}),f=u?useThemeClass("tag",computed(()=>{let x="";const{type:k,size:P,color:{color:S,textColor:E}={}}=e;return x+=k[0],x+=P[0],S&&(x+=`a${color2Class(S)}`),E&&(x+=`b${color2Class(E)}`),r.value&&(x+="c"),x}),d,e):void 0;return Object.assign(Object.assign({},y),{rtlEnabled:m,mergedClsPrefix:o,contentRef:n,mergedBordered:r,handleClick:g,handleCloseClick:v,cssVars:u?void 0:d,themeClass:f==null?void 0:f.themeClass,onRender:f==null?void 0:f.onRender})},render(){var e,n;const{mergedClsPrefix:r,rtlEnabled:o,closable:u,color:{borderColor:s}={},round:w,onRender:g,$slots:v}=this;g==null||g();const y=resolveWrappedSlot(v.avatar,d=>d&&h$1("div",{class:`${r}-tag__avatar`},d)),m=resolveWrappedSlot(v.icon,d=>d&&h$1("div",{class:`${r}-tag__icon`},d));return h$1("div",{class:[`${r}-tag`,this.themeClass,{[`${r}-tag--rtl`]:o,[`${r}-tag--strong`]:this.strong,[`${r}-tag--disabled`]:this.disabled,[`${r}-tag--checkable`]:this.checkable,[`${r}-tag--checked`]:this.checkable&&this.checked,[`${r}-tag--round`]:w,[`${r}-tag--avatar`]:y,[`${r}-tag--icon`]:m,[`${r}-tag--closable`]:u}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},m||y,h$1("span",{class:`${r}-tag__content`,ref:"contentRef"},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e)),!this.checkable&&u?h$1(NBaseClose,{clsPrefix:r,class:`${r}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick,focusable:this.internalCloseFocusable,round:w,isButtonTag:this.internalCloseIsButtonTag,absolute:!0}):null,!this.checkable&&this.mergedBordered?h$1("div",{class:`${r}-tag__border`,style:{borderColor:s}}):null)}}),NBaseSuffix=defineComponent({name:"InternalSelectionSuffix",props:{clsPrefix:{type:String,required:!0},showArrow:{type:Boolean,default:void 0},showClear:{type:Boolean,default:void 0},loading:{type:Boolean,default:!1},onClear:Function},setup(e,{slots:n}){return()=>{const{clsPrefix:r}=e;return h$1(NBaseLoading,{clsPrefix:r,class:`${r}-base-suffix`,strokeWidth:24,scale:.85,show:e.loading},{default:()=>e.showArrow?h$1(NBaseClear,{clsPrefix:r,show:e.showClear,onClear:e.onClear},{placeholder:()=>h$1(NBaseIcon,{clsPrefix:r,class:`${r}-base-suffix__arrow`},{default:()=>resolveSlot(n.default,()=>[h$1(ChevronDownIcon,null)])})}):null})}}}),commonVariables$4={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"};function self$g(e){const{borderRadius:n,textColor2:r,textColorDisabled:o,inputColor:u,inputColorDisabled:s,primaryColor:w,primaryColorHover:g,warningColor:v,warningColorHover:y,errorColor:m,errorColorHover:d,borderColor:f,iconColor:x,iconColorDisabled:k,clearColor:P,clearColorHover:S,clearColorPressed:E,placeholderColor:M,placeholderColorDisabled:T,fontSizeTiny:D,fontSizeSmall:I,fontSizeMedium:N,fontSizeLarge:O,heightTiny:F,heightSmall:U,heightMedium:Y,heightLarge:Q,fontWeight:q}=e;return Object.assign(Object.assign({},commonVariables$4),{fontSizeTiny:D,fontSizeSmall:I,fontSizeMedium:N,fontSizeLarge:O,heightTiny:F,heightSmall:U,heightMedium:Y,heightLarge:Q,borderRadius:n,fontWeight:q,textColor:r,textColorDisabled:o,placeholderColor:M,placeholderColorDisabled:T,color:u,colorDisabled:s,colorActive:u,border:`1px solid ${f}`,borderHover:`1px solid ${g}`,borderActive:`1px solid ${w}`,borderFocus:`1px solid ${g}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${changeColor(w,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${changeColor(w,{alpha:.2})}`,caretColor:w,arrowColor:x,arrowColorDisabled:k,loadingColor:w,borderWarning:`1px solid ${v}`,borderHoverWarning:`1px solid ${y}`,borderActiveWarning:`1px solid ${v}`,borderFocusWarning:`1px solid ${y}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${changeColor(v,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${changeColor(v,{alpha:.2})}`,colorActiveWarning:u,caretColorWarning:v,borderError:`1px solid ${m}`,borderHoverError:`1px solid ${d}`,borderActiveError:`1px solid ${m}`,borderFocusError:`1px solid ${d}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${changeColor(m,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${changeColor(m,{alpha:.2})}`,colorActiveError:u,caretColorError:m,clearColor:P,clearColorHover:S,clearColorPressed:E})}const internalSelectionLight={name:"InternalSelection",common:commonLight,peers:{Popover:popoverLight$1},self:self$g},internalSelectionLight$1=internalSelectionLight,style$g=c$1([cB("base-selection",`
 --n-padding-single: var(--n-padding-single-top) var(--n-padding-single-right) var(--n-padding-single-bottom) var(--n-padding-single-left);
 --n-padding-multiple: var(--n-padding-multiple-top) var(--n-padding-multiple-right) var(--n-padding-multiple-bottom) var(--n-padding-multiple-left);
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--n-border-radius);
 min-height: var(--n-height);
 line-height: 1.5;
 font-size: var(--n-font-size);
 `,[cB("base-loading",`
 color: var(--n-loading-color);
 `),cB("base-selection-tags","min-height: var(--n-height);"),cE("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--n-border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),cE("state-border",`
 z-index: 1;
 border-color: #0000;
 `),cB("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[cE("arrow",`
 font-size: var(--n-arrow-size);
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 `)]),cB("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--n-padding-single);
 transition: color .3s var(--n-bezier);
 `,[cE("wrapper",`
 flex-basis: 0;
 flex-grow: 1;
 overflow: hidden;
 text-overflow: ellipsis;
 `)]),cB("base-selection-placeholder",`
 color: var(--n-placeholder-color);
 `,[cE("inner",`
 max-width: 100%;
 overflow: hidden;
 `)]),cB("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: var(--n-padding-multiple);
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--n-color);
 border-radius: inherit;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `),cB("base-selection-label",`
 height: var(--n-height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: inherit;
 background-color: var(--n-color);
 align-items: center;
 `,[cB("base-selection-input",`
 font-size: inherit;
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--n-padding-single);
 background-color: #0000;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 caret-color: var(--n-caret-color);
 `,[cE("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),cE("render-label",`
 color: var(--n-text-color);
 `)]),cNotM("disabled",[c$1("&:hover",[cE("state-border",`
 box-shadow: var(--n-box-shadow-hover);
 border: var(--n-border-hover);
 `)]),cM("focus",[cE("state-border",`
 box-shadow: var(--n-box-shadow-focus);
 border: var(--n-border-focus);
 `)]),cM("active",[cE("state-border",`
 box-shadow: var(--n-box-shadow-active);
 border: var(--n-border-active);
 `),cB("base-selection-label","background-color: var(--n-color-active);"),cB("base-selection-tags","background-color: var(--n-color-active);")])]),cM("disabled","cursor: not-allowed;",[cE("arrow",`
 color: var(--n-arrow-color-disabled);
 `),cB("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `,[cB("base-selection-input",`
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 `),cE("render-label",`
 color: var(--n-text-color-disabled);
 `)]),cB("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `),cB("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--n-placeholder-color-disabled);
 `)]),cB("base-selection-input-tag",`
 height: calc(var(--n-height) - 6px);
 line-height: calc(var(--n-height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[cE("input",`
 font-size: inherit;
 font-family: inherit;
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 `),cE("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 -webkit-user-select: none;
 opacity: 0;
 `)]),["warning","error"].map(e=>cM(`${e}-status`,[cE("state-border",`border: var(--n-border-${e});`),cNotM("disabled",[c$1("&:hover",[cE("state-border",`
 box-shadow: var(--n-box-shadow-hover-${e});
 border: var(--n-border-hover-${e});
 `)]),cM("active",[cE("state-border",`
 box-shadow: var(--n-box-shadow-active-${e});
 border: var(--n-border-active-${e});
 `),cB("base-selection-label",`background-color: var(--n-color-active-${e});`),cB("base-selection-tags",`background-color: var(--n-color-active-${e});`)]),cM("focus",[cE("state-border",`
 box-shadow: var(--n-box-shadow-focus-${e});
 border: var(--n-border-focus-${e});
 `)])])]))]),cB("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 margin-right: -8px;
 `),cB("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[c$1("&:last-child","padding-right: 0;"),cB("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[cE("content",`
 line-height: 1.25;
 text-overflow: ellipsis;
 overflow: hidden;
 `)])])]),NInternalSelection=defineComponent({name:"InternalSelection",props:Object.assign(Object.assign({},useTheme.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(e){const{mergedClsPrefixRef:n,mergedRtlRef:r}=useConfig(e),o=useRtl("InternalSelection",r,n),u=ref(null),s=ref(null),w=ref(null),g=ref(null),v=ref(null),y=ref(null),m=ref(null),d=ref(null),f=ref(null),x=ref(null),k=ref(!1),P=ref(!1),S=ref(!1),E=useTheme("InternalSelection","-internal-selection",style$g,internalSelectionLight$1,e,toRef(e,"clsPrefix")),M=computed(()=>e.clearable&&!e.disabled&&(S.value||e.active)),T=computed(()=>e.selectedOption?e.renderTag?e.renderTag({option:e.selectedOption,handleClose:()=>{}}):e.renderLabel?e.renderLabel(e.selectedOption,!0):render(e.selectedOption[e.labelField],e.selectedOption,!0):e.placeholder),D=computed(()=>{const Je=e.selectedOption;if(!!Je)return Je[e.labelField]}),I=computed(()=>e.multiple?!!(Array.isArray(e.selectedOptions)&&e.selectedOptions.length):e.selectedOption!==null);function N(){var Je;const{value:et}=u;if(et){const{value:nt}=s;nt&&(nt.style.width=`${et.offsetWidth}px`,e.maxTagCount!=="responsive"&&((Je=f.value)===null||Je===void 0||Je.sync({showAllItemsBeforeCalculate:!1})))}}function O(){const{value:Je}=x;Je&&(Je.style.display="none")}function F(){const{value:Je}=x;Je&&(Je.style.display="inline-block")}watch(toRef(e,"active"),Je=>{Je||O()}),watch(toRef(e,"pattern"),()=>{e.multiple&&nextTick(N)});function U(Je){const{onFocus:et}=e;et&&et(Je)}function Y(Je){const{onBlur:et}=e;et&&et(Je)}function Q(Je){const{onDeleteOption:et}=e;et&&et(Je)}function q(Je){const{onClear:et}=e;et&&et(Je)}function ne(Je){const{onPatternInput:et}=e;et&&et(Je)}function J(Je){var et;(!Je.relatedTarget||!(!((et=w.value)===null||et===void 0)&&et.contains(Je.relatedTarget)))&&U(Je)}function re(Je){var et;!((et=w.value)===null||et===void 0)&&et.contains(Je.relatedTarget)||Y(Je)}function X(Je){q(Je)}function j(){S.value=!0}function Z(){S.value=!1}function W(Je){!e.active||!e.filterable||Je.target!==s.value&&Je.preventDefault()}function te(Je){Q(Je)}const le=ref(!1);function oe(Je){if(Je.key==="Backspace"&&!le.value&&!e.pattern.length){const{selectedOptions:et}=e;et!=null&&et.length&&te(et[et.length-1])}}let Ee=null;function Ae(Je){const{value:et}=u;if(et){const nt=Je.target.value;et.textContent=nt,N()}e.ignoreComposition&&le.value?Ee=Je:ne(Je)}function ve(){le.value=!0}function ke(){le.value=!1,e.ignoreComposition&&ne(Ee),Ee=null}function Ce(Je){var et;P.value=!0,(et=e.onPatternFocus)===null||et===void 0||et.call(e,Je)}function Pe(Je){var et;P.value=!1,(et=e.onPatternBlur)===null||et===void 0||et.call(e,Je)}function Me(){var Je,et;if(e.filterable)P.value=!1,(Je=y.value)===null||Je===void 0||Je.blur(),(et=s.value)===null||et===void 0||et.blur();else if(e.multiple){const{value:nt}=g;nt==null||nt.blur()}else{const{value:nt}=v;nt==null||nt.blur()}}function Le(){var Je,et,nt;e.filterable?(P.value=!1,(Je=y.value)===null||Je===void 0||Je.focus()):e.multiple?(et=g.value)===null||et===void 0||et.focus():(nt=v.value)===null||nt===void 0||nt.focus()}function Te(){const{value:Je}=s;Je&&(F(),Je.focus())}function ye(){const{value:Je}=s;Je&&Je.blur()}function _e(Je){const{value:et}=m;et&&et.setTextContent(`+${Je}`)}function we(){const{value:Je}=d;return Je}function Se(){return s.value}let $e=null;function Be(){$e!==null&&window.clearTimeout($e)}function Oe(){e.active||(Be(),$e=window.setTimeout(()=>{I.value&&(k.value=!0)},100))}function Ge(){Be()}function Ie(Je){Je||(Be(),k.value=!1)}watch(I,Je=>{Je||(k.value=!1)}),onMounted(()=>{watchEffect(()=>{const Je=y.value;!Je||(e.disabled?Je.removeAttribute("tabindex"):Je.tabIndex=P.value?-1:0)})}),useOnResize(w,e.onResize);const{inlineThemeDisabled:je}=e,qe=computed(()=>{const{size:Je}=e,{common:{cubicBezierEaseInOut:et},self:{fontWeight:nt,borderRadius:st,color:gt,placeholderColor:_t,textColor:wt,paddingSingle:He,paddingMultiple:Ve,caretColor:ze,colorDisabled:Ne,textColorDisabled:We,placeholderColorDisabled:Fe,colorActive:Ye,boxShadowFocus:Ke,boxShadowActive:Ze,boxShadowHover:ot,border:Qe,borderFocus:at,borderHover:rt,borderActive:ct,arrowColor:ht,arrowColorDisabled:yt,loadingColor:bt,colorActiveWarning:$t,boxShadowFocusWarning:At,boxShadowActiveWarning:Ft,boxShadowHoverWarning:Ht,borderWarning:Ot,borderFocusWarning:Mt,borderHoverWarning:pt,borderActiveWarning:xt,colorActiveError:Tt,boxShadowFocusError:Ct,boxShadowActiveError:Nt,boxShadowHoverError:jt,borderError:nn,borderFocusError:Wt,borderHoverError:cn,borderActiveError:Ln,clearColor:Pn,clearColorHover:Bn,clearColorPressed:zn,clearSize:Yn,arrowSize:Ii,[createKey("height",Je)]:ui,[createKey("fontSize",Je)]:$i}}=E.value,yi=getMargin(He),Mi=getMargin(Ve);return{"--n-bezier":et,"--n-border":Qe,"--n-border-active":ct,"--n-border-focus":at,"--n-border-hover":rt,"--n-border-radius":st,"--n-box-shadow-active":Ze,"--n-box-shadow-focus":Ke,"--n-box-shadow-hover":ot,"--n-caret-color":ze,"--n-color":gt,"--n-color-active":Ye,"--n-color-disabled":Ne,"--n-font-size":$i,"--n-height":ui,"--n-padding-single-top":yi.top,"--n-padding-multiple-top":Mi.top,"--n-padding-single-right":yi.right,"--n-padding-multiple-right":Mi.right,"--n-padding-single-left":yi.left,"--n-padding-multiple-left":Mi.left,"--n-padding-single-bottom":yi.bottom,"--n-padding-multiple-bottom":Mi.bottom,"--n-placeholder-color":_t,"--n-placeholder-color-disabled":Fe,"--n-text-color":wt,"--n-text-color-disabled":We,"--n-arrow-color":ht,"--n-arrow-color-disabled":yt,"--n-loading-color":bt,"--n-color-active-warning":$t,"--n-box-shadow-focus-warning":At,"--n-box-shadow-active-warning":Ft,"--n-box-shadow-hover-warning":Ht,"--n-border-warning":Ot,"--n-border-focus-warning":Mt,"--n-border-hover-warning":pt,"--n-border-active-warning":xt,"--n-color-active-error":Tt,"--n-box-shadow-focus-error":Ct,"--n-box-shadow-active-error":Nt,"--n-box-shadow-hover-error":jt,"--n-border-error":nn,"--n-border-focus-error":Wt,"--n-border-hover-error":cn,"--n-border-active-error":Ln,"--n-clear-size":Yn,"--n-clear-color":Pn,"--n-clear-color-hover":Bn,"--n-clear-color-pressed":zn,"--n-arrow-size":Ii,"--n-font-weight":nt}}),Ue=je?useThemeClass("internal-selection",computed(()=>e.size[0]),qe,e):void 0;return{mergedTheme:E,mergedClearable:M,mergedClsPrefix:n,rtlEnabled:o,patternInputFocused:P,filterablePlaceholder:T,label:D,selected:I,showTagsPanel:k,isComposing:le,counterRef:m,counterWrapperRef:d,patternInputMirrorRef:u,patternInputRef:s,selfRef:w,multipleElRef:g,singleElRef:v,patternInputWrapperRef:y,overflowRef:f,inputTagElRef:x,handleMouseDown:W,handleFocusin:J,handleClear:X,handleMouseEnter:j,handleMouseLeave:Z,handleDeleteOption:te,handlePatternKeyDown:oe,handlePatternInputInput:Ae,handlePatternInputBlur:Pe,handlePatternInputFocus:Ce,handleMouseEnterCounter:Oe,handleMouseLeaveCounter:Ge,handleFocusout:re,handleCompositionEnd:ke,handleCompositionStart:ve,onPopoverUpdateShow:Ie,focus:Le,focusInput:Te,blur:Me,blurInput:ye,updateCounter:_e,getCounter:we,getTail:Se,renderLabel:e.renderLabel,cssVars:je?void 0:qe,themeClass:Ue==null?void 0:Ue.themeClass,onRender:Ue==null?void 0:Ue.onRender}},render(){const{status:e,multiple:n,size:r,disabled:o,filterable:u,maxTagCount:s,bordered:w,clsPrefix:g,ellipsisTagPopoverProps:v,onRender:y,renderTag:m,renderLabel:d}=this;y==null||y();const f=s==="responsive",x=typeof s=="number",k=f||x,P=h$1(Wrapper,null,{default:()=>h$1(NBaseSuffix,{clsPrefix:g,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var E,M;return(M=(E=this.$slots).arrow)===null||M===void 0?void 0:M.call(E)}})});let S;if(n){const{labelField:E}=this,M=ne=>h$1("div",{class:`${g}-base-selection-tag-wrapper`,key:ne.value},m?m({option:ne,handleClose:()=>{this.handleDeleteOption(ne)}}):h$1(NTag,{size:r,closable:!ne.disabled,disabled:o,onClose:()=>{this.handleDeleteOption(ne)},internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>d?d(ne,!0):render(ne[E],ne,!0)})),T=()=>(x?this.selectedOptions.slice(0,s):this.selectedOptions).map(M),D=u?h$1("div",{class:`${g}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},h$1("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:o,value:this.pattern,autofocus:this.autofocus,class:`${g}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),h$1("span",{ref:"patternInputMirrorRef",class:`${g}-base-selection-input-tag__mirror`},this.pattern)):null,I=f?()=>h$1("div",{class:`${g}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},h$1(NTag,{size:r,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:o})):void 0;let N;if(x){const ne=this.selectedOptions.length-s;ne>0&&(N=h$1("div",{class:`${g}-base-selection-tag-wrapper`,key:"__counter__"},h$1(NTag,{size:r,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:o},{default:()=>`+${ne}`})))}const O=f?u?h$1(VOverflow,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:T,counter:I,tail:()=>D}):h$1(VOverflow,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:T,counter:I}):x&&N?T().concat(N):T(),F=k?()=>h$1("div",{class:`${g}-base-selection-popover`},f?T():this.selectedOptions.map(M)):void 0,U=k?Object.assign({show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover},v):null,Q=(this.selected?!1:this.active?!this.pattern&&!this.isComposing:!0)?h$1("div",{class:`${g}-base-selection-placeholder ${g}-base-selection-overlay`},h$1("div",{class:`${g}-base-selection-placeholder__inner`},this.placeholder)):null,q=u?h$1("div",{ref:"patternInputWrapperRef",class:`${g}-base-selection-tags`},O,f?null:D,P):h$1("div",{ref:"multipleElRef",class:`${g}-base-selection-tags`,tabindex:o?void 0:0},O,P);S=h$1(Fragment,null,k?h$1(NPopover,Object.assign({},U,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>q,default:F}):q,Q)}else if(u){const E=this.pattern||this.isComposing,M=this.active?!E:!this.selected,T=this.active?!1:this.selected;S=h$1("div",{ref:"patternInputWrapperRef",class:`${g}-base-selection-label`,title:this.patternInputFocused?void 0:getTitleAttribute(this.label)},h$1("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${g}-base-selection-input`,value:this.active?this.pattern:"",placeholder:"",readonly:o,disabled:o,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),T?h$1("div",{class:`${g}-base-selection-label__render-label ${g}-base-selection-overlay`,key:"input"},h$1("div",{class:`${g}-base-selection-overlay__wrapper`},m?m({option:this.selectedOption,handleClose:()=>{}}):d?d(this.selectedOption,!0):render(this.label,this.selectedOption,!0))):null,M?h$1("div",{class:`${g}-base-selection-placeholder ${g}-base-selection-overlay`,key:"placeholder"},h$1("div",{class:`${g}-base-selection-overlay__wrapper`},this.filterablePlaceholder)):null,P)}else S=h$1("div",{ref:"singleElRef",class:`${g}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?h$1("div",{class:`${g}-base-selection-input`,title:getTitleAttribute(this.label),key:"input"},h$1("div",{class:`${g}-base-selection-input__content`},m?m({option:this.selectedOption,handleClose:()=>{}}):d?d(this.selectedOption,!0):render(this.label,this.selectedOption,!0))):h$1("div",{class:`${g}-base-selection-placeholder ${g}-base-selection-overlay`,key:"placeholder"},h$1("div",{class:`${g}-base-selection-placeholder__inner`},this.placeholder)),P);return h$1("div",{ref:"selfRef",class:[`${g}-base-selection`,this.rtlEnabled&&`${g}-base-selection--rtl`,this.themeClass,e&&`${g}-base-selection--${e}-status`,{[`${g}-base-selection--active`]:this.active,[`${g}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${g}-base-selection--disabled`]:this.disabled,[`${g}-base-selection--multiple`]:this.multiple,[`${g}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},S,w?h$1("div",{class:`${g}-base-selection__border`}):null,w?h$1("div",{class:`${g}-base-selection__state-border`}):null)}}),{cubicBezierEaseInOut:cubicBezierEaseInOut$1}=commonVariables$8;function fadeInWidthExpandTransition({duration:e=".2s",delay:n=".1s"}={}){return[c$1("&.fade-in-width-expand-transition-leave-from, &.fade-in-width-expand-transition-enter-to",{opacity:1}),c$1("&.fade-in-width-expand-transition-leave-to, &.fade-in-width-expand-transition-enter-from",`
 opacity: 0!important;
 margin-left: 0!important;
 margin-right: 0!important;
 `),c$1("&.fade-in-width-expand-transition-leave-active",`
 overflow: hidden;
 transition:
 opacity ${e} ${cubicBezierEaseInOut$1},
 max-width ${e} ${cubicBezierEaseInOut$1} ${n},
 margin-left ${e} ${cubicBezierEaseInOut$1} ${n},
 margin-right ${e} ${cubicBezierEaseInOut$1} ${n};
 `),c$1("&.fade-in-width-expand-transition-enter-active",`
 overflow: hidden;
 transition:
 opacity ${e} ${cubicBezierEaseInOut$1} ${n},
 max-width ${e} ${cubicBezierEaseInOut$1},
 margin-left ${e} ${cubicBezierEaseInOut$1},
 margin-right ${e} ${cubicBezierEaseInOut$1};
 `)]}const style$f=cB("base-wave",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
`),NBaseWave=defineComponent({name:"BaseWave",props:{clsPrefix:{type:String,required:!0}},setup(e){useStyle("-base-wave",style$f,toRef(e,"clsPrefix"));const n=ref(null),r=ref(!1);let o=null;return onBeforeUnmount(()=>{o!==null&&window.clearTimeout(o)}),{active:r,selfRef:n,play(){o!==null&&(window.clearTimeout(o),r.value=!1,o=null),nextTick(()=>{var u;(u=n.value)===null||u===void 0||u.offsetHeight,r.value=!0,o=window.setTimeout(()=>{r.value=!1,o=null},1e3)})}}},render(){const{clsPrefix:e}=this;return h$1("div",{ref:"selfRef","aria-hidden":!0,class:[`${e}-base-wave`,this.active&&`${e}-base-wave--active`]})}}),{cubicBezierEaseInOut,cubicBezierEaseOut,cubicBezierEaseIn}=commonVariables$8;function fadeInHeightExpandTransition({overflow:e="hidden",duration:n=".3s",originalTransition:r="",leavingDelay:o="0s",foldPadding:u=!1,enterToProps:s=void 0,leaveToProps:w=void 0,reverse:g=!1}={}){const v=g?"leave":"enter",y=g?"enter":"leave";return[c$1(`&.fade-in-height-expand-transition-${y}-from,
 &.fade-in-height-expand-transition-${v}-to`,Object.assign(Object.assign({},s),{opacity:1})),c$1(`&.fade-in-height-expand-transition-${y}-to,
 &.fade-in-height-expand-transition-${v}-from`,Object.assign(Object.assign({},w),{opacity:0,marginTop:"0 !important",marginBottom:"0 !important",paddingTop:u?"0 !important":void 0,paddingBottom:u?"0 !important":void 0})),c$1(`&.fade-in-height-expand-transition-${y}-active`,`
 overflow: ${e};
 transition:
 max-height ${n} ${cubicBezierEaseInOut} ${o},
 opacity ${n} ${cubicBezierEaseOut} ${o},
 margin-top ${n} ${cubicBezierEaseInOut} ${o},
 margin-bottom ${n} ${cubicBezierEaseInOut} ${o},
 padding-top ${n} ${cubicBezierEaseInOut} ${o},
 padding-bottom ${n} ${cubicBezierEaseInOut} ${o}
 ${r?`,${r}`:""}
 `),c$1(`&.fade-in-height-expand-transition-${v}-active`,`
 overflow: ${e};
 transition:
 max-height ${n} ${cubicBezierEaseInOut},
 opacity ${n} ${cubicBezierEaseIn},
 margin-top ${n} ${cubicBezierEaseInOut},
 margin-bottom ${n} ${cubicBezierEaseInOut},
 padding-top ${n} ${cubicBezierEaseInOut},
 padding-bottom ${n} ${cubicBezierEaseInOut}
 ${r?`,${r}`:""}
 `)]}const isChrome=isBrowser$1&&"chrome"in window;isBrowser$1&&navigator.userAgent.includes("Firefox");const isSafari=isBrowser$1&&navigator.userAgent.includes("Safari")&&!isChrome,commonVariables$3={paddingTiny:"0 8px",paddingSmall:"0 10px",paddingMedium:"0 12px",paddingLarge:"0 14px",clearSize:"16px"};function self$f(e){const{textColor2:n,textColor3:r,textColorDisabled:o,primaryColor:u,primaryColorHover:s,inputColor:w,inputColorDisabled:g,borderColor:v,warningColor:y,warningColorHover:m,errorColor:d,errorColorHover:f,borderRadius:x,lineHeight:k,fontSizeTiny:P,fontSizeSmall:S,fontSizeMedium:E,fontSizeLarge:M,heightTiny:T,heightSmall:D,heightMedium:I,heightLarge:N,actionColor:O,clearColor:F,clearColorHover:U,clearColorPressed:Y,placeholderColor:Q,placeholderColorDisabled:q,iconColor:ne,iconColorDisabled:J,iconColorHover:re,iconColorPressed:X,fontWeight:j}=e;return Object.assign(Object.assign({},commonVariables$3),{fontWeight:j,countTextColorDisabled:o,countTextColor:r,heightTiny:T,heightSmall:D,heightMedium:I,heightLarge:N,fontSizeTiny:P,fontSizeSmall:S,fontSizeMedium:E,fontSizeLarge:M,lineHeight:k,lineHeightTextarea:k,borderRadius:x,iconSize:"16px",groupLabelColor:O,groupLabelTextColor:n,textColor:n,textColorDisabled:o,textDecorationColor:n,caretColor:u,placeholderColor:Q,placeholderColorDisabled:q,color:w,colorDisabled:g,colorFocus:w,groupLabelBorder:`1px solid ${v}`,border:`1px solid ${v}`,borderHover:`1px solid ${s}`,borderDisabled:`1px solid ${v}`,borderFocus:`1px solid ${s}`,boxShadowFocus:`0 0 0 2px ${changeColor(u,{alpha:.2})}`,loadingColor:u,loadingColorWarning:y,borderWarning:`1px solid ${y}`,borderHoverWarning:`1px solid ${m}`,colorFocusWarning:w,borderFocusWarning:`1px solid ${m}`,boxShadowFocusWarning:`0 0 0 2px ${changeColor(y,{alpha:.2})}`,caretColorWarning:y,loadingColorError:d,borderError:`1px solid ${d}`,borderHoverError:`1px solid ${f}`,colorFocusError:w,borderFocusError:`1px solid ${f}`,boxShadowFocusError:`0 0 0 2px ${changeColor(d,{alpha:.2})}`,caretColorError:d,clearColor:F,clearColorHover:U,clearColorPressed:Y,iconColor:ne,iconColorDisabled:J,iconColorHover:re,iconColorPressed:X,suffixTextColor:n})}const inputLight={name:"Input",common:commonLight,self:self$f},inputLight$1=inputLight,inputInjectionKey="n-input",style$e=cB("input",`
 max-width: 100%;
 cursor: text;
 line-height: 1.5;
 z-index: auto;
 outline: none;
 box-sizing: border-box;
 position: relative;
 display: inline-flex;
 border-radius: var(--n-border-radius);
 background-color: var(--n-color);
 transition: background-color .3s var(--n-bezier);
 font-size: var(--n-font-size);
 font-weight: var(--n-font-weight);
 --n-padding-vertical: calc((var(--n-height) - 1.5 * var(--n-font-size)) / 2);
`,[cE("input, textarea",`
 overflow: hidden;
 flex-grow: 1;
 position: relative;
 `),cE("input-el, textarea-el, input-mirror, textarea-mirror, separator, placeholder",`
 box-sizing: border-box;
 font-size: inherit;
 line-height: 1.5;
 font-family: inherit;
 border: none;
 outline: none;
 background-color: #0000;
 text-align: inherit;
 transition:
 -webkit-text-fill-color .3s var(--n-bezier),
 caret-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier);
 `),cE("input-el, textarea-el",`
 -webkit-appearance: none;
 scrollbar-width: none;
 width: 100%;
 min-width: 0;
 text-decoration-color: var(--n-text-decoration-color);
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 background-color: transparent;
 `,[c$1("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),c$1("&::placeholder",`
 color: #0000;
 -webkit-text-fill-color: transparent !important;
 `),c$1("&:-webkit-autofill ~",[cE("placeholder","display: none;")])]),cM("round",[cNotM("textarea","border-radius: calc(var(--n-height) / 2);")]),cE("placeholder",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: hidden;
 color: var(--n-placeholder-color);
 `,[c$1("span",`
 width: 100%;
 display: inline-block;
 `)]),cM("textarea",[cE("placeholder","overflow: visible;")]),cNotM("autosize","width: 100%;"),cM("autosize",[cE("textarea-el, input-el",`
 position: absolute;
 top: 0;
 left: 0;
 height: 100%;
 `)]),cB("input-wrapper",`
 overflow: hidden;
 display: inline-flex;
 flex-grow: 1;
 position: relative;
 padding-left: var(--n-padding-left);
 padding-right: var(--n-padding-right);
 `),cE("input-mirror",`
 padding: 0;
 height: var(--n-height);
 line-height: var(--n-height);
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre;
 pointer-events: none;
 `),cE("input-el",`
 padding: 0;
 height: var(--n-height);
 line-height: var(--n-height);
 `,[c$1("&[type=password]::-ms-reveal","display: none;"),c$1("+",[cE("placeholder",`
 display: flex;
 align-items: center; 
 `)])]),cNotM("textarea",[cE("placeholder","white-space: nowrap;")]),cE("eye",`
 display: flex;
 align-items: center;
 justify-content: center;
 transition: color .3s var(--n-bezier);
 `),cM("textarea","width: 100%;",[cB("input-word-count",`
 position: absolute;
 right: var(--n-padding-right);
 bottom: var(--n-padding-vertical);
 `),cM("resizable",[cB("input-wrapper",`
 resize: vertical;
 min-height: var(--n-height);
 `)]),cE("textarea-el, textarea-mirror, placeholder",`
 height: 100%;
 padding-left: 0;
 padding-right: 0;
 padding-top: var(--n-padding-vertical);
 padding-bottom: var(--n-padding-vertical);
 word-break: break-word;
 display: inline-block;
 vertical-align: bottom;
 box-sizing: border-box;
 line-height: var(--n-line-height-textarea);
 margin: 0;
 resize: none;
 white-space: pre-wrap;
 scroll-padding-block-end: var(--n-padding-vertical);
 `),cE("textarea-mirror",`
 width: 100%;
 pointer-events: none;
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre-wrap;
 overflow-wrap: break-word;
 `)]),cM("pair",[cE("input-el, placeholder","text-align: center;"),cE("separator",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 white-space: nowrap;
 `,[cB("icon",`
 color: var(--n-icon-color);
 `),cB("base-icon",`
 color: var(--n-icon-color);
 `)])]),cM("disabled",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `,[cE("border","border: var(--n-border-disabled);"),cE("input-el, textarea-el",`
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 text-decoration-color: var(--n-text-color-disabled);
 `),cE("placeholder","color: var(--n-placeholder-color-disabled);"),cE("separator","color: var(--n-text-color-disabled);",[cB("icon",`
 color: var(--n-icon-color-disabled);
 `),cB("base-icon",`
 color: var(--n-icon-color-disabled);
 `)]),cB("input-word-count",`
 color: var(--n-count-text-color-disabled);
 `),cE("suffix, prefix","color: var(--n-text-color-disabled);",[cB("icon",`
 color: var(--n-icon-color-disabled);
 `),cB("internal-icon",`
 color: var(--n-icon-color-disabled);
 `)])]),cNotM("disabled",[cE("eye",`
 color: var(--n-icon-color);
 cursor: pointer;
 `,[c$1("&:hover",`
 color: var(--n-icon-color-hover);
 `),c$1("&:active",`
 color: var(--n-icon-color-pressed);
 `)]),c$1("&:hover",[cE("state-border","border: var(--n-border-hover);")]),cM("focus","background-color: var(--n-color-focus);",[cE("state-border",`
 border: var(--n-border-focus);
 box-shadow: var(--n-box-shadow-focus);
 `)])]),cE("border, state-border",`
 box-sizing: border-box;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border-radius: inherit;
 border: var(--n-border);
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),cE("state-border",`
 border-color: #0000;
 z-index: 1;
 `),cE("prefix","margin-right: 4px;"),cE("suffix",`
 margin-left: 4px;
 `),cE("suffix, prefix",`
 transition: color .3s var(--n-bezier);
 flex-wrap: nowrap;
 flex-shrink: 0;
 line-height: var(--n-height);
 white-space: nowrap;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 color: var(--n-suffix-text-color);
 `,[cB("base-loading",`
 font-size: var(--n-icon-size);
 margin: 0 2px;
 color: var(--n-loading-color);
 `),cB("base-clear",`
 font-size: var(--n-icon-size);
 `,[cE("placeholder",[cB("base-icon",`
 transition: color .3s var(--n-bezier);
 color: var(--n-icon-color);
 font-size: var(--n-icon-size);
 `)])]),c$1(">",[cB("icon",`
 transition: color .3s var(--n-bezier);
 color: var(--n-icon-color);
 font-size: var(--n-icon-size);
 `)]),cB("base-icon",`
 font-size: var(--n-icon-size);
 `)]),cB("input-word-count",`
 pointer-events: none;
 line-height: 1.5;
 font-size: .85em;
 color: var(--n-count-text-color);
 transition: color .3s var(--n-bezier);
 margin-left: 4px;
 font-variant: tabular-nums;
 `),["warning","error"].map(e=>cM(`${e}-status`,[cNotM("disabled",[cB("base-loading",`
 color: var(--n-loading-color-${e})
 `),cE("input-el, textarea-el",`
 caret-color: var(--n-caret-color-${e});
 `),cE("state-border",`
 border: var(--n-border-${e});
 `),c$1("&:hover",[cE("state-border",`
 border: var(--n-border-hover-${e});
 `)]),c$1("&:focus",`
 background-color: var(--n-color-focus-${e});
 `,[cE("state-border",`
 box-shadow: var(--n-box-shadow-focus-${e});
 border: var(--n-border-focus-${e});
 `)]),cM("focus",`
 background-color: var(--n-color-focus-${e});
 `,[cE("state-border",`
 box-shadow: var(--n-box-shadow-focus-${e});
 border: var(--n-border-focus-${e});
 `)])])]))]),safariStyle=cB("input",[cM("disabled",[cE("input-el, textarea-el",`
 -webkit-text-fill-color: var(--n-text-color-disabled);
 `)])]);function len(e){let n=0;for(const r of e)n++;return n}function isEmptyInputValue(e){return e===""||e==null}function useCursor(e){const n=ref(null);function r(){const{value:s}=e;if(!(s!=null&&s.focus)){u();return}const{selectionStart:w,selectionEnd:g,value:v}=s;if(w==null||g==null){u();return}n.value={start:w,end:g,beforeText:v.slice(0,w),afterText:v.slice(g)}}function o(){var s;const{value:w}=n,{value:g}=e;if(!w||!g)return;const{value:v}=g,{start:y,beforeText:m,afterText:d}=w;let f=v.length;if(v.endsWith(d))f=v.length-d.length;else if(v.startsWith(m))f=m.length;else{const x=m[y-1],k=v.indexOf(x,y-1);k!==-1&&(f=k+1)}(s=g.setSelectionRange)===null||s===void 0||s.call(g,f,f)}function u(){n.value=null}return watch(e,u),{recordCursor:r,restoreCursor:o}}const WordCount=defineComponent({name:"InputWordCount",setup(e,{slots:n}){const{mergedValueRef:r,maxlengthRef:o,mergedClsPrefixRef:u,countGraphemesRef:s}=inject(inputInjectionKey),w=computed(()=>{const{value:g}=r;return g===null||Array.isArray(g)?0:(s.value||len)(g)});return()=>{const{value:g}=o,{value:v}=r;return h$1("span",{class:`${u.value}-input-word-count`},resolveSlotWithTypedProps(n.default,{value:v===null||Array.isArray(v)?"":v},()=>[g===void 0?w.value:`${w.value} / ${g}`]))}}}),inputProps=Object.assign(Object.assign({},useTheme.props),{bordered:{type:Boolean,default:void 0},type:{type:String,default:"text"},placeholder:[Array,String],defaultValue:{type:[String,Array],default:null},value:[String,Array],disabled:{type:Boolean,default:void 0},size:String,rows:{type:[Number,String],default:3},round:Boolean,minlength:[String,Number],maxlength:[String,Number],clearable:Boolean,autosize:{type:[Boolean,Object],default:!1},pair:Boolean,separator:String,readonly:{type:[String,Boolean],default:!1},passivelyActivated:Boolean,showPasswordOn:String,stateful:{type:Boolean,default:!0},autofocus:Boolean,inputProps:Object,resizable:{type:Boolean,default:!0},showCount:Boolean,loading:{type:Boolean,default:void 0},allowInput:Function,renderCount:Function,onMousedown:Function,onKeydown:Function,onKeyup:[Function,Array],onInput:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClick:[Function,Array],onChange:[Function,Array],onClear:[Function,Array],countGraphemes:Function,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],textDecoration:[String,Array],attrSize:{type:Number,default:20},onInputBlur:[Function,Array],onInputFocus:[Function,Array],onDeactivate:[Function,Array],onActivate:[Function,Array],onWrapperFocus:[Function,Array],onWrapperBlur:[Function,Array],internalDeactivateOnEnter:Boolean,internalForceFocus:Boolean,internalLoadingBeforeSuffix:{type:Boolean,default:!0},showPasswordToggle:Boolean}),NInput=defineComponent({name:"Input",props:inputProps,slots:Object,setup(e){const{mergedClsPrefixRef:n,mergedBorderedRef:r,inlineThemeDisabled:o,mergedRtlRef:u}=useConfig(e),s=useTheme("Input","-input",style$e,inputLight$1,e,n);isSafari&&useStyle("-input-safari",safariStyle,n);const w=ref(null),g=ref(null),v=ref(null),y=ref(null),m=ref(null),d=ref(null),f=ref(null),x=useCursor(f),k=ref(null),{localeRef:P}=useLocale("Input"),S=ref(e.defaultValue),E=toRef(e,"value"),M=useMergedState(E,S),T=useFormItem(e),{mergedSizeRef:D,mergedDisabledRef:I,mergedStatusRef:N}=T,O=ref(!1),F=ref(!1),U=ref(!1),Y=ref(!1);let Q=null;const q=computed(()=>{const{placeholder:pt,pair:xt}=e;return xt?Array.isArray(pt)?pt:pt===void 0?["",""]:[pt,pt]:pt===void 0?[P.value.placeholder]:[pt]}),ne=computed(()=>{const{value:pt}=U,{value:xt}=M,{value:Tt}=q;return!pt&&(isEmptyInputValue(xt)||Array.isArray(xt)&&isEmptyInputValue(xt[0]))&&Tt[0]}),J=computed(()=>{const{value:pt}=U,{value:xt}=M,{value:Tt}=q;return!pt&&Tt[1]&&(isEmptyInputValue(xt)||Array.isArray(xt)&&isEmptyInputValue(xt[1]))}),re=useMemo(()=>e.internalForceFocus||O.value),X=useMemo(()=>{if(I.value||e.readonly||!e.clearable||!re.value&&!F.value)return!1;const{value:pt}=M,{value:xt}=re;return e.pair?!!(Array.isArray(pt)&&(pt[0]||pt[1]))&&(F.value||xt):!!pt&&(F.value||xt)}),j=computed(()=>{const{showPasswordOn:pt}=e;if(pt)return pt;if(e.showPasswordToggle)return"click"}),Z=ref(!1),W=computed(()=>{const{textDecoration:pt}=e;return pt?Array.isArray(pt)?pt.map(xt=>({textDecoration:xt})):[{textDecoration:pt}]:["",""]}),te=ref(void 0),le=()=>{var pt,xt;if(e.type==="textarea"){const{autosize:Tt}=e;if(Tt&&(te.value=(xt=(pt=k.value)===null||pt===void 0?void 0:pt.$el)===null||xt===void 0?void 0:xt.offsetWidth),!g.value||typeof Tt=="boolean")return;const{paddingTop:Ct,paddingBottom:Nt,lineHeight:jt}=window.getComputedStyle(g.value),nn=Number(Ct.slice(0,-2)),Wt=Number(Nt.slice(0,-2)),cn=Number(jt.slice(0,-2)),{value:Ln}=v;if(!Ln)return;if(Tt.minRows){const Pn=Math.max(Tt.minRows,1),Bn=`${nn+Wt+cn*Pn}px`;Ln.style.minHeight=Bn}if(Tt.maxRows){const Pn=`${nn+Wt+cn*Tt.maxRows}px`;Ln.style.maxHeight=Pn}}},oe=computed(()=>{const{maxlength:pt}=e;return pt===void 0?void 0:Number(pt)});onMounted(()=>{const{value:pt}=M;Array.isArray(pt)||ct(pt)});const Ee=getCurrentInstance().proxy;function Ae(pt,xt){const{onUpdateValue:Tt,"onUpdate:value":Ct,onInput:Nt}=e,{nTriggerFormInput:jt}=T;Tt&&call(Tt,pt,xt),Ct&&call(Ct,pt,xt),Nt&&call(Nt,pt,xt),S.value=pt,jt()}function ve(pt,xt){const{onChange:Tt}=e,{nTriggerFormChange:Ct}=T;Tt&&call(Tt,pt,xt),S.value=pt,Ct()}function ke(pt){const{onBlur:xt}=e,{nTriggerFormBlur:Tt}=T;xt&&call(xt,pt),Tt()}function Ce(pt){const{onFocus:xt}=e,{nTriggerFormFocus:Tt}=T;xt&&call(xt,pt),Tt()}function Pe(pt){const{onClear:xt}=e;xt&&call(xt,pt)}function Me(pt){const{onInputBlur:xt}=e;xt&&call(xt,pt)}function Le(pt){const{onInputFocus:xt}=e;xt&&call(xt,pt)}function Te(){const{onDeactivate:pt}=e;pt&&call(pt)}function ye(){const{onActivate:pt}=e;pt&&call(pt)}function _e(pt){const{onClick:xt}=e;xt&&call(xt,pt)}function we(pt){const{onWrapperFocus:xt}=e;xt&&call(xt,pt)}function Se(pt){const{onWrapperBlur:xt}=e;xt&&call(xt,pt)}function $e(){U.value=!0}function Be(pt){U.value=!1,pt.target===d.value?Oe(pt,1):Oe(pt,0)}function Oe(pt,xt=0,Tt="input"){const Ct=pt.target.value;if(ct(Ct),pt instanceof InputEvent&&!pt.isComposing&&(U.value=!1),e.type==="textarea"){const{value:jt}=k;jt&&jt.syncUnifiedContainer()}if(Q=Ct,U.value)return;x.recordCursor();const Nt=Ge(Ct);if(Nt)if(!e.pair)Tt==="input"?Ae(Ct,{source:xt}):ve(Ct,{source:xt});else{let{value:jt}=M;Array.isArray(jt)?jt=[jt[0],jt[1]]:jt=["",""],jt[xt]=Ct,Tt==="input"?Ae(jt,{source:xt}):ve(jt,{source:xt})}Ee.$forceUpdate(),Nt||nextTick(x.restoreCursor)}function Ge(pt){const{countGraphemes:xt,maxlength:Tt,minlength:Ct}=e;if(xt){let jt;if(Tt!==void 0&&(jt===void 0&&(jt=xt(pt)),jt>Number(Tt))||Ct!==void 0&&(jt===void 0&&(jt=xt(pt)),jt<Number(Tt)))return!1}const{allowInput:Nt}=e;return typeof Nt=="function"?Nt(pt):!0}function Ie(pt){Me(pt),pt.relatedTarget===w.value&&Te(),pt.relatedTarget!==null&&(pt.relatedTarget===m.value||pt.relatedTarget===d.value||pt.relatedTarget===g.value)||(Y.value=!1),Je(pt,"blur"),f.value=null}function je(pt,xt){Le(pt),O.value=!0,Y.value=!0,ye(),Je(pt,"focus"),xt===0?f.value=m.value:xt===1?f.value=d.value:xt===2&&(f.value=g.value)}function qe(pt){e.passivelyActivated&&(Se(pt),Je(pt,"blur"))}function Ue(pt){e.passivelyActivated&&(O.value=!0,we(pt),Je(pt,"focus"))}function Je(pt,xt){pt.relatedTarget!==null&&(pt.relatedTarget===m.value||pt.relatedTarget===d.value||pt.relatedTarget===g.value||pt.relatedTarget===w.value)||(xt==="focus"?(Ce(pt),O.value=!0):xt==="blur"&&(ke(pt),O.value=!1))}function et(pt,xt){Oe(pt,xt,"change")}function nt(pt){_e(pt)}function st(pt){Pe(pt),gt()}function gt(){e.pair?(Ae(["",""],{source:"clear"}),ve(["",""],{source:"clear"})):(Ae("",{source:"clear"}),ve("",{source:"clear"}))}function _t(pt){const{onMousedown:xt}=e;xt&&xt(pt);const{tagName:Tt}=pt.target;if(Tt!=="INPUT"&&Tt!=="TEXTAREA"){if(e.resizable){const{value:Ct}=w;if(Ct){const{left:Nt,top:jt,width:nn,height:Wt}=Ct.getBoundingClientRect(),cn=14;if(Nt+nn-cn<pt.clientX&&pt.clientX<Nt+nn&&jt+Wt-cn<pt.clientY&&pt.clientY<jt+Wt)return}}pt.preventDefault(),O.value||Ke()}}function wt(){var pt;F.value=!0,e.type==="textarea"&&((pt=k.value)===null||pt===void 0||pt.handleMouseEnterWrapper())}function He(){var pt;F.value=!1,e.type==="textarea"&&((pt=k.value)===null||pt===void 0||pt.handleMouseLeaveWrapper())}function Ve(){I.value||j.value==="click"&&(Z.value=!Z.value)}function ze(pt){if(I.value)return;pt.preventDefault();const xt=Ct=>{Ct.preventDefault(),off$1("mouseup",document,xt)};if(on$1("mouseup",document,xt),j.value!=="mousedown")return;Z.value=!0;const Tt=()=>{Z.value=!1,off$1("mouseup",document,Tt)};on$1("mouseup",document,Tt)}function Ne(pt){e.onKeyup&&call(e.onKeyup,pt)}function We(pt){switch(e.onKeydown&&call(e.onKeydown,pt),pt.key){case"Escape":Ye();break;case"Enter":Fe(pt);break}}function Fe(pt){var xt,Tt;if(e.passivelyActivated){const{value:Ct}=Y;if(Ct){e.internalDeactivateOnEnter&&Ye();return}pt.preventDefault(),e.type==="textarea"?(xt=g.value)===null||xt===void 0||xt.focus():(Tt=m.value)===null||Tt===void 0||Tt.focus()}}function Ye(){e.passivelyActivated&&(Y.value=!1,nextTick(()=>{var pt;(pt=w.value)===null||pt===void 0||pt.focus()}))}function Ke(){var pt,xt,Tt;I.value||(e.passivelyActivated?(pt=w.value)===null||pt===void 0||pt.focus():((xt=g.value)===null||xt===void 0||xt.focus(),(Tt=m.value)===null||Tt===void 0||Tt.focus()))}function Ze(){var pt;!((pt=w.value)===null||pt===void 0)&&pt.contains(document.activeElement)&&document.activeElement.blur()}function ot(){var pt,xt;(pt=g.value)===null||pt===void 0||pt.select(),(xt=m.value)===null||xt===void 0||xt.select()}function Qe(){I.value||(g.value?g.value.focus():m.value&&m.value.focus())}function at(){const{value:pt}=w;(pt==null?void 0:pt.contains(document.activeElement))&&pt!==document.activeElement&&Ye()}function rt(pt){if(e.type==="textarea"){const{value:xt}=g;xt==null||xt.scrollTo(pt)}else{const{value:xt}=m;xt==null||xt.scrollTo(pt)}}function ct(pt){const{type:xt,pair:Tt,autosize:Ct}=e;if(!Tt&&Ct)if(xt==="textarea"){const{value:Nt}=v;Nt&&(Nt.textContent=`${pt!=null?pt:""}\r
`)}else{const{value:Nt}=y;Nt&&(pt?Nt.textContent=pt:Nt.innerHTML="&nbsp;")}}function ht(){le()}const yt=ref({top:"0"});function bt(pt){var xt;const{scrollTop:Tt}=pt.target;yt.value.top=`${-Tt}px`,(xt=k.value)===null||xt===void 0||xt.syncUnifiedContainer()}let $t=null;watchEffect(()=>{const{autosize:pt,type:xt}=e;pt&&xt==="textarea"?$t=watch(M,Tt=>{!Array.isArray(Tt)&&Tt!==Q&&ct(Tt)}):$t==null||$t()});let At=null;watchEffect(()=>{e.type==="textarea"?At=watch(M,pt=>{var xt;!Array.isArray(pt)&&pt!==Q&&((xt=k.value)===null||xt===void 0||xt.syncUnifiedContainer())}):At==null||At()}),provide(inputInjectionKey,{mergedValueRef:M,maxlengthRef:oe,mergedClsPrefixRef:n,countGraphemesRef:toRef(e,"countGraphemes")});const Ft={wrapperElRef:w,inputElRef:m,textareaElRef:g,isCompositing:U,clear:gt,focus:Ke,blur:Ze,select:ot,deactivate:at,activate:Qe,scrollTo:rt},Ht=useRtl("Input",u,n),Ot=computed(()=>{const{value:pt}=D,{common:{cubicBezierEaseInOut:xt},self:{color:Tt,borderRadius:Ct,textColor:Nt,caretColor:jt,caretColorError:nn,caretColorWarning:Wt,textDecorationColor:cn,border:Ln,borderDisabled:Pn,borderHover:Bn,borderFocus:zn,placeholderColor:Yn,placeholderColorDisabled:Ii,lineHeightTextarea:ui,colorDisabled:$i,colorFocus:yi,textColorDisabled:Mi,boxShadowFocus:Dr,iconSize:Mo,colorFocusWarning:To,boxShadowFocusWarning:Bo,borderWarning:Lo,borderFocusWarning:kn,borderHoverWarning:wn,colorFocusError:Zr,boxShadowFocusError:ra,borderError:oa,borderFocusError:Do,borderHoverError:aa,clearSize:On,clearColor:Ni,clearColorHover:ji,clearColorPressed:dr,iconColor:Wi,iconColorDisabled:Xn,suffixTextColor:ni,countTextColor:Jr,countTextColorDisabled:Rr,iconColorHover:Qr,iconColorPressed:hr,loadingColor:pr,loadingColorError:Jn,loadingColorWarning:sa,fontWeight:oi,[createKey("padding",pt)]:eo,[createKey("fontSize",pt)]:er,[createKey("height",pt)]:Vi}}=s.value,{left:Ir,right:to}=getMargin(eo);return{"--n-bezier":xt,"--n-count-text-color":Jr,"--n-count-text-color-disabled":Rr,"--n-color":Tt,"--n-font-size":er,"--n-font-weight":oi,"--n-border-radius":Ct,"--n-height":Vi,"--n-padding-left":Ir,"--n-padding-right":to,"--n-text-color":Nt,"--n-caret-color":jt,"--n-text-decoration-color":cn,"--n-border":Ln,"--n-border-disabled":Pn,"--n-border-hover":Bn,"--n-border-focus":zn,"--n-placeholder-color":Yn,"--n-placeholder-color-disabled":Ii,"--n-icon-size":Mo,"--n-line-height-textarea":ui,"--n-color-disabled":$i,"--n-color-focus":yi,"--n-text-color-disabled":Mi,"--n-box-shadow-focus":Dr,"--n-loading-color":pr,"--n-caret-color-warning":Wt,"--n-color-focus-warning":To,"--n-box-shadow-focus-warning":Bo,"--n-border-warning":Lo,"--n-border-focus-warning":kn,"--n-border-hover-warning":wn,"--n-loading-color-warning":sa,"--n-caret-color-error":nn,"--n-color-focus-error":Zr,"--n-box-shadow-focus-error":ra,"--n-border-error":oa,"--n-border-focus-error":Do,"--n-border-hover-error":aa,"--n-loading-color-error":Jn,"--n-clear-color":Ni,"--n-clear-size":On,"--n-clear-color-hover":ji,"--n-clear-color-pressed":dr,"--n-icon-color":Wi,"--n-icon-color-hover":Qr,"--n-icon-color-pressed":hr,"--n-icon-color-disabled":Xn,"--n-suffix-text-color":ni}}),Mt=o?useThemeClass("input",computed(()=>{const{value:pt}=D;return pt[0]}),Ot,e):void 0;return Object.assign(Object.assign({},Ft),{wrapperElRef:w,inputElRef:m,inputMirrorElRef:y,inputEl2Ref:d,textareaElRef:g,textareaMirrorElRef:v,textareaScrollbarInstRef:k,rtlEnabled:Ht,uncontrolledValue:S,mergedValue:M,passwordVisible:Z,mergedPlaceholder:q,showPlaceholder1:ne,showPlaceholder2:J,mergedFocus:re,isComposing:U,activated:Y,showClearButton:X,mergedSize:D,mergedDisabled:I,textDecorationStyle:W,mergedClsPrefix:n,mergedBordered:r,mergedShowPasswordOn:j,placeholderStyle:yt,mergedStatus:N,textAreaScrollContainerWidth:te,handleTextAreaScroll:bt,handleCompositionStart:$e,handleCompositionEnd:Be,handleInput:Oe,handleInputBlur:Ie,handleInputFocus:je,handleWrapperBlur:qe,handleWrapperFocus:Ue,handleMouseEnter:wt,handleMouseLeave:He,handleMouseDown:_t,handleChange:et,handleClick:nt,handleClear:st,handlePasswordToggleClick:Ve,handlePasswordToggleMousedown:ze,handleWrapperKeydown:We,handleWrapperKeyup:Ne,handleTextAreaMirrorResize:ht,getTextareaScrollContainer:()=>g.value,mergedTheme:s,cssVars:o?void 0:Ot,themeClass:Mt==null?void 0:Mt.themeClass,onRender:Mt==null?void 0:Mt.onRender})},render(){var e,n;const{mergedClsPrefix:r,mergedStatus:o,themeClass:u,type:s,countGraphemes:w,onRender:g}=this,v=this.$slots;return g==null||g(),h$1("div",{ref:"wrapperElRef",class:[`${r}-input`,u,o&&`${r}-input--${o}-status`,{[`${r}-input--rtl`]:this.rtlEnabled,[`${r}-input--disabled`]:this.mergedDisabled,[`${r}-input--textarea`]:s==="textarea",[`${r}-input--resizable`]:this.resizable&&!this.autosize,[`${r}-input--autosize`]:this.autosize,[`${r}-input--round`]:this.round&&s!=="textarea",[`${r}-input--pair`]:this.pair,[`${r}-input--focus`]:this.mergedFocus,[`${r}-input--stateful`]:this.stateful}],style:this.cssVars,tabindex:!this.mergedDisabled&&this.passivelyActivated&&!this.activated?0:void 0,onFocus:this.handleWrapperFocus,onBlur:this.handleWrapperBlur,onClick:this.handleClick,onMousedown:this.handleMouseDown,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd,onKeyup:this.handleWrapperKeyup,onKeydown:this.handleWrapperKeydown},h$1("div",{class:`${r}-input-wrapper`},resolveWrappedSlot(v.prefix,y=>y&&h$1("div",{class:`${r}-input__prefix`},y)),s==="textarea"?h$1(NScrollbar,{ref:"textareaScrollbarInstRef",class:`${r}-input__textarea`,container:this.getTextareaScrollContainer,triggerDisplayManually:!0,useUnifiedContainer:!0,internalHoistYRail:!0},{default:()=>{var y,m;const{textAreaScrollContainerWidth:d}=this,f={width:this.autosize&&d&&`${d}px`};return h$1(Fragment,null,h$1("textarea",Object.assign({},this.inputProps,{ref:"textareaElRef",class:[`${r}-input__textarea-el`,(y=this.inputProps)===null||y===void 0?void 0:y.class],autofocus:this.autofocus,rows:Number(this.rows),placeholder:this.placeholder,value:this.mergedValue,disabled:this.mergedDisabled,maxlength:w?void 0:this.maxlength,minlength:w?void 0:this.minlength,readonly:this.readonly,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,style:[this.textDecorationStyle[0],(m=this.inputProps)===null||m===void 0?void 0:m.style,f],onBlur:this.handleInputBlur,onFocus:x=>{this.handleInputFocus(x,2)},onInput:this.handleInput,onChange:this.handleChange,onScroll:this.handleTextAreaScroll})),this.showPlaceholder1?h$1("div",{class:`${r}-input__placeholder`,style:[this.placeholderStyle,f],key:"placeholder"},this.mergedPlaceholder[0]):null,this.autosize?h$1(VResizeObserver,{onResize:this.handleTextAreaMirrorResize},{default:()=>h$1("div",{ref:"textareaMirrorElRef",class:`${r}-input__textarea-mirror`,key:"mirror"})}):null)}}):h$1("div",{class:`${r}-input__input`},h$1("input",Object.assign({type:s==="password"&&this.mergedShowPasswordOn&&this.passwordVisible?"text":s},this.inputProps,{ref:"inputElRef",class:[`${r}-input__input-el`,(e=this.inputProps)===null||e===void 0?void 0:e.class],style:[this.textDecorationStyle[0],(n=this.inputProps)===null||n===void 0?void 0:n.style],tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[0],disabled:this.mergedDisabled,maxlength:w?void 0:this.maxlength,minlength:w?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[0]:this.mergedValue,readonly:this.readonly,autofocus:this.autofocus,size:this.attrSize,onBlur:this.handleInputBlur,onFocus:y=>{this.handleInputFocus(y,0)},onInput:y=>{this.handleInput(y,0)},onChange:y=>{this.handleChange(y,0)}})),this.showPlaceholder1?h$1("div",{class:`${r}-input__placeholder`},h$1("span",null,this.mergedPlaceholder[0])):null,this.autosize?h$1("div",{class:`${r}-input__input-mirror`,key:"mirror",ref:"inputMirrorElRef"},"\xA0"):null),!this.pair&&resolveWrappedSlot(v.suffix,y=>y||this.clearable||this.showCount||this.mergedShowPasswordOn||this.loading!==void 0?h$1("div",{class:`${r}-input__suffix`},[resolveWrappedSlot(v["clear-icon-placeholder"],m=>(this.clearable||m)&&h$1(NBaseClear,{clsPrefix:r,show:this.showClearButton,onClear:this.handleClear},{placeholder:()=>m,icon:()=>{var d,f;return(f=(d=this.$slots)["clear-icon"])===null||f===void 0?void 0:f.call(d)}})),this.internalLoadingBeforeSuffix?null:y,this.loading!==void 0?h$1(NBaseSuffix,{clsPrefix:r,loading:this.loading,showArrow:!1,showClear:!1,style:this.cssVars}):null,this.internalLoadingBeforeSuffix?y:null,this.showCount&&this.type!=="textarea"?h$1(WordCount,null,{default:m=>{var d;const{renderCount:f}=this;return f?f(m):(d=v.count)===null||d===void 0?void 0:d.call(v,m)}}):null,this.mergedShowPasswordOn&&this.type==="password"?h$1("div",{class:`${r}-input__eye`,onMousedown:this.handlePasswordToggleMousedown,onClick:this.handlePasswordToggleClick},this.passwordVisible?resolveSlot(v["password-visible-icon"],()=>[h$1(NBaseIcon,{clsPrefix:r},{default:()=>h$1(EyeIcon,null)})]):resolveSlot(v["password-invisible-icon"],()=>[h$1(NBaseIcon,{clsPrefix:r},{default:()=>h$1(EyeOffIcon,null)})])):null]):null)),this.pair?h$1("span",{class:`${r}-input__separator`},resolveSlot(v.separator,()=>[this.separator])):null,this.pair?h$1("div",{class:`${r}-input-wrapper`},h$1("div",{class:`${r}-input__input`},h$1("input",{ref:"inputEl2Ref",type:this.type,class:`${r}-input__input-el`,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[1],disabled:this.mergedDisabled,maxlength:w?void 0:this.maxlength,minlength:w?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[1]:void 0,readonly:this.readonly,style:this.textDecorationStyle[1],onBlur:this.handleInputBlur,onFocus:y=>{this.handleInputFocus(y,1)},onInput:y=>{this.handleInput(y,1)},onChange:y=>{this.handleChange(y,1)}}),this.showPlaceholder2?h$1("div",{class:`${r}-input__placeholder`},h$1("span",null,this.mergedPlaceholder[1])):null),resolveWrappedSlot(v.suffix,y=>(this.clearable||y)&&h$1("div",{class:`${r}-input__suffix`},[this.clearable&&h$1(NBaseClear,{clsPrefix:r,show:this.showClearButton,onClear:this.handleClear},{icon:()=>{var m;return(m=v["clear-icon"])===null||m===void 0?void 0:m.call(v)},placeholder:()=>{var m;return(m=v["clear-icon-placeholder"])===null||m===void 0?void 0:m.call(v)}}),y]))):null,this.mergedBordered?h$1("div",{class:`${r}-input__border`}):null,this.mergedBordered?h$1("div",{class:`${r}-input__state-border`}):null,this.showCount&&s==="textarea"?h$1(WordCount,null,{default:y=>{var m;const{renderCount:d}=this;return d?d(y):(m=v.count)===null||m===void 0?void 0:m.call(v,y)}}):null)}}),style$d=cB("input-group",`
 display: inline-flex;
 width: 100%;
 flex-wrap: nowrap;
 vertical-align: bottom;
`,[c$1(">",[cB("input",[c$1("&:not(:last-child)",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),c$1("&:not(:first-child)",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 margin-left: -1px!important;
 `)]),cB("button",[c$1("&:not(:last-child)",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `,[cE("state-border, border",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `)]),c$1("&:not(:first-child)",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `,[cE("state-border, border",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `)])]),c$1("*",[c$1("&:not(:last-child)",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `,[c$1(">",[cB("input",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),cB("base-selection",[cB("base-selection-label",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),cB("base-selection-tags",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),cE("box-shadow, border, state-border",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `)])])]),c$1("&:not(:first-child)",`
 margin-left: -1px!important;
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `,[c$1(">",[cB("input",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `),cB("base-selection",[cB("base-selection-label",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `),cB("base-selection-tags",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `),cE("box-shadow, border, state-border",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `)])])])])])]),inputGroupProps={},NInputGroup=defineComponent({name:"InputGroup",props:inputGroupProps,setup(e){const{mergedClsPrefixRef:n}=useConfig(e);return useStyle("-input-group",style$d,n),{mergedClsPrefix:n}},render(){const{mergedClsPrefix:e}=this;return h$1("div",{class:`${e}-input-group`},this.$slots)}});function getIsGroup(e){return e.type==="group"}function getIgnored(e){return e.type==="ignored"}function patternMatched(e,n){try{return!!(1+n.toString().toLowerCase().indexOf(e.trim().toLowerCase()))}catch{return!1}}function createTmOptions(e,n){return{getIsGroup,getIgnored,getKey(o){return getIsGroup(o)?o.name||o.key||"key-required":o[e]},getChildren(o){return o[n]}}}function filterOptions(e,n,r,o){if(!n)return e;function u(s){if(!Array.isArray(s))return[];const w=[];for(const g of s)if(getIsGroup(g)){const v=u(g[o]);v.length&&w.push(Object.assign({},g,{[o]:v}))}else{if(getIgnored(g))continue;n(r,g)&&w.push(g)}return w}return u(e)}function createValOptMap(e,n,r){const o=new Map;return e.forEach(u=>{getIsGroup(u)?u[r].forEach(s=>{o.set(s[n],s)}):o.set(u[n],u)}),o}function createHoverColor(e){return composite(e,[255,255,255,.16])}function createPressedColor(e){return composite(e,[0,0,0,.12])}const buttonGroupInjectionKey="n-button-group",commonVariables$2={paddingTiny:"0 6px",paddingSmall:"0 10px",paddingMedium:"0 14px",paddingLarge:"0 18px",paddingRoundTiny:"0 10px",paddingRoundSmall:"0 14px",paddingRoundMedium:"0 18px",paddingRoundLarge:"0 22px",iconMarginTiny:"6px",iconMarginSmall:"6px",iconMarginMedium:"6px",iconMarginLarge:"6px",iconSizeTiny:"14px",iconSizeSmall:"18px",iconSizeMedium:"18px",iconSizeLarge:"20px",rippleDuration:".6s"};function self$e(e){const{heightTiny:n,heightSmall:r,heightMedium:o,heightLarge:u,borderRadius:s,fontSizeTiny:w,fontSizeSmall:g,fontSizeMedium:v,fontSizeLarge:y,opacityDisabled:m,textColor2:d,textColor3:f,primaryColorHover:x,primaryColorPressed:k,borderColor:P,primaryColor:S,baseColor:E,infoColor:M,infoColorHover:T,infoColorPressed:D,successColor:I,successColorHover:N,successColorPressed:O,warningColor:F,warningColorHover:U,warningColorPressed:Y,errorColor:Q,errorColorHover:q,errorColorPressed:ne,fontWeight:J,buttonColor2:re,buttonColor2Hover:X,buttonColor2Pressed:j,fontWeightStrong:Z}=e;return Object.assign(Object.assign({},commonVariables$2),{heightTiny:n,heightSmall:r,heightMedium:o,heightLarge:u,borderRadiusTiny:s,borderRadiusSmall:s,borderRadiusMedium:s,borderRadiusLarge:s,fontSizeTiny:w,fontSizeSmall:g,fontSizeMedium:v,fontSizeLarge:y,opacityDisabled:m,colorOpacitySecondary:"0.16",colorOpacitySecondaryHover:"0.22",colorOpacitySecondaryPressed:"0.28",colorSecondary:re,colorSecondaryHover:X,colorSecondaryPressed:j,colorTertiary:re,colorTertiaryHover:X,colorTertiaryPressed:j,colorQuaternary:"#0000",colorQuaternaryHover:X,colorQuaternaryPressed:j,color:"#0000",colorHover:"#0000",colorPressed:"#0000",colorFocus:"#0000",colorDisabled:"#0000",textColor:d,textColorTertiary:f,textColorHover:x,textColorPressed:k,textColorFocus:x,textColorDisabled:d,textColorText:d,textColorTextHover:x,textColorTextPressed:k,textColorTextFocus:x,textColorTextDisabled:d,textColorGhost:d,textColorGhostHover:x,textColorGhostPressed:k,textColorGhostFocus:x,textColorGhostDisabled:d,border:`1px solid ${P}`,borderHover:`1px solid ${x}`,borderPressed:`1px solid ${k}`,borderFocus:`1px solid ${x}`,borderDisabled:`1px solid ${P}`,rippleColor:S,colorPrimary:S,colorHoverPrimary:x,colorPressedPrimary:k,colorFocusPrimary:x,colorDisabledPrimary:S,textColorPrimary:E,textColorHoverPrimary:E,textColorPressedPrimary:E,textColorFocusPrimary:E,textColorDisabledPrimary:E,textColorTextPrimary:S,textColorTextHoverPrimary:x,textColorTextPressedPrimary:k,textColorTextFocusPrimary:x,textColorTextDisabledPrimary:d,textColorGhostPrimary:S,textColorGhostHoverPrimary:x,textColorGhostPressedPrimary:k,textColorGhostFocusPrimary:x,textColorGhostDisabledPrimary:S,borderPrimary:`1px solid ${S}`,borderHoverPrimary:`1px solid ${x}`,borderPressedPrimary:`1px solid ${k}`,borderFocusPrimary:`1px solid ${x}`,borderDisabledPrimary:`1px solid ${S}`,rippleColorPrimary:S,colorInfo:M,colorHoverInfo:T,colorPressedInfo:D,colorFocusInfo:T,colorDisabledInfo:M,textColorInfo:E,textColorHoverInfo:E,textColorPressedInfo:E,textColorFocusInfo:E,textColorDisabledInfo:E,textColorTextInfo:M,textColorTextHoverInfo:T,textColorTextPressedInfo:D,textColorTextFocusInfo:T,textColorTextDisabledInfo:d,textColorGhostInfo:M,textColorGhostHoverInfo:T,textColorGhostPressedInfo:D,textColorGhostFocusInfo:T,textColorGhostDisabledInfo:M,borderInfo:`1px solid ${M}`,borderHoverInfo:`1px solid ${T}`,borderPressedInfo:`1px solid ${D}`,borderFocusInfo:`1px solid ${T}`,borderDisabledInfo:`1px solid ${M}`,rippleColorInfo:M,colorSuccess:I,colorHoverSuccess:N,colorPressedSuccess:O,colorFocusSuccess:N,colorDisabledSuccess:I,textColorSuccess:E,textColorHoverSuccess:E,textColorPressedSuccess:E,textColorFocusSuccess:E,textColorDisabledSuccess:E,textColorTextSuccess:I,textColorTextHoverSuccess:N,textColorTextPressedSuccess:O,textColorTextFocusSuccess:N,textColorTextDisabledSuccess:d,textColorGhostSuccess:I,textColorGhostHoverSuccess:N,textColorGhostPressedSuccess:O,textColorGhostFocusSuccess:N,textColorGhostDisabledSuccess:I,borderSuccess:`1px solid ${I}`,borderHoverSuccess:`1px solid ${N}`,borderPressedSuccess:`1px solid ${O}`,borderFocusSuccess:`1px solid ${N}`,borderDisabledSuccess:`1px solid ${I}`,rippleColorSuccess:I,colorWarning:F,colorHoverWarning:U,colorPressedWarning:Y,colorFocusWarning:U,colorDisabledWarning:F,textColorWarning:E,textColorHoverWarning:E,textColorPressedWarning:E,textColorFocusWarning:E,textColorDisabledWarning:E,textColorTextWarning:F,textColorTextHoverWarning:U,textColorTextPressedWarning:Y,textColorTextFocusWarning:U,textColorTextDisabledWarning:d,textColorGhostWarning:F,textColorGhostHoverWarning:U,textColorGhostPressedWarning:Y,textColorGhostFocusWarning:U,textColorGhostDisabledWarning:F,borderWarning:`1px solid ${F}`,borderHoverWarning:`1px solid ${U}`,borderPressedWarning:`1px solid ${Y}`,borderFocusWarning:`1px solid ${U}`,borderDisabledWarning:`1px solid ${F}`,rippleColorWarning:F,colorError:Q,colorHoverError:q,colorPressedError:ne,colorFocusError:q,colorDisabledError:Q,textColorError:E,textColorHoverError:E,textColorPressedError:E,textColorFocusError:E,textColorDisabledError:E,textColorTextError:Q,textColorTextHoverError:q,textColorTextPressedError:ne,textColorTextFocusError:q,textColorTextDisabledError:d,textColorGhostError:Q,textColorGhostHoverError:q,textColorGhostPressedError:ne,textColorGhostFocusError:q,textColorGhostDisabledError:Q,borderError:`1px solid ${Q}`,borderHoverError:`1px solid ${q}`,borderPressedError:`1px solid ${ne}`,borderFocusError:`1px solid ${q}`,borderDisabledError:`1px solid ${Q}`,rippleColorError:Q,waveOpacity:"0.6",fontWeight:J,fontWeightStrong:Z})}const buttonLight={name:"Button",common:commonLight,self:self$e},buttonLight$1=buttonLight,style$c=c$1([cB("button",`
 margin: 0;
 font-weight: var(--n-font-weight);
 line-height: 1;
 font-family: inherit;
 padding: var(--n-padding);
 height: var(--n-height);
 font-size: var(--n-font-size);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 width: var(--n-width);
 white-space: nowrap;
 outline: none;
 position: relative;
 z-index: auto;
 border: none;
 display: inline-flex;
 flex-wrap: nowrap;
 flex-shrink: 0;
 align-items: center;
 justify-content: center;
 user-select: none;
 -webkit-user-select: none;
 text-align: center;
 cursor: pointer;
 text-decoration: none;
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[cM("color",[cE("border",{borderColor:"var(--n-border-color)"}),cM("disabled",[cE("border",{borderColor:"var(--n-border-color-disabled)"})]),cNotM("disabled",[c$1("&:focus",[cE("state-border",{borderColor:"var(--n-border-color-focus)"})]),c$1("&:hover",[cE("state-border",{borderColor:"var(--n-border-color-hover)"})]),c$1("&:active",[cE("state-border",{borderColor:"var(--n-border-color-pressed)"})]),cM("pressed",[cE("state-border",{borderColor:"var(--n-border-color-pressed)"})])])]),cM("disabled",{backgroundColor:"var(--n-color-disabled)",color:"var(--n-text-color-disabled)"},[cE("border",{border:"var(--n-border-disabled)"})]),cNotM("disabled",[c$1("&:focus",{backgroundColor:"var(--n-color-focus)",color:"var(--n-text-color-focus)"},[cE("state-border",{border:"var(--n-border-focus)"})]),c$1("&:hover",{backgroundColor:"var(--n-color-hover)",color:"var(--n-text-color-hover)"},[cE("state-border",{border:"var(--n-border-hover)"})]),c$1("&:active",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[cE("state-border",{border:"var(--n-border-pressed)"})]),cM("pressed",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[cE("state-border",{border:"var(--n-border-pressed)"})])]),cM("loading","cursor: wait;"),cB("base-wave",`
 pointer-events: none;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 animation-iteration-count: 1;
 animation-duration: var(--n-ripple-duration);
 animation-timing-function: var(--n-bezier-ease-out), var(--n-bezier-ease-out);
 `,[cM("active",{zIndex:1,animationName:"button-wave-spread, button-wave-opacity"})]),isBrowser$1&&"MozBoxSizing"in document.createElement("div").style?c$1("&::moz-focus-inner",{border:0}):null,cE("border, state-border",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 border-radius: inherit;
 transition: border-color .3s var(--n-bezier);
 pointer-events: none;
 `),cE("border",{border:"var(--n-border)"}),cE("state-border",{border:"var(--n-border)",borderColor:"#0000",zIndex:1}),cE("icon",`
 margin: var(--n-icon-margin);
 margin-left: 0;
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 max-width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 position: relative;
 flex-shrink: 0;
 `,[cB("icon-slot",`
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 position: absolute;
 left: 0;
 top: 50%;
 transform: translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 `,[iconSwitchTransition({top:"50%",originalTransform:"translateY(-50%)"})]),fadeInWidthExpandTransition()]),cE("content",`
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 min-width: 0;
 `,[c$1("~",[cE("icon",{margin:"var(--n-icon-margin)",marginRight:0})])]),cM("block",`
 display: flex;
 width: 100%;
 `),cM("dashed",[cE("border, state-border",{borderStyle:"dashed !important"})]),cM("disabled",{cursor:"not-allowed",opacity:"var(--n-opacity-disabled)"})]),c$1("@keyframes button-wave-spread",{from:{boxShadow:"0 0 0.5px 0 var(--n-ripple-color)"},to:{boxShadow:"0 0 0.5px 4.5px var(--n-ripple-color)"}}),c$1("@keyframes button-wave-opacity",{from:{opacity:"var(--n-wave-opacity)"},to:{opacity:0}})]),buttonProps=Object.assign(Object.assign({},useTheme.props),{color:String,textColor:String,text:Boolean,block:Boolean,loading:Boolean,disabled:Boolean,circle:Boolean,size:String,ghost:Boolean,round:Boolean,secondary:Boolean,tertiary:Boolean,quaternary:Boolean,strong:Boolean,focusable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},tag:{type:String,default:"button"},type:{type:String,default:"default"},dashed:Boolean,renderIcon:Function,iconPlacement:{type:String,default:"left"},attrType:{type:String,default:"button"},bordered:{type:Boolean,default:!0},onClick:[Function,Array],nativeFocusBehavior:{type:Boolean,default:!isSafari}}),Button=defineComponent({name:"Button",props:buttonProps,slots:Object,setup(e){const n=ref(null),r=ref(null),o=ref(!1),u=useMemo(()=>!e.quaternary&&!e.tertiary&&!e.secondary&&!e.text&&(!e.color||e.ghost||e.dashed)&&e.bordered),s=inject(buttonGroupInjectionKey,{}),{mergedSizeRef:w}=useFormItem({},{defaultSize:"medium",mergedSize:D=>{const{size:I}=e;if(I)return I;const{size:N}=s;if(N)return N;const{mergedSize:O}=D||{};return O?O.value:"medium"}}),g=computed(()=>e.focusable&&!e.disabled),v=D=>{var I;g.value||D.preventDefault(),!e.nativeFocusBehavior&&(D.preventDefault(),!e.disabled&&g.value&&((I=n.value)===null||I===void 0||I.focus({preventScroll:!0})))},y=D=>{var I;if(!e.disabled&&!e.loading){const{onClick:N}=e;N&&call(N,D),e.text||(I=r.value)===null||I===void 0||I.play()}},m=D=>{switch(D.key){case"Enter":if(!e.keyboard)return;o.value=!1}},d=D=>{switch(D.key){case"Enter":if(!e.keyboard||e.loading){D.preventDefault();return}o.value=!0}},f=()=>{o.value=!1},{inlineThemeDisabled:x,mergedClsPrefixRef:k,mergedRtlRef:P}=useConfig(e),S=useTheme("Button","-button",style$c,buttonLight$1,e,k),E=useRtl("Button",P,k),M=computed(()=>{const D=S.value,{common:{cubicBezierEaseInOut:I,cubicBezierEaseOut:N},self:O}=D,{rippleDuration:F,opacityDisabled:U,fontWeight:Y,fontWeightStrong:Q}=O,q=w.value,{dashed:ne,type:J,ghost:re,text:X,color:j,round:Z,circle:W,textColor:te,secondary:le,tertiary:oe,quaternary:Ee,strong:Ae}=e,ve={"--n-font-weight":Ae?Q:Y};let ke={"--n-color":"initial","--n-color-hover":"initial","--n-color-pressed":"initial","--n-color-focus":"initial","--n-color-disabled":"initial","--n-ripple-color":"initial","--n-text-color":"initial","--n-text-color-hover":"initial","--n-text-color-pressed":"initial","--n-text-color-focus":"initial","--n-text-color-disabled":"initial"};const Ce=J==="tertiary",Pe=J==="default",Me=Ce?"default":J;if(X){const Ie=te||j;ke={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":"#0000","--n-text-color":Ie||O[createKey("textColorText",Me)],"--n-text-color-hover":Ie?createHoverColor(Ie):O[createKey("textColorTextHover",Me)],"--n-text-color-pressed":Ie?createPressedColor(Ie):O[createKey("textColorTextPressed",Me)],"--n-text-color-focus":Ie?createHoverColor(Ie):O[createKey("textColorTextHover",Me)],"--n-text-color-disabled":Ie||O[createKey("textColorTextDisabled",Me)]}}else if(re||ne){const Ie=te||j;ke={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":j||O[createKey("rippleColor",Me)],"--n-text-color":Ie||O[createKey("textColorGhost",Me)],"--n-text-color-hover":Ie?createHoverColor(Ie):O[createKey("textColorGhostHover",Me)],"--n-text-color-pressed":Ie?createPressedColor(Ie):O[createKey("textColorGhostPressed",Me)],"--n-text-color-focus":Ie?createHoverColor(Ie):O[createKey("textColorGhostHover",Me)],"--n-text-color-disabled":Ie||O[createKey("textColorGhostDisabled",Me)]}}else if(le){const Ie=Pe?O.textColor:Ce?O.textColorTertiary:O[createKey("color",Me)],je=j||Ie,qe=J!=="default"&&J!=="tertiary";ke={"--n-color":qe?changeColor(je,{alpha:Number(O.colorOpacitySecondary)}):O.colorSecondary,"--n-color-hover":qe?changeColor(je,{alpha:Number(O.colorOpacitySecondaryHover)}):O.colorSecondaryHover,"--n-color-pressed":qe?changeColor(je,{alpha:Number(O.colorOpacitySecondaryPressed)}):O.colorSecondaryPressed,"--n-color-focus":qe?changeColor(je,{alpha:Number(O.colorOpacitySecondaryHover)}):O.colorSecondaryHover,"--n-color-disabled":O.colorSecondary,"--n-ripple-color":"#0000","--n-text-color":je,"--n-text-color-hover":je,"--n-text-color-pressed":je,"--n-text-color-focus":je,"--n-text-color-disabled":je}}else if(oe||Ee){const Ie=Pe?O.textColor:Ce?O.textColorTertiary:O[createKey("color",Me)],je=j||Ie;oe?(ke["--n-color"]=O.colorTertiary,ke["--n-color-hover"]=O.colorTertiaryHover,ke["--n-color-pressed"]=O.colorTertiaryPressed,ke["--n-color-focus"]=O.colorSecondaryHover,ke["--n-color-disabled"]=O.colorTertiary):(ke["--n-color"]=O.colorQuaternary,ke["--n-color-hover"]=O.colorQuaternaryHover,ke["--n-color-pressed"]=O.colorQuaternaryPressed,ke["--n-color-focus"]=O.colorQuaternaryHover,ke["--n-color-disabled"]=O.colorQuaternary),ke["--n-ripple-color"]="#0000",ke["--n-text-color"]=je,ke["--n-text-color-hover"]=je,ke["--n-text-color-pressed"]=je,ke["--n-text-color-focus"]=je,ke["--n-text-color-disabled"]=je}else ke={"--n-color":j||O[createKey("color",Me)],"--n-color-hover":j?createHoverColor(j):O[createKey("colorHover",Me)],"--n-color-pressed":j?createPressedColor(j):O[createKey("colorPressed",Me)],"--n-color-focus":j?createHoverColor(j):O[createKey("colorFocus",Me)],"--n-color-disabled":j||O[createKey("colorDisabled",Me)],"--n-ripple-color":j||O[createKey("rippleColor",Me)],"--n-text-color":te||(j?O.textColorPrimary:Ce?O.textColorTertiary:O[createKey("textColor",Me)]),"--n-text-color-hover":te||(j?O.textColorHoverPrimary:O[createKey("textColorHover",Me)]),"--n-text-color-pressed":te||(j?O.textColorPressedPrimary:O[createKey("textColorPressed",Me)]),"--n-text-color-focus":te||(j?O.textColorFocusPrimary:O[createKey("textColorFocus",Me)]),"--n-text-color-disabled":te||(j?O.textColorDisabledPrimary:O[createKey("textColorDisabled",Me)])};let Le={"--n-border":"initial","--n-border-hover":"initial","--n-border-pressed":"initial","--n-border-focus":"initial","--n-border-disabled":"initial"};X?Le={"--n-border":"none","--n-border-hover":"none","--n-border-pressed":"none","--n-border-focus":"none","--n-border-disabled":"none"}:Le={"--n-border":O[createKey("border",Me)],"--n-border-hover":O[createKey("borderHover",Me)],"--n-border-pressed":O[createKey("borderPressed",Me)],"--n-border-focus":O[createKey("borderFocus",Me)],"--n-border-disabled":O[createKey("borderDisabled",Me)]};const{[createKey("height",q)]:Te,[createKey("fontSize",q)]:ye,[createKey("padding",q)]:_e,[createKey("paddingRound",q)]:we,[createKey("iconSize",q)]:Se,[createKey("borderRadius",q)]:$e,[createKey("iconMargin",q)]:Be,waveOpacity:Oe}=O,Ge={"--n-width":W&&!X?Te:"initial","--n-height":X?"initial":Te,"--n-font-size":ye,"--n-padding":W||X?"initial":Z?we:_e,"--n-icon-size":Se,"--n-icon-margin":Be,"--n-border-radius":X?"initial":W||Z?Te:$e};return Object.assign(Object.assign(Object.assign(Object.assign({"--n-bezier":I,"--n-bezier-ease-out":N,"--n-ripple-duration":F,"--n-opacity-disabled":U,"--n-wave-opacity":Oe},ve),ke),Le),Ge)}),T=x?useThemeClass("button",computed(()=>{let D="";const{dashed:I,type:N,ghost:O,text:F,color:U,round:Y,circle:Q,textColor:q,secondary:ne,tertiary:J,quaternary:re,strong:X}=e;I&&(D+="a"),O&&(D+="b"),F&&(D+="c"),Y&&(D+="d"),Q&&(D+="e"),ne&&(D+="f"),J&&(D+="g"),re&&(D+="h"),X&&(D+="i"),U&&(D+=`j${color2Class(U)}`),q&&(D+=`k${color2Class(q)}`);const{value:j}=w;return D+=`l${j[0]}`,D+=`m${N[0]}`,D}),M,e):void 0;return{selfElRef:n,waveElRef:r,mergedClsPrefix:k,mergedFocusable:g,mergedSize:w,showBorder:u,enterPressed:o,rtlEnabled:E,handleMousedown:v,handleKeydown:d,handleBlur:f,handleKeyup:m,handleClick:y,customColorCssVars:computed(()=>{const{color:D}=e;if(!D)return null;const I=createHoverColor(D);return{"--n-border-color":D,"--n-border-color-hover":I,"--n-border-color-pressed":createPressedColor(D),"--n-border-color-focus":I,"--n-border-color-disabled":D}}),cssVars:x?void 0:M,themeClass:T==null?void 0:T.themeClass,onRender:T==null?void 0:T.onRender}},render(){const{mergedClsPrefix:e,tag:n,onRender:r}=this;r==null||r();const o=resolveWrappedSlot(this.$slots.default,u=>u&&h$1("span",{class:`${e}-button__content`},u));return h$1(n,{ref:"selfElRef",class:[this.themeClass,`${e}-button`,`${e}-button--${this.type}-type`,`${e}-button--${this.mergedSize}-type`,this.rtlEnabled&&`${e}-button--rtl`,this.disabled&&`${e}-button--disabled`,this.block&&`${e}-button--block`,this.enterPressed&&`${e}-button--pressed`,!this.text&&this.dashed&&`${e}-button--dashed`,this.color&&`${e}-button--color`,this.secondary&&`${e}-button--secondary`,this.loading&&`${e}-button--loading`,this.ghost&&`${e}-button--ghost`],tabindex:this.mergedFocusable?0:-1,type:this.attrType,style:this.cssVars,disabled:this.disabled,onClick:this.handleClick,onBlur:this.handleBlur,onMousedown:this.handleMousedown,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},this.iconPlacement==="right"&&o,h$1(NFadeInExpandTransition,{width:!0},{default:()=>resolveWrappedSlot(this.$slots.icon,u=>(this.loading||this.renderIcon||u)&&h$1("span",{class:`${e}-button__icon`,style:{margin:isSlotEmpty(this.$slots.default)?"0":""}},h$1(NIconSwitchTransition,null,{default:()=>this.loading?h$1(NBaseLoading,{clsPrefix:e,key:"loading",class:`${e}-icon-slot`,strokeWidth:20}):h$1("div",{key:"icon",class:`${e}-icon-slot`,role:"none"},this.renderIcon?this.renderIcon():u)})))}),this.iconPlacement==="left"&&o,this.text?null:h$1(NBaseWave,{ref:"waveElRef",clsPrefix:e}),this.showBorder?h$1("div",{"aria-hidden":!0,class:`${e}-button__border`,style:this.customColorCssVars}):null,this.showBorder?h$1("div",{"aria-hidden":!0,class:`${e}-button__state-border`,style:this.customColorCssVars}):null)}}),NButton=Button,XButton=Button,commonVariables$1={paddingSmall:"12px 16px 12px",paddingMedium:"19px 24px 20px",paddingLarge:"23px 32px 24px",paddingHuge:"27px 40px 28px",titleFontSizeSmall:"16px",titleFontSizeMedium:"18px",titleFontSizeLarge:"18px",titleFontSizeHuge:"18px",closeIconSize:"18px",closeSize:"22px"};function self$d(e){const{primaryColor:n,borderRadius:r,lineHeight:o,fontSize:u,cardColor:s,textColor2:w,textColor1:g,dividerColor:v,fontWeightStrong:y,closeIconColor:m,closeIconColorHover:d,closeIconColorPressed:f,closeColorHover:x,closeColorPressed:k,modalColor:P,boxShadow1:S,popoverColor:E,actionColor:M}=e;return Object.assign(Object.assign({},commonVariables$1),{lineHeight:o,color:s,colorModal:P,colorPopover:E,colorTarget:n,colorEmbedded:M,colorEmbeddedModal:M,colorEmbeddedPopover:M,textColor:w,titleTextColor:g,borderColor:v,actionColor:M,titleFontWeight:y,closeColorHover:x,closeColorPressed:k,closeBorderRadius:r,closeIconColor:m,closeIconColorHover:d,closeIconColorPressed:f,fontSizeSmall:u,fontSizeMedium:u,fontSizeLarge:u,fontSizeHuge:u,boxShadow:S,borderRadius:r})}const cardLight={name:"Card",common:commonLight,self:self$d},cardLight$1=cardLight,style$b=c$1([cB("card",`
 font-size: var(--n-font-size);
 line-height: var(--n-line-height);
 display: flex;
 flex-direction: column;
 width: 100%;
 box-sizing: border-box;
 position: relative;
 border-radius: var(--n-border-radius);
 background-color: var(--n-color);
 color: var(--n-text-color);
 word-break: break-word;
 transition: 
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[asModal({background:"var(--n-color-modal)"}),cM("hoverable",[c$1("&:hover","box-shadow: var(--n-box-shadow);")]),cM("content-segmented",[c$1(">",[cE("content",{paddingTop:"var(--n-padding-bottom)"})])]),cM("content-soft-segmented",[c$1(">",[cE("content",`
 margin: 0 var(--n-padding-left);
 padding: var(--n-padding-bottom) 0;
 `)])]),cM("footer-segmented",[c$1(">",[cE("footer",{paddingTop:"var(--n-padding-bottom)"})])]),cM("footer-soft-segmented",[c$1(">",[cE("footer",`
 padding: var(--n-padding-bottom) 0;
 margin: 0 var(--n-padding-left);
 `)])]),c$1(">",[cB("card-header",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 font-size: var(--n-title-font-size);
 padding:
 var(--n-padding-top)
 var(--n-padding-left)
 var(--n-padding-bottom)
 var(--n-padding-left);
 `,[cE("main",`
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 min-width: 0;
 color: var(--n-title-text-color);
 `),cE("extra",`
 display: flex;
 align-items: center;
 font-size: var(--n-font-size);
 font-weight: 400;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),cE("close",`
 margin: 0 0 0 8px;
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `)]),cE("action",`
 box-sizing: border-box;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 background-clip: padding-box;
 background-color: var(--n-action-color);
 `),cE("content","flex: 1; min-width: 0;"),cE("content, footer",`
 box-sizing: border-box;
 padding: 0 var(--n-padding-left) var(--n-padding-bottom) var(--n-padding-left);
 font-size: var(--n-font-size);
 `,[c$1("&:first-child",{paddingTop:"var(--n-padding-bottom)"})]),cE("action",`
 background-color: var(--n-action-color);
 padding: var(--n-padding-bottom) var(--n-padding-left);
 border-bottom-left-radius: var(--n-border-radius);
 border-bottom-right-radius: var(--n-border-radius);
 `)]),cB("card-cover",`
 overflow: hidden;
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 `,[c$1("img",`
 display: block;
 width: 100%;
 `)]),cM("bordered",`
 border: 1px solid var(--n-border-color);
 `,[c$1("&:target","border-color: var(--n-color-target);")]),cM("action-segmented",[c$1(">",[cE("action",[c$1("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),cM("content-segmented, content-soft-segmented",[c$1(">",[cE("content",{transition:"border-color 0.3s var(--n-bezier)"},[c$1("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),cM("footer-segmented, footer-soft-segmented",[c$1(">",[cE("footer",{transition:"border-color 0.3s var(--n-bezier)"},[c$1("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),cM("embedded",`
 background-color: var(--n-color-embedded);
 `)]),insideModal(cB("card",`
 background: var(--n-color-modal);
 `,[cM("embedded",`
 background-color: var(--n-color-embedded-modal);
 `)])),insidePopover(cB("card",`
 background: var(--n-color-popover);
 `,[cM("embedded",`
 background-color: var(--n-color-embedded-popover);
 `)]))]),cardBaseProps={title:[String,Function],contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],headerExtraClass:String,headerExtraStyle:[Object,String],footerClass:String,footerStyle:[Object,String],embedded:Boolean,segmented:{type:[Boolean,Object],default:!1},size:{type:String,default:"medium"},bordered:{type:Boolean,default:!0},closable:Boolean,hoverable:Boolean,role:String,onClose:[Function,Array],tag:{type:String,default:"div"},cover:Function,content:[String,Function],footer:Function,action:Function,headerExtra:Function},cardBasePropKeys=keysOf(cardBaseProps),cardProps=Object.assign(Object.assign({},useTheme.props),cardBaseProps),NCard=defineComponent({name:"Card",props:cardProps,slots:Object,setup(e){const n=()=>{const{onClose:y}=e;y&&call(y)},{inlineThemeDisabled:r,mergedClsPrefixRef:o,mergedRtlRef:u}=useConfig(e),s=useTheme("Card","-card",style$b,cardLight$1,e,o),w=useRtl("Card",u,o),g=computed(()=>{const{size:y}=e,{self:{color:m,colorModal:d,colorTarget:f,textColor:x,titleTextColor:k,titleFontWeight:P,borderColor:S,actionColor:E,borderRadius:M,lineHeight:T,closeIconColor:D,closeIconColorHover:I,closeIconColorPressed:N,closeColorHover:O,closeColorPressed:F,closeBorderRadius:U,closeIconSize:Y,closeSize:Q,boxShadow:q,colorPopover:ne,colorEmbedded:J,colorEmbeddedModal:re,colorEmbeddedPopover:X,[createKey("padding",y)]:j,[createKey("fontSize",y)]:Z,[createKey("titleFontSize",y)]:W},common:{cubicBezierEaseInOut:te}}=s.value,{top:le,left:oe,bottom:Ee}=getMargin(j);return{"--n-bezier":te,"--n-border-radius":M,"--n-color":m,"--n-color-modal":d,"--n-color-popover":ne,"--n-color-embedded":J,"--n-color-embedded-modal":re,"--n-color-embedded-popover":X,"--n-color-target":f,"--n-text-color":x,"--n-line-height":T,"--n-action-color":E,"--n-title-text-color":k,"--n-title-font-weight":P,"--n-close-icon-color":D,"--n-close-icon-color-hover":I,"--n-close-icon-color-pressed":N,"--n-close-color-hover":O,"--n-close-color-pressed":F,"--n-border-color":S,"--n-box-shadow":q,"--n-padding-top":le,"--n-padding-bottom":Ee,"--n-padding-left":oe,"--n-font-size":Z,"--n-title-font-size":W,"--n-close-size":Q,"--n-close-icon-size":Y,"--n-close-border-radius":U}}),v=r?useThemeClass("card",computed(()=>e.size[0]),g,e):void 0;return{rtlEnabled:w,mergedClsPrefix:o,mergedTheme:s,handleCloseClick:n,cssVars:r?void 0:g,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender}},render(){const{segmented:e,bordered:n,hoverable:r,mergedClsPrefix:o,rtlEnabled:u,onRender:s,embedded:w,tag:g,$slots:v}=this;return s==null||s(),h$1(g,{class:[`${o}-card`,this.themeClass,w&&`${o}-card--embedded`,{[`${o}-card--rtl`]:u,[`${o}-card--content${typeof e!="boolean"&&e.content==="soft"?"-soft":""}-segmented`]:e===!0||e!==!1&&e.content,[`${o}-card--footer${typeof e!="boolean"&&e.footer==="soft"?"-soft":""}-segmented`]:e===!0||e!==!1&&e.footer,[`${o}-card--action-segmented`]:e===!0||e!==!1&&e.action,[`${o}-card--bordered`]:n,[`${o}-card--hoverable`]:r}],style:this.cssVars,role:this.role},resolveWrappedSlot(v.cover,y=>{const m=this.cover?ensureValidVNode([this.cover()]):y;return m&&h$1("div",{class:`${o}-card-cover`,role:"none"},m)}),resolveWrappedSlot(v.header,y=>{const{title:m}=this,d=m?ensureValidVNode(typeof m=="function"?[m()]:[m]):y;return d||this.closable?h$1("div",{class:[`${o}-card-header`,this.headerClass],style:this.headerStyle,role:"heading"},h$1("div",{class:`${o}-card-header__main`,role:"heading"},d),resolveWrappedSlot(v["header-extra"],f=>{const x=this.headerExtra?ensureValidVNode([this.headerExtra()]):f;return x&&h$1("div",{class:[`${o}-card-header__extra`,this.headerExtraClass],style:this.headerExtraStyle},x)}),this.closable&&h$1(NBaseClose,{clsPrefix:o,class:`${o}-card-header__close`,onClick:this.handleCloseClick,absolute:!0})):null}),resolveWrappedSlot(v.default,y=>{const{content:m}=this,d=m?ensureValidVNode(typeof m=="function"?[m()]:[m]):y;return d&&h$1("div",{class:[`${o}-card__content`,this.contentClass],style:this.contentStyle,role:"none"},d)}),resolveWrappedSlot(v.footer,y=>{const m=this.footer?ensureValidVNode([this.footer()]):y;return m&&h$1("div",{class:[`${o}-card__footer`,this.footerClass],style:this.footerStyle,role:"none"},m)}),resolveWrappedSlot(v.action,y=>{const m=this.action?ensureValidVNode([this.action()]):y;return m&&h$1("div",{class:`${o}-card__action`,role:"none"},m)}))}});function self$c(e){const{fontSize:n,boxShadow2:r,popoverColor:o,textColor2:u,borderRadius:s,borderColor:w,heightSmall:g,heightMedium:v,heightLarge:y,fontSizeSmall:m,fontSizeMedium:d,fontSizeLarge:f,dividerColor:x}=e;return{panelFontSize:n,boxShadow:r,color:o,textColor:u,borderRadius:s,border:`1px solid ${w}`,heightSmall:g,heightMedium:v,heightLarge:y,fontSizeSmall:m,fontSizeMedium:d,fontSizeLarge:f,dividerColor:x}}const colorPickerLight={name:"ColorPicker",common:commonLight,peers:{Input:inputLight$1,Button:buttonLight$1},self:self$c},colorPickerLight$1=colorPickerLight;function deriveDefaultValue(e,n){switch(e[0]){case"hex":return n?"#000000FF":"#000000";case"rgb":return n?"rgba(0, 0, 0, 1)":"rgb(0, 0, 0)";case"hsl":return n?"hsla(0, 0%, 0%, 1)":"hsl(0, 0%, 0%)";case"hsv":return n?"hsva(0, 0%, 0%, 1)":"hsv(0, 0%, 0%)"}return"#000000"}function getModeFromValue(e){return e===null?null:/^ *#/.test(e)?"hex":e.includes("rgb")?"rgb":e.includes("hsl")?"hsl":e.includes("hsv")?"hsv":null}function normalizeHue(e){return e=Math.round(e),e>=360?359:e<0?0:e}function normalizeAlpha(e){return e=Math.round(e*100)/100,e>1?1:e<0?0:e}const convert={rgb:{hex(e){return toHexaString(rgba(e))},hsl(e){const[n,r,o,u]=rgba(e);return toHslaString([...rgb2hsl(n,r,o),u])},hsv(e){const[n,r,o,u]=rgba(e);return toHsvaString([...rgb2hsv(n,r,o),u])}},hex:{rgb(e){return toRgbaString(rgba(e))},hsl(e){const[n,r,o,u]=rgba(e);return toHslaString([...rgb2hsl(n,r,o),u])},hsv(e){const[n,r,o,u]=rgba(e);return toHsvaString([...rgb2hsv(n,r,o),u])}},hsl:{hex(e){const[n,r,o,u]=hsla(e);return toHexaString([...hsl2rgb(n,r,o),u])},rgb(e){const[n,r,o,u]=hsla(e);return toRgbaString([...hsl2rgb(n,r,o),u])},hsv(e){const[n,r,o,u]=hsla(e);return toHsvaString([...hsl2hsv(n,r,o),u])}},hsv:{hex(e){const[n,r,o,u]=hsva(e);return toHexaString([...hsv2rgb(n,r,o),u])},rgb(e){const[n,r,o,u]=hsva(e);return toRgbaString([...hsv2rgb(n,r,o),u])},hsl(e){const[n,r,o,u]=hsva(e);return toHslaString([...hsv2hsl(n,r,o),u])}}};function convertColor$1(e,n,r){return r=r||getModeFromValue(e),r?r===n?e:convert[r][n](e):null}const HANDLE_SIZE$2="12px",HANDLE_SIZE_NUM$1=12,RADIUS$2="6px",AlphaSlider=defineComponent({name:"AlphaSlider",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},alpha:{type:Number,default:0},onUpdateAlpha:{type:Function,required:!0},onComplete:Function},setup(e){const n=ref(null);function r(s){!n.value||!e.rgba||(on$1("mousemove",document,o),on$1("mouseup",document,u),o(s))}function o(s){const{value:w}=n;if(!w)return;const{width:g,left:v}=w.getBoundingClientRect(),y=(s.clientX-v)/(g-HANDLE_SIZE_NUM$1);e.onUpdateAlpha(normalizeAlpha(y))}function u(){var s;off$1("mousemove",document,o),off$1("mouseup",document,u),(s=e.onComplete)===null||s===void 0||s.call(e)}return{railRef:n,railBackgroundImage:computed(()=>{const{rgba:s}=e;return s?`linear-gradient(to right, rgba(${s[0]}, ${s[1]}, ${s[2]}, 0) 0%, rgba(${s[0]}, ${s[1]}, ${s[2]}, 1) 100%)`:""}),handleMouseDown:r}},render(){const{clsPrefix:e}=this;return h$1("div",{class:`${e}-color-picker-slider`,ref:"railRef",style:{height:HANDLE_SIZE$2,borderRadius:RADIUS$2},onMousedown:this.handleMouseDown},h$1("div",{style:{borderRadius:RADIUS$2,position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}},h$1("div",{class:`${e}-color-picker-checkboard`}),h$1("div",{class:`${e}-color-picker-slider__image`,style:{backgroundImage:this.railBackgroundImage}})),this.rgba&&h$1("div",{style:{position:"absolute",left:RADIUS$2,right:RADIUS$2,top:0,bottom:0}},h$1("div",{class:`${e}-color-picker-handle`,style:{left:`calc(${this.alpha*100}% - ${RADIUS$2})`,borderRadius:RADIUS$2,width:HANDLE_SIZE$2,height:HANDLE_SIZE$2}},h$1("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:toRgbaString(this.rgba),borderRadius:RADIUS$2,width:HANDLE_SIZE$2,height:HANDLE_SIZE$2}}))))}}),colorPickerInjectionKey="n-color-picker";function normalizeRgbUnit(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),255)):!1}function normalizeHueUnit(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),360)):!1}function normalizeSlvUnit(e){return/^\d{1,3}\.?\d*$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e),100)):!1}function normalizeHexaUnit(e){const n=e.trim();return/^#[0-9a-fA-F]+$/.test(n)?[4,5,7,9].includes(n.length):!1}function normalizeAlphaUnit(e){return/^\d{1,3}\.?\d*%$/.test(e.trim())?Math.max(0,Math.min(Number.parseInt(e)/100,100)):!1}const inputThemeOverrides={paddingSmall:"0 4px"},ColorInputUnit=defineComponent({name:"ColorInputUnit",props:{label:{type:String,required:!0},value:{type:[Number,String],default:null},showAlpha:Boolean,onUpdateValue:{type:Function,required:!0}},setup(e){const n=ref(""),{themeRef:r}=inject(colorPickerInjectionKey,null);watchEffect(()=>{n.value=o()});function o(){const{value:w}=e;if(w===null)return"";const{label:g}=e;return g==="HEX"?w:g==="A"?`${Math.floor(w*100)}%`:String(Math.floor(w))}function u(w){n.value=w}function s(w){let g,v;switch(e.label){case"HEX":v=normalizeHexaUnit(w),v&&e.onUpdateValue(w),n.value=o();break;case"H":g=normalizeHueUnit(w),g===!1?n.value=o():e.onUpdateValue(g);break;case"S":case"L":case"V":g=normalizeSlvUnit(w),g===!1?n.value=o():e.onUpdateValue(g);break;case"A":g=normalizeAlphaUnit(w),g===!1?n.value=o():e.onUpdateValue(g);break;case"R":case"G":case"B":g=normalizeRgbUnit(w),g===!1?n.value=o():e.onUpdateValue(g);break}}return{mergedTheme:r,inputValue:n,handleInputChange:s,handleInputUpdateValue:u}},render(){const{mergedTheme:e}=this;return h$1(NInput,{size:"small",placeholder:this.label,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,builtinThemeOverrides:inputThemeOverrides,value:this.inputValue,onUpdateValue:this.handleInputUpdateValue,onChange:this.handleInputChange,style:this.label==="A"?"flex-grow: 1.25;":""})}}),ColorInput=defineComponent({name:"ColorInput",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},modes:{type:Array,required:!0},showAlpha:{type:Boolean,required:!0},value:{type:String,default:null},valueArr:{type:Array,default:null},onUpdateValue:{type:Function,required:!0},onUpdateMode:{type:Function,required:!0}},setup(e){return{handleUnitUpdateValue(n,r){const{showAlpha:o}=e;if(e.mode==="hex"){e.onUpdateValue((o?toHexaString:toHexString)(r));return}let u;switch(e.valueArr===null?u=[0,0,0,0]:u=Array.from(e.valueArr),e.mode){case"hsv":u[n]=r,e.onUpdateValue((o?toHsvaString:toHsvString)(u));break;case"rgb":u[n]=r,e.onUpdateValue((o?toRgbaString:toRgbString)(u));break;case"hsl":u[n]=r,e.onUpdateValue((o?toHslaString:toHslString)(u));break}}}},render(){const{clsPrefix:e,modes:n}=this;return h$1("div",{class:`${e}-color-picker-input`},h$1("div",{class:`${e}-color-picker-input__mode`,onClick:this.onUpdateMode,style:{cursor:n.length===1?"":"pointer"}},this.mode.toUpperCase()+(this.showAlpha?"A":"")),h$1(NInputGroup,null,{default:()=>{const{mode:r,valueArr:o,showAlpha:u}=this;if(r==="hex"){let s=null;try{s=o===null?null:(u?toHexaString:toHexString)(o)}catch{}return h$1(ColorInputUnit,{label:"HEX",showAlpha:u,value:s,onUpdateValue:w=>{this.handleUnitUpdateValue(0,w)}})}return(r+(u?"a":"")).split("").map((s,w)=>h$1(ColorInputUnit,{label:s.toUpperCase(),value:o===null?null:o[w],onUpdateValue:g=>{this.handleUnitUpdateValue(w,g)}}))}}))}});function normalizeColor(e,n){if(n==="hsv"){const[r,o,u,s]=hsva(e);return toRgbaString([...hsv2rgb(r,o,u),s])}return e}function getHexFromName(e){const n=document.createElement("canvas").getContext("2d");return n?(n.fillStyle=e,n.fillStyle):"#000000"}const ColorPickerSwatches=defineComponent({name:"ColorPickerSwatches",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},swatches:{type:Array,required:!0},onUpdateColor:{type:Function,required:!0}},setup(e){const n=computed(()=>e.swatches.map(s=>{const w=getModeFromValue(s);return{value:s,mode:w,legalValue:normalizeColor(s,w)}}));function r(s){const{mode:w}=e;let{value:g,mode:v}=s;return v||(v="hex",/^[a-zA-Z]+$/.test(g)?g=getHexFromName(g):(warn("color-picker",`color ${g} in swatches is invalid.`),g="#000000")),v===w?g:convertColor$1(g,w,v)}function o(s){e.onUpdateColor(r(s))}function u(s,w){s.key==="Enter"&&o(w)}return{parsedSwatchesRef:n,handleSwatchSelect:o,handleSwatchKeyDown:u}},render(){const{clsPrefix:e}=this;return h$1("div",{class:`${e}-color-picker-swatches`},this.parsedSwatchesRef.map(n=>h$1("div",{class:`${e}-color-picker-swatch`,tabindex:0,onClick:()=>{this.handleSwatchSelect(n)},onKeydown:r=>{this.handleSwatchKeyDown(r,n)}},h$1("div",{class:`${e}-color-picker-swatch__fill`,style:{background:n.legalValue}}))))}}),ColorPickerTrigger=defineComponent({name:"ColorPickerTrigger",slots:Object,props:{clsPrefix:{type:String,required:!0},value:{type:String,default:null},hsla:{type:Array,default:null},disabled:Boolean,onClick:Function},setup(e){const{colorPickerSlots:n,renderLabelRef:r}=inject(colorPickerInjectionKey,null);return()=>{const{hsla:o,value:u,clsPrefix:s,onClick:w,disabled:g}=e,v=n.label||r.value;return h$1("div",{class:[`${s}-color-picker-trigger`,g&&`${s}-color-picker-trigger--disabled`],onClick:g?void 0:w},h$1("div",{class:`${s}-color-picker-trigger__fill`},h$1("div",{class:`${s}-color-picker-checkboard`}),h$1("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:o?toHslaString(o):""}}),u&&o?h$1("div",{class:`${s}-color-picker-trigger__value`,style:{color:o[2]>50||o[3]<.5?"black":"white"}},v?v(u):u):null))}}}),ColorPreview=defineComponent({name:"ColorPreview",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},color:{type:String,default:null,validator:e=>{const n=getModeFromValue(e);return Boolean(!e||n&&n!=="hsv")}},onUpdateColor:{type:Function,required:!0}},setup(e){function n(r){var o;const u=r.target.value;(o=e.onUpdateColor)===null||o===void 0||o.call(e,convertColor$1(u.toUpperCase(),e.mode,"hex")),r.stopPropagation()}return{handleChange:n}},render(){const{clsPrefix:e}=this;return h$1("div",{class:`${e}-color-picker-preview__preview`},h$1("span",{class:`${e}-color-picker-preview__fill`,style:{background:this.color||"#000000"}}),h$1("input",{class:`${e}-color-picker-preview__input`,type:"color",value:this.color,onChange:this.handleChange}))}}),HANDLE_SIZE$1="12px",HANDLE_SIZE_NUM=12,RADIUS$1="6px",RADIUS_NUM=6,GRADIENT="linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)",HueSlider=defineComponent({name:"HueSlider",props:{clsPrefix:{type:String,required:!0},hue:{type:Number,required:!0},onUpdateHue:{type:Function,required:!0},onComplete:Function},setup(e){const n=ref(null);function r(s){!n.value||(on$1("mousemove",document,o),on$1("mouseup",document,u),o(s))}function o(s){const{value:w}=n;if(!w)return;const{width:g,left:v}=w.getBoundingClientRect(),y=normalizeHue((s.clientX-v-RADIUS_NUM)/(g-HANDLE_SIZE_NUM)*360);e.onUpdateHue(y)}function u(){var s;off$1("mousemove",document,o),off$1("mouseup",document,u),(s=e.onComplete)===null||s===void 0||s.call(e)}return{railRef:n,handleMouseDown:r}},render(){const{clsPrefix:e}=this;return h$1("div",{class:`${e}-color-picker-slider`,style:{height:HANDLE_SIZE$1,borderRadius:RADIUS$1}},h$1("div",{ref:"railRef",style:{boxShadow:"inset 0 0 2px 0 rgba(0, 0, 0, .24)",boxSizing:"border-box",backgroundImage:GRADIENT,height:HANDLE_SIZE$1,borderRadius:RADIUS$1,position:"relative"},onMousedown:this.handleMouseDown},h$1("div",{style:{position:"absolute",left:RADIUS$1,right:RADIUS$1,top:0,bottom:0}},h$1("div",{class:`${e}-color-picker-handle`,style:{left:`calc((${this.hue}%) / 359 * 100 - ${RADIUS$1})`,borderRadius:RADIUS$1,width:HANDLE_SIZE$1,height:HANDLE_SIZE$1}},h$1("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:`hsl(${this.hue}, 100%, 50%)`,borderRadius:RADIUS$1,width:HANDLE_SIZE$1,height:HANDLE_SIZE$1}})))))}}),HANDLE_SIZE="12px",RADIUS="6px",Pallete=defineComponent({name:"Pallete",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},displayedHue:{type:Number,required:!0},displayedSv:{type:Array,required:!0},onUpdateSV:{type:Function,required:!0},onComplete:Function},setup(e){const n=ref(null);function r(s){!n.value||(on$1("mousemove",document,o),on$1("mouseup",document,u),o(s))}function o(s){const{value:w}=n;if(!w)return;const{width:g,height:v,left:y,bottom:m}=w.getBoundingClientRect(),d=(m-s.clientY)/v,f=(s.clientX-y)/g,x=100*(f>1?1:f<0?0:f),k=100*(d>1?1:d<0?0:d);e.onUpdateSV(x,k)}function u(){var s;off$1("mousemove",document,o),off$1("mouseup",document,u),(s=e.onComplete)===null||s===void 0||s.call(e)}return{palleteRef:n,handleColor:computed(()=>{const{rgba:s}=e;return s?`rgb(${s[0]}, ${s[1]}, ${s[2]})`:""}),handleMouseDown:r}},render(){const{clsPrefix:e}=this;return h$1("div",{class:`${e}-color-picker-pallete`,onMousedown:this.handleMouseDown,ref:"palleteRef"},h$1("div",{class:`${e}-color-picker-pallete__layer`,style:{backgroundImage:`linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`}}),h$1("div",{class:`${e}-color-picker-pallete__layer ${e}-color-picker-pallete__layer--shadowed`,style:{backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))"}}),this.rgba&&h$1("div",{class:`${e}-color-picker-handle`,style:{width:HANDLE_SIZE,height:HANDLE_SIZE,borderRadius:RADIUS,left:`calc(${this.displayedSv[0]}% - ${RADIUS})`,bottom:`calc(${this.displayedSv[1]}% - ${RADIUS})`}},h$1("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:this.handleColor,borderRadius:RADIUS,width:HANDLE_SIZE,height:HANDLE_SIZE}})))}}),style$a=c$1([cB("color-picker",`
 display: inline-block;
 box-sizing: border-box;
 height: var(--n-height);
 font-size: var(--n-font-size);
 width: 100%;
 position: relative;
 `),cB("color-picker-panel",`
 margin: 4px 0;
 width: 240px;
 font-size: var(--n-panel-font-size);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition:
 box-shadow .3s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 `,[fadeInScaleUpTransition(),cB("input",`
 text-align: center;
 `)]),cB("color-picker-checkboard",`
 background: white; 
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[c$1("&::after",`
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 12px 12px;
 background-position: 0 0, 0 6px, 6px -6px, -6px 0px;
 background-repeat: repeat;
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),cB("color-picker-slider",`
 margin-bottom: 8px;
 position: relative;
 box-sizing: border-box;
 `,[cE("image",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `),c$1("&::after",`
 content: "";
 position: absolute;
 border-radius: inherit;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 pointer-events: none;
 `)]),cB("color-picker-handle",`
 z-index: 1;
 box-shadow: 0 0 2px 0 rgba(0, 0, 0, .45);
 position: absolute;
 background-color: white;
 overflow: hidden;
 `,[cE("fill",`
 box-sizing: border-box;
 border: 2px solid white;
 `)]),cB("color-picker-pallete",`
 height: 180px;
 position: relative;
 margin-bottom: 8px;
 cursor: crosshair;
 `,[cE("layer",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[cM("shadowed",`
 box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);
 `)])]),cB("color-picker-preview",`
 display: flex;
 `,[cE("sliders",`
 flex: 1 0 auto;
 `),cE("preview",`
 position: relative;
 height: 30px;
 width: 30px;
 margin: 0 0 8px 6px;
 border-radius: 50%;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 overflow: hidden;
 `),cE("fill",`
 display: block;
 width: 30px;
 height: 30px;
 `),cE("input",`
 position: absolute;
 top: 0;
 left: 0;
 width: 30px;
 height: 30px;
 opacity: 0;
 z-index: 1;
 `)]),cB("color-picker-input",`
 display: flex;
 align-items: center;
 `,[cB("input",`
 flex-grow: 1;
 flex-basis: 0;
 `),cE("mode",`
 width: 72px;
 text-align: center;
 `)]),cB("color-picker-control",`
 padding: 12px;
 `),cB("color-picker-action",`
 display: flex;
 margin-top: -4px;
 border-top: 1px solid var(--n-divider-color);
 padding: 8px 12px;
 justify-content: flex-end;
 `,[cB("button","margin-left: 8px;")]),cB("color-picker-trigger",`
 border: var(--n-border);
 height: 100%;
 box-sizing: border-box;
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 cursor: pointer;
 `,[cE("value",`
 white-space: nowrap;
 position: relative;
 `),cE("fill",`
 border-radius: var(--n-border-radius);
 position: absolute;
 display: flex;
 align-items: center;
 justify-content: center;
 left: 4px;
 right: 4px;
 top: 4px;
 bottom: 4px;
 `),cM("disabled","cursor: not-allowed"),cB("color-picker-checkboard",`
 border-radius: var(--n-border-radius);
 `,[c$1("&::after",`
 --n-block-size: calc((var(--n-height) - 8px) / 3);
 background-size: calc(var(--n-block-size) * 2) calc(var(--n-block-size) * 2);
 background-position: 0 0, 0 var(--n-block-size), var(--n-block-size) calc(-1 * var(--n-block-size)), calc(-1 * var(--n-block-size)) 0px; 
 `)])]),cB("color-picker-swatches",`
 display: grid;
 grid-gap: 8px;
 flex-wrap: wrap;
 position: relative;
 grid-template-columns: repeat(auto-fill, 18px);
 margin-top: 10px;
 `,[cB("color-picker-swatch",`
 width: 18px;
 height: 18px;
 background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);
 background-size: 8px 8px;
 background-position: 0px 0, 0px 4px, 4px -4px, -4px 0px;
 background-repeat: repeat;
 `,[cE("fill",`
 position: relative;
 width: 100%;
 height: 100%;
 border-radius: 3px;
 box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;
 cursor: pointer;
 `),c$1("&:focus",`
 outline: none;
 `,[cE("fill",[c$1("&::after",`
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 background: inherit;
 filter: blur(2px);
 content: "";
 `)])])])])]),colorPickerProps=Object.assign(Object.assign({},useTheme.props),{value:String,show:{type:Boolean,default:void 0},defaultShow:Boolean,defaultValue:String,modes:{type:Array,default:()=>["rgb","hex","hsl"]},placement:{type:String,default:"bottom-start"},to:useAdjustedTo.propTo,showAlpha:{type:Boolean,default:!0},showPreview:Boolean,swatches:Array,disabled:{type:Boolean,default:void 0},actions:{type:Array,default:null},internalActions:Array,size:String,renderLabel:Function,onComplete:Function,onConfirm:Function,onClear:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),NColorPicker=defineComponent({name:"ColorPicker",props:colorPickerProps,slots:Object,setup(e,{slots:n}){const r=ref(null);let o=null;const u=useFormItem(e),{mergedSizeRef:s,mergedDisabledRef:w}=u,{localeRef:g}=useLocale("global"),{mergedClsPrefixRef:v,namespaceRef:y,inlineThemeDisabled:m}=useConfig(e),d=useTheme("ColorPicker","-color-picker",style$a,colorPickerLight$1,e,v);provide(colorPickerInjectionKey,{themeRef:d,renderLabelRef:toRef(e,"renderLabel"),colorPickerSlots:n});const f=ref(e.defaultShow),x=useMergedState(toRef(e,"show"),f);function k(Oe){const{onUpdateShow:Ge,"onUpdate:show":Ie}=e;Ge&&call(Ge,Oe),Ie&&call(Ie,Oe),f.value=Oe}const{defaultValue:P}=e,S=ref(P===void 0?deriveDefaultValue(e.modes,e.showAlpha):P),E=useMergedState(toRef(e,"value"),S),M=ref([E.value]),T=ref(0),D=computed(()=>getModeFromValue(E.value)),{modes:I}=e,N=ref(getModeFromValue(E.value)||I[0]||"rgb");function O(){const{modes:Oe}=e,{value:Ge}=N,Ie=Oe.findIndex(je=>je===Ge);~Ie?N.value=Oe[(Ie+1)%Oe.length]:N.value="rgb"}let F,U,Y,Q,q,ne,J,re;const X=computed(()=>{const{value:Oe}=E;if(!Oe)return null;switch(D.value){case"hsv":return hsva(Oe);case"hsl":return[F,U,Y,re]=hsla(Oe),[...hsl2hsv(F,U,Y),re];case"rgb":case"hex":return[q,ne,J,re]=rgba(Oe),[...rgb2hsv(q,ne,J),re]}}),j=computed(()=>{const{value:Oe}=E;if(!Oe)return null;switch(D.value){case"rgb":case"hex":return rgba(Oe);case"hsv":return[F,U,Q,re]=hsva(Oe),[...hsv2rgb(F,U,Q),re];case"hsl":return[F,U,Y,re]=hsla(Oe),[...hsl2rgb(F,U,Y),re]}}),Z=computed(()=>{const{value:Oe}=E;if(!Oe)return null;switch(D.value){case"hsl":return hsla(Oe);case"hsv":return[F,U,Q,re]=hsva(Oe),[...hsv2hsl(F,U,Q),re];case"rgb":case"hex":return[q,ne,J,re]=rgba(Oe),[...rgb2hsl(q,ne,J),re]}}),W=computed(()=>{switch(N.value){case"rgb":case"hex":return j.value;case"hsv":return X.value;case"hsl":return Z.value}}),te=ref(0),le=ref(1),oe=ref([0,0]);function Ee(Oe,Ge){const{value:Ie}=X,je=te.value,qe=Ie?Ie[3]:1;oe.value=[Oe,Ge];const{showAlpha:Ue}=e;switch(N.value){case"hsv":ke((Ue?toHsvaString:toHsvString)([je,Oe,Ge,qe]),"cursor");break;case"hsl":ke((Ue?toHslaString:toHslString)([...hsv2hsl(je,Oe,Ge),qe]),"cursor");break;case"rgb":ke((Ue?toRgbaString:toRgbString)([...hsv2rgb(je,Oe,Ge),qe]),"cursor");break;case"hex":ke((Ue?toHexaString:toHexString)([...hsv2rgb(je,Oe,Ge),qe]),"cursor");break}}function Ae(Oe){te.value=Oe;const{value:Ge}=X;if(!Ge)return;const[,Ie,je,qe]=Ge,{showAlpha:Ue}=e;switch(N.value){case"hsv":ke((Ue?toHsvaString:toHsvString)([Oe,Ie,je,qe]),"cursor");break;case"rgb":ke((Ue?toRgbaString:toRgbString)([...hsv2rgb(Oe,Ie,je),qe]),"cursor");break;case"hex":ke((Ue?toHexaString:toHexString)([...hsv2rgb(Oe,Ie,je),qe]),"cursor");break;case"hsl":ke((Ue?toHslaString:toHslString)([...hsv2hsl(Oe,Ie,je),qe]),"cursor");break}}function ve(Oe){switch(N.value){case"hsv":[F,U,Q]=X.value,ke(toHsvaString([F,U,Q,Oe]),"cursor");break;case"rgb":[q,ne,J]=j.value,ke(toRgbaString([q,ne,J,Oe]),"cursor");break;case"hex":[q,ne,J]=j.value,ke(toHexaString([q,ne,J,Oe]),"cursor");break;case"hsl":[F,U,Y]=Z.value,ke(toHslaString([F,U,Y,Oe]),"cursor");break}le.value=Oe}function ke(Oe,Ge){Ge==="cursor"?o=Oe:o=null;const{nTriggerFormChange:Ie,nTriggerFormInput:je}=u,{onUpdateValue:qe,"onUpdate:value":Ue}=e;qe&&call(qe,Oe),Ue&&call(Ue,Oe),Ie(),je(),S.value=Oe}function Ce(Oe){ke(Oe,"input"),nextTick(Pe)}function Pe(Oe=!0){const{value:Ge}=E;if(Ge){const{nTriggerFormChange:Ie,nTriggerFormInput:je}=u,{onComplete:qe}=e;qe&&qe(Ge);const{value:Ue}=M,{value:Je}=T;Oe&&(Ue.splice(Je+1,Ue.length,Ge),T.value=Je+1),Ie(),je()}}function Me(){const{value:Oe}=T;Oe-1<0||(ke(M.value[Oe-1],"input"),Pe(!1),T.value=Oe-1)}function Le(){const{value:Oe}=T;Oe<0||Oe+1>=M.value.length||(ke(M.value[Oe+1],"input"),Pe(!1),T.value=Oe+1)}function Te(){ke(null,"input");const{onClear:Oe}=e;Oe&&Oe(),k(!1)}function ye(){const{value:Oe}=E,{onConfirm:Ge}=e;Ge&&Ge(Oe),k(!1)}const _e=computed(()=>T.value>=1),we=computed(()=>{const{value:Oe}=M;return Oe.length>1&&T.value<Oe.length-1});watch(x,Oe=>{Oe||(M.value=[E.value],T.value=0)}),watchEffect(()=>{if(!(o&&o===E.value)){const{value:Oe}=X;Oe&&(te.value=Oe[0],le.value=Oe[3],oe.value=[Oe[1],Oe[2]])}o=null});const Se=computed(()=>{const{value:Oe}=s,{common:{cubicBezierEaseInOut:Ge},self:{textColor:Ie,color:je,panelFontSize:qe,boxShadow:Ue,border:Je,borderRadius:et,dividerColor:nt,[createKey("height",Oe)]:st,[createKey("fontSize",Oe)]:gt}}=d.value;return{"--n-bezier":Ge,"--n-text-color":Ie,"--n-color":je,"--n-panel-font-size":qe,"--n-font-size":gt,"--n-box-shadow":Ue,"--n-border":Je,"--n-border-radius":et,"--n-height":st,"--n-divider-color":nt}}),$e=m?useThemeClass("color-picker",computed(()=>s.value[0]),Se,e):void 0;function Be(){var Oe;const{value:Ge}=j,{value:Ie}=te,{internalActions:je,modes:qe,actions:Ue}=e,{value:Je}=d,{value:et}=v;return h$1("div",{class:[`${et}-color-picker-panel`,$e==null?void 0:$e.themeClass.value],onDragstart:nt=>{nt.preventDefault()},style:m?void 0:Se.value},h$1("div",{class:`${et}-color-picker-control`},h$1(Pallete,{clsPrefix:et,rgba:Ge,displayedHue:Ie,displayedSv:oe.value,onUpdateSV:Ee,onComplete:Pe}),h$1("div",{class:`${et}-color-picker-preview`},h$1("div",{class:`${et}-color-picker-preview__sliders`},h$1(HueSlider,{clsPrefix:et,hue:Ie,onUpdateHue:Ae,onComplete:Pe}),e.showAlpha?h$1(AlphaSlider,{clsPrefix:et,rgba:Ge,alpha:le.value,onUpdateAlpha:ve,onComplete:Pe}):null),e.showPreview?h$1(ColorPreview,{clsPrefix:et,mode:N.value,color:j.value&&toHexString(j.value),onUpdateColor:nt=>{ke(nt,"input")}}):null),h$1(ColorInput,{clsPrefix:et,showAlpha:e.showAlpha,mode:N.value,modes:qe,onUpdateMode:O,value:E.value,valueArr:W.value,onUpdateValue:Ce}),((Oe=e.swatches)===null||Oe===void 0?void 0:Oe.length)&&h$1(ColorPickerSwatches,{clsPrefix:et,mode:N.value,swatches:e.swatches,onUpdateColor:nt=>{ke(nt,"input")}})),Ue!=null&&Ue.length?h$1("div",{class:`${et}-color-picker-action`},Ue.includes("confirm")&&h$1(NButton,{size:"small",onClick:ye,theme:Je.peers.Button,themeOverrides:Je.peerOverrides.Button},{default:()=>g.value.confirm}),Ue.includes("clear")&&h$1(NButton,{size:"small",onClick:Te,disabled:!E.value,theme:Je.peers.Button,themeOverrides:Je.peerOverrides.Button},{default:()=>g.value.clear})):null,n.action?h$1("div",{class:`${et}-color-picker-action`},{default:n.action}):je?h$1("div",{class:`${et}-color-picker-action`},je.includes("undo")&&h$1(NButton,{size:"small",onClick:Me,disabled:!_e.value,theme:Je.peers.Button,themeOverrides:Je.peerOverrides.Button},{default:()=>g.value.undo}),je.includes("redo")&&h$1(NButton,{size:"small",onClick:Le,disabled:!we.value,theme:Je.peers.Button,themeOverrides:Je.peerOverrides.Button},{default:()=>g.value.redo})):null)}return{mergedClsPrefix:v,namespace:y,selfRef:r,hsla:Z,rgba:j,mergedShow:x,mergedDisabled:w,isMounted:isMounted(),adjustedTo:useAdjustedTo(e),mergedValue:E,handleTriggerClick(){k(!0)},handleClickOutside(Oe){var Ge;!((Ge=r.value)===null||Ge===void 0)&&Ge.contains(getPreciseEventTarget(Oe))||k(!1)},renderPanel:Be,cssVars:m?void 0:Se,themeClass:$e==null?void 0:$e.themeClass,onRender:$e==null?void 0:$e.onRender}},render(){const{mergedClsPrefix:e,onRender:n}=this;return n==null||n(),h$1("div",{class:[this.themeClass,`${e}-color-picker`],ref:"selfRef",style:this.cssVars},h$1(VBinder,null,{default:()=>[h$1(VTarget,null,{default:()=>h$1(ColorPickerTrigger,{clsPrefix:e,value:this.mergedValue,hsla:this.hsla,disabled:this.mergedDisabled,onClick:this.handleTriggerClick})}),h$1(VFollower,{placement:this.placement,show:this.mergedShow,containerClass:this.namespace,teleportDisabled:this.adjustedTo===useAdjustedTo.tdkey,to:this.adjustedTo},{default:()=>h$1(Transition,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?withDirectives(this.renderPanel(),[[clickoutside$1,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}}),configProviderProps={abstract:Boolean,bordered:{type:Boolean,default:void 0},clsPrefix:String,locale:Object,dateLocale:Object,namespace:String,rtl:Array,tag:{type:String,default:"div"},hljs:Object,katex:Object,theme:Object,themeOverrides:Object,componentOptions:Object,icons:Object,breakpoints:Object,preflightStyleDisabled:Boolean,styleMountTarget:Object,inlineThemeDisabled:{type:Boolean,default:void 0},as:{type:String,validator:()=>(warn("config-provider","`as` is deprecated, please use `tag` instead."),!0),default:void 0}},NConfigProvider=defineComponent({name:"ConfigProvider",alias:["App"],props:configProviderProps,setup(e){const n=inject(configProviderInjectionKey,null),r=computed(()=>{const{theme:P}=e;if(P===null)return;const S=n==null?void 0:n.mergedThemeRef.value;return P===void 0?S:S===void 0?P:Object.assign({},S,P)}),o=computed(()=>{const{themeOverrides:P}=e;if(P!==null){if(P===void 0)return n==null?void 0:n.mergedThemeOverridesRef.value;{const S=n==null?void 0:n.mergedThemeOverridesRef.value;return S===void 0?P:merge$3({},S,P)}}}),u=useMemo(()=>{const{namespace:P}=e;return P===void 0?n==null?void 0:n.mergedNamespaceRef.value:P}),s=useMemo(()=>{const{bordered:P}=e;return P===void 0?n==null?void 0:n.mergedBorderedRef.value:P}),w=computed(()=>{const{icons:P}=e;return P===void 0?n==null?void 0:n.mergedIconsRef.value:P}),g=computed(()=>{const{componentOptions:P}=e;return P!==void 0?P:n==null?void 0:n.mergedComponentPropsRef.value}),v=computed(()=>{const{clsPrefix:P}=e;return P!==void 0?P:n?n.mergedClsPrefixRef.value:defaultClsPrefix}),y=computed(()=>{var P;const{rtl:S}=e;if(S===void 0)return n==null?void 0:n.mergedRtlRef.value;const E={};for(const M of S)E[M.name]=markRaw(M),(P=M.peers)===null||P===void 0||P.forEach(T=>{T.name in E||(E[T.name]=markRaw(T))});return E}),m=computed(()=>e.breakpoints||(n==null?void 0:n.mergedBreakpointsRef.value)),d=e.inlineThemeDisabled||(n==null?void 0:n.inlineThemeDisabled),f=e.preflightStyleDisabled||(n==null?void 0:n.preflightStyleDisabled),x=e.styleMountTarget||(n==null?void 0:n.styleMountTarget),k=computed(()=>{const{value:P}=r,{value:S}=o,E=S&&Object.keys(S).length!==0,M=P==null?void 0:P.name;return M?E?`${M}-${murmur2(JSON.stringify(o.value))}`:M:E?murmur2(JSON.stringify(o.value)):""});return provide(configProviderInjectionKey,{mergedThemeHashRef:k,mergedBreakpointsRef:m,mergedRtlRef:y,mergedIconsRef:w,mergedComponentPropsRef:g,mergedBorderedRef:s,mergedNamespaceRef:u,mergedClsPrefixRef:v,mergedLocaleRef:computed(()=>{const{locale:P}=e;if(P!==null)return P===void 0?n==null?void 0:n.mergedLocaleRef.value:P}),mergedDateLocaleRef:computed(()=>{const{dateLocale:P}=e;if(P!==null)return P===void 0?n==null?void 0:n.mergedDateLocaleRef.value:P}),mergedHljsRef:computed(()=>{const{hljs:P}=e;return P===void 0?n==null?void 0:n.mergedHljsRef.value:P}),mergedKatexRef:computed(()=>{const{katex:P}=e;return P===void 0?n==null?void 0:n.mergedKatexRef.value:P}),mergedThemeRef:r,mergedThemeOverridesRef:o,inlineThemeDisabled:d||!1,preflightStyleDisabled:f||!1,styleMountTarget:x}),{mergedClsPrefix:v,mergedBordered:s,mergedNamespace:u,mergedTheme:r,mergedThemeOverrides:o}},render(){var e,n,r,o;return this.abstract?(o=(r=this.$slots).default)===null||o===void 0?void 0:o.call(r):h$1(this.as||this.tag,{class:`${this.mergedClsPrefix||defaultClsPrefix}-config-provider`},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e))}});function self$b(e){const{boxShadow2:n}=e;return{menuBoxShadow:n}}const popselectLight={name:"Popselect",common:commonLight,peers:{Popover:popoverLight$1,InternalSelectMenu:internalSelectMenuLight$1},self:self$b},popselectLight$1=popselectLight,popselectInjectionKey="n-popselect",style$9=cB("popselect-menu",`
 box-shadow: var(--n-menu-box-shadow);
`),panelProps={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},panelPropKeys=keysOf(panelProps),NPopselectPanel=defineComponent({name:"PopselectPanel",props:panelProps,setup(e){const n=inject(popselectInjectionKey),{mergedClsPrefixRef:r,inlineThemeDisabled:o}=useConfig(e),u=useTheme("Popselect","-pop-select",style$9,popselectLight$1,n.props,r),s=computed(()=>createTreeMate(e.options,createTmOptions("value","children")));function w(f,x){const{onUpdateValue:k,"onUpdate:value":P,onChange:S}=e;k&&call(k,f,x),P&&call(P,f,x),S&&call(S,f,x)}function g(f){y(f.key)}function v(f){!happensIn(f,"action")&&!happensIn(f,"empty")&&!happensIn(f,"header")&&f.preventDefault()}function y(f){const{value:{getNode:x}}=s;if(e.multiple)if(Array.isArray(e.value)){const k=[],P=[];let S=!0;e.value.forEach(E=>{if(E===f){S=!1;return}const M=x(E);M&&(k.push(M.key),P.push(M.rawNode))}),S&&(k.push(f),P.push(x(f).rawNode)),w(k,P)}else{const k=x(f);k&&w([f],[k.rawNode])}else if(e.value===f&&e.cancelable)w(null,null);else{const k=x(f);k&&w(f,k.rawNode);const{"onUpdate:show":P,onUpdateShow:S}=n.props;P&&call(P,!1),S&&call(S,!1),n.setShow(!1)}nextTick(()=>{n.syncPosition()})}watch(toRef(e,"options"),()=>{nextTick(()=>{n.syncPosition()})});const m=computed(()=>{const{self:{menuBoxShadow:f}}=u.value;return{"--n-menu-box-shadow":f}}),d=o?useThemeClass("select",void 0,m,n.props):void 0;return{mergedTheme:n.mergedThemeRef,mergedClsPrefix:r,treeMate:s,handleToggle:g,handleMenuMousedown:v,cssVars:o?void 0:m,themeClass:d==null?void 0:d.themeClass,onRender:d==null?void 0:d.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),h$1(NInternalSelectMenu,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{header:()=>{var n,r;return((r=(n=this.$slots).header)===null||r===void 0?void 0:r.call(n))||[]},action:()=>{var n,r;return((r=(n=this.$slots).action)===null||r===void 0?void 0:r.call(n))||[]},empty:()=>{var n,r;return((r=(n=this.$slots).empty)===null||r===void 0?void 0:r.call(n))||[]}})}}),popselectProps=Object.assign(Object.assign(Object.assign(Object.assign({},useTheme.props),omit(popoverBaseProps,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},popoverBaseProps.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),panelProps),NPopselect=defineComponent({name:"Popselect",props:popselectProps,slots:Object,inheritAttrs:!1,__popover__:!0,setup(e){const{mergedClsPrefixRef:n}=useConfig(e),r=useTheme("Popselect","-popselect",void 0,popselectLight$1,e,n),o=ref(null);function u(){var g;(g=o.value)===null||g===void 0||g.syncPosition()}function s(g){var v;(v=o.value)===null||v===void 0||v.setShow(g)}return provide(popselectInjectionKey,{props:e,mergedThemeRef:r,syncPosition:u,setShow:s}),Object.assign(Object.assign({},{syncPosition:u,setShow:s}),{popoverInstRef:o,mergedTheme:r})},render(){const{mergedTheme:e}=this,n={theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(r,o,u,s,w)=>{const{$attrs:g}=this;return h$1(NPopselectPanel,Object.assign({},g,{class:[g.class,r],style:[g.style,...u]},keep(this.$props,panelPropKeys),{ref:createRefSetter(o),onMouseenter:mergeEventHandlers([s,g.onMouseenter]),onMouseleave:mergeEventHandlers([w,g.onMouseleave])}),{header:()=>{var v,y;return(y=(v=this.$slots).header)===null||y===void 0?void 0:y.call(v)},action:()=>{var v,y;return(y=(v=this.$slots).action)===null||y===void 0?void 0:y.call(v)},empty:()=>{var v,y;return(y=(v=this.$slots).empty)===null||y===void 0?void 0:y.call(v)}})}};return h$1(NPopover,Object.assign({},omit(this.$props,panelPropKeys),n,{internalDeactivateImmediately:!0}),{trigger:()=>{var r,o;return(o=(r=this.$slots).default)===null||o===void 0?void 0:o.call(r)}})}});function self$a(e){const{boxShadow2:n}=e;return{menuBoxShadow:n}}const selectLight={name:"Select",common:commonLight,peers:{InternalSelection:internalSelectionLight$1,InternalSelectMenu:internalSelectMenuLight$1},self:self$a},selectLight$1=selectLight,style$8=c$1([cB("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 font-weight: var(--n-font-weight);
 `),cB("select-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[fadeInScaleUpTransition({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),selectProps=Object.assign(Object.assign({},useTheme.props),{to:useAdjustedTo.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},keyboard:{type:Boolean,default:!0},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,menuSize:{type:String},filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],ellipsisTagPopoverProps:Object,consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),NSelect=defineComponent({name:"Select",props:selectProps,slots:Object,setup(e){const{mergedClsPrefixRef:n,mergedBorderedRef:r,namespaceRef:o,inlineThemeDisabled:u}=useConfig(e),s=useTheme("Select","-select",style$8,selectLight$1,e,n),w=ref(e.defaultValue),g=toRef(e,"value"),v=useMergedState(g,w),y=ref(!1),m=ref(""),d=useCompitable(e,["items","options"]),f=ref([]),x=ref([]),k=computed(()=>x.value.concat(f.value).concat(d.value)),P=computed(()=>{const{filter:Fe}=e;if(Fe)return Fe;const{labelField:Ye,valueField:Ke}=e;return(Ze,ot)=>{if(!ot)return!1;const Qe=ot[Ye];if(typeof Qe=="string")return patternMatched(Ze,Qe);const at=ot[Ke];return typeof at=="string"?patternMatched(Ze,at):typeof at=="number"?patternMatched(Ze,String(at)):!1}}),S=computed(()=>{if(e.remote)return d.value;{const{value:Fe}=k,{value:Ye}=m;return!Ye.length||!e.filterable?Fe:filterOptions(Fe,P.value,Ye,e.childrenField)}}),E=computed(()=>{const{valueField:Fe,childrenField:Ye}=e,Ke=createTmOptions(Fe,Ye);return createTreeMate(S.value,Ke)}),M=computed(()=>createValOptMap(k.value,e.valueField,e.childrenField)),T=ref(!1),D=useMergedState(toRef(e,"show"),T),I=ref(null),N=ref(null),O=ref(null),{localeRef:F}=useLocale("Select"),U=computed(()=>{var Fe;return(Fe=e.placeholder)!==null&&Fe!==void 0?Fe:F.value.placeholder}),Y=[],Q=ref(new Map),q=computed(()=>{const{fallbackOption:Fe}=e;if(Fe===void 0){const{labelField:Ye,valueField:Ke}=e;return Ze=>({[Ye]:String(Ze),[Ke]:Ze})}return Fe===!1?!1:Ye=>Object.assign(Fe(Ye),{value:Ye})});function ne(Fe){const Ye=e.remote,{value:Ke}=Q,{value:Ze}=M,{value:ot}=q,Qe=[];return Fe.forEach(at=>{if(Ze.has(at))Qe.push(Ze.get(at));else if(Ye&&Ke.has(at))Qe.push(Ke.get(at));else if(ot){const rt=ot(at);rt&&Qe.push(rt)}}),Qe}const J=computed(()=>{if(e.multiple){const{value:Fe}=v;return Array.isArray(Fe)?ne(Fe):[]}return null}),re=computed(()=>{const{value:Fe}=v;return!e.multiple&&!Array.isArray(Fe)?Fe===null?null:ne([Fe])[0]||null:null}),X=useFormItem(e),{mergedSizeRef:j,mergedDisabledRef:Z,mergedStatusRef:W}=X;function te(Fe,Ye){const{onChange:Ke,"onUpdate:value":Ze,onUpdateValue:ot}=e,{nTriggerFormChange:Qe,nTriggerFormInput:at}=X;Ke&&call(Ke,Fe,Ye),ot&&call(ot,Fe,Ye),Ze&&call(Ze,Fe,Ye),w.value=Fe,Qe(),at()}function le(Fe){const{onBlur:Ye}=e,{nTriggerFormBlur:Ke}=X;Ye&&call(Ye,Fe),Ke()}function oe(){const{onClear:Fe}=e;Fe&&call(Fe)}function Ee(Fe){const{onFocus:Ye,showOnFocus:Ke}=e,{nTriggerFormFocus:Ze}=X;Ye&&call(Ye,Fe),Ze(),Ke&&Pe()}function Ae(Fe){const{onSearch:Ye}=e;Ye&&call(Ye,Fe)}function ve(Fe){const{onScroll:Ye}=e;Ye&&call(Ye,Fe)}function ke(){var Fe;const{remote:Ye,multiple:Ke}=e;if(Ye){const{value:Ze}=Q;if(Ke){const{valueField:ot}=e;(Fe=J.value)===null||Fe===void 0||Fe.forEach(Qe=>{Ze.set(Qe[ot],Qe)})}else{const ot=re.value;ot&&Ze.set(ot[e.valueField],ot)}}}function Ce(Fe){const{onUpdateShow:Ye,"onUpdate:show":Ke}=e;Ye&&call(Ye,Fe),Ke&&call(Ke,Fe),T.value=Fe}function Pe(){Z.value||(Ce(!0),T.value=!0,e.filterable&&He())}function Me(){Ce(!1)}function Le(){m.value="",x.value=Y}const Te=ref(!1);function ye(){e.filterable&&(Te.value=!0)}function _e(){e.filterable&&(Te.value=!1,D.value||Le())}function we(){Z.value||(D.value?e.filterable?He():Me():Pe())}function Se(Fe){var Ye,Ke;!((Ke=(Ye=O.value)===null||Ye===void 0?void 0:Ye.selfRef)===null||Ke===void 0)&&Ke.contains(Fe.relatedTarget)||(y.value=!1,le(Fe),Me())}function $e(Fe){Ee(Fe),y.value=!0}function Be(){y.value=!0}function Oe(Fe){var Ye;!((Ye=I.value)===null||Ye===void 0)&&Ye.$el.contains(Fe.relatedTarget)||(y.value=!1,le(Fe),Me())}function Ge(){var Fe;(Fe=I.value)===null||Fe===void 0||Fe.focus(),Me()}function Ie(Fe){var Ye;D.value&&(!((Ye=I.value)===null||Ye===void 0)&&Ye.$el.contains(getPreciseEventTarget(Fe))||Me())}function je(Fe){if(!Array.isArray(Fe))return[];if(q.value)return Array.from(Fe);{const{remote:Ye}=e,{value:Ke}=M;if(Ye){const{value:Ze}=Q;return Fe.filter(ot=>Ke.has(ot)||Ze.has(ot))}else return Fe.filter(Ze=>Ke.has(Ze))}}function qe(Fe){Ue(Fe.rawNode)}function Ue(Fe){if(Z.value)return;const{tag:Ye,remote:Ke,clearFilterAfterSelect:Ze,valueField:ot}=e;if(Ye&&!Ke){const{value:Qe}=x,at=Qe[0]||null;if(at){const rt=f.value;rt.length?rt.push(at):f.value=[at],x.value=Y}}if(Ke&&Q.value.set(Fe[ot],Fe),e.multiple){const Qe=je(v.value),at=Qe.findIndex(rt=>rt===Fe[ot]);if(~at){if(Qe.splice(at,1),Ye&&!Ke){const rt=Je(Fe[ot]);~rt&&(f.value.splice(rt,1),Ze&&(m.value=""))}}else Qe.push(Fe[ot]),Ze&&(m.value="");te(Qe,ne(Qe))}else{if(Ye&&!Ke){const Qe=Je(Fe[ot]);~Qe?f.value=[f.value[Qe]]:f.value=Y}wt(),Me(),te(Fe[ot],Fe)}}function Je(Fe){return f.value.findIndex(Ke=>Ke[e.valueField]===Fe)}function et(Fe){D.value||Pe();const{value:Ye}=Fe.target;m.value=Ye;const{tag:Ke,remote:Ze}=e;if(Ae(Ye),Ke&&!Ze){if(!Ye){x.value=Y;return}const{onCreate:ot}=e,Qe=ot?ot(Ye):{[e.labelField]:Ye,[e.valueField]:Ye},{valueField:at,labelField:rt}=e;d.value.some(ct=>ct[at]===Qe[at]||ct[rt]===Qe[rt])||f.value.some(ct=>ct[at]===Qe[at]||ct[rt]===Qe[rt])?x.value=Y:x.value=[Qe]}}function nt(Fe){Fe.stopPropagation();const{multiple:Ye}=e;!Ye&&e.filterable&&Me(),oe(),Ye?te([],[]):te(null,null)}function st(Fe){!happensIn(Fe,"action")&&!happensIn(Fe,"empty")&&!happensIn(Fe,"header")&&Fe.preventDefault()}function gt(Fe){ve(Fe)}function _t(Fe){var Ye,Ke,Ze,ot,Qe;if(!e.keyboard){Fe.preventDefault();return}switch(Fe.key){case" ":if(e.filterable)break;Fe.preventDefault();case"Enter":if(!(!((Ye=I.value)===null||Ye===void 0)&&Ye.isComposing)){if(D.value){const at=(Ke=O.value)===null||Ke===void 0?void 0:Ke.getPendingTmNode();at?qe(at):e.filterable||(Me(),wt())}else if(Pe(),e.tag&&Te.value){const at=x.value[0];if(at){const rt=at[e.valueField],{value:ct}=v;e.multiple&&Array.isArray(ct)&&ct.includes(rt)||Ue(at)}}}Fe.preventDefault();break;case"ArrowUp":if(Fe.preventDefault(),e.loading)return;D.value&&((Ze=O.value)===null||Ze===void 0||Ze.prev());break;case"ArrowDown":if(Fe.preventDefault(),e.loading)return;D.value?(ot=O.value)===null||ot===void 0||ot.next():Pe();break;case"Escape":D.value&&(markEventEffectPerformed(Fe),Me()),(Qe=I.value)===null||Qe===void 0||Qe.focus();break}}function wt(){var Fe;(Fe=I.value)===null||Fe===void 0||Fe.focus()}function He(){var Fe;(Fe=I.value)===null||Fe===void 0||Fe.focusInput()}function Ve(){var Fe;!D.value||(Fe=N.value)===null||Fe===void 0||Fe.syncPosition()}ke(),watch(toRef(e,"options"),ke);const ze={focus:()=>{var Fe;(Fe=I.value)===null||Fe===void 0||Fe.focus()},focusInput:()=>{var Fe;(Fe=I.value)===null||Fe===void 0||Fe.focusInput()},blur:()=>{var Fe;(Fe=I.value)===null||Fe===void 0||Fe.blur()},blurInput:()=>{var Fe;(Fe=I.value)===null||Fe===void 0||Fe.blurInput()}},Ne=computed(()=>{const{self:{menuBoxShadow:Fe}}=s.value;return{"--n-menu-box-shadow":Fe}}),We=u?useThemeClass("select",void 0,Ne,e):void 0;return Object.assign(Object.assign({},ze),{mergedStatus:W,mergedClsPrefix:n,mergedBordered:r,namespace:o,treeMate:E,isMounted:isMounted(),triggerRef:I,menuRef:O,pattern:m,uncontrolledShow:T,mergedShow:D,adjustedTo:useAdjustedTo(e),uncontrolledValue:w,mergedValue:v,followerRef:N,localizedPlaceholder:U,selectedOption:re,selectedOptions:J,mergedSize:j,mergedDisabled:Z,focused:y,activeWithoutMenuOpen:Te,inlineThemeDisabled:u,onTriggerInputFocus:ye,onTriggerInputBlur:_e,handleTriggerOrMenuResize:Ve,handleMenuFocus:Be,handleMenuBlur:Oe,handleMenuTabOut:Ge,handleTriggerClick:we,handleToggle:qe,handleDeleteOption:Ue,handlePatternInput:et,handleClear:nt,handleTriggerBlur:Se,handleTriggerFocus:$e,handleKeydown:_t,handleMenuAfterLeave:Le,handleMenuClickOutside:Ie,handleMenuScroll:gt,handleMenuKeydown:_t,handleMenuMousedown:st,mergedTheme:s,cssVars:u?void 0:Ne,themeClass:We==null?void 0:We.themeClass,onRender:We==null?void 0:We.onRender})},render(){return h$1("div",{class:`${this.mergedClsPrefix}-select`},h$1(VBinder,null,{default:()=>[h$1(VTarget,null,{default:()=>h$1(NInternalSelection,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var e,n;return[(n=(e=this.$slots).arrow)===null||n===void 0?void 0:n.call(e)]}})}),h$1(VFollower,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===useAdjustedTo.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>h$1(Transition,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,n,r;return this.mergedShow||this.displayDirective==="show"?((e=this.onRender)===null||e===void 0||e.call(this),withDirectives(h$1(NInternalSelectMenu,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,(n=this.menuProps)===null||n===void 0?void 0:n.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:this.menuSize,renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(r=this.menuProps)===null||r===void 0?void 0:r.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var o,u;return[(u=(o=this.$slots).empty)===null||u===void 0?void 0:u.call(o)]},header:()=>{var o,u;return[(u=(o=this.$slots).header)===null||u===void 0?void 0:u.call(o)]},action:()=>{var o,u;return[(u=(o=this.$slots).action)===null||u===void 0?void 0:u.call(o)]}}),this.displayDirective==="show"?[[vShow,this.mergedShow],[clickoutside$1,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[clickoutside$1,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}}),commonVars$3={padding:"8px 14px"};function self$9(e){const{borderRadius:n,boxShadow2:r,baseColor:o}=e;return Object.assign(Object.assign({},commonVars$3),{borderRadius:n,boxShadow:r,color:composite(o,"rgba(0, 0, 0, .85)"),textColor:o})}const tooltipLight={name:"Tooltip",common:commonLight,peers:{Popover:popoverLight$1},self:self$9},tooltipLight$1=tooltipLight,tooltipProps=Object.assign(Object.assign({},popoverBaseProps),useTheme.props),NTooltip=defineComponent({name:"Tooltip",props:tooltipProps,slots:Object,__popover__:!0,setup(e){const{mergedClsPrefixRef:n}=useConfig(e),r=useTheme("Tooltip","-tooltip",void 0,tooltipLight$1,e,n),o=ref(null);return Object.assign(Object.assign({},{syncPosition(){o.value.syncPosition()},setShow(s){o.value.setShow(s)}}),{popoverRef:o,mergedTheme:r,popoverThemeOverrides:computed(()=>r.value.self)})},render(){const{mergedTheme:e,internalExtraClass:n}=this;return h$1(NPopover,Object.assign(Object.assign({},this.$props),{theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:n.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),dialogProviderInjectionKey="n-dialog-provider",dialogApiInjectionKey="n-dialog-api",dialogReactiveListInjectionKey="n-dialog-reactive-list";function useDialog(){const e=inject(dialogApiInjectionKey,null);return e===null&&throwError("use-dialog","No outer <n-dialog-provider /> founded."),e}const commonVars$2={titleFontSize:"18px",padding:"16px 28px 20px 28px",iconSize:"28px",actionSpace:"12px",contentMargin:"8px 0 16px 0",iconMargin:"0 4px 0 0",iconMarginIconTop:"4px 0 8px 0",closeSize:"22px",closeIconSize:"18px",closeMargin:"20px 26px 0 0",closeMarginIconTop:"10px 16px 0 0"};function self$8(e){const{textColor1:n,textColor2:r,modalColor:o,closeIconColor:u,closeIconColorHover:s,closeIconColorPressed:w,closeColorHover:g,closeColorPressed:v,infoColor:y,successColor:m,warningColor:d,errorColor:f,primaryColor:x,dividerColor:k,borderRadius:P,fontWeightStrong:S,lineHeight:E,fontSize:M}=e;return Object.assign(Object.assign({},commonVars$2),{fontSize:M,lineHeight:E,border:`1px solid ${k}`,titleTextColor:n,textColor:r,color:o,closeColorHover:g,closeColorPressed:v,closeIconColor:u,closeIconColorHover:s,closeIconColorPressed:w,closeBorderRadius:P,iconColor:x,iconColorInfo:y,iconColorSuccess:m,iconColorWarning:d,iconColorError:f,borderRadius:P,titleFontWeight:S})}const dialogLight={name:"Dialog",common:commonLight,peers:{Button:buttonLight$1},self:self$8},dialogLight$1=dialogLight,dialogProps={icon:Function,type:{type:String,default:"default"},title:[String,Function],closable:{type:Boolean,default:!0},negativeText:String,positiveText:String,positiveButtonProps:Object,negativeButtonProps:Object,content:[String,Function],action:Function,showIcon:{type:Boolean,default:!0},loading:Boolean,bordered:Boolean,iconPlacement:String,titleClass:[String,Array],titleStyle:[String,Object],contentClass:[String,Array],contentStyle:[String,Object],actionClass:[String,Array],actionStyle:[String,Object],onPositiveClick:Function,onNegativeClick:Function,onClose:Function},dialogPropKeys=keysOf(dialogProps),style$7=c$1([cB("dialog",`
 --n-icon-margin: var(--n-icon-margin-top) var(--n-icon-margin-right) var(--n-icon-margin-bottom) var(--n-icon-margin-left);
 word-break: break-word;
 line-height: var(--n-line-height);
 position: relative;
 background: var(--n-color);
 color: var(--n-text-color);
 box-sizing: border-box;
 margin: auto;
 border-radius: var(--n-border-radius);
 padding: var(--n-padding);
 transition: 
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `,[cE("icon",{color:"var(--n-icon-color)"}),cM("bordered",{border:"var(--n-border)"}),cM("icon-top",[cE("close",{margin:"var(--n-close-margin)"}),cE("icon",{margin:"var(--n-icon-margin)"}),cE("content",{textAlign:"center"}),cE("title",{justifyContent:"center"}),cE("action",{justifyContent:"center"})]),cM("icon-left",[cE("icon",{margin:"var(--n-icon-margin)"}),cM("closable",[cE("title",`
 padding-right: calc(var(--n-close-size) + 6px);
 `)])]),cE("close",`
 position: absolute;
 right: 0;
 top: 0;
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 z-index: 1;
 `),cE("content",`
 font-size: var(--n-font-size);
 margin: var(--n-content-margin);
 position: relative;
 word-break: break-word;
 `,[cM("last","margin-bottom: 0;")]),cE("action",`
 display: flex;
 justify-content: flex-end;
 `,[c$1("> *:not(:last-child)",`
 margin-right: var(--n-action-space);
 `)]),cE("icon",`
 font-size: var(--n-icon-size);
 transition: color .3s var(--n-bezier);
 `),cE("title",`
 transition: color .3s var(--n-bezier);
 display: flex;
 align-items: center;
 font-size: var(--n-title-font-size);
 font-weight: var(--n-title-font-weight);
 color: var(--n-title-text-color);
 `),cB("dialog-icon-container",`
 display: flex;
 justify-content: center;
 `)]),insideModal(cB("dialog",`
 width: 446px;
 max-width: calc(100vw - 32px);
 `)),cB("dialog",[asModal(`
 width: 446px;
 max-width: calc(100vw - 32px);
 `)])]),iconRenderMap$2={default:()=>h$1(InfoIcon,null),info:()=>h$1(InfoIcon,null),success:()=>h$1(SuccessIcon,null),warning:()=>h$1(WarningIcon,null),error:()=>h$1(ErrorIcon,null)},NDialog=defineComponent({name:"Dialog",alias:["NimbusConfirmCard","Confirm"],props:Object.assign(Object.assign({},useTheme.props),dialogProps),slots:Object,setup(e){const{mergedComponentPropsRef:n,mergedClsPrefixRef:r,inlineThemeDisabled:o,mergedRtlRef:u}=useConfig(e),s=useRtl("Dialog",u,r),w=computed(()=>{var x,k;const{iconPlacement:P}=e;return P||((k=(x=n==null?void 0:n.value)===null||x===void 0?void 0:x.Dialog)===null||k===void 0?void 0:k.iconPlacement)||"left"});function g(x){const{onPositiveClick:k}=e;k&&k(x)}function v(x){const{onNegativeClick:k}=e;k&&k(x)}function y(){const{onClose:x}=e;x&&x()}const m=useTheme("Dialog","-dialog",style$7,dialogLight$1,e,r),d=computed(()=>{const{type:x}=e,k=w.value,{common:{cubicBezierEaseInOut:P},self:{fontSize:S,lineHeight:E,border:M,titleTextColor:T,textColor:D,color:I,closeBorderRadius:N,closeColorHover:O,closeColorPressed:F,closeIconColor:U,closeIconColorHover:Y,closeIconColorPressed:Q,closeIconSize:q,borderRadius:ne,titleFontWeight:J,titleFontSize:re,padding:X,iconSize:j,actionSpace:Z,contentMargin:W,closeSize:te,[k==="top"?"iconMarginIconTop":"iconMargin"]:le,[k==="top"?"closeMarginIconTop":"closeMargin"]:oe,[createKey("iconColor",x)]:Ee}}=m.value,Ae=getMargin(le);return{"--n-font-size":S,"--n-icon-color":Ee,"--n-bezier":P,"--n-close-margin":oe,"--n-icon-margin-top":Ae.top,"--n-icon-margin-right":Ae.right,"--n-icon-margin-bottom":Ae.bottom,"--n-icon-margin-left":Ae.left,"--n-icon-size":j,"--n-close-size":te,"--n-close-icon-size":q,"--n-close-border-radius":N,"--n-close-color-hover":O,"--n-close-color-pressed":F,"--n-close-icon-color":U,"--n-close-icon-color-hover":Y,"--n-close-icon-color-pressed":Q,"--n-color":I,"--n-text-color":D,"--n-border-radius":ne,"--n-padding":X,"--n-line-height":E,"--n-border":M,"--n-content-margin":W,"--n-title-font-size":re,"--n-title-font-weight":J,"--n-title-text-color":T,"--n-action-space":Z}}),f=o?useThemeClass("dialog",computed(()=>`${e.type[0]}${w.value[0]}`),d,e):void 0;return{mergedClsPrefix:r,rtlEnabled:s,mergedIconPlacement:w,mergedTheme:m,handlePositiveClick:g,handleNegativeClick:v,handleCloseClick:y,cssVars:o?void 0:d,themeClass:f==null?void 0:f.themeClass,onRender:f==null?void 0:f.onRender}},render(){var e;const{bordered:n,mergedIconPlacement:r,cssVars:o,closable:u,showIcon:s,title:w,content:g,action:v,negativeText:y,positiveText:m,positiveButtonProps:d,negativeButtonProps:f,handlePositiveClick:x,handleNegativeClick:k,mergedTheme:P,loading:S,type:E,mergedClsPrefix:M}=this;(e=this.onRender)===null||e===void 0||e.call(this);const T=s?h$1(NBaseIcon,{clsPrefix:M,class:`${M}-dialog__icon`},{default:()=>resolveWrappedSlot(this.$slots.icon,I=>I||(this.icon?render(this.icon):iconRenderMap$2[this.type]()))}):null,D=resolveWrappedSlot(this.$slots.action,I=>I||m||y||v?h$1("div",{class:[`${M}-dialog__action`,this.actionClass],style:this.actionStyle},I||(v?[render(v)]:[this.negativeText&&h$1(NButton,Object.assign({theme:P.peers.Button,themeOverrides:P.peerOverrides.Button,ghost:!0,size:"small",onClick:k},f),{default:()=>render(this.negativeText)}),this.positiveText&&h$1(NButton,Object.assign({theme:P.peers.Button,themeOverrides:P.peerOverrides.Button,size:"small",type:E==="default"?"primary":E,disabled:S,loading:S,onClick:x},d),{default:()=>render(this.positiveText)})])):null);return h$1("div",{class:[`${M}-dialog`,this.themeClass,this.closable&&`${M}-dialog--closable`,`${M}-dialog--icon-${r}`,n&&`${M}-dialog--bordered`,this.rtlEnabled&&`${M}-dialog--rtl`],style:o,role:"dialog"},u?resolveWrappedSlot(this.$slots.close,I=>{const N=[`${M}-dialog__close`,this.rtlEnabled&&`${M}-dialog--rtl`];return I?h$1("div",{class:N},I):h$1(NBaseClose,{clsPrefix:M,class:N,onClick:this.handleCloseClick})}):null,s&&r==="top"?h$1("div",{class:`${M}-dialog-icon-container`},T):null,h$1("div",{class:[`${M}-dialog__title`,this.titleClass],style:this.titleStyle},s&&r==="left"?T:null,resolveSlot(this.$slots.header,()=>[render(w)])),h$1("div",{class:[`${M}-dialog__content`,D?"":`${M}-dialog__content--last`,this.contentClass],style:this.contentStyle},resolveSlot(this.$slots.default,()=>[render(g)])),D)}});function self$7(e){const{modalColor:n,textColor2:r,boxShadow3:o}=e;return{color:n,textColor:r,boxShadow:o}}const modalLight={name:"Modal",common:commonLight,peers:{Scrollbar:scrollbarLight$1,Dialog:dialogLight$1,Card:cardLight$1},self:self$7},modalLight$1=modalLight,modalProviderInjectionKey="n-modal-provider",modalApiInjectionKey="n-modal-api",modalReactiveListInjectionKey="n-modal-reactive-list";function useModal(){const e=inject(modalApiInjectionKey,null);return e===null&&throwError("use-modal","No outer <n-modal-provider /> founded."),e}const DRAGGABLE_CLASS="n-draggable";function useDragModal(e,n){let r;const o=computed(()=>e.value!==!1),u=computed(()=>o.value?DRAGGABLE_CLASS:""),s=computed(()=>{const v=e.value;return v===!0||v===!1?!0:v?v.bounds!=="none":!0});function w(v){const y=v.querySelector(`.${DRAGGABLE_CLASS}`);if(!y||!u.value)return;let m=0,d=0,f=0,x=0,k=0,P=0,S;function E(D){D.preventDefault(),S=D;const{x:I,y:N,right:O,bottom:F}=v.getBoundingClientRect();d=I,x=N,m=window.innerWidth-O,f=window.innerHeight-F;const{left:U,top:Y}=v.style;k=+Y.slice(0,-2),P=+U.slice(0,-2)}function M(D){if(!S)return;const{clientX:I,clientY:N}=S;let O=D.clientX-I,F=D.clientY-N;s.value&&(O>m?O=m:-O>d&&(O=-d),F>f?F=f:-F>x&&(F=-x));const U=O+P,Y=F+k;v.style.top=`${Y}px`,v.style.left=`${U}px`}function T(){S=void 0,n.onEnd(v)}on$1("mousedown",y,E),on$1("mousemove",window,M),on$1("mouseup",window,T),r=()=>{off$1("mousedown",y,E),on$1("mousemove",window,M),on$1("mouseup",window,T)}}function g(){r&&(r(),r=void 0)}return onUnmounted(g),{stopDrag:g,startDrag:w,draggableRef:o,draggableClassRef:u}}const presetProps=Object.assign(Object.assign({},cardBaseProps),dialogProps),presetPropsKeys=keysOf(presetProps),NModalBodyWrapper=defineComponent({name:"ModalBody",inheritAttrs:!1,slots:Object,props:Object.assign(Object.assign({show:{type:Boolean,required:!0},preset:String,displayDirective:{type:String,required:!0},trapFocus:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!0},blockScroll:Boolean,draggable:{type:[Boolean,Object],default:!1}},presetProps),{renderMask:Function,onClickoutside:Function,onBeforeLeave:{type:Function,required:!0},onAfterLeave:{type:Function,required:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0},onClose:{type:Function,required:!0},onAfterEnter:Function,onEsc:Function}),setup(e){const n=ref(null),r=ref(null),o=ref(e.show),u=ref(null),s=ref(null),w=inject(modalInjectionKey);let g=null;watch(toRef(e,"show"),F=>{F&&(g=w.getMousePosition())},{immediate:!0});const{stopDrag:v,startDrag:y,draggableRef:m,draggableClassRef:d}=useDragModal(toRef(e,"draggable"),{onEnd:F=>{P(F)}}),f=computed(()=>normalizeClass([e.titleClass,d.value])),x=computed(()=>normalizeClass([e.headerClass,d.value]));watch(toRef(e,"show"),F=>{F&&(o.value=!0)}),useLockHtmlScroll(computed(()=>e.blockScroll&&o.value));function k(){if(w.transformOriginRef.value==="center")return"";const{value:F}=u,{value:U}=s;if(F===null||U===null)return"";if(r.value){const Y=r.value.containerScrollTop;return`${F}px ${U+Y}px`}return""}function P(F){if(w.transformOriginRef.value==="center"||!g||!r.value)return;const U=r.value.containerScrollTop,{offsetLeft:Y,offsetTop:Q}=F,q=g.y,ne=g.x;u.value=-(Y-ne),s.value=-(Q-q-U),F.style.transformOrigin=k()}function S(F){nextTick(()=>{P(F)})}function E(F){F.style.transformOrigin=k(),e.onBeforeLeave()}function M(F){const U=F;m.value&&y(U),e.onAfterEnter&&e.onAfterEnter(U)}function T(){o.value=!1,u.value=null,s.value=null,v(),e.onAfterLeave()}function D(){const{onClose:F}=e;F&&F()}function I(){e.onNegativeClick()}function N(){e.onPositiveClick()}const O=ref(null);return watch(O,F=>{F&&nextTick(()=>{const U=F.el;U&&n.value!==U&&(n.value=U)})}),provide(modalBodyInjectionKey,n),provide(drawerBodyInjectionKey,null),provide(popoverBodyInjectionKey,null),{mergedTheme:w.mergedThemeRef,appear:w.appearRef,isMounted:w.isMountedRef,mergedClsPrefix:w.mergedClsPrefixRef,bodyRef:n,scrollbarRef:r,draggableClass:d,displayed:o,childNodeRef:O,cardHeaderClass:x,dialogTitleClass:f,handlePositiveClick:N,handleNegativeClick:I,handleCloseClick:D,handleAfterEnter:M,handleAfterLeave:T,handleBeforeLeave:E,handleEnter:S}},render(){const{$slots:e,$attrs:n,handleEnter:r,handleAfterEnter:o,handleAfterLeave:u,handleBeforeLeave:s,preset:w,mergedClsPrefix:g}=this;let v=null;if(!w){if(v=getFirstSlotVNodeWithTypedProps("default",e.default,{draggableClass:this.draggableClass}),!v){warn("modal","default slot is empty");return}v=cloneVNode(v),v.props=mergeProps({class:`${g}-modal`},n,v.props||{})}return this.displayDirective==="show"||this.displayed||this.show?withDirectives(h$1("div",{role:"none",class:`${g}-modal-body-wrapper`},h$1(NScrollbar,{ref:"scrollbarRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentClass:`${g}-modal-scroll-content`},{default:()=>{var y;return[(y=this.renderMask)===null||y===void 0?void 0:y.call(this),h$1(FocusTrap,{disabled:!this.trapFocus,active:this.show,onEsc:this.onEsc,autoFocus:this.autoFocus},{default:()=>{var m;return h$1(Transition,{name:"fade-in-scale-up-transition",appear:(m=this.appear)!==null&&m!==void 0?m:this.isMounted,onEnter:r,onAfterEnter:o,onAfterLeave:u,onBeforeLeave:s},{default:()=>{const d=[[vShow,this.show]],{onClickoutside:f}=this;return f&&d.push([clickoutside$1,this.onClickoutside,void 0,{capture:!0}]),withDirectives(this.preset==="confirm"||this.preset==="dialog"?h$1(NDialog,Object.assign({},this.$attrs,{class:[`${g}-modal`,this.$attrs.class],ref:"bodyRef",theme:this.mergedTheme.peers.Dialog,themeOverrides:this.mergedTheme.peerOverrides.Dialog},keep(this.$props,dialogPropKeys),{titleClass:this.dialogTitleClass,"aria-modal":"true"}),e):this.preset==="card"?h$1(NCard,Object.assign({},this.$attrs,{ref:"bodyRef",class:[`${g}-modal`,this.$attrs.class],theme:this.mergedTheme.peers.Card,themeOverrides:this.mergedTheme.peerOverrides.Card},keep(this.$props,cardBasePropKeys),{headerClass:this.cardHeaderClass,"aria-modal":"true",role:"dialog"}),e):this.childNodeRef=v,d)}})}})]}})),[[vShow,this.displayDirective==="if"||this.displayed||this.show]]):null}}),style$6=c$1([cB("modal-container",`
 position: fixed;
 left: 0;
 top: 0;
 height: 0;
 width: 0;
 display: flex;
 `),cB("modal-mask",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 background-color: rgba(0, 0, 0, .4);
 `,[fadeInTransition({enterDuration:".25s",leaveDuration:".25s",enterCubicBezier:"var(--n-bezier-ease-out)",leaveCubicBezier:"var(--n-bezier-ease-out)"})]),cB("modal-body-wrapper",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: visible;
 `,[cB("modal-scroll-content",`
 min-height: 100%;
 display: flex;
 position: relative;
 `)]),cB("modal",`
 position: relative;
 align-self: center;
 color: var(--n-text-color);
 margin: auto;
 box-shadow: var(--n-box-shadow);
 `,[fadeInScaleUpTransition({duration:".25s",enterScale:".5"}),c$1(`.${DRAGGABLE_CLASS}`,`
 cursor: move;
 user-select: none;
 `)])]),modalProps=Object.assign(Object.assign(Object.assign(Object.assign({},useTheme.props),{show:Boolean,unstableShowMask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},preset:String,to:[String,Object],displayDirective:{type:String,default:"if"},transformOrigin:{type:String,default:"mouse"},zIndex:Number,autoFocus:{type:Boolean,default:!0},trapFocus:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!0}}),presetProps),{draggable:[Boolean,Object],onEsc:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onBeforeLeave:Function,onAfterLeave:Function,onClose:Function,onPositiveClick:Function,onNegativeClick:Function,onMaskClick:Function,internalDialog:Boolean,internalModal:Boolean,internalAppear:{type:Boolean,default:void 0},overlayStyle:[String,Object],onBeforeHide:Function,onAfterHide:Function,onHide:Function}),NModal=defineComponent({name:"Modal",inheritAttrs:!1,props:modalProps,slots:Object,setup(e){const n=ref(null),{mergedClsPrefixRef:r,namespaceRef:o,inlineThemeDisabled:u}=useConfig(e),s=useTheme("Modal","-modal",style$6,modalLight$1,e,r),w=useClicked(64),g=useClickPosition(),v=isMounted(),y=e.internalDialog?inject(dialogProviderInjectionKey,null):null,m=e.internalModal?inject(modalProviderInjectionKey$1,null):null,d=useIsComposing();function f(N){const{onUpdateShow:O,"onUpdate:show":F,onHide:U}=e;O&&call(O,N),F&&call(F,N),U&&!N&&U(N)}function x(){const{onClose:N}=e;N?Promise.resolve(N()).then(O=>{O!==!1&&f(!1)}):f(!1)}function k(){const{onPositiveClick:N}=e;N?Promise.resolve(N()).then(O=>{O!==!1&&f(!1)}):f(!1)}function P(){const{onNegativeClick:N}=e;N?Promise.resolve(N()).then(O=>{O!==!1&&f(!1)}):f(!1)}function S(){const{onBeforeLeave:N,onBeforeHide:O}=e;N&&call(N),O&&O()}function E(){const{onAfterLeave:N,onAfterHide:O}=e;N&&call(N),O&&O()}function M(N){var O;const{onMaskClick:F}=e;F&&F(N),e.maskClosable&&!((O=n.value)===null||O===void 0)&&O.contains(getPreciseEventTarget(N))&&f(!1)}function T(N){var O;(O=e.onEsc)===null||O===void 0||O.call(e),e.show&&e.closeOnEsc&&eventEffectNotPerformed(N)&&(d.value||f(!1))}provide(modalInjectionKey,{getMousePosition:()=>{const N=y||m;if(N){const{clickedRef:O,clickedPositionRef:F}=N;if(O.value&&F.value)return F.value}return w.value?g.value:null},mergedClsPrefixRef:r,mergedThemeRef:s,isMountedRef:v,appearRef:toRef(e,"internalAppear"),transformOriginRef:toRef(e,"transformOrigin")});const D=computed(()=>{const{common:{cubicBezierEaseOut:N},self:{boxShadow:O,color:F,textColor:U}}=s.value;return{"--n-bezier-ease-out":N,"--n-box-shadow":O,"--n-color":F,"--n-text-color":U}}),I=u?useThemeClass("theme-class",void 0,D,e):void 0;return{mergedClsPrefix:r,namespace:o,isMounted:v,containerRef:n,presetProps:computed(()=>keep(e,presetPropsKeys)),handleEsc:T,handleAfterLeave:E,handleClickoutside:M,handleBeforeLeave:S,doUpdateShow:f,handleNegativeClick:P,handlePositiveClick:k,handleCloseClick:x,cssVars:u?void 0:D,themeClass:I==null?void 0:I.themeClass,onRender:I==null?void 0:I.onRender}},render(){const{mergedClsPrefix:e}=this;return h$1(LazyTeleport,{to:this.to,show:this.show},{default:()=>{var n;(n=this.onRender)===null||n===void 0||n.call(this);const{unstableShowMask:r}=this;return withDirectives(h$1("div",{role:"none",ref:"containerRef",class:[`${e}-modal-container`,this.themeClass,this.namespace],style:this.cssVars},h$1(NModalBodyWrapper,Object.assign({style:this.overlayStyle},this.$attrs,{ref:"bodyWrapper",displayDirective:this.displayDirective,show:this.show,preset:this.preset,autoFocus:this.autoFocus,trapFocus:this.trapFocus,draggable:this.draggable,blockScroll:this.blockScroll},this.presetProps,{onEsc:this.handleEsc,onClose:this.handleCloseClick,onNegativeClick:this.handleNegativeClick,onPositiveClick:this.handlePositiveClick,onBeforeLeave:this.handleBeforeLeave,onAfterEnter:this.onAfterEnter,onAfterLeave:this.handleAfterLeave,onClickoutside:r?void 0:this.handleClickoutside,renderMask:r?()=>{var o;return h$1(Transition,{name:"fade-in-transition",key:"mask",appear:(o=this.internalAppear)!==null&&o!==void 0?o:this.isMounted},{default:()=>this.show?h$1("div",{"aria-hidden":!0,ref:"containerRef",class:`${e}-modal-mask`,onClick:this.handleClickoutside}):null})}:void 0}),this.$slots)),[[zindexable$1,{zIndex:this.zIndex,enabled:this.show}]])}})}}),exposedDialogEnvProps=Object.assign(Object.assign({},dialogProps),{onAfterEnter:Function,onAfterLeave:Function,transformOrigin:String,blockScroll:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},onEsc:Function,autoFocus:{type:Boolean,default:!0},internalStyle:[String,Object],maskClosable:{type:Boolean,default:!0},onPositiveClick:Function,onNegativeClick:Function,onClose:Function,onMaskClick:Function,draggable:[Boolean,Object]}),NDialogEnvironment=defineComponent({name:"DialogEnvironment",props:Object.assign(Object.assign({},exposedDialogEnvProps),{internalKey:{type:String,required:!0},to:[String,Object],onInternalAfterLeave:{type:Function,required:!0}}),setup(e){const n=ref(!0);function r(){const{onInternalAfterLeave:m,internalKey:d,onAfterLeave:f}=e;m&&m(d),f&&f()}function o(m){const{onPositiveClick:d}=e;d?Promise.resolve(d(m)).then(f=>{f!==!1&&v()}):v()}function u(m){const{onNegativeClick:d}=e;d?Promise.resolve(d(m)).then(f=>{f!==!1&&v()}):v()}function s(){const{onClose:m}=e;m?Promise.resolve(m()).then(d=>{d!==!1&&v()}):v()}function w(m){const{onMaskClick:d,maskClosable:f}=e;d&&(d(m),f&&v())}function g(){const{onEsc:m}=e;m&&m()}function v(){n.value=!1}function y(m){n.value=m}return{show:n,hide:v,handleUpdateShow:y,handleAfterLeave:r,handleCloseClick:s,handleNegativeClick:u,handlePositiveClick:o,handleMaskClick:w,handleEsc:g}},render(){const{handlePositiveClick:e,handleUpdateShow:n,handleNegativeClick:r,handleCloseClick:o,handleAfterLeave:u,handleMaskClick:s,handleEsc:w,to:g,maskClosable:v,show:y}=this;return h$1(NModal,{show:y,onUpdateShow:n,onMaskClick:s,onEsc:w,to:g,maskClosable:v,onAfterEnter:this.onAfterEnter,onAfterLeave:u,closeOnEsc:this.closeOnEsc,blockScroll:this.blockScroll,autoFocus:this.autoFocus,transformOrigin:this.transformOrigin,draggable:this.draggable,internalAppear:!0,internalDialog:!0},{default:({draggableClass:m})=>h$1(NDialog,Object.assign({},keep(this.$props,dialogPropKeys),{titleClass:normalizeClass([this.titleClass,m]),style:this.internalStyle,onClose:o,onNegativeClick:r,onPositiveClick:e}))})}}),dialogProviderProps={injectionKey:String,to:[String,Object]},NDialogProvider=defineComponent({name:"DialogProvider",props:dialogProviderProps,setup(){const e=ref([]),n={};function r(g={}){const v=createId(),y=reactive(Object.assign(Object.assign({},g),{key:v,destroy:()=>{var m;(m=n[`n-dialog-${v}`])===null||m===void 0||m.hide()}}));return e.value.push(y),y}const o=["info","success","warning","error"].map(g=>v=>r(Object.assign(Object.assign({},v),{type:g})));function u(g){const{value:v}=e;v.splice(v.findIndex(y=>y.key===g),1)}function s(){Object.values(n).forEach(g=>{g==null||g.hide()})}const w={create:r,destroyAll:s,info:o[0],success:o[1],warning:o[2],error:o[3]};return provide(dialogApiInjectionKey,w),provide(dialogProviderInjectionKey,{clickedRef:useClicked(64),clickedPositionRef:useClickPosition()}),provide(dialogReactiveListInjectionKey,e),Object.assign(Object.assign({},w),{dialogList:e,dialogInstRefs:n,handleAfterLeave:u})},render(){var e,n;return h$1(Fragment,null,[this.dialogList.map(r=>h$1(NDialogEnvironment,omit(r,["destroy","style"],{internalStyle:r.style,to:this.to,ref:o=>{o===null?delete this.dialogInstRefs[`n-dialog-${r.key}`]:this.dialogInstRefs[`n-dialog-${r.key}`]=o},internalKey:r.key,onInternalAfterLeave:this.handleAfterLeave}))),(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e)])}}),loadingBarProviderInjectionKey="n-loading-bar",loadingBarApiInjectionKey="n-loading-bar-api";function self$6(e){const{primaryColor:n,errorColor:r}=e;return{colorError:r,colorLoading:n,height:"2px"}}const loadingBarLight={name:"LoadingBar",common:commonLight,self:self$6},loadingBarLight$1=loadingBarLight,style$5=cB("loading-bar-container",`
 z-index: 5999;
 position: fixed;
 top: 0;
 left: 0;
 right: 0;
 height: 2px;
`,[fadeInTransition({enterDuration:"0.3s",leaveDuration:"0.8s"}),cB("loading-bar",`
 width: 100%;
 transition:
 max-width 4s linear,
 background .2s linear;
 height: var(--n-height);
 `,[cM("starting",`
 background: var(--n-color-loading);
 `),cM("finishing",`
 background: var(--n-color-loading);
 transition:
 max-width .2s linear,
 background .2s linear;
 `),cM("error",`
 background: var(--n-color-error);
 transition:
 max-width .2s linear,
 background .2s linear;
 `)])]);var __awaiter$1=globalThis&&globalThis.__awaiter||function(e,n,r,o){function u(s){return s instanceof r?s:new r(function(w){w(s)})}return new(r||(r=Promise))(function(s,w){function g(m){try{y(o.next(m))}catch(d){w(d)}}function v(m){try{y(o.throw(m))}catch(d){w(d)}}function y(m){m.done?s(m.value):u(m.value).then(g,v)}y((o=o.apply(e,n||[])).next())})};function createClassName(e,n){return`${n}-loading-bar ${n}-loading-bar--${e}`}const NLoadingBar=defineComponent({name:"LoadingBar",props:{containerClass:String,containerStyle:[String,Object]},setup(){const{inlineThemeDisabled:e}=useConfig(),{props:n,mergedClsPrefixRef:r}=inject(loadingBarProviderInjectionKey),o=ref(null),u=ref(!1),s=ref(!1),w=ref(!1),g=ref(!1);let v=!1;const y=ref(!1),m=computed(()=>{const{loadingBarStyle:I}=n;return I?I[y.value?"error":"loading"]:""});function d(){return __awaiter$1(this,void 0,void 0,function*(){u.value=!1,w.value=!1,v=!1,y.value=!1,g.value=!0,yield nextTick(),g.value=!1})}function f(){return __awaiter$1(this,arguments,void 0,function*(I=0,N=80,O="starting"){if(s.value=!0,yield d(),v)return;w.value=!0,yield nextTick();const F=o.value;!F||(F.style.maxWidth=`${I}%`,F.style.transition="none",F.offsetWidth,F.className=createClassName(O,r.value),F.style.transition="",F.style.maxWidth=`${N}%`)})}function x(){return __awaiter$1(this,void 0,void 0,function*(){if(v||y.value)return;s.value&&(yield nextTick()),v=!0;const I=o.value;!I||(I.className=createClassName("finishing",r.value),I.style.maxWidth="100%",I.offsetWidth,w.value=!1)})}function k(){if(!(v||y.value))if(!w.value)f(100,100,"error").then(()=>{y.value=!0;const I=o.value;!I||(I.className=createClassName("error",r.value),I.offsetWidth,w.value=!1)});else{y.value=!0;const I=o.value;if(!I)return;I.className=createClassName("error",r.value),I.style.maxWidth="100%",I.offsetWidth,w.value=!1}}function P(){u.value=!0}function S(){u.value=!1}function E(){return __awaiter$1(this,void 0,void 0,function*(){yield d()})}const M=useTheme("LoadingBar","-loading-bar",style$5,loadingBarLight$1,n,r),T=computed(()=>{const{self:{height:I,colorError:N,colorLoading:O}}=M.value;return{"--n-height":I,"--n-color-loading":O,"--n-color-error":N}}),D=e?useThemeClass("loading-bar",void 0,T,n):void 0;return{mergedClsPrefix:r,loadingBarRef:o,started:s,loading:w,entering:u,transitionDisabled:g,start:f,error:k,finish:x,handleEnter:P,handleAfterEnter:S,handleAfterLeave:E,mergedLoadingBarStyle:m,cssVars:e?void 0:T,themeClass:D==null?void 0:D.themeClass,onRender:D==null?void 0:D.onRender}},render(){if(!this.started)return null;const{mergedClsPrefix:e}=this;return h$1(Transition,{name:"fade-in-transition",appear:!0,onEnter:this.handleEnter,onAfterEnter:this.handleAfterEnter,onAfterLeave:this.handleAfterLeave,css:!this.transitionDisabled},{default:()=>{var n;return(n=this.onRender)===null||n===void 0||n.call(this),withDirectives(h$1("div",{class:[`${e}-loading-bar-container`,this.themeClass,this.containerClass],style:this.containerStyle},h$1("div",{ref:"loadingBarRef",class:[`${e}-loading-bar`],style:[this.cssVars,this.mergedLoadingBarStyle]})),[[vShow,this.loading||!this.loading&&this.entering]])}})}}),loadingBarProviderProps=Object.assign(Object.assign({},useTheme.props),{to:{type:[String,Object,Boolean],default:void 0},containerClass:String,containerStyle:[String,Object],loadingBarStyle:{type:Object}}),NLoadingBarProvider=defineComponent({name:"LoadingBarProvider",props:loadingBarProviderProps,setup(e){const n=isMounted(),r=ref(null),o={start(){var s;n.value?(s=r.value)===null||s===void 0||s.start():nextTick(()=>{var w;(w=r.value)===null||w===void 0||w.start()})},error(){var s;n.value?(s=r.value)===null||s===void 0||s.error():nextTick(()=>{var w;(w=r.value)===null||w===void 0||w.error()})},finish(){var s;n.value?(s=r.value)===null||s===void 0||s.finish():nextTick(()=>{var w;(w=r.value)===null||w===void 0||w.finish()})}},{mergedClsPrefixRef:u}=useConfig(e);return provide(loadingBarApiInjectionKey,o),provide(loadingBarProviderInjectionKey,{props:e,mergedClsPrefixRef:u}),Object.assign(o,{loadingBarRef:r})},render(){var e,n;return h$1(Fragment,null,h$1(Teleport,{disabled:this.to===!1,to:this.to||"body"},h$1(NLoadingBar,{ref:"loadingBarRef",containerStyle:this.containerStyle,containerClass:this.containerClass})),(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e))}});function useLoadingBar(){const e=inject(loadingBarApiInjectionKey,null);return e===null&&throwError("use-loading-bar","No outer <n-loading-bar-provider /> founded."),e}const messageApiInjectionKey="n-message-api",messageProviderInjectionKey="n-message-provider",commonVariables={margin:"0 0 8px 0",padding:"10px 20px",maxWidth:"720px",minWidth:"420px",iconMargin:"0 10px 0 0",closeMargin:"0 0 0 10px",closeSize:"20px",closeIconSize:"16px",iconSize:"20px",fontSize:"14px"};function self$5(e){const{textColor2:n,closeIconColor:r,closeIconColorHover:o,closeIconColorPressed:u,infoColor:s,successColor:w,errorColor:g,warningColor:v,popoverColor:y,boxShadow2:m,primaryColor:d,lineHeight:f,borderRadius:x,closeColorHover:k,closeColorPressed:P}=e;return Object.assign(Object.assign({},commonVariables),{closeBorderRadius:x,textColor:n,textColorInfo:n,textColorSuccess:n,textColorError:n,textColorWarning:n,textColorLoading:n,color:y,colorInfo:y,colorSuccess:y,colorError:y,colorWarning:y,colorLoading:y,boxShadow:m,boxShadowInfo:m,boxShadowSuccess:m,boxShadowError:m,boxShadowWarning:m,boxShadowLoading:m,iconColor:n,iconColorInfo:s,iconColorSuccess:w,iconColorWarning:v,iconColorError:g,iconColorLoading:d,closeColorHover:k,closeColorPressed:P,closeIconColor:r,closeIconColorHover:o,closeIconColorPressed:u,closeColorHoverInfo:k,closeColorPressedInfo:P,closeIconColorInfo:r,closeIconColorHoverInfo:o,closeIconColorPressedInfo:u,closeColorHoverSuccess:k,closeColorPressedSuccess:P,closeIconColorSuccess:r,closeIconColorHoverSuccess:o,closeIconColorPressedSuccess:u,closeColorHoverError:k,closeColorPressedError:P,closeIconColorError:r,closeIconColorHoverError:o,closeIconColorPressedError:u,closeColorHoverWarning:k,closeColorPressedWarning:P,closeIconColorWarning:r,closeIconColorHoverWarning:o,closeIconColorPressedWarning:u,closeColorHoverLoading:k,closeColorPressedLoading:P,closeIconColorLoading:r,closeIconColorHoverLoading:o,closeIconColorPressedLoading:u,loadingColor:d,lineHeight:f,borderRadius:x})}const messageLight={name:"Message",common:commonLight,self:self$5},messageLight$1=messageLight,messageProps={icon:Function,type:{type:String,default:"info"},content:[String,Number,Function],showIcon:{type:Boolean,default:!0},closable:Boolean,keepAliveOnHover:Boolean,onClose:Function,onMouseenter:Function,onMouseleave:Function},style$4=c$1([cB("message-wrapper",`
 margin: var(--n-margin);
 z-index: 0;
 transform-origin: top center;
 display: flex;
 `,[fadeInHeightExpandTransition({overflow:"visible",originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.85)"}})]),cB("message",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier),
 margin-bottom .3s var(--n-bezier);
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 flex-wrap: nowrap;
 overflow: hidden;
 max-width: var(--n-max-width);
 color: var(--n-text-color);
 background-color: var(--n-color);
 box-shadow: var(--n-box-shadow);
 `,[cE("content",`
 display: inline-block;
 line-height: var(--n-line-height);
 font-size: var(--n-font-size);
 `),cE("icon",`
 position: relative;
 margin: var(--n-icon-margin);
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 flex-shrink: 0;
 `,[["default","info","success","warning","error","loading"].map(e=>cM(`${e}-type`,[c$1("> *",`
 color: var(--n-icon-color-${e});
 transition: color .3s var(--n-bezier);
 `)])),c$1("> *",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[iconSwitchTransition()])]),cE("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 flex-shrink: 0;
 `,[c$1("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),c$1("&:active",`
 color: var(--n-close-icon-color-pressed);
 `)])]),cB("message-container",`
 z-index: 6000;
 position: fixed;
 height: 0;
 overflow: visible;
 display: flex;
 flex-direction: column;
 align-items: center;
 `,[cM("top",`
 top: 12px;
 left: 0;
 right: 0;
 `),cM("top-left",`
 top: 12px;
 left: 12px;
 right: 0;
 align-items: flex-start;
 `),cM("top-right",`
 top: 12px;
 left: 0;
 right: 12px;
 align-items: flex-end;
 `),cM("bottom",`
 bottom: 4px;
 left: 0;
 right: 0;
 justify-content: flex-end;
 `),cM("bottom-left",`
 bottom: 4px;
 left: 12px;
 right: 0;
 justify-content: flex-end;
 align-items: flex-start;
 `),cM("bottom-right",`
 bottom: 4px;
 left: 0;
 right: 12px;
 justify-content: flex-end;
 align-items: flex-end;
 `)])]),iconRenderMap$1={info:()=>h$1(InfoIcon,null),success:()=>h$1(SuccessIcon,null),warning:()=>h$1(WarningIcon,null),error:()=>h$1(ErrorIcon,null),default:()=>null},NMessage=defineComponent({name:"Message",props:Object.assign(Object.assign({},messageProps),{render:Function}),setup(e){const{inlineThemeDisabled:n,mergedRtlRef:r}=useConfig(e),{props:o,mergedClsPrefixRef:u}=inject(messageProviderInjectionKey),s=useRtl("Message",r,u),w=useTheme("Message","-message",style$4,messageLight$1,o,u),g=computed(()=>{const{type:y}=e,{common:{cubicBezierEaseInOut:m},self:{padding:d,margin:f,maxWidth:x,iconMargin:k,closeMargin:P,closeSize:S,iconSize:E,fontSize:M,lineHeight:T,borderRadius:D,iconColorInfo:I,iconColorSuccess:N,iconColorWarning:O,iconColorError:F,iconColorLoading:U,closeIconSize:Y,closeBorderRadius:Q,[createKey("textColor",y)]:q,[createKey("boxShadow",y)]:ne,[createKey("color",y)]:J,[createKey("closeColorHover",y)]:re,[createKey("closeColorPressed",y)]:X,[createKey("closeIconColor",y)]:j,[createKey("closeIconColorPressed",y)]:Z,[createKey("closeIconColorHover",y)]:W}}=w.value;return{"--n-bezier":m,"--n-margin":f,"--n-padding":d,"--n-max-width":x,"--n-font-size":M,"--n-icon-margin":k,"--n-icon-size":E,"--n-close-icon-size":Y,"--n-close-border-radius":Q,"--n-close-size":S,"--n-close-margin":P,"--n-text-color":q,"--n-color":J,"--n-box-shadow":ne,"--n-icon-color-info":I,"--n-icon-color-success":N,"--n-icon-color-warning":O,"--n-icon-color-error":F,"--n-icon-color-loading":U,"--n-close-color-hover":re,"--n-close-color-pressed":X,"--n-close-icon-color":j,"--n-close-icon-color-pressed":Z,"--n-close-icon-color-hover":W,"--n-line-height":T,"--n-border-radius":D}}),v=n?useThemeClass("message",computed(()=>e.type[0]),g,{}):void 0;return{mergedClsPrefix:u,rtlEnabled:s,messageProviderProps:o,handleClose(){var y;(y=e.onClose)===null||y===void 0||y.call(e)},cssVars:n?void 0:g,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender,placement:o.placement}},render(){const{render:e,type:n,closable:r,content:o,mergedClsPrefix:u,cssVars:s,themeClass:w,onRender:g,icon:v,handleClose:y,showIcon:m}=this;g==null||g();let d;return h$1("div",{class:[`${u}-message-wrapper`,w],onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave,style:[{alignItems:this.placement.startsWith("top")?"flex-start":"flex-end"},s]},e?e(this.$props):h$1("div",{class:[`${u}-message ${u}-message--${n}-type`,this.rtlEnabled&&`${u}-message--rtl`]},(d=createIconVNode(v,n,u))&&m?h$1("div",{class:`${u}-message__icon ${u}-message__icon--${n}-type`},h$1(NIconSwitchTransition,null,{default:()=>d})):null,h$1("div",{class:`${u}-message__content`},render(o)),r?h$1(NBaseClose,{clsPrefix:u,class:`${u}-message__close`,onClick:y,absolute:!0}):null))}});function createIconVNode(e,n,r){if(typeof e=="function")return e();{const o=n==="loading"?h$1(NBaseLoading,{clsPrefix:r,strokeWidth:24,scale:.85}):iconRenderMap$1[n]();return o?h$1(NBaseIcon,{clsPrefix:r,key:n},{default:()=>o}):null}}const MessageEnvironment=defineComponent({name:"MessageEnvironment",props:Object.assign(Object.assign({},messageProps),{duration:{type:Number,default:3e3},onAfterLeave:Function,onLeave:Function,internalKey:{type:String,required:!0},onInternalAfterLeave:Function,onHide:Function,onAfterHide:Function}),setup(e){let n=null;const r=ref(!0);onMounted(()=>{o()});function o(){const{duration:m}=e;m&&(n=window.setTimeout(w,m))}function u(m){m.currentTarget===m.target&&n!==null&&(window.clearTimeout(n),n=null)}function s(m){m.currentTarget===m.target&&o()}function w(){const{onHide:m}=e;r.value=!1,n&&(window.clearTimeout(n),n=null),m&&m()}function g(){const{onClose:m}=e;m&&m(),w()}function v(){const{onAfterLeave:m,onInternalAfterLeave:d,onAfterHide:f,internalKey:x}=e;m&&m(),d&&d(x),f&&f()}function y(){w()}return{show:r,hide:w,handleClose:g,handleAfterLeave:v,handleMouseleave:s,handleMouseenter:u,deactivate:y}},render(){return h$1(NFadeInExpandTransition,{appear:!0,onAfterLeave:this.handleAfterLeave,onLeave:this.onLeave},{default:()=>[this.show?h$1(NMessage,{content:this.content,type:this.type,icon:this.icon,showIcon:this.showIcon,closable:this.closable,onClose:this.handleClose,onMouseenter:this.keepAliveOnHover?this.handleMouseenter:void 0,onMouseleave:this.keepAliveOnHover?this.handleMouseleave:void 0}):null]})}}),messageProviderProps=Object.assign(Object.assign({},useTheme.props),{to:[String,Object],duration:{type:Number,default:3e3},keepAliveOnHover:Boolean,max:Number,placement:{type:String,default:"top"},closable:Boolean,containerClass:String,containerStyle:[String,Object]}),NMessageProvider=defineComponent({name:"MessageProvider",props:messageProviderProps,setup(e){const{mergedClsPrefixRef:n}=useConfig(e),r=ref([]),o=ref({}),u={create(v,y){return s(v,Object.assign({type:"default"},y))},info(v,y){return s(v,Object.assign(Object.assign({},y),{type:"info"}))},success(v,y){return s(v,Object.assign(Object.assign({},y),{type:"success"}))},warning(v,y){return s(v,Object.assign(Object.assign({},y),{type:"warning"}))},error(v,y){return s(v,Object.assign(Object.assign({},y),{type:"error"}))},loading(v,y){return s(v,Object.assign(Object.assign({},y),{type:"loading"}))},destroyAll:g};provide(messageProviderInjectionKey,{props:e,mergedClsPrefixRef:n}),provide(messageApiInjectionKey,u);function s(v,y){const m=createId(),d=reactive(Object.assign(Object.assign({},y),{content:v,key:m,destroy:()=>{var x;(x=o.value[m])===null||x===void 0||x.hide()}})),{max:f}=e;return f&&r.value.length>=f&&r.value.shift(),r.value.push(d),d}function w(v){r.value.splice(r.value.findIndex(y=>y.key===v),1),delete o.value[v]}function g(){Object.values(o.value).forEach(v=>{v.hide()})}return Object.assign({mergedClsPrefix:n,messageRefs:o,messageList:r,handleAfterLeave:w},u)},render(){var e,n,r;return h$1(Fragment,null,(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e),this.messageList.length?h$1(Teleport,{to:(r=this.to)!==null&&r!==void 0?r:"body"},h$1("div",{class:[`${this.mergedClsPrefix}-message-container`,`${this.mergedClsPrefix}-message-container--${this.placement}`,this.containerClass],key:"message-container",style:this.containerStyle},this.messageList.map(o=>h$1(MessageEnvironment,Object.assign({ref:u=>{u&&(this.messageRefs[o.key]=u)},internalKey:o.key,onInternalAfterLeave:this.handleAfterLeave},omit(o,["destroy"],void 0),{duration:o.duration===void 0?this.duration:o.duration,keepAliveOnHover:o.keepAliveOnHover===void 0?this.keepAliveOnHover:o.keepAliveOnHover,closable:o.closable===void 0?this.closable:o.closable}))))):null)}});function useMessage(){const e=inject(messageApiInjectionKey,null);return e===null&&throwError("use-message","No outer <n-message-provider /> founded. See prerequisite in https://www.naiveui.com/en-US/os-theme/components/message for more details. If you want to use `useMessage` outside setup, please check https://www.naiveui.com/zh-CN/os-theme/components/message#Q-&-A."),e}const NModalEnvironment=defineComponent({name:"ModalEnvironment",props:Object.assign(Object.assign({},modalProps),{internalKey:{type:String,required:!0},onInternalAfterLeave:{type:Function,required:!0}}),setup(e){const n=ref(!0);function r(){const{onInternalAfterLeave:m,internalKey:d,onAfterLeave:f}=e;m&&m(d),f&&f()}function o(){const{onPositiveClick:m}=e;m?Promise.resolve(m()).then(d=>{d!==!1&&v()}):v()}function u(){const{onNegativeClick:m}=e;m?Promise.resolve(m()).then(d=>{d!==!1&&v()}):v()}function s(){const{onClose:m}=e;m?Promise.resolve(m()).then(d=>{d!==!1&&v()}):v()}function w(m){const{onMaskClick:d,maskClosable:f}=e;d&&(d(m),f&&v())}function g(){const{onEsc:m}=e;m&&m()}function v(){n.value=!1}function y(m){n.value=m}return{show:n,hide:v,handleUpdateShow:y,handleAfterLeave:r,handleCloseClick:s,handleNegativeClick:u,handlePositiveClick:o,handleMaskClick:w,handleEsc:g}},render(){const{handleUpdateShow:e,handleAfterLeave:n,handleMaskClick:r,handleEsc:o,show:u}=this;return h$1(NModal,Object.assign({},this.$props,{show:u,onUpdateShow:e,onMaskClick:r,onEsc:o,onAfterLeave:n,internalAppear:!0,internalModal:!0}))}}),modalProviderProps={to:[String,Object]},NModalProvider=defineComponent({name:"ModalProvider",props:modalProviderProps,setup(){const e=ref([]),n={};function r(w={}){const g=createId(),v=reactive(Object.assign(Object.assign({},w),{key:g,destroy:()=>{var y;(y=n[`n-modal-${g}`])===null||y===void 0||y.hide()}}));return e.value.push(v),v}function o(w){const{value:g}=e;g.splice(g.findIndex(v=>v.key===w),1)}function u(){Object.values(n).forEach(w=>{w==null||w.hide()})}const s={create:r,destroyAll:u};return provide(modalApiInjectionKey,s),provide(modalProviderInjectionKey,{clickedRef:useClicked(64),clickedPositionRef:useClickPosition()}),provide(modalReactiveListInjectionKey,e),Object.assign(Object.assign({},s),{modalList:e,modalInstRefs:n,handleAfterLeave:o})},render(){var e,n;return h$1(Fragment,null,[this.modalList.map(r=>{var o;return h$1(NModalEnvironment,omit(r,["destroy"],{to:(o=r.to)!==null&&o!==void 0?o:this.to,ref:u=>{u===null?delete this.modalInstRefs[`n-modal-${r.key}`]:this.modalInstRefs[`n-modal-${r.key}`]=u},internalKey:r.key,onInternalAfterLeave:this.handleAfterLeave}))}),(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e)])}}),commonVars$1={closeMargin:"16px 12px",closeSize:"20px",closeIconSize:"16px",width:"365px",padding:"16px",titleFontSize:"16px",metaFontSize:"12px",descriptionFontSize:"12px"};function self$4(e){const{textColor2:n,successColor:r,infoColor:o,warningColor:u,errorColor:s,popoverColor:w,closeIconColor:g,closeIconColorHover:v,closeIconColorPressed:y,closeColorHover:m,closeColorPressed:d,textColor1:f,textColor3:x,borderRadius:k,fontWeightStrong:P,boxShadow2:S,lineHeight:E,fontSize:M}=e;return Object.assign(Object.assign({},commonVars$1),{borderRadius:k,lineHeight:E,fontSize:M,headerFontWeight:P,iconColor:n,iconColorSuccess:r,iconColorInfo:o,iconColorWarning:u,iconColorError:s,color:w,textColor:n,closeIconColor:g,closeIconColorHover:v,closeIconColorPressed:y,closeBorderRadius:k,closeColorHover:m,closeColorPressed:d,headerTextColor:f,descriptionTextColor:x,actionTextColor:n,boxShadow:S})}const notificationLight={name:"Notification",common:commonLight,peers:{Scrollbar:scrollbarLight$1},self:self$4},notificationLight$1=notificationLight,notificationProviderInjectionKey="n-notification-provider",NotificationContainer=defineComponent({name:"NotificationContainer",props:{scrollable:{type:Boolean,required:!0},placement:{type:String,required:!0}},setup(){const{mergedThemeRef:e,mergedClsPrefixRef:n,wipTransitionCountRef:r}=inject(notificationProviderInjectionKey),o=ref(null);return watchEffect(()=>{var u,s;r.value>0?(u=o==null?void 0:o.value)===null||u===void 0||u.classList.add("transitioning"):(s=o==null?void 0:o.value)===null||s===void 0||s.classList.remove("transitioning")}),{selfRef:o,mergedTheme:e,mergedClsPrefix:n,transitioning:r}},render(){const{$slots:e,scrollable:n,mergedClsPrefix:r,mergedTheme:o,placement:u}=this;return h$1("div",{ref:"selfRef",class:[`${r}-notification-container`,n&&`${r}-notification-container--scrollable`,`${r}-notification-container--${u}`]},n?h$1(NScrollbar,{theme:o.peers.Scrollbar,themeOverrides:o.peerOverrides.Scrollbar,contentStyle:{overflow:"hidden"}},e):e)}}),iconRenderMap={info:()=>h$1(InfoIcon,null),success:()=>h$1(SuccessIcon,null),warning:()=>h$1(WarningIcon,null),error:()=>h$1(ErrorIcon,null),default:()=>null},notificationProps={closable:{type:Boolean,default:!0},type:{type:String,default:"default"},avatar:Function,title:[String,Function],description:[String,Function],content:[String,Function],meta:[String,Function],action:[String,Function],onClose:{type:Function,required:!0},keepAliveOnHover:Boolean,onMouseenter:Function,onMouseleave:Function},notificationPropKeys=keysOf(notificationProps),Notification=defineComponent({name:"Notification",props:notificationProps,setup(e){const{mergedClsPrefixRef:n,mergedThemeRef:r,props:o}=inject(notificationProviderInjectionKey),{inlineThemeDisabled:u,mergedRtlRef:s}=useConfig(),w=useRtl("Notification",s,n),g=computed(()=>{const{type:y}=e,{self:{color:m,textColor:d,closeIconColor:f,closeIconColorHover:x,closeIconColorPressed:k,headerTextColor:P,descriptionTextColor:S,actionTextColor:E,borderRadius:M,headerFontWeight:T,boxShadow:D,lineHeight:I,fontSize:N,closeMargin:O,closeSize:F,width:U,padding:Y,closeIconSize:Q,closeBorderRadius:q,closeColorHover:ne,closeColorPressed:J,titleFontSize:re,metaFontSize:X,descriptionFontSize:j,[createKey("iconColor",y)]:Z},common:{cubicBezierEaseOut:W,cubicBezierEaseIn:te,cubicBezierEaseInOut:le}}=r.value,{left:oe,right:Ee,top:Ae,bottom:ve}=getMargin(Y);return{"--n-color":m,"--n-font-size":N,"--n-text-color":d,"--n-description-text-color":S,"--n-action-text-color":E,"--n-title-text-color":P,"--n-title-font-weight":T,"--n-bezier":le,"--n-bezier-ease-out":W,"--n-bezier-ease-in":te,"--n-border-radius":M,"--n-box-shadow":D,"--n-close-border-radius":q,"--n-close-color-hover":ne,"--n-close-color-pressed":J,"--n-close-icon-color":f,"--n-close-icon-color-hover":x,"--n-close-icon-color-pressed":k,"--n-line-height":I,"--n-icon-color":Z,"--n-close-margin":O,"--n-close-size":F,"--n-close-icon-size":Q,"--n-width":U,"--n-padding-left":oe,"--n-padding-right":Ee,"--n-padding-top":Ae,"--n-padding-bottom":ve,"--n-title-font-size":re,"--n-meta-font-size":X,"--n-description-font-size":j}}),v=u?useThemeClass("notification",computed(()=>e.type[0]),g,o):void 0;return{mergedClsPrefix:n,showAvatar:computed(()=>e.avatar||e.type!=="default"),handleCloseClick(){e.onClose()},rtlEnabled:w,cssVars:u?void 0:g,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender}},render(){var e;const{mergedClsPrefix:n}=this;return(e=this.onRender)===null||e===void 0||e.call(this),h$1("div",{class:[`${n}-notification-wrapper`,this.themeClass],onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave,style:this.cssVars},h$1("div",{class:[`${n}-notification`,this.rtlEnabled&&`${n}-notification--rtl`,this.themeClass,{[`${n}-notification--closable`]:this.closable,[`${n}-notification--show-avatar`]:this.showAvatar}],style:this.cssVars},this.showAvatar?h$1("div",{class:`${n}-notification__avatar`},this.avatar?render(this.avatar):this.type!=="default"?h$1(NBaseIcon,{clsPrefix:n},{default:()=>iconRenderMap[this.type]()}):null):null,this.closable?h$1(NBaseClose,{clsPrefix:n,class:`${n}-notification__close`,onClick:this.handleCloseClick}):null,h$1("div",{ref:"bodyRef",class:`${n}-notification-main`},this.title?h$1("div",{class:`${n}-notification-main__header`},render(this.title)):null,this.description?h$1("div",{class:`${n}-notification-main__description`},render(this.description)):null,this.content?h$1("pre",{class:`${n}-notification-main__content`},render(this.content)):null,this.meta||this.action?h$1("div",{class:`${n}-notification-main-footer`},this.meta?h$1("div",{class:`${n}-notification-main-footer__meta`},render(this.meta)):null,this.action?h$1("div",{class:`${n}-notification-main-footer__action`},render(this.action)):null):null)))}}),notificationEnvOptions=Object.assign(Object.assign({},notificationProps),{duration:Number,onClose:Function,onLeave:Function,onAfterEnter:Function,onAfterLeave:Function,onHide:Function,onAfterShow:Function,onAfterHide:Function}),NotificationEnvironment=defineComponent({name:"NotificationEnvironment",props:Object.assign(Object.assign({},notificationEnvOptions),{internalKey:{type:String,required:!0},onInternalAfterLeave:{type:Function,required:!0}}),setup(e){const{wipTransitionCountRef:n}=inject(notificationProviderInjectionKey),r=ref(!0);let o=null;function u(){r.value=!1,o&&window.clearTimeout(o)}function s(k){n.value++,nextTick(()=>{k.style.height=`${k.offsetHeight}px`,k.style.maxHeight="0",k.style.transition="none",k.offsetHeight,k.style.transition="",k.style.maxHeight=k.style.height})}function w(k){n.value--,k.style.height="",k.style.maxHeight="";const{onAfterEnter:P,onAfterShow:S}=e;P&&P(),S&&S()}function g(k){n.value++,k.style.maxHeight=`${k.offsetHeight}px`,k.style.height=`${k.offsetHeight}px`,k.offsetHeight}function v(k){const{onHide:P}=e;P&&P(),k.style.maxHeight="0",k.offsetHeight}function y(){n.value--;const{onAfterLeave:k,onInternalAfterLeave:P,onAfterHide:S,internalKey:E}=e;k&&k(),P(E),S&&S()}function m(){const{duration:k}=e;k&&(o=window.setTimeout(u,k))}function d(k){k.currentTarget===k.target&&o!==null&&(window.clearTimeout(o),o=null)}function f(k){k.currentTarget===k.target&&m()}function x(){const{onClose:k}=e;k?Promise.resolve(k()).then(P=>{P!==!1&&u()}):u()}return onMounted(()=>{e.duration&&(o=window.setTimeout(u,e.duration))}),{show:r,hide:u,handleClose:x,handleAfterLeave:y,handleLeave:v,handleBeforeLeave:g,handleAfterEnter:w,handleBeforeEnter:s,handleMouseenter:d,handleMouseleave:f}},render(){return h$1(Transition,{name:"notification-transition",appear:!0,onBeforeEnter:this.handleBeforeEnter,onAfterEnter:this.handleAfterEnter,onBeforeLeave:this.handleBeforeLeave,onLeave:this.handleLeave,onAfterLeave:this.handleAfterLeave},{default:()=>this.show?h$1(Notification,Object.assign({},keep(this.$props,notificationPropKeys),{onClose:this.handleClose,onMouseenter:this.duration&&this.keepAliveOnHover?this.handleMouseenter:void 0,onMouseleave:this.duration&&this.keepAliveOnHover?this.handleMouseleave:void 0})):null})}}),style$3=c$1([cB("notification-container",`
 z-index: 4000;
 position: fixed;
 overflow: visible;
 display: flex;
 flex-direction: column;
 align-items: flex-end;
 `,[c$1(">",[cB("scrollbar",`
 width: initial;
 overflow: visible;
 height: -moz-fit-content !important;
 height: fit-content !important;
 max-height: 100vh !important;
 `,[c$1(">",[cB("scrollbar-container",`
 height: -moz-fit-content !important;
 height: fit-content !important;
 max-height: 100vh !important;
 `,[cB("scrollbar-content",`
 padding-top: 12px;
 padding-bottom: 33px;
 `)])])])]),cM("top, top-right, top-left",`
 top: 12px;
 `,[c$1("&.transitioning >",[cB("scrollbar",[c$1(">",[cB("scrollbar-container",`
 min-height: 100vh !important;
 `)])])])]),cM("bottom, bottom-right, bottom-left",`
 bottom: 12px;
 `,[c$1(">",[cB("scrollbar",[c$1(">",[cB("scrollbar-container",[cB("scrollbar-content",`
 padding-bottom: 12px;
 `)])])])]),cB("notification-wrapper",`
 display: flex;
 align-items: flex-end;
 margin-bottom: 0;
 margin-top: 12px;
 `)]),cM("top, bottom",`
 left: 50%;
 transform: translateX(-50%);
 `,[cB("notification-wrapper",[c$1("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 transform: scale(0.85);
 `),c$1("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 transform: scale(1);
 `)])]),cM("top",[cB("notification-wrapper",`
 transform-origin: top center;
 `)]),cM("bottom",[cB("notification-wrapper",`
 transform-origin: bottom center;
 `)]),cM("top-right, bottom-right",[cB("notification",`
 margin-left: 28px;
 margin-right: 16px;
 `)]),cM("top-left, bottom-left",[cB("notification",`
 margin-left: 16px;
 margin-right: 28px;
 `)]),cM("top-right",`
 right: 0;
 `,[placementTransformStyle("top-right")]),cM("top-left",`
 left: 0;
 `,[placementTransformStyle("top-left")]),cM("bottom-right",`
 right: 0;
 `,[placementTransformStyle("bottom-right")]),cM("bottom-left",`
 left: 0;
 `,[placementTransformStyle("bottom-left")]),cM("scrollable",[cM("top-right",`
 top: 0;
 `),cM("top-left",`
 top: 0;
 `),cM("bottom-right",`
 bottom: 0;
 `),cM("bottom-left",`
 bottom: 0;
 `)]),cB("notification-wrapper",`
 margin-bottom: 12px;
 `,[c$1("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 opacity: 0;
 margin-top: 0 !important;
 margin-bottom: 0 !important;
 `),c$1("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 opacity: 1;
 `),c$1("&.notification-transition-leave-active",`
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier-ease-in),
 max-height .3s var(--n-bezier),
 margin-top .3s linear,
 margin-bottom .3s linear,
 box-shadow .3s var(--n-bezier);
 `),c$1("&.notification-transition-enter-active",`
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier-ease-out),
 max-height .3s var(--n-bezier),
 margin-top .3s linear,
 margin-bottom .3s linear,
 box-shadow .3s var(--n-bezier);
 `)]),cB("notification",`
 background-color: var(--n-color);
 color: var(--n-text-color);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 font-family: inherit;
 font-size: var(--n-font-size);
 font-weight: 400;
 position: relative;
 display: flex;
 overflow: hidden;
 flex-shrink: 0;
 padding-left: var(--n-padding-left);
 padding-right: var(--n-padding-right);
 width: var(--n-width);
 max-width: calc(100vw - 16px - 16px);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 box-sizing: border-box;
 opacity: 1;
 `,[cE("avatar",[cB("icon",`
 color: var(--n-icon-color);
 `),cB("base-icon",`
 color: var(--n-icon-color);
 `)]),cM("show-avatar",[cB("notification-main",`
 margin-left: 40px;
 width: calc(100% - 40px); 
 `)]),cM("closable",[cB("notification-main",[c$1("> *:first-child",`
 padding-right: 20px;
 `)]),cE("close",`
 position: absolute;
 top: 0;
 right: 0;
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `)]),cE("avatar",`
 position: absolute;
 top: var(--n-padding-top);
 left: var(--n-padding-left);
 width: 28px;
 height: 28px;
 font-size: 28px;
 display: flex;
 align-items: center;
 justify-content: center;
 `,[cB("icon","transition: color .3s var(--n-bezier);")]),cB("notification-main",`
 padding-top: var(--n-padding-top);
 padding-bottom: var(--n-padding-bottom);
 box-sizing: border-box;
 display: flex;
 flex-direction: column;
 margin-left: 8px;
 width: calc(100% - 8px);
 `,[cB("notification-main-footer",`
 display: flex;
 align-items: center;
 justify-content: space-between;
 margin-top: 12px;
 `,[cE("meta",`
 font-size: var(--n-meta-font-size);
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-description-text-color);
 `),cE("action",`
 cursor: pointer;
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-action-text-color);
 `)]),cE("header",`
 font-weight: var(--n-title-font-weight);
 font-size: var(--n-title-font-size);
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-title-text-color);
 `),cE("description",`
 margin-top: 8px;
 font-size: var(--n-description-font-size);
 white-space: pre-wrap;
 word-wrap: break-word;
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-description-text-color);
 `),cE("content",`
 line-height: var(--n-line-height);
 margin: 12px 0 0 0;
 font-family: inherit;
 white-space: pre-wrap;
 word-wrap: break-word;
 transition: color .3s var(--n-bezier-ease-out);
 color: var(--n-text-color);
 `,[c$1("&:first-child","margin: 0;")])])])])]);function placementTransformStyle(e){const r=e.split("-")[1]==="left"?"calc(-100%)":"calc(100%)",o="0";return cB("notification-wrapper",[c$1("&.notification-transition-enter-from, &.notification-transition-leave-to",`
 transform: translate(${r}, 0);
 `),c$1("&.notification-transition-leave-from, &.notification-transition-enter-to",`
 transform: translate(${o}, 0);
 `)])}const notificationApiInjectionKey="n-notification-api",notificationProviderProps=Object.assign(Object.assign({},useTheme.props),{containerClass:String,containerStyle:[String,Object],to:[String,Object],scrollable:{type:Boolean,default:!0},max:Number,placement:{type:String,default:"top-right"},keepAliveOnHover:Boolean}),NNotificationProvider=defineComponent({name:"NotificationProvider",props:notificationProviderProps,setup(e){const{mergedClsPrefixRef:n}=useConfig(e),r=ref([]),o={},u=new Set;function s(x){const k=createId(),P=()=>{u.add(k),o[k]&&o[k].hide()},S=reactive(Object.assign(Object.assign({},x),{key:k,destroy:P,hide:P,deactivate:P})),{max:E}=e;if(E&&r.value.length-u.size>=E){let M=!1,T=0;for(const D of r.value){if(!u.has(D.key)){o[D.key]&&(D.destroy(),M=!0);break}T++}M||r.value.splice(T,1)}return r.value.push(S),S}const w=["info","success","warning","error"].map(x=>k=>s(Object.assign(Object.assign({},k),{type:x})));function g(x){u.delete(x),r.value.splice(r.value.findIndex(k=>k.key===x),1)}const v=useTheme("Notification","-notification",style$3,notificationLight$1,e,n),y={create:s,info:w[0],success:w[1],warning:w[2],error:w[3],open:d,destroyAll:f},m=ref(0);provide(notificationApiInjectionKey,y),provide(notificationProviderInjectionKey,{props:e,mergedClsPrefixRef:n,mergedThemeRef:v,wipTransitionCountRef:m});function d(x){return s(x)}function f(){Object.values(r.value).forEach(x=>{x.hide()})}return Object.assign({mergedClsPrefix:n,notificationList:r,notificationRefs:o,handleAfterLeave:g},y)},render(){var e,n,r;const{placement:o}=this;return h$1(Fragment,null,(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e),this.notificationList.length?h$1(Teleport,{to:(r=this.to)!==null&&r!==void 0?r:"body"},h$1(NotificationContainer,{class:this.containerClass,style:this.containerStyle,scrollable:this.scrollable&&o!=="top"&&o!=="bottom",placement:o},{default:()=>this.notificationList.map(u=>h$1(NotificationEnvironment,Object.assign({ref:s=>{const w=u.key;s===null?delete this.notificationRefs[w]:this.notificationRefs[w]=s}},omit(u,["destroy","hide","deactivate"]),{internalKey:u.key,onInternalAfterLeave:this.handleAfterLeave,keepAliveOnHover:u.keepAliveOnHover===void 0?this.keepAliveOnHover:u.keepAliveOnHover})))})):null)}});function useNotification(){const e=inject(notificationApiInjectionKey,null);return e===null&&throwError("use-notification","No outer `n-notification-provider` found."),e}const NInjectionExtractor=defineComponent({name:"InjectionExtractor",props:{onSetup:Function},setup(e,{slots:n}){var r;return(r=e.onSetup)===null||r===void 0||r.call(e),()=>{var o;return(o=n.default)===null||o===void 0?void 0:o.call(n)}}}),injectionFactoryMap={message:useMessage,notification:useNotification,loadingBar:useLoadingBar,dialog:useDialog,modal:useModal};function createDiscreteApp({providersAndProps:e,configProviderProps:n}){let r=createApp(u);const o={app:r};function u(){return h$1(NConfigProvider,unref(n),{default:()=>e.map(({type:g,Provider:v,props:y})=>h$1(v,unref(y),{default:()=>h$1(NInjectionExtractor,{onSetup:()=>o[g]=injectionFactoryMap[g]()})}))})}let s;return isBrowser$1&&(s=document.createElement("div"),document.body.appendChild(s),r.mount(s)),Object.assign({unmount:()=>{var g;if(r===null||s===null){warn("discrete","unmount call no need because discrete app has been unmounted");return}r.unmount(),(g=s.parentNode)===null||g===void 0||g.removeChild(s),s=null,r=null}},o)}function createDiscreteApi(e,{configProviderProps:n,messageProviderProps:r,dialogProviderProps:o,notificationProviderProps:u,loadingBarProviderProps:s,modalProviderProps:w}={}){const g=[];return e.forEach(y=>{switch(y){case"message":g.push({type:y,Provider:NMessageProvider,props:r});break;case"notification":g.push({type:y,Provider:NNotificationProvider,props:u});break;case"dialog":g.push({type:y,Provider:NDialogProvider,props:o});break;case"loadingBar":g.push({type:y,Provider:NLoadingBarProvider,props:s});break;case"modal":g.push({type:y,Provider:NModalProvider,props:w})}}),createDiscreteApp({providersAndProps:g,configProviderProps:n})}function self$3(e){const{textColorDisabled:n}=e;return{iconColorDisabled:n}}const inputNumberLight={name:"InputNumber",common:commonLight,peers:{Button:buttonLight$1,Input:inputLight$1},self:self$3},inputNumberLight$1=inputNumberLight,sizeVariables={railHeight:"4px",railWidthVertical:"4px",handleSize:"18px",dotHeight:"8px",dotWidth:"8px",dotBorderRadius:"4px"};function self$2(e){const n="rgba(0, 0, 0, .85)",r="0 2px 8px 0 rgba(0, 0, 0, 0.12)",{railColor:o,primaryColor:u,baseColor:s,cardColor:w,modalColor:g,popoverColor:v,borderRadius:y,fontSize:m,opacityDisabled:d}=e;return Object.assign(Object.assign({},sizeVariables),{fontSize:m,markFontSize:m,railColor:o,railColorHover:o,fillColor:u,fillColorHover:u,opacityDisabled:d,handleColor:"#FFF",dotColor:w,dotColorModal:g,dotColorPopover:v,handleBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowHover:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowActive:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowFocus:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",indicatorColor:n,indicatorBoxShadow:r,indicatorTextColor:s,indicatorBorderRadius:y,dotBorder:`2px solid ${o}`,dotBorderActive:`2px solid ${u}`,dotBoxShadow:""})}const sliderLight={name:"Slider",common:commonLight,self:self$2},sliderLight$1=sliderLight,commonVars={buttonHeightSmall:"14px",buttonHeightMedium:"18px",buttonHeightLarge:"22px",buttonWidthSmall:"14px",buttonWidthMedium:"18px",buttonWidthLarge:"22px",buttonWidthPressedSmall:"20px",buttonWidthPressedMedium:"24px",buttonWidthPressedLarge:"28px",railHeightSmall:"18px",railHeightMedium:"22px",railHeightLarge:"26px",railWidthSmall:"32px",railWidthMedium:"40px",railWidthLarge:"48px"};function self$1(e){const{primaryColor:n,opacityDisabled:r,borderRadius:o,textColor3:u}=e,s="rgba(0, 0, 0, .14)";return Object.assign(Object.assign({},commonVars),{iconColor:u,textColor:"white",loadingColor:n,opacityDisabled:r,railColor:s,railColorActive:n,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:o,railBorderRadiusMedium:o,railBorderRadiusLarge:o,buttonBorderRadiusSmall:o,buttonBorderRadiusMedium:o,buttonBorderRadiusLarge:o,boxShadowFocus:`0 0 0 2px ${changeColor(n,{alpha:.2})}`})}const switchLight={name:"Switch",common:commonLight,self:self$1},switchLight$1=switchLight,style$2=c$1([cB("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),cB("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]);function parse(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function isWipValue(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^-?\d*$/.test(e))||e==="-"||e==="-0"}function validator$2(e){return e==null?!0:!Number.isNaN(e)}function format$2(e,n){return typeof e!="number"?"":n===void 0?String(e):e.toFixed(n)}function parseNumber(e){if(e===null)return null;if(typeof e=="number")return e;{const n=Number(e);return Number.isNaN(n)?null:n}}const HOLDING_CHANGE_THRESHOLD=800,HOLDING_CHANGE_INTERVAL=100,inputNumberProps=Object.assign(Object.assign({},useTheme.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},round:{type:Boolean,default:void 0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),NInputNumber=defineComponent({name:"InputNumber",props:inputNumberProps,slots:Object,setup(e){const{mergedBorderedRef:n,mergedClsPrefixRef:r,mergedRtlRef:o}=useConfig(e),u=useTheme("InputNumber","-input-number",style$2,inputNumberLight$1,e,r),{localeRef:s}=useLocale("InputNumber"),w=useFormItem(e),{mergedSizeRef:g,mergedDisabledRef:v,mergedStatusRef:y}=w,m=ref(null),d=ref(null),f=ref(null),x=ref(e.defaultValue),k=toRef(e,"value"),P=useMergedState(k,x),S=ref(""),E=Be=>{const Oe=String(Be).split(".")[1];return Oe?Oe.length:0},M=Be=>{const Oe=[e.min,e.max,e.step,Be].map(Ge=>Ge===void 0?0:E(Ge));return Math.max(...Oe)},T=useMemo(()=>{const{placeholder:Be}=e;return Be!==void 0?Be:s.value.placeholder}),D=useMemo(()=>{const Be=parseNumber(e.step);return Be!==null?Be===0?1:Math.abs(Be):1}),I=useMemo(()=>{const Be=parseNumber(e.min);return Be!==null?Be:null}),N=useMemo(()=>{const Be=parseNumber(e.max);return Be!==null?Be:null}),O=()=>{const{value:Be}=P;if(validator$2(Be)){const{format:Oe,precision:Ge}=e;Oe?S.value=Oe(Be):Be===null||Ge===void 0||E(Be)>Ge?S.value=format$2(Be,void 0):S.value=format$2(Be,Ge)}else S.value=String(Be)};O();const F=Be=>{const{value:Oe}=P;if(Be===Oe){O();return}const{"onUpdate:value":Ge,onUpdateValue:Ie,onChange:je}=e,{nTriggerFormInput:qe,nTriggerFormChange:Ue}=w;je&&call(je,Be),Ie&&call(Ie,Be),Ge&&call(Ge,Be),x.value=Be,qe(),Ue()},U=({offset:Be,doUpdateIfValid:Oe,fixPrecision:Ge,isInputing:Ie})=>{const{value:je}=S;if(Ie&&isWipValue(je))return!1;const qe=(e.parse||parse)(je);if(qe===null)return Oe&&F(null),null;if(validator$2(qe)){const Ue=E(qe),{precision:Je}=e;if(Je!==void 0&&Je<Ue&&!Ge)return!1;let et=Number.parseFloat((qe+Be).toFixed(Je!=null?Je:M(qe)));if(validator$2(et)){const{value:nt}=N,{value:st}=I;if(nt!==null&&et>nt){if(!Oe||Ie)return!1;et=nt}if(st!==null&&et<st){if(!Oe||Ie)return!1;et=st}return e.validator&&!e.validator(et)?!1:(Oe&&F(et),et)}}return!1},Y=useMemo(()=>U({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),Q=useMemo(()=>{const{value:Be}=P;if(e.validator&&Be===null)return!1;const{value:Oe}=D;return U({offset:-Oe,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),q=useMemo(()=>{const{value:Be}=P;if(e.validator&&Be===null)return!1;const{value:Oe}=D;return U({offset:+Oe,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function ne(Be){const{onFocus:Oe}=e,{nTriggerFormFocus:Ge}=w;Oe&&call(Oe,Be),Ge()}function J(Be){var Oe,Ge;if(Be.target===((Oe=m.value)===null||Oe===void 0?void 0:Oe.wrapperElRef))return;const Ie=U({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(Ie!==!1){const Ue=(Ge=m.value)===null||Ge===void 0?void 0:Ge.inputElRef;Ue&&(Ue.value=String(Ie||"")),P.value===Ie&&O()}else O();const{onBlur:je}=e,{nTriggerFormBlur:qe}=w;je&&call(je,Be),qe(),nextTick(()=>{O()})}function re(Be){const{onClear:Oe}=e;Oe&&call(Oe,Be)}function X(){const{value:Be}=q;if(!Be){Pe();return}const{value:Oe}=P;if(Oe===null)e.validator||F(te());else{const{value:Ge}=D;U({offset:Ge,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function j(){const{value:Be}=Q;if(!Be){ke();return}const{value:Oe}=P;if(Oe===null)e.validator||F(te());else{const{value:Ge}=D;U({offset:-Ge,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const Z=ne,W=J;function te(){if(e.validator)return null;const{value:Be}=I,{value:Oe}=N;return Be!==null?Math.max(0,Be):Oe!==null?Math.min(0,Oe):0}function le(Be){re(Be),F(null)}function oe(Be){var Oe,Ge,Ie;!((Oe=f.value)===null||Oe===void 0)&&Oe.$el.contains(Be.target)&&Be.preventDefault(),!((Ge=d.value)===null||Ge===void 0)&&Ge.$el.contains(Be.target)&&Be.preventDefault(),(Ie=m.value)===null||Ie===void 0||Ie.activate()}let Ee=null,Ae=null,ve=null;function ke(){ve&&(window.clearTimeout(ve),ve=null),Ee&&(window.clearInterval(Ee),Ee=null)}let Ce=null;function Pe(){Ce&&(window.clearTimeout(Ce),Ce=null),Ae&&(window.clearInterval(Ae),Ae=null)}function Me(){ke(),ve=window.setTimeout(()=>{Ee=window.setInterval(()=>{j()},HOLDING_CHANGE_INTERVAL)},HOLDING_CHANGE_THRESHOLD),on$1("mouseup",document,ke,{once:!0})}function Le(){Pe(),Ce=window.setTimeout(()=>{Ae=window.setInterval(()=>{X()},HOLDING_CHANGE_INTERVAL)},HOLDING_CHANGE_THRESHOLD),on$1("mouseup",document,Pe,{once:!0})}const Te=()=>{Ae||X()},ye=()=>{Ee||j()};function _e(Be){var Oe,Ge;if(Be.key==="Enter"){if(Be.target===((Oe=m.value)===null||Oe===void 0?void 0:Oe.wrapperElRef))return;U({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((Ge=m.value)===null||Ge===void 0||Ge.deactivate())}else if(Be.key==="ArrowUp"){if(!q.value||e.keyboard.ArrowUp===!1)return;Be.preventDefault(),U({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&X()}else if(Be.key==="ArrowDown"){if(!Q.value||e.keyboard.ArrowDown===!1)return;Be.preventDefault(),U({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&j()}}function we(Be){S.value=Be,e.updateValueOnInput&&!e.format&&!e.parse&&e.precision===void 0&&U({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}watch(P,()=>{O()});const Se={focus:()=>{var Be;return(Be=m.value)===null||Be===void 0?void 0:Be.focus()},blur:()=>{var Be;return(Be=m.value)===null||Be===void 0?void 0:Be.blur()},select:()=>{var Be;return(Be=m.value)===null||Be===void 0?void 0:Be.select()}},$e=useRtl("InputNumber",o,r);return Object.assign(Object.assign({},Se),{rtlEnabled:$e,inputInstRef:m,minusButtonInstRef:d,addButtonInstRef:f,mergedClsPrefix:r,mergedBordered:n,uncontrolledValue:x,mergedValue:P,mergedPlaceholder:T,displayedValueInvalid:Y,mergedSize:g,mergedDisabled:v,displayedValue:S,addable:q,minusable:Q,mergedStatus:y,handleFocus:Z,handleBlur:W,handleClear:le,handleMouseDown:oe,handleAddClick:Te,handleMinusClick:ye,handleAddMousedown:Le,handleMinusMousedown:Me,handleKeyDown:_e,handleUpdateDisplayedValue:we,mergedTheme:u,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:computed(()=>{const{self:{iconColorDisabled:Be}}=u.value,[Oe,Ge,Ie,je]=rgba(Be);return{textColorTextDisabled:`rgb(${Oe}, ${Ge}, ${Ie})`,opacityDisabled:`${je}`}})})},render(){const{mergedClsPrefix:e,$slots:n}=this,r=()=>h$1(XButton,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>resolveSlot(n["minus-icon"],()=>[h$1(NBaseIcon,{clsPrefix:e},{default:()=>h$1(RemoveIcon,null)})])}),o=()=>h$1(XButton,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>resolveSlot(n["add-icon"],()=>[h$1(NBaseIcon,{clsPrefix:e},{default:()=>h$1(AddIcon,null)})])});return h$1("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},h$1(NInput,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,round:this.round,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var u;return this.showButton&&this.buttonPlacement==="both"?[r(),resolveWrappedSlot(n.prefix,s=>s?h$1("span",{class:`${e}-input-number-prefix`},s):null)]:(u=n.prefix)===null||u===void 0?void 0:u.call(n)},suffix:()=>{var u;return this.showButton?[resolveWrappedSlot(n.suffix,s=>s?h$1("span",{class:`${e}-input-number-suffix`},s):null),this.buttonPlacement==="right"?r():null,o()]:(u=n.suffix)===null||u===void 0?void 0:u.call(n)}}))}}),style$1=c$1([cB("slider",`
 display: block;
 padding: calc((var(--n-handle-size) - var(--n-rail-height)) / 2) 0;
 position: relative;
 z-index: 0;
 width: 100%;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 `,[cM("reverse",[cB("slider-handles",[cB("slider-handle-wrapper",`
 transform: translate(50%, -50%);
 `)]),cB("slider-dots",[cB("slider-dot",`
 transform: translateX(50%, -50%);
 `)]),cM("vertical",[cB("slider-handles",[cB("slider-handle-wrapper",`
 transform: translate(-50%, -50%);
 `)]),cB("slider-marks",[cB("slider-mark",`
 transform: translateY(calc(-50% + var(--n-dot-height) / 2));
 `)]),cB("slider-dots",[cB("slider-dot",`
 transform: translateX(-50%) translateY(0);
 `)])])]),cM("vertical",`
 box-sizing: content-box;
 padding: 0 calc((var(--n-handle-size) - var(--n-rail-height)) / 2);
 width: var(--n-rail-width-vertical);
 height: 100%;
 `,[cB("slider-handles",`
 top: calc(var(--n-handle-size) / 2);
 right: 0;
 bottom: calc(var(--n-handle-size) / 2);
 left: 0;
 `,[cB("slider-handle-wrapper",`
 top: unset;
 left: 50%;
 transform: translate(-50%, 50%);
 `)]),cB("slider-rail",`
 height: 100%;
 `,[cE("fill",`
 top: unset;
 right: 0;
 bottom: unset;
 left: 0;
 `)]),cM("with-mark",`
 width: var(--n-rail-width-vertical);
 margin: 0 32px 0 8px;
 `),cB("slider-marks",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 22px;
 font-size: var(--n-mark-font-size);
 `,[cB("slider-mark",`
 transform: translateY(50%);
 white-space: nowrap;
 `)]),cB("slider-dots",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 50%;
 `,[cB("slider-dot",`
 transform: translateX(-50%) translateY(50%);
 `)])]),cM("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `,[cB("slider-handle",`
 cursor: not-allowed;
 `)]),cM("with-mark",`
 width: 100%;
 margin: 8px 0 32px 0;
 `),c$1("&:hover",[cB("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[cE("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),cB("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),cM("active",[cB("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[cE("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),cB("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),cB("slider-marks",`
 position: absolute;
 top: 18px;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[cB("slider-mark",`
 position: absolute;
 transform: translateX(-50%);
 white-space: nowrap;
 `)]),cB("slider-rail",`
 width: 100%;
 position: relative;
 height: var(--n-rail-height);
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 border-radius: calc(var(--n-rail-height) / 2);
 `,[cE("fill",`
 position: absolute;
 top: 0;
 bottom: 0;
 border-radius: calc(var(--n-rail-height) / 2);
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-fill-color);
 `)]),cB("slider-handles",`
 position: absolute;
 top: 0;
 right: calc(var(--n-handle-size) / 2);
 bottom: 0;
 left: calc(var(--n-handle-size) / 2);
 `,[cB("slider-handle-wrapper",`
 outline: none;
 position: absolute;
 top: 50%;
 transform: translate(-50%, -50%);
 cursor: pointer;
 display: flex;
 `,[cB("slider-handle",`
 height: var(--n-handle-size);
 width: var(--n-handle-size);
 border-radius: 50%;
 overflow: hidden;
 transition: box-shadow .2s var(--n-bezier), background-color .3s var(--n-bezier);
 background-color: var(--n-handle-color);
 box-shadow: var(--n-handle-box-shadow);
 `,[c$1("&:hover",`
 box-shadow: var(--n-handle-box-shadow-hover);
 `)]),c$1("&:focus",[cB("slider-handle",`
 box-shadow: var(--n-handle-box-shadow-focus);
 `,[c$1("&:hover",`
 box-shadow: var(--n-handle-box-shadow-active);
 `)])])])]),cB("slider-dots",`
 position: absolute;
 top: 50%;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[cM("transition-disabled",[cB("slider-dot","transition: none;")]),cB("slider-dot",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 transform: translate(-50%, -50%);
 height: var(--n-dot-height);
 width: var(--n-dot-width);
 border-radius: var(--n-dot-border-radius);
 overflow: hidden;
 box-sizing: border-box;
 border: var(--n-dot-border);
 background-color: var(--n-dot-color);
 `,[cM("active","border: var(--n-dot-border-active);")])])]),cB("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[fadeInScaleUpTransition()]),cB("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[cM("top",`
 margin-bottom: 12px;
 `),cM("right",`
 margin-left: 12px;
 `),cM("bottom",`
 margin-top: 12px;
 `),cM("left",`
 margin-right: 12px;
 `),fadeInScaleUpTransition()]),insideModal(cB("slider",[cB("slider-dot","background-color: var(--n-dot-color-modal);")])),insidePopover(cB("slider",[cB("slider-dot","background-color: var(--n-dot-color-popover);")]))]);function isTouchEvent(e){return window.TouchEvent&&e instanceof window.TouchEvent}function useRefs(){const e=new Map,n=r=>o=>{e.set(r,o)};return onBeforeUpdate(()=>{e.clear()}),[e,n]}const eventButtonLeft=0,sliderProps=Object.assign(Object.assign({},useTheme.props),{to:useAdjustedTo.propTo,defaultValue:{type:[Number,Array],default:0},marks:Object,disabled:{type:Boolean,default:void 0},formatTooltip:Function,keyboard:{type:Boolean,default:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:[Number,String],default:1},range:Boolean,value:[Number,Array],placement:String,showTooltip:{type:Boolean,default:void 0},tooltip:{type:Boolean,default:!0},vertical:Boolean,reverse:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onDragstart:[Function],onDragend:[Function]}),NSlider=defineComponent({name:"Slider",props:sliderProps,slots:Object,setup(e){const{mergedClsPrefixRef:n,namespaceRef:r,inlineThemeDisabled:o}=useConfig(e),u=useTheme("Slider","-slider",style$1,sliderLight$1,e,n),s=ref(null),[w,g]=useRefs(),[v,y]=useRefs(),m=ref(new Set),d=useFormItem(e),{mergedDisabledRef:f}=d,x=computed(()=>{const{step:Ue}=e;if(Number(Ue)<=0||Ue==="mark")return 0;const Je=Ue.toString();let et=0;return Je.includes(".")&&(et=Je.length-Je.indexOf(".")-1),et}),k=ref(e.defaultValue),P=toRef(e,"value"),S=useMergedState(P,k),E=computed(()=>{const{value:Ue}=S;return(e.range?Ue:[Ue]).map(oe)}),M=computed(()=>E.value.length>2),T=computed(()=>e.placement===void 0?e.vertical?"right":"top":e.placement),D=computed(()=>{const{marks:Ue}=e;return Ue?Object.keys(Ue).map(Number.parseFloat):null}),I=ref(-1),N=ref(-1),O=ref(-1),F=ref(!1),U=ref(!1),Y=computed(()=>{const{vertical:Ue,reverse:Je}=e;return Ue?Je?"top":"bottom":Je?"right":"left"}),Q=computed(()=>{if(M.value)return;const Ue=E.value,Je=Ee(e.range?Math.min(...Ue):e.min),et=Ee(e.range?Math.max(...Ue):Ue[0]),{value:nt}=Y;return e.vertical?{[nt]:`${Je}%`,height:`${et-Je}%`}:{[nt]:`${Je}%`,width:`${et-Je}%`}}),q=computed(()=>{const Ue=[],{marks:Je}=e;if(Je){const et=E.value.slice();et.sort((wt,He)=>wt-He);const{value:nt}=Y,{value:st}=M,{range:gt}=e,_t=st?()=>!1:wt=>gt?wt>=et[0]&&wt<=et[et.length-1]:wt<=et[0];for(const wt of Object.keys(Je)){const He=Number(wt);Ue.push({active:_t(He),key:He,label:Je[wt],style:{[nt]:`${Ee(He)}%`}})}}return Ue});function ne(Ue,Je){const et=Ee(Ue),{value:nt}=Y;return{[nt]:`${et}%`,zIndex:Je===I.value?1:0}}function J(Ue){return e.showTooltip||O.value===Ue||I.value===Ue&&F.value}function re(Ue){return F.value?!(I.value===Ue&&N.value===Ue):!0}function X(Ue){var Je;~Ue&&(I.value=Ue,(Je=w.get(Ue))===null||Je===void 0||Je.focus())}function j(){v.forEach((Ue,Je)=>{J(Je)&&Ue.syncPosition()})}function Z(Ue){const{"onUpdate:value":Je,onUpdateValue:et}=e,{nTriggerFormInput:nt,nTriggerFormChange:st}=d;et&&call(et,Ue),Je&&call(Je,Ue),k.value=Ue,nt(),st()}function W(Ue){const{range:Je}=e;if(Je){if(Array.isArray(Ue)){const{value:et}=E;Ue.join()!==et.join()&&Z(Ue)}}else Array.isArray(Ue)||E.value[0]!==Ue&&Z(Ue)}function te(Ue,Je){if(e.range){const et=E.value.slice();et.splice(Je,1,Ue),W(et)}else W(Ue)}function le(Ue,Je,et){const nt=et!==void 0;et||(et=Ue-Je>0?1:-1);const st=D.value||[],{step:gt}=e;if(gt==="mark"){const He=ke(Ue,st.concat(Je),nt?et:void 0);return He?He.value:Je}if(gt<=0)return Je;const{value:_t}=x;let wt;if(nt){const He=Number((Je/gt).toFixed(_t)),Ve=Math.floor(He),ze=He>Ve?Ve:Ve-1,Ne=He<Ve?Ve:Ve+1;wt=ke(Je,[Number((ze*gt).toFixed(_t)),Number((Ne*gt).toFixed(_t)),...st],et)}else{const He=ve(Ue);wt=ke(Ue,[...st,He])}return wt?oe(wt.value):Je}function oe(Ue){return Math.min(e.max,Math.max(e.min,Ue))}function Ee(Ue){const{max:Je,min:et}=e;return(Ue-et)/(Je-et)*100}function Ae(Ue){const{max:Je,min:et}=e;return et+(Je-et)*Ue}function ve(Ue){const{step:Je,min:et}=e;if(Number(Je)<=0||Je==="mark")return Ue;const nt=Math.round((Ue-et)/Je)*Je+et;return Number(nt.toFixed(x.value))}function ke(Ue,Je=D.value,et){if(!(Je!=null&&Je.length))return null;let nt=null,st=-1;for(;++st<Je.length;){const gt=Je[st]-Ue,_t=Math.abs(gt);(et===void 0||gt*et>0)&&(nt===null||_t<nt.distance)&&(nt={index:st,distance:_t,value:Je[st]})}return nt}function Ce(Ue){const Je=s.value;if(!Je)return;const et=isTouchEvent(Ue)?Ue.touches[0]:Ue,nt=Je.getBoundingClientRect();let st;return e.vertical?st=(nt.bottom-et.clientY)/nt.height:st=(et.clientX-nt.left)/nt.width,e.reverse&&(st=1-st),Ae(st)}function Pe(Ue){if(f.value||!e.keyboard)return;const{vertical:Je,reverse:et}=e;switch(Ue.key){case"ArrowUp":Ue.preventDefault(),Me(Je&&et?-1:1);break;case"ArrowRight":Ue.preventDefault(),Me(!Je&&et?-1:1);break;case"ArrowDown":Ue.preventDefault(),Me(Je&&et?1:-1);break;case"ArrowLeft":Ue.preventDefault(),Me(!Je&&et?1:-1);break}}function Me(Ue){const Je=I.value;if(Je===-1)return;const{step:et}=e,nt=E.value[Je],st=Number(et)<=0||et==="mark"?nt:nt+et*Ue;te(le(st,nt,Ue>0?1:-1),Je)}function Le(Ue){var Je,et;if(f.value||!isTouchEvent(Ue)&&Ue.button!==eventButtonLeft)return;const nt=Ce(Ue);if(nt===void 0)return;const st=E.value.slice(),gt=e.range?(et=(Je=ke(nt,st))===null||Je===void 0?void 0:Je.index)!==null&&et!==void 0?et:-1:0;gt!==-1&&(Ue.preventDefault(),X(gt),Te(),te(le(nt,E.value[gt]),gt))}function Te(){F.value||(F.value=!0,e.onDragstart&&call(e.onDragstart),on$1("touchend",document,we),on$1("mouseup",document,we),on$1("touchmove",document,_e),on$1("mousemove",document,_e))}function ye(){F.value&&(F.value=!1,e.onDragend&&call(e.onDragend),off$1("touchend",document,we),off$1("mouseup",document,we),off$1("touchmove",document,_e),off$1("mousemove",document,_e))}function _e(Ue){const{value:Je}=I;if(!F.value||Je===-1){ye();return}const et=Ce(Ue);et!==void 0&&te(le(et,E.value[Je]),Je)}function we(){ye()}function Se(Ue){I.value=Ue,f.value||(O.value=Ue)}function $e(Ue){I.value===Ue&&(I.value=-1,ye()),O.value===Ue&&(O.value=-1)}function Be(Ue){O.value=Ue}function Oe(Ue){O.value===Ue&&(O.value=-1)}watch(I,(Ue,Je)=>void nextTick(()=>N.value=Je)),watch(S,()=>{if(e.marks){if(U.value)return;U.value=!0,nextTick(()=>{U.value=!1})}nextTick(j)}),onBeforeUnmount(()=>{ye()});const Ge=computed(()=>{const{self:{markFontSize:Ue,railColor:Je,railColorHover:et,fillColor:nt,fillColorHover:st,handleColor:gt,opacityDisabled:_t,dotColor:wt,dotColorModal:He,handleBoxShadow:Ve,handleBoxShadowHover:ze,handleBoxShadowActive:Ne,handleBoxShadowFocus:We,dotBorder:Fe,dotBoxShadow:Ye,railHeight:Ke,railWidthVertical:Ze,handleSize:ot,dotHeight:Qe,dotWidth:at,dotBorderRadius:rt,fontSize:ct,dotBorderActive:ht,dotColorPopover:yt},common:{cubicBezierEaseInOut:bt}}=u.value;return{"--n-bezier":bt,"--n-dot-border":Fe,"--n-dot-border-active":ht,"--n-dot-border-radius":rt,"--n-dot-box-shadow":Ye,"--n-dot-color":wt,"--n-dot-color-modal":He,"--n-dot-color-popover":yt,"--n-dot-height":Qe,"--n-dot-width":at,"--n-fill-color":nt,"--n-fill-color-hover":st,"--n-font-size":ct,"--n-handle-box-shadow":Ve,"--n-handle-box-shadow-active":Ne,"--n-handle-box-shadow-focus":We,"--n-handle-box-shadow-hover":ze,"--n-handle-color":gt,"--n-handle-size":ot,"--n-opacity-disabled":_t,"--n-rail-color":Je,"--n-rail-color-hover":et,"--n-rail-height":Ke,"--n-rail-width-vertical":Ze,"--n-mark-font-size":Ue}}),Ie=o?useThemeClass("slider",void 0,Ge,e):void 0,je=computed(()=>{const{self:{fontSize:Ue,indicatorColor:Je,indicatorBoxShadow:et,indicatorTextColor:nt,indicatorBorderRadius:st}}=u.value;return{"--n-font-size":Ue,"--n-indicator-border-radius":st,"--n-indicator-box-shadow":et,"--n-indicator-color":Je,"--n-indicator-text-color":nt}}),qe=o?useThemeClass("slider-indicator",void 0,je,e):void 0;return{mergedClsPrefix:n,namespace:r,uncontrolledValue:k,mergedValue:S,mergedDisabled:f,mergedPlacement:T,isMounted:isMounted(),adjustedTo:useAdjustedTo(e),dotTransitionDisabled:U,markInfos:q,isShowTooltip:J,shouldKeepTooltipTransition:re,handleRailRef:s,setHandleRefs:g,setFollowerRefs:y,fillStyle:Q,getHandleStyle:ne,activeIndex:I,arrifiedValues:E,followerEnabledIndexSet:m,handleRailMouseDown:Le,handleHandleFocus:Se,handleHandleBlur:$e,handleHandleMouseEnter:Be,handleHandleMouseLeave:Oe,handleRailKeyDown:Pe,indicatorCssVars:o?void 0:je,indicatorThemeClass:qe==null?void 0:qe.themeClass,indicatorOnRender:qe==null?void 0:qe.onRender,cssVars:o?void 0:Ge,themeClass:Ie==null?void 0:Ie.themeClass,onRender:Ie==null?void 0:Ie.onRender}},render(){var e;const{mergedClsPrefix:n,themeClass:r,formatTooltip:o}=this;return(e=this.onRender)===null||e===void 0||e.call(this),h$1("div",{class:[`${n}-slider`,r,{[`${n}-slider--disabled`]:this.mergedDisabled,[`${n}-slider--active`]:this.activeIndex!==-1,[`${n}-slider--with-mark`]:this.marks,[`${n}-slider--vertical`]:this.vertical,[`${n}-slider--reverse`]:this.reverse}],style:this.cssVars,onKeydown:this.handleRailKeyDown,onMousedown:this.handleRailMouseDown,onTouchstart:this.handleRailMouseDown},h$1("div",{class:`${n}-slider-rail`},h$1("div",{class:`${n}-slider-rail__fill`,style:this.fillStyle}),this.marks?h$1("div",{class:[`${n}-slider-dots`,this.dotTransitionDisabled&&`${n}-slider-dots--transition-disabled`]},this.markInfos.map(u=>h$1("div",{key:u.key,class:[`${n}-slider-dot`,{[`${n}-slider-dot--active`]:u.active}],style:u.style}))):null,h$1("div",{ref:"handleRailRef",class:`${n}-slider-handles`},this.arrifiedValues.map((u,s)=>{const w=this.isShowTooltip(s);return h$1(VBinder,null,{default:()=>[h$1(VTarget,null,{default:()=>h$1("div",{ref:this.setHandleRefs(s),class:`${n}-slider-handle-wrapper`,tabindex:this.mergedDisabled?-1:0,role:"slider","aria-valuenow":u,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-orientation":this.vertical?"vertical":"horizontal","aria-disabled":this.disabled,style:this.getHandleStyle(u,s),onFocus:()=>{this.handleHandleFocus(s)},onBlur:()=>{this.handleHandleBlur(s)},onMouseenter:()=>{this.handleHandleMouseEnter(s)},onMouseleave:()=>{this.handleHandleMouseLeave(s)}},resolveSlot(this.$slots.thumb,()=>[h$1("div",{class:`${n}-slider-handle`})]))}),this.tooltip&&h$1(VFollower,{ref:this.setFollowerRefs(s),show:w,to:this.adjustedTo,enabled:this.showTooltip&&!this.range||this.followerEnabledIndexSet.has(s),teleportDisabled:this.adjustedTo===useAdjustedTo.tdkey,placement:this.mergedPlacement,containerClass:this.namespace},{default:()=>h$1(Transition,{name:"fade-in-scale-up-transition",appear:this.isMounted,css:this.shouldKeepTooltipTransition(s),onEnter:()=>{this.followerEnabledIndexSet.add(s)},onAfterLeave:()=>{this.followerEnabledIndexSet.delete(s)}},{default:()=>{var g;return w?((g=this.indicatorOnRender)===null||g===void 0||g.call(this),h$1("div",{class:[`${n}-slider-handle-indicator`,this.indicatorThemeClass,`${n}-slider-handle-indicator--${this.mergedPlacement}`],style:this.indicatorCssVars},typeof o=="function"?o(u):u)):null}})})]})})),this.marks?h$1("div",{class:`${n}-slider-marks`},this.markInfos.map(u=>h$1("div",{key:u.key,class:`${n}-slider-mark`,style:u.style},typeof u.label=="function"?u.label():u.label))):null))}}),style=cB("switch",`
 height: var(--n-height);
 min-width: var(--n-width);
 vertical-align: middle;
 user-select: none;
 -webkit-user-select: none;
 display: inline-flex;
 outline: none;
 justify-content: center;
 align-items: center;
`,[cE("children-placeholder",`
 height: var(--n-rail-height);
 display: flex;
 flex-direction: column;
 overflow: hidden;
 pointer-events: none;
 visibility: hidden;
 `),cE("rail-placeholder",`
 display: flex;
 flex-wrap: none;
 `),cE("button-placeholder",`
 width: calc(1.75 * var(--n-rail-height));
 height: var(--n-rail-height);
 `),cB("base-loading",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 font-size: calc(var(--n-button-width) - 4px);
 color: var(--n-loading-color);
 transition: color .3s var(--n-bezier);
 `,[iconSwitchTransition({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),cE("checked, unchecked",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 box-sizing: border-box;
 position: absolute;
 white-space: nowrap;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 line-height: 1;
 `),cE("checked",`
 right: 0;
 padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),cE("unchecked",`
 left: 0;
 justify-content: flex-end;
 padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),c$1("&:focus",[cE("rail",`
 box-shadow: var(--n-box-shadow-focus);
 `)]),cM("round",[cE("rail","border-radius: calc(var(--n-rail-height) / 2);",[cE("button","border-radius: calc(var(--n-button-height) / 2);")])]),cNotM("disabled",[cNotM("icon",[cM("rubber-band",[cM("pressed",[cE("rail",[cE("button","max-width: var(--n-button-width-pressed);")])]),cE("rail",[c$1("&:active",[cE("button","max-width: var(--n-button-width-pressed);")])]),cM("active",[cM("pressed",[cE("rail",[cE("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])]),cE("rail",[c$1("&:active",[cE("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])])])])])]),cM("active",[cE("rail",[cE("button","left: calc(100% - var(--n-button-width) - var(--n-offset))")])]),cE("rail",`
 overflow: hidden;
 height: var(--n-rail-height);
 min-width: var(--n-rail-width);
 border-radius: var(--n-rail-border-radius);
 cursor: pointer;
 position: relative;
 transition:
 opacity .3s var(--n-bezier),
 background .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-rail-color);
 `,[cE("button-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 font-size: calc(var(--n-button-height) - 4px);
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 line-height: 1;
 `,[iconSwitchTransition()]),cE("button",`
 align-items: center; 
 top: var(--n-offset);
 left: var(--n-offset);
 height: var(--n-button-height);
 width: var(--n-button-width-pressed);
 max-width: var(--n-button-width);
 border-radius: var(--n-button-border-radius);
 background-color: var(--n-button-color);
 box-shadow: var(--n-button-box-shadow);
 box-sizing: border-box;
 cursor: inherit;
 content: "";
 position: absolute;
 transition:
 background-color .3s var(--n-bezier),
 left .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 max-width .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 `)]),cM("active",[cE("rail","background-color: var(--n-rail-color-active);")]),cM("loading",[cE("rail",`
 cursor: wait;
 `)]),cM("disabled",[cE("rail",`
 cursor: not-allowed;
 opacity: .5;
 `)])]),switchProps=Object.assign(Object.assign({},useTheme.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,rubberBand:{type:Boolean,default:!0},onChange:[Function,Array]});let supportCssMax;const NSwitch=defineComponent({name:"Switch",props:switchProps,slots:Object,setup(e){supportCssMax===void 0&&(typeof CSS<"u"?typeof CSS.supports<"u"?supportCssMax=CSS.supports("width","max(1px)"):supportCssMax=!1:supportCssMax=!0);const{mergedClsPrefixRef:n,inlineThemeDisabled:r}=useConfig(e),o=useTheme("Switch","-switch",style,switchLight$1,e,n),u=useFormItem(e),{mergedSizeRef:s,mergedDisabledRef:w}=u,g=ref(e.defaultValue),v=toRef(e,"value"),y=useMergedState(v,g),m=computed(()=>y.value===e.checkedValue),d=ref(!1),f=ref(!1),x=computed(()=>{const{railStyle:F}=e;if(!!F)return F({focused:f.value,checked:m.value})});function k(F){const{"onUpdate:value":U,onChange:Y,onUpdateValue:Q}=e,{nTriggerFormInput:q,nTriggerFormChange:ne}=u;U&&call(U,F),Q&&call(Q,F),Y&&call(Y,F),g.value=F,q(),ne()}function P(){const{nTriggerFormFocus:F}=u;F()}function S(){const{nTriggerFormBlur:F}=u;F()}function E(){e.loading||w.value||(y.value!==e.checkedValue?k(e.checkedValue):k(e.uncheckedValue))}function M(){f.value=!0,P()}function T(){f.value=!1,S(),d.value=!1}function D(F){e.loading||w.value||F.key===" "&&(y.value!==e.checkedValue?k(e.checkedValue):k(e.uncheckedValue),d.value=!1)}function I(F){e.loading||w.value||F.key===" "&&(F.preventDefault(),d.value=!0)}const N=computed(()=>{const{value:F}=s,{self:{opacityDisabled:U,railColor:Y,railColorActive:Q,buttonBoxShadow:q,buttonColor:ne,boxShadowFocus:J,loadingColor:re,textColor:X,iconColor:j,[createKey("buttonHeight",F)]:Z,[createKey("buttonWidth",F)]:W,[createKey("buttonWidthPressed",F)]:te,[createKey("railHeight",F)]:le,[createKey("railWidth",F)]:oe,[createKey("railBorderRadius",F)]:Ee,[createKey("buttonBorderRadius",F)]:Ae},common:{cubicBezierEaseInOut:ve}}=o.value;let ke,Ce,Pe;return supportCssMax?(ke=`calc((${le} - ${Z}) / 2)`,Ce=`max(${le}, ${Z})`,Pe=`max(${oe}, calc(${oe} + ${Z} - ${le}))`):(ke=pxfy((depx(le)-depx(Z))/2),Ce=pxfy(Math.max(depx(le),depx(Z))),Pe=depx(le)>depx(Z)?oe:pxfy(depx(oe)+depx(Z)-depx(le))),{"--n-bezier":ve,"--n-button-border-radius":Ae,"--n-button-box-shadow":q,"--n-button-color":ne,"--n-button-width":W,"--n-button-width-pressed":te,"--n-button-height":Z,"--n-height":Ce,"--n-offset":ke,"--n-opacity-disabled":U,"--n-rail-border-radius":Ee,"--n-rail-color":Y,"--n-rail-color-active":Q,"--n-rail-height":le,"--n-rail-width":oe,"--n-width":Pe,"--n-box-shadow-focus":J,"--n-loading-color":re,"--n-text-color":X,"--n-icon-color":j}}),O=r?useThemeClass("switch",computed(()=>s.value[0]),N,e):void 0;return{handleClick:E,handleBlur:T,handleFocus:M,handleKeyup:D,handleKeydown:I,mergedRailStyle:x,pressed:d,mergedClsPrefix:n,mergedValue:y,checked:m,mergedDisabled:w,cssVars:r?void 0:N,themeClass:O==null?void 0:O.themeClass,onRender:O==null?void 0:O.onRender}},render(){const{mergedClsPrefix:e,mergedDisabled:n,checked:r,mergedRailStyle:o,onRender:u,$slots:s}=this;u==null||u();const{checked:w,unchecked:g,icon:v,"checked-icon":y,"unchecked-icon":m}=s,d=!(isSlotEmpty(v)&&isSlotEmpty(y)&&isSlotEmpty(m));return h$1("div",{role:"switch","aria-checked":r,class:[`${e}-switch`,this.themeClass,d&&`${e}-switch--icon`,r&&`${e}-switch--active`,n&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.loading&&`${e}-switch--loading`,this.pressed&&`${e}-switch--pressed`,this.rubberBand&&`${e}-switch--rubber-band`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},h$1("div",{class:`${e}-switch__rail`,"aria-hidden":"true",style:o},resolveWrappedSlot(w,f=>resolveWrappedSlot(g,x=>f||x?h$1("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},h$1("div",{class:`${e}-switch__rail-placeholder`},h$1("div",{class:`${e}-switch__button-placeholder`}),f),h$1("div",{class:`${e}-switch__rail-placeholder`},h$1("div",{class:`${e}-switch__button-placeholder`}),x)):null)),h$1("div",{class:`${e}-switch__button`},resolveWrappedSlot(v,f=>resolveWrappedSlot(y,x=>resolveWrappedSlot(m,k=>h$1(NIconSwitchTransition,null,{default:()=>this.loading?h$1(NBaseLoading,{key:"loading",clsPrefix:e,strokeWidth:20}):this.checked&&(x||f)?h$1("div",{class:`${e}-switch__button-icon`,key:x?"checked-icon":"icon"},x||f):!this.checked&&(k||f)?h$1("div",{class:`${e}-switch__button-icon`,key:k?"unchecked-icon":"icon"},k||f):null})))),resolveWrappedSlot(w,f=>f&&h$1("div",{key:"checked",class:`${e}-switch__checked`},f)),resolveWrappedSlot(g,f=>f&&h$1("div",{key:"unchecked",class:`${e}-switch__unchecked`},f)))))}}),_export_sfc=(e,n)=>{const r=e.__vccOpts||e;for(const[o,u]of n)r[o]=u;return r},{message}=createDiscreteApi(["message"]);window.$message=message;const _sfc_main$4u=defineComponent({});function _sfc_render$2Q(e,n,r,o,u,s){return openBlock(),createElementBlock("div")}const __unplugin_components_19$1=_export_sfc(_sfc_main$4u,[["render",_sfc_render$2Q]]),_sfc_main$4t={},_hoisted_1$46={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3T=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.4697 3.46967L17.5304 4.53033L3.53039 18.5303L2.46973 17.4697L16.4697 3.46967Z",fill:"currentColor"},null,-1),_hoisted_3$3w=[_hoisted_2$3T];function _sfc_render$2P(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$46,_hoisted_3$3w)}const __unplugin_components_13$2=_export_sfc(_sfc_main$4t,[["render",_sfc_render$2P]]),_sfc_main$4s={},_hoisted_1$45={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3S=createBaseVNode("rect",{x:"2",y:"4",width:"16",height:"12",rx:"1",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$3v=[_hoisted_2$3S];function _sfc_render$2O(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$45,_hoisted_3$3v)}const __unplugin_components_9$5=_export_sfc(_sfc_main$4s,[["render",_sfc_render$2O]]),_sfc_main$4r={},_hoisted_1$44={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3R=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 4V3H3.00079V4H16ZM16 8V7H0.000976562V8H16ZM16 11V12H6.00061V11H16Z",fill:"currentColor"},null,-1),_hoisted_3$3u=[_hoisted_2$3R];function _sfc_render$2N(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$44,_hoisted_3$3u)}const __unplugin_components_7$9=_export_sfc(_sfc_main$4r,[["render",_sfc_render$2N]]),_sfc_main$4q={},_hoisted_1$43={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3Q=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 4V3H0V4H16ZM16 12V11H0V12H16ZM13 7V8H3V7H13Z",fill:"currentColor"},null,-1),_hoisted_3$3t=[_hoisted_2$3Q];function _sfc_render$2M(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$43,_hoisted_3$3t)}const __unplugin_components_4$e=_export_sfc(_sfc_main$4q,[["render",_sfc_render$2M]]),_sfc_main$4p={},_hoisted_1$42={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3P=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 4V3H0V4H13ZM16 8V7H0V8H16ZM10 11V12H0V11H10Z",fill:"currentColor"},null,-1),_hoisted_3$3s=[_hoisted_2$3P];function _sfc_render$2L(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$42,_hoisted_3$3s)}const __unplugin_components_6$a=_export_sfc(_sfc_main$4p,[["render",_sfc_render$2L]]),_sfc_main$4o={},_hoisted_1$41={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3O=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.0596 5.90881L11.9398 6.72441L8.24969 10.707L4.55957 6.72441L5.4398 5.90881L8.24969 8.94096L11.0596 5.90881Z",fill:"currentColor"},null,-1),_hoisted_3$3r=[_hoisted_2$3O];function _sfc_render$2K(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$41,_hoisted_3$3r)}const __unplugin_components_0$z=_export_sfc(_sfc_main$4o,[["render",_sfc_render$2K]]),_sfc_main$4n={},_hoisted_1$40={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3N=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.62085 9.99988C2.62085 5.92455 5.92455 2.62085 9.99988 2.62085C14.0752 2.62085 17.3789 5.92455 17.3789 9.99988C17.3789 14.0752 14.0752 17.3789 9.99988 17.3789C5.92455 17.3789 2.62085 14.0752 2.62085 9.99988ZM9.99988 1.12085C5.09613 1.12085 1.12085 5.09613 1.12085 9.99988C1.12085 14.9036 5.09613 18.8789 9.99988 18.8789C14.9036 18.8789 18.8789 14.9036 18.8789 9.99988C18.8789 5.09613 14.9036 1.12085 9.99988 1.12085ZM10.4652 4.81199V10.1907L12.8542 12.5798L11.7936 13.6404L8.96514 10.812L8.96519 10.8119V4.81199H10.4652Z",fill:"currentColor"},null,-1),_hoisted_3$3q=[_hoisted_2$3N];function _sfc_render$2J(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$40,_hoisted_3$3q)}const __unplugin_components_3$f=_export_sfc(_sfc_main$4n,[["render",_sfc_render$2J]]),_sfc_main$4m={},_hoisted_1$3$={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3M=createBaseVNode("rect",{x:"2.75",y:"2.75",width:"11.5",height:"11.5",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$3p=createBaseVNode("path",{d:"M19.25 12.5C19.25 15.6756 16.6756 18.25 13.5 18.25C10.3244 18.25 7.75 15.6756 7.75 12.5C7.75 9.32436 10.3244 6.75 13.5 6.75C16.6756 6.75 19.25 9.32436 19.25 12.5Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_4$1k=[_hoisted_2$3M,_hoisted_3$3p];function _sfc_render$2I(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3$,_hoisted_4$1k)}const __unplugin_components_2$g=_export_sfc(_sfc_main$4m,[["render",_sfc_render$2I]]),Button_vue_vue_type_style_index_0_lang="",_hoisted_1$3_=["disabled","title"],_sfc_main$4l={__name:"Button",props:{title:String,isActive:Boolean,disabled:Boolean||void 0,className:String,mediaQueryClassName:String,img:String,onClick:Function},setup(e){const n=u=>{u==null||u.stopPropagation(),u==null||u.preventDefault()},{img:r}=e,o=r==null?void 0:r.trim().startsWith("data:");return r&&!o&&(!r.includes(".")||r.startsWith("<svg")),(u,s)=>(openBlock(),createElementBlock("button",{class:normalizeClass(["button",{active:e.isActive,disabled:e.disabled,[e.mediaQueryClassName]:e.mediaQueryClassName,[e.className]:e.className}]),onClick:s[0]||(s[0]=w=>e.disabled||!e.onClick?n():e.onClick(w)),onDblclick:s[1]||(s[1]=w=>e.disabled?n:u.onDoubleClick),onMouseup:s[2]||(s[2]=w=>e.disabled?n:u.onDoubleClick),disabled:e.disabled,title:e.title},[renderSlot(u.$slots,"default")],42,_hoisted_1$3_))}},_sfc_main$4k={},_hoisted_1$3Z={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3L=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.75 2.75V6H15.25V4.25H10.75V16.25H12.3337V17.75H7.66699V16.25H9.25V4.25H4.75V6H3.25V2.75H16.75Z",fill:"currentColor"},null,-1),_hoisted_3$3o=[_hoisted_2$3L];function _sfc_render$2H(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3Z,_hoisted_3$3o)}const __unplugin_components_0$y=_export_sfc(_sfc_main$4k,[["render",_sfc_render$2H]]),_imports_0$2=""+new URL("colorful.c840ddf1.svg",import.meta.url).href;var isVue2=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=e=>activePinia=e,piniaSymbol=Symbol();function isPlainObject$1(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var MutationType;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const e=effectScope(!0),n=e.run(()=>ref({}));let r=[],o=[];const u=markRaw({install(s){setActivePinia(u),u._a=s,s.provide(piniaSymbol,u),s.config.globalProperties.$pinia=u,o.forEach(w=>r.push(w)),o=[]},use(s){return!this._a&&!isVue2?o.push(s):r.push(s),this},_p:r,_a:null,_e:e,_s:new Map,state:n});return u}const noop$1=()=>{};function addSubscription(e,n,r,o=noop$1){e.push(n);const u=()=>{const s=e.indexOf(n);s>-1&&(e.splice(s,1),o())};return!r&&getCurrentScope()&&onScopeDispose(u),u}function triggerSubscriptions(e,...n){e.slice().forEach(r=>{r(...n)})}const fallbackRunWithContext=e=>e();function mergeReactiveObjects(e,n){e instanceof Map&&n instanceof Map&&n.forEach((r,o)=>e.set(o,r)),e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const r in n){if(!n.hasOwnProperty(r))continue;const o=n[r],u=e[r];isPlainObject$1(u)&&isPlainObject$1(o)&&e.hasOwnProperty(r)&&!isRef(o)&&!isReactive(o)?e[r]=mergeReactiveObjects(u,o):e[r]=o}return e}const skipHydrateSymbol=Symbol();function shouldHydrate(e){return!isPlainObject$1(e)||!e.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(e){return!!(isRef(e)&&e.effect)}function createOptionsStore(e,n,r,o){const{state:u,actions:s,getters:w}=n,g=r.state.value[e];let v;function y(){g||(r.state.value[e]=u?u():{});const m=toRefs(r.state.value[e]);return assign(m,s,Object.keys(w||{}).reduce((d,f)=>(d[f]=markRaw(computed(()=>{setActivePinia(r);const x=r._s.get(e);return w[f].call(x,x)})),d),{}))}return v=createSetupStore(e,y,n,r,o,!0),v}function createSetupStore(e,n,r={},o,u,s){let w;const g=assign({actions:{}},r),v={deep:!0};let y,m,d=[],f=[],x;const k=o.state.value[e];!s&&!k&&(o.state.value[e]={}),ref({});let P;function S(F){let U;y=m=!1,typeof F=="function"?(F(o.state.value[e]),U={type:MutationType.patchFunction,storeId:e,events:x}):(mergeReactiveObjects(o.state.value[e],F),U={type:MutationType.patchObject,payload:F,storeId:e,events:x});const Y=P=Symbol();nextTick().then(()=>{P===Y&&(y=!0)}),m=!0,triggerSubscriptions(d,U,o.state.value[e])}const E=s?function(){const{state:U}=r,Y=U?U():{};this.$patch(Q=>{assign(Q,Y)})}:noop$1;function M(){w.stop(),d=[],f=[],o._s.delete(e)}function T(F,U){return function(){setActivePinia(o);const Y=Array.from(arguments),Q=[],q=[];function ne(X){Q.push(X)}function J(X){q.push(X)}triggerSubscriptions(f,{args:Y,name:F,store:I,after:ne,onError:J});let re;try{re=U.apply(this&&this.$id===e?this:I,Y)}catch(X){throw triggerSubscriptions(q,X),X}return re instanceof Promise?re.then(X=>(triggerSubscriptions(Q,X),X)).catch(X=>(triggerSubscriptions(q,X),Promise.reject(X))):(triggerSubscriptions(Q,re),re)}}const D={_p:o,$id:e,$onAction:addSubscription.bind(null,f),$patch:S,$reset:E,$subscribe(F,U={}){const Y=addSubscription(d,F,U.detached,()=>Q()),Q=w.run(()=>watch(()=>o.state.value[e],q=>{(U.flush==="sync"?m:y)&&F({storeId:e,type:MutationType.direct,events:x},q)},assign({},v,U)));return Y},$dispose:M},I=reactive(D);o._s.set(e,I);const O=(o._a&&o._a.runWithContext||fallbackRunWithContext)(()=>o._e.run(()=>(w=effectScope()).run(n)));for(const F in O){const U=O[F];if(isRef(U)&&!isComputed(U)||isReactive(U))s||(k&&shouldHydrate(U)&&(isRef(U)?U.value=k[F]:mergeReactiveObjects(U,k[F])),o.state.value[e][F]=U);else if(typeof U=="function"){const Y=T(F,U);O[F]=Y,g.actions[F]=U}}return assign(I,O),assign(toRaw(I),O),Object.defineProperty(I,"$state",{get:()=>o.state.value[e],set:F=>{S(U=>{assign(U,F)})}}),o._p.forEach(F=>{assign(I,w.run(()=>F({store:I,app:o._a,pinia:o,options:g})))}),k&&s&&r.hydrate&&r.hydrate(I.$state,k),y=!0,m=!0,I}function defineStore(e,n,r){let o,u;const s=typeof n=="function";typeof e=="string"?(o=e,u=s?r:n):(u=e,o=e.id);function w(g,v){const y=hasInjectionContext();return g=g||(y?inject(piniaSymbol,null):null),g&&setActivePinia(g),g=activePinia,g._s.has(o)||(s?createSetupStore(o,n,u,g):createOptionsStore(o,u,g)),g._s.get(o)}return w.$id=o,w}function _assertClassBrand(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function _callSuper(e,n,r){return n=_getPrototypeOf(n),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(n,r||[],_getPrototypeOf(e).constructor):n.apply(e,r))}function _classPrivateFieldGet2(e,n){return e.get(_assertClassBrand(e,n))}function _classPrivateFieldSet2(e,n,r){return e.set(_assertClassBrand(e,n),r),r}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!e})()}function _iterableToArrayLimit(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o,u,s,w,g=[],v=!0,y=!1;try{if(s=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(o=s.call(r)).done)&&(g.push(o.value),g.length!==n);v=!0);}catch(m){y=!0,u=m}finally{try{if(!v&&r.return!=null&&(w=r.return(),Object(w)!==w))return}finally{if(y)throw u}}return g}}function ownKeys$1(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,o)}return r}function _objectSpread2$1(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(r),!0).forEach(function(o){_defineProperty$1(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function _regeneratorRuntime(){_regeneratorRuntime=function(){return n};var e,n={},r=Object.prototype,o=r.hasOwnProperty,u=Object.defineProperty||function(X,j,Z){X[j]=Z.value},s=typeof Symbol=="function"?Symbol:{},w=s.iterator||"@@iterator",g=s.asyncIterator||"@@asyncIterator",v=s.toStringTag||"@@toStringTag";function y(X,j,Z){return Object.defineProperty(X,j,{value:Z,enumerable:!0,configurable:!0,writable:!0}),X[j]}try{y({},"")}catch{y=function(j,Z,W){return j[Z]=W}}function m(X,j,Z,W){var te=j&&j.prototype instanceof E?j:E,le=Object.create(te.prototype),oe=new J(W||[]);return u(le,"_invoke",{value:Y(X,Z,oe)}),le}function d(X,j,Z){try{return{type:"normal",arg:X.call(j,Z)}}catch(W){return{type:"throw",arg:W}}}n.wrap=m;var f="suspendedStart",x="suspendedYield",k="executing",P="completed",S={};function E(){}function M(){}function T(){}var D={};y(D,w,function(){return this});var I=Object.getPrototypeOf,N=I&&I(I(re([])));N&&N!==r&&o.call(N,w)&&(D=N);var O=T.prototype=E.prototype=Object.create(D);function F(X){["next","throw","return"].forEach(function(j){y(X,j,function(Z){return this._invoke(j,Z)})})}function U(X,j){function Z(te,le,oe,Ee){var Ae=d(X[te],X,le);if(Ae.type!=="throw"){var ve=Ae.arg,ke=ve.value;return ke&&typeof ke=="object"&&o.call(ke,"__await")?j.resolve(ke.__await).then(function(Ce){Z("next",Ce,oe,Ee)},function(Ce){Z("throw",Ce,oe,Ee)}):j.resolve(ke).then(function(Ce){ve.value=Ce,oe(ve)},function(Ce){return Z("throw",Ce,oe,Ee)})}Ee(Ae.arg)}var W;u(this,"_invoke",{value:function(te,le){function oe(){return new j(function(Ee,Ae){Z(te,le,Ee,Ae)})}return W=W?W.then(oe,oe):oe()}})}function Y(X,j,Z){var W=f;return function(te,le){if(W===k)throw Error("Generator is already running");if(W===P){if(te==="throw")throw le;return{value:e,done:!0}}for(Z.method=te,Z.arg=le;;){var oe=Z.delegate;if(oe){var Ee=Q(oe,Z);if(Ee){if(Ee===S)continue;return Ee}}if(Z.method==="next")Z.sent=Z._sent=Z.arg;else if(Z.method==="throw"){if(W===f)throw W=P,Z.arg;Z.dispatchException(Z.arg)}else Z.method==="return"&&Z.abrupt("return",Z.arg);W=k;var Ae=d(X,j,Z);if(Ae.type==="normal"){if(W=Z.done?P:x,Ae.arg===S)continue;return{value:Ae.arg,done:Z.done}}Ae.type==="throw"&&(W=P,Z.method="throw",Z.arg=Ae.arg)}}}function Q(X,j){var Z=j.method,W=X.iterator[Z];if(W===e)return j.delegate=null,Z==="throw"&&X.iterator.return&&(j.method="return",j.arg=e,Q(X,j),j.method==="throw")||Z!=="return"&&(j.method="throw",j.arg=new TypeError("The iterator does not provide a '"+Z+"' method")),S;var te=d(W,X.iterator,j.arg);if(te.type==="throw")return j.method="throw",j.arg=te.arg,j.delegate=null,S;var le=te.arg;return le?le.done?(j[X.resultName]=le.value,j.next=X.nextLoc,j.method!=="return"&&(j.method="next",j.arg=e),j.delegate=null,S):le:(j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,S)}function q(X){var j={tryLoc:X[0]};1 in X&&(j.catchLoc=X[1]),2 in X&&(j.finallyLoc=X[2],j.afterLoc=X[3]),this.tryEntries.push(j)}function ne(X){var j=X.completion||{};j.type="normal",delete j.arg,X.completion=j}function J(X){this.tryEntries=[{tryLoc:"root"}],X.forEach(q,this),this.reset(!0)}function re(X){if(X||X===""){var j=X[w];if(j)return j.call(X);if(typeof X.next=="function")return X;if(!isNaN(X.length)){var Z=-1,W=function te(){for(;++Z<X.length;)if(o.call(X,Z))return te.value=X[Z],te.done=!1,te;return te.value=e,te.done=!0,te};return W.next=W}}throw new TypeError(typeof X+" is not iterable")}return M.prototype=T,u(O,"constructor",{value:T,configurable:!0}),u(T,"constructor",{value:M,configurable:!0}),M.displayName=y(T,v,"GeneratorFunction"),n.isGeneratorFunction=function(X){var j=typeof X=="function"&&X.constructor;return!!j&&(j===M||(j.displayName||j.name)==="GeneratorFunction")},n.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,T):(X.__proto__=T,y(X,v,"GeneratorFunction")),X.prototype=Object.create(O),X},n.awrap=function(X){return{__await:X}},F(U.prototype),y(U.prototype,g,function(){return this}),n.AsyncIterator=U,n.async=function(X,j,Z,W,te){te===void 0&&(te=Promise);var le=new U(m(X,j,Z,W),te);return n.isGeneratorFunction(j)?le:le.next().then(function(oe){return oe.done?oe.value:le.next()})},F(O),y(O,v,"Generator"),y(O,w,function(){return this}),y(O,"toString",function(){return"[object Generator]"}),n.keys=function(X){var j=Object(X),Z=[];for(var W in j)Z.push(W);return Z.reverse(),function te(){for(;Z.length;){var le=Z.pop();if(le in j)return te.value=le,te.done=!1,te}return te.done=!0,te}},n.values=re,J.prototype={constructor:J,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(ne),!X)for(var j in this)j.charAt(0)==="t"&&o.call(this,j)&&!isNaN(+j.slice(1))&&(this[j]=e)},stop:function(){this.done=!0;var X=this.tryEntries[0].completion;if(X.type==="throw")throw X.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var j=this;function Z(Ae,ve){return le.type="throw",le.arg=X,j.next=Ae,ve&&(j.method="next",j.arg=e),!!ve}for(var W=this.tryEntries.length-1;W>=0;--W){var te=this.tryEntries[W],le=te.completion;if(te.tryLoc==="root")return Z("end");if(te.tryLoc<=this.prev){var oe=o.call(te,"catchLoc"),Ee=o.call(te,"finallyLoc");if(oe&&Ee){if(this.prev<te.catchLoc)return Z(te.catchLoc,!0);if(this.prev<te.finallyLoc)return Z(te.finallyLoc)}else if(oe){if(this.prev<te.catchLoc)return Z(te.catchLoc,!0)}else{if(!Ee)throw Error("try statement without catch or finally");if(this.prev<te.finallyLoc)return Z(te.finallyLoc)}}}},abrupt:function(X,j){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var W=this.tryEntries[Z];if(W.tryLoc<=this.prev&&o.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var te=W;break}}te&&(X==="break"||X==="continue")&&te.tryLoc<=j&&j<=te.finallyLoc&&(te=null);var le=te?te.completion:{};return le.type=X,le.arg=j,te?(this.method="next",this.next=te.finallyLoc,S):this.complete(le)},complete:function(X,j){if(X.type==="throw")throw X.arg;return X.type==="break"||X.type==="continue"?this.next=X.arg:X.type==="return"?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):X.type==="normal"&&j&&(this.next=j),S},finish:function(X){for(var j=this.tryEntries.length-1;j>=0;--j){var Z=this.tryEntries[j];if(Z.finallyLoc===X)return this.complete(Z.completion,Z.afterLoc),ne(Z),S}},catch:function(X){for(var j=this.tryEntries.length-1;j>=0;--j){var Z=this.tryEntries[j];if(Z.tryLoc===X){var W=Z.completion;if(W.type==="throw"){var te=W.arg;ne(Z)}return te}}throw Error("illegal catch attempt")},delegateYield:function(X,j,Z){return this.delegate={iterator:re(X),resultName:j,nextLoc:Z},this.method==="next"&&(this.arg=e),S}},n}function _toPrimitive(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,n||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function _toPropertyKey(e){var n=_toPrimitive(e,"string");return typeof n=="symbol"?n:n+""}function _typeof$1(e){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof$1(e)}function asyncGeneratorStep(e,n,r,o,u,s,w){try{var g=e[s](w),v=g.value}catch(y){return void r(y)}g.done?n(v):Promise.resolve(v).then(o,u)}function _asyncToGenerator(e){return function(){var n=this,r=arguments;return new Promise(function(o,u){var s=e.apply(n,r);function w(v){asyncGeneratorStep(s,o,u,w,g,"next",v)}function g(v){asyncGeneratorStep(s,o,u,w,g,"throw",v)}w(void 0)})}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$1(e,n,r){return(n=_toPropertyKey(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _inherits(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&_setPrototypeOf(e,n)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(e)}function _setPrototypeOf(e,n){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},_setPrototypeOf(e,n)}function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _superPropBase(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&(e=_getPrototypeOf(e))!==null;);return e}function _get(){return _get=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,n,r){var o=_superPropBase(e,n);if(o){var u=Object.getOwnPropertyDescriptor(o,n);return u.get?u.get.call(arguments.length<3?e:r):u.value}},_get.apply(this,arguments)}function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray$1(e,n)||_nonIterableRest()}function _toConsumableArray$1(e){return _arrayWithoutHoles$1(e)||_iterableToArray$1(e)||_unsupportedIterableToArray$1(e)||_nonIterableSpread$1()}function _arrayWithoutHoles$1(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray$1(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _unsupportedIterableToArray$1(e,n){if(e){if(typeof e=="string")return _arrayLikeToArray$1(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$1(e,n):void 0}}function _arrayLikeToArray$1(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _createForOfIteratorHelper(e,n){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray$1(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var o=0,u=function(){};return{s:u,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(v){throw v},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,w=!0,g=!1;return{s:function(){r=r.call(e)},n:function(){var v=r.next();return w=v.done,v},e:function(v){g=!0,s=v},f:function(){try{w||r.return==null||r.return()}finally{if(g)throw s}}}}function _checkPrivateRedeclaration(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldInitSpec(e,n,r){_checkPrivateRedeclaration(e,n),n.set(e,r)}function _classPrivateMethodInitSpec(e,n){_checkPrivateRedeclaration(e,n),n.add(e)}var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace$1(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var r=function o(){if(this instanceof o){var u=[null];return u.push.apply(u,arguments),new(Function.bind.apply(n,u))}return n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var u=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,u.get?u:{enumerable:!0,get:function(){return e[o]}})}),r}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(e){pdfExports=e}},_nodeResolve_empty={},_nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty}),require$$0=getAugmentedNamespace$1(_nodeResolve_empty$1),path2dPolyfill_esm={},hasRequiredPath2dPolyfill_esm;function requirePath2dPolyfill_esm(){if(hasRequiredPath2dPolyfill_esm)return path2dPolyfill_esm;function e(m,d,f){if(f||arguments.length===2)for(var x,k=0,P=d.length;k<P;k++)!x&&k in d||(x||(x=Array.prototype.slice.call(d,0,k)),x[k]=d[k]);return m.concat(x||Array.prototype.slice.call(d))}hasRequiredPath2dPolyfill_esm=1;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi,o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function u(m){var d=[],f=String(m).trim();return f[0]!=="M"&&f[0]!=="m"||f.replace(r,function(x,k,P){var S=function(T){var D=T.match(o);return D?D.map(Number):[]}(P),E=k.toLowerCase(),M=k;if(E==="m"&&S.length>2&&(d.push(e([M],S.splice(0,2),!0)),E="l",M=M==="m"?"l":"L"),S.length<n[E])return"";for(d.push(e([M],S.splice(0,n[E]),!0));S.length>=n[E]&&S.length&&n[E];)d.push(e([M],S.splice(0,n[E]),!0));return""}),d}function s(m,d){var f=m.x*Math.cos(d)-m.y*Math.sin(d),x=m.y*Math.cos(d)+m.x*Math.sin(d);m.x=f,m.y=x}function w(m,d){m.x*=d,m.y*=d}var g=function(){function m(d){var f;this.commands=[],d&&d instanceof m?(f=this.commands).push.apply(f,d.commands):d&&(this.commands=u(d))}return m.prototype.addPath=function(d){var f;d&&d instanceof m&&(f=this.commands).push.apply(f,d.commands)},m.prototype.moveTo=function(d,f){this.commands.push(["M",d,f])},m.prototype.lineTo=function(d,f){this.commands.push(["L",d,f])},m.prototype.arc=function(d,f,x,k,P,S){this.commands.push(["AC",d,f,x,k,P,!!S])},m.prototype.arcTo=function(d,f,x,k,P){this.commands.push(["AT",d,f,x,k,P])},m.prototype.ellipse=function(d,f,x,k,P,S,E,M){this.commands.push(["E",d,f,x,k,P,S,E,!!M])},m.prototype.closePath=function(){this.commands.push(["Z"])},m.prototype.bezierCurveTo=function(d,f,x,k,P,S){this.commands.push(["C",d,f,x,k,P,S])},m.prototype.quadraticCurveTo=function(d,f,x,k){this.commands.push(["Q",d,f,x,k])},m.prototype.rect=function(d,f,x,k){this.commands.push(["R",d,f,x,k])},m.prototype.roundRect=function(d,f,x,k,P){P===void 0?this.commands.push(["RR",d,f,x,k,0]):this.commands.push(["RR",d,f,x,k,P])},m}();function v(m,d){var f,x,k,P,S,E,M,T,D,I,N,O,F,U,Y,Q,q,ne,J,re,X,j,Z,W,te=0,le=0,oe=null,Ee=null,Ae=null,ve=null,ke=null,Ce=null;m.beginPath();for(var Pe=0;Pe<d.length;++Pe){(ne=d[Pe][0])!=="S"&&ne!=="s"&&ne!=="C"&&ne!=="c"&&(oe=null,Ee=null),ne!=="T"&&ne!=="t"&&ne!=="Q"&&ne!=="q"&&(Ae=null,ve=null);var Me=void 0;switch(ne){case"m":case"M":Me=d[Pe],ne==="m"?(te+=Me[1],le+=Me[2]):(te=Me[1],le=Me[2]),ne!=="M"&&ke||(ke={x:te,y:le}),m.moveTo(te,le);break;case"l":te+=(Me=d[Pe])[1],le+=Me[2],m.lineTo(te,le);break;case"L":te=(Me=d[Pe])[1],le=Me[2],m.lineTo(te,le);break;case"H":te=(Me=d[Pe])[1],m.lineTo(te,le);break;case"h":te+=(Me=d[Pe])[1],m.lineTo(te,le);break;case"V":le=(Me=d[Pe])[1],m.lineTo(te,le);break;case"v":le+=(Me=d[Pe])[1],m.lineTo(te,le);break;case"a":case"A":if(Me=d[Pe],Ce===null)throw new Error("This should never happen");ne==="a"?(te+=Me[6],le+=Me[7]):(te=Me[6],le=Me[7]),U=Me[1],Y=Me[2],M=Me[3]*Math.PI/180,k=!!Me[4],P=!!Me[5],S={x:te,y:le},s(E={x:(Ce.x-S.x)/2,y:(Ce.y-S.y)/2},-M),(T=E.x*E.x/(U*U)+E.y*E.y/(Y*Y))>1&&(U*=T=Math.sqrt(T),Y*=T),D=U*U*Y*Y,I=U*U*E.y*E.y+Y*Y*E.x*E.x,w(J={x:U*E.y/Y,y:-Y*E.x/U},P!==k?Math.sqrt((D-I)/I)||0:-Math.sqrt((D-I)/I)||0),x=Math.atan2((E.y-J.y)/Y,(E.x-J.x)/U),f=Math.atan2(-(E.y+J.y)/Y,-(E.x+J.x)/U),s(J,M),j=J,Z=(S.x+Ce.x)/2,W=(S.y+Ce.y)/2,j.x+=Z,j.y+=W,m.save(),m.translate(J.x,J.y),m.rotate(M),m.scale(U,Y),m.arc(0,0,1,x,f,!P),m.restore();break;case"C":oe=(Me=d[Pe])[3],Ee=Me[4],te=Me[5],le=Me[6],m.bezierCurveTo(Me[1],Me[2],oe,Ee,te,le);break;case"c":Me=d[Pe],m.bezierCurveTo(Me[1]+te,Me[2]+le,Me[3]+te,Me[4]+le,Me[5]+te,Me[6]+le),oe=Me[3]+te,Ee=Me[4]+le,te+=Me[5],le+=Me[6];break;case"S":Me=d[Pe],oe!==null&&Ee!==null||(oe=te,Ee=le),m.bezierCurveTo(2*te-oe,2*le-Ee,Me[1],Me[2],Me[3],Me[4]),oe=Me[1],Ee=Me[2],te=Me[3],le=Me[4];break;case"s":Me=d[Pe],oe!==null&&Ee!==null||(oe=te,Ee=le),m.bezierCurveTo(2*te-oe,2*le-Ee,Me[1]+te,Me[2]+le,Me[3]+te,Me[4]+le),oe=Me[1]+te,Ee=Me[2]+le,te+=Me[3],le+=Me[4];break;case"Q":Ae=(Me=d[Pe])[1],ve=Me[2],te=Me[3],le=Me[4],m.quadraticCurveTo(Ae,ve,te,le);break;case"q":Ae=(Me=d[Pe])[1]+te,ve=Me[2]+le,te+=Me[3],le+=Me[4],m.quadraticCurveTo(Ae,ve,te,le);break;case"T":Ae!==null&&ve!==null||(Ae=te,ve=le),Ae=2*te-Ae,ve=2*le-ve,te=(Me=d[Pe])[1],le=Me[2],m.quadraticCurveTo(Ae,ve,te,le);break;case"t":Ae!==null&&ve!==null||(Ae=te,ve=le),Ae=2*te-Ae,ve=2*le-ve,te+=(Me=d[Pe])[1],le+=Me[2],m.quadraticCurveTo(Ae,ve,te,le);break;case"z":case"Z":ke&&(te=ke.x,le=ke.y),ke=null,m.closePath();break;case"AC":te=(Me=d[Pe])[1],le=Me[2],F=Me[3],x=Me[4],f=Me[5],re=Me[6],m.arc(te,le,F,x,f,re);break;case"AT":N=(Me=d[Pe])[1],O=Me[2],te=Me[3],le=Me[4],F=Me[5],m.arcTo(N,O,te,le,F);break;case"E":te=(Me=d[Pe])[1],le=Me[2],U=Me[3],Y=Me[4],M=Me[5],x=Me[6],f=Me[7],re=Me[8],m.save(),m.translate(te,le),m.rotate(M),m.scale(U,Y),m.arc(0,0,1,x,f,re),m.restore();break;case"R":te=(Me=d[Pe])[1],le=Me[2],Q=Me[3],q=Me[4],ke={x:te,y:le},m.rect(te,le,Q,q);break;case"RR":te=(Me=d[Pe])[1],le=Me[2],Q=Me[3],q=Me[4],X=Me[5],ke={x:te,y:le},m.roundRect(te,le,Q,q,X)}Ce?(Ce.x=te,Ce.y=le):Ce={x:te,y:le}}}function y(m,d,f,x,k){var P=this;if(k===void 0&&(k=0),typeof k=="number"&&(k=[k]),Array.isArray(k)){if(k.length===0||k.length>4)throw new RangeError("Failed to execute 'roundRect' on '".concat(this.constructor.name,"': ").concat(k.length," radii provided. Between one and four radii are necessary."));if(k.forEach(function(I){if(I<0)throw new RangeError("Failed to execute 'roundRect' on '".concat(P.constructor.name,"': Radius value ").concat(I," is negative."))}),k.length===1&&k[0]===0)return this.rect(m,d,f,x);var S,E,M,T=Math.min(f,x)/2,D=S=E=M=Math.min(T,k[0]);k.length===2&&(S=M=Math.min(T,k[1])),k.length===3&&(S=M=Math.min(T,k[1]),E=Math.min(T,k[2])),k.length===4&&(S=Math.min(T,k[1]),E=Math.min(T,k[2]),M=Math.min(T,k[3])),this.moveTo(m,d+x-M),this.arcTo(m,d,m+D,d,D),this.arcTo(m+f,d,m+f,d+S,S),this.arcTo(m+f,d+x,m+f-E,d+x,E),this.arcTo(m,d+x,m,d+x-M,M),this.moveTo(m,d)}}return function(m){if(m&&m.CanvasRenderingContext2D&&!m.Path2D){var d=m.CanvasRenderingContext2D,f=d.prototype.fill,x=d.prototype.stroke,k=d.prototype.isPointInPath;d.prototype.fill=function(){for(var P=[],S=0;S<arguments.length;S++)P[S]=arguments[S];if(!(P[0]instanceof g))return M=P[0]||"nonzero",f.apply(this,[M]);var E=P[0],M=P[1]||"nonzero";v(this,E.commands),f.apply(this,[M])},d.prototype.stroke=function(P){P&&v(this,P.commands),x.apply(this)},d.prototype.isPointInPath=function(){for(var P=[],S=0;S<arguments.length;S++)P[S]=arguments[S];if(P[0]instanceof g){var E=P[0],M=P[1],T=P[2],D=P[3]||"nonzero";return v(this,E.commands),k.apply(this,[M,T,D])}return k.apply(this,P)},m.Path2D=g}}(window),function(m){if(m&&m.CanvasRenderingContext2D){var d=m.CanvasRenderingContext2D,f=m.Path2D;d&&!d.prototype.roundRect&&(d.prototype.roundRect=y),f&&!f.prototype.roundRect&&(f.prototype.roundRect=y)}}(window),path2dPolyfill_esm}var ponyfillExports={},hasRequiredPonyfill;function requirePonyfill(){return hasRequiredPonyfill||(hasRequiredPonyfill=1,function(e){var n=typeof Symbol=="function"&&_typeof$1(Symbol.iterator)==="symbol"?Symbol:function(be){return"Symbol(".concat(be,")")};function r(be,Re){var tt,dt,ft,kt,Et={label:0,sent:function(){if(1&ft[0])throw ft[1];return ft[1]},trys:[],ops:[]};return kt={next:Vt(0),throw:Vt(1),return:Vt(2)},typeof Symbol=="function"&&(kt[Symbol.iterator]=function(){return this}),kt;function Vt(Gt){return function(yn){return Xt([Gt,yn])}}function Xt(Gt){if(tt)throw new TypeError("Generator is already executing.");for(;kt&&(kt=0,Gt[0]&&(Et=0)),Et;)try{if(tt=1,dt&&(ft=2&Gt[0]?dt.return:Gt[0]?dt.throw||((ft=dt.return)&&ft.call(dt),0):dt.next)&&!(ft=ft.call(dt,Gt[1])).done)return ft;switch(dt=0,ft&&(Gt=[2&Gt[0],ft.value]),Gt[0]){case 0:case 1:ft=Gt;break;case 4:return Et.label++,{value:Gt[1],done:!1};case 5:Et.label++,dt=Gt[1],Gt=[0];continue;case 7:Gt=Et.ops.pop(),Et.trys.pop();continue;default:if(!((ft=(ft=Et.trys).length>0&&ft[ft.length-1])||Gt[0]!==6&&Gt[0]!==2)){Et=0;continue}if(Gt[0]===3&&(!ft||Gt[1]>ft[0]&&Gt[1]<ft[3])){Et.label=Gt[1];break}if(Gt[0]===6&&Et.label<ft[1]){Et.label=ft[1],ft=Gt;break}if(ft&&Et.label<ft[2]){Et.label=ft[2],Et.ops.push(Gt);break}ft[2]&&Et.ops.pop(),Et.trys.pop();continue}Gt=Re.call(be,Et)}catch(yn){Gt=[6,yn],dt=0}finally{tt=ft=0}if(5&Gt[0])throw Gt[1];return{value:Gt[0]?Gt[1]:void 0,done:!0}}}function o(be){var Re=typeof Symbol=="function"&&Symbol.iterator,tt=Re&&be[Re],dt=0;if(tt)return tt.call(be);if(be&&typeof be.length=="number")return{next:function(){return be&&dt>=be.length&&(be=void 0),{value:be&&be[dt++],done:!be}}};throw new TypeError(Re?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(be){return this instanceof u?(this.v=be,this):new u(be)}function s(be,Re,tt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt,ft=tt.apply(be,Re||[]),kt=[];return dt={},Et("next"),Et("throw"),Et("return"),dt[Symbol.asyncIterator]=function(){return this},dt;function Et(mn){ft[mn]&&(dt[mn]=function(Nn){return new Promise(function(gi,si){kt.push([mn,Nn,gi,si])>1||Vt(mn,Nn)})})}function Vt(mn,Nn){try{Xt(ft[mn](Nn))}catch(gi){vn(kt[0][3],gi)}}function Xt(mn){mn.value instanceof u?Promise.resolve(mn.value.v).then(Gt,yn):vn(kt[0][2],mn)}function Gt(mn){Vt("next",mn)}function yn(mn){Vt("throw",mn)}function vn(mn,Nn){mn(Nn),kt.shift(),kt.length&&Vt(kt[0][0],kt[0][1])}}function w(be){var Re,tt;return Re={},dt("next"),dt("throw",function(ft){throw ft}),dt("return"),Re[Symbol.iterator]=function(){return this},Re;function dt(ft,kt){Re[ft]=be[ft]?function(Et){return(tt=!tt)?{value:u(be[ft](Et)),done:!1}:kt?kt(Et):Et}:kt}}function g(be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,tt=be[Symbol.asyncIterator];return tt?tt.call(be):(be=typeof o=="function"?o(be):be[Symbol.iterator](),Re={},dt("next"),dt("throw"),dt("return"),Re[Symbol.asyncIterator]=function(){return this},Re);function dt(kt){Re[kt]=be[kt]&&function(Et){return new Promise(function(Vt,Xt){ft(Vt,Xt,(Et=be[kt](Et)).done,Et.value)})}}function ft(kt,Et,Vt,Xt){Promise.resolve(Xt).then(function(Gt){kt({value:Gt,done:Vt})},Et)}}function v(){}function y(be){return _typeof$1(be)==="object"&&be!==null||typeof be=="function"}typeof SuppressedError=="function"&&SuppressedError;var m=v;function d(be,Re){try{Object.defineProperty(be,"name",{value:Re,configurable:!0})}catch{}}var f=Promise,x=Promise.prototype.then,k=Promise.reject.bind(f);function P(be){return new f(be)}function S(be){return P(function(Re){return Re(be)})}function E(be){return k(be)}function M(be,Re,tt){return x.call(be,Re,tt)}function T(be,Re,tt){M(M(be,Re,tt),void 0,m)}function D(be,Re){T(be,Re)}function I(be,Re){T(be,void 0,Re)}function N(be,Re,tt){return M(be,Re,tt)}function O(be){M(be,void 0,m)}var F=function(be){if(typeof queueMicrotask=="function")F=queueMicrotask;else{var Re=S(void 0);F=function(tt){return M(Re,tt)}}return F(be)};function U(be,Re,tt){if(typeof be!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(be,Re,tt)}function Y(be,Re,tt){try{return S(U(be,Re,tt))}catch(dt){return E(dt)}}var Q=16384,q=function(){function be(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(be.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),be.prototype.push=function(Re){var tt=this._back,dt=tt;tt._elements.length===Q-1&&(dt={_elements:[],_next:void 0}),tt._elements.push(Re),dt!==tt&&(this._back=dt,tt._next=dt),++this._size},be.prototype.shift=function(){var Re=this._front,tt=Re,dt=this._cursor,ft=dt+1,kt=Re._elements,Et=kt[dt];return ft===Q&&(tt=Re._next,ft=0),--this._size,this._cursor=ft,Re!==tt&&(this._front=tt),kt[dt]=void 0,Et},be.prototype.forEach=function(Re){for(var tt=this._cursor,dt=this._front,ft=dt._elements;!(tt===ft.length&&dt._next===void 0||tt===ft.length&&(tt=0,(ft=(dt=dt._next)._elements).length===0));)Re(ft[tt]),++tt},be.prototype.peek=function(){var Re=this._front,tt=this._cursor;return Re._elements[tt]},be}(),ne=n("[[AbortSteps]]"),J=n("[[ErrorSteps]]"),re=n("[[CancelSteps]]"),X=n("[[PullSteps]]"),j=n("[[ReleaseSteps]]");function Z(be,Re){be._ownerReadableStream=Re,Re._reader=be,Re._state==="readable"?oe(be):Re._state==="closed"?Ae(be):Ee(be,Re._storedError)}function W(be,Re){return xi(be._ownerReadableStream,Re)}function te(be){var Re=be._ownerReadableStream;Re._state==="readable"?ve(be,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):ke(be,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),Re._readableStreamController[j](),Re._reader=void 0,be._ownerReadableStream=void 0}function le(be){return new TypeError("Cannot "+be+" a stream using a released reader")}function oe(be){be._closedPromise=P(function(Re,tt){be._closedPromise_resolve=Re,be._closedPromise_reject=tt})}function Ee(be,Re){oe(be),ve(be,Re)}function Ae(be){oe(be),Ce(be)}function ve(be,Re){be._closedPromise_reject!==void 0&&(O(be._closedPromise),be._closedPromise_reject(Re),be._closedPromise_resolve=void 0,be._closedPromise_reject=void 0)}function ke(be,Re){Ee(be,Re)}function Ce(be){be._closedPromise_resolve!==void 0&&(be._closedPromise_resolve(void 0),be._closedPromise_resolve=void 0,be._closedPromise_reject=void 0)}var Pe=Number.isFinite||function(be){return typeof be=="number"&&isFinite(be)},Me=Math.trunc||function(be){return be<0?Math.ceil(be):Math.floor(be)};function Le(be){return _typeof$1(be)==="object"||typeof be=="function"}function Te(be,Re){if(be!==void 0&&!Le(be))throw new TypeError("".concat(Re," is not an object."))}function ye(be,Re){if(typeof be!="function")throw new TypeError("".concat(Re," is not a function."))}function _e(be){return _typeof$1(be)==="object"&&be!==null||typeof be=="function"}function we(be,Re){if(!_e(be))throw new TypeError("".concat(Re," is not an object."))}function Se(be,Re,tt){if(be===void 0)throw new TypeError("Parameter ".concat(Re," is required in '").concat(tt,"'."))}function $e(be,Re,tt){if(be===void 0)throw new TypeError("".concat(Re," is required in '").concat(tt,"'."))}function Be(be){return Number(be)}function Oe(be){return be===0?0:be}function Ge(be){return Oe(Me(be))}function Ie(be,Re){var tt=0,dt=Number.MAX_SAFE_INTEGER,ft=Number(be);if(ft=Oe(ft),!Pe(ft))throw new TypeError("".concat(Re," is not a finite number"));if((ft=Ge(ft))<tt||ft>dt)throw new TypeError("".concat(Re," is outside the accepted range of ").concat(tt," to ").concat(dt,", inclusive"));return Pe(ft)&&ft!==0?ft:0}function je(be,Re){if(!wi(be))throw new TypeError("".concat(Re," is not a ReadableStream."))}function qe(be){return new wt(be)}function Ue(be,Re){be._reader._readRequests.push(Re)}function Je(be,Re,tt){var dt=be._reader._readRequests.shift();tt?dt._closeSteps():dt._chunkSteps(Re)}function et(be){return be._reader._readRequests.length}function nt(be){var Re=be._reader;return Re!==void 0&&!!He(Re)}var st,gt,_t,wt=function(){function be(Re){if(Se(Re,1,"ReadableStreamDefaultReader"),je(Re,"First parameter"),ri(Re))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Z(this,Re),this._readRequests=new q}return Object.defineProperty(be.prototype,"closed",{get:function(){return He(this)?this._closedPromise:E(We("closed"))},enumerable:!1,configurable:!0}),be.prototype.cancel=function(Re){return Re===void 0&&(Re=void 0),He(this)?this._ownerReadableStream===void 0?E(le("cancel")):W(this,Re):E(We("cancel"))},be.prototype.read=function(){if(!He(this))return E(We("read"));if(this._ownerReadableStream===void 0)return E(le("read from"));var Re,tt,dt=P(function(ft,kt){Re=ft,tt=kt});return Ve(this,{_chunkSteps:function(ft){return Re({value:ft,done:!1})},_closeSteps:function(){return Re({value:void 0,done:!0})},_errorSteps:function(ft){return tt(ft)}}),dt},be.prototype.releaseLock=function(){if(!He(this))throw We("releaseLock");this._ownerReadableStream!==void 0&&ze(this)},be}();function He(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_readRequests")&&be instanceof wt}function Ve(be,Re){var tt=be._ownerReadableStream;tt._disturbed=!0,tt._state==="closed"?Re._closeSteps():tt._state==="errored"?Re._errorSteps(tt._storedError):tt._readableStreamController[X](Re)}function ze(be){te(be),Ne(be,new TypeError("Reader was released"))}function Ne(be,Re){var tt=be._readRequests;be._readRequests=new q,tt.forEach(function(dt){dt._errorSteps(Re)})}function We(be){return new TypeError("ReadableStreamDefaultReader.prototype.".concat(be," can only be used on a ReadableStreamDefaultReader"))}function Fe(be){return be.slice()}function Ye(be,Re,tt,dt,ft){new Uint8Array(be).set(new Uint8Array(tt,dt,ft),Re)}Object.defineProperties(wt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),d(wt.prototype.cancel,"cancel"),d(wt.prototype.read,"read"),d(wt.prototype.releaseLock,"releaseLock"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(wt.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});var Ke=function(be){return(Ke=typeof be.transfer=="function"?function(Re){return Re.transfer()}:typeof structuredClone=="function"?function(Re){return structuredClone(Re,{transfer:[Re]})}:function(Re){return Re})(be)},Ze=function(be){return(Ze=typeof be.detached=="boolean"?function(Re){return Re.detached}:function(Re){return Re.byteLength===0})(be)};function ot(be,Re,tt){if(be.slice)return be.slice(Re,tt);var dt=tt-Re,ft=new ArrayBuffer(dt);return Ye(ft,0,be,Re,dt),ft}function Qe(be,Re){var tt=be[Re];if(tt!=null){if(typeof tt!="function")throw new TypeError("".concat(String(Re)," is not a function"));return tt}}function at(be){var Re,tt=((Re={})[n.iterator]=function(){return be.iterator},Re),dt=function(){return s(this,arguments,function(){return r(this,function(ft){switch(ft.label){case 0:return[5,o(w(g(tt)))];case 1:case 2:return[4,u.apply(void 0,[ft.sent()])];case 3:return[2,ft.sent()]}})})}();return{iterator:dt,nextMethod:dt.next,done:!1}}var rt,ct=(_t=(st=n.asyncIterator)!==null&&st!==void 0?st:(gt=n.for)===null||gt===void 0?void 0:gt.call(n,"Symbol.asyncIterator"))!==null&&_t!==void 0?_t:"@@asyncIterator";function ht(be,Re,tt){if(Re===void 0&&(Re="sync"),tt===void 0)if(Re==="async"){if((tt=Qe(be,ct))===void 0)return at(ht(be,"sync",Qe(be,n.iterator)))}else tt=Qe(be,n.iterator);if(tt===void 0)throw new TypeError("The object is not iterable");var dt=U(tt,be,[]);if(!y(dt))throw new TypeError("The iterator method must return an object");return{iterator:dt,nextMethod:dt.next,done:!1}}function yt(be){var Re=U(be.nextMethod,be.iterator,[]);if(!y(Re))throw new TypeError("The iterator.next() method must return an object");return Re}function bt(be){return Boolean(be.done)}function $t(be){return be.value}var At=((rt={})[ct]=function(){return this},rt);Object.defineProperty(At,ct,{enumerable:!1});var Ft=function(){function be(Re,tt){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=Re,this._preventCancel=tt}return be.prototype.next=function(){var Re=this,tt=function(){return Re._nextSteps()};return this._ongoingPromise=this._ongoingPromise?N(this._ongoingPromise,tt,tt):tt(),this._ongoingPromise},be.prototype.return=function(Re){var tt=this,dt=function(){return tt._returnSteps(Re)};return this._ongoingPromise?N(this._ongoingPromise,dt,dt):dt()},be.prototype._nextSteps=function(){var Re=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var tt,dt,ft=this._reader,kt=P(function(Et,Vt){tt=Et,dt=Vt});return Ve(ft,{_chunkSteps:function(Et){Re._ongoingPromise=void 0,F(function(){return tt({value:Et,done:!1})})},_closeSteps:function(){Re._ongoingPromise=void 0,Re._isFinished=!0,te(ft),tt({value:void 0,done:!0})},_errorSteps:function(Et){Re._ongoingPromise=void 0,Re._isFinished=!0,te(ft),dt(Et)}}),kt},be.prototype._returnSteps=function(Re){if(this._isFinished)return Promise.resolve({value:Re,done:!0});this._isFinished=!0;var tt=this._reader;if(!this._preventCancel){var dt=W(tt,Re);return te(tt),N(dt,function(){return{value:Re,done:!0}})}return te(tt),S({value:Re,done:!0})},be}(),Ht={next:function(){return Mt(this)?this._asyncIteratorImpl.next():E(pt("next"))},return:function(be){return Mt(this)?this._asyncIteratorImpl.return(be):E(pt("return"))}};function Ot(be,Re){var tt=qe(be),dt=new Ft(tt,Re),ft=Object.create(Ht);return ft._asyncIteratorImpl=dt,ft}function Mt(be){if(!y(be)||!Object.prototype.hasOwnProperty.call(be,"_asyncIteratorImpl"))return!1;try{return be._asyncIteratorImpl instanceof Ft}catch{return!1}}function pt(be){return new TypeError("ReadableStreamAsyncIterator.".concat(be," can only be used on a ReadableSteamAsyncIterator"))}Object.setPrototypeOf(Ht,At);var xt=Number.isNaN||function(be){return be!=be};function Tt(be){return!(typeof be!="number"||xt(be)||be<0)}function Ct(be){var Re=ot(be.buffer,be.byteOffset,be.byteOffset+be.byteLength);return new Uint8Array(Re)}function Nt(be){var Re=be._queue.shift();return be._queueTotalSize-=Re.size,be._queueTotalSize<0&&(be._queueTotalSize=0),Re.value}function jt(be,Re,tt){if(!Tt(tt)||tt===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");be._queue.push({value:Re,size:tt}),be._queueTotalSize+=tt}function nn(be){return be._queue.peek().value}function Wt(be){be._queue=new q,be._queueTotalSize=0}function cn(be){return be===DataView}function Ln(be){return cn(be.constructor)}function Pn(be){return cn(be)?1:be.BYTES_PER_ELEMENT}var Bn=function(){function be(){throw new TypeError("Illegal constructor")}return Object.defineProperty(be.prototype,"view",{get:function(){if(!Ii(this))throw eo("view");return this._view},enumerable:!1,configurable:!0}),be.prototype.respond=function(Re){if(!Ii(this))throw eo("respond");if(Se(Re,1,"respond"),Re=Ie(Re,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Ze(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");hr(this._associatedReadableByteStreamController,Re)},be.prototype.respondWithNewView=function(Re){if(!Ii(this))throw eo("respondWithNewView");if(Se(Re,1,"respondWithNewView"),!ArrayBuffer.isView(Re))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Ze(Re.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");pr(this._associatedReadableByteStreamController,Re)},be}();Object.defineProperties(Bn.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),d(Bn.prototype.respond,"respond"),d(Bn.prototype.respondWithNewView,"respondWithNewView"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Bn.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var zn=function(){function be(){throw new TypeError("Illegal constructor")}return Object.defineProperty(be.prototype,"byobRequest",{get:function(){if(!Yn(this))throw er("byobRequest");return Rr(this)},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"desiredSize",{get:function(){if(!Yn(this))throw er("desiredSize");return Qr(this)},enumerable:!1,configurable:!0}),be.prototype.close=function(){if(!Yn(this))throw er("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var Re=this._controlledReadableByteStream._state;if(Re!=="readable")throw new TypeError("The stream (in ".concat(Re," state) is not in the readable state and cannot be closed"));Wi(this)},be.prototype.enqueue=function(Re){if(!Yn(this))throw er("enqueue");if(Se(Re,1,"enqueue"),!ArrayBuffer.isView(Re))throw new TypeError("chunk must be an array buffer view");if(Re.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(Re.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var tt=this._controlledReadableByteStream._state;if(tt!=="readable")throw new TypeError("The stream (in ".concat(tt," state) is not in the readable state and cannot be enqueued to"));Xn(this,Re)},be.prototype.error=function(Re){if(Re===void 0&&(Re=void 0),!Yn(this))throw er("error");ni(this,Re)},be.prototype[re]=function(Re){$i(this),Wt(this);var tt=this._cancelAlgorithm(Re);return dr(this),tt},be.prototype[X]=function(Re){var tt=this._controlledReadableByteStream;if(this._queueTotalSize>0)Jr(this,Re);else{var dt=this._autoAllocateChunkSize;if(dt!==void 0){var ft=void 0;try{ft=new ArrayBuffer(dt)}catch(Et){return void Re._errorSteps(Et)}var kt={buffer:ft,bufferByteLength:dt,byteOffset:0,byteLength:dt,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(kt)}Ue(tt,Re),ui(this)}},be.prototype[j]=function(){if(this._pendingPullIntos.length>0){var Re=this._pendingPullIntos.peek();Re.readerType="none",this._pendingPullIntos=new q,this._pendingPullIntos.push(Re)}},be}();function Yn(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_controlledReadableByteStream")&&be instanceof zn}function Ii(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_associatedReadableByteStreamController")&&be instanceof Bn}function ui(be){ji(be)&&(be._pulling?be._pullAgain=!0:(be._pulling=!0,T(be._pullAlgorithm(),function(){return be._pulling=!1,be._pullAgain&&(be._pullAgain=!1,ui(be)),null},function(Re){return ni(be,Re),null})))}function $i(be){wn(be),be._pendingPullIntos=new q}function yi(be,Re){var tt=!1;be._state==="closed"&&(tt=!0);var dt=Mi(Re);Re.readerType==="default"?Je(be,dt,tt):la(be,dt,tt)}function Mi(be){var Re=be.bytesFilled,tt=be.elementSize;return new be.viewConstructor(be.buffer,be.byteOffset,Re/tt)}function Dr(be,Re,tt,dt){be._queue.push({buffer:Re,byteOffset:tt,byteLength:dt}),be._queueTotalSize+=dt}function Mo(be,Re,tt,dt){var ft;try{ft=ot(Re,tt,tt+dt)}catch(kt){throw ni(be,kt),kt}Dr(be,ft,0,dt)}function To(be,Re){Re.bytesFilled>0&&Mo(be,Re.buffer,Re.byteOffset,Re.bytesFilled),Ni(be)}function Bo(be,Re){var tt=Math.min(be._queueTotalSize,Re.byteLength-Re.bytesFilled),dt=Re.bytesFilled+tt,ft=tt,kt=!1,Et=dt-dt%Re.elementSize;Et>=Re.minimumFill&&(ft=Et-Re.bytesFilled,kt=!0);for(var Vt=be._queue;ft>0;){var Xt=Vt.peek(),Gt=Math.min(ft,Xt.byteLength),yn=Re.byteOffset+Re.bytesFilled;Ye(Re.buffer,yn,Xt.buffer,Xt.byteOffset,Gt),Xt.byteLength===Gt?Vt.shift():(Xt.byteOffset+=Gt,Xt.byteLength-=Gt),be._queueTotalSize-=Gt,Lo(be,Gt,Re),ft-=Gt}return kt}function Lo(be,Re,tt){tt.bytesFilled+=Re}function kn(be){be._queueTotalSize===0&&be._closeRequested?(dr(be),vo(be._controlledReadableByteStream)):ui(be)}function wn(be){be._byobRequest!==null&&(be._byobRequest._associatedReadableByteStreamController=void 0,be._byobRequest._view=null,be._byobRequest=null)}function Zr(be){for(;be._pendingPullIntos.length>0;){if(be._queueTotalSize===0)return;var Re=be._pendingPullIntos.peek();Bo(be,Re)&&(Ni(be),yi(be._controlledReadableByteStream,Re))}}function ra(be){for(var Re=be._controlledReadableByteStream._reader;Re._readRequests.length>0;){if(be._queueTotalSize===0)return;Jr(be,Re._readRequests.shift())}}function oa(be,Re,tt,dt){var ft,kt=be._controlledReadableByteStream,Et=Re.constructor,Vt=Pn(Et),Xt=Re.byteOffset,Gt=Re.byteLength,yn=tt*Vt;try{ft=Ke(Re.buffer)}catch(si){return void dt._errorSteps(si)}var vn={buffer:ft,bufferByteLength:ft.byteLength,byteOffset:Xt,byteLength:Gt,bytesFilled:0,minimumFill:yn,elementSize:Vt,viewConstructor:Et,readerType:"byob"};if(be._pendingPullIntos.length>0)return be._pendingPullIntos.push(vn),void Ui(kt,dt);if(kt._state!=="closed"){if(be._queueTotalSize>0){if(Bo(be,vn)){var mn=Mi(vn);return kn(be),void dt._chunkSteps(mn)}if(be._closeRequested){var Nn=new TypeError("Insufficient bytes to fill elements in the given buffer");return ni(be,Nn),void dt._errorSteps(Nn)}}be._pendingPullIntos.push(vn),Ui(kt,dt),ui(be)}else{var gi=new Et(vn.buffer,vn.byteOffset,0);dt._closeSteps(gi)}}function Do(be,Re){Re.readerType==="none"&&Ni(be);var tt=be._controlledReadableByteStream;if(no(tt))for(;Fa(tt)>0;)yi(tt,Ni(be))}function aa(be,Re,tt){if(Lo(be,Re,tt),tt.readerType==="none")return To(be,tt),void Zr(be);if(!(tt.bytesFilled<tt.minimumFill)){Ni(be);var dt=tt.bytesFilled%tt.elementSize;if(dt>0){var ft=tt.byteOffset+tt.bytesFilled;Mo(be,tt.buffer,ft-dt,dt)}tt.bytesFilled-=dt,yi(be._controlledReadableByteStream,tt),Zr(be)}}function On(be,Re){var tt=be._pendingPullIntos.peek();wn(be),be._controlledReadableByteStream._state==="closed"?Do(be,tt):aa(be,Re,tt),ui(be)}function Ni(be){return be._pendingPullIntos.shift()}function ji(be){var Re=be._controlledReadableByteStream;return Re._state==="readable"&&!be._closeRequested&&!!be._started&&(!!(nt(Re)&&et(Re)>0)||!!(no(Re)&&Fa(Re)>0)||Qr(be)>0)}function dr(be){be._pullAlgorithm=void 0,be._cancelAlgorithm=void 0}function Wi(be){var Re=be._controlledReadableByteStream;if(!be._closeRequested&&Re._state==="readable")if(be._queueTotalSize>0)be._closeRequested=!0;else{if(be._pendingPullIntos.length>0){var tt=be._pendingPullIntos.peek();if(tt.bytesFilled%tt.elementSize!=0){var dt=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ni(be,dt),dt}}dr(be),vo(Re)}}function Xn(be,Re){var tt=be._controlledReadableByteStream;if(!be._closeRequested&&tt._state==="readable"){var dt=Re.buffer,ft=Re.byteOffset,kt=Re.byteLength;if(Ze(dt))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");var Et=Ke(dt);if(be._pendingPullIntos.length>0){var Vt=be._pendingPullIntos.peek();if(Ze(Vt.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");wn(be),Vt.buffer=Ke(Vt.buffer),Vt.readerType==="none"&&To(be,Vt)}nt(tt)?(ra(be),et(tt)===0?Dr(be,Et,ft,kt):(be._pendingPullIntos.length>0&&Ni(be),Je(tt,new Uint8Array(Et,ft,kt),!1))):no(tt)?(Dr(be,Et,ft,kt),Zr(be)):Dr(be,Et,ft,kt),ui(be)}}function ni(be,Re){var tt=be._controlledReadableByteStream;tt._state==="readable"&&($i(be),Wt(be),dr(be),yo(tt,Re))}function Jr(be,Re){var tt=be._queue.shift();be._queueTotalSize-=tt.byteLength,kn(be);var dt=new Uint8Array(tt.buffer,tt.byteOffset,tt.byteLength);Re._chunkSteps(dt)}function Rr(be){if(be._byobRequest===null&&be._pendingPullIntos.length>0){var Re=be._pendingPullIntos.peek(),tt=new Uint8Array(Re.buffer,Re.byteOffset+Re.bytesFilled,Re.byteLength-Re.bytesFilled),dt=Object.create(Bn.prototype);oi(dt,be,tt),be._byobRequest=dt}return be._byobRequest}function Qr(be){var Re=be._controlledReadableByteStream._state;return Re==="errored"?null:Re==="closed"?0:be._strategyHWM-be._queueTotalSize}function hr(be,Re){var tt=be._pendingPullIntos.peek();if(be._controlledReadableByteStream._state==="closed"){if(Re!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(Re===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(tt.bytesFilled+Re>tt.byteLength)throw new RangeError("bytesWritten out of range")}tt.buffer=Ke(tt.buffer),On(be,Re)}function pr(be,Re){var tt=be._pendingPullIntos.peek();if(be._controlledReadableByteStream._state==="closed"){if(Re.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(Re.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(tt.byteOffset+tt.bytesFilled!==Re.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(tt.bufferByteLength!==Re.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(tt.bytesFilled+Re.byteLength>tt.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var dt=Re.byteLength;tt.buffer=Ke(Re.buffer),On(be,dt)}function Jn(be,Re,tt,dt,ft,kt,Et){Re._controlledReadableByteStream=be,Re._pullAgain=!1,Re._pulling=!1,Re._byobRequest=null,Re._queue=Re._queueTotalSize=void 0,Wt(Re),Re._closeRequested=!1,Re._started=!1,Re._strategyHWM=kt,Re._pullAlgorithm=dt,Re._cancelAlgorithm=ft,Re._autoAllocateChunkSize=Et,Re._pendingPullIntos=new q,be._readableStreamController=Re,T(S(tt()),function(){return Re._started=!0,ui(Re),null},function(Vt){return ni(Re,Vt),null})}function sa(be,Re,tt){var dt,ft,kt,Et=Object.create(zn.prototype);dt=Re.start!==void 0?function(){return Re.start(Et)}:function(){},ft=Re.pull!==void 0?function(){return Re.pull(Et)}:function(){return S(void 0)},kt=Re.cancel!==void 0?function(Xt){return Re.cancel(Xt)}:function(){return S(void 0)};var Vt=Re.autoAllocateChunkSize;if(Vt===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Jn(be,Et,dt,ft,kt,tt,Vt)}function oi(be,Re,tt){be._associatedReadableByteStreamController=Re,be._view=tt}function eo(be){return new TypeError("ReadableStreamBYOBRequest.prototype.".concat(be," can only be used on a ReadableStreamBYOBRequest"))}function er(be){return new TypeError("ReadableByteStreamController.prototype.".concat(be," can only be used on a ReadableByteStreamController"))}function Vi(be,Re){Te(be,Re);var tt=be==null?void 0:be.mode;return{mode:tt===void 0?void 0:Ir(tt,"".concat(Re," has member 'mode' that"))}}function Ir(be,Re){if((be="".concat(be))!=="byob")throw new TypeError("".concat(Re," '").concat(be,"' is not a valid enumeration value for ReadableStreamReaderMode"));return be}function to(be,Re){var tt;return Te(be,Re),{min:Ie((tt=be==null?void 0:be.min)!==null&&tt!==void 0?tt:1,"".concat(Re," has member 'min' that"))}}function $n(be){return new tr(be)}function Ui(be,Re){be._reader._readIntoRequests.push(Re)}function la(be,Re,tt){var dt=be._reader._readIntoRequests.shift();tt?dt._closeSteps(Re):dt._chunkSteps(Re)}function Fa(be){return be._reader._readIntoRequests.length}function no(be){var Re=be._reader;return Re!==void 0&&!!nr(Re)}Object.defineProperties(zn.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),d(zn.prototype.close,"close"),d(zn.prototype.enqueue,"enqueue"),d(zn.prototype.error,"error"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(zn.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var tr=function(){function be(Re){if(Se(Re,1,"ReadableStreamBYOBReader"),je(Re,"First parameter"),ri(Re))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Yn(Re._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Z(this,Re),this._readIntoRequests=new q}return Object.defineProperty(be.prototype,"closed",{get:function(){return nr(this)?this._closedPromise:E(ro("closed"))},enumerable:!1,configurable:!0}),be.prototype.cancel=function(Re){return Re===void 0&&(Re=void 0),nr(this)?this._ownerReadableStream===void 0?E(le("cancel")):W(this,Re):E(ro("cancel"))},be.prototype.read=function(Re,tt){if(tt===void 0&&(tt={}),!nr(this))return E(ro("read"));if(!ArrayBuffer.isView(Re))return E(new TypeError("view must be an array buffer view"));if(Re.byteLength===0)return E(new TypeError("view must have non-zero byteLength"));if(Re.buffer.byteLength===0)return E(new TypeError("view's buffer must have non-zero byteLength"));if(Ze(Re.buffer))return E(new TypeError("view's buffer has been detached"));var dt;try{dt=to(tt,"options")}catch(Xt){return E(Xt)}var ft,kt,Et=dt.min;if(Et===0)return E(new TypeError("options.min must be greater than 0"));if(Ln(Re)){if(Et>Re.byteLength)return E(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(Et>Re.length)return E(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return E(le("read from"));var Vt=P(function(Xt,Gt){ft=Xt,kt=Gt});return io(this,Re,Et,{_chunkSteps:function(Xt){return ft({value:Xt,done:!1})},_closeSteps:function(Xt){return ft({value:Xt,done:!0})},_errorSteps:function(Xt){return kt(Xt)}}),Vt},be.prototype.releaseLock=function(){if(!nr(this))throw ro("releaseLock");this._ownerReadableStream!==void 0&&Nr(this)},be}();function nr(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_readIntoRequests")&&be instanceof tr}function io(be,Re,tt,dt){var ft=be._ownerReadableStream;ft._disturbed=!0,ft._state==="errored"?dt._errorSteps(ft._storedError):oa(ft._readableStreamController,Re,tt,dt)}function Nr(be){te(be),Ha(be,new TypeError("Reader was released"))}function Ha(be,Re){var tt=be._readIntoRequests;be._readIntoRequests=new q,tt.forEach(function(dt){dt._errorSteps(Re)})}function ro(be){return new TypeError("ReadableStreamBYOBReader.prototype.".concat(be," can only be used on a ReadableStreamBYOBReader"))}function Vr(be,Re){var tt=be.highWaterMark;if(tt===void 0)return Re;if(xt(tt)||tt<0)throw new RangeError("Invalid highWaterMark");return tt}function Or(be){var Re=be.size;return Re||function(){return 1}}function Fr(be,Re){Te(be,Re);var tt=be==null?void 0:be.highWaterMark,dt=be==null?void 0:be.size;return{highWaterMark:tt===void 0?void 0:Be(tt),size:dt===void 0?void 0:za(dt,"".concat(Re," has member 'size' that"))}}function za(be,Re){return ye(be,Re),function(tt){return Be(be(tt))}}function ca(be,Re){Te(be,Re);var tt=be==null?void 0:be.abort,dt=be==null?void 0:be.close,ft=be==null?void 0:be.start,kt=be==null?void 0:be.type,Et=be==null?void 0:be.write;return{abort:tt===void 0?void 0:ua(tt,be,"".concat(Re," has member 'abort' that")),close:dt===void 0?void 0:Wa(dt,be,"".concat(Re," has member 'close' that")),start:ft===void 0?void 0:di(ft,be,"".concat(Re," has member 'start' that")),write:Et===void 0?void 0:da(Et,be,"".concat(Re," has member 'write' that")),type:kt}}function ua(be,Re,tt){return ye(be,tt),function(dt){return Y(be,Re,[dt])}}function Wa(be,Re,tt){return ye(be,tt),function(){return Y(be,Re,[])}}function di(be,Re,tt){return ye(be,tt),function(dt){return U(be,Re,[dt])}}function da(be,Re,tt){return ye(be,tt),function(dt,ft){return Y(be,Re,[dt,ft])}}function Hr(be,Re){if(!gr(be))throw new TypeError("".concat(Re," is not a WritableStream."))}function Ua(be){if(_typeof$1(be)!=="object"||be===null)return!1;try{return typeof be.aborted=="boolean"}catch{return!1}}Object.defineProperties(tr.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),d(tr.prototype.cancel,"cancel"),d(tr.prototype.read,"read"),d(tr.prototype.releaseLock,"releaseLock"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(tr.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var qa=typeof AbortController=="function";function Ls(){if(qa)return new AbortController}var ir=function(){function be(Re,tt){Re===void 0&&(Re={}),tt===void 0&&(tt={}),Re===void 0?Re=null:we(Re,"First parameter");var dt=Fr(tt,"Second parameter"),ft=ca(Re,"First parameter");if(Ro(this),ft.type!==void 0)throw new RangeError("Invalid type is specified");var kt=Or(dt);Rs(this,ft,Vr(dt,1),kt)}return Object.defineProperty(be.prototype,"locked",{get:function(){if(!gr(this))throw br("locked");return hi(this)},enumerable:!1,configurable:!0}),be.prototype.abort=function(Re){return Re===void 0&&(Re=void 0),gr(this)?hi(this)?E(new TypeError("Cannot abort a stream that already has a writer")):mr(this,Re):E(br("abort"))},be.prototype.close=function(){return gr(this)?hi(this)?E(new TypeError("Cannot close a stream that already has a writer")):qt(this)?E(new TypeError("Cannot close an already-closing stream")):Ya(this):E(br("close"))},be.prototype.getWriter=function(){if(!gr(this))throw br("getWriter");return Ga(this)},be}();function Ga(be){return new Ti(be)}function zr(be,Re,tt,dt,ft,kt){ft===void 0&&(ft=1),kt===void 0&&(kt=function(){return 1});var Et=Object.create(ir.prototype);return Ro(Et),Ka(Et,Object.create(qi.prototype),be,Re,tt,dt,ft,kt),Et}function Ro(be){be._state="writable",be._storedError=void 0,be._writer=void 0,be._writableStreamController=void 0,be._writeRequests=new q,be._inFlightWriteRequest=void 0,be._closeRequest=void 0,be._inFlightCloseRequest=void 0,be._pendingAbortRequest=void 0,be._backpressure=!1}function gr(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_writableStreamController")&&be instanceof ir}function hi(be){return be._writer!==void 0}function mr(be,Re){var tt;if(be._state==="closed"||be._state==="errored")return S(void 0);be._writableStreamController._abortReason=Re,(tt=be._writableStreamController._abortController)===null||tt===void 0||tt.abort(Re);var dt=be._state;if(dt==="closed"||dt==="errored")return S(void 0);if(be._pendingAbortRequest!==void 0)return be._pendingAbortRequest._promise;var ft=!1;dt==="erroring"&&(ft=!0,Re=void 0);var kt=P(function(Et,Vt){be._pendingAbortRequest={_promise:void 0,_resolve:Et,_reject:Vt,_reason:Re,_wasAlreadyErroring:ft}});return be._pendingAbortRequest._promise=kt,ft||Io(be,Re),kt}function Ya(be){var Re=be._state;if(Re==="closed"||Re==="errored")return E(new TypeError("The stream (in ".concat(Re," state) is not in the writable state and cannot be closed")));var tt=P(function(ft,kt){var Et={_resolve:ft,_reject:kt};be._closeRequest=Et}),dt=be._writer;return dt!==void 0&&be._backpressure&&Re==="writable"&&ba(dt),or(be._writableStreamController),tt}function jr(be){return P(function(Re,tt){var dt={_resolve:Re,_reject:tt};be._writeRequests.push(dt)})}function pi(be,Re){be._state!=="writable"?ha(be):Io(be,Re)}function Io(be,Re){var tt=be._writableStreamController;be._state="erroring",be._storedError=Re;var dt=be._writer;dt!==void 0&&ao(dt,Re),!ln(be)&&tt._started&&ha(be)}function ha(be){be._state="errored",be._writableStreamController[J]();var Re=be._storedError;if(be._writeRequests.forEach(function(dt){dt._reject(Re)}),be._writeRequests=new q,be._pendingAbortRequest!==void 0){var tt=be._pendingAbortRequest;if(be._pendingAbortRequest=void 0,tt._wasAlreadyErroring)return tt._reject(Re),void fi(be);T(be._writableStreamController[ne](tt._reason),function(){return tt._resolve(),fi(be),null},function(dt){return tt._reject(dt),fi(be),null})}else fi(be)}function Wr(be){be._inFlightWriteRequest._resolve(void 0),be._inFlightWriteRequest=void 0}function Pt(be,Re){be._inFlightWriteRequest._reject(Re),be._inFlightWriteRequest=void 0,pi(be,Re)}function Lt(be){be._inFlightCloseRequest._resolve(void 0),be._inFlightCloseRequest=void 0,be._state==="erroring"&&(be._storedError=void 0,be._pendingAbortRequest!==void 0&&(be._pendingAbortRequest._resolve(),be._pendingAbortRequest=void 0)),be._state="closed";var Re=be._writer;Re!==void 0&&Qa(Re)}function It(be,Re){be._inFlightCloseRequest._reject(Re),be._inFlightCloseRequest=void 0,be._pendingAbortRequest!==void 0&&(be._pendingAbortRequest._reject(Re),be._pendingAbortRequest=void 0),pi(be,Re)}function qt(be){return be._closeRequest!==void 0||be._inFlightCloseRequest!==void 0}function ln(be){return be._inFlightWriteRequest!==void 0||be._inFlightCloseRequest!==void 0}function _n(be){be._inFlightCloseRequest=be._closeRequest,be._closeRequest=void 0}function jn(be){be._inFlightWriteRequest=be._writeRequests.shift()}function fi(be){be._closeRequest!==void 0&&(be._closeRequest._reject(be._storedError),be._closeRequest=void 0);var Re=be._writer;Re!==void 0&&ya(Re,be._storedError)}function En(be,Re){var tt=be._writer;tt!==void 0&&Re!==be._backpressure&&(Re?Is(tt):ba(tt)),be._backpressure=Re}Object.defineProperties(ir.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),d(ir.prototype.abort,"abort"),d(ir.prototype.close,"close"),d(ir.prototype.getWriter,"getWriter"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(ir.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});var Ti=function(){function be(Re){if(Se(Re,1,"WritableStreamDefaultWriter"),Hr(Re,"First parameter"),hi(Re))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=Re,Re._writer=this;var tt=Re._state;if(tt==="writable")!qt(Re)&&Re._backpressure?Ho(this):Kn(this),xr(this);else if(tt==="erroring")In(this,Re._storedError),xr(this);else if(tt==="closed")Kn(this),va(this);else{var dt=Re._storedError;In(this,dt),co(this,dt)}}return Object.defineProperty(be.prototype,"closed",{get:function(){return vr(this)?this._closedPromise:E(wr("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"desiredSize",{get:function(){if(!vr(this))throw wr("desiredSize");if(this._ownerWritableStream===void 0)throw lo("desiredSize");return No(this)},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"ready",{get:function(){return vr(this)?this._readyPromise:E(wr("ready"))},enumerable:!1,configurable:!0}),be.prototype.abort=function(Re){return Re===void 0&&(Re=void 0),vr(this)?this._ownerWritableStream===void 0?E(lo("abort")):_i(this,Re):E(wr("abort"))},be.prototype.close=function(){if(!vr(this))return E(wr("close"));var Re=this._ownerWritableStream;return Re===void 0?E(lo("close")):qt(Re)?E(new TypeError("Cannot close an already-closing stream")):oo(this)},be.prototype.releaseLock=function(){if(!vr(this))throw wr("releaseLock");this._ownerWritableStream!==void 0&&xn(this)},be.prototype.write=function(Re){return Re===void 0&&(Re=void 0),vr(this)?this._ownerWritableStream===void 0?E(lo("write to")):Xa(this,Re):E(wr("write"))},be}();function vr(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_ownerWritableStream")&&be instanceof Ti}function _i(be,Re){return mr(be._ownerWritableStream,Re)}function oo(be){return Ya(be._ownerWritableStream)}function Ds(be){var Re=be._ownerWritableStream,tt=Re._state;return qt(Re)||tt==="closed"?S(void 0):tt==="errored"?E(Re._storedError):oo(be)}function Ur(be,Re){be._closedPromiseState==="pending"?ya(be,Re):Ja(be,Re)}function ao(be,Re){be._readyPromiseState==="pending"?es(be,Re):ts(be,Re)}function No(be){var Re=be._ownerWritableStream,tt=Re._state;return tt==="errored"||tt==="erroring"?null:tt==="closed"?0:ga(Re._writableStreamController)}function xn(be){var Re=be._ownerWritableStream,tt=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ao(be,tt),Ur(be,tt),Re._writer=void 0,be._ownerWritableStream=void 0}function Xa(be,Re){var tt=be._ownerWritableStream,dt=tt._writableStreamController,ft=Vo(dt,Re);if(tt!==be._ownerWritableStream)return E(lo("write to"));var kt=tt._state;if(kt==="errored")return E(tt._storedError);if(qt(tt)||kt==="closed")return E(new TypeError("The stream is closing or closed and cannot be written to"));if(kt==="erroring")return E(tt._storedError);var Et=jr(tt);return Oo(dt,Re,ft),Et}Object.defineProperties(Ti.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),d(Ti.prototype.abort,"abort"),d(Ti.prototype.close,"close"),d(Ti.prototype.releaseLock,"releaseLock"),d(Ti.prototype.write,"write"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Ti.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var pa={},qi=function(){function be(){throw new TypeError("Illegal constructor")}return Object.defineProperty(be.prototype,"abortReason",{get:function(){if(!fa(this))throw ma("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"signal",{get:function(){if(!fa(this))throw ma("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),be.prototype.error=function(Re){if(Re===void 0&&(Re=void 0),!fa(this))throw ma("error");this._controlledWritableStream._state==="writable"&&ar(this,Re)},be.prototype[ne]=function(Re){var tt=this._abortAlgorithm(Re);return yr(this),tt},be.prototype[J]=function(){Wt(this)},be}();function fa(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_controlledWritableStream")&&be instanceof qi}function Ka(be,Re,tt,dt,ft,kt,Et,Vt){Re._controlledWritableStream=be,be._writableStreamController=Re,Re._queue=void 0,Re._queueTotalSize=void 0,Wt(Re),Re._abortReason=void 0,Re._abortController=Ls(),Re._started=!1,Re._strategySizeAlgorithm=Vt,Re._strategyHWM=Et,Re._writeAlgorithm=dt,Re._closeAlgorithm=ft,Re._abortAlgorithm=kt;var Xt=_r(Re);En(be,Xt),T(S(tt()),function(){return Re._started=!0,so(Re),null},function(Gt){return Re._started=!0,pi(be,Gt),null})}function Rs(be,Re,tt,dt){var ft,kt,Et,Vt,Xt=Object.create(qi.prototype);ft=Re.start!==void 0?function(){return Re.start(Xt)}:function(){},kt=Re.write!==void 0?function(Gt){return Re.write(Gt,Xt)}:function(){return S(void 0)},Et=Re.close!==void 0?function(){return Re.close()}:function(){return S(void 0)},Vt=Re.abort!==void 0?function(Gt){return Re.abort(Gt)}:function(){return S(void 0)},Ka(be,Xt,ft,kt,Et,Vt,tt,dt)}function yr(be){be._writeAlgorithm=void 0,be._closeAlgorithm=void 0,be._abortAlgorithm=void 0,be._strategySizeAlgorithm=void 0}function or(be){jt(be,pa,0),so(be)}function Vo(be,Re){try{return be._strategySizeAlgorithm(Re)}catch(tt){return qr(be,tt),1}}function ga(be){return be._strategyHWM-be._queueTotalSize}function Oo(be,Re,tt){try{jt(be,Re,tt)}catch(ft){return void qr(be,ft)}var dt=be._controlledWritableStream;qt(dt)||dt._state!=="writable"||En(dt,_r(be)),so(be)}function so(be){var Re=be._controlledWritableStream;if(be._started&&Re._inFlightWriteRequest===void 0)if(Re._state!=="erroring"){if(be._queue.length!==0){var tt=nn(be);tt===pa?Fo(be):Za(be,tt)}}else ha(Re)}function qr(be,Re){be._controlledWritableStream._state==="writable"&&ar(be,Re)}function Fo(be){var Re=be._controlledWritableStream;_n(Re),Nt(be);var tt=be._closeAlgorithm();yr(be),T(tt,function(){return Lt(Re),null},function(dt){return It(Re,dt),null})}function Za(be,Re){var tt=be._controlledWritableStream;jn(tt),T(be._writeAlgorithm(Re),function(){Wr(tt);var dt=tt._state;if(Nt(be),!qt(tt)&&dt==="writable"){var ft=_r(be);En(tt,ft)}return so(be),null},function(dt){return tt._state==="writable"&&yr(be),Pt(tt,dt),null})}function _r(be){return ga(be)<=0}function ar(be,Re){var tt=be._controlledWritableStream;yr(be),Io(tt,Re)}function br(be){return new TypeError("WritableStream.prototype.".concat(be," can only be used on a WritableStream"))}function ma(be){return new TypeError("WritableStreamDefaultController.prototype.".concat(be," can only be used on a WritableStreamDefaultController"))}function wr(be){return new TypeError("WritableStreamDefaultWriter.prototype.".concat(be," can only be used on a WritableStreamDefaultWriter"))}function lo(be){return new TypeError("Cannot "+be+" a stream using a released writer")}function xr(be){be._closedPromise=P(function(Re,tt){be._closedPromise_resolve=Re,be._closedPromise_reject=tt,be._closedPromiseState="pending"})}function co(be,Re){xr(be),ya(be,Re)}function va(be){xr(be),Qa(be)}function ya(be,Re){be._closedPromise_reject!==void 0&&(O(be._closedPromise),be._closedPromise_reject(Re),be._closedPromise_resolve=void 0,be._closedPromise_reject=void 0,be._closedPromiseState="rejected")}function Ja(be,Re){co(be,Re)}function Qa(be){be._closedPromise_resolve!==void 0&&(be._closedPromise_resolve(void 0),be._closedPromise_resolve=void 0,be._closedPromise_reject=void 0,be._closedPromiseState="resolved")}function Ho(be){be._readyPromise=P(function(Re,tt){be._readyPromise_resolve=Re,be._readyPromise_reject=tt}),be._readyPromiseState="pending"}function In(be,Re){Ho(be),es(be,Re)}function Kn(be){Ho(be),ba(be)}function es(be,Re){be._readyPromise_reject!==void 0&&(O(be._readyPromise),be._readyPromise_reject(Re),be._readyPromise_resolve=void 0,be._readyPromise_reject=void 0,be._readyPromiseState="rejected")}function Is(be){Ho(be)}function ts(be,Re){In(be,Re)}function ba(be){be._readyPromise_resolve!==void 0&&(be._readyPromise_resolve(void 0),be._readyPromise_resolve=void 0,be._readyPromise_reject=void 0,be._readyPromiseState="fulfilled")}function wa(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:commonjsGlobal$1!==void 0?commonjsGlobal$1:void 0}Object.defineProperties(qi.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(qi.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var Gr=wa();function xa(be){if(typeof be!="function"&&_typeof$1(be)!=="object"||be.name!=="DOMException")return!1;try{return new be,!0}catch{return!1}}function Yr(){var be=Gr==null?void 0:Gr.DOMException;return xa(be)?be:void 0}function uo(){var be=function(Re,tt){this.message=Re||"",this.name=tt||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return d(be,"DOMException"),be.prototype=Object.create(Error.prototype),Object.defineProperty(be.prototype,"constructor",{value:be,writable:!0,configurable:!0}),be}var ho=Yr()||uo();function po(be,Re,tt,dt,ft,kt){var Et=qe(be),Vt=Ga(Re);be._disturbed=!0;var Xt=!1,Gt=S(void 0);return P(function(yn,vn){var mn;if(kt!==void 0){if(mn=function(){var rn=kt.reason!==void 0?kt.reason:new ho("Aborted","AbortError"),bn=[];dt||bn.push(function(){return Re._state==="writable"?mr(Re,rn):S(void 0)}),ft||bn.push(function(){return be._state==="readable"?xi(be,rn):S(void 0)}),Fn(function(){return Promise.all(bn.map(function(Tn){return Tn()}))},!0,rn)},kt.aborted)return void mn();kt.addEventListener("abort",mn)}function Nn(){return P(function(rn,bn){function Tn(ki){ki?rn():M(gi(),Tn,bn)}Tn(!1)})}function gi(){return Xt?S(!0):M(Vt._readyPromise,function(){return P(function(rn,bn){Ve(Et,{_chunkSteps:function(Tn){Gt=M(Xa(Vt,Tn),void 0,v),rn(!1)},_closeSteps:function(){return rn(!0)},_errorSteps:bn})})})}if(Mn(be,Et._closedPromise,function(rn){return dt?lr(!0,rn):Fn(function(){return mr(Re,rn)},!0,rn),null}),Mn(Re,Vt._closedPromise,function(rn){return ft?lr(!0,rn):Fn(function(){return xi(be,rn)},!0,rn),null}),Zi(be,Et._closedPromise,function(){return tt?lr():Fn(function(){return Ds(Vt)}),null}),qt(Re)||Re._state==="closed"){var si=new TypeError("the destination writable stream closed before all data could be piped to it");ft?lr(!0,si):Fn(function(){return xi(be,si)},!0,si)}function Ci(){var rn=Gt;return M(Gt,function(){return rn!==Gt?Ci():void 0})}function Mn(rn,bn,Tn){rn._state==="errored"?Tn(rn._storedError):I(bn,Tn)}function Zi(rn,bn,Tn){rn._state==="closed"?Tn():D(bn,Tn)}function Fn(rn,bn,Tn){function ki(){return T(rn(),function(){return An(bn,Tn)},function(Ji){return An(!0,Ji)}),null}Xt||(Xt=!0,Re._state!=="writable"||qt(Re)?ki():D(Ci(),ki))}function lr(rn,bn){Xt||(Xt=!0,Re._state!=="writable"||qt(Re)?An(rn,bn):D(Ci(),function(){return An(rn,bn)}))}function An(rn,bn){return xn(Vt),te(Et),kt!==void 0&&kt.removeEventListener("abort",mn),rn?vn(bn):yn(void 0),null}O(Nn())})}var ai=function(){function be(){throw new TypeError("Illegal constructor")}return Object.defineProperty(be.prototype,"desiredSize",{get:function(){if(!zo(this))throw pn("desiredSize");return Wo(this)},enumerable:!1,configurable:!0}),be.prototype.close=function(){if(!zo(this))throw pn("close");if(!Bi(this))throw new TypeError("The stream is not in a state that permits close");Cr(this)},be.prototype.enqueue=function(Re){if(Re===void 0&&(Re=void 0),!zo(this))throw pn("enqueue");if(!Bi(this))throw new TypeError("The stream is not in a state that permits enqueue");return Gi(this,Re)},be.prototype.error=function(Re){if(Re===void 0&&(Re=void 0),!zo(this))throw pn("error");ii(this,Re)},be.prototype[re]=function(Re){Wt(this);var tt=this._cancelAlgorithm(Re);return jo(this),tt},be.prototype[X]=function(Re){var tt=this._controlledReadableStream;if(this._queue.length>0){var dt=Nt(this);this._closeRequested&&this._queue.length===0?(jo(this),vo(tt)):fo(this),Re._chunkSteps(dt)}else Ue(tt,Re),fo(this)},be.prototype[j]=function(){},be}();function zo(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_controlledReadableStream")&&be instanceof ai}function fo(be){ns(be)&&(be._pulling?be._pullAgain=!0:(be._pulling=!0,T(be._pullAlgorithm(),function(){return be._pulling=!1,be._pullAgain&&(be._pullAgain=!1,fo(be)),null},function(Re){return ii(be,Re),null})))}function ns(be){var Re=be._controlledReadableStream;return!!Bi(be)&&!!be._started&&(!!(ri(Re)&&et(Re)>0)||Wo(be)>0)}function jo(be){be._pullAlgorithm=void 0,be._cancelAlgorithm=void 0,be._strategySizeAlgorithm=void 0}function Cr(be){if(Bi(be)){var Re=be._controlledReadableStream;be._closeRequested=!0,be._queue.length===0&&(jo(be),vo(Re))}}function Gi(be,Re){if(Bi(be)){var tt=be._controlledReadableStream;if(ri(tt)&&et(tt)>0)Je(tt,Re,!1);else{var dt=void 0;try{dt=be._strategySizeAlgorithm(Re)}catch(ft){throw ii(be,ft),ft}try{jt(be,Re,dt)}catch(ft){throw ii(be,ft),ft}}fo(be)}}function ii(be,Re){var tt=be._controlledReadableStream;tt._state==="readable"&&(Wt(be),jo(be),yo(tt,Re))}function Wo(be){var Re=be._controlledReadableStream._state;return Re==="errored"?null:Re==="closed"?0:be._strategyHWM-be._queueTotalSize}function lt(be){return!ns(be)}function Bi(be){var Re=be._controlledReadableStream._state;return!be._closeRequested&&Re==="readable"}function go(be,Re,tt,dt,ft,kt,Et){Re._controlledReadableStream=be,Re._queue=void 0,Re._queueTotalSize=void 0,Wt(Re),Re._started=!1,Re._closeRequested=!1,Re._pullAgain=!1,Re._pulling=!1,Re._strategySizeAlgorithm=Et,Re._strategyHWM=kt,Re._pullAlgorithm=dt,Re._cancelAlgorithm=ft,be._readableStreamController=Re,T(S(tt()),function(){return Re._started=!0,fo(Re),null},function(Vt){return ii(Re,Vt),null})}function bi(be,Re,tt,dt){var ft,kt,Et,Vt=Object.create(ai.prototype);ft=Re.start!==void 0?function(){return Re.start(Vt)}:function(){},kt=Re.pull!==void 0?function(){return Re.pull(Vt)}:function(){return S(void 0)},Et=Re.cancel!==void 0?function(Xt){return Re.cancel(Xt)}:function(){return S(void 0)},go(be,Vt,ft,kt,Et,tt,dt)}function pn(be){return new TypeError("ReadableStreamDefaultController.prototype.".concat(be," can only be used on a ReadableStreamDefaultController"))}function kr(be,Re){return Yn(be._readableStreamController)?Xi(be):Yi(be)}function Yi(be,Re){var tt,dt,ft,kt,Et,Vt=qe(be),Xt=!1,Gt=!1,yn=!1,vn=!1,mn=P(function(Mn){Et=Mn});function Nn(){return Xt?(Gt=!0,S(void 0)):(Xt=!0,Ve(Vt,{_chunkSteps:function(Mn){F(function(){Gt=!1;var Zi=Mn,Fn=Mn;yn||Gi(ft._readableStreamController,Zi),vn||Gi(kt._readableStreamController,Fn),Xt=!1,Gt&&Nn()})},_closeSteps:function(){Xt=!1,yn||Cr(ft._readableStreamController),vn||Cr(kt._readableStreamController),yn&&vn||Et(void 0)},_errorSteps:function(){Xt=!1}}),S(void 0))}function gi(Mn){if(yn=!0,tt=Mn,vn){var Zi=Fe([tt,dt]),Fn=xi(be,Zi);Et(Fn)}return mn}function si(Mn){if(vn=!0,dt=Mn,yn){var Zi=Fe([tt,dt]),Fn=xi(be,Zi);Et(Fn)}return mn}function Ci(){}return ft=Qn(Ci,Nn,gi),kt=Qn(Ci,Nn,si),I(Vt._closedPromise,function(Mn){return ii(ft._readableStreamController,Mn),ii(kt._readableStreamController,Mn),yn&&vn||Et(void 0),null}),[ft,kt]}function Xi(be){var Re,tt,dt,ft,kt,Et=qe(be),Vt=!1,Xt=!1,Gt=!1,yn=!1,vn=!1,mn=P(function(An){kt=An});function Nn(An){I(An._closedPromise,function(rn){return An!==Et||(ni(dt._readableStreamController,rn),ni(ft._readableStreamController,rn),yn&&vn||kt(void 0)),null})}function gi(){nr(Et)&&(te(Et),Nn(Et=qe(be))),Ve(Et,{_chunkSteps:function(An){F(function(){Xt=!1,Gt=!1;var rn=An,bn=An;if(!yn&&!vn)try{bn=Ct(An)}catch(Tn){return ni(dt._readableStreamController,Tn),ni(ft._readableStreamController,Tn),void kt(xi(be,Tn))}yn||Xn(dt._readableStreamController,rn),vn||Xn(ft._readableStreamController,bn),Vt=!1,Xt?Ci():Gt&&Mn()})},_closeSteps:function(){Vt=!1,yn||Wi(dt._readableStreamController),vn||Wi(ft._readableStreamController),dt._readableStreamController._pendingPullIntos.length>0&&hr(dt._readableStreamController,0),ft._readableStreamController._pendingPullIntos.length>0&&hr(ft._readableStreamController,0),yn&&vn||kt(void 0)},_errorSteps:function(){Vt=!1}})}function si(An,rn){He(Et)&&(te(Et),Nn(Et=$n(be)));var bn=rn?ft:dt,Tn=rn?dt:ft;io(Et,An,1,{_chunkSteps:function(ki){F(function(){Xt=!1,Gt=!1;var Ji=rn?vn:yn;if(rn?yn:vn)Ji||pr(bn._readableStreamController,ki);else{var Wn=void 0;try{Wn=Ct(ki)}catch(Si){return ni(bn._readableStreamController,Si),ni(Tn._readableStreamController,Si),void kt(xi(be,Si))}Ji||pr(bn._readableStreamController,ki),Xn(Tn._readableStreamController,Wn)}Vt=!1,Xt?Ci():Gt&&Mn()})},_closeSteps:function(ki){Vt=!1;var Ji=rn?vn:yn,Wn=rn?yn:vn;Ji||Wi(bn._readableStreamController),Wn||Wi(Tn._readableStreamController),ki!==void 0&&(Ji||pr(bn._readableStreamController,ki),!Wn&&Tn._readableStreamController._pendingPullIntos.length>0&&hr(Tn._readableStreamController,0)),Ji&&Wn||kt(void 0)},_errorSteps:function(){Vt=!1}})}function Ci(){if(Vt)return Xt=!0,S(void 0);Vt=!0;var An=Rr(dt._readableStreamController);return An===null?gi():si(An._view,!1),S(void 0)}function Mn(){if(Vt)return Gt=!0,S(void 0);Vt=!0;var An=Rr(ft._readableStreamController);return An===null?gi():si(An._view,!0),S(void 0)}function Zi(An){if(yn=!0,Re=An,vn){var rn=Fe([Re,tt]),bn=xi(be,rn);kt(bn)}return mn}function Fn(An){if(vn=!0,tt=An,yn){var rn=Fe([Re,tt]),bn=xi(be,rn);kt(bn)}return mn}function lr(){}return dt=Pa(lr,Ci,Zi),ft=Pa(lr,Mn,Fn),Nn(Et),[dt,ft]}function Sr(be){return y(be)&&be.getReader!==void 0}function Li(be){return Sr(be)?rs(be.getReader()):is(be)}function is(be){var Re,tt=ht(be,"async");function dt(){var kt;try{kt=yt(tt)}catch(Et){return E(Et)}return N(S(kt),function(Et){if(!y(Et))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(bt(Et))Cr(Re._readableStreamController);else{var Vt=$t(Et);Gi(Re._readableStreamController,Vt)}})}function ft(kt){var Et,Vt,Xt=tt.iterator;try{Et=Qe(Xt,"return")}catch(Gt){return E(Gt)}if(Et===void 0)return S(void 0);try{Vt=U(Et,Xt,[kt])}catch(Gt){return E(Gt)}return N(S(Vt),function(Gt){if(!y(Gt))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return Re=Qn(v,dt,ft,0)}function rs(be){var Re;function tt(){var ft;try{ft=be.read()}catch(kt){return E(kt)}return N(ft,function(kt){if(!y(kt))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(kt.done)Cr(Re._readableStreamController);else{var Et=kt.value;Gi(Re._readableStreamController,Et)}})}function dt(ft){try{return S(be.cancel(ft))}catch(kt){return E(kt)}}return Re=Qn(v,tt,dt,0)}function Ns(be,Re){Te(be,Re);var tt=be,dt=tt==null?void 0:tt.autoAllocateChunkSize,ft=tt==null?void 0:tt.cancel,kt=tt==null?void 0:tt.pull,Et=tt==null?void 0:tt.start,Vt=tt==null?void 0:tt.type;return{autoAllocateChunkSize:dt===void 0?void 0:Ie(dt,"".concat(Re," has member 'autoAllocateChunkSize' that")),cancel:ft===void 0?void 0:Vs(ft,tt,"".concat(Re," has member 'cancel' that")),pull:kt===void 0?void 0:Ca(kt,tt,"".concat(Re," has member 'pull' that")),start:Et===void 0?void 0:mo(Et,tt,"".concat(Re," has member 'start' that")),type:Vt===void 0?void 0:Uo(Vt,"".concat(Re," has member 'type' that"))}}function Vs(be,Re,tt){return ye(be,tt),function(dt){return Y(be,Re,[dt])}}function Ca(be,Re,tt){return ye(be,tt),function(dt){return Y(be,Re,[dt])}}function mo(be,Re,tt){return ye(be,tt),function(dt){return U(be,Re,[dt])}}function Uo(be,Re){if((be="".concat(be))!=="bytes")throw new TypeError("".concat(Re," '").concat(be,"' is not a valid enumeration value for ReadableStreamType"));return be}function Os(be,Re){Te(be,Re);var tt=be==null?void 0:be.preventCancel;return{preventCancel:Boolean(tt)}}function ka(be,Re){Te(be,Re);var tt=be==null?void 0:be.preventAbort,dt=be==null?void 0:be.preventCancel,ft=be==null?void 0:be.preventClose,kt=be==null?void 0:be.signal;return kt!==void 0&&Ki(kt,"".concat(Re," has member 'signal' that")),{preventAbort:Boolean(tt),preventCancel:Boolean(dt),preventClose:Boolean(ft),signal:kt}}function Ki(be,Re){if(!Ua(be))throw new TypeError("".concat(Re," is not an AbortSignal."))}function Sa(be,Re){Te(be,Re);var tt=be==null?void 0:be.readable;$e(tt,"readable","ReadableWritablePair"),je(tt,"".concat(Re," has member 'readable' that"));var dt=be==null?void 0:be.writable;return $e(dt,"writable","ReadableWritablePair"),Hr(dt,"".concat(Re," has member 'writable' that")),{readable:tt,writable:dt}}Object.defineProperties(ai.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),d(ai.prototype.close,"close"),d(ai.prototype.enqueue,"enqueue"),d(ai.prototype.error,"error"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(ai.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var Rn=function(){function be(Re,tt){Re===void 0&&(Re={}),tt===void 0&&(tt={}),Re===void 0?Re=null:we(Re,"First parameter");var dt=Fr(tt,"Second parameter"),ft=Ns(Re,"First parameter");if(qo(this),ft.type==="bytes"){if(dt.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");sa(this,ft,Vr(dt,0))}else{var kt=Or(dt);bi(this,ft,Vr(dt,1),kt)}}return Object.defineProperty(be.prototype,"locked",{get:function(){if(!wi(this))throw sr("locked");return ri(this)},enumerable:!1,configurable:!0}),be.prototype.cancel=function(Re){return Re===void 0&&(Re=void 0),wi(this)?ri(this)?E(new TypeError("Cannot cancel a stream that already has a reader")):xi(this,Re):E(sr("cancel"))},be.prototype.getReader=function(Re){if(Re===void 0&&(Re=void 0),!wi(this))throw sr("getReader");return Vi(Re,"First parameter").mode===void 0?qe(this):$n(this)},be.prototype.pipeThrough=function(Re,tt){if(tt===void 0&&(tt={}),!wi(this))throw sr("pipeThrough");Se(Re,1,"pipeThrough");var dt=Sa(Re,"First parameter"),ft=ka(tt,"Second parameter");if(ri(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(hi(dt.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return O(po(this,dt.writable,ft.preventClose,ft.preventAbort,ft.preventCancel,ft.signal)),dt.readable},be.prototype.pipeTo=function(Re,tt){if(tt===void 0&&(tt={}),!wi(this))return E(sr("pipeTo"));if(Re===void 0)return E("Parameter 1 is required in 'pipeTo'.");if(!gr(Re))return E(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var dt;try{dt=ka(tt,"Second parameter")}catch(ft){return E(ft)}return ri(this)?E(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):hi(Re)?E(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):po(this,Re,dt.preventClose,dt.preventAbort,dt.preventCancel,dt.signal)},be.prototype.tee=function(){if(!wi(this))throw sr("tee");return Fe(kr(this))},be.prototype.values=function(Re){if(Re===void 0&&(Re=void 0),!wi(this))throw sr("values");return Ot(this,Os(Re,"First parameter").preventCancel)},be.prototype[ct]=function(Re){return this.values(Re)},be.from=function(Re){return Li(Re)},be}();function Qn(be,Re,tt,dt,ft){dt===void 0&&(dt=1),ft===void 0&&(ft=function(){return 1});var kt=Object.create(Rn.prototype);return qo(kt),go(kt,Object.create(ai.prototype),be,Re,tt,dt,ft),kt}function Pa(be,Re,tt){var dt=Object.create(Rn.prototype);return qo(dt),Jn(dt,Object.create(zn.prototype),be,Re,tt,0,void 0),dt}function qo(be){be._state="readable",be._reader=void 0,be._storedError=void 0,be._disturbed=!1}function wi(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_readableStreamController")&&be instanceof Rn}function ri(be){return be._reader!==void 0}function xi(be,Re){if(be._disturbed=!0,be._state==="closed")return S(void 0);if(be._state==="errored")return E(be._storedError);vo(be);var tt=be._reader;if(tt!==void 0&&nr(tt)){var dt=tt._readIntoRequests;tt._readIntoRequests=new q,dt.forEach(function(ft){ft._closeSteps(void 0)})}return N(be._readableStreamController[re](Re),v)}function vo(be){be._state="closed";var Re=be._reader;if(Re!==void 0&&(Ce(Re),He(Re))){var tt=Re._readRequests;Re._readRequests=new q,tt.forEach(function(dt){dt._closeSteps()})}}function yo(be,Re){be._state="errored",be._storedError=Re;var tt=be._reader;tt!==void 0&&(ve(tt,Re),He(tt)?Ne(tt,Re):Ha(tt,Re))}function sr(be){return new TypeError("ReadableStream.prototype.".concat(be," can only be used on a ReadableStream"))}function Gn(be,Re){Te(be,Re);var tt=be==null?void 0:be.highWaterMark;return $e(tt,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Be(tt)}}Object.defineProperties(Rn,{from:{enumerable:!0}}),Object.defineProperties(Rn.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),d(Rn.from,"from"),d(Rn.prototype.cancel,"cancel"),d(Rn.prototype.getReader,"getReader"),d(Rn.prototype.pipeThrough,"pipeThrough"),d(Rn.prototype.pipeTo,"pipeTo"),d(Rn.prototype.tee,"tee"),d(Rn.prototype.values,"values"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Rn.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(Rn.prototype,ct,{value:Rn.prototype.values,writable:!0,configurable:!0});var Go=function(be){return be.byteLength};d(Go,"size");var _o=function(){function be(Re){Se(Re,1,"ByteLengthQueuingStrategy"),Re=Gn(Re,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=Re.highWaterMark}return Object.defineProperty(be.prototype,"highWaterMark",{get:function(){if(!Yo(this))throw Di("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"size",{get:function(){if(!Yo(this))throw Di("size");return Go},enumerable:!1,configurable:!0}),be}();function Di(be){return new TypeError("ByteLengthQueuingStrategy.prototype.".concat(be," can only be used on a ByteLengthQueuingStrategy"))}function Yo(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_byteLengthQueuingStrategyHighWaterMark")&&be instanceof _o}Object.defineProperties(_o.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(_o.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var bo=function(){return 1};d(bo,"size");var Oi=function(){function be(Re){Se(Re,1,"CountQueuingStrategy"),Re=Gn(Re,"First parameter"),this._countQueuingStrategyHighWaterMark=Re.highWaterMark}return Object.defineProperty(be.prototype,"highWaterMark",{get:function(){if(!ei(this))throw Ea("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"size",{get:function(){if(!ei(this))throw Ea("size");return bo},enumerable:!1,configurable:!0}),be}();function Ea(be){return new TypeError("CountQueuingStrategy.prototype.".concat(be," can only be used on a CountQueuingStrategy"))}function ei(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_countQueuingStrategyHighWaterMark")&&be instanceof Oi}function Aa(be,Re){Te(be,Re);var tt=be==null?void 0:be.cancel,dt=be==null?void 0:be.flush,ft=be==null?void 0:be.readableType,kt=be==null?void 0:be.start,Et=be==null?void 0:be.transform,Vt=be==null?void 0:be.writableType;return{cancel:tt===void 0?void 0:wo(tt,be,"".concat(Re," has member 'cancel' that")),flush:dt===void 0?void 0:Fs(dt,be,"".concat(Re," has member 'flush' that")),readableType:ft,start:kt===void 0?void 0:Hs(kt,be,"".concat(Re," has member 'start' that")),transform:Et===void 0?void 0:$a(Et,be,"".concat(Re," has member 'transform' that")),writableType:Vt}}function Fs(be,Re,tt){return ye(be,tt),function(dt){return Y(be,Re,[dt])}}function Hs(be,Re,tt){return ye(be,tt),function(dt){return U(be,Re,[dt])}}function $a(be,Re,tt){return ye(be,tt),function(dt,ft){return Y(be,Re,[dt,ft])}}function wo(be,Re,tt){return ye(be,tt),function(dt){return Y(be,Re,[dt])}}Object.defineProperties(Oi.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Oi.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var xo=function(){function be(Re,tt,dt){Re===void 0&&(Re={}),tt===void 0&&(tt={}),dt===void 0&&(dt={}),Re===void 0&&(Re=null);var ft=Fr(tt,"Second parameter"),kt=Fr(dt,"Third parameter"),Et=Aa(Re,"First parameter");if(Et.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(Et.writableType!==void 0)throw new RangeError("Invalid writableType specified");var Vt,Xt=Vr(kt,0),Gt=Or(kt),yn=Vr(ft,1),vn=Or(ft);Co(this,P(function(mn){Vt=mn}),yn,vn,Xt,Gt),as(this,Et),Et.start!==void 0?Vt(Et.start(this._transformStreamController)):Vt(void 0)}return Object.defineProperty(be.prototype,"readable",{get:function(){if(!Xo(this))throw cs("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"writable",{get:function(){if(!Xo(this))throw cs("writable");return this._writable},enumerable:!1,configurable:!0}),be}();function Co(be,Re,tt,dt,ft,kt){function Et(){return Re}function Vt(mn){return ls(be,mn)}function Xt(mn){return Da(be,mn)}function Gt(){return Ra(be)}function yn(){return fn(be)}function vn(mn){return zs(be,mn)}be._writable=zr(Et,Vt,Gt,Xt,tt,dt),be._readable=Qn(Et,yn,vn,ft,kt),be._backpressure=void 0,be._backpressureChangePromise=void 0,be._backpressureChangePromise_resolve=void 0,Zo(be,!0),be._transformStreamController=void 0}function Xo(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_transformStreamController")&&be instanceof xo}function Ma(be,Re){ii(be._readable._readableStreamController,Re),Ko(be,Re)}function Ko(be,Re){Pr(be._transformStreamController),qr(be._writable._writableStreamController,Re),ko(be)}function ko(be){be._backpressure&&Zo(be,!1)}function Zo(be,Re){be._backpressureChangePromise!==void 0&&be._backpressureChangePromise_resolve(),be._backpressureChangePromise=P(function(tt){be._backpressureChangePromise_resolve=tt}),be._backpressure=Re}Object.defineProperties(xo.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(xo.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});var Fi=function(){function be(){throw new TypeError("Illegal constructor")}return Object.defineProperty(be.prototype,"desiredSize",{get:function(){if(!So(this))throw Jo("desiredSize");return Wo(this._controlledTransformStream._readable._readableStreamController)},enumerable:!1,configurable:!0}),be.prototype.enqueue=function(Re){if(Re===void 0&&(Re=void 0),!So(this))throw Jo("enqueue");Ta(this,Re)},be.prototype.error=function(Re){if(Re===void 0&&(Re=void 0),!So(this))throw Jo("error");ss(this,Re)},be.prototype.terminate=function(){if(!So(this))throw Jo("terminate");La(this)},be}();function So(be){return!!y(be)&&!!Object.prototype.hasOwnProperty.call(be,"_controlledTransformStream")&&be instanceof Fi}function os(be,Re,tt,dt,ft){Re._controlledTransformStream=be,be._transformStreamController=Re,Re._transformAlgorithm=tt,Re._flushAlgorithm=dt,Re._cancelAlgorithm=ft,Re._finishPromise=void 0,Re._finishPromise_resolve=void 0,Re._finishPromise_reject=void 0}function as(be,Re){var tt,dt,ft,kt=Object.create(Fi.prototype);tt=Re.transform!==void 0?function(Et){return Re.transform(Et,kt)}:function(Et){try{return Ta(kt,Et),S(void 0)}catch(Vt){return E(Vt)}},dt=Re.flush!==void 0?function(){return Re.flush(kt)}:function(){return S(void 0)},ft=Re.cancel!==void 0?function(Et){return Re.cancel(Et)}:function(){return S(void 0)},os(be,kt,tt,dt,ft)}function Pr(be){be._transformAlgorithm=void 0,be._flushAlgorithm=void 0,be._cancelAlgorithm=void 0}function Ta(be,Re){var tt=be._controlledTransformStream,dt=tt._readable._readableStreamController;if(!Bi(dt))throw new TypeError("Readable side is not in a state that permits enqueue");try{Gi(dt,Re)}catch(ft){throw Ko(tt,ft),tt._readable._storedError}lt(dt)!==tt._backpressure&&Zo(tt,!0)}function ss(be,Re){Ma(be._controlledTransformStream,Re)}function Ba(be,Re){return N(be._transformAlgorithm(Re),void 0,function(tt){throw Ma(be._controlledTransformStream,tt),tt})}function La(be){var Re=be._controlledTransformStream;Cr(Re._readable._readableStreamController),Ko(Re,new TypeError("TransformStream terminated"))}function ls(be,Re){var tt=be._transformStreamController;return be._backpressure?N(be._backpressureChangePromise,function(){var dt=be._writable;if(dt._state==="erroring")throw dt._storedError;return Ba(tt,Re)}):Ba(tt,Re)}function Da(be,Re){var tt=be._transformStreamController;if(tt._finishPromise!==void 0)return tt._finishPromise;var dt=be._readable;tt._finishPromise=P(function(kt,Et){tt._finishPromise_resolve=kt,tt._finishPromise_reject=Et});var ft=tt._cancelAlgorithm(Re);return Pr(tt),T(ft,function(){return dt._state==="errored"?Ar(tt,dt._storedError):(ii(dt._readableStreamController,Re),Er(tt)),null},function(kt){return ii(dt._readableStreamController,kt),Ar(tt,kt),null}),tt._finishPromise}function Ra(be){var Re=be._transformStreamController;if(Re._finishPromise!==void 0)return Re._finishPromise;var tt=be._readable;Re._finishPromise=P(function(ft,kt){Re._finishPromise_resolve=ft,Re._finishPromise_reject=kt});var dt=Re._flushAlgorithm();return Pr(Re),T(dt,function(){return tt._state==="errored"?Ar(Re,tt._storedError):(Cr(tt._readableStreamController),Er(Re)),null},function(ft){return ii(tt._readableStreamController,ft),Ar(Re,ft),null}),Re._finishPromise}function fn(be){return Zo(be,!1),be._backpressureChangePromise}function zs(be,Re){var tt=be._transformStreamController;if(tt._finishPromise!==void 0)return tt._finishPromise;var dt=be._writable;tt._finishPromise=P(function(kt,Et){tt._finishPromise_resolve=kt,tt._finishPromise_reject=Et});var ft=tt._cancelAlgorithm(Re);return Pr(tt),T(ft,function(){return dt._state==="errored"?Ar(tt,dt._storedError):(qr(dt._writableStreamController,Re),ko(be),Er(tt)),null},function(kt){return qr(dt._writableStreamController,kt),ko(be),Ar(tt,kt),null}),tt._finishPromise}function Jo(be){return new TypeError("TransformStreamDefaultController.prototype.".concat(be," can only be used on a TransformStreamDefaultController"))}function Er(be){be._finishPromise_resolve!==void 0&&(be._finishPromise_resolve(),be._finishPromise_resolve=void 0,be._finishPromise_reject=void 0)}function Ar(be,Re){be._finishPromise_reject!==void 0&&(O(be._finishPromise),be._finishPromise_reject(Re),be._finishPromise_resolve=void 0,be._finishPromise_reject=void 0)}function cs(be){return new TypeError("TransformStream.prototype.".concat(be," can only be used on a TransformStream"))}Object.defineProperties(Fi.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),d(Fi.prototype.enqueue,"enqueue"),d(Fi.prototype.error,"error"),d(Fi.prototype.terminate,"terminate"),_typeof$1(n.toStringTag)==="symbol"&&Object.defineProperty(Fi.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=_o,e.CountQueuingStrategy=Oi,e.ReadableByteStreamController=zn,e.ReadableStream=Rn,e.ReadableStreamBYOBReader=tr,e.ReadableStreamBYOBRequest=Bn,e.ReadableStreamDefaultController=ai,e.ReadableStreamDefaultReader=wt,e.TransformStream=xo,e.TransformStreamDefaultController=Fi,e.WritableStream=ir,e.WritableStreamDefaultController=qi,e.WritableStreamDefaultWriter=Ti}(ponyfillExports)),ponyfillExports}(function(module,exports){var factory;factory=function(){return function(){var __webpack_modules__=[,function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.VerbosityLevel=n.Util=n.UnknownErrorException=n.UnexpectedResponseException=n.TextRenderingMode=n.RenderingIntentFlag=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.PageActionEventType=n.OPS=n.MissingPDFException=n.MAX_IMAGE_SIZE_TO_CACHE=n.LINE_FACTOR=n.LINE_DESCENT_FACTOR=n.InvalidPDFException=n.ImageKind=n.IDENTITY_MATRIX=n.FormatError=n.FeatureTest=n.FONT_IDENTITY_MATRIX=n.DocumentActionEventType=n.CMapCompressionType=n.BaseException=n.BASELINE_FACTOR=n.AnnotationType=n.AnnotationStateModelType=n.AnnotationReviewState=n.AnnotationReplyType=n.AnnotationMode=n.AnnotationMarkedState=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationEditorType=n.AnnotationEditorPrefix=n.AnnotationEditorParamsType=n.AnnotationBorderStyleType=n.AnnotationActionEventType=n.AbortException=void 0,n.assert=function(O,F){O||g(F)},n.bytesToString=function(O){_typeof$1(O)==="object"&&O!==null&&O.length!==void 0||g("Invalid argument for bytesToString");var F=O.length,U=8192;if(F<U)return String.fromCharCode.apply(null,O);for(var Y=[],Q=0;Q<F;Q+=U){var q=Math.min(Q+U,F),ne=O.subarray(Q,q);Y.push(String.fromCharCode.apply(null,ne))}return Y.join("")},n.createPromiseCapability=function(){var O=Object.create(null),F=!1;return Object.defineProperty(O,"settled",{get:function(){return F}}),O.promise=new Promise(function(U,Y){O.resolve=function(Q){F=!0,U(Q)},O.reject=function(Q){F=!0,Y(Q)}}),O},n.createValidAbsoluteUrl=function(O){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!O)return null;try{if(U&&typeof O=="string"){if(U.addDefaultProtocol&&O.startsWith("www.")){var Y=O.match(/\./g);Y&&Y.length>=2&&(O="http://".concat(O))}if(U.tryConvertEncoding)try{O=N(O)}catch{}}var Q=F?new URL(O,F):new URL(O);if(function(q){if(!q)return!1;switch(q.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(Q))return Q}catch{}return null},n.getModificationDate=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[O.getUTCFullYear().toString(),(O.getUTCMonth()+1).toString().padStart(2,"0"),O.getUTCDate().toString().padStart(2,"0"),O.getUTCHours().toString().padStart(2,"0"),O.getUTCMinutes().toString().padStart(2,"0"),O.getUTCSeconds().toString().padStart(2,"0")].join("")},n.getVerbosityLevel=function(){return s},n.info=function(O){s>=u.INFOS&&console.log("Info: ".concat(O))},n.isArrayBuffer=function(O){return _typeof$1(O)==="object"&&O!==null&&O.byteLength!==void 0},n.isArrayEqual=function(O,F){if(O.length!==F.length)return!1;for(var U=0,Y=O.length;U<Y;U++)if(O[U]!==F[U])return!1;return!0},n.objectFromMap=function(O){var F,U=Object.create(null),Y=_createForOfIteratorHelper(O);try{for(Y.s();!(F=Y.n()).done;){var Q=_slicedToArray(F.value,2),q=Q[0],ne=Q[1];U[q]=ne}}catch(J){Y.e(J)}finally{Y.f()}return U},n.objectSize=function(O){return Object.keys(O).length},n.setVerbosityLevel=function(O){Number.isInteger(O)&&(s=O)},n.shadow=v,n.string32=function(O){return String.fromCharCode(O>>24&255,O>>16&255,O>>8&255,255&O)},n.stringToBytes=E,n.stringToPDFString=function(O){var F;if(O[0]>="\xEF"&&(O[0]==="\xFE"&&O[1]==="\xFF"?F="utf-16be":O[0]==="\xFF"&&O[1]==="\xFE"?F="utf-16le":O[0]==="\xEF"&&O[1]==="\xBB"&&O[2]==="\xBF"&&(F="utf-8"),F))try{var U=new TextDecoder(F,{fatal:!0}),Y=E(O);return U.decode(Y)}catch(re){w('stringToPDFString: "'.concat(re,'".'))}for(var Q=[],q=0,ne=O.length;q<ne;q++){var J=I[O.charCodeAt(q)];Q.push(J?String.fromCharCode(J):O.charAt(q))}return Q.join("")},n.stringToUTF8String=N,n.unreachable=g,n.utf8StringToString=function(O){return unescape(encodeURIComponent(O))},n.warn=w,globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,r(2)),n.IDENTITY_MATRIX=[1,0,0,1,0,0],n.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],n.MAX_IMAGE_SIZE_TO_CACHE=1e7,n.LINE_FACTOR=1.35,n.LINE_DESCENT_FACTOR=.35;var o=.35/1.35;n.BASELINE_FACTOR=o,n.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},n.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},n.AnnotationEditorPrefix="pdfjs_internal_editor_",n.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},n.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},n.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},n.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},n.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},n.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},n.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},n.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},n.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},n.AnnotationReplyType={GROUP:"Group",REPLY:"R"},n.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},n.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},n.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},n.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},n.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},n.PageActionEventType={O:"PageOpen",C:"PageClose"};var u={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=u,n.CMapCompressionType={NONE:0,BINARY:1},n.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},n.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var s=u.WARNINGS;function w(O){s>=u.WARNINGS&&console.log("Warning: ".concat(O))}function g(O){throw new Error(O)}function v(O,F,U){var Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return Object.defineProperty(O,F,{value:U,enumerable:!Y,configurable:!0,writable:!1}),U}var y=function(){function O(F,U){this.constructor===O&&g("Cannot initialize BaseException."),this.message=F,this.name=U}return O.prototype=new Error,O.constructor=O,O}();n.BaseException=y;var m=function(O){function F(U,Y){var Q;return _classCallCheck(this,F),(Q=_callSuper(this,F,[U,"PasswordException"])).code=Y,Q}return _inherits(F,O),_createClass(F)}(y);n.PasswordException=m;var d=function(O){function F(U,Y){var Q;return _classCallCheck(this,F),(Q=_callSuper(this,F,[U,"UnknownErrorException"])).details=Y,Q}return _inherits(F,O),_createClass(F)}(y);n.UnknownErrorException=d;var f=function(O){function F(U){return _classCallCheck(this,F),_callSuper(this,F,[U,"InvalidPDFException"])}return _inherits(F,O),_createClass(F)}(y);n.InvalidPDFException=f;var x=function(O){function F(U){return _classCallCheck(this,F),_callSuper(this,F,[U,"MissingPDFException"])}return _inherits(F,O),_createClass(F)}(y);n.MissingPDFException=x;var k=function(O){function F(U,Y){var Q;return _classCallCheck(this,F),(Q=_callSuper(this,F,[U,"UnexpectedResponseException"])).status=Y,Q}return _inherits(F,O),_createClass(F)}(y);n.UnexpectedResponseException=k;var P=function(O){function F(U){return _classCallCheck(this,F),_callSuper(this,F,[U,"FormatError"])}return _inherits(F,O),_createClass(F)}(y);n.FormatError=P;var S=function(O){function F(U){return _classCallCheck(this,F),_callSuper(this,F,[U,"AbortException"])}return _inherits(F,O),_createClass(F)}(y);function E(O){typeof O!="string"&&g("Invalid argument for stringToBytes");for(var F=O.length,U=new Uint8Array(F),Y=0;Y<F;++Y)U[Y]=255&O.charCodeAt(Y);return U}n.AbortException=S;var M=function(){return _createClass(function O(){_classCallCheck(this,O)},null,[{key:"isLittleEndian",get:function(){return v(this,"isLittleEndian",((O=new Uint8Array(4))[0]=1,new Uint32Array(O.buffer,0,1)[0]===1));var O}},{key:"isEvalSupported",get:function(){return v(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}},{key:"isOffscreenCanvasSupported",get:function(){return v(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}},{key:"platform",get:function(){return typeof navigator>"u"?v(this,"platform",{isWin:!1,isMac:!1}):v(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}])}();n.FeatureTest=M;var T=_toConsumableArray$1(Array(256).keys()).map(function(O){return O.toString(16).padStart(2,"0")}),D=function(){function O(){_classCallCheck(this,O)}return _createClass(O,null,[{key:"makeHexColor",value:function(F,U,Y){return"#".concat(T[F]).concat(T[U]).concat(T[Y])}},{key:"scaleMinMax",value:function(F,U){var Y;F[0]?(F[0]<0&&(Y=U[0],U[0]=U[1],U[1]=Y),U[0]*=F[0],U[1]*=F[0],F[3]<0&&(Y=U[2],U[2]=U[3],U[3]=Y),U[2]*=F[3],U[3]*=F[3]):(Y=U[0],U[0]=U[2],U[2]=Y,Y=U[1],U[1]=U[3],U[3]=Y,F[1]<0&&(Y=U[2],U[2]=U[3],U[3]=Y),U[2]*=F[1],U[3]*=F[1],F[2]<0&&(Y=U[0],U[0]=U[1],U[1]=Y),U[0]*=F[2],U[1]*=F[2]),U[0]+=F[4],U[1]+=F[4],U[2]+=F[5],U[3]+=F[5]}},{key:"transform",value:function(F,U){return[F[0]*U[0]+F[2]*U[1],F[1]*U[0]+F[3]*U[1],F[0]*U[2]+F[2]*U[3],F[1]*U[2]+F[3]*U[3],F[0]*U[4]+F[2]*U[5]+F[4],F[1]*U[4]+F[3]*U[5]+F[5]]}},{key:"applyTransform",value:function(F,U){return[F[0]*U[0]+F[1]*U[2]+U[4],F[0]*U[1]+F[1]*U[3]+U[5]]}},{key:"applyInverseTransform",value:function(F,U){var Y=U[0]*U[3]-U[1]*U[2];return[(F[0]*U[3]-F[1]*U[2]+U[2]*U[5]-U[4]*U[3])/Y,(-F[0]*U[1]+F[1]*U[0]+U[4]*U[1]-U[5]*U[0])/Y]}},{key:"getAxialAlignedBoundingBox",value:function(F,U){var Y=O.applyTransform(F,U),Q=O.applyTransform(F.slice(2,4),U),q=O.applyTransform([F[0],F[3]],U),ne=O.applyTransform([F[2],F[1]],U);return[Math.min(Y[0],Q[0],q[0],ne[0]),Math.min(Y[1],Q[1],q[1],ne[1]),Math.max(Y[0],Q[0],q[0],ne[0]),Math.max(Y[1],Q[1],q[1],ne[1])]}},{key:"inverseTransform",value:function(F){var U=F[0]*F[3]-F[1]*F[2];return[F[3]/U,-F[1]/U,-F[2]/U,F[0]/U,(F[2]*F[5]-F[4]*F[3])/U,(F[4]*F[1]-F[5]*F[0])/U]}},{key:"singularValueDecompose2dScale",value:function(F){var U=[F[0],F[2],F[1],F[3]],Y=F[0]*U[0]+F[1]*U[2],Q=F[0]*U[1]+F[1]*U[3],q=F[2]*U[0]+F[3]*U[2],ne=F[2]*U[1]+F[3]*U[3],J=(Y+ne)/2,re=Math.sqrt(Math.pow(Y+ne,2)-4*(Y*ne-q*Q))/2,X=J+re||1,j=J-re||1;return[Math.sqrt(X),Math.sqrt(j)]}},{key:"normalizeRect",value:function(F){var U=F.slice(0);return F[0]>F[2]&&(U[0]=F[2],U[2]=F[0]),F[1]>F[3]&&(U[1]=F[3],U[3]=F[1]),U}},{key:"intersect",value:function(F,U){var Y=Math.max(Math.min(F[0],F[2]),Math.min(U[0],U[2])),Q=Math.min(Math.max(F[0],F[2]),Math.max(U[0],U[2]));if(Y>Q)return null;var q=Math.max(Math.min(F[1],F[3]),Math.min(U[1],U[3])),ne=Math.min(Math.max(F[1],F[3]),Math.max(U[1],U[3]));return q>ne?null:[Y,q,Q,ne]}},{key:"bezierBoundingBox",value:function(F,U,Y,Q,q,ne,J,re){for(var X,j,Z,W,te,le,oe,Ee,Ae=[],ve=[[],[]],ke=0;ke<2;++ke)if(ke===0?(j=6*F-12*Y+6*q,X=-3*F+9*Y-9*q+3*J,Z=3*Y-3*F):(j=6*U-12*Q+6*ne,X=-3*U+9*Q-9*ne+3*re,Z=3*Q-3*U),Math.abs(X)<1e-12){if(Math.abs(j)<1e-12)continue;0<(W=-Z/j)&&W<1&&Ae.push(W)}else oe=j*j-4*Z*X,Ee=Math.sqrt(oe),oe<0||(0<(te=(-j+Ee)/(2*X))&&te<1&&Ae.push(te),0<(le=(-j-Ee)/(2*X))&&le<1&&Ae.push(le));for(var Ce,Pe=Ae.length,Me=Pe;Pe--;)Ce=1-(W=Ae[Pe]),ve[0][Pe]=Ce*Ce*Ce*F+3*Ce*Ce*W*Y+3*Ce*W*W*q+W*W*W*J,ve[1][Pe]=Ce*Ce*Ce*U+3*Ce*Ce*W*Q+3*Ce*W*W*ne+W*W*W*re;return ve[0][Me]=F,ve[1][Me]=U,ve[0][Me+1]=J,ve[1][Me+1]=re,ve[0].length=ve[1].length=Me+2,[Math.min.apply(Math,_toConsumableArray$1(ve[0])),Math.min.apply(Math,_toConsumableArray$1(ve[1])),Math.max.apply(Math,_toConsumableArray$1(ve[0])),Math.max.apply(Math,_toConsumableArray$1(ve[1]))]}}])}();n.Util=D;var I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function N(O){return decodeURIComponent(escape(O))}},function(e,n,r){var o=r(3);!globalThis.DOMMatrix&&o.isNodeJS&&(globalThis.DOMMatrix=require$$0.DOMMatrix),function(){if(!globalThis.Path2D&&o.isNodeJS){var u=require$$0.CanvasRenderingContext2D,s=requirePath2dPolyfill_esm().polyfillPath2D;globalThis.CanvasRenderingContext2D=u,s(globalThis)}}(),!globalThis.ReadableStream&&o.isNodeJS&&(globalThis.ReadableStream=requirePonyfill().ReadableStream),Array.prototype.at||r(4),Uint8Array.prototype.at||r(78),globalThis.structuredClone||r(90)},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNodeJS=void 0;var r=!((typeof process>"u"?"undefined":_typeof$1(process))!=="object"||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&process.type!=="browser");n.isNodeJS=r},function(e,n,r){r(5);var o=r(77);e.exports=o("Array","at")},function(e,n,r){var o=r(6),u=r(43),s=r(67),w=r(65),g=r(72);o({target:"Array",proto:!0},{at:function(v){var y=u(this),m=s(y),d=w(v),f=d>=0?d:m+d;return f<0||f>=m?void 0:y[f]}}),g("at")},function(e,n,r){var o=r(7),u=r(8).f,s=r(47),w=r(51),g=r(41),v=r(59),y=r(71);e.exports=function(m,d){var f,x,k,P,S,E=m.target,M=m.global,T=m.stat;if(f=M?o:T?o[E]||g(E,{}):(o[E]||{}).prototype)for(x in d){if(P=d[x],k=m.dontCallGetSet?(S=u(f,x))&&S.value:f[x],!y(M?x:E+(T?".":"#")+x,m.forced)&&k!==void 0){if(_typeof$1(P)==_typeof$1(k))continue;v(P,k)}(m.sham||k&&k.sham)&&s(P,"sham",!0),w(f,x,P,m)}}},function(e){var n=function(r){return r&&r.Math==Math&&r};e.exports=n((typeof globalThis>"u"?"undefined":_typeof$1(globalThis))=="object"&&globalThis)||n((typeof window>"u"?"undefined":_typeof$1(window))=="object"&&window)||n((typeof self>"u"?"undefined":_typeof$1(self))=="object"&&self)||n(_typeof$1(commonjsGlobal$1)=="object"&&commonjsGlobal$1)||function(){return this}()||Function("return this")()},function(e,n,r){var o=r(9),u=r(11),s=r(13),w=r(14),g=r(15),v=r(21),y=r(42),m=r(45),d=Object.getOwnPropertyDescriptor;n.f=o?d:function(f,x){if(f=g(f),x=v(x),m)try{return d(f,x)}catch{}if(y(f,x))return w(!u(s.f,f,x),f[x])}},function(e,n,r){var o=r(10);e.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(e){e.exports=function(n){try{return!!n()}catch{return!0}}},function(e,n,r){var o=r(12),u=Function.prototype.call;e.exports=o?u.bind(u):function(){return u.apply(u,arguments)}},function(e,n,r){var o=r(10);e.exports=!o(function(){var u=function(){}.bind();return typeof u!="function"||u.hasOwnProperty("prototype")})},function(e,n){var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,u=o&&!r.call({1:2},1);n.f=u?function(s){var w=o(this,s);return!!w&&w.enumerable}:r},function(e){e.exports=function(n,r){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:r}}},function(e,n,r){var o=r(16),u=r(19);e.exports=function(s){return o(u(s))}},function(e,n,r){var o=r(17),u=r(10),s=r(18),w=Object,g=o("".split);e.exports=u(function(){return!w("z").propertyIsEnumerable(0)})?function(v){return s(v)=="String"?g(v,""):w(v)}:w},function(e,n,r){var o=r(12),u=Function.prototype,s=u.call,w=o&&u.bind.bind(s,s);e.exports=o?w:function(g){return function(){return s.apply(g,arguments)}}},function(e,n,r){var o=r(17),u=o({}.toString),s=o("".slice);e.exports=function(w){return s(u(w),8,-1)}},function(e,n,r){var o=r(20),u=TypeError;e.exports=function(s){if(o(s))throw u("Can't call method on "+s);return s}},function(e){e.exports=function(n){return n==null}},function(e,n,r){var o=r(22),u=r(26);e.exports=function(s){var w=o(s,"string");return u(w)?w:w+""}},function(e,n,r){var o=r(11),u=r(23),s=r(26),w=r(33),g=r(36),v=r(37),y=TypeError,m=v("toPrimitive");e.exports=function(d,f){if(!u(d)||s(d))return d;var x,k=w(d,m);if(k){if(f===void 0&&(f="default"),x=o(k,d,f),!u(x)||s(x))return x;throw y("Can't convert object to primitive value")}return f===void 0&&(f="number"),g(d,f)}},function(e,n,r){var o=r(24),u=r(25),s=u.all;e.exports=u.IS_HTMLDDA?function(w){return _typeof$1(w)=="object"?w!==null:o(w)||w===s}:function(w){return _typeof$1(w)=="object"?w!==null:o(w)}},function(e,n,r){var o=r(25),u=o.all;e.exports=o.IS_HTMLDDA?function(s){return typeof s=="function"||s===u}:function(s){return typeof s=="function"}},function(e){var n=(typeof document>"u"?"undefined":_typeof$1(document))=="object"&&document.all,r=n===void 0&&n!==void 0;e.exports={all:n,IS_HTMLDDA:r}},function(e,n,r){var o=r(27),u=r(24),s=r(28),w=r(29),g=Object;e.exports=w?function(v){return _typeof$1(v)=="symbol"}:function(v){var y=o("Symbol");return u(y)&&s(y.prototype,g(v))}},function(e,n,r){var o=r(7),u=r(24);e.exports=function(s,w){return arguments.length<2?(g=o[s],u(g)?g:void 0):o[s]&&o[s][w];var g}},function(e,n,r){var o=r(17);e.exports=o({}.isPrototypeOf)},function(e,n,r){var o=r(30);e.exports=o&&!Symbol.sham&&_typeof$1(Symbol.iterator)=="symbol"},function(e,n,r){var o=r(31),u=r(10);e.exports=!!Object.getOwnPropertySymbols&&!u(function(){var s=Symbol();return!String(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&o&&o<41})},function(e,n,r){var o,u,s=r(7),w=r(32),g=s.process,v=s.Deno,y=g&&g.versions||v&&v.version,m=y&&y.v8;m&&(u=(o=m.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!u&&w&&(!(o=w.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=w.match(/Chrome\/(\d+)/))&&(u=+o[1]),e.exports=u},function(e){e.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},function(e,n,r){var o=r(34),u=r(20);e.exports=function(s,w){var g=s[w];return u(g)?void 0:o(g)}},function(e,n,r){var o=r(24),u=r(35),s=TypeError;e.exports=function(w){if(o(w))return w;throw s(u(w)+" is not a function")}},function(e){var n=String;e.exports=function(r){try{return n(r)}catch{return"Object"}}},function(e,n,r){var o=r(11),u=r(24),s=r(23),w=TypeError;e.exports=function(g,v){var y,m;if(v==="string"&&u(y=g.toString)&&!s(m=o(y,g))||u(y=g.valueOf)&&!s(m=o(y,g))||v!=="string"&&u(y=g.toString)&&!s(m=o(y,g)))return m;throw w("Can't convert object to primitive value")}},function(e,n,r){var o=r(7),u=r(38),s=r(42),w=r(44),g=r(30),v=r(29),y=o.Symbol,m=u("wks"),d=v?y.for||y:y&&y.withoutSetter||w;e.exports=function(f){return s(m,f)||(m[f]=g&&s(y,f)?y[f]:d("Symbol."+f)),m[f]}},function(e,n,r){var o=r(39),u=r(40);(e.exports=function(s,w){return u[s]||(u[s]=w!==void 0?w:{})})("versions",[]).push({version:"3.29.1",mode:o?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"})},function(e){e.exports=!1},function(e,n,r){var o=r(7),u=r(41),s="__core-js_shared__",w=o[s]||u(s,{});e.exports=w},function(e,n,r){var o=r(7),u=Object.defineProperty;e.exports=function(s,w){try{u(o,s,{value:w,configurable:!0,writable:!0})}catch{o[s]=w}return w}},function(e,n,r){var o=r(17),u=r(43),s=o({}.hasOwnProperty);e.exports=Object.hasOwn||function(w,g){return s(u(w),g)}},function(e,n,r){var o=r(19),u=Object;e.exports=function(s){return u(o(s))}},function(e,n,r){var o=r(17),u=0,s=Math.random(),w=o(1 .toString);e.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+w(++u+s,36)}},function(e,n,r){var o=r(9),u=r(10),s=r(46);e.exports=!o&&!u(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},function(e,n,r){var o=r(7),u=r(23),s=o.document,w=u(s)&&u(s.createElement);e.exports=function(g){return w?s.createElement(g):{}}},function(e,n,r){var o=r(9),u=r(48),s=r(14);e.exports=o?function(w,g,v){return u.f(w,g,s(1,v))}:function(w,g,v){return w[g]=v,w}},function(e,n,r){var o=r(9),u=r(45),s=r(49),w=r(50),g=r(21),v=TypeError,y=Object.defineProperty,m=Object.getOwnPropertyDescriptor,d="enumerable",f="configurable",x="writable";n.f=o?s?function(k,P,S){if(w(k),P=g(P),w(S),typeof k=="function"&&P==="prototype"&&"value"in S&&x in S&&!S[x]){var E=m(k,P);E&&E[x]&&(k[P]=S.value,S={configurable:f in S?S[f]:E[f],enumerable:d in S?S[d]:E[d],writable:!1})}return y(k,P,S)}:y:function(k,P,S){if(w(k),P=g(P),w(S),u)try{return y(k,P,S)}catch{}if("get"in S||"set"in S)throw v("Accessors not supported");return"value"in S&&(k[P]=S.value),k}},function(e,n,r){var o=r(9),u=r(10);e.exports=o&&u(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},function(e,n,r){var o=r(23),u=String,s=TypeError;e.exports=function(w){if(o(w))return w;throw s(u(w)+" is not an object")}},function(e,n,r){var o=r(24),u=r(48),s=r(52),w=r(41);e.exports=function(g,v,y,m){m||(m={});var d=m.enumerable,f=m.name!==void 0?m.name:v;if(o(y)&&s(y,f,m),m.global)d?g[v]=y:w(v,y);else{try{m.unsafe?g[v]&&(d=!0):delete g[v]}catch{}d?g[v]=y:u.f(g,v,{value:y,enumerable:!1,configurable:!m.nonConfigurable,writable:!m.nonWritable})}return g}},function(e,n,r){var o=r(17),u=r(10),s=r(24),w=r(42),g=r(9),v=r(53).CONFIGURABLE,y=r(54),m=r(55),d=m.enforce,f=m.get,x=String,k=Object.defineProperty,P=o("".slice),S=o("".replace),E=o([].join),M=g&&!u(function(){return k(function(){},"length",{value:8}).length!==8}),T=String(String).split("String"),D=e.exports=function(I,N,O){P(x(N),0,7)==="Symbol("&&(N="["+S(x(N),/^Symbol\(([^)]*)\)/,"$1")+"]"),O&&O.getter&&(N="get "+N),O&&O.setter&&(N="set "+N),(!w(I,"name")||v&&I.name!==N)&&(g?k(I,"name",{value:N,configurable:!0}):I.name=N),M&&O&&w(O,"arity")&&I.length!==O.arity&&k(I,"length",{value:O.arity});try{O&&w(O,"constructor")&&O.constructor?g&&k(I,"prototype",{writable:!1}):I.prototype&&(I.prototype=void 0)}catch{}var F=d(I);return w(F,"source")||(F.source=E(T,typeof N=="string"?N:"")),I};Function.prototype.toString=D(function(){return s(this)&&f(this).source||y(this)},"toString")},function(e,n,r){var o=r(9),u=r(42),s=Function.prototype,w=o&&Object.getOwnPropertyDescriptor,g=u(s,"name"),v=g&&function(){}.name==="something",y=g&&(!o||o&&w(s,"name").configurable);e.exports={EXISTS:g,PROPER:v,CONFIGURABLE:y}},function(e,n,r){var o=r(17),u=r(24),s=r(40),w=o(Function.toString);u(s.inspectSource)||(s.inspectSource=function(g){return w(g)}),e.exports=s.inspectSource},function(e,n,r){var o,u,s,w=r(56),g=r(7),v=r(23),y=r(47),m=r(42),d=r(40),f=r(57),x=r(58),k="Object already initialized",P=g.TypeError,S=g.WeakMap;if(w||d.state){var E=d.state||(d.state=new S);E.get=E.get,E.has=E.has,E.set=E.set,o=function(T,D){if(E.has(T))throw P(k);return D.facade=T,E.set(T,D),D},u=function(T){return E.get(T)||{}},s=function(T){return E.has(T)}}else{var M=f("state");x[M]=!0,o=function(T,D){if(m(T,M))throw P(k);return D.facade=T,y(T,M,D),D},u=function(T){return m(T,M)?T[M]:{}},s=function(T){return m(T,M)}}e.exports={set:o,get:u,has:s,enforce:function(T){return s(T)?u(T):o(T,{})},getterFor:function(T){return function(D){var I;if(!v(D)||(I=u(D)).type!==T)throw P("Incompatible receiver, "+T+" required");return I}}}},function(e,n,r){var o=r(7),u=r(24),s=o.WeakMap;e.exports=u(s)&&/native code/.test(String(s))},function(e,n,r){var o=r(38),u=r(44),s=o("keys");e.exports=function(w){return s[w]||(s[w]=u(w))}},function(e){e.exports={}},function(e,n,r){var o=r(42),u=r(60),s=r(8),w=r(48);e.exports=function(g,v,y){for(var m=u(v),d=w.f,f=s.f,x=0;x<m.length;x++){var k=m[x];o(g,k)||y&&o(y,k)||d(g,k,f(v,k))}}},function(e,n,r){var o=r(27),u=r(17),s=r(61),w=r(70),g=r(50),v=u([].concat);e.exports=o("Reflect","ownKeys")||function(y){var m=s.f(g(y)),d=w.f;return d?v(m,d(y)):m}},function(e,n,r){var o=r(62),u=r(69).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(s){return o(s,u)}},function(e,n,r){var o=r(17),u=r(42),s=r(15),w=r(63).indexOf,g=r(58),v=o([].push);e.exports=function(y,m){var d,f=s(y),x=0,k=[];for(d in f)!u(g,d)&&u(f,d)&&v(k,d);for(;m.length>x;)u(f,d=m[x++])&&(~w(k,d)||v(k,d));return k}},function(e,n,r){var o=r(15),u=r(64),s=r(67),w=function(g){return function(v,y,m){var d,f=o(v),x=s(f),k=u(m,x);if(g&&y!=y){for(;x>k;)if((d=f[k++])!=d)return!0}else for(;x>k;k++)if((g||k in f)&&f[k]===y)return g||k||0;return!g&&-1}};e.exports={includes:w(!0),indexOf:w(!1)}},function(e,n,r){var o=r(65),u=Math.max,s=Math.min;e.exports=function(w,g){var v=o(w);return v<0?u(v+g,0):s(v,g)}},function(e,n,r){var o=r(66);e.exports=function(u){var s=+u;return s!=s||s===0?0:o(s)}},function(e){var n=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(o){var u=+o;return(u>0?r:n)(u)}},function(e,n,r){var o=r(68);e.exports=function(u){return o(u.length)}},function(e,n,r){var o=r(65),u=Math.min;e.exports=function(s){return s>0?u(o(s),9007199254740991):0}},function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n,r){var o=r(10),u=r(24),s=/#|\.prototype\./,w=function(d,f){var x=v[g(d)];return x==m||x!=y&&(u(f)?o(f):!!f)},g=w.normalize=function(d){return String(d).replace(s,".").toLowerCase()},v=w.data={},y=w.NATIVE="N",m=w.POLYFILL="P";e.exports=w},function(e,n,r){var o=r(37),u=r(73),s=r(48).f,w=o("unscopables"),g=Array.prototype;g[w]==null&&s(g,w,{configurable:!0,value:u(null)}),e.exports=function(v){g[w][v]=!0}},function(e,n,r){var o,u=r(50),s=r(74),w=r(69),g=r(58),v=r(76),y=r(46),m=r(57),d="prototype",f="script",x=m("IE_PROTO"),k=function(){},P=function(M){return"<"+f+">"+M+"</"+f+">"},S=function(M){M.write(P("")),M.close();var T=M.parentWindow.Object;return M=null,T},E=function(){try{o=new ActiveXObject("htmlfile")}catch{}var M,T,D;E=typeof document<"u"?document.domain&&o?S(o):(T=y("iframe"),D="java"+f+":",T.style.display="none",v.appendChild(T),T.src=String(D),(M=T.contentWindow.document).open(),M.write(P("document.F=Object")),M.close(),M.F):S(o);for(var I=w.length;I--;)delete E[d][w[I]];return E()};g[x]=!0,e.exports=Object.create||function(M,T){var D;return M!==null?(k[d]=u(M),D=new k,k[d]=null,D[x]=M):D=E(),T===void 0?D:s.f(D,T)}},function(e,n,r){var o=r(9),u=r(49),s=r(48),w=r(50),g=r(15),v=r(75);n.f=o&&!u?Object.defineProperties:function(y,m){w(y);for(var d,f=g(m),x=v(m),k=x.length,P=0;k>P;)s.f(y,d=x[P++],f[d]);return y}},function(e,n,r){var o=r(62),u=r(69);e.exports=Object.keys||function(s){return o(s,u)}},function(e,n,r){var o=r(27);e.exports=o("document","documentElement")},function(e,n,r){var o=r(7),u=r(17);e.exports=function(s,w){return u(o[s].prototype[w])}},function(e,n,r){r(79)},function(e,n,r){var o=r(80),u=r(67),s=r(65),w=o.aTypedArray;(0,o.exportTypedArrayMethod)("at",function(g){var v=w(this),y=u(v),m=s(g),d=m>=0?m:y+m;return d<0||d>=y?void 0:v[d]})},function(e,n,r){var o,u,s,w=r(81),g=r(9),v=r(7),y=r(24),m=r(23),d=r(42),f=r(82),x=r(35),k=r(47),P=r(51),S=r(84),E=r(28),M=r(85),T=r(87),D=r(37),I=r(44),N=r(55),O=N.enforce,F=N.get,U=v.Int8Array,Y=U&&U.prototype,Q=v.Uint8ClampedArray,q=Q&&Q.prototype,ne=U&&M(U),J=Y&&M(Y),re=Object.prototype,X=v.TypeError,j=D("toStringTag"),Z=I("TYPED_ARRAY_TAG"),W="TypedArrayConstructor",te=w&&!!T&&f(v.opera)!=="Opera",le=!1,oe={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ee={BigInt64Array:8,BigUint64Array:8},Ae=function(ve){if(!m(ve))return!1;var ke=f(ve);return d(oe,ke)||d(Ee,ke)};for(o in oe)(s=(u=v[o])&&u.prototype)?O(s)[W]=u:te=!1;for(o in Ee)(s=(u=v[o])&&u.prototype)&&(O(s)[W]=u);if((!te||!y(ne)||ne===Function.prototype)&&(ne=function(){throw X("Incorrect invocation")},te))for(o in oe)v[o]&&T(v[o],ne);if((!te||!J||J===re)&&(J=ne.prototype,te))for(o in oe)v[o]&&T(v[o].prototype,J);if(te&&M(q)!==J&&T(q,J),g&&!d(J,j))for(o in le=!0,S(J,j,{configurable:!0,get:function(){return m(this)?this[Z]:void 0}}),oe)v[o]&&k(v[o],Z,o);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:te,TYPED_ARRAY_TAG:le&&Z,aTypedArray:function(ve){if(Ae(ve))return ve;throw X("Target is not a typed array")},aTypedArrayConstructor:function(ve){if(y(ve)&&(!T||E(ne,ve)))return ve;throw X(x(ve)+" is not a typed array constructor")},exportTypedArrayMethod:function(ve,ke,Ce,Pe){if(g){if(Ce)for(var Me in oe){var Le=v[Me];if(Le&&d(Le.prototype,ve))try{delete Le.prototype[ve]}catch{try{Le.prototype[ve]=ke}catch{}}}J[ve]&&!Ce||P(J,ve,Ce?ke:te&&Y[ve]||ke,Pe)}},exportTypedArrayStaticMethod:function(ve,ke,Ce){var Pe,Me;if(g){if(T){if(Ce){for(Pe in oe)if((Me=v[Pe])&&d(Me,ve))try{delete Me[ve]}catch{}}if(ne[ve]&&!Ce)return;try{return P(ne,ve,Ce?ke:te&&ne[ve]||ke)}catch{}}for(Pe in oe)!(Me=v[Pe])||Me[ve]&&!Ce||P(Me,ve,ke)}},getTypedArrayConstructor:function ve(ke){var Ce=M(ke);if(m(Ce)){var Pe=F(Ce);return Pe&&d(Pe,W)?Pe[W]:ve(Ce)}},isView:function(ve){if(!m(ve))return!1;var ke=f(ve);return ke==="DataView"||d(oe,ke)||d(Ee,ke)},isTypedArray:Ae,TypedArray:ne,TypedArrayPrototype:J}},function(e){e.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},function(e,n,r){var o=r(83),u=r(24),s=r(18),w=r(37)("toStringTag"),g=Object,v=s(function(){return arguments}())=="Arguments";e.exports=o?s:function(y){var m,d,f;return y===void 0?"Undefined":y===null?"Null":typeof(d=function(x,k){try{return x[k]}catch{}}(m=g(y),w))=="string"?d:v?s(m):(f=s(m))=="Object"&&u(m.callee)?"Arguments":f}},function(e,n,r){var o={};o[r(37)("toStringTag")]="z",e.exports=String(o)==="[object z]"},function(e,n,r){var o=r(52),u=r(48);e.exports=function(s,w,g){return g.get&&o(g.get,w,{getter:!0}),g.set&&o(g.set,w,{setter:!0}),u.f(s,w,g)}},function(e,n,r){var o=r(42),u=r(24),s=r(43),w=r(57),g=r(86),v=w("IE_PROTO"),y=Object,m=y.prototype;e.exports=g?y.getPrototypeOf:function(d){var f=s(d);if(o(f,v))return f[v];var x=f.constructor;return u(x)&&f instanceof x?x.prototype:f instanceof y?m:null}},function(e,n,r){var o=r(10);e.exports=!o(function(){function u(){}return u.prototype.constructor=null,Object.getPrototypeOf(new u)!==u.prototype})},function(e,n,r){var o=r(88),u=r(50),s=r(89);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var w,g=!1,v={};try{(w=o(Object.prototype,"__proto__","set"))(v,[]),g=v instanceof Array}catch{}return function(y,m){return u(y),s(m),g?w(y,m):y.__proto__=m,y}}():void 0)},function(e,n,r){var o=r(17),u=r(34);e.exports=function(s,w,g){try{return o(u(Object.getOwnPropertyDescriptor(s,w)[g]))}catch{}}},function(e,n,r){var o=r(24),u=String,s=TypeError;e.exports=function(w){if(_typeof$1(w)=="object"||o(w))return w;throw s("Can't set "+u(w)+" as a prototype")}},function(e,n,r){r(91),r(98),r(100),r(123),r(125);var o=r(137);e.exports=o.structuredClone},function(e,n,r){var o=r(15),u=r(72),s=r(92),w=r(55),g=r(48).f,v=r(93),y=r(97),m=r(39),d=r(9),f="Array Iterator",x=w.set,k=w.getterFor(f);e.exports=v(Array,"Array",function(S,E){x(this,{type:f,target:o(S),index:0,kind:E})},function(){var S=k(this),E=S.target,M=S.kind,T=S.index++;return!E||T>=E.length?(S.target=void 0,y(void 0,!0)):y(M=="keys"?T:M=="values"?E[T]:[T,E[T]],!1)},"values");var P=s.Arguments=s.Array;if(u("keys"),u("values"),u("entries"),!m&&d&&P.name!=="values")try{g(P,"name",{value:"values"})}catch{}},function(e){e.exports={}},function(e,n,r){var o=r(6),u=r(11),s=r(39),w=r(53),g=r(24),v=r(94),y=r(85),m=r(87),d=r(96),f=r(47),x=r(51),k=r(37),P=r(92),S=r(95),E=w.PROPER,M=w.CONFIGURABLE,T=S.IteratorPrototype,D=S.BUGGY_SAFARI_ITERATORS,I=k("iterator"),N="keys",O="values",F="entries",U=function(){return this};e.exports=function(Y,Q,q,ne,J,re,X){v(q,Q,ne);var j,Z,W,te=function(Ce){if(Ce===J&&ve)return ve;if(!D&&Ce in Ee)return Ee[Ce];switch(Ce){case N:case O:case F:return function(){return new q(this,Ce)}}return function(){return new q(this)}},le=Q+" Iterator",oe=!1,Ee=Y.prototype,Ae=Ee[I]||Ee["@@iterator"]||J&&Ee[J],ve=!D&&Ae||te(J),ke=Q=="Array"&&Ee.entries||Ae;if(ke&&(j=y(ke.call(new Y)))!==Object.prototype&&j.next&&(s||y(j)===T||(m?m(j,T):g(j[I])||x(j,I,U)),d(j,le,!0,!0),s&&(P[le]=U)),E&&J==O&&Ae&&Ae.name!==O&&(!s&&M?f(Ee,"name",O):(oe=!0,ve=function(){return u(Ae,this)})),J)if(Z={values:te(O),keys:re?ve:te(N),entries:te(F)},X)for(W in Z)(D||oe||!(W in Ee))&&x(Ee,W,Z[W]);else o({target:Q,proto:!0,forced:D||oe},Z);return s&&!X||Ee[I]===ve||x(Ee,I,ve,{name:J}),P[Q]=ve,Z}},function(e,n,r){var o=r(95).IteratorPrototype,u=r(73),s=r(14),w=r(96),g=r(92),v=function(){return this};e.exports=function(y,m,d,f){var x=m+" Iterator";return y.prototype=u(o,{next:s(+!f,d)}),w(y,x,!1,!0),g[x]=v,y}},function(e,n,r){var o,u,s,w=r(10),g=r(24),v=r(23),y=r(73),m=r(85),d=r(51),f=r(37),x=r(39),k=f("iterator"),P=!1;[].keys&&("next"in(s=[].keys())?(u=m(m(s)))!==Object.prototype&&(o=u):P=!0),!v(o)||w(function(){var S={};return o[k].call(S)!==S})?o={}:x&&(o=y(o)),g(o[k])||d(o,k,function(){return this}),e.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:P}},function(e,n,r){var o=r(48).f,u=r(42),s=r(37)("toStringTag");e.exports=function(w,g,v){w&&!v&&(w=w.prototype),w&&!u(w,s)&&o(w,s,{configurable:!0,value:g})}},function(e){e.exports=function(n,r){return{value:n,done:r}}},function(e,n,r){var o=r(83),u=r(51),s=r(99);o||u(Object.prototype,"toString",s,{unsafe:!0})},function(e,n,r){var o=r(83),u=r(82);e.exports=o?{}.toString:function(){return"[object "+u(this)+"]"}},function(e,n,r){r(101)},function(e,n,r){r(102)("Map",function(o){return function(){return o(this,arguments.length?arguments[0]:void 0)}},r(120))},function(e,n,r){var o=r(6),u=r(7),s=r(17),w=r(71),g=r(51),v=r(103),y=r(110),m=r(117),d=r(24),f=r(20),x=r(23),k=r(10),P=r(118),S=r(96),E=r(119);e.exports=function(M,T,D){var I=M.indexOf("Map")!==-1,N=M.indexOf("Weak")!==-1,O=I?"set":"add",F=u[M],U=F&&F.prototype,Y=F,Q={},q=function(Z){var W=s(U[Z]);g(U,Z,Z=="add"?function(te){return W(this,te===0?0:te),this}:Z=="delete"?function(te){return!(N&&!x(te))&&W(this,te===0?0:te)}:Z=="get"?function(te){return N&&!x(te)?void 0:W(this,te===0?0:te)}:Z=="has"?function(te){return!(N&&!x(te))&&W(this,te===0?0:te)}:function(te,le){return W(this,te===0?0:te,le),this})};if(w(M,!d(F)||!(N||U.forEach&&!k(function(){new F().entries().next()}))))Y=D.getConstructor(T,M,I,O),v.enable();else if(w(M,!0)){var ne=new Y,J=ne[O](N?{}:-0,1)!=ne,re=k(function(){ne.has(1)}),X=P(function(Z){new F(Z)}),j=!N&&k(function(){for(var Z=new F,W=5;W--;)Z[O](W,W);return!Z.has(-0)});X||((Y=T(function(Z,W){m(Z,U);var te=E(new F,Z,Y);return f(W)||y(W,te[O],{that:te,AS_ENTRIES:I}),te})).prototype=U,U.constructor=Y),(re||j)&&(q("delete"),q("has"),I&&q("get")),(j||J)&&q(O),N&&U.clear&&delete U.clear}return Q[M]=Y,o({global:!0,constructor:!0,forced:Y!=F},Q),S(Y,M),N||D.setStrong(Y,M,I),Y}},function(e,n,r){var o=r(6),u=r(17),s=r(58),w=r(23),g=r(42),v=r(48).f,y=r(61),m=r(104),d=r(107),f=r(44),x=r(109),k=!1,P=f("meta"),S=0,E=function(T){v(T,P,{value:{objectID:"O"+S++,weakData:{}}})},M=e.exports={enable:function(){M.enable=function(){},k=!0;var T=y.f,D=u([].splice),I={};I[P]=1,T(I).length&&(y.f=function(N){for(var O=T(N),F=0,U=O.length;F<U;F++)if(O[F]===P){D(O,F,1);break}return O},o({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:m.f}))},fastKey:function(T,D){if(!w(T))return _typeof$1(T)=="symbol"?T:(typeof T=="string"?"S":"P")+T;if(!g(T,P)){if(!d(T))return"F";if(!D)return"E";E(T)}return T[P].objectID},getWeakData:function(T,D){if(!g(T,P)){if(!d(T))return!0;if(!D)return!1;E(T)}return T[P].weakData},onFreeze:function(T){return x&&k&&d(T)&&!g(T,P)&&E(T),T}};s[P]=!0},function(e,n,r){var o=r(18),u=r(15),s=r(61).f,w=r(105),g=(typeof window>"u"?"undefined":_typeof$1(window))=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(v){return g&&o(v)=="Window"?function(y){try{return s(y)}catch{return w(g)}}(v):s(u(v))}},function(e,n,r){var o=r(64),u=r(67),s=r(106),w=Array,g=Math.max;e.exports=function(v,y,m){for(var d=u(v),f=o(y,d),x=o(m===void 0?d:m,d),k=w(g(x-f,0)),P=0;f<x;f++,P++)s(k,P,v[f]);return k.length=P,k}},function(e,n,r){var o=r(21),u=r(48),s=r(14);e.exports=function(w,g,v){var y=o(g);y in w?u.f(w,y,s(0,v)):w[y]=v}},function(e,n,r){var o=r(10),u=r(23),s=r(18),w=r(108),g=Object.isExtensible,v=o(function(){});e.exports=v||w?function(y){return!!u(y)&&(!w||s(y)!="ArrayBuffer")&&(!g||g(y))}:g},function(e,n,r){var o=r(10);e.exports=o(function(){if(typeof ArrayBuffer=="function"){var u=new ArrayBuffer(8);Object.isExtensible(u)&&Object.defineProperty(u,"a",{value:8})}})},function(e,n,r){var o=r(10);e.exports=!o(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(e,n,r){var o=r(111),u=r(11),s=r(50),w=r(35),g=r(113),v=r(67),y=r(28),m=r(114),d=r(115),f=r(116),x=TypeError,k=function(S,E){this.stopped=S,this.result=E},P=k.prototype;e.exports=function(S,E,M){var T,D,I,N,O,F,U,Y=M&&M.that,Q=!(!M||!M.AS_ENTRIES),q=!(!M||!M.IS_RECORD),ne=!(!M||!M.IS_ITERATOR),J=!(!M||!M.INTERRUPTED),re=o(E,Y),X=function(Z){return T&&f(T,"normal",Z),new k(!0,Z)},j=function(Z){return Q?(s(Z),J?re(Z[0],Z[1],X):re(Z[0],Z[1])):J?re(Z,X):re(Z)};if(q)T=S.iterator;else if(ne)T=S;else{if(!(D=d(S)))throw x(w(S)+" is not iterable");if(g(D)){for(I=0,N=v(S);N>I;I++)if((O=j(S[I]))&&y(P,O))return O;return new k(!1)}T=m(S,D)}for(F=q?S.next:T.next;!(U=u(F,T)).done;){try{O=j(U.value)}catch(Z){f(T,"throw",Z)}if(_typeof$1(O)=="object"&&O&&y(P,O))return O}return new k(!1)}},function(e,n,r){var o=r(112),u=r(34),s=r(12),w=o(o.bind);e.exports=function(g,v){return u(g),v===void 0?g:s?w(g,v):function(){return g.apply(v,arguments)}}},function(e,n,r){var o=r(18),u=r(17);e.exports=function(s){if(o(s)==="Function")return u(s)}},function(e,n,r){var o=r(37),u=r(92),s=o("iterator"),w=Array.prototype;e.exports=function(g){return g!==void 0&&(u.Array===g||w[s]===g)}},function(e,n,r){var o=r(11),u=r(34),s=r(50),w=r(35),g=r(115),v=TypeError;e.exports=function(y,m){var d=arguments.length<2?g(y):m;if(u(d))return s(o(d,y));throw v(w(y)+" is not iterable")}},function(e,n,r){var o=r(82),u=r(33),s=r(20),w=r(92),g=r(37)("iterator");e.exports=function(v){if(!s(v))return u(v,g)||u(v,"@@iterator")||w[o(v)]}},function(e,n,r){var o=r(11),u=r(50),s=r(33);e.exports=function(w,g,v){var y,m;u(w);try{if(!(y=s(w,"return"))){if(g==="throw")throw v;return v}y=o(y,w)}catch(d){m=!0,y=d}if(g==="throw")throw v;if(m)throw y;return u(y),v}},function(e,n,r){var o=r(28),u=TypeError;e.exports=function(s,w){if(o(w,s))return s;throw u("Incorrect invocation")}},function(e,n,r){var o=r(37)("iterator"),u=!1;try{var s=0,w={next:function(){return{done:!!s++}},return:function(){u=!0}};w[o]=function(){return this},Array.from(w,function(){throw 2})}catch{}e.exports=function(g,v){if(!v&&!u)return!1;var y=!1;try{var m={};m[o]=function(){return{next:function(){return{done:y=!0}}}},g(m)}catch{}return y}},function(e,n,r){var o=r(24),u=r(23),s=r(87);e.exports=function(w,g,v){var y,m;return s&&o(y=g.constructor)&&y!==v&&u(m=y.prototype)&&m!==v.prototype&&s(w,m),w}},function(e,n,r){var o=r(73),u=r(84),s=r(121),w=r(111),g=r(117),v=r(20),y=r(110),m=r(93),d=r(97),f=r(122),x=r(9),k=r(103).fastKey,P=r(55),S=P.set,E=P.getterFor;e.exports={getConstructor:function(M,T,D,I){var N=M(function(Q,q){g(Q,O),S(Q,{type:T,index:o(null),first:void 0,last:void 0,size:0}),x||(Q.size=0),v(q)||y(q,Q[I],{that:Q,AS_ENTRIES:D})}),O=N.prototype,F=E(T),U=function(Q,q,ne){var J,re,X=F(Q),j=Y(Q,q);return j?j.value=ne:(X.last=j={index:re=k(q,!0),key:q,value:ne,previous:J=X.last,next:void 0,removed:!1},X.first||(X.first=j),J&&(J.next=j),x?X.size++:Q.size++,re!=="F"&&(X.index[re]=j)),Q},Y=function(Q,q){var ne,J=F(Q),re=k(q);if(re!=="F")return J.index[re];for(ne=J.first;ne;ne=ne.next)if(ne.key==q)return ne};return s(O,{clear:function(){for(var Q=F(this),q=Q.index,ne=Q.first;ne;)ne.removed=!0,ne.previous&&(ne.previous=ne.previous.next=void 0),delete q[ne.index],ne=ne.next;Q.first=Q.last=void 0,x?Q.size=0:this.size=0},delete:function(Q){var q=this,ne=F(q),J=Y(q,Q);if(J){var re=J.next,X=J.previous;delete ne.index[J.index],J.removed=!0,X&&(X.next=re),re&&(re.previous=X),ne.first==J&&(ne.first=re),ne.last==J&&(ne.last=X),x?ne.size--:q.size--}return!!J},forEach:function(Q){for(var q,ne=F(this),J=w(Q,arguments.length>1?arguments[1]:void 0);q=q?q.next:ne.first;)for(J(q.value,q.key,this);q&&q.removed;)q=q.previous},has:function(Q){return!!Y(this,Q)}}),s(O,D?{get:function(Q){var q=Y(this,Q);return q&&q.value},set:function(Q,q){return U(this,Q===0?0:Q,q)}}:{add:function(Q){return U(this,Q=Q===0?0:Q,Q)}}),x&&u(O,"size",{configurable:!0,get:function(){return F(this).size}}),N},setStrong:function(M,T,D){var I=T+" Iterator",N=E(T),O=E(I);m(M,T,function(F,U){S(this,{type:I,target:F,state:N(F),kind:U,last:void 0})},function(){for(var F=O(this),U=F.kind,Y=F.last;Y&&Y.removed;)Y=Y.previous;return F.target&&(F.last=Y=Y?Y.next:F.state.first)?d(U=="keys"?Y.key:U=="values"?Y.value:[Y.key,Y.value],!1):(F.target=void 0,d(void 0,!0))},D?"entries":"values",!D,!0),f(T)}}},function(e,n,r){var o=r(51);e.exports=function(u,s,w){for(var g in s)o(u,g,s[g],w);return u}},function(e,n,r){var o=r(27),u=r(84),s=r(37),w=r(9),g=s("species");e.exports=function(v){var y=o(v);w&&y&&!y[g]&&u(y,g,{configurable:!0,get:function(){return this}})}},function(e,n,r){r(124)},function(e,n,r){r(102)("Set",function(o){return function(){return o(this,arguments.length?arguments[0]:void 0)}},r(120))},function(e,n,r){var o,u=r(39),s=r(6),w=r(7),g=r(27),v=r(17),y=r(10),m=r(44),d=r(24),f=r(126),x=r(20),k=r(23),P=r(26),S=r(110),E=r(50),M=r(82),T=r(42),D=r(106),I=r(47),N=r(67),O=r(127),F=r(128),U=r(130),Y=r(131),Q=r(132),q=r(133),ne=w.Object,J=w.Array,re=w.Date,X=w.Error,j=w.EvalError,Z=w.RangeError,W=w.ReferenceError,te=w.SyntaxError,le=w.TypeError,oe=w.URIError,Ee=w.PerformanceMark,Ae=w.WebAssembly,ve=Ae&&Ae.CompileError||X,ke=Ae&&Ae.LinkError||X,Ce=Ae&&Ae.RuntimeError||X,Pe=g("DOMException"),Me=U.Map,Le=U.has,Te=U.get,ye=U.set,_e=Y.Set,we=Y.add,Se=g("Object","keys"),$e=v([].push),Be=v((!0).valueOf),Oe=v(1 .valueOf),Ge=v("".valueOf),Ie=v(re.prototype.getTime),je=m("structuredClone"),qe="DataCloneError",Ue="Transferring",Je=function(ze){return!y(function(){var Ne=new w.Set([7]),We=ze(Ne),Fe=ze(ne(7));return We==Ne||!We.has(7)||_typeof$1(Fe)!="object"||Fe!=7})&&ze},et=function(ze,Ne){return!y(function(){var We=new Ne,Fe=ze({a:We,b:We});return!(Fe&&Fe.a===Fe.b&&Fe.a instanceof Ne&&Fe.a.stack===We.stack)})},nt=w.structuredClone,st=u||!et(nt,X)||!et(nt,Pe)||(o=nt,!!y(function(){var ze=o(new w.AggregateError([1],je,{cause:3}));return ze.name!="AggregateError"||ze.errors[0]!=1||ze.message!=je||ze.cause!=3})),gt=!nt&&Je(function(ze){return new Ee(je,{detail:ze}).detail}),_t=Je(nt)||gt,wt=function(ze){throw new Pe("Uncloneable type: "+ze,qe)},He=function(ze,Ne){throw new Pe((Ne||"Cloning")+" of "+ze+" cannot be properly polyfilled in this engine",qe)},Ve=function ze(Ne,We){if(P(Ne)&&wt("Symbol"),!k(Ne))return Ne;if(We){if(Le(We,Ne))return Te(We,Ne)}else We=new Me;var Fe,Ye,Ke,Ze,ot,Qe,at,rt,ct,ht,yt,bt=M(Ne),$t=!1;switch(bt){case"Array":Ke=J(N(Ne)),$t=!0;break;case"Object":Ke={},$t=!0;break;case"Map":Ke=new Me,$t=!0;break;case"Set":Ke=new _e,$t=!0;break;case"RegExp":Ke=new RegExp(Ne.source,F(Ne));break;case"Error":switch(Ye=Ne.name){case"AggregateError":Ke=g("AggregateError")([]);break;case"EvalError":Ke=j();break;case"RangeError":Ke=Z();break;case"ReferenceError":Ke=W();break;case"SyntaxError":Ke=te();break;case"TypeError":Ke=le();break;case"URIError":Ke=oe();break;case"CompileError":Ke=ve();break;case"LinkError":Ke=ke();break;case"RuntimeError":Ke=Ce();break;default:Ke=X()}$t=!0;break;case"DOMException":Ke=new Pe(Ne.message,Ne.name),$t=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":Fe=w[bt],k(Fe)||He(bt),Ke=new Fe(ze(Ne.buffer,We),Ne.byteOffset,bt==="DataView"?Ne.byteLength:Ne.length);break;case"DOMQuad":try{Ke=new DOMQuad(ze(Ne.p1,We),ze(Ne.p2,We),ze(Ne.p3,We),ze(Ne.p4,We))}catch{_t?Ke=_t(Ne):He(bt)}break;case"FileList":if(Ze=function(){var At;try{At=new w.DataTransfer}catch{try{At=new w.ClipboardEvent("").clipboardData}catch{}}return At&&At.items&&At.files?At:null}()){for(ot=0,Qe=N(Ne);ot<Qe;ot++)Ze.items.add(ze(Ne[ot],We));Ke=Ze.files}else _t?Ke=_t(Ne):He(bt);break;case"ImageData":try{Ke=new ImageData(ze(Ne.data,We),Ne.width,Ne.height,{colorSpace:Ne.colorSpace})}catch{_t?Ke=_t(Ne):He(bt)}break;default:if(_t)Ke=_t(Ne);else switch(bt){case"BigInt":Ke=ne(Ne.valueOf());break;case"Boolean":Ke=ne(Be(Ne));break;case"Number":Ke=ne(Oe(Ne));break;case"String":Ke=ne(Ge(Ne));break;case"Date":Ke=new re(Ie(Ne));break;case"ArrayBuffer":(Fe=w.DataView)||typeof Ne.slice=="function"||He(bt);try{if(typeof Ne.slice!="function"||Ne.resizable)for(Qe=Ne.byteLength,yt=("maxByteLength"in Ne)?{maxByteLength:Ne.maxByteLength}:void 0,Ke=new ArrayBuffer(Qe,yt),ct=new Fe(Ne),ht=new Fe(Ke),ot=0;ot<Qe;ot++)ht.setUint8(ot,ct.getUint8(ot));else Ke=Ne.slice(0)}catch{throw new Pe("ArrayBuffer is detached",qe)}break;case"SharedArrayBuffer":Ke=Ne;break;case"Blob":try{Ke=Ne.slice(0,Ne.size,Ne.type)}catch{He(bt)}break;case"DOMPoint":case"DOMPointReadOnly":Fe=w[bt];try{Ke=Fe.fromPoint?Fe.fromPoint(Ne):new Fe(Ne.x,Ne.y,Ne.z,Ne.w)}catch{He(bt)}break;case"DOMRect":case"DOMRectReadOnly":Fe=w[bt];try{Ke=Fe.fromRect?Fe.fromRect(Ne):new Fe(Ne.x,Ne.y,Ne.width,Ne.height)}catch{He(bt)}break;case"DOMMatrix":case"DOMMatrixReadOnly":Fe=w[bt];try{Ke=Fe.fromMatrix?Fe.fromMatrix(Ne):new Fe(Ne)}catch{He(bt)}break;case"AudioData":case"VideoFrame":d(Ne.clone)||He(bt);try{Ke=Ne.clone()}catch{wt(bt)}break;case"File":try{Ke=new File([Ne],Ne.name,Ne)}catch{He(bt)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":He(bt);default:wt(bt)}}if(ye(We,Ne,Ke),$t)switch(bt){case"Array":case"Object":for(at=Se(Ne),ot=0,Qe=N(at);ot<Qe;ot++)rt=at[ot],D(Ke,rt,ze(Ne[rt],We));break;case"Map":Ne.forEach(function(At,Ft){ye(Ke,ze(Ft,We),ze(At,We))});break;case"Set":Ne.forEach(function(At){we(Ke,ze(At,We))});break;case"Error":I(Ke,"message",ze(Ne.message,We)),T(Ne,"cause")&&I(Ke,"cause",ze(Ne.cause,We)),Ye=="AggregateError"&&(Ke.errors=ze(Ne.errors,We));case"DOMException":Q&&I(Ke,"stack",ze(Ne.stack,We))}return Ke};s({global:!0,enumerable:!0,sham:!q,forced:st},{structuredClone:function(ze){var Ne,We=O(arguments.length,1)>1&&!x(arguments[1])?E(arguments[1]):void 0,Fe=We?We.transfer:void 0;return Fe!==void 0&&function(Ye,Ke){if(!k(Ye))throw le("Transfer option cannot be converted to a sequence");var Ze=[];S(Ye,function($t){$e(Ze,E($t))});var ot,Qe,at,rt,ct,ht,yt=0,bt=N(Ze);if(q)for(rt=nt(Ze,{transfer:Ze});yt<bt;)ye(Ke,Ze[yt],rt[yt++]);else for(;yt<bt;){if(ot=Ze[yt++],Le(Ke,ot))throw new Pe("Duplicate transferable",qe);switch(Qe=M(ot)){case"ImageBitmap":at=w.OffscreenCanvas,f(at)||He(Qe,Ue);try{(ht=new at(ot.width,ot.height)).getContext("bitmaprenderer").transferFromImageBitmap(ot),ct=ht.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":d(ot.clone)&&d(ot.close)||He(Qe,Ue);try{ct=ot.clone(),ot.close()}catch{}break;case"ArrayBuffer":d(ot.transfer)||He(Qe,Ue),ct=ot.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":He(Qe,Ue)}if(ct===void 0)throw new Pe("This object cannot be transferred: "+Qe,qe);ye(Ke,ot,ct)}}(Fe,Ne=new Me),Ve(ze,Ne)}})},function(e,n,r){var o=r(17),u=r(10),s=r(24),w=r(82),g=r(27),v=r(54),y=function(){},m=[],d=g("Reflect","construct"),f=/^\s*(?:class|function)\b/,x=o(f.exec),k=!f.exec(y),P=function(E){if(!s(E))return!1;try{return d(y,m,E),!0}catch{return!1}},S=function(E){if(!s(E))return!1;switch(w(E)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return k||!!x(f,v(E))}catch{return!0}};S.sham=!0,e.exports=!d||u(function(){var E;return P(P.call)||!P(Object)||!P(function(){E=!0})||E})?S:P},function(e){var n=TypeError;e.exports=function(r,o){if(r<o)throw n("Not enough arguments");return r}},function(e,n,r){var o=r(11),u=r(42),s=r(28),w=r(129),g=RegExp.prototype;e.exports=function(v){var y=v.flags;return y!==void 0||"flags"in g||u(v,"flags")||!s(g,v)?y:o(w,v)}},function(e,n,r){var o=r(50);e.exports=function(){var u=o(this),s="";return u.hasIndices&&(s+="d"),u.global&&(s+="g"),u.ignoreCase&&(s+="i"),u.multiline&&(s+="m"),u.dotAll&&(s+="s"),u.unicode&&(s+="u"),u.unicodeSets&&(s+="v"),u.sticky&&(s+="y"),s}},function(e,n,r){var o=r(17),u=Map.prototype;e.exports={Map,set:o(u.set),get:o(u.get),has:o(u.has),remove:o(u.delete),proto:u}},function(e,n,r){var o=r(17),u=Set.prototype;e.exports={Set,add:o(u.add),has:o(u.has),remove:o(u.delete),proto:u,$has:u.has,$keys:u.keys}},function(e,n,r){var o=r(10),u=r(14);e.exports=!o(function(){var s=Error("a");return!("stack"in s)||(Object.defineProperty(s,"stack",u(1,7)),s.stack!==7)})},function(e,n,r){var o=r(7),u=r(10),s=r(31),w=r(134),g=r(135),v=r(136),y=o.structuredClone;e.exports=!!y&&!u(function(){if(g&&s>92||v&&s>94||w&&s>97)return!1;var m=new ArrayBuffer(8),d=y(m,{transfer:[m]});return m.byteLength!=0||d.byteLength!=8})},function(e,n,r){var o=r(135),u=r(136);e.exports=!o&&!u&&(typeof window>"u"?"undefined":_typeof$1(window))=="object"&&(typeof document>"u"?"undefined":_typeof$1(document))=="object"},function(e){e.exports=(typeof Deno>"u"?"undefined":_typeof$1(Deno))=="object"&&Deno&&_typeof$1(Deno.version)=="object"},function(e,n,r){var o=r(18);e.exports=typeof process<"u"&&o(process)=="process"},function(e,n,r){var o=r(7);e.exports=o},function(__unused_webpack_module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(139),_display_utils=__w_pdfjs_require__(142),_font_loader=__w_pdfjs_require__(145),_canvas=__w_pdfjs_require__(146),_worker_options=__w_pdfjs_require__(149),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(150),_metadata=__w_pdfjs_require__(151),_optional_content_config=__w_pdfjs_require__(152),_transport_stream=__w_pdfjs_require__(153),_xfa_text=__w_pdfjs_require__(154);function _classPrivateMethodInitSpec(e,n){_checkPrivateRedeclaration(e,n),n.add(e)}function _classPrivateFieldInitSpec$1(e,n,r){_checkPrivateRedeclaration(e,n),n.set(e,r)}function _checkPrivateRedeclaration(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(e,n){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,n,"get"))}function _classApplyDescriptorGet(e,n){return n.get?n.get.call(e):n.value}function _classPrivateMethodGet(e,n,r){if(!n.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function _classPrivateFieldSet(e,n,r){return _classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,n,"set"),r),r}function _classExtractFieldDescriptor(e,n,r){if(!n.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return n.get(e)}function _classApplyDescriptorSet(e,n,r){if(n.set)n.set.call(e,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;var DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){var _w_pdfjs_require__=__w_pdfjs_require__(155),NodeCanvasFactory=_w_pdfjs_require__.NodeCanvasFactory,NodeCMapReaderFactory=_w_pdfjs_require__.NodeCMapReaderFactory,NodeFilterFactory=_w_pdfjs_require__.NodeFilterFactory,NodeStandardFontDataFactory=_w_pdfjs_require__.NodeStandardFontDataFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory=NodeCanvasFactory,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=NodeCMapReaderFactory,exports.DefaultFilterFactory=DefaultFilterFactory=NodeFilterFactory,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=NodeStandardFontDataFactory}if(_is_node.isNodeJS){var _w_pdfjs_require__2=__w_pdfjs_require__(156),PDFNodeStream=_w_pdfjs_require__2.PDFNodeStream;createPDFNetworkStream=function(e){return new PDFNodeStream(e)}}else{var _w_pdfjs_require__3=__w_pdfjs_require__(159),PDFNetworkStream=_w_pdfjs_require__3.PDFNetworkStream,_w_pdfjs_require__4=__w_pdfjs_require__(160),PDFFetchStream=_w_pdfjs_require__4.PDFFetchStream;createPDFNetworkStream=function(e){return(0,_display_utils.isValidFetchUrl)(e.url)?new PDFFetchStream(e):new PDFNetworkStream(e)}}function getDocument(e){var n,r;if(typeof e=="string"||e instanceof URL?e={url:e}:(0,_util.isArrayBuffer)(e)&&(e={data:e}),_typeof$1(e)!=="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");var o=new PDFDocumentLoadingTask,u=o.docId,s=e.url?getUrlProp(e.url):null,w=e.data?getDataProp(e.data):null,g=e.httpHeaders||null,v=e.withCredentials===!0,y=(n=e.password)!==null&&n!==void 0?n:null,m=e.range instanceof PDFDataRangeTransport?e.range:null,d=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE,f=e.worker instanceof PDFWorker?e.worker:null,x=e.verbosity,k=typeof e.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(e.docBaseUrl)?null:e.docBaseUrl,P=typeof e.cMapUrl=="string"?e.cMapUrl:null,S=e.cMapPacked!==!1,E=e.CMapReaderFactory||DefaultCMapReaderFactory,M=typeof e.standardFontDataUrl=="string"?e.standardFontDataUrl:null,T=e.StandardFontDataFactory||DefaultStandardFontDataFactory,D=e.stopAtErrors!==!0,I=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,N=e.isEvalSupported!==!1,O=typeof e.isOffscreenCanvasSupported=="boolean"?e.isOffscreenCanvasSupported:!_is_node.isNodeJS,F=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,U=typeof e.disableFontFace=="boolean"?e.disableFontFace:_is_node.isNodeJS,Y=e.fontExtraProperties===!0,Q=e.enableXfa===!0,q=e.ownerDocument||globalThis.document,ne=e.disableRange===!0,J=e.disableStream===!0,re=e.disableAutoFetch===!0,X=e.pdfBug===!0,j=m?m.length:(r=e.length)!==null&&r!==void 0?r:NaN,Z=typeof e.useSystemFonts=="boolean"?e.useSystemFonts:!_is_node.isNodeJS&&!U,W=typeof e.useWorkerFetch=="boolean"?e.useWorkerFetch:E===_display_utils.DOMCMapReaderFactory&&T===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(P,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(M,document.baseURI),te=e.canvasFactory||new DefaultCanvasFactory({ownerDocument:q}),le=e.filterFactory||new DefaultFilterFactory({docId:u,ownerDocument:q});(0,_util.setVerbosityLevel)(x);var oe={canvasFactory:te,filterFactory:le};if(W||(oe.cMapReaderFactory=new E({baseUrl:P,isCompressed:S}),oe.standardFontDataFactory=new T({baseUrl:M})),!f){var Ee={verbosity:x,port:_worker_options.GlobalWorkerOptions.workerPort};f=Ee.port?PDFWorker.fromPort(Ee):new PDFWorker(Ee),o._worker=f}var Ae={docId:u,apiVersion:"3.5.141",data:w,password:y,disableAutoFetch:re,rangeChunkSize:d,length:j,docBaseUrl:k,enableXfa:Q,evaluatorOptions:{maxImageSize:I,disableFontFace:U,ignoreErrors:D,isEvalSupported:N,isOffscreenCanvasSupported:O,canvasMaxAreaInBytes:F,fontExtraProperties:Y,useSystemFonts:Z,cMapUrl:W?P:null,standardFontDataUrl:W?M:null}},ve={ignoreErrors:D,isEvalSupported:N,disableFontFace:U,fontExtraProperties:Y,enableXfa:Q,ownerDocument:q,disableAutoFetch:re,pdfBug:X,styleElement:null};return f.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");var ke=_fetchDocument(f,Ae),Ce=new Promise(function(Pe){var Me;m?Me=new _transport_stream.PDFDataTransportStream({length:j,initialData:m.initialData,progressiveDone:m.progressiveDone,contentDispositionFilename:m.contentDispositionFilename,disableRange:ne,disableStream:J},m):w||(Me=createPDFNetworkStream({url:s,length:j,httpHeaders:g,withCredentials:v,rangeChunkSize:d,disableRange:ne,disableStream:J})),Pe(Me)});return Promise.all([ke,Ce]).then(function(Pe){var Me=_slicedToArray(Pe,2),Le=Me[0],Te=Me[1];if(o.destroyed)throw new Error("Loading aborted");var ye=new _message_handler.MessageHandler(u,Le,f.port),_e=new WorkerTransport(ye,o,Te,ve,oe);o._transport=_e,ye.send("Ready",null)})}).catch(o._capability.reject),o}function _fetchDocument(e,n){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(_regeneratorRuntime().mark(function e(n,r){var o;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!n.destroyed){u.next=2;break}throw new Error("Worker was destroyed");case 2:return u.next=4,n.messageHandler.sendWithPromise("GetDocRequest",r,r.data?[r.data.buffer]:null);case 4:if(o=u.sent,!n.destroyed){u.next=7;break}throw new Error("Worker was destroyed");case 7:return u.abrupt("return",o);case 8:case"end":return u.stop()}},e)}))).apply(this,arguments)}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(_is_node.isNodeJS&&typeof e=="string")return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_is_node.isNodeJS&&typeof Buffer<"u"&&e instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(e);if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if(typeof e=="string")return(0,_util.stringToBytes)(e);if(_typeof$1(e)==="object"&&!isNaN(e==null?void 0:e.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}var PDFDocumentLoadingTask=function(){return _createClass(function n(){var r,o;_classCallCheck(this,n),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d".concat((_docId2._=(r=_docId2._,o=r++,r),o)),this.destroyed=!1,this.onPassword=null,this.onProgress=null},[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(){var r;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.destroyed=!0,o.next=3,(r=this._transport)===null||r===void 0?void 0:r.destroy();case 3:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 5:case"end":return o.stop()}},n,this)})),function(){return e.apply(this,arguments)})}]);var e}(),_docId2={_:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var PDFDataRangeTransport=function(){return _createClass(function e(n,r){_classCallCheck(this,e);var o=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=n,this.initialData=r,this.progressiveDone=o,this.contentDispositionFilename=u,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()},[{key:"addRangeListener",value:function(e){this._rangeListeners.push(e)}},{key:"addProgressListener",value:function(e){this._progressListeners.push(e)}},{key:"addProgressiveReadListener",value:function(e){this._progressiveReadListeners.push(e)}},{key:"addProgressiveDoneListener",value:function(e){this._progressiveDoneListeners.push(e)}},{key:"onDataRange",value:function(e,n){var r,o=_createForOfIteratorHelper(this._rangeListeners);try{for(o.s();!(r=o.n()).done;)(0,r.value)(e,n)}catch(u){o.e(u)}finally{o.f()}}},{key:"onDataProgress",value:function(e,n){var r=this;this._readyCapability.promise.then(function(){var o,u=_createForOfIteratorHelper(r._progressListeners);try{for(u.s();!(o=u.n()).done;)(0,o.value)(e,n)}catch(s){u.e(s)}finally{u.f()}})}},{key:"onDataProgressiveRead",value:function(e){var n=this;this._readyCapability.promise.then(function(){var r,o=_createForOfIteratorHelper(n._progressiveReadListeners);try{for(o.s();!(r=o.n()).done;)(0,r.value)(e)}catch(u){o.e(u)}finally{o.f()}})}},{key:"onDataProgressiveDone",value:function(){var e=this;this._readyCapability.promise.then(function(){var n,r=_createForOfIteratorHelper(e._progressiveDoneListeners);try{for(r.s();!(n=r.n()).done;)(0,n.value)()}catch(o){r.e(o)}finally{r.f()}})}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(e,n){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}])}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){return _createClass(function e(n,r){_classCallCheck(this,e),this._pdfInfo=n,this._transport=r},[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"filterFactory",get:function(){return this._transport.filterFactory}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"isPureXfa",get:function(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(e){return this._transport.getPage(e)}},{key:"getPageIndex",value:function(e){return this._transport.getPageIndex(e)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(e){return this._transport.getDestination(e)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"saveDocument",value:function(){return this._transport.saveDocument()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}])}();exports.PDFDocumentProxy=PDFDocumentProxy;var _delayedCleanupTimeout=new WeakMap,_pendingCleanup=new WeakMap,_tryCleanup=new WeakSet,_abortDelayedCleanup=new WeakSet,PDFPageProxy=function(){return _createClass(function n(r,o,u){_classCallCheck(this,n);var s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];_classPrivateMethodInitSpec(this,_abortDelayedCleanup),_classPrivateMethodInitSpec(this,_tryCleanup),_classPrivateFieldInitSpec$1(this,_delayedCleanupTimeout,{writable:!0,value:null}),_classPrivateFieldInitSpec$1(this,_pendingCleanup,{writable:!0,value:!1}),this._pageIndex=r,this._pageInfo=o,this._transport=u,this._stats=s?new _display_utils.StatTimer:null,this._pdfBug=s,this.commonObjs=u.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1},[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.scale,o=n.rotation,u=o===void 0?this.rotate:o,s=n.offsetX,w=s===void 0?0:s,g=n.offsetY,v=g===void 0?0:g,y=n.dontFlip,m=y!==void 0&&y;return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:u,offsetX:w,offsetY:v,dontFlip:m})}},{key:"getAnnotations",value:function(){var n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).intent,r=n===void 0?"display":n,o=this._transport.getRenderingIntent(r);return this._transport.getAnnotations(this._pageIndex,o.renderingIntent)}},{key:"getJSActions",value:function(){return this._transport.getPageJSActions(this._pageIndex)}},{key:"isPureXfa",get:function(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}},{key:"getXfa",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(){var r;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",((r=this._transport._htmlForXfa)===null||r===void 0?void 0:r.children[this._pageIndex])||null);case 1:case"end":return o.stop()}},n,this)})),function(){return e.apply(this,arguments)})},{key:"render",value:function(n){var r,o,u,s=this,w=n.canvasContext,g=n.viewport,v=n.intent,y=v===void 0?"display":v,m=n.annotationMode,d=m===void 0?_util.AnnotationMode.ENABLE:m,f=n.transform,x=f===void 0?null:f,k=n.background,P=k===void 0?null:k,S=n.optionalContentConfigPromise,E=S===void 0?null:S,M=n.annotationCanvasMap,T=M===void 0?null:M,D=n.pageColors,I=D===void 0?null:D,N=n.printAnnotationStorage,O=N===void 0?null:N;if((o=arguments[0])!==null&&o!==void 0&&o.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(u=this._stats)===null||u===void 0||u.time("Overall");var F=this._transport.getRenderingIntent(y,d,O);_classPrivateFieldSet(this,_pendingCleanup,!1),_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this),E||(E=this._transport.getOptionalContentConfig());var U=this._intentStates.get(F.cacheKey);U||(U=Object.create(null),this._intentStates.set(F.cacheKey,U)),U.streamReaderCancelTimeout&&(clearTimeout(U.streamReaderCancelTimeout),U.streamReaderCancelTimeout=null);var Y,Q=!!(F.renderingIntent&_util.RenderingIntentFlag.PRINT);U.displayReadyCapability||(U.displayReadyCapability=(0,_util.createPromiseCapability)(),U.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Y=this._stats)===null||Y===void 0||Y.time("Page Request"),this._pumpOperatorList(F));var q=function(re){var X,j;U.renderTasks.delete(ne),(s._maybeCleanupAfterRender||Q)&&_classPrivateFieldSet(s,_pendingCleanup,!0),_classPrivateMethodGet(s,_tryCleanup,_tryCleanup2).call(s,!Q),re?(ne.capability.reject(re),s._abortOperatorList({intentState:U,reason:re instanceof Error?re:new Error(re)})):ne.capability.resolve(),(X=s._stats)===null||X===void 0||X.timeEnd("Rendering"),(j=s._stats)===null||j===void 0||j.timeEnd("Overall")},ne=new InternalRenderTask({callback:q,params:{canvasContext:w,viewport:g,transform:x,background:P},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:T,operatorList:U.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Q,pdfBug:this._pdfBug,pageColors:I});((r=U).renderTasks||(r.renderTasks=new Set)).add(ne);var J=ne.task;return Promise.all([U.displayReadyCapability.promise,E]).then(function(re){var X,j=_slicedToArray(re,2),Z=j[0],W=j[1];_classPrivateFieldGet(s,_pendingCleanup)?q():((X=s._stats)===null||X===void 0||X.time("Rendering"),ne.initializeGraphics({transparency:Z,optionalContentConfig:W}),ne.operatorListChanged())}).catch(q),J}},{key:"getOperatorList",value:function(){var n,r,o,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=u.intent,w=s===void 0?"display":s,g=u.annotationMode,v=g===void 0?_util.AnnotationMode.ENABLE:g,y=u.printAnnotationStorage,m=y===void 0?null:y,d=this._transport.getRenderingIntent(w,v,m,!0),f=this._intentStates.get(d.cacheKey);return f||(f=Object.create(null),this._intentStates.set(d.cacheKey,f)),f.opListReadCapability||((n=Object.create(null)).operatorListChanged=function(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(n))},f.opListReadCapability=(0,_util.createPromiseCapability)(),((r=f).renderTasks||(r.renderTasks=new Set)).add(n),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(o=this._stats)===null||o===void 0||o.time("Page Request"),this._pumpOperatorList(d)),f.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var n=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeMarkedContent,r=n!==void 0&&n;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:r===!0},{highWaterMark:100,size:function(o){return o.items.length}})}},{key:"getTextContent",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(function(o){return _xfa_text.XfaText.textContent(o)});var r=this.streamTextContent(n);return new Promise(function(o,u){var s=r.getReader(),w={items:[],styles:Object.create(null)};(function g(){s.read().then(function(v){var y,m=v.value;v.done?o(w):(Object.assign(w.styles,m.styles),(y=w.items).push.apply(y,_toConsumableArray$1(m.items)),g())},u)})()})}},{key:"getStructTree",value:function(){return this._transport.getStructTree(this._pageIndex)}},{key:"_destroy",value:function(){this.destroyed=!0;var n,r=[],o=_createForOfIteratorHelper(this._intentStates.values());try{for(o.s();!(n=o.n()).done;){var u=n.value;if(this._abortOperatorList({intentState:u,reason:new Error("Page was destroyed."),force:!0}),!u.opListReadCapability){var s,w=_createForOfIteratorHelper(u.renderTasks);try{for(w.s();!(s=w.n()).done;){var g=s.value;r.push(g.completed),g.cancel()}}catch(v){w.e(v)}finally{w.f()}}}}catch(v){o.e(v)}finally{o.f()}return this.objs.clear(),_classPrivateFieldSet(this,_pendingCleanup,!1),_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this),Promise.all(r)}},{key:"cleanup",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];_classPrivateFieldSet(this,_pendingCleanup,!0);var r=_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!1);return n&&r&&this._stats&&(this._stats=new _display_utils.StatTimer),r}},{key:"_startRenderPage",value:function(n,r){var o,u,s=this._intentStates.get(r);s&&((o=this._stats)===null||o===void 0||o.timeEnd("Page Request"),(u=s.displayReadyCapability)===null||u===void 0||u.resolve(n))}},{key:"_renderPageChunk",value:function(n,r){for(var o=0,u=n.length;o<u;o++)r.operatorList.fnArray.push(n.fnArray[o]),r.operatorList.argsArray.push(n.argsArray[o]);r.operatorList.lastChunk=n.lastChunk,r.operatorList.separateAnnots=n.separateAnnots;var s,w=_createForOfIteratorHelper(r.renderTasks);try{for(w.s();!(s=w.n()).done;)s.value.operatorListChanged()}catch(g){w.e(g)}finally{w.f()}n.lastChunk&&_classPrivateMethodGet(this,_tryCleanup,_tryCleanup2).call(this,!0)}},{key:"_pumpOperatorList",value:function(n){var r=this,o=n.renderingIntent,u=n.cacheKey,s=n.annotationStorageMap,w=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:u,annotationStorage:s}).getReader(),g=this._intentStates.get(u);g.streamReader=w,function v(){w.read().then(function(y){var m=y.value;y.done?g.streamReader=null:r._transport.destroyed||(r._renderPageChunk(m,g),v())},function(y){if(g.streamReader=null,!r._transport.destroyed){if(g.operatorList){g.operatorList.lastChunk=!0;var m,d=_createForOfIteratorHelper(g.renderTasks);try{for(d.s();!(m=d.n()).done;)m.value.operatorListChanged()}catch(f){d.e(f)}finally{d.f()}_classPrivateMethodGet(r,_tryCleanup,_tryCleanup2).call(r,!0)}if(g.displayReadyCapability)g.displayReadyCapability.reject(y);else{if(!g.opListReadCapability)throw y;g.opListReadCapability.reject(y)}}})}()}},{key:"_abortOperatorList",value:function(n){var r=this,o=n.intentState,u=n.reason,s=n.force,w=s!==void 0&&s;if(o.streamReader){if(o.streamReaderCancelTimeout&&(clearTimeout(o.streamReaderCancelTimeout),o.streamReaderCancelTimeout=null),!w){if(o.renderTasks.size>0)return;if(u instanceof _display_utils.RenderingCancelledException){var g=RENDERING_CANCELLED_TIMEOUT;return u.extraDelay>0&&u.extraDelay<1e3&&(g+=u.extraDelay),void(o.streamReaderCancelTimeout=setTimeout(function(){o.streamReaderCancelTimeout=null,r._abortOperatorList({intentState:o,reason:u,force:!0})},g))}}if(o.streamReader.cancel(new _util.AbortException(u.message)).catch(function(){}),o.streamReader=null,!this._transport.destroyed){var v,y=_createForOfIteratorHelper(this._intentStates);try{for(y.s();!(v=y.n()).done;){var m=_slicedToArray(v.value,2),d=m[0];if(m[1]===o){this._intentStates.delete(d);break}}}catch(f){y.e(f)}finally{y.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]);var e}();function _tryCleanup2(){var e=this,n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(_classPrivateMethodGet(this,_abortDelayedCleanup,_abortDelayedCleanup2).call(this),!_classPrivateFieldGet(this,_pendingCleanup))return!1;if(n)return _classPrivateFieldSet(this,_delayedCleanupTimeout,setTimeout(function(){_classPrivateFieldSet(e,_delayedCleanupTimeout,null),_classPrivateMethodGet(e,_tryCleanup,_tryCleanup2).call(e,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;var r,o=_createForOfIteratorHelper(this._intentStates.values());try{for(o.s();!(r=o.n()).done;){var u=r.value,s=u.renderTasks,w=u.operatorList;if(s.size>0||!w.lastChunk)return!1}}catch(g){o.e(g)}finally{o.f()}return this._intentStates.clear(),this.objs.clear(),_classPrivateFieldSet(this,_pendingCleanup,!1),!0}function _abortDelayedCleanup2(){_classPrivateFieldGet(this,_delayedCleanupTimeout)&&(clearTimeout(_classPrivateFieldGet(this,_delayedCleanupTimeout)),_classPrivateFieldSet(this,_delayedCleanupTimeout,null))}exports.PDFPageProxy=PDFPageProxy;var _listeners=new WeakMap,_deferred=new WeakMap,LoopbackPort=function(){return _createClass(function e(){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_listeners,new Set),_classPrivateFieldInitSpec(this,_deferred,Promise.resolve())},[{key:"postMessage",value:function(e,n){var r=this,o={data:structuredClone(e,n?{transfer:n}:null)};_classPrivateFieldGet2(_deferred,this).then(function(){var u,s=_createForOfIteratorHelper(_classPrivateFieldGet2(_listeners,r));try{for(s.s();!(u=s.n()).done;)u.value.call(r,o)}catch(w){s.e(w)}finally{s.f()}})}},{key:"addEventListener",value:function(e,n){_classPrivateFieldGet2(_listeners,this).add(n)}},{key:"removeEventListener",value:function(e,n){_classPrivateFieldGet2(_listeners,this).delete(n)}},{key:"terminate",value:function(){_classPrivateFieldGet2(_listeners,this).clear()}}])}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if((typeof document>"u"?"undefined":_typeof$1(document))==="object"){var _document,_document$currentScri,pdfjsFilePath=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,n){var r;try{if(!(r=new URL(e)).origin||r.origin==="null")return!1}catch{return!1}var o=new URL(n,r);return r.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(e){var n='importScripts("'.concat(e,'");');return URL.createObjectURL(new Blob([n]))};var PDFWorker=function(){function PDFWorker(){_classCallCheck(this,PDFWorker);var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.name,r=n===void 0?null:n,o=e.port,u=o===void 0?null:o,s=e.verbosity,w=s===void 0?(0,_util.getVerbosityLevel)():s;if(u&&_workerPorts._.has(u))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=r,this.destroyed=!1,this.verbosity=w,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,u)return _workerPorts._.set(u,this),void this._initializeFromPort(u);this._initialize()}return _createClass(PDFWorker,[{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}},{key:"_initialize",value:function(){var e=this;if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var n=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,n)||(n=PDFWorkerUtil.createCDNWrapper(new URL(n,window.location).href));var r=new Worker(n),o=new _message_handler.MessageHandler("main","worker",r),u=function(){r.removeEventListener("error",s),o.destroy(),r.terminate(),e.destroyed?e._readyCapability.reject(new Error("Worker was destroyed")):e._setupFakeWorker()},s=function(){e._webWorker||u()};r.addEventListener("error",s),o.on("test",function(g){r.removeEventListener("error",s),e.destroyed?u():g?(e._messageHandler=o,e._port=r,e._webWorker=r,e._readyCapability.resolve(),o.send("configure",{verbosity:e.verbosity})):(e._setupFakeWorker(),o.destroy(),r.terminate())}),o.on("ready",function(g){if(r.removeEventListener("error",s),e.destroyed)u();else try{w()}catch{e._setupFakeWorker()}});var w=function(){var g=new Uint8Array;o.send("test",g,[g.buffer])};return void w()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var e=this;PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(function(n){if(e.destroyed)e._readyCapability.reject(new Error("Worker was destroyed"));else{var r=new LoopbackPort;e._port=r;var o="fake".concat(PDFWorkerUtil.fakeWorkerId++),u=new _message_handler.MessageHandler(o+"_worker",o,r);n.setup(u,r);var s=new _message_handler.MessageHandler(o,o+"_worker",r);e._messageHandler=s,e._readyCapability.resolve(),s.send("configure",{verbosity:e.verbosity})}}).catch(function(n){e._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(n.message,'".')))})}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_workerPorts._.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"fromPort",value:function(e){if(e==null||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _assertClassBrand(PDFWorker,this,_workerPorts)._.has(e.port)?_assertClassBrand(PDFWorker,this,_workerPorts)._.get(e.port):new PDFWorker(e)}},{key:"workerSrc",get:function(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function(){try{var e;return((e=globalThis.pdfjsWorker)===null||e===void 0?void 0:e.WorkerMessageHandler)||null}catch{return null}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this14=this,loader=function(){var _ref22=_asyncToGenerator(_regeneratorRuntime().mark(function _callee3(){var mainWorkerMessageHandler,worker;return _regeneratorRuntime().wrap(function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(mainWorkerMessageHandler=_this14._mainThreadWorkerMessageHandler,!mainWorkerMessageHandler){_context3.next=3;break}return _context3.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS||typeof commonjsRequire!="function"){_context3.next=6;break}return worker=eval("require")(_this14.workerSrc),_context3.abrupt("return",worker.WorkerMessageHandler);case 6:return _context3.next=8,(0,_display_utils.loadScript)(_this14.workerSrc);case 8:return _context3.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context3.stop()}},_callee3)}));return function(){return _ref22.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}])}(),_workerPorts={_:new WeakMap};exports.PDFWorker=PDFWorker;var _methodPromises=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_cacheSimpleMethod=new WeakSet,WorkerTransport=function(){return _createClass(function n(r,o,u,s,w){_classCallCheck(this,n),_classPrivateMethodInitSpec(this,_cacheSimpleMethod),_classPrivateFieldInitSpec$1(this,_methodPromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec$1(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec$1(this,_pagePromises,{writable:!0,value:new Map}),this.messageHandler=r,this.loadingTask=o,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this._params=s,this.canvasFactory=w.canvasFactory,this.filterFactory=w.filterFactory,this.cMapReaderFactory=w.cMapReaderFactory,this.standardFontDataFactory=w.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=u,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()},[{key:"annotationStorage",get:function(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"getRenderingIntent",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],s=_util.RenderingIntentFlag.DISPLAY,w=null;switch(n){case"any":s=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":s=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(n))}switch(r){case _util.AnnotationMode.DISABLE:s+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:s+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:w=((s+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE)&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(r))}return u&&(s+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:s,cacheKey:"".concat(s,"_").concat(_annotation_storage.AnnotationStorage.getHash(w)),annotationStorageMap:w}}},{key:"destroy",value:function(){var n=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var r,o=[],u=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values());try{for(u.s();!(r=u.n()).done;){var s=r.value;o.push(s._destroy())}}catch(g){u.e(g)}finally{u.f()}_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var w=this.messageHandler.sendWithPromise("Terminate",null);return o.push(w),Promise.all(o).then(function(){n.commonObjs.clear(),n.fontLoader.clear(),_classPrivateFieldGet(n,_methodPromises).clear(),n.filterFactory.destroy(),n._networkStream&&n._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),n.messageHandler&&(n.messageHandler.destroy(),n.messageHandler=null),n.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var n=this,r=this.messageHandler,o=this.loadingTask;r.on("GetReader",function(u,s){(0,_util.assert)(n._networkStream,"GetReader - no `IPDFStream` instance available."),n._fullReader=n._networkStream.getFullReader(),n._fullReader.onProgress=function(w){n._lastProgress={loaded:w.loaded,total:w.total}},s.onPull=function(){n._fullReader.read().then(function(w){var g=w.value;w.done?s.close():((0,_util.assert)(g instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(g),1,[g]))}).catch(function(w){s.error(w)})},s.onCancel=function(w){n._fullReader.cancel(w),s.ready.catch(function(g){if(!n.destroyed)throw g})}}),r.on("ReaderHeadersReady",function(u){var s=(0,_util.createPromiseCapability)(),w=n._fullReader;return w.headersReady.then(function(){var g;w.isStreamingSupported&&w.isRangeSupported||(n._lastProgress&&((g=o.onProgress)===null||g===void 0||g.call(o,n._lastProgress)),w.onProgress=function(v){var y;(y=o.onProgress)===null||y===void 0||y.call(o,{loaded:v.loaded,total:v.total})}),s.resolve({isStreamingSupported:w.isStreamingSupported,isRangeSupported:w.isRangeSupported,contentLength:w.contentLength})},s.reject),s.promise}),r.on("GetRangeReader",function(u,s){(0,_util.assert)(n._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var w=n._networkStream.getRangeReader(u.begin,u.end);w?(s.onPull=function(){w.read().then(function(g){var v=g.value;g.done?s.close():((0,_util.assert)(v instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(v),1,[v]))}).catch(function(g){s.error(g)})},s.onCancel=function(g){w.cancel(g),s.ready.catch(function(v){if(!n.destroyed)throw v})}):s.close()}),r.on("GetDoc",function(u){var s=u.pdfInfo;n._numPages=s.numPages,n._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,o._capability.resolve(new PDFDocumentProxy(s,n))}),r.on("DocException",function(u){var s;switch(u.name){case"PasswordException":s=new _util.PasswordException(u.message,u.code);break;case"InvalidPDFException":s=new _util.InvalidPDFException(u.message);break;case"MissingPDFException":s=new _util.MissingPDFException(u.message);break;case"UnexpectedResponseException":s=new _util.UnexpectedResponseException(u.message,u.status);break;case"UnknownErrorException":s=new _util.UnknownErrorException(u.message,u.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}o._capability.reject(s)}),r.on("PasswordRequest",function(u){if(n._passwordCapability=(0,_util.createPromiseCapability)(),o.onPassword)try{o.onPassword(function(s){s instanceof Error?n._passwordCapability.reject(s):n._passwordCapability.resolve({password:s})},u.code)}catch(s){n._passwordCapability.reject(s)}else n._passwordCapability.reject(new _util.PasswordException(u.message,u.code));return n._passwordCapability.promise}),r.on("DataLoaded",function(u){var s;(s=o.onProgress)===null||s===void 0||s.call(o,{loaded:u.length,total:u.length}),n.downloadInfoCapability.resolve(u)}),r.on("StartRenderPage",function(u){n.destroyed||_classPrivateFieldGet(n,_pageCache).get(u.pageIndex)._startRenderPage(u.transparency,u.cacheKey)}),r.on("commonobj",function(u){var s,w=_slicedToArray(u,3),g=w[0],v=w[1],y=w[2];if(!n.destroyed&&!n.commonObjs.has(g))switch(v){case"Font":var m=n._params;if("error"in y){var d=y.error;(0,_util.warn)("Error during font loading: ".concat(d)),n.commonObjs.resolve(g,d);break}var f=m.pdfBug&&(s=globalThis.FontInspector)!==null&&s!==void 0&&s.enabled?function(k,P){return globalThis.FontInspector.fontAdded(k,P)}:null,x=new _font_loader.FontFaceObject(y,{isEvalSupported:m.isEvalSupported,disableFontFace:m.disableFontFace,ignoreErrors:m.ignoreErrors,inspectFont:f});n.fontLoader.bind(x).catch(function(k){return r.sendWithPromise("FontFallback",{id:g})}).finally(function(){!m.fontExtraProperties&&x.data&&(x.data=null),n.commonObjs.resolve(g,x)});break;case"FontPath":case"Image":case"Pattern":n.commonObjs.resolve(g,y);break;default:throw new Error("Got unknown common object type ".concat(v))}}),r.on("obj",function(u){var s=_slicedToArray(u,4),w=s[0],g=s[1],v=s[2],y=s[3];if(!n.destroyed){var m=_classPrivateFieldGet(n,_pageCache).get(g);if(!m.objs.has(w))switch(v){case"Image":var d;m.objs.resolve(w,y),y&&(y.bitmap?y.width*y.height*4:((d=y.data)===null||d===void 0?void 0:d.length)||0)>_util.MAX_IMAGE_SIZE_TO_CACHE&&(m._maybeCleanupAfterRender=!0);break;case"Pattern":m.objs.resolve(w,y);break;default:throw new Error("Got unknown object type ".concat(v))}}}),r.on("DocProgress",function(u){var s;n.destroyed||(s=o.onProgress)===null||s===void 0||s.call(o,{loaded:u.loaded,total:u.total})}),r.on("FetchBuiltInCMap",function(u){return n.destroyed?Promise.reject(new Error("Worker was destroyed.")):n.cMapReaderFactory?n.cMapReaderFactory.fetch(u):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))}),r.on("FetchStandardFontData",function(u){return n.destroyed?Promise.reject(new Error("Worker was destroyed.")):n.standardFontDataFactory?n.standardFontDataFactory.fetch(u):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))})}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"saveDocument",value:function(){var n,r,o=this;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(n=(r=this._fullReader)===null||r===void 0?void 0:r.filename)!==null&&n!==void 0?n:null}).finally(function(){o.annotationStorage.resetModified()})}},{key:"getPage",value:function(n){var r=this;if(!Number.isInteger(n)||n<=0||n>this._numPages)return Promise.reject(new Error("Invalid page request."));var o=n-1,u=_classPrivateFieldGet(this,_pagePromises).get(o);if(u)return u;var s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:o}).then(function(w){if(r.destroyed)throw new Error("Transport destroyed");var g=new PDFPageProxy(o,w,r,r._params.pdfBug);return _classPrivateFieldGet(r,_pageCache).set(o,g),g});return _classPrivateFieldGet(this,_pagePromises).set(o,s),s}},{key:"getPageIndex",value:function(n){return _typeof$1(n)!=="object"||n===null||!Number.isInteger(n.num)||n.num<0||!Number.isInteger(n.gen)||n.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:n.num,gen:n.gen})}},{key:"getAnnotations",value:function(n,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:n,intent:r})}},{key:"getFieldObjects",value:function(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"GetFieldObjects")}},{key:"hasJSActions",value:function(){return _classPrivateMethodGet(this,_cacheSimpleMethod,_cacheSimpleMethod2).call(this,"HasJSActions")}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(n){return typeof n!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:n})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function(n){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:n})}},{key:"getStructTree",value:function(n){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:n})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(function(n){return new _optional_content_config.OptionalContentConfig(n)})}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var n=this,r="GetMetadata",o=_classPrivateFieldGet(this,_methodPromises).get(r);if(o)return o;var u=this.messageHandler.sendWithPromise(r,null).then(function(s){var w,g,v,y;return{info:s[0],metadata:s[1]?new _metadata.Metadata(s[1]):null,contentDispositionFilename:(w=(v=n._fullReader)===null||v===void 0?void 0:v.filename)!==null&&w!==void 0?w:null,contentLength:(g=(y=n._fullReader)===null||y===void 0?void 0:y.contentLength)!==null&&g!==void 0?g:null}});return _classPrivateFieldGet(this,_methodPromises).set(r,u),u}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(){var r,o,u,s,w=arguments;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(r=w.length>0&&w[0]!==void 0&&w[0],!this.destroyed){g.next=3;break}return g.abrupt("return");case 3:return g.next=5,this.messageHandler.sendWithPromise("Cleanup",null);case 5:o=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values()),g.prev=6,o.s();case 8:if((u=o.n()).done){g.next=15;break}if((s=u.value).cleanup()){g.next=13;break}throw new Error("startCleanup: Page ".concat(s.pageNumber," is currently rendering."));case 13:g.next=8;break;case 15:g.next=20;break;case 17:g.prev=17,g.t0=g.catch(6),o.e(g.t0);case 20:return g.prev=20,o.f(),g.finish(20);case 23:this.commonObjs.clear(),r||this.fontLoader.clear(),_classPrivateFieldGet(this,_methodPromises).clear(),this.filterFactory.destroy(!0);case 27:case"end":return g.stop()}},n,this,[[6,17,20,23]])})),function(){return e.apply(this,arguments)})},{key:"loadingParams",get:function(){var n=this._params,r=n.disableAutoFetch,o=n.enableXfa;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r,enableXfa:o})}}]);var e}();function _cacheSimpleMethod2(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=_classPrivateFieldGet(this,_methodPromises).get(e);if(r)return r;var o=this.messageHandler.sendWithPromise(e,n);return _classPrivateFieldGet(this,_methodPromises).set(e,o),o}var _objs=new WeakMap,_ensureObj=new WeakSet,PDFObjects=function(){return _createClass(function e(){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec$1(this,_objs,{writable:!0,value:Object.create(null)})},[{key:"get",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(n){var r=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,e);return r.capability.promise.then(function(){return n(r.data)}),null}var o=_classPrivateFieldGet(this,_objs)[e];if(o==null||!o.capability.settled)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return o.data}},{key:"has",value:function(e){var n=_classPrivateFieldGet(this,_objs)[e];return(n==null?void 0:n.capability.settled)||!1}},{key:"resolve",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,e);r.data=n,r.capability.resolve()}},{key:"clear",value:function(){for(var e in _classPrivateFieldGet(this,_objs)){var n,r=_classPrivateFieldGet(this,_objs)[e].data;r==null||(n=r.bitmap)===null||n===void 0||n.close()}_classPrivateFieldSet(this,_objs,Object.create(null))}}])}();function _ensureObj2(e){var n=_classPrivateFieldGet(this,_objs)[e];return n||(_classPrivateFieldGet(this,_objs)[e]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap,RenderTask=function(){return _createClass(function e(n){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_internalRenderTask,null),_classPrivateFieldSet2(_internalRenderTask,this,n),this.onContinue=null},[{key:"promise",get:function(){return _classPrivateFieldGet2(_internalRenderTask,this).capability.promise}},{key:"cancel",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;_classPrivateFieldGet2(_internalRenderTask,this).cancel(null,e)}},{key:"separateAnnots",get:function(){var e=_classPrivateFieldGet2(_internalRenderTask,this).operatorList.separateAnnots;if(!e)return!1;var n=_classPrivateFieldGet2(_internalRenderTask,this).annotationCanvasMap;return e.form||e.canvas&&(n==null?void 0:n.size)>0}}])}();exports.RenderTask=RenderTask;var InternalRenderTask=function(){return _createClass(function n(r){_classCallCheck(this,n);var o=r.callback,u=r.params,s=r.objs,w=r.commonObjs,g=r.annotationCanvasMap,v=r.operatorList,y=r.pageIndex,m=r.canvasFactory,d=r.filterFactory,f=r.useRequestAnimationFrame,x=f!==void 0&&f,k=r.pdfBug,P=k!==void 0&&k,S=r.pageColors,E=S===void 0?null:S;this.callback=o,this.params=u,this.objs=s,this.commonObjs=w,this.annotationCanvasMap=g,this.operatorListIdx=null,this.operatorList=v,this._pageIndex=y,this.canvasFactory=m,this.filterFactory=d,this._pdfBug=P,this.pageColors=E,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=x===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=u.canvasContext.canvas},[{key:"completed",get:function(){return this.capability.promise.catch(function(){})}},{key:"initializeGraphics",value:function(n){var r,o,u=n.transparency,s=u!==void 0&&u,w=n.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(_canvasInUse._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_canvasInUse._.add(this._canvas)}this._pdfBug&&(r=globalThis.StepperManager)!==null&&r!==void 0&&r.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var g=this.params,v=g.canvasContext,y=g.viewport,m=g.transform,d=g.background;this.gfx=new _canvas.CanvasGraphics(v,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:w},this.annotationCanvasMap),this.gfx.beginDrawing({transform:m,viewport:y,transparency:s,background:d}),this.operatorListIdx=0,this.graphicsReady=!0,(o=this.graphicsReadyCallback)===null||o===void 0||o.call(this)}}},{key:"cancel",value:function(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.running=!1,this.cancelled=!0,(n=this.gfx)===null||n===void 0||n.endDrawing(this.pageColors),this._canvas&&_canvasInUse._.delete(this._canvas),this.callback(r||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas",o))}},{key:"operatorListChanged",value:function(){var n;this.graphicsReady?((n=this.stepper)===null||n===void 0||n.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var n=this;this._useRequestAnimationFrame?window.requestAnimationFrame(function(){n._nextBound().catch(n._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.cancelled){r.next=2;break}return r.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&_canvasInUse._.delete(this._canvas),this.callback()));case 4:case"end":return r.stop()}},n,this)})),function(){return e.apply(this,arguments)})}]);var e}(),_canvasInUse={_:new WeakSet},version="3.5.141";exports.version=version;var build="be0f6ee08";exports.build=build},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PrintAnnotationStorage=n.AnnotationStorage=void 0;var o=r(1),u=r(140),s=r(144);function w(M,T,D){g(M,T),T.set(M,D)}function g(M,T){if(T.has(M))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(M,T,D){return function(I,N,O){if(N.set)N.set.call(I,O);else{if(!N.writable)throw new TypeError("attempted to set read only private field");N.value=O}}(M,m(M,T,"set"),D),D}function y(M,T){return function(D,I){return I.get?I.get.call(D):I.value}(M,m(M,T,"get"))}function m(M,T,D){if(!T.has(M))throw new TypeError("attempted to "+D+" private field on non-instance");return T.get(M)}var d=new WeakMap,f=new WeakMap,x=new WeakSet,k=function(){return _createClass(function M(){var T,D;_classCallCheck(this,M),g(T=this,D=x),D.add(T),w(this,d,{writable:!0,value:!1}),w(this,f,{writable:!0,value:new Map}),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null},[{key:"getValue",value:function(M,T){var D=y(this,f).get(M);return D===void 0?T:Object.assign(T,D)}},{key:"getRawValue",value:function(M){return y(this,f).get(M)}},{key:"remove",value:function(M){if(y(this,f).delete(M),y(this,f).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){var T,D=_createForOfIteratorHelper(y(this,f).values());try{for(D.s();!(T=D.n()).done;)if(T.value instanceof u.AnnotationEditor)return}catch(I){D.e(I)}finally{D.f()}this.onAnnotationEditor(null)}}},{key:"setValue",value:function(M,T){var D=y(this,f).get(M),I=!1;if(D!==void 0)for(var N=0,O=Object.entries(T);N<O.length;N++){var F=_slicedToArray(O[N],2),U=F[0],Y=F[1];D[U]!==Y&&(I=!0,D[U]=Y)}else I=!0,y(this,f).set(M,T);I&&function(Q,q,ne){if(!q.has(Q))throw new TypeError("attempted to get private field on non-instance");return ne}(this,x,P).call(this),T instanceof u.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(T.constructor._type)}},{key:"has",value:function(M){return y(this,f).has(M)}},{key:"getAll",value:function(){return y(this,f).size>0?(0,o.objectFromMap)(y(this,f)):null}},{key:"setAll",value:function(M){for(var T=0,D=Object.entries(M);T<D.length;T++){var I=_slicedToArray(D[T],2),N=I[0],O=I[1];this.setValue(N,O)}}},{key:"size",get:function(){return y(this,f).size}},{key:"resetModified",value:function(){y(this,d)&&(v(this,d,!1),typeof this.onResetModified=="function"&&this.onResetModified())}},{key:"print",get:function(){return new E(this)}},{key:"serializable",get:function(){if(y(this,f).size===0)return null;var M,T=new Map,D=_createForOfIteratorHelper(y(this,f));try{for(D.s();!(M=D.n()).done;){var I=_slicedToArray(M.value,2),N=I[0],O=I[1],F=O instanceof u.AnnotationEditor?O.serialize():O;F&&T.set(N,F)}}catch(U){D.e(U)}finally{D.f()}return T}}],[{key:"getHash",value:function(M){if(!M)return"";var T,D=new s.MurmurHash3_64,I=_createForOfIteratorHelper(M);try{for(I.s();!(T=I.n()).done;){var N=_slicedToArray(T.value,2),O=N[0],F=N[1];D.update("".concat(O,":").concat(JSON.stringify(F)))}}catch(U){I.e(U)}finally{I.f()}return D.hexdigest()}}])}();function P(){y(this,d)||(v(this,d,!0),typeof this.onSetModified=="function"&&this.onSetModified())}n.AnnotationStorage=k;var S=new WeakMap,E=function(M){function T(D){var I;return _classCallCheck(this,T),_classPrivateFieldInitSpec(I=_callSuper(this,T),S,null),_classPrivateFieldSet2(S,I,structuredClone(D.serializable)),I}return _inherits(T,M),_createClass(T,[{key:"print",get:function(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}},{key:"serializable",get:function(){return _classPrivateFieldGet2(S,this)}}])}(k);n.PrintAnnotationStorage=E},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditor=void 0;var o=r(141),u=r(1),s=new WeakMap,w=new WeakMap,g=new WeakMap,v=new WeakMap,y=new WeakMap,m=new WeakMap,d=function(){return _createClass(function f(x){_classCallCheck(this,f),_classPrivateFieldInitSpec(this,s,this.focusin.bind(this)),_classPrivateFieldInitSpec(this,w,this.focusout.bind(this)),_classPrivateFieldInitSpec(this,g,!1),_classPrivateFieldInitSpec(this,v,!1),_classPrivateFieldInitSpec(this,y,!1),_defineProperty$1(this,"_uiManager",null),_classPrivateFieldInitSpec(this,m,f._zIndex++),this.constructor===f&&(0,u.unreachable)("Cannot initialize AnnotationEditor."),this.parent=x.parent,this.id=x.id,this.width=this.height=null,this.pageIndex=x.parent.pageIndex,this.name=x.name,this.div=null,this._uiManager=x.uiManager;var k=this.parent.viewport,P=k.rotation,S=k.rawDims,E=S.pageWidth,M=S.pageHeight,T=S.pageX,D=S.pageY;this.rotation=P,this.pageDimensions=[E,M],this.pageTranslation=[T,D];var I=_slicedToArray(this.parentDimensions,2),N=I[0],O=I[1];this.x=x.x/N,this.y=x.y/O,this.isAttachedToDOM=!1},[{key:"addCommands",value:function(f){this._uiManager.addCommands(f)}},{key:"currentLayer",get:function(){return this._uiManager.currentLayer}},{key:"setInBackground",value:function(){this.div.style.zIndex=0}},{key:"setInForeground",value:function(){this.div.style.zIndex=_classPrivateFieldGet2(m,this)}},{key:"setParent",value:function(f){f!==null&&(this.pageIndex=f.pageIndex,this.pageDimensions=f.pageDimensions),this.parent=f}},{key:"focusin",value:function(f){_classPrivateFieldGet2(g,this)?_classPrivateFieldSet2(g,this,!1):this.parent.setSelected(this)}},{key:"focusout",value:function(f){var x;if(this.isAttachedToDOM){var k=f.relatedTarget;k!=null&&k.closest("#".concat(this.id))||(f.preventDefault(),(x=this.parent)!==null&&x!==void 0&&x.isMultipleSelection||this.commitOrRemove())}}},{key:"commitOrRemove",value:function(){this.isEmpty()?this.remove():this.commit()}},{key:"commit",value:function(){this.addToAnnotationStorage()}},{key:"addToAnnotationStorage",value:function(){this._uiManager.addToAnnotationStorage(this)}},{key:"dragstart",value:function(f){var x=this.parent.div.getBoundingClientRect();this.startX=f.clientX-x.x,this.startY=f.clientY-x.y,f.dataTransfer.setData("text/plain",this.id),f.dataTransfer.effectAllowed="move"}},{key:"setAt",value:function(f,x,k,P){var S=_slicedToArray(this.parentDimensions,2),E=S[0],M=S[1],T=_slicedToArray(this.screenToPageTranslation(k,P),2);k=T[0],P=T[1],this.x=(f+k)/E,this.y=(x+P)/M,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"translate",value:function(f,x){var k=_slicedToArray(this.parentDimensions,2),P=k[0],S=k[1],E=_slicedToArray(this.screenToPageTranslation(f,x),2);f=E[0],x=E[1],this.x+=f/P,this.y+=x/S,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"screenToPageTranslation",value:function(f,x){switch(this.parentRotation){case 90:return[x,-f];case 180:return[-f,-x];case 270:return[-x,f];default:return[f,x]}}},{key:"parentScale",get:function(){return this._uiManager.viewParameters.realScale}},{key:"parentRotation",get:function(){return this._uiManager.viewParameters.rotation}},{key:"parentDimensions",get:function(){var f=this._uiManager.viewParameters.realScale,x=_slicedToArray(this.pageDimensions,2);return[x[0]*f,x[1]*f]}},{key:"setDims",value:function(f,x){var k=_slicedToArray(this.parentDimensions,2),P=k[0],S=k[1];this.div.style.width="".concat(100*f/P,"%"),this.div.style.height="".concat(100*x/S,"%")}},{key:"fixDims",value:function(){var f=this.div.style,x=f.height,k=f.width,P=k.endsWith("%"),S=x.endsWith("%");if(!P||!S){var E=_slicedToArray(this.parentDimensions,2),M=E[0],T=E[1];P||(f.width="".concat(100*parseFloat(k)/M,"%")),S||(f.height="".concat(100*parseFloat(x)/T,"%"))}}},{key:"getInitialTranslation",value:function(){return[0,0]}},{key:"render",value:function(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",_classPrivateFieldGet2(s,this)),this.div.addEventListener("focusout",_classPrivateFieldGet2(w,this));var f=_slicedToArray(this.getInitialTranslation(),2),x=f[0],k=f[1];return this.translate(x,k),(0,o.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}},{key:"pointerdown",value:function(f){var x=u.FeatureTest.platform.isMac;f.button!==0||f.ctrlKey&&x?f.preventDefault():(f.ctrlKey&&!x||f.shiftKey||f.metaKey&&x?this.parent.toggleSelected(this):this.parent.setSelected(this),_classPrivateFieldSet2(g,this,!0))}},{key:"getRect",value:function(f,x){var k=this.parentScale,P=_slicedToArray(this.pageDimensions,2),S=P[0],E=P[1],M=_slicedToArray(this.pageTranslation,2),T=M[0],D=M[1],I=f/k,N=x/k,O=this.x*S,F=this.y*E,U=this.width*S,Y=this.height*E;switch(this.rotation){case 0:return[O+I+T,E-F-N-Y+D,O+I+U+T,E-F-N+D];case 90:return[O+N+T,E-F+I+D,O+N+Y+T,E-F+I+U+D];case 180:return[O-I-U+T,E-F+N+D,O-I+T,E-F+N+Y+D];case 270:return[O-N-Y+T,E-F-I-U+D,O-N+T,E-F-I+D];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function(f,x){var k=_slicedToArray(f,4),P=k[0],S=k[1],E=k[2],M=k[3],T=E-P,D=M-S;switch(this.rotation){case 0:return[P,x-M,T,D];case 90:return[P,x-S,D,T];case 180:return[E,x-S,T,D];case 270:return[E,x-M,D,T];default:throw new Error("Invalid rotation")}}},{key:"onceAdded",value:function(){}},{key:"isEmpty",value:function(){return!1}},{key:"enableEditMode",value:function(){_classPrivateFieldSet2(y,this,!0)}},{key:"disableEditMode",value:function(){_classPrivateFieldSet2(y,this,!1)}},{key:"isInEditMode",value:function(){return _classPrivateFieldGet2(y,this)}},{key:"shouldGetKeyboardEvents",value:function(){return!1}},{key:"needsToBeRebuilt",value:function(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function(){var f;(f=this.div)===null||f===void 0||f.addEventListener("focusin",_classPrivateFieldGet2(s,this))}},{key:"serialize",value:function(){(0,u.unreachable)("An editor must be serializable")}},{key:"remove",value:function(){this.div.removeEventListener("focusin",_classPrivateFieldGet2(s,this)),this.div.removeEventListener("focusout",_classPrivateFieldGet2(w,this)),this.isEmpty()||this.commit(),this.parent.remove(this)}},{key:"select",value:function(){var f;(f=this.div)===null||f===void 0||f.classList.add("selectedEditor")}},{key:"unselect",value:function(){var f;(f=this.div)===null||f===void 0||f.classList.remove("selectedEditor")}},{key:"updateParams",value:function(f,x){}},{key:"disableEditing",value:function(){}},{key:"enableEditing",value:function(){}},{key:"propertiesToUpdate",get:function(){return{}}},{key:"contentDiv",get:function(){return this.div}},{key:"isEditing",get:function(){return _classPrivateFieldGet2(v,this)},set:function(f){_classPrivateFieldSet2(v,this,f),f?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}],[{key:"_defaultLineColor",get:function(){return(0,u.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}},{key:"deserialize",value:function(f,x,k){var P=new this.prototype.constructor({parent:x,id:x.getNextId(),uiManager:k});P.rotation=f.rotation;var S=_slicedToArray(P.pageDimensions,2),E=S[0],M=S[1],T=_slicedToArray(P.getRectInCurrentCoords(f.rect,M),4),D=T[0],I=T[1],N=T[2],O=T[3];return P.x=D/E,P.y=I/M,P.width=N/E,P.height=O/M,P}}])}();_defineProperty$1(d,"_colorManager",new o.ColorManager),_defineProperty$1(d,"_zIndex",1),n.AnnotationEditor=d},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyboardManager=n.CommandManager=n.ColorManager=n.AnnotationEditorUIManager=void 0,n.bindEvents=function(ze,Ne,We){var Fe,Ye=_createForOfIteratorHelper(We);try{for(Ye.s();!(Fe=Ye.n()).done;){var Ke=Fe.value;Ne.addEventListener(Ke,ze[Ke].bind(ze))}}catch(Ze){Ye.e(Ze)}finally{Ye.f()}},n.opacityToHex=function(ze){return Math.round(Math.min(255,Math.max(1,255*ze))).toString(16).padStart(2,"0")};var o=r(1),u=r(142);function s(ze,Ne,We){m(ze,Ne),Ne.set(ze,We)}function w(ze,Ne){return function(We,Fe){return Fe.get?Fe.get.call(We):Fe.value}(ze,v(ze,Ne,"get"))}function g(ze,Ne,We){return function(Fe,Ye,Ke){if(Ye.set)Ye.set.call(Fe,Ke);else{if(!Ye.writable)throw new TypeError("attempted to set read only private field");Ye.value=Ke}}(ze,v(ze,Ne,"set"),We),We}function v(ze,Ne,We){if(!Ne.has(ze))throw new TypeError("attempted to "+We+" private field on non-instance");return Ne.get(ze)}function y(ze,Ne){m(ze,Ne),Ne.add(ze)}function m(ze,Ne){if(Ne.has(ze))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(ze,Ne,We){if(!Ne.has(ze))throw new TypeError("attempted to get private field on non-instance");return We}var f=new WeakMap,x=function(){return _createClass(function ze(){_classCallCheck(this,ze),_classPrivateFieldInitSpec(this,f,0)},[{key:"getId",value:function(){var ze,Ne;return"".concat(o.AnnotationEditorPrefix).concat((_classPrivateFieldSet2(f,this,(ze=_classPrivateFieldGet2(f,this),Ne=ze++,ze)),Ne))}}])}(),k=new WeakMap,P=new WeakMap,S=new WeakMap,E=new WeakMap,M=function(){return _createClass(function ze(){_classCallCheck(this,ze),_classPrivateFieldInitSpec(this,k,[]),_classPrivateFieldInitSpec(this,P,!1),_classPrivateFieldInitSpec(this,S,void 0),_classPrivateFieldInitSpec(this,E,-1),_classPrivateFieldSet2(S,this,arguments.length>0&&arguments[0]!==void 0?arguments[0]:128)},[{key:"add",value:function(ze){var Ne=ze.cmd,We=ze.undo,Fe=ze.mustExec,Ye=ze.type,Ke=Ye===void 0?NaN:Ye,Ze=ze.overwriteIfSameType,ot=Ze!==void 0&&Ze,Qe=ze.keepUndo,at=Qe!==void 0&&Qe;if(Fe&&Ne(),!_classPrivateFieldGet2(P,this)){var rt={cmd:Ne,undo:We,type:Ke};if(_classPrivateFieldGet2(E,this)===-1)return _classPrivateFieldGet2(k,this).length>0&&(_classPrivateFieldGet2(k,this).length=0),_classPrivateFieldSet2(E,this,0),void _classPrivateFieldGet2(k,this).push(rt);if(ot&&_classPrivateFieldGet2(k,this)[_classPrivateFieldGet2(E,this)].type===Ke)return at&&(rt.undo=_classPrivateFieldGet2(k,this)[_classPrivateFieldGet2(E,this)].undo),void(_classPrivateFieldGet2(k,this)[_classPrivateFieldGet2(E,this)]=rt);var ct=_classPrivateFieldGet2(E,this)+1;ct===_classPrivateFieldGet2(S,this)?_classPrivateFieldGet2(k,this).splice(0,1):(_classPrivateFieldSet2(E,this,ct),ct<_classPrivateFieldGet2(k,this).length&&_classPrivateFieldGet2(k,this).splice(ct)),_classPrivateFieldGet2(k,this).push(rt)}}},{key:"undo",value:function(){_classPrivateFieldGet2(E,this)!==-1&&(_classPrivateFieldSet2(P,this,!0),_classPrivateFieldGet2(k,this)[_classPrivateFieldGet2(E,this)].undo(),_classPrivateFieldSet2(P,this,!1),_classPrivateFieldSet2(E,this,_classPrivateFieldGet2(E,this)-1))}},{key:"redo",value:function(){_classPrivateFieldGet2(E,this)<_classPrivateFieldGet2(k,this).length-1&&(_classPrivateFieldSet2(E,this,_classPrivateFieldGet2(E,this)+1),_classPrivateFieldSet2(P,this,!0),_classPrivateFieldGet2(k,this)[_classPrivateFieldGet2(E,this)].cmd(),_classPrivateFieldSet2(P,this,!1))}},{key:"hasSomethingToUndo",value:function(){return _classPrivateFieldGet2(E,this)!==-1}},{key:"hasSomethingToRedo",value:function(){return _classPrivateFieldGet2(E,this)<_classPrivateFieldGet2(k,this).length-1}},{key:"destroy",value:function(){_classPrivateFieldSet2(k,this,null)}}])}();n.CommandManager=M;var T=new WeakSet,D=function(){return _createClass(function ze(Ne){_classCallCheck(this,ze),y(this,T),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var We,Fe=o.FeatureTest.platform.isMac,Ye=_createForOfIteratorHelper(Ne);try{for(Ye.s();!(We=Ye.n()).done;){var Ke,Ze=_slicedToArray(We.value,2),ot=Ze[0],Qe=Ze[1],at=_createForOfIteratorHelper(ot);try{for(at.s();!(Ke=at.n()).done;){var rt=Ke.value,ct=rt.startsWith("mac+");Fe&&ct?(this.callbacks.set(rt.slice(4),Qe),this.allKeys.add(rt.split("+").at(-1))):Fe||ct||(this.callbacks.set(rt,Qe),this.allKeys.add(rt.split("+").at(-1)))}}catch(ht){at.e(ht)}finally{at.f()}}}catch(ht){Ye.e(ht)}finally{Ye.f()}},[{key:"exec",value:function(ze,Ne){if(this.allKeys.has(Ne.key)){var We=this.callbacks.get(d(this,T,I).call(this,Ne));We&&(We.bind(ze)(),Ne.stopPropagation(),Ne.preventDefault())}}}])}();function I(ze){ze.altKey&&this.buffer.push("alt"),ze.ctrlKey&&this.buffer.push("ctrl"),ze.metaKey&&this.buffer.push("meta"),ze.shiftKey&&this.buffer.push("shift"),this.buffer.push(ze.key);var Ne=this.buffer.join("+");return this.buffer.length=0,Ne}n.KeyboardManager=D;var N=function(){function ze(){_classCallCheck(this,ze)}return _createClass(ze,[{key:"_colors",get:function(){var Ne=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(Ne),(0,o.shadow)(this,"_colors",Ne)}},{key:"convert",value:function(Ne){var We=(0,u.getRGB)(Ne);if(!window.matchMedia("(forced-colors: active)").matches)return We;var Fe,Ye=_createForOfIteratorHelper(this._colors);try{for(Ye.s();!(Fe=Ye.n()).done;){var Ke=_slicedToArray(Fe.value,2),Ze=Ke[0];if(Ke[1].every(function(ot,Qe){return ot===We[Qe]}))return ze._colorsMapping.get(Ze)}}catch(ot){Ye.e(ot)}finally{Ye.f()}return We}},{key:"getHexCode",value:function(Ne){var We,Fe=this._colors.get(Ne);return Fe?(We=o.Util).makeHexColor.apply(We,_toConsumableArray$1(Fe)):Ne}}])}();_defineProperty$1(N,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),n.ColorManager=N;var O=new WeakMap,F=new WeakMap,U=new WeakMap,Y=new WeakMap,Q=new WeakMap,q=new WeakMap,ne=new WeakMap,J=new WeakMap,re=new WeakMap,X=new WeakMap,j=new WeakMap,Z=new WeakMap,W=new WeakMap,te=new WeakMap,le=new WeakMap,oe=new WeakMap,Ee=new WeakMap,Ae=new WeakMap,ve=new WeakMap,ke=new WeakMap,Ce=new WeakMap,Pe=new WeakMap,Me=new WeakMap,Le=new WeakSet,Te=new WeakSet,ye=new WeakSet,_e=new WeakSet,we=new WeakSet,Se=new WeakSet,$e=new WeakSet,Be=new WeakSet,Oe=new WeakSet,Ge=new WeakSet,Ie=new WeakSet,je=function(){function ze(Ne,We,Fe){_classCallCheck(this,ze),y(this,Ie),y(this,Ge),y(this,Oe),y(this,Be),y(this,$e),y(this,Se),y(this,we),y(this,_e),y(this,ye),y(this,Te),y(this,Le),s(this,O,{writable:!0,value:null}),s(this,F,{writable:!0,value:new Map}),s(this,U,{writable:!0,value:new Map}),s(this,Y,{writable:!0,value:null}),s(this,Q,{writable:!0,value:new M}),s(this,q,{writable:!0,value:0}),s(this,ne,{writable:!0,value:null}),s(this,J,{writable:!0,value:new Set}),s(this,re,{writable:!0,value:null}),s(this,X,{writable:!0,value:new x}),s(this,j,{writable:!0,value:!1}),s(this,Z,{writable:!0,value:o.AnnotationEditorType.NONE}),s(this,W,{writable:!0,value:new Set}),s(this,te,{writable:!0,value:this.copy.bind(this)}),s(this,le,{writable:!0,value:this.cut.bind(this)}),s(this,oe,{writable:!0,value:this.paste.bind(this)}),s(this,Ee,{writable:!0,value:this.keydown.bind(this)}),s(this,Ae,{writable:!0,value:this.onEditingAction.bind(this)}),s(this,ve,{writable:!0,value:this.onPageChanging.bind(this)}),s(this,ke,{writable:!0,value:this.onScaleChanging.bind(this)}),s(this,Ce,{writable:!0,value:this.onRotationChanging.bind(this)}),s(this,Pe,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),s(this,Me,{writable:!0,value:null}),g(this,Me,Ne),g(this,re,We),w(this,re)._on("editingaction",w(this,Ae)),w(this,re)._on("pagechanging",w(this,ve)),w(this,re)._on("scalechanging",w(this,ke)),w(this,re)._on("rotationchanging",w(this,Ce)),g(this,Y,Fe),this.viewParameters={realScale:u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}return _createClass(ze,[{key:"destroy",value:function(){d(this,Te,Ue).call(this),w(this,re)._off("editingaction",w(this,Ae)),w(this,re)._off("pagechanging",w(this,ve)),w(this,re)._off("scalechanging",w(this,ke)),w(this,re)._off("rotationchanging",w(this,Ce));var Ne,We=_createForOfIteratorHelper(w(this,U).values());try{for(We.s();!(Ne=We.n()).done;)Ne.value.destroy()}catch(Fe){We.e(Fe)}finally{We.f()}w(this,U).clear(),w(this,F).clear(),w(this,J).clear(),g(this,O,null),w(this,W).clear(),w(this,Q).destroy()}},{key:"onPageChanging",value:function(Ne){var We=Ne.pageNumber;g(this,q,We-1)}},{key:"focusMainContainer",value:function(){w(this,Me).focus()}},{key:"addShouldRescale",value:function(Ne){w(this,J).add(Ne)}},{key:"removeShouldRescale",value:function(Ne){w(this,J).delete(Ne)}},{key:"onScaleChanging",value:function(Ne){var We=Ne.scale;this.commitOrRemove(),this.viewParameters.realScale=We*u.PixelsPerInch.PDF_TO_CSS_UNITS;var Fe,Ye=_createForOfIteratorHelper(w(this,J));try{for(Ye.s();!(Fe=Ye.n()).done;)Fe.value.onScaleChanging()}catch(Ke){Ye.e(Ke)}finally{Ye.f()}}},{key:"onRotationChanging",value:function(Ne){var We=Ne.pagesRotation;this.commitOrRemove(),this.viewParameters.rotation=We}},{key:"addToAnnotationStorage",value:function(Ne){Ne.isEmpty()||!w(this,Y)||w(this,Y).has(Ne.id)||w(this,Y).setValue(Ne.id,Ne)}},{key:"copy",value:function(Ne){if(Ne.preventDefault(),w(this,O)&&w(this,O).commitOrRemove(),this.hasSelection){var We,Fe=[],Ye=_createForOfIteratorHelper(w(this,W));try{for(Ye.s();!(We=Ye.n()).done;){var Ke=We.value;Ke.isEmpty()||Fe.push(Ke.serialize())}}catch(Ze){Ye.e(Ze)}finally{Ye.f()}Fe.length!==0&&Ne.clipboardData.setData("application/pdfjs",JSON.stringify(Fe))}}},{key:"cut",value:function(Ne){this.copy(Ne),this.delete()}},{key:"paste",value:function(Ne){var We=this;Ne.preventDefault();var Fe=Ne.clipboardData.getData("application/pdfjs");if(Fe){try{Fe=JSON.parse(Fe)}catch(rt){return void(0,o.warn)('paste: "'.concat(rt.message,'".'))}if(Array.isArray(Fe)){this.unselectAll();var Ye=w(this,U).get(w(this,q));try{var Ke,Ze=[],ot=_createForOfIteratorHelper(Fe);try{for(ot.s();!(Ke=ot.n()).done;){var Qe=Ke.value,at=Ye.deserialize(Qe);if(!at)return;Ze.push(at)}}catch(rt){ot.e(rt)}finally{ot.f()}this.addCommands({cmd:function(){for(var rt=0,ct=Ze;rt<ct.length;rt++){var ht=ct[rt];d(We,Oe,wt).call(We,ht)}d(We,Ie,Ve).call(We,Ze)},undo:function(){for(var rt=0,ct=Ze;rt<ct.length;rt++)ct[rt].remove()},mustExec:!0})}catch(rt){(0,o.warn)('paste: "'.concat(rt.message,'".'))}}}}},{key:"keydown",value:function(Ne){var We;(We=this.getActive())!==null&&We!==void 0&&We.shouldGetKeyboardEvents()||ze._keyboardManager.exec(this,Ne)}},{key:"onEditingAction",value:function(Ne){["undo","redo","delete","selectAll"].includes(Ne.name)&&this[Ne.name]()}},{key:"setEditingState",value:function(Ne){Ne?(d(this,Le,qe).call(this),d(this,ye,Je).call(this),d(this,we,nt).call(this,{isEditing:w(this,Z)!==o.AnnotationEditorType.NONE,isEmpty:d(this,Ge,He).call(this),hasSomethingToUndo:w(this,Q).hasSomethingToUndo(),hasSomethingToRedo:w(this,Q).hasSomethingToRedo(),hasSelectedEditor:!1})):(d(this,Te,Ue).call(this),d(this,_e,et).call(this),d(this,we,nt).call(this,{isEditing:!1}))}},{key:"registerEditorTypes",value:function(Ne){if(!w(this,ne)){g(this,ne,Ne);var We,Fe=_createForOfIteratorHelper(w(this,ne));try{for(Fe.s();!(We=Fe.n()).done;){var Ye=We.value;d(this,Se,st).call(this,Ye.defaultPropertiesToUpdate)}}catch(Ke){Fe.e(Ke)}finally{Fe.f()}}}},{key:"getId",value:function(){return w(this,X).getId()}},{key:"currentLayer",get:function(){return w(this,U).get(w(this,q))}},{key:"currentPageIndex",get:function(){return w(this,q)}},{key:"addLayer",value:function(Ne){w(this,U).set(Ne.pageIndex,Ne),w(this,j)?Ne.enable():Ne.disable()}},{key:"removeLayer",value:function(Ne){w(this,U).delete(Ne.pageIndex)}},{key:"updateMode",value:function(Ne){if(g(this,Z,Ne),Ne===o.AnnotationEditorType.NONE)this.setEditingState(!1),d(this,Be,_t).call(this);else{this.setEditingState(!0),d(this,$e,gt).call(this);var We,Fe=_createForOfIteratorHelper(w(this,U).values());try{for(Fe.s();!(We=Fe.n()).done;)We.value.updateMode(Ne)}catch(Ye){Fe.e(Ye)}finally{Fe.f()}}}},{key:"updateToolbar",value:function(Ne){Ne!==w(this,Z)&&w(this,re).dispatch("switchannotationeditormode",{source:this,mode:Ne})}},{key:"updateParams",value:function(Ne,We){if(w(this,ne)){var Fe,Ye=_createForOfIteratorHelper(w(this,W));try{for(Ye.s();!(Fe=Ye.n()).done;)Fe.value.updateParams(Ne,We)}catch(ot){Ye.e(ot)}finally{Ye.f()}var Ke,Ze=_createForOfIteratorHelper(w(this,ne));try{for(Ze.s();!(Ke=Ze.n()).done;)Ke.value.updateDefaultParams(Ne,We)}catch(ot){Ze.e(ot)}finally{Ze.f()}}}},{key:"getEditors",value:function(Ne){var We,Fe=[],Ye=_createForOfIteratorHelper(w(this,F).values());try{for(Ye.s();!(We=Ye.n()).done;){var Ke=We.value;Ke.pageIndex===Ne&&Fe.push(Ke)}}catch(Ze){Ye.e(Ze)}finally{Ye.f()}return Fe}},{key:"getEditor",value:function(Ne){return w(this,F).get(Ne)}},{key:"addEditor",value:function(Ne){w(this,F).set(Ne.id,Ne)}},{key:"removeEditor",value:function(Ne){var We;w(this,F).delete(Ne.id),this.unselect(Ne),(We=w(this,Y))===null||We===void 0||We.remove(Ne.id)}},{key:"setActiveEditor",value:function(Ne){w(this,O)!==Ne&&(g(this,O,Ne),Ne&&d(this,Se,st).call(this,Ne.propertiesToUpdate))}},{key:"toggleSelected",value:function(Ne){if(w(this,W).has(Ne))return w(this,W).delete(Ne),Ne.unselect(),void d(this,we,nt).call(this,{hasSelectedEditor:this.hasSelection});w(this,W).add(Ne),Ne.select(),d(this,Se,st).call(this,Ne.propertiesToUpdate),d(this,we,nt).call(this,{hasSelectedEditor:!0})}},{key:"setSelected",value:function(Ne){var We,Fe=_createForOfIteratorHelper(w(this,W));try{for(Fe.s();!(We=Fe.n()).done;){var Ye=We.value;Ye!==Ne&&Ye.unselect()}}catch(Ke){Fe.e(Ke)}finally{Fe.f()}w(this,W).clear(),w(this,W).add(Ne),Ne.select(),d(this,Se,st).call(this,Ne.propertiesToUpdate),d(this,we,nt).call(this,{hasSelectedEditor:!0})}},{key:"isSelected",value:function(Ne){return w(this,W).has(Ne)}},{key:"unselect",value:function(Ne){Ne.unselect(),w(this,W).delete(Ne),d(this,we,nt).call(this,{hasSelectedEditor:this.hasSelection})}},{key:"hasSelection",get:function(){return w(this,W).size!==0}},{key:"undo",value:function(){w(this,Q).undo(),d(this,we,nt).call(this,{hasSomethingToUndo:w(this,Q).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:d(this,Ge,He).call(this)})}},{key:"redo",value:function(){w(this,Q).redo(),d(this,we,nt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:w(this,Q).hasSomethingToRedo(),isEmpty:d(this,Ge,He).call(this)})}},{key:"addCommands",value:function(Ne){w(this,Q).add(Ne),d(this,we,nt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:d(this,Ge,He).call(this)})}},{key:"delete",value:function(){var Ne=this;if(this.commitOrRemove(),this.hasSelection){var We=_toConsumableArray$1(w(this,W));this.addCommands({cmd:function(){var Fe,Ye=_createForOfIteratorHelper(We);try{for(Ye.s();!(Fe=Ye.n()).done;)Fe.value.remove()}catch(Ke){Ye.e(Ke)}finally{Ye.f()}},undo:function(){var Fe,Ye=_createForOfIteratorHelper(We);try{for(Ye.s();!(Fe=Ye.n()).done;){var Ke=Fe.value;d(Ne,Oe,wt).call(Ne,Ke)}}catch(Ze){Ye.e(Ze)}finally{Ye.f()}},mustExec:!0})}}},{key:"commitOrRemove",value:function(){var Ne;(Ne=w(this,O))===null||Ne===void 0||Ne.commitOrRemove()}},{key:"selectAll",value:function(){var Ne,We=_createForOfIteratorHelper(w(this,W));try{for(We.s();!(Ne=We.n()).done;)Ne.value.commit()}catch(Fe){We.e(Fe)}finally{We.f()}d(this,Ie,Ve).call(this,w(this,F).values())}},{key:"unselectAll",value:function(){if(w(this,O))w(this,O).commitOrRemove();else if(w(this,W).size!==0){var Ne,We=_createForOfIteratorHelper(w(this,W));try{for(We.s();!(Ne=We.n()).done;)Ne.value.unselect()}catch(Fe){We.e(Fe)}finally{We.f()}w(this,W).clear(),d(this,we,nt).call(this,{hasSelectedEditor:!1})}}},{key:"isActive",value:function(Ne){return w(this,O)===Ne}},{key:"getActive",value:function(){return w(this,O)}},{key:"getMode",value:function(){return w(this,Z)}}])}();function qe(){w(this,Me).addEventListener("keydown",w(this,Ee))}function Ue(){w(this,Me).removeEventListener("keydown",w(this,Ee))}function Je(){document.addEventListener("copy",w(this,te)),document.addEventListener("cut",w(this,le)),document.addEventListener("paste",w(this,oe))}function et(){document.removeEventListener("copy",w(this,te)),document.removeEventListener("cut",w(this,le)),document.removeEventListener("paste",w(this,oe))}function nt(ze){var Ne=this;Object.entries(ze).some(function(We){var Fe=_slicedToArray(We,2),Ye=Fe[0],Ke=Fe[1];return w(Ne,Pe)[Ye]!==Ke})&&w(this,re).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(w(this,Pe),ze)})}function st(ze){w(this,re).dispatch("annotationeditorparamschanged",{source:this,details:ze})}function gt(){if(!w(this,j)){g(this,j,!0);var ze,Ne=_createForOfIteratorHelper(w(this,U).values());try{for(Ne.s();!(ze=Ne.n()).done;)ze.value.enable()}catch(We){Ne.e(We)}finally{Ne.f()}}}function _t(){if(this.unselectAll(),w(this,j)){g(this,j,!1);var ze,Ne=_createForOfIteratorHelper(w(this,U).values());try{for(Ne.s();!(ze=Ne.n()).done;)ze.value.disable()}catch(We){Ne.e(We)}finally{Ne.f()}}}function wt(ze){var Ne=w(this,U).get(ze.pageIndex);Ne?Ne.addOrRebuild(ze):this.addEditor(ze)}function He(){if(w(this,F).size===0)return!0;if(w(this,F).size===1){var ze,Ne=_createForOfIteratorHelper(w(this,F).values());try{for(Ne.s();!(ze=Ne.n()).done;)return ze.value.isEmpty()}catch(We){Ne.e(We)}finally{Ne.f()}}return!1}function Ve(ze){w(this,W).clear();var Ne,We=_createForOfIteratorHelper(ze);try{for(We.s();!(Ne=We.n()).done;){var Fe=Ne.value;Fe.isEmpty()||(w(this,W).add(Fe),Fe.select())}}catch(Ye){We.e(Ye)}finally{We.f()}d(this,we,nt).call(this,{hasSelectedEditor:!0})}n.AnnotationEditorUIManager=je,function(ze,Ne,We){(Ne=function(Fe){var Ye=function(Ke,Ze){if(_typeof$1(Ke)!=="object"||Ke===null)return Ke;var ot=Ke[Symbol.toPrimitive];if(ot!==void 0){var Qe=ot.call(Ke,Ze||"default");if(_typeof$1(Qe)!=="object")return Qe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ze==="string"?String:Number)(Ke)}(Fe,"string");return _typeof$1(Ye)==="symbol"?Ye:String(Ye)}(Ne))in ze?Object.defineProperty(ze,Ne,{value:We,enumerable:!0,configurable:!0,writable:!0}):ze[Ne]=We}(je,"_keyboardManager",new D([[["ctrl+a","mac+meta+a"],je.prototype.selectAll],[["ctrl+z","mac+meta+z"],je.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],je.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],je.prototype.delete],[["Escape","mac+Escape"],je.prototype.unselectAll]]))},function(e,n,r){var o;Object.defineProperty(n,"__esModule",{value:!0}),n.StatTimer=n.RenderingCancelledException=n.PixelsPerInch=n.PageViewport=n.PDFDateString=n.DOMStandardFontDataFactory=n.DOMSVGFactory=n.DOMFilterFactory=n.DOMCanvasFactory=n.DOMCMapReaderFactory=n.AnnotationPrefix=void 0,n.deprecated=function(Ce){console.log("Deprecated API usage: "+Ce)},n.getColorValues=function(Ce){var Pe=document.createElement("span");Pe.style.visibility="hidden",document.body.append(Pe);var Me,Le=_createForOfIteratorHelper(Ce.keys());try{for(Le.s();!(Me=Le.n()).done;){var Te=Me.value;Pe.style.color=Te;var ye=window.getComputedStyle(Pe).color;Ce.set(Te,ke(ye))}}catch(_e){Le.e(_e)}finally{Le.f()}Pe.remove()},n.getCurrentTransform=function(Ce){var Pe=Ce.getTransform(),Me=Pe.a,Le=Pe.b,Te=Pe.c,ye=Pe.d,_e=Pe.e,we=Pe.f;return[Me,Le,Te,ye,_e,we]},n.getCurrentTransformInverse=function(Ce){var Pe=Ce.getTransform().invertSelf(),Me=Pe.a,Le=Pe.b,Te=Pe.c,ye=Pe.d,_e=Pe.e,we=Pe.f;return[Me,Le,Te,ye,_e,we]},n.getFilenameFromUrl=function(Ce){var Pe=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!Pe){var Me=Ce.split(/[#?]/,1);Ce=_slicedToArray(Me,1)[0]}return Ce.substring(Ce.lastIndexOf("/")+1)},n.getPdfFilenameFromUrl=function(Ce){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof Ce!="string")return Pe;if(le(Ce))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Pe;var Me=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Le=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(Ce),Te=Me.exec(Le[1])||Me.exec(Le[2])||Me.exec(Le[3]);if(Te&&(Te=Te[0]).includes("%"))try{Te=Me.exec(decodeURIComponent(Te))[0]}catch{}return Te||Pe},n.getRGB=ke,n.getXfaPageViewport=function(Ce,Pe){var Me=Pe.scale,Le=Me===void 0?1:Me,Te=Pe.rotation,ye=Te===void 0?0:Te,_e=Ce.attributes.style,we=_e.width,Se=_e.height,$e=[0,0,parseInt(we),parseInt(Se)];return new W({viewBox:$e,scale:Le,rotation:ye})},n.isDataScheme=le,n.isPdfFile=function(Ce){return typeof Ce=="string"&&/\.pdf$/i.test(Ce)},n.isValidFetchUrl=Ae,n.loadScript=function(Ce){var Pe=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(function(Me,Le){var Te=document.createElement("script");Te.src=Ce,Te.onload=function(ye){Pe&&Te.remove(),Me(ye)},Te.onerror=function(){Le(new Error("Cannot load script at: ".concat(Te.src)))},(document.head||document.documentElement).append(Te)})},n.setLayerDimensions=function(Ce,Pe){var Me=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Le=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(Pe instanceof W){var Te=Pe.rawDims,ye=Te.pageWidth,_e=Te.pageHeight,we=Ce.style,Se="calc(var(--scale-factor) * ".concat(ye,"px)"),$e="calc(var(--scale-factor) * ".concat(_e,"px)");Me&&Pe.rotation%180!=0?(we.width=$e,we.height=Se):(we.width=Se,we.height=$e)}Le&&Ce.setAttribute("data-main-rotation",Pe.rotation)};var u=r(143),s=r(1);function w(Ce,Pe,Me){g(Ce,Pe),Pe.set(Ce,Me)}function g(Ce,Pe){if(Pe.has(Ce))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(Ce,Pe,Me){if(!Pe.has(Ce))throw new TypeError("attempted to get private field on non-instance");return Me}function y(Ce,Pe){return function(Me,Le){return Le.get?Le.get.call(Me):Le.value}(Ce,d(Ce,Pe,"get"))}function m(Ce,Pe,Me){return function(Le,Te,ye){if(Te.set)Te.set.call(Le,ye);else{if(!Te.writable)throw new TypeError("attempted to set read only private field");Te.value=ye}}(Ce,d(Ce,Pe,"set"),Me),Me}function d(Ce,Pe,Me){if(!Pe.has(Ce))throw new TypeError("attempted to "+Me+" private field on non-instance");return Pe.get(Ce)}var f="http://www.w3.org/2000/svg";n.AnnotationPrefix="pdfjs_internal_id_";var x=_createClass(function Ce(){_classCallCheck(this,Ce)});o=x,_defineProperty$1(x,"CSS",96),_defineProperty$1(x,"PDF",72),_defineProperty$1(x,"PDF_TO_CSS_UNITS",o.CSS/o.PDF),n.PixelsPerInch=x;var k=new WeakMap,P=new WeakMap,S=new WeakMap,E=new WeakMap,M=new WeakMap,T=new WeakMap,D=new WeakMap,I=new WeakMap,N=new WeakMap,O=new WeakMap,F=new WeakSet,U=function(Ce){function Pe(){var Me;_classCallCheck(this,Pe);var Le,Te,ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_e=ye.docId,we=ye.ownerDocument,Se=we===void 0?globalThis.document:we;return Me=_callSuper(this,Pe),g(Le=Me,Te=F),Te.add(Le),w(Me,O,{get:Q,set:void 0}),w(Me,N,{get:Y,set:void 0}),w(Me,k,{writable:!0,value:void 0}),w(Me,P,{writable:!0,value:void 0}),w(Me,S,{writable:!0,value:void 0}),w(Me,E,{writable:!0,value:void 0}),w(Me,M,{writable:!0,value:void 0}),w(Me,T,{writable:!0,value:void 0}),w(Me,D,{writable:!0,value:void 0}),w(Me,I,{writable:!0,value:0}),m(Me,S,_e),m(Me,E,Se),Me}return _inherits(Pe,Ce),_createClass(Pe,[{key:"addFilter",value:function(Me){var Le,Te;if(!Me)return"none";var ye,_e,we,Se,$e=y(this,N).get(Me);if($e)return $e;if(Me.length===1){for(var Be=Me[0],Oe=new Array(256),Ge=0;Ge<256;Ge++)Oe[Ge]=Be[Ge]/255;Se=ye=_e=we=Oe.join(",")}else{for(var Ie=_slicedToArray(Me,3),je=Ie[0],qe=Ie[1],Ue=Ie[2],Je=new Array(256),et=new Array(256),nt=new Array(256),st=0;st<256;st++)Je[st]=je[st]/255,et[st]=qe[st]/255,nt[st]=Ue[st]/255;ye=Je.join(","),_e=et.join(","),we=nt.join(","),Se="".concat(ye).concat(_e).concat(we)}if($e=y(this,N).get(Se))return y(this,N).set(Me,$e),$e;var gt="g_".concat(y(this,S),"_transfer_map_").concat((m(this,I,(Le=y(this,I),Te=Le++,Le)),Te)),_t="url(#".concat(gt,")");y(this,N).set(Me,_t),y(this,N).set(Se,_t);var wt=y(this,E).createElementNS(f,"filter",f);wt.setAttribute("id",gt),wt.setAttribute("color-interpolation-filters","sRGB");var He=y(this,E).createElementNS(f,"feComponentTransfer");return wt.append(He),v(this,F,q).call(this,He,"feFuncR",ye),v(this,F,q).call(this,He,"feFuncG",_e),v(this,F,q).call(this,He,"feFuncB",we),y(this,O).append(wt),_t}},{key:"addHCMFilter",value:function(Me,Le){var Te,ye,_e,we="".concat(Me,"-").concat(Le);if(y(this,T)===we)return y(this,D);if(m(this,T,we),m(this,D,"none"),(_e=y(this,M))===null||_e===void 0||_e.remove(),!Me||!Le)return y(this,D);y(this,O).style.color=Me;var Se=ke(Me=getComputedStyle(y(this,O)).getPropertyValue("color"));Me=(Te=s.Util).makeHexColor.apply(Te,_toConsumableArray$1(Se)),y(this,O).style.color=Le;var $e=ke(Le=getComputedStyle(y(this,O)).getPropertyValue("color"));if(Le=(ye=s.Util).makeHexColor.apply(ye,_toConsumableArray$1($e)),y(this,O).style.color="",Me==="#000000"&&Le==="#ffffff"||Me===Le)return y(this,D);for(var Be=new Array(256),Oe=0;Oe<=255;Oe++){var Ge=Oe/255;Be[Oe]=Ge<=.03928?Ge/12.92:Math.pow((Ge+.055)/1.055,2.4)}var Ie=Be.join(","),je="g_".concat(y(this,S),"_hcm_filter"),qe=m(this,M,y(this,E).createElementNS(f,"filter",f));qe.setAttribute("id",je),qe.setAttribute("color-interpolation-filters","sRGB");var Ue=y(this,E).createElementNS(f,"feComponentTransfer");qe.append(Ue),v(this,F,q).call(this,Ue,"feFuncR",Ie),v(this,F,q).call(this,Ue,"feFuncG",Ie),v(this,F,q).call(this,Ue,"feFuncB",Ie);var Je=y(this,E).createElementNS(f,"feColorMatrix");Je.setAttribute("type","matrix"),Je.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),qe.append(Je),Ue=y(this,E).createElementNS(f,"feComponentTransfer"),qe.append(Ue);var et=function(nt,st){for(var gt=Se[nt]/255,_t=$e[nt]/255,wt=new Array(st+1),He=0;He<=st;He++)wt[He]=gt+He/st*(_t-gt);return wt.join(",")};return v(this,F,q).call(this,Ue,"feFuncR",et(0,5)),v(this,F,q).call(this,Ue,"feFuncG",et(1,5)),v(this,F,q).call(this,Ue,"feFuncB",et(2,5)),y(this,O).append(qe),m(this,D,"url(#".concat(je,")")),y(this,D)}},{key:"destroy",value:function(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&y(this,D)||(y(this,P)&&(y(this,P).parentNode.parentNode.remove(),m(this,P,null)),y(this,k)&&(y(this,k).clear(),m(this,k,null)),m(this,I,0))}}])}(u.BaseFilterFactory);function Y(){return y(this,k)||m(this,k,new Map)}function Q(){if(!y(this,P)){var Ce=y(this,E).createElement("div"),Pe=Ce.style;Pe.visibility="hidden",Pe.contain="strict",Pe.width=Pe.height=0,Pe.position="absolute",Pe.top=Pe.left=0,Pe.zIndex=-1;var Me=y(this,E).createElementNS(f,"svg");Me.setAttribute("width",0),Me.setAttribute("height",0),m(this,P,y(this,E).createElementNS(f,"defs")),Ce.append(Me),Me.append(y(this,P)),y(this,E).body.append(Ce)}return y(this,P)}function q(Ce,Pe,Me){var Le=y(this,E).createElementNS(f,Pe);Le.setAttribute("type","discrete"),Le.setAttribute("tableValues",Me),Ce.append(Le)}n.DOMFilterFactory=U;var ne=function(Ce){function Pe(){var Me;_classCallCheck(this,Pe);var Le=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).ownerDocument,Te=Le===void 0?globalThis.document:Le;return(Me=_callSuper(this,Pe))._document=Te,Me}return _inherits(Pe,Ce),_createClass(Pe,[{key:"_createCanvas",value:function(Me,Le){var Te=this._document.createElement("canvas");return Te.width=Me,Te.height=Le,Te}}])}(u.BaseCanvasFactory);function J(Ce){return re.apply(this,arguments)}function re(){return re=_asyncToGenerator(_regeneratorRuntime().mark(function Ce(Pe){var Me,Le,Te=arguments;return _regeneratorRuntime().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(Me=Te.length>1&&Te[1]!==void 0&&Te[1],!Ae(Pe,document.baseURI)){ye.next=21;break}return ye.next=4,fetch(Pe);case 4:if((Le=ye.sent).ok){ye.next=7;break}throw new Error(Le.statusText);case 7:if(!Me){ye.next=15;break}return ye.t1=Uint8Array,ye.next=11,Le.arrayBuffer();case 11:ye.t2=ye.sent,ye.t0=new ye.t1(ye.t2),ye.next=20;break;case 15:return ye.t3=s.stringToBytes,ye.next=18,Le.text();case 18:ye.t4=ye.sent,ye.t0=(0,ye.t3)(ye.t4);case 20:return ye.abrupt("return",ye.t0);case 21:return ye.abrupt("return",new Promise(function(_e,we){var Se=new XMLHttpRequest;Se.open("GET",Pe,!0),Me&&(Se.responseType="arraybuffer"),Se.onreadystatechange=function(){if(Se.readyState===XMLHttpRequest.DONE){var $e;if((Se.status===200||Se.status===0)&&(Me&&Se.response?$e=new Uint8Array(Se.response):!Me&&Se.responseText&&($e=(0,s.stringToBytes)(Se.responseText)),$e))return void _e($e);we(new Error(Se.statusText))}},Se.send(null)}));case 22:case"end":return ye.stop()}},Ce)})),re.apply(this,arguments)}n.DOMCanvasFactory=ne;var X=function(Ce){function Pe(){return _classCallCheck(this,Pe),_callSuper(this,Pe,arguments)}return _inherits(Pe,Ce),_createClass(Pe,[{key:"_fetchData",value:function(Me,Le){return J(Me,this.isCompressed).then(function(Te){return{cMapData:Te,compressionType:Le}})}}])}(u.BaseCMapReaderFactory);n.DOMCMapReaderFactory=X;var j=function(Ce){function Pe(){return _classCallCheck(this,Pe),_callSuper(this,Pe,arguments)}return _inherits(Pe,Ce),_createClass(Pe,[{key:"_fetchData",value:function(Me){return J(Me,!0)}}])}(u.BaseStandardFontDataFactory);n.DOMStandardFontDataFactory=j;var Z=function(Ce){function Pe(){return _classCallCheck(this,Pe),_callSuper(this,Pe,arguments)}return _inherits(Pe,Ce),_createClass(Pe,[{key:"_createSVG",value:function(Me){return document.createElementNS(f,Me)}}])}(u.BaseSVGFactory);n.DOMSVGFactory=Z;var W=function(){function Ce(Pe){_classCallCheck(this,Ce);var Me=Pe.viewBox,Le=Pe.scale,Te=Pe.rotation,ye=Pe.offsetX,_e=ye===void 0?0:ye,we=Pe.offsetY,Se=we===void 0?0:we,$e=Pe.dontFlip,Be=$e!==void 0&&$e;this.viewBox=Me,this.scale=Le,this.rotation=Te,this.offsetX=_e,this.offsetY=Se;var Oe,Ge,Ie,je,qe,Ue,Je,et,nt=(Me[2]+Me[0])/2,st=(Me[3]+Me[1])/2;switch((Te%=360)<0&&(Te+=360),Te){case 180:Oe=-1,Ge=0,Ie=0,je=1;break;case 90:Oe=0,Ge=1,Ie=1,je=0;break;case 270:Oe=0,Ge=-1,Ie=-1,je=0;break;case 0:Oe=1,Ge=0,Ie=0,je=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Be&&(Ie=-Ie,je=-je),Oe===0?(qe=Math.abs(st-Me[1])*Le+_e,Ue=Math.abs(nt-Me[0])*Le+Se,Je=(Me[3]-Me[1])*Le,et=(Me[2]-Me[0])*Le):(qe=Math.abs(nt-Me[0])*Le+_e,Ue=Math.abs(st-Me[1])*Le+Se,Je=(Me[2]-Me[0])*Le,et=(Me[3]-Me[1])*Le),this.transform=[Oe*Le,Ge*Le,Ie*Le,je*Le,qe-Oe*Le*nt-Ie*Le*st,Ue-Ge*Le*nt-je*Le*st],this.width=Je,this.height=et}return _createClass(Ce,[{key:"rawDims",get:function(){var Pe=this.viewBox;return(0,s.shadow)(this,"rawDims",{pageWidth:Pe[2]-Pe[0],pageHeight:Pe[3]-Pe[1],pageX:Pe[0],pageY:Pe[1]})}},{key:"clone",value:function(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Me=Pe.scale,Le=Me===void 0?this.scale:Me,Te=Pe.rotation,ye=Te===void 0?this.rotation:Te,_e=Pe.offsetX,we=_e===void 0?this.offsetX:_e,Se=Pe.offsetY,$e=Se===void 0?this.offsetY:Se,Be=Pe.dontFlip,Oe=Be!==void 0&&Be;return new Ce({viewBox:this.viewBox.slice(),scale:Le,rotation:ye,offsetX:we,offsetY:$e,dontFlip:Oe})}},{key:"convertToViewportPoint",value:function(Pe,Me){return s.Util.applyTransform([Pe,Me],this.transform)}},{key:"convertToViewportRectangle",value:function(Pe){var Me=s.Util.applyTransform([Pe[0],Pe[1]],this.transform),Le=s.Util.applyTransform([Pe[2],Pe[3]],this.transform);return[Me[0],Me[1],Le[0],Le[1]]}},{key:"convertToPdfPoint",value:function(Pe,Me){return s.Util.applyInverseTransform([Pe,Me],this.transform)}}])}();n.PageViewport=W;var te=function(Ce){function Pe(Me,Le){var Te;_classCallCheck(this,Pe);var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return(Te=_callSuper(this,Pe,[Me,"RenderingCancelledException"])).type=Le,Te.extraDelay=ye,Te}return _inherits(Pe,Ce),_createClass(Pe)}(s.BaseException);function le(Ce){for(var Pe=Ce.length,Me=0;Me<Pe&&Ce[Me].trim()==="";)Me++;return Ce.substring(Me,Me+5).toLowerCase()==="data:"}n.RenderingCancelledException=te;var oe,Ee=function(){return _createClass(function Ce(){_classCallCheck(this,Ce),_defineProperty$1(this,"started",Object.create(null)),_defineProperty$1(this,"times",[])},[{key:"time",value:function(Ce){Ce in this.started&&(0,s.warn)("Timer is already running for ".concat(Ce)),this.started[Ce]=Date.now()}},{key:"timeEnd",value:function(Ce){Ce in this.started||(0,s.warn)("Timer has not been started for ".concat(Ce)),this.times.push({name:Ce,start:this.started[Ce],end:Date.now()}),delete this.started[Ce]}},{key:"toString",value:function(){var Ce,Pe=[],Me=0,Le=_createForOfIteratorHelper(this.times);try{for(Le.s();!(Ce=Le.n()).done;){var Te=Ce.value.name;Me=Math.max(Te.length,Me)}}catch(Oe){Le.e(Oe)}finally{Le.f()}var ye,_e=_createForOfIteratorHelper(this.times);try{for(_e.s();!(ye=_e.n()).done;){var we=ye.value,Se=we.name,$e=we.start,Be=we.end;Pe.push("".concat(Se.padEnd(Me)," ").concat(Be-$e,`ms
`))}}catch(Oe){_e.e(Oe)}finally{_e.f()}return Pe.join("")}}])}();function Ae(Ce,Pe){try{var Me=(Pe?new URL(Ce,Pe):new URL(Ce)).protocol;return Me==="http:"||Me==="https:"}catch{return!1}}n.StatTimer=Ee;var ve=function(){return _createClass(function Ce(){_classCallCheck(this,Ce)},null,[{key:"toDateObject",value:function(Ce){if(!Ce||typeof Ce!="string")return null;oe||(oe=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var Pe=oe.exec(Ce);if(!Pe)return null;var Me=parseInt(Pe[1],10),Le=parseInt(Pe[2],10);Le=Le>=1&&Le<=12?Le-1:0;var Te=parseInt(Pe[3],10);Te=Te>=1&&Te<=31?Te:1;var ye=parseInt(Pe[4],10);ye=ye>=0&&ye<=23?ye:0;var _e=parseInt(Pe[5],10);_e=_e>=0&&_e<=59?_e:0;var we=parseInt(Pe[6],10);we=we>=0&&we<=59?we:0;var Se=Pe[7]||"Z",$e=parseInt(Pe[8],10);$e=$e>=0&&$e<=23?$e:0;var Be=parseInt(Pe[9],10)||0;return Be=Be>=0&&Be<=59?Be:0,Se==="-"?(ye+=$e,_e+=Be):Se==="+"&&(ye-=$e,_e-=Be),new Date(Date.UTC(Me,Le,Te,ye,_e,we))}}])}();function ke(Ce){if(Ce.startsWith("#")){var Pe=parseInt(Ce.slice(1),16);return[(16711680&Pe)>>16,(65280&Pe)>>8,255&Pe]}return Ce.startsWith("rgb(")?Ce.slice(4,-1).split(",").map(function(Me){return parseInt(Me)}):Ce.startsWith("rgba(")?Ce.slice(5,-1).split(",").map(function(Me){return parseInt(Me)}).slice(0,3):((0,s.warn)('Not a valid color format: "'.concat(Ce,'"')),[0,0,0])}n.PDFDateString=ve},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseStandardFontDataFactory=n.BaseSVGFactory=n.BaseFilterFactory=n.BaseCanvasFactory=n.BaseCMapReaderFactory=void 0;var o=r(1),u=function(){return _createClass(function y(){_classCallCheck(this,y),this.constructor===y&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")},[{key:"addFilter",value:function(y){return"none"}},{key:"addHCMFilter",value:function(y,m){return"none"}},{key:"destroy",value:function(){}}])}();n.BaseFilterFactory=u;var s=function(){return _createClass(function y(){_classCallCheck(this,y),this.constructor===y&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")},[{key:"create",value:function(y,m){if(y<=0||m<=0)throw new Error("Invalid canvas size");var d=this._createCanvas(y,m);return{canvas:d,context:d.getContext("2d")}}},{key:"reset",value:function(y,m,d){if(!y.canvas)throw new Error("Canvas is not specified");if(m<=0||d<=0)throw new Error("Invalid canvas size");y.canvas.width=m,y.canvas.height=d}},{key:"destroy",value:function(y){if(!y.canvas)throw new Error("Canvas is not specified");y.canvas.width=0,y.canvas.height=0,y.canvas=null,y.context=null}},{key:"_createCanvas",value:function(y,m){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}])}();n.BaseCanvasFactory=s;var w=function(){return _createClass(function m(d){_classCallCheck(this,m);var f=d.baseUrl,x=f===void 0?null:f,k=d.isCompressed,P=k===void 0||k;this.constructor===m&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=x,this.isCompressed=P},[{key:"fetch",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){var f,x,k,P=this;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(f=d.name,this.baseUrl){S.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(f){S.next=5;break}throw new Error("CMap name must be specified.");case 5:return x=this.baseUrl+f+(this.isCompressed?".bcmap":""),k=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE,S.abrupt("return",this._fetchData(x,k).catch(function(E){throw new Error("Unable to load ".concat(P.isCompressed?"binary ":"","CMap at: ").concat(x))}));case 8:case"end":return S.stop()}},m,this)})),function(m){return y.apply(this,arguments)})},{key:"_fetchData",value:function(m,d){(0,o.unreachable)("Abstract method `_fetchData` called.")}}]);var y}();n.BaseCMapReaderFactory=w;var g=function(){return _createClass(function m(d){_classCallCheck(this,m);var f=d.baseUrl,x=f===void 0?null:f;this.constructor===m&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=x},[{key:"fetch",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){var f,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(f=d.filename,this.baseUrl){k.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(f){k.next=5;break}throw new Error("Font filename must be specified.");case 5:return x="".concat(this.baseUrl).concat(f),k.abrupt("return",this._fetchData(x).catch(function(P){throw new Error("Unable to load font data at: ".concat(x))}));case 7:case"end":return k.stop()}},m,this)})),function(m){return y.apply(this,arguments)})},{key:"_fetchData",value:function(m){(0,o.unreachable)("Abstract method `_fetchData` called.")}}]);var y}();n.BaseStandardFontDataFactory=g;var v=function(){return _createClass(function y(){_classCallCheck(this,y),this.constructor===y&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")},[{key:"create",value:function(y,m){var d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(y<=0||m<=0)throw new Error("Invalid SVG dimensions");var f=this._createSVG("svg:svg");return f.setAttribute("version","1.1"),d||(f.setAttribute("width","".concat(y,"px")),f.setAttribute("height","".concat(m,"px"))),f.setAttribute("preserveAspectRatio","none"),f.setAttribute("viewBox","0 0 ".concat(y," ").concat(m)),f}},{key:"createElement",value:function(y){if(typeof y!="string")throw new Error("Invalid SVG element type");return this._createSVG(y)}},{key:"_createSVG",value:function(y){(0,o.unreachable)("Abstract method `_createSVG` called.")}}])}();n.BaseSVGFactory=v},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.MurmurHash3_64=void 0;var o=r(1),u=3285377520,s=4294901760,w=65535,g=function(){return _createClass(function v(y){_classCallCheck(this,v),this.h1=y?4294967295&y:u,this.h2=y?4294967295&y:u},[{key:"update",value:function(v){var y,m;if(typeof v=="string"){y=new Uint8Array(2*v.length),m=0;for(var d=0,f=v.length;d<f;d++){var x=v.charCodeAt(d);x<=255?y[m++]=x:(y[m++]=x>>>8,y[m++]=255&x)}}else{if(!(0,o.isArrayBuffer)(v))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");m=(y=v.slice()).byteLength}for(var k=m>>2,P=m-4*k,S=new Uint32Array(y.buffer,0,k),E=0,M=0,T=this.h1,D=this.h2,I=3432918353,N=461845907,O=11601,F=13715,U=0;U<k;U++)1&U?T=5*(T=(T^=E=(E=(E=(E=S[U])*I&s|E*O&w)<<15|E>>>17)*N&s|E*F&w)<<13|T>>>19)+3864292196:D=5*(D=(D^=M=(M=(M=(M=S[U])*I&s|M*O&w)<<15|M>>>17)*N&s|M*F&w)<<13|D>>>19)+3864292196;switch(E=0,P){case 3:E^=y[4*k+2]<<16;case 2:E^=y[4*k+1]<<8;case 1:E=(E=(E=(E^=y[4*k])*I&s|E*O&w)<<15|E>>>17)*N&s|E*F&w,1&k?T^=E:D^=E}this.h1=T,this.h2=D}},{key:"hexdigest",value:function(){var v=this.h1,y=this.h2;return v=3981806797*(v^=y>>>1)&s|36045*v&w,v=444984403*(v^=(y=4283543511*y&s|(2950163797*(y<<16|v>>>16)&s)>>>16)>>>1)&s|60499*v&w,((v^=(y=3301882366*y&s|(3120437893*(y<<16|v>>>16)&s)>>>16)>>>1)>>>0).toString(16).padStart(8,"0")+(y>>>0).toString(16).padStart(8,"0")}}])}();n.MurmurHash3_64=g},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FontLoader=n.FontFaceObject=void 0;var o=r(1),u=r(3),s=function(){return _createClass(function v(y){_classCallCheck(this,v);var m=y.ownerDocument,d=m===void 0?globalThis.document:m;y.styleElement,this._document=d,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0},[{key:"addNativeFontFace",value:function(v){this.nativeFontFaces.push(v),this._document.fonts.add(v)}},{key:"insertRule",value:function(v){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));var y=this.styleElement.sheet;y.insertRule(v,y.cssRules.length)}},{key:"clear",value:function(){var v,y=_createForOfIteratorHelper(this.nativeFontFaces);try{for(y.s();!(v=y.n()).done;){var m=v.value;this._document.fonts.delete(m)}}catch(d){y.e(d)}finally{y.f()}this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function v(y){var m,d,f=this;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!y.attached&&!y.missingFile){x.next=2;break}return x.abrupt("return");case 2:if(y.attached=!0,!this.isFontLoadingAPISupported){x.next=18;break}if(!(m=y.createNativeFontFace())){x.next=17;break}return this.addNativeFontFace(m),x.prev=7,x.next=10,m.loaded;case 10:x.next=17;break;case 12:throw x.prev=12,x.t0=x.catch(7),(0,o.warn)("Failed to load font '".concat(m.family,"': '").concat(x.t0,"'.")),y.disableFontFace=!0,x.t0;case 17:return x.abrupt("return");case 18:if(!(d=y.createFontFaceRule())){x.next=25;break}if(this.insertRule(d),!this.isSyncFontLoadingSupported){x.next=23;break}return x.abrupt("return");case 23:return x.next=25,new Promise(function(k){var P=f._queueLoadingCallback(k);f._prepareFontLoadEvent(y,P)});case 25:case"end":return x.stop()}},v,this,[[7,12]])})),function(v){return g.apply(this,arguments)})},{key:"isFontLoadingAPISupported",get:function(){var v,y=!((v=this._document)===null||v===void 0||!v.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",y)}},{key:"isSyncFontLoadingSupported",get:function(){var v=!1;return(u.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(v=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",v)}},{key:"_queueLoadingCallback",value:function(v){var y=this.loadingRequests,m={done:!1,complete:function(){for((0,o.assert)(!m.done,"completeRequest() cannot be called twice."),m.done=!0;y.length>0&&y[0].done;){var d=y.shift();setTimeout(d.callback,0)}},callback:v};return y.push(m),m}},{key:"_loadTestFont",get:function(){var v=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",v)}},{key:"_prepareFontLoadEvent",value:function(v,y){function m(q,ne){return q.charCodeAt(ne)<<24|q.charCodeAt(ne+1)<<16|q.charCodeAt(ne+2)<<8|255&q.charCodeAt(ne+3)}function d(q,ne,J,re){return q.substring(0,ne)+re+q.substring(ne+J)}var f,x,k=this._document.createElement("canvas");k.width=1,k.height=1;var P=k.getContext("2d"),S=0,E="lt".concat(Date.now()).concat(this.loadTestFontId++),M=this._loadTestFont,T=1482184792,D=m(M=d(M,976,E.length,E),16);for(f=0,x=E.length-3;f<x;f+=4)D=D-T+m(E,f)|0;f<E.length&&(D=D-T+m(E+"XXX",f)|0),M=d(M,16,4,(0,o.string32)(D));var I="url(data:font/opentype;base64,".concat(btoa(M),");"),N='@font-face {font-family:"'.concat(E,'";src:').concat(I,"}");this.insertRule(N);var O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(var F=0,U=[v.loadedName,E];F<U.length;F++){var Y=U[F],Q=this._document.createElement("span");Q.textContent="Hi",Q.style.fontFamily=Y,O.append(Q)}this._document.body.append(O),function q(ne,J){if(++S>30)return(0,o.warn)("Load test font never loaded."),void J();P.font="30px "+ne,P.fillText(".",0,20),P.getImageData(0,0,1,1).data[3]>0?J():setTimeout(q.bind(null,ne,J))}(E,function(){O.remove(),y.complete()})}}]);var g}();n.FontLoader=s;var w=function(){return _createClass(function g(v,y){_classCallCheck(this,g);var m=y.isEvalSupported,d=m===void 0||m,f=y.disableFontFace,x=f!==void 0&&f,k=y.ignoreErrors,P=k!==void 0&&k,S=y.inspectFont,E=S===void 0?null:S;for(var M in this.compiledGlyphs=Object.create(null),v)this[M]=v[M];this.isEvalSupported=d!==!1,this.disableFontFace=x===!0,this.ignoreErrors=P===!0,this._inspectFont=E},[{key:"createNativeFontFace",value:function(){var g,v;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){var y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),v=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}else v=new FontFace(this.loadedName,this.data,{});return(g=this._inspectFont)===null||g===void 0||g.call(this,this),v}},{key:"createFontFaceRule",value:function(){var g;if(!this.data||this.disableFontFace)return null;var v,y=(0,o.bytesToString)(this.data),m="url(data:".concat(this.mimetype,";base64,").concat(btoa(y),");");if(this.cssFontInfo){var d="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(d+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),v='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(d,"src:").concat(m,"}")}else v='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(m,"}");return(g=this._inspectFont)===null||g===void 0||g.call(this,this,m),v}},{key:"getPathGenerator",value:function(g,v){if(this.compiledGlyphs[v]!==void 0)return this.compiledGlyphs[v];var y;try{y=g.get(this.loadedName+"_path_"+v)}catch(P){if(!this.ignoreErrors)throw P;return(0,o.warn)('getPathGenerator - ignoring character: "'.concat(P,'".')),this.compiledGlyphs[v]=function(S,E){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){var m,d=[],f=_createForOfIteratorHelper(y);try{for(f.s();!(m=f.n()).done;){var x=m.value,k=x.args!==void 0?x.args.join(","):"";d.push("c.",x.cmd,"(",k,`);
`)}}catch(P){f.e(P)}finally{f.f()}return this.compiledGlyphs[v]=new Function("c","size",d.join(""))}return this.compiledGlyphs[v]=function(P,S){var E,M=_createForOfIteratorHelper(y);try{for(M.s();!(E=M.n()).done;){var T=E.value;T.cmd==="scale"&&(T.args=[S,-S]),P[T.cmd].apply(P,T.args)}}catch(D){M.e(D)}finally{M.f()}}}}])}();n.FontFaceObject=w},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasGraphics=void 0;var o=r(1),u=r(142),s=r(147),w=r(148),g=r(3);function v(X,j){(function(Z,W){if(W.has(Z))throw new TypeError("Cannot initialize the same private elements twice on an object")})(X,j),j.add(X)}function y(X,j,Z){if(!j.has(X))throw new TypeError("attempted to get private field on non-instance");return Z}var m=4096,d=16,f=function(){return _createClass(function X(j){_classCallCheck(this,X),this.canvasFactory=j,this.cache=Object.create(null)},[{key:"getCanvas",value:function(X,j,Z){var W;return this.cache[X]!==void 0?(W=this.cache[X],this.canvasFactory.reset(W,j,Z)):(W=this.canvasFactory.create(j,Z),this.cache[X]=W),W}},{key:"delete",value:function(X){delete this.cache[X]}},{key:"clear",value:function(){for(var X in this.cache){var j=this.cache[X];this.canvasFactory.destroy(j),delete this.cache[X]}}}])}();function x(X,j,Z,W,te,le,oe,Ee,Ae,ve){var ke=_slicedToArray((0,u.getCurrentTransform)(X),6),Ce=ke[0],Pe=ke[1],Me=ke[2],Le=ke[3],Te=ke[4],ye=ke[5];if(Pe===0&&Me===0){var _e=oe*Ce+Te,we=Math.round(_e),Se=Ee*Le+ye,$e=Math.round(Se),Be=(oe+Ae)*Ce+Te,Oe=Math.abs(Math.round(Be)-we)||1,Ge=(Ee+ve)*Le+ye,Ie=Math.abs(Math.round(Ge)-$e)||1;return X.setTransform(Math.sign(Ce),0,0,Math.sign(Le),we,$e),X.drawImage(j,Z,W,te,le,0,0,Oe,Ie),X.setTransform(Ce,Pe,Me,Le,Te,ye),[Oe,Ie]}if(Ce===0&&Le===0){var je=Ee*Me+Te,qe=Math.round(je),Ue=oe*Pe+ye,Je=Math.round(Ue),et=(Ee+ve)*Me+Te,nt=Math.abs(Math.round(et)-qe)||1,st=(oe+Ae)*Pe+ye,gt=Math.abs(Math.round(st)-Je)||1;return X.setTransform(0,Math.sign(Pe),Math.sign(Me),0,qe,Je),X.drawImage(j,Z,W,te,le,0,0,gt,nt),X.setTransform(Ce,Pe,Me,Le,Te,ye),[gt,nt]}return X.drawImage(j,Z,W,te,le,oe,Ee,Ae,ve),[Math.hypot(Ce,Pe)*Ae,Math.hypot(Me,Le)*ve]}var k=function(){return _createClass(function X(j,Z){_classCallCheck(this,X),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,j,Z])},[{key:"clone",value:function(){var X=Object.create(this);return X.clipBox=this.clipBox.slice(),X}},{key:"setCurrentPoint",value:function(X,j){this.x=X,this.y=j}},{key:"updatePathMinMax",value:function(X,j,Z){var W=_slicedToArray(o.Util.applyTransform([j,Z],X),2);j=W[0],Z=W[1],this.minX=Math.min(this.minX,j),this.minY=Math.min(this.minY,Z),this.maxX=Math.max(this.maxX,j),this.maxY=Math.max(this.maxY,Z)}},{key:"updateRectMinMax",value:function(X,j){var Z=o.Util.applyTransform(j,X),W=o.Util.applyTransform(j.slice(2),X);this.minX=Math.min(this.minX,Z[0],W[0]),this.minY=Math.min(this.minY,Z[1],W[1]),this.maxX=Math.max(this.maxX,Z[0],W[0]),this.maxY=Math.max(this.maxY,Z[1],W[1])}},{key:"updateScalingPathMinMax",value:function(X,j){o.Util.scaleMinMax(X,j),this.minX=Math.min(this.minX,j[0]),this.maxX=Math.max(this.maxX,j[1]),this.minY=Math.min(this.minY,j[2]),this.maxY=Math.max(this.maxY,j[3])}},{key:"updateCurvePathMinMax",value:function(X,j,Z,W,te,le,oe,Ee,Ae,ve){var ke=o.Util.bezierBoundingBox(j,Z,W,te,le,oe,Ee,Ae);if(ve)return ve[0]=Math.min(ve[0],ke[0],ke[2]),ve[1]=Math.max(ve[1],ke[0],ke[2]),ve[2]=Math.min(ve[2],ke[1],ke[3]),void(ve[3]=Math.max(ve[3],ke[1],ke[3]));this.updateRectMinMax(X,ke)}},{key:"getPathBoundingBox",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.PathType.FILL,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Z=[this.minX,this.minY,this.maxX,this.maxY];if(X===s.PathType.STROKE){j||(0,o.unreachable)("Stroke bounding box must include transform.");var W=o.Util.singularValueDecompose2dScale(j),te=W[0]*this.lineWidth/2,le=W[1]*this.lineWidth/2;Z[0]-=te,Z[1]-=le,Z[2]+=te,Z[3]+=le}return Z}},{key:"updateClipFromPath",value:function(){var X=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(X||[0,0,0,0])}},{key:"isEmptyClip",value:function(){return this.minX===1/0}},{key:"startNewPathAndClipBox",value:function(X){this.clipBox=X,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.PathType.FILL,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return o.Util.intersect(this.clipBox,this.getPathBoundingBox(X,j))}}])}();function P(X,j){if(typeof ImageData<"u"&&j instanceof ImageData)X.putImageData(j,0,0);else{var Z,W,te,le,oe,Ee=j.height,Ae=j.width,ve=Ee%d,ke=(Ee-ve)/d,Ce=ve===0?ke:ke+1,Pe=X.createImageData(Ae,d),Me=0,Le=j.data,Te=Pe.data;if(j.kind===o.ImageKind.GRAYSCALE_1BPP){var ye=Le.byteLength,_e=new Uint32Array(Te.buffer,0,Te.byteLength>>2),we=_e.length,Se=Ae+7>>3,$e=4294967295,Be=o.FeatureTest.isLittleEndian?4278190080:255;for(W=0;W<Ce;W++){for(le=W<ke?d:ve,Z=0,te=0;te<le;te++){for(var Oe=ye-Me,Ge=0,Ie=Oe>Se?Ae:8*Oe-7,je=-8&Ie,qe=0,Ue=0;Ge<je;Ge+=8)Ue=Le[Me++],_e[Z++]=128&Ue?$e:Be,_e[Z++]=64&Ue?$e:Be,_e[Z++]=32&Ue?$e:Be,_e[Z++]=16&Ue?$e:Be,_e[Z++]=8&Ue?$e:Be,_e[Z++]=4&Ue?$e:Be,_e[Z++]=2&Ue?$e:Be,_e[Z++]=1&Ue?$e:Be;for(;Ge<Ie;Ge++)qe===0&&(Ue=Le[Me++],qe=128),_e[Z++]=Ue&qe?$e:Be,qe>>=1}for(;Z<we;)_e[Z++]=0;X.putImageData(Pe,0,W*d)}}else if(j.kind===o.ImageKind.RGBA_32BPP){for(te=0,oe=Ae*d*4,W=0;W<ke;W++)Te.set(Le.subarray(Me,Me+oe)),Me+=oe,X.putImageData(Pe,0,te),te+=d;W<Ce&&(oe=Ae*ve*4,Te.set(Le.subarray(Me,Me+oe)),X.putImageData(Pe,0,te))}else{if(j.kind!==o.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(j.kind));for(oe=Ae*(le=d),W=0;W<Ce;W++){for(W>=ke&&(oe=Ae*(le=ve)),Z=0,te=oe;te--;)Te[Z++]=Le[Me++],Te[Z++]=Le[Me++],Te[Z++]=Le[Me++],Te[Z++]=255;X.putImageData(Pe,0,W*d)}}}}function S(X,j){if(j.bitmap)X.drawImage(j.bitmap,0,0);else for(var Z=j.height,W=j.width,te=Z%d,le=(Z-te)/d,oe=te===0?le:le+1,Ee=X.createImageData(W,d),Ae=0,ve=j.data,ke=Ee.data,Ce=0;Ce<oe;Ce++){var Pe=Ce<le?d:te;Ae=(0,w.convertBlackAndWhiteToRGBA)({src:ve,srcPos:Ae,dest:ke,width:W,height:Pe,nonBlackColor:0}).srcPos,X.putImageData(Ee,0,Ce*d)}}function E(X,j){for(var Z=0,W=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];Z<W.length;Z++){var te=W[Z];X[te]!==void 0&&(j[te]=X[te])}X.setLineDash!==void 0&&(j.setLineDash(X.getLineDash()),j.lineDashOffset=X.lineDashOffset)}function M(X){X.strokeStyle=X.fillStyle="#000000",X.fillRule="nonzero",X.globalAlpha=1,X.lineWidth=1,X.lineCap="butt",X.lineJoin="miter",X.miterLimit=10,X.globalCompositeOperation="source-over",X.font="10px sans-serif",X.setLineDash!==void 0&&(X.setLineDash([]),X.lineDashOffset=0),g.isNodeJS||(X.filter="none")}function T(X,j,Z,W){for(var te=X.length,le=3;le<te;le+=4){var oe=X[le];if(oe===0)X[le-3]=j,X[le-2]=Z,X[le-1]=W;else if(oe<255){var Ee=255-oe;X[le-3]=X[le-3]*oe+j*Ee>>8,X[le-2]=X[le-2]*oe+Z*Ee>>8,X[le-1]=X[le-1]*oe+W*Ee>>8}}}function D(X,j,Z){for(var W=X.length,te=.00392156862745098,le=3;le<W;le+=4){var oe=Z?Z[X[le]]:X[le];j[le]=j[le]*oe*te|0}}function I(X,j,Z){for(var W=X.length,te=3;te<W;te+=4){var le=77*X[te-3]+152*X[te-2]+28*X[te-1];j[te]=Z?j[te]*Z[le>>8]>>8:j[te]*le>>16}}function N(X,j,Z,W){var te=W[0],le=W[1],oe=W[2]-te,Ee=W[3]-le;oe!==0&&Ee!==0&&(function(Ae,ve,ke,Ce,Pe,Me,Le,Te,ye,_e,we){var Se,$e=!!Me,Be=$e?Me[0]:0,Oe=$e?Me[1]:0,Ge=$e?Me[2]:0;Se=Pe==="Luminosity"?I:D;for(var Ie=Math.min(Ce,Math.ceil(1048576/ke)),je=0;je<Ce;je+=Ie){var qe=Math.min(Ie,Ce-je),Ue=Ae.getImageData(Te-_e,je+(ye-we),ke,qe),Je=ve.getImageData(Te,je+ye,ke,qe);$e&&T(Ue.data,Be,Oe,Ge),Se(Ue.data,Je.data,Le),ve.putImageData(Je,Te,je+ye)}}(j.context,Z,oe,Ee,j.subtype,j.backdrop,j.transferMap,te,le,j.offsetX,j.offsetY),X.save(),X.globalAlpha=1,X.globalCompositeOperation="source-over",X.setTransform(1,0,0,1,0,0),X.drawImage(Z.canvas,0,0),X.restore())}function O(X,j){var Z=o.Util.singularValueDecompose2dScale(X);Z[0]=Math.fround(Z[0]),Z[1]=Math.fround(Z[1]);var W=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return j!==void 0?j:Z[0]<=W||Z[1]<=W}var F=["butt","round","square"],U=["miter","round","bevel"],Y={},Q={},q=new WeakSet,ne=function(){function X(j,Z,W,te,le,oe,Ee){_classCallCheck(this,X);var Ae=oe.optionalContentConfig,ve=oe.markedContentStack,ke=ve===void 0?null:ve;v(this,q),this.ctx=j,this.current=new k(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Z,this.objs=W,this.canvasFactory=te,this.filterFactory=le,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=ke||[],this.optionalContentConfig=Ae,this.cachedCanvases=new f(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Ee,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}return _createClass(X,[{key:"getObject",value:function(j){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof j=="string"?j.startsWith("g_")?this.commonObjs.get(j):this.objs.get(j):Z}},{key:"beginDrawing",value:function(j){var Z,W,te=j.transform,le=j.viewport,oe=j.transparency,Ee=oe!==void 0&&oe,Ae=j.background,ve=Ae===void 0?null:Ae,ke=this.ctx.canvas.width,Ce=this.ctx.canvas.height,Pe=this.ctx.fillStyle;if(this.ctx.fillStyle=ve||"#ffffff",this.ctx.fillRect(0,0,ke,Ce),this.ctx.fillStyle=Pe,Ee){var Me,Le=this.cachedCanvases.getCanvas("transparent",ke,Ce);this.compositeCtx=this.ctx,this.transparentCanvas=Le.canvas,this.ctx=Le.context,this.ctx.save(),(Me=this.ctx).transform.apply(Me,_toConsumableArray$1((0,u.getCurrentTransform)(this.compositeCtx)))}this.ctx.save(),M(this.ctx),te&&((W=this.ctx).transform.apply(W,_toConsumableArray$1(te)),this.outputScaleX=te[0],this.outputScaleY=te[0]),(Z=this.ctx).transform.apply(Z,_toConsumableArray$1(le.transform)),this.viewportScale=le.scale,this.baseTransform=(0,u.getCurrentTransform)(this.ctx)}},{key:"executeOperatorList",value:function(j,Z,W,te){var le=j.argsArray,oe=j.fnArray,Ee=Z||0,Ae=le.length;if(Ae===Ee)return Ee;for(var ve,ke=Ae-Ee>10&&typeof W=="function",Ce=ke?Date.now()+15:0,Pe=0,Me=this.commonObjs,Le=this.objs;;){if(te!==void 0&&Ee===te.nextBreakPoint)return te.breakIt(Ee,W),Ee;if((ve=oe[Ee])!==o.OPS.dependency)this[ve].apply(this,le[Ee]);else{var Te,ye=_createForOfIteratorHelper(le[Ee]);try{for(ye.s();!(Te=ye.n()).done;){var _e=Te.value,we=_e.startsWith("g_")?Me:Le;if(!we.has(_e))return we.get(_e,W),Ee}}catch(Se){ye.e(Se)}finally{ye.f()}}if(++Ee===Ae)return Ee;if(ke&&++Pe>10){if(Date.now()>Ce)return W(),Ee;Pe=0}}}},{key:"endDrawing",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;y(this,q,J).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();var Z,W=_createForOfIteratorHelper(this._cachedBitmapsMap.values());try{for(W.s();!(Z=W.n()).done;){var te,le=Z.value,oe=_createForOfIteratorHelper(le.values());try{for(oe.s();!(te=oe.n()).done;){var Ee=te.value;typeof HTMLCanvasElement<"u"&&Ee instanceof HTMLCanvasElement&&(Ee.width=Ee.height=0)}}catch(ke){oe.e(ke)}finally{oe.f()}le.clear()}}catch(ke){W.e(ke)}finally{W.f()}if(this._cachedBitmapsMap.clear(),j){var Ae=this.filterFactory.addHCMFilter(j.foreground,j.background);if(Ae!=="none"){var ve=this.ctx.filter;this.ctx.filter=Ae,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=ve}}}},{key:"_scaleImage",value:function(j,Z){for(var W,te,le=j.width,oe=j.height,Ee=Math.max(Math.hypot(Z[0],Z[1]),1),Ae=Math.max(Math.hypot(Z[2],Z[3]),1),ve=le,ke=oe,Ce="prescale1";Ee>2&&ve>1||Ae>2&&ke>1;){var Pe=ve,Me=ke;Ee>2&&ve>1&&(Ee/=ve/(Pe=ve>=16384?Math.floor(ve/2)-1||1:Math.ceil(ve/2))),Ae>2&&ke>1&&(Ae/=ke/(Me=ke>=16384?Math.floor(ke/2)-1||1:Math.ceil(ke)/2)),(te=(W=this.cachedCanvases.getCanvas(Ce,Pe,Me)).context).clearRect(0,0,Pe,Me),te.drawImage(j,0,0,ve,ke,0,0,Pe,Me),j=W.canvas,ve=Pe,ke=Me,Ce=Ce==="prescale1"?"prescale2":"prescale1"}return{img:j,paintWidth:ve,paintHeight:ke}}},{key:"_createMaskCanvas",value:function(j){var Z,W,te,le,oe=this.ctx,Ee=j.width,Ae=j.height,ve=this.current.fillColor,ke=this.current.patternFill,Ce=(0,u.getCurrentTransform)(oe);if((j.bitmap||j.data)&&j.count>1){var Pe=j.bitmap||j.data.buffer;W=JSON.stringify(ke?Ce:[Ce.slice(0,4),ve]),(Z=this._cachedBitmapsMap.get(Pe))||(Z=new Map,this._cachedBitmapsMap.set(Pe,Z));var Me=Z.get(W);if(Me&&!ke)return{canvas:Me,offsetX:Math.round(Math.min(Ce[0],Ce[2])+Ce[4]),offsetY:Math.round(Math.min(Ce[1],Ce[3])+Ce[5])};te=Me}te||S((le=this.cachedCanvases.getCanvas("maskCanvas",Ee,Ae)).context,j);var Le=o.Util.transform(Ce,[1/Ee,0,0,-1/Ae,0,0]);Le=o.Util.transform(Le,[1,0,0,1,0,-Ae]);var Te=o.Util.applyTransform([0,0],Le),ye=o.Util.applyTransform([Ee,Ae],Le),_e=o.Util.normalizeRect([Te[0],Te[1],ye[0],ye[1]]),we=Math.round(_e[2]-_e[0])||1,Se=Math.round(_e[3]-_e[1])||1,$e=this.cachedCanvases.getCanvas("fillCanvas",we,Se),Be=$e.context,Oe=Math.min(Te[0],ye[0]),Ge=Math.min(Te[1],ye[1]);Be.translate(-Oe,-Ge),Be.transform.apply(Be,_toConsumableArray$1(Le)),te||(te=(te=this._scaleImage(le.canvas,(0,u.getCurrentTransformInverse)(Be))).img,Z&&ke&&Z.set(W,te)),Be.imageSmoothingEnabled=O((0,u.getCurrentTransform)(Be),j.interpolate),x(Be,te,0,0,te.width,te.height,0,0,Ee,Ae),Be.globalCompositeOperation="source-in";var Ie=o.Util.transform((0,u.getCurrentTransformInverse)(Be),[1,0,0,1,-Oe,-Ge]);return Be.fillStyle=ke?ve.getPattern(oe,this,Ie,s.PathType.FILL):ve,Be.fillRect(0,0,Ee,Ae),Z&&!ke&&(this.cachedCanvases.delete("fillCanvas"),Z.set(W,$e.canvas)),{canvas:$e.canvas,offsetX:Math.round(Oe),offsetY:Math.round(Ge)}}},{key:"setLineWidth",value:function(j){j!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=j,this.ctx.lineWidth=j}},{key:"setLineCap",value:function(j){this.ctx.lineCap=F[j]}},{key:"setLineJoin",value:function(j){this.ctx.lineJoin=U[j]}},{key:"setMiterLimit",value:function(j){this.ctx.miterLimit=j}},{key:"setDash",value:function(j,Z){var W=this.ctx;W.setLineDash!==void 0&&(W.setLineDash(j),W.lineDashOffset=Z)}},{key:"setRenderingIntent",value:function(j){}},{key:"setFlatness",value:function(j){}},{key:"setGState",value:function(j){var Z,W=_createForOfIteratorHelper(j);try{for(W.s();!(Z=W.n()).done;){var te=_slicedToArray(Z.value,2),le=te[0],oe=te[1];switch(le){case"LW":this.setLineWidth(oe);break;case"LC":this.setLineCap(oe);break;case"LJ":this.setLineJoin(oe);break;case"ML":this.setMiterLimit(oe);break;case"D":this.setDash(oe[0],oe[1]);break;case"RI":this.setRenderingIntent(oe);break;case"FL":this.setFlatness(oe);break;case"Font":this.setFont(oe[0],oe[1]);break;case"CA":this.current.strokeAlpha=oe;break;case"ca":this.current.fillAlpha=oe,this.ctx.globalAlpha=oe;break;case"BM":this.ctx.globalCompositeOperation=oe;break;case"SMask":this.current.activeSMask=oe?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(oe)}}}catch(Ee){W.e(Ee)}finally{W.f()}}},{key:"inSMaskMode",get:function(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function(){var j=this.inSMaskMode;this.current.activeSMask&&!j?this.beginSMaskMode():!this.current.activeSMask&&j&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var j=this.ctx.canvas.width,Z=this.ctx.canvas.height,W="smaskGroupAt"+this.groupLevel,te=this.cachedCanvases.getCanvas(W,j,Z);this.suspendedCtx=this.ctx,this.ctx=te.context;var le=this.ctx;le.setTransform.apply(le,_toConsumableArray$1((0,u.getCurrentTransform)(this.suspendedCtx))),E(this.suspendedCtx,le),function(oe,Ee){if(oe._removeMirroring)throw new Error("Context is already forwarding operations.");oe.__originalSave=oe.save,oe.__originalRestore=oe.restore,oe.__originalRotate=oe.rotate,oe.__originalScale=oe.scale,oe.__originalTranslate=oe.translate,oe.__originalTransform=oe.transform,oe.__originalSetTransform=oe.setTransform,oe.__originalResetTransform=oe.resetTransform,oe.__originalClip=oe.clip,oe.__originalMoveTo=oe.moveTo,oe.__originalLineTo=oe.lineTo,oe.__originalBezierCurveTo=oe.bezierCurveTo,oe.__originalRect=oe.rect,oe.__originalClosePath=oe.closePath,oe.__originalBeginPath=oe.beginPath,oe._removeMirroring=function(){oe.save=oe.__originalSave,oe.restore=oe.__originalRestore,oe.rotate=oe.__originalRotate,oe.scale=oe.__originalScale,oe.translate=oe.__originalTranslate,oe.transform=oe.__originalTransform,oe.setTransform=oe.__originalSetTransform,oe.resetTransform=oe.__originalResetTransform,oe.clip=oe.__originalClip,oe.moveTo=oe.__originalMoveTo,oe.lineTo=oe.__originalLineTo,oe.bezierCurveTo=oe.__originalBezierCurveTo,oe.rect=oe.__originalRect,oe.closePath=oe.__originalClosePath,oe.beginPath=oe.__originalBeginPath,delete oe._removeMirroring},oe.save=function(){Ee.save(),this.__originalSave()},oe.restore=function(){Ee.restore(),this.__originalRestore()},oe.translate=function(Ae,ve){Ee.translate(Ae,ve),this.__originalTranslate(Ae,ve)},oe.scale=function(Ae,ve){Ee.scale(Ae,ve),this.__originalScale(Ae,ve)},oe.transform=function(Ae,ve,ke,Ce,Pe,Me){Ee.transform(Ae,ve,ke,Ce,Pe,Me),this.__originalTransform(Ae,ve,ke,Ce,Pe,Me)},oe.setTransform=function(Ae,ve,ke,Ce,Pe,Me){Ee.setTransform(Ae,ve,ke,Ce,Pe,Me),this.__originalSetTransform(Ae,ve,ke,Ce,Pe,Me)},oe.resetTransform=function(){Ee.resetTransform(),this.__originalResetTransform()},oe.rotate=function(Ae){Ee.rotate(Ae),this.__originalRotate(Ae)},oe.clip=function(Ae){Ee.clip(Ae),this.__originalClip(Ae)},oe.moveTo=function(Ae,ve){Ee.moveTo(Ae,ve),this.__originalMoveTo(Ae,ve)},oe.lineTo=function(Ae,ve){Ee.lineTo(Ae,ve),this.__originalLineTo(Ae,ve)},oe.bezierCurveTo=function(Ae,ve,ke,Ce,Pe,Me){Ee.bezierCurveTo(Ae,ve,ke,Ce,Pe,Me),this.__originalBezierCurveTo(Ae,ve,ke,Ce,Pe,Me)},oe.rect=function(Ae,ve,ke,Ce){Ee.rect(Ae,ve,ke,Ce),this.__originalRect(Ae,ve,ke,Ce)},oe.closePath=function(){Ee.closePath(),this.__originalClosePath()},oe.beginPath=function(){Ee.beginPath(),this.__originalBeginPath()}}(le,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),E(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}},{key:"compose",value:function(j){if(this.current.activeSMask){j?(j[0]=Math.floor(j[0]),j[1]=Math.floor(j[1]),j[2]=Math.ceil(j[2]),j[3]=Math.ceil(j[3])):j=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var Z=this.current.activeSMask;N(this.suspendedCtx,Z,this.ctx,j),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"save",value:function(){this.inSMaskMode?(E(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();var j=this.current;this.stateStack.push(j),this.current=j.clone()}},{key:"restore",value:function(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),E(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function(j,Z,W,te,le,oe){this.ctx.transform(j,Z,W,te,le,oe),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(j,Z,W){for(var te,le,oe=this.ctx,Ee=this.current,Ae=Ee.x,ve=Ee.y,ke=(0,u.getCurrentTransform)(oe),Ce=ke[0]===0&&ke[3]===0||ke[1]===0&&ke[2]===0,Pe=Ce?W.slice(0):null,Me=0,Le=0,Te=j.length;Me<Te;Me++)switch(0|j[Me]){case o.OPS.rectangle:Ae=Z[Le++],ve=Z[Le++];var ye=Z[Le++],_e=Z[Le++],we=Ae+ye,Se=ve+_e;oe.moveTo(Ae,ve),ye===0||_e===0?oe.lineTo(we,Se):(oe.lineTo(we,ve),oe.lineTo(we,Se),oe.lineTo(Ae,Se)),Ce||Ee.updateRectMinMax(ke,[Ae,ve,we,Se]),oe.closePath();break;case o.OPS.moveTo:Ae=Z[Le++],ve=Z[Le++],oe.moveTo(Ae,ve),Ce||Ee.updatePathMinMax(ke,Ae,ve);break;case o.OPS.lineTo:Ae=Z[Le++],ve=Z[Le++],oe.lineTo(Ae,ve),Ce||Ee.updatePathMinMax(ke,Ae,ve);break;case o.OPS.curveTo:te=Ae,le=ve,Ae=Z[Le+4],ve=Z[Le+5],oe.bezierCurveTo(Z[Le],Z[Le+1],Z[Le+2],Z[Le+3],Ae,ve),Ee.updateCurvePathMinMax(ke,te,le,Z[Le],Z[Le+1],Z[Le+2],Z[Le+3],Ae,ve,Pe),Le+=6;break;case o.OPS.curveTo2:te=Ae,le=ve,oe.bezierCurveTo(Ae,ve,Z[Le],Z[Le+1],Z[Le+2],Z[Le+3]),Ee.updateCurvePathMinMax(ke,te,le,Ae,ve,Z[Le],Z[Le+1],Z[Le+2],Z[Le+3],Pe),Ae=Z[Le+2],ve=Z[Le+3],Le+=4;break;case o.OPS.curveTo3:te=Ae,le=ve,Ae=Z[Le+2],ve=Z[Le+3],oe.bezierCurveTo(Z[Le],Z[Le+1],Ae,ve,Ae,ve),Ee.updateCurvePathMinMax(ke,te,le,Z[Le],Z[Le+1],Ae,ve,Ae,ve,Pe),Le+=4;break;case o.OPS.closePath:oe.closePath()}Ce&&Ee.updateScalingPathMinMax(ke,Pe),Ee.setCurrentPoint(Ae,ve)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(){var j=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],Z=this.ctx,W=this.current.strokeColor;Z.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(_typeof$1(W)==="object"&&W!=null&&W.getPattern?(Z.save(),Z.strokeStyle=W.getPattern(Z,this,(0,u.getCurrentTransformInverse)(Z),s.PathType.STROKE),this.rescaleAndStroke(!1),Z.restore()):this.rescaleAndStroke(!0)),j&&this.consumePath(this.current.getClippedPathBoundingBox()),Z.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(){var j=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],Z=this.ctx,W=this.current.fillColor,te=!1;this.current.patternFill&&(Z.save(),Z.fillStyle=W.getPattern(Z,this,(0,u.getCurrentTransformInverse)(Z),s.PathType.FILL),te=!0);var le=this.current.getClippedPathBoundingBox();this.contentVisible&&le!==null&&(this.pendingEOFill?(Z.fill("evenodd"),this.pendingEOFill=!1):Z.fill()),te&&Z.restore(),j&&this.consumePath(le)}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=Y}},{key:"eoClip",value:function(){this.pendingClip=Q}},{key:"beginText",value:function(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var j=this.pendingTextPaths,Z=this.ctx;if(j!==void 0){Z.save(),Z.beginPath();var W,te=_createForOfIteratorHelper(j);try{for(te.s();!(W=te.n()).done;){var le=W.value;Z.setTransform.apply(Z,_toConsumableArray$1(le.transform)),Z.translate(le.x,le.y),le.addToPath(Z,le.fontSize)}}catch(oe){te.e(oe)}finally{te.f()}Z.restore(),Z.clip(),Z.beginPath(),delete this.pendingTextPaths}else Z.beginPath()}},{key:"setCharSpacing",value:function(j){this.current.charSpacing=j}},{key:"setWordSpacing",value:function(j){this.current.wordSpacing=j}},{key:"setHScale",value:function(j){this.current.textHScale=j/100}},{key:"setLeading",value:function(j){this.current.leading=-j}},{key:"setFont",value:function(j,Z){var W=this.commonObjs.get(j),te=this.current;if(!W)throw new Error("Can't find font for ".concat(j));if(te.fontMatrix=W.fontMatrix||o.FONT_IDENTITY_MATRIX,te.fontMatrix[0]!==0&&te.fontMatrix[3]!==0||(0,o.warn)("Invalid font matrix for font "+j),Z<0?(Z=-Z,te.fontDirection=-1):te.fontDirection=1,this.current.font=W,this.current.fontSize=Z,!W.isType3Font){var le=W.loadedName||"sans-serif",oe="normal";W.black?oe="900":W.bold&&(oe="bold");var Ee=W.italic?"italic":"normal",Ae='"'.concat(le,'", ').concat(W.fallbackName),ve=Z;Z<16?ve=16:Z>100&&(ve=100),this.current.fontSizeScale=Z/ve,this.ctx.font="".concat(Ee," ").concat(oe," ").concat(ve,"px ").concat(Ae)}}},{key:"setTextRenderingMode",value:function(j){this.current.textRenderingMode=j}},{key:"setTextRise",value:function(j){this.current.textRise=j}},{key:"moveText",value:function(j,Z){this.current.x=this.current.lineX+=j,this.current.y=this.current.lineY+=Z}},{key:"setLeadingMoveText",value:function(j,Z){this.setLeading(-Z),this.moveText(j,Z)}},{key:"setTextMatrix",value:function(j,Z,W,te,le,oe){this.current.textMatrix=[j,Z,W,te,le,oe],this.current.textMatrixScale=Math.hypot(j,Z),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(j,Z,W,te){var le,oe=this.ctx,Ee=this.current,Ae=Ee.font,ve=Ee.textRenderingMode,ke=Ee.fontSize/Ee.fontSizeScale,Ce=ve&o.TextRenderingMode.FILL_STROKE_MASK,Pe=!!(ve&o.TextRenderingMode.ADD_TO_PATH_FLAG),Me=Ee.patternFill&&!Ae.missingFile;(Ae.disableFontFace||Pe||Me)&&(le=Ae.getPathGenerator(this.commonObjs,j)),Ae.disableFontFace||Me?(oe.save(),oe.translate(Z,W),oe.beginPath(),le(oe,ke),te&&oe.setTransform.apply(oe,_toConsumableArray$1(te)),Ce!==o.TextRenderingMode.FILL&&Ce!==o.TextRenderingMode.FILL_STROKE||oe.fill(),Ce!==o.TextRenderingMode.STROKE&&Ce!==o.TextRenderingMode.FILL_STROKE||oe.stroke(),oe.restore()):(Ce!==o.TextRenderingMode.FILL&&Ce!==o.TextRenderingMode.FILL_STROKE||oe.fillText(j,Z,W),Ce!==o.TextRenderingMode.STROKE&&Ce!==o.TextRenderingMode.FILL_STROKE||oe.strokeText(j,Z,W)),Pe&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,u.getCurrentTransform)(oe),x:Z,y:W,fontSize:ke,addToPath:le})}},{key:"isFontSubpixelAAEnabled",get:function(){var j=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;j.scale(1.5,1),j.fillText("I",0,10);for(var Z=j.getImageData(0,0,10,10).data,W=!1,te=3;te<Z.length;te+=4)if(Z[te]>0&&Z[te]<255){W=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",W)}},{key:"showText",value:function(j){var Z=this.current,W=Z.font;if(W.isType3Font)return this.showType3Text(j);var te=Z.fontSize;if(te!==0){var le,oe=this.ctx,Ee=Z.fontSizeScale,Ae=Z.charSpacing,ve=Z.wordSpacing,ke=Z.fontDirection,Ce=Z.textHScale*ke,Pe=j.length,Me=W.vertical,Le=Me?1:-1,Te=W.defaultVMetrics,ye=te*Z.fontMatrix[0],_e=Z.textRenderingMode===o.TextRenderingMode.FILL&&!W.disableFontFace&&!Z.patternFill;if(oe.save(),oe.transform.apply(oe,_toConsumableArray$1(Z.textMatrix)),oe.translate(Z.x,Z.y+Z.textRise),ke>0?oe.scale(Ce,-1):oe.scale(Ce,1),Z.patternFill){oe.save();var we=Z.fillColor.getPattern(oe,this,(0,u.getCurrentTransformInverse)(oe),s.PathType.FILL);le=(0,u.getCurrentTransform)(oe),oe.restore(),oe.fillStyle=we}var Se=Z.lineWidth,$e=Z.textMatrixScale;if($e===0||Se===0){var Be=Z.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;Be!==o.TextRenderingMode.STROKE&&Be!==o.TextRenderingMode.FILL_STROKE||(Se=this.getSinglePixelWidth())}else Se/=$e;if(Ee!==1&&(oe.scale(Ee,Ee),Se/=Ee),oe.lineWidth=Se,W.isInvalidPDFjsFont){var Oe,Ge=[],Ie=0,je=_createForOfIteratorHelper(j);try{for(je.s();!(Oe=je.n()).done;){var qe=Oe.value;Ge.push(qe.unicode),Ie+=qe.width}}catch(ot){je.e(ot)}finally{je.f()}return oe.fillText(Ge.join(""),0,0),Z.x+=Ie*ye*Ce,oe.restore(),void this.compose()}var Ue,Je=0;for(Ue=0;Ue<Pe;++Ue){var et=j[Ue];if(typeof et!="number"){var nt=!1,st=(et.isSpace?ve:0)+Ae,gt=et.fontChar,_t=et.accent,wt=void 0,He=void 0,Ve=et.width;if(Me){var ze=et.vmetric||Te,Ne=-(et.vmetric?ze[1]:.5*Ve)*ye,We=ze[2]*ye;Ve=ze?-ze[0]:Ve,wt=Ne/Ee,He=(Je+We)/Ee}else wt=Je/Ee,He=0;if(W.remeasure&&Ve>0){var Fe=1e3*oe.measureText(gt).width/te*Ee;if(Ve<Fe&&this.isFontSubpixelAAEnabled){var Ye=Ve/Fe;nt=!0,oe.save(),oe.scale(Ye,1),wt/=Ye}else Ve!==Fe&&(wt+=(Ve-Fe)/2e3*te/Ee)}if(this.contentVisible&&(et.isInFont||W.missingFile)){if(_e&&!_t)oe.fillText(gt,wt,He);else if(this.paintChar(gt,wt,He,le),_t){var Ke=wt+te*_t.offset.x/Ee,Ze=He-te*_t.offset.y/Ee;this.paintChar(_t.fontChar,Ke,Ze,le)}}Je+=Me?Ve*ye-st*ke:Ve*ye+st*ke,nt&&oe.restore()}else Je+=Le*et*te/1e3}Me?Z.y-=Je:Z.x+=Je*Ce,oe.restore(),this.compose()}}},{key:"showType3Text",value:function(j){var Z,W,te,le,oe=this.ctx,Ee=this.current,Ae=Ee.font,ve=Ee.fontSize,ke=Ee.fontDirection,Ce=Ae.vertical?1:-1,Pe=Ee.charSpacing,Me=Ee.wordSpacing,Le=Ee.textHScale*ke,Te=Ee.fontMatrix||o.FONT_IDENTITY_MATRIX,ye=j.length;if(Ee.textRenderingMode!==o.TextRenderingMode.INVISIBLE&&ve!==0){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,oe.save(),oe.transform.apply(oe,_toConsumableArray$1(Ee.textMatrix)),oe.translate(Ee.x,Ee.y),oe.scale(Le,ke),Z=0;Z<ye;++Z)if(typeof(W=j[Z])!="number"){var _e=(W.isSpace?Me:0)+Pe,we=Ae.charProcOperatorList[W.operatorListId];we?(this.contentVisible&&(this.processingType3=W,this.save(),oe.scale(ve,ve),oe.transform.apply(oe,_toConsumableArray$1(Te)),this.executeOperatorList(we),this.restore()),te=o.Util.applyTransform([W.width,0],Te)[0]*ve+_e,oe.translate(te,0),Ee.x+=te*Le):(0,o.warn)('Type3 character "'.concat(W.operatorListId,'" is not available.'))}else le=Ce*W*ve/1e3,this.ctx.translate(le,0),Ee.x+=le*Le;oe.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function(j,Z){}},{key:"setCharWidthAndBounds",value:function(j,Z,W,te,le,oe){this.ctx.rect(W,te,le-W,oe-te),this.ctx.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(j){var Z,W=this;if(j[0]==="TilingPattern"){var te=j[1],le=this.baseTransform||(0,u.getCurrentTransform)(this.ctx),oe={createCanvasGraphics:function(Ee){return new X(Ee,W.commonObjs,W.objs,W.canvasFactory,W.filterFactory,{optionalContentConfig:W.optionalContentConfig,markedContentStack:W.markedContentStack})}};Z=new s.TilingPattern(j,te,this.ctx,oe,le)}else Z=this._getPattern(j[1],j[2]);return Z}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(j,Z,W){var te=o.Util.makeHexColor(j,Z,W);this.ctx.strokeStyle=te,this.current.strokeColor=te}},{key:"setFillRGBColor",value:function(j,Z,W){var te=o.Util.makeHexColor(j,Z,W);this.ctx.fillStyle=te,this.current.fillColor=te,this.current.patternFill=!1}},{key:"_getPattern",value:function(j){var Z,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return this.cachedPatterns.has(j)?Z=this.cachedPatterns.get(j):(Z=(0,s.getShadingPattern)(this.getObject(j)),this.cachedPatterns.set(j,Z)),W&&(Z.matrix=W),Z}},{key:"shadingFill",value:function(j){if(this.contentVisible){var Z=this.ctx;this.save();var W=this._getPattern(j);Z.fillStyle=W.getPattern(Z,this,(0,u.getCurrentTransformInverse)(Z),s.PathType.SHADING);var te=(0,u.getCurrentTransformInverse)(Z);if(te){var le=Z.canvas,oe=le.width,Ee=le.height,Ae=o.Util.applyTransform([0,0],te),ve=o.Util.applyTransform([0,Ee],te),ke=o.Util.applyTransform([oe,0],te),Ce=o.Util.applyTransform([oe,Ee],te),Pe=Math.min(Ae[0],ve[0],ke[0],Ce[0]),Me=Math.min(Ae[1],ve[1],ke[1],Ce[1]),Le=Math.max(Ae[0],ve[0],ke[0],Ce[0]),Te=Math.max(Ae[1],ve[1],ke[1],Ce[1]);this.ctx.fillRect(Pe,Me,Le-Pe,Te-Me)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function(){(0,o.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){(0,o.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(j,Z){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(j)&&j.length===6&&this.transform.apply(this,_toConsumableArray$1(j)),this.baseTransform=(0,u.getCurrentTransform)(this.ctx),Z)){var W=Z[2]-Z[0],te=Z[3]-Z[1];this.ctx.rect(Z[0],Z[1],W,te),this.current.updateRectMinMax((0,u.getCurrentTransform)(this.ctx),Z),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(j){if(this.contentVisible){this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);var Z=this.ctx;j.isolated||(0,o.info)("TODO: Support non-isolated groups."),j.knockout&&(0,o.warn)("Knockout groups not supported.");var W=(0,u.getCurrentTransform)(Z);if(j.matrix&&Z.transform.apply(Z,_toConsumableArray$1(j.matrix)),!j.bbox)throw new Error("Bounding box is required.");var te=o.Util.getAxialAlignedBoundingBox(j.bbox,(0,u.getCurrentTransform)(Z)),le=[0,0,Z.canvas.width,Z.canvas.height];te=o.Util.intersect(te,le)||[0,0,0,0];var oe=Math.floor(te[0]),Ee=Math.floor(te[1]),Ae=Math.max(Math.ceil(te[2])-oe,1),ve=Math.max(Math.ceil(te[3])-Ee,1),ke=1,Ce=1;Ae>m&&(ke=Ae/m,Ae=m),ve>m&&(Ce=ve/m,ve=m),this.current.startNewPathAndClipBox([0,0,Ae,ve]);var Pe="groupAt"+this.groupLevel;j.smask&&(Pe+="_smask_"+this.smaskCounter++%2);var Me=this.cachedCanvases.getCanvas(Pe,Ae,ve),Le=Me.context;Le.scale(1/ke,1/Ce),Le.translate(-oe,-Ee),Le.transform.apply(Le,_toConsumableArray$1(W)),j.smask?this.smaskStack.push({canvas:Me.canvas,context:Le,offsetX:oe,offsetY:Ee,scaleX:ke,scaleY:Ce,subtype:j.smask.subtype,backdrop:j.smask.backdrop,transferMap:j.smask.transferMap||null,startTransformInverse:null}):(Z.setTransform(1,0,0,1,0,0),Z.translate(oe,Ee),Z.scale(ke,Ce),Z.save()),E(Z,Le),this.ctx=Le,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Z),this.groupLevel++}}},{key:"endGroup",value:function(j){if(this.contentVisible){this.groupLevel--;var Z=this.ctx,W=this.groupStack.pop();if(this.ctx=W,this.ctx.imageSmoothingEnabled=!1,j.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{var te;this.ctx.restore();var le=(0,u.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),(te=this.ctx).setTransform.apply(te,_toConsumableArray$1(le));var oe=o.Util.getAxialAlignedBoundingBox([0,0,Z.canvas.width,Z.canvas.height],le);this.ctx.drawImage(Z.canvas,0,0),this.ctx.restore(),this.compose(oe)}}}},{key:"beginAnnotation",value:function(j,Z,W,te,le){var oe;if(y(this,q,J).call(this),M(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&(oe=this.ctx).setTransform.apply(oe,_toConsumableArray$1(this.baseTransform)),Array.isArray(Z)&&Z.length===4){var Ee=Z[2]-Z[0],Ae=Z[3]-Z[1];if(le&&this.annotationCanvasMap){(W=W.slice())[4]-=Z[0],W[5]-=Z[1],(Z=Z.slice())[0]=Z[1]=0,Z[2]=Ee,Z[3]=Ae;var ve=_slicedToArray(o.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(this.ctx)),2),ke=ve[0],Ce=ve[1],Pe=this.viewportScale,Me=Math.ceil(Ee*this.outputScaleX*Pe),Le=Math.ceil(Ae*this.outputScaleY*Pe);this.annotationCanvas=this.canvasFactory.create(Me,Le);var Te=this.annotationCanvas,ye=Te.canvas,_e=Te.context;this.annotationCanvasMap.set(j,ye),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_e,this.ctx.setTransform(ke,0,0,-Ce,0,Ae*Ce),M(this.ctx)}else M(this.ctx),this.ctx.rect(Z[0],Z[1],Ee,Ae),this.ctx.clip(),this.endPath()}this.current=new k(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,_toConsumableArray$1(W)),this.transform.apply(this,_toConsumableArray$1(te))}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}},{key:"paintImageMaskXObject",value:function(j){if(this.contentVisible){var Z=j.count;(j=this.getObject(j.data,j)).count=Z;var W=this.ctx,te=this.processingType3;if(te&&(te.compiled===void 0&&(te.compiled=function(Ee){var Ae=Ee.width,ve=Ee.height;if(Ae>1e3||ve>1e3)return null;var ke,Ce,Pe,Me,Le=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Te=Ae+1,ye=new Uint8Array(Te*(ve+1)),_e=Ae+7&-8,we=new Uint8Array(_e*ve),Se=0,$e=_createForOfIteratorHelper(Ee.data);try{for($e.s();!(Me=$e.n()).done;)for(var Be=Me.value,Oe=128;Oe>0;)we[Se++]=Be&Oe?0:255,Oe>>=1}catch(_t){$e.e(_t)}finally{$e.f()}var Ge=0;for(we[Se=0]!==0&&(ye[0]=1,++Ge),Ce=1;Ce<Ae;Ce++)we[Se]!==we[Se+1]&&(ye[Ce]=we[Se]?2:1,++Ge),Se++;for(we[Se]!==0&&(ye[Ce]=2,++Ge),ke=1;ke<ve;ke++){Pe=ke*Te,we[(Se=ke*_e)-_e]!==we[Se]&&(ye[Pe]=we[Se]?1:8,++Ge);var Ie=(we[Se]?4:0)+(we[Se-_e]?8:0);for(Ce=1;Ce<Ae;Ce++)Le[Ie=(Ie>>2)+(we[Se+1]?4:0)+(we[Se-_e+1]?8:0)]&&(ye[Pe+Ce]=Le[Ie],++Ge),Se++;if(we[Se-_e]!==we[Se]&&(ye[Pe+Ce]=we[Se]?2:4,++Ge),Ge>1e3)return null}for(Pe=ke*Te,we[Se=_e*(ve-1)]!==0&&(ye[Pe]=8,++Ge),Ce=1;Ce<Ae;Ce++)we[Se]!==we[Se+1]&&(ye[Pe+Ce]=we[Se]?4:8,++Ge),Se++;if(we[Se]!==0&&(ye[Pe+Ce]=4,++Ge),Ge>1e3)return null;var je=new Int32Array([0,Te,-1,0,-Te,0,0,0,1]),qe=new Path2D;for(ke=0;Ge&&ke<=ve;ke++){for(var Ue=ke*Te,Je=Ue+Ae;Ue<Je&&!ye[Ue];)Ue++;if(Ue!==Je){qe.moveTo(Ue%Te,ke);var et=Ue,nt=ye[Ue];do{var st=je[nt];do Ue+=st;while(!ye[Ue]);var gt=ye[Ue];gt!==5&&gt!==10?(nt=gt,ye[Ue]=0):(nt=gt&51*nt>>4,ye[Ue]&=nt>>2|nt<<2),qe.lineTo(Ue%Te,Ue/Te|0),ye[Ue]||--Ge}while(et!==Ue);--ke}}return we=null,ye=null,function(_t){_t.save(),_t.scale(1/Ae,-1/ve),_t.translate(0,-ve),_t.fill(qe),_t.beginPath(),_t.restore()}}(j)),te.compiled))te.compiled(W);else{var le=this._createMaskCanvas(j),oe=le.canvas;W.save(),W.setTransform(1,0,0,1,0,0),W.drawImage(oe,le.offsetX,le.offsetY),W.restore(),this.compose()}}}},{key:"paintImageMaskXObjectRepeat",value:function(j,Z){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,te=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,le=arguments.length>4?arguments[4]:void 0,oe=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){j=this.getObject(j.data,j);var Ee=this.ctx;Ee.save();var Ae=(0,u.getCurrentTransform)(Ee);Ee.transform(Z,W,te,le,0,0);var ve=this._createMaskCanvas(j);Ee.setTransform(1,0,0,1,ve.offsetX-Ae[4],ve.offsetY-Ae[5]);for(var ke=0,Ce=oe.length;ke<Ce;ke+=2){var Pe=o.Util.transform(Ae,[Z,W,te,le,oe[ke],oe[ke+1]]),Me=_slicedToArray(o.Util.applyTransform([0,0],Pe),2),Le=Me[0],Te=Me[1];Ee.drawImage(ve.canvas,Le,Te)}Ee.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function(j){if(this.contentVisible){var Z,W=this.ctx,te=this.current.fillColor,le=this.current.patternFill,oe=_createForOfIteratorHelper(j);try{for(oe.s();!(Z=oe.n()).done;){var Ee=Z.value,Ae=Ee.data,ve=Ee.width,ke=Ee.height,Ce=Ee.transform,Pe=this.cachedCanvases.getCanvas("maskCanvas",ve,ke),Me=Pe.context;Me.save(),S(Me,this.getObject(Ae,Ee)),Me.globalCompositeOperation="source-in",Me.fillStyle=le?te.getPattern(Me,this,(0,u.getCurrentTransformInverse)(W),s.PathType.FILL):te,Me.fillRect(0,0,ve,ke),Me.restore(),W.save(),W.transform.apply(W,_toConsumableArray$1(Ce)),W.scale(1,-1),x(W,Pe.canvas,0,0,ve,ke,0,-1,1,1),W.restore()}}catch(Le){oe.e(Le)}finally{oe.f()}this.compose()}}},{key:"paintImageXObject",value:function(j){if(this.contentVisible){var Z=this.getObject(j);Z?this.paintInlineImageXObject(Z):(0,o.warn)("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function(j,Z,W,te){if(this.contentVisible){var le=this.getObject(j);if(le){for(var oe=le.width,Ee=le.height,Ae=[],ve=0,ke=te.length;ve<ke;ve+=2)Ae.push({transform:[Z,0,0,W,te[ve],te[ve+1]],x:0,y:0,w:oe,h:Ee});this.paintInlineImageXObjectGroup(le,Ae)}else(0,o.warn)("Dependent image isn't ready yet")}}},{key:"applyTransferMapsToCanvas",value:function(j){return this.current.transferMaps!=="none"&&(j.filter=this.current.transferMaps,j.drawImage(j.canvas,0,0),j.filter="none"),j.canvas}},{key:"applyTransferMapsToBitmap",value:function(j){if(this.current.transferMaps==="none")return j.bitmap;var Z=j.bitmap,W=j.width,te=j.height,le=this.cachedCanvases.getCanvas("inlineImage",W,te),oe=le.context;return oe.filter=this.current.transferMaps,oe.drawImage(Z,0,0),oe.filter="none",le.canvas}},{key:"paintInlineImageXObject",value:function(j){if(this.contentVisible){var Z,W=j.width,te=j.height,le=this.ctx;if(this.save(),g.isNodeJS||(le.filter="none"),le.scale(1/W,-1/te),j.bitmap)Z=this.applyTransferMapsToBitmap(j);else if(typeof HTMLElement=="function"&&j instanceof HTMLElement||!j.data)Z=j;else{var oe=this.cachedCanvases.getCanvas("inlineImage",W,te).context;P(oe,j),Z=this.applyTransferMapsToCanvas(oe)}var Ee=this._scaleImage(Z,(0,u.getCurrentTransformInverse)(le));le.imageSmoothingEnabled=O((0,u.getCurrentTransform)(le),j.interpolate),x(le,Ee.img,0,0,Ee.paintWidth,Ee.paintHeight,0,-te,W,te),this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(j,Z){if(this.contentVisible){var W,te=this.ctx;if(j.bitmap)W=j.bitmap;else{var le=j.width,oe=j.height,Ee=this.cachedCanvases.getCanvas("inlineImage",le,oe).context;P(Ee,j),W=this.applyTransferMapsToCanvas(Ee)}var Ae,ve=_createForOfIteratorHelper(Z);try{for(ve.s();!(Ae=ve.n()).done;){var ke=Ae.value;te.save(),te.transform.apply(te,_toConsumableArray$1(ke.transform)),te.scale(1,-1),x(te,W,ke.x,ke.y,ke.w,ke.h,0,-1,1,1),te.restore()}}catch(Ce){ve.e(Ce)}finally{ve.f()}this.compose()}}},{key:"paintSolidColorImageMask",value:function(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function(j){}},{key:"markPointProps",value:function(j,Z){}},{key:"beginMarkedContent",value:function(j){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(j,Z){j==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Z)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(j){var Z=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(j);var W=this.ctx;this.pendingClip&&(Z||(this.pendingClip===Q?W.clip("evenodd"):W.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),W.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(!this._cachedGetSinglePixelWidth){var j=(0,u.getCurrentTransform)(this.ctx);if(j[1]===0&&j[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(j[0]),Math.abs(j[3]));else{var Z=Math.abs(j[0]*j[3]-j[2]*j[1]),W=Math.hypot(j[0],j[2]),te=Math.hypot(j[1],j[3]);this._cachedGetSinglePixelWidth=Math.max(W,te)/Z}}return this._cachedGetSinglePixelWidth}},{key:"getScaleForStroking",value:function(){if(!this._cachedScaleForStroking){var j,Z,W=this.current.lineWidth,te=(0,u.getCurrentTransform)(this.ctx);if(te[1]===0&&te[2]===0){var le=Math.abs(te[0]),oe=Math.abs(te[3]);if(W===0)j=1/le,Z=1/oe;else{var Ee=le*W,Ae=oe*W;j=Ee<1?1/Ee:1,Z=Ae<1?1/Ae:1}}else{var ve=Math.abs(te[0]*te[3]-te[2]*te[1]),ke=Math.hypot(te[0],te[1]),Ce=Math.hypot(te[2],te[3]);if(W===0)j=Ce/ve,Z=ke/ve;else{var Pe=W*ve;j=Ce>Pe?Ce/Pe:1,Z=ke>Pe?ke/Pe:1}}this._cachedScaleForStroking=[j,Z]}return this._cachedScaleForStroking}},{key:"rescaleAndStroke",value:function(j){var Z=this.ctx,W=this.current.lineWidth,te=_slicedToArray(this.getScaleForStroking(),2),le=te[0],oe=te[1];if(Z.lineWidth=W||1,le!==1||oe!==1){var Ee,Ae,ve;j&&(Ee=(0,u.getCurrentTransform)(Z),Ae=Z.getLineDash().slice(),ve=Z.lineDashOffset),Z.scale(le,oe);var ke=Math.max(le,oe);Z.setLineDash(Z.getLineDash().map(function(Ce){return Ce/ke})),Z.lineDashOffset/=ke,Z.stroke(),j&&(Z.setTransform.apply(Z,_toConsumableArray$1(Ee)),Z.setLineDash(Ae),Z.lineDashOffset=ve)}else Z.stroke()}},{key:"isContentVisible",value:function(){for(var j=this.markedContentStack.length-1;j>=0;j--)if(!this.markedContentStack[j].visible)return!1;return!0}}])}();function J(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}for(var re in n.CanvasGraphics=ne,o.OPS)ne.prototype[re]!==void 0&&(ne.prototype[o.OPS[re]]=ne.prototype[re])},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.TilingPattern=n.PathType=void 0,n.getShadingPattern=function(S){switch(S[0]){case"RadialAxial":return new v(S);case"Mesh":return new d(S);case"Dummy":return new f}throw new Error("Unknown IR type: ".concat(S[0]))};var o=r(1),u=r(142),s={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function w(S,E){if(E){var M=E[2]-E[0],T=E[3]-E[1],D=new Path2D;D.rect(E[0],E[1],M,T),S.clip(D)}}n.PathType=s;var g=function(){return _createClass(function S(){_classCallCheck(this,S),this.constructor===S&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")},[{key:"getPattern",value:function(){(0,o.unreachable)("Abstract method `getPattern` called.")}}])}(),v=function(S){function E(M){var T;return _classCallCheck(this,E),(T=_callSuper(this,E))._type=M[1],T._bbox=M[2],T._colorStops=M[3],T._p0=M[4],T._p1=M[5],T._r0=M[6],T._r1=M[7],T.matrix=null,T}return _inherits(E,S),_createClass(E,[{key:"_createGradient",value:function(M){var T;this._type==="axial"?T=M.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(T=M.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var D,I=_createForOfIteratorHelper(this._colorStops);try{for(I.s();!(D=I.n()).done;){var N=D.value;T.addColorStop(N[0],N[1])}}catch(O){I.e(O)}finally{I.f()}return T}},{key:"getPattern",value:function(M,T,D,I){var N;if(I===s.STROKE||I===s.FILL){var O=T.current.getClippedPathBoundingBox(I,(0,u.getCurrentTransform)(M))||[0,0,0,0],F=Math.ceil(O[2]-O[0])||1,U=Math.ceil(O[3]-O[1])||1,Y=T.cachedCanvases.getCanvas("pattern",F,U,!0),Q=Y.context;Q.clearRect(0,0,Q.canvas.width,Q.canvas.height),Q.beginPath(),Q.rect(0,0,Q.canvas.width,Q.canvas.height),Q.translate(-O[0],-O[1]),D=o.Util.transform(D,[1,0,0,1,O[0],O[1]]),Q.transform.apply(Q,_toConsumableArray$1(T.baseTransform)),this.matrix&&Q.transform.apply(Q,_toConsumableArray$1(this.matrix)),w(Q,this._bbox),Q.fillStyle=this._createGradient(Q),Q.fill(),N=M.createPattern(Y.canvas,"no-repeat");var q=new DOMMatrix(D);N.setTransform(q)}else w(M,this._bbox),N=this._createGradient(M);return N}}])}(g);function y(S,E,M,T,D,I,N,O){var F,U=E.coords,Y=E.colors,Q=S.data,q=4*S.width;U[M+1]>U[T+1]&&(F=M,M=T,T=F,F=I,I=N,N=F),U[T+1]>U[D+1]&&(F=T,T=D,D=F,F=N,N=O,O=F),U[M+1]>U[T+1]&&(F=M,M=T,T=F,F=I,I=N,N=F);var ne=(U[M]+E.offsetX)*E.scaleX,J=(U[M+1]+E.offsetY)*E.scaleY,re=(U[T]+E.offsetX)*E.scaleX,X=(U[T+1]+E.offsetY)*E.scaleY,j=(U[D]+E.offsetX)*E.scaleX,Z=(U[D+1]+E.offsetY)*E.scaleY;if(!(J>=Z))for(var W,te,le,oe,Ee,Ae,ve,ke,Ce=Y[I],Pe=Y[I+1],Me=Y[I+2],Le=Y[N],Te=Y[N+1],ye=Y[N+2],_e=Y[O],we=Y[O+1],Se=Y[O+2],$e=Math.round(J),Be=Math.round(Z),Oe=$e;Oe<=Be;Oe++){if(Oe<X){var Ge=void 0;W=ne-(ne-re)*(Ge=Oe<J?0:(J-Oe)/(J-X)),te=Ce-(Ce-Le)*Ge,le=Pe-(Pe-Te)*Ge,oe=Me-(Me-ye)*Ge}else{var Ie=void 0;W=re-(re-j)*(Ie=Oe>Z?1:X===Z?0:(X-Oe)/(X-Z)),te=Le-(Le-_e)*Ie,le=Te-(Te-we)*Ie,oe=ye-(ye-Se)*Ie}var je=void 0;Ee=ne-(ne-j)*(je=Oe<J?0:Oe>Z?1:(J-Oe)/(J-Z)),Ae=Ce-(Ce-_e)*je,ve=Pe-(Pe-we)*je,ke=Me-(Me-Se)*je;for(var qe=Math.round(Math.min(W,Ee)),Ue=Math.round(Math.max(W,Ee)),Je=q*Oe+4*qe,et=qe;et<=Ue;et++)(je=(W-et)/(W-Ee))<0?je=0:je>1&&(je=1),Q[Je++]=te-(te-Ae)*je|0,Q[Je++]=le-(le-ve)*je|0,Q[Je++]=oe-(oe-ke)*je|0,Q[Je++]=255}}function m(S,E,M){var T,D,I=E.coords,N=E.colors;switch(E.type){case"lattice":var O=E.verticesPerRow,F=Math.floor(I.length/O)-1,U=O-1;for(T=0;T<F;T++)for(var Y=T*O,Q=0;Q<U;Q++,Y++)y(S,M,I[Y],I[Y+1],I[Y+O],N[Y],N[Y+1],N[Y+O]),y(S,M,I[Y+O+1],I[Y+1],I[Y+O],N[Y+O+1],N[Y+1],N[Y+O]);break;case"triangles":for(T=0,D=I.length;T<D;T+=3)y(S,M,I[T],I[T+1],I[T+2],N[T],N[T+1],N[T+2]);break;default:throw new Error("illegal figure")}}var d=function(S){function E(M){var T;return _classCallCheck(this,E),(T=_callSuper(this,E))._coords=M[2],T._colors=M[3],T._figures=M[4],T._bounds=M[5],T._bbox=M[7],T._background=M[8],T.matrix=null,T}return _inherits(E,S),_createClass(E,[{key:"_createMeshCanvas",value:function(M,T,D){var I=Math.floor(this._bounds[0]),N=Math.floor(this._bounds[1]),O=Math.ceil(this._bounds[2])-I,F=Math.ceil(this._bounds[3])-N,U=Math.min(Math.ceil(Math.abs(O*M[0]*1.1)),3e3),Y=Math.min(Math.ceil(Math.abs(F*M[1]*1.1)),3e3),Q=O/U,q=F/Y,ne={coords:this._coords,colors:this._colors,offsetX:-I,offsetY:-N,scaleX:1/Q,scaleY:1/q},J=U+4,re=Y+4,X=D.getCanvas("mesh",J,re,!1),j=X.context,Z=j.createImageData(U,Y);if(T)for(var W=Z.data,te=0,le=W.length;te<le;te+=4)W[te]=T[0],W[te+1]=T[1],W[te+2]=T[2],W[te+3]=255;var oe,Ee=_createForOfIteratorHelper(this._figures);try{for(Ee.s();!(oe=Ee.n()).done;)m(Z,oe.value,ne)}catch(Ae){Ee.e(Ae)}finally{Ee.f()}return j.putImageData(Z,2,2),{canvas:X.canvas,offsetX:I-2*Q,offsetY:N-2*q,scaleX:Q,scaleY:q}}},{key:"getPattern",value:function(M,T,D,I){var N;if(w(M,this._bbox),I===s.SHADING)N=o.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(M));else if(N=o.Util.singularValueDecompose2dScale(T.baseTransform),this.matrix){var O=o.Util.singularValueDecompose2dScale(this.matrix);N=[N[0]*O[0],N[1]*O[1]]}var F=this._createMeshCanvas(N,I===s.SHADING?null:this._background,T.cachedCanvases);return I!==s.SHADING&&(M.setTransform.apply(M,_toConsumableArray$1(T.baseTransform)),this.matrix&&M.transform.apply(M,_toConsumableArray$1(this.matrix))),M.translate(F.offsetX,F.offsetY),M.scale(F.scaleX,F.scaleY),M.createPattern(F.canvas,"no-repeat")}}])}(g),f=function(S){function E(){return _classCallCheck(this,E),_callSuper(this,E,arguments)}return _inherits(E,S),_createClass(E,[{key:"getPattern",value:function(){return"hotpink"}}])}(g),x=1,k=2,P=function(){function S(E,M,T,D,I){_classCallCheck(this,S),this.operatorList=E[2],this.matrix=E[3]||[1,0,0,1,0,0],this.bbox=E[4],this.xstep=E[5],this.ystep=E[6],this.paintType=E[7],this.tilingType=E[8],this.color=M,this.ctx=T,this.canvasGraphicsFactory=D,this.baseTransform=I}return _createClass(S,[{key:"createPatternCanvas",value:function(E){var M=this.operatorList,T=this.bbox,D=this.xstep,I=this.ystep,N=this.paintType,O=this.tilingType,F=this.color,U=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+O);var Y=T[0],Q=T[1],q=T[2],ne=T[3],J=o.Util.singularValueDecompose2dScale(this.matrix),re=o.Util.singularValueDecompose2dScale(this.baseTransform),X=[J[0]*re[0],J[1]*re[1]],j=this.getSizeAndScale(D,this.ctx.canvas.width,X[0]),Z=this.getSizeAndScale(I,this.ctx.canvas.height,X[1]),W=E.cachedCanvases.getCanvas("pattern",j.size,Z.size,!0),te=W.context,le=U.createCanvasGraphics(te);le.groupLevel=E.groupLevel,this.setFillAndStrokeStyleToContext(le,N,F);var oe=Y,Ee=Q,Ae=q,ve=ne;return Y<0&&(oe=0,Ae+=Math.abs(Y)),Q<0&&(Ee=0,ve+=Math.abs(Q)),te.translate(-j.scale*oe,-Z.scale*Ee),le.transform(j.scale,0,0,Z.scale,0,0),te.save(),this.clipBbox(le,oe,Ee,Ae,ve),le.baseTransform=(0,u.getCurrentTransform)(le.ctx),le.executeOperatorList(M),le.endDrawing(),{canvas:W.canvas,scaleX:j.scale,scaleY:Z.scale,offsetX:oe,offsetY:Ee}}},{key:"getSizeAndScale",value:function(E,M,T){E=Math.abs(E);var D=Math.max(S.MAX_PATTERN_SIZE,M),I=Math.ceil(E*T);return I>=D?I=D:T=I/E,{scale:T,size:I}}},{key:"clipBbox",value:function(E,M,T,D,I){var N=D-M,O=I-T;E.ctx.rect(M,T,N,O),E.current.updateRectMinMax((0,u.getCurrentTransform)(E.ctx),[M,T,D,I]),E.clip(),E.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(E,M,T){var D=E.ctx,I=E.current;switch(M){case x:var N=this.ctx;D.fillStyle=N.fillStyle,D.strokeStyle=N.strokeStyle,I.fillColor=N.fillStyle,I.strokeColor=N.strokeStyle;break;case k:var O=o.Util.makeHexColor(T[0],T[1],T[2]);D.fillStyle=O,D.strokeStyle=O,I.fillColor=O,I.strokeColor=O;break;default:throw new o.FormatError("Unsupported paint type: ".concat(M))}}},{key:"getPattern",value:function(E,M,T,D){var I=T;D!==s.SHADING&&(I=o.Util.transform(I,M.baseTransform),this.matrix&&(I=o.Util.transform(I,this.matrix)));var N=this.createPatternCanvas(M),O=new DOMMatrix(I);O=(O=O.translate(N.offsetX,N.offsetY)).scale(1/N.scaleX,1/N.scaleY);var F=E.createPattern(N.canvas,"repeat");return F.setTransform(O),F}}],[{key:"MAX_PATTERN_SIZE",get:function(){return(0,o.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}])}();n.TilingPattern=P},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.convertBlackAndWhiteToRGBA=u,n.convertToRGBA=function(s){switch(s.kind){case o.ImageKind.GRAYSCALE_1BPP:return u(s);case o.ImageKind.RGB_24BPP:return function(w){var g=w.src,v=w.srcPos,y=v===void 0?0:v,m=w.dest,d=w.destPos,f=d===void 0?0:d;w.width,w.height;var x=0,k=g.length>>2,P=new Uint32Array(g.buffer,y,k);if(o.FeatureTest.isLittleEndian){for(;x<k-2;x+=3,f+=4){var S=P[x],E=P[x+1],M=P[x+2];m[f]=4278190080|S,m[f+1]=S>>>24|E<<8|4278190080,m[f+2]=E>>>16|M<<16|4278190080,m[f+3]=M>>>8|4278190080}for(var T=4*x,D=g.length;T<D;T+=3)m[f++]=g[T]|g[T+1]<<8|g[T+2]<<16|4278190080}else{for(;x<k-2;x+=3,f+=4){var I=P[x],N=P[x+1],O=P[x+2];m[f]=255|I,m[f+1]=I<<24|N>>>8|255,m[f+2]=N<<16|O>>>16|255,m[f+3]=O<<8|255}for(var F=4*x,U=g.length;F<U;F+=3)m[f++]=g[F]<<24|g[F+1]<<16|g[F+2]<<8|255}return{srcPos:y,destPos:f}}(s)}return null},n.grayToRGBA=function(s,w){if(o.FeatureTest.isLittleEndian)for(var g=0,v=s.length;g<v;g++)w[g]=65793*s[g]|4278190080;else for(var y=0,m=s.length;y<m;y++)w[y]=16843008*s[y]|255};var o=r(1);function u(s){var w=s.src,g=s.srcPos,v=g===void 0?0:g,y=s.dest,m=s.width,d=s.height,f=s.nonBlackColor,x=f===void 0?4294967295:f,k=s.inverseDecode,P=k!==void 0&&k,S=o.FeatureTest.isLittleEndian?4278190080:255,E=_slicedToArray(P?[x,S]:[S,x],2),M=E[0],T=E[1],D=m>>3,I=7&m,N=w.length;y=new Uint32Array(y.buffer);for(var O=0,F=0;F<d;F++){for(var U=v+D;v<U;v++){var Y=v<N?w[v]:255;y[O++]=128&Y?T:M,y[O++]=64&Y?T:M,y[O++]=32&Y?T:M,y[O++]=16&Y?T:M,y[O++]=8&Y?T:M,y[O++]=4&Y?T:M,y[O++]=2&Y?T:M,y[O++]=1&Y?T:M}if(I!==0)for(var Q=v<N?w[v++]:255,q=0;q<I;q++)y[O++]=Q&1<<7-q?T:M}return{srcPos:v,destPos:O}}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalWorkerOptions=void 0;var r=Object.create(null);n.GlobalWorkerOptions=r,r.workerPort=null,r.workerSrc=""},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;var o=r(1),u=1,s=2,w=1,g=2,v=3,y=4,m=5,d=6,f=7,x=8;function k(S){switch(S instanceof Error||_typeof$1(S)==="object"&&S!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),S.name){case"AbortException":return new o.AbortException(S.message);case"MissingPDFException":return new o.MissingPDFException(S.message);case"PasswordException":return new o.PasswordException(S.message,S.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(S.message,S.status);case"UnknownErrorException":return new o.UnknownErrorException(S.message,S.details);default:return new o.UnknownErrorException(S.message,S.toString())}}var P=function(){return _createClass(function E(M,T,D){var I=this;_classCallCheck(this,E),this.sourceName=M,this.targetName=T,this.comObj=D,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(N){var O=N.data;if(O.targetName===I.sourceName)if(O.stream)I._processStreamMessage(O);else if(O.callback){var F=O.callbackId,U=I.callbackCapabilities[F];if(!U)throw new Error("Cannot resolve callback ".concat(F));if(delete I.callbackCapabilities[F],O.callback===u)U.resolve(O.data);else{if(O.callback!==s)throw new Error("Unexpected callback case");U.reject(k(O.reason))}}else{var Y=I.actionHandler[O.action];if(!Y)throw new Error("Unknown action from worker: ".concat(O.action));if(O.callbackId){var Q=I.sourceName,q=O.sourceName;new Promise(function(ne){ne(Y(O.data))}).then(function(ne){D.postMessage({sourceName:Q,targetName:q,callback:u,callbackId:O.callbackId,data:ne})},function(ne){D.postMessage({sourceName:Q,targetName:q,callback:s,callbackId:O.callbackId,reason:k(ne)})})}else O.streamId?I._createStreamSink(O):Y(O.data)}},D.addEventListener("message",this._onComObjOnMessage)},[{key:"on",value:function(E,M){var T=this.actionHandler;if(T[E])throw new Error('There is already an actionName called "'.concat(E,'"'));T[E]=M}},{key:"send",value:function(E,M,T){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:E,data:M},T)}},{key:"sendWithPromise",value:function(E,M,T){var D=this.callbackId++,I=(0,o.createPromiseCapability)();this.callbackCapabilities[D]=I;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:E,callbackId:D,data:M},T)}catch(N){I.reject(N)}return I.promise}},{key:"sendWithStream",value:function(E,M,T,D){var I=this,N=this.streamId++,O=this.sourceName,F=this.targetName,U=this.comObj;return new ReadableStream({start:function(Y){var Q=(0,o.createPromiseCapability)();return I.streamControllers[N]={controller:Y,startCall:Q,pullCall:null,cancelCall:null,isClosed:!1},U.postMessage({sourceName:O,targetName:F,action:E,streamId:N,data:M,desiredSize:Y.desiredSize},D),Q.promise},pull:function(Y){var Q=(0,o.createPromiseCapability)();return I.streamControllers[N].pullCall=Q,U.postMessage({sourceName:O,targetName:F,stream:d,streamId:N,desiredSize:Y.desiredSize}),Q.promise},cancel:function(Y){(0,o.assert)(Y instanceof Error,"cancel must have a valid reason");var Q=(0,o.createPromiseCapability)();return I.streamControllers[N].cancelCall=Q,I.streamControllers[N].isClosed=!0,U.postMessage({sourceName:O,targetName:F,stream:w,streamId:N,reason:k(Y)}),Q.promise}},T)}},{key:"_createStreamSink",value:function(E){var M=E.streamId,T=this.sourceName,D=E.sourceName,I=this.comObj,N=this,O=this.actionHandler[E.action],F={enqueue:function(U){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Q=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var q=this.desiredSize;this.desiredSize-=Y,q>0&&this.desiredSize<=0&&(this.sinkCapability=(0,o.createPromiseCapability)(),this.ready=this.sinkCapability.promise),I.postMessage({sourceName:T,targetName:D,stream:y,streamId:M,chunk:U},Q)}},close:function(){this.isCancelled||(this.isCancelled=!0,I.postMessage({sourceName:T,targetName:D,stream:v,streamId:M}),delete N.streamSinks[M])},error:function(U){(0,o.assert)(U instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,I.postMessage({sourceName:T,targetName:D,stream:m,streamId:M,reason:k(U)}))},sinkCapability:(0,o.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:E.desiredSize,ready:null};F.sinkCapability.resolve(),F.ready=F.sinkCapability.promise,this.streamSinks[M]=F,new Promise(function(U){U(O(E.data,F))}).then(function(){I.postMessage({sourceName:T,targetName:D,stream:x,streamId:M,success:!0})},function(U){I.postMessage({sourceName:T,targetName:D,stream:x,streamId:M,reason:k(U)})})}},{key:"_processStreamMessage",value:function(E){var M=E.streamId,T=this.sourceName,D=E.sourceName,I=this.comObj,N=this.streamControllers[M],O=this.streamSinks[M];switch(E.stream){case x:E.success?N.startCall.resolve():N.startCall.reject(k(E.reason));break;case f:E.success?N.pullCall.resolve():N.pullCall.reject(k(E.reason));break;case d:if(!O){I.postMessage({sourceName:T,targetName:D,stream:f,streamId:M,success:!0});break}O.desiredSize<=0&&E.desiredSize>0&&O.sinkCapability.resolve(),O.desiredSize=E.desiredSize,new Promise(function(F){F(O.onPull&&O.onPull())}).then(function(){I.postMessage({sourceName:T,targetName:D,stream:f,streamId:M,success:!0})},function(F){I.postMessage({sourceName:T,targetName:D,stream:f,streamId:M,reason:k(F)})});break;case y:if((0,o.assert)(N,"enqueue should have stream controller"),N.isClosed)break;N.controller.enqueue(E.chunk);break;case v:if((0,o.assert)(N,"close should have stream controller"),N.isClosed)break;N.isClosed=!0,N.controller.close(),this._deleteStreamController(N,M);break;case m:(0,o.assert)(N,"error should have stream controller"),N.controller.error(k(E.reason)),this._deleteStreamController(N,M);break;case g:E.success?N.cancelCall.resolve():N.cancelCall.reject(k(E.reason)),this._deleteStreamController(N,M);break;case w:if(!O)break;new Promise(function(F){F(O.onCancel&&O.onCancel(k(E.reason)))}).then(function(){I.postMessage({sourceName:T,targetName:D,stream:g,streamId:M,success:!0})},function(F){I.postMessage({sourceName:T,targetName:D,stream:g,streamId:M,reason:k(F)})}),O.sinkCapability.reject(k(E.reason)),O.isCancelled=!0,delete this.streamSinks[M];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:(S=_asyncToGenerator(_regeneratorRuntime().mark(function E(M,T){return _regeneratorRuntime().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,Promise.allSettled([M.startCall&&M.startCall.promise,M.pullCall&&M.pullCall.promise,M.cancelCall&&M.cancelCall.promise]);case 2:delete this.streamControllers[T];case 3:case"end":return D.stop()}},E,this)})),function(E,M){return S.apply(this,arguments)})},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]);var S}();n.MessageHandler=P},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var o=r(1),u=new WeakMap,s=new WeakMap,w=function(){return _createClass(function g(v){_classCallCheck(this,g),_classPrivateFieldInitSpec(this,u,void 0),_classPrivateFieldInitSpec(this,s,void 0);var y=v.parsedData,m=v.rawData;_classPrivateFieldSet2(u,this,y),_classPrivateFieldSet2(s,this,m)},[{key:"getRaw",value:function(){return _classPrivateFieldGet2(s,this)}},{key:"get",value:function(g){var v;return(v=_classPrivateFieldGet2(u,this).get(g))!==null&&v!==void 0?v:null}},{key:"getAll",value:function(){return(0,o.objectFromMap)(_classPrivateFieldGet2(u,this))}},{key:"has",value:function(g){return _classPrivateFieldGet2(u,this).has(g)}}])}();n.Metadata=w},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.OptionalContentConfig=void 0;var o=r(1),u=r(144);function s(I,N,O){w(I,N),N.set(I,O)}function w(I,N){if(N.has(I))throw new TypeError("Cannot initialize the same private elements twice on an object")}function g(I,N,O){if(!N.has(I))throw new TypeError("attempted to get private field on non-instance");return O}function v(I,N){return function(O,F){return F.get?F.get.call(O):F.value}(I,m(I,N,"get"))}function y(I,N,O){return function(F,U,Y){if(U.set)U.set.call(F,Y);else{if(!U.writable)throw new TypeError("attempted to set read only private field");U.value=Y}}(I,m(I,N,"set"),O),O}function m(I,N,O){if(!N.has(I))throw new TypeError("attempted to "+O+" private field on non-instance");return N.get(I)}var d=Symbol("INTERNAL"),f=new WeakMap,x=function(){return _createClass(function I(N,O){_classCallCheck(this,I),_classPrivateFieldInitSpec(this,f,!0),this.name=N,this.intent=O},[{key:"visible",get:function(){return _classPrivateFieldGet2(f,this)}},{key:"_setVisible",value:function(I,N){I!==d&&(0,o.unreachable)("Internal method `_setVisible` called."),_classPrivateFieldSet2(f,this,N)}}])}(),k=new WeakMap,P=new WeakMap,S=new WeakMap,E=new WeakMap,M=new WeakSet,T=function(){return _createClass(function I(N){var O,F;if(_classCallCheck(this,I),w(O=this,F=M),F.add(O),s(this,k,{writable:!0,value:null}),s(this,P,{writable:!0,value:new Map}),s(this,S,{writable:!0,value:null}),s(this,E,{writable:!0,value:null}),this.name=null,this.creator=null,N!==null){this.name=N.name,this.creator=N.creator,y(this,E,N.order);var U,Y=_createForOfIteratorHelper(N.groups);try{for(Y.s();!(U=Y.n()).done;){var Q=U.value;v(this,P).set(Q.id,new x(Q.name,Q.intent))}}catch(te){Y.e(te)}finally{Y.f()}if(N.baseState==="OFF"){var q,ne=_createForOfIteratorHelper(v(this,P).values());try{for(ne.s();!(q=ne.n()).done;)q.value._setVisible(d,!1)}catch(te){ne.e(te)}finally{ne.f()}}var J,re=_createForOfIteratorHelper(N.on);try{for(re.s();!(J=re.n()).done;){var X=J.value;v(this,P).get(X)._setVisible(d,!0)}}catch(te){re.e(te)}finally{re.f()}var j,Z=_createForOfIteratorHelper(N.off);try{for(Z.s();!(j=Z.n()).done;){var W=j.value;v(this,P).get(W)._setVisible(d,!1)}}catch(te){Z.e(te)}finally{Z.f()}y(this,S,this.getHash())}},[{key:"isVisible",value:function(I){if(v(this,P).size===0)return!0;if(!I)return(0,o.warn)("Optional content group not defined."),!0;if(I.type==="OCG")return v(this,P).has(I.id)?v(this,P).get(I.id).visible:((0,o.warn)("Optional content group not found: ".concat(I.id)),!0);if(I.type==="OCMD"){if(I.expression)return g(this,M,D).call(this,I.expression);if(!I.policy||I.policy==="AnyOn"){var N,O=_createForOfIteratorHelper(I.ids);try{for(O.s();!(N=O.n()).done;){var F=N.value;if(!v(this,P).has(F))return(0,o.warn)("Optional content group not found: ".concat(F)),!0;if(v(this,P).get(F).visible)return!0}}catch(Z){O.e(Z)}finally{O.f()}return!1}if(I.policy==="AllOn"){var U,Y=_createForOfIteratorHelper(I.ids);try{for(Y.s();!(U=Y.n()).done;){var Q=U.value;if(!v(this,P).has(Q))return(0,o.warn)("Optional content group not found: ".concat(Q)),!0;if(!v(this,P).get(Q).visible)return!1}}catch(Z){Y.e(Z)}finally{Y.f()}return!0}if(I.policy==="AnyOff"){var q,ne=_createForOfIteratorHelper(I.ids);try{for(ne.s();!(q=ne.n()).done;){var J=q.value;if(!v(this,P).has(J))return(0,o.warn)("Optional content group not found: ".concat(J)),!0;if(!v(this,P).get(J).visible)return!0}}catch(Z){ne.e(Z)}finally{ne.f()}return!1}if(I.policy==="AllOff"){var re,X=_createForOfIteratorHelper(I.ids);try{for(X.s();!(re=X.n()).done;){var j=re.value;if(!v(this,P).has(j))return(0,o.warn)("Optional content group not found: ".concat(j)),!0;if(v(this,P).get(j).visible)return!1}}catch(Z){X.e(Z)}finally{X.f()}return!0}return(0,o.warn)("Unknown optional content policy ".concat(I.policy,".")),!0}return(0,o.warn)("Unknown group type ".concat(I.type,".")),!0}},{key:"setVisibility",value:function(I){var N=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];v(this,P).has(I)?(v(this,P).get(I)._setVisible(d,!!N),y(this,k,null)):(0,o.warn)("Optional content group not found: ".concat(I))}},{key:"hasInitialVisibility",get:function(){return this.getHash()===v(this,S)}},{key:"getOrder",value:function(){return v(this,P).size?v(this,E)?v(this,E).slice():_toConsumableArray$1(v(this,P).keys()):null}},{key:"getGroups",value:function(){return v(this,P).size>0?(0,o.objectFromMap)(v(this,P)):null}},{key:"getGroup",value:function(I){return v(this,P).get(I)||null}},{key:"getHash",value:function(){if(v(this,k)!==null)return v(this,k);var I,N=new u.MurmurHash3_64,O=_createForOfIteratorHelper(v(this,P));try{for(O.s();!(I=O.n()).done;){var F=_slicedToArray(I.value,2),U=F[0],Y=F[1];N.update("".concat(U,":").concat(Y.visible))}}catch(Q){O.e(Q)}finally{O.f()}return y(this,k,N.hexdigest())}}])}();function D(I){var N=I.length;if(N<2)return!0;for(var O=I[0],F=1;F<N;F++){var U=I[F],Y=void 0;if(Array.isArray(U))Y=g(this,M,D).call(this,U);else{if(!v(this,P).has(U))return(0,o.warn)("Optional content group not found: ".concat(U)),!0;Y=v(this,P).get(U).visible}switch(O){case"And":if(!Y)return!1;break;case"Or":if(Y)return!0;break;case"Not":return!Y;default:return!0}}return O==="And"}n.OptionalContentConfig=T},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PDFDataTransportStream=void 0;var o=r(1),u=r(142),s=function(){return _createClass(function v(y,m){var d=this;_classCallCheck(this,v);var f=y.length,x=y.initialData,k=y.progressiveDone,P=k!==void 0&&k,S=y.contentDispositionFilename,E=S===void 0?null:S,M=y.disableRange,T=M!==void 0&&M,D=y.disableStream,I=D!==void 0&&D;if((0,o.assert)(m,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=P,this._contentDispositionFilename=E,(x==null?void 0:x.length)>0){var N=x instanceof Uint8Array&&x.byteLength===x.buffer.byteLength?x.buffer:new Uint8Array(x).buffer;this._queuedChunks.push(N)}this._pdfDataRangeTransport=m,this._isStreamingSupported=!I,this._isRangeSupported=!T,this._contentLength=f,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(function(O,F){d._onReceiveData({begin:O,chunk:F})}),this._pdfDataRangeTransport.addProgressListener(function(O,F){d._onProgress({loaded:O,total:F})}),this._pdfDataRangeTransport.addProgressiveReadListener(function(O){d._onReceiveData({chunk:O})}),this._pdfDataRangeTransport.addProgressiveDoneListener(function(){d._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()},[{key:"_onReceiveData",value:function(v){var y=v.begin,m=v.chunk,d=m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength?m.buffer:new Uint8Array(m).buffer;if(y===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(d):this._queuedChunks.push(d);else{var f=this._rangeReaders.some(function(x){return x._begin===y&&(x._enqueue(d),!0)});(0,o.assert)(f,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function(){var v,y;return(v=(y=this._fullRequestReader)===null||y===void 0?void 0:y._loaded)!==null&&v!==void 0?v:0}},{key:"_onProgress",value:function(v){var y,m,d,f;v.total===void 0?(y=this._rangeReaders[0])===null||y===void 0||(m=y.onProgress)===null||m===void 0||m.call(y,{loaded:v.loaded}):(d=this._fullRequestReader)===null||d===void 0||(f=d.onProgress)===null||f===void 0||f.call(d,{loaded:v.loaded,total:v.total})}},{key:"_onProgressiveDone",value:function(){var v;(v=this._fullRequestReader)===null||v===void 0||v.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(v){var y=this._rangeReaders.indexOf(v);y>=0&&this._rangeReaders.splice(y,1)}},{key:"getFullReader",value:function(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var v=this._queuedChunks;return this._queuedChunks=null,new w(this,v,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(v,y){if(y<=this._progressiveDataLength)return null;var m=new g(this,v,y);return this._pdfDataRangeTransport.requestDataRange(v,y),this._rangeReaders.push(m),m}},{key:"cancelAllRequests",value:function(v){var y;(y=this._fullRequestReader)===null||y===void 0||y.cancel(v);var m,d=_createForOfIteratorHelper(this._rangeReaders.slice(0));try{for(d.s();!(m=d.n()).done;)m.value.cancel(v)}catch(f){d.e(f)}finally{d.f()}this._pdfDataRangeTransport.abort()}}])}();n.PDFDataTransportStream=s;var w=function(){return _createClass(function y(m,d){_classCallCheck(this,y);var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=m,this._done=f||!1,this._filename=(0,u.isPdfFile)(x)?x:null,this._queuedChunks=d||[],this._loaded=0;var k,P=_createForOfIteratorHelper(this._queuedChunks);try{for(P.s();!(k=P.n()).done;){var S=k.value;this._loaded+=S.byteLength}}catch(E){P.e(E)}finally{P.f()}this._requests=[],this._headersReady=Promise.resolve(),m._fullRequestReader=this,this.onProgress=null},[{key:"_enqueue",value:function(y){this._done||(this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunks.push(y),this._loaded+=y.byteLength)}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var m,d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(this._queuedChunks.length>0)){f.next=3;break}return m=this._queuedChunks.shift(),f.abrupt("return",{value:m,done:!1});case 3:if(!this._done){f.next=5;break}return f.abrupt("return",{value:void 0,done:!0});case 5:return d=(0,o.createPromiseCapability)(),this._requests.push(d),f.abrupt("return",d.promise);case 8:case"end":return f.stop()}},y,this)})),function(){return v.apply(this,arguments)})},{key:"cancel",value:function(y){this._done=!0;var m,d=_createForOfIteratorHelper(this._requests);try{for(d.s();!(m=d.n()).done;)m.value.resolve({value:void 0,done:!0})}catch(f){d.e(f)}finally{d.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]);var v}(),g=function(){return _createClass(function y(m,d,f){_classCallCheck(this,y),this._stream=m,this._begin=d,this._end=f,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null},[{key:"_enqueue",value:function(y){if(!this._done){if(this._requests.length===0)this._queuedChunk=y;else{this._requests.shift().resolve({value:y,done:!1});var m,d=_createForOfIteratorHelper(this._requests);try{for(d.s();!(m=d.n()).done;)m.value.resolve({value:void 0,done:!0})}catch(f){d.e(f)}finally{d.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var m,d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!this._queuedChunk){f.next=4;break}return m=this._queuedChunk,this._queuedChunk=null,f.abrupt("return",{value:m,done:!1});case 4:if(!this._done){f.next=6;break}return f.abrupt("return",{value:void 0,done:!0});case 6:return d=(0,o.createPromiseCapability)(),this._requests.push(d),f.abrupt("return",d.promise);case 9:case"end":return f.stop()}},y,this)})),function(){return v.apply(this,arguments)})},{key:"cancel",value:function(y){this._done=!0;var m,d=_createForOfIteratorHelper(this._requests);try{for(d.s();!(m=d.n()).done;)m.value.resolve({value:void 0,done:!0})}catch(f){d.e(f)}finally{d.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]);var v}()},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.XfaText=void 0;var r=function(){function o(){_classCallCheck(this,o)}return _createClass(o,null,[{key:"textContent",value:function(u){var s=[],w={items:s,styles:Object.create(null)};return function g(v){var y;if(v){var m=null,d=v.name;if(d==="#text")m=v.value;else{if(!o.shouldBuildText(d))return;v!=null&&(y=v.attributes)!==null&&y!==void 0&&y.textContent?m=v.attributes.textContent:v.value&&(m=v.value)}if(m!==null&&s.push({str:m}),v.children){var f,x=_createForOfIteratorHelper(v.children);try{for(x.s();!(f=x.n()).done;)g(f.value)}catch(k){x.e(k)}finally{x.f()}}}}(u),w}},{key:"shouldBuildText",value:function(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}])}();n.XfaText=r},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.NodeStandardFontDataFactory=n.NodeFilterFactory=n.NodeCanvasFactory=n.NodeCMapReaderFactory=void 0;var o=r(143),u=function(y){return new Promise(function(m,d){require$$0.readFile(y,function(f,x){!f&&x?m(new Uint8Array(x)):d(new Error(f))})})},s=function(y){function m(){return _classCallCheck(this,m),_callSuper(this,m,arguments)}return _inherits(m,y),_createClass(m)}(o.BaseFilterFactory);n.NodeFilterFactory=s;var w=function(y){function m(){return _classCallCheck(this,m),_callSuper(this,m,arguments)}return _inherits(m,y),_createClass(m,[{key:"_createCanvas",value:function(d,f){return require$$0.createCanvas(d,f)}}])}(o.BaseCanvasFactory);n.NodeCanvasFactory=w;var g=function(y){function m(){return _classCallCheck(this,m),_callSuper(this,m,arguments)}return _inherits(m,y),_createClass(m,[{key:"_fetchData",value:function(d,f){return u(d).then(function(x){return{cMapData:x,compressionType:f}})}}])}(o.BaseCMapReaderFactory);n.NodeCMapReaderFactory=g;var v=function(y){function m(){return _classCallCheck(this,m),_callSuper(this,m,arguments)}return _inherits(m,y),_createClass(m,[{key:"_fetchData",value:function(d){return u(d)}}])}(o.BaseStandardFontDataFactory);n.NodeStandardFontDataFactory=v},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNodeStream=void 0;var o=r(1),u=r(157),s=require$$0,w=require$$0,g=require$$0,v=require$$0,y=/^file:\/\/\/[a-zA-Z]:\//,m=function(){return _createClass(function M(T){var D,I;_classCallCheck(this,M),this.source=T,this.url=(D=T.url,(I=v.parse(D)).protocol==="file:"||I.host?I:/^[a-z]:[/\\]/i.test(D)?v.parse("file:///".concat(D)):(I.host||(I.protocol="file:"),I)),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&T.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]},[{key:"_progressiveDataLength",get:function(){var M,T;return(M=(T=this._fullRequestReader)===null||T===void 0?void 0:T._loaded)!==null&&M!==void 0?M:0}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new S(this):new k(this),this._fullRequestReader}},{key:"getRangeReader",value:function(M,T){if(T<=this._progressiveDataLength)return null;var D=this.isFsUrl?new E(this,M,T):new P(this,M,T);return this._rangeRequestReaders.push(D),D}},{key:"cancelAllRequests",value:function(M){var T;(T=this._fullRequestReader)===null||T===void 0||T.cancel(M);var D,I=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(I.s();!(D=I.n()).done;)D.value.cancel(M)}catch(N){I.e(N)}finally{I.f()}}}])}();n.PDFNodeStream=m;var d=function(){return _createClass(function T(D){_classCallCheck(this,T),this._url=D.url,this._done=!1,this._storedError=null,this.onProgress=null;var I=D.source;this._contentLength=I.length,this._loaded=0,this._filename=null,this._disableRange=I.disableRange||!1,this._rangeChunkSize=I.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!I.disableStream,this._isRangeSupported=!I.disableRange,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._headersCapability=(0,o.createPromiseCapability)()},[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(M=_asyncToGenerator(_regeneratorRuntime().mark(function T(){var D,I,N;return _regeneratorRuntime().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this._readCapability.promise;case 2:if(!this._done){O.next=4;break}return O.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){O.next=6;break}throw this._storedError;case 6:if((I=this._readableStream.read())!==null){O.next=10;break}return this._readCapability=(0,o.createPromiseCapability)(),O.abrupt("return",this.read());case 10:return this._loaded+=I.length,(D=this.onProgress)===null||D===void 0||D.call(this,{loaded:this._loaded,total:this._contentLength}),N=new Uint8Array(I).buffer,O.abrupt("return",{value:N,done:!1});case 14:case"end":return O.stop()}},T,this)})),function(){return M.apply(this,arguments)})},{key:"cancel",value:function(T){this._readableStream?this._readableStream.destroy(T):this._error(T)}},{key:"_error",value:function(T){this._storedError=T,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(T){var D=this;this._readableStream=T,T.on("readable",function(){D._readCapability.resolve()}),T.on("end",function(){T.destroy(),D._done=!0,D._readCapability.resolve()}),T.on("error",function(I){D._error(I)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]);var M}(),f=function(){return _createClass(function T(D){_classCallCheck(this,T),this._url=D.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)();var I=D.source;this._isStreamingSupported=!I.disableStream},[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(M=_asyncToGenerator(_regeneratorRuntime().mark(function T(){var D,I,N;return _regeneratorRuntime().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this._readCapability.promise;case 2:if(!this._done){O.next=4;break}return O.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){O.next=6;break}throw this._storedError;case 6:if((I=this._readableStream.read())!==null){O.next=10;break}return this._readCapability=(0,o.createPromiseCapability)(),O.abrupt("return",this.read());case 10:return this._loaded+=I.length,(D=this.onProgress)===null||D===void 0||D.call(this,{loaded:this._loaded}),N=new Uint8Array(I).buffer,O.abrupt("return",{value:N,done:!1});case 14:case"end":return O.stop()}},T,this)})),function(){return M.apply(this,arguments)})},{key:"cancel",value:function(T){this._readableStream?this._readableStream.destroy(T):this._error(T)}},{key:"_error",value:function(T){this._storedError=T,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(T){var D=this;this._readableStream=T,T.on("readable",function(){D._readCapability.resolve()}),T.on("end",function(){T.destroy(),D._done=!0,D._readCapability.resolve()}),T.on("error",function(I){D._error(I)}),this._storedError&&this._readableStream.destroy(this._storedError)}}]);var M}();function x(M,T){return{protocol:M.protocol,auth:M.auth,host:M.hostname,port:M.port,path:M.path,method:"GET",headers:T}}var k=function(M){function T(D){var I;_classCallCheck(this,T);var N=function(O){if(O.statusCode===404){var F=new o.MissingPDFException('Missing PDF "'.concat(I._url,'".'));return I._storedError=F,void I._headersCapability.reject(F)}I._headersCapability.resolve(),I._setReadableStream(O);var U=function(ne){return I._readableStream.headers[ne.toLowerCase()]},Y=(0,u.validateRangeRequestCapabilities)({getResponseHeader:U,isHttp:D.isHttp,rangeChunkSize:I._rangeChunkSize,disableRange:I._disableRange}),Q=Y.allowRangeRequests,q=Y.suggestedLength;I._isRangeSupported=Q,I._contentLength=q||I._contentLength,I._filename=(0,u.extractFilenameFromHeader)(U)};return(I=_callSuper(this,T,[D]))._request=null,I._url.protocol==="http:"?I._request=w.request(x(I._url,D.httpHeaders),N):I._request=g.request(x(I._url,D.httpHeaders),N),I._request.on("error",function(O){I._storedError=O,I._headersCapability.reject(O)}),I._request.end(),I}return _inherits(T,M),_createClass(T)}(d),P=function(M){function T(D,I,N){var O;for(var F in _classCallCheck(this,T),(O=_callSuper(this,T,[D]))._httpHeaders={},D.httpHeaders){var U=D.httpHeaders[F];U!==void 0&&(O._httpHeaders[F]=U)}O._httpHeaders.Range="bytes=".concat(I,"-").concat(N-1);var Y=function(Q){if(Q.statusCode!==404)O._setReadableStream(Q);else{var q=new o.MissingPDFException('Missing PDF "'.concat(O._url,'".'));O._storedError=q}};return O._request=null,O._url.protocol==="http:"?O._request=w.request(x(O._url,O._httpHeaders),Y):O._request=g.request(x(O._url,O._httpHeaders),Y),O._request.on("error",function(Q){O._storedError=Q}),O._request.end(),O}return _inherits(T,M),_createClass(T)}(f),S=function(M){function T(D){var I;_classCallCheck(this,T),I=_callSuper(this,T,[D]);var N=decodeURIComponent(I._url.path);return y.test(I._url.href)&&(N=N.replace(/^\//,"")),s.lstat(N,function(O,F){if(O)return O.code==="ENOENT"&&(O=new o.MissingPDFException('Missing PDF "'.concat(N,'".'))),I._storedError=O,void I._headersCapability.reject(O);I._contentLength=F.size,I._setReadableStream(s.createReadStream(N)),I._headersCapability.resolve()}),I}return _inherits(T,M),_createClass(T)}(d),E=function(M){function T(D,I,N){var O;_classCallCheck(this,T),O=_callSuper(this,T,[D]);var F=decodeURIComponent(O._url.path);return y.test(O._url.href)&&(F=F.replace(/^\//,"")),O._setReadableStream(s.createReadStream(F,{start:I,end:N-1})),O}return _inherits(T,M),_createClass(T)}(f)},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.createResponseStatusError=function(w,g){return w===404||w===0&&g.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+g+'".'):new o.UnexpectedResponseException("Unexpected server response (".concat(w,') while retrieving PDF "').concat(g,'".'),w)},n.extractFilenameFromHeader=function(w){var g=w("Content-Disposition");if(g){var v=(0,u.getFilenameFromContentDispositionHeader)(g);if(v.includes("%"))try{v=decodeURIComponent(v)}catch{}if((0,s.isPdfFile)(v))return v}return null},n.validateRangeRequestCapabilities=function(w){var g=w.getResponseHeader,v=w.isHttp,y=w.rangeChunkSize,m=w.disableRange,d={allowRangeRequests:!1,suggestedLength:void 0},f=parseInt(g("Content-Length"),10);return Number.isInteger(f)&&(d.suggestedLength=f,f<=2*y||m||!v||g("Accept-Ranges")!=="bytes"||(g("Content-Encoding")||"identity")!=="identity"||(d.allowRangeRequests=!0)),d},n.validateResponseStatus=function(w){return w===200||w===206};var o=r(1),u=r(158),s=r(142)},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=function(u){var s=!0,w=y("filename\\*","i").exec(u);if(w){var g=f(w=w[1]);return d(g=k(g=x(g=unescape(g))))}if(w=function(P){for(var S,E=[],M=y("filename\\*((?!0\\d)\\d+)(\\*?)","ig");(S=M.exec(P))!==null;){var T=_slicedToArray(S,4),D=T[1],I=T[2],N=T[3];if((D=parseInt(D,10))in E){if(D===0)break}else E[D]=[I,N]}for(var O=[],F=0;F<E.length&&F in E;++F){var U=_slicedToArray(E[F],2),Y=U[0],Q=U[1];Q=f(Q),Y&&(Q=unescape(Q),F===0&&(Q=x(Q))),O.push(Q)}return O.join("")}(u))return d(k(w));if(w=y("filename","i").exec(u)){var v=f(w=w[1]);return d(v=k(v))}function y(P,S){return new RegExp("(?:^|;)\\s*"+P+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',S)}function m(P,S){if(P){if(!/^[\x00-\xFF]+$/.test(S))return S;try{var E=new TextDecoder(P,{fatal:!0}),M=(0,o.stringToBytes)(S);S=E.decode(M),s=!1}catch{}}return S}function d(P){return s&&/[\x80-\xff]/.test(P)&&(P=m("utf-8",P),s&&(P=m("iso-8859-1",P))),P}function f(P){if(P.startsWith('"')){for(var S=P.slice(1).split('\\"'),E=0;E<S.length;++E){var M=S[E].indexOf('"');M!==-1&&(S[E]=S[E].slice(0,M),S.length=E+1),S[E]=S[E].replaceAll(/\\(.)/g,"$1")}P=S.join('"')}return P}function x(P){var S=P.indexOf("'");return S===-1?P:m(P.slice(0,S),P.slice(S+1).replace(/^[^']*'/,""))}function k(P){return!P.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(P)?P:P.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(S,E,M,T){if(M==="q"||M==="Q")return m(E,T=(T=T.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(D,I){return String.fromCharCode(parseInt(I,16))}));try{T=atob(T)}catch{}return m(E,T)})}return""};var o=r(1)},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNetworkStream=void 0;var o=r(1),u=r(157),s=function(){return _createClass(function y(m){_classCallCheck(this,y);var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=m,this.isHttp=/^https?:/i.test(m),this.httpHeaders=this.isHttp&&d.httpHeaders||Object.create(null),this.withCredentials=d.withCredentials||!1,this.getXhr=d.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)},[{key:"requestRange",value:function(y,m,d){var f={begin:y,end:m};for(var x in d)f[x]=d[x];return this.request(f)}},{key:"requestFull",value:function(y){return this.request(y)}},{key:"request",value:function(y){var m=this.getXhr(),d=this.currXhrId++,f=this.pendingRequests[d]={xhr:m};for(var x in m.open("GET",this.url),m.withCredentials=this.withCredentials,this.httpHeaders){var k=this.httpHeaders[x];k!==void 0&&m.setRequestHeader(x,k)}return this.isHttp&&"begin"in y&&"end"in y?(m.setRequestHeader("Range","bytes=".concat(y.begin,"-").concat(y.end-1)),f.expectedStatus=206):f.expectedStatus=200,m.responseType="arraybuffer",y.onError&&(m.onerror=function(P){y.onError(m.status)}),m.onreadystatechange=this.onStateChange.bind(this,d),m.onprogress=this.onProgress.bind(this,d),f.onHeadersReceived=y.onHeadersReceived,f.onDone=y.onDone,f.onError=y.onError,f.onProgress=y.onProgress,m.send(null),d}},{key:"onProgress",value:function(y,m){var d,f=this.pendingRequests[y];f&&((d=f.onProgress)===null||d===void 0||d.call(f,m))}},{key:"onStateChange",value:function(y,m){var d=this.pendingRequests[y];if(d){var f=d.xhr;if(f.readyState>=2&&d.onHeadersReceived&&(d.onHeadersReceived(),delete d.onHeadersReceived),f.readyState===4&&y in this.pendingRequests)if(delete this.pendingRequests[y],f.status===0&&this.isHttp){var x;(x=d.onError)===null||x===void 0||x.call(d,f.status)}else{var k=f.status||200;if(k===200&&d.expectedStatus===206||k===d.expectedStatus){var P=function(D){var I=D.response;return typeof I!="string"?I:(0,o.stringToBytes)(I).buffer}(f);if(k===206){var S=f.getResponseHeader("Content-Range"),E=/bytes (\d+)-(\d+)\/(\d+)/.exec(S);d.onDone({begin:parseInt(E[1],10),chunk:P})}else if(P)d.onDone({begin:0,chunk:P});else{var M;(M=d.onError)===null||M===void 0||M.call(d,f.status)}}else{var T;(T=d.onError)===null||T===void 0||T.call(d,f.status)}}}}},{key:"getRequestXhr",value:function(y){return this.pendingRequests[y].xhr}},{key:"isPendingRequest",value:function(y){return y in this.pendingRequests}},{key:"abortRequest",value:function(y){var m=this.pendingRequests[y].xhr;delete this.pendingRequests[y],m.abort()}}])}(),w=function(){return _createClass(function y(m){_classCallCheck(this,y),this._source=m,this._manager=new s(m.url,{httpHeaders:m.httpHeaders,withCredentials:m.withCredentials}),this._rangeChunkSize=m.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]},[{key:"_onRangeRequestReaderClosed",value:function(y){var m=this._rangeRequestReaders.indexOf(y);m>=0&&this._rangeRequestReaders.splice(m,1)}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(y,m){var d=new v(this._manager,y,m);return d.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(d),d}},{key:"cancelAllRequests",value:function(y){var m;(m=this._fullRequestReader)===null||m===void 0||m.cancel(y);var d,f=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(f.s();!(d=f.n()).done;)d.value.cancel(y)}catch(x){f.e(x)}finally{f.f()}}}])}();n.PDFNetworkStream=w;var g=function(){return _createClass(function m(d,f){_classCallCheck(this,m),this._manager=d;var x={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._fullRequestId=d.requestFull(x),this._headersReceivedCapability=(0,o.createPromiseCapability)(),this._disableRange=f.disableRange||!1,this._contentLength=f.length,this._rangeChunkSize=f.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null},[{key:"_onHeadersReceived",value:function(){var m=this._fullRequestId,d=this._manager.getRequestXhr(m),f=function(S){return d.getResponseHeader(S)},x=(0,u.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),k=x.allowRangeRequests,P=x.suggestedLength;k&&(this._isRangeSupported=!0),this._contentLength=P||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(f),this._isRangeSupported&&this._manager.abortRequest(m),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(m){if(m&&(this._requests.length>0?this._requests.shift().resolve({value:m.chunk,done:!1}):this._cachedChunks.push(m.chunk)),this._done=!0,!(this._cachedChunks.length>0)){var d,f=_createForOfIteratorHelper(this._requests);try{for(f.s();!(d=f.n()).done;)d.value.resolve({value:void 0,done:!0})}catch(x){f.e(x)}finally{f.f()}this._requests.length=0}}},{key:"_onError",value:function(m){this._storedError=(0,u.createResponseStatusError)(m,this._url),this._headersReceivedCapability.reject(this._storedError);var d,f=_createForOfIteratorHelper(this._requests);try{for(f.s();!(d=f.n()).done;)d.value.reject(this._storedError)}catch(x){f.e(x)}finally{f.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(m){var d;(d=this.onProgress)===null||d===void 0||d.call(this,{loaded:m.loaded,total:m.lengthComputable?m.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function m(){var d,f;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!this._storedError){x.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){x.next=5;break}return d=this._cachedChunks.shift(),x.abrupt("return",{value:d,done:!1});case 5:if(!this._done){x.next=7;break}return x.abrupt("return",{value:void 0,done:!0});case 7:return f=(0,o.createPromiseCapability)(),this._requests.push(f),x.abrupt("return",f.promise);case 10:case"end":return x.stop()}},m,this)})),function(){return y.apply(this,arguments)})},{key:"cancel",value:function(m){this._done=!0,this._headersReceivedCapability.reject(m);var d,f=_createForOfIteratorHelper(this._requests);try{for(f.s();!(d=f.n()).done;)d.value.resolve({value:void 0,done:!0})}catch(x){f.e(x)}finally{f.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]);var y}(),v=function(){return _createClass(function m(d,f,x){_classCallCheck(this,m),this._manager=d;var k={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=d.url,this._requestId=d.requestRange(f,x,k),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null},[{key:"_close",value:function(){var m;(m=this.onClosed)===null||m===void 0||m.call(this,this)}},{key:"_onDone",value:function(m){var d=m.chunk;this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunk=d,this._done=!0;var f,x=_createForOfIteratorHelper(this._requests);try{for(x.s();!(f=x.n()).done;)f.value.resolve({value:void 0,done:!0})}catch(k){x.e(k)}finally{x.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(m){this._storedError=(0,u.createResponseStatusError)(m,this._url);var d,f=_createForOfIteratorHelper(this._requests);try{for(f.s();!(d=f.n()).done;)d.value.reject(this._storedError)}catch(x){f.e(x)}finally{f.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(m){var d;this.isStreamingSupported||(d=this.onProgress)===null||d===void 0||d.call(this,{loaded:m.loaded})}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function m(){var d,f;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!this._storedError){x.next=2;break}throw this._storedError;case 2:if(this._queuedChunk===null){x.next=6;break}return d=this._queuedChunk,this._queuedChunk=null,x.abrupt("return",{value:d,done:!1});case 6:if(!this._done){x.next=8;break}return x.abrupt("return",{value:void 0,done:!0});case 8:return f=(0,o.createPromiseCapability)(),this._requests.push(f),x.abrupt("return",f.promise);case 11:case"end":return x.stop()}},m,this)})),function(){return y.apply(this,arguments)})},{key:"cancel",value:function(m){this._done=!0;var d,f=_createForOfIteratorHelper(this._requests);try{for(f.s();!(d=f.n()).done;)d.value.resolve({value:void 0,done:!0})}catch(x){f.e(x)}finally{f.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]);var y}()},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.PDFFetchStream=void 0;var o=r(1),u=r(157);function s(d,f,x){return{method:"GET",headers:d,signal:x.signal,mode:"cors",credentials:f?"include":"same-origin",redirect:"follow"}}function w(d){var f=new Headers;for(var x in d){var k=d[x];k!==void 0&&f.append(x,k)}return f}function g(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:((0,o.warn)("getArrayBuffer - unexpected data format: ".concat(d)),new Uint8Array(d).buffer)}var v=function(){return _createClass(function d(f){_classCallCheck(this,d),this.source=f,this.isHttp=/^https?:/i.test(f.url),this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]},[{key:"_progressiveDataLength",get:function(){var d,f;return(d=(f=this._fullRequestReader)===null||f===void 0?void 0:f._loaded)!==null&&d!==void 0?d:0}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new y(this),this._fullRequestReader}},{key:"getRangeReader",value:function(d,f){if(f<=this._progressiveDataLength)return null;var x=new m(this,d,f);return this._rangeRequestReaders.push(x),x}},{key:"cancelAllRequests",value:function(d){var f;(f=this._fullRequestReader)===null||f===void 0||f.cancel(d);var x,k=_createForOfIteratorHelper(this._rangeRequestReaders.slice(0));try{for(k.s();!(x=k.n()).done;)x.value.cancel(d)}catch(P){k.e(P)}finally{k.f()}}}])}();n.PDFFetchStream=v;var y=function(){return _createClass(function f(x){var k=this;_classCallCheck(this,f),this._stream=x,this._reader=null,this._loaded=0,this._filename=null;var P=x.source;this._withCredentials=P.withCredentials||!1,this._contentLength=P.length,this._headersCapability=(0,o.createPromiseCapability)(),this._disableRange=P.disableRange||!1,this._rangeChunkSize=P.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._headers=w(this._stream.httpHeaders);var S=P.url;fetch(S,s(this._headers,this._withCredentials,this._abortController)).then(function(E){if(!(0,u.validateResponseStatus)(E.status))throw(0,u.createResponseStatusError)(E.status,S);k._reader=E.body.getReader(),k._headersCapability.resolve();var M=function(N){return E.headers.get(N)},T=(0,u.validateRangeRequestCapabilities)({getResponseHeader:M,isHttp:k._stream.isHttp,rangeChunkSize:k._rangeChunkSize,disableRange:k._disableRange}),D=T.allowRangeRequests,I=T.suggestedLength;k._isRangeSupported=D,k._contentLength=I||k._contentLength,k._filename=(0,u.extractFilenameFromHeader)(M),!k._isStreamingSupported&&k._isRangeSupported&&k.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null},[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function f(){var x,k,P,S;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this._headersCapability.promise;case 2:return E.next=4,this._reader.read();case 4:if(k=E.sent,P=k.value,!(S=k.done)){E.next=9;break}return E.abrupt("return",{value:P,done:S});case 9:return this._loaded+=P.byteLength,(x=this.onProgress)===null||x===void 0||x.call(this,{loaded:this._loaded,total:this._contentLength}),E.abrupt("return",{value:g(P),done:!1});case 12:case"end":return E.stop()}},f,this)})),function(){return d.apply(this,arguments)})},{key:"cancel",value:function(f){var x;(x=this._reader)===null||x===void 0||x.cancel(f),this._abortController.abort()}}]);var d}(),m=function(){return _createClass(function f(x,k,P){var S=this;_classCallCheck(this,f),this._stream=x,this._reader=null,this._loaded=0;var E=x.source;this._withCredentials=E.withCredentials||!1,this._readCapability=(0,o.createPromiseCapability)(),this._isStreamingSupported=!E.disableStream,this._abortController=new AbortController,this._headers=w(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(k,"-").concat(P-1));var M=E.url;fetch(M,s(this._headers,this._withCredentials,this._abortController)).then(function(T){if(!(0,u.validateResponseStatus)(T.status))throw(0,u.createResponseStatusError)(T.status,M);S._readCapability.resolve(),S._reader=T.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null},[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function f(){var x,k,P,S;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this._readCapability.promise;case 2:return E.next=4,this._reader.read();case 4:if(k=E.sent,P=k.value,!(S=k.done)){E.next=9;break}return E.abrupt("return",{value:P,done:S});case 9:return this._loaded+=P.byteLength,(x=this.onProgress)===null||x===void 0||x.call(this,{loaded:this._loaded}),E.abrupt("return",{value:g(P),done:!1});case 12:case"end":return E.stop()}},f,this)})),function(){return d.apply(this,arguments)})},{key:"cancel",value:function(f){var x;(x=this._reader)===null||x===void 0||x.cancel(f),this._abortController.abort()}}]);var d}()},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.TextLayerRenderTask=void 0,n.renderTextLayer=function(f){f.textContentSource||!f.textContent&&!f.textContentStream||((0,u.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),f.textContentSource=f.textContent||f.textContentStream);var x=f.container,k=f.viewport,P=getComputedStyle(x),S=P.getPropertyValue("visibility"),E=parseFloat(P.getPropertyValue("--scale-factor"));S==="visible"&&(!E||Math.abs(E-k.scale)>1e-15)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");var M=new d(f);return M._render(),M},n.updateTextLayer=function(f){var x=f.container,k=f.viewport,P=f.textDivs,S=f.textDivProperties,E=f.isOffscreenCanvasSupported,M=f.mustRotate,T=M===void 0||M,D=f.mustRescale,I=D===void 0||D;if(T&&(0,u.setLayerDimensions)(x,{rotation:k.rotation}),I){var N,O=v(0,E),F={prevFontSize:null,prevFontFamily:null,div:null,scale:k.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:O},U=_createForOfIteratorHelper(P);try{for(U.s();!(N=U.n()).done;){var Y=N.value;F.properties=S.get(Y),F.div=Y,m(F)}}catch(Q){U.e(Q)}finally{U.f()}}};var o=r(1),u=r(142),s=30,w=.8,g=new Map;function v(f,x){var k;if(x&&o.FeatureTest.isOffscreenCanvasSupported)k=new OffscreenCanvas(f,f).getContext("2d",{alpha:!1});else{var P=document.createElement("canvas");P.width=P.height=f,k=P.getContext("2d",{alpha:!1})}return k}function y(f,x,k){var P=document.createElement("span"),S={angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,fontSize:0};f._textDivs.push(P);var E=o.Util.transform(f._transform,x.transform),M=Math.atan2(E[1],E[0]),T=k[x.fontName];T.vertical&&(M+=Math.PI/2);var D,I,N=Math.hypot(E[2],E[3]),O=N*function(ne,J){var re=g.get(ne);if(re)return re;var X=v(s,J);X.font="".concat(s,"px ").concat(ne);var j=X.measureText(""),Z=j.fontBoundingBoxAscent,W=Math.abs(j.fontBoundingBoxDescent);if(Z){var te=Z/(Z+W);return g.set(ne,te),X.canvas.width=X.canvas.height=0,te}X.strokeStyle="red",X.clearRect(0,0,s,s),X.strokeText("g",0,0);var le=X.getImageData(0,0,s,s).data;W=0;for(var oe=le.length-1-3;oe>=0;oe-=4)if(le[oe]>0){W=Math.ceil(oe/4/s);break}X.clearRect(0,0,s,s),X.strokeText("A",0,s),Z=0;for(var Ee=0,Ae=(le=X.getImageData(0,0,s,s).data).length;Ee<Ae;Ee+=4)if(le[Ee]>0){Z=s-Math.floor(Ee/4/s);break}if(X.canvas.width=X.canvas.height=0,Z){var ve=Z/(Z+W);return g.set(ne,ve),ve}return g.set(ne,w),w}(T.fontFamily,f._isOffscreenCanvasSupported);M===0?(D=E[4],I=E[5]-O):(D=E[4]+O*Math.sin(M),I=E[5]-O*Math.cos(M));var F="calc(var(--scale-factor)*",U=P.style;f._container===f._rootContainer?(U.left="".concat((100*D/f._pageWidth).toFixed(2),"%"),U.top="".concat((100*I/f._pageHeight).toFixed(2),"%")):(U.left="".concat(F).concat(D.toFixed(2),"px)"),U.top="".concat(F).concat(I.toFixed(2),"px)")),U.fontSize="".concat(F).concat(N.toFixed(2),"px)"),U.fontFamily=T.fontFamily,S.fontSize=N,P.setAttribute("role","presentation"),P.textContent=x.str,P.dir=x.dir,f._fontInspectorEnabled&&(P.dataset.fontName=x.fontName),M!==0&&(S.angle=M*(180/Math.PI));var Y=!1;if(x.str.length>1)Y=!0;else if(x.str!==" "&&x.transform[0]!==x.transform[3]){var Q=Math.abs(x.transform[0]),q=Math.abs(x.transform[3]);Q!==q&&Math.max(Q,q)/Math.min(Q,q)>1.5&&(Y=!0)}Y&&(S.canvasWidth=T.vertical?x.height:x.width),f._textDivProperties.set(P,S),f._isReadableStream&&f._layoutText(P)}function m(f){var x=f.div,k=f.scale,P=f.properties,S=f.ctx,E=f.prevFontSize,M=f.prevFontFamily,T=x.style,D="";if(P.canvasWidth!==0&&P.hasText){var I=T.fontFamily,N=P.canvasWidth,O=P.fontSize;E===O&&M===I||(S.font="".concat(O*k,"px ").concat(I),f.prevFontSize=O,f.prevFontFamily=I);var F=S.measureText(x.textContent).width;F>0&&(D="scaleX(".concat(N*k/F,")"))}P.angle!==0&&(D="rotate(".concat(P.angle,"deg) ").concat(D)),D.length>0&&(T.transform=D)}var d=function(){return _createClass(function f(x){var k,P=this;_classCallCheck(this,f);var S=x.textContentSource,E=x.container,M=x.viewport,T=x.textDivs,D=x.textDivProperties,I=x.textContentItemsStr,N=x.isOffscreenCanvasSupported;this._textContentSource=S,this._isReadableStream=S instanceof ReadableStream,this._container=this._rootContainer=E,this._textDivs=T||[],this._textContentItemsStr=I||[],this._isOffscreenCanvasSupported=N,this._fontInspectorEnabled=!((k=globalThis.FontInspector)===null||k===void 0||!k.enabled),this._reader=null,this._textDivProperties=D||new WeakMap,this._canceled=!1,this._capability=(0,o.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:M.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:v(0,N)};var O=M.rawDims,F=O.pageWidth,U=O.pageHeight,Y=O.pageX,Q=O.pageY;this._transform=[1,0,0,-1,-Y,Q+U],this._pageWidth=F,this._pageHeight=U,(0,u.setLayerDimensions)(E,M),this._capability.promise.finally(function(){P._layoutTextParams=null}).catch(function(){})},[{key:"promise",get:function(){return this._capability.promise}},{key:"cancel",value:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(function(){}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}},{key:"_processItems",value:function(f,x){var k,P=_createForOfIteratorHelper(f);try{for(P.s();!(k=P.n()).done;){var S=k.value;if(S.str!==void 0)this._textContentItemsStr.push(S.str),y(this,S,x);else if(S.type==="beginMarkedContentProps"||S.type==="beginMarkedContent"){var E=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),S.id!==null&&this._container.setAttribute("id","".concat(S.id)),E.append(this._container)}else S.type==="endMarkedContent"&&(this._container=this._container.parentNode)}}catch(M){P.e(M)}finally{P.f()}}},{key:"_layoutText",value:function(f){var x=this._layoutTextParams.properties=this._textDivProperties.get(f);if(this._layoutTextParams.div=f,m(this._layoutTextParams),x.hasText&&this._container.append(f),x.hasEOL){var k=document.createElement("br");k.setAttribute("role","presentation"),this._container.append(k)}}},{key:"_render",value:function(){var f=this,x=(0,o.createPromiseCapability)(),k=Object.create(null);if(this._isReadableStream)this._reader=this._textContentSource.getReader(),function M(){f._reader.read().then(function(T){var D=T.value;T.done?x.resolve():(Object.assign(k,D.styles),f._processItems(D.items,k),M())},x.reject)}();else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');var P=this._textContentSource,S=P.items,E=P.styles;this._processItems(S,E),x.resolve()}x.promise.then(function(){k=null,function(M){if(!M._canceled){var T=M._textDivs,D=M._capability;if(T.length>1e5)D.resolve();else{if(!M._isReadableStream){var I,N=_createForOfIteratorHelper(T);try{for(N.s();!(I=N.n()).done;){var O=I.value;M._layoutText(O)}}catch(F){N.e(F)}finally{N.f()}}D.resolve()}}}(f)},this._capability.reject)}}])}();n.TextLayerRenderTask=d},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditorLayer=void 0;var o=r(1),u=r(141),s=r(163),w=r(164),g=r(142);function v(X,j){m(X,j),j.add(X)}function y(X,j,Z){m(X,j),j.set(X,Z)}function m(X,j){if(j.has(X))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(X,j,Z){if(!j.has(X))throw new TypeError("attempted to get private field on non-instance");return Z}function f(X,j){return function(Z,W){return W.get?W.get.call(Z):W.value}(X,k(X,j,"get"))}function x(X,j,Z){return function(W,te,le){if(te.set)te.set.call(W,le);else{if(!te.writable)throw new TypeError("attempted to set read only private field");te.value=le}}(X,k(X,j,"set"),Z),Z}function k(X,j,Z){if(!j.has(X))throw new TypeError("attempted to "+Z+" private field on non-instance");return j.get(X)}var P=new WeakMap,S=new WeakMap,E=new WeakMap,M=new WeakMap,T=new WeakMap,D=new WeakMap,I=new WeakMap,N=new WeakMap,O=new WeakSet,F=new WeakSet,U=new WeakSet,Y=new WeakSet,Q=function(){return _createClass(function X(j){_classCallCheck(this,X),v(this,Y),v(this,U),v(this,F),v(this,O),y(this,P,{writable:!0,value:void 0}),y(this,S,{writable:!0,value:!1}),y(this,E,{writable:!0,value:this.pointerup.bind(this)}),y(this,M,{writable:!0,value:this.pointerdown.bind(this)}),y(this,T,{writable:!0,value:new Map}),y(this,D,{writable:!0,value:!1}),y(this,I,{writable:!0,value:!1}),y(this,N,{writable:!0,value:void 0}),X._initialized||(X._initialized=!0,s.FreeTextEditor.initialize(j.l10n),w.InkEditor.initialize(j.l10n)),j.uiManager.registerEditorTypes([s.FreeTextEditor,w.InkEditor]),x(this,N,j.uiManager),this.pageIndex=j.pageIndex,this.div=j.div,x(this,P,j.accessibilityManager),f(this,N).addLayer(this)},[{key:"isEmpty",get:function(){return f(this,T).size===0}},{key:"updateToolbar",value:function(X){f(this,N).updateToolbar(X)}},{key:"updateMode",value:function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f(this,N).getMode();d(this,Y,re).call(this),X===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),f(this,N).unselectAll(),X!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",X===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",X===o.AnnotationEditorType.INK),this.div.hidden=!1)}},{key:"addInkEditorIfNeeded",value:function(X){if(X||f(this,N).getMode()===o.AnnotationEditorType.INK){if(!X){var j,Z=_createForOfIteratorHelper(f(this,T).values());try{for(Z.s();!(j=Z.n()).done;){var W=j.value;if(W.isEmpty())return void W.setInBackground()}}catch(te){Z.e(te)}finally{Z.f()}}d(this,U,J).call(this,{offsetX:0,offsetY:0}).setInBackground()}}},{key:"setEditingState",value:function(X){f(this,N).setEditingState(X)}},{key:"addCommands",value:function(X){f(this,N).addCommands(X)}},{key:"enable",value:function(){this.div.style.pointerEvents="auto";var X,j=_createForOfIteratorHelper(f(this,T).values());try{for(j.s();!(X=j.n()).done;)X.value.enableEditing()}catch(Z){j.e(Z)}finally{j.f()}}},{key:"disable",value:function(){this.div.style.pointerEvents="none";var X,j=_createForOfIteratorHelper(f(this,T).values());try{for(j.s();!(X=j.n()).done;)X.value.disableEditing()}catch(Z){j.e(Z)}finally{j.f()}d(this,Y,re).call(this),this.isEmpty&&(this.div.hidden=!0)}},{key:"setActiveEditor",value:function(X){f(this,N).getActive()!==X&&f(this,N).setActiveEditor(X)}},{key:"enableClick",value:function(){this.div.addEventListener("pointerdown",f(this,M)),this.div.addEventListener("pointerup",f(this,E))}},{key:"disableClick",value:function(){this.div.removeEventListener("pointerdown",f(this,M)),this.div.removeEventListener("pointerup",f(this,E))}},{key:"attach",value:function(X){f(this,T).set(X.id,X)}},{key:"detach",value:function(X){var j;f(this,T).delete(X.id),(j=f(this,P))===null||j===void 0||j.removePointerInTextLayer(X.contentDiv)}},{key:"remove",value:function(X){var j=this;f(this,N).removeEditor(X),this.detach(X),X.div.style.display="none",setTimeout(function(){X.div.style.display="",X.div.remove(),X.isAttachedToDOM=!1,document.activeElement===document.body&&f(j,N).focusMainContainer()},0),f(this,I)||this.addInkEditorIfNeeded(!1)}},{key:"add",value:function(X){if(d(this,O,q).call(this,X),f(this,N).addEditor(X),this.attach(X),!X.isAttachedToDOM){var j=X.render();this.div.append(j),X.isAttachedToDOM=!0}this.moveEditorInDOM(X),X.onceAdded(),f(this,N).addToAnnotationStorage(X)}},{key:"moveEditorInDOM",value:function(X){var j;(j=f(this,P))===null||j===void 0||j.moveElementInDOM(this.div,X.div,X.contentDiv,!0)}},{key:"addOrRebuild",value:function(X){X.needsToBeRebuilt()?X.rebuild():this.add(X)}},{key:"addANewEditor",value:function(X){var j=this;this.addCommands({cmd:function(){j.addOrRebuild(X)},undo:function(){X.remove()},mustExec:!0})}},{key:"addUndoableEditor",value:function(X){var j=this;this.addCommands({cmd:function(){j.addOrRebuild(X)},undo:function(){X.remove()},mustExec:!1})}},{key:"getNextId",value:function(){return f(this,N).getId()}},{key:"deserialize",value:function(X){switch(X.annotationType){case o.AnnotationEditorType.FREETEXT:return s.FreeTextEditor.deserialize(X,this,f(this,N));case o.AnnotationEditorType.INK:return w.InkEditor.deserialize(X,this,f(this,N))}return null}},{key:"setSelected",value:function(X){f(this,N).setSelected(X)}},{key:"toggleSelected",value:function(X){f(this,N).toggleSelected(X)}},{key:"isSelected",value:function(X){return f(this,N).isSelected(X)}},{key:"unselect",value:function(X){f(this,N).unselect(X)}},{key:"pointerup",value:function(X){var j=o.FeatureTest.platform.isMac;X.button!==0||X.ctrlKey&&j||X.target===this.div&&f(this,D)&&(x(this,D,!1),f(this,S)?d(this,U,J).call(this,X):x(this,S,!0))}},{key:"pointerdown",value:function(X){var j=o.FeatureTest.platform.isMac;if(!(X.button!==0||X.ctrlKey&&j)&&X.target===this.div){x(this,D,!0);var Z=f(this,N).getActive();x(this,S,!Z||Z.isEmpty())}}},{key:"drop",value:function(X){var j=X.dataTransfer.getData("text/plain"),Z=f(this,N).getEditor(j);if(Z){X.preventDefault(),X.dataTransfer.dropEffect="move",d(this,O,q).call(this,Z);var W=this.div.getBoundingClientRect(),te=X.clientX-W.x,le=X.clientY-W.y;Z.translate(te-Z.startX,le-Z.startY),this.moveEditorInDOM(Z),Z.div.focus()}}},{key:"dragover",value:function(X){X.preventDefault()}},{key:"destroy",value:function(){var X;((X=f(this,N).getActive())===null||X===void 0?void 0:X.parent)===this&&f(this,N).setActiveEditor(null);var j,Z=_createForOfIteratorHelper(f(this,T).values());try{for(Z.s();!(j=Z.n()).done;){var W,te=j.value;(W=f(this,P))===null||W===void 0||W.removePointerInTextLayer(te.contentDiv),te.setParent(null),te.isAttachedToDOM=!1,te.div.remove()}}catch(le){Z.e(le)}finally{Z.f()}this.div=null,f(this,T).clear(),f(this,N).removeLayer(this)}},{key:"render",value:function(X){var j=X.viewport;this.viewport=j,(0,g.setLayerDimensions)(this.div,j),(0,u.bindEvents)(this,this.div,["dragover","drop"]);var Z,W=_createForOfIteratorHelper(f(this,N).getEditors(this.pageIndex));try{for(W.s();!(Z=W.n()).done;){var te=Z.value;this.add(te)}}catch(le){W.e(le)}finally{W.f()}this.updateMode()}},{key:"update",value:function(X){var j=X.viewport;f(this,N).commitOrRemove(),this.viewport=j,(0,g.setLayerDimensions)(this.div,{rotation:j.rotation}),this.updateMode()}},{key:"pageDimensions",get:function(){var X=this.viewport.rawDims;return[X.pageWidth,X.pageHeight]}}])}();function q(X){var j;X.parent!==this&&(this.attach(X),(j=X.parent)===null||j===void 0||j.detach(X),X.setParent(this),X.div&&X.isAttachedToDOM&&(X.div.remove(),this.div.append(X.div)))}function ne(X){switch(f(this,N).getMode()){case o.AnnotationEditorType.FREETEXT:return new s.FreeTextEditor(X);case o.AnnotationEditorType.INK:return new w.InkEditor(X)}return null}function J(X){var j=this.getNextId(),Z=d(this,F,ne).call(this,{parent:this,id:j,x:X.offsetX,y:X.offsetY,uiManager:f(this,N)});return Z&&this.add(Z),Z}function re(){x(this,I,!0);var X,j=_createForOfIteratorHelper(f(this,T).values());try{for(j.s();!(X=j.n()).done;){var Z=X.value;Z.isEmpty()&&Z.remove()}}catch(W){j.e(W)}finally{j.f()}x(this,I,!1)}n.AnnotationEditorLayer=Q,function(X,j,Z){(j=function(W){var te=function(le,oe){if(_typeof$1(le)!=="object"||le===null)return le;var Ee=le[Symbol.toPrimitive];if(Ee!==void 0){var Ae=Ee.call(le,oe||"default");if(_typeof$1(Ae)!=="object")return Ae;throw new TypeError("@@toPrimitive must return a primitive value.")}return(oe==="string"?String:Number)(le)}(W,"string");return _typeof$1(te)==="symbol"?te:String(te)}(j))in X?Object.defineProperty(X,j,{value:Z,enumerable:!0,configurable:!0,writable:!0}):X[j]=Z}(Q,"_initialized",!1)},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FreeTextEditor=void 0;var o=r(1),u=r(141),s=r(140);function w(X,j){y(X,j),j.add(X)}function g(X,j,Z){return(j=function(W){var te=function(le,oe){if(_typeof$1(le)!=="object"||le===null)return le;var Ee=le[Symbol.toPrimitive];if(Ee!==void 0){var Ae=Ee.call(le,oe||"default");if(_typeof$1(Ae)!=="object")return Ae;throw new TypeError("@@toPrimitive must return a primitive value.")}return(oe==="string"?String:Number)(le)}(W,"string");return _typeof$1(te)==="symbol"?te:String(te)}(j))in X?Object.defineProperty(X,j,{value:Z,enumerable:!0,configurable:!0,writable:!0}):X[j]=Z,X}function v(X,j,Z){y(X,j),j.set(X,Z)}function y(X,j){if(j.has(X))throw new TypeError("Cannot initialize the same private elements twice on an object")}function m(X,j){return function(Z,W){return W.get?W.get.call(Z):W.value}(X,x(X,j,"get"))}function d(X,j,Z){if(!j.has(X))throw new TypeError("attempted to get private field on non-instance");return Z}function f(X,j,Z){return function(W,te,le){if(te.set)te.set.call(W,le);else{if(!te.writable)throw new TypeError("attempted to set read only private field");te.value=le}}(X,x(X,j,"set"),Z),Z}function x(X,j,Z){if(!j.has(X))throw new TypeError("attempted to "+Z+" private field on non-instance");return j.get(X)}var k=new WeakMap,P=new WeakMap,S=new WeakMap,E=new WeakMap,M=new WeakMap,T=new WeakMap,D=new WeakMap,I=new WeakMap,N=new WeakMap,O=new WeakSet,F=new WeakSet,U=new WeakSet,Y=new WeakSet,Q=function(X){function j(Z){var W;return _classCallCheck(this,j),w(W=_callSuper(this,j,[_objectSpread2$1(_objectSpread2$1({},Z),{},{name:"freeTextEditor"})]),Y),w(W,U),w(W,F),w(W,O),v(W,k,{writable:!0,value:W.editorDivBlur.bind(W)}),v(W,P,{writable:!0,value:W.editorDivFocus.bind(W)}),v(W,S,{writable:!0,value:W.editorDivInput.bind(W)}),v(W,E,{writable:!0,value:W.editorDivKeydown.bind(W)}),v(W,M,{writable:!0,value:void 0}),v(W,T,{writable:!0,value:""}),v(W,D,{writable:!0,value:"".concat(W.id,"-editor")}),v(W,I,{writable:!0,value:!1}),v(W,N,{writable:!0,value:void 0}),f(W,M,Z.color||j._defaultColor||s.AnnotationEditor._defaultLineColor),f(W,N,Z.fontSize||j._defaultFontSize),W}return _inherits(j,X),_createClass(j,[{key:"updateParams",value:function(Z,W){switch(Z){case o.AnnotationEditorParamsType.FREETEXT_SIZE:d(this,O,q).call(this,W);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:d(this,F,ne).call(this,W)}}},{key:"propertiesToUpdate",get:function(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,m(this,N)],[o.AnnotationEditorParamsType.FREETEXT_COLOR,m(this,M)]]}},{key:"getInitialTranslation",value:function(){var Z=this.parentScale;return[-j._internalPadding*Z,-(j._internalPadding+m(this,N))*Z]}},{key:"rebuild",value:function(){_get(_getPrototypeOf(j.prototype),"rebuild",this).call(this),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}},{key:"enableEditMode",value:function(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),_get(_getPrototypeOf(j.prototype),"enableEditMode",this).call(this),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",m(this,E)),this.editorDiv.addEventListener("focus",m(this,P)),this.editorDiv.addEventListener("blur",m(this,k)),this.editorDiv.addEventListener("input",m(this,S)))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&(this.parent.setEditingState(!0),_get(_getPrototypeOf(j.prototype),"disableEditMode",this).call(this),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",m(this,D)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",m(this,E)),this.editorDiv.removeEventListener("focus",m(this,P)),this.editorDiv.removeEventListener("blur",m(this,k)),this.editorDiv.removeEventListener("input",m(this,S)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}},{key:"focusin",value:function(Z){_get(_getPrototypeOf(j.prototype),"focusin",this).call(this,Z),Z.target!==this.editorDiv&&this.editorDiv.focus()}},{key:"onceAdded",value:function(){this.width||(this.enableEditMode(),this.editorDiv.focus())}},{key:"isEmpty",value:function(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}},{key:"remove",value:function(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),_get(_getPrototypeOf(j.prototype),"remove",this).call(this)}},{key:"commit",value:function(){this.isInEditMode()&&(_get(_getPrototypeOf(j.prototype),"commit",this).call(this),m(this,I)||(f(this,I,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),f(this,T,d(this,U,J).call(this).trimEnd()),d(this,Y,re).call(this))}},{key:"shouldGetKeyboardEvents",value:function(){return this.isInEditMode()}},{key:"dblclick",value:function(Z){this.enableEditMode(),this.editorDiv.focus()}},{key:"keydown",value:function(Z){Z.target===this.div&&Z.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}},{key:"editorDivKeydown",value:function(Z){j._keyboardManager.exec(this,Z)}},{key:"editorDivFocus",value:function(Z){this.isEditing=!0}},{key:"editorDivBlur",value:function(Z){this.isEditing=!1}},{key:"editorDivInput",value:function(Z){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}},{key:"disableEditing",value:function(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"render",value:function(){var Z,W,te=this;if(this.div)return this.div;this.width&&(Z=this.x,W=this.y),_get(_getPrototypeOf(j.prototype),"render",this).call(this),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",m(this,D)),this.enableEditing(),j._l10nPromise.get("editor_free_text2_aria_label").then(function(Me){var Le;return(Le=te.editorDiv)===null||Le===void 0?void 0:Le.setAttribute("aria-label",Me)}),j._l10nPromise.get("free_text2_default_content").then(function(Me){var Le;return(Le=te.editorDiv)===null||Le===void 0?void 0:Le.setAttribute("default-content",Me)}),this.editorDiv.contentEditable=!0;var le=this.editorDiv.style;if(le.fontSize="calc(".concat(m(this,N),"px * var(--scale-factor))"),le.color=m(this,M),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){var oe=_slicedToArray(this.parentDimensions,2),Ee=oe[0],Ae=oe[1];this.setAt(Z*Ee,W*Ae,this.width*Ee,this.height*Ae);var ve,ke=_createForOfIteratorHelper(m(this,T).split(`
`));try{for(ke.s();!(ve=ke.n()).done;){var Ce=ve.value,Pe=document.createElement("div");Pe.append(Ce?document.createTextNode(Ce):document.createElement("br")),this.editorDiv.append(Pe)}}catch(Me){ke.e(Me)}finally{ke.f()}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}},{key:"contentDiv",get:function(){return this.editorDiv}},{key:"serialize",value:function(){if(this.isEmpty())return null;var Z=j._internalPadding*this.parentScale,W=this.getRect(Z,Z),te=s.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:m(this,M));return{annotationType:o.AnnotationEditorType.FREETEXT,color:te,fontSize:m(this,N),value:m(this,T),pageIndex:this.pageIndex,rect:W,rotation:this.rotation}}}],[{key:"initialize",value:function(Z){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(function(te){return[te,Z.get(te)]}));var W=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(W.getPropertyValue("--freetext-padding"))}},{key:"updateDefaultParams",value:function(Z,W){switch(Z){case o.AnnotationEditorParamsType.FREETEXT_SIZE:j._defaultFontSize=W;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:j._defaultColor=W}}},{key:"defaultPropertiesToUpdate",get:function(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,j._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,j._defaultColor||s.AnnotationEditor._defaultLineColor]]}},{key:"deserialize",value:function(Z,W,te){var le,oe=_get(_getPrototypeOf(j),"deserialize",this).call(this,Z,W,te);return f(oe,N,Z.fontSize),f(oe,M,(le=o.Util).makeHexColor.apply(le,_toConsumableArray$1(Z.color))),f(oe,T,Z.value),oe}}])}(s.AnnotationEditor);function q(X){var j=this,Z=function(te){j.editorDiv.style.fontSize="calc(".concat(te,"px * var(--scale-factor))"),j.translate(0,-(te-m(j,N))*j.parentScale),f(j,N,te),d(j,Y,re).call(j)},W=m(this,N);this.addCommands({cmd:function(){Z(X)},undo:function(){Z(W)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function ne(X){var j=this,Z=m(this,M);this.addCommands({cmd:function(){f(j,M,j.editorDiv.style.color=X)},undo:function(){f(j,M,j.editorDiv.style.color=Z)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function J(){var X=this.editorDiv.getElementsByTagName("div");if(X.length===0)return this.editorDiv.innerText;var j,Z=[],W=_createForOfIteratorHelper(X);try{for(W.s();!(j=W.n()).done;){var te=j.value;Z.push(te.innerText.replace(/\r\n?|\n/,""))}}catch(le){W.e(le)}finally{W.f()}return Z.join(`
`)}function re(){var X,j=_slicedToArray(this.parentDimensions,2),Z=j[0],W=j[1];if(this.isAttachedToDOM)X=this.div.getBoundingClientRect();else{var te=this.currentLayer,le=this.div,oe=le.style.display;le.style.display="hidden",te.div.append(this.div),X=le.getBoundingClientRect(),le.remove(),le.style.display=oe}this.width=X.width/Z,this.height=X.height/W}n.FreeTextEditor=Q,g(Q,"_freeTextDefaultContent",""),g(Q,"_l10nPromise",void 0),g(Q,"_internalPadding",0),g(Q,"_defaultColor",null),g(Q,"_defaultFontSize",10),g(Q,"_keyboardManager",new u.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Q.prototype.commitOrRemove]])),g(Q,"_type","freetext")},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.InkEditor=void 0,Object.defineProperty(n,"fitCurve",{enumerable:!0,get:function(){return s.fitCurve}});var o=r(1),u=r(140),s=r(165),w=r(141);function g(Qe,at){m(Qe,at),at.add(Qe)}function v(Qe,at,rt){return(at=function(ct){var ht=function(yt,bt){if(_typeof$1(yt)!=="object"||yt===null)return yt;var $t=yt[Symbol.toPrimitive];if($t!==void 0){var At=$t.call(yt,bt||"default");if(_typeof$1(At)!=="object")return At;throw new TypeError("@@toPrimitive must return a primitive value.")}return(bt==="string"?String:Number)(yt)}(ct,"string");return _typeof$1(ht)==="symbol"?ht:String(ht)}(at))in Qe?Object.defineProperty(Qe,at,{value:rt,enumerable:!0,configurable:!0,writable:!0}):Qe[at]=rt,Qe}function y(Qe,at,rt){m(Qe,at),at.set(Qe,rt)}function m(Qe,at){if(at.has(Qe))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(Qe,at,rt){return function(ct,ht){if(ct!==ht)throw new TypeError("Private static access of wrong provenance")}(Qe,at),rt}function f(Qe,at,rt){return function(ct,ht,yt){if(ht.set)ht.set.call(ct,yt);else{if(!ht.writable)throw new TypeError("attempted to set read only private field");ht.value=yt}}(Qe,k(Qe,at,"set"),rt),rt}function x(Qe,at){return function(rt,ct){return ct.get?ct.get.call(rt):ct.value}(Qe,k(Qe,at,"get"))}function k(Qe,at,rt){if(!at.has(Qe))throw new TypeError("attempted to "+rt+" private field on non-instance");return at.get(Qe)}function P(Qe,at,rt){if(!at.has(Qe))throw new TypeError("attempted to get private field on non-instance");return rt}var S=16,E=new WeakMap,M=new WeakMap,T=new WeakMap,D=new WeakMap,I=new WeakMap,N=new WeakMap,O=new WeakMap,F=new WeakMap,U=new WeakMap,Y=new WeakMap,Q=new WeakMap,q=new WeakMap,ne=new WeakMap,J=new WeakMap,re=new WeakSet,X=new WeakSet,j=new WeakSet,Z=new WeakSet,W=new WeakSet,te=new WeakSet,le=new WeakSet,oe=new WeakSet,Ee=new WeakSet,Ae=new WeakSet,ve=new WeakSet,ke=new WeakSet,Ce=new WeakSet,Pe=new WeakSet,Me=new WeakSet,Le=new WeakSet,Te=new WeakSet,ye=new WeakSet,_e=new WeakSet,we=new WeakSet,Se=new WeakSet,$e=new WeakSet,Be=function(Qe){function at(rt){var ct;return _classCallCheck(this,at),g(ct=_callSuper(this,at,[_objectSpread2$1(_objectSpread2$1({},rt),{},{name:"inkEditor"})]),$e),g(ct,Se),g(ct,we),g(ct,_e),g(ct,ye),g(ct,Te),g(ct,Le),g(ct,Me),g(ct,Pe),g(ct,Ce),g(ct,ke),g(ct,ve),g(ct,Ae),g(ct,Ee),g(ct,oe),g(ct,le),g(ct,te),g(ct,W),g(ct,Z),g(ct,j),g(ct,X),g(ct,re),y(ct,E,{writable:!0,value:0}),y(ct,M,{writable:!0,value:0}),y(ct,T,{writable:!0,value:0}),y(ct,D,{writable:!0,value:ct.canvasPointermove.bind(ct)}),y(ct,I,{writable:!0,value:ct.canvasPointerleave.bind(ct)}),y(ct,N,{writable:!0,value:ct.canvasPointerup.bind(ct)}),y(ct,O,{writable:!0,value:ct.canvasPointerdown.bind(ct)}),y(ct,F,{writable:!0,value:!1}),y(ct,U,{writable:!0,value:!1}),y(ct,Y,{writable:!0,value:null}),y(ct,Q,{writable:!0,value:null}),y(ct,q,{writable:!0,value:0}),y(ct,ne,{writable:!0,value:0}),y(ct,J,{writable:!0,value:null}),ct.color=rt.color||null,ct.thickness=rt.thickness||null,ct.opacity=rt.opacity||null,ct.paths=[],ct.bezierPath2D=[],ct.currentPath=[],ct.scaleFactor=1,ct.translationX=ct.translationY=0,ct.x=0,ct.y=0,ct}return _inherits(at,Qe),_createClass(at,[{key:"updateParams",value:function(rt,ct){switch(rt){case o.AnnotationEditorParamsType.INK_THICKNESS:P(this,re,Oe).call(this,ct);break;case o.AnnotationEditorParamsType.INK_COLOR:P(this,X,Ge).call(this,ct);break;case o.AnnotationEditorParamsType.INK_OPACITY:P(this,j,Ie).call(this,ct)}}},{key:"propertiesToUpdate",get:function(){var rt;return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||at._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||at._defaultColor||u.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((rt=this.opacity)!==null&&rt!==void 0?rt:at._defaultOpacity))]]}},{key:"rebuild",value:function(){_get(_getPrototypeOf(at.prototype),"rebuild",this).call(this),this.div!==null&&(this.canvas||(P(this,ve,gt).call(this),P(this,ke,_t).call(this)),this.isAttachedToDOM||(this.parent.add(this),P(this,Ce,wt).call(this)),P(this,Se,Ze).call(this))}},{key:"remove",value:function(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,x(this,Q).disconnect(),f(this,Q,null),_get(_getPrototypeOf(at.prototype),"remove",this).call(this))}},{key:"setParent",value:function(rt){!this.parent&&rt?this._uiManager.removeShouldRescale(this):this.parent&&rt===null&&this._uiManager.addShouldRescale(this),_get(_getPrototypeOf(at.prototype),"setParent",this).call(this,rt)}},{key:"onScaleChanging",value:function(){var rt=_slicedToArray(this.parentDimensions,2),ct=rt[0],ht=rt[1],yt=this.width*ct,bt=this.height*ht;this.setDimensions(yt,bt)}},{key:"enableEditMode",value:function(){x(this,F)||this.canvas===null||(_get(_getPrototypeOf(at.prototype),"enableEditMode",this).call(this),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",x(this,O)),this.canvas.addEventListener("pointerup",x(this,N)))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&this.canvas!==null&&(_get(_getPrototypeOf(at.prototype),"disableEditMode",this).call(this),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",x(this,O)),this.canvas.removeEventListener("pointerup",x(this,N)))}},{key:"onceAdded",value:function(){this.div.draggable=!this.isEmpty()}},{key:"isEmpty",value:function(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}},{key:"commit",value:function(){x(this,F)||(_get(_getPrototypeOf(at.prototype),"commit",this).call(this),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),f(this,F,!0),this.div.classList.add("disabled"),P(this,Se,Ze).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}},{key:"focusin",value:function(rt){_get(_getPrototypeOf(at.prototype),"focusin",this).call(this,rt),this.enableEditMode()}},{key:"canvasPointerdown",value:function(rt){rt.button===0&&this.isInEditMode()&&!x(this,F)&&(this.setInForeground(),rt.type!=="mouse"&&this.div.focus(),rt.stopPropagation(),this.canvas.addEventListener("pointerleave",x(this,I)),this.canvas.addEventListener("pointermove",x(this,D)),P(this,te,Ue).call(this,rt.offsetX,rt.offsetY))}},{key:"canvasPointermove",value:function(rt){rt.stopPropagation(),P(this,le,Je).call(this,rt.offsetX,rt.offsetY)}},{key:"canvasPointerup",value:function(rt){rt.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(rt.stopPropagation(),P(this,Ae,st).call(this,rt),this.setInBackground())}},{key:"canvasPointerleave",value:function(rt){P(this,Ae,st).call(this,rt),this.setInBackground()}},{key:"render",value:function(){var rt,ct,ht=this;if(this.div)return this.div;this.width&&(rt=this.x,ct=this.y),_get(_getPrototypeOf(at.prototype),"render",this).call(this),at._l10nPromise.get("editor_ink2_aria_label").then(function(pt){var xt;return(xt=ht.div)===null||xt===void 0?void 0:xt.setAttribute("aria-label",pt)});var yt=_slicedToArray(P(this,Z,je).call(this),4),bt=yt[0],$t=yt[1],At=yt[2],Ft=yt[3];if(this.setAt(bt,$t,0,0),this.setDims(At,Ft),P(this,ve,gt).call(this),this.width){var Ht=_slicedToArray(this.parentDimensions,2),Ot=Ht[0],Mt=Ht[1];this.setAt(rt*Ot,ct*Mt,this.width*Ot,this.height*Mt),f(this,U,!0),P(this,Ce,wt).call(this),this.setDims(this.width*Ot,this.height*Mt),P(this,Ee,nt).call(this),P(this,$e,ot).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return P(this,ke,_t).call(this),this.div}},{key:"setDimensions",value:function(rt,ct){var ht=Math.round(rt),yt=Math.round(ct);if(x(this,q)!==ht||x(this,ne)!==yt){f(this,q,ht),f(this,ne,yt),this.canvas.style.visibility="hidden",x(this,E)&&Math.abs(x(this,E)-rt/ct)>.01&&(ct=Math.ceil(rt/x(this,E)),this.setDims(rt,ct));var bt=_slicedToArray(this.parentDimensions,2),$t=bt[0],At=bt[1];this.width=rt/$t,this.height=ct/At,x(this,F)&&P(this,Pe,He).call(this,rt,ct),P(this,Ce,wt).call(this),P(this,Ee,nt).call(this),this.canvas.style.visibility="visible",this.fixDims()}}},{key:"serialize",value:function(){if(this.isEmpty())return null;var rt=this.getRect(0,0),ct=this.rotation%180==0?rt[3]-rt[1]:rt[2]-rt[0],ht=u.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:ht,thickness:this.thickness,opacity:this.opacity,paths:P(this,Le,Ne).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ct),pageIndex:this.pageIndex,rect:rt,rotation:this.rotation}}}],[{key:"initialize",value:function(rt){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(function(ct){return[ct,rt.get(ct)]}))}},{key:"updateDefaultParams",value:function(rt,ct){switch(rt){case o.AnnotationEditorParamsType.INK_THICKNESS:at._defaultThickness=ct;break;case o.AnnotationEditorParamsType.INK_COLOR:at._defaultColor=ct;break;case o.AnnotationEditorParamsType.INK_OPACITY:at._defaultOpacity=ct/100}}},{key:"defaultPropertiesToUpdate",get:function(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,at._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,at._defaultColor||u.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*at._defaultOpacity)]]}},{key:"deserialize",value:function(rt,ct,ht){var yt,bt=_get(_getPrototypeOf(at),"deserialize",this).call(this,rt,ct,ht);bt.thickness=rt.thickness,bt.color=(yt=o.Util).makeHexColor.apply(yt,_toConsumableArray$1(rt.color)),bt.opacity=rt.opacity;var $t=_slicedToArray(bt.pageDimensions,2),At=$t[0],Ft=$t[1],Ht=bt.width*At,Ot=bt.height*Ft,Mt=bt.parentScale,pt=rt.thickness/2;f(bt,E,Ht/Ot),f(bt,F,!0),f(bt,q,Math.round(Ht)),f(bt,ne,Math.round(Ot));var xt,Tt=_createForOfIteratorHelper(rt.paths);try{for(Tt.s();!(xt=Tt.n()).done;){var Ct=xt.value.bezier,Nt=[];bt.paths.push(Nt);for(var jt=Mt*(Ct[0]-pt),nn=Mt*(Ot-Ct[1]-pt),Wt=2,cn=Ct.length;Wt<cn;Wt+=6){var Ln=Mt*(Ct[Wt]-pt),Pn=Mt*(Ot-Ct[Wt+1]-pt),Bn=Mt*(Ct[Wt+2]-pt),zn=Mt*(Ot-Ct[Wt+3]-pt),Yn=Mt*(Ct[Wt+4]-pt),Ii=Mt*(Ot-Ct[Wt+5]-pt);Nt.push([[jt,nn],[Ln,Pn],[Bn,zn],[Yn,Ii]]),jt=Yn,nn=Ii}var ui=d(this,at,ze).call(this,Nt);bt.bezierPath2D.push(ui)}}catch(yi){Tt.e(yi)}finally{Tt.f()}var $i=P(bt,_e,Ye).call(bt);return f(bt,T,Math.max(S,$i[2]-$i[0])),f(bt,M,Math.max(S,$i[3]-$i[1])),P(bt,Pe,He).call(bt,Ht,Ot),bt}}])}(u.AnnotationEditor);function Oe(Qe){var at=this,rt=this.thickness;this.addCommands({cmd:function(){at.thickness=Qe,P(at,Se,Ze).call(at)},undo:function(){at.thickness=rt,P(at,Se,Ze).call(at)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function Ge(Qe){var at=this,rt=this.color;this.addCommands({cmd:function(){at.color=Qe,P(at,Ee,nt).call(at)},undo:function(){at.color=rt,P(at,Ee,nt).call(at)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Ie(Qe){var at=this;Qe/=100;var rt=this.opacity;this.addCommands({cmd:function(){at.opacity=Qe,P(at,Ee,nt).call(at)},undo:function(){at.opacity=rt,P(at,Ee,nt).call(at)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function je(){var Qe=this.parentRotation,at=_slicedToArray(this.parentDimensions,2),rt=at[0],ct=at[1];switch(Qe){case 90:return[0,ct,ct,rt];case 180:return[rt,ct,rt,ct];case 270:return[rt,0,ct,rt];default:return[0,0,rt,ct]}}function qe(){var Qe=this.ctx,at=this.color,rt=this.opacity,ct=this.thickness,ht=this.parentScale,yt=this.scaleFactor;Qe.lineWidth=ct*ht/yt,Qe.lineCap="round",Qe.lineJoin="round",Qe.miterLimit=10,Qe.strokeStyle="".concat(at).concat((0,w.opacityToHex)(rt))}function Ue(Qe,at){var rt,ct=this;this.isEditing=!0,x(this,U)||(f(this,U,!0),P(this,Ce,wt).call(this),this.thickness||(this.thickness=Be._defaultThickness),this.color||(this.color=Be._defaultColor||u.AnnotationEditor._defaultLineColor),(rt=this.opacity)!==null&&rt!==void 0||(this.opacity=Be._defaultOpacity)),this.currentPath.push([Qe,at]),f(this,Y,null),P(this,W,qe).call(this),this.ctx.beginPath(),this.ctx.moveTo(Qe,at),f(this,J,function(){var ht;x(ct,J)&&(x(ct,Y)&&(ct.isEmpty()?(ct.ctx.setTransform(1,0,0,1,0,0),ct.ctx.clearRect(0,0,ct.canvas.width,ct.canvas.height)):P(ct,Ee,nt).call(ct),(ht=ct.ctx).lineTo.apply(ht,_toConsumableArray$1(x(ct,Y))),f(ct,Y,null),ct.ctx.stroke()),window.requestAnimationFrame(x(ct,J)))}),window.requestAnimationFrame(x(this,J))}function Je(Qe,at){var rt=_slicedToArray(this.currentPath.at(-1),2),ct=rt[0],ht=rt[1];Qe===ct&&at===ht||(this.currentPath.push([Qe,at]),f(this,Y,[Qe,at]))}function et(Qe,at){var rt=this;this.ctx.closePath(),f(this,J,null),Qe=Math.min(Math.max(Qe,0),this.canvas.width),at=Math.min(Math.max(at,0),this.canvas.height);var ct,ht=_slicedToArray(this.currentPath.at(-1),2),yt=ht[0],bt=ht[1];if(Qe===yt&&at===bt||this.currentPath.push([Qe,at]),this.currentPath.length!==1)ct=(0,s.fitCurve)(this.currentPath,30,null);else{var $t=[Qe,at];ct=[[$t,$t.slice(),$t.slice(),$t]]}var At=d(Be,Be,ze).call(Be,ct);this.currentPath.length=0,this.addCommands({cmd:function(){rt.paths.push(ct),rt.bezierPath2D.push(At),rt.rebuild()},undo:function(){rt.paths.pop(),rt.bezierPath2D.pop(),rt.paths.length===0?rt.remove():(rt.canvas||(P(rt,ve,gt).call(rt),P(rt,ke,_t).call(rt)),P(rt,Se,Ze).call(rt))},mustExec:!0})}function nt(){if(this.isEmpty())P(this,Me,Ve).call(this);else{P(this,W,qe).call(this);var Qe=this.canvas,at=this.ctx;at.setTransform(1,0,0,1,0,0),at.clearRect(0,0,Qe.width,Qe.height),P(this,Me,Ve).call(this);var rt,ct=_createForOfIteratorHelper(this.bezierPath2D);try{for(ct.s();!(rt=ct.n()).done;){var ht=rt.value;at.stroke(ht)}}catch(yt){ct.e(yt)}finally{ct.f()}}}function st(Qe){P(this,oe,et).call(this,Qe.offsetX,Qe.offsetY),this.canvas.removeEventListener("pointerleave",x(this,I)),this.canvas.removeEventListener("pointermove",x(this,D)),this.addToAnnotationStorage()}function gt(){var Qe=this;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Be._l10nPromise.get("editor_ink_canvas_aria_label").then(function(at){var rt;return(rt=Qe.canvas)===null||rt===void 0?void 0:rt.setAttribute("aria-label",at)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function _t(){var Qe=this;f(this,Q,new ResizeObserver(function(at){var rt=at[0].contentRect;rt.width&&rt.height&&Qe.setDimensions(rt.width,rt.height)})),x(this,Q).observe(this.div)}function wt(){if(x(this,U)){var Qe=_slicedToArray(this.parentDimensions,2),at=Qe[0],rt=Qe[1];this.canvas.width=Math.ceil(this.width*at),this.canvas.height=Math.ceil(this.height*rt),P(this,Me,Ve).call(this)}}function He(Qe,at){var rt=P(this,we,Ke).call(this),ct=(Qe-rt)/x(this,T),ht=(at-rt)/x(this,M);this.scaleFactor=Math.min(ct,ht)}function Ve(){var Qe=P(this,we,Ke).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Qe,this.translationY*this.scaleFactor+Qe)}function ze(Qe){for(var at=new Path2D,rt=0,ct=Qe.length;rt<ct;rt++){var ht=_slicedToArray(Qe[rt],4),yt=ht[0],bt=ht[1],$t=ht[2],At=ht[3];rt===0&&at.moveTo.apply(at,_toConsumableArray$1(yt)),at.bezierCurveTo(bt[0],bt[1],$t[0],$t[1],At[0],At[1])}return at}function Ne(Qe,at,rt,ct){var ht,yt,bt,$t=[],At=this.thickness/2,Ft=_createForOfIteratorHelper(this.paths);try{for(Ft.s();!(bt=Ft.n()).done;){var Ht=bt.value;ht=[],yt=[];for(var Ot=0,Mt=Ht.length;Ot<Mt;Ot++){var pt=_slicedToArray(Ht[Ot],4),xt=pt[0],Tt=pt[1],Ct=pt[2],Nt=pt[3],jt=Qe*(xt[0]+at)+At,nn=ct-Qe*(xt[1]+rt)-At,Wt=Qe*(Tt[0]+at)+At,cn=ct-Qe*(Tt[1]+rt)-At,Ln=Qe*(Ct[0]+at)+At,Pn=ct-Qe*(Ct[1]+rt)-At,Bn=Qe*(Nt[0]+at)+At,zn=ct-Qe*(Nt[1]+rt)-At;Ot===0&&(ht.push(jt,nn),yt.push(jt,nn)),ht.push(Wt,cn,Ln,Pn,Bn,zn),P(this,Te,We).call(this,jt,nn,Wt,cn,Ln,Pn,Bn,zn,4,yt)}$t.push({bezier:ht,points:yt})}}catch(Yn){Ft.e(Yn)}finally{Ft.f()}return $t}function We(Qe,at,rt,ct,ht,yt,bt,$t,At,Ft){if(P(this,ye,Fe).call(this,Qe,at,rt,ct,ht,yt,bt,$t))Ft.push(bt,$t);else{for(var Ht=1;Ht<At-1;Ht++){var Ot=Ht/At,Mt=1-Ot,pt=Ot*Qe+Mt*rt,xt=Ot*at+Mt*ct,Tt=Ot*rt+Mt*ht,Ct=Ot*ct+Mt*yt;pt=Ot*(pt=Ot*pt+Mt*Tt)+Mt*(Tt=Ot*Tt+Mt*(Ot*ht+Mt*bt)),xt=Ot*(xt=Ot*xt+Mt*Ct)+Mt*(Ct=Ot*Ct+Mt*(Ot*yt+Mt*$t)),Ft.push(pt,xt)}Ft.push(bt,$t)}}function Fe(Qe,at,rt,ct,ht,yt,bt,$t){var At=Math.pow(3*rt-2*Qe-bt,2),Ft=Math.pow(3*ct-2*at-$t,2),Ht=Math.pow(3*ht-Qe-2*bt,2),Ot=Math.pow(3*yt-at-2*$t,2);return Math.max(At,Ht)+Math.max(Ft,Ot)<=10}function Ye(){var Qe,at=1/0,rt=-1/0,ct=1/0,ht=-1/0,yt=_createForOfIteratorHelper(this.paths);try{for(yt.s();!(Qe=yt.n()).done;){var bt,$t=_createForOfIteratorHelper(Qe.value);try{for($t.s();!(bt=$t.n()).done;){var At,Ft=_slicedToArray(bt.value,4),Ht=Ft[0],Ot=Ft[1],Mt=Ft[2],pt=Ft[3],xt=(At=o.Util).bezierBoundingBox.apply(At,_toConsumableArray$1(Ht).concat(_toConsumableArray$1(Ot),_toConsumableArray$1(Mt),_toConsumableArray$1(pt)));at=Math.min(at,xt[0]),ct=Math.min(ct,xt[1]),rt=Math.max(rt,xt[2]),ht=Math.max(ht,xt[3])}}catch(Tt){$t.e(Tt)}finally{$t.f()}}}catch(Tt){yt.e(Tt)}finally{yt.f()}return[at,ct,rt,ht]}function Ke(){return x(this,F)?Math.ceil(this.thickness*this.parentScale):0}function Ze(){var Qe=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.isEmpty())if(x(this,F)){var at=P(this,_e,Ye).call(this),rt=P(this,we,Ke).call(this);f(this,T,Math.max(S,at[2]-at[0])),f(this,M,Math.max(S,at[3]-at[1]));var ct=Math.ceil(rt+x(this,T)*this.scaleFactor),ht=Math.ceil(rt+x(this,M)*this.scaleFactor),yt=_slicedToArray(this.parentDimensions,2),bt=yt[0],$t=yt[1];this.width=ct/bt,this.height=ht/$t,f(this,E,ct/ht),P(this,$e,ot).call(this);var At=this.translationX,Ft=this.translationY;this.translationX=-at[0],this.translationY=-at[1],P(this,Ce,wt).call(this),P(this,Ee,nt).call(this),f(this,q,ct),f(this,ne,ht),this.setDims(ct,ht);var Ht=Qe?rt/this.scaleFactor/2:0;this.translate(At-this.translationX-Ht,Ft-this.translationY-Ht)}else P(this,Ee,nt).call(this)}function ot(){var Qe=this.div.style;x(this,E)>=1?(Qe.minHeight="".concat(S,"px"),Qe.minWidth="".concat(Math.round(x(this,E)*S),"px")):(Qe.minWidth="".concat(S,"px"),Qe.minHeight="".concat(Math.round(S/x(this,E)),"px"))}n.InkEditor=Be,v(Be,"_defaultColor",null),v(Be,"_defaultOpacity",1),v(Be,"_defaultThickness",1),v(Be,"_l10nPromise",void 0),v(Be,"_type","ink")},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.fitCurve=void 0;var o=r(166);n.fitCurve=o},function(e){function n(m,d,f,x,k){var P,S,E,M,T,D,I,N,O,F,U,Y,Q;if(m.length===2)return Y=v.vectorLen(v.subtract(m[0],m[1]))/3,[P=[m[0],v.addArrays(m[0],v.mulItems(d,Y)),v.addArrays(m[1],v.mulItems(f,Y)),m[1]]];S=function(X){var j,Z,W,te=[];return X.forEach(function(le,oe){j=oe?Z+v.vectorLen(v.subtract(le,W)):0,te.push(j),Z=j,W=le}),te=te.map(function(le){return le/Z})}(m);var q=_slicedToArray(r(m,S,S,d,f,k),3);if(P=q[0],M=q[1],D=q[2],M===0||M<x)return[P];if(M<x*x)for(E=S,T=M,I=D,Q=0;Q<20;Q++){var ne=_slicedToArray(r(m,S,E=o(P,m,E),d,f,k),3);if(P=ne[0],M=ne[1],D=ne[2],M<x)return[P];if(D===I){var J=M/T;if(J>.9999&&J<1.0001)break}T=M,I=D}if(U=[],(N=v.subtract(m[D-1],m[D+1])).every(function(X){return X===0})){var re=[-(N=v.subtract(m[D-1],m[D]))[1],N[0]];N[0]=re[0],N[1]=re[1]}return O=v.normalize(N),F=v.mulItems(O,-1),U=(U=U.concat(n(m.slice(0,D+1),d,O,x,k))).concat(n(m.slice(D),F,f,x,k))}function r(m,d,f,x,k,P){var S,E,M;S=function(I,N,O,F){var U,Y,Q,q,ne,J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke=I[0],Ce=I[I.length-1];for(U=[ke,null,null,Ce],Y=v.zeros_Xx2x2(N.length),le=0,oe=N.length;le<oe;le++)ve=1-(Ae=N[le]),(Q=Y[le])[0]=v.mulItems(O,3*Ae*(ve*ve)),Q[1]=v.mulItems(F,3*ve*(Ae*Ae));for(q=[[0,0],[0,0]],ne=[0,0],le=0,oe=I.length;le<oe;le++)Ae=N[le],Q=Y[le],q[0][0]+=v.dot(Q[0],Q[0]),q[0][1]+=v.dot(Q[0],Q[1]),q[1][0]+=v.dot(Q[0],Q[1]),q[1][1]+=v.dot(Q[1],Q[1]),Ee=v.subtract(I[le],y.q([ke,ke,Ce,Ce],Ae)),ne[0]+=v.dot(Q[0],Ee),ne[1]+=v.dot(Q[1],Ee);return J=q[0][0]*q[1][1]-q[1][0]*q[0][1],re=q[0][0]*ne[1]-q[1][0]*ne[0],X=ne[0]*q[1][1]-ne[1]*q[0][1],j=J===0?0:X/J,Z=J===0?0:re/J,te=v.vectorLen(v.subtract(ke,Ce)),j<(W=1e-6*te)||Z<W?(U[1]=v.addArrays(ke,v.mulItems(O,te/3)),U[2]=v.addArrays(Ce,v.mulItems(F,te/3))):(U[1]=v.addArrays(ke,v.mulItems(O,j)),U[2]=v.addArrays(Ce,v.mulItems(F,Z))),U}(m,f,x,k);var T=function(I,N,O){var F,U,Y,Q,q,ne,J,re;U=0,Y=Math.floor(I.length/2);var X=s(N,10);for(q=0,ne=I.length;q<ne;q++)J=I[q],re=w(0,O[q],X,10),(F=(Q=v.subtract(y.q(N,re),J))[0]*Q[0]+Q[1]*Q[1])>U&&(U=F,Y=q);return[U,Y]}(m,S,d),D=_slicedToArray(T,2);return E=D[0],M=D[1],P&&P({bez:S,points:m,params:d,maxErr:E,maxPoint:M}),[S,E,M]}function o(m,d,f){return f.map(function(x,k){return u(m,d[k],x)})}function u(m,d,f){var x=v.subtract(y.q(m,f),d),k=y.qprime(m,f),P=v.mulMatrix(x,k),S=v.sum(v.squareItems(k))+2*v.mulMatrix(x,y.qprimeprime(m,f));return S===0?f:f-P/S}var s=function(m,d){for(var f,x=[0],k=m[0],P=0,S=1;S<=d;S++)f=y.q(m,S/d),P+=v.vectorLen(v.subtract(f,k)),x.push(P),k=f;return x=x.map(function(E){return E/P})};function w(m,d,f,x){if(d<0)return 0;if(d>1)return 1;for(var k,P,S,E,M=1;M<=x;M++)if(d<=f[M]){S=(M-1)/x,P=M/x,E=(d-(k=f[M-1]))/(f[M]-k)*(P-S)+S;break}return E}function g(m,d){return v.normalize(v.subtract(m,d))}var v=function(){function m(){_classCallCheck(this,m)}return _createClass(m,null,[{key:"zeros_Xx2x2",value:function(d){for(var f=[];d--;)f.push([0,0]);return f}},{key:"mulItems",value:function(d,f){return d.map(function(x){return x*f})}},{key:"mulMatrix",value:function(d,f){return d.reduce(function(x,k,P){return x+k*f[P]},0)}},{key:"subtract",value:function(d,f){return d.map(function(x,k){return x-f[k]})}},{key:"addArrays",value:function(d,f){return d.map(function(x,k){return x+f[k]})}},{key:"addItems",value:function(d,f){return d.map(function(x){return x+f})}},{key:"sum",value:function(d){return d.reduce(function(f,x){return f+x})}},{key:"dot",value:function(d,f){return m.mulMatrix(d,f)}},{key:"vectorLen",value:function(d){return Math.hypot.apply(Math,_toConsumableArray$1(d))}},{key:"divItems",value:function(d,f){return d.map(function(x){return x/f})}},{key:"squareItems",value:function(d){return d.map(function(f){return f*f})}},{key:"normalize",value:function(d){return this.divItems(d,this.vectorLen(d))}}])}(),y=function(){return _createClass(function m(){_classCallCheck(this,m)},null,[{key:"q",value:function(m,d){var f=1-d,x=v.mulItems(m[0],f*f*f),k=v.mulItems(m[1],3*f*f*d),P=v.mulItems(m[2],3*f*d*d),S=v.mulItems(m[3],d*d*d);return v.addArrays(v.addArrays(x,k),v.addArrays(P,S))}},{key:"qprime",value:function(m,d){var f=1-d,x=v.mulItems(v.subtract(m[1],m[0]),3*f*f),k=v.mulItems(v.subtract(m[2],m[1]),6*f*d),P=v.mulItems(v.subtract(m[3],m[2]),3*d*d);return v.addArrays(v.addArrays(x,k),P)}},{key:"qprimeprime",value:function(m,d){return v.addArrays(v.mulItems(v.addArrays(v.subtract(m[2],v.mulItems(m[1],2)),m[0]),6*(1-d)),v.mulItems(v.addArrays(v.subtract(m[3],v.mulItems(m[2],2)),m[1]),6*d))}}])}();e.exports=function(m,d,f){if(!Array.isArray(m))throw new TypeError("First argument should be an array");if(m.forEach(function(S){if(!Array.isArray(S)||S.some(function(E){return typeof E!="number"})||S.length!==m[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),m=m.filter(function(S,E){return E===0||!S.every(function(M,T){return M===m[E-1][T]})}),m.length<2)return[];var x=m.length,k=g(m[1],m[0]),P=g(m[x-2],m[x-1]);return n(m,k,P,d,f)},e.exports.fitCubic=n,e.exports.createTangent=g},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationLayer=void 0;var o=r(1),u=r(142),s=r(139),w=r(168),g=r(169);function v(Te,ye,_e){return function(we,Se){if(we!==Se)throw new TypeError("Private static access of wrong provenance")}(Te,ye),_e}function y(Te,ye){(function(_e,we){if(we.has(_e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(Te,ye),ye.add(Te)}function m(Te,ye,_e){if(!ye.has(Te))throw new TypeError("attempted to get private field on non-instance");return _e}var d=1e3,f=new WeakSet;function x(Te){return{width:Te[2]-Te[0],height:Te[3]-Te[1]}}var k=function(){return _createClass(function Te(){_classCallCheck(this,Te)},null,[{key:"create",value:function(Te){switch(Te.data.annotationType){case o.AnnotationType.LINK:return new M(Te);case o.AnnotationType.TEXT:return new I(Te);case o.AnnotationType.WIDGET:switch(Te.data.fieldType){case"Tx":return new O(Te);case"Btn":return Te.data.radioButton?new U(Te):Te.data.checkBox?new F(Te):new Y(Te);case"Ch":return new Q(Te)}return new N(Te);case o.AnnotationType.POPUP:return new q(Te);case o.AnnotationType.FREETEXT:return new J(Te);case o.AnnotationType.LINE:return new re(Te);case o.AnnotationType.SQUARE:return new X(Te);case o.AnnotationType.CIRCLE:return new j(Te);case o.AnnotationType.POLYLINE:return new Z(Te);case o.AnnotationType.CARET:return new te(Te);case o.AnnotationType.INK:return new le(Te);case o.AnnotationType.POLYGON:return new W(Te);case o.AnnotationType.HIGHLIGHT:return new oe(Te);case o.AnnotationType.UNDERLINE:return new Ee(Te);case o.AnnotationType.SQUIGGLY:return new Ae(Te);case o.AnnotationType.STRIKEOUT:return new ve(Te);case o.AnnotationType.STAMP:return new ke(Te);case o.AnnotationType.FILEATTACHMENT:return new Ce(Te);default:return new P(Te)}}}])}(),P=function(){return _createClass(function Te(ye){_classCallCheck(this,Te);var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=_e.isRenderable,Se=we!==void 0&&we,$e=_e.ignoreBorder,Be=$e!==void 0&&$e,Oe=_e.createQuadrilaterals,Ge=Oe!==void 0&&Oe;this.isRenderable=Se,this.data=ye.data,this.layer=ye.layer,this.page=ye.page,this.viewport=ye.viewport,this.linkService=ye.linkService,this.downloadManager=ye.downloadManager,this.imageResourcesPath=ye.imageResourcesPath,this.renderForms=ye.renderForms,this.svgFactory=ye.svgFactory,this.annotationStorage=ye.annotationStorage,this.enableScripting=ye.enableScripting,this.hasJSActions=ye.hasJSActions,this._fieldObjects=ye.fieldObjects,Se&&(this.container=this._createContainer(Be)),Ge&&(this.quadrilaterals=this._createQuadrilaterals(Be))},[{key:"_createContainer",value:function(){var Te=arguments.length>0&&arguments[0]!==void 0&&arguments[0],ye=this.data,_e=this.page,we=this.viewport,Se=document.createElement("section");Se.setAttribute("data-annotation-id",ye.id),ye.noRotate&&Se.classList.add("norotate");var $e=we.rawDims,Be=$e.pageWidth,Oe=$e.pageHeight,Ge=$e.pageX,Ie=$e.pageY,je=x(ye.rect),qe=je.width,Ue=je.height,Je=o.Util.normalizeRect([ye.rect[0],_e.view[3]-ye.rect[1]+_e.view[1],ye.rect[2],_e.view[3]-ye.rect[3]+_e.view[1]]);if(!Te&&ye.borderStyle.width>0){Se.style.borderWidth="".concat(ye.borderStyle.width,"px");var et=ye.borderStyle.horizontalCornerRadius,nt=ye.borderStyle.verticalCornerRadius;if(et>0||nt>0){var st="calc(".concat(et,"px * var(--scale-factor)) / calc(").concat(nt,"px * var(--scale-factor))");Se.style.borderRadius=st}else if(this instanceof U){var gt="calc(".concat(qe,"px * var(--scale-factor)) / calc(").concat(Ue,"px * var(--scale-factor))");Se.style.borderRadius=gt}switch(ye.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:Se.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:Se.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:Se.style.borderBottomStyle="solid"}var _t=ye.borderColor||null;_t?Se.style.borderColor=o.Util.makeHexColor(0|_t[0],0|_t[1],0|_t[2]):Se.style.borderWidth=0}Se.style.left="".concat(100*(Je[0]-Ge)/Be,"%"),Se.style.top="".concat(100*(Je[1]-Ie)/Oe,"%");var wt=ye.rotation;return ye.hasOwnCanvas||wt===0?(Se.style.width="".concat(100*qe/Be,"%"),Se.style.height="".concat(100*Ue/Oe,"%")):this.setRotation(wt,Se),Se}},{key:"setRotation",value:function(Te){var ye,_e,we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,Se=this.viewport.rawDims,$e=Se.pageWidth,Be=Se.pageHeight,Oe=x(this.data.rect),Ge=Oe.width,Ie=Oe.height;Te%180==0?(ye=100*Ge/$e,_e=100*Ie/Be):(ye=100*Ie/$e,_e=100*Ge/Be),we.style.width="".concat(ye,"%"),we.style.height="".concat(_e,"%"),we.setAttribute("data-main-rotation",(360-Te)%360)}},{key:"_commonActions",get:function(){var Te=this,ye=function(_e,we,Se){var $e=Se.detail[_e];Se.target.style[we]=w.ColorConverters["".concat($e[0],"_HTML")]($e.slice(1))};return(0,o.shadow)(this,"_commonActions",{display:function(_e){var we=_e.detail.display%2==1;Te.container.style.visibility=we?"hidden":"visible",Te.annotationStorage.setValue(Te.data.id,{hidden:we,print:_e.detail.display===0||_e.detail.display===3})},print:function(_e){Te.annotationStorage.setValue(Te.data.id,{print:_e.detail.print})},hidden:function(_e){Te.container.style.visibility=_e.detail.hidden?"hidden":"visible",Te.annotationStorage.setValue(Te.data.id,{hidden:_e.detail.hidden})},focus:function(_e){setTimeout(function(){return _e.target.focus({preventScroll:!1})},0)},userName:function(_e){_e.target.title=_e.detail.userName},readonly:function(_e){_e.detail.readonly?_e.target.setAttribute("readonly",""):_e.target.removeAttribute("readonly")},required:function(_e){Te._setRequired(_e.target,_e.detail.required)},bgColor:function(_e){ye("bgColor","backgroundColor",_e)},fillColor:function(_e){ye("fillColor","backgroundColor",_e)},fgColor:function(_e){ye("fgColor","color",_e)},textColor:function(_e){ye("textColor","color",_e)},borderColor:function(_e){ye("borderColor","borderColor",_e)},strokeColor:function(_e){ye("strokeColor","borderColor",_e)},rotation:function(_e){var we=_e.detail.rotation;Te.setRotation(we),Te.annotationStorage.setValue(Te.data.id,{rotation:we})}})}},{key:"_dispatchEventFromSandbox",value:function(Te,ye){for(var _e=this._commonActions,we=0,Se=Object.keys(ye.detail);we<Se.length;we++){var $e=Se[we],Be=Te[$e]||_e[$e];Be==null||Be(ye)}}},{key:"_setDefaultPropertiesFromJS",value:function(Te){if(this.enableScripting){var ye=this.annotationStorage.getRawValue(this.data.id);if(ye)for(var _e=this._commonActions,we=0,Se=Object.entries(ye);we<Se.length;we++){var $e=_slicedToArray(Se[we],2),Be=$e[0],Oe=$e[1],Ge=_e[Be];Ge&&(Ge({detail:_defineProperty$1({},Be,Oe),target:Te}),delete ye[Be])}}}},{key:"_createQuadrilaterals",value:function(){var Te=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.data.quadPoints)return null;var ye,_e=[],we=this.data.rect,Se=_createForOfIteratorHelper(this.data.quadPoints);try{for(Se.s();!(ye=Se.n()).done;){var $e=ye.value;this.data.rect=[$e[2].x,$e[2].y,$e[1].x,$e[1].y],_e.push(this._createContainer(Te))}}catch(Be){Se.e(Be)}finally{Se.f()}return this.data.rect=we,_e}},{key:"_createPopup",value:function(Te,ye){var _e=this.container;this.quadrilaterals&&(Te=Te||this.quadrilaterals,_e=this.quadrilaterals[0]),Te||((Te=document.createElement("div")).classList.add("popupTriggerArea"),_e.append(Te));var we=new ne({container:_e,trigger:Te,color:ye.color,titleObj:ye.titleObj,modificationDate:ye.modificationDate,contentsObj:ye.contentsObj,richText:ye.richText,hideWrapper:!0}).render();we.style.left="100%",_e.append(we)}},{key:"_renderQuadrilaterals",value:function(Te){var ye,_e=_createForOfIteratorHelper(this.quadrilaterals);try{for(_e.s();!(ye=_e.n()).done;)ye.value.classList.add(Te)}catch(we){_e.e(we)}finally{_e.f()}return this.quadrilaterals}},{key:"render",value:function(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function(Te){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,_e=[];if(this._fieldObjects){var we=this._fieldObjects[Te];if(we){var Se,$e=_createForOfIteratorHelper(we);try{for($e.s();!(Se=$e.n()).done;){var Be=Se.value,Oe=Be.page,Ge=Be.id,Ie=Be.exportValues;if(Oe!==-1&&Ge!==ye){var je=typeof Ie=="string"?Ie:null,qe=document.querySelector('[data-element-id="'.concat(Ge,'"]'));!qe||f.has(qe)?_e.push({id:Ge,exportValue:je,domElement:qe}):(0,o.warn)("_getElementsByName - element not allowed: ".concat(Ge))}}}catch(gt){$e.e(gt)}finally{$e.f()}}return _e}var Ue,Je=_createForOfIteratorHelper(document.getElementsByName(Te));try{for(Je.s();!(Ue=Je.n()).done;){var et=Ue.value,nt=et.exportValue,st=et.getAttribute("data-element-id");st!==ye&&f.has(et)&&_e.push({id:st,exportValue:nt,domElement:et})}}catch(gt){Je.e(gt)}finally{Je.f()}return _e}}])}(),S=new WeakSet,E=new WeakSet,M=function(Te){function ye(_e){var we;_classCallCheck(this,ye);var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return y(we=_callSuper(this,ye,[_e,{isRenderable:!0,ignoreBorder:!(Se==null||!Se.ignoreBorder),createQuadrilaterals:!0}]),E),y(we,S),we.isTooltipOnly=_e.data.isTooltipOnly,we}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){var _e=this.data,we=this.linkService,Se=document.createElement("a");Se.setAttribute("data-element-id",_e.id);var $e=!1;return _e.url?(we.addLinkAttributes(Se,_e.url,_e.newWindow),$e=!0):_e.action?(this._bindNamedAction(Se,_e.action),$e=!0):_e.attachment?(this._bindAttachment(Se,_e.attachment),$e=!0):_e.setOCGState?(m(this,E,D).call(this,Se,_e.setOCGState),$e=!0):_e.dest?(this._bindLink(Se,_e.dest),$e=!0):(_e.actions&&(_e.actions.Action||_e.actions["Mouse Up"]||_e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Se,_e),$e=!0),_e.resetForm?(this._bindResetFormAction(Se,_e.resetForm),$e=!0):this.isTooltipOnly&&!$e&&(this._bindLink(Se,""),$e=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(function(Be,Oe){var Ge=Oe===0?Se:Se.cloneNode();return Be.append(Ge),Be}):(this.container.classList.add("linkAnnotation"),$e&&this.container.append(Se),this.container)}},{key:"_bindLink",value:function(_e,we){var Se=this;_e.href=this.linkService.getDestinationHash(we),_e.onclick=function(){return we&&Se.linkService.goToDestination(we),!1},(we||we==="")&&m(this,S,T).call(this)}},{key:"_bindNamedAction",value:function(_e,we){var Se=this;_e.href=this.linkService.getAnchorUrl(""),_e.onclick=function(){return Se.linkService.executeNamedAction(we),!1},m(this,S,T).call(this)}},{key:"_bindAttachment",value:function(_e,we){var Se=this;_e.href=this.linkService.getAnchorUrl(""),_e.onclick=function(){var $e;return($e=Se.downloadManager)===null||$e===void 0||$e.openOrDownloadData(Se.container,we.content,we.filename),!1},m(this,S,T).call(this)}},{key:"_bindJSAction",value:function(_e,we){var Se=this;_e.href=this.linkService.getAnchorUrl("");for(var $e=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),Be=function(){var Ie=Ge[Oe],je=$e.get(Ie);if(!je)return 1;_e[je]=function(){var qe;return(qe=Se.linkService.eventBus)===null||qe===void 0||qe.dispatch("dispatcheventinsandbox",{source:Se,detail:{id:we.id,name:Ie}}),!1}},Oe=0,Ge=Object.keys(we.actions);Oe<Ge.length;Oe++)Be();_e.onclick||(_e.onclick=function(){return!1}),m(this,S,T).call(this)}},{key:"_bindResetFormAction",value:function(_e,we){var Se=this,$e=_e.onclick;if($e||(_e.href=this.linkService.getAnchorUrl("")),m(this,S,T).call(this),!this._fieldObjects)return(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void($e||(_e.onclick=function(){return!1}));_e.onclick=function(){$e==null||$e();var Be=we.fields,Oe=we.refs,Ge=we.include,Ie=[];if(Be.length!==0||Oe.length!==0){var je,qe=new Set(Oe),Ue=_createForOfIteratorHelper(Be);try{for(Ue.s();!(je=Ue.n()).done;){var Je,et=je.value,nt=_createForOfIteratorHelper(Se._fieldObjects[et]||[]);try{for(nt.s();!(Je=nt.n()).done;){var st=Je.value.id;qe.add(st)}}catch(bt){nt.e(bt)}finally{nt.f()}}}catch(bt){Ue.e(bt)}finally{Ue.f()}for(var gt=0,_t=Object.values(Se._fieldObjects);gt<_t.length;gt++){var wt,He=_createForOfIteratorHelper(_t[gt]);try{for(He.s();!(wt=He.n()).done;){var Ve=wt.value;qe.has(Ve.id)===Ge&&Ie.push(Ve)}}catch(bt){He.e(bt)}finally{He.f()}}}else for(var ze=0,Ne=Object.values(Se._fieldObjects);ze<Ne.length;ze++){var We=Ne[ze];Ie.push.apply(Ie,_toConsumableArray$1(We))}for(var Fe,Ye=Se.annotationStorage,Ke=[],Ze=0,ot=Ie;Ze<ot.length;Ze++){var Qe=ot[Ze],at=Qe.id;switch(Ke.push(at),Qe.type){case"text":var rt=Qe.defaultValue||"";Ye.setValue(at,{value:rt});break;case"checkbox":case"radiobutton":var ct=Qe.defaultValue===Qe.exportValues;Ye.setValue(at,{value:ct});break;case"combobox":case"listbox":var ht=Qe.defaultValue||"";Ye.setValue(at,{value:ht});break;default:continue}var yt=document.querySelector('[data-element-id="'.concat(at,'"]'));yt&&(f.has(yt)?yt.dispatchEvent(new Event("resetform")):(0,o.warn)("_bindResetFormAction - element not allowed: ".concat(at)))}return Se.enableScripting&&((Fe=Se.linkService.eventBus)===null||Fe===void 0||Fe.dispatch("dispatcheventinsandbox",{source:Se,detail:{id:"app",ids:Ke,name:"ResetForm"}})),!1}}}])}(P);function T(){this.container.setAttribute("data-internal-link","")}function D(Te,ye){var _e=this;Te.href=this.linkService.getAnchorUrl(""),Te.onclick=function(){return _e.linkService.executeSetOCGState(ye),!1},m(this,S,T).call(this)}var I=function(Te){function ye(_e){var we,Se,$e;return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(we=_e.data.titleObj)!==null&&we!==void 0&&we.str||(Se=_e.data.contentsObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.richText)!==null&&$e!==void 0&&$e.str)}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){this.container.classList.add("textAnnotation");var _e=document.createElement("img");return _e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",_e.alt="[{{type}} Annotation]",_e.dataset.l10nId="text_annotation_type",_e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(_e,this.data),this.container.append(_e),this.container}}])}(P),N=function(Te){function ye(){return _classCallCheck(this,ye),_callSuper(this,ye,arguments)}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function(_e){var we=o.FeatureTest.platform,Se=we.isWin,$e=we.isMac;return Se&&_e.ctrlKey||$e&&_e.metaKey}},{key:"_setEventListener",value:function(_e,we,Se,$e){var Be=this;we.includes("mouse")?_e.addEventListener(we,function(Oe){var Ge;(Ge=Be.linkService.eventBus)===null||Ge===void 0||Ge.dispatch("dispatcheventinsandbox",{source:Be,detail:{id:Be.data.id,name:Se,value:$e(Oe),shift:Oe.shiftKey,modifier:Be._getKeyModifier(Oe)}})}):_e.addEventListener(we,function(Oe){var Ge;(Ge=Be.linkService.eventBus)===null||Ge===void 0||Ge.dispatch("dispatcheventinsandbox",{source:Be,detail:{id:Be.data.id,name:Se,value:$e(Oe)}})})}},{key:"_setEventListeners",value:function(_e,we,Se){var $e,Be=_createForOfIteratorHelper(we);try{for(Be.s();!($e=Be.n()).done;){var Oe,Ge=_slicedToArray($e.value,2),Ie=Ge[0],je=Ge[1];(je==="Action"||(Oe=this.data.actions)!==null&&Oe!==void 0&&Oe[je])&&this._setEventListener(_e,Ie,je,Se)}}catch(qe){Be.e(qe)}finally{Be.f()}}},{key:"_setBackgroundColor",value:function(_e){var we=this.data.backgroundColor||null;_e.style.backgroundColor=we===null?"transparent":o.Util.makeHexColor(we[0],we[1],we[2])}},{key:"_setTextStyle",value:function(_e){var we,Se=this.data.defaultAppearanceData.fontColor,$e=this.data.defaultAppearanceData.fontSize||9,Be=_e.style,Oe=function(qe){return Math.round(10*qe)/10};if(this.data.multiLine){var Ge=Math.abs(this.data.rect[3]-this.data.rect[1]-2),Ie=Ge/(Math.round(Ge/(o.LINE_FACTOR*$e))||1);we=Math.min($e,Oe(Ie/o.LINE_FACTOR))}else{var je=Math.abs(this.data.rect[3]-this.data.rect[1]-2);we=Math.min($e,Oe(je/o.LINE_FACTOR))}Be.fontSize="calc(".concat(we,"px * var(--scale-factor))"),Be.color=o.Util.makeHexColor(Se[0],Se[1],Se[2]),this.data.textAlignment!==null&&(Be.textAlign=["left","center","right"][this.data.textAlignment])}},{key:"_setRequired",value:function(_e,we){we?_e.setAttribute("required",!0):_e.removeAttribute("required"),_e.setAttribute("aria-required",we)}}])}(P),O=function(Te){function ye(_e){return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:_e.renderForms||!_e.data.hasAppearance&&!!_e.data.fieldValue}])}return _inherits(ye,Te),_createClass(ye,[{key:"setPropertyOnSiblings",value:function(_e,we,Se,$e){var Be,Oe=this.annotationStorage,Ge=_createForOfIteratorHelper(this._getElementsByName(_e.name,_e.id));try{for(Ge.s();!(Be=Ge.n()).done;){var Ie=Be.value;Ie.domElement&&(Ie.domElement[we]=Se),Oe.setValue(Ie.id,_defineProperty$1({},$e,Se))}}catch(je){Ge.e(je)}finally{Ge.f()}}},{key:"render",value:function(){var _e=this,we=this.annotationStorage,Se=this.data.id;this.container.classList.add("textWidgetAnnotation");var $e=null;if(this.renderForms){var Be=we.getValue(Se,{value:this.data.fieldValue}),Oe=Be.formattedValue||Be.value||"",Ge=we.getValue(Se,{charLimit:this.data.maxLen}).charLimit;Ge&&Oe.length>Ge&&(Oe=Oe.slice(0,Ge));var Ie={userValue:Oe,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(($e=document.createElement("textarea")).textContent=Oe,this.data.doNotScroll&&($e.style.overflowY="hidden")):(($e=document.createElement("input")).type="text",$e.setAttribute("value",Oe),this.data.doNotScroll&&($e.style.overflowX="hidden")),f.add($e),$e.setAttribute("data-element-id",Se),$e.disabled=this.data.readOnly,$e.name=this.data.fieldName,$e.tabIndex=d,this._setRequired($e,this.data.required),Ge&&($e.maxLength=Ge),$e.addEventListener("input",function(et){we.setValue(Se,{value:et.target.value}),_e.setPropertyOnSiblings($e,"value",et.target.value,"value")}),$e.addEventListener("resetform",function(et){var nt,st=(nt=_e.data.defaultFieldValue)!==null&&nt!==void 0?nt:"";$e.value=Ie.userValue=st,Ie.formattedValue=null});var je=function(et){var nt=Ie.formattedValue;nt!=null&&(et.target.value=nt),et.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var qe;$e.addEventListener("focus",function(et){var nt=et.target;Ie.userValue&&(nt.value=Ie.userValue),Ie.lastCommittedValue=nt.value,Ie.commitKey=1}),$e.addEventListener("updatefromsandbox",function(et){var nt={value:function(st){var gt;Ie.userValue=(gt=st.detail.value)!==null&&gt!==void 0?gt:"",we.setValue(Se,{value:Ie.userValue.toString()}),st.target.value=Ie.userValue},formattedValue:function(st){var gt=st.detail.formattedValue;Ie.formattedValue=gt,gt!=null&&st.target!==document.activeElement&&(st.target.value=gt),we.setValue(Se,{formattedValue:gt})},selRange:function(st){var gt;(gt=st.target).setSelectionRange.apply(gt,_toConsumableArray$1(st.detail.selRange))},charLimit:function(st){var gt,_t=st.detail.charLimit,wt=st.target;if(_t!==0){wt.setAttribute("maxLength",_t);var He=Ie.userValue;!He||He.length<=_t||(He=He.slice(0,_t),wt.value=Ie.userValue=He,we.setValue(Se,{value:He}),(gt=_e.linkService.eventBus)===null||gt===void 0||gt.dispatch("dispatcheventinsandbox",{source:_e,detail:{id:Se,name:"Keystroke",value:He,willCommit:!0,commitKey:1,selStart:wt.selectionStart,selEnd:wt.selectionEnd}}))}else wt.removeAttribute("maxLength")}};_e._dispatchEventFromSandbox(nt,et)}),$e.addEventListener("keydown",function(et){var nt;Ie.commitKey=1;var st=-1;if(et.key==="Escape"?st=0:et.key!=="Enter"||_e.data.multiLine?et.key==="Tab"&&(Ie.commitKey=3):st=2,st!==-1){var gt=et.target.value;Ie.lastCommittedValue!==gt&&(Ie.lastCommittedValue=gt,Ie.userValue=gt,(nt=_e.linkService.eventBus)===null||nt===void 0||nt.dispatch("dispatcheventinsandbox",{source:_e,detail:{id:Se,name:"Keystroke",value:gt,willCommit:!0,commitKey:st,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}}))}});var Ue=je;je=null,$e.addEventListener("blur",function(et){if(et.relatedTarget){var nt,st=et.target.value;Ie.userValue=st,Ie.lastCommittedValue!==st&&((nt=_e.linkService.eventBus)===null||nt===void 0||nt.dispatch("dispatcheventinsandbox",{source:_e,detail:{id:Se,name:"Keystroke",value:st,willCommit:!0,commitKey:Ie.commitKey,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}})),Ue(et)}}),(qe=this.data.actions)!==null&&qe!==void 0&&qe.Keystroke&&$e.addEventListener("beforeinput",function(et){var nt;Ie.lastCommittedValue=null;var st=et.data,gt=et.target,_t=gt.value,wt=gt.selectionStart,He=gt.selectionEnd,Ve=wt,ze=He;switch(et.inputType){case"deleteWordBackward":var Ne=_t.substring(0,wt).match(/\w*[^\w]*$/);Ne&&(Ve-=Ne[0].length);break;case"deleteWordForward":var We=_t.substring(wt).match(/^[^\w]*\w*/);We&&(ze+=We[0].length);break;case"deleteContentBackward":wt===He&&(Ve-=1);break;case"deleteContentForward":wt===He&&(ze+=1)}et.preventDefault(),(nt=_e.linkService.eventBus)===null||nt===void 0||nt.dispatch("dispatcheventinsandbox",{source:_e,detail:{id:Se,name:"Keystroke",value:_t,change:st||"",willCommit:!1,selStart:Ve,selEnd:ze}})}),this._setEventListeners($e,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(et){return et.target.value})}if(je&&$e.addEventListener("blur",je),this.data.comb){var Je=(this.data.rect[2]-this.data.rect[0])/Ge;$e.classList.add("comb"),$e.style.letterSpacing="calc(".concat(Je,"px * var(--scale-factor) - 1ch)")}}else($e=document.createElement("div")).textContent=this.data.fieldValue,$e.style.verticalAlign="middle",$e.style.display="table-cell";return this._setTextStyle($e),this._setBackgroundColor($e),this._setDefaultPropertiesFromJS($e),this.container.append($e),this.container}}])}(N),F=function(Te){function ye(_e){return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:_e.renderForms}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){var _e=this,we=this.annotationStorage,Se=this.data,$e=Se.id,Be=we.getValue($e,{value:Se.exportValue===Se.fieldValue}).value;typeof Be=="string"&&(Be=Be!=="Off",we.setValue($e,{value:Be})),this.container.classList.add("buttonWidgetAnnotation","checkBox");var Oe=document.createElement("input");return f.add(Oe),Oe.setAttribute("data-element-id",$e),Oe.disabled=Se.readOnly,this._setRequired(Oe,this.data.required),Oe.type="checkbox",Oe.name=Se.fieldName,Be&&Oe.setAttribute("checked",!0),Oe.setAttribute("exportValue",Se.exportValue),Oe.tabIndex=d,Oe.addEventListener("change",function(Ge){var Ie,je=Ge.target,qe=je.name,Ue=je.checked,Je=_createForOfIteratorHelper(_e._getElementsByName(qe,$e));try{for(Je.s();!(Ie=Je.n()).done;){var et=Ie.value,nt=Ue&&et.exportValue===Se.exportValue;et.domElement&&(et.domElement.checked=nt),we.setValue(et.id,{value:nt})}}catch(st){Je.e(st)}finally{Je.f()}we.setValue($e,{value:Ue})}),Oe.addEventListener("resetform",function(Ge){var Ie=Se.defaultFieldValue||"Off";Ge.target.checked=Ie===Se.exportValue}),this.enableScripting&&this.hasJSActions&&(Oe.addEventListener("updatefromsandbox",function(Ge){var Ie={value:function(je){je.target.checked=je.detail.value!=="Off",we.setValue($e,{value:je.target.checked})}};_e._dispatchEventFromSandbox(Ie,Ge)}),this._setEventListeners(Oe,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(Ge){return Ge.target.checked})),this._setBackgroundColor(Oe),this._setDefaultPropertiesFromJS(Oe),this.container.append(Oe),this.container}}])}(N),U=function(Te){function ye(_e){return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:_e.renderForms}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){var _e=this;this.container.classList.add("buttonWidgetAnnotation","radioButton");var we=this.annotationStorage,Se=this.data,$e=Se.id,Be=we.getValue($e,{value:Se.fieldValue===Se.buttonValue}).value;typeof Be=="string"&&(Be=Be!==Se.buttonValue,we.setValue($e,{value:Be}));var Oe=document.createElement("input");if(f.add(Oe),Oe.setAttribute("data-element-id",$e),Oe.disabled=Se.readOnly,this._setRequired(Oe,this.data.required),Oe.type="radio",Oe.name=Se.fieldName,Be&&Oe.setAttribute("checked",!0),Oe.tabIndex=d,Oe.addEventListener("change",function(Ie){var je,qe=Ie.target,Ue=qe.name,Je=qe.checked,et=_createForOfIteratorHelper(_e._getElementsByName(Ue,$e));try{for(et.s();!(je=et.n()).done;){var nt=je.value;we.setValue(nt.id,{value:!1})}}catch(st){et.e(st)}finally{et.f()}we.setValue($e,{value:Je})}),Oe.addEventListener("resetform",function(Ie){var je=Se.defaultFieldValue;Ie.target.checked=je!=null&&je===Se.buttonValue}),this.enableScripting&&this.hasJSActions){var Ge=Se.buttonValue;Oe.addEventListener("updatefromsandbox",function(Ie){var je={value:function(qe){var Ue,Je=Ge===qe.detail.value,et=_createForOfIteratorHelper(_e._getElementsByName(qe.target.name));try{for(et.s();!(Ue=et.n()).done;){var nt=Ue.value,st=Je&&nt.id===$e;nt.domElement&&(nt.domElement.checked=st),we.setValue(nt.id,{value:st})}}catch(gt){et.e(gt)}finally{et.f()}}};_e._dispatchEventFromSandbox(je,Ie)}),this._setEventListeners(Oe,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(Ie){return Ie.target.checked})}return this._setBackgroundColor(Oe),this._setDefaultPropertiesFromJS(Oe),this.container.append(Oe),this.container}}])}(N),Y=function(Te){function ye(_e){return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{ignoreBorder:_e.data.hasAppearance}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){var _e=this,we=_get(_getPrototypeOf(ye.prototype),"render",this).call(this);we.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(we.title=this.data.alternativeText);var Se=we.lastChild;return this.enableScripting&&this.hasJSActions&&Se&&(this._setDefaultPropertiesFromJS(Se),Se.addEventListener("updatefromsandbox",function($e){_e._dispatchEventFromSandbox({},$e)})),we}}])}(M),Q=function(Te){function ye(_e){return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:_e.renderForms}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){var _e=this;this.container.classList.add("choiceWidgetAnnotation");var we=this.annotationStorage,Se=this.data.id,$e=we.getValue(Se,{value:this.data.fieldValue}),Be=document.createElement("select");f.add(Be),Be.setAttribute("data-element-id",Se),Be.disabled=this.data.readOnly,this._setRequired(Be,this.data.required),Be.name=this.data.fieldName,Be.tabIndex=d;var Oe=this.data.combo&&this.data.options.length>0;this.data.combo||(Be.size=this.data.options.length,this.data.multiSelect&&(Be.multiple=!0)),Be.addEventListener("resetform",function(gt){var _t,wt=_e.data.defaultFieldValue,He=_createForOfIteratorHelper(Be.options);try{for(He.s();!(_t=He.n()).done;){var Ve=_t.value;Ve.selected=Ve.value===wt}}catch(ze){He.e(ze)}finally{He.f()}});var Ge,Ie=_createForOfIteratorHelper(this.data.options);try{for(Ie.s();!(Ge=Ie.n()).done;){var je=Ge.value,qe=document.createElement("option");qe.textContent=je.displayValue,qe.value=je.exportValue,$e.value.includes(je.exportValue)&&(qe.setAttribute("selected",!0),Oe=!1),Be.append(qe)}}catch(gt){Ie.e(gt)}finally{Ie.f()}var Ue=null;if(Oe){var Je=document.createElement("option");Je.value=" ",Je.setAttribute("hidden",!0),Je.setAttribute("selected",!0),Be.prepend(Je),Ue=function(){Je.remove(),Be.removeEventListener("input",Ue),Ue=null},Be.addEventListener("input",Ue)}var et=function(gt){var _t=gt?"value":"textContent",wt=Be.options;return Be.multiple?Array.prototype.filter.call(wt,function(He){return He.selected}).map(function(He){return He[_t]}):wt.selectedIndex===-1?null:wt[wt.selectedIndex][_t]},nt=et(!1),st=function(gt){var _t=gt.target.options;return Array.prototype.map.call(_t,function(wt){return{displayValue:wt.textContent,exportValue:wt.value}})};return this.enableScripting&&this.hasJSActions?(Be.addEventListener("updatefromsandbox",function(gt){var _t={value:function(wt){var He;(He=Ue)===null||He===void 0||He();var Ve,ze=wt.detail.value,Ne=new Set(Array.isArray(ze)?ze:[ze]),We=_createForOfIteratorHelper(Be.options);try{for(We.s();!(Ve=We.n()).done;){var Fe=Ve.value;Fe.selected=Ne.has(Fe.value)}}catch(Ye){We.e(Ye)}finally{We.f()}we.setValue(Se,{value:et(!0)}),nt=et(!1)},multipleSelection:function(wt){Be.multiple=!0},remove:function(wt){var He=Be.options,Ve=wt.detail.remove;if(He[Ve].selected=!1,Be.remove(Ve),He.length>0){var ze=Array.prototype.findIndex.call(He,function(Ne){return Ne.selected});ze===-1&&(He[0].selected=!0)}we.setValue(Se,{value:et(!0),items:st(wt)}),nt=et(!1)},clear:function(wt){for(;Be.length!==0;)Be.remove(0);we.setValue(Se,{value:null,items:[]}),nt=et(!1)},insert:function(wt){var He=wt.detail.insert,Ve=He.index,ze=He.displayValue,Ne=He.exportValue,We=Be.children[Ve],Fe=document.createElement("option");Fe.textContent=ze,Fe.value=Ne,We?We.before(Fe):Be.append(Fe),we.setValue(Se,{value:et(!0),items:st(wt)}),nt=et(!1)},items:function(wt){for(var He=wt.detail.items;Be.length!==0;)Be.remove(0);var Ve,ze=_createForOfIteratorHelper(He);try{for(ze.s();!(Ve=ze.n()).done;){var Ne=Ve.value,We=Ne.displayValue,Fe=Ne.exportValue,Ye=document.createElement("option");Ye.textContent=We,Ye.value=Fe,Be.append(Ye)}}catch(Ke){ze.e(Ke)}finally{ze.f()}Be.options.length>0&&(Be.options[0].selected=!0),we.setValue(Se,{value:et(!0),items:st(wt)}),nt=et(!1)},indices:function(wt){var He,Ve=new Set(wt.detail.indices),ze=_createForOfIteratorHelper(wt.target.options);try{for(ze.s();!(He=ze.n()).done;){var Ne=He.value;Ne.selected=Ve.has(Ne.index)}}catch(We){ze.e(We)}finally{ze.f()}we.setValue(Se,{value:et(!0)}),nt=et(!1)},editable:function(wt){wt.target.disabled=!wt.detail.editable}};_e._dispatchEventFromSandbox(_t,gt)}),Be.addEventListener("input",function(gt){var _t,wt=et(!0);we.setValue(Se,{value:wt}),gt.preventDefault(),(_t=_e.linkService.eventBus)===null||_t===void 0||_t.dispatch("dispatcheventinsandbox",{source:_e,detail:{id:Se,name:"Keystroke",value:nt,changeEx:wt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Be,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],function(gt){return gt.target.value})):Be.addEventListener("input",function(gt){we.setValue(Se,{value:et(!0)})}),this.data.combo&&this._setTextStyle(Be),this._setBackgroundColor(Be),this._setDefaultPropertiesFromJS(Be),this.container.append(Be),this.container}}])}(N),q=function(Te){function ye(_e){var we,Se,$e;_classCallCheck(this,ye);var Be=_e.data,Oe=!ye.IGNORE_TYPES.has(Be.parentType)&&!!((we=Be.titleObj)!==null&&we!==void 0&&we.str||(Se=Be.contentsObj)!==null&&Se!==void 0&&Se.str||($e=Be.richText)!==null&&$e!==void 0&&$e.str);return _callSuper(this,ye,[_e,{isRenderable:Oe}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){this.container.classList.add("popupAnnotation");var _e=this.layer.querySelectorAll('[data-annotation-id="'.concat(this.data.parentId,'"]'));if(_e.length===0)return this.container;var we=new ne({container:this.container,trigger:Array.from(_e),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),Se=this.page,$e=o.Util.normalizeRect([this.data.parentRect[0],Se.view[3]-this.data.parentRect[1]+Se.view[1],this.data.parentRect[2],Se.view[3]-this.data.parentRect[3]+Se.view[1]]),Be=$e[0]+this.data.parentRect[2]-this.data.parentRect[0],Oe=$e[1],Ge=this.viewport.rawDims,Ie=Ge.pageWidth,je=Ge.pageHeight,qe=Ge.pageX,Ue=Ge.pageY;return this.container.style.left="".concat(100*(Be-qe)/Ie,"%"),this.container.style.top="".concat(100*(Oe-Ue)/je,"%"),this.container.append(we.render()),this.container}}])}(P);_defineProperty$1(q,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));var ne=function(){return _createClass(function Te(ye){_classCallCheck(this,Te),this.container=ye.container,this.trigger=ye.trigger,this.color=ye.color,this.titleObj=ye.titleObj,this.modificationDate=ye.modificationDate,this.contentsObj=ye.contentsObj,this.richText=ye.richText,this.hideWrapper=ye.hideWrapper||!1,this.pinned=!1},[{key:"render",value:function(){var Te,ye,_e=document.createElement("div");_e.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?_e:this.container,this.hideElement.hidden=!0;var we=document.createElement("div");we.classList.add("popup");var Se=this.color;if(Se){var $e=.7*(255-Se[0])+Se[0],Be=.7*(255-Se[1])+Se[1],Oe=.7*(255-Se[2])+Se[2];we.style.backgroundColor=o.Util.makeHexColor(0|$e,0|Be,0|Oe)}var Ge=document.createElement("h1");Ge.dir=this.titleObj.dir,Ge.textContent=this.titleObj.str,we.append(Ge);var Ie=u.PDFDateString.toDateObject(this.modificationDate);if(Ie){var je=document.createElement("span");je.classList.add("popupDate"),je.textContent="{{date}}, {{time}}",je.dataset.l10nId="annotation_date_string",je.dataset.l10nArgs=JSON.stringify({date:Ie.toLocaleDateString(),time:Ie.toLocaleTimeString()}),we.append(je)}if((Te=this.richText)===null||Te===void 0||!Te.str||(ye=this.contentsObj)!==null&&ye!==void 0&&ye.str&&this.contentsObj.str!==this.richText.str){var qe=this._formatContents(this.contentsObj);we.append(qe)}else g.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:we}),we.lastChild.classList.add("richText","popupContent");Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var Ue,Je=_createForOfIteratorHelper(this.trigger);try{for(Je.s();!(Ue=Je.n()).done;){var et=Ue.value;et.addEventListener("click",this._toggle.bind(this)),et.addEventListener("mouseover",this._show.bind(this,!1)),et.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(nt){Je.e(nt)}finally{Je.f()}return we.addEventListener("click",this._hide.bind(this,!0)),_e.append(we),_e}},{key:"_formatContents",value:function(Te){var ye=Te.str,_e=Te.dir,we=document.createElement("p");we.classList.add("popupContent"),we.dir=_e;for(var Se=ye.split(/(?:\r\n?|\n)/),$e=0,Be=Se.length;$e<Be;++$e){var Oe=Se[$e];we.append(document.createTextNode(Oe)),$e<Be-1&&we.append(document.createElement("br"))}return we}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}},{key:"_hide",value:function(){(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}])}(),J=function(Te){function ye(_e){var we,Se,$e,Be;return _classCallCheck(this,ye),(we=_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(Se=_e.data.titleObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.contentsObj)!==null&&$e!==void 0&&$e.str||(Be=_e.data.richText)!==null&&Be!==void 0&&Be.str),ignoreBorder:!0}])).textContent=_e.data.textContent,we}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){var _e=document.createElement("div");_e.classList.add("annotationTextContent"),_e.setAttribute("role","comment");var we,Se=_createForOfIteratorHelper(this.textContent);try{for(Se.s();!(we=Se.n()).done;){var $e=we.value,Be=document.createElement("span");Be.textContent=$e,_e.append(Be)}}catch(Oe){Se.e(Oe)}finally{Se.f()}this.container.append(_e)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}])}(P),re=function(Te){function ye(_e){var we,Se,$e;return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(we=_e.data.titleObj)!==null&&we!==void 0&&we.str||(Se=_e.data.contentsObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.richText)!==null&&$e!==void 0&&$e.str),ignoreBorder:!0}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){this.container.classList.add("lineAnnotation");var _e=this.data,we=x(_e.rect),Se=we.width,$e=we.height,Be=this.svgFactory.create(Se,$e,!0),Oe=this.svgFactory.createElement("svg:line");return Oe.setAttribute("x1",_e.rect[2]-_e.lineCoordinates[0]),Oe.setAttribute("y1",_e.rect[3]-_e.lineCoordinates[1]),Oe.setAttribute("x2",_e.rect[2]-_e.lineCoordinates[2]),Oe.setAttribute("y2",_e.rect[3]-_e.lineCoordinates[3]),Oe.setAttribute("stroke-width",_e.borderStyle.width||1),Oe.setAttribute("stroke","transparent"),Oe.setAttribute("fill","transparent"),Be.append(Oe),this.container.append(Be),this._createPopup(Oe,_e),this.container}}])}(P),X=function(Te){function ye(_e){var we,Se,$e;return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(we=_e.data.titleObj)!==null&&we!==void 0&&we.str||(Se=_e.data.contentsObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.richText)!==null&&$e!==void 0&&$e.str),ignoreBorder:!0}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){this.container.classList.add("squareAnnotation");var _e=this.data,we=x(_e.rect),Se=we.width,$e=we.height,Be=this.svgFactory.create(Se,$e,!0),Oe=_e.borderStyle.width,Ge=this.svgFactory.createElement("svg:rect");return Ge.setAttribute("x",Oe/2),Ge.setAttribute("y",Oe/2),Ge.setAttribute("width",Se-Oe),Ge.setAttribute("height",$e-Oe),Ge.setAttribute("stroke-width",Oe||1),Ge.setAttribute("stroke","transparent"),Ge.setAttribute("fill","transparent"),Be.append(Ge),this.container.append(Be),this._createPopup(Ge,_e),this.container}}])}(P),j=function(Te){function ye(_e){var we,Se,$e;return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(we=_e.data.titleObj)!==null&&we!==void 0&&we.str||(Se=_e.data.contentsObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.richText)!==null&&$e!==void 0&&$e.str),ignoreBorder:!0}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){this.container.classList.add("circleAnnotation");var _e=this.data,we=x(_e.rect),Se=we.width,$e=we.height,Be=this.svgFactory.create(Se,$e,!0),Oe=_e.borderStyle.width,Ge=this.svgFactory.createElement("svg:ellipse");return Ge.setAttribute("cx",Se/2),Ge.setAttribute("cy",$e/2),Ge.setAttribute("rx",Se/2-Oe/2),Ge.setAttribute("ry",$e/2-Oe/2),Ge.setAttribute("stroke-width",Oe||1),Ge.setAttribute("stroke","transparent"),Ge.setAttribute("fill","transparent"),Be.append(Ge),this.container.append(Be),this._createPopup(Ge,_e),this.container}}])}(P),Z=function(Te){function ye(_e){var we,Se,$e,Be;return _classCallCheck(this,ye),(we=_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(Se=_e.data.titleObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.contentsObj)!==null&&$e!==void 0&&$e.str||(Be=_e.data.richText)!==null&&Be!==void 0&&Be.str),ignoreBorder:!0}])).containerClassName="polylineAnnotation",we.svgElementName="svg:polyline",we}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){this.container.classList.add(this.containerClassName);var _e,we=this.data,Se=x(we.rect),$e=Se.width,Be=Se.height,Oe=this.svgFactory.create($e,Be,!0),Ge=[],Ie=_createForOfIteratorHelper(we.vertices);try{for(Ie.s();!(_e=Ie.n()).done;){var je=_e.value,qe=je.x-we.rect[0],Ue=we.rect[3]-je.y;Ge.push(qe+","+Ue)}}catch(et){Ie.e(et)}finally{Ie.f()}Ge=Ge.join(" ");var Je=this.svgFactory.createElement(this.svgElementName);return Je.setAttribute("points",Ge),Je.setAttribute("stroke-width",we.borderStyle.width||1),Je.setAttribute("stroke","transparent"),Je.setAttribute("fill","transparent"),Oe.append(Je),this.container.append(Oe),this._createPopup(Je,we),this.container}}])}(P),W=function(Te){function ye(_e){var we;return _classCallCheck(this,ye),(we=_callSuper(this,ye,[_e])).containerClassName="polygonAnnotation",we.svgElementName="svg:polygon",we}return _inherits(ye,Te),_createClass(ye)}(Z),te=function(Te){function ye(_e){var we,Se,$e;return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(we=_e.data.titleObj)!==null&&we!==void 0&&we.str||(Se=_e.data.contentsObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.richText)!==null&&$e!==void 0&&$e.str),ignoreBorder:!0}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}])}(P),le=function(Te){function ye(_e){var we,Se,$e,Be;return _classCallCheck(this,ye),(we=_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(Se=_e.data.titleObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.contentsObj)!==null&&$e!==void 0&&$e.str||(Be=_e.data.richText)!==null&&Be!==void 0&&Be.str),ignoreBorder:!0}])).containerClassName="inkAnnotation",we.svgElementName="svg:polyline",we}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){this.container.classList.add(this.containerClassName);var _e,we=this.data,Se=x(we.rect),$e=Se.width,Be=Se.height,Oe=this.svgFactory.create($e,Be,!0),Ge=_createForOfIteratorHelper(we.inkLists);try{for(Ge.s();!(_e=Ge.n()).done;){var Ie,je=_e.value,qe=[],Ue=_createForOfIteratorHelper(je);try{for(Ue.s();!(Ie=Ue.n()).done;){var Je=Ie.value,et=Je.x-we.rect[0],nt=we.rect[3]-Je.y;qe.push("".concat(et,",").concat(nt))}}catch(gt){Ue.e(gt)}finally{Ue.f()}qe=qe.join(" ");var st=this.svgFactory.createElement(this.svgElementName);st.setAttribute("points",qe),st.setAttribute("stroke-width",we.borderStyle.width||1),st.setAttribute("stroke","transparent"),st.setAttribute("fill","transparent"),this._createPopup(st,we),Oe.append(st)}}catch(gt){Ge.e(gt)}finally{Ge.f()}return this.container.append(Oe),this.container}}])}(P),oe=function(Te){function ye(_e){var we,Se,$e;return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(we=_e.data.titleObj)!==null&&we!==void 0&&we.str||(Se=_e.data.contentsObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.richText)!==null&&$e!==void 0&&$e.str),ignoreBorder:!0,createQuadrilaterals:!0}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}])}(P),Ee=function(Te){function ye(_e){var we,Se,$e;return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(we=_e.data.titleObj)!==null&&we!==void 0&&we.str||(Se=_e.data.contentsObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.richText)!==null&&$e!==void 0&&$e.str),ignoreBorder:!0,createQuadrilaterals:!0}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}])}(P),Ae=function(Te){function ye(_e){var we,Se,$e;return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(we=_e.data.titleObj)!==null&&we!==void 0&&we.str||(Se=_e.data.contentsObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.richText)!==null&&$e!==void 0&&$e.str),ignoreBorder:!0,createQuadrilaterals:!0}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}])}(P),ve=function(Te){function ye(_e){var we,Se,$e;return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(we=_e.data.titleObj)!==null&&we!==void 0&&we.str||(Se=_e.data.contentsObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.richText)!==null&&$e!==void 0&&$e.str),ignoreBorder:!0,createQuadrilaterals:!0}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}])}(P),ke=function(Te){function ye(_e){var we,Se,$e;return _classCallCheck(this,ye),_callSuper(this,ye,[_e,{isRenderable:!!(_e.data.hasPopup||(we=_e.data.titleObj)!==null&&we!==void 0&&we.str||(Se=_e.data.contentsObj)!==null&&Se!==void 0&&Se.str||($e=_e.data.richText)!==null&&$e!==void 0&&$e.str),ignoreBorder:!0}])}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}])}(P),Ce=function(Te){function ye(_e){var we,Se;_classCallCheck(this,ye);var $e=(we=_callSuper(this,ye,[_e,{isRenderable:!0}])).data.file,Be=$e.filename,Oe=$e.content;return we.filename=(0,u.getFilenameFromUrl)(Be,!0),we.content=Oe,(Se=we.linkService.eventBus)===null||Se===void 0||Se.dispatch("fileattachmentannotation",{source:we,filename:Be,content:Oe}),we}return _inherits(ye,Te),_createClass(ye,[{key:"render",value:function(){var _e,we,Se;return this.container.classList.add("fileAttachmentAnnotation"),this.data.hasAppearance?Se=document.createElement("div"):(Se=document.createElement("img")).src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(this.data.name)?"paperclip":"pushpin",".svg"),Se.classList.add("popupTriggerArea"),Se.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((_e=this.data.titleObj)!==null&&_e!==void 0&&_e.str||(we=this.data.contentsObj)!==null&&we!==void 0&&we.str||this.data.richText)&&this._createPopup(Se,this.data),this.container.append(Se),this.container}},{key:"_download",value:function(){var _e;(_e=this.downloadManager)===null||_e===void 0||_e.openOrDownloadData(this.container,this.content,this.filename)}}])}(P),Pe=function(){function Te(){_classCallCheck(this,Te)}return _createClass(Te,null,[{key:"render",value:function(ye){var _e=ye.annotations,we=ye.div,Se=ye.viewport,$e=ye.accessibilityManager;(0,u.setLayerDimensions)(we,Se);var Be,Oe={data:null,layer:we,page:ye.page,viewport:Se,linkService:ye.linkService,downloadManager:ye.downloadManager,imageResourcesPath:ye.imageResourcesPath||"",renderForms:ye.renderForms!==!1,svgFactory:new u.DOMSVGFactory,annotationStorage:ye.annotationStorage||new s.AnnotationStorage,enableScripting:ye.enableScripting===!0,hasJSActions:ye.hasJSActions,fieldObjects:ye.fieldObjects},Ge=0,Ie=_createForOfIteratorHelper(_e);try{for(Ie.s();!(Be=Ie.n()).done;){var je=Be.value;if(!je.noHTML){if(je.annotationType!==o.AnnotationType.POPUP){var qe=x(je.rect),Ue=qe.width,Je=qe.height;if(Ue<=0||Je<=0)continue}Oe.data=je;var et=k.create(Oe);if(et.isRenderable){var nt=et.render();if(je.hidden&&(nt.style.visibility="hidden"),Array.isArray(nt)){var st,gt=_createForOfIteratorHelper(nt);try{for(gt.s();!(st=gt.n()).done;){var _t=st.value;_t.style.zIndex=Ge++,v(Te,Te,Me).call(Te,_t,je.id,we,$e)}}catch(wt){gt.e(wt)}finally{gt.f()}}else nt.style.zIndex=Ge++,et instanceof q?we.prepend(nt):v(Te,Te,Me).call(Te,nt,je.id,we,$e)}}}}catch(wt){Ie.e(wt)}finally{Ie.f()}v(this,Te,Le).call(this,we,ye.annotationCanvasMap)}},{key:"update",value:function(ye){var _e=ye.annotationCanvasMap,we=ye.div,Se=ye.viewport;(0,u.setLayerDimensions)(we,{rotation:Se.rotation}),v(this,Te,Le).call(this,we,_e),we.hidden=!1}}])}();function Me(Te,ye,_e,we){var Se=Te.firstChild||Te;Se.id="".concat(u.AnnotationPrefix).concat(ye),_e.append(Te),we==null||we.moveElementInDOM(_e,Te,Se,!1)}function Le(Te,ye){if(ye){var _e,we=_createForOfIteratorHelper(ye);try{for(we.s();!(_e=we.n()).done;){var Se=_slicedToArray(_e.value,2),$e=Se[0],Be=Se[1],Oe=Te.querySelector('[data-annotation-id="'.concat($e,'"]'));if(Oe){var Ge=Oe.firstChild;Ge?Ge.nodeName==="CANVAS"?Ge.replaceWith(Be):Ge.before(Be):Oe.append(Be)}}}catch(Ie){we.e(Ie)}finally{we.f()}ye.clear()}}n.AnnotationLayer=Pe},function(e,n){function r(u){return Math.floor(255*Math.max(0,Math.min(1,u))).toString(16).padStart(2,"0")}Object.defineProperty(n,"__esModule",{value:!0}),n.ColorConverters=void 0;var o=function(){return _createClass(function u(){_classCallCheck(this,u)},null,[{key:"CMYK_G",value:function(u){var s=_slicedToArray(u,4),w=s[0],g=s[1],v=s[2],y=s[3];return["G",1-Math.min(1,.3*w+.59*v+.11*g+y)]}},{key:"G_CMYK",value:function(u){return["CMYK",0,0,0,1-_slicedToArray(u,1)[0]]}},{key:"G_RGB",value:function(u){var s=_slicedToArray(u,1)[0];return["RGB",s,s,s]}},{key:"G_HTML",value:function(u){var s=r(_slicedToArray(u,1)[0]);return"#".concat(s).concat(s).concat(s)}},{key:"RGB_G",value:function(u){var s=_slicedToArray(u,3);return["G",.3*s[0]+.59*s[1]+.11*s[2]]}},{key:"RGB_HTML",value:function(u){var s=_slicedToArray(u,3),w=s[0],g=s[1],v=s[2],y=r(w),m=r(g),d=r(v);return"#".concat(y).concat(m).concat(d)}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"CMYK_RGB",value:function(u){var s=_slicedToArray(u,4),w=s[0],g=s[1],v=s[2],y=s[3];return["RGB",1-Math.min(1,w+y),1-Math.min(1,v+y),1-Math.min(1,g+y)]}},{key:"CMYK_HTML",value:function(u){var s=this.CMYK_RGB(u).slice(1);return this.RGB_HTML(s)}},{key:"RGB_CMYK",value:function(u){var s=_slicedToArray(u,3),w=1-s[0],g=1-s[1],v=1-s[2];return["CMYK",w,g,v,Math.min(w,g,v)]}}])}();n.ColorConverters=o},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.XfaLayer=void 0;var o=r(154),u=function(){return _createClass(function s(){_classCallCheck(this,s)},null,[{key:"setupStorage",value:function(s,w,g,v,y){var m=v.getValue(w,{value:null});switch(g.name){case"textarea":if(m.value!==null&&(s.textContent=m.value),y==="print")break;s.addEventListener("input",function(k){v.setValue(w,{value:k.target.value})});break;case"input":if(g.attributes.type==="radio"||g.attributes.type==="checkbox"){if(m.value===g.attributes.xfaOn?s.setAttribute("checked",!0):m.value===g.attributes.xfaOff&&s.removeAttribute("checked"),y==="print")break;s.addEventListener("change",function(k){v.setValue(w,{value:k.target.checked?k.target.getAttribute("xfaOn"):k.target.getAttribute("xfaOff")})})}else{if(m.value!==null&&s.setAttribute("value",m.value),y==="print")break;s.addEventListener("input",function(k){v.setValue(w,{value:k.target.value})})}break;case"select":if(m.value!==null){var d,f=_createForOfIteratorHelper(g.children);try{for(f.s();!(d=f.n()).done;){var x=d.value;x.attributes.value===m.value&&(x.attributes.selected=!0)}}catch(k){f.e(k)}finally{f.f()}}s.addEventListener("input",function(k){var P=k.target.options,S=P.selectedIndex===-1?"":P[P.selectedIndex].value;v.setValue(w,{value:S})})}}},{key:"setAttributes",value:function(s){var w=s.html,g=s.element,v=s.storage,y=v===void 0?null:v,m=s.intent,d=s.linkService,f=g.attributes,x=w instanceof HTMLAnchorElement;f.type==="radio"&&(f.name="".concat(f.name,"-").concat(m));for(var k=0,P=Object.entries(f);k<P.length;k++){var S=_slicedToArray(P[k],2),E=S[0],M=S[1];if(M!=null)switch(E){case"class":M.length&&w.setAttribute(E,M.join(" "));break;case"dataId":break;case"id":w.setAttribute("data-element-id",M);break;case"style":Object.assign(w.style,M);break;case"textContent":w.textContent=M;break;default:(!x||E!=="href"&&E!=="newWindow")&&w.setAttribute(E,M)}}x&&d.addLinkAttributes(w,f.href,f.newWindow),y&&f.dataId&&this.setupStorage(w,f.dataId,g,y)}},{key:"render",value:function(s){var w=s.annotationStorage,g=s.linkService,v=s.xfaHtml,y=s.intent||"display",m=document.createElement(v.name);v.attributes&&this.setAttributes({html:m,element:v,intent:y,linkService:g});var d=[[v,-1,m]],f=s.div;if(f.append(m),s.viewport){var x="matrix(".concat(s.viewport.transform.join(","),")");f.style.transform=x}y!=="richText"&&f.setAttribute("class","xfaLayer xfaFont");for(var k=[];d.length>0;){var P,S=_slicedToArray(d.at(-1),3),E=S[0],M=S[1],T=S[2];if(M+1!==E.children.length){var D=E.children[++d.at(-1)[1]];if(D!==null){var I=D.name;if(I!=="#text"){var N=void 0;if(N=D!=null&&(P=D.attributes)!==null&&P!==void 0&&P.xmlns?document.createElementNS(D.attributes.xmlns,I):document.createElement(I),T.append(N),D.attributes&&this.setAttributes({html:N,element:D,storage:w,intent:y,linkService:g}),D.children&&D.children.length>0)d.push([D,-1,N]);else if(D.value){var O=document.createTextNode(D.value);o.XfaText.shouldBuildText(I)&&k.push(O),N.append(O)}}else{var F=document.createTextNode(D.value);k.push(F),T.append(F)}}}else d.pop()}var U,Y=_createForOfIteratorHelper(f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(Y.s();!(U=Y.n()).done;)U.value.setAttribute("readOnly",!0)}catch(Q){Y.e(Q)}finally{Y.f()}return{textDivs:k}}},{key:"update",value:function(s){var w="matrix(".concat(s.viewport.transform.join(","),")");s.div.style.transform=w,s.div.hidden=!1}}])}();n.XfaLayer=u},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var o=r(142),u=r(1),s=r(3),w=_createClass(function M(){_classCallCheck(this,M),(0,u.unreachable)("Not implemented: SVGGraphics")});n.SVGGraphics=w;var g=function(M){if(Number.isInteger(M))return M.toString();var T=M.toFixed(10),D=T.length-1;if(T[D]!=="0")return T;do D--;while(T[D]==="0");return T.substring(0,T[D]==="."?D:D+1)},v=function(M){if(M[4]===0&&M[5]===0){if(M[1]===0&&M[2]===0)return M[0]===1&&M[3]===1?"":"scale(".concat(g(M[0])," ").concat(g(M[3]),")");if(M[0]===M[3]&&M[1]===-M[2]){var T=180*Math.acos(M[0])/Math.PI;return"rotate(".concat(g(T),")")}}else if(M[0]===1&&M[1]===0&&M[2]===0&&M[3]===1)return"translate(".concat(g(M[4])," ").concat(g(M[5]),")");return"matrix(".concat(g(M[0])," ").concat(g(M[1])," ").concat(g(M[2])," ").concat(g(M[3])," ").concat(g(M[4])," ")+"".concat(g(M[5]),")")},y={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},m=["butt","round","square"],d=["miter","round","bevel"],f=function(M){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",D=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(URL.createObjectURL&&typeof Blob<"u"&&!D)return URL.createObjectURL(new Blob([M],{type:T}));for(var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",N="data:".concat(T,";base64,"),O=0,F=M.length;O<F;O+=3){var U=255&M[O],Y=255&M[O+1],Q=255&M[O+2];N+=I[U>>2]+I[(3&U)<<4|Y>>4]+I[O+1<F?(15&Y)<<2|Q>>6:64]+I[O+2<F?63&Q:64]}return N},x=function(){for(var M=new Uint8Array([137,80,78,71,13,10,26,10]),T=new Int32Array(256),D=0;D<256;D++){for(var I=D,N=0;N<8;N++)I=1&I?3988292384^I>>1&2147483647:I>>1&2147483647;T[D]=I}function O(Y,Q,q,ne){var J=ne,re=Q.length;q[J]=re>>24&255,q[J+1]=re>>16&255,q[J+2]=re>>8&255,q[J+3]=255&re,q[J+=4]=255&Y.charCodeAt(0),q[J+1]=255&Y.charCodeAt(1),q[J+2]=255&Y.charCodeAt(2),q[J+3]=255&Y.charCodeAt(3),J+=4,q.set(Q,J);var X=function(j,Z,W){for(var te=-1,le=Z;le<W;le++){var oe=255&(te^j[le]);te=te>>>8^T[oe]}return~te}(q,ne+4,J+=Q.length);q[J]=X>>24&255,q[J+1]=X>>16&255,q[J+2]=X>>8&255,q[J+3]=255&X}function F(Y){var Q=Y.length,q=65535,ne=Math.ceil(Q/q),J=new Uint8Array(2+Q+5*ne+4),re=0;J[re++]=120,J[re++]=156;for(var X=0;Q>q;)J[re++]=0,J[re++]=255,J[re++]=255,J[re++]=0,J[re++]=0,J.set(Y.subarray(X,X+q),re),re+=q,X+=q,Q-=q;J[re++]=1,J[re++]=255&Q,J[re++]=Q>>8&255,J[re++]=255&~Q,J[re++]=(65535&~Q)>>8&255,J.set(Y.subarray(X),re),re+=Y.length-X;var j=function(Z,W,te){for(var le=1,oe=0,Ee=W;Ee<te;++Ee)oe=(oe+(le=(le+(255&Z[Ee]))%65521))%65521;return oe<<16|le}(Y,0,Y.length);return J[re++]=j>>24&255,J[re++]=j>>16&255,J[re++]=j>>8&255,J[re++]=255&j,J}function U(Y,Q,q,ne){var J,re,X,j=Y.width,Z=Y.height,W=Y.data;switch(Q){case u.ImageKind.GRAYSCALE_1BPP:re=0,J=1,X=j+7>>3;break;case u.ImageKind.RGB_24BPP:re=2,J=8,X=3*j;break;case u.ImageKind.RGBA_32BPP:re=6,J=8,X=4*j;break;default:throw new Error("invalid format")}for(var te=new Uint8Array((1+X)*Z),le=0,oe=0,Ee=0;Ee<Z;++Ee)te[le++]=0,te.set(W.subarray(oe,oe+X),le),oe+=X,le+=X;if(Q===u.ImageKind.GRAYSCALE_1BPP&&ne){le=0;for(var Ae=0;Ae<Z;Ae++){le++;for(var ve=0;ve<X;ve++)te[le++]^=255}}var ke=new Uint8Array([j>>24&255,j>>16&255,j>>8&255,255&j,Z>>24&255,Z>>16&255,Z>>8&255,255&Z,J,re,0,0,0]),Ce=function(Te){if(!s.isNodeJS)return F(Te);try{var ye;ye=parseInt(process.versions.node)>=8?Te:Buffer.from(Te);var _e=require$$0.deflateSync(ye,{level:9});return _e instanceof Uint8Array?_e:new Uint8Array(_e)}catch(we){(0,u.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+we)}return F(Te)}(te),Pe=M.length+36+ke.length+Ce.length,Me=new Uint8Array(Pe),Le=0;return Me.set(M,Le),O("IHDR",ke,Me,Le+=M.length),O("IDATA",Ce,Me,Le+=12+ke.length),Le+=12+Ce.length,O("IEND",new Uint8Array(0),Me,Le),f(Me,"image/png",q)}return function(Y,Q,q){return U(Y,Y.kind===void 0?u.ImageKind.GRAYSCALE_1BPP:Y.kind,Q,q)}}(),k=function(){return _createClass(function M(){_classCallCheck(this,M),this.fontSizeScale=1,this.fontWeight=y.fontWeight,this.fontSize=0,this.textMatrix=u.IDENTITY_MATRIX,this.fontMatrix=u.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=u.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=y.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""},[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(M,T){this.x=M,this.y=T}}])}(),P=0,S=0,E=0;n.SVGGraphics=w=function(){return _createClass(function M(T,D){_classCallCheck(this,M);var I=arguments.length>2&&arguments[2]!==void 0&&arguments[2];for(var N in(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new k,this.transformMatrix=u.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=T,this.objs=D,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!I,this._operatorIdMapping=[],u.OPS)this._operatorIdMapping[u.OPS[N]]=N},[{key:"getObject",value:function(M){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof M=="string"?M.startsWith("g_")?this.commonObjs.get(M):this.objs.get(M):T}},{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var M=this.current;this.extraStack.push(M),this.current=M.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(M){this.save(),this.executeOpTree(M),this.restore()}},{key:"loadDependencies",value:function(M){for(var T=this,D=M.fnArray,I=M.argsArray,N=0,O=D.length;N<O;N++)if(D[N]===u.OPS.dependency){var F,U=_createForOfIteratorHelper(I[N]);try{var Y=function(){var Q=F.value,q=Q.startsWith("g_")?T.commonObjs:T.objs,ne=new Promise(function(J){q.get(Q,J)});T.current.dependencies.push(ne)};for(U.s();!(F=U.n()).done;)Y()}catch(Q){U.e(Q)}finally{U.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(M,T,D,I,N,O){var F=[M,T,D,I,N,O];this.transformMatrix=u.Util.transform(this.transformMatrix,F),this.tgrp=null}},{key:"getSVG",value:function(M,T){var D=this;this.viewport=T;var I=this._initialize(T);return this.loadDependencies(M).then(function(){return D.transformMatrix=u.IDENTITY_MATRIX,D.executeOpTree(D.convertOpList(M)),I})}},{key:"convertOpList",value:function(M){for(var T=this._operatorIdMapping,D=M.argsArray,I=M.fnArray,N=[],O=0,F=I.length;O<F;O++){var U=I[O];N.push({fnId:U,fn:T[U],args:D[O]})}return function(Y){var Q,q=[],ne=[],J=_createForOfIteratorHelper(Y);try{for(J.s();!(Q=J.n()).done;){var re=Q.value;re.fn!=="save"?re.fn==="restore"?q=ne.pop():q.push(re):(q.push({fnId:92,fn:"group",items:[]}),ne.push(q),q=q.at(-1).items)}}catch(X){J.e(X)}finally{J.f()}return q}(N)}},{key:"executeOpTree",value:function(M){var T,D=_createForOfIteratorHelper(M);try{for(D.s();!(T=D.n()).done;){var I=T.value,N=I.fn,O=I.fnId,F=I.args;switch(0|O){case u.OPS.beginText:this.beginText();break;case u.OPS.dependency:break;case u.OPS.setLeading:this.setLeading(F);break;case u.OPS.setLeadingMoveText:this.setLeadingMoveText(F[0],F[1]);break;case u.OPS.setFont:this.setFont(F);break;case u.OPS.showText:case u.OPS.showSpacedText:this.showText(F[0]);break;case u.OPS.endText:this.endText();break;case u.OPS.moveText:this.moveText(F[0],F[1]);break;case u.OPS.setCharSpacing:this.setCharSpacing(F[0]);break;case u.OPS.setWordSpacing:this.setWordSpacing(F[0]);break;case u.OPS.setHScale:this.setHScale(F[0]);break;case u.OPS.setTextMatrix:this.setTextMatrix(F[0],F[1],F[2],F[3],F[4],F[5]);break;case u.OPS.setTextRise:this.setTextRise(F[0]);break;case u.OPS.setTextRenderingMode:this.setTextRenderingMode(F[0]);break;case u.OPS.setLineWidth:this.setLineWidth(F[0]);break;case u.OPS.setLineJoin:this.setLineJoin(F[0]);break;case u.OPS.setLineCap:this.setLineCap(F[0]);break;case u.OPS.setMiterLimit:this.setMiterLimit(F[0]);break;case u.OPS.setFillRGBColor:this.setFillRGBColor(F[0],F[1],F[2]);break;case u.OPS.setStrokeRGBColor:this.setStrokeRGBColor(F[0],F[1],F[2]);break;case u.OPS.setStrokeColorN:this.setStrokeColorN(F);break;case u.OPS.setFillColorN:this.setFillColorN(F);break;case u.OPS.shadingFill:this.shadingFill(F[0]);break;case u.OPS.setDash:this.setDash(F[0],F[1]);break;case u.OPS.setRenderingIntent:this.setRenderingIntent(F[0]);break;case u.OPS.setFlatness:this.setFlatness(F[0]);break;case u.OPS.setGState:this.setGState(F[0]);break;case u.OPS.fill:this.fill();break;case u.OPS.eoFill:this.eoFill();break;case u.OPS.stroke:this.stroke();break;case u.OPS.fillStroke:this.fillStroke();break;case u.OPS.eoFillStroke:this.eoFillStroke();break;case u.OPS.clip:this.clip("nonzero");break;case u.OPS.eoClip:this.clip("evenodd");break;case u.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case u.OPS.paintImageXObject:this.paintImageXObject(F[0]);break;case u.OPS.paintInlineImageXObject:this.paintInlineImageXObject(F[0]);break;case u.OPS.paintImageMaskXObject:this.paintImageMaskXObject(F[0]);break;case u.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(F[0],F[1]);break;case u.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case u.OPS.closePath:this.closePath();break;case u.OPS.closeStroke:this.closeStroke();break;case u.OPS.closeFillStroke:this.closeFillStroke();break;case u.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case u.OPS.nextLine:this.nextLine();break;case u.OPS.transform:this.transform(F[0],F[1],F[2],F[3],F[4],F[5]);break;case u.OPS.constructPath:this.constructPath(F[0],F[1]);break;case u.OPS.endPath:this.endPath();break;case 92:this.group(I.items);break;default:(0,u.warn)("Unimplemented operator ".concat(N))}}}catch(U){D.e(U)}finally{D.f()}}},{key:"setWordSpacing",value:function(M){this.current.wordSpacing=M}},{key:"setCharSpacing",value:function(M){this.current.charSpacing=M}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(M,T,D,I,N,O){var F=this.current;F.textMatrix=F.lineMatrix=[M,T,D,I,N,O],F.textMatrixScale=Math.hypot(M,T),F.x=F.lineX=0,F.y=F.lineY=0,F.xcoords=[],F.ycoords=[],F.tspan=this.svgFactory.createElement("svg:tspan"),F.tspan.setAttributeNS(null,"font-family",F.fontFamily),F.tspan.setAttributeNS(null,"font-size","".concat(g(F.fontSize),"px")),F.tspan.setAttributeNS(null,"y",g(-F.y)),F.txtElement=this.svgFactory.createElement("svg:text"),F.txtElement.append(F.tspan)}},{key:"beginText",value:function(){var M=this.current;M.x=M.lineX=0,M.y=M.lineY=0,M.textMatrix=u.IDENTITY_MATRIX,M.lineMatrix=u.IDENTITY_MATRIX,M.textMatrixScale=1,M.tspan=this.svgFactory.createElement("svg:tspan"),M.txtElement=this.svgFactory.createElement("svg:text"),M.txtgrp=this.svgFactory.createElement("svg:g"),M.xcoords=[],M.ycoords=[]}},{key:"moveText",value:function(M,T){var D=this.current;D.x=D.lineX+=M,D.y=D.lineY+=T,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size","".concat(g(D.fontSize),"px")),D.tspan.setAttributeNS(null,"y",g(-D.y))}},{key:"showText",value:function(M){var T=this.current,D=T.font,I=T.fontSize;if(I!==0){var N,O=T.fontSizeScale,F=T.charSpacing,U=T.wordSpacing,Y=T.fontDirection,Q=T.textHScale*Y,q=D.vertical,ne=q?1:-1,J=D.defaultVMetrics,re=I*T.fontMatrix[0],X=0,j=_createForOfIteratorHelper(M);try{for(j.s();!(N=j.n()).done;){var Z=N.value;if(Z!==null)if(typeof Z!="number"){var W=(Z.isSpace?U:0)+F,te=Z.fontChar,le=void 0,oe=void 0,Ee=Z.width;if(q){var Ae=void 0,ve=Z.vmetric||J;Ae=-(Ae=Z.vmetric?ve[1]:.5*Ee)*re;var ke=ve[2]*re;Ee=ve?-ve[0]:Ee,le=Ae/O,oe=(X+ke)/O}else le=X/O,oe=0;(Z.isInFont||D.missingFile)&&(T.xcoords.push(T.x+le),q&&T.ycoords.push(-T.y+oe),T.tspan.textContent+=te),X+=q?Ee*re-W*Y:Ee*re+W*Y}else X+=ne*Z*I/1e3;else X+=Y*U}}catch(Le){j.e(Le)}finally{j.f()}T.tspan.setAttributeNS(null,"x",T.xcoords.map(g).join(" ")),q?T.tspan.setAttributeNS(null,"y",T.ycoords.map(g).join(" ")):T.tspan.setAttributeNS(null,"y",g(-T.y)),q?T.y-=X:T.x+=X*Q,T.tspan.setAttributeNS(null,"font-family",T.fontFamily),T.tspan.setAttributeNS(null,"font-size","".concat(g(T.fontSize),"px")),T.fontStyle!==y.fontStyle&&T.tspan.setAttributeNS(null,"font-style",T.fontStyle),T.fontWeight!==y.fontWeight&&T.tspan.setAttributeNS(null,"font-weight",T.fontWeight);var Ce=T.textRenderingMode&u.TextRenderingMode.FILL_STROKE_MASK;if(Ce===u.TextRenderingMode.FILL||Ce===u.TextRenderingMode.FILL_STROKE?(T.fillColor!==y.fillColor&&T.tspan.setAttributeNS(null,"fill",T.fillColor),T.fillAlpha<1&&T.tspan.setAttributeNS(null,"fill-opacity",T.fillAlpha)):T.textRenderingMode===u.TextRenderingMode.ADD_TO_PATH?T.tspan.setAttributeNS(null,"fill","transparent"):T.tspan.setAttributeNS(null,"fill","none"),Ce===u.TextRenderingMode.STROKE||Ce===u.TextRenderingMode.FILL_STROKE){var Pe=1/(T.textMatrixScale||1);this._setStrokeAttributes(T.tspan,Pe)}var Me=T.textMatrix;T.textRise!==0&&((Me=Me.slice())[5]+=T.textRise),T.txtElement.setAttributeNS(null,"transform","".concat(v(Me)," scale(").concat(g(Q),", -1)")),T.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),T.txtElement.append(T.tspan),T.txtgrp.append(T.txtElement),this._ensureTransformGroup().append(T.txtElement)}}},{key:"setLeadingMoveText",value:function(M,T){this.setLeading(-T),this.moveText(M,T)}},{key:"addFontStyle",value:function(M){if(!M.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));var T=f(M.data,M.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(M.loadedName,'";')+" src: url(".concat(T,`); }
`)}},{key:"setFont",value:function(M){var T=this.current,D=this.commonObjs.get(M[0]),I=M[1];T.font=D,!this.embedFonts||D.missingFile||this.embeddedFonts[D.loadedName]||(this.addFontStyle(D),this.embeddedFonts[D.loadedName]=D),T.fontMatrix=D.fontMatrix||u.FONT_IDENTITY_MATRIX;var N="normal";D.black?N="900":D.bold&&(N="bold");var O=D.italic?"italic":"normal";I<0?(I=-I,T.fontDirection=-1):T.fontDirection=1,T.fontSize=I,T.fontFamily=D.loadedName,T.fontWeight=N,T.fontStyle=O,T.tspan=this.svgFactory.createElement("svg:tspan"),T.tspan.setAttributeNS(null,"y",g(-T.y)),T.xcoords=[],T.ycoords=[]}},{key:"endText",value:function(){var M,T=this.current;T.textRenderingMode&u.TextRenderingMode.ADD_TO_PATH_FLAG&&(M=T.txtElement)!==null&&M!==void 0&&M.hasChildNodes()&&(T.element=T.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(M){M>0&&(this.current.lineWidth=M)}},{key:"setLineCap",value:function(M){this.current.lineCap=m[M]}},{key:"setLineJoin",value:function(M){this.current.lineJoin=d[M]}},{key:"setMiterLimit",value:function(M){this.current.miterLimit=M}},{key:"setStrokeAlpha",value:function(M){this.current.strokeAlpha=M}},{key:"setStrokeRGBColor",value:function(M,T,D){this.current.strokeColor=u.Util.makeHexColor(M,T,D)}},{key:"setFillAlpha",value:function(M){this.current.fillAlpha=M}},{key:"setFillRGBColor",value:function(M,T,D){this.current.fillColor=u.Util.makeHexColor(M,T,D),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function(M){this.current.strokeColor=this._makeColorN_Pattern(M)}},{key:"setFillColorN",value:function(M){this.current.fillColor=this._makeColorN_Pattern(M)}},{key:"shadingFill",value:function(M){var T=this.viewport.width,D=this.viewport.height,I=u.Util.inverseTransform(this.transformMatrix),N=u.Util.applyTransform([0,0],I),O=u.Util.applyTransform([0,D],I),F=u.Util.applyTransform([T,0],I),U=u.Util.applyTransform([T,D],I),Y=Math.min(N[0],O[0],F[0],U[0]),Q=Math.min(N[1],O[1],F[1],U[1]),q=Math.max(N[0],O[0],F[0],U[0]),ne=Math.max(N[1],O[1],F[1],U[1]),J=this.svgFactory.createElement("svg:rect");J.setAttributeNS(null,"x",Y),J.setAttributeNS(null,"y",Q),J.setAttributeNS(null,"width",q-Y),J.setAttributeNS(null,"height",ne-Q),J.setAttributeNS(null,"fill",this._makeShadingPattern(M)),this.current.fillAlpha<1&&J.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(J)}},{key:"_makeColorN_Pattern",value:function(M){return M[0]==="TilingPattern"?this._makeTilingPattern(M):this._makeShadingPattern(M)}},{key:"_makeTilingPattern",value:function(M){var T=M[1],D=M[2],I=M[3]||u.IDENTITY_MATRIX,N=_slicedToArray(M[4],4),O=N[0],F=N[1],U=N[2],Y=N[3],Q=M[5],q=M[6],ne=M[7],J="shading".concat(E++),re=_slicedToArray(u.Util.normalizeRect([].concat(_toConsumableArray$1(u.Util.applyTransform([O,F],I)),_toConsumableArray$1(u.Util.applyTransform([U,Y],I)))),4),X=re[0],j=re[1],Z=re[2],W=re[3],te=_slicedToArray(u.Util.singularValueDecompose2dScale(I),2),le=Q*te[0],oe=q*te[1],Ee=this.svgFactory.createElement("svg:pattern");Ee.setAttributeNS(null,"id",J),Ee.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Ee.setAttributeNS(null,"width",le),Ee.setAttributeNS(null,"height",oe),Ee.setAttributeNS(null,"x","".concat(X)),Ee.setAttributeNS(null,"y","".concat(j));var Ae=this.svg,ve=this.transformMatrix,ke=this.current.fillColor,Ce=this.current.strokeColor,Pe=this.svgFactory.create(Z-X,W-j);if(this.svg=Pe,this.transformMatrix=I,ne===2){var Me,Le=(Me=u.Util).makeHexColor.apply(Me,_toConsumableArray$1(T));this.current.fillColor=Le,this.current.strokeColor=Le}return this.executeOpTree(this.convertOpList(D)),this.svg=Ae,this.transformMatrix=ve,this.current.fillColor=ke,this.current.strokeColor=Ce,Ee.append(Pe.childNodes[0]),this.defs.append(Ee),"url(#".concat(J,")")}},{key:"_makeShadingPattern",value:function(M){switch(typeof M=="string"&&(M=this.objs.get(M)),M[0]){case"RadialAxial":var T,D="shading".concat(E++),I=M[3];switch(M[1]){case"axial":var N=M[4],O=M[5];(T=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",D),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"x1",N[0]),T.setAttributeNS(null,"y1",N[1]),T.setAttributeNS(null,"x2",O[0]),T.setAttributeNS(null,"y2",O[1]);break;case"radial":var F=M[4],U=M[5],Y=M[6],Q=M[7];(T=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",D),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"cx",U[0]),T.setAttributeNS(null,"cy",U[1]),T.setAttributeNS(null,"r",Q),T.setAttributeNS(null,"fx",F[0]),T.setAttributeNS(null,"fy",F[1]),T.setAttributeNS(null,"fr",Y);break;default:throw new Error("Unknown RadialAxial type: ".concat(M[1]))}var q,ne=_createForOfIteratorHelper(I);try{for(ne.s();!(q=ne.n()).done;){var J=q.value,re=this.svgFactory.createElement("svg:stop");re.setAttributeNS(null,"offset",J[0]),re.setAttributeNS(null,"stop-color",J[1]),T.append(re)}}catch(X){ne.e(X)}finally{ne.f()}return this.defs.append(T),"url(#".concat(D,")");case"Mesh":return(0,u.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(M[0]))}}},{key:"setDash",value:function(M,T){this.current.dashArray=M,this.current.dashPhase=T}},{key:"constructPath",value:function(M,T){var D,I=this.current,N=I.x,O=I.y,F=[],U=0,Y=_createForOfIteratorHelper(M);try{for(Y.s();!(D=Y.n()).done;)switch(0|D.value){case u.OPS.rectangle:N=T[U++],O=T[U++];var Q=T[U++],q=T[U++],ne=N+Q,J=O+q;F.push("M",g(N),g(O),"L",g(ne),g(O),"L",g(ne),g(J),"L",g(N),g(J),"Z");break;case u.OPS.moveTo:N=T[U++],O=T[U++],F.push("M",g(N),g(O));break;case u.OPS.lineTo:N=T[U++],O=T[U++],F.push("L",g(N),g(O));break;case u.OPS.curveTo:N=T[U+4],O=T[U+5],F.push("C",g(T[U]),g(T[U+1]),g(T[U+2]),g(T[U+3]),g(N),g(O)),U+=6;break;case u.OPS.curveTo2:F.push("C",g(N),g(O),g(T[U]),g(T[U+1]),g(T[U+2]),g(T[U+3])),N=T[U+2],O=T[U+3],U+=4;break;case u.OPS.curveTo3:N=T[U+2],O=T[U+3],F.push("C",g(T[U]),g(T[U+1]),g(N),g(O),g(N),g(O)),U+=4;break;case u.OPS.closePath:F.push("Z")}}catch(re){Y.e(re)}finally{Y.f()}F=F.join(" "),I.path&&M.length>0&&M[0]!==u.OPS.rectangle&&M[0]!==u.OPS.moveTo?F=I.path.getAttributeNS(null,"d")+F:(I.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(I.path)),I.path.setAttributeNS(null,"d",F),I.path.setAttributeNS(null,"fill","none"),I.element=I.path,I.setCurrentPoint(N,O)}},{key:"endPath",value:function(){var M=this.current;if(M.path=null,this.pendingClip)if(M.element){var T="clippath".concat(P++),D=this.svgFactory.createElement("svg:clipPath");D.setAttributeNS(null,"id",T),D.setAttributeNS(null,"transform",v(this.transformMatrix));var I=M.element.cloneNode(!0);if(this.pendingClip==="evenodd"?I.setAttributeNS(null,"clip-rule","evenodd"):I.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,D.append(I),this.defs.append(D),M.activeClipUrl){M.clipGroup=null;var N,O=_createForOfIteratorHelper(this.extraStack);try{for(O.s();!(N=O.n()).done;)N.value.clipGroup=null}catch(F){O.e(F)}finally{O.f()}D.setAttributeNS(null,"clip-path",M.activeClipUrl)}M.activeClipUrl="url(#".concat(T,")"),this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function(M){this.pendingClip=M}},{key:"closePath",value:function(){var M=this.current;if(M.path){var T="".concat(M.path.getAttributeNS(null,"d"),"Z");M.path.setAttributeNS(null,"d",T)}}},{key:"setLeading",value:function(M){this.current.leading=-M}},{key:"setTextRise",value:function(M){this.current.textRise=M}},{key:"setTextRenderingMode",value:function(M){this.current.textRenderingMode=M}},{key:"setHScale",value:function(M){this.current.textHScale=M/100}},{key:"setRenderingIntent",value:function(M){}},{key:"setFlatness",value:function(M){}},{key:"setGState",value:function(M){var T,D=_createForOfIteratorHelper(M);try{for(D.s();!(T=D.n()).done;){var I=_slicedToArray(T.value,2),N=I[0],O=I[1];switch(N){case"LW":this.setLineWidth(O);break;case"LC":this.setLineCap(O);break;case"LJ":this.setLineJoin(O);break;case"ML":this.setMiterLimit(O);break;case"D":this.setDash(O[0],O[1]);break;case"RI":this.setRenderingIntent(O);break;case"FL":this.setFlatness(O);break;case"Font":this.setFont(O);break;case"CA":this.setStrokeAlpha(O);break;case"ca":this.setFillAlpha(O);break;default:(0,u.warn)("Unimplemented graphic state operator ".concat(N))}}}catch(F){D.e(F)}finally{D.f()}}},{key:"fill",value:function(){var M=this.current;M.element&&(M.element.setAttributeNS(null,"fill",M.fillColor),M.element.setAttributeNS(null,"fill-opacity",M.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var M=this.current;M.element&&(this._setStrokeAttributes(M.element),M.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(M){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,D=this.current,I=D.dashArray;T!==1&&I.length>0&&(I=I.map(function(N){return T*N})),M.setAttributeNS(null,"stroke",D.strokeColor),M.setAttributeNS(null,"stroke-opacity",D.strokeAlpha),M.setAttributeNS(null,"stroke-miterlimit",g(D.miterLimit)),M.setAttributeNS(null,"stroke-linecap",D.lineCap),M.setAttributeNS(null,"stroke-linejoin",D.lineJoin),M.setAttributeNS(null,"stroke-width",g(T*D.lineWidth)+"px"),M.setAttributeNS(null,"stroke-dasharray",I.map(g).join(" ")),M.setAttributeNS(null,"stroke-dashoffset",g(T*D.dashPhase)+"px")}},{key:"eoFill",value:function(){var M;(M=this.current.element)===null||M===void 0||M.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){var M;(M=this.current.element)===null||M===void 0||M.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y","0"),M.setAttributeNS(null,"width","1px"),M.setAttributeNS(null,"height","1px"),M.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(M)}},{key:"paintImageXObject",value:function(M){var T=this.getObject(M);T?this.paintInlineImageXObject(T):(0,u.warn)("Dependent image with object ID ".concat(M," is not ready yet"))}},{key:"paintInlineImageXObject",value:function(M,T){var D=M.width,I=M.height,N=x(M,this.forceDataSchema,!!T),O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x","0"),O.setAttributeNS(null,"y","0"),O.setAttributeNS(null,"width",g(D)),O.setAttributeNS(null,"height",g(I)),this.current.element=O,this.clip("nonzero");var F=this.svgFactory.createElement("svg:image");F.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",N),F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y",g(-I)),F.setAttributeNS(null,"width",g(D)+"px"),F.setAttributeNS(null,"height",g(I)+"px"),F.setAttributeNS(null,"transform","scale(".concat(g(1/D)," ").concat(g(-1/I),")")),T?T.append(F):this._ensureTransformGroup().append(F)}},{key:"paintImageMaskXObject",value:function(M){var T=this.getObject(M.data,M);if(T.bitmap)(0,u.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");else{var D=this.current,I=T.width,N=T.height,O=D.fillColor;D.maskId="mask".concat(S++);var F=this.svgFactory.createElement("svg:mask");F.setAttributeNS(null,"id",D.maskId);var U=this.svgFactory.createElement("svg:rect");U.setAttributeNS(null,"x","0"),U.setAttributeNS(null,"y","0"),U.setAttributeNS(null,"width",g(I)),U.setAttributeNS(null,"height",g(N)),U.setAttributeNS(null,"fill",O),U.setAttributeNS(null,"mask","url(#".concat(D.maskId,")")),this.defs.append(F),this._ensureTransformGroup().append(U),this.paintInlineImageXObject(T,F)}}},{key:"paintFormXObjectBegin",value:function(M,T){if(Array.isArray(M)&&M.length===6&&this.transform(M[0],M[1],M[2],M[3],M[4],M[5]),T){var D=T[2]-T[0],I=T[3]-T[1],N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x",T[0]),N.setAttributeNS(null,"y",T[1]),N.setAttributeNS(null,"width",g(D)),N.setAttributeNS(null,"height",g(I)),this.current.element=N,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(M){var T=this.svgFactory.create(M.width,M.height),D=this.svgFactory.createElement("svg:defs");T.append(D),this.defs=D;var I=this.svgFactory.createElement("svg:g");return I.setAttributeNS(null,"transform",v(M.transform)),T.append(I),this.svg=I,T}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var M=this.svgFactory.createElement("svg:g");M.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(M),this.current.clipGroup=M}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}])}()}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var n=__webpack_module_cache__[e];if(n!==void 0)return n.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return function(){var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return n.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return s.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return n.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return n.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return w.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return g.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return n.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return n.CMapCompressionType}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return n.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return v.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return n.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return n.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return n.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return n.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return n.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return y.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return n.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return n.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return n.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return m.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return n.createPromiseCapability}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return n.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return n.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return u.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return r.version}});var n=__w_pdfjs_require__(1),r=__w_pdfjs_require__(138),o=__w_pdfjs_require__(142),u=__w_pdfjs_require__(161),s=__w_pdfjs_require__(162),w=__w_pdfjs_require__(141),g=__w_pdfjs_require__(167),v=__w_pdfjs_require__(149),y=__w_pdfjs_require__(170),m=__w_pdfjs_require__(169)}(),__webpack_exports__}()},module.exports=factory()})(pdf);var cryptoJsExports={},cryptoJs={get exports(){return cryptoJsExports},set exports(e){cryptoJsExports=e}},coreExports={},core$1={get exports(){return coreExports},set exports(e){coreExports=e}},hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,core$1.exports=function(){var e=e||function(n,r){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&commonjsGlobal$1!==void 0&&commonjsGlobal$1.crypto&&(o=commonjsGlobal$1.crypto),!o&&typeof commonjsRequire=="function")try{o=require$$0}catch{}var u=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function S(){}return function(E){var M;return S.prototype=E,M=new S,S.prototype=null,M}}(),w={},g=w.lib={},v=g.Base={extend:function(S){var E=s(this);return S&&E.mixIn(S),E.hasOwnProperty("init")&&this.init!==E.init||(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},create:function(){var S=this.extend();return S.init.apply(S,arguments),S},init:function(){},mixIn:function(S){for(var E in S)S.hasOwnProperty(E)&&(this[E]=S[E]);S.hasOwnProperty("toString")&&(this.toString=S.toString)},clone:function(){return this.init.prototype.extend(this)}},y=g.WordArray=v.extend({init:function(S,E){S=this.words=S||[],this.sigBytes=E!=r?E:4*S.length},toString:function(S){return(S||d).stringify(this)},concat:function(S){var E=this.words,M=S.words,T=this.sigBytes,D=S.sigBytes;if(this.clamp(),T%4)for(var I=0;I<D;I++){var N=M[I>>>2]>>>24-I%4*8&255;E[T+I>>>2]|=N<<24-(T+I)%4*8}else for(var O=0;O<D;O+=4)E[T+O>>>2]=M[O>>>2];return this.sigBytes+=D,this},clamp:function(){var S=this.words,E=this.sigBytes;S[E>>>2]&=4294967295<<32-E%4*8,S.length=n.ceil(E/4)},clone:function(){var S=v.clone.call(this);return S.words=this.words.slice(0),S},random:function(S){for(var E=[],M=0;M<S;M+=4)E.push(u());return new y.init(E,S)}}),m=w.enc={},d=m.Hex={stringify:function(S){for(var E=S.words,M=S.sigBytes,T=[],D=0;D<M;D++){var I=E[D>>>2]>>>24-D%4*8&255;T.push((I>>>4).toString(16)),T.push((15&I).toString(16))}return T.join("")},parse:function(S){for(var E=S.length,M=[],T=0;T<E;T+=2)M[T>>>3]|=parseInt(S.substr(T,2),16)<<24-T%8*4;return new y.init(M,E/2)}},f=m.Latin1={stringify:function(S){for(var E=S.words,M=S.sigBytes,T=[],D=0;D<M;D++){var I=E[D>>>2]>>>24-D%4*8&255;T.push(String.fromCharCode(I))}return T.join("")},parse:function(S){for(var E=S.length,M=[],T=0;T<E;T++)M[T>>>2]|=(255&S.charCodeAt(T))<<24-T%4*8;return new y.init(M,E)}},x=m.Utf8={stringify:function(S){try{return decodeURIComponent(escape(f.stringify(S)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(S){return f.parse(unescape(encodeURIComponent(S)))}},k=g.BufferedBlockAlgorithm=v.extend({reset:function(){this._data=new y.init,this._nDataBytes=0},_append:function(S){typeof S=="string"&&(S=x.parse(S)),this._data.concat(S),this._nDataBytes+=S.sigBytes},_process:function(S){var E,M=this._data,T=M.words,D=M.sigBytes,I=this.blockSize,N=D/(4*I),O=(N=S?n.ceil(N):n.max((0|N)-this._minBufferSize,0))*I,F=n.min(4*O,D);if(O){for(var U=0;U<O;U+=I)this._doProcessBlock(T,U);E=T.splice(0,O),M.sigBytes-=F}return new y.init(E,F)},clone:function(){var S=v.clone.call(this);return S._data=this._data.clone(),S},_minBufferSize:0});g.Hasher=k.extend({cfg:v.extend(),init:function(S){this.cfg=this.cfg.extend(S),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(S){return this._append(S),this._process(),this},finalize:function(S){return S&&this._append(S),this._doFinalize()},blockSize:16,_createHelper:function(S){return function(E,M){return new S.init(M).finalize(E)}},_createHmacHelper:function(S){return function(E,M){return new P.HMAC.init(S,M).finalize(E)}}});var P=w.algo={};return w}(Math);return e}()),coreExports}var x64CoreExports={},x64Core={get exports(){return x64CoreExports},set exports(e){x64CoreExports=e}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,x64Core.exports=function(e){return function(n){var r=e,o=r.lib,u=o.Base,s=o.WordArray,w=r.x64={};w.Word=u.extend({init:function(g,v){this.high=g,this.low=v}}),w.WordArray=u.extend({init:function(g,v){g=this.words=g||[],this.sigBytes=v!=n?v:8*g.length},toX32:function(){for(var g=this.words,v=g.length,y=[],m=0;m<v;m++){var d=g[m];y.push(d.high),y.push(d.low)}return s.create(y,this.sigBytes)},clone:function(){for(var g=u.clone.call(this),v=g.words=this.words.slice(0),y=v.length,m=0;m<y;m++)v[m]=v[m].clone();return g}})}(),e}(requireCore())),x64CoreExports}var libTypedarraysExports={},libTypedarrays={get exports(){return libTypedarraysExports},set exports(e){libTypedarraysExports=e}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,libTypedarrays.exports=function(e){return function(){if(typeof ArrayBuffer=="function"){var n=e.lib.WordArray,r=n.init,o=n.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var s=u.byteLength,w=[],g=0;g<s;g++)w[g>>>2]|=u[g]<<24-g%4*8;r.call(this,w,s)}else r.apply(this,arguments)};o.prototype=n}}(),e.lib.WordArray}(requireCore())),libTypedarraysExports}var encUtf16Exports={},encUtf16={get exports(){return encUtf16Exports},set exports(e){encUtf16Exports=e}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,encUtf16.exports=function(e){return function(){var n=e,r=n.lib.WordArray,o=n.enc;function u(s){return s<<8&4278255360|s>>>8&16711935}o.Utf16=o.Utf16BE={stringify:function(s){for(var w=s.words,g=s.sigBytes,v=[],y=0;y<g;y+=2){var m=w[y>>>2]>>>16-y%4*8&65535;v.push(String.fromCharCode(m))}return v.join("")},parse:function(s){for(var w=s.length,g=[],v=0;v<w;v++)g[v>>>1]|=s.charCodeAt(v)<<16-v%2*16;return r.create(g,2*w)}},o.Utf16LE={stringify:function(s){for(var w=s.words,g=s.sigBytes,v=[],y=0;y<g;y+=2){var m=u(w[y>>>2]>>>16-y%4*8&65535);v.push(String.fromCharCode(m))}return v.join("")},parse:function(s){for(var w=s.length,g=[],v=0;v<w;v++)g[v>>>1]|=u(s.charCodeAt(v)<<16-v%2*16);return r.create(g,2*w)}}}(),e.enc.Utf16}(requireCore())),encUtf16Exports}var encBase64Exports={},encBase64={get exports(){return encBase64Exports},set exports(e){encBase64Exports=e}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,encBase64.exports=function(e){return function(){var n=e,r=n.lib.WordArray;function o(u,s,w){for(var g=[],v=0,y=0;y<s;y++)if(y%4){var m=w[u.charCodeAt(y-1)]<<y%4*2|w[u.charCodeAt(y)]>>>6-y%4*2;g[v>>>2]|=m<<24-v%4*8,v++}return r.create(g,v)}n.enc.Base64={stringify:function(u){var s=u.words,w=u.sigBytes,g=this._map;u.clamp();for(var v=[],y=0;y<w;y+=3)for(var m=(s[y>>>2]>>>24-y%4*8&255)<<16|(s[y+1>>>2]>>>24-(y+1)%4*8&255)<<8|s[y+2>>>2]>>>24-(y+2)%4*8&255,d=0;d<4&&y+.75*d<w;d++)v.push(g.charAt(m>>>6*(3-d)&63));var f=g.charAt(64);if(f)for(;v.length%4;)v.push(f);return v.join("")},parse:function(u){var s=u.length,w=this._map,g=this._reverseMap;if(!g){g=this._reverseMap=[];for(var v=0;v<w.length;v++)g[w.charCodeAt(v)]=v}var y=w.charAt(64);if(y){var m=u.indexOf(y);m!==-1&&(s=m)}return o(u,s,g)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64}(requireCore())),encBase64Exports}var encBase64urlExports={},encBase64url={get exports(){return encBase64urlExports},set exports(e){encBase64urlExports=e}},hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,encBase64url.exports=function(e){return function(){var n=e,r=n.lib.WordArray;function o(u,s,w){for(var g=[],v=0,y=0;y<s;y++)if(y%4){var m=w[u.charCodeAt(y-1)]<<y%4*2|w[u.charCodeAt(y)]>>>6-y%4*2;g[v>>>2]|=m<<24-v%4*8,v++}return r.create(g,v)}n.enc.Base64url={stringify:function(u,s){s===void 0&&(s=!0);var w=u.words,g=u.sigBytes,v=s?this._safe_map:this._map;u.clamp();for(var y=[],m=0;m<g;m+=3)for(var d=(w[m>>>2]>>>24-m%4*8&255)<<16|(w[m+1>>>2]>>>24-(m+1)%4*8&255)<<8|w[m+2>>>2]>>>24-(m+2)%4*8&255,f=0;f<4&&m+.75*f<g;f++)y.push(v.charAt(d>>>6*(3-f)&63));var x=v.charAt(64);if(x)for(;y.length%4;)y.push(x);return y.join("")},parse:function(u,s){s===void 0&&(s=!0);var w=u.length,g=s?this._safe_map:this._map,v=this._reverseMap;if(!v){v=this._reverseMap=[];for(var y=0;y<g.length;y++)v[g.charCodeAt(y)]=y}var m=g.charAt(64);if(m){var d=u.indexOf(m);d!==-1&&(w=d)}return o(u,w,v)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url}(requireCore())),encBase64urlExports}var md5Exports={},md5={get exports(){return md5Exports},set exports(e){md5Exports=e}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,md5.exports=function(e){return function(n){var r=e,o=r.lib,u=o.WordArray,s=o.Hasher,w=r.algo,g=[];(function(){for(var x=0;x<64;x++)g[x]=4294967296*n.abs(n.sin(x+1))|0})();var v=w.MD5=s.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(x,k){for(var P=0;P<16;P++){var S=k+P,E=x[S];x[S]=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8)}var M=this._hash.words,T=x[k+0],D=x[k+1],I=x[k+2],N=x[k+3],O=x[k+4],F=x[k+5],U=x[k+6],Y=x[k+7],Q=x[k+8],q=x[k+9],ne=x[k+10],J=x[k+11],re=x[k+12],X=x[k+13],j=x[k+14],Z=x[k+15],W=M[0],te=M[1],le=M[2],oe=M[3];W=y(W,te,le,oe,T,7,g[0]),oe=y(oe,W,te,le,D,12,g[1]),le=y(le,oe,W,te,I,17,g[2]),te=y(te,le,oe,W,N,22,g[3]),W=y(W,te,le,oe,O,7,g[4]),oe=y(oe,W,te,le,F,12,g[5]),le=y(le,oe,W,te,U,17,g[6]),te=y(te,le,oe,W,Y,22,g[7]),W=y(W,te,le,oe,Q,7,g[8]),oe=y(oe,W,te,le,q,12,g[9]),le=y(le,oe,W,te,ne,17,g[10]),te=y(te,le,oe,W,J,22,g[11]),W=y(W,te,le,oe,re,7,g[12]),oe=y(oe,W,te,le,X,12,g[13]),le=y(le,oe,W,te,j,17,g[14]),W=m(W,te=y(te,le,oe,W,Z,22,g[15]),le,oe,D,5,g[16]),oe=m(oe,W,te,le,U,9,g[17]),le=m(le,oe,W,te,J,14,g[18]),te=m(te,le,oe,W,T,20,g[19]),W=m(W,te,le,oe,F,5,g[20]),oe=m(oe,W,te,le,ne,9,g[21]),le=m(le,oe,W,te,Z,14,g[22]),te=m(te,le,oe,W,O,20,g[23]),W=m(W,te,le,oe,q,5,g[24]),oe=m(oe,W,te,le,j,9,g[25]),le=m(le,oe,W,te,N,14,g[26]),te=m(te,le,oe,W,Q,20,g[27]),W=m(W,te,le,oe,X,5,g[28]),oe=m(oe,W,te,le,I,9,g[29]),le=m(le,oe,W,te,Y,14,g[30]),W=d(W,te=m(te,le,oe,W,re,20,g[31]),le,oe,F,4,g[32]),oe=d(oe,W,te,le,Q,11,g[33]),le=d(le,oe,W,te,J,16,g[34]),te=d(te,le,oe,W,j,23,g[35]),W=d(W,te,le,oe,D,4,g[36]),oe=d(oe,W,te,le,O,11,g[37]),le=d(le,oe,W,te,Y,16,g[38]),te=d(te,le,oe,W,ne,23,g[39]),W=d(W,te,le,oe,X,4,g[40]),oe=d(oe,W,te,le,T,11,g[41]),le=d(le,oe,W,te,N,16,g[42]),te=d(te,le,oe,W,U,23,g[43]),W=d(W,te,le,oe,q,4,g[44]),oe=d(oe,W,te,le,re,11,g[45]),le=d(le,oe,W,te,Z,16,g[46]),W=f(W,te=d(te,le,oe,W,I,23,g[47]),le,oe,T,6,g[48]),oe=f(oe,W,te,le,Y,10,g[49]),le=f(le,oe,W,te,j,15,g[50]),te=f(te,le,oe,W,F,21,g[51]),W=f(W,te,le,oe,re,6,g[52]),oe=f(oe,W,te,le,N,10,g[53]),le=f(le,oe,W,te,ne,15,g[54]),te=f(te,le,oe,W,D,21,g[55]),W=f(W,te,le,oe,Q,6,g[56]),oe=f(oe,W,te,le,Z,10,g[57]),le=f(le,oe,W,te,U,15,g[58]),te=f(te,le,oe,W,X,21,g[59]),W=f(W,te,le,oe,O,6,g[60]),oe=f(oe,W,te,le,J,10,g[61]),le=f(le,oe,W,te,I,15,g[62]),te=f(te,le,oe,W,q,21,g[63]),M[0]=M[0]+W|0,M[1]=M[1]+te|0,M[2]=M[2]+le|0,M[3]=M[3]+oe|0},_doFinalize:function(){var x=this._data,k=x.words,P=8*this._nDataBytes,S=8*x.sigBytes;k[S>>>5]|=128<<24-S%32;var E=n.floor(P/4294967296),M=P;k[15+(S+64>>>9<<4)]=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8),k[14+(S+64>>>9<<4)]=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),x.sigBytes=4*(k.length+1),this._process();for(var T=this._hash,D=T.words,I=0;I<4;I++){var N=D[I];D[I]=16711935&(N<<8|N>>>24)|4278255360&(N<<24|N>>>8)}return T},clone:function(){var x=s.clone.call(this);return x._hash=this._hash.clone(),x}});function y(x,k,P,S,E,M,T){var D=x+(k&P|~k&S)+E+T;return(D<<M|D>>>32-M)+k}function m(x,k,P,S,E,M,T){var D=x+(k&S|P&~S)+E+T;return(D<<M|D>>>32-M)+k}function d(x,k,P,S,E,M,T){var D=x+(k^P^S)+E+T;return(D<<M|D>>>32-M)+k}function f(x,k,P,S,E,M,T){var D=x+(P^(k|~S))+E+T;return(D<<M|D>>>32-M)+k}r.MD5=s._createHelper(v),r.HmacMD5=s._createHmacHelper(v)}(Math),e.MD5}(requireCore())),md5Exports}var sha1Exports={},sha1={get exports(){return sha1Exports},set exports(e){sha1Exports=e}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,sha1.exports=function(e){return function(){var n=e,r=n.lib,o=r.WordArray,u=r.Hasher,s=n.algo,w=[],g=s.SHA1=u.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(v,y){for(var m=this._hash.words,d=m[0],f=m[1],x=m[2],k=m[3],P=m[4],S=0;S<80;S++){if(S<16)w[S]=0|v[y+S];else{var E=w[S-3]^w[S-8]^w[S-14]^w[S-16];w[S]=E<<1|E>>>31}var M=(d<<5|d>>>27)+P+w[S];M+=S<20?1518500249+(f&x|~f&k):S<40?1859775393+(f^x^k):S<60?(f&x|f&k|x&k)-1894007588:(f^x^k)-899497514,P=k,k=x,x=f<<30|f>>>2,f=d,d=M}m[0]=m[0]+d|0,m[1]=m[1]+f|0,m[2]=m[2]+x|0,m[3]=m[3]+k|0,m[4]=m[4]+P|0},_doFinalize:function(){var v=this._data,y=v.words,m=8*this._nDataBytes,d=8*v.sigBytes;return y[d>>>5]|=128<<24-d%32,y[14+(d+64>>>9<<4)]=Math.floor(m/4294967296),y[15+(d+64>>>9<<4)]=m,v.sigBytes=4*y.length,this._process(),this._hash},clone:function(){var v=u.clone.call(this);return v._hash=this._hash.clone(),v}});n.SHA1=u._createHelper(g),n.HmacSHA1=u._createHmacHelper(g)}(),e.SHA1}(requireCore())),sha1Exports}var sha256Exports={},sha256={get exports(){return sha256Exports},set exports(e){sha256Exports=e}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,sha256.exports=function(e){return function(n){var r=e,o=r.lib,u=o.WordArray,s=o.Hasher,w=r.algo,g=[],v=[];(function(){function d(P){for(var S=n.sqrt(P),E=2;E<=S;E++)if(!(P%E))return!1;return!0}function f(P){return 4294967296*(P-(0|P))|0}for(var x=2,k=0;k<64;)d(x)&&(k<8&&(g[k]=f(n.pow(x,.5))),v[k]=f(n.pow(x,1/3)),k++),x++})();var y=[],m=w.SHA256=s.extend({_doReset:function(){this._hash=new u.init(g.slice(0))},_doProcessBlock:function(d,f){for(var x=this._hash.words,k=x[0],P=x[1],S=x[2],E=x[3],M=x[4],T=x[5],D=x[6],I=x[7],N=0;N<64;N++){if(N<16)y[N]=0|d[f+N];else{var O=y[N-15],F=(O<<25|O>>>7)^(O<<14|O>>>18)^O>>>3,U=y[N-2],Y=(U<<15|U>>>17)^(U<<13|U>>>19)^U>>>10;y[N]=F+y[N-7]+Y+y[N-16]}var Q=k&P^k&S^P&S,q=(k<<30|k>>>2)^(k<<19|k>>>13)^(k<<10|k>>>22),ne=I+((M<<26|M>>>6)^(M<<21|M>>>11)^(M<<7|M>>>25))+(M&T^~M&D)+v[N]+y[N];I=D,D=T,T=M,M=E+ne|0,E=S,S=P,P=k,k=ne+(q+Q)|0}x[0]=x[0]+k|0,x[1]=x[1]+P|0,x[2]=x[2]+S|0,x[3]=x[3]+E|0,x[4]=x[4]+M|0,x[5]=x[5]+T|0,x[6]=x[6]+D|0,x[7]=x[7]+I|0},_doFinalize:function(){var d=this._data,f=d.words,x=8*this._nDataBytes,k=8*d.sigBytes;return f[k>>>5]|=128<<24-k%32,f[14+(k+64>>>9<<4)]=n.floor(x/4294967296),f[15+(k+64>>>9<<4)]=x,d.sigBytes=4*f.length,this._process(),this._hash},clone:function(){var d=s.clone.call(this);return d._hash=this._hash.clone(),d}});r.SHA256=s._createHelper(m),r.HmacSHA256=s._createHmacHelper(m)}(Math),e.SHA256}(requireCore())),sha256Exports}var sha224Exports={},sha224={get exports(){return sha224Exports},set exports(e){sha224Exports=e}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,sha224.exports=function(e){return function(){var n=e,r=n.lib.WordArray,o=n.algo,u=o.SHA256,s=o.SHA224=u.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var w=u._doFinalize.call(this);return w.sigBytes-=4,w}});n.SHA224=u._createHelper(s),n.HmacSHA224=u._createHmacHelper(s)}(),e.SHA224}(requireCore(),requireSha256())),sha224Exports}var sha512Exports={},sha512={get exports(){return sha512Exports},set exports(e){sha512Exports=e}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,sha512.exports=function(e){return function(){var n=e,r=n.lib.Hasher,o=n.x64,u=o.Word,s=o.WordArray,w=n.algo;function g(){return u.create.apply(u,arguments)}var v=[g(1116352408,3609767458),g(1899447441,602891725),g(3049323471,3964484399),g(3921009573,2173295548),g(961987163,4081628472),g(1508970993,3053834265),g(2453635748,2937671579),g(2870763221,3664609560),g(3624381080,2734883394),g(310598401,1164996542),g(607225278,1323610764),g(1426881987,3590304994),g(1925078388,4068182383),g(2162078206,991336113),g(2614888103,633803317),g(3248222580,3479774868),g(3835390401,2666613458),g(4022224774,944711139),g(264347078,2341262773),g(604807628,2007800933),g(770255983,1495990901),g(1249150122,1856431235),g(1555081692,3175218132),g(1996064986,2198950837),g(2554220882,3999719339),g(2821834349,766784016),g(2952996808,2566594879),g(3210313671,3203337956),g(3336571891,1034457026),g(3584528711,2466948901),g(113926993,3758326383),g(338241895,168717936),g(666307205,1188179964),g(773529912,1546045734),g(1294757372,1522805485),g(1396182291,2643833823),g(1695183700,2343527390),g(1986661051,1014477480),g(2177026350,1206759142),g(2456956037,344077627),g(2730485921,1290863460),g(2820302411,3158454273),g(3259730800,3505952657),g(3345764771,106217008),g(3516065817,3606008344),g(3600352804,1432725776),g(4094571909,1467031594),g(275423344,851169720),g(430227734,3100823752),g(506948616,1363258195),g(659060556,3750685593),g(883997877,3785050280),g(958139571,3318307427),g(1322822218,3812723403),g(1537002063,2003034995),g(1747873779,3602036899),g(1955562222,1575990012),g(2024104815,1125592928),g(2227730452,2716904306),g(2361852424,442776044),g(2428436474,593698344),g(2756734187,3733110249),g(3204031479,2999351573),g(3329325298,3815920427),g(3391569614,3928383900),g(3515267271,566280711),g(3940187606,3454069534),g(4118630271,4000239992),g(116418474,1914138554),g(174292421,2731055270),g(289380356,3203993006),g(460393269,320620315),g(685471733,587496836),g(852142971,1086792851),g(1017036298,365543100),g(1126000580,2618297676),g(1288033470,3409855158),g(1501505948,4234509866),g(1607167915,987167468),g(1816402316,1246189591)],y=[];(function(){for(var d=0;d<80;d++)y[d]=g()})();var m=w.SHA512=r.extend({_doReset:function(){this._hash=new s.init([new u.init(1779033703,4089235720),new u.init(3144134277,2227873595),new u.init(1013904242,4271175723),new u.init(2773480762,1595750129),new u.init(1359893119,2917565137),new u.init(2600822924,725511199),new u.init(528734635,4215389547),new u.init(1541459225,327033209)])},_doProcessBlock:function(d,f){for(var x=this._hash.words,k=x[0],P=x[1],S=x[2],E=x[3],M=x[4],T=x[5],D=x[6],I=x[7],N=k.high,O=k.low,F=P.high,U=P.low,Y=S.high,Q=S.low,q=E.high,ne=E.low,J=M.high,re=M.low,X=T.high,j=T.low,Z=D.high,W=D.low,te=I.high,le=I.low,oe=N,Ee=O,Ae=F,ve=U,ke=Y,Ce=Q,Pe=q,Me=ne,Le=J,Te=re,ye=X,_e=j,we=Z,Se=W,$e=te,Be=le,Oe=0;Oe<80;Oe++){var Ge,Ie,je=y[Oe];if(Oe<16)Ie=je.high=0|d[f+2*Oe],Ge=je.low=0|d[f+2*Oe+1];else{var qe=y[Oe-15],Ue=qe.high,Je=qe.low,et=(Ue>>>1|Je<<31)^(Ue>>>8|Je<<24)^Ue>>>7,nt=(Je>>>1|Ue<<31)^(Je>>>8|Ue<<24)^(Je>>>7|Ue<<25),st=y[Oe-2],gt=st.high,_t=st.low,wt=(gt>>>19|_t<<13)^(gt<<3|_t>>>29)^gt>>>6,He=(_t>>>19|gt<<13)^(_t<<3|gt>>>29)^(_t>>>6|gt<<26),Ve=y[Oe-7],ze=Ve.high,Ne=Ve.low,We=y[Oe-16],Fe=We.high,Ye=We.low;Ie=(Ie=(Ie=et+ze+((Ge=nt+Ne)>>>0<nt>>>0?1:0))+wt+((Ge+=He)>>>0<He>>>0?1:0))+Fe+((Ge+=Ye)>>>0<Ye>>>0?1:0),je.high=Ie,je.low=Ge}var Ke,Ze=Le&ye^~Le&we,ot=Te&_e^~Te&Se,Qe=oe&Ae^oe&ke^Ae&ke,at=Ee&ve^Ee&Ce^ve&Ce,rt=(oe>>>28|Ee<<4)^(oe<<30|Ee>>>2)^(oe<<25|Ee>>>7),ct=(Ee>>>28|oe<<4)^(Ee<<30|oe>>>2)^(Ee<<25|oe>>>7),ht=(Le>>>14|Te<<18)^(Le>>>18|Te<<14)^(Le<<23|Te>>>9),yt=(Te>>>14|Le<<18)^(Te>>>18|Le<<14)^(Te<<23|Le>>>9),bt=v[Oe],$t=bt.high,At=bt.low,Ft=$e+ht+((Ke=Be+yt)>>>0<Be>>>0?1:0),Ht=ct+at;$e=we,Be=Se,we=ye,Se=_e,ye=Le,_e=Te,Le=Pe+(Ft=(Ft=(Ft=Ft+Ze+((Ke+=ot)>>>0<ot>>>0?1:0))+$t+((Ke+=At)>>>0<At>>>0?1:0))+Ie+((Ke+=Ge)>>>0<Ge>>>0?1:0))+((Te=Me+Ke|0)>>>0<Me>>>0?1:0)|0,Pe=ke,Me=Ce,ke=Ae,Ce=ve,Ae=oe,ve=Ee,oe=Ft+(rt+Qe+(Ht>>>0<ct>>>0?1:0))+((Ee=Ke+Ht|0)>>>0<Ke>>>0?1:0)|0}O=k.low=O+Ee,k.high=N+oe+(O>>>0<Ee>>>0?1:0),U=P.low=U+ve,P.high=F+Ae+(U>>>0<ve>>>0?1:0),Q=S.low=Q+Ce,S.high=Y+ke+(Q>>>0<Ce>>>0?1:0),ne=E.low=ne+Me,E.high=q+Pe+(ne>>>0<Me>>>0?1:0),re=M.low=re+Te,M.high=J+Le+(re>>>0<Te>>>0?1:0),j=T.low=j+_e,T.high=X+ye+(j>>>0<_e>>>0?1:0),W=D.low=W+Se,D.high=Z+we+(W>>>0<Se>>>0?1:0),le=I.low=le+Be,I.high=te+$e+(le>>>0<Be>>>0?1:0)},_doFinalize:function(){var d=this._data,f=d.words,x=8*this._nDataBytes,k=8*d.sigBytes;return f[k>>>5]|=128<<24-k%32,f[30+(k+128>>>10<<5)]=Math.floor(x/4294967296),f[31+(k+128>>>10<<5)]=x,d.sigBytes=4*f.length,this._process(),this._hash.toX32()},clone:function(){var d=r.clone.call(this);return d._hash=this._hash.clone(),d},blockSize:32});n.SHA512=r._createHelper(m),n.HmacSHA512=r._createHmacHelper(m)}(),e.SHA512}(requireCore(),requireX64Core())),sha512Exports}var sha384Exports={},sha384={get exports(){return sha384Exports},set exports(e){sha384Exports=e}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,sha384.exports=function(e){return function(){var n=e,r=n.x64,o=r.Word,u=r.WordArray,s=n.algo,w=s.SHA512,g=s.SHA384=w.extend({_doReset:function(){this._hash=new u.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var v=w._doFinalize.call(this);return v.sigBytes-=16,v}});n.SHA384=w._createHelper(g),n.HmacSHA384=w._createHmacHelper(g)}(),e.SHA384}(requireCore(),requireX64Core(),requireSha512())),sha384Exports}var sha3Exports={},sha3={get exports(){return sha3Exports},set exports(e){sha3Exports=e}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,sha3.exports=function(e){return function(n){var r=e,o=r.lib,u=o.WordArray,s=o.Hasher,w=r.x64.Word,g=r.algo,v=[],y=[],m=[];(function(){for(var x=1,k=0,P=0;P<24;P++){v[x+5*k]=(P+1)*(P+2)/2%64;var S=(2*x+3*k)%5;x=k%5,k=S}for(x=0;x<5;x++)for(k=0;k<5;k++)y[x+5*k]=k+(2*x+3*k)%5*5;for(var E=1,M=0;M<24;M++){for(var T=0,D=0,I=0;I<7;I++){if(1&E){var N=(1<<I)-1;N<32?D^=1<<N:T^=1<<N-32}128&E?E=E<<1^113:E<<=1}m[M]=w.create(T,D)}})();var d=[];(function(){for(var x=0;x<25;x++)d[x]=w.create()})();var f=g.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var x=this._state=[],k=0;k<25;k++)x[k]=new w.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(x,k){for(var P=this._state,S=this.blockSize/2,E=0;E<S;E++){var M=x[k+2*E],T=x[k+2*E+1];M=16711935&(M<<8|M>>>24)|4278255360&(M<<24|M>>>8),T=16711935&(T<<8|T>>>24)|4278255360&(T<<24|T>>>8),(le=P[E]).high^=T,le.low^=M}for(var D=0;D<24;D++){for(var I=0;I<5;I++){for(var N=0,O=0,F=0;F<5;F++)N^=(le=P[I+5*F]).high,O^=le.low;var U=d[I];U.high=N,U.low=O}for(I=0;I<5;I++){var Y=d[(I+4)%5],Q=d[(I+1)%5],q=Q.high,ne=Q.low;for(N=Y.high^(q<<1|ne>>>31),O=Y.low^(ne<<1|q>>>31),F=0;F<5;F++)(le=P[I+5*F]).high^=N,le.low^=O}for(var J=1;J<25;J++){var re=(le=P[J]).high,X=le.low,j=v[J];j<32?(N=re<<j|X>>>32-j,O=X<<j|re>>>32-j):(N=X<<j-32|re>>>64-j,O=re<<j-32|X>>>64-j);var Z=d[y[J]];Z.high=N,Z.low=O}var W=d[0],te=P[0];for(W.high=te.high,W.low=te.low,I=0;I<5;I++)for(F=0;F<5;F++){var le=P[J=I+5*F],oe=d[J],Ee=d[(I+1)%5+5*F],Ae=d[(I+2)%5+5*F];le.high=oe.high^~Ee.high&Ae.high,le.low=oe.low^~Ee.low&Ae.low}le=P[0];var ve=m[D];le.high^=ve.high,le.low^=ve.low}},_doFinalize:function(){var x=this._data,k=x.words;this._nDataBytes;var P=8*x.sigBytes,S=32*this.blockSize;k[P>>>5]|=1<<24-P%32,k[(n.ceil((P+1)/S)*S>>>5)-1]|=128,x.sigBytes=4*k.length,this._process();for(var E=this._state,M=this.cfg.outputLength/8,T=M/8,D=[],I=0;I<T;I++){var N=E[I],O=N.high,F=N.low;O=16711935&(O<<8|O>>>24)|4278255360&(O<<24|O>>>8),F=16711935&(F<<8|F>>>24)|4278255360&(F<<24|F>>>8),D.push(F),D.push(O)}return new u.init(D,M)},clone:function(){for(var x=s.clone.call(this),k=x._state=this._state.slice(0),P=0;P<25;P++)k[P]=k[P].clone();return x}});r.SHA3=s._createHelper(f),r.HmacSHA3=s._createHmacHelper(f)}(Math),e.SHA3}(requireCore(),requireX64Core())),sha3Exports}var ripemd160Exports={},ripemd160={get exports(){return ripemd160Exports},set exports(e){ripemd160Exports=e}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,ripemd160.exports=function(e){/** @preserve
      (c) 2012 by Cdric Mesnil. All rights reserved.
      	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
      	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
          - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
      	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
      */return function(n){var r=e,o=r.lib,u=o.WordArray,s=o.Hasher,w=r.algo,g=u.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),v=u.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),y=u.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=u.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=u.create([0,1518500249,1859775393,2400959708,2840853838]),f=u.create([1352829926,1548603684,1836072691,2053994217,0]),x=w.RIPEMD160=s.extend({_doReset:function(){this._hash=u.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,I){for(var N=0;N<16;N++){var O=I+N,F=D[O];D[O]=16711935&(F<<8|F>>>24)|4278255360&(F<<24|F>>>8)}var U,Y,Q,q,ne,J,re,X,j,Z,W,te=this._hash.words,le=d.words,oe=f.words,Ee=g.words,Ae=v.words,ve=y.words,ke=m.words;for(J=U=te[0],re=Y=te[1],X=Q=te[2],j=q=te[3],Z=ne=te[4],N=0;N<80;N+=1)W=U+D[I+Ee[N]]|0,W+=N<16?k(Y,Q,q)+le[0]:N<32?P(Y,Q,q)+le[1]:N<48?S(Y,Q,q)+le[2]:N<64?E(Y,Q,q)+le[3]:M(Y,Q,q)+le[4],W=(W=T(W|=0,ve[N]))+ne|0,U=ne,ne=q,q=T(Q,10),Q=Y,Y=W,W=J+D[I+Ae[N]]|0,W+=N<16?M(re,X,j)+oe[0]:N<32?E(re,X,j)+oe[1]:N<48?S(re,X,j)+oe[2]:N<64?P(re,X,j)+oe[3]:k(re,X,j)+oe[4],W=(W=T(W|=0,ke[N]))+Z|0,J=Z,Z=j,j=T(X,10),X=re,re=W;W=te[1]+Q+j|0,te[1]=te[2]+q+Z|0,te[2]=te[3]+ne+J|0,te[3]=te[4]+U+re|0,te[4]=te[0]+Y+X|0,te[0]=W},_doFinalize:function(){var D=this._data,I=D.words,N=8*this._nDataBytes,O=8*D.sigBytes;I[O>>>5]|=128<<24-O%32,I[14+(O+64>>>9<<4)]=16711935&(N<<8|N>>>24)|4278255360&(N<<24|N>>>8),D.sigBytes=4*(I.length+1),this._process();for(var F=this._hash,U=F.words,Y=0;Y<5;Y++){var Q=U[Y];U[Y]=16711935&(Q<<8|Q>>>24)|4278255360&(Q<<24|Q>>>8)}return F},clone:function(){var D=s.clone.call(this);return D._hash=this._hash.clone(),D}});function k(D,I,N){return D^I^N}function P(D,I,N){return D&I|~D&N}function S(D,I,N){return(D|~I)^N}function E(D,I,N){return D&N|I&~N}function M(D,I,N){return D^(I|~N)}function T(D,I){return D<<I|D>>>32-I}r.RIPEMD160=s._createHelper(x),r.HmacRIPEMD160=s._createHmacHelper(x)}(),e.RIPEMD160}(requireCore())),ripemd160Exports}var hmacExports={},hmac={get exports(){return hmacExports},set exports(e){hmacExports=e}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,hmac.exports=function(e){(function(){var n=e,r=n.lib.Base,o=n.enc.Utf8;n.algo.HMAC=r.extend({init:function(u,s){u=this._hasher=new u.init,typeof s=="string"&&(s=o.parse(s));var w=u.blockSize,g=4*w;s.sigBytes>g&&(s=u.finalize(s)),s.clamp();for(var v=this._oKey=s.clone(),y=this._iKey=s.clone(),m=v.words,d=y.words,f=0;f<w;f++)m[f]^=1549556828,d[f]^=909522486;v.sigBytes=y.sigBytes=g,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var s=this._hasher,w=s.finalize(u);return s.reset(),s.finalize(this._oKey.clone().concat(w))}})})()}(requireCore())),hmacExports}var pbkdf2Exports={},pbkdf2={get exports(){return pbkdf2Exports},set exports(e){pbkdf2Exports=e}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,pbkdf2.exports=function(e){return function(){var n=e,r=n.lib,o=r.Base,u=r.WordArray,s=n.algo,w=s.SHA256,g=s.HMAC,v=s.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:w,iterations:25e4}),init:function(y){this.cfg=this.cfg.extend(y)},compute:function(y,m){for(var d=this.cfg,f=g.create(d.hasher,y),x=u.create(),k=u.create([1]),P=x.words,S=k.words,E=d.keySize,M=d.iterations;P.length<E;){var T=f.update(m).finalize(k);f.reset();for(var D=T.words,I=D.length,N=T,O=1;O<M;O++){N=f.finalize(N),f.reset();for(var F=N.words,U=0;U<I;U++)D[U]^=F[U]}x.concat(T),S[0]++}return x.sigBytes=4*E,x}});n.PBKDF2=function(y,m,d){return v.create(d).compute(y,m)}}(),e.PBKDF2}(requireCore(),requireSha256(),requireHmac())),pbkdf2Exports}var evpkdfExports={},evpkdf={get exports(){return evpkdfExports},set exports(e){evpkdfExports=e}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,evpkdf.exports=function(e){return function(){var n=e,r=n.lib,o=r.Base,u=r.WordArray,s=n.algo,w=s.MD5,g=s.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:w,iterations:1}),init:function(v){this.cfg=this.cfg.extend(v)},compute:function(v,y){for(var m,d=this.cfg,f=d.hasher.create(),x=u.create(),k=x.words,P=d.keySize,S=d.iterations;k.length<P;){m&&f.update(m),m=f.update(v).finalize(y),f.reset();for(var E=1;E<S;E++)m=f.finalize(m),f.reset();x.concat(m)}return x.sigBytes=4*P,x}});n.EvpKDF=function(v,y,m){return g.create(m).compute(v,y)}}(),e.EvpKDF}(requireCore(),requireSha1(),requireHmac())),evpkdfExports}var cipherCoreExports={},cipherCore={get exports(){return cipherCoreExports},set exports(e){cipherCoreExports=e}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,cipherCore.exports=function(e){e.lib.Cipher||function(n){var r=e,o=r.lib,u=o.Base,s=o.WordArray,w=o.BufferedBlockAlgorithm,g=r.enc;g.Utf8;var v=g.Base64,y=r.algo.EvpKDF,m=o.Cipher=w.extend({cfg:u.extend(),createEncryptor:function(D,I){return this.create(this._ENC_XFORM_MODE,D,I)},createDecryptor:function(D,I){return this.create(this._DEC_XFORM_MODE,D,I)},init:function(D,I,N){this.cfg=this.cfg.extend(N),this._xformMode=D,this._key=I,this.reset()},reset:function(){w.reset.call(this),this._doReset()},process:function(D){return this._append(D),this._process()},finalize:function(D){return D&&this._append(D),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function D(I){return typeof I=="string"?T:E}return function(I){return{encrypt:function(N,O,F){return D(O).encrypt(I,N,O,F)},decrypt:function(N,O,F){return D(O).decrypt(I,N,O,F)}}}}()});o.StreamCipher=m.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=r.mode={},f=o.BlockCipherMode=u.extend({createEncryptor:function(D,I){return this.Encryptor.create(D,I)},createDecryptor:function(D,I){return this.Decryptor.create(D,I)},init:function(D,I){this._cipher=D,this._iv=I}}),x=d.CBC=function(){var D=f.extend();function I(N,O,F){var U,Y=this._iv;Y?(U=Y,this._iv=n):U=this._prevBlock;for(var Q=0;Q<F;Q++)N[O+Q]^=U[Q]}return D.Encryptor=D.extend({processBlock:function(N,O){var F=this._cipher,U=F.blockSize;I.call(this,N,O,U),F.encryptBlock(N,O),this._prevBlock=N.slice(O,O+U)}}),D.Decryptor=D.extend({processBlock:function(N,O){var F=this._cipher,U=F.blockSize,Y=N.slice(O,O+U);F.decryptBlock(N,O),I.call(this,N,O,U),this._prevBlock=Y}}),D}(),k=(r.pad={}).Pkcs7={pad:function(D,I){for(var N=4*I,O=N-D.sigBytes%N,F=O<<24|O<<16|O<<8|O,U=[],Y=0;Y<O;Y+=4)U.push(F);var Q=s.create(U,O);D.concat(Q)},unpad:function(D){var I=255&D.words[D.sigBytes-1>>>2];D.sigBytes-=I}};o.BlockCipher=m.extend({cfg:m.cfg.extend({mode:x,padding:k}),reset:function(){var D;m.reset.call(this);var I=this.cfg,N=I.iv,O=I.mode;this._xformMode==this._ENC_XFORM_MODE?D=O.createEncryptor:(D=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==D?this._mode.init(this,N&&N.words):(this._mode=D.call(O,this,N&&N.words),this._mode.__creator=D)},_doProcessBlock:function(D,I){this._mode.processBlock(D,I)},_doFinalize:function(){var D,I=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(I.pad(this._data,this.blockSize),D=this._process(!0)):(D=this._process(!0),I.unpad(D)),D},blockSize:4});var P=o.CipherParams=u.extend({init:function(D){this.mixIn(D)},toString:function(D){return(D||this.formatter).stringify(this)}}),S=(r.format={}).OpenSSL={stringify:function(D){var I=D.ciphertext,N=D.salt;return(N?s.create([1398893684,1701076831]).concat(N).concat(I):I).toString(v)},parse:function(D){var I,N=v.parse(D),O=N.words;return O[0]==1398893684&&O[1]==1701076831&&(I=s.create(O.slice(2,4)),O.splice(0,4),N.sigBytes-=16),P.create({ciphertext:N,salt:I})}},E=o.SerializableCipher=u.extend({cfg:u.extend({format:S}),encrypt:function(D,I,N,O){O=this.cfg.extend(O);var F=D.createEncryptor(N,O),U=F.finalize(I),Y=F.cfg;return P.create({ciphertext:U,key:N,iv:Y.iv,algorithm:D,mode:Y.mode,padding:Y.padding,blockSize:D.blockSize,formatter:O.format})},decrypt:function(D,I,N,O){return O=this.cfg.extend(O),I=this._parse(I,O.format),D.createDecryptor(N,O).finalize(I.ciphertext)},_parse:function(D,I){return typeof D=="string"?I.parse(D,this):D}}),M=(r.kdf={}).OpenSSL={execute:function(D,I,N,O,F){if(O||(O=s.random(8)),F)U=y.create({keySize:I+N,hasher:F}).compute(D,O);else var U=y.create({keySize:I+N}).compute(D,O);var Y=s.create(U.words.slice(I),4*N);return U.sigBytes=4*I,P.create({key:U,iv:Y,salt:O})}},T=o.PasswordBasedCipher=E.extend({cfg:E.cfg.extend({kdf:M}),encrypt:function(D,I,N,O){var F=(O=this.cfg.extend(O)).kdf.execute(N,D.keySize,D.ivSize,O.salt,O.hasher);O.iv=F.iv;var U=E.encrypt.call(this,D,I,F.key,O);return U.mixIn(F),U},decrypt:function(D,I,N,O){O=this.cfg.extend(O),I=this._parse(I,O.format);var F=O.kdf.execute(N,D.keySize,D.ivSize,I.salt,O.hasher);return O.iv=F.iv,E.decrypt.call(this,D,I,F.key,O)}})}()}(requireCore(),requireEvpkdf())),cipherCoreExports}var modeCfbExports={},modeCfb={get exports(){return modeCfbExports},set exports(e){modeCfbExports=e}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,modeCfb.exports=function(e){return e.mode.CFB=function(){var n=e.lib.BlockCipherMode.extend();function r(o,u,s,w){var g,v=this._iv;v?(g=v.slice(0),this._iv=void 0):g=this._prevBlock,w.encryptBlock(g,0);for(var y=0;y<s;y++)o[u+y]^=g[y]}return n.Encryptor=n.extend({processBlock:function(o,u){var s=this._cipher,w=s.blockSize;r.call(this,o,u,w,s),this._prevBlock=o.slice(u,u+w)}}),n.Decryptor=n.extend({processBlock:function(o,u){var s=this._cipher,w=s.blockSize,g=o.slice(u,u+w);r.call(this,o,u,w,s),this._prevBlock=g}}),n}(),e.mode.CFB}(requireCore(),requireCipherCore())),modeCfbExports}var modeCtrExports={},modeCtr={get exports(){return modeCtrExports},set exports(e){modeCtrExports=e}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,modeCtr.exports=function(e){return e.mode.CTR=(n=e.lib.BlockCipherMode.extend(),r=n.Encryptor=n.extend({processBlock:function(o,u){var s=this._cipher,w=s.blockSize,g=this._iv,v=this._counter;g&&(v=this._counter=g.slice(0),this._iv=void 0);var y=v.slice(0);s.encryptBlock(y,0),v[w-1]=v[w-1]+1|0;for(var m=0;m<w;m++)o[u+m]^=y[m]}}),n.Decryptor=r,n),e.mode.CTR;var n,r}(requireCore(),requireCipherCore())),modeCtrExports}var modeCtrGladmanExports={},modeCtrGladman={get exports(){return modeCtrGladmanExports},set exports(e){modeCtrGladmanExports=e}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,modeCtrGladman.exports=function(e){/** @preserve
       * Counter block mode compatible with  Dr Brian Gladman fileenc.c
       * derived from CryptoJS.mode.CTR
       * Jan Hruby jhruby.web@gmail.com
       */return e.mode.CTRGladman=function(){var n=e.lib.BlockCipherMode.extend();function r(s){if(255&~(s>>24))s+=1<<24;else{var w=s>>16&255,g=s>>8&255,v=255&s;w===255?(w=0,g===255?(g=0,v===255?v=0:++v):++g):++w,s=0,s+=w<<16,s+=g<<8,s+=v}return s}function o(s){return(s[0]=r(s[0]))===0&&(s[1]=r(s[1])),s}var u=n.Encryptor=n.extend({processBlock:function(s,w){var g=this._cipher,v=g.blockSize,y=this._iv,m=this._counter;y&&(m=this._counter=y.slice(0),this._iv=void 0),o(m);var d=m.slice(0);g.encryptBlock(d,0);for(var f=0;f<v;f++)s[w+f]^=d[f]}});return n.Decryptor=u,n}(),e.mode.CTRGladman}(requireCore(),requireCipherCore())),modeCtrGladmanExports}var modeOfbExports={},modeOfb={get exports(){return modeOfbExports},set exports(e){modeOfbExports=e}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,modeOfb.exports=function(e){return e.mode.OFB=(n=e.lib.BlockCipherMode.extend(),r=n.Encryptor=n.extend({processBlock:function(o,u){var s=this._cipher,w=s.blockSize,g=this._iv,v=this._keystream;g&&(v=this._keystream=g.slice(0),this._iv=void 0),s.encryptBlock(v,0);for(var y=0;y<w;y++)o[u+y]^=v[y]}}),n.Decryptor=r,n),e.mode.OFB;var n,r}(requireCore(),requireCipherCore())),modeOfbExports}var modeEcbExports={},modeEcb={get exports(){return modeEcbExports},set exports(e){modeEcbExports=e}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,modeEcb.exports=function(e){return e.mode.ECB=((n=e.lib.BlockCipherMode.extend()).Encryptor=n.extend({processBlock:function(r,o){this._cipher.encryptBlock(r,o)}}),n.Decryptor=n.extend({processBlock:function(r,o){this._cipher.decryptBlock(r,o)}}),n),e.mode.ECB;var n}(requireCore(),requireCipherCore())),modeEcbExports}var padAnsix923Exports={},padAnsix923={get exports(){return padAnsix923Exports},set exports(e){padAnsix923Exports=e}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,padAnsix923.exports=function(e){return e.pad.AnsiX923={pad:function(n,r){var o=n.sigBytes,u=4*r,s=u-o%u,w=o+s-1;n.clamp(),n.words[w>>>2]|=s<<24-w%4*8,n.sigBytes+=s},unpad:function(n){var r=255&n.words[n.sigBytes-1>>>2];n.sigBytes-=r}},e.pad.Ansix923}(requireCore(),requireCipherCore())),padAnsix923Exports}var padIso10126Exports={},padIso10126={get exports(){return padIso10126Exports},set exports(e){padIso10126Exports=e}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,padIso10126.exports=function(e){return e.pad.Iso10126={pad:function(n,r){var o=4*r,u=o-n.sigBytes%o;n.concat(e.lib.WordArray.random(u-1)).concat(e.lib.WordArray.create([u<<24],1))},unpad:function(n){var r=255&n.words[n.sigBytes-1>>>2];n.sigBytes-=r}},e.pad.Iso10126}(requireCore(),requireCipherCore())),padIso10126Exports}var padIso97971Exports={},padIso97971={get exports(){return padIso97971Exports},set exports(e){padIso97971Exports=e}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,padIso97971.exports=function(e){return e.pad.Iso97971={pad:function(n,r){n.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(n,r)},unpad:function(n){e.pad.ZeroPadding.unpad(n),n.sigBytes--}},e.pad.Iso97971}(requireCore(),requireCipherCore())),padIso97971Exports}var padZeropaddingExports={},padZeropadding={get exports(){return padZeropaddingExports},set exports(e){padZeropaddingExports=e}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,padZeropadding.exports=function(e){return e.pad.ZeroPadding={pad:function(n,r){var o=4*r;n.clamp(),n.sigBytes+=o-(n.sigBytes%o||o)},unpad:function(n){var r=n.words,o=n.sigBytes-1;for(o=n.sigBytes-1;o>=0;o--)if(r[o>>>2]>>>24-o%4*8&255){n.sigBytes=o+1;break}}},e.pad.ZeroPadding}(requireCore(),requireCipherCore())),padZeropaddingExports}var padNopaddingExports={},padNopadding={get exports(){return padNopaddingExports},set exports(e){padNopaddingExports=e}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,padNopadding.exports=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding}(requireCore(),requireCipherCore())),padNopaddingExports}var formatHexExports={},formatHex={get exports(){return formatHexExports},set exports(e){formatHexExports=e}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,formatHex.exports=function(e){return function(n){var r=e,o=r.lib.CipherParams,u=r.enc.Hex;r.format.Hex={stringify:function(s){return s.ciphertext.toString(u)},parse:function(s){var w=u.parse(s);return o.create({ciphertext:w})}}}(),e.format.Hex}(requireCore(),requireCipherCore())),formatHexExports}var aesExports={},aes={get exports(){return aesExports},set exports(e){aesExports=e}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,aes.exports=function(e){return function(){var n=e,r=n.lib.BlockCipher,o=n.algo,u=[],s=[],w=[],g=[],v=[],y=[],m=[],d=[],f=[],x=[];(function(){for(var S=[],E=0;E<256;E++)S[E]=E<128?E<<1:E<<1^283;var M=0,T=0;for(E=0;E<256;E++){var D=T^T<<1^T<<2^T<<3^T<<4;D=D>>>8^255&D^99,u[M]=D,s[D]=M;var I=S[M],N=S[I],O=S[N],F=257*S[D]^16843008*D;w[M]=F<<24|F>>>8,g[M]=F<<16|F>>>16,v[M]=F<<8|F>>>24,y[M]=F,F=16843009*O^65537*N^257*I^16843008*M,m[D]=F<<24|F>>>8,d[D]=F<<16|F>>>16,f[D]=F<<8|F>>>24,x[D]=F,M?(M=I^S[S[S[O^I]]],T^=S[S[T]]):M=T=1}})();var k=[0,1,2,4,8,16,32,64,128,27,54],P=o.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var S=this._keyPriorReset=this._key,E=S.words,M=S.sigBytes/4,T=4*((this._nRounds=M+6)+1),D=this._keySchedule=[],I=0;I<T;I++)I<M?D[I]=E[I]:(F=D[I-1],I%M?M>6&&I%M==4&&(F=u[F>>>24]<<24|u[F>>>16&255]<<16|u[F>>>8&255]<<8|u[255&F]):(F=u[(F=F<<8|F>>>24)>>>24]<<24|u[F>>>16&255]<<16|u[F>>>8&255]<<8|u[255&F],F^=k[I/M|0]<<24),D[I]=D[I-M]^F);for(var N=this._invKeySchedule=[],O=0;O<T;O++){if(I=T-O,O%4)var F=D[I];else F=D[I-4];N[O]=O<4||I<=4?F:m[u[F>>>24]]^d[u[F>>>16&255]]^f[u[F>>>8&255]]^x[u[255&F]]}}},encryptBlock:function(S,E){this._doCryptBlock(S,E,this._keySchedule,w,g,v,y,u)},decryptBlock:function(S,E){var M=S[E+1];S[E+1]=S[E+3],S[E+3]=M,this._doCryptBlock(S,E,this._invKeySchedule,m,d,f,x,s),M=S[E+1],S[E+1]=S[E+3],S[E+3]=M},_doCryptBlock:function(S,E,M,T,D,I,N,O){for(var F=this._nRounds,U=S[E]^M[0],Y=S[E+1]^M[1],Q=S[E+2]^M[2],q=S[E+3]^M[3],ne=4,J=1;J<F;J++){var re=T[U>>>24]^D[Y>>>16&255]^I[Q>>>8&255]^N[255&q]^M[ne++],X=T[Y>>>24]^D[Q>>>16&255]^I[q>>>8&255]^N[255&U]^M[ne++],j=T[Q>>>24]^D[q>>>16&255]^I[U>>>8&255]^N[255&Y]^M[ne++],Z=T[q>>>24]^D[U>>>16&255]^I[Y>>>8&255]^N[255&Q]^M[ne++];U=re,Y=X,Q=j,q=Z}re=(O[U>>>24]<<24|O[Y>>>16&255]<<16|O[Q>>>8&255]<<8|O[255&q])^M[ne++],X=(O[Y>>>24]<<24|O[Q>>>16&255]<<16|O[q>>>8&255]<<8|O[255&U])^M[ne++],j=(O[Q>>>24]<<24|O[q>>>16&255]<<16|O[U>>>8&255]<<8|O[255&Y])^M[ne++],Z=(O[q>>>24]<<24|O[U>>>16&255]<<16|O[Y>>>8&255]<<8|O[255&Q])^M[ne++],S[E]=re,S[E+1]=X,S[E+2]=j,S[E+3]=Z},keySize:8});n.AES=r._createHelper(P)}(),e.AES}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),aesExports}var tripledesExports={},tripledes={get exports(){return tripledesExports},set exports(e){tripledesExports=e}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,tripledes.exports=function(e){return function(){var n=e,r=n.lib,o=r.WordArray,u=r.BlockCipher,s=n.algo,w=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],g=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],v=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],y=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=s.DES=u.extend({_doReset:function(){for(var P=this._key.words,S=[],E=0;E<56;E++){var M=w[E]-1;S[E]=P[M>>>5]>>>31-M%32&1}for(var T=this._subKeys=[],D=0;D<16;D++){var I=T[D]=[],N=v[D];for(E=0;E<24;E++)I[E/6|0]|=S[(g[E]-1+N)%28]<<31-E%6,I[4+(E/6|0)]|=S[28+(g[E+24]-1+N)%28]<<31-E%6;for(I[0]=I[0]<<1|I[0]>>>31,E=1;E<7;E++)I[E]=I[E]>>>4*(E-1)+3;I[7]=I[7]<<5|I[7]>>>27}var O=this._invSubKeys=[];for(E=0;E<16;E++)O[E]=T[15-E]},encryptBlock:function(P,S){this._doCryptBlock(P,S,this._subKeys)},decryptBlock:function(P,S){this._doCryptBlock(P,S,this._invSubKeys)},_doCryptBlock:function(P,S,E){this._lBlock=P[S],this._rBlock=P[S+1],f.call(this,4,252645135),f.call(this,16,65535),x.call(this,2,858993459),x.call(this,8,16711935),f.call(this,1,1431655765);for(var M=0;M<16;M++){for(var T=E[M],D=this._lBlock,I=this._rBlock,N=0,O=0;O<8;O++)N|=y[O][((I^T[O])&m[O])>>>0];this._lBlock=I,this._rBlock=D^N}var F=this._lBlock;this._lBlock=this._rBlock,this._rBlock=F,f.call(this,1,1431655765),x.call(this,8,16711935),x.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),P[S]=this._lBlock,P[S+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function f(P,S){var E=(this._lBlock>>>P^this._rBlock)&S;this._rBlock^=E,this._lBlock^=E<<P}function x(P,S){var E=(this._rBlock>>>P^this._lBlock)&S;this._lBlock^=E,this._rBlock^=E<<P}n.DES=u._createHelper(d);var k=s.TripleDES=u.extend({_doReset:function(){var P=this._key.words;if(P.length!==2&&P.length!==4&&P.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var S=P.slice(0,2),E=P.length<4?P.slice(0,2):P.slice(2,4),M=P.length<6?P.slice(0,2):P.slice(4,6);this._des1=d.createEncryptor(o.create(S)),this._des2=d.createEncryptor(o.create(E)),this._des3=d.createEncryptor(o.create(M))},encryptBlock:function(P,S){this._des1.encryptBlock(P,S),this._des2.decryptBlock(P,S),this._des3.encryptBlock(P,S)},decryptBlock:function(P,S){this._des3.decryptBlock(P,S),this._des2.encryptBlock(P,S),this._des1.decryptBlock(P,S)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=u._createHelper(k)}(),e.TripleDES}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),tripledesExports}var rc4Exports={},rc4={get exports(){return rc4Exports},set exports(e){rc4Exports=e}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,rc4.exports=function(e){return function(){var n=e,r=n.lib.StreamCipher,o=n.algo,u=o.RC4=r.extend({_doReset:function(){for(var g=this._key,v=g.words,y=g.sigBytes,m=this._S=[],d=0;d<256;d++)m[d]=d;d=0;for(var f=0;d<256;d++){var x=d%y,k=v[x>>>2]>>>24-x%4*8&255;f=(f+m[d]+k)%256;var P=m[d];m[d]=m[f],m[f]=P}this._i=this._j=0},_doProcessBlock:function(g,v){g[v]^=s.call(this)},keySize:8,ivSize:0});function s(){for(var g=this._S,v=this._i,y=this._j,m=0,d=0;d<4;d++){y=(y+g[v=(v+1)%256])%256;var f=g[v];g[v]=g[y],g[y]=f,m|=g[(g[v]+g[y])%256]<<24-8*d}return this._i=v,this._j=y,m}n.RC4=r._createHelper(u);var w=o.RC4Drop=u.extend({cfg:u.cfg.extend({drop:192}),_doReset:function(){u._doReset.call(this);for(var g=this.cfg.drop;g>0;g--)s.call(this)}});n.RC4Drop=r._createHelper(w)}(),e.RC4}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),rc4Exports}var rabbitExports={},rabbit={get exports(){return rabbitExports},set exports(e){rabbitExports=e}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,rabbit.exports=function(e){return function(){var n=e,r=n.lib.StreamCipher,o=n.algo,u=[],s=[],w=[],g=o.Rabbit=r.extend({_doReset:function(){for(var y=this._key.words,m=this.cfg.iv,d=0;d<4;d++)y[d]=16711935&(y[d]<<8|y[d]>>>24)|4278255360&(y[d]<<24|y[d]>>>8);var f=this._X=[y[0],y[3]<<16|y[2]>>>16,y[1],y[0]<<16|y[3]>>>16,y[2],y[1]<<16|y[0]>>>16,y[3],y[2]<<16|y[1]>>>16],x=this._C=[y[2]<<16|y[2]>>>16,4294901760&y[0]|65535&y[1],y[3]<<16|y[3]>>>16,4294901760&y[1]|65535&y[2],y[0]<<16|y[0]>>>16,4294901760&y[2]|65535&y[3],y[1]<<16|y[1]>>>16,4294901760&y[3]|65535&y[0]];for(this._b=0,d=0;d<4;d++)v.call(this);for(d=0;d<8;d++)x[d]^=f[d+4&7];if(m){var k=m.words,P=k[0],S=k[1],E=16711935&(P<<8|P>>>24)|4278255360&(P<<24|P>>>8),M=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8),T=E>>>16|4294901760&M,D=M<<16|65535&E;for(x[0]^=E,x[1]^=T,x[2]^=M,x[3]^=D,x[4]^=E,x[5]^=T,x[6]^=M,x[7]^=D,d=0;d<4;d++)v.call(this)}},_doProcessBlock:function(y,m){var d=this._X;v.call(this),u[0]=d[0]^d[5]>>>16^d[3]<<16,u[1]=d[2]^d[7]>>>16^d[5]<<16,u[2]=d[4]^d[1]>>>16^d[7]<<16,u[3]=d[6]^d[3]>>>16^d[1]<<16;for(var f=0;f<4;f++)u[f]=16711935&(u[f]<<8|u[f]>>>24)|4278255360&(u[f]<<24|u[f]>>>8),y[m+f]^=u[f]},blockSize:4,ivSize:2});function v(){for(var y=this._X,m=this._C,d=0;d<8;d++)s[d]=m[d];for(m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<s[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<s[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<s[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<s[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<s[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<s[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<s[6]>>>0?1:0)|0,this._b=m[7]>>>0<s[7]>>>0?1:0,d=0;d<8;d++){var f=y[d]+m[d],x=65535&f,k=f>>>16,P=((x*x>>>17)+x*k>>>15)+k*k,S=((4294901760&f)*f|0)+((65535&f)*f|0);w[d]=P^S}y[0]=w[0]+(w[7]<<16|w[7]>>>16)+(w[6]<<16|w[6]>>>16)|0,y[1]=w[1]+(w[0]<<8|w[0]>>>24)+w[7]|0,y[2]=w[2]+(w[1]<<16|w[1]>>>16)+(w[0]<<16|w[0]>>>16)|0,y[3]=w[3]+(w[2]<<8|w[2]>>>24)+w[1]|0,y[4]=w[4]+(w[3]<<16|w[3]>>>16)+(w[2]<<16|w[2]>>>16)|0,y[5]=w[5]+(w[4]<<8|w[4]>>>24)+w[3]|0,y[6]=w[6]+(w[5]<<16|w[5]>>>16)+(w[4]<<16|w[4]>>>16)|0,y[7]=w[7]+(w[6]<<8|w[6]>>>24)+w[5]|0}n.Rabbit=r._createHelper(g)}(),e.Rabbit}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),rabbitExports}var rabbitLegacyExports={},rabbitLegacy={get exports(){return rabbitLegacyExports},set exports(e){rabbitLegacyExports=e}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,rabbitLegacy.exports=function(e){return function(){var n=e,r=n.lib.StreamCipher,o=n.algo,u=[],s=[],w=[],g=o.RabbitLegacy=r.extend({_doReset:function(){var y=this._key.words,m=this.cfg.iv,d=this._X=[y[0],y[3]<<16|y[2]>>>16,y[1],y[0]<<16|y[3]>>>16,y[2],y[1]<<16|y[0]>>>16,y[3],y[2]<<16|y[1]>>>16],f=this._C=[y[2]<<16|y[2]>>>16,4294901760&y[0]|65535&y[1],y[3]<<16|y[3]>>>16,4294901760&y[1]|65535&y[2],y[0]<<16|y[0]>>>16,4294901760&y[2]|65535&y[3],y[1]<<16|y[1]>>>16,4294901760&y[3]|65535&y[0]];this._b=0;for(var x=0;x<4;x++)v.call(this);for(x=0;x<8;x++)f[x]^=d[x+4&7];if(m){var k=m.words,P=k[0],S=k[1],E=16711935&(P<<8|P>>>24)|4278255360&(P<<24|P>>>8),M=16711935&(S<<8|S>>>24)|4278255360&(S<<24|S>>>8),T=E>>>16|4294901760&M,D=M<<16|65535&E;for(f[0]^=E,f[1]^=T,f[2]^=M,f[3]^=D,f[4]^=E,f[5]^=T,f[6]^=M,f[7]^=D,x=0;x<4;x++)v.call(this)}},_doProcessBlock:function(y,m){var d=this._X;v.call(this),u[0]=d[0]^d[5]>>>16^d[3]<<16,u[1]=d[2]^d[7]>>>16^d[5]<<16,u[2]=d[4]^d[1]>>>16^d[7]<<16,u[3]=d[6]^d[3]>>>16^d[1]<<16;for(var f=0;f<4;f++)u[f]=16711935&(u[f]<<8|u[f]>>>24)|4278255360&(u[f]<<24|u[f]>>>8),y[m+f]^=u[f]},blockSize:4,ivSize:2});function v(){for(var y=this._X,m=this._C,d=0;d<8;d++)s[d]=m[d];for(m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<s[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<s[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<s[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<s[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<s[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<s[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<s[6]>>>0?1:0)|0,this._b=m[7]>>>0<s[7]>>>0?1:0,d=0;d<8;d++){var f=y[d]+m[d],x=65535&f,k=f>>>16,P=((x*x>>>17)+x*k>>>15)+k*k,S=((4294901760&f)*f|0)+((65535&f)*f|0);w[d]=P^S}y[0]=w[0]+(w[7]<<16|w[7]>>>16)+(w[6]<<16|w[6]>>>16)|0,y[1]=w[1]+(w[0]<<8|w[0]>>>24)+w[7]|0,y[2]=w[2]+(w[1]<<16|w[1]>>>16)+(w[0]<<16|w[0]>>>16)|0,y[3]=w[3]+(w[2]<<8|w[2]>>>24)+w[1]|0,y[4]=w[4]+(w[3]<<16|w[3]>>>16)+(w[2]<<16|w[2]>>>16)|0,y[5]=w[5]+(w[4]<<8|w[4]>>>24)+w[3]|0,y[6]=w[6]+(w[5]<<16|w[5]>>>16)+(w[4]<<16|w[4]>>>16)|0,y[7]=w[7]+(w[6]<<8|w[6]>>>24)+w[5]|0}n.RabbitLegacy=r._createHelper(g)}(),e.RabbitLegacy}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),rabbitLegacyExports}var blowfishExports={},blowfish={get exports(){return blowfishExports},set exports(e){blowfishExports=e}},hasRequiredBlowfish;function requireBlowfish(){return hasRequiredBlowfish||(hasRequiredBlowfish=1,blowfish.exports=function(e){return function(){var n=e,r=n.lib.BlockCipher,o=n.algo,u=16,s=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],w=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]],g={pbox:[],sbox:[]};function v(x,k){var P=k>>24&255,S=k>>16&255,E=k>>8&255,M=255&k,T=x.sbox[0][P]+x.sbox[1][S];return T^=x.sbox[2][E],T+=x.sbox[3][M]}function y(x,k,P){for(var S,E=k,M=P,T=0;T<u;++T)S=E^=x.pbox[T],E=M=v(x,E)^M,M=S;return S=E,E=M,M=S,M^=x.pbox[u],{left:E^=x.pbox[u+1],right:M}}function m(x,k,P){for(var S,E=k,M=P,T=u+1;T>1;--T)S=E^=x.pbox[T],E=M=v(x,E)^M,M=S;return S=E,E=M,M=S,M^=x.pbox[1],{left:E^=x.pbox[0],right:M}}function d(x,k,P){for(var S=0;S<4;S++){x.sbox[S]=[];for(var E=0;E<256;E++)x.sbox[S][E]=w[S][E]}for(var M=0,T=0;T<u+2;T++)x.pbox[T]=s[T]^k[M],++M>=P&&(M=0);for(var D=0,I=0,N=0,O=0;O<u+2;O+=2)D=(N=y(x,D,I)).left,I=N.right,x.pbox[O]=D,x.pbox[O+1]=I;for(var F=0;F<4;F++)for(var U=0;U<256;U+=2)D=(N=y(x,D,I)).left,I=N.right,x.sbox[F][U]=D,x.sbox[F][U+1]=I;return!0}var f=o.Blowfish=r.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var x=this._keyPriorReset=this._key,k=x.words,P=x.sigBytes/4;d(g,k,P)}},encryptBlock:function(x,k){var P=y(g,x[k],x[k+1]);x[k]=P.left,x[k+1]=P.right},decryptBlock:function(x,k){var P=m(g,x[k],x[k+1]);x[k]=P.left,x[k+1]=P.right},blockSize:2,keySize:4,ivSize:2});n.Blowfish=r._createHelper(f)}(),e.Blowfish}(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())),blowfishExports}cryptoJs.exports=function(e){return e}(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy(),requireBlowfish());var CryptoJS=cryptoJsExports,BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";function int2char(e){return BI_RM.charAt(e)}function op_and(e,n){return e&n}function op_or(e,n){return e|n}function op_xor(e,n){return e^n}function op_andnot(e,n){return e&~n}function lbit(e){if(e==0)return-1;var n=0;return 65535&e||(e>>=16,n+=16),255&e||(e>>=8,n+=8),15&e||(e>>=4,n+=4),3&e||(e>>=2,n+=2),1&e||++n,n}function cbit(e){for(var n=0;e!=0;)e&=e-1,++n;return n}var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64pad="=",decoder$1;function hex2b64(e){var n,r,o="";for(n=0;n+3<=e.length;n+=3)r=parseInt(e.substring(n,n+3),16),o+=b64map.charAt(r>>6)+b64map.charAt(63&r);for(n+1==e.length?(r=parseInt(e.substring(n,n+1),16),o+=b64map.charAt(r<<2)):n+2==e.length&&(r=parseInt(e.substring(n,n+2),16),o+=b64map.charAt(r>>2)+b64map.charAt((3&r)<<4));(3&o.length)>0;)o+=b64pad;return o}function b64tohex(e){var n,r="",o=0,u=0;for(n=0;n<e.length&&e.charAt(n)!=b64pad;++n){var s=b64map.indexOf(e.charAt(n));s<0||(o==0?(r+=int2char(s>>2),u=3&s,o=1):o==1?(r+=int2char(u<<2|s>>4),u=15&s,o=2):o==2?(r+=int2char(u),r+=int2char(s>>2),u=3&s,o=3):(r+=int2char(u<<2|s>>4),r+=int2char(15&s),o=0))}return o==1&&(r+=int2char(u<<2)),r}var Hex={decode:function(e){var n;if(decoder$1===void 0){var r="0123456789ABCDEF",o=` \f
\r	\xA0\u2028\u2029`;for(decoder$1={},n=0;n<16;++n)decoder$1[r.charAt(n)]=n;for(r=r.toLowerCase(),n=10;n<16;++n)decoder$1[r.charAt(n)]=n;for(n=0;n<8;++n)decoder$1[o.charAt(n)]=-1}var u=[],s=0,w=0;for(n=0;n<e.length;++n){var g=e.charAt(n);if(g=="=")break;if((g=decoder$1[g])!=-1){if(g===void 0)throw new Error("Illegal character at offset "+n);s|=g,++w>=2?(u[u.length]=s,s=0,w=0):s<<=4}}if(w)throw new Error("Hex encoding incomplete: 4 bits missing");return u}},decoder,Base64$1={decode:function(e){var n;if(decoder===void 0){var r=`= \f
\r	\xA0\u2028\u2029`;for(decoder=Object.create(null),n=0;n<64;++n)decoder["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n)]=n;for(decoder["-"]=62,decoder._=63,n=0;n<9;++n)decoder[r.charAt(n)]=-1}var o=[],u=0,s=0;for(n=0;n<e.length;++n){var w=e.charAt(n);if(w=="=")break;if((w=decoder[w])!=-1){if(w===void 0)throw new Error("Illegal character at offset "+n);u|=w,++s>=4?(o[o.length]=u>>16,o[o.length]=u>>8&255,o[o.length]=255&u,u=0,s=0):u<<=6}}switch(s){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:o[o.length]=u>>10;break;case 3:o[o.length]=u>>16,o[o.length]=u>>8&255}return o},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(e){var n=Base64$1.re.exec(e);if(n)if(n[1])e=n[1];else{if(!n[2])throw new Error("RegExp out of sync");e=n[2]}return Base64$1.decode(e)}},max=1e13,Int10=function(){function e(n){this.buf=[+n||0]}return e.prototype.mulAdd=function(n,r){var o,u,s=this.buf,w=s.length;for(o=0;o<w;++o)(u=s[o]*n+r)<max?r=0:u-=(r=0|u/max)*max,s[o]=u;r>0&&(s[o]=r)},e.prototype.sub=function(n){var r,o,u=this.buf,s=u.length;for(r=0;r<s;++r)(o=u[r]-n)<0?(o+=max,n=1):n=0,u[r]=o;for(;u[u.length-1]===0;)u.pop()},e.prototype.toString=function(n){if((n||10)!=10)throw new Error("only base 10 is supported");for(var r=this.buf,o=r[r.length-1].toString(),u=r.length-2;u>=0;--u)o+=(max+r[u]).toString().substring(1);return o},e.prototype.valueOf=function(){for(var n=this.buf,r=0,o=n.length-1;o>=0;--o)r=r*max+n[o];return r},e.prototype.simplify=function(){var n=this.buf;return n.length==1?n[0]:this},e}(),ellipsis="\u2026",reTimeS=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,reTimeL=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function stringCut(e,n){return e.length>n&&(e=e.substring(0,n)+ellipsis),e}var Stream=function(){function e(n,r){this.hexDigits="0123456789ABCDEF",n instanceof e?(this.enc=n.enc,this.pos=n.pos):(this.enc=n,this.pos=r)}return e.prototype.get=function(n){if(n===void 0&&(n=this.pos++),n>=this.enc.length)throw new Error("Requesting byte offset ".concat(n," on a stream of length ").concat(this.enc.length));return typeof this.enc=="string"?this.enc.charCodeAt(n):this.enc[n]},e.prototype.hexByte=function(n){return this.hexDigits.charAt(n>>4&15)+this.hexDigits.charAt(15&n)},e.prototype.hexDump=function(n,r,o){for(var u="",s=n;s<r;++s)if(u+=this.hexByte(this.get(s)),o!==!0)switch(15&s){case 7:u+="  ";break;case 15:u+=`
`;break;default:u+=" "}return u},e.prototype.isASCII=function(n,r){for(var o=n;o<r;++o){var u=this.get(o);if(u<32||u>176)return!1}return!0},e.prototype.parseStringISO=function(n,r){for(var o="",u=n;u<r;++u)o+=String.fromCharCode(this.get(u));return o},e.prototype.parseStringUTF=function(n,r){for(var o="",u=n;u<r;){var s=this.get(u++);o+=s<128?String.fromCharCode(s):s>191&&s<224?String.fromCharCode((31&s)<<6|63&this.get(u++)):String.fromCharCode((15&s)<<12|(63&this.get(u++))<<6|63&this.get(u++))}return o},e.prototype.parseStringBMP=function(n,r){for(var o,u,s="",w=n;w<r;)o=this.get(w++),u=this.get(w++),s+=String.fromCharCode(o<<8|u);return s},e.prototype.parseTime=function(n,r,o){var u=this.parseStringISO(n,r),s=(o?reTimeS:reTimeL).exec(u);return s?(o&&(s[1]=+s[1],s[1]+=+s[1]<70?2e3:1900),u=s[1]+"-"+s[2]+"-"+s[3]+" "+s[4],s[5]&&(u+=":"+s[5],s[6]&&(u+=":"+s[6],s[7]&&(u+="."+s[7]))),s[8]&&(u+=" UTC",s[8]!="Z"&&(u+=s[8],s[9]&&(u+=":"+s[9]))),u):"Unrecognized time: "+u},e.prototype.parseInteger=function(n,r){for(var o,u=this.get(n),s=u>127,w=s?255:0,g="";u==w&&++n<r;)u=this.get(n);if((o=r-n)===0)return s?-1:0;if(o>4){for(g=u,o<<=3;!(128&(+g^w));)g=+g<<1,--o;g="("+o+` bit)
`}s&&(u-=256);for(var v=new Int10(u),y=n+1;y<r;++y)v.mulAdd(256,this.get(y));return g+v.toString()},e.prototype.parseBitString=function(n,r,o){for(var u=this.get(n),s="("+((r-n-1<<3)-u)+` bit)
`,w="",g=n+1;g<r;++g){for(var v=this.get(g),y=g==r-1?u:0,m=7;m>=y;--m)w+=v>>m&1?"1":"0";if(w.length>o)return s+stringCut(w,o)}return s+w},e.prototype.parseOctetString=function(n,r,o){if(this.isASCII(n,r))return stringCut(this.parseStringISO(n,r),o);var u=r-n,s="("+u+` byte)
`;u>(o/=2)&&(r=n+o);for(var w=n;w<r;++w)s+=this.hexByte(this.get(w));return u>o&&(s+=ellipsis),s},e.prototype.parseOID=function(n,r,o){for(var u="",s=new Int10,w=0,g=n;g<r;++g){var v=this.get(g);if(s.mulAdd(128,127&v),w+=7,!(128&v)){if(u==="")if((s=s.simplify())instanceof Int10)s.sub(80),u="2."+s.toString();else{var y=s<80?s<40?0:1:2;u=y+"."+(s-40*y)}else u+="."+s.toString();if(u.length>o)return stringCut(u,o);s=new Int10,w=0}}return w>0&&(u+=".incomplete"),u},e}(),ASN1=function(){function e(n,r,o,u,s){if(!(u instanceof ASN1Tag))throw new Error("Invalid tag value.");this.stream=n,this.header=r,this.length=o,this.tag=u,this.sub=s}return e.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},e.prototype.content=function(n){if(this.tag===void 0)return null;n===void 0&&(n=1/0);var r=this.posContent(),o=Math.abs(this.length);if(!this.tag.isUniversal())return this.sub!==null?"("+this.sub.length+" elem)":this.stream.parseOctetString(r,r+o,n);switch(this.tag.tagNumber){case 1:return this.stream.get(r)===0?"false":"true";case 2:return this.stream.parseInteger(r,r+o);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(r,r+o,n);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(r,r+o,n);case 6:return this.stream.parseOID(r,r+o,n);case 16:case 17:return this.sub!==null?"("+this.sub.length+" elem)":"(no elem)";case 12:return stringCut(this.stream.parseStringUTF(r,r+o),n);case 18:case 19:case 20:case 21:case 22:case 26:return stringCut(this.stream.parseStringISO(r,r+o),n);case 30:return stringCut(this.stream.parseStringBMP(r,r+o),n);case 23:case 24:return this.stream.parseTime(r,r+o,this.tag.tagNumber==23)}return null},e.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(this.sub===null?"null":this.sub.length)+"]"},e.prototype.toPrettyString=function(n){n===void 0&&(n="");var r=n+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(r+="+"),r+=this.length,this.tag.tagConstructed?r+=" (constructed)":!this.tag.isUniversal()||this.tag.tagNumber!=3&&this.tag.tagNumber!=4||this.sub===null||(r+=" (encapsulates)"),r+=`
`,this.sub!==null){n+="  ";for(var o=0,u=this.sub.length;o<u;++o)r+=this.sub[o].toPrettyString(n)}return r},e.prototype.posStart=function(){return this.stream.pos},e.prototype.posContent=function(){return this.stream.pos+this.header},e.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},e.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},e.decodeLength=function(n){var r=n.get(),o=127&r;if(o==r)return o;if(o>6)throw new Error("Length over 48 bits not supported at position "+(n.pos-1));if(o===0)return null;r=0;for(var u=0;u<o;++u)r=256*r+n.get();return r},e.prototype.getHexStringValue=function(){var n=this.toHexString(),r=2*this.header,o=2*this.length;return n.substr(r,o)},e.decode=function(n){var r;r=n instanceof Stream?n:new Stream(n,0);var o=new Stream(r),u=new ASN1Tag(r),s=e.decodeLength(r),w=r.pos,g=w-o.pos,v=null,y=function(){var d=[];if(s!==null){for(var f=w+s;r.pos<f;)d[d.length]=e.decode(r);if(r.pos!=f)throw new Error("Content size is not correct for container starting at offset "+w)}else try{for(;;){var x=e.decode(r);if(x.tag.isEOC())break;d[d.length]=x}s=w-r.pos}catch(k){throw new Error("Exception while decoding undefined length content: "+k)}return d};if(u.tagConstructed)v=y();else if(u.isUniversal()&&(u.tagNumber==3||u.tagNumber==4))try{if(u.tagNumber==3&&r.get()!=0)throw new Error("BIT STRINGs with unused bits cannot encapsulate.");v=y();for(var m=0;m<v.length;++m)if(v[m].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch{v=null}if(v===null){if(s===null)throw new Error("We can't skip over an invalid tag with undefined length at offset "+w);r.pos=w+Math.abs(s)}return new e(o,g,s,u,v)},e}(),ASN1Tag=function(){function e(n){var r=n.get();if(this.tagClass=r>>6,this.tagConstructed=!!(32&r),this.tagNumber=31&r,this.tagNumber==31){var o=new Int10;do r=n.get(),o.mulAdd(128,127&r);while(128&r);this.tagNumber=o.simplify()}}return e.prototype.isUniversal=function(){return this.tagClass===0},e.prototype.isEOC=function(){return this.tagClass===0&&this.tagNumber===0},e}(),dbits,canary=0xdeadbeefcafe,j_lm=(16777215&canary)==15715070,lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1],BigInteger=function(){function e(n,r,o){n!=null&&(typeof n=="number"?this.fromNumber(n,r,o):r==null&&typeof n!="string"?this.fromString(n,256):this.fromString(n,r))}return e.prototype.toString=function(n){if(this.s<0)return"-"+this.negate().toString(n);var r;if(n==16)r=4;else if(n==8)r=3;else if(n==2)r=1;else if(n==32)r=5;else{if(n!=4)return this.toRadix(n);r=2}var o,u=(1<<r)-1,s=!1,w="",g=this.t,v=this.DB-g*this.DB%r;if(g-- >0)for(v<this.DB&&(o=this[g]>>v)>0&&(s=!0,w=int2char(o));g>=0;)v<r?(o=(this[g]&(1<<v)-1)<<r-v,o|=this[--g]>>(v+=this.DB-r)):(o=this[g]>>(v-=r)&u,v<=0&&(v+=this.DB,--g)),o>0&&(s=!0),s&&(w+=int2char(o));return s?w:"0"},e.prototype.negate=function(){var n=nbi();return e.ZERO.subTo(this,n),n},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.compareTo=function(n){var r=this.s-n.s;if(r!=0)return r;var o=this.t;if((r=o-n.t)!=0)return this.s<0?-r:r;for(;--o>=0;)if((r=this[o]-n[o])!=0)return r;return 0},e.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)},e.prototype.mod=function(n){var r=nbi();return this.abs().divRemTo(n,null,r),this.s<0&&r.compareTo(e.ZERO)>0&&n.subTo(r,r),r},e.prototype.modPowInt=function(n,r){var o;return o=n<256||r.isEven()?new Classic(r):new Montgomery(r),this.exp(n,o)},e.prototype.clone=function(){var n=nbi();return this.copyTo(n),n},e.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},e.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},e.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},e.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},e.prototype.toByteArray=function(){var n=this.t,r=[];r[0]=this.s;var o,u=this.DB-n*this.DB%8,s=0;if(n-- >0)for(u<this.DB&&(o=this[n]>>u)!=(this.s&this.DM)>>u&&(r[s++]=o|this.s<<this.DB-u);n>=0;)u<8?(o=(this[n]&(1<<u)-1)<<8-u,o|=this[--n]>>(u+=this.DB-8)):(o=this[n]>>(u-=8)&255,u<=0&&(u+=this.DB,--n)),128&o&&(o|=-256),s==0&&(128&this.s)!=(128&o)&&++s,(s>0||o!=this.s)&&(r[s++]=o);return r},e.prototype.equals=function(n){return this.compareTo(n)==0},e.prototype.min=function(n){return this.compareTo(n)<0?this:n},e.prototype.max=function(n){return this.compareTo(n)>0?this:n},e.prototype.and=function(n){var r=nbi();return this.bitwiseTo(n,op_and,r),r},e.prototype.or=function(n){var r=nbi();return this.bitwiseTo(n,op_or,r),r},e.prototype.xor=function(n){var r=nbi();return this.bitwiseTo(n,op_xor,r),r},e.prototype.andNot=function(n){var r=nbi();return this.bitwiseTo(n,op_andnot,r),r},e.prototype.not=function(){for(var n=nbi(),r=0;r<this.t;++r)n[r]=this.DM&~this[r];return n.t=this.t,n.s=~this.s,n},e.prototype.shiftLeft=function(n){var r=nbi();return n<0?this.rShiftTo(-n,r):this.lShiftTo(n,r),r},e.prototype.shiftRight=function(n){var r=nbi();return n<0?this.lShiftTo(-n,r):this.rShiftTo(n,r),r},e.prototype.getLowestSetBit=function(){for(var n=0;n<this.t;++n)if(this[n]!=0)return n*this.DB+lbit(this[n]);return this.s<0?this.t*this.DB:-1},e.prototype.bitCount=function(){for(var n=0,r=this.s&this.DM,o=0;o<this.t;++o)n+=cbit(this[o]^r);return n},e.prototype.testBit=function(n){var r=Math.floor(n/this.DB);return r>=this.t?this.s!=0:!!(this[r]&1<<n%this.DB)},e.prototype.setBit=function(n){return this.changeBit(n,op_or)},e.prototype.clearBit=function(n){return this.changeBit(n,op_andnot)},e.prototype.flipBit=function(n){return this.changeBit(n,op_xor)},e.prototype.add=function(n){var r=nbi();return this.addTo(n,r),r},e.prototype.subtract=function(n){var r=nbi();return this.subTo(n,r),r},e.prototype.multiply=function(n){var r=nbi();return this.multiplyTo(n,r),r},e.prototype.divide=function(n){var r=nbi();return this.divRemTo(n,r,null),r},e.prototype.remainder=function(n){var r=nbi();return this.divRemTo(n,null,r),r},e.prototype.divideAndRemainder=function(n){var r=nbi(),o=nbi();return this.divRemTo(n,r,o),[r,o]},e.prototype.modPow=function(n,r){var o,u,s=n.bitLength(),w=nbv(1);if(s<=0)return w;o=s<18?1:s<48?3:s<144?4:s<768?5:6,u=s<8?new Classic(r):r.isEven()?new Barrett(r):new Montgomery(r);var g=[],v=3,y=o-1,m=(1<<o)-1;if(g[1]=u.convert(this),o>1){var d=nbi();for(u.sqrTo(g[1],d);v<=m;)g[v]=nbi(),u.mulTo(d,g[v-2],g[v]),v+=2}var f,x,k=n.t-1,P=!0,S=nbi();for(s=nbits(n[k])-1;k>=0;){for(s>=y?f=n[k]>>s-y&m:(f=(n[k]&(1<<s+1)-1)<<y-s,k>0&&(f|=n[k-1]>>this.DB+s-y)),v=o;!(1&f);)f>>=1,--v;if((s-=v)<0&&(s+=this.DB,--k),P)g[f].copyTo(w),P=!1;else{for(;v>1;)u.sqrTo(w,S),u.sqrTo(S,w),v-=2;v>0?u.sqrTo(w,S):(x=w,w=S,S=x),u.mulTo(S,g[f],w)}for(;k>=0&&!(n[k]&1<<s);)u.sqrTo(w,S),x=w,w=S,S=x,--s<0&&(s=this.DB-1,--k)}return u.revert(w)},e.prototype.modInverse=function(n){var r=n.isEven();if(this.isEven()&&r||n.signum()==0)return e.ZERO;for(var o=n.clone(),u=this.clone(),s=nbv(1),w=nbv(0),g=nbv(0),v=nbv(1);o.signum()!=0;){for(;o.isEven();)o.rShiftTo(1,o),r?(s.isEven()&&w.isEven()||(s.addTo(this,s),w.subTo(n,w)),s.rShiftTo(1,s)):w.isEven()||w.subTo(n,w),w.rShiftTo(1,w);for(;u.isEven();)u.rShiftTo(1,u),r?(g.isEven()&&v.isEven()||(g.addTo(this,g),v.subTo(n,v)),g.rShiftTo(1,g)):v.isEven()||v.subTo(n,v),v.rShiftTo(1,v);o.compareTo(u)>=0?(o.subTo(u,o),r&&s.subTo(g,s),w.subTo(v,w)):(u.subTo(o,u),r&&g.subTo(s,g),v.subTo(w,v))}return u.compareTo(e.ONE)!=0?e.ZERO:v.compareTo(n)>=0?v.subtract(n):v.signum()<0?(v.addTo(n,v),v.signum()<0?v.add(n):v):v},e.prototype.pow=function(n){return this.exp(n,new NullExp)},e.prototype.gcd=function(n){var r=this.s<0?this.negate():this.clone(),o=n.s<0?n.negate():n.clone();if(r.compareTo(o)<0){var u=r;r=o,o=u}var s=r.getLowestSetBit(),w=o.getLowestSetBit();if(w<0)return r;for(s<w&&(w=s),w>0&&(r.rShiftTo(w,r),o.rShiftTo(w,o));r.signum()>0;)(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),(s=o.getLowestSetBit())>0&&o.rShiftTo(s,o),r.compareTo(o)>=0?(r.subTo(o,r),r.rShiftTo(1,r)):(o.subTo(r,o),o.rShiftTo(1,o));return w>0&&o.lShiftTo(w,o),o},e.prototype.isProbablePrime=function(n){var r,o=this.abs();if(o.t==1&&o[0]<=lowprimes[lowprimes.length-1]){for(r=0;r<lowprimes.length;++r)if(o[0]==lowprimes[r])return!0;return!1}if(o.isEven())return!1;for(r=1;r<lowprimes.length;){for(var u=lowprimes[r],s=r+1;s<lowprimes.length&&u<lplim;)u*=lowprimes[s++];for(u=o.modInt(u);r<s;)if(u%lowprimes[r++]==0)return!1}return o.millerRabin(n)},e.prototype.copyTo=function(n){for(var r=this.t-1;r>=0;--r)n[r]=this[r];n.t=this.t,n.s=this.s},e.prototype.fromInt=function(n){this.t=1,this.s=n<0?-1:0,n>0?this[0]=n:n<-1?this[0]=n+this.DV:this.t=0},e.prototype.fromString=function(n,r){var o;if(r==16)o=4;else if(r==8)o=3;else if(r==256)o=8;else if(r==2)o=1;else if(r==32)o=5;else{if(r!=4)return void this.fromRadix(n,r);o=2}this.t=0,this.s=0;for(var u=n.length,s=!1,w=0;--u>=0;){var g=o==8?255&+n[u]:intAt(n,u);g<0?n.charAt(u)=="-"&&(s=!0):(s=!1,w==0?this[this.t++]=g:w+o>this.DB?(this[this.t-1]|=(g&(1<<this.DB-w)-1)<<w,this[this.t++]=g>>this.DB-w):this[this.t-1]|=g<<w,(w+=o)>=this.DB&&(w-=this.DB))}o==8&&128&+n[0]&&(this.s=-1,w>0&&(this[this.t-1]|=(1<<this.DB-w)-1<<w)),this.clamp(),s&&e.ZERO.subTo(this,this)},e.prototype.clamp=function(){for(var n=this.s&this.DM;this.t>0&&this[this.t-1]==n;)--this.t},e.prototype.dlShiftTo=function(n,r){var o;for(o=this.t-1;o>=0;--o)r[o+n]=this[o];for(o=n-1;o>=0;--o)r[o]=0;r.t=this.t+n,r.s=this.s},e.prototype.drShiftTo=function(n,r){for(var o=n;o<this.t;++o)r[o-n]=this[o];r.t=Math.max(this.t-n,0),r.s=this.s},e.prototype.lShiftTo=function(n,r){for(var o=n%this.DB,u=this.DB-o,s=(1<<u)-1,w=Math.floor(n/this.DB),g=this.s<<o&this.DM,v=this.t-1;v>=0;--v)r[v+w+1]=this[v]>>u|g,g=(this[v]&s)<<o;for(v=w-1;v>=0;--v)r[v]=0;r[w]=g,r.t=this.t+w+1,r.s=this.s,r.clamp()},e.prototype.rShiftTo=function(n,r){r.s=this.s;var o=Math.floor(n/this.DB);if(o>=this.t)r.t=0;else{var u=n%this.DB,s=this.DB-u,w=(1<<u)-1;r[0]=this[o]>>u;for(var g=o+1;g<this.t;++g)r[g-o-1]|=(this[g]&w)<<s,r[g-o]=this[g]>>u;u>0&&(r[this.t-o-1]|=(this.s&w)<<s),r.t=this.t-o,r.clamp()}},e.prototype.subTo=function(n,r){for(var o=0,u=0,s=Math.min(n.t,this.t);o<s;)u+=this[o]-n[o],r[o++]=u&this.DM,u>>=this.DB;if(n.t<this.t){for(u-=n.s;o<this.t;)u+=this[o],r[o++]=u&this.DM,u>>=this.DB;u+=this.s}else{for(u+=this.s;o<n.t;)u-=n[o],r[o++]=u&this.DM,u>>=this.DB;u-=n.s}r.s=u<0?-1:0,u<-1?r[o++]=this.DV+u:u>0&&(r[o++]=u),r.t=o,r.clamp()},e.prototype.multiplyTo=function(n,r){var o=this.abs(),u=n.abs(),s=o.t;for(r.t=s+u.t;--s>=0;)r[s]=0;for(s=0;s<u.t;++s)r[s+o.t]=o.am(0,u[s],r,s,0,o.t);r.s=0,r.clamp(),this.s!=n.s&&e.ZERO.subTo(r,r)},e.prototype.squareTo=function(n){for(var r=this.abs(),o=n.t=2*r.t;--o>=0;)n[o]=0;for(o=0;o<r.t-1;++o){var u=r.am(o,r[o],n,2*o,0,1);(n[o+r.t]+=r.am(o+1,2*r[o],n,2*o+1,u,r.t-o-1))>=r.DV&&(n[o+r.t]-=r.DV,n[o+r.t+1]=1)}n.t>0&&(n[n.t-1]+=r.am(o,r[o],n,2*o,0,1)),n.s=0,n.clamp()},e.prototype.divRemTo=function(n,r,o){var u=n.abs();if(!(u.t<=0)){var s=this.abs();if(s.t<u.t)return r!=null&&r.fromInt(0),void(o!=null&&this.copyTo(o));o==null&&(o=nbi());var w=nbi(),g=this.s,v=n.s,y=this.DB-nbits(u[u.t-1]);y>0?(u.lShiftTo(y,w),s.lShiftTo(y,o)):(u.copyTo(w),s.copyTo(o));var m=w.t,d=w[m-1];if(d!=0){var f=d*(1<<this.F1)+(m>1?w[m-2]>>this.F2:0),x=this.FV/f,k=(1<<this.F1)/f,P=1<<this.F2,S=o.t,E=S-m,M=r==null?nbi():r;for(w.dlShiftTo(E,M),o.compareTo(M)>=0&&(o[o.t++]=1,o.subTo(M,o)),e.ONE.dlShiftTo(m,M),M.subTo(w,w);w.t<m;)w[w.t++]=0;for(;--E>=0;){var T=o[--S]==d?this.DM:Math.floor(o[S]*x+(o[S-1]+P)*k);if((o[S]+=w.am(0,T,o,E,0,m))<T)for(w.dlShiftTo(E,M),o.subTo(M,o);o[S]<--T;)o.subTo(M,o)}r!=null&&(o.drShiftTo(m,r),g!=v&&e.ZERO.subTo(r,r)),o.t=m,o.clamp(),y>0&&o.rShiftTo(y,o),g<0&&e.ZERO.subTo(o,o)}}},e.prototype.invDigit=function(){if(this.t<1)return 0;var n=this[0];if(!(1&n))return 0;var r=3&n;return(r=(r=(r=(r=r*(2-(15&n)*r)&15)*(2-(255&n)*r)&255)*(2-((65535&n)*r&65535))&65535)*(2-n*r%this.DV)%this.DV)>0?this.DV-r:-r},e.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},e.prototype.exp=function(n,r){if(n>4294967295||n<1)return e.ONE;var o=nbi(),u=nbi(),s=r.convert(this),w=nbits(n)-1;for(s.copyTo(o);--w>=0;)if(r.sqrTo(o,u),(n&1<<w)>0)r.mulTo(u,s,o);else{var g=o;o=u,u=g}return r.revert(o)},e.prototype.chunkSize=function(n){return Math.floor(Math.LN2*this.DB/Math.log(n))},e.prototype.toRadix=function(n){if(n==null&&(n=10),this.signum()==0||n<2||n>36)return"0";var r=this.chunkSize(n),o=Math.pow(n,r),u=nbv(o),s=nbi(),w=nbi(),g="";for(this.divRemTo(u,s,w);s.signum()>0;)g=(o+w.intValue()).toString(n).substr(1)+g,s.divRemTo(u,s,w);return w.intValue().toString(n)+g},e.prototype.fromRadix=function(n,r){this.fromInt(0),r==null&&(r=10);for(var o=this.chunkSize(r),u=Math.pow(r,o),s=!1,w=0,g=0,v=0;v<n.length;++v){var y=intAt(n,v);y<0?n.charAt(v)=="-"&&this.signum()==0&&(s=!0):(g=r*g+y,++w>=o&&(this.dMultiply(u),this.dAddOffset(g,0),w=0,g=0))}w>0&&(this.dMultiply(Math.pow(r,w)),this.dAddOffset(g,0)),s&&e.ZERO.subTo(this,this)},e.prototype.fromNumber=function(n,r,o){if(typeof r=="number")if(n<2)this.fromInt(1);else for(this.fromNumber(n,o),this.testBit(n-1)||this.bitwiseTo(e.ONE.shiftLeft(n-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>n&&this.subTo(e.ONE.shiftLeft(n-1),this);else{var u=[],s=7&n;u.length=1+(n>>3),r.nextBytes(u),s>0?u[0]&=(1<<s)-1:u[0]=0,this.fromString(u,256)}},e.prototype.bitwiseTo=function(n,r,o){var u,s,w=Math.min(n.t,this.t);for(u=0;u<w;++u)o[u]=r(this[u],n[u]);if(n.t<this.t){for(s=n.s&this.DM,u=w;u<this.t;++u)o[u]=r(this[u],s);o.t=this.t}else{for(s=this.s&this.DM,u=w;u<n.t;++u)o[u]=r(s,n[u]);o.t=n.t}o.s=r(this.s,n.s),o.clamp()},e.prototype.changeBit=function(n,r){var o=e.ONE.shiftLeft(n);return this.bitwiseTo(o,r,o),o},e.prototype.addTo=function(n,r){for(var o=0,u=0,s=Math.min(n.t,this.t);o<s;)u+=this[o]+n[o],r[o++]=u&this.DM,u>>=this.DB;if(n.t<this.t){for(u+=n.s;o<this.t;)u+=this[o],r[o++]=u&this.DM,u>>=this.DB;u+=this.s}else{for(u+=this.s;o<n.t;)u+=n[o],r[o++]=u&this.DM,u>>=this.DB;u+=n.s}r.s=u<0?-1:0,u>0?r[o++]=u:u<-1&&(r[o++]=this.DV+u),r.t=o,r.clamp()},e.prototype.dMultiply=function(n){this[this.t]=this.am(0,n-1,this,0,0,this.t),++this.t,this.clamp()},e.prototype.dAddOffset=function(n,r){if(n!=0){for(;this.t<=r;)this[this.t++]=0;for(this[r]+=n;this[r]>=this.DV;)this[r]-=this.DV,++r>=this.t&&(this[this.t++]=0),++this[r]}},e.prototype.multiplyLowerTo=function(n,r,o){var u=Math.min(this.t+n.t,r);for(o.s=0,o.t=u;u>0;)o[--u]=0;for(var s=o.t-this.t;u<s;++u)o[u+this.t]=this.am(0,n[u],o,u,0,this.t);for(s=Math.min(n.t,r);u<s;++u)this.am(0,n[u],o,u,0,r-u);o.clamp()},e.prototype.multiplyUpperTo=function(n,r,o){--r;var u=o.t=this.t+n.t-r;for(o.s=0;--u>=0;)o[u]=0;for(u=Math.max(r-this.t,0);u<n.t;++u)o[this.t+u-r]=this.am(r-u,n[u],o,0,0,this.t+u-r);o.clamp(),o.drShiftTo(1,o)},e.prototype.modInt=function(n){if(n<=0)return 0;var r=this.DV%n,o=this.s<0?n-1:0;if(this.t>0)if(r==0)o=this[0]%n;else for(var u=this.t-1;u>=0;--u)o=(r*o+this[u])%n;return o},e.prototype.millerRabin=function(n){var r=this.subtract(e.ONE),o=r.getLowestSetBit();if(o<=0)return!1;var u=r.shiftRight(o);(n=n+1>>1)>lowprimes.length&&(n=lowprimes.length);for(var s=nbi(),w=0;w<n;++w){s.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var g=s.modPow(u,this);if(g.compareTo(e.ONE)!=0&&g.compareTo(r)!=0){for(var v=1;v++<o&&g.compareTo(r)!=0;)if((g=g.modPowInt(2,this)).compareTo(e.ONE)==0)return!1;if(g.compareTo(r)!=0)return!1}}return!0},e.prototype.square=function(){var n=nbi();return this.squareTo(n),n},e.prototype.gcda=function(n,r){var o=this.s<0?this.negate():this.clone(),u=n.s<0?n.negate():n.clone();if(o.compareTo(u)<0){var s=o;o=u,u=s}var w=o.getLowestSetBit(),g=u.getLowestSetBit();g<0?r(o):(w<g&&(g=w),g>0&&(o.rShiftTo(g,o),u.rShiftTo(g,u)),setTimeout(function v(){(w=o.getLowestSetBit())>0&&o.rShiftTo(w,o),(w=u.getLowestSetBit())>0&&u.rShiftTo(w,u),o.compareTo(u)>=0?(o.subTo(u,o),o.rShiftTo(1,o)):(u.subTo(o,u),u.rShiftTo(1,u)),o.signum()>0?setTimeout(v,0):(g>0&&u.lShiftTo(g,u),setTimeout(function(){r(u)},0))},10))},e.prototype.fromNumberAsync=function(n,r,o,u){if(typeof r=="number")if(n<2)this.fromInt(1);else{this.fromNumber(n,o),this.testBit(n-1)||this.bitwiseTo(e.ONE.shiftLeft(n-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);var s=this;setTimeout(function v(){s.dAddOffset(2,0),s.bitLength()>n&&s.subTo(e.ONE.shiftLeft(n-1),s),s.isProbablePrime(r)?setTimeout(function(){u()},0):setTimeout(v,0)},0)}else{var w=[],g=7&n;w.length=1+(n>>3),r.nextBytes(w),g>0?w[0]&=(1<<g)-1:w[0]=0,this.fromString(w,256)}},e}(),NullExp=function(){function e(){}return e.prototype.convert=function(n){return n},e.prototype.revert=function(n){return n},e.prototype.mulTo=function(n,r,o){n.multiplyTo(r,o)},e.prototype.sqrTo=function(n,r){n.squareTo(r)},e}(),Classic=function(){function e(n){this.m=n}return e.prototype.convert=function(n){return n.s<0||n.compareTo(this.m)>=0?n.mod(this.m):n},e.prototype.revert=function(n){return n},e.prototype.reduce=function(n){n.divRemTo(this.m,null,n)},e.prototype.mulTo=function(n,r,o){n.multiplyTo(r,o),this.reduce(o)},e.prototype.sqrTo=function(n,r){n.squareTo(r),this.reduce(r)},e}(),Montgomery=function(){function e(n){this.m=n,this.mp=n.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<n.DB-15)-1,this.mt2=2*n.t}return e.prototype.convert=function(n){var r=nbi();return n.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),n.s<0&&r.compareTo(BigInteger.ZERO)>0&&this.m.subTo(r,r),r},e.prototype.revert=function(n){var r=nbi();return n.copyTo(r),this.reduce(r),r},e.prototype.reduce=function(n){for(;n.t<=this.mt2;)n[n.t++]=0;for(var r=0;r<this.m.t;++r){var o=32767&n[r],u=o*this.mpl+((o*this.mph+(n[r]>>15)*this.mpl&this.um)<<15)&n.DM;for(n[o=r+this.m.t]+=this.m.am(0,u,n,r,0,this.m.t);n[o]>=n.DV;)n[o]-=n.DV,n[++o]++}n.clamp(),n.drShiftTo(this.m.t,n),n.compareTo(this.m)>=0&&n.subTo(this.m,n)},e.prototype.mulTo=function(n,r,o){n.multiplyTo(r,o),this.reduce(o)},e.prototype.sqrTo=function(n,r){n.squareTo(r),this.reduce(r)},e}(),Barrett=function(){function e(n){this.m=n,this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*n.t,this.r2),this.mu=this.r2.divide(n)}return e.prototype.convert=function(n){if(n.s<0||n.t>2*this.m.t)return n.mod(this.m);if(n.compareTo(this.m)<0)return n;var r=nbi();return n.copyTo(r),this.reduce(r),r},e.prototype.revert=function(n){return n},e.prototype.reduce=function(n){for(n.drShiftTo(this.m.t-1,this.r2),n.t>this.m.t+1&&(n.t=this.m.t+1,n.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);n.compareTo(this.r2)<0;)n.dAddOffset(1,this.m.t+1);for(n.subTo(this.r2,n);n.compareTo(this.m)>=0;)n.subTo(this.m,n)},e.prototype.mulTo=function(n,r,o){n.multiplyTo(r,o),this.reduce(o)},e.prototype.sqrTo=function(n,r){n.squareTo(r),this.reduce(r)},e}();function nbi(){return new BigInteger(null)}function parseBigInt(e,n){return new BigInteger(e,n)}var inBrowser=typeof navigator<"u";inBrowser&&j_lm&&navigator.appName=="Microsoft Internet Explorer"?(BigInteger.prototype.am=function(e,n,r,o,u,s){for(var w=32767&n,g=n>>15;--s>=0;){var v=32767&this[e],y=this[e++]>>15,m=g*v+y*w;u=((v=w*v+((32767&m)<<15)+r[o]+(1073741823&u))>>>30)+(m>>>15)+g*y+(u>>>30),r[o++]=1073741823&v}return u},dbits=30):inBrowser&&j_lm&&navigator.appName!="Netscape"?(BigInteger.prototype.am=function(e,n,r,o,u,s){for(;--s>=0;){var w=n*this[e++]+r[o]+u;u=Math.floor(w/67108864),r[o++]=67108863&w}return u},dbits=26):(BigInteger.prototype.am=function(e,n,r,o,u,s){for(var w=16383&n,g=n>>14;--s>=0;){var v=16383&this[e],y=this[e++]>>14,m=g*v+y*w;u=((v=w*v+((16383&m)<<14)+r[o]+u)>>28)+(m>>14)+g*y,r[o++]=268435455&v}return u},dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RC=[],rr,vv;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function intAt(e,n){var r=BI_RC[e.charCodeAt(n)];return r==null?-1:r}function nbv(e){var n=nbi();return n.fromInt(e),n}function nbits(e){var n,r=1;return(n=e>>>16)!=0&&(e=n,r+=16),(n=e>>8)!=0&&(e=n,r+=8),(n=e>>4)!=0&&(e=n,r+=4),(n=e>>2)!=0&&(e=n,r+=2),(n=e>>1)!=0&&(e=n,r+=1),r}BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1);var Arcfour=function(){function e(){this.i=0,this.j=0,this.S=[]}return e.prototype.init=function(n){var r,o,u;for(r=0;r<256;++r)this.S[r]=r;for(o=0,r=0;r<256;++r)o=o+this.S[r]+n[r%n.length]&255,u=this.S[r],this.S[r]=this.S[o],this.S[o]=u;this.i=0,this.j=0},e.prototype.next=function(){var n;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,n=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=n,this.S[n+this.S[this.i]&255]},e}();function prng_newstate(){return new Arcfour}var rng_psize=256,rng_state,rng_pool=null,rng_pptr;if(rng_pool==null){rng_pool=[],rng_pptr=0;var t=void 0;if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){var z=new Uint32Array(256);for(window.crypto.getRandomValues(z),t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z[t]}var count=0,onMouseMoveListener_1=function e(n){if((count=count||0)>=256||rng_pptr>=rng_psize)window.removeEventListener?window.removeEventListener("mousemove",e,!1):window.detachEvent&&window.detachEvent("onmousemove",e);else try{var r=n.x+n.y;rng_pool[rng_pptr++]=255&r,count+=1}catch{}};typeof window<"u"&&(window.addEventListener?window.addEventListener("mousemove",onMouseMoveListener_1,!1):window.attachEvent&&window.attachEvent("onmousemove",onMouseMoveListener_1))}function rng_get_byte(){if(rng_state==null){for(rng_state=prng_newstate();rng_pptr<rng_psize;){var e=Math.floor(65536*Math.random());rng_pool[rng_pptr++]=255&e}for(rng_state.init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}var SecureRandom=function(){function e(){}return e.prototype.nextBytes=function(n){for(var r=0;r<n.length;++r)n[r]=rng_get_byte()},e}();function pkcs1pad1(e,n){if(n<e.length+22)return console.error("Message too long for RSA"),null;for(var r=n-e.length-6,o="",u=0;u<r;u+=2)o+="ff";return parseBigInt("0001"+o+"00"+e,16)}function pkcs1pad2(e,n){if(n<e.length+11)return console.error("Message too long for RSA"),null;for(var r=[],o=e.length-1;o>=0&&n>0;){var u=e.charCodeAt(o--);u<128?r[--n]=u:u>127&&u<2048?(r[--n]=63&u|128,r[--n]=u>>6|192):(r[--n]=63&u|128,r[--n]=u>>6&63|128,r[--n]=u>>12|224)}r[--n]=0;for(var s=new SecureRandom,w=[];n>2;){for(w[0]=0;w[0]==0;)s.nextBytes(w);r[--n]=w[0]}return r[--n]=2,r[--n]=0,new BigInteger(r)}var RSAKey=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.doPublic=function(n){return n.modPowInt(this.e,this.n)},e.prototype.doPrivate=function(n){if(this.p==null||this.q==null)return n.modPow(this.d,this.n);for(var r=n.mod(this.p).modPow(this.dmp1,this.p),o=n.mod(this.q).modPow(this.dmq1,this.q);r.compareTo(o)<0;)r=r.add(this.p);return r.subtract(o).multiply(this.coeff).mod(this.p).multiply(this.q).add(o)},e.prototype.setPublic=function(n,r){n!=null&&r!=null&&n.length>0&&r.length>0?(this.n=parseBigInt(n,16),this.e=parseInt(r,16)):console.error("Invalid RSA public key")},e.prototype.encrypt=function(n){var r=this.n.bitLength()+7>>3,o=pkcs1pad2(n,r);if(o==null)return null;var u=this.doPublic(o);if(u==null)return null;for(var s=u.toString(16),w=s.length,g=0;g<2*r-w;g++)s="0"+s;return s},e.prototype.setPrivate=function(n,r,o){n!=null&&r!=null&&n.length>0&&r.length>0?(this.n=parseBigInt(n,16),this.e=parseInt(r,16),this.d=parseBigInt(o,16)):console.error("Invalid RSA private key")},e.prototype.setPrivateEx=function(n,r,o,u,s,w,g,v){n!=null&&r!=null&&n.length>0&&r.length>0?(this.n=parseBigInt(n,16),this.e=parseInt(r,16),this.d=parseBigInt(o,16),this.p=parseBigInt(u,16),this.q=parseBigInt(s,16),this.dmp1=parseBigInt(w,16),this.dmq1=parseBigInt(g,16),this.coeff=parseBigInt(v,16)):console.error("Invalid RSA private key")},e.prototype.generate=function(n,r){var o=new SecureRandom,u=n>>1;this.e=parseInt(r,16);for(var s=new BigInteger(r,16);;){for(;this.p=new BigInteger(n-u,1,o),this.p.subtract(BigInteger.ONE).gcd(s).compareTo(BigInteger.ONE)!=0||!this.p.isProbablePrime(10););for(;this.q=new BigInteger(u,1,o),this.q.subtract(BigInteger.ONE).gcd(s).compareTo(BigInteger.ONE)!=0||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var w=this.p;this.p=this.q,this.q=w}var g=this.p.subtract(BigInteger.ONE),v=this.q.subtract(BigInteger.ONE),y=g.multiply(v);if(y.gcd(s).compareTo(BigInteger.ONE)==0){this.n=this.p.multiply(this.q),this.d=s.modInverse(y),this.dmp1=this.d.mod(g),this.dmq1=this.d.mod(v),this.coeff=this.q.modInverse(this.p);break}}},e.prototype.decrypt=function(n){var r=parseBigInt(n,16),o=this.doPrivate(r);return o==null?null:pkcs1unpad2(o,this.n.bitLength()+7>>3)},e.prototype.generateAsync=function(n,r,o){var u=new SecureRandom,s=n>>1;this.e=parseInt(r,16);var w=new BigInteger(r,16),g=this;setTimeout(function v(){var y=function(){if(g.p.compareTo(g.q)<=0){var d=g.p;g.p=g.q,g.q=d}var f=g.p.subtract(BigInteger.ONE),x=g.q.subtract(BigInteger.ONE),k=f.multiply(x);k.gcd(w).compareTo(BigInteger.ONE)==0?(g.n=g.p.multiply(g.q),g.d=w.modInverse(k),g.dmp1=g.d.mod(f),g.dmq1=g.d.mod(x),g.coeff=g.q.modInverse(g.p),setTimeout(function(){o()},0)):setTimeout(v,0)},m=function d(){g.q=nbi(),g.q.fromNumberAsync(s,1,u,function(){g.q.subtract(BigInteger.ONE).gcda(w,function(f){f.compareTo(BigInteger.ONE)==0&&g.q.isProbablePrime(10)?setTimeout(y,0):setTimeout(d,0)})})};setTimeout(function d(){g.p=nbi(),g.p.fromNumberAsync(n-s,1,u,function(){g.p.subtract(BigInteger.ONE).gcda(w,function(f){f.compareTo(BigInteger.ONE)==0&&g.p.isProbablePrime(10)?setTimeout(m,0):setTimeout(d,0)})})},0)},0)},e.prototype.sign=function(n,r,o){var u=pkcs1pad1(getDigestHeader(o)+r(n).toString(),this.n.bitLength()/4);if(u==null)return null;var s=this.doPrivate(u);if(s==null)return null;var w=s.toString(16);return 1&w.length?"0"+w:w},e.prototype.verify=function(n,r,o){var u=parseBigInt(r,16),s=this.doPublic(u);return s==null?null:removeDigestHeader(s.toString(16).replace(/^1f+00/,""))==o(n).toString()},e}();function pkcs1unpad2(e,n){for(var r=e.toByteArray(),o=0;o<r.length&&r[o]==0;)++o;if(r.length-o!=n-1||r[o]!=2)return null;for(++o;r[o]!=0;)if(++o>=r.length)return null;for(var u="";++o<r.length;){var s=255&r[o];s<128?u+=String.fromCharCode(s):s>191&&s<224?(u+=String.fromCharCode((31&s)<<6|63&r[o+1]),++o):(u+=String.fromCharCode((15&s)<<12|(63&r[o+1])<<6|63&r[o+2]),o+=2)}return u}var DIGEST_HEADERS={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"};function getDigestHeader(e){return DIGEST_HEADERS[e]||""}function removeDigestHeader(e){for(var n in DIGEST_HEADERS)if(DIGEST_HEADERS.hasOwnProperty(n)){var r=DIGEST_HEADERS[n],o=r.length;if(e.substr(0,o)==r)return e.substr(o)}return e}/*!
Copyright (c) 2011, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 2.9.0
*/var YAHOO={};YAHOO.lang={extend:function(e,n,r){if(!n||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var o=function(){};if(o.prototype=n.prototype,e.prototype=new o,e.prototype.constructor=e,e.superclass=n.prototype,n.prototype.constructor==Object.prototype.constructor&&(n.prototype.constructor=n),r){var u;for(u in r)e.prototype[u]=r[u];var s=function(){},w=["toString","valueOf"];try{/MSIE/.test(navigator.userAgent)&&(s=function(g,v){for(u=0;u<w.length;u+=1){var y=w[u],m=v[y];typeof m=="function"&&m!=Object.prototype[y]&&(g[y]=m)}})}catch{}s(e.prototype,r)}}};/**
 * @fileOverview
 * @name asn1-1.0.js
 * @author Kenji Urushima kenji.urushima@gmail.com
 * @version asn1 1.0.13 (2017-Jun-02)
 * @since jsrsasign 2.1
 * @license <a href="https://kjur.github.io/jsrsasign/license/">MIT License</a>
 */var KJUR={};KJUR.asn1!==void 0&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var n=e.toString(16);return n.length%2==1&&(n="0"+n),n},this.bigIntToMinTwosComplementsHex=function(e){var n=e.toString(16);if(n.substr(0,1)!="-")n.length%2==1?n="0"+n:n.match(/^[0-7]/)||(n="00"+n);else{var r=n.substr(1).length;r%2==1?r+=1:n.match(/^[0-7]/)||(r+=2);for(var o="",u=0;u<r;u++)o+="f";n=new BigInteger(o,16).xor(e).add(BigInteger.ONE).toString(16).replace(/^-/,"")}return n},this.getPEMStringFromHex=function(e,n){return hextopem(e,n)},this.newObject=function(e){var n=KJUR.asn1,r=n.DERBoolean,o=n.DERInteger,u=n.DERBitString,s=n.DEROctetString,w=n.DERNull,g=n.DERObjectIdentifier,v=n.DEREnumerated,y=n.DERUTF8String,m=n.DERNumericString,d=n.DERPrintableString,f=n.DERTeletexString,x=n.DERIA5String,k=n.DERUTCTime,P=n.DERGeneralizedTime,S=n.DERSequence,E=n.DERSet,M=n.DERTaggedObject,T=n.ASN1Util.newObject,D=Object.keys(e);if(D.length!=1)throw"key of param shall be only one.";var I=D[0];if(":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+I+":")==-1)throw"undefined key: "+I;if(I=="bool")return new r(e[I]);if(I=="int")return new o(e[I]);if(I=="bitstr")return new u(e[I]);if(I=="octstr")return new s(e[I]);if(I=="null")return new w(e[I]);if(I=="oid")return new g(e[I]);if(I=="enum")return new v(e[I]);if(I=="utf8str")return new y(e[I]);if(I=="numstr")return new m(e[I]);if(I=="prnstr")return new d(e[I]);if(I=="telstr")return new f(e[I]);if(I=="ia5str")return new x(e[I]);if(I=="utctime")return new k(e[I]);if(I=="gentime")return new P(e[I]);if(I=="seq"){for(var N=e[I],O=[],F=0;F<N.length;F++){var U=T(N[F]);O.push(U)}return new S({array:O})}if(I=="set"){for(N=e[I],O=[],F=0;F<N.length;F++)U=T(N[F]),O.push(U);return new E({array:O})}if(I=="tag"){var Y=e[I];if(Object.prototype.toString.call(Y)==="[object Array]"&&Y.length==3){var Q=T(Y[2]);return new M({tag:Y[0],explicit:Y[1],obj:Q})}var q={};if(Y.explicit!==void 0&&(q.explicit=Y.explicit),Y.tag!==void 0&&(q.tag=Y.tag),Y.obj===void 0)throw"obj shall be specified for 'tag'.";return q.obj=T(Y.obj),new M(q)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},KJUR.asn1.ASN1Util.oidHexToInt=function(e){for(var n="",r=parseInt(e.substr(0,2),16),o=(n=Math.floor(r/40)+"."+r%40,""),u=2;u<e.length;u+=2){var s=("00000000"+parseInt(e.substr(u,2),16).toString(2)).slice(-8);o+=s.substr(1,7),s.substr(0,1)=="0"&&(n=n+"."+new BigInteger(o,2).toString(10),o="")}return n},KJUR.asn1.ASN1Util.oidIntToHex=function(e){var n=function(g){var v=g.toString(16);return v.length==1&&(v="0"+v),v},r=function(g){var v="",y=new BigInteger(g,10).toString(2),m=7-y.length%7;m==7&&(m=0);for(var d="",f=0;f<m;f++)d+="0";for(y=d+y,f=0;f<y.length-1;f+=7){var x=y.substr(f,7);f!=y.length-7&&(x="1"+x),v+=n(parseInt(x,2))}return v};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var o="",u=e.split("."),s=40*parseInt(u[0])+parseInt(u[1]);o+=n(s),u.splice(0,2);for(var w=0;w<u.length;w++)o+=r(u[w]);return o},KJUR.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(this.hV===void 0||this.hV==null)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n=0,v="+this.hV;var e=this.hV.length/2,n=e.toString(16);if(n.length%2==1&&(n="0"+n),e<128)return n;var r=n.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+n},this.getEncodedHex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.s=n,this.hV=stohex(this.s)},this.setStringHex=function(n){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(typeof e=="string"?this.setString(e):e.str!==void 0?this.setString(e.str):e.hex!==void 0&&this.setStringHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(e){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(n){return utc=n.getTime()+6e4*n.getTimezoneOffset(),new Date(utc)},this.formatDate=function(n,r,o){var u=this.zeroPadding,s=this.localDateToUTC(n),w=String(s.getFullYear());r=="utc"&&(w=w.substr(2,2));var g=w+u(String(s.getMonth()+1),2)+u(String(s.getDate()),2)+u(String(s.getHours()),2)+u(String(s.getMinutes()),2)+u(String(s.getSeconds()),2);if(o===!0){var v=s.getMilliseconds();if(v!=0){var y=u(String(v),3);g=g+"."+(y=y.replace(/[0]+$/,""))}}return g+"Z"},this.zeroPadding=function(n,r){return n.length>=r?n:new Array(r-n.length+1).join("0")+n},this.getString=function(){return this.s},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.s=n,this.hV=stohex(n)},this.setByDateValue=function(n,r,o,u,s,w){var g=new Date(Date.UTC(n,r-1,o,u,s,w,0));this.setByDate(g)},this.getFreshValueHex=function(){return this.hV}},YAHOO.lang.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(n){this.hTLV=null,this.isModified=!0,this.asn1Array=n},this.appendASN1Object=function(n){this.hTLV=null,this.isModified=!0,this.asn1Array.push(n)},this.asn1Array=new Array,e!==void 0&&e.array!==void 0&&(this.asn1Array=e.array)},YAHOO.lang.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},YAHOO.lang.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(e){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(n){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(n)},this.setByInteger=function(n){var r=new BigInteger(String(n),10);this.setByBigInteger(r)},this.setValueHex=function(n){this.hV=n},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(e.bigint!==void 0?this.setByBigInteger(e.bigint):e.int!==void 0?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):e.hex!==void 0&&this.setValueHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(e){if(e!==void 0&&e.obj!==void 0){var n=KJUR.asn1.ASN1Util.newObject(e.obj);e.hex="00"+n.getEncodedHex()}KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(r){this.hTLV=null,this.isModified=!0,this.hV=r},this.setUnusedBitsAndHexValue=function(r,o){if(r<0||7<r)throw"unused bits shall be from 0 to 7: u = "+r;var u="0"+r;this.hTLV=null,this.isModified=!0,this.hV=u+o},this.setByBinaryString=function(r){var o=8-(r=r.replace(/0+$/,"")).length%8;o==8&&(o=0);for(var u=0;u<=o;u++)r+="0";var s="";for(u=0;u<r.length-1;u+=8){var w=r.substr(u,8),g=parseInt(w,2).toString(16);g.length==1&&(g="0"+g),s+=g}this.hTLV=null,this.isModified=!0,this.hV="0"+o+s},this.setByBooleanArray=function(r){for(var o="",u=0;u<r.length;u++)r[u]==1?o+="1":o+="0";this.setByBinaryString(o)},this.newFalseArray=function(r){for(var o=new Array(r),u=0;u<r;u++)o[u]=!1;return o},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(typeof e=="string"&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):e.hex!==void 0?this.setHexValueIncludingUnusedBits(e.hex):e.bin!==void 0?this.setByBinaryString(e.bin):e.array!==void 0&&this.setByBooleanArray(e.array))},YAHOO.lang.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(e){if(e!==void 0&&e.obj!==void 0){var n=KJUR.asn1.ASN1Util.newObject(e.obj);e.hex=n.getEncodedHex()}KJUR.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},YAHOO.lang.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},YAHOO.lang.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(e){var n=function(o){var u=o.toString(16);return u.length==1&&(u="0"+u),u},r=function(o){var u="",s=new BigInteger(o,10).toString(2),w=7-s.length%7;w==7&&(w=0);for(var g="",v=0;v<w;v++)g+="0";for(s=g+s,v=0;v<s.length-1;v+=7){var y=s.substr(v,7);v!=s.length-7&&(y="1"+y),u+=n(parseInt(y,2))}return u};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(o){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=o},this.setValueOidString=function(o){if(!o.match(/^[0-9.]+$/))throw"malformed oid string: "+o;var u="",s=o.split("."),w=40*parseInt(s[0])+parseInt(s[1]);u+=n(w),s.splice(0,2);for(var g=0;g<s.length;g++)u+=r(s[g]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=u},this.setValueName=function(o){var u=KJUR.asn1.x509.OID.name2oid(o);if(u==="")throw"DERObjectIdentifier oidName undefined: "+o;this.setValueOidString(u)},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(typeof e=="string"?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):e.oid!==void 0?this.setValueOidString(e.oid):e.hex!==void 0?this.setValueHex(e.hex):e.name!==void 0&&this.setValueName(e.name))},YAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DEREnumerated=function(e){KJUR.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(n){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(n)},this.setByInteger=function(n){var r=new BigInteger(String(n),10);this.setByBigInteger(r)},this.setValueHex=function(n){this.hV=n},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(e.int!==void 0?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):e.hex!==void 0&&this.setValueHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DEREnumerated,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(e){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},YAHOO.lang.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(e){KJUR.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},YAHOO.lang.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(e){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},YAHOO.lang.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(e){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},YAHOO.lang.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(e){KJUR.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},YAHOO.lang.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(e){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(n){this.hTLV=null,this.isModified=!0,this.date=n,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},e!==void 0&&(e.str!==void 0?this.setString(e.str):typeof e=="string"&&e.match(/^[0-9]{12}Z$/)?this.setString(e):e.hex!==void 0?this.setStringHex(e.hex):e.date!==void 0&&this.setByDate(e.date))},YAHOO.lang.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(e){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(n){this.hTLV=null,this.isModified=!0,this.date=n,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return this.date===void 0&&this.s===void 0&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},e!==void 0&&(e.str!==void 0?this.setString(e.str):typeof e=="string"&&e.match(/^[0-9]{14}Z$/)?this.setString(e):e.hex!==void 0?this.setStringHex(e.hex):e.date!==void 0&&this.setByDate(e.date),e.millis===!0&&(this.withMillis=!0))},YAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(e){KJUR.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var n="",r=0;r<this.asn1Array.length;r++)n+=this.asn1Array[r].getEncodedHex();return this.hV=n,this.hV}},YAHOO.lang.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(e){KJUR.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var n=new Array,r=0;r<this.asn1Array.length;r++){var o=this.asn1Array[r];n.push(o.getEncodedHex())}return this.sortFlag==1&&n.sort(),this.hV=n.join(""),this.hV},e!==void 0&&e.sortflag!==void 0&&e.sortflag==0&&(this.sortFlag=!1)},YAHOO.lang.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(e){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(n,r,o){this.hT=r,this.isExplicit=n,this.asn1Object=o,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=o.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,r),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},e!==void 0&&(e.tag!==void 0&&(this.hT=e.tag),e.explicit!==void 0&&(this.isExplicit=e.explicit),e.obj!==void 0&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},YAHOO.lang.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object);var __extends=(_extendStatics=function(e,n){return _extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(r[u]=o[u])},_extendStatics(e,n)},function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}_extendStatics(e,n),e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}),_extendStatics,JSEncryptRSAKey=function(e){function n(r){var o=e.call(this)||this;return r&&(typeof r=="string"?o.parseKey(r):(n.hasPrivateKeyProperty(r)||n.hasPublicKeyProperty(r))&&o.parsePropertiesFrom(r)),o}return __extends(n,e),n.prototype.parseKey=function(r){try{var o=0,u=0,s=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(r)?Hex.decode(r):Base64$1.unarmor(r),w=ASN1.decode(s);if(w.sub.length===3&&(w=w.sub[2].sub[0]),w.sub.length===9){o=w.sub[1].getHexStringValue(),this.n=parseBigInt(o,16),u=w.sub[2].getHexStringValue(),this.e=parseInt(u,16);var g=w.sub[3].getHexStringValue();this.d=parseBigInt(g,16);var v=w.sub[4].getHexStringValue();this.p=parseBigInt(v,16);var y=w.sub[5].getHexStringValue();this.q=parseBigInt(y,16);var m=w.sub[6].getHexStringValue();this.dmp1=parseBigInt(m,16);var d=w.sub[7].getHexStringValue();this.dmq1=parseBigInt(d,16);var f=w.sub[8].getHexStringValue();this.coeff=parseBigInt(f,16)}else{if(w.sub.length!==2)return!1;if(w.sub[0].sub){var x=w.sub[1].sub[0];o=x.sub[0].getHexStringValue(),this.n=parseBigInt(o,16),u=x.sub[1].getHexStringValue(),this.e=parseInt(u,16)}else o=w.sub[0].getHexStringValue(),this.n=parseBigInt(o,16),u=w.sub[1].getHexStringValue(),this.e=parseInt(u,16)}return!0}catch{return!1}},n.prototype.getPrivateBaseKey=function(){var r={array:[new KJUR.asn1.DERInteger({int:0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]};return new KJUR.asn1.DERSequence(r).getEncodedHex()},n.prototype.getPrivateBaseKeyB64=function(){return hex2b64(this.getPrivateBaseKey())},n.prototype.getPublicBaseKey=function(){var r=new KJUR.asn1.DERSequence({array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]}),o=new KJUR.asn1.DERSequence({array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e})]}),u=new KJUR.asn1.DERBitString({hex:"00"+o.getEncodedHex()});return new KJUR.asn1.DERSequence({array:[r,u]}).getEncodedHex()},n.prototype.getPublicBaseKeyB64=function(){return hex2b64(this.getPublicBaseKey())},n.wordwrap=function(r,o){if(!r)return r;var u="(.{1,"+(o=o||64)+`})( +|$
?)|(.{1,`+o+"})";return r.match(RegExp(u,"g")).join(`
`)},n.prototype.getPrivateKey=function(){var r=`-----BEGIN RSA PRIVATE KEY-----
`;return r+=n.wordwrap(this.getPrivateBaseKeyB64())+`
`,r+="-----END RSA PRIVATE KEY-----"},n.prototype.getPublicKey=function(){var r=`-----BEGIN PUBLIC KEY-----
`;return r+=n.wordwrap(this.getPublicBaseKeyB64())+`
`,r+="-----END PUBLIC KEY-----"},n.hasPublicKeyProperty=function(r){return(r=r||{}).hasOwnProperty("n")&&r.hasOwnProperty("e")},n.hasPrivateKeyProperty=function(r){return(r=r||{}).hasOwnProperty("n")&&r.hasOwnProperty("e")&&r.hasOwnProperty("d")&&r.hasOwnProperty("p")&&r.hasOwnProperty("q")&&r.hasOwnProperty("dmp1")&&r.hasOwnProperty("dmq1")&&r.hasOwnProperty("coeff")},n.prototype.parsePropertiesFrom=function(r){this.n=r.n,this.e=r.e,r.hasOwnProperty("d")&&(this.d=r.d,this.p=r.p,this.q=r.q,this.dmp1=r.dmp1,this.dmq1=r.dmq1,this.coeff=r.coeff)},n}(RSAKey),_a$1,version$1=typeof process<"u"?(_a$1=process.env)===null||_a$1===void 0?void 0:_a$1.npm_package_version:void 0,JSEncrypt=function(){function e(n){n===void 0&&(n={}),n=n||{},this.default_key_size=n.default_key_size?parseInt(n.default_key_size,10):1024,this.default_public_exponent=n.default_public_exponent||"010001",this.log=n.log||!1,this.key=null}return e.prototype.setKey=function(n){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new JSEncryptRSAKey(n)},e.prototype.setPrivateKey=function(n){this.setKey(n)},e.prototype.setPublicKey=function(n){this.setKey(n)},e.prototype.decrypt=function(n){try{return this.getKey().decrypt(b64tohex(n))}catch{return!1}},e.prototype.encrypt=function(n){try{return hex2b64(this.getKey().encrypt(n))}catch{return!1}},e.prototype.sign=function(n,r,o){try{return hex2b64(this.getKey().sign(n,r,o))}catch{return!1}},e.prototype.verify=function(n,r,o){try{return this.getKey().verify(n,b64tohex(r),o)}catch{return!1}},e.prototype.getKey=function(n){if(!this.key){if(this.key=new JSEncryptRSAKey,n&&{}.toString.call(n)==="[object Function]")return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,n);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},e.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},e.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},e.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},e.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},e.version=version$1,e}(),base64Exports={},base64={get exports(){return base64Exports},set exports(e){base64Exports=e}},module$1,exports$1;module$1=base64,exports$1=base64Exports,function(e){var n=exports$1,r=module$1&&module$1.exports==n&&module$1,o=_typeof$1(commonjsGlobal$1)=="object"&&commonjsGlobal$1;o.global!==o&&o.window!==o||(e=o);var u=function(m){this.message=m};(u.prototype=new Error).name="InvalidCharacterError";var s=function(m){throw new u(m)},w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=/[\t\n\f\r ]/g,v={encode:function(m){m=String(m),/[^\0-\xFF]/.test(m)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var d,f,x,k,P=m.length%3,S="",E=-1,M=m.length-P;++E<M;)d=m.charCodeAt(E)<<16,f=m.charCodeAt(++E)<<8,x=m.charCodeAt(++E),S+=w.charAt((k=d+f+x)>>18&63)+w.charAt(k>>12&63)+w.charAt(k>>6&63)+w.charAt(63&k);return P==2?(d=m.charCodeAt(E)<<8,f=m.charCodeAt(++E),S+=w.charAt((k=d+f)>>10)+w.charAt(k>>4&63)+w.charAt(k<<2&63)+"="):P==1&&(k=m.charCodeAt(E),S+=w.charAt(k>>2)+w.charAt(k<<4&63)+"=="),S},decode:function(m){var d=(m=String(m).replace(g,"")).length;d%4==0&&(d=(m=m.replace(/==?$/,"")).length),(d%4==1||/[^+a-zA-Z0-9/]/.test(m))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var f,x,k=0,P="",S=-1;++S<d;)x=w.indexOf(m.charAt(S)),f=k%4?64*f+x:x,k++%4&&(P+=String.fromCharCode(255&f>>(-2*k&6)));return P},version:"1.0.0"};if(n&&!n.nodeType)if(r)r.exports=v;else for(var y in v)v.hasOwnProperty(y)&&(n[y]=v[y]);else e.base64=v}(commonjsGlobal$1);var Base64=base64Exports,printExports={},print={get exports(){return printExports},set exports(e){printExports=e}},factory;factory=function(){return function(e){var n={};function r(o){if(n[o])return n[o].exports;var u=n[o]={i:o,l:!1,exports:{}};return e[o].call(u.exports,u,u.exports,r),u.l=!0,u.exports}return r.m=e,r.c=n,r.d=function(o,u,s){r.o(o,u)||Object.defineProperty(o,u,{enumerable:!0,get:s})},r.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,u){if(1&u&&(o=r(o)),8&u||4&u&&_typeof$1(o)==="object"&&o&&o.__esModule)return o;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:o}),2&u&&typeof o!="string")for(var w in o)r.d(s,w,function(g){return o[g]}.bind(null,w));return s},r.n=function(o){var u=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(u,"a",u),u},r.o=function(o,u){return Object.prototype.hasOwnProperty.call(o,u)},r.p="",r(r.s=0)}({"./src/index.js":function(e,n,r){r.r(n),r("./src/sass/index.scss");var o=r("./src/js/init.js").default.init;typeof window<"u"&&(window.printJS=o),n.default=o},"./src/js/browser.js":function(e,n,r){r.r(n);var o={isFirefox:function(){return typeof InstallTrigger<"u"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!o.isIE()&&!!window.StyleMedia},isChrome:function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window).chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};n.default=o},"./src/js/functions.js":function(e,n,r){r.r(n),r.d(n,"addWrapper",function(){return w}),r.d(n,"capitalizePrint",function(){return g}),r.d(n,"collectStyles",function(){return v}),r.d(n,"addHeader",function(){return m}),r.d(n,"cleanUp",function(){return d}),r.d(n,"isRawHTML",function(){return f});var o=r("./src/js/modal.js"),u=r("./src/js/browser.js");function s(x){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},s(x)}function w(x,k){return'<div style="font-family:'+k.font+" !important; font-size: "+k.font_size+' !important; width:100%;">'+x+"</div>"}function g(x){return x.charAt(0).toUpperCase()+x.slice(1)}function v(x,k){for(var P="",S=(document.defaultView||window).getComputedStyle(x,""),E=0;E<S.length;E++)(k.targetStyles.indexOf("*")!==-1||k.targetStyle.indexOf(S[E])!==-1||y(k.targetStyles,S[E]))&&S.getPropertyValue(S[E])&&(P+=S[E]+":"+S.getPropertyValue(S[E])+";");return P+="max-width: "+k.maxWidth+"px !important; font-size: "+k.font_size+" !important;"}function y(x,k){for(var P=0;P<x.length;P++)if(s(k)==="object"&&k.indexOf(x[P])!==-1)return!0;return!1}function m(x,k){var P=document.createElement("div");if(f(k.header))P.innerHTML=k.header;else{var S=document.createElement("h1"),E=document.createTextNode(k.header);S.appendChild(E),S.setAttribute("style",k.headerStyle),P.appendChild(S)}x.insertBefore(P,x.childNodes[0])}function d(x){x.showModal&&o.default.close(),x.onLoadingEnd&&x.onLoadingEnd(),(x.showModal||x.onLoadingStart)&&window.URL.revokeObjectURL(x.printable);var k="mouseover";(u.default.isChrome()||u.default.isFirefox())&&(k="focus"),window.addEventListener(k,function P(){window.removeEventListener(k,P),x.onPrintDialogClose();var S=document.getElementById(x.frameId);S&&S.remove()})}function f(x){return new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>").test(x)}},"./src/js/html.js":function(e,n,r){r.r(n);var o=r("./src/js/functions.js"),u=r("./src/js/print.js");function s(g){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},s(g)}function w(g,v){for(var y=g.cloneNode(),m=Array.prototype.slice.call(g.childNodes),d=0;d<m.length;d++)if(v.ignoreElements.indexOf(m[d].id)===-1){var f=w(m[d],v);y.appendChild(f)}switch(v.scanStyles&&g.nodeType===1&&y.setAttribute("style",Object(o.collectStyles)(g,v)),g.tagName){case"SELECT":y.value=g.value;break;case"CANVAS":y.getContext("2d").drawImage(g,0,0)}return y}n.default={print:function(g,v){var y,m=s(y=g.printable)==="object"&&y&&(y instanceof HTMLElement||y.nodeType===1)?g.printable:document.getElementById(g.printable);m?(g.printableElement=w(m,g),g.header&&Object(o.addHeader)(g.printableElement,g),u.default.send(g,v)):window.console.error("Invalid HTML element id: "+g.printable)}}},"./src/js/image.js":function(e,n,r){r.r(n);var o=r("./src/js/functions.js"),u=r("./src/js/print.js"),s=r("./src/js/browser.js");n.default={print:function(w,g){w.printable.constructor!==Array&&(w.printable=[w.printable]),w.printableElement=document.createElement("div"),w.printable.forEach(function(v){var y=document.createElement("img");if(y.setAttribute("style",w.imageStyle),y.src=v,s.default.isFirefox()){var m=y.src;y.src=m}var d=document.createElement("div");d.appendChild(y),w.printableElement.appendChild(d)}),w.header&&Object(o.addHeader)(w.printableElement,w),u.default.send(w,g)}}},"./src/js/init.js":function(e,n,r){r.r(n);var o=r("./src/js/browser.js"),u=r("./src/js/modal.js"),s=r("./src/js/pdf.js"),w=r("./src/js/html.js"),g=r("./src/js/raw-html.js"),v=r("./src/js/image.js"),y=r("./src/js/json.js");function m(f){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},m(f)}var d=["pdf","html","image","json","raw-html"];n.default={init:function(){var f={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(E){throw E},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},x=arguments[0];if(x===void 0)throw new Error("printJS expects at least 1 attribute.");switch(m(x)){case"string":f.printable=encodeURI(x),f.fallbackPrintable=f.printable,f.type=arguments[1]||f.type;break;case"object":for(var k in f.printable=x.printable,f.fallbackPrintable=x.fallbackPrintable!==void 0?x.fallbackPrintable:f.printable,f.fallbackPrintable=f.base64?"data:application/pdf;base64,".concat(f.fallbackPrintable):f.fallbackPrintable,f)k!=="printable"&&k!=="fallbackPrintable"&&(f[k]=x[k]!==void 0?x[k]:f[k]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+m(x))}if(!f.printable)throw new Error("Missing printable information.");if(!f.type||typeof f.type!="string"||d.indexOf(f.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");f.showModal&&u.default.show(f),f.onLoadingStart&&f.onLoadingStart();var P=document.getElementById(f.frameId);P&&P.parentNode.removeChild(P);var S=document.createElement("iframe");switch(o.default.isFirefox()?S.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):S.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),S.setAttribute("id",f.frameId),f.type!=="pdf"&&(S.srcdoc="<html><head><title>"+f.documentTitle+"</title>",f.css&&(Array.isArray(f.css)||(f.css=[f.css]),f.css.forEach(function(E){S.srcdoc+='<link rel="stylesheet" href="'+E+'">'})),S.srcdoc+="</head><body></body></html>"),f.type){case"pdf":if(o.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer."),window.open(f.fallbackPrintable,"_blank").focus(),f.onIncompatibleBrowser()}catch(E){f.onError(E)}finally{f.showModal&&u.default.close(),f.onLoadingEnd&&f.onLoadingEnd()}else s.default.print(f,S);break;case"image":v.default.print(f,S);break;case"html":w.default.print(f,S);break;case"raw-html":g.default.print(f,S);break;case"json":y.default.print(f,S)}}}},"./src/js/json.js":function(e,n,r){r.r(n);var o=r("./src/js/functions.js"),u=r("./src/js/print.js");function s(w){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},s(w)}n.default={print:function(w,g){if(s(w.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof w.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!w.properties||!Array.isArray(w.properties))throw new Error("Invalid properties array for your JSON data.");w.properties=w.properties.map(function(v){return{field:s(v)==="object"?v.field:v,displayName:s(v)==="object"?v.displayName:v,columnSize:s(v)==="object"&&v.columnSize?v.columnSize+";":100/w.properties.length+"%;"}}),w.printableElement=document.createElement("div"),w.header&&Object(o.addHeader)(w.printableElement,w),w.printableElement.innerHTML+=function(v){var y=v.printable,m=v.properties,d='<table style="border-collapse: collapse; width: 100%;">';v.repeatTableHeader&&(d+="<thead>"),d+="<tr>";for(var f=0;f<m.length;f++)d+='<th style="width:'+m[f].columnSize+";"+v.gridHeaderStyle+'">'+Object(o.capitalizePrint)(m[f].displayName)+"</th>";d+="</tr>",v.repeatTableHeader&&(d+="</thead>"),d+="<tbody>";for(var x=0;x<y.length;x++){d+="<tr>";for(var k=0;k<m.length;k++){var P=y[x],S=m[k].field.split(".");if(S.length>1)for(var E=0;E<S.length;E++)P=P[S[E]];else P=P[m[k].field];d+='<td style="width:'+m[k].columnSize+v.gridStyle+'">'+P+"</td>"}d+="</tr>"}return d+="</tbody></table>"}(w),u.default.send(w,g)}}},"./src/js/modal.js":function(e,n,r){r.r(n);var o={show:function(u){var s=document.createElement("div");s.setAttribute("style","font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;"),s.setAttribute("id","printJS-Modal");var w=document.createElement("div");w.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var g=document.createElement("div");g.setAttribute("class","printClose"),g.setAttribute("id","printClose"),w.appendChild(g);var v=document.createElement("span");v.setAttribute("class","printSpinner"),w.appendChild(v);var y=document.createTextNode(u.modalMessage);w.appendChild(y),s.appendChild(w),document.getElementsByTagName("body")[0].appendChild(s),document.getElementById("printClose").addEventListener("click",function(){o.close()})},close:function(){var u=document.getElementById("printJS-Modal");u&&u.parentNode.removeChild(u)}};n.default=o},"./src/js/pdf.js":function(e,n,r){r.r(n);var o=r("./src/js/print.js"),u=r("./src/js/functions.js");function s(w,g,v){var y=new window.Blob([v],{type:"application/pdf"});y=window.URL.createObjectURL(y),g.setAttribute("src",y),o.default.send(w,g)}n.default={print:function(w,g){if(w.base64){var v=Uint8Array.from(atob(w.printable),function(m){return m.charCodeAt(0)});s(w,g,v)}else{w.printable=/^(blob|http|\/\/)/i.test(w.printable)?w.printable:window.location.origin+(w.printable.charAt(0)!=="/"?"/"+w.printable:w.printable);var y=new window.XMLHttpRequest;y.responseType="arraybuffer",y.addEventListener("error",function(){Object(u.cleanUp)(w),w.onError(y.statusText,y)}),y.addEventListener("load",function(){if([200,201].indexOf(y.status)===-1)return Object(u.cleanUp)(w),void w.onError(y.statusText,y);s(w,g,y.response)}),y.open("GET",w.printable,!0),y.send()}}}},"./src/js/print.js":function(e,n,r){r.r(n);var o=r("./src/js/browser.js"),u=r("./src/js/functions.js"),s={send:function(g,v){document.getElementsByTagName("body")[0].appendChild(v);var y=document.getElementById(g.frameId);y.onload=function(){if(g.type!=="pdf"){var m=y.contentWindow||y.contentDocument;if(m.document&&(m=m.document),m.body.appendChild(g.printableElement),g.type!=="pdf"&&g.style){var d=document.createElement("style");d.innerHTML=g.style,m.head.appendChild(d)}var f=m.getElementsByTagName("img");f.length>0?function(x){var k=x.map(function(P){if(P.src&&P.src!==window.location.href)return function(S){return new Promise(function(E){(function M(){S&&S.naturalWidth!==void 0&&S.naturalWidth!==0&&S.complete?E():setTimeout(M,500)})()})}(P)});return Promise.all(k)}(Array.from(f)).then(function(){return w(y,g)}):w(y,g)}else o.default.isFirefox()?setTimeout(function(){return w(y,g)},1e3):w(y,g)}}};function w(g,v){try{if(g.focus(),o.default.isEdge()||o.default.isIE())try{g.contentWindow.document.execCommand("print",!1,null)}catch{g.contentWindow.print()}else g.contentWindow.print()}catch(y){v.onError(y)}finally{o.default.isFirefox()&&(g.style.visibility="hidden",g.style.left="-1px"),Object(u.cleanUp)(v)}}n.default=s},"./src/js/raw-html.js":function(e,n,r){r.r(n);var o=r("./src/js/print.js");n.default={print:function(u,s){u.printableElement=document.createElement("div"),u.printableElement.setAttribute("style","width:100%"),u.printableElement.innerHTML=u.printable,o.default.send(u,s)}}},"./src/sass/index.scss":function(e,n,r){},0:function(e,n,r){e.exports=r("./src/index.js")}}).default},print.exports=factory();var printJS=getDefaultExportFromCjs$1(printExports),FileSaver_minExports={},FileSaver_min$1={get exports(){return FileSaver_minExports},set exports(e){FileSaver_minExports=e}};(function(e,n){(function(){function r(y,m){return m===void 0?m={autoBom:!1}:_typeof$1(m)!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function o(y,m,d){var f=new XMLHttpRequest;f.open("GET",y),f.responseType="blob",f.onload=function(){v(f.response,m,d)},f.onerror=function(){console.error("could not download file")},f.send()}function u(y){var m=new XMLHttpRequest;m.open("HEAD",y,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function s(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(m)}}var w=(typeof window>"u"?"undefined":_typeof$1(window))=="object"&&window.window===window?window:(typeof self>"u"?"undefined":_typeof$1(self))=="object"&&self.self===self?self:_typeof$1(commonjsGlobal$1)=="object"&&commonjsGlobal$1.global===commonjsGlobal$1?commonjsGlobal$1:void 0,g=w.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=w.saveAs||((typeof window>"u"?"undefined":_typeof$1(window))!="object"||window!==w?function(){}:"download"in HTMLAnchorElement.prototype&&!g?function(y,m,d){var f=w.URL||w.webkitURL,x=document.createElement("a");m=m||y.name||"download",x.download=m,x.rel="noopener",typeof y=="string"?(x.href=y,x.origin===location.origin?s(x):u(x.href)?o(y,m,d):s(x,x.target="_blank")):(x.href=f.createObjectURL(y),setTimeout(function(){f.revokeObjectURL(x.href)},4e4),setTimeout(function(){s(x)},0))}:"msSaveOrOpenBlob"in navigator?function(y,m,d){if(m=m||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(r(y,d),m);else if(u(y))o(y,m,d);else{var f=document.createElement("a");f.href=y,f.target="_blank",setTimeout(function(){s(f)})}}:function(y,m,d,f){if((f=f||open("","_blank"))&&(f.document.title=f.document.body.innerText="downloading..."),typeof y=="string")return o(y,m,d);var x=y.type==="application/octet-stream",k=/constructor/i.test(w.HTMLElement)||w.safari,P=/CriOS\/[\d]+/.test(navigator.userAgent);if((P||x&&k||g)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var T=S.result;T=P?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=T:location=T,f=null},S.readAsDataURL(y)}else{var E=w.URL||w.webkitURL,M=E.createObjectURL(y);f?f.location=M:location.href=M,f=null,setTimeout(function(){E.revokeObjectURL(M)},4e4)}});w.saveAs=v.saveAs=v,e.exports=v})()})(FileSaver_min$1);var lodashExports={},lodash={get exports(){return lodashExports},set exports(e){lodashExports=e}};(function(e,n){(function(){var r,o="Expected a function",u="__lodash_hash_undefined__",s="__lodash_placeholder__",w=16,g=32,v=64,y=128,m=256,d=1/0,f=9007199254740991,x=NaN,k=4294967295,P=[["ary",y],["bind",1],["bindKey",2],["curry",8],["curryRight",w],["flip",512],["partial",g],["partialRight",v],["rearg",m]],S="[object Arguments]",E="[object Array]",M="[object Boolean]",T="[object Date]",D="[object Error]",I="[object Function]",N="[object GeneratorFunction]",O="[object Map]",F="[object Number]",U="[object Object]",Y="[object Promise]",Q="[object RegExp]",q="[object Set]",ne="[object String]",J="[object Symbol]",re="[object WeakMap]",X="[object ArrayBuffer]",j="[object DataView]",Z="[object Float32Array]",W="[object Float64Array]",te="[object Int8Array]",le="[object Int16Array]",oe="[object Int32Array]",Ee="[object Uint8Array]",Ae="[object Uint8ClampedArray]",ve="[object Uint16Array]",ke="[object Uint32Array]",Ce=/\b__p \+= '';/g,Pe=/\b(__p \+=) '' \+/g,Me=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Le=/&(?:amp|lt|gt|quot|#39);/g,Te=/[&<>"']/g,ye=RegExp(Le.source),_e=RegExp(Te.source),we=/<%-([\s\S]+?)%>/g,Se=/<%([\s\S]+?)%>/g,$e=/<%=([\s\S]+?)%>/g,Be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oe=/^\w*$/,Ge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ie=/[\\^$.*+?()[\]{}|]/g,je=RegExp(Ie.source),qe=/^\s+/,Ue=/\s/,Je=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,et=/\{\n\/\* \[wrapped with (.+)\] \*/,nt=/,? & /,st=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gt=/[()=,{}\[\]\/\s]/,_t=/\\(\\)?/g,wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,He=/\w*$/,Ve=/^[-+]0x[0-9a-f]+$/i,ze=/^0b[01]+$/i,Ne=/^\[object .+?Constructor\]$/,We=/^0o[0-7]+$/i,Fe=/^(?:0|[1-9]\d*)$/,Ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ke=/($^)/,Ze=/['\n\r\u2028\u2029\\]/g,ot="\\ud800-\\udfff",Qe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",at="\\u2700-\\u27bf",rt="a-z\\xdf-\\xf6\\xf8-\\xff",ct="A-Z\\xc0-\\xd6\\xd8-\\xde",ht="\\ufe0e\\ufe0f",yt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bt="['\u2019]",$t="["+ot+"]",At="["+yt+"]",Ft="["+Qe+"]",Ht="\\d+",Ot="["+at+"]",Mt="["+rt+"]",pt="[^"+ot+yt+Ht+at+rt+ct+"]",xt="\\ud83c[\\udffb-\\udfff]",Tt="[^"+ot+"]",Ct="(?:\\ud83c[\\udde6-\\uddff]){2}",Nt="[\\ud800-\\udbff][\\udc00-\\udfff]",jt="["+ct+"]",nn="\\u200d",Wt="(?:"+Mt+"|"+pt+")",cn="(?:"+jt+"|"+pt+")",Ln="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Pn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Bn="(?:"+Ft+"|"+xt+")?",zn="["+ht+"]?",Yn=zn+Bn+("(?:"+nn+"(?:"+[Tt,Ct,Nt].join("|")+")"+zn+Bn+")*"),Ii="(?:"+[Ot,Ct,Nt].join("|")+")"+Yn,ui="(?:"+[Tt+Ft+"?",Ft,Ct,Nt,$t].join("|")+")",$i=RegExp(bt,"g"),yi=RegExp(Ft,"g"),Mi=RegExp(xt+"(?="+xt+")|"+ui+Yn,"g"),Dr=RegExp([jt+"?"+Mt+"+"+Ln+"(?="+[At,jt,"$"].join("|")+")",cn+"+"+Pn+"(?="+[At,jt+Wt,"$"].join("|")+")",jt+"?"+Wt+"+"+Ln,jt+"+"+Pn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ht,Ii].join("|"),"g"),Mo=RegExp("["+nn+ot+Qe+ht+"]"),To=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Lo=-1,kn={};kn[Z]=kn[W]=kn[te]=kn[le]=kn[oe]=kn[Ee]=kn[Ae]=kn[ve]=kn[ke]=!0,kn[S]=kn[E]=kn[X]=kn[M]=kn[j]=kn[T]=kn[D]=kn[I]=kn[O]=kn[F]=kn[U]=kn[Q]=kn[q]=kn[ne]=kn[re]=!1;var wn={};wn[S]=wn[E]=wn[X]=wn[j]=wn[M]=wn[T]=wn[Z]=wn[W]=wn[te]=wn[le]=wn[oe]=wn[O]=wn[F]=wn[U]=wn[Q]=wn[q]=wn[ne]=wn[J]=wn[Ee]=wn[Ae]=wn[ve]=wn[ke]=!0,wn[D]=wn[I]=wn[re]=!1;var Zr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ra=parseFloat,oa=parseInt,Do=_typeof$1(commonjsGlobal$1)=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,aa=(typeof self>"u"?"undefined":_typeof$1(self))=="object"&&self&&self.Object===Object&&self,On=Do||aa||Function("return this")(),Ni=n&&!n.nodeType&&n,ji=Ni&&e&&!e.nodeType&&e,dr=ji&&ji.exports===Ni,Wi=dr&&Do.process,Xn=function(){try{var Pt=ji&&ji.require&&ji.require("util").types;return Pt||Wi&&Wi.binding&&Wi.binding("util")}catch{}}(),ni=Xn&&Xn.isArrayBuffer,Jr=Xn&&Xn.isDate,Rr=Xn&&Xn.isMap,Qr=Xn&&Xn.isRegExp,hr=Xn&&Xn.isSet,pr=Xn&&Xn.isTypedArray;function Jn(Pt,Lt,It){switch(It.length){case 0:return Pt.call(Lt);case 1:return Pt.call(Lt,It[0]);case 2:return Pt.call(Lt,It[0],It[1]);case 3:return Pt.call(Lt,It[0],It[1],It[2])}return Pt.apply(Lt,It)}function sa(Pt,Lt,It,qt){for(var ln=-1,_n=Pt==null?0:Pt.length;++ln<_n;){var jn=Pt[ln];Lt(qt,jn,It(jn),Pt)}return qt}function oi(Pt,Lt){for(var It=-1,qt=Pt==null?0:Pt.length;++It<qt&&Lt(Pt[It],It,Pt)!==!1;);return Pt}function eo(Pt,Lt){for(var It=Pt==null?0:Pt.length;It--&&Lt(Pt[It],It,Pt)!==!1;);return Pt}function er(Pt,Lt){for(var It=-1,qt=Pt==null?0:Pt.length;++It<qt;)if(!Lt(Pt[It],It,Pt))return!1;return!0}function Vi(Pt,Lt){for(var It=-1,qt=Pt==null?0:Pt.length,ln=0,_n=[];++It<qt;){var jn=Pt[It];Lt(jn,It,Pt)&&(_n[ln++]=jn)}return _n}function Ir(Pt,Lt){return!!(Pt!=null&&Pt.length)&&Nr(Pt,Lt,0)>-1}function to(Pt,Lt,It){for(var qt=-1,ln=Pt==null?0:Pt.length;++qt<ln;)if(It(Lt,Pt[qt]))return!0;return!1}function $n(Pt,Lt){for(var It=-1,qt=Pt==null?0:Pt.length,ln=Array(qt);++It<qt;)ln[It]=Lt(Pt[It],It,Pt);return ln}function Ui(Pt,Lt){for(var It=-1,qt=Lt.length,ln=Pt.length;++It<qt;)Pt[ln+It]=Lt[It];return Pt}function la(Pt,Lt,It,qt){var ln=-1,_n=Pt==null?0:Pt.length;for(qt&&_n&&(It=Pt[++ln]);++ln<_n;)It=Lt(It,Pt[ln],ln,Pt);return It}function Fa(Pt,Lt,It,qt){var ln=Pt==null?0:Pt.length;for(qt&&ln&&(It=Pt[--ln]);ln--;)It=Lt(It,Pt[ln],ln,Pt);return It}function no(Pt,Lt){for(var It=-1,qt=Pt==null?0:Pt.length;++It<qt;)if(Lt(Pt[It],It,Pt))return!0;return!1}var tr=Or("length");function nr(Pt,Lt,It){var qt;return It(Pt,function(ln,_n,jn){if(Lt(ln,_n,jn))return qt=_n,!1}),qt}function io(Pt,Lt,It,qt){for(var ln=Pt.length,_n=It+(qt?1:-1);qt?_n--:++_n<ln;)if(Lt(Pt[_n],_n,Pt))return _n;return-1}function Nr(Pt,Lt,It){return Lt==Lt?function(qt,ln,_n){for(var jn=_n-1,fi=qt.length;++jn<fi;)if(qt[jn]===ln)return jn;return-1}(Pt,Lt,It):io(Pt,ro,It)}function Ha(Pt,Lt,It,qt){for(var ln=It-1,_n=Pt.length;++ln<_n;)if(qt(Pt[ln],Lt))return ln;return-1}function ro(Pt){return Pt!=Pt}function Vr(Pt,Lt){var It=Pt==null?0:Pt.length;return It?ca(Pt,Lt)/It:x}function Or(Pt){return function(Lt){return Lt==null?r:Lt[Pt]}}function Fr(Pt){return function(Lt){return Pt==null?r:Pt[Lt]}}function za(Pt,Lt,It,qt,ln){return ln(Pt,function(_n,jn,fi){It=qt?(qt=!1,_n):Lt(It,_n,jn,fi)}),It}function ca(Pt,Lt){for(var It,qt=-1,ln=Pt.length;++qt<ln;){var _n=Lt(Pt[qt]);_n!==r&&(It=It===r?_n:It+_n)}return It}function ua(Pt,Lt){for(var It=-1,qt=Array(Pt);++It<Pt;)qt[It]=Lt(It);return qt}function Wa(Pt){return Pt&&Pt.slice(0,Io(Pt)+1).replace(qe,"")}function di(Pt){return function(Lt){return Pt(Lt)}}function da(Pt,Lt){return $n(Lt,function(It){return Pt[It]})}function Hr(Pt,Lt){return Pt.has(Lt)}function Ua(Pt,Lt){for(var It=-1,qt=Pt.length;++It<qt&&Nr(Lt,Pt[It],0)>-1;);return It}function qa(Pt,Lt){for(var It=Pt.length;It--&&Nr(Lt,Pt[It],0)>-1;);return It}var Ls=Fr({\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"}),ir=Fr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ga(Pt){return"\\"+Zr[Pt]}function zr(Pt){return Mo.test(Pt)}function Ro(Pt){var Lt=-1,It=Array(Pt.size);return Pt.forEach(function(qt,ln){It[++Lt]=[ln,qt]}),It}function gr(Pt,Lt){return function(It){return Pt(Lt(It))}}function hi(Pt,Lt){for(var It=-1,qt=Pt.length,ln=0,_n=[];++It<qt;){var jn=Pt[It];jn!==Lt&&jn!==s||(Pt[It]=s,_n[ln++]=It)}return _n}function mr(Pt){var Lt=-1,It=Array(Pt.size);return Pt.forEach(function(qt){It[++Lt]=qt}),It}function Ya(Pt){var Lt=-1,It=Array(Pt.size);return Pt.forEach(function(qt){It[++Lt]=[qt,qt]}),It}function jr(Pt){return zr(Pt)?function(Lt){for(var It=Mi.lastIndex=0;Mi.test(Lt);)++It;return It}(Pt):tr(Pt)}function pi(Pt){return zr(Pt)?function(Lt){return Lt.match(Mi)||[]}(Pt):function(Lt){return Lt.split("")}(Pt)}function Io(Pt){for(var Lt=Pt.length;Lt--&&Ue.test(Pt.charAt(Lt)););return Lt}var ha=Fr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Wr=function Pt(Lt){var It,qt=(Lt=Lt==null?On:Wr.defaults(On.Object(),Lt,Wr.pick(On,Bo))).Array,ln=Lt.Date,_n=Lt.Error,jn=Lt.Function,fi=Lt.Math,En=Lt.Object,Ti=Lt.RegExp,vr=Lt.String,_i=Lt.TypeError,oo=qt.prototype,Ds=jn.prototype,Ur=En.prototype,ao=Lt["__core-js_shared__"],No=Ds.toString,xn=Ur.hasOwnProperty,Xa=0,pa=(It=/[^.]+$/.exec(ao&&ao.keys&&ao.keys.IE_PROTO||""))?"Symbol(src)_1."+It:"",qi=Ur.toString,fa=No.call(En),Ka=On._,Rs=Ti("^"+No.call(xn).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yr=dr?Lt.Buffer:r,or=Lt.Symbol,Vo=Lt.Uint8Array,ga=yr?yr.allocUnsafe:r,Oo=gr(En.getPrototypeOf,En),so=En.create,qr=Ur.propertyIsEnumerable,Fo=oo.splice,Za=or?or.isConcatSpreadable:r,_r=or?or.iterator:r,ar=or?or.toStringTag:r,br=function(){try{var H=Po(En,"defineProperty");return H({},"",{}),H}catch{}}(),ma=Lt.clearTimeout!==On.clearTimeout&&Lt.clearTimeout,wr=ln&&ln.now!==On.Date.now&&ln.now,lo=Lt.setTimeout!==On.setTimeout&&Lt.setTimeout,xr=fi.ceil,co=fi.floor,va=En.getOwnPropertySymbols,ya=yr?yr.isBuffer:r,Ja=Lt.isFinite,Qa=oo.join,Ho=gr(En.keys,En),In=fi.max,Kn=fi.min,es=ln.now,Is=Lt.parseInt,ts=fi.random,ba=oo.reverse,wa=Po(Lt,"DataView"),Gr=Po(Lt,"Map"),xa=Po(Lt,"Promise"),Yr=Po(Lt,"Set"),uo=Po(Lt,"WeakMap"),ho=Po(En,"create"),po=uo&&new uo,ai={},zo=Eo(wa),fo=Eo(Gr),ns=Eo(xa),jo=Eo(Yr),Cr=Eo(uo),Gi=or?or.prototype:r,ii=Gi?Gi.valueOf:r,Wo=Gi?Gi.toString:r;function lt(H){if(Hn(H)&&!dn(H)&&!(H instanceof pn)){if(H instanceof bi)return H;if(xn.call(H,"__wrapped__"))return Hl(H)}return new bi(H)}var Bi=function(){function H(){}return function(fe){if(!Vn(fe))return{};if(so)return so(fe);H.prototype=fe;var De=new H;return H.prototype=r,De}}();function go(){}function bi(H,fe){this.__wrapped__=H,this.__actions__=[],this.__chain__=!!fe,this.__index__=0,this.__values__=r}function pn(H){this.__wrapped__=H,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=k,this.__views__=[]}function kr(H){var fe=-1,De=H==null?0:H.length;for(this.clear();++fe<De;){var Xe=H[fe];this.set(Xe[0],Xe[1])}}function Yi(H){var fe=-1,De=H==null?0:H.length;for(this.clear();++fe<De;){var Xe=H[fe];this.set(Xe[0],Xe[1])}}function Xi(H){var fe=-1,De=H==null?0:H.length;for(this.clear();++fe<De;){var Xe=H[fe];this.set(Xe[0],Xe[1])}}function Sr(H){var fe=-1,De=H==null?0:H.length;for(this.__data__=new Xi;++fe<De;)this.add(H[fe])}function Li(H){var fe=this.__data__=new Yi(H);this.size=fe.size}function is(H,fe){var De=dn(H),Xe=!De&&Ao(H),it=!De&&!Xe&&Xr(H),ut=!De&&!Xe&&!it&&na(H),mt=De||Xe||it||ut,vt=mt?ua(H.length,vr):[],St=vt.length;for(var Dt in H)!fe&&!xn.call(H,Dt)||mt&&(Dt=="length"||it&&(Dt=="offset"||Dt=="parent")||ut&&(Dt=="buffer"||Dt=="byteLength"||Dt=="byteOffset")||Tr(Dt,St))||vt.push(Dt);return vt}function rs(H){var fe=H.length;return fe?H[Da(0,fe-1)]:r}function Ns(H,fe){return vs(Wn(H),Rn(fe,0,H.length))}function Vs(H){return vs(Wn(H))}function Ca(H,fe,De){(De!==r&&!Qi(H[fe],De)||De===r&&!(fe in H))&&Ki(H,fe,De)}function mo(H,fe,De){var Xe=H[fe];xn.call(H,fe)&&Qi(Xe,De)&&(De!==r||fe in H)||Ki(H,fe,De)}function Uo(H,fe){for(var De=H.length;De--;)if(Qi(H[De][0],fe))return De;return-1}function Os(H,fe,De,Xe){return ri(H,function(it,ut,mt){fe(Xe,it,De(it),mt)}),Xe}function ka(H,fe){return H&&Si(fe,ti(fe),H)}function Ki(H,fe,De){fe=="__proto__"&&br?br(H,fe,{configurable:!0,enumerable:!0,value:De,writable:!0}):H[fe]=De}function Sa(H,fe){for(var De=-1,Xe=fe.length,it=qt(Xe),ut=H==null;++De<Xe;)it[De]=ut?r:al(H,fe[De]);return it}function Rn(H,fe,De){return H==H&&(De!==r&&(H=H<=De?H:De),fe!==r&&(H=H>=fe?H:fe)),H}function Qn(H,fe,De,Xe,it,ut){var mt,vt=1&fe,St=2&fe,Dt=4&fe;if(De&&(mt=it?De(H,Xe,it,ut):De(H)),mt!==r)return mt;if(!Vn(H))return H;var Bt=dn(H);if(Bt){if(mt=function(Rt){var Ut=Rt.length,an=new Rt.constructor(Ut);return Ut&&typeof Rt[0]=="string"&&xn.call(Rt,"index")&&(an.index=Rt.index,an.input=Rt.input),an}(H),!vt)return Wn(H,mt)}else{var zt=li(H),Kt=zt==I||zt==N;if(Xr(H))return An(H,vt);if(zt==U||zt==S||Kt&&!it){if(mt=St||Kt?{}:Bl(H),!vt)return St?function(Rt,Ut){return Si(Rt,Ml(Rt),Ut)}(H,function(Rt,Ut){return Rt&&Si(Ut,Ei(Ut),Rt)}(mt,H)):function(Rt,Ut){return Si(Rt,Xs(Rt),Ut)}(H,ka(mt,H))}else{if(!wn[zt])return it?H:{};mt=function(Rt,Ut,an){var Yt=Rt.constructor;switch(Ut){case X:return rn(Rt);case M:case T:return new Yt(+Rt);case j:return function(un,Cn){var Jt=Cn?rn(un.buffer):un.buffer;return new un.constructor(Jt,un.byteOffset,un.byteLength)}(Rt,an);case Z:case W:case te:case le:case oe:case Ee:case Ae:case ve:case ke:return bn(Rt,an);case O:return new Yt;case F:case ne:return new Yt(Rt);case Q:return function(un){var Cn=new un.constructor(un.source,He.exec(un));return Cn.lastIndex=un.lastIndex,Cn}(Rt);case q:return new Yt;case J:return hn=Rt,ii?En(ii.call(hn)):{}}var hn}(H,zt,vt)}}ut||(ut=new Li);var Zt=ut.get(H);if(Zt)return Zt;ut.set(H,mt),oc(H)?H.forEach(function(Rt){mt.add(Qn(Rt,fe,De,Rt,H,ut))}):ic(H)&&H.forEach(function(Rt,Ut){mt.set(Ut,Qn(Rt,fe,De,Ut,H,ut))});var Qt=Bt?r:(Dt?St?qs:Us:St?Ei:ti)(H);return oi(Qt||H,function(Rt,Ut){Qt&&(Rt=H[Ut=Rt]),mo(mt,Ut,Qn(Rt,fe,De,Ut,H,ut))}),mt}function Pa(H,fe,De){var Xe=De.length;if(H==null)return!Xe;for(H=En(H);Xe--;){var it=De[Xe],ut=fe[it],mt=H[it];if(mt===r&&!(it in H)||!ut(mt))return!1}return!0}function qo(H,fe,De){if(typeof H!="function")throw new _i(o);return Va(function(){H.apply(r,De)},fe)}function wi(H,fe,De,Xe){var it=-1,ut=Ir,mt=!0,vt=H.length,St=[],Dt=fe.length;if(!vt)return St;De&&(fe=$n(fe,di(De))),Xe?(ut=to,mt=!1):fe.length>=200&&(ut=Hr,mt=!1,fe=new Sr(fe));e:for(;++it<vt;){var Bt=H[it],zt=De==null?Bt:De(Bt);if(Bt=Xe||Bt!==0?Bt:0,mt&&zt==zt){for(var Kt=Dt;Kt--;)if(fe[Kt]===zt)continue e;St.push(Bt)}else ut(fe,zt,Xe)||St.push(Bt)}return St}lt.templateSettings={escape:we,evaluate:Se,interpolate:$e,variable:"",imports:{_:lt}},lt.prototype=go.prototype,lt.prototype.constructor=lt,bi.prototype=Bi(go.prototype),bi.prototype.constructor=bi,pn.prototype=Bi(go.prototype),pn.prototype.constructor=pn,kr.prototype.clear=function(){this.__data__=ho?ho(null):{},this.size=0},kr.prototype.delete=function(H){var fe=this.has(H)&&delete this.__data__[H];return this.size-=fe?1:0,fe},kr.prototype.get=function(H){var fe=this.__data__;if(ho){var De=fe[H];return De===u?r:De}return xn.call(fe,H)?fe[H]:r},kr.prototype.has=function(H){var fe=this.__data__;return ho?fe[H]!==r:xn.call(fe,H)},kr.prototype.set=function(H,fe){var De=this.__data__;return this.size+=this.has(H)?0:1,De[H]=ho&&fe===r?u:fe,this},Yi.prototype.clear=function(){this.__data__=[],this.size=0},Yi.prototype.delete=function(H){var fe=this.__data__,De=Uo(fe,H);return!(De<0)&&(De==fe.length-1?fe.pop():Fo.call(fe,De,1),--this.size,!0)},Yi.prototype.get=function(H){var fe=this.__data__,De=Uo(fe,H);return De<0?r:fe[De][1]},Yi.prototype.has=function(H){return Uo(this.__data__,H)>-1},Yi.prototype.set=function(H,fe){var De=this.__data__,Xe=Uo(De,H);return Xe<0?(++this.size,De.push([H,fe])):De[Xe][1]=fe,this},Xi.prototype.clear=function(){this.size=0,this.__data__={hash:new kr,map:new(Gr||Yi),string:new kr}},Xi.prototype.delete=function(H){var fe=ms(this,H).delete(H);return this.size-=fe?1:0,fe},Xi.prototype.get=function(H){return ms(this,H).get(H)},Xi.prototype.has=function(H){return ms(this,H).has(H)},Xi.prototype.set=function(H,fe){var De=ms(this,H),Xe=De.size;return De.set(H,fe),this.size+=De.size==Xe?0:1,this},Sr.prototype.add=Sr.prototype.push=function(H){return this.__data__.set(H,u),this},Sr.prototype.has=function(H){return this.__data__.has(H)},Li.prototype.clear=function(){this.__data__=new Yi,this.size=0},Li.prototype.delete=function(H){var fe=this.__data__,De=fe.delete(H);return this.size=fe.size,De},Li.prototype.get=function(H){return this.__data__.get(H)},Li.prototype.has=function(H){return this.__data__.has(H)},Li.prototype.set=function(H,fe){var De=this.__data__;if(De instanceof Yi){var Xe=De.__data__;if(!Gr||Xe.length<199)return Xe.push([H,fe]),this.size=++De.size,this;De=this.__data__=new Xi(Xe)}return De.set(H,fe),this.size=De.size,this};var ri=yl(Di),xi=yl(Yo,!0);function vo(H,fe){var De=!0;return ri(H,function(Xe,it,ut){return De=!!fe(Xe,it,ut)}),De}function yo(H,fe,De){for(var Xe=-1,it=H.length;++Xe<it;){var ut=H[Xe],mt=fe(ut);if(mt!=null&&(vt===r?mt==mt&&!Ri(mt):De(mt,vt)))var vt=mt,St=ut}return St}function sr(H,fe){var De=[];return ri(H,function(Xe,it,ut){fe(Xe,it,ut)&&De.push(Xe)}),De}function Gn(H,fe,De,Xe,it){var ut=-1,mt=H.length;for(De||(De=kc),it||(it=[]);++ut<mt;){var vt=H[ut];fe>0&&De(vt)?fe>1?Gn(vt,fe-1,De,Xe,it):Ui(it,vt):Xe||(it[it.length]=vt)}return it}var Go=_l(),_o=_l(!0);function Di(H,fe){return H&&Go(H,fe,ti)}function Yo(H,fe){return H&&_o(H,fe,ti)}function bo(H,fe){return Vi(fe,function(De){return Br(H[De])})}function Oi(H,fe){for(var De=0,Xe=(fe=Mn(fe,H)).length;H!=null&&De<Xe;)H=H[cr(fe[De++])];return De&&De==Xe?H:r}function Ea(H,fe,De){var Xe=fe(H);return dn(H)?Xe:Ui(Xe,De(H))}function ei(H){return H==null?H===r?"[object Undefined]":"[object Null]":ar&&ar in En(H)?function(fe){var De=xn.call(fe,ar),Xe=fe[ar];try{fe[ar]=r;var it=!0}catch{}var ut=qi.call(fe);return it&&(De?fe[ar]=Xe:delete fe[ar]),ut}(H):function(fe){return qi.call(fe)}(H)}function Aa(H,fe){return H>fe}function Fs(H,fe){return H!=null&&xn.call(H,fe)}function Hs(H,fe){return H!=null&&fe in En(H)}function $a(H,fe,De){for(var Xe=De?to:Ir,it=H[0].length,ut=H.length,mt=ut,vt=qt(ut),St=1/0,Dt=[];mt--;){var Bt=H[mt];mt&&fe&&(Bt=$n(Bt,di(fe))),St=Kn(Bt.length,St),vt[mt]=!De&&(fe||it>=120&&Bt.length>=120)?new Sr(mt&&Bt):r}Bt=H[0];var zt=-1,Kt=vt[0];e:for(;++zt<it&&Dt.length<St;){var Zt=Bt[zt],Qt=fe?fe(Zt):Zt;if(Zt=De||Zt!==0?Zt:0,!(Kt?Hr(Kt,Qt):Xe(Dt,Qt,De))){for(mt=ut;--mt;){var Rt=vt[mt];if(!(Rt?Hr(Rt,Qt):Xe(H[mt],Qt,De)))continue e}Kt&&Kt.push(Qt),Dt.push(Zt)}}return Dt}function wo(H,fe,De){var Xe=(H=Il(H,fe=Mn(fe,H)))==null?H:H[cr(Hi(fe))];return Xe==null?r:Jn(Xe,H,De)}function xo(H){return Hn(H)&&ei(H)==S}function Co(H,fe,De,Xe,it){return H===fe||(H==null||fe==null||!Hn(H)&&!Hn(fe)?H!=H&&fe!=fe:function(ut,mt,vt,St,Dt,Bt){var zt=dn(ut),Kt=dn(mt),Zt=zt?E:li(ut),Qt=Kt?E:li(mt),Rt=(Zt=Zt==S?U:Zt)==U,Ut=(Qt=Qt==S?U:Qt)==U,an=Zt==Qt;if(an&&Xr(ut)){if(!Xr(mt))return!1;zt=!0,Rt=!1}if(an&&!Rt)return Bt||(Bt=new Li),zt||na(ut)?$l(ut,mt,vt,St,Dt,Bt):function(Jt,sn,Zn,qn,vi,Dn,ci){switch(Zn){case j:if(Jt.byteLength!=sn.byteLength||Jt.byteOffset!=sn.byteOffset)return!1;Jt=Jt.buffer,sn=sn.buffer;case X:return!(Jt.byteLength!=sn.byteLength||!Dn(new Vo(Jt),new Vo(sn)));case M:case T:case F:return Qi(+Jt,+sn);case D:return Jt.name==sn.name&&Jt.message==sn.message;case Q:case ne:return Jt==sn+"";case O:var ur=Ro;case q:var Kr=1&qn;if(ur||(ur=mr),Jt.size!=sn.size&&!Kr)return!1;var Ps=ci.get(Jt);if(Ps)return Ps==sn;qn|=2,ci.set(Jt,sn);var ml=$l(ur(Jt),ur(sn),qn,vi,Dn,ci);return ci.delete(Jt),ml;case J:if(ii)return ii.call(Jt)==ii.call(sn)}return!1}(ut,mt,Zt,vt,St,Dt,Bt);if(!(1&vt)){var Yt=Rt&&xn.call(ut,"__wrapped__"),hn=Ut&&xn.call(mt,"__wrapped__");if(Yt||hn){var un=Yt?ut.value():ut,Cn=hn?mt.value():mt;return Bt||(Bt=new Li),Dt(un,Cn,vt,St,Bt)}}return an?(Bt||(Bt=new Li),function(Jt,sn,Zn,qn,vi,Dn){var ci=1&Zn,ur=Us(Jt),Kr=ur.length,Ps=Us(sn),ml=Ps.length;if(Kr!=ml&&!ci)return!1;for(var Es=Kr;Es--;){var $o=ur[Es];if(!(ci?$o in sn:xn.call(sn,$o)))return!1}var _c=Dn.get(Jt),bc=Dn.get(sn);if(_c&&bc)return _c==sn&&bc==Jt;var As=!0;Dn.set(Jt,sn),Dn.set(sn,Jt);for(var vl=ci;++Es<Kr;){var $s=Jt[$o=ur[Es]],Ms=sn[$o];if(qn)var wc=ci?qn(Ms,$s,$o,sn,Jt,Dn):qn($s,Ms,$o,Jt,sn,Dn);if(!(wc===r?$s===Ms||vi($s,Ms,Zn,qn,Dn):wc)){As=!1;break}vl||(vl=$o=="constructor")}if(As&&!vl){var Ts=Jt.constructor,Bs=sn.constructor;Ts==Bs||!("constructor"in Jt)||!("constructor"in sn)||typeof Ts=="function"&&Ts instanceof Ts&&typeof Bs=="function"&&Bs instanceof Bs||(As=!1)}return Dn.delete(Jt),Dn.delete(sn),As}(ut,mt,vt,St,Dt,Bt)):!1}(H,fe,De,Xe,Co,it))}function Xo(H,fe,De,Xe){var it=De.length,ut=it,mt=!Xe;if(H==null)return!ut;for(H=En(H);it--;){var vt=De[it];if(mt&&vt[2]?vt[1]!==H[vt[0]]:!(vt[0]in H))return!1}for(;++it<ut;){var St=(vt=De[it])[0],Dt=H[St],Bt=vt[1];if(mt&&vt[2]){if(Dt===r&&!(St in H))return!1}else{var zt=new Li;if(Xe)var Kt=Xe(Dt,Bt,St,H,fe,zt);if(!(Kt===r?Co(Bt,Dt,3,Xe,zt):Kt))return!1}}return!0}function Ma(H){return!(!Vn(H)||(fe=H,pa&&pa in fe))&&(Br(H)?Rs:Ne).test(Eo(H));var fe}function Ko(H){return typeof H=="function"?H:H==null?Ai:_typeof$1(H)=="object"?dn(H)?as(H[0],H[1]):os(H):yc(H)}function ko(H){if(!Na(H))return Ho(H);var fe=[];for(var De in En(H))xn.call(H,De)&&De!="constructor"&&fe.push(De);return fe}function Zo(H){if(!Vn(H))return function(it){var ut=[];if(it!=null)for(var mt in En(it))ut.push(mt);return ut}(H);var fe=Na(H),De=[];for(var Xe in H)(Xe!="constructor"||!fe&&xn.call(H,Xe))&&De.push(Xe);return De}function Fi(H,fe){return H<fe}function So(H,fe){var De=-1,Xe=Pi(H)?qt(H.length):[];return ri(H,function(it,ut,mt){Xe[++De]=fe(it,ut,mt)}),Xe}function os(H){var fe=Ys(H);return fe.length==1&&fe[0][2]?Dl(fe[0][0],fe[0][1]):function(De){return De===H||Xo(De,H,fe)}}function as(H,fe){return Ks(H)&&Ll(fe)?Dl(cr(H),fe):function(De){var Xe=al(De,H);return Xe===r&&Xe===fe?sl(De,H):Co(fe,Xe,3)}}function Pr(H,fe,De,Xe,it){H!==fe&&Go(fe,function(ut,mt){if(it||(it=new Li),Vn(ut))(function(St,Dt,Bt,zt,Kt,Zt,Qt){var Rt=Js(St,Bt),Ut=Js(Dt,Bt),an=Qt.get(Ut);if(an)return void Ca(St,Bt,an);var Yt=Zt?Zt(Rt,Ut,Bt+"",St,Dt,Qt):r,hn=Yt===r;if(hn){var un=dn(Ut),Cn=!un&&Xr(Ut),Jt=!un&&!Cn&&na(Ut);Yt=Ut,un||Cn||Jt?dn(Rt)?Yt=Rt:Un(Rt)?Yt=Wn(Rt):Cn?(hn=!1,Yt=An(Ut,!0)):Jt?(hn=!1,Yt=bn(Ut,!0)):Yt=[]:Oa(Ut)||Ao(Ut)?(Yt=Rt,Ao(Rt)?Yt=lc(Rt):Vn(Rt)&&!Br(Rt)||(Yt=Bl(Ut))):hn=!1}hn&&(Qt.set(Ut,Yt),Kt(Yt,Ut,zt,Zt,Qt),Qt.delete(Ut)),Ca(St,Bt,Yt)})(H,fe,mt,De,Pr,Xe,it);else{var vt=Xe?Xe(Js(H,mt),ut,mt+"",H,fe,it):r;vt===r&&(vt=ut),Ca(H,mt,vt)}},Ei)}function Ta(H,fe){var De=H.length;if(De)return Tr(fe+=fe<0?De:0,De)?H[fe]:r}function ss(H,fe,De){fe=fe.length?$n(fe,function(ut){return dn(ut)?function(mt){return Oi(mt,ut.length===1?ut[0]:ut)}:ut}):[Ai];var Xe=-1;fe=$n(fe,di(tn()));var it=So(H,function(ut,mt,vt){var St=$n(fe,function(Dt){return Dt(ut)});return{criteria:St,index:++Xe,value:ut}});return function(ut,mt){var vt=ut.length;for(ut.sort(mt);vt--;)ut[vt]=ut[vt].value;return ut}(it,function(ut,mt){return function(vt,St,Dt){for(var Bt=-1,zt=vt.criteria,Kt=St.criteria,Zt=zt.length,Qt=Dt.length;++Bt<Zt;){var Rt=Tn(zt[Bt],Kt[Bt]);if(Rt)return Bt>=Qt?Rt:Rt*(Dt[Bt]=="desc"?-1:1)}return vt.index-St.index}(ut,mt,De)})}function Ba(H,fe,De){for(var Xe=-1,it=fe.length,ut={};++Xe<it;){var mt=fe[Xe],vt=Oi(H,mt);De(vt,mt)&&Er(ut,Mn(mt,H),vt)}return ut}function La(H,fe,De,Xe){var it=Xe?Ha:Nr,ut=-1,mt=fe.length,vt=H;for(H===fe&&(fe=Wn(fe)),De&&(vt=$n(H,di(De)));++ut<mt;)for(var St=0,Dt=fe[ut],Bt=De?De(Dt):Dt;(St=it(vt,Bt,St,Xe))>-1;)vt!==H&&Fo.call(vt,St,1),Fo.call(H,St,1);return H}function ls(H,fe){for(var De=H?fe.length:0,Xe=De-1;De--;){var it=fe[De];if(De==Xe||it!==ut){var ut=it;Tr(it)?Fo.call(H,it,1):Gt(H,it)}}return H}function Da(H,fe){return H+co(ts()*(fe-H+1))}function Ra(H,fe){var De="";if(!H||fe<1||fe>f)return De;do fe%2&&(De+=H),(fe=co(fe/2))&&(H+=H);while(fe);return De}function fn(H,fe){return Qs(Rl(H,fe,Ai),H+"")}function zs(H){return rs(ia(H))}function Jo(H,fe){var De=ia(H);return vs(De,Rn(fe,0,De.length))}function Er(H,fe,De,Xe){if(!Vn(H))return H;for(var it=-1,ut=(fe=Mn(fe,H)).length,mt=ut-1,vt=H;vt!=null&&++it<ut;){var St=cr(fe[it]),Dt=De;if(St==="__proto__"||St==="constructor"||St==="prototype")return H;if(it!=mt){var Bt=vt[St];(Dt=Xe?Xe(Bt,St,vt):r)===r&&(Dt=Vn(Bt)?Bt:Tr(fe[it+1])?[]:{})}mo(vt,St,Dt),vt=vt[St]}return H}var Ar=po?function(H,fe){return po.set(H,fe),H}:Ai,cs=br?function(H,fe){return br(H,"toString",{configurable:!0,enumerable:!1,value:cl(fe),writable:!0})}:Ai;function be(H){return vs(ia(H))}function Re(H,fe,De){var Xe=-1,it=H.length;fe<0&&(fe=-fe>it?0:it+fe),(De=De>it?it:De)<0&&(De+=it),it=fe>De?0:De-fe>>>0,fe>>>=0;for(var ut=qt(it);++Xe<it;)ut[Xe]=H[Xe+fe];return ut}function tt(H,fe){var De;return ri(H,function(Xe,it,ut){return!(De=fe(Xe,it,ut))}),!!De}function dt(H,fe,De){var Xe=0,it=H==null?Xe:H.length;if(typeof fe=="number"&&fe==fe&&it<=2147483647){for(;Xe<it;){var ut=Xe+it>>>1,mt=H[ut];mt!==null&&!Ri(mt)&&(De?mt<=fe:mt<fe)?Xe=ut+1:it=ut}return it}return ft(H,fe,Ai,De)}function ft(H,fe,De,Xe){var it=0,ut=H==null?0:H.length;if(ut===0)return 0;for(var mt=(fe=De(fe))!=fe,vt=fe===null,St=Ri(fe),Dt=fe===r;it<ut;){var Bt=co((it+ut)/2),zt=De(H[Bt]),Kt=zt!==r,Zt=zt===null,Qt=zt==zt,Rt=Ri(zt);if(mt)var Ut=Xe||Qt;else Ut=Dt?Qt&&(Xe||Kt):vt?Qt&&Kt&&(Xe||!Zt):St?Qt&&Kt&&!Zt&&(Xe||!Rt):!Zt&&!Rt&&(Xe?zt<=fe:zt<fe);Ut?it=Bt+1:ut=Bt}return Kn(ut,4294967294)}function kt(H,fe){for(var De=-1,Xe=H.length,it=0,ut=[];++De<Xe;){var mt=H[De],vt=fe?fe(mt):mt;if(!De||!Qi(vt,St)){var St=vt;ut[it++]=mt===0?0:mt}}return ut}function Et(H){return typeof H=="number"?H:Ri(H)?x:+H}function Vt(H){if(typeof H=="string")return H;if(dn(H))return $n(H,Vt)+"";if(Ri(H))return Wo?Wo.call(H):"";var fe=H+"";return fe=="0"&&1/H==-1/0?"-0":fe}function Xt(H,fe,De){var Xe=-1,it=Ir,ut=H.length,mt=!0,vt=[],St=vt;if(De)mt=!1,it=to;else if(ut>=200){var Dt=fe?null:xc(H);if(Dt)return mr(Dt);mt=!1,it=Hr,St=new Sr}else St=fe?[]:vt;e:for(;++Xe<ut;){var Bt=H[Xe],zt=fe?fe(Bt):Bt;if(Bt=De||Bt!==0?Bt:0,mt&&zt==zt){for(var Kt=St.length;Kt--;)if(St[Kt]===zt)continue e;fe&&St.push(zt),vt.push(Bt)}else it(St,zt,De)||(St!==vt&&St.push(zt),vt.push(Bt))}return vt}function Gt(H,fe){return(H=Il(H,fe=Mn(fe,H)))==null||delete H[cr(Hi(fe))]}function yn(H,fe,De,Xe){return Er(H,fe,De(Oi(H,fe)),Xe)}function vn(H,fe,De,Xe){for(var it=H.length,ut=Xe?it:-1;(Xe?ut--:++ut<it)&&fe(H[ut],ut,H););return De?Re(H,Xe?0:ut,Xe?ut+1:it):Re(H,Xe?ut+1:0,Xe?it:ut)}function mn(H,fe){var De=H;return De instanceof pn&&(De=De.value()),la(fe,function(Xe,it){return it.func.apply(it.thisArg,Ui([Xe],it.args))},De)}function Nn(H,fe,De){var Xe=H.length;if(Xe<2)return Xe?Xt(H[0]):[];for(var it=-1,ut=qt(Xe);++it<Xe;)for(var mt=H[it],vt=-1;++vt<Xe;)vt!=it&&(ut[it]=wi(ut[it]||mt,H[vt],fe,De));return Xt(Gn(ut,1),fe,De)}function gi(H,fe,De){for(var Xe=-1,it=H.length,ut=fe.length,mt={};++Xe<it;){var vt=Xe<ut?fe[Xe]:r;De(mt,H[Xe],vt)}return mt}function si(H){return Un(H)?H:[]}function Ci(H){return typeof H=="function"?H:Ai}function Mn(H,fe){return dn(H)?H:Ks(H,fe)?[H]:Fl(Sn(H))}var Zi=fn;function Fn(H,fe,De){var Xe=H.length;return De=De===r?Xe:De,!fe&&De>=Xe?H:Re(H,fe,De)}var lr=ma||function(H){return On.clearTimeout(H)};function An(H,fe){if(fe)return H.slice();var De=H.length,Xe=ga?ga(De):new H.constructor(De);return H.copy(Xe),Xe}function rn(H){var fe=new H.constructor(H.byteLength);return new Vo(fe).set(new Vo(H)),fe}function bn(H,fe){var De=fe?rn(H.buffer):H.buffer;return new H.constructor(De,H.byteOffset,H.length)}function Tn(H,fe){if(H!==fe){var De=H!==r,Xe=H===null,it=H==H,ut=Ri(H),mt=fe!==r,vt=fe===null,St=fe==fe,Dt=Ri(fe);if(!vt&&!Dt&&!ut&&H>fe||ut&&mt&&St&&!vt&&!Dt||Xe&&mt&&St||!De&&St||!it)return 1;if(!Xe&&!ut&&!Dt&&H<fe||Dt&&De&&it&&!Xe&&!ut||vt&&De&&it||!mt&&it||!St)return-1}return 0}function ki(H,fe,De,Xe){for(var it=-1,ut=H.length,mt=De.length,vt=-1,St=fe.length,Dt=In(ut-mt,0),Bt=qt(St+Dt),zt=!Xe;++vt<St;)Bt[vt]=fe[vt];for(;++it<mt;)(zt||it<ut)&&(Bt[De[it]]=H[it]);for(;Dt--;)Bt[vt++]=H[it++];return Bt}function Ji(H,fe,De,Xe){for(var it=-1,ut=H.length,mt=-1,vt=De.length,St=-1,Dt=fe.length,Bt=In(ut-vt,0),zt=qt(Bt+Dt),Kt=!Xe;++it<Bt;)zt[it]=H[it];for(var Zt=it;++St<Dt;)zt[Zt+St]=fe[St];for(;++mt<vt;)(Kt||it<ut)&&(zt[Zt+De[mt]]=H[it++]);return zt}function Wn(H,fe){var De=-1,Xe=H.length;for(fe||(fe=qt(Xe));++De<Xe;)fe[De]=H[De];return fe}function Si(H,fe,De,Xe){var it=!De;De||(De={});for(var ut=-1,mt=fe.length;++ut<mt;){var vt=fe[ut],St=Xe?Xe(De[vt],H[vt],vt,De,H):r;St===r&&(St=H[vt]),it?Ki(De,vt,St):mo(De,vt,St)}return De}function us(H,fe){return function(De,Xe){var it=dn(De)?sa:Os,ut=fe?fe():{};return it(De,H,tn(Xe,2),ut)}}function Qo(H){return fn(function(fe,De){var Xe=-1,it=De.length,ut=it>1?De[it-1]:r,mt=it>2?De[2]:r;for(ut=H.length>3&&typeof ut=="function"?(it--,ut):r,mt&&mi(De[0],De[1],mt)&&(ut=it<3?r:ut,it=1),fe=En(fe);++Xe<it;){var vt=De[Xe];vt&&H(fe,vt,Xe,ut)}return fe})}function yl(H,fe){return function(De,Xe){if(De==null)return De;if(!Pi(De))return H(De,Xe);for(var it=De.length,ut=fe?it:-1,mt=En(De);(fe?ut--:++ut<it)&&Xe(mt[ut],ut,mt)!==!1;);return De}}function _l(H){return function(fe,De,Xe){for(var it=-1,ut=En(fe),mt=Xe(fe),vt=mt.length;vt--;){var St=mt[H?vt:++it];if(De(ut[St],St,ut)===!1)break}return fe}}function bl(H){return function(fe){var De=zr(fe=Sn(fe))?pi(fe):r,Xe=De?De[0]:fe.charAt(0),it=De?Fn(De,1).join(""):fe.slice(1);return Xe[H]()+it}}function ea(H){return function(fe){return la(mc(gc(fe).replace($i,"")),H,"")}}function Ia(H){return function(){var fe=arguments;switch(fe.length){case 0:return new H;case 1:return new H(fe[0]);case 2:return new H(fe[0],fe[1]);case 3:return new H(fe[0],fe[1],fe[2]);case 4:return new H(fe[0],fe[1],fe[2],fe[3]);case 5:return new H(fe[0],fe[1],fe[2],fe[3],fe[4]);case 6:return new H(fe[0],fe[1],fe[2],fe[3],fe[4],fe[5]);case 7:return new H(fe[0],fe[1],fe[2],fe[3],fe[4],fe[5],fe[6])}var De=Bi(H.prototype),Xe=H.apply(De,fe);return Vn(Xe)?Xe:De}}function wl(H){return function(fe,De,Xe){var it=En(fe);if(!Pi(fe)){var ut=tn(De,3);fe=ti(fe),De=function(vt){return ut(it[vt],vt,it)}}var mt=H(fe,De,Xe);return mt>-1?it[ut?fe[mt]:mt]:r}}function xl(H){return Mr(function(fe){var De=fe.length,Xe=De,it=bi.prototype.thru;for(H&&fe.reverse();Xe--;){var ut=fe[Xe];if(typeof ut!="function")throw new _i(o);if(it&&!mt&&gs(ut)=="wrapper")var mt=new bi([],!0)}for(Xe=mt?Xe:De;++Xe<De;){var vt=gs(ut=fe[Xe]),St=vt=="wrapper"?Gs(ut):r;mt=St&&Zs(St[0])&&St[1]==424&&!St[4].length&&St[9]==1?mt[gs(St[0])].apply(mt,St[3]):ut.length==1&&Zs(ut)?mt[vt]():mt.thru(ut)}return function(){var Dt=arguments,Bt=Dt[0];if(mt&&Dt.length==1&&dn(Bt))return mt.plant(Bt).value();for(var zt=0,Kt=De?fe[zt].apply(this,Dt):Bt;++zt<De;)Kt=fe[zt].call(this,Kt);return Kt}})}function ds(H,fe,De,Xe,it,ut,mt,vt,St,Dt){var Bt=fe&y,zt=1&fe,Kt=2&fe,Zt=24&fe,Qt=512&fe,Rt=Kt?r:Ia(H);return function Ut(){for(var an=arguments.length,Yt=qt(an),hn=an;hn--;)Yt[hn]=arguments[hn];if(Zt)var un=ta(Ut),Cn=function(qn,vi){for(var Dn=qn.length,ci=0;Dn--;)qn[Dn]===vi&&++ci;return ci}(Yt,un);if(Xe&&(Yt=ki(Yt,Xe,it,Zt)),ut&&(Yt=Ji(Yt,ut,mt,Zt)),an-=Cn,Zt&&an<Dt){var Jt=hi(Yt,un);return Sl(H,fe,ds,Ut.placeholder,De,Yt,Jt,vt,St,Dt-an)}var sn=zt?De:this,Zn=Kt?sn[H]:H;return an=Yt.length,vt?Yt=function(qn,vi){for(var Dn=qn.length,ci=Kn(vi.length,Dn),ur=Wn(qn);ci--;){var Kr=vi[ci];qn[ci]=Tr(Kr,Dn)?ur[Kr]:r}return qn}(Yt,vt):Qt&&an>1&&Yt.reverse(),Bt&&St<an&&(Yt.length=St),this&&this!==On&&this instanceof Ut&&(Zn=Rt||Ia(Zn)),Zn.apply(sn,Yt)}}function Cl(H,fe){return function(De,Xe){return function(it,ut,mt,vt){return Di(it,function(St,Dt,Bt){ut(vt,mt(St),Dt,Bt)}),vt}(De,H,fe(Xe),{})}}function hs(H,fe){return function(De,Xe){var it;if(De===r&&Xe===r)return fe;if(De!==r&&(it=De),Xe!==r){if(it===r)return Xe;typeof De=="string"||typeof Xe=="string"?(De=Vt(De),Xe=Vt(Xe)):(De=Et(De),Xe=Et(Xe)),it=H(De,Xe)}return it}}function js(H){return Mr(function(fe){return fe=$n(fe,di(tn())),fn(function(De){var Xe=this;return H(fe,function(it){return Jn(it,Xe,De)})})})}function ps(H,fe){var De=(fe=fe===r?" ":Vt(fe)).length;if(De<2)return De?Ra(fe,H):fe;var Xe=Ra(fe,xr(H/jr(fe)));return zr(fe)?Fn(pi(Xe),0,H).join(""):Xe.slice(0,H)}function kl(H){return function(fe,De,Xe){return Xe&&typeof Xe!="number"&&mi(fe,De,Xe)&&(De=Xe=r),fe=Lr(fe),De===r?(De=fe,fe=0):De=Lr(De),function(it,ut,mt,vt){for(var St=-1,Dt=In(xr((ut-it)/(mt||1)),0),Bt=qt(Dt);Dt--;)Bt[vt?Dt:++St]=it,it+=mt;return Bt}(fe,De,Xe=Xe===r?fe<De?1:-1:Lr(Xe),H)}}function fs(H){return function(fe,De){return typeof fe=="string"&&typeof De=="string"||(fe=zi(fe),De=zi(De)),H(fe,De)}}function Sl(H,fe,De,Xe,it,ut,mt,vt,St,Dt){var Bt=8&fe;fe|=Bt?g:v,4&(fe&=~(Bt?v:g))||(fe&=-4);var zt=[H,fe,it,Bt?ut:r,Bt?mt:r,Bt?r:ut,Bt?r:mt,vt,St,Dt],Kt=De.apply(r,zt);return Zs(H)&&Nl(Kt,zt),Kt.placeholder=Xe,Vl(Kt,H,fe)}function Ws(H){var fe=fi[H];return function(De,Xe){if(De=zi(De),(Xe=Xe==null?0:Kn(gn(Xe),292))&&Ja(De)){var it=(Sn(De)+"e").split("e");return+((it=(Sn(fe(it[0]+"e"+(+it[1]+Xe)))+"e").split("e"))[0]+"e"+(+it[1]-Xe))}return fe(De)}}var xc=Yr&&1/mr(new Yr([,-0]))[1]==d?function(H){return new Yr(H)}:hl;function Pl(H){return function(fe){var De=li(fe);return De==O?Ro(fe):De==q?Ya(fe):function(Xe,it){return $n(it,function(ut){return[ut,Xe[ut]]})}(fe,H(fe))}}function $r(H,fe,De,Xe,it,ut,mt,vt){var St=2&fe;if(!St&&typeof H!="function")throw new _i(o);var Dt=Xe?Xe.length:0;if(Dt||(fe&=-97,Xe=it=r),mt=mt===r?mt:In(gn(mt),0),vt=vt===r?vt:gn(vt),Dt-=it?it.length:0,fe&v){var Bt=Xe,zt=it;Xe=it=r}var Kt=St?r:Gs(H),Zt=[H,fe,De,Xe,it,Bt,zt,ut,mt,vt];if(Kt&&function(Rt,Ut){var an=Rt[1],Yt=Ut[1],hn=an|Yt,un=hn<131,Cn=Yt==y&&an==8||Yt==y&&an==m&&Rt[7].length<=Ut[8]||Yt==384&&Ut[7].length<=Ut[8]&&an==8;if(!un&&!Cn)return Rt;1&Yt&&(Rt[2]=Ut[2],hn|=1&an?0:4);var Jt=Ut[3];if(Jt){var sn=Rt[3];Rt[3]=sn?ki(sn,Jt,Ut[4]):Jt,Rt[4]=sn?hi(Rt[3],s):Ut[4]}(Jt=Ut[5])&&(sn=Rt[5],Rt[5]=sn?Ji(sn,Jt,Ut[6]):Jt,Rt[6]=sn?hi(Rt[5],s):Ut[6]),(Jt=Ut[7])&&(Rt[7]=Jt),Yt&y&&(Rt[8]=Rt[8]==null?Ut[8]:Kn(Rt[8],Ut[8])),Rt[9]==null&&(Rt[9]=Ut[9]),Rt[0]=Ut[0],Rt[1]=hn}(Zt,Kt),H=Zt[0],fe=Zt[1],De=Zt[2],Xe=Zt[3],it=Zt[4],!(vt=Zt[9]=Zt[9]===r?St?0:H.length:In(Zt[9]-Dt,0))&&24&fe&&(fe&=-25),fe&&fe!=1)Qt=fe==8||fe==w?function(Rt,Ut,an){var Yt=Ia(Rt);return function hn(){for(var un=arguments.length,Cn=qt(un),Jt=un,sn=ta(hn);Jt--;)Cn[Jt]=arguments[Jt];var Zn=un<3&&Cn[0]!==sn&&Cn[un-1]!==sn?[]:hi(Cn,sn);return(un-=Zn.length)<an?Sl(Rt,Ut,ds,hn.placeholder,r,Cn,Zn,r,r,an-un):Jn(this&&this!==On&&this instanceof hn?Yt:Rt,this,Cn)}}(H,fe,vt):fe!=g&&fe!=33||it.length?ds.apply(r,Zt):function(Rt,Ut,an,Yt){var hn=1&Ut,un=Ia(Rt);return function Cn(){for(var Jt=-1,sn=arguments.length,Zn=-1,qn=Yt.length,vi=qt(qn+sn),Dn=this&&this!==On&&this instanceof Cn?un:Rt;++Zn<qn;)vi[Zn]=Yt[Zn];for(;sn--;)vi[Zn++]=arguments[++Jt];return Jn(Dn,hn?an:this,vi)}}(H,fe,De,Xe);else var Qt=function(Rt,Ut,an){var Yt=1&Ut,hn=Ia(Rt);return function un(){return(this&&this!==On&&this instanceof un?hn:Rt).apply(Yt?an:this,arguments)}}(H,fe,De);return Vl((Kt?Ar:Nl)(Qt,Zt),H,fe)}function El(H,fe,De,Xe){return H===r||Qi(H,Ur[De])&&!xn.call(Xe,De)?fe:H}function Al(H,fe,De,Xe,it,ut){return Vn(H)&&Vn(fe)&&(ut.set(fe,H),Pr(H,fe,r,Al,ut),ut.delete(fe)),H}function Cc(H){return Oa(H)?r:H}function $l(H,fe,De,Xe,it,ut){var mt=1&De,vt=H.length,St=fe.length;if(vt!=St&&!(mt&&St>vt))return!1;var Dt=ut.get(H),Bt=ut.get(fe);if(Dt&&Bt)return Dt==fe&&Bt==H;var zt=-1,Kt=!0,Zt=2&De?new Sr:r;for(ut.set(H,fe),ut.set(fe,H);++zt<vt;){var Qt=H[zt],Rt=fe[zt];if(Xe)var Ut=mt?Xe(Rt,Qt,zt,fe,H,ut):Xe(Qt,Rt,zt,H,fe,ut);if(Ut!==r){if(Ut)continue;Kt=!1;break}if(Zt){if(!no(fe,function(an,Yt){if(!Hr(Zt,Yt)&&(Qt===an||it(Qt,an,De,Xe,ut)))return Zt.push(Yt)})){Kt=!1;break}}else if(Qt!==Rt&&!it(Qt,Rt,De,Xe,ut)){Kt=!1;break}}return ut.delete(H),ut.delete(fe),Kt}function Mr(H){return Qs(Rl(H,r,Wl),H+"")}function Us(H){return Ea(H,ti,Xs)}function qs(H){return Ea(H,Ei,Ml)}var Gs=po?function(H){return po.get(H)}:hl;function gs(H){for(var fe=H.name+"",De=ai[fe],Xe=xn.call(ai,fe)?De.length:0;Xe--;){var it=De[Xe],ut=it.func;if(ut==null||ut==H)return it.name}return fe}function ta(H){return(xn.call(lt,"placeholder")?lt:H).placeholder}function tn(){var H=lt.iteratee||ul;return H=H===ul?Ko:H,arguments.length?H(arguments[0],arguments[1]):H}function ms(H,fe){var De=H.__data__;return function(Xe){var it=_typeof$1(Xe);return it=="string"||it=="number"||it=="symbol"||it=="boolean"?Xe!=="__proto__":Xe===null}(fe)?De[typeof fe=="string"?"string":"hash"]:De.map}function Ys(H){for(var fe=ti(H),De=fe.length;De--;){var Xe=fe[De],it=H[Xe];fe[De]=[Xe,it,Ll(it)]}return fe}function Po(H,fe){var De=function(Xe,it){return Xe==null?r:Xe[it]}(H,fe);return Ma(De)?De:r}var Xs=va?function(H){return H==null?[]:(H=En(H),Vi(va(H),function(fe){return qr.call(H,fe)}))}:pl,Ml=va?function(H){for(var fe=[];H;)Ui(fe,Xs(H)),H=Oo(H);return fe}:pl,li=ei;function Tl(H,fe,De){for(var Xe=-1,it=(fe=Mn(fe,H)).length,ut=!1;++Xe<it;){var mt=cr(fe[Xe]);if(!(ut=H!=null&&De(H,mt)))break;H=H[mt]}return ut||++Xe!=it?ut:!!(it=H==null?0:H.length)&&Cs(it)&&Tr(mt,it)&&(dn(H)||Ao(H))}function Bl(H){return typeof H.constructor!="function"||Na(H)?{}:Bi(Oo(H))}function kc(H){return dn(H)||Ao(H)||!!(Za&&H&&H[Za])}function Tr(H,fe){var De=_typeof$1(H);return!!(fe=fe==null?f:fe)&&(De=="number"||De!="symbol"&&Fe.test(H))&&H>-1&&H%1==0&&H<fe}function mi(H,fe,De){if(!Vn(De))return!1;var Xe=_typeof$1(fe);return!!(Xe=="number"?Pi(De)&&Tr(fe,De.length):Xe=="string"&&fe in De)&&Qi(De[fe],H)}function Ks(H,fe){if(dn(H))return!1;var De=_typeof$1(H);return!(De!="number"&&De!="symbol"&&De!="boolean"&&H!=null&&!Ri(H))||Oe.test(H)||!Be.test(H)||fe!=null&&H in En(fe)}function Zs(H){var fe=gs(H),De=lt[fe];if(typeof De!="function"||!(fe in pn.prototype))return!1;if(H===De)return!0;var Xe=Gs(De);return!!Xe&&H===Xe[0]}(wa&&li(new wa(new ArrayBuffer(1)))!=j||Gr&&li(new Gr)!=O||xa&&li(xa.resolve())!=Y||Yr&&li(new Yr)!=q||uo&&li(new uo)!=re)&&(li=function(H){var fe=ei(H),De=fe==U?H.constructor:r,Xe=De?Eo(De):"";if(Xe)switch(Xe){case zo:return j;case fo:return O;case ns:return Y;case jo:return q;case Cr:return re}return fe});var Sc=ao?Br:fl;function Na(H){var fe=H&&H.constructor;return H===(typeof fe=="function"&&fe.prototype||Ur)}function Ll(H){return H==H&&!Vn(H)}function Dl(H,fe){return function(De){return De!=null&&De[H]===fe&&(fe!==r||H in En(De))}}function Rl(H,fe,De){return fe=In(fe===r?H.length-1:fe,0),function(){for(var Xe=arguments,it=-1,ut=In(Xe.length-fe,0),mt=qt(ut);++it<ut;)mt[it]=Xe[fe+it];it=-1;for(var vt=qt(fe+1);++it<fe;)vt[it]=Xe[it];return vt[fe]=De(mt),Jn(H,this,vt)}}function Il(H,fe){return fe.length<2?H:Oi(H,Re(fe,0,-1))}function Js(H,fe){if((fe!=="constructor"||typeof H[fe]!="function")&&fe!="__proto__")return H[fe]}var Nl=Ol(Ar),Va=lo||function(H,fe){return On.setTimeout(H,fe)},Qs=Ol(cs);function Vl(H,fe,De){var Xe=fe+"";return Qs(H,function(it,ut){var mt=ut.length;if(!mt)return it;var vt=mt-1;return ut[vt]=(mt>1?"& ":"")+ut[vt],ut=ut.join(mt>2?", ":" "),it.replace(Je,`{
/* [wrapped with `+ut+`] */
`)}(Xe,function(it,ut){return oi(P,function(mt){var vt="_."+mt[0];ut&mt[1]&&!Ir(it,vt)&&it.push(vt)}),it.sort()}(function(it){var ut=it.match(et);return ut?ut[1].split(nt):[]}(Xe),De)))}function Ol(H){var fe=0,De=0;return function(){var Xe=es(),it=16-(Xe-De);if(De=Xe,it>0){if(++fe>=800)return arguments[0]}else fe=0;return H.apply(r,arguments)}}function vs(H,fe){var De=-1,Xe=H.length,it=Xe-1;for(fe=fe===r?Xe:fe;++De<fe;){var ut=Da(De,it),mt=H[ut];H[ut]=H[De],H[De]=mt}return H.length=fe,H}var Fl=function(H){var fe=ws(H,function(Xe){return De.size===500&&De.clear(),Xe}),De=fe.cache;return fe}(function(H){var fe=[];return H.charCodeAt(0)===46&&fe.push(""),H.replace(Ge,function(De,Xe,it,ut){fe.push(it?ut.replace(_t,"$1"):Xe||De)}),fe});function cr(H){if(typeof H=="string"||Ri(H))return H;var fe=H+"";return fe=="0"&&1/H==-1/0?"-0":fe}function Eo(H){if(H!=null){try{return No.call(H)}catch{}try{return H+""}catch{}}return""}function Hl(H){if(H instanceof pn)return H.clone();var fe=new bi(H.__wrapped__,H.__chain__);return fe.__actions__=Wn(H.__actions__),fe.__index__=H.__index__,fe.__values__=H.__values__,fe}var Pc=fn(function(H,fe){return Un(H)?wi(H,Gn(fe,1,Un,!0)):[]}),Ec=fn(function(H,fe){var De=Hi(fe);return Un(De)&&(De=r),Un(H)?wi(H,Gn(fe,1,Un,!0),tn(De,2)):[]}),Ac=fn(function(H,fe){var De=Hi(fe);return Un(De)&&(De=r),Un(H)?wi(H,Gn(fe,1,Un,!0),r,De):[]});function zl(H,fe,De){var Xe=H==null?0:H.length;if(!Xe)return-1;var it=De==null?0:gn(De);return it<0&&(it=In(Xe+it,0)),io(H,tn(fe,3),it)}function jl(H,fe,De){var Xe=H==null?0:H.length;if(!Xe)return-1;var it=Xe-1;return De!==r&&(it=gn(De),it=De<0?In(Xe+it,0):Kn(it,Xe-1)),io(H,tn(fe,3),it,!0)}function Wl(H){return H!=null&&H.length?Gn(H,1):[]}function Ul(H){return H&&H.length?H[0]:r}var $c=fn(function(H){var fe=$n(H,si);return fe.length&&fe[0]===H[0]?$a(fe):[]}),Mc=fn(function(H){var fe=Hi(H),De=$n(H,si);return fe===Hi(De)?fe=r:De.pop(),De.length&&De[0]===H[0]?$a(De,tn(fe,2)):[]}),Tc=fn(function(H){var fe=Hi(H),De=$n(H,si);return(fe=typeof fe=="function"?fe:r)&&De.pop(),De.length&&De[0]===H[0]?$a(De,r,fe):[]});function Hi(H){var fe=H==null?0:H.length;return fe?H[fe-1]:r}var Bc=fn(ql);function ql(H,fe){return H&&H.length&&fe&&fe.length?La(H,fe):H}var Lc=Mr(function(H,fe){var De=H==null?0:H.length,Xe=Sa(H,fe);return ls(H,$n(fe,function(it){return Tr(it,De)?+it:it}).sort(Tn)),Xe});function el(H){return H==null?H:ba.call(H)}var Dc=fn(function(H){return Xt(Gn(H,1,Un,!0))}),Rc=fn(function(H){var fe=Hi(H);return Un(fe)&&(fe=r),Xt(Gn(H,1,Un,!0),tn(fe,2))}),Ic=fn(function(H){var fe=Hi(H);return fe=typeof fe=="function"?fe:r,Xt(Gn(H,1,Un,!0),r,fe)});function tl(H){if(!H||!H.length)return[];var fe=0;return H=Vi(H,function(De){if(Un(De))return fe=In(De.length,fe),!0}),ua(fe,function(De){return $n(H,Or(De))})}function Gl(H,fe){if(!H||!H.length)return[];var De=tl(H);return fe==null?De:$n(De,function(Xe){return Jn(fe,r,Xe)})}var Nc=fn(function(H,fe){return Un(H)?wi(H,fe):[]}),Vc=fn(function(H){return Nn(Vi(H,Un))}),Oc=fn(function(H){var fe=Hi(H);return Un(fe)&&(fe=r),Nn(Vi(H,Un),tn(fe,2))}),Fc=fn(function(H){var fe=Hi(H);return fe=typeof fe=="function"?fe:r,Nn(Vi(H,Un),r,fe)}),Hc=fn(tl),zc=fn(function(H){var fe=H.length,De=fe>1?H[fe-1]:r;return De=typeof De=="function"?(H.pop(),De):r,Gl(H,De)});function Yl(H){var fe=lt(H);return fe.__chain__=!0,fe}function ys(H,fe){return fe(H)}var jc=Mr(function(H){var fe=H.length,De=fe?H[0]:0,Xe=this.__wrapped__,it=function(ut){return Sa(ut,H)};return!(fe>1||this.__actions__.length)&&Xe instanceof pn&&Tr(De)?((Xe=Xe.slice(De,+De+(fe?1:0))).__actions__.push({func:ys,args:[it],thisArg:r}),new bi(Xe,this.__chain__).thru(function(ut){return fe&&!ut.length&&ut.push(r),ut})):this.thru(it)}),Wc=us(function(H,fe,De){xn.call(H,De)?++H[De]:Ki(H,De,1)}),Uc=wl(zl),qc=wl(jl);function Xl(H,fe){return(dn(H)?oi:ri)(H,tn(fe,3))}function Kl(H,fe){return(dn(H)?eo:xi)(H,tn(fe,3))}var Gc=us(function(H,fe,De){xn.call(H,De)?H[De].push(fe):Ki(H,De,[fe])}),Yc=fn(function(H,fe,De){var Xe=-1,it=typeof fe=="function",ut=Pi(H)?qt(H.length):[];return ri(H,function(mt){ut[++Xe]=it?Jn(fe,mt,De):wo(mt,fe,De)}),ut}),Xc=us(function(H,fe,De){Ki(H,De,fe)});function _s(H,fe){return(dn(H)?$n:So)(H,tn(fe,3))}var Kc=us(function(H,fe,De){H[De?0:1].push(fe)},function(){return[[],[]]}),Zc=fn(function(H,fe){if(H==null)return[];var De=fe.length;return De>1&&mi(H,fe[0],fe[1])?fe=[]:De>2&&mi(fe[0],fe[1],fe[2])&&(fe=[fe[0]]),ss(H,Gn(fe,1),[])}),bs=wr||function(){return On.Date.now()};function Zl(H,fe,De){return fe=De?r:fe,fe=H&&fe==null?H.length:fe,$r(H,y,r,r,r,r,fe)}function Jl(H,fe){var De;if(typeof fe!="function")throw new _i(o);return H=gn(H),function(){return--H>0&&(De=fe.apply(this,arguments)),H<=1&&(fe=r),De}}var nl=fn(function(H,fe,De){var Xe=1;if(De.length){var it=hi(De,ta(nl));Xe|=g}return $r(H,Xe,fe,De,it)}),Ql=fn(function(H,fe,De){var Xe=3;if(De.length){var it=hi(De,ta(Ql));Xe|=g}return $r(fe,Xe,H,De,it)});function ec(H,fe,De){var Xe,it,ut,mt,vt,St,Dt=0,Bt=!1,zt=!1,Kt=!0;if(typeof H!="function")throw new _i(o);function Zt(Yt){var hn=Xe,un=it;return Xe=it=r,Dt=Yt,mt=H.apply(un,hn)}function Qt(Yt){var hn=Yt-St;return St===r||hn>=fe||hn<0||zt&&Yt-Dt>=ut}function Rt(){var Yt=bs();if(Qt(Yt))return Ut(Yt);vt=Va(Rt,function(hn){var un=fe-(hn-St);return zt?Kn(un,ut-(hn-Dt)):un}(Yt))}function Ut(Yt){return vt=r,Kt&&Xe?Zt(Yt):(Xe=it=r,mt)}function an(){var Yt=bs(),hn=Qt(Yt);if(Xe=arguments,it=this,St=Yt,hn){if(vt===r)return function(un){return Dt=un,vt=Va(Rt,fe),Bt?Zt(un):mt}(St);if(zt)return lr(vt),vt=Va(Rt,fe),Zt(St)}return vt===r&&(vt=Va(Rt,fe)),mt}return fe=zi(fe)||0,Vn(De)&&(Bt=!!De.leading,ut=(zt="maxWait"in De)?In(zi(De.maxWait)||0,fe):ut,Kt="trailing"in De?!!De.trailing:Kt),an.cancel=function(){vt!==r&&lr(vt),Dt=0,Xe=St=it=vt=r},an.flush=function(){return vt===r?mt:Ut(bs())},an}var Jc=fn(function(H,fe){return qo(H,1,fe)}),Qc=fn(function(H,fe,De){return qo(H,zi(fe)||0,De)});function ws(H,fe){if(typeof H!="function"||fe!=null&&typeof fe!="function")throw new _i(o);var De=function Xe(){var it=arguments,ut=fe?fe.apply(this,it):it[0],mt=Xe.cache;if(mt.has(ut))return mt.get(ut);var vt=H.apply(this,it);return Xe.cache=mt.set(ut,vt)||mt,vt};return De.cache=new(ws.Cache||Xi),De}function xs(H){if(typeof H!="function")throw new _i(o);return function(){var fe=arguments;switch(fe.length){case 0:return!H.call(this);case 1:return!H.call(this,fe[0]);case 2:return!H.call(this,fe[0],fe[1]);case 3:return!H.call(this,fe[0],fe[1],fe[2])}return!H.apply(this,fe)}}ws.Cache=Xi;var eu=Zi(function(H,fe){var De=(fe=fe.length==1&&dn(fe[0])?$n(fe[0],di(tn())):$n(Gn(fe,1),di(tn()))).length;return fn(function(Xe){for(var it=-1,ut=Kn(Xe.length,De);++it<ut;)Xe[it]=fe[it].call(this,Xe[it]);return Jn(H,this,Xe)})}),il=fn(function(H,fe){var De=hi(fe,ta(il));return $r(H,g,r,fe,De)}),tc=fn(function(H,fe){var De=hi(fe,ta(tc));return $r(H,v,r,fe,De)}),tu=Mr(function(H,fe){return $r(H,m,r,r,r,fe)});function Qi(H,fe){return H===fe||H!=H&&fe!=fe}var nu=fs(Aa),iu=fs(function(H,fe){return H>=fe}),Ao=xo(function(){return arguments}())?xo:function(H){return Hn(H)&&xn.call(H,"callee")&&!qr.call(H,"callee")},dn=qt.isArray,ru=ni?di(ni):function(H){return Hn(H)&&ei(H)==X};function Pi(H){return H!=null&&Cs(H.length)&&!Br(H)}function Un(H){return Hn(H)&&Pi(H)}var Xr=ya||fl,ou=Jr?di(Jr):function(H){return Hn(H)&&ei(H)==T};function rl(H){if(!Hn(H))return!1;var fe=ei(H);return fe==D||fe=="[object DOMException]"||typeof H.message=="string"&&typeof H.name=="string"&&!Oa(H)}function Br(H){if(!Vn(H))return!1;var fe=ei(H);return fe==I||fe==N||fe=="[object AsyncFunction]"||fe=="[object Proxy]"}function nc(H){return typeof H=="number"&&H==gn(H)}function Cs(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=f}function Vn(H){var fe=_typeof$1(H);return H!=null&&(fe=="object"||fe=="function")}function Hn(H){return H!=null&&_typeof$1(H)=="object"}var ic=Rr?di(Rr):function(H){return Hn(H)&&li(H)==O};function rc(H){return typeof H=="number"||Hn(H)&&ei(H)==F}function Oa(H){if(!Hn(H)||ei(H)!=U)return!1;var fe=Oo(H);if(fe===null)return!0;var De=xn.call(fe,"constructor")&&fe.constructor;return typeof De=="function"&&De instanceof De&&No.call(De)==fa}var ol=Qr?di(Qr):function(H){return Hn(H)&&ei(H)==Q},oc=hr?di(hr):function(H){return Hn(H)&&li(H)==q};function ks(H){return typeof H=="string"||!dn(H)&&Hn(H)&&ei(H)==ne}function Ri(H){return _typeof$1(H)=="symbol"||Hn(H)&&ei(H)==J}var na=pr?di(pr):function(H){return Hn(H)&&Cs(H.length)&&!!kn[ei(H)]},au=fs(Fi),su=fs(function(H,fe){return H<=fe});function ac(H){if(!H)return[];if(Pi(H))return ks(H)?pi(H):Wn(H);if(_r&&H[_r])return function(De){for(var Xe,it=[];!(Xe=De.next()).done;)it.push(Xe.value);return it}(H[_r]());var fe=li(H);return(fe==O?Ro:fe==q?mr:ia)(H)}function Lr(H){return H?(H=zi(H))===d||H===-1/0?17976931348623157e292*(H<0?-1:1):H==H?H:0:H===0?H:0}function gn(H){var fe=Lr(H),De=fe%1;return fe==fe?De?fe-De:fe:0}function sc(H){return H?Rn(gn(H),0,k):0}function zi(H){if(typeof H=="number")return H;if(Ri(H))return x;if(Vn(H)){var fe=typeof H.valueOf=="function"?H.valueOf():H;H=Vn(fe)?fe+"":fe}if(typeof H!="string")return H===0?H:+H;H=Wa(H);var De=ze.test(H);return De||We.test(H)?oa(H.slice(2),De?2:8):Ve.test(H)?x:+H}function lc(H){return Si(H,Ei(H))}function Sn(H){return H==null?"":Vt(H)}var lu=Qo(function(H,fe){if(Na(fe)||Pi(fe))Si(fe,ti(fe),H);else for(var De in fe)xn.call(fe,De)&&mo(H,De,fe[De])}),cc=Qo(function(H,fe){Si(fe,Ei(fe),H)}),Ss=Qo(function(H,fe,De,Xe){Si(fe,Ei(fe),H,Xe)}),cu=Qo(function(H,fe,De,Xe){Si(fe,ti(fe),H,Xe)}),uu=Mr(Sa),du=fn(function(H,fe){H=En(H);var De=-1,Xe=fe.length,it=Xe>2?fe[2]:r;for(it&&mi(fe[0],fe[1],it)&&(Xe=1);++De<Xe;)for(var ut=fe[De],mt=Ei(ut),vt=-1,St=mt.length;++vt<St;){var Dt=mt[vt],Bt=H[Dt];(Bt===r||Qi(Bt,Ur[Dt])&&!xn.call(H,Dt))&&(H[Dt]=ut[Dt])}return H}),hu=fn(function(H){return H.push(r,Al),Jn(uc,r,H)});function al(H,fe,De){var Xe=H==null?r:Oi(H,fe);return Xe===r?De:Xe}function sl(H,fe){return H!=null&&Tl(H,fe,Hs)}var pu=Cl(function(H,fe,De){fe!=null&&typeof fe.toString!="function"&&(fe=qi.call(fe)),H[fe]=De},cl(Ai)),fu=Cl(function(H,fe,De){fe!=null&&typeof fe.toString!="function"&&(fe=qi.call(fe)),xn.call(H,fe)?H[fe].push(De):H[fe]=[De]},tn),gu=fn(wo);function ti(H){return Pi(H)?is(H):ko(H)}function Ei(H){return Pi(H)?is(H,!0):Zo(H)}var mu=Qo(function(H,fe,De){Pr(H,fe,De)}),uc=Qo(function(H,fe,De,Xe){Pr(H,fe,De,Xe)}),vu=Mr(function(H,fe){var De={};if(H==null)return De;var Xe=!1;fe=$n(fe,function(ut){return ut=Mn(ut,H),Xe||(Xe=ut.length>1),ut}),Si(H,qs(H),De),Xe&&(De=Qn(De,7,Cc));for(var it=fe.length;it--;)Gt(De,fe[it]);return De}),yu=Mr(function(H,fe){return H==null?{}:function(De,Xe){return Ba(De,Xe,function(it,ut){return sl(De,ut)})}(H,fe)});function dc(H,fe){if(H==null)return{};var De=$n(qs(H),function(Xe){return[Xe]});return fe=tn(fe),Ba(H,De,function(Xe,it){return fe(Xe,it[0])})}var hc=Pl(ti),pc=Pl(Ei);function ia(H){return H==null?[]:da(H,ti(H))}var _u=ea(function(H,fe,De){return fe=fe.toLowerCase(),H+(De?fc(fe):fe)});function fc(H){return ll(Sn(H).toLowerCase())}function gc(H){return(H=Sn(H))&&H.replace(Ye,Ls).replace(yi,"")}var bu=ea(function(H,fe,De){return H+(De?"-":"")+fe.toLowerCase()}),wu=ea(function(H,fe,De){return H+(De?" ":"")+fe.toLowerCase()}),xu=bl("toLowerCase"),Cu=ea(function(H,fe,De){return H+(De?"_":"")+fe.toLowerCase()}),ku=ea(function(H,fe,De){return H+(De?" ":"")+ll(fe)}),Su=ea(function(H,fe,De){return H+(De?" ":"")+fe.toUpperCase()}),ll=bl("toUpperCase");function mc(H,fe,De){return H=Sn(H),(fe=De?r:fe)===r?function(Xe){return To.test(Xe)}(H)?function(Xe){return Xe.match(Dr)||[]}(H):function(Xe){return Xe.match(st)||[]}(H):H.match(fe)||[]}var vc=fn(function(H,fe){try{return Jn(H,r,fe)}catch(De){return rl(De)?De:new _n(De)}}),Pu=Mr(function(H,fe){return oi(fe,function(De){De=cr(De),Ki(H,De,nl(H[De],H))}),H});function cl(H){return function(){return H}}var Eu=xl(),Au=xl(!0);function Ai(H){return H}function ul(H){return Ko(typeof H=="function"?H:Qn(H,1))}var $u=fn(function(H,fe){return function(De){return wo(De,H,fe)}}),Mu=fn(function(H,fe){return function(De){return wo(H,De,fe)}});function dl(H,fe,De){var Xe=ti(fe),it=bo(fe,Xe);De!=null||Vn(fe)&&(it.length||!Xe.length)||(De=fe,fe=H,H=this,it=bo(fe,ti(fe)));var ut=!(Vn(De)&&"chain"in De&&!De.chain),mt=Br(H);return oi(it,function(vt){var St=fe[vt];H[vt]=St,mt&&(H.prototype[vt]=function(){var Dt=this.__chain__;if(ut||Dt){var Bt=H(this.__wrapped__);return(Bt.__actions__=Wn(this.__actions__)).push({func:St,args:arguments,thisArg:H}),Bt.__chain__=Dt,Bt}return St.apply(H,Ui([this.value()],arguments))})}),H}function hl(){}var Tu=js($n),Bu=js(er),Lu=js(no);function yc(H){return Ks(H)?Or(cr(H)):function(fe){return function(De){return Oi(De,fe)}}(H)}var Du=kl(),Ru=kl(!0);function pl(){return[]}function fl(){return!1}var Iu=hs(function(H,fe){return H+fe},0),Nu=Ws("ceil"),Vu=hs(function(H,fe){return H/fe},1),Ou=Ws("floor"),gl,Fu=hs(function(H,fe){return H*fe},1),Hu=Ws("round"),zu=hs(function(H,fe){return H-fe},0);return lt.after=function(H,fe){if(typeof fe!="function")throw new _i(o);return H=gn(H),function(){if(--H<1)return fe.apply(this,arguments)}},lt.ary=Zl,lt.assign=lu,lt.assignIn=cc,lt.assignInWith=Ss,lt.assignWith=cu,lt.at=uu,lt.before=Jl,lt.bind=nl,lt.bindAll=Pu,lt.bindKey=Ql,lt.castArray=function(){if(!arguments.length)return[];var H=arguments[0];return dn(H)?H:[H]},lt.chain=Yl,lt.chunk=function(H,fe,De){fe=(De?mi(H,fe,De):fe===r)?1:In(gn(fe),0);var Xe=H==null?0:H.length;if(!Xe||fe<1)return[];for(var it=0,ut=0,mt=qt(xr(Xe/fe));it<Xe;)mt[ut++]=Re(H,it,it+=fe);return mt},lt.compact=function(H){for(var fe=-1,De=H==null?0:H.length,Xe=0,it=[];++fe<De;){var ut=H[fe];ut&&(it[Xe++]=ut)}return it},lt.concat=function(){var H=arguments.length;if(!H)return[];for(var fe=qt(H-1),De=arguments[0],Xe=H;Xe--;)fe[Xe-1]=arguments[Xe];return Ui(dn(De)?Wn(De):[De],Gn(fe,1))},lt.cond=function(H){var fe=H==null?0:H.length,De=tn();return H=fe?$n(H,function(Xe){if(typeof Xe[1]!="function")throw new _i(o);return[De(Xe[0]),Xe[1]]}):[],fn(function(Xe){for(var it=-1;++it<fe;){var ut=H[it];if(Jn(ut[0],this,Xe))return Jn(ut[1],this,Xe)}})},lt.conforms=function(H){return function(fe){var De=ti(fe);return function(Xe){return Pa(Xe,fe,De)}}(Qn(H,1))},lt.constant=cl,lt.countBy=Wc,lt.create=function(H,fe){var De=Bi(H);return fe==null?De:ka(De,fe)},lt.curry=function H(fe,De,Xe){var it=$r(fe,8,r,r,r,r,r,De=Xe?r:De);return it.placeholder=H.placeholder,it},lt.curryRight=function H(fe,De,Xe){var it=$r(fe,w,r,r,r,r,r,De=Xe?r:De);return it.placeholder=H.placeholder,it},lt.debounce=ec,lt.defaults=du,lt.defaultsDeep=hu,lt.defer=Jc,lt.delay=Qc,lt.difference=Pc,lt.differenceBy=Ec,lt.differenceWith=Ac,lt.drop=function(H,fe,De){var Xe=H==null?0:H.length;return Xe?Re(H,(fe=De||fe===r?1:gn(fe))<0?0:fe,Xe):[]},lt.dropRight=function(H,fe,De){var Xe=H==null?0:H.length;return Xe?Re(H,0,(fe=Xe-(fe=De||fe===r?1:gn(fe)))<0?0:fe):[]},lt.dropRightWhile=function(H,fe){return H&&H.length?vn(H,tn(fe,3),!0,!0):[]},lt.dropWhile=function(H,fe){return H&&H.length?vn(H,tn(fe,3),!0):[]},lt.fill=function(H,fe,De,Xe){var it=H==null?0:H.length;return it?(De&&typeof De!="number"&&mi(H,fe,De)&&(De=0,Xe=it),function(ut,mt,vt,St){var Dt=ut.length;for((vt=gn(vt))<0&&(vt=-vt>Dt?0:Dt+vt),(St=St===r||St>Dt?Dt:gn(St))<0&&(St+=Dt),St=vt>St?0:sc(St);vt<St;)ut[vt++]=mt;return ut}(H,fe,De,Xe)):[]},lt.filter=function(H,fe){return(dn(H)?Vi:sr)(H,tn(fe,3))},lt.flatMap=function(H,fe){return Gn(_s(H,fe),1)},lt.flatMapDeep=function(H,fe){return Gn(_s(H,fe),d)},lt.flatMapDepth=function(H,fe,De){return De=De===r?1:gn(De),Gn(_s(H,fe),De)},lt.flatten=Wl,lt.flattenDeep=function(H){return H!=null&&H.length?Gn(H,d):[]},lt.flattenDepth=function(H,fe){return H!=null&&H.length?Gn(H,fe=fe===r?1:gn(fe)):[]},lt.flip=function(H){return $r(H,512)},lt.flow=Eu,lt.flowRight=Au,lt.fromPairs=function(H){for(var fe=-1,De=H==null?0:H.length,Xe={};++fe<De;){var it=H[fe];Xe[it[0]]=it[1]}return Xe},lt.functions=function(H){return H==null?[]:bo(H,ti(H))},lt.functionsIn=function(H){return H==null?[]:bo(H,Ei(H))},lt.groupBy=Gc,lt.initial=function(H){return H!=null&&H.length?Re(H,0,-1):[]},lt.intersection=$c,lt.intersectionBy=Mc,lt.intersectionWith=Tc,lt.invert=pu,lt.invertBy=fu,lt.invokeMap=Yc,lt.iteratee=ul,lt.keyBy=Xc,lt.keys=ti,lt.keysIn=Ei,lt.map=_s,lt.mapKeys=function(H,fe){var De={};return fe=tn(fe,3),Di(H,function(Xe,it,ut){Ki(De,fe(Xe,it,ut),Xe)}),De},lt.mapValues=function(H,fe){var De={};return fe=tn(fe,3),Di(H,function(Xe,it,ut){Ki(De,it,fe(Xe,it,ut))}),De},lt.matches=function(H){return os(Qn(H,1))},lt.matchesProperty=function(H,fe){return as(H,Qn(fe,1))},lt.memoize=ws,lt.merge=mu,lt.mergeWith=uc,lt.method=$u,lt.methodOf=Mu,lt.mixin=dl,lt.negate=xs,lt.nthArg=function(H){return H=gn(H),fn(function(fe){return Ta(fe,H)})},lt.omit=vu,lt.omitBy=function(H,fe){return dc(H,xs(tn(fe)))},lt.once=function(H){return Jl(2,H)},lt.orderBy=function(H,fe,De,Xe){return H==null?[]:(dn(fe)||(fe=fe==null?[]:[fe]),dn(De=Xe?r:De)||(De=De==null?[]:[De]),ss(H,fe,De))},lt.over=Tu,lt.overArgs=eu,lt.overEvery=Bu,lt.overSome=Lu,lt.partial=il,lt.partialRight=tc,lt.partition=Kc,lt.pick=yu,lt.pickBy=dc,lt.property=yc,lt.propertyOf=function(H){return function(fe){return H==null?r:Oi(H,fe)}},lt.pull=Bc,lt.pullAll=ql,lt.pullAllBy=function(H,fe,De){return H&&H.length&&fe&&fe.length?La(H,fe,tn(De,2)):H},lt.pullAllWith=function(H,fe,De){return H&&H.length&&fe&&fe.length?La(H,fe,r,De):H},lt.pullAt=Lc,lt.range=Du,lt.rangeRight=Ru,lt.rearg=tu,lt.reject=function(H,fe){return(dn(H)?Vi:sr)(H,xs(tn(fe,3)))},lt.remove=function(H,fe){var De=[];if(!H||!H.length)return De;var Xe=-1,it=[],ut=H.length;for(fe=tn(fe,3);++Xe<ut;){var mt=H[Xe];fe(mt,Xe,H)&&(De.push(mt),it.push(Xe))}return ls(H,it),De},lt.rest=function(H,fe){if(typeof H!="function")throw new _i(o);return fn(H,fe=fe===r?fe:gn(fe))},lt.reverse=el,lt.sampleSize=function(H,fe,De){return fe=(De?mi(H,fe,De):fe===r)?1:gn(fe),(dn(H)?Ns:Jo)(H,fe)},lt.set=function(H,fe,De){return H==null?H:Er(H,fe,De)},lt.setWith=function(H,fe,De,Xe){return Xe=typeof Xe=="function"?Xe:r,H==null?H:Er(H,fe,De,Xe)},lt.shuffle=function(H){return(dn(H)?Vs:be)(H)},lt.slice=function(H,fe,De){var Xe=H==null?0:H.length;return Xe?(De&&typeof De!="number"&&mi(H,fe,De)?(fe=0,De=Xe):(fe=fe==null?0:gn(fe),De=De===r?Xe:gn(De)),Re(H,fe,De)):[]},lt.sortBy=Zc,lt.sortedUniq=function(H){return H&&H.length?kt(H):[]},lt.sortedUniqBy=function(H,fe){return H&&H.length?kt(H,tn(fe,2)):[]},lt.split=function(H,fe,De){return De&&typeof De!="number"&&mi(H,fe,De)&&(fe=De=r),(De=De===r?k:De>>>0)?(H=Sn(H))&&(typeof fe=="string"||fe!=null&&!ol(fe))&&!(fe=Vt(fe))&&zr(H)?Fn(pi(H),0,De):H.split(fe,De):[]},lt.spread=function(H,fe){if(typeof H!="function")throw new _i(o);return fe=fe==null?0:In(gn(fe),0),fn(function(De){var Xe=De[fe],it=Fn(De,0,fe);return Xe&&Ui(it,Xe),Jn(H,this,it)})},lt.tail=function(H){var fe=H==null?0:H.length;return fe?Re(H,1,fe):[]},lt.take=function(H,fe,De){return H&&H.length?Re(H,0,(fe=De||fe===r?1:gn(fe))<0?0:fe):[]},lt.takeRight=function(H,fe,De){var Xe=H==null?0:H.length;return Xe?Re(H,(fe=Xe-(fe=De||fe===r?1:gn(fe)))<0?0:fe,Xe):[]},lt.takeRightWhile=function(H,fe){return H&&H.length?vn(H,tn(fe,3),!1,!0):[]},lt.takeWhile=function(H,fe){return H&&H.length?vn(H,tn(fe,3)):[]},lt.tap=function(H,fe){return fe(H),H},lt.throttle=function(H,fe,De){var Xe=!0,it=!0;if(typeof H!="function")throw new _i(o);return Vn(De)&&(Xe="leading"in De?!!De.leading:Xe,it="trailing"in De?!!De.trailing:it),ec(H,fe,{leading:Xe,maxWait:fe,trailing:it})},lt.thru=ys,lt.toArray=ac,lt.toPairs=hc,lt.toPairsIn=pc,lt.toPath=function(H){return dn(H)?$n(H,cr):Ri(H)?[H]:Wn(Fl(Sn(H)))},lt.toPlainObject=lc,lt.transform=function(H,fe,De){var Xe=dn(H),it=Xe||Xr(H)||na(H);if(fe=tn(fe,4),De==null){var ut=H&&H.constructor;De=it?Xe?new ut:[]:Vn(H)&&Br(ut)?Bi(Oo(H)):{}}return(it?oi:Di)(H,function(mt,vt,St){return fe(De,mt,vt,St)}),De},lt.unary=function(H){return Zl(H,1)},lt.union=Dc,lt.unionBy=Rc,lt.unionWith=Ic,lt.uniq=function(H){return H&&H.length?Xt(H):[]},lt.uniqBy=function(H,fe){return H&&H.length?Xt(H,tn(fe,2)):[]},lt.uniqWith=function(H,fe){return fe=typeof fe=="function"?fe:r,H&&H.length?Xt(H,r,fe):[]},lt.unset=function(H,fe){return H==null||Gt(H,fe)},lt.unzip=tl,lt.unzipWith=Gl,lt.update=function(H,fe,De){return H==null?H:yn(H,fe,Ci(De))},lt.updateWith=function(H,fe,De,Xe){return Xe=typeof Xe=="function"?Xe:r,H==null?H:yn(H,fe,Ci(De),Xe)},lt.values=ia,lt.valuesIn=function(H){return H==null?[]:da(H,Ei(H))},lt.without=Nc,lt.words=mc,lt.wrap=function(H,fe){return il(Ci(fe),H)},lt.xor=Vc,lt.xorBy=Oc,lt.xorWith=Fc,lt.zip=Hc,lt.zipObject=function(H,fe){return gi(H||[],fe||[],mo)},lt.zipObjectDeep=function(H,fe){return gi(H||[],fe||[],Er)},lt.zipWith=zc,lt.entries=hc,lt.entriesIn=pc,lt.extend=cc,lt.extendWith=Ss,dl(lt,lt),lt.add=Iu,lt.attempt=vc,lt.camelCase=_u,lt.capitalize=fc,lt.ceil=Nu,lt.clamp=function(H,fe,De){return De===r&&(De=fe,fe=r),De!==r&&(De=(De=zi(De))==De?De:0),fe!==r&&(fe=(fe=zi(fe))==fe?fe:0),Rn(zi(H),fe,De)},lt.clone=function(H){return Qn(H,4)},lt.cloneDeep=function(H){return Qn(H,5)},lt.cloneDeepWith=function(H,fe){return Qn(H,5,fe=typeof fe=="function"?fe:r)},lt.cloneWith=function(H,fe){return Qn(H,4,fe=typeof fe=="function"?fe:r)},lt.conformsTo=function(H,fe){return fe==null||Pa(H,fe,ti(fe))},lt.deburr=gc,lt.defaultTo=function(H,fe){return H==null||H!=H?fe:H},lt.divide=Vu,lt.endsWith=function(H,fe,De){H=Sn(H),fe=Vt(fe);var Xe=H.length,it=De=De===r?Xe:Rn(gn(De),0,Xe);return(De-=fe.length)>=0&&H.slice(De,it)==fe},lt.eq=Qi,lt.escape=function(H){return(H=Sn(H))&&_e.test(H)?H.replace(Te,ir):H},lt.escapeRegExp=function(H){return(H=Sn(H))&&je.test(H)?H.replace(Ie,"\\$&"):H},lt.every=function(H,fe,De){var Xe=dn(H)?er:vo;return De&&mi(H,fe,De)&&(fe=r),Xe(H,tn(fe,3))},lt.find=Uc,lt.findIndex=zl,lt.findKey=function(H,fe){return nr(H,tn(fe,3),Di)},lt.findLast=qc,lt.findLastIndex=jl,lt.findLastKey=function(H,fe){return nr(H,tn(fe,3),Yo)},lt.floor=Ou,lt.forEach=Xl,lt.forEachRight=Kl,lt.forIn=function(H,fe){return H==null?H:Go(H,tn(fe,3),Ei)},lt.forInRight=function(H,fe){return H==null?H:_o(H,tn(fe,3),Ei)},lt.forOwn=function(H,fe){return H&&Di(H,tn(fe,3))},lt.forOwnRight=function(H,fe){return H&&Yo(H,tn(fe,3))},lt.get=al,lt.gt=nu,lt.gte=iu,lt.has=function(H,fe){return H!=null&&Tl(H,fe,Fs)},lt.hasIn=sl,lt.head=Ul,lt.identity=Ai,lt.includes=function(H,fe,De,Xe){H=Pi(H)?H:ia(H),De=De&&!Xe?gn(De):0;var it=H.length;return De<0&&(De=In(it+De,0)),ks(H)?De<=it&&H.indexOf(fe,De)>-1:!!it&&Nr(H,fe,De)>-1},lt.indexOf=function(H,fe,De){var Xe=H==null?0:H.length;if(!Xe)return-1;var it=De==null?0:gn(De);return it<0&&(it=In(Xe+it,0)),Nr(H,fe,it)},lt.inRange=function(H,fe,De){return fe=Lr(fe),De===r?(De=fe,fe=0):De=Lr(De),function(Xe,it,ut){return Xe>=Kn(it,ut)&&Xe<In(it,ut)}(H=zi(H),fe,De)},lt.invoke=gu,lt.isArguments=Ao,lt.isArray=dn,lt.isArrayBuffer=ru,lt.isArrayLike=Pi,lt.isArrayLikeObject=Un,lt.isBoolean=function(H){return H===!0||H===!1||Hn(H)&&ei(H)==M},lt.isBuffer=Xr,lt.isDate=ou,lt.isElement=function(H){return Hn(H)&&H.nodeType===1&&!Oa(H)},lt.isEmpty=function(H){if(H==null)return!0;if(Pi(H)&&(dn(H)||typeof H=="string"||typeof H.splice=="function"||Xr(H)||na(H)||Ao(H)))return!H.length;var fe=li(H);if(fe==O||fe==q)return!H.size;if(Na(H))return!ko(H).length;for(var De in H)if(xn.call(H,De))return!1;return!0},lt.isEqual=function(H,fe){return Co(H,fe)},lt.isEqualWith=function(H,fe,De){var Xe=(De=typeof De=="function"?De:r)?De(H,fe):r;return Xe===r?Co(H,fe,r,De):!!Xe},lt.isError=rl,lt.isFinite=function(H){return typeof H=="number"&&Ja(H)},lt.isFunction=Br,lt.isInteger=nc,lt.isLength=Cs,lt.isMap=ic,lt.isMatch=function(H,fe){return H===fe||Xo(H,fe,Ys(fe))},lt.isMatchWith=function(H,fe,De){return De=typeof De=="function"?De:r,Xo(H,fe,Ys(fe),De)},lt.isNaN=function(H){return rc(H)&&H!=+H},lt.isNative=function(H){if(Sc(H))throw new _n("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ma(H)},lt.isNil=function(H){return H==null},lt.isNull=function(H){return H===null},lt.isNumber=rc,lt.isObject=Vn,lt.isObjectLike=Hn,lt.isPlainObject=Oa,lt.isRegExp=ol,lt.isSafeInteger=function(H){return nc(H)&&H>=-9007199254740991&&H<=f},lt.isSet=oc,lt.isString=ks,lt.isSymbol=Ri,lt.isTypedArray=na,lt.isUndefined=function(H){return H===r},lt.isWeakMap=function(H){return Hn(H)&&li(H)==re},lt.isWeakSet=function(H){return Hn(H)&&ei(H)=="[object WeakSet]"},lt.join=function(H,fe){return H==null?"":Qa.call(H,fe)},lt.kebabCase=bu,lt.last=Hi,lt.lastIndexOf=function(H,fe,De){var Xe=H==null?0:H.length;if(!Xe)return-1;var it=Xe;return De!==r&&(it=(it=gn(De))<0?In(Xe+it,0):Kn(it,Xe-1)),fe==fe?function(ut,mt,vt){for(var St=vt+1;St--;)if(ut[St]===mt)return St;return St}(H,fe,it):io(H,ro,it,!0)},lt.lowerCase=wu,lt.lowerFirst=xu,lt.lt=au,lt.lte=su,lt.max=function(H){return H&&H.length?yo(H,Ai,Aa):r},lt.maxBy=function(H,fe){return H&&H.length?yo(H,tn(fe,2),Aa):r},lt.mean=function(H){return Vr(H,Ai)},lt.meanBy=function(H,fe){return Vr(H,tn(fe,2))},lt.min=function(H){return H&&H.length?yo(H,Ai,Fi):r},lt.minBy=function(H,fe){return H&&H.length?yo(H,tn(fe,2),Fi):r},lt.stubArray=pl,lt.stubFalse=fl,lt.stubObject=function(){return{}},lt.stubString=function(){return""},lt.stubTrue=function(){return!0},lt.multiply=Fu,lt.nth=function(H,fe){return H&&H.length?Ta(H,gn(fe)):r},lt.noConflict=function(){return On._===this&&(On._=Ka),this},lt.noop=hl,lt.now=bs,lt.pad=function(H,fe,De){H=Sn(H);var Xe=(fe=gn(fe))?jr(H):0;if(!fe||Xe>=fe)return H;var it=(fe-Xe)/2;return ps(co(it),De)+H+ps(xr(it),De)},lt.padEnd=function(H,fe,De){H=Sn(H);var Xe=(fe=gn(fe))?jr(H):0;return fe&&Xe<fe?H+ps(fe-Xe,De):H},lt.padStart=function(H,fe,De){H=Sn(H);var Xe=(fe=gn(fe))?jr(H):0;return fe&&Xe<fe?ps(fe-Xe,De)+H:H},lt.parseInt=function(H,fe,De){return De||fe==null?fe=0:fe&&(fe=+fe),Is(Sn(H).replace(qe,""),fe||0)},lt.random=function(H,fe,De){if(De&&typeof De!="boolean"&&mi(H,fe,De)&&(fe=De=r),De===r&&(typeof fe=="boolean"?(De=fe,fe=r):typeof H=="boolean"&&(De=H,H=r)),H===r&&fe===r?(H=0,fe=1):(H=Lr(H),fe===r?(fe=H,H=0):fe=Lr(fe)),H>fe){var Xe=H;H=fe,fe=Xe}if(De||H%1||fe%1){var it=ts();return Kn(H+it*(fe-H+ra("1e-"+((it+"").length-1))),fe)}return Da(H,fe)},lt.reduce=function(H,fe,De){var Xe=dn(H)?la:za,it=arguments.length<3;return Xe(H,tn(fe,4),De,it,ri)},lt.reduceRight=function(H,fe,De){var Xe=dn(H)?Fa:za,it=arguments.length<3;return Xe(H,tn(fe,4),De,it,xi)},lt.repeat=function(H,fe,De){return fe=(De?mi(H,fe,De):fe===r)?1:gn(fe),Ra(Sn(H),fe)},lt.replace=function(){var H=arguments,fe=Sn(H[0]);return H.length<3?fe:fe.replace(H[1],H[2])},lt.result=function(H,fe,De){var Xe=-1,it=(fe=Mn(fe,H)).length;for(it||(it=1,H=r);++Xe<it;){var ut=H==null?r:H[cr(fe[Xe])];ut===r&&(Xe=it,ut=De),H=Br(ut)?ut.call(H):ut}return H},lt.round=Hu,lt.runInContext=Pt,lt.sample=function(H){return(dn(H)?rs:zs)(H)},lt.size=function(H){if(H==null)return 0;if(Pi(H))return ks(H)?jr(H):H.length;var fe=li(H);return fe==O||fe==q?H.size:ko(H).length},lt.snakeCase=Cu,lt.some=function(H,fe,De){var Xe=dn(H)?no:tt;return De&&mi(H,fe,De)&&(fe=r),Xe(H,tn(fe,3))},lt.sortedIndex=function(H,fe){return dt(H,fe)},lt.sortedIndexBy=function(H,fe,De){return ft(H,fe,tn(De,2))},lt.sortedIndexOf=function(H,fe){var De=H==null?0:H.length;if(De){var Xe=dt(H,fe);if(Xe<De&&Qi(H[Xe],fe))return Xe}return-1},lt.sortedLastIndex=function(H,fe){return dt(H,fe,!0)},lt.sortedLastIndexBy=function(H,fe,De){return ft(H,fe,tn(De,2),!0)},lt.sortedLastIndexOf=function(H,fe){if(H!=null&&H.length){var De=dt(H,fe,!0)-1;if(Qi(H[De],fe))return De}return-1},lt.startCase=ku,lt.startsWith=function(H,fe,De){return H=Sn(H),De=De==null?0:Rn(gn(De),0,H.length),fe=Vt(fe),H.slice(De,De+fe.length)==fe},lt.subtract=zu,lt.sum=function(H){return H&&H.length?ca(H,Ai):0},lt.sumBy=function(H,fe){return H&&H.length?ca(H,tn(fe,2)):0},lt.template=function(H,fe,De){var Xe=lt.templateSettings;De&&mi(H,fe,De)&&(fe=r),H=Sn(H),fe=Ss({},fe,Xe,El);var it,ut,mt=Ss({},fe.imports,Xe.imports,El),vt=ti(mt),St=da(mt,vt),Dt=0,Bt=fe.interpolate||Ke,zt="__p += '",Kt=Ti((fe.escape||Ke).source+"|"+Bt.source+"|"+(Bt===$e?wt:Ke).source+"|"+(fe.evaluate||Ke).source+"|$","g"),Zt="//# sourceURL="+(xn.call(fe,"sourceURL")?(fe.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Lo+"]")+`
`;H.replace(Kt,function(Ut,an,Yt,hn,un,Cn){return Yt||(Yt=hn),zt+=H.slice(Dt,Cn).replace(Ze,Ga),an&&(it=!0,zt+=`' +
__e(`+an+`) +
'`),un&&(ut=!0,zt+=`';
`+un+`;
__p += '`),Yt&&(zt+=`' +
((__t = (`+Yt+`)) == null ? '' : __t) +
'`),Dt=Cn+Ut.length,Ut}),zt+=`';
`;var Qt=xn.call(fe,"variable")&&fe.variable;if(Qt){if(gt.test(Qt))throw new _n("Invalid `variable` option passed into `_.template`")}else zt=`with (obj) {
`+zt+`
}
`;zt=(ut?zt.replace(Ce,""):zt).replace(Pe,"$1").replace(Me,"$1;"),zt="function("+(Qt||"obj")+`) {
`+(Qt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(it?", __e = _.escape":"")+(ut?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+zt+`return __p
}`;var Rt=vc(function(){return jn(vt,Zt+"return "+zt).apply(r,St)});if(Rt.source=zt,rl(Rt))throw Rt;return Rt},lt.times=function(H,fe){if((H=gn(H))<1||H>f)return[];var De=k,Xe=Kn(H,k);fe=tn(fe),H-=k;for(var it=ua(Xe,fe);++De<H;)fe(De);return it},lt.toFinite=Lr,lt.toInteger=gn,lt.toLength=sc,lt.toLower=function(H){return Sn(H).toLowerCase()},lt.toNumber=zi,lt.toSafeInteger=function(H){return H?Rn(gn(H),-9007199254740991,f):H===0?H:0},lt.toString=Sn,lt.toUpper=function(H){return Sn(H).toUpperCase()},lt.trim=function(H,fe,De){if((H=Sn(H))&&(De||fe===r))return Wa(H);if(!H||!(fe=Vt(fe)))return H;var Xe=pi(H),it=pi(fe);return Fn(Xe,Ua(Xe,it),qa(Xe,it)+1).join("")},lt.trimEnd=function(H,fe,De){if((H=Sn(H))&&(De||fe===r))return H.slice(0,Io(H)+1);if(!H||!(fe=Vt(fe)))return H;var Xe=pi(H);return Fn(Xe,0,qa(Xe,pi(fe))+1).join("")},lt.trimStart=function(H,fe,De){if((H=Sn(H))&&(De||fe===r))return H.replace(qe,"");if(!H||!(fe=Vt(fe)))return H;var Xe=pi(H);return Fn(Xe,Ua(Xe,pi(fe))).join("")},lt.truncate=function(H,fe){var De=30,Xe="...";if(Vn(fe)){var it="separator"in fe?fe.separator:it;De="length"in fe?gn(fe.length):De,Xe="omission"in fe?Vt(fe.omission):Xe}var ut=(H=Sn(H)).length;if(zr(H)){var mt=pi(H);ut=mt.length}if(De>=ut)return H;var vt=De-jr(Xe);if(vt<1)return Xe;var St=mt?Fn(mt,0,vt).join(""):H.slice(0,vt);if(it===r)return St+Xe;if(mt&&(vt+=St.length-vt),ol(it)){if(H.slice(vt).search(it)){var Dt,Bt=St;for(it.global||(it=Ti(it.source,Sn(He.exec(it))+"g")),it.lastIndex=0;Dt=it.exec(Bt);)var zt=Dt.index;St=St.slice(0,zt===r?vt:zt)}}else if(H.indexOf(Vt(it),vt)!=vt){var Kt=St.lastIndexOf(it);Kt>-1&&(St=St.slice(0,Kt))}return St+Xe},lt.unescape=function(H){return(H=Sn(H))&&ye.test(H)?H.replace(Le,ha):H},lt.uniqueId=function(H){var fe=++Xa;return Sn(H)+fe},lt.upperCase=Su,lt.upperFirst=ll,lt.each=Xl,lt.eachRight=Kl,lt.first=Ul,dl(lt,(gl={},Di(lt,function(H,fe){xn.call(lt.prototype,fe)||(gl[fe]=H)}),gl),{chain:!1}),lt.VERSION="4.17.21",oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(H){lt[H].placeholder=lt}),oi(["drop","take"],function(H,fe){pn.prototype[H]=function(De){De=De===r?1:In(gn(De),0);var Xe=this.__filtered__&&!fe?new pn(this):this.clone();return Xe.__filtered__?Xe.__takeCount__=Kn(De,Xe.__takeCount__):Xe.__views__.push({size:Kn(De,k),type:H+(Xe.__dir__<0?"Right":"")}),Xe},pn.prototype[H+"Right"]=function(De){return this.reverse()[H](De).reverse()}}),oi(["filter","map","takeWhile"],function(H,fe){var De=fe+1,Xe=De==1||De==3;pn.prototype[H]=function(it){var ut=this.clone();return ut.__iteratees__.push({iteratee:tn(it,3),type:De}),ut.__filtered__=ut.__filtered__||Xe,ut}}),oi(["head","last"],function(H,fe){var De="take"+(fe?"Right":"");pn.prototype[H]=function(){return this[De](1).value()[0]}}),oi(["initial","tail"],function(H,fe){var De="drop"+(fe?"":"Right");pn.prototype[H]=function(){return this.__filtered__?new pn(this):this[De](1)}}),pn.prototype.compact=function(){return this.filter(Ai)},pn.prototype.find=function(H){return this.filter(H).head()},pn.prototype.findLast=function(H){return this.reverse().find(H)},pn.prototype.invokeMap=fn(function(H,fe){return typeof H=="function"?new pn(this):this.map(function(De){return wo(De,H,fe)})}),pn.prototype.reject=function(H){return this.filter(xs(tn(H)))},pn.prototype.slice=function(H,fe){H=gn(H);var De=this;return De.__filtered__&&(H>0||fe<0)?new pn(De):(H<0?De=De.takeRight(-H):H&&(De=De.drop(H)),fe!==r&&(De=(fe=gn(fe))<0?De.dropRight(-fe):De.take(fe-H)),De)},pn.prototype.takeRightWhile=function(H){return this.reverse().takeWhile(H).reverse()},pn.prototype.toArray=function(){return this.take(k)},Di(pn.prototype,function(H,fe){var De=/^(?:filter|find|map|reject)|While$/.test(fe),Xe=/^(?:head|last)$/.test(fe),it=lt[Xe?"take"+(fe=="last"?"Right":""):fe],ut=Xe||/^find/.test(fe);it&&(lt.prototype[fe]=function(){var mt=this.__wrapped__,vt=Xe?[1]:arguments,St=mt instanceof pn,Dt=vt[0],Bt=St||dn(mt),zt=function(an){var Yt=it.apply(lt,Ui([an],vt));return Xe&&Kt?Yt[0]:Yt};Bt&&De&&typeof Dt=="function"&&Dt.length!=1&&(St=Bt=!1);var Kt=this.__chain__,Zt=!!this.__actions__.length,Qt=ut&&!Kt,Rt=St&&!Zt;if(!ut&&Bt){mt=Rt?mt:new pn(this);var Ut=H.apply(mt,vt);return Ut.__actions__.push({func:ys,args:[zt],thisArg:r}),new bi(Ut,Kt)}return Qt&&Rt?H.apply(this,vt):(Ut=this.thru(zt),Qt?Xe?Ut.value()[0]:Ut.value():Ut)})}),oi(["pop","push","shift","sort","splice","unshift"],function(H){var fe=oo[H],De=/^(?:push|sort|unshift)$/.test(H)?"tap":"thru",Xe=/^(?:pop|shift)$/.test(H);lt.prototype[H]=function(){var it=arguments;if(Xe&&!this.__chain__){var ut=this.value();return fe.apply(dn(ut)?ut:[],it)}return this[De](function(mt){return fe.apply(dn(mt)?mt:[],it)})}}),Di(pn.prototype,function(H,fe){var De=lt[fe];if(De){var Xe=De.name+"";xn.call(ai,Xe)||(ai[Xe]=[]),ai[Xe].push({name:fe,func:De})}}),ai[ds(r,2).name]=[{name:"wrapper",func:r}],pn.prototype.clone=function(){var H=new pn(this.__wrapped__);return H.__actions__=Wn(this.__actions__),H.__dir__=this.__dir__,H.__filtered__=this.__filtered__,H.__iteratees__=Wn(this.__iteratees__),H.__takeCount__=this.__takeCount__,H.__views__=Wn(this.__views__),H},pn.prototype.reverse=function(){if(this.__filtered__){var H=new pn(this);H.__dir__=-1,H.__filtered__=!0}else(H=this.clone()).__dir__*=-1;return H},pn.prototype.value=function(){var H=this.__wrapped__.value(),fe=this.__dir__,De=dn(H),Xe=fe<0,it=De?H.length:0,ut=function(Cn,Jt,sn){for(var Zn=-1,qn=sn.length;++Zn<qn;){var vi=sn[Zn],Dn=vi.size;switch(vi.type){case"drop":Cn+=Dn;break;case"dropRight":Jt-=Dn;break;case"take":Jt=Kn(Jt,Cn+Dn);break;case"takeRight":Cn=In(Cn,Jt-Dn)}}return{start:Cn,end:Jt}}(0,it,this.__views__),mt=ut.start,vt=ut.end,St=vt-mt,Dt=Xe?vt:mt-1,Bt=this.__iteratees__,zt=Bt.length,Kt=0,Zt=Kn(St,this.__takeCount__);if(!De||!Xe&&it==St&&Zt==St)return mn(H,this.__actions__);var Qt=[];e:for(;St--&&Kt<Zt;){for(var Rt=-1,Ut=H[Dt+=fe];++Rt<zt;){var an=Bt[Rt],Yt=an.iteratee,hn=an.type,un=Yt(Ut);if(hn==2)Ut=un;else if(!un){if(hn==1)continue e;break e}}Qt[Kt++]=Ut}return Qt},lt.prototype.at=jc,lt.prototype.chain=function(){return Yl(this)},lt.prototype.commit=function(){return new bi(this.value(),this.__chain__)},lt.prototype.next=function(){this.__values__===r&&(this.__values__=ac(this.value()));var H=this.__index__>=this.__values__.length;return{done:H,value:H?r:this.__values__[this.__index__++]}},lt.prototype.plant=function(H){for(var fe,De=this;De instanceof go;){var Xe=Hl(De);Xe.__index__=0,Xe.__values__=r,fe?it.__wrapped__=Xe:fe=Xe;var it=Xe;De=De.__wrapped__}return it.__wrapped__=H,fe},lt.prototype.reverse=function(){var H=this.__wrapped__;if(H instanceof pn){var fe=H;return this.__actions__.length&&(fe=new pn(this)),(fe=fe.reverse()).__actions__.push({func:ys,args:[el],thisArg:r}),new bi(fe,this.__chain__)}return this.thru(el)},lt.prototype.toJSON=lt.prototype.valueOf=lt.prototype.value=function(){return mn(this.__wrapped__,this.__actions__)},lt.prototype.first=lt.prototype.head,_r&&(lt.prototype[_r]=function(){return this}),lt}();ji?((ji.exports=Wr)._=Wr,Ni._=Wr):On._=Wr}).call(commonjsGlobal$1)})(lodash,lodashExports);var _=lodashExports,getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}for(var byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return byteToHex[e[n+0]]+byteToHex[e[n+1]]+byteToHex[e[n+2]]+byteToHex[e[n+3]]+"-"+byteToHex[e[n+4]]+byteToHex[e[n+5]]+"-"+byteToHex[e[n+6]]+byteToHex[e[n+7]]+"-"+byteToHex[e[n+8]]+byteToHex[e[n+9]]+"-"+byteToHex[e[n+10]]+byteToHex[e[n+11]]+byteToHex[e[n+12]]+byteToHex[e[n+13]]+byteToHex[e[n+14]]+byteToHex[e[n+15]]}var randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(e,n,r){if(native.randomUUID&&!n&&!e)return native.randomUUID();var o=(e=e||{}).random||(e.rng||rng)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){r=r||0;for(var u=0;u<16;++u)n[r+u]=o[u];return n}return unsafeStringify(o)}var DEFAULT_SCALE_VALUE="page-fit",DEFAULT_SCALE=1,DEFAULT_SCALE_DELTA=1.1,MIN_SCALE=.05,MAX_SCALE=10,UNKNOWN_SCALE=0,MAX_AUTO_SCALE=1.25,SCROLLBAR_PADDING=40,VERTICAL_PADDING=5,RenderingStates$1={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},SidebarView={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4},RendererType={CANVAS:"canvas",SVG:"svg"},TextLayerMode={DISABLE:0,ENABLE:1},ScrollMode={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},SpreadMode={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2},userAgent$1=navigator.userAgent||"",platform=navigator.platform||"",maxTouchPoints=navigator.maxTouchPoints||1,maxCanvasPixels=16777216,isAndroid$1=/Android/.test(userAgent$1),isIOS$2=/\b(iPad|iPhone|iPod)(?=;)/.test(userAgent$1)||platform==="MacIntel"&&maxTouchPoints>1;(isIOS$2||isAndroid$1)&&(maxCanvasPixels=5242880);var isMobileDevice$1=isIOS$2||isAndroid$1||/webOS|BlackBerry|IEMobile|Opera Mini/i.test(userAgent$1),isMobile$1=window.innerWidth<640,OutputScale=function(){return _createClass(function e(){_classCallCheck(this,e);var n=window.devicePixelRatio||1;this.sx=n,this.sy=n},[{key:"scaled",get:function(){return this.sx!==1||this.sy!==1}}])}();function round(e,n){var r=Math.pow(10,n);return Math.round(e*r)/r}function parseAdobePDFTimestamp(e){if(!e)return new Date;var n=e.match(/D:(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})([-+]\d{2}'\d{2}')?/);if(n){var r=_slicedToArray(n,8),o=r[1],u=r[2],s=r[3],w=r[4],g=r[5],v=r[6];return r[7],new Date(parseInt(o),parseInt(u)-1,parseInt(s),parseInt(w),parseInt(g),parseInt(v))}throw new Error("Invalid timestamp format")}var PromiseExt=_createClass(function e(){var n=this;_classCallCheck(this,e),this.promise=new Promise(function(r,o){n.resolve=function(u){r(u)},n.reject=function(u){o(u)}})});function BaseException(e,n){this.constructor===BaseException&&unreachable("Cannot initialize BaseException."),this.message=e,this.name=n}BaseException.prototype=new Error,BaseException.constructor=BaseException;var EventBus=function(){return _createClass(function e(){_classCallCheck(this,e),this._listeners=Object.create(null)},[{key:"on",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this._on(e,n,{external:!0,once:r==null?void 0:r.once})}},{key:"off",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this._off(e,n,{external:!0,once:r==null?void 0:r.once})}},{key:"dispatch",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",o=this._listeners[e];if(o&&o.length!==0){var u,s,w=_createForOfIteratorHelper(o.slice(0));try{for(w.s();!(s=w.n()).done;){var g=s.value,v=g.listener,y=g.external;g.once&&this._off(e,v),y?(u||(u=[])).push(v):v(n,r)}}catch(f){w.e(f)}finally{w.f()}if(u){var m,d=_createForOfIteratorHelper(u);try{for(d.s();!(m=d.n()).done;)(0,m.value)(n)}catch(f){d.e(f)}finally{d.f()}u=null}}}},{key:"_on",value:function(e,n){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;((r=this._listeners)[e]||(r[e]=[])).push({listener:n,external:(o==null?void 0:o.external)===!0,once:(o==null?void 0:o.once)===!0})}},{key:"_off",value:function(e,n){var r=this._listeners[e];if(r){for(var o=0,u=r.length;o<u;o++)if(r[o].listener===n)return void r.splice(o,1)}}}])}();function scrollIntoView(e,n){var r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=e.offsetParent;if(o){for(var u=e.offsetTop+e.clientTop,s=e.offsetLeft+e.clientLeft;o.clientHeight===o.scrollHeight&&o.clientWidth===o.scrollWidth||r&&(o.classList.contains("markedContent")||getComputedStyle(o).overflow==="hidden");)if(u+=o.offsetTop,s+=o.offsetLeft,!(o=o.offsetParent))return;n&&(n.top!==void 0&&(u+=n.top),n.left!==void 0&&(s+=n.left,o.scrollLeft=s)),o.scrollTop=u}else console.error("offsetParent is not set -- cannot scroll")}function watchScroll(e,n){var r=function(s){u||(u=window.requestAnimationFrame(function(){u=null;var w=e.scrollLeft,g=o.lastX;w!==g&&(o.right=w>g),o.lastX=w;var v=e.scrollTop,y=o.lastY;v!==y&&(o.down=v>y),o.lastY=v,n(o)}))},o={right:!0,down:!0,lastX:e.scrollLeft,lastY:e.scrollTop,_eventHandler:r},u=null;return e.addEventListener("scroll",r,!0),o}function binarySearchFirstItem(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=e.length-1;if(o<0||!n(e[o]))return e.length;if(n(e[r]))return r;for(;r<o;){var u=r+o>>1;n(e[u])?o=u:r=u+1}return r}function backtrackBeforeAllVisibleElements(e,n,r){if(e<2)return e;var o=n[e].div,u=o.offsetTop+o.clientTop;u>=r&&(u=(o=n[e-1].div).offsetTop+o.clientTop);for(var s=e-2;s>=0&&!((o=n[s].div).offsetTop+o.clientTop+o.clientHeight<=u);--s)e=s;return e}function getVisibleElements(e){var n=e.scrollEl,r=e.views,o=e.sortByVisibility,u=o!==void 0&&o,s=e.horizontal,w=s!==void 0&&s,g=e.rtl,v=g!==void 0&&g,y=n.scrollTop,m=y+n.clientHeight,d=n.scrollLeft,f=d+n.clientWidth,x=[],k=new Set,P=r.length,S=binarySearchFirstItem(r,w?function(X){var j=X.div,Z=j.offsetLeft+j.clientLeft,W=Z+j.clientWidth;return v?Z<f:W>d}:function(X){var j=X.div;return j.offsetTop+j.clientTop+j.clientHeight>y});S>0&&S<P&&!w&&(S=backtrackBeforeAllVisibleElements(S,r,y));for(var E=w?f:-1,M=S;M<P;M++){var T=r[M],D=T.div,I=D.offsetLeft+D.clientLeft,N=D.offsetTop+D.clientTop,O=D.clientWidth,F=D.clientHeight,U=I+O,Y=N+F;if(E===-1)Y>=m&&(E=Y);else if((w?I:N)>E)break;if(!(Y<=y||N>=m||U<=d||I>=f)){var Q=Math.max(0,y-N)+Math.max(0,Y-m),q=(O-(Math.max(0,d-I)+Math.max(0,U-f)))/O,ne=(F-Q)/F*q*100|0;x.push({id:T.id,x:I,y:N,view:T,percent:ne,widthPercent:100*q|0}),k.add(T.id)}}var J=x[0],re=x.at(-1);return u&&x.sort(function(X,j){var Z=X.percent-j.percent;return Math.abs(Z)>.001?-Z:X.id-j.id}),{first:J,last:re,views:x,ids:k}}function normalizeWheelEventDirection(e){var n=Math.hypot(e.deltaX,e.deltaY),r=Math.atan2(e.deltaY,e.deltaX);return-.25*Math.PI<r&&r<.75*Math.PI&&(n=-n),n}function normalizeWheelEventDelta(e){var n=normalizeWheelEventDirection(e);return e.deltaMode===0?n/=900:e.deltaMode===1&&(n/=30),n}function isValidRotation(e){return Number.isInteger(e)&&e%90==0}function isValidScrollMode(e){return Number.isInteger(e)&&Object.values(ScrollMode).includes(e)&&e!==ScrollMode.UNKNOWN}function isValidSpreadMode(e){return Number.isInteger(e)&&Object.values(SpreadMode).includes(e)&&e!==SpreadMode.UNKNOWN}function isPortraitOrientation(e){return e.width<=e.height}typeof document<"u"&&document.documentElement.style;var xmlParser=function(e){return new window.DOMParser().parseFromString(e,"text/xml")},getElementsByTagName=function(e,n){var r=Array.prototype.slice.call(e.childNodes),o=null;return r.forEach(function(u){u.tagName===n&&(o=u.childNodes)}),o};function bindEvents(e,n,r){var o,u=_createForOfIteratorHelper(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;n.addEventListener(s,e[s].bind(e))}}catch(w){u.e(w)}finally{u.f()}}function getFontAttribute(e){var n=null;return Array.prototype.slice.call(e.childNodes).forEach(function(r){if(r.tagName==="defaultappearance"){var o=(r.innerHTML||r.textContent||"").split(" ");n={"font-size":parseInt(o[5],10),"font-name":o[4].substr(1),"font-color":rgbToHex(parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2]))}}else if(r.tagName==="contents-richtext"){var u=r.innerHTML||r.textContent||"";u=u.replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&#39;","'").replaceAll("&amp;","&");var s=new window.DOMParser().parseFromString(u,"text/xml").getElementsByTagName("body")[0].getAttribute("style"),w={};s.split(";").forEach(function(g){var v=_slicedToArray(g.split(":").map(function(d){return d.trim()}),2),y=v[0],m=v[1];y&&m&&(w[y]=m)})}}),n&&{fontName:n["font-name"],fontSize:parseFloat(n["font-size"]),fontColor:n.color}}var ANNOTATION_TYPE={ink:"ink",freetext:"freetext",text:"text",square:"square",circle:"circle",line:"line",arrow:"line",image:"image",highlight:"highlight",underline:"underline",strikeout:"strikeout",squiggly:"squiggly",stamp:"stamp",redact:"redact"},findIndex=function(e,n){return n.findIndex(function(r){return(r==null?void 0:r.name)===e})},parseAnnotationFromXml=function(e){if(!e)return[];for(var n=xmlParser(e),r=n.firstElementChild||n.firstChild,o=getElementsByTagName(r,"annots")||[],u=Array.prototype.slice.call(o),s=[],w=0;w<u.length;w++){var g=u[w],v=ANNOTATION_TYPE[g.tagName],y=g.attributes;if(v){var m={date:y.date?y.date.value:y.creationdate?y.creationdate.value:void 0,color:y.color?y.color.value:void 0,flags:y.flags?y.flags.value:void 0,rect:y.rect?y.rect.value:void 0,name:y.name?y.name.value:v4(),width:y.width?y.width.value:void 0,"interior-color":y["interior-color"]?y["interior-color"].value:void 0,page:y.page?y.page.value:void 0,opacity:y.opacity?y.opacity.value:1,type:v};if(m.flags&&m.flags.indexOf("hidden")>-1&&(m.isHidden=1),["highlight","underline","strikeout","squiggly"].includes(v)){var d=getContent(g);d&&(m.content=d),m.coords=y.coords?y.coords.value:void 0}if(v==="line"){if(!m.rect)continue;m.start=y.start?y.start.value:void 0,m.end=y.end?y.end.value:void 0}if(v==="line"&&y.tail&&y.tail.value==="openarrow"&&(m.tail="openarrow",m.head="none"),(v==="square"||v==="circle"||v==="text"||v==="line")&&!m.rect)continue;if(v==="ink"){var f=getPosition(g);if(!f)continue;!m.inklist&&(m.inklist={}),m.inklist.gesture=f}if(v==="text"||v==="freetext"){if(!m.rect)continue;var x=getContent(g);x&&(m.content=x)}if(v==="freetext"){m.justification=y.justification?y.justification.value:void 0;var k=getFontAttribute(g);k&&(m.textStyle=k)}if(v==="stamp"){if(!y["stamp-type"]||y["stamp-type"].value==="image")continue;m["stamp-type"]=y["stamp-type"]?y["stamp-type"].value:void 0,m.icon=y.icon?y.icon.value:void 0}s.push(m)}}return s},getPosition=function(e){var n=[],r=e.children[0].children;return Array.prototype.slice.call(r).forEach(function(o){o.tagName==="gesture"&&n.push(o.innerHTML||o.textContent||"")}),n.length===0&&(n=""),n},getContent=function(e){var n="";return Array.prototype.slice.call(e.childNodes).forEach(function(r){if(r.tagName==="contents")n=r.innerHTML||r.textContent||"";else if(r.tagName==="contents-richtext"){var o=r.innerHTML||r.textContent||"";o=o.replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&#39;","'").replaceAll("&amp;","&");var u=new window.DOMParser().parseFromString(o,"text/xml");n=u.firstElementChild.innerText}}),n};function unreachable(e){throw new Error(e)}function assert(e,n){e||unreachable(n)}function shadow$1(e,n,r){var o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return(typeof PDFJSDev>"u"||PDFJSDev.test("!PRODUCTION || TESTING"))&&assert(n in e,'shadow: Property "'.concat(n&&n.toString(),'" not found in object.')),Object.defineProperty(e,n,{value:r,enumerable:!o,configurable:!0,writable:!1}),r}var Util=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"makeHexColor",value:function(n,r,o){return"#".concat(hexNumbers[n]).concat(hexNumbers[r]).concat(hexNumbers[o])}},{key:"scaleMinMax",value:function(n,r){var o;n[0]?(n[0]<0&&(o=r[0],r[0]=r[1],r[1]=o),r[0]*=n[0],r[1]*=n[0],n[3]<0&&(o=r[2],r[2]=r[3],r[3]=o),r[2]*=n[3],r[3]*=n[3]):(o=r[0],r[0]=r[2],r[2]=o,o=r[1],r[1]=r[3],r[3]=o,n[1]<0&&(o=r[2],r[2]=r[3],r[3]=o),r[2]*=n[1],r[3]*=n[1],n[2]<0&&(o=r[0],r[0]=r[1],r[1]=o),r[0]*=n[2],r[1]*=n[2]),r[0]+=n[4],r[1]+=n[4],r[2]+=n[5],r[3]+=n[5]}},{key:"transform",value:function(n,r){return[n[0]*r[0]+n[2]*r[1],n[1]*r[0]+n[3]*r[1],n[0]*r[2]+n[2]*r[3],n[1]*r[2]+n[3]*r[3],n[0]*r[4]+n[2]*r[5]+n[4],n[1]*r[4]+n[3]*r[5]+n[5]]}},{key:"applyTransform",value:function(n,r){return[n[0]*r[0]+n[1]*r[2]+r[4],n[0]*r[1]+n[1]*r[3]+r[5]]}},{key:"applyInverseTransform",value:function(n,r){var o=r[0]*r[3]-r[1]*r[2];return[(n[0]*r[3]-n[1]*r[2]+r[2]*r[5]-r[4]*r[3])/o,(-n[0]*r[1]+n[1]*r[0]+r[4]*r[1]-r[5]*r[0])/o]}},{key:"getAxialAlignedBoundingBox",value:function(n,r){var o=e.applyTransform(n,r),u=e.applyTransform(n.slice(2,4),r),s=e.applyTransform([n[0],n[3]],r),w=e.applyTransform([n[2],n[1]],r);return[Math.min(o[0],u[0],s[0],w[0]),Math.min(o[1],u[1],s[1],w[1]),Math.max(o[0],u[0],s[0],w[0]),Math.max(o[1],u[1],s[1],w[1])]}},{key:"inverseTransform",value:function(n){var r=n[0]*n[3]-n[1]*n[2];return[n[3]/r,-n[1]/r,-n[2]/r,n[0]/r,(n[2]*n[5]-n[4]*n[3])/r,(n[4]*n[1]-n[5]*n[0])/r]}},{key:"singularValueDecompose2dScale",value:function(n){var r=[n[0],n[2],n[1],n[3]],o=n[0]*r[0]+n[1]*r[2],u=n[0]*r[1]+n[1]*r[3],s=n[2]*r[0]+n[3]*r[2],w=n[2]*r[1]+n[3]*r[3],g=(o+w)/2,v=Math.sqrt(Math.pow(o+w,2)-4*(o*w-s*u))/2,y=g+v||1,m=g-v||1;return[Math.sqrt(y),Math.sqrt(m)]}},{key:"normalizeRect",value:function(n){var r=n.slice(0);return n[0]>n[2]&&(r[0]=n[2],r[2]=n[0]),n[1]>n[3]&&(r[1]=n[3],r[3]=n[1]),r}},{key:"intersect",value:function(n,r){var o=Math.max(Math.min(n[0],n[2]),Math.min(r[0],r[2])),u=Math.min(Math.max(n[0],n[2]),Math.max(r[0],r[2]));if(o>u)return null;var s=Math.max(Math.min(n[1],n[3]),Math.min(r[1],r[3])),w=Math.min(Math.max(n[1],n[3]),Math.max(r[1],r[3]));return s>w?null:[o,s,u,w]}},{key:"bezierBoundingBox",value:function(n,r,o,u,s,w,g,v){for(var y,m,d,f,x,k,P,S,E=[],M=[[],[]],T=0;T<2;++T)if(T===0?(m=6*n-12*o+6*s,y=-3*n+9*o-9*s+3*g,d=3*o-3*n):(m=6*r-12*u+6*w,y=-3*r+9*u-9*w+3*v,d=3*u-3*r),Math.abs(y)<1e-12){if(Math.abs(m)<1e-12)continue;0<(f=-d/m)&&f<1&&E.push(f)}else P=m*m-4*d*y,S=Math.sqrt(P),P<0||(0<(x=(-m+S)/(2*y))&&x<1&&E.push(x),0<(k=(-m-S)/(2*y))&&k<1&&E.push(k));for(var D,I=E.length,N=I;I--;)D=1-(f=E[I]),M[0][I]=D*D*D*n+3*D*D*f*o+3*D*f*f*s+f*f*f*g,M[1][I]=D*D*D*r+3*D*D*f*u+3*D*f*f*w+f*f*f*v;return M[0][N]=n,M[1][N]=r,M[0][N+1]=g,M[1][N+1]=v,M[0].length=M[1].length=N+2,[Math.min.apply(Math,_toConsumableArray$1(M[0])),Math.min.apply(Math,_toConsumableArray$1(M[1])),Math.max.apply(Math,_toConsumableArray$1(M[0])),Math.max.apply(Math,_toConsumableArray$1(M[1]))]}},{key:"getBoundingBox",value:function(n,r,o,u){return[Math.abs(n-o),Math.abs(r-u)]}}])}();function getColorFormat(e){return e.startsWith("#")?"hex":e.startsWith("rgb(")?"rgb":e.startsWith("hsl")?"hsl":"unknown"}function convertColorToRGB(e){var n=getColorFormat(e);if(n==="hex")return hexToRgb(e);if(n==="rgb"){var r=e.match(/(\d+),\s*(\d+),\s*(\d+)/);return r?{R:parseInt(r[1]),G:parseInt(r[2]),B:parseInt(r[3])}:{error:"Invalid RGB format"}}if(n==="hsl"){var o=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!o)return{error:"Invalid HSL format"};var u=parseInt(o[1]),s=parseInt(o[2])/100,w=parseInt(o[3])/100;return hslToRgb$1(u,s,w)}console.error({message:"Invalid color value"})}function rgbToHex(e,n,r){var o=(16777216|e<<16|n<<8|r).toString(16).slice(1).toUpperCase();return"#".concat(o)}var onClickOutside$1=function(e,n){var r=function o(u){var s=!0;if(Array.isArray(e))e.forEach(function(w){w&&!w.contains(u.target)||(s=!1)});else if(!e||e.contains(u.target))return;s&&(n&&n(u),document.removeEventListener(isMobileDevice$1?"touchstart":"mousedown",o))};return document.addEventListener(isMobileDevice$1?"touchstart":"mousedown",r),r},onClickOutsideUp=function(e,n){var r=function o(u){var s=!0;if(Array.isArray(e))e.forEach(function(w){w&&!w.contains(u.target)||(s=!1)});else if(!e||e.contains(u.target))return;s&&(n&&n(u),document.removeEventListener(isMobileDevice$1?"touchend":"mouseup",o))};return document.addEventListener(isMobileDevice$1?"touchend":"mouseup",r),r};function hexToRgb(e){var n=e.slice(1),r=parseInt(n,16);return{R:r>>16&255,G:r>>8&255,B:255&r}}var hslToRgb$1=function(e,n,r){var o,u,s;if(e/=360,n===0)o=u=s=Math.round(255*r);else{var w=function(y,m,d){return d<0&&(d+=1),d>1&&(d-=1),d<.16666666666666666?y+6*(m-y)*d:d<.5?m:d<.6666666666666666?y+(m-y)*(.6666666666666666-d)*6:y},g=r<.5?r*(1+n):r+n-r*n,v=2*r-g;o=Math.round(255*w(v,g,e+1/3)),u=Math.round(255*w(v,g,e)),s=Math.round(255*w(v,g,e-1/3))}return{R:o,G:u,B:s}},setCss=function(e,n){if(e&&n)for(var r in n)e.style[r]=n[r]},_pagesRefCache=new WeakMap,PDFLinkService=function(){return _createClass(function e(){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_pagesRefCache,new Map),this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null},[{key:"setDocument",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.baseUrl=n,this.pdfDocument=e,_classPrivateFieldGet2(_pagesRefCache,this).clear()}},{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(e){this.pdfViewer.currentPageNumber=e}},{key:"rotation",get:function(){return this.pdfViewer.pagesRotation},set:function(e){this.pdfViewer.pagesRotation=e}},{key:"goToPage",value:function(e){if(this.pdfDocument){var n=typeof e=="string"&&this.pdfViewer.pageLabelToPageNumber(e)||0|e;Number.isInteger(n)&&n>0&&n<=this.pagesCount?this.pdfViewer.scrollPageIntoView({pageNumber:n}):console.error('PDFLinkService.goToPage: "'.concat(e,'" is not a valid page.'))}}},{key:"cachePageRef",value:function(e,n){if(n){var r=n.gen===0?"".concat(n.num,"R"):"".concat(n.num,"R").concat(n.gen);_classPrivateFieldGet2(_pagesRefCache,this).set(r,e)}}},{key:"_cachedPageNumber",value:function(e){if(!e)return null;var n=e.gen===0?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return _classPrivateFieldGet2(_pagesRefCache,this).get(n)||null}},{key:"isPageVisible",value:function(e){return this.pdfViewer.isPageVisible(e)}},{key:"isPageCached",value:function(e){return this.pdfViewer.isPageCached(e)}}])}(),_activeCapability=new WeakMap,_updateCallback=new WeakMap,_callback=new WeakMap,_reason=new WeakMap,_active=new WeakMap,_PasswordPrompt_brand=new WeakSet,PasswordPrompt=function(){return _createClass(function o(u){var s=this;_classCallCheck(this,o),_classPrivateMethodInitSpec(this,_PasswordPrompt_brand),_classPrivateFieldInitSpec(this,_activeCapability,null),_classPrivateFieldInitSpec(this,_updateCallback,null),_classPrivateFieldInitSpec(this,_callback,null),_classPrivateFieldInitSpec(this,_reason,null),_classPrivateFieldInitSpec(this,_active,!1),this.dialog=u.dialog,this.label=u.label,this.input=u.input,this.submitButton=u.submitButton,this.cancelButton=u.cancelButton,this.$t=u.$t,this.submitButton.addEventListener("click",_assertClassBrand(_PasswordPrompt_brand,this,_verify).bind(this)),this.cancelButton.addEventListener("click",this.close.bind(this)),this.input.addEventListener("keyup",function(w){w.keyCode===13&&_assertClassBrand(_PasswordPrompt_brand,s,_verify).call(s),s.label.textContent="",s.input.value===""?s.submitButton.classList.add("disabled"):s.submitButton.classList.remove("disabled")})},[{key:"open",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function o(){var u;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!_classPrivateFieldGet2(_activeCapability,this)){s.next=3;break}return s.next=3,_classPrivateFieldGet2(_activeCapability,this).promise;case 3:_classPrivateFieldSet2(_activeCapability,this,pdfExports.createPromiseCapability()),s.prev=4,this.dialog.classList.add("show"),this.submitButton.classList.add("disabled"),_classPrivateFieldSet2(_active,this,!0),s.next=14;break;case 10:throw s.prev=10,s.t0=s.catch(4),_classPrivateFieldSet2(_activeCapability,this,null),s.t0;case 14:(u=_classPrivateFieldGet2(_reason,this)===pdfExports.PasswordResponses.INCORRECT_PASSWORD)&&this.input.focus(),u?(this.label.textContent=this.$t("passwordDialog.wrongPwd"),this.label.style.color="red"):(this.label.style.color="",this.label.textContent="");case 17:case"end":return s.stop()}},o,this,[[4,10]])})),function(){return r.apply(this,arguments)})},{key:"close",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function o(){var u;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:_classPrivateFieldGet2(_active,this)&&((u=new Event("click")).param=!1,document.getElementById("eyeVisible").dispatchEvent(u),this.dialog.classList.remove("show"),_classPrivateFieldSet2(_active,this,!1),_assertClassBrand(_PasswordPrompt_brand,this,_cancel).call(this));case 1:case"end":return s.stop()}},o,this)})),function(){return n.apply(this,arguments)})},{key:"setUpdateCallback",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function o(u,s,w){return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!_classPrivateFieldGet2(_activeCapability,this)){g.next=3;break}return g.next=3,_classPrivateFieldGet2(_activeCapability,this).promise;case 3:_classPrivateFieldSet2(_updateCallback,this,u),_classPrivateFieldSet2(_reason,this,s),_classPrivateFieldSet2(_callback,this,w);case 6:case"end":return g.stop()}},o,this)})),function(o,u,s){return e.apply(this,arguments)})}]);var e,n,r}();function _verify(){var e=this.input.value;(e==null?void 0:e.length)>0&&_assertClassBrand(_PasswordPrompt_brand,this,_invokeCallback).call(this,e)}function _cancel(){_assertClassBrand(_PasswordPrompt_brand,this,_invokeCallback).call(this,new Error("PasswordPrompt cancelled.")),_classPrivateFieldGet2(_activeCapability,this).resolve()}function _invokeCallback(e){_classPrivateFieldGet2(_updateCallback,this)&&(this.input.value="",_classPrivateFieldGet2(_updateCallback,this).call(this,e),_classPrivateFieldGet2(_callback,this).call(this,e),_classPrivateFieldSet2(_callback,this,null),_classPrivateFieldSet2(_updateCallback,this,null),this.close())}var RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},ALIGNMAP={LEFT:0,CENTER:1,CENTERED:1,RIGHT:2},MARGIN_DISTANCE=10,AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},AnnotationTypeString={1:"text",2:"link",3:"freetext",4:"line",5:"square",6:"circle",7:"polygon",8:"polyline",9:"highlight",10:"underline",11:"squiggly",12:"strikeout",13:"stamp",14:"caret",15:"ink",16:"popup",17:"fileattachment",18:"sound",19:"movie",20:"widget",21:"screen",22:"printermark",23:"trapnet",24:"watermark",25:"threed",26:"richmedia",27:"redact",28:"interchange",29:"arc"};_defineProperty$1(_defineProperty$1(_defineProperty$1(_defineProperty$1(_defineProperty$1({1:"none",0:"check"},"1","circle"),2,"cross"),3,"diamond"),4,"square"),5,"star");var PixelsPerInch=_createClass(function e(){_classCallCheck(this,e)});_defineProperty$1(PixelsPerInch,"CSS",96),_defineProperty$1(PixelsPerInch,"PDF",72),_defineProperty$1(PixelsPerInch,"PDF_TO_CSS_UNITS",1);var AnnotationState={MARKED:0,UNMARKED:1,ACCEPTED:2,REJECTED:3,CANCELLED:4,COMPLETED:5,NONE:6,ERROR:7},AnnotationStateString={0:"MARKED",1:"UNMARKED",2:"ACCEPTED",3:"REJECTED",4:"CANCELLED",5:"COMPLETED",6:"NONE",7:"ERROR"},KeyboardManager=function(){return _createClass(function e(n){_classCallCheck(this,e),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var r,o=e.platform.isMac,u=_createForOfIteratorHelper(n);try{for(u.s();!(r=u.n()).done;){var s,w=_slicedToArray(r.value,2),g=w[0],v=w[1],y=_createForOfIteratorHelper(g);try{for(y.s();!(s=y.n()).done;){var m=s.value,d=m.startsWith("mac+");o&&d?(this.callbacks.set(m.slice(4),v),this.allKeys.add(m.split("+").at(-1))):o||d||(this.callbacks.set(m,v),this.allKeys.add(m.split("+").at(-1)))}}catch(f){y.e(f)}finally{y.f()}}}catch(f){u.e(f)}finally{u.f()}},[{key:"_serialize",value:function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);var n=this.buffer.join("+");return this.buffer.length=0,n}},{key:"exec",value:function(e,n){if(this.allKeys.has(n.key)){var r=this.callbacks.get(this._serialize(n));r&&(r.bind(e)(),n.stopPropagation(),n.preventDefault())}}}],[{key:"platform",get:function(){var e=typeof navigator<"u"?navigator.platform:"";return shadow$1(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}])}();function opacityToHex(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")}var dayjs_minExports={},dayjs_min$1={get exports(){return dayjs_minExports},set exports(e){dayjs_minExports=e}};dayjs_min$1.exports=function(){var e=1e3,n=6e4,r=36e5,o="millisecond",u="second",s="minute",w="hour",g="day",v="week",y="month",m="quarter",d="year",f="date",x="Invalid Date",k=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(q){var ne=["th","st","nd","rd"],J=q%100;return"["+q+(ne[(J-20)%10]||ne[J]||ne[0])+"]"}},E=function(q,ne,J){var re=String(q);return!re||re.length>=ne?q:""+Array(ne+1-re.length).join(J)+q},M={s:E,z:function(q){var ne=-q.utcOffset(),J=Math.abs(ne),re=Math.floor(J/60),X=J%60;return(ne<=0?"+":"-")+E(re,2,"0")+":"+E(X,2,"0")},m:function q(ne,J){if(ne.date()<J.date())return-q(J,ne);var re=12*(J.year()-ne.year())+(J.month()-ne.month()),X=ne.clone().add(re,y),j=J-X<0,Z=ne.clone().add(re+(j?-1:1),y);return+(-(re+(J-X)/(j?X-Z:Z-X))||0)},a:function(q){return q<0?Math.ceil(q)||0:Math.floor(q)},p:function(q){return{M:y,y:d,w:v,d:g,D:f,h:w,m:s,s:u,ms:o,Q:m}[q]||String(q||"").toLowerCase().replace(/s$/,"")},u:function(q){return q===void 0}},T="en",D={};D[T]=S;var I="$isDayjsObject",N=function(q){return q instanceof Y||!(!q||!q[I])},O=function q(ne,J,re){var X;if(!ne)return T;if(typeof ne=="string"){var j=ne.toLowerCase();D[j]&&(X=j),J&&(D[j]=J,X=j);var Z=ne.split("-");if(!X&&Z.length>1)return q(Z[0])}else{var W=ne.name;D[W]=ne,X=W}return!re&&X&&(T=X),X||!re&&T},F=function(q,ne){if(N(q))return q.clone();var J=_typeof$1(ne)=="object"?ne:{};return J.date=q,J.args=arguments,new Y(J)},U=M;U.l=O,U.i=N,U.w=function(q,ne){return F(q,{locale:ne.$L,utc:ne.$u,x:ne.$x,$offset:ne.$offset})};var Y=function(){function q(J){this.$L=O(J.locale,null,!0),this.parse(J),this.$x=this.$x||J.x||{},this[I]=!0}var ne=q.prototype;return ne.parse=function(J){this.$d=function(re){var X=re.date,j=re.utc;if(X===null)return new Date(NaN);if(U.u(X))return new Date;if(X instanceof Date)return new Date(X);if(typeof X=="string"&&!/Z$/i.test(X)){var Z=X.match(k);if(Z){var W=Z[2]-1||0,te=(Z[7]||"0").substring(0,3);return j?new Date(Date.UTC(Z[1],W,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,te)):new Date(Z[1],W,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,te)}}return new Date(X)}(J),this.init()},ne.init=function(){var J=this.$d;this.$y=J.getFullYear(),this.$M=J.getMonth(),this.$D=J.getDate(),this.$W=J.getDay(),this.$H=J.getHours(),this.$m=J.getMinutes(),this.$s=J.getSeconds(),this.$ms=J.getMilliseconds()},ne.$utils=function(){return U},ne.isValid=function(){return this.$d.toString()!==x},ne.isSame=function(J,re){var X=F(J);return this.startOf(re)<=X&&X<=this.endOf(re)},ne.isAfter=function(J,re){return F(J)<this.startOf(re)},ne.isBefore=function(J,re){return this.endOf(re)<F(J)},ne.$g=function(J,re,X){return U.u(J)?this[re]:this.set(X,J)},ne.unix=function(){return Math.floor(this.valueOf()/1e3)},ne.valueOf=function(){return this.$d.getTime()},ne.startOf=function(J,re){var X=this,j=!!U.u(re)||re,Z=U.p(J),W=function(Ce,Pe){var Me=U.w(X.$u?Date.UTC(X.$y,Pe,Ce):new Date(X.$y,Pe,Ce),X);return j?Me:Me.endOf(g)},te=function(Ce,Pe){return U.w(X.toDate()[Ce].apply(X.toDate("s"),(j?[0,0,0,0]:[23,59,59,999]).slice(Pe)),X)},le=this.$W,oe=this.$M,Ee=this.$D,Ae="set"+(this.$u?"UTC":"");switch(Z){case d:return j?W(1,0):W(31,11);case y:return j?W(1,oe):W(0,oe+1);case v:var ve=this.$locale().weekStart||0,ke=(le<ve?le+7:le)-ve;return W(j?Ee-ke:Ee+(6-ke),oe);case g:case f:return te(Ae+"Hours",0);case w:return te(Ae+"Minutes",1);case s:return te(Ae+"Seconds",2);case u:return te(Ae+"Milliseconds",3);default:return this.clone()}},ne.endOf=function(J){return this.startOf(J,!1)},ne.$set=function(J,re){var X,j=U.p(J),Z="set"+(this.$u?"UTC":""),W=(X={},X[g]=Z+"Date",X[f]=Z+"Date",X[y]=Z+"Month",X[d]=Z+"FullYear",X[w]=Z+"Hours",X[s]=Z+"Minutes",X[u]=Z+"Seconds",X[o]=Z+"Milliseconds",X)[j],te=j===g?this.$D+(re-this.$W):re;if(j===y||j===d){var le=this.clone().set(f,1);le.$d[W](te),le.init(),this.$d=le.set(f,Math.min(this.$D,le.daysInMonth())).$d}else W&&this.$d[W](te);return this.init(),this},ne.set=function(J,re){return this.clone().$set(J,re)},ne.get=function(J){return this[U.p(J)]()},ne.add=function(J,re){var X,j=this;J=Number(J);var Z=U.p(re),W=function(oe){var Ee=F(j);return U.w(Ee.date(Ee.date()+Math.round(oe*J)),j)};if(Z===y)return this.set(y,this.$M+J);if(Z===d)return this.set(d,this.$y+J);if(Z===g)return W(1);if(Z===v)return W(7);var te=(X={},X[s]=n,X[w]=r,X[u]=e,X)[Z]||1,le=this.$d.getTime()+J*te;return U.w(le,this)},ne.subtract=function(J,re){return this.add(-1*J,re)},ne.format=function(J){var re=this,X=this.$locale();if(!this.isValid())return X.invalidDate||x;var j=J||"YYYY-MM-DDTHH:mm:ssZ",Z=U.z(this),W=this.$H,te=this.$m,le=this.$M,oe=X.weekdays,Ee=X.months,Ae=X.meridiem,ve=function(Pe,Me,Le,Te){return Pe&&(Pe[Me]||Pe(re,j))||Le[Me].slice(0,Te)},ke=function(Pe){return U.s(W%12||12,Pe,"0")},Ce=Ae||function(Pe,Me,Le){var Te=Pe<12?"AM":"PM";return Le?Te.toLowerCase():Te};return j.replace(P,function(Pe,Me){return Me||function(Le){switch(Le){case"YY":return String(re.$y).slice(-2);case"YYYY":return U.s(re.$y,4,"0");case"M":return le+1;case"MM":return U.s(le+1,2,"0");case"MMM":return ve(X.monthsShort,le,Ee,3);case"MMMM":return ve(Ee,le);case"D":return re.$D;case"DD":return U.s(re.$D,2,"0");case"d":return String(re.$W);case"dd":return ve(X.weekdaysMin,re.$W,oe,2);case"ddd":return ve(X.weekdaysShort,re.$W,oe,3);case"dddd":return oe[re.$W];case"H":return String(W);case"HH":return U.s(W,2,"0");case"h":return ke(1);case"hh":return ke(2);case"a":return Ce(W,te,!0);case"A":return Ce(W,te,!1);case"m":return String(te);case"mm":return U.s(te,2,"0");case"s":return String(re.$s);case"ss":return U.s(re.$s,2,"0");case"SSS":return U.s(re.$ms,3,"0");case"Z":return Z}return null}(Pe)||Z.replace(":","")})},ne.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ne.diff=function(J,re,X){var j,Z=this,W=U.p(re),te=F(J),le=(te.utcOffset()-this.utcOffset())*n,oe=this-te,Ee=function(){return U.m(Z,te)};switch(W){case d:j=Ee()/12;break;case y:j=Ee();break;case m:j=Ee()/3;break;case v:j=(oe-le)/6048e5;break;case g:j=(oe-le)/864e5;break;case w:j=oe/r;break;case s:j=oe/n;break;case u:j=oe/e;break;default:j=oe}return X?j:U.a(j)},ne.daysInMonth=function(){return this.endOf(y).$D},ne.$locale=function(){return D[this.$L]},ne.locale=function(J,re){if(!J)return this.$L;var X=this.clone(),j=O(J,re,!0);return j&&(X.$L=j),X},ne.clone=function(){return U.w(this.$d,this)},ne.toDate=function(){return new Date(this.valueOf())},ne.toJSON=function(){return this.isValid()?this.toISOString():null},ne.toISOString=function(){return this.$d.toISOString()},ne.toString=function(){return this.$d.toUTCString()},q}(),Q=Y.prototype;return F.prototype=Q,[["$ms",o],["$s",u],["$m",s],["$H",w],["$W",g],["$M",y],["$y",d],["$D",f]].forEach(function(q){Q[q[1]]=function(ne){return this.$g(ne,q[0],q[1])}}),F.extend=function(q,ne){return q.$i||(q(ne,Y,F),q.$i=!0),F},F.locale=O,F.isDayjs=N,F.unix=function(q){return F(1e3*q)},F.en=D[T],F.Ls=D,F.p={},F}();var dayjs$1=dayjs_minExports,PDFAnnotation=function(){return _createClass(function e(n){_classCallCheck(this,e),this._boundFocusin=this.focusin.bind(this),this._boundFocusout=this.focusout.bind(this),this._hasBeenSelected=!1,this._isEditing=!1,this._isInEditMode=!1,this.annotation=n.annotation||null,this.parent=n.parent,this.id=n.id,this.width=this.height=null,this.pageIndex=n.parent.pageIndex,this.name=n.name,this.div=null,this.viewport=this.parent.viewport;var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],u=r[1];this.x=n.x/o,this.y=n.y/u,this.rotation=this.viewport.rotation,this.isAttachedToDOM=!1},[{key:"setInBackground",value:function(){this.div.style.zIndex=0}},{key:"focusin",value:function(){this._hasBeenSelected?this._hasBeenSelected=!1:this.parent.setSelected(this)}},{key:"focusout",value:function(e){if(this.isAttachedToDOM){var n=e.relatedTarget;n!=null&&n.closest("#".concat(this.id))||(e.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove(),this.parent.unselect(this))}}},{key:"commitOrRemove",value:function(){this.isEmpty()?this.remove():this.commit()}},{key:"fixDims",value:function(){var e=this.div.style,n=e.height,r=e.width,o=r.endsWith("%"),u=n.endsWith("%");if(!o||!u){var s=_slicedToArray(this.parent.viewportBaseDimensions,2),w=s[0],g=s[1];o||(e.width="".concat(100*parseFloat(r)/w,"%")),u||(e.height="".concat(100*parseFloat(n)/g,"%"))}}},{key:"commit",value:function(){this.parent.addToAnnotationStorage(this)}},{key:"dragstart",value:function(e){var n=this.parent.div.getBoundingClientRect();this.startX=e.clientX-n.x,this.startY=e.clientY-n.y,e.dataTransfer.setData("text/plain",this.id),e.dataTransfer.effectAllowed="move"}},{key:"setAt",value:function(e,n,r,o){var u=_slicedToArray(this.parent.viewportBaseDimensions,2),s=u[0],w=u[1],g=_slicedToArray(this.screenToPageTranslation(r,o),2);r=g[0],o=g[1],this.x=(e+r)/s,this.y=(n+o)/w,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"translate",value:function(e,n){var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],u=r[1],s=_slicedToArray(this.screenToPageTranslation(e,n),2);e=s[0],n=s[1],this.x+=e/o,this.y+=n/u,this.div.style.left="".concat(100*this.x,"%"),this.div.style.top="".concat(100*this.y,"%")}},{key:"screenToPageTranslation",value:function(e,n){switch(this.parent.viewport.rotation){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}}},{key:"setDims",value:function(e,n){var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],u=r[1];this.div.style.width="".concat(100*e/o,"%"),this.div.style.height="".concat(100*n/u,"%")}},{key:"getInitialTranslation",value:function(){return[0,0]}},{key:"render",value:function(){if(this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.div.addEventListener("focusin",this._boundFocusin),this.div.addEventListener("focusout",this._boundFocusout),this.annotation){var e=this.rectCalc(position,this.parent.viewport.height,scale);this.div.style.top=e.top+"px",this.div.style.left=e.left+"px"}else{var n=_slicedToArray(this.getInitialTranslation(),2),r=n[0],o=n[1];this.translate(r,o)}return bindEvents(this,this.div,["dragstart","pointerdown"]),this.div}},{key:"rectCalc",value:function(e,n,r){return{top:n-e.top*r,left:e.left*r,width:(e.right-e.left)*r,height:(e.top-e.bottom)*r}}},{key:"pointerdown",value:function(e){var n=KeyboardManager.platform.isMac;e.button!==0||e.ctrlKey&&n?e.preventDefault():(e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this),this._hasBeenSelected=!0)}},{key:"getRect",value:function(e,n){var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],u=r[1],s=_slicedToArray(this.parent.pageDimensions,2),w=s[0],g=s[1],v=w*e/o,y=g*n/u,m=this.x*w,d=this.y*g,f=this.width*w,x=this.height*g;switch(this.rotation){case 0:return[m+v,g-d-y-x,m+v+f,g-d-y];case 90:return[m+y,g-d+v,m+y+x,g-d+v+f];case 180:return[m-v-f,g-d+y,m-v,g-d+y+x];case 270:return[m-y-x,g-d-v-f,m-y,g-d-v];default:throw new Error("Invalid rotation")}}},{key:"getRectInCurrentCoords",value:function(e,n){var r=_slicedToArray(e,4),o=r[0],u=r[1],s=r[2],w=r[3],g=s-o,v=w-u;switch(this.rotation){case 0:return[o,n-w,g,v];case 90:return[o,n-u,v,g];case 180:return[s,n-u,g,v];case 270:return[s,n-w,v,g];default:throw new Error("Invalid rotation")}}},{key:"enableEditMode",value:function(){this._isInEditMode=!0}},{key:"disableEditMode",value:function(){this._isInEditMode=!1}},{key:"isInEditMode",value:function(){return this._isInEditMode}},{key:"shouldGetKeyboardEvents",value:function(){return!1}},{key:"needsToBeRebuilt",value:function(){return this.div&&!this.isAttachedToDOM}},{key:"rebuild",value:function(){var e;(e=this.div)===null||e===void 0||e.addEventListener("focusin",this._boundFocusin)}},{key:"remove",value:function(){this.div.removeEventListener("focusin",this._boundFocusin),this.div.removeEventListener("focusout",this._boundFocusout),this.isEmpty()||this.commit(),this.parent.remove(this)}},{key:"select",value:function(){var e;(e=this.div)===null||e===void 0||e.classList.add("selectedAnnotation")}},{key:"unselect",value:function(){var e;(e=this.div)===null||e===void 0||e.classList.remove("selectedAnnotation")}},{key:"updateParams",value:function(e,n){}},{key:"disableEditing",value:function(){}},{key:"enableEditing",value:function(){}},{key:"propertiesToUpdate",get:function(){return{}}},{key:"contentDiv",get:function(){return this.div}},{key:"isEditing",get:function(){return this._isEditing},set:function(e){this._isEditing=e,e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}],[{key:"deserialize",value:function(e,n){var r=new this.prototype.constructor({parent:n,id:n.getNextId()});r.rotation=e.rotation;var o=_slicedToArray(n.pageDimensions,2),u=o[0],s=o[1],w=_slicedToArray(r.getRectInCurrentCoords(e.rect,s),4),g=w[0],v=w[1],y=w[2],m=w[3];return r.x=g/u,r.y=v/s,r.width=y/u,r.height=m/s,r}},{key:"renderImportAnnotations",value:function(e,n){var r=new this.prototype.constructor({parent:n,id:n.getNextId()});r.rotation=e.rotation;var o=_slicedToArray(n.pageDimensions,2),u=o[0],s=o[1],w=this.prototype.rectCalc(e.position,n.viewport.height,n.scaleFactor);return r.x=w.top/u,r.y=w.left/s,r.width=w.width/u,r.height=w.height/s,r}}])}(),_PDFAnnotationSticky;_defineProperty$1(PDFAnnotation,"_zIndex",1),_defineProperty$1(PDFAnnotation,"_defaultLineColor","#ff0000");var PDFAnnotationSticky=function(e){function n(r){var o;return _classCallCheck(this,n),(o=_callSuper(this,n,[_objectSpread2$1(_objectSpread2$1({},r),{},{name:"stickyAnnotation"})]))._boundEditorDivBlur=o.editorDivBlur.bind(o),o._boundEditorDivFocus=o.editorDivFocus.bind(o),o._boundEditorDivInput=o.editorDivInput.bind(o),o._boundEditorDivKeydown=o.editorDivKeydown.bind(o),o._content="",o._editorDivId="".concat(o.id,"-editor"),o._hasAlreadyBeenCommitted=!1,o.annotationObj=null,o._color=r.color||n._defaultColor,o._fontSize=r.fontSize||n._defaultFontSize,o._internalPadding=r.internalPadding||n._defaultInternalPadding,o._stickyWidth=20,o}return _inherits(n,PDFAnnotation),_createClass(n,[{key:"updateParams",value:function(r,o){switch(r){case AnnotationEditorParamsType.FREETEXT_SIZE:this._updateFontSize(o);break;case AnnotationEditorParamsType.FREETEXT_COLOR:this._updateColor(o)}}},{key:"propertiesToUpdate",get:function(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,this._fontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,this._color]]}},{key:"_updateFontSize",value:function(r){this.editorDiv.style.fontSize="".concat(r,"px"),this.translate(0,-(r-this._fontSize)*this.parent.scaleFactor),this._fontSize=r,this._setEditorDimensions()}},{key:"_updateColor",value:function(r){this._color=r,this.editorDiv.style.color=r}},{key:"getInitialTranslation",value:function(){return[-this._internalPadding*this.parent.scaleFactor,-(this._internalPadding+this._fontSize)*this.parent.scaleFactor]}},{key:"rebuild",value:function(){_get(_getPrototypeOf(n.prototype),"rebuild",this).call(this),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}},{key:"enableEditMode",value:function(){this.isInEditMode()||(this.parent.setEditingState(!1),_get(_getPrototypeOf(n.prototype),"enableEditMode",this).call(this),this.overlayDiv.classList.remove("enabled"),this.editorDiv.style.display="initial",this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("focus",this._boundEditorDivFocus),this.editorDiv.addEventListener("blur",this._boundEditorDivBlur),this.editorDiv.addEventListener("input",this._boundEditorDivInput))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&(this.parent.setEditingState(!0),_get(_getPrototypeOf(n.prototype),"disableEditMode",this).call(this),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this._editorDivId),this.editorDiv.style.display="none",this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this._boundEditorDivKeydown),this.editorDiv.removeEventListener("focus",this._boundEditorDivFocus),this.editorDiv.removeEventListener("blur",this._boundEditorDivBlur),this.editorDiv.removeEventListener("input",this._boundEditorDivInput),this.div.focus(),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}},{key:"focusin",value:function(r){_get(_getPrototypeOf(n.prototype),"focusin",this).call(this,r),r.target!==this.editorDiv&&this.editorDiv.focus()}},{key:"onceAdded",value:function(){this.width||(this.enableEditMode(),this.editorDiv.focus())}},{key:"isEmpty",value:function(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}},{key:"remove",value:function(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),_get(_getPrototypeOf(n.prototype),"remove",this).call(this)}},{key:"_extractText",value:function(){var r,o=this.editorDiv.getElementsByTagName("div");if(o.length===0)return this.editorDiv.innerText;var u=[];((r=this.editorDiv.firstChild)===null||r===void 0?void 0:r.nodeName)==="#text"&&u.push(this.editorDiv.firstChild.data);var s,w=_createForOfIteratorHelper(o);try{for(w.s();!(s=w.n()).done;){var g=s.value.firstChild;(g==null?void 0:g.nodeName)==="#text"?u.push(g.data):u.push("")}}catch(v){w.e(v)}finally{w.f()}return u.join(`
`)}},{key:"_setEditorDimensions",value:function(){var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],u=r[1],s=this.div.getBoundingClientRect();this.width=s.width/o,this.height=s.height/u}},{key:"commit",value:function(){this._content=this._extractText().trimEnd();var r=_slicedToArray(this.parent.viewportBaseDimensions,2),o=r[0],u=r[1],s={left:this.x*o,bottom:this.y*u+this._stickyWidth,right:this.x*o+this._stickyWidth,top:this.y*u};this.annotationObj={id:v4(),obj_type:"Text",obj_attr:{bdcolor:"#FF2600",content:this._content||void 0,date:dayjs$1().format("YYYY-MM-DD_HH:mm:ss"),ftransparency:1,page:this.pageIndex,position:this.parsePositionForBackend(s,this.viewport.height,this.parent.scale),transparency:1}},_get(_getPrototypeOf(n.prototype),"commit",this).call(this),this._hasAlreadyBeenCommitted||(this._hasAlreadyBeenCommitted=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this._setEditorDimensions()}},{key:"parsePositionForBackend",value:function(r,o,u){return{left:Math.round(1e3*r.left/u)/1e3,bottom:Math.round(1e3*(o-r.bottom)/u)/1e3,right:Math.round(1e3*r.right/u)/1e3,top:Math.round(1e3*(o-r.top)/u)/1e3}}},{key:"shouldGetKeyboardEvents",value:function(){return this.isInEditMode()}},{key:"dblclick",value:function(){this.enableEditMode(),this.editorDiv.focus()}},{key:"keydown",value:function(r){r.target===this.div&&r.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}},{key:"editorDivKeydown",value:function(r){n._keyboardManager.exec(this,r)}},{key:"editorDivFocus",value:function(){this.isEditing=!0}},{key:"editorDivBlur",value:function(){this.isEditing=!1}},{key:"editorDivInput",value:function(r){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}},{key:"disableEditing",value:function(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}},{key:"enableEditing",value:function(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}},{key:"render",value:function(){if(this.div)return this.div;var r,o;this.width&&(r=this.x,o=this.y),_get(_getPrototypeOf(n.prototype),"render",this).call(this),this.iconDiv=document.createElement("div"),this.iconDiv.classList="icon-wrapper",this.iconDiv.innerHTML='<svg data-status="normal" width="32" height="32" viewBox="0 0 32 32"><g fill="none" fill-rule="evenodd"><path d="M0 0h32v32H0z"></path><path d="M28 5.333V24H14.667L8 28v-4H4V5.333h24zM18.667 18H9.333v1.333h9.334V18zm4-4H9.333v1.333h13.334V14zm0-4H9.333v1.333h13.334V10z" fill="#BE0C0E"></path></g></svg>',this.div.append(this.iconDiv),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal editor-container",this.editorDiv.setAttribute("id",this._editorDivId),this.enableEditing(),this.editorDiv.contentEditable=!0;var u=this.editorDiv.style;if(u.fontSize="".concat(this._fontSize,"px"),u.color=this._color,u.top="36px",u.left="50%",this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),bindEvents(this,this.div,["dblclick","keydown"]),this.width){this.setAt(r,o,this.width,this.height);var s,w=_createForOfIteratorHelper(this._content.split(`
`));try{for(w.s();!(s=w.n()).done;){var g=s.value,v=document.createElement("div");v.append(g?document.createTextNode(g):document.createElement("br")),this.editorDiv.append(v)}}catch(y){w.e(y)}finally{w.f()}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}},{key:"contentDiv",get:function(){return this.editorDiv}},{key:"serialize",value:function(){if(this.isEmpty())return null;var r=this._internalPadding*this.parent.scaleFactor,o=this.getRect(r,r);return{annotationType:AnnotationEditorType.FREETEXT,color:this._color,fontSize:this._fontSize,value:this._content,pageIndex:this.parent.pageIndex,rect:o,rotation:this.rotation}}}],[{key:"updateDefaultParams",value:function(r,o){switch(r){case AnnotationEditorParamsType.FREETEXT_SIZE:n._defaultFontSize=o;break;case AnnotationEditorParamsType.FREETEXT_COLOR:n._defaultColor=o}}},{key:"defaultPropertiesToUpdate",get:function(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,n._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,n._defaultColor||n._defaultLineColor]]}},{key:"deserialize",value:function(r,o){var u;return(u=r.type==="custom"?_get(_getPrototypeOf(n),"renderImportAnnotations",this).call(this,r,o):_get(_getPrototypeOf(n),"deserialize",this).call(this,r,o))._fontSize=r.fontSize,u._color=this._color,u._content=r.value,u}}])}(),_InkEditor;_PDFAnnotationSticky=PDFAnnotationSticky,_defineProperty$1(PDFAnnotationSticky,"_defaultColor","#000"),_defineProperty$1(PDFAnnotationSticky,"_defaultFontSize",10),_defineProperty$1(PDFAnnotationSticky,"_defaultInternalPadding",2),_defineProperty$1(PDFAnnotationSticky,"_keyboardManager",new KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],_PDFAnnotationSticky.prototype.commitOrRemove]]));var RESIZER_SIZE=16,TIME_TO_WAIT_BEFORE_FIXING_DIMS=100,_InkEditor_brand=new WeakSet,InkEditor=function(e){function n(r){var o;return _classCallCheck(this,n),_classPrivateMethodInitSpec(o=_callSuper(this,n,[_objectSpread2$1(_objectSpread2$1({},r),{},{name:"inkEditor"})]),_InkEditor_brand),o._aspectRatio=0,o._zIndexForeground=n._zIndex++,o._baseHeight=0,o._baseWidth=0,o._boundCanvasPointermove=o.canvasPointermove.bind(o),o._boundCanvasPointerleave=o.canvasPointerleave.bind(o),o._boundCanvasPointerup=o.canvasPointerup.bind(o),o._boundCanvasPointerdown=o.canvasPointerdown.bind(o),o._disableEditing=!1,o._isCanvasInitialized=!1,o._lastPoint=null,o._observer=null,o._realWidth=0,o._realHeight=0,o._requestFrameCallback=null,o.color=r.color||null,o.thickness=r.thickness||null,o.opacity=r.opacity||null,o.paths=[],o.bezierPath2D=[],o.currentPath=[],o.arrowPoints=[],o.scaleFactor=1,o.translationX=o.translationY=0,o.x=0,o.y=0,o}return _inherits(n,PDFAnnotation),_createClass(n,[{key:"updateParams",value:function(r,o){switch(r){case AnnotationEditorParamsType.INK_THICKNESS:this._updateThickness(o);break;case AnnotationEditorParamsType.INK_COLOR:this._updateColor(o);break;case AnnotationEditorParamsType.INK_OPACITY:this._updateOpacity(o)}}},{key:"propertiesToUpdate",get:function(){var r;return[[AnnotationEditorParamsType.INK_THICKNESS,this.thickness||n._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,this.color||n._defaultColor||PDFAnnotation._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((r=this.opacity)!==null&&r!==void 0?r:n._defaultOpacity))]]}},{key:"_updateThickness",value:function(r){this.thickness=r,_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this)}},{key:"_updateColor",value:function(r){var o=this,u=this.color;this.parent.addCommands({cmd:function(){o.color=r,_assertClassBrand(_InkEditor_brand,o,_redraw).call(o)},undo:function(){o.color=u,_assertClassBrand(_InkEditor_brand,o,_redraw).call(o)},mustExec:!0,type:AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}},{key:"_updateOpacity",value:function(r){var o=this;r/=100;var u=this.opacity;this.parent.addCommands({cmd:function(){o.opacity=r,_assertClassBrand(_InkEditor_brand,o,_redraw).call(o)},undo:function(){o.opacity=u,_assertClassBrand(_InkEditor_brand,o,_redraw).call(o)},mustExec:!0,type:AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}},{key:"rebuild",value:function(){_get(_getPrototypeOf(n.prototype),"rebuild",this).call(this),this.div!==null&&(this.canvas||_assertClassBrand(_InkEditor_brand,this,_createCanvas).call(this),this.isAttachedToDOM||(this.parent.add(this),_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this)),_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this))}},{key:"remove",value:function(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this._observer.disconnect(),this._observer=null,_get(_getPrototypeOf(n.prototype),"remove",this).call(this))}},{key:"enableEditMode",value:function(){this._disableEditing||this.canvas===null||(_get(_getPrototypeOf(n.prototype),"enableEditMode",this).call(this),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this._boundCanvasPointerdown),this.canvas.addEventListener("pointerup",this._boundCanvasPointerup))}},{key:"disableEditMode",value:function(){this.isInEditMode()&&this.canvas!==null&&(_get(_getPrototypeOf(n.prototype),"disableEditMode",this).call(this),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerup",this._boundCanvasPointerup))}},{key:"onceAdded",value:function(){this.div.draggable=!this.isEmpty()}},{key:"isEmpty",value:function(){return!this.paths||this.paths.length<2}},{key:"drawLine",value:function(r,o){var u,s,w,g=r[0]-o[0],v=r[1]-o[1],y=Math.atan(v/g),m=[(r[0]+o[0])/2,(r[1]+o[1])/2];this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),(u=this.ctx).moveTo.apply(u,_toConsumableArray$1(r)),(s=this.ctx).lineTo.apply(s,_toConsumableArray$1(o)),this.ctx.stroke(),this.drawStartLineArrow.apply(this,_toConsumableArray$1(r).concat(_toConsumableArray$1(o))),this.drawEndLineArrow.apply(this,_toConsumableArray$1(r).concat(_toConsumableArray$1(o))),this._move&&this.drawCircle(r,o,y),this.ctx.save(),(w=this.ctx).translate.apply(w,m),this.ctx.beginPath(),this.ctx.rotate(y);var d=Math.round(10*Math.sqrt(g*g+v*v))/10;this.ctx.fillStyle="blue",this.ctx.font="12px Arial";var f=this.ctx.measureText(d+" pt").width;this.ctx.fillText(d+" pt",-f*Math.cos(y)/2,0),this.ctx.restore(),this.ctx.save(),this.parent._uiManager._eventBus.dispatch("distanceChanged",{distance:d})}},{key:"drawCircle",value:function(r,o){var u=r[0]-o[0],s=r[1]-o[1],w=Math.atan(s/u),g=r[0]+10*Math.cos(w),v=r[1]+10*Math.sin(w),y=this.ctx,m="#0097ff";y.fillStyle=m,y.beginPath(),y.arc(g,v,6,0,2*Math.PI,!0),y.fill(),y.stroke();var d=o[0]-10*Math.cos(w),f=o[1]-10*Math.sin(w);y.fillStyle=m,y.beginPath(),y.arc(d,f,6,0,2*Math.PI,!0),y.fill(),y.stroke(),this._dragStartPoint=[g,v],this._dragEndPoint=[d,f]}},{key:"drawStartLineArrow",value:function(r,o,u,s){var w,g,v=180*Math.atan2(s-o,u-r)/Math.PI,y=(v+30)*Math.PI/180,m=(v-30)*Math.PI/180,d=10*Math.cos(y),f=10*Math.sin(y),x=10*Math.cos(m),k=10*Math.sin(m);w=r+d,g=o+f,this.arrowPoints[0]=[w,g],this.ctx.moveTo(w,g),this.ctx.lineTo(r,o),w=r+x,g=o+k,this.arrowPoints[1]=[w,g],this.ctx.lineTo(w,g),this.ctx.stroke()}},{key:"drawEndLineArrow",value:function(r,o,u,s){var w,g,v=180*Math.atan2(o-s,r-u)/Math.PI,y=(v+30)*Math.PI/180,m=(v-30)*Math.PI/180,d=10*Math.cos(y),f=10*Math.sin(y),x=10*Math.cos(m),k=10*Math.sin(m);w=u+d,g=s+f,this.arrowPoints[2]=[w,g],this.ctx.moveTo(w,g),this.ctx.lineTo(u,s),w=u+x,g=s+k,this.arrowPoints[3]=[w,g],this.ctx.lineTo(w,g),this.ctx.stroke()}},{key:"commit",value:function(){this._disableEditing||(_get(_getPrototypeOf(n.prototype),"commit",this).call(this),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this._disableEditing=!0,this.div.classList.add("disabled"),_assertClassBrand(_InkEditor_brand,this,_fitToContent).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}},{key:"focusin",value:function(r){_get(_getPrototypeOf(n.prototype),"focusin",this).call(this,r),this.enableEditMode()}},{key:"canvasPointerdown",value:function(r){r.button===0&&this.isInEditMode()&&!this._disableEditing&&(this.setInForeground(),r.type!=="mouse"&&this.div.focus(),r.stopPropagation(),this.canvas.addEventListener("pointerleave",this._boundCanvasPointerleave),this.canvas.addEventListener("pointermove",this._boundCanvasPointermove),_assertClassBrand(_InkEditor_brand,this,_startDrawing).call(this,r.offsetX,r.offsetY))}},{key:"canvasPointermove",value:function(r){r.stopPropagation(),_assertClassBrand(_InkEditor_brand,this,_draw).call(this,r.offsetX,r.offsetY)}},{key:"canvasPointerup",value:function(r){if(r.button===0&&(this.isInEditMode()&&this.currentPath.length!==0&&(r.stopPropagation(),_assertClassBrand(_InkEditor_brand,this,_endDrawing).call(this,r),this.setInBackground()),this.isAttachedToDOM&&!(this.currentPath.length<2))){var o=r.relatedTarget;o!=null&&o.closest("#".concat(this.id))||(r.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove(),this.parent.unselect(this))}}},{key:"canvasPointerleave",value:function(r){_assertClassBrand(_InkEditor_brand,this,_endDrawing).call(this,r),this.setInBackground()}},{key:"setInForeground",value:function(){this.div.style.zIndex=this._zIndexForeground}},{key:"render",value:function(){if(this.div)return this.div;var r,o;this.width&&(r=this.x,o=this.y),_get(_getPrototypeOf(n.prototype),"render",this).call(this);var u=_slicedToArray(_assertClassBrand(_InkEditor_brand,this,_getInitialBBox).call(this),4),s=u[0],w=u[1],g=u[2],v=u[3];if(this.setAt(s,w,0,0),this.setDims(g,v),_assertClassBrand(_InkEditor_brand,this,_createCanvas).call(this),this.width){var y=_slicedToArray(this.parent.viewportBaseDimensions,2),m=y[0],d=y[1];this.setAt(r*m,o*d,this.width*m,this.height*d),this._isCanvasInitialized=!0,_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this),this.setDims(this.width*m,this.height*d),_assertClassBrand(_InkEditor_brand,this,_redraw).call(this),_assertClassBrand(_InkEditor_brand,this,_setMinDims).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _assertClassBrand(_InkEditor_brand,this,_createObserver).call(this),this.div}},{key:"setDimensions",value:function(r,o){var u=Math.round(r),s=Math.round(o);if(this._realWidth!==u||this._realHeight!==s){this._realWidth=u,this._realHeight=s,this.canvas.style.visibility="hidden",this._aspectRatio&&Math.abs(this._aspectRatio-r/o)>.01&&(o=Math.ceil(r/this._aspectRatio),this.setDims(r,o));var w=_slicedToArray(this.parent.viewportBaseDimensions,2),g=w[0],v=w[1];this.width=r/g,this.height=o/v,this._disableEditing&&_assertClassBrand(_InkEditor_brand,this,_setScaleFactor).call(this,r,o),_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this),_assertClassBrand(_InkEditor_brand,this,_redraw).call(this),this.canvas.style.visibility="visible"}}},{key:"serialize",value:function(){if(this.isEmpty())return null;var r=this.getRect(0,0),o=this.rotation%180==0?r[3]-r[1]:r[2]-r[0],u=PDFAnnotation._defaultLineColor;return{annotationType:AnnotationEditorType.INK,color:u,thickness:this.thickness,opacity:this.opacity,paths:_assertClassBrand(_InkEditor_brand,this,_serializePaths).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,o),pageIndex:this.parent.pageIndex,rect:r,rotation:this.rotation}}}],[{key:"updateDefaultParams",value:function(r,o){switch(r){case AnnotationEditorParamsType.INK_THICKNESS:n._defaultThickness=o;break;case AnnotationEditorParamsType.INK_COLOR:n._defaultColor=o;break;case AnnotationEditorParamsType.INK_OPACITY:n._defaultOpacity=o/100}}},{key:"defaultPropertiesToUpdate",get:function(){return[[AnnotationEditorParamsType.INK_THICKNESS,n._defaultThickness],[AnnotationEditorParamsType.INK_COLOR,n._defaultColor||PDFAnnotation._defaultLineColor],[AnnotationEditorParamsType.INK_OPACITY,Math.round(100*n._defaultOpacity)]]}},{key:"deserialize",value:function(r,o){var u=_get(_getPrototypeOf(n),"deserialize",this).call(this,r,o);u.thickness=r.thickness,u.color=Util.makeHexColor.apply(Util,_toConsumableArray$1(r.color)),u.opacity=r.opacity;var s=_slicedToArray(o.pageDimensions,2),w=s[0],g=s[1],v=u.width*w,y=u.height*g,m=o.scaleFactor,d=r.thickness/2;u._aspectRatio=v/y,u._disableEditing=!0,u._realWidth=Math.round(v),u._realHeight=Math.round(y);var f,x=_createForOfIteratorHelper(r.paths);try{for(x.s();!(f=x.n()).done;){var k=f.value.bezier,P=[];u.paths.push(P);for(var S=m*(k[0]-d),E=m*(y-k[1]-d),M=2,T=k.length;M<T;M+=6){var D=m*(k[M]-d),I=m*(y-k[M+1]-d),N=m*(k[M+2]-d),O=m*(y-k[M+3]-d),F=m*(k[M+4]-d),U=m*(y-k[M+5]-d);P.push([[S,E],[D,I],[N,O],[F,U]]),S=F,E=U}var Y=_assertClassBrand(n,this,_buildPath2D).call(this,P);u.bezierPath2D.push(Y)}}catch(q){x.e(q)}finally{x.f()}var Q=_assertClassBrand(_InkEditor_brand,u,_getBbox).call(u);return u._baseWidth=Math.max(RESIZER_SIZE,Q[2]-Q[0]),u._baseHeight=Math.max(RESIZER_SIZE,Q[3]-Q[1]),_assertClassBrand(_InkEditor_brand,u,_setScaleFactor).call(u,v,y),u}}])}();function _getInitialBBox(){var e=this.parent.viewport,n=e.width,r=e.height;switch(e.rotation){case 90:return[0,n,n,r];case 180:return[n,r,n,r];case 270:return[r,0,n,r];default:return[0,0,n,r]}}function _setStroke(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle="".concat(this.color).concat(opacityToHex(this.opacity))}function _startDrawing(e,n){var r,o=this;this.isEditing=!0,this._isCanvasInitialized||(this._isCanvasInitialized=!0,_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this),this.thickness||(this.thickness=_InkEditor._defaultThickness),this.color||(this.color=_InkEditor._defaultColor||PDFAnnotation._defaultLineColor),(r=this.opacity)!==null&&r!==void 0||(this.opacity=_InkEditor._defaultOpacity)),this.currentPath[0]=[e,n],this._lastPoint=null,_assertClassBrand(_InkEditor_brand,this,_setStroke).call(this),this._requestFrameCallback=function(){o._requestFrameCallback&&(o._lastPoint&&(o.drawLine(o.currentPath[0],o._lastPoint),o._lastPoint=null),window.requestAnimationFrame(o._requestFrameCallback))},window.requestAnimationFrame(this._requestFrameCallback)}function _draw(e,n){var r=_slicedToArray(this.currentPath.at(-1),2),o=r[0],u=r[1];e===o&&n===u||(this.currentPath[1]=[e,n],this._lastPoint=[e,n])}function _stopDrawing(e,n){this.ctx.closePath(),this._requestFrameCallback=null,e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height);var r=_slicedToArray(this.currentPath.at(-1),2),o=r[0],u=r[1];e===o&&n===u||(this.currentPath[1]=[e,n]),this.currentPath.length!==0&&(this.paths=_toConsumableArray$1(this.currentPath),this.rebuild())}function _redraw(){this.isEmpty()?_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this):(_assertClassBrand(_InkEditor_brand,this,_setStroke).call(this),this.canvas,this.ctx.setTransform(1,0,0,1,0,0),_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this),this.drawLine(this.currentPath[0],this.currentPath[1]))}function _endDrawing(e){_assertClassBrand(_InkEditor_brand,this,_stopDrawing).call(this,e.offsetX,e.offsetY),this.canvas.removeEventListener("pointerleave",this._boundCanvasPointerleave),this.canvas.removeEventListener("pointermove",this._boundCanvasPointermove),this.parent.addToAnnotationStorage(this)}function _createCanvas(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d"),this.textCtx=this.canvas.getContext("2d")}function _createObserver(){var e=this,n=null;this._observer=new ResizeObserver(function(r){var o=r[0].contentRect;o.width&&o.height&&(n!==null&&clearTimeout(n),n=setTimeout(function(){e.fixDims(),n=null},TIME_TO_WAIT_BEFORE_FIXING_DIMS),e.setDimensions(o.width,o.height))}),this._observer.observe(this.div)}function _setCanvasDims(){if(this._isCanvasInitialized){var e=_slicedToArray(this.parent.viewportBaseDimensions,2),n=e[0],r=e[1];this.canvas.width=Math.ceil(this.width*n),this.canvas.height=Math.ceil(this.height*r),_assertClassBrand(_InkEditor_brand,this,_updateTransform).call(this)}}function _setScaleFactor(e,n){var r=_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this),o=(e-r)/this._baseWidth,u=(n-r)/this._baseHeight;this.scaleFactor=Math.min(o,u)}function _updateTransform(){var e=_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}function _buildPath2D(e){for(var n=new Path2D,r=0,o=e.length;r<o;r++){var u=_slicedToArray(e[r],4),s=u[0],w=u[1],g=u[2],v=u[3];r===0&&n.moveTo.apply(n,_toConsumableArray$1(s)),n.bezierCurveTo(w[0],w[1],g[0],g[1],v[0],v[1])}return n}function _serializePaths(e,n,r,o){var u,s,w,g=[],v=this.thickness/2,y=_createForOfIteratorHelper(this.paths);try{for(y.s();!(w=y.n()).done;){var m=w.value;u=[],s=[];for(var d=0,f=m.length;d<f;d++){var x=_slicedToArray(m[d],4),k=x[0],P=x[1],S=x[2],E=x[3],M=e*(k[0]+n)+v,T=o-e*(k[1]+r)-v,D=e*(P[0]+n)+v,I=o-e*(P[1]+r)-v,N=e*(S[0]+n)+v,O=o-e*(S[1]+r)-v,F=e*(E[0]+n)+v,U=o-e*(E[1]+r)-v;d===0&&(u.push(M,T),s.push(M,T)),u.push(D,I,N,O,F,U),_assertClassBrand(_InkEditor_brand,this,_extractPointsOnBezier).call(this,M,T,D,I,N,O,F,U,4,s)}g.push({bezier:u,points:s})}}catch(Y){y.e(Y)}finally{y.f()}return g}function _extractPointsOnBezier(e,n,r,o,u,s,w,g,v,y){if(_assertClassBrand(_InkEditor_brand,this,_isAlmostFlat).call(this,e,n,r,o,u,s,w,g))y.push(w,g);else{for(var m=1;m<v-1;m++){var d=m/v,f=1-d,x=d*e+f*r,k=d*n+f*o,P=d*r+f*u,S=d*o+f*s;x=d*(x=d*x+f*P)+f*(P=d*P+f*(d*u+f*w)),k=d*(k=d*k+f*S)+f*(S=d*S+f*(d*s+f*g)),y.push(x,k)}y.push(w,g)}}function _isAlmostFlat(e,n,r,o,u,s,w,g){var v=Math.pow(3*r-2*e-w,2),y=Math.pow(3*o-2*n-g,2),m=Math.pow(3*u-e-2*w,2),d=Math.pow(3*s-n-2*g,2);return Math.max(v,m)+Math.max(y,d)<=10}function _getBbox(){var e,n=1/0,r=-1/0,o=1/0,u=-1/0,s=_createForOfIteratorHelper([].concat(_toConsumableArray$1(this.currentPath),_toConsumableArray$1(this.arrowPoints)));try{for(s.s();!(e=s.n()).done;){var w=_slicedToArray(e.value,2),g=w[0],v=w[1];n=Math.min(g,n),o=Math.min(v,o),r=Math.max(g,r),u=Math.max(v,u)}}catch(y){s.e(y)}finally{s.f()}return[n,o,r,u]}function _getPadding(){return this._disableEditing?Math.ceil(this.thickness*this.parent.scaleFactor):0}function _fitToContent(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.isEmpty())if(this._disableEditing){var n=_assertClassBrand(_InkEditor_brand,this,_getBbox).call(this),r=_assertClassBrand(_InkEditor_brand,this,_getPadding).call(this);this._baseWidth=Math.max(RESIZER_SIZE,n[2]-n[0]),this._baseHeight=Math.max(RESIZER_SIZE,n[3]-n[1]);var o=Math.ceil(r+this._baseWidth*this.scaleFactor),u=Math.ceil(r+this._baseHeight*this.scaleFactor),s=_slicedToArray(this.parent.viewportBaseDimensions,2),w=s[0],g=s[1];this.width=o/w,this.height=u/g,this._aspectRatio=o/u,_assertClassBrand(_InkEditor_brand,this,_setMinDims).call(this);var v=this.translationX,y=this.translationY;this.translationX=-n[0],this.translationY=-n[1],_assertClassBrand(_InkEditor_brand,this,_setCanvasDims).call(this),_assertClassBrand(_InkEditor_brand,this,_redraw).call(this),this._realWidth=o,this._realHeight=u,this.setDims(o,u);var m=e?r/this.scaleFactor/2:0;this.translate(v-this.translationX-m,y-this.translationY-m)}else _assertClassBrand(_InkEditor_brand,this,_redraw).call(this)}function _setMinDims(){var e=this.div.style;this._aspectRatio>=1?(e.minHeight="".concat(RESIZER_SIZE,"px"),e.minWidth="".concat(Math.round(this._aspectRatio*RESIZER_SIZE),"px")):(e.minWidth="".concat(RESIZER_SIZE,"px"),e.minHeight="".concat(Math.round(RESIZER_SIZE/this._aspectRatio),"px"))}_InkEditor=InkEditor,_defineProperty$1(InkEditor,"_defaultColor",null),_defineProperty$1(InkEditor,"_defaultOpacity",1),_defineProperty$1(InkEditor,"_defaultThickness",1),_defineProperty$1(InkEditor,"_l10nPromise",void 0),_defineProperty$1(InkEditor,"_type","ink"),_defineProperty$1(InkEditor,"_zIndex",1);var PDFAnnotationLayer=function(){return _createClass(function e(n){_classCallCheck(this,e),this._cancelled=!1,this._allowClick=!1,this._boundPointerup=this.pointerup.bind(this),this._boundPointerdown=this.pointerdown.bind(this),this._editors=new Map,this._hadPointerDown=!1,this._isCleaningUp=!1,this._uiManager=n.uiManager,this.pageDiv=n.pageDiv,this.div=null,this.scale=n.scale,this._accessibilityManager=n.accessibilityManager,n.uiManager.registerEditorTypes([PDFAnnotationSticky,InkEditor]),this.annotationStorage=n.annotationStorage||null,this.pageIndex=n.pageIndex},[{key:"updateToolbar",value:function(e){this._uiManager.updateToolbar(e)}},{key:"updateMode",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._uiManager.getMode();this._cleanup(),e===AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this._uiManager.unselectAll(),this.div.classList.toggle("freeTextEditing",e===AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",e===AnnotationEditorType.INK)}},{key:"moveEditorInDOM",value:function(e){var n;(n=this._accessibilityManager)===null||n===void 0||n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}},{key:"addInkEditorIfNeeded",value:function(e){if(e||this._uiManager.getMode()===AnnotationEditorType.INK){if(!e){var n,r=_createForOfIteratorHelper(this._editors.values());try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.isEmpty())return void o.setInBackground()}}catch(u){r.e(u)}finally{r.f()}}this._createAndAddNewEditor({offsetX:0,offsetY:0}).setInBackground()}}},{key:"setEditingState",value:function(e){this._uiManager.setEditingState(e)}},{key:"addCommands",value:function(e){this._uiManager.addCommands(e)}},{key:"enable",value:function(){this.div.style.pointerEvents="auto";var e,n=_createForOfIteratorHelper(this._editors.values());try{for(n.s();!(e=n.n()).done;)e.value.enableEditing()}catch(r){n.e(r)}finally{n.f()}}},{key:"disable",value:function(){this.div.style.pointerEvents="none";var e,n=_createForOfIteratorHelper(this._editors.values());try{for(n.s();!(e=n.n()).done;)e.value.disableEditing()}catch(r){n.e(r)}finally{n.f()}}},{key:"setActiveEditor",value:function(e){this._uiManager.getActive()!==e&&this._uiManager.setActiveEditor(e)}},{key:"enableClick",value:function(){this.div.addEventListener("pointerdown",this._boundPointerdown),this.div.addEventListener("pointerup",this._boundPointerup)}},{key:"disableClick",value:function(){this.div.removeEventListener("pointerdown",this._boundPointerdown),this.div.removeEventListener("pointerup",this._boundPointerup)}},{key:"attach",value:function(e){this._editors.set(e.id,e)}},{key:"detach",value:function(e){this._editors.delete(e.id)}},{key:"remove",value:function(e){var n=this;this._uiManager.removeEditor(e),this.detach(e),this.annotationStorage.remove(e.id),e.div.style.display="none",setTimeout(function(){e.div.style.display="",e.div.remove(),e.isAttachedToDOM=!1,document.activeElement===document.body&&n._uiManager.focusMainContainer()},0),this._isCleaningUp||this.addInkEditorIfNeeded(!1)}},{key:"_changeParent",value:function(e){var n;e.parent!==this&&(this.attach(e),e.pageIndex=this.pageIndex,(n=e.parent)===null||n===void 0||n.detach(e),e.parent=this,e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}},{key:"add",value:function(e){if(this._changeParent(e),this._uiManager.addEditor(e),this.attach(e),!e.isAttachedToDOM){var n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.onceAdded(),this.addToAnnotationStorage(e)}},{key:"addToAnnotationStorage",value:function(e){e.isEmpty()||this.annotationStorage.has(e.id)||this.annotationStorage.setValue(e.id,e)}},{key:"updateAnnotationStorage",value:function(e){}},{key:"addOrRebuild",value:function(e){e.needsToBeRebuilt()?e.rebuild():this.add(e)}},{key:"addUndoableEditor",value:function(e){this.addOrRebuild(e)}},{key:"getNextId",value:function(){return this._uiManager.getId()}},{key:"_createNewEditor",value:function(e){switch(this._uiManager.getMode()){case AnnotationEditorType.FREETEXT:return new PDFAnnotationSticky(e);case AnnotationEditorType.INK:return new InkEditor(e)}return null}},{key:"deserialize",value:function(e){switch(e.annotationType){case AnnotationEditorType.FREETEXT:return PDFAnnotationSticky.deserialize(e,this);case AnnotationEditorType.INK:return InkEditor.deserialize(e,this)}return null}},{key:"_createAndAddNewEditor",value:function(e){var n=this.getNextId(),r=this._createNewEditor({parent:this,id:n,x:e.offsetX,y:e.offsetY});return r&&this.add(r),r}},{key:"setSelected",value:function(e){this._uiManager.setSelected(e)}},{key:"toggleSelected",value:function(e){this._uiManager.toggleSelected(e)}},{key:"isSelected",value:function(e){return this._uiManager.isSelected(e)}},{key:"unselect",value:function(e){this._uiManager.unselect(e)}},{key:"pointerup",value:function(e){var n=KeyboardManager.platform.isMac;e.button!==0||e.ctrlKey&&n||e.target===this.div&&this._hadPointerDown&&(this._hadPointerDown=!1,this._allowClick?this._createAndAddNewEditor(e):this._allowClick=!0)}},{key:"pointerdown",value:function(e){var n=KeyboardManager.platform.isMac;if(!(e.button!==0||e.ctrlKey&&n)&&e.target===this.div){this._hadPointerDown=!0;var r=this._uiManager.getActive();this._allowClick=!r||r.isEmpty()}}},{key:"drop",value:function(e){var n=e.dataTransfer.getData("text/plain"),r=this._uiManager.getEditor(n);if(r){e.preventDefault(),e.dataTransfer.dropEffect="move",this._changeParent(r);var o=this.div.getBoundingClientRect(),u=e.clientX-o.x,s=e.clientY-o.y;r.translate(u-r.startX,s-r.startY),r.div.focus()}}},{key:"dragover",value:function(e){e.preventDefault()}},{key:"_cleanup",value:function(){this._isCleaningUp=!0;var e,n=_createForOfIteratorHelper(this._editors.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;r.isEmpty()&&r.remove()}}catch(o){n.e(o)}finally{n.f()}this._isCleaningUp=!1}},{key:"_removeAll",value:function(){this._isCleaningUp=!0;var e,n=_createForOfIteratorHelper(this._editors.values());try{for(n.s();!(e=n.n()).done;)e.value.remove()}catch(r){n.e(r)}finally{n.f()}this._isCleaningUp=!1}},{key:"render",value:function(e){if(!this._cancelled){var n=e.clone({dontFlip:!0});if(this.div)return this.update({viewport:n}),void this.show();this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.append(this.div)}}},{key:"cancel",value:function(){this._cancelled=!0,this.destroy()}},{key:"hide",value:function(){this.div&&(this.div.hidden=!0)}},{key:"show",value:function(){this.div&&(this.div.hidden=!1)}},{key:"destroy",value:function(){var e;if(this.div){this.pageDiv=null,((e=this._uiManager.getActive())===null||e===void 0?void 0:e.parent)===this&&this._uiManager.setActiveEditor(null);var n,r=_createForOfIteratorHelper(this._editors.values());try{for(r.s();!(n=r.n()).done;){var o=n.value;o.isAttachedToDOM=!1,o.div.remove(),o.parent=null}}catch(u){r.e(u)}finally{r.f()}this.div.remove(),this.div=null,this._editors.clear(),this._uiManager.removeLayer(this)}}},{key:"removeAllAnnotations",value:function(){var e;((e=this._uiManager.getActive())===null||e===void 0?void 0:e.parent)===this&&this._uiManager.setActiveEditor(null);var n,r=_createForOfIteratorHelper(this._editors.values());try{for(r.s();!(n=r.n()).done;){var o=n.value;this.remove(o)}}catch(u){r.e(u)}finally{r.f()}}},{key:"update",value:function(e){this._uiManager.commitOrRemove(),this.viewport=e.viewport,this.setDimensions(),this.updateMode()}},{key:"scaleFactor",get:function(){return this.viewport.scale}},{key:"pageDimensions",get:function(){var e=_slicedToArray(this.viewport.viewBox,4),n=e[0],r=e[1];return[e[2]-n,e[3]-r]}},{key:"viewportBaseDimensions",get:function(){var e=this.viewport,n=e.width,r=e.height;return e.rotation%180==0?[n,r]:[r,n]}},{key:"setDimensions",value:function(){var e=this.viewport,n=e.width,r=e.height,o=e.rotation%180!=0,u=Math.floor(n)+"px",s=Math.floor(r)+"px";this.div.style.width=o?s:u,this.div.style.height=o?u:s}}])}(),BaseAnnotation=function(){return _createClass(function e(n){var r=n.annotation,o=n.layer;_classCallCheck(this,e),r.name||(r.name=v4()),this.layer=o,this.annotation=r,this.scrollTop=0,this.scrollLeft=0,this.toggleAttrbutePanel=this.toggleAttrbutePanel.bind(this),this.deleteSvgStr=`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path id="ic" fill-rule="evenodd" clip-rule="evenodd" d="M13 2.75V1.25H7V2.75H13ZM19 5.75V4.25H16.75H3.25H1V5.75H3.25V18.75H16.75V5.75H19ZM4.75 17.25V5.75H15.25V17.25H4.75ZM8.75 8.5V14.5H7.25V8.5H8.75ZM12.75 8.5V14.5H11.25V8.5H12.75Z" fill="currentColor"/>
    </svg>`,this.replySvgStr=`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M17.8252 2.743H2.17484V17.4101C2.17484 17.4943 2.27256 17.5408 2.33791 17.4877L6.16578 14.3765H17.8252V2.743Z" stroke="currentColor" stroke-width="1.5"/>
        <path d="M5.00003 6.77402H14" stroke="currentColor" stroke-width="1.5"/>
        <path d="M5.00003 10.2973H11" stroke="currentColor" stroke-width="1.5"/>
      </svg>`,this.attrbuteSvgStr=`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M8.54546 4.375L16.6666 4.375V5.625L8.54546 5.625C8.29821 6.2358 7.69939 6.66667 6.99994 6.66667C6.30049 6.66667 5.70167 6.2358 5.45442 5.625L3.33325 5.625L3.33325 4.375L5.45442 4.375C5.70167 3.7642 6.30049 3.33333 6.99994 3.33333C7.69939 3.33333 8.29821 3.7642 8.54546 4.375ZM3.33325 10.625L11.2877 10.625C11.5349 11.2358 12.1337 11.6667 12.8332 11.6667C13.5326 11.6667 14.1314 11.2358 14.3787 10.625H16.6666V9.375H14.3787C14.1314 8.7642 13.5326 8.33333 12.8332 8.33333C12.1337 8.33333 11.5349 8.7642 11.2877 9.375L3.33325 9.375L3.33325 10.625ZM5.45432 15.625H3.33325L3.33325 14.375H5.45432C5.70156 13.7642 6.30038 13.3333 6.99984 13.3333C7.69929 13.3333 8.29811 13.7642 8.54535 14.375L16.6666 14.375V15.625L8.54535 15.625C8.29811 16.2358 7.69929 16.6667 6.99984 16.6667C6.30038 16.6667 5.70156 16.2358 5.45432 15.625Z" fill="currentColor"/>
      </svg>`},[{key:"toggleAttrbutePanel",value:function(){this.layer.eventBus.dispatch("toggleAnnotAttrbutePanel")}},{key:"getMouseLocation",value:function(e){var n=this.layer.documentViewer.getScrollViewElement(),r=parseFloat(n.style.marginLeft)||0,o=n.scrollLeft-r||0,u=n.scrollTop||0;return{x:e.pageX+o,y:e.pageY+u}}}])}();function getClickPoint(e){var n=0,r=0;if(e.touches&&e.touches.length){var o=e.touches[0];n=o.pageX,r=o.pageY}else if(e.changedTouches){var u=e.changedTouches[0];n=u.pageX,r=u.pageY}else n=e.pageX,r=e.pageY;return{pageX:n,pageY:r}}function getAbsoluteCoordinate(e,n){var r=getClickPoint(n),o=r.pageX,u=r.pageY,s=e.getBoundingClientRect(),w=window.pageXOffset||window.scrollX||0,g=window.pageYOffset||window.scrollY||0;return{x:o-s.left-w,y:u-s.top-g,width:s.width-w,height:s.height-g}}function createSvg(e,n,r){var o=document.createElementNS("http://www.w3.org/2000/svg",e);if(n)for(var u in n)o.setAttribute(u,n[u]);if(r)for(var s in r)o.style[s]=r[s];return o}function getActualPoint(e,n){return{x:e.x*n,y:e.y*n}}function getInitialPoint(e,n){return{x:e.x/n,y:e.y/n}}var TO_FIXED_PRECISION=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function med(e,n){return[(e[0]+n[0])/2,(e[1]+n[1])/2]}function getSvgPathFromStroke(e){if(!e.length)return"";var n=e.length-1;return e.reduce(function(r,o,u,s){return u===n?r.push(o,med(o,s[0]),"L",s[0],"Z"):r.push(o,med(o,s[u+1])),r},["M",e[0],"Q"]).join(" ").replace(TO_FIXED_PRECISION,"$1")}var getHtmlToText=function(e){return formatText(replaceToBreak(getHtml(e)))},formatText=function(e){return e.replace(/\<br\/\>/gi,`
`).replace(/\<br\>/gi,`
`).replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/<\/?[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">")},getHtml=function(e){return e.innerHTML},replaceToBreak=function(e){return e=(e=(e=String(e).replace(/<\/div>/gi,"")).replace(/<div>(<br>)?(<br\/>)?/gi,`
`)).replace(/<br>|<br\/>/gi,`
`)},keepLastIndex=function(e){if(window.getSelection)(n=window.getSelection()).selectAllChildren(e),n.collapseToEnd();else if(document.selection){var n;(n=document.selection.createRange()).moveToElementText(e),n.collapse(!1),n.select()}},createElement=function(e,n,r){var o=document.createElement(e);if(r)for(var u in r)o.setAttribute(u,r[u]);if(n)for(var s in n)o.style[s]=n[s];return o},pastePlainText=function(e){e.preventDefault();var n=(e.originalEvent||e).clipboardData.getData("text");if(n){var r=window.getSelection();r.rangeCount&&(r.deleteFromDocument(),r.getRangeAt(0).insertNode(document.createTextNode(n)),r.collapseToEnd())}},_ArrowHelper_brand=new WeakSet,ArrowHelper=function(){return _createClass(function e(n,r){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_ArrowHelper_brand),this.start=n,this.end=r},[{key:"getArrow",value:function(e,n,r){var o=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],u=this.getArrowPoints(e,n,r,o);if(u){var s=_assertClassBrand(_ArrowHelper_brand,this,_isClosedType).call(this,e),w=document.createElementNS("http://www.w3.org/2000/svg",s?"polygon":"polyline"),g=u.map(function(v){return"".concat(v.x,",").concat(v.y)}).join(" ");return w.setAttribute("points",g),w}}},{key:"getArrowPoints",value:function(e,n,r){var o=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],u=o?this.end:this.start,s=o?-1:1,w=_assertClassBrand(_ArrowHelper_brand,this,_getNormalize).call(this);switch(e){case"closedarrow":case"openarrow":return _assertClassBrand(_ArrowHelper_brand,this,_getTriangleArrowPoints).call(this,n,r,s,u,!1);case"rclosedarrow":case"ropenarrow":return _assertClassBrand(_ArrowHelper_brand,this,_getTriangleArrowPoints).call(this,n,r,s,u,!0);case"square":return _assertClassBrand(_ArrowHelper_brand,this,_getSquarePoints).call(this,r,s,u,w);case"circle":return _assertClassBrand(_ArrowHelper_brand,this,_getCirclePoints).call(this,r,u,w,s);case"diamond":return _assertClassBrand(_ArrowHelper_brand,this,_getDiamondPoints).call(this,r,s,u,w);case"butt":return _assertClassBrand(_ArrowHelper_brand,this,_getButtPoints).call(this,r,u,w);case"slash":return _assertClassBrand(_ArrowHelper_brand,this,_getSlashPoints).call(this,r,u,w,s);default:return}}}])}();function _getTriangleArrowPoints(e,n,r,o,u){var s=_assertClassBrand(_ArrowHelper_brand,this,_getNormalize).call(this);if(s&&!(n<=0)){var w={x:s.x*n*(u?-1:1),y:s.y*n*(u?-1:1)},g=function(d,f){return{x:d.x*Math.cos(f)-d.y*Math.sin(f),y:d.x*Math.sin(f)+d.y*Math.cos(f)}},v=e*Math.PI/180,y=g(w,v),m=g(w,-v);return[{x:o.x+r*y.x,y:o.y+r*y.y},o,{x:o.x+r*m.x,y:o.y+r*m.y}]}}function _getSquarePoints(e,n,r,o){var u=-o.y,s=o.x,w=e/2;return[{x:r.x+(o.x*w+u*w)*n,y:r.y+(o.y*w+s*w)*n},{x:r.x+(-o.x*w+u*w)*n,y:r.y+(-o.y*w+s*w)*n},{x:r.x+(-o.x*w-u*w)*n,y:r.y+(-o.y*w-s*w)*n},{x:r.x+(o.x*w-u*w)*n,y:r.y+(o.y*w-s*w)*n}]}function _getCirclePoints(e,n,r,o){for(var u=e/2,s=n.x+o*r.x*u,w=n.y+o*r.y*u,g=[],v=0;v<12;v++){var y=2*v*Math.PI/12,m=Math.cos(y)*u,d=Math.sin(y)*u,f=m*r.x-d*r.y,x=m*r.y+d*r.x;g.push({x:s+f,y:w+x})}return g}function _getDiamondPoints(e,n,r,o){var u=-o.y,s=o.x,w=e*Math.sqrt(2)/2;return[{x:r.x+o.x*w*n,y:r.y+o.y*w*n},{x:r.x+u*w*n,y:r.y+s*w*n},{x:r.x-o.x*w*n,y:r.y-o.y*w*n},{x:r.x-u*w*n,y:r.y-s*w*n}]}function _getButtPoints(e,n,r){var o=-r.y,u=r.x,s=e/2;return[{x:n.x+o*s,y:n.y+u*s},{x:n.x-o*s,y:n.y-u*s}]}function _getSlashPoints(e,n,r,o){var u=-45*o*Math.PI/180,s=r.x*Math.cos(u)-r.y*Math.sin(u),w=r.x*Math.sin(u)+r.y*Math.cos(u),g=e/2;return[{x:n.x-s*g,y:n.y-w*g},{x:n.x+s*g,y:n.y+w*g}]}function _isClosedType(e){return["closedarrow","rclosedarrow","square","circle","diamond"].includes(e)}function _getNormalize(){var e=_assertClassBrand(_ArrowHelper_brand,this,_getVector).call(this),n=_assertClassBrand(_ArrowHelper_brand,this,_getLineLength).call(this);return n>0?{x:e.x/n,y:e.y/n}:void 0}function _getVector(){return{x:this.end.x-this.start.x,y:this.end.y-this.start.y}}function _getLineLength(){var e=_assertClassBrand(_ArrowHelper_brand,this,_getVector).call(this);return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}var Line=function(e){function n(m){var d,f=m.annotation,x=m.layer,k=m.show,P=k!==void 0&&k,S=m.enableReply,E=S===void 0||S;return _classCallCheck(this,n),(d=_callSuper(this,n,[{annotation:f,layer:x}])).enableReply=E,d.hidden=!0,d.initial=!1,d.start=null,d.end=null,d.newStart=null,d.newEnd=null,d.svgElement=null,d.startCircle=null,d.middleCircle=null,d.endCircle=null,d.show=P,d.ratio=window.devicePixelRatio||1,d.decimalPlaces=0,d.isPopupShow=!1,d.onMousedown=d.handleMouseDown.bind(d),d.onMouseup=d.handleMouseUp.bind(d),d.onMousemove=d.handleMouseMove.bind(d),d.onDelete=d.handleDelete.bind(d),d.onOpenReply=d.openReply.bind(d),d.handlePropertyPanel=d.handlePropertyPanel.bind(d),d.onHandlePopup=d.handlePopup.bind(d),d.onKeydown=d.handleKeyDown.bind(d),d.annotation.measure?d.renderMeasure():d.render(),d}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){var m=this,d=this.annotation,f=this.layer.viewport.scale,x=this.getActualPoint(f),k=x.start,P=x.end;this.start=k,this.end=P;var S=(this.annotation.borderWidth||2)*f,E=this.calculate(k,P),M=Math.max(3*S,12*f);d.borderColor||(d.borderColor=d.color||"#FF0000");var T={left:E.left-M,top:E.top-M,width:E.width+2*M,height:E.height+2*M};if(T.width||T.height){this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","".concat(T.left," ").concat(T.top," ").concat(T.width," ").concat(T.height));var D=this.getDashString(),I=createSvg("line",{mainLine:"",x1:this.start.x,y1:this.start.y,x2:this.end.x,y2:this.end.y,stroke:d.borderColor,"stroke-width":S,"stroke-opacity":d.opacity||1,"stroke-dasharray":D});if(this.selectionlineEle=createSvg("line",{x1:this.start.x,y1:this.start.y,x2:this.end.x,y2:this.end.y,stroke:d.borderColor,"stroke-width":S+8*f,"stroke-opacity":0}),this.lineEle=I,this.svgElement.append(I),this.svgElement.append(this.selectionlineEle),this.annotation.head||this.annotation.tail){var N=new ArrowHelper(this.start,this.end),O=[],F=["closedarrow","square","circle","diamond","rclosedarrow"];if(this.annotation.head&&this.annotation.head!=="none"){var U=N.getArrow(this.annotation.head,30,M,!1);U&&(U.setAttribute("head",""),U.setAttribute("fill",F.includes(this.annotation.head)?d.borderColor:"none"),O.push(U))}if(this.annotation.tail&&this.annotation.tail!=="none"){var Y=N.getArrow(this.annotation.tail,30,M);Y&&(Y.setAttribute("tail",""),Y.setAttribute("fill",F.includes(this.annotation.tail)?d.borderColor:"none"),O.push(Y))}O.forEach(function(ne){ne&&(ne.setAttribute("stroke",d.borderColor),ne.setAttribute("stroke-width",S),ne.setAttribute("stroke-opacity",d.opacity||1),ne.setAttribute("stroke-dasharray",D),m.svgElement.append(ne))})}this.annotationContainer=document.createElement("div"),this.annotationContainer.append(this.svgElement),this.annotationContainer.id=d.name,this.annotationContainer.className="annotation",this.annotationContainer.style.top=T.top+"px",this.annotationContainer.style.left=T.left+"px",this.annotationContainer.style.width=T.width+"px",this.annotationContainer.style.height=T.height+"px",this.svgElement.addEventListener("mousedown",this.handleClick.bind(this)),this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:T.left+T.width-114+"px",top:T.top+T.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,this.replyButton=createElement("div",{width:"30px",height:"30px",borderRadius:"2px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr;var Q=document.createElementNS("http://www.w3.org/2000/svg","svg");Q.setAttribute("data-id","move"),Q.setAttribute("height",T.height),Q.setAttribute("viewBox","".concat(T.left," ").concat(T.top," ").concat(T.width+2*MARGIN_DISTANCE," ").concat(T.height+2*MARGIN_DISTANCE)),Q.style.position="absolute",Q.style.zIndex=1,Q.style.left="".concat(T.left-MARGIN_DISTANCE,"px"),Q.style.top="".concat(T.top-MARGIN_DISTANCE,"px"),Q.style.width="".concat(T.width+2*MARGIN_DISTANCE,"px"),Q.style.height="".concat(T.height+2*MARGIN_DISTANCE,"px"),this.outerLine=Q,this.startCircle=createSvg("circle",{class:"start","data-id":"start",fill:"#1460F3",cx:k.x+MARGIN_DISTANCE,cy:k.y+MARGIN_DISTANCE,r:6}),this.endCircle=createSvg("circle",{class:"end","data-id":"end",fill:"#1460F3",cx:P.x+MARGIN_DISTANCE,cy:P.y+MARGIN_DISTANCE,r:6}),this.moveLine=createSvg("line",{class:"move","data-id":"move",x1:k.x+MARGIN_DISTANCE,y1:k.y+MARGIN_DISTANCE,x2:P.x+MARGIN_DISTANCE,y2:P.y+MARGIN_DISTANCE,fill:"transparent",stroke:"transparent","stroke-width":5}),this.outerLine.append(this.moveLine),this.outerLine.append(this.startCircle),this.outerLine.append(this.endCircle),this.outerLineContainer.append(this.outerLine);var q=this.layer.documentViewer.isAnnotationPopup;q&&this.outerLineContainer.append(this.popupElement),q&&this.enableReply&&this.popupElement.append(this.replyButton),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1)}}},{key:"renderMeasure",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function m(){var d,f,x,k,P,S,E,M,T,D,I,N,O,F,U,Y,Q,q,ne,J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke,Ce,Pe,Me,Le,Te,ye,_e,we,Se=this;return _regeneratorRuntime().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(d=this.annotation,f=this.layer.viewport.scale,x=this.getActualPoint(f),k=x.start,P=x.end,this.start=k,this.end=P,d.precision&&(d.precision>1&&(d.precision=Math.pow(10,-Math.floor(Math.log10(d.precision)))),this.decimalPlaces=((S=Math.abs(d.precision).toString().split(".")[1])===null||S===void 0?void 0:S.length)||0),d.borderColor||(d.borderColor=d.color||"#FF0000"),d.factor){$e.next=11;break}return $e.next=10,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",d.rulerPtr);case 10:d.factor=$e.sent;case 11:if(d.X||(E=this.getInitialPoint(),d.X=(Math.abs(E.end.x-E.start.x)*d.factor).toFixed(this.decimalPlaces)),d.Y||(M=this.getInitialPoint(),d.Y=(Math.abs(M.end.y-M.start.y)*d.factor).toFixed(this.decimalPlaces)),d.angle||(T=Math.atan2(k.y-P.y,P.x-k.x)/Math.PI*180,d.angle=Math.round(T)),d.fontStyle||(d.fontStyle="regular"),d.length&&(d.length=this.formatValue(d.length)),d.contents||this.getResult(),D=d.leadLength*f,I=d.leadExtension*f,N=P.x-k.x,O=P.y-k.y,F=Math.sqrt(N*N+O*O),Q=-(Y=O/F),q=U=N/F,ne={x:k.x+Q*D,y:k.y+q*D},J={x:P.x+Q*D,y:P.y+q*D},re={x:k.x-Q*I,y:k.y-q*I},X={x:P.x-Q*I,y:P.y-q*I},j=this.maxRect([ne,J,re,X]),Z=(this.annotation.borderWidth||2)*f,W=Math.max(3*Z,10*f),(te={left:j.left-W,top:j.top-W,width:j.width+2*W,height:j.height+2*W}).width||te.height){$e.next=36;break}return $e.abrupt("return");case 36:this.rect=te,this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","".concat(te.left," ").concat(te.top," ").concat(te.width," ").concat(te.height)),this.svgElement.style.pointerEvents="all",this.svgElement.style.overflow="visible",d.opacity&&(this.svgElement.style.opacity=d.opacity),le={x:(k.x+P.x)/2,y:(k.y+P.y)/2},oe=Math.atan2(P.y-k.y,P.x-k.x)/Math.PI*180,Ee=Math.abs(oe)>90?oe-180:oe,this.textEle=createSvg("text",{fill:d.color||d.borderColor,"text-anchor":"middle","dominant-baseline":"middle","font-size":d.fontSize*f,x:le.x,y:le.y,transform:"rotate(".concat(Ee," ").concat(le.x," ").concat(le.y,")")},{pointerEvents:"none"}),this.textEle.textContent=d.contents,this.svgElement.append(this.textEle),Ae=this.getTextWidth(),ve={x:k.x+U*(F/2-Ae/2),y:k.y+Y*(F/2-Ae/2)},ke={x:k.x+U*(F/2+Ae/2),y:k.y+Y*(F/2+Ae/2)},Ce=this.getDashString(),[{startLine:"",x1:k.x,y1:k.y,x2:ve.x,y2:ve.y,"stroke-dasharray":Ce},{endLine:"",x1:ke.x,y1:ke.y,x2:P.x,y2:P.y,"stroke-dasharray":Ce},{startLead:"",x1:k.x,y1:k.y,x2:ne.x,y2:ne.y},{endLead:"",x1:P.x,y1:P.y,x2:J.x,y2:J.y},{startLeadExtension:"",x1:k.x,y1:k.y,x2:re.x,y2:re.y},{endLeadExtension:"",x1:P.x,y1:P.y,x2:X.x,y2:X.y}].forEach(function(Be){var Oe=createSvg("line",_objectSpread2$1(_objectSpread2$1({},Be),{},{stroke:d.borderColor,"stroke-width":Z}),{"stroke-linecap":"butt"});Se.svgElement.append(Oe)}),(this.annotation.head||this.annotation.tail)&&(Pe=new ArrowHelper(this.start,this.end),Me=[],Le=["closedarrow","square","circle","diamond","rclosedarrow"],this.annotation.head&&this.annotation.head!=="none"&&(Te=Pe.getArrow(this.annotation.head,45,W,!1))&&(Te.setAttribute("head",""),Te.setAttribute("fill",Le.includes(this.annotation.head)?d.borderColor:"none"),Me.push(Te)),this.annotation.tail&&this.annotation.tail!=="none"&&(ye=Pe.getArrow(this.annotation.tail,45,W))&&(ye.setAttribute("tail",""),ye.setAttribute("fill",Le.includes(this.annotation.tail)?d.borderColor:"none"),Me.push(ye)),Me.forEach(function(Be){Be&&(Be.setAttribute("stroke",d.borderColor),Be.setAttribute("stroke-width",Z),Be.setAttribute("stroke-dasharray",Ce),Se.svgElement.append(Be))})),this.annotationContainer=document.createElement("div"),this.annotationContainer.append(this.svgElement),this.annotationContainer.id=d.name,this.annotationContainer.className="annotation",this.annotationContainer.style.top=te.top+"px",this.annotationContainer.style.left=te.left+"px",this.annotationContainer.style.width=te.width+"px",this.annotationContainer.style.height=te.height+"px",this.svgElement.addEventListener("mousedown",this.handleClick.bind(this)),this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",(_e=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("data-id","move"),_e.setAttribute("width",te.width),_e.setAttribute("height",te.height),_e.setAttribute("viewBox","".concat(te.left," ").concat(te.top," ").concat(te.width," ").concat(te.height)),_e.style.position="absolute",_e.style.zIndex=1,_e.style.left="".concat(te.left,"px"),_e.style.top="".concat(te.top,"px"),_e.style.width="".concat(te.width,"px"),_e.style.height="".concat(te.height,"px"),_e.style.border="".concat(parseFloat(f.toFixed(1)),"px dashed #1460F3"),_e.style.boxSizing="content-box",_e.style.pointerEvents="all",_e.style.cursor="all-scroll",this.outerLine=_e,we=this.annotation.leadLength>this.annotation.leadExtension,this.startCircle=createSvg("circle",{class:"start","data-id":"start",fill:"#1460F3",stroke:"#FFFFFF","stroke-width":2,cx:we?ne.x:re.x,cy:we?ne.y:re.y,r:6},{cursor:"default"}),this.middleCircle=createSvg("circle",{class:"middle","data-id":"middle",fill:"#1460F3",stroke:"#FFFFFF","stroke-width":2,cx:le.x,cy:le.y,r:6},{cursor:"default"}),this.endCircle=createSvg("circle",{class:"end","data-id":"end",fill:"#1460F3",stroke:"#FFFFFF","stroke-width":2,cx:we?J.x:X.x,cy:we?J.y:X.y,r:6},{cursor:"default"}),this.moveLine=createSvg("line",{class:"move","data-id":"move",x1:k.x,y1:k.y,x2:P.x,y2:P.y,fill:"transparent",stroke:"transparent","stroke-width":5}),this.outerLine.append(this.moveLine),this.outerLine.append(this.startCircle),this.outerLine.append(this.middleCircle),this.outerLine.append(this.endCircle),this.outerLineContainer.append(this.outerLine),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 95:case"end":return $e.stop()}},m,this)})),function(){return y.apply(this,arguments)})},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(m){if(this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(m==null?void 0:m.target)){this.hidden=!1,this.updateTool(),this.annotation.measure?(this.layer.eventBus._on("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._on("measurementPopupClicked",this.onHandlePopup)):this.layer.eventBus._on("annotationPropertyChanged",this.handlePropertyPanel),document.addEventListener("keydown",this.onKeydown);var d=[this.svgElement,this.outerLine,document.querySelector(".measure-panel"),document.querySelector(".measurement-board"),document.querySelector(".measurements-settings"),document.querySelector(".measurement-popup")];this.popupElement&&d.push(this.popupElement);var f=document.getElementById(this.annotation.measure?"measurePropertyPanelButton":"annotationPropertyPanelButton");f&&d.push(f);var x=document.querySelector(".toggle-button");x&&d.push(x),onClickOutside$1(d,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var m,d,f,x;!this.hidden&&this.annotation.measure&&this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",{isOpen:!1}),(x=this.layer.documentViewer)===null||x===void 0||(x=x.pdfViewer)===null||x===void 0||(x=x.measurementTool)===null||x===void 0||x.updateMeasurePanel(),this.hidePopup()),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),document.removeEventListener("keydown",this.onKeydown),(m=this.outerLine)===null||m===void 0||m.removeEventListener("mousedown",this.onMousedown),(d=this.outerLine)===null||d===void 0||d.removeEventListener("touchstart",this.onMousedown),(f=this.outerLineContainer)===null||f===void 0||f.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.annotation.measure?(this.layer.eventBus._off("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._off("measurementPopupClicked",this.onHandlePopup)):this.layer.eventBus._off("annotationPropertyChanged",this.handlePropertyPanel)}},{key:"getActualPoint",value:function(m){var d=this.annotation;!d.linePoints&&d.start&&d.end&&(d.linePoints=d.start+","+d.end);var f=_slicedToArray(d.linePoints,4);return{start:{x:f[0]*m,y:f[1]*m},end:{x:f[2]*m,y:f[3]*m}}}},{key:"getInitialPoint",value:function(){var m=this.layer.viewport.scale;return{start:{x:this.start.x/m,y:this.start.y/m},end:{x:this.end.x/m,y:this.end.y/m}}}},{key:"calculate",value:function(m,d){var f=this.rectCalc({start:m,end:d}),x=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return this.annotation.arrow?{top:f.top-10,left:f.left-10,width:f.width+20,height:f.height+20}:{top:f.top-x/2,left:f.left-x/2,width:f.width+x,height:f.height+x}}},{key:"rectCalc",value:function(m){var d=m.start,f=m.end;return{top:d.y<f.y?d.y:f.y,left:d.x<f.x?d.x:f.x,width:Math.abs(f.x-d.x),height:Math.abs(f.y-d.y)}}},{key:"maxRect",value:function(m){var d=Math.min(m[0].x,m[1].x,m[2].x,m[3].x),f=Math.min(m[0].y,m[1].y,m[2].y,m[3].y);return{left:d,top:f,width:Math.max(m[0].x,m[1].x,m[2].x,m[3].x)-d,height:Math.max(m[0].y,m[1].y,m[2].y,m[3].y)-f}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove(),document.removeEventListener("keydown",this.onKeydown);else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var m=this.annotation;this.layer.annotationStore.selectedElementName=m.name;var d=_objectSpread2$1({},m);delete d.annotPtr,delete d.pagePtr,delete d.operate,delete d.targetPage,delete d.arrow,this.layer.eventBus.dispatch("annotationSelected",d)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown),this.annotation.measure&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,length:this.annotation.length,angle:this.annotation.angle,X:this.annotation.X,Y:this.annotation.Y}),this.showPopup()),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleMouseDown",value:function(m){if(m.button===0||m.type!=="mousedown"){this.layer.tool&&m.stopPropagation();var d=m.target.getAttribute("data-id"),f=this.layer.documentViewer.getScrollViewElement();this.scrollTop=f.scrollTop,this.scrollLeft=f.scrollLeft;var x=getClickPoint(m),k=x.pageX,P=x.pageY;this.startState={operator:d,clickX:k,clickY:P},this.initialPoints={start:this.start,end:this.end},this.initLeadLength=this.annotation.leadLength,this.initLeadExtension=this.annotation.leadExtension,this.hasUpdatedInitialRect=!1,document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(m){var d=this;if(m.button===0||m.type!=="mousemove"){this.hidePopup(),m.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var f=getClickPoint(m),x=f.pageX,k=f.pageY,P=this.layer.documentViewer.getScrollViewElement(),S=P.scrollTop;x=x+P.scrollLeft-this.scrollLeft,k=k+S-this.scrollTop;var E=this.start,M=this.end,T=this.startState,D=this.layer.viewport,I=D.width,N=D.height,O=D.scale,F=function(Qe,at,rt,ct){var ht=d.annotation.leadLength*O,yt=d.annotation.leadExtension*O,bt=rt-Qe,$t=ct-at,At=Math.sqrt(bt*bt+$t*$t),Ft=bt/At,Ht=-($t/At),Ot={x:Qe+Ht*ht,y:at+Ft*ht},Mt={x:rt+Ht*ht,y:ct+Ft*ht},pt={x:Qe-Ht*yt,y:at-Ft*yt},xt={x:rt-Ht*yt,y:ct-Ft*yt},Tt={width:Math.abs(E.x-M.x),height:Math.abs(E.y-M.y)},Ct=Math.min(Ot.x,Mt.x,pt.x,xt.x),Nt=Math.max(Ot.x,Mt.x,pt.x,xt.x),jt=Math.min(Ot.y,Mt.y,pt.y,xt.y),nn=Math.max(Ot.y,Mt.y,pt.y,xt.y),Wt=Ct<0||Nt>I,cn=jt<0||nn>N,Ln=0,Pn=0;if(Wt||cn){var Bn=[E.x,M.x,E.y,M.y];Qe=Bn[0],rt=Bn[1],at=Bn[2],ct=Bn[3],Ln=Wt?Ct<0?-Ct:I-Nt:0,Pn=cn?jt<0?-jt:N-nn:0}else Qe<rt?(Qe=Math.max(0,Qe),Qe=Math.min(I-Tt.width,Qe),rt=Math.max(Tt.width,rt),rt=Math.min(I,rt)):(rt=Math.max(0,rt),rt=Math.min(I-Tt.width,rt),Qe=Math.max(Tt.width,Qe),Qe=Math.min(I,Qe)),at<ct?(at=Math.max(0,at),at=Math.min(N-Tt.height,at),ct=Math.max(Tt.height,ct),ct=Math.min(N,ct)):(ct=Math.max(0,ct),ct=Math.min(N-Tt.height,ct),at=Math.max(Tt.height,at),at=Math.min(N,at));return{x1:Qe,x2:rt,y1:at,y2:ct,outOfBoundsX:Ln,outOfBoundsY:Pn}};if(T.operator==="start"){var U=x-(T.clickX-this.start.x),Y=k-(T.clickY-this.start.y);U=Math.min(I,U),U=Math.max(0,U),Y=Math.min(N,Y);var Q=F(U,Y=Math.max(0,Y),M.x,M.y);U=Q.x1,Y=Q.y1,this.update({start:{x:U,y:Y},end:M},!1)}else if(T.operator==="middle"){var q,ne=((q=document.querySelector(".document-container"))===null||q===void 0?void 0:q.style.marginLeft)||0;ne=parseFloat(ne),x=x+this.scrollLeft-ne,k+=this.scrollTop;var J,re,X,j=this.layer.documentViewer.windowToPage({x,y:k},this.layer.page+1,!1),Z={x:(E.x+M.x)/2,y:(E.y+M.y)/2},W={x:M.x-E.x,y:M.y-E.y},te={x:-W.y,y:W.x},le={x:j.x-Z.x,y:j.y-Z.y},oe=(le.x*te.x+le.y*te.y)/(te.x*te.x+te.y*te.y),Ee=E.x+oe*te.x,Ae=E.y+oe*te.y,ve=M.x+oe*te.x,ke=M.y+oe*te.y;if(Ee=Math.max(0,Math.min(I,Ee)),Ae=Math.max(0,Math.min(N,Ae)),ve=Math.max(0,Math.min(I,ve)),ke=Math.max(0,Math.min(N,ke)),Ee===0||Ee===I||Ae===0||Ae===N||ve===0||ve===I||ke===0||ke===N)return;var Ce=function(Qe,at,rt,ct){var ht=(d.initialPoints.start.x+d.initialPoints.end.x)/2,yt=(d.initialPoints.start.y+d.initialPoints.end.y)/2;J=(Qe+rt)/2-ht,re=(at+ct)/2-yt,X=Math.sqrt(J*J+re*re)/d.layer.viewport.scale};Ce(Ee,Ae,ve,ke);var Pe=function(){var Qe=d.svgElement.querySelector("[startLead]"),at=d.svgElement.querySelector("[startLeadExtension]"),rt={x:Qe.getAttribute("x2"),y:Qe.getAttribute("y2")},ct={x:at.getAttribute("x2"),y:at.getAttribute("y2")},ht=function(Ot,Mt){return{x:Mt.x-Ot.x,y:Mt.y-Ot.y}},yt=function(Ot,Mt){return Ot.x*Mt.x+Ot.y*Mt.y},bt=ht(d.initialPoints.start,rt),$t=ht(d.initialPoints.start,ct),At=ht(d.initialPoints.start,{x:Ee,y:Ae}),Ft=yt(At,bt),Ht=yt(At,$t);return Ft>Ht?"toLead":Ht>Ft?"toExtension":void 0}();Pe||(Pe=J>0?"toExtension":J<0||re<0?"toLead":"toExtension"),Pe==="toExtension"?(this.annotation.leadExtension<=.1&&(this.initLeadExtension===.1||this.annotation.leadExtension!==.1||this.hasUpdatedInitialRect||(this.initialPoints={start:{x:Ee,y:Ae},end:{x:ve,y:ke}},this.hasUpdatedInitialRect=!0,Ce(Ee,Ae,ve,ke)),this.annotation.leadLength=Math.max(this.initLeadLength+X,.1),this.initLeadExtension=.1),this.annotation.leadExtension=Math.max(this.initLeadExtension-X,.1)):Pe==="toLead"&&(this.annotation.leadLength<=.1&&(this.initLeadLength===.1||this.annotation.leadLength!==.1||this.hasUpdatedInitialRect||(this.initialPoints={start:{x:Ee,y:Ae},end:{x:ve,y:ke}},this.hasUpdatedInitialRect=!0,Ce(Ee,Ae,ve,ke)),this.annotation.leadExtension=Math.max(this.initLeadExtension+X,.1),this.initLeadLength=.1),this.annotation.leadLength=Math.max(this.initLeadLength-X,.1)),this.update({start:{x:Ee,y:Ae},end:{x:ve,y:ke}},!1)}else if(T.operator==="end"){var Me=x-(T.clickX-this.end.x),Le=k-(T.clickY-this.end.y);Me=Math.min(I,Me),Me=Math.max(0,Me),Le=Math.min(N,Le),Le=Math.max(0,Le);var Te=F(E.x,E.y,Me,Le);Me=Te.x2,Le=Te.y2,this.update({start:E,end:{x:Me,y:Le}},!1)}else if(T.operator==="move"){var ye,_e,we,Se,$e=this.layer.documentViewer,Be=this.getMouseLocation(m),Oe=$e.getSelectedPage(Be,Be);if(Oe.first&&Oe.first!==this.layer.page+1){var Ge=$e.windowToPage(Be,Oe.first,!1),Ie=Math.abs(E.x-M.x),je=Math.abs(E.y-M.y);if($e.pdfViewer.spreadMode===0&&$e.pdfViewer.scrollMode===0){if(ye=x-(T.clickX-this.start.x),_e=Oe.first>this.layer.page+1?Ge.y:Ge.y-je,we=x-(T.clickX-this.end.x),Se=Oe.first>this.layer.page+1?Ge.y+je:Ge.y,this.annotation.angle>0){var qe=Se;Se=_e,_e=qe}}else if($e.pdfViewer.spreadMode===0&&$e.pdfViewer.scrollMode===1){if(ye=Oe.first>this.layer.page+1?Ge.x:Ge.x-Ie,_e=k-(T.clickY-this.start.y),we=Oe.first>this.layer.page+1?Ge.x+Ie:Ge.x,Se=k-(T.clickY-this.end.y),this.annotation.angle<-90||this.annotation.angle>90){var Ue=we;we=ye,ye=Ue}}else if($e.pdfViewer.spreadMode===1&&$e.pdfViewer.scrollMode===0){var Je=Math.min(Oe.first,this.layer.page+1),et=Math.max(Oe.first,this.layer.page+1);if(et-Je>2||Je+1===et&&Je%2==0)return;if(Je+1===et?(ye=Oe.first>this.layer.page+1?Ge.x:Ge.x-Ie,_e=k-(T.clickY-this.start.y),we=Oe.first>this.layer.page+1?Ge.x+Ie:Ge.x,Se=k-(T.clickY-this.end.y)):Je+2===et&&(ye=x-(T.clickX-this.start.x),_e=Oe.first>this.layer.page+1?Ge.y:Ge.y-je,we=x-(T.clickX-this.end.x),Se=Oe.first>this.layer.page+1?Ge.y+je:Ge.y),this.annotation.angle<-90||this.annotation.angle>90){var nt=we;we=ye,ye=nt}}else if($e.pdfViewer.spreadMode===2&&$e.pdfViewer.scrollMode===0){var st=Math.min(Oe.first,this.layer.page+1),gt=Math.max(Oe.first,this.layer.page+1);if(gt-st>2||st+1===gt&&(st!==1||gt!==2)&&gt%2==0||st===1&&gt===3)return;if(st+2===gt||st===1&&gt===2){if(ye=x-(T.clickX-this.start.x),_e=Oe.first>this.layer.page+1?Ge.y:Ge.y-je,we=x-(T.clickX-this.end.x),Se=Oe.first>this.layer.page+1?Ge.y+je:Ge.y,this.annotation.angle>0){var _t=Se;Se=_e,_e=_t}}else if(st+1===gt&&(ye=Oe.first>this.layer.page+1?Ge.x:Ge.x-Ie,_e=k-(T.clickY-this.start.y),we=Oe.first>this.layer.page+1?Ge.x+Ie:Ge.x,Se=k-(T.clickY-this.end.y),this.annotation.angle<-90||this.annotation.angle>90)){var wt=we;we=ye,ye=wt}}var He=F(ye,_e,we,Se),Ve=He.outOfBoundsX,ze=He.outOfBoundsY;ye+=Ve,_e+=ze,we+=Ve,Se+=ze;var Ne=$e.pdfViewer._pages[Oe.first-1].compdfAnnotationLayer;if(!Ne)return;this.layer=Ne,this.annotationContainer.remove(),this.outerLineContainer.remove();var We=this.layer.div;We.append(this.annotationContainer),We.append(this.outerLineContainer)}else{ye=x-(T.clickX-this.start.x),_e=k-(T.clickY-this.start.y),we=x-(T.clickX-this.end.x),Se=k-(T.clickY-this.end.y);var Fe=$e.pageToWindow({x:ye,y:_e},this.layer.page+1,!1),Ye=$e.pageToWindow({x:we,y:Se},this.layer.page+1,!1),Ke=0,Ze=0;k>T.clickY?Ze=(Ze=P.offsetHeight-(Ye.y-P.scrollTop-P.offsetTop))<100?5:0:k<T.clickY&&(Ze=(Ze=Fe.y-P.scrollTop-P.offsetTop)<100?-5:0),x>T.clickX?Ke=(Ke=P.offsetWidth-(Ye.x-P.scrollLeft-P.offsetLeft))<100?5:0:x<T.clickX&&(Ke=(Ke=Fe.x-P.scrollLeft-P.offsetLeft)<100?-5:0),(Ke||Ze)&&(P.scrollTop+=Ze,P.scrollLeft+=Ke);var ot=F(ye,_e,we,Se);ye=ot.x1,_e=ot.y1,we=ot.x2,Se=ot.y2}this.update({start:{x:ye,y:_e},end:{x:we,y:Se}},!1)}T.clickX=x,T.clickY=k}}},{key:"handleDelete",value:function(m){this.layer.tool&&m&&m.stopPropagation(),this.delete();var d={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(d.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",d)}},{key:"delete",value:function(){var m;this.handleOutside(),(m=this.annotationContainer)===null||m===void 0||m.remove(),this.annotation.isDelete=!0,this.annotation.name&&this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){var f,x,k,P,S,E,M,T,D,I,N,O,F,U;return _regeneratorRuntime().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(d.button===0||d.type!=="mouseup"){Y.next=2;break}return Y.abrupt("return");case 2:if(this.layer.tool&&d.stopPropagation(),d.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.startState&&this.update({start:this.start,end:this.end}),this.moving=!1,this.initialPoints=null,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0,f=this.annotation,x=this.getInitialPoint(),k=x.start,P=x.end,S=[k.x,k.y,P.x,P.y],f.linePoints=S,E=Math.min(k.x,P.x),M=Math.min(k.y,P.y),T=Math.max(k.x,P.x),D=Math.max(k.y,P.y),I={left:E-6,top:M-6,right:T+6,bottom:D+6},f.rect=I,f.measure&&this.layer.annotationStore.selectedElementName===f.name&&this.showPopup(),f.pageIndex===this.layer.page){Y.next=47;break}if(N={type:"delete",annotation:{operate:"del-annot",name:f.name,pageIndex:f.pageIndex,annotPtr:f.annotPtr}},this.layer.eventBus.dispatch("annotationChanged",N),delete(O=Object.assign({},f)).annotPtr,delete O.pagePtr,delete O.name,O.operate="add-annot",O.pageIndex=this.layer.page,!this.annotation.measure){Y.next=42;break}return Y.next=36,this.layer.documentViewer.annotationManager.createMeasurementAnnotation(O);case 36:return F=Y.sent,this.annotation=F[0],Y.next=40,this.layer.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 40:Y.next=43;break;case 42:this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:O});case 43:this.annotationContainer.remove(),this.outerLineContainer.remove(),Y.next=54;break;case 47:if(U={operate:"mod-annot",name:f.name,pageIndex:this.layer.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,linePoints:S,rect:I},!this.annotation.measure){Y.next=53;break}return Y.next=51,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(U);case 51:Y.next=54;break;case 53:this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:U});case 54:case"end":return Y.stop()}},m,this)})),function(m){return v.apply(this,arguments)})},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"update",value:function(m){var d=m.start,f=m.end,x=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.start=d,this.end=f,this.annotation.measure&&this.updateMeasure(x);var k,P,S,E,M,T,D,I=this.layer.viewport.scale,N=(this.annotation.borderWidth||2)*I,O=Math.max(3*N,10*I);if(this.annotation.measure){var F=this.annotation.leadLength*I,U=this.annotation.leadExtension*I,Y=f.x-d.x,Q=f.y-d.y,q=Math.sqrt(Y*Y+Q*Q),ne=Y/q,J=Q/q,re=-J,X=ne,j=this.getTextWidth();P={x:d.x+re*F,y:d.y+X*F},S={x:f.x+re*F,y:f.y+X*F},E={x:d.x-re*U,y:d.y-X*U},M={x:f.x-re*U,y:f.y-X*U},T={x:d.x+ne*(q/2-j/2),y:d.y+J*(q/2-j/2)},D={x:d.x+ne*(q/2+j/2),y:d.y+J*(q/2+j/2)};var Z=this.maxRect([P,S,E,M]);k={left:Z.left-O,top:Z.top-O,width:Z.width+2*O,height:Z.height+2*O}}else{var W=this.calculate(d,f);k={left:W.left-O,top:W.top-O,width:W.width+2*O,height:W.height+2*O}}this.rect=k;var te=this.rect;this.svgElement.setAttribute("width",te.width),this.svgElement.setAttribute("height",te.height),this.svgElement.setAttribute("viewBox","".concat(te.left," ").concat(te.top," ").concat(te.width," ").concat(te.height));var le=this.svgElement.querySelector("[mainLine]");le&&(le.setAttribute("x1",d.x),le.setAttribute("y1",d.y),le.setAttribute("x2",f.x),le.setAttribute("y2",f.y),this.selectionlineEle.setAttribute("x1",d.x),this.selectionlineEle.setAttribute("y1",d.y),this.selectionlineEle.setAttribute("x2",f.x),this.selectionlineEle.setAttribute("y2",f.y)),this.annotationContainer.style.top=te.top+"px",this.annotationContainer.style.left=te.left+"px",this.annotationContainer.style.width=te.width+"px",this.annotationContainer.style.height=te.height+"px";var oe=this.annotation.measure?0:MARGIN_DISTANCE;if(this.outerLine.setAttribute("height",te.height),this.outerLine.setAttribute("viewBox","".concat(te.left," ").concat(te.top," ").concat(te.width+2*oe," ").concat(te.height+2*oe)),this.outerLine.style.left="".concat(te.left-oe,"px"),this.outerLine.style.top="".concat(te.top-oe,"px"),this.outerLine.style.width="".concat(te.width+2*oe,"px"),this.outerLine.style.height="".concat(te.height+2*oe,"px"),this.popupElement&&(this.popupElement.style.left=te.left+te.width-114+"px"),this.popupElement&&(this.popupElement.style.top=te.top+te.height+12+"px"),this.annotation.measure){var Ee=this.annotation.leadLength>this.annotation.leadExtension;this.startCircle.setAttribute("cx",Ee?P.x:E.x),this.startCircle.setAttribute("cy",Ee?P.y:E.y),this.endCircle.setAttribute("cx",Ee?S.x:M.x),this.endCircle.setAttribute("cy",Ee?S.y:M.y);var Ae=this.svgElement.querySelector("[startLine]"),ve=this.svgElement.querySelector("[endLine]"),ke=this.svgElement.querySelector("[startLead]"),Ce=this.svgElement.querySelector("[endLead]"),Pe=this.svgElement.querySelector("[startLeadExtension]"),Me=this.svgElement.querySelector("[endLeadExtension]"),Le={x:(d.x+f.x)/2,y:(d.y+f.y)/2};if(Ae&&(Ae.setAttribute("x1",d.x),Ae.setAttribute("y1",d.y),Ae.setAttribute("x2",T.x),Ae.setAttribute("y2",T.y)),ve&&(ve.setAttribute("x1",D.x),ve.setAttribute("y1",D.y),ve.setAttribute("x2",f.x),ve.setAttribute("y2",f.y)),ke&&(ke.setAttribute("x1",d.x),ke.setAttribute("y1",d.y),ke.setAttribute("x2",P.x),ke.setAttribute("y2",P.y)),Ce&&(Ce.setAttribute("x1",f.x),Ce.setAttribute("y1",f.y),Ce.setAttribute("x2",S.x),Ce.setAttribute("y2",S.y)),Pe&&(Pe.setAttribute("x1",d.x),Pe.setAttribute("y1",d.y),Pe.setAttribute("x2",E.x),Pe.setAttribute("y2",E.y)),Me&&(Me.setAttribute("x1",f.x),Me.setAttribute("y1",f.y),Me.setAttribute("x2",M.x),Me.setAttribute("y2",M.y)),this.textEle){var Te=Math.atan2(f.y-d.y,f.x-d.x)/Math.PI*180,ye=Math.abs(Te)>90?Te-180:Te,_e=Math.atan2(d.y-f.y,f.x-d.x)/Math.PI*180;this.annotation.angle=Math.round(_e),this.textEle.setAttribute("x",Le.x),this.textEle.setAttribute("y",Le.y),this.textEle.setAttribute("transform","rotate(".concat(ye," ").concat(Le.x," ").concat(Le.y,")")),this.textEle.textContent=this.annotation.contents}this.middleCircle.setAttribute("cx",Le.x),this.middleCircle.setAttribute("cy",Le.y)}else this.startCircle.setAttribute("cx",d.x+oe),this.startCircle.setAttribute("cy",d.y+oe),this.endCircle.setAttribute("cx",f.x+oe),this.endCircle.setAttribute("cy",f.y+oe);if(this.moveLine.setAttribute("x1",d.x+oe),this.moveLine.setAttribute("y1",d.y+oe),this.moveLine.setAttribute("x2",f.x+oe),this.moveLine.setAttribute("y2",f.y+oe),this.annotation.head||this.annotation.tail){var we=new ArrowHelper(d,f),Se=this.annotation.measure?45:30,$e=(this.annotation.borderWidth||2)*I,Be=Math.max(3*$e,(this.annotation.measure?10:12)*I);if(this.annotation.head&&this.annotation.head!=="none"){var Oe=this.svgElement.querySelector("[head]");if(Oe){var Ge=we.getArrowPoints(this.annotation.head,Se,Be,!1),Ie="";Ge&&Ge.forEach(function(Je){Ie.length>0&&(Ie+=" "),Ie+="".concat(Je.x,",").concat(Je.y)}),Ie.length>0&&Oe.setAttribute("points",Ie)}}if(this.annotation.tail&&this.annotation.tail!=="none"){var je=this.svgElement.querySelector("[tail]");if(je){var qe=we.getArrowPoints(this.annotation.tail,Se,Be),Ue="";qe&&qe.forEach(function(Je){Ue.length>0&&(Ue+=" "),Ue+="".concat(Je.x,",").concat(Je.y)}),Ue.length>0&&je.setAttribute("points",Ue)}}}}},{key:"updateMeasure",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){var f,x,k,P,S,E,M;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(f=this.getInitialPoint(),x={left:Math.min(f.start.x,f.end.x),top:Math.min(f.start.y,f.end.y),right:Math.max(f.start.x,f.end.x),bottom:Math.max(f.start.y,f.end.y)},k=[f.start.x,f.start.y,f.end.x,f.end.y],this.annotation.rect=x,this.annotation.linePoints=k,this.getResult(),P=(Math.abs(f.end.x-f.start.x)*this.annotation.factor).toFixed(this.decimalPlaces),S=(Math.abs(f.end.y-f.start.y)*this.annotation.factor).toFixed(this.decimalPlaces),this.annotation.X=P,this.annotation.Y=S,this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,length:this.annotation.length,angle:this.annotation.angle,X:P,Y:S}),d){T.next=13;break}return T.abrupt("return");case 13:if(!this.startState||this.startState.operator!=="middle"){T.next=20;break}return E={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,leadLength:this.annotation.leadLength,leadExtension:this.annotation.leadExtension,leadOffset:1-this.annotation.leadLength,contents:this.annotation.contents},this.annotation.leadOffset=1-this.annotation.leadLength,T.next=18,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(E);case 18:T.next=25;break;case 20:if(!this.startState||this.startState.operator==="move"){T.next=25;break}return M={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:x,linePoints:k},this.annotation.contents&&(M.contents=this.annotation.contents,M.labelPosition=this.annotation.labelPosition),T.next=25,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(M);case 25:case"end":return T.stop()}},m,this)})),function(m){return g.apply(this,arguments)})},{key:"handlePropertyPanel",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){var f,x,k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(f=this.annotation,this.layer.annotationStore.selectedElementName===f.name){P.next=3;break}return P.abrupt("return");case 3:x=0,P.t0=_regeneratorRuntime().keys(d);case 5:if((P.t1=P.t0()).done){P.next=13;break}return k=P.t1.value,P.t2=x,P.next=10,this.setCustomData(k,d[k],!0);case 10:x=P.t2+=P.sent,P.next=5;break;case 13:x>0&&this.sendData(d);case 14:case"end":return P.stop()}},m,this)})),function(m){return w.apply(this,arguments)})},{key:"setCustomData",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function m(d,f){var x,k,P,S,E,M=this,T=arguments;return _regeneratorRuntime().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:x=T.length>2&&T[2]!==void 0&&T[2],k=this.annotation,P=0,S=_regeneratorRuntime().mark(function I(){var N,O,F,U,Y,Q,q,ne,J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke,Ce,Pe,Me,Le,Te,ye,_e,we,Se,$e,Be,Oe,Ge,Ie,je,qe,Ue,Je,et,nt,st,gt,_t,wt,He,Ve,ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at,rt,ct,ht,yt,bt,$t,At,Ft,Ht,Ot,Mt,pt,xt,Tt;return _regeneratorRuntime().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(E!==d||k[E]===f){Ct.next=36;break}if(k[E]=f,P=1,d==="borderColor"&&(k.measure?N=["startLine","endLine","startLead","endLead","startLeadExtension","endLeadExtension","head","tail"]:(N=["mainLine","head","tail"],k.color=f),N.forEach(function(Nt){var jt=M.svgElement.querySelector("[".concat(Nt,"]"));jt&&jt.setAttribute("stroke",f)})),d==="opacity"&&(M.svgElement.style.opacity=f),d==="borderWidth"&&(k.measure?O=["startLine","endLine","startLead","endLead","startLeadExtension","endLeadExtension","head","tail"]:(O=["mainLine","head","tail"],k.color=f),O.forEach(function(Nt){var jt=M.svgElement.querySelector("[".concat(Nt,"]"));jt&&jt.setAttribute("stroke-width",f*M.layer.viewport.scale)}),M.update({start:M.start,end:M.end},!1),k.measure&&M.showPopup()),d==="borderStyle"&&(F=M.svgElement.querySelector("[head]"),U=M.svgElement.querySelector("[tail]"),k.measure?["startLine","endLine"].forEach(function(Nt){var jt=M.svgElement.querySelector("[".concat(Nt,"]"));jt&&f==="solid"&&(jt.setAttribute("stroke-dasharray",""),F&&F.setAttribute("stroke-dasharray",""),U&&U.setAttribute("stroke-dasharray","")),jt&&f==="dashed"&&(jt.setAttribute("stroke-dasharray",M.getDashString()),F&&F.setAttribute("stroke-dasharray",M.getDashString()),U&&U.setAttribute("stroke-dasharray",M.getDashString()))}):(M.lineEle&&f==="solid"&&(M.lineEle.setAttribute("stroke-dasharray",""),F&&F.setAttribute("stroke-dasharray",""),U&&U.setAttribute("stroke-dasharray","")),M.lineEle&&f==="dashed"&&(M.lineEle.setAttribute("stroke-dasharray",M.getDashString()),F&&F.setAttribute("stroke-dasharray",M.getDashString()),U&&U.setAttribute("stroke-dasharray",M.getDashString())))),d==="dashes"&&(Y=M.svgElement.querySelector("[head]"),Q=M.svgElement.querySelector("[tail]"),k.measure?(["startLine","endLine"].forEach(function(Nt){var jt=M.svgElement.querySelector("[".concat(Nt,"]"));jt&&jt.setAttribute("stroke-dasharray",M.getDashString())}),Y&&Y.setAttribute("stroke-dasharray",M.getDashString()),Q&&Q.setAttribute("stroke-dasharray",M.getDashString())):(M.lineEle&&M.lineEle.setAttribute("stroke-dasharray",M.getDashString()),Y&&Y.setAttribute("stroke-dasharray",M.getDashString()),Q&&Q.setAttribute("stroke-dasharray",M.getDashString()))),d==="head"&&((q=M.svgElement.querySelector("[head]"))&&f==="none"?q.style.display=f!=="none"?"":"none":(q&&q.remove(),ne=(k.borderWidth||2)*M.layer.viewport.scale,J=Math.max(3*ne,(k.measure?10:12)*M.layer.viewport.scale),re=["closedarrow","square","circle","diamond","rclosedarrow"],X=new ArrowHelper(M.start,M.end),(j=X.getArrow(f,M.annotation.measure?45:30,J,!1))&&(j.setAttribute("head",""),j.setAttribute("stroke",k.borderColor),j.setAttribute("stroke-width",ne),j.setAttribute("fill",re.includes(M.annotation.head)?k.borderColor:"none"),j.setAttribute("stroke-dasharray",M.getDashString()),M.svgElement.append(j)))),d==="tail"&&((Z=M.svgElement.querySelector("[tail]"))&&f==="none"?Z.style.display=f!=="none"?"":"none":(Z&&Z.remove(),W=(k.borderWidth||2)*M.layer.viewport.scale,te=Math.max(3*W,(k.measure?10:12)*M.layer.viewport.scale),le=["closedarrow","square","circle","diamond","rclosedarrow"],oe=new ArrowHelper(M.start,M.end),(Ee=oe.getArrow(f,M.annotation.measure?45:30,te))&&(Ee.setAttribute("tail",""),Ee.setAttribute("stroke",k.borderColor),Ee.setAttribute("stroke-width",W),Ee.setAttribute("fill",le.includes(M.annotation.tail)?k.borderColor:"none"),Ee.setAttribute("stroke-dasharray",M.getDashString()),M.svgElement.append(Ee)))),d==="color"&&M.textEle.setAttribute("fill",f),d==="fontSize"&&M.textEle.setAttribute("font-size",f*M.layer.viewport.scale),d==="fontName"&&(M.textEle.style.fontFamily=f),d==="fontStyle"&&((Ae=f)==="boldItalic"?(M.textEle.style.fontStyle="italic",M.textEle.style.fontWeight="bold",k.isBold=!0,k.isItalic=!0):Ae==="bold"?(M.textEle.style.fontStyle="normal",M.textEle.style.fontWeight="bold",k.isBold=!0,k.isItalic=!1):Ae==="italic"?(M.textEle.style.fontStyle="italic",M.textEle.style.fontWeight="normal",k.isBold=!1,k.isItalic=!0):(k.isItalic=!1,k.isBold=!1,M.textEle.style.fontStyle="normal",M.textEle.style.fontWeight="normal")),d==="contents"&&k.measure&&(M.textEle.textContent=f),d!=="scale"&&d!=="precision"){Ct.next=33;break}return d==="precision"&&(M.decimalPlaces=((ve=Math.abs(k.precision).toString().split(".")[1])===null||ve===void 0?void 0:ve.length)||0),M.getResult(),Ct.next=20,M.layer.documentViewer.annotationManager.editMeasurementAnnotation(_defineProperty$1(_defineProperty$1(_defineProperty$1({rulerPtr:k.rulerPtr},d,f),"annotPtr",k.annotPtr),"contents",k.contents));case 20:return Ct.next=22,M.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",k.rulerPtr);case 22:ke=Ct.sent,Ce=M.getInitialPoint(),Pe=(Math.abs(Ce.end.x-Ce.start.x)*ke).toFixed(M.decimalPlaces),Me=(Math.abs(Ce.end.y-Ce.start.y)*ke).toFixed(M.decimalPlaces),k.factor=ke,k.X=Pe,k.Y=Me,M.textEle&&(M.textEle.textContent=k.contents),M.layer.annotationStore.selectedElementName!==M.annotation.name||document.querySelector(".measure-panel").classList.contains("closed")||M.layer.eventBus.dispatch("measurePropertyChange",M.annotation),M.layer.eventBus.dispatch("updateMeasureData",{scale:k.scale,precision:k.precision,length:k.length,X:Pe,Y:Me}),P=0;case 33:d==="length"&&(Le=M.layer.viewport,Te=Le.width,ye=Le.height,_e=Le.scale,we=M.start.x<M.end.x,Se=we?M.start:M.end,$e=Se.x,Be=Se.y,Oe=we?M.end:M.start,Ge=Oe.x,Ie=Oe.y,je=Math.hypot(Ge-$e,Ie-Be),qe=Ge-$e,Ue=Ie-Be,Je=f/k.factor*_e/je,et=qe>0?(Te-$e)/qe:(0-$e)/qe,nt=Ue>0?(ye-Be)/Ue:(0-Be)/Ue,st=Math.min(et,nt),gt=Math.min(Math.max(Je,0),st),_t=$e+qe*gt,wt=Be+Ue*gt,M.startState={operator:"end"},He=we?{start:M.start,end:{x:_t,y:wt}}:{start:{x:_t,y:wt},end:M.end},M.update(He),M.showPopup(),P=0),d==="angle"&&(Ve=M.layer.viewport,ze=Ve.width,Ne=Ve.height,We=M.start,Fe=We.x,Ye=We.y,Ke=M.end,Ze=Ke.x,ot=Ke.y,Qe=Math.hypot(Ze-Fe,ot-Ye),at=f*Math.PI/180,rt=Qe*Math.cos(at),ct=Qe*Math.sin(-at),ht=Fe+rt,yt=Ye+ct,ht=Math.min(ze,ht),ht=Math.max(0,ht),yt=Math.min(Ne,yt),yt=Math.max(0,yt),M.startState={operator:"end"},M.update({start:M.start,end:{x:ht,y:yt}}),M.showPopup(),P=0),["fontSize","scale","precision","contents"].includes(d)&&(bt=M.svgElement.querySelector("[startLine]"),$t=M.svgElement.querySelector("[endLine]"),At=M.end.x-M.start.x,Ft=M.end.y-M.start.y,Ht=Math.sqrt(At*At+Ft*Ft),Ot=At/Ht,Mt=Ft/Ht,pt=M.getTextWidth(),bt&&(xt={x:M.start.x+Ot*(Ht/2-pt/2),y:M.start.y+Mt*(Ht/2-pt/2)},bt.setAttribute("x1",M.start.x),bt.setAttribute("y1",M.start.y),bt.setAttribute("x2",xt.x),bt.setAttribute("y2",xt.y)),$t&&(Tt={x:M.start.x+Ot*(Ht/2+pt/2),y:M.start.y+Mt*(Ht/2+pt/2)},$t.setAttribute("x1",Tt.x),$t.setAttribute("y1",Tt.y),$t.setAttribute("x2",M.end.x),$t.setAttribute("y2",M.end.y)));case 36:case"end":return Ct.stop()}},I)}),D.t0=_regeneratorRuntime().keys(k);case 5:if((D.t1=D.t0()).done){D.next=10;break}return E=D.t1.value,D.delegateYield(S(),"t2",8);case 8:D.next=5;break;case 10:return!x&&this.sendData(_defineProperty$1({},d,f)),D.abrupt("return",P);case 12:case"end":return D.stop()}},m,this)})),function(m,d){return s.apply(this,arguments)})},{key:"sendData",value:function(m){var d=this.annotation;if(d.measure){var f={pagePtr:d.pagePtr,annotPtr:d.annotPtr,rulerPtr:d.rulerPtr,pageIndex:d.pageIndex,contents:d.contents};if(["fontSize","fontName","color","fontStyle"].some(function(M){return m[M]})){f.fontSize=d.fontSize,f.color=d.color;var x={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},k=d.fontName;d.isBold&&d.isItalic?f.fontName=x[k].boldItalic:d.isBold?f.fontName=x[k].bold:d.isItalic?f.fontName=x[k].italic:f.fontName=x[k]?x[k].normal:k,delete m.fontName}(m.hasOwnProperty("head")||m.hasOwnProperty("tail"))&&(f.head=d.head,f.tail=d.tail,delete m.head,delete m.tail),m.dashes&&(f.borderStyle=d.borderStyle,f.borderWidth=d.borderWidth),m.borderStyle&&(f.dashes=m.borderStyle==="solid"?[]:d.dashes,f.borderWidth=d.borderWidth);var P=Object.assign({},f,m);this.layer.documentViewer.annotationManager.editMeasurementAnnotation(P)}else{var S={operate:"mod-annot",name:d.name,pageIndex:d.pageIndex,pagePtr:d.pagePtr,annotPtr:d.annotPtr};(m.hasOwnProperty("head")||m.hasOwnProperty("tail"))&&(S.head=d.head,S.tail=d.tail,delete m.head,delete m.tail),m.dashes&&(S.borderStyle=d.borderStyle,S.borderWidth=d.borderWidth),m.borderStyle&&(S.dashes=m.borderStyle==="solid"?[]:d.dashes,S.borderWidth=d.borderWidth),m.borderColor&&(S.color=d.color);var E=Object.assign({},S,m);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:E})}}},{key:"getResult",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function m(){var d,f,x,k,P,S;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:d=_slicedToArray(this.annotation.linePoints,4),f=d[0],x=d[1],k=d[2],P=d[3],S=this.formatValue(Math.hypot(f-k,x-P)*this.annotation.factor),this.annotation.length=S,this.annotation.contents=S.toFixed(this.decimalPlaces)+this.annotation.scale.translateUnit;case 4:case"end":return E.stop()}},m,this)})),function(){return u.apply(this,arguments)})},{key:"showPopup",value:function(){var m=this.layer.div.getBoundingClientRect(),d=m.left+this.rect.left,f=this.rect.top+m.top,x={left:d,top:f,right:d+this.rect.width,bottom:f+this.rect.height};this.layer.eventBus.dispatch("showMeasurementPopup",{rect:x}),this.isPopupShow=!0}},{key:"hidePopup",value:function(){this.isPopupShow&&(this.isPopupShow=!1,this.layer.eventBus.dispatch("showMeasurementPopup"))}},{key:"handlePopup",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){var f,x=this;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:d==="delete"&&this.handleDelete(),d==="reply"&&(this.openReply(),(f=document.getElementById("leftPanel"))!=null&&f.classList.contains("closed")&&setTimeout(function(){x.showPopup()},350));case 2:case"end":return k.stop()}},m,this)})),function(m){return o.apply(this,arguments)})},{key:"formatValue",value:function(m){return m%1==0?m:Number(m.toFixed(this.decimalPlaces))}},{key:"getTextWidth",value:function(){var m=document.createElement("canvas").getContext("2d");m.font="".concat(this.annotation.fontSize*this.layer.viewport.scale,"px ").concat(this.annotation.fontFamily);var d=1.1*m.measureText(this.annotation.contents).width,f=this.end.x-this.start.x,x=this.end.y-this.start.y,k=Math.sqrt(f*f+x*x);return k>d?d:k}},{key:"handleKeyDown",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){var f;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"){x.next=2;break}return x.abrupt("return");case 2:(f=d.keyCode||d.which)!==8&&f!==46||this.handleDelete();case 4:case"end":return x.stop()}},m,this)})),function(m){return r.apply(this,arguments)})},{key:"getDashString",value:function(){var m=this.annotation.dashes,d=Math.ceil(this.ratio*this.layer.viewport.scale),f="";return m.length===1||m.length===2&&m[0]===m[1]?f=Math.ceil(m[0]*d)+"":m.length>2&&(f=m.map(function(x){return Math.ceil(x*d)}).join(", ")),f}}]);var r,o,u,s,w,g,v,y}(),Shape$1=function(e){function n(r){var o,u=r.annotation,s=r.layer,w=r.show,g=w!==void 0&&w,v=r.enableReply,y=v===void 0||v;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:u,layer:s}])).enableReply=y,o.show=g,o.hidden=!0,o.initial=!1,o.start=null,o.end=null,o.newStart=null,o.newEnd=null,o.svgElement=null,o.startCircle=null,o.endCircle=null,o.selectionOutlinePadding=8,o.selectionOutlinePointWidth=6,o.onMousedown=o.handleMouseDown.bind(o),o.onMouseup=o.handleMouseUp.bind(o),o.onMousemove=o.handleMouseMove.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.handlePropertyPanel=o.handlePropertyPanel.bind(o),o.render(),o}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){var r=this.annotation,o=this.layer.viewport.scale,u=this.getActualRect(o),s=u.start,w=u.end;this.start=s,this.end=w;var g=this.calculate(s,w),v=(r.borderWidth||2)*o;r.borderColor||(r.borderColor=r.color||"#000000");var y,m=document.createElement("div");m.id=r.name,m.className="annotation",m.style.top=g.top+"px",m.style.left=g.left+"px",m.style.width=g.width+"px",m.style.height=g.height+"px",this.annotationContainer=m,this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","0 0 ".concat(g.width," ").concat(g.height)),this.svgElement.addEventListener("mousedown",this.handleClick.bind(this)),r.type==="square"?(y=createSvg("rect",{x:v/2,y:v/2,width:"".concat(Math.abs(g.width-v),"px"),height:"".concat(Math.abs(g.height-v),"px"),stroke:r.borderColor,"stroke-width":v,"stroke-opacity":r.opacity||1,fill:r.fillColor?r.fillColor:"none","fill-opacity":r.opacity||1,"stroke-dasharray":this.getDashString()}),this.selectionShapeEle=createSvg("rect",{x:v/2,y:v/2,width:"".concat(Math.abs(g.width-v),"px"),height:"".concat(Math.abs(g.height-v),"px"),stroke:r.borderColor,"stroke-width":v+8*o,"stroke-opacity":0,fill:"none","fill-opacity":0})):(y=createSvg("ellipse",{cx:g.width/2,cy:g.height/2,rx:(g.width-v)/2,ry:(g.height-v)/2,stroke:r.borderColor,"stroke-width":v,"stroke-opacity":r.opacity||1,fill:r.fillColor?r.fillColor:"none","fill-opacity":r.opacity||1,"stroke-dasharray":this.getDashString()}),this.selectionShapeEle=createSvg("ellipse",{cx:g.width/2,cy:g.height/2,rx:(g.width-v)/2,ry:(g.height-v)/2,stroke:r.borderColor,"stroke-width":v+8*o,"stroke-opacity":0,fill:"none","fill-opacity":0})),this.shapeEle=y,this.svgElement.append(this.selectionShapeEle),this.svgElement.append(this.shapeEle),this.annotationContainer.append(this.svgElement),this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:g.left+g.width-114+"px",top:g.top+g.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,this.replyButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr;var d=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2;this.outerLine=createSvg("svg",{},{position:"absolute",left:"".concat(g.left-d,"px"),top:"".concat(g.top-d,"px"),width:"".concat(g.width+2*d,"px"),height:"".concat(g.height+2*d,"px"),zIndex:1}),this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"fill-opacity":0,width:g.width+this.selectionOutlinePadding,height:g.height+this.selectionOutlinePadding,x:this.selectionOutlinePointWidth/2,y:this.selectionOutlinePointWidth/2}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:0,y:(g.height+this.selectionOutlinePadding)/2}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:0,y:g.height+this.selectionOutlinePadding}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:(g.width+this.selectionOutlinePadding)/2,y:g.height+this.selectionOutlinePadding}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:g.width+this.selectionOutlinePadding,y:g.height+this.selectionOutlinePadding}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:g.width+this.selectionOutlinePadding,y:(g.height+this.selectionOutlinePadding)/2}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:g.width+this.selectionOutlinePadding,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:(g.width+this.selectionOutlinePadding)/2,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.layer.documentViewer.isAnnotationPopup&&this.enableReply&&this.popupElement.append(this.replyButton),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.outerLineContainer.append(this.popupElement),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1)}},{key:"getActualRect",value:function(r){var o=this.annotation.rect,u=o.left,s=o.top,w=o.right,g=o.bottom;return{start:getActualPoint({x:u,y:s},r),end:getActualPoint({x:w,y:g},r)}}},{key:"rectCalc",value:function(r){var o=r.start,u=r.end;return{top:o.y<u.y?o.y:u.y,left:o.x<u.x?o.x:u.x,width:Math.abs(u.x-o.x),height:Math.abs(u.y-o.y)}}},{key:"calculate",value:function(r,o){var u=this.rectCalc({start:r,end:o}),s=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:u.top-s,left:u.left-s,width:u.width+2*s,height:u.height+2*s}}},{key:"getInitialPoint",value:function(){var r=this.layer.viewport.scale;return{start:{x:this.start.x/r,y:this.start.y/r},end:{x:this.end.x/r,y:this.end.y/r}}}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var r=this.annotation;this.layer.annotationStore.selectedElementName=r.name;var o=_objectSpread2$1({},r);delete o.annotPtr,delete o.pagePtr,delete o.operate,delete o.targetPage,this.layer.eventBus.dispatch("annotationSelected",o)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(r){if(this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(r==null?void 0:r.target)){this.hidden=!1,this.updateTool(),this.layer.eventBus._on("annotationPropertyChanged",this.handlePropertyPanel);var o=[this.svgElement,this.popupElement,this.outerLine,document.querySelector(".annotation-panel")],u=document.getElementById("annotationPropertyPanelButton");u&&o.push(u);var s=document.querySelector(".toggle-button");s&&o.push(s),onClickOutside$1(o,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var r,o,u;this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),(r=this.outerLine)===null||r===void 0||r.removeEventListener("mousedown",this.onMousedown),(o=this.outerLine)===null||o===void 0||o.removeEventListener("touchstart",this.onMousedown),(u=this.outerLineContainer)===null||u===void 0||u.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("annotationPropertyChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(r){if(r.button===0||r.type!=="mousedown"){this.layer.tool&&r.stopPropagation();var o=r.target.getAttribute("data-id"),u=this.layer.documentViewer.getScrollViewElement();this.scrollTop=u.scrollTop,this.scrollLeft=u.scrollLeft;var s=getClickPoint(r),w=s.pageX,g=s.pageY;this.startState={operator:o,clickX:w,clickY:g},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(r){if(r.button===0||r.type!=="mousemove"){r.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var o=getClickPoint(r),u=o.pageX,s=o.pageY,w=this.layer.documentViewer.getScrollViewElement(),g=w.scrollTop;u=u+w.scrollLeft-this.scrollLeft,s=s+g-this.scrollTop;var v=this.start,y=this.end,m=this.startState,d=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2+this.annotation.borderWidth*this.layer.viewport.scale,f=this.layer.viewport,x=f.width,k=f.height;if(m.operator==="nw-resize"){var P=u-(m.clickX-this.start.x),S=s-(m.clickY-this.start.y);P=Math.min(y.x-5,P),P=Math.max(d,P),S=Math.min(y.y-5,S),S=Math.max(d,S),this.update({start:{x:P,y:S},end:y})}else if(m.operator==="w-resize"){var E=u-(m.clickX-this.start.x);E=Math.min(y.x-5,E),E=Math.max(d,E),this.update({start:{x:E,y:v.y},end:y})}else if(m.operator==="sw-resize"){var M=u-(m.clickX-this.start.x),T=s-(m.clickY-this.end.y);M=Math.min(y.x-5,M),M=Math.max(d,M),T=Math.min(k-d,T),T=Math.max(v.y+5,T),this.update({start:{x:M,y:v.y},end:{x:y.x,y:T}})}else if(m.operator==="s-resize"){var D=s-(m.clickY-this.end.y);D=Math.min(k-d,D),D=Math.max(v.y+5,D),this.update({start:v,end:{x:y.x,y:D}})}else if(m.operator==="se-resize"){var I=u-(m.clickX-this.end.x),N=s-(m.clickY-this.end.y);I=Math.min(x-d,I),I=Math.max(v.x+5,I),N=Math.min(k-d,N),N=Math.max(v.y+5,N),this.update({start:v,end:{x:I,y:N}})}else if(m.operator==="e-resize"){var O=u-(m.clickX-this.end.x);O=Math.min(x-d,O),O=Math.max(v.x+5,O),this.update({start:v,end:{x:O,y:y.y}})}else if(m.operator==="ne-resize"){var F=u-(m.clickX-this.end.x),U=s-(m.clickY-this.start.y);F=Math.min(x-d,F),F=Math.max(v.x+5,F),U=Math.min(y.y-5,U),U=Math.max(d,U),this.update({start:{x:v.x,y:U},end:{x:F,y:y.y}})}else if(m.operator==="n-resize"){var Y=s-(m.clickY-this.start.y);Y=Math.min(y.y-5,Y),Y=Math.max(d,Y),this.update({start:{x:v.x,y:Y},end:y})}else if(m.operator==="move"){var Q,q,ne,J,re=this.layer.documentViewer,X=this.getMouseLocation(r),j=re.getSelectedPage(X,X);if(j.first&&j.first!==this.layer.page+1){var Z=re.windowToPage(X,j.first,!1),W=Math.abs(v.x-y.x),te=Math.abs(v.y-y.y);if(re.pdfViewer.spreadMode===0&&re.pdfViewer.scrollMode===0)Q=u-(m.clickX-this.start.x),q=j.first>this.layer.page+1?Z.y:Z.y-te,ne=u-(m.clickX-this.end.x),J=j.first>this.layer.page+1?Z.y+te:Z.y;else if(re.pdfViewer.spreadMode===0&&re.pdfViewer.scrollMode===1)Q=j.first>this.layer.page+1?Z.x:Z.x-W,q=s-(m.clickY-this.start.y),ne=j.first>this.layer.page+1?Z.x+W:Z.x,J=s-(m.clickY-this.end.y);else if(re.pdfViewer.spreadMode===1&&re.pdfViewer.scrollMode===0){var le=Math.min(j.first,this.layer.page+1),oe=Math.max(j.first,this.layer.page+1);if(oe-le>2||le+1===oe&&le%2==0)return;le+1===oe?(Q=j.first>this.layer.page+1?Z.x:Z.x-W,q=s-(m.clickY-this.start.y),ne=j.first>this.layer.page+1?Z.x+W:Z.x,J=s-(m.clickY-this.end.y)):le+2===oe&&(Q=u-(m.clickX-this.start.x),q=j.first>this.layer.page+1?Z.y:Z.y-te,ne=u-(m.clickX-this.end.x),J=j.first>this.layer.page+1?Z.y+te:Z.y)}else if(re.pdfViewer.spreadMode===2&&re.pdfViewer.scrollMode===0){var Ee=Math.min(j.first,this.layer.page+1),Ae=Math.max(j.first,this.layer.page+1);if(Ae-Ee>2||Ee+1===Ae&&(Ee!==1||Ae!==2)&&Ae%2==0||Ee===1&&Ae===3)return;Ee+2===Ae||Ee===1&&Ae===2?(Q=u-(m.clickX-this.start.x),q=j.first>this.layer.page+1?Z.y:Z.y-te,ne=u-(m.clickX-this.end.x),J=j.first>this.layer.page+1?Z.y+te:Z.y):Ee+1===Ae&&(Q=j.first>this.layer.page+1?Z.x:Z.x-W,q=s-(m.clickY-this.start.y),ne=j.first>this.layer.page+1?Z.x+W:Z.x,J=s-(m.clickY-this.end.y))}var ve=re.pdfViewer._pages[j.first-1].compdfAnnotationLayer;if(!ve)return;this.layer=ve,this.annotationContainer.remove(),this.outerLineContainer.remove();var ke=this.layer.div;ke.append(this.annotationContainer),ke.append(this.outerLineContainer)}else{q=s-(m.clickY-this.start.y),Q=u-(m.clickX-this.start.x),ne=u-(m.clickX-this.end.x),J=s-(m.clickY-this.end.y);var Ce=re.pageToWindow({x:Q,y:q},this.layer.page+1,!1),Pe=re.pageToWindow({x:ne,y:J},this.layer.page+1,!1),Me=0,Le=0;s>m.clickY?Le=(Le=w.offsetHeight-(Pe.y-w.scrollTop-w.offsetTop))<100?5:0:s<m.clickY&&(Le=(Le=Ce.y-w.scrollTop-w.offsetTop)<100?-5:0),u>m.clickX?Me=(Me=w.offsetWidth-(Pe.x-w.scrollLeft-w.offsetLeft))<100?5:0:u<m.clickX&&(Me=(Me=Ce.x-w.scrollLeft-w.offsetLeft)<100?-5:0),(Me||Le)&&(w.scrollTop+=Le,w.scrollLeft+=Me);var Te={width:Math.abs(v.x-y.x),height:Math.abs(v.y-y.y)};Q<ne?(Q=Math.max(d,Q),Q=Math.min(x-Te.width-d,Q),ne=Math.max(Te.width+d,ne),ne=Math.min(x-d,ne)):(ne=Math.max(d,ne),ne=Math.min(x-Te.width-d,ne),Q=Math.max(Te.width+d,Q),Q=Math.min(x-d,Q)),q<J?(q=Math.max(d,q),q=Math.min(k-Te.height-d,q),J=Math.max(Te.height+d,J),J=Math.min(k-d,J)):(J=Math.max(d,J),J=Math.min(k-Te.height-d,J),q=Math.max(Te.height+d,q),q=Math.min(k-d,q))}this.update({start:{x:Q,y:q},end:{x:ne,y:J}})}m.clickX=u,m.clickY=s}}},{key:"handleDelete",value:function(r){this.layer.tool&&r&&r.stopPropagation(),this.delete();var o={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(o.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",o)}},{key:"delete",value:function(){var r;this.handleOutside(),(r=this.annotationContainer)===null||r===void 0||r.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(r){if(r.button===0||r.type!=="mouseup"){this.layer.tool&&r.stopPropagation(),r.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var o=this.annotation,u=this.getInitialPoint(),s=u.start,w=u.end,g={left:s.x,top:s.y,right:w.x,bottom:w.y};if(g!==o.rect||o.pageIndex!==this.layer.page)if(o.rect=g,o.pageIndex!==this.layer.page){var v={type:"delete",annotation:{operate:"del-annot",name:o.name,pageIndex:o.pageIndex,annotPtr:o.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",v);var y=Object.assign({},o);delete y.annotPtr,delete y.pagePtr,delete y.name,y.operate="add-annot",y.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:y}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else{var m={operate:"mod-annot",name:o.name,pageIndex:this.layer.page,pagePtr:o.pagePtr,annotPtr:o.annotPtr,rect:g,linePoints:[g.left,g.bottom,g.right,g.top]};!o.annotPtr&&(m.linePoints=[g.left,g.bottom,g.right,g.top]),this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:m})}}}},{key:"update",value:function(r){var o=r.start,u=r.end,s=this.calculate(o,u);this.start=o,this.end=u;var w=(this.annotation.borderWidth||2)*this.layer.viewport.scale;this.annotationContainer.style.top=s.top+"px",this.annotationContainer.style.left=s.left+"px",this.annotationContainer.style.width=s.width+"px",this.annotationContainer.style.height=s.height+"px",this.svgElement.setAttribute("viewBox","0 0 ".concat(s.width," ").concat(s.height)),this.annotation.type==="square"?(this.shapeEle.setAttribute("width",s.width-w),this.shapeEle.setAttribute("height",s.height-w),this.selectionShapeEle.setAttribute("width",s.width-w),this.selectionShapeEle.setAttribute("height",s.height-w)):(this.shapeEle.setAttribute("cx",s.width/2),this.shapeEle.setAttribute("cy",s.height/2),this.shapeEle.setAttribute("rx",(s.width-w)/2),this.shapeEle.setAttribute("ry",(s.height-w)/2),this.selectionShapeEle.setAttribute("cx",s.width/2),this.selectionShapeEle.setAttribute("cy",s.height/2),this.selectionShapeEle.setAttribute("rx",(s.width-w)/2),this.selectionShapeEle.setAttribute("ry",(s.height-w)/2));var g=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2;this.outerLine.style.left="".concat(s.left-g,"px"),this.outerLine.style.top="".concat(s.top-g,"px"),this.outerLine.style.width="".concat(s.width+2*g,"px"),this.outerLine.style.height="".concat(s.height+2*g,"px"),this.popupElement.style.left=s.left+s.width-114+"px",this.popupElement.style.top=s.top+s.height+12+"px",this.moveRect.setAttribute("width",s.width+this.selectionOutlinePadding),this.moveRect.setAttribute("height",s.height+this.selectionOutlinePadding),this.LeftRect.setAttribute("y",(s.height+this.selectionOutlinePadding)/2),this.bottomLeftRect.setAttribute("y",s.height+this.selectionOutlinePadding),this.bottomRect.setAttribute("x",(s.width+this.selectionOutlinePadding)/2),this.bottomRect.setAttribute("y",s.height+this.selectionOutlinePadding),this.bottomRightRect.setAttribute("x",s.width+this.selectionOutlinePadding),this.bottomRightRect.setAttribute("y",s.height+this.selectionOutlinePadding),this.rightRect.setAttribute("x",s.width+this.selectionOutlinePadding),this.rightRect.setAttribute("y",(s.height+this.selectionOutlinePadding)/2),this.topRightRect.setAttribute("x",s.width+this.selectionOutlinePadding),this.topRect.setAttribute("x",(s.width+this.selectionOutlinePadding)/2)}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"handlePropertyPanel",value:function(r){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var o=this.annotation,u=0;for(var s in r)for(var w in o){var g=r[s];if(w===s&&o[w]!==g){if(o[s]=g,u++,s==="fillColor"&&this.shapeEle.setAttribute("fill",g||"none"),s==="fillTransparency"&&this.shapeEle.setAttribute("fill-opacity",g),s==="borderColor"&&(o.color=g,this.shapeEle.setAttribute("stroke",g)),s==="opacity"&&this.shapeEle.setAttribute("stroke-opacity",g),s==="borderWidth"){var v=this.calculate(this.start,this.end),y=g*this.layer.viewport.scale;this.shapeEle.setAttribute("width",Math.abs(v.width-y)),this.shapeEle.setAttribute("height",Math.abs(v.height-y)),this.shapeEle.setAttribute("x",y/2),this.shapeEle.setAttribute("y",y/2),this.shapeEle.setAttribute("stroke-width",y),this.selectionShapeEle.setAttribute("x",y/2),this.selectionShapeEle.setAttribute("y",y/2),this.selectionShapeEle.setAttribute("stroke-width",(g+8)*this.layer.viewport.scale),this.update({start:this.start,end:this.end})}s==="borderStyle"&&(g==="solid"&&this.shapeEle.setAttribute("stroke-dasharray",""),g==="dashed"&&this.shapeEle.setAttribute("stroke-dasharray",this.getDashString())),s==="dashes"&&this.shapeEle.setAttribute("stroke-dasharray",this.getDashString())}}if(u>0){var m={operate:"mod-annot",name:o.name,pageIndex:this.layer.page,pagePtr:o.pagePtr,annotPtr:o.annotPtr};r.dashes&&(m.borderStyle=o.borderStyle,m.borderWidth=o.borderWidth),r.borderStyle&&(m.dashes=r.borderStyle==="solid"?[]:o.dashes,m.borderWidth=o.borderWidth),r.borderColor&&(m.color=o.color);var d=Object.assign({},m,r);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:d})}}}},{key:"getDashString",value:function(){if(!this.annotation.dashes||this.annotation.dashes.length===0)return 0;var r=this.annotation.dashes,o=window.devicePixelRatio||1,u=Math.ceil(o*this.layer.viewport.scale),s="";return r.length===1||r.length===2&&r[0]===r[1]?s=Math.ceil(r[0]*u)+"":r.length>2&&(s=r.map(function(w){return Math.ceil(w*u)}).join(", ")),s}}])}(),Ink=function(e){function n(r){var o,u=r.annotation,s=r.layer,w=r.show,g=w!==void 0&&w,v=r.enableReply,y=v===void 0||v;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:u,layer:s}])).enableReply=y,o.show=g,o.hidden=!0,o.initial=!1,o.start=null,o.end=null,o.rect=null,o.newStart=null,o.newEnd=null,o.svgElement=null,o.startCircle=null,o.endCircle=null,o.startState=null,o.selectionOutlinePadding=8,o.selectionOutlinePointWidth=6,o.onMousedown=o.handleMouseDown.bind(o),o.onMouseup=o.handleMouseUp.bind(o),o.onMousemove=o.handleMouseMove.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.onKeydown=o.handleKeyDown.bind(o),o.handlePropertyPanel=o.handlePropertyPanel.bind(o),o.inkPath=[],o.render(),o}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"formatePoint",value:function(r,o){var u=getActualPoint({x:r,y:o},this.layer.viewport.scale);return[u.x,u.y]}},{key:"rectCalc",value:function(r){var o=r.start,u=r.end;return{top:o.y<u.y?o.y:u.y,left:o.x<u.x?o.x:u.x,width:Math.abs(u.x-o.x),height:Math.abs(u.y-o.y)}}},{key:"calculate",value:function(r,o){var u=this.rectCalc({start:r,end:o});return{top:u.top,left:u.left,width:u.width,height:u.height}}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove(),document.removeEventListener("keydown",this.onKeydown);else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var r=this.annotation;this.layer.annotationStore.selectedElementName=r.name;var o=_objectSpread2$1({},r);delete o.annotPtr,delete o.pagePtr,delete o.operate,delete o.targetPage,this.layer.eventBus.dispatch("annotationSelected",o)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(r){if(this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(r==null?void 0:r.target)){this.hidden=!1,this.updateTool(),this.layer.eventBus._on("annotationPropertyChanged",this.handlePropertyPanel);var o=[this.svgElement,,this.popupElement,this.outerLine,document.querySelector(".annotation-panel")],u=document.getElementById("annotationPropertyPanelButton");u&&o.push(u);var s=document.querySelector(".toggle-button");s&&o.push(s),onClickOutside$1(o,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var r,o,u;this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),(r=this.outerLine)===null||r===void 0||r.removeEventListener("mousedown",this.onMousedown),(o=this.outerLine)===null||o===void 0||o.removeEventListener("touchstart",this.onMousedown),(u=this.outerLineContainer)===null||u===void 0||u.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("annotationPropertyChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(r){if(r.button===0||r.type!=="mousedown"){this.layer.tool&&r.stopPropagation(),this.ratioRateX=this.rect.height/this.rect.width,this.ratioRateY=this.rect.width/this.rect.height;var o=r.target.getAttribute("data-id"),u=this.layer.documentViewer.getScrollViewElement();this.scrollTop=u.scrollTop,this.scrollLeft=u.scrollLeft;var s=getClickPoint(r),w=s.pageX,g=s.pageY;this.startState={operator:o,clickX:w,clickY:g},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(r){if(r.button===0||r.type!=="mousemove"){r.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var o=getClickPoint(r),u=o.pageX,s=o.pageY,w=this.layer.documentViewer.getScrollViewElement(),g=w.scrollTop;u=u+w.scrollLeft-this.scrollLeft,s=s+g-this.scrollTop;var v=this.start,y=this.end,m=this.startState,d=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2,f=this.layer.viewport,x=f.width,k=f.height;if(m.operator==="nw-resize"){var P=u-(m.clickX-this.start.x),S=s-(m.clickY-this.start.y);if(P=Math.min(y.x-5,P),P=Math.max(d,P),S=Math.min(y.y-5,S),S=Math.max(d,S),(r.shiftKey||r.type==="touchmove")&&this.ratioRateX){var E=(P-this.start.x)*this.ratioRateX;if((S=this.start.y+E)<d||P<d)return}this.update({start:{x:P,y:S},end:y})}else if(m.operator==="w-resize"){var M=u-(m.clickX-this.start.x);M=Math.min(y.x-5,M),M=Math.max(d,M);var T=v.y;if((r.shiftKey||r.type==="touchmove")&&(T=Math.max(k,T),T=Math.min(y.y-5,T),this.ratioRateX)){var D=(M-this.start.x)*this.ratioRateX;if((T=this.start.y+D)>=k-d||M<d)return}this.update({start:{x:M,y:T},end:y})}else if(m.operator==="sw-resize"){var I=u-(m.clickX-this.start.x),N=s-(m.clickY-this.end.y);if(I=Math.min(y.x-5,I),I=Math.max(d,I),N=Math.min(k-d,N),N=Math.max(v.y+5,N),(r.shiftKey||r.type==="touchmove")&&this.ratioRateX){var O=(I-this.start.x)*this.ratioRateX;if((N=this.end.y-O)>=k-d||I<d)return}this.update({start:{x:I,y:v.y},end:{x:y.x,y:N}})}else if(m.operator==="s-resize"){var F=s-(m.clickY-this.end.y);if(F=Math.min(k-d,F),F=Math.max(v.y+5,F),r.shiftKey||r.type==="touchmove"){if(this.ratioRateX){var U=(F-this.end.y)*this.ratioRateY,Y=this.end.x+U;if(Y=Math.min(x,Y),Y=Math.max(v.x+5,Y),F>=k-d||Y>=x-d)return;this.update({start:v,end:{x:Y,y:F}})}}else this.update({start:v,end:{x:y.x,y:F}})}else if(m.operator==="se-resize"){var Q=u-(m.clickX-this.end.x),q=s-(m.clickY-this.end.y);if(Q=Math.min(x-d,Q),Q=Math.max(v.x+5,Q),q=Math.min(k-d,q),q=Math.max(v.y+5,q),(r.shiftKey||r.type==="touchmove")&&this.ratioRateX){var ne=(this.end.x-Q)*this.ratioRateX;if((q=this.end.y-ne)>=k-d||Q>=x-d)return}this.update({start:v,end:{x:Q,y:q}})}else if(m.operator==="e-resize"){var J=u-(m.clickX-this.end.x);if(J=Math.min(x-d,J),J=Math.max(v.x+5,J),r.shiftKey||r.type==="touchmove"){if(this.ratioRateX){var re=s-(m.clickY-this.end.y);re=Math.min(k,re),re=Math.max(v.y+5,re);var X=(this.end.x-J)*this.ratioRateX;if((re=this.end.y-X)>=k-d||J>=x-d)return;this.update({start:v,end:{x:J,y:re}})}}else this.update({start:v,end:{x:J,y:y.y}})}else if(m.operator==="ne-resize"){var j=u-(m.clickX-this.end.x),Z=s-(m.clickY-this.start.y);if(j=Math.min(x-d,j),j=Math.max(v.x+5,j),Z=Math.min(y.y-5,Z),Z=Math.max(d,Z),(r.shiftKey||r.type==="touchmove")&&this.ratioRateX){var W=(this.end.x-j)*this.ratioRateX;if((Z=this.start.y+W)<=d||j>=x-d)return}this.update({start:{x:v.x,y:Z},end:{x:j,y:y.y}})}else if(m.operator==="n-resize"){var te=s-(m.clickY-this.start.y);if(te=Math.min(y.y-5,te),te=Math.max(d,te),r.shiftKey||r.type==="touchmove"){if(this.ratioRateX){var le=(te-this.start.y)*this.ratioRateY,oe=this.end.x-le;if(oe=Math.min(x,oe),oe=Math.max(v.x+5,oe),te>=k-d||oe>=x-d)return;this.update({start:{x:v.x,y:te},end:{x:oe,y:y.y}})}}else this.update({start:{x:v.x,y:te},end:y})}else if(m.operator==="move"){var Ee,Ae,ve,ke,Ce=this.layer.documentViewer,Pe=this.getMouseLocation(r),Me=Ce.getSelectedPage(Pe,Pe);if(Me.first&&Me.first!==this.layer.page+1){var Le=Ce.windowToPage(Pe,Me.first,!1),Te=Math.abs(v.x-y.x),ye=Math.abs(v.y-y.y);if(Ce.pdfViewer.spreadMode===0&&Ce.pdfViewer.scrollMode===0)Ee=u-(m.clickX-this.start.x),Ae=Me.first>this.layer.page+1?Le.y:Le.y-ye,ve=u-(m.clickX-this.end.x),ke=Me.first>this.layer.page+1?Le.y+ye:Le.y;else if(Ce.pdfViewer.spreadMode===0&&Ce.pdfViewer.scrollMode===1)Ee=Me.first>this.layer.page+1?Le.x:Le.x-Te,Ae=s-(m.clickY-this.start.y),ve=Me.first>this.layer.page+1?Le.x+Te:Le.x,ke=s-(m.clickY-this.end.y);else if(Ce.pdfViewer.spreadMode===1&&Ce.pdfViewer.scrollMode===0){var _e=Math.min(Me.first,this.layer.page+1),we=Math.max(Me.first,this.layer.page+1);if(we-_e>2||_e+1===we&&_e%2==0)return;_e+1===we?(Ee=Me.first>this.layer.page+1?Le.x:Le.x-Te,Ae=s-(m.clickY-this.start.y),ve=Me.first>this.layer.page+1?Le.x+Te:Le.x,ke=s-(m.clickY-this.end.y)):_e+2===we&&(Ee=u-(m.clickX-this.start.x),Ae=Me.first>this.layer.page+1?Le.y:Le.y-ye,ve=u-(m.clickX-this.end.x),ke=Me.first>this.layer.page+1?Le.y+ye:Le.y)}else if(Ce.pdfViewer.spreadMode===2&&Ce.pdfViewer.scrollMode===0){var Se=Math.min(Me.first,this.layer.page+1),$e=Math.max(Me.first,this.layer.page+1);if($e-Se>2||Se+1===$e&&(Se!==1||$e!==2)&&$e%2==0||Se===1&&$e===3)return;Se+2===$e||Se===1&&$e===2?(Ee=u-(m.clickX-this.start.x),Ae=Me.first>this.layer.page+1?Le.y:Le.y-ye,ve=u-(m.clickX-this.end.x),ke=Me.first>this.layer.page+1?Le.y+ye:Le.y):Se+1===$e&&(Ee=Me.first>this.layer.page+1?Le.x:Le.x-Te,Ae=s-(m.clickY-this.start.y),ve=Me.first>this.layer.page+1?Le.x+Te:Le.x,ke=s-(m.clickY-this.end.y))}var Be=Ce.pdfViewer._pages[Me.first-1].compdfAnnotationLayer;if(!Be)return;this.layer=Be,this.annotationContainer.remove(),this.outerLineContainer.remove();var Oe=this.layer.div;Oe.append(this.annotationContainer),Oe.append(this.outerLineContainer)}else{Ee=u-(m.clickX-v.x),Ae=s-(m.clickY-v.y),ve=u-(m.clickX-y.x),ke=s-(m.clickY-y.y);var Ge=Ce.pageToWindow({x:Ee,y:Ae},this.layer.page+1,!1),Ie=Ce.pageToWindow({x:ve,y:ke},this.layer.page+1,!1),je=0,qe=0;s>m.clickY?qe=(qe=w.offsetHeight-(Ie.y-w.scrollTop-w.offsetTop))<100?5:0:s<m.clickY&&(qe=(qe=Ge.y-w.scrollTop-w.offsetTop)<100?-5:0),u>m.clickX?je=(je=w.offsetWidth-(Ie.x-w.scrollLeft-w.offsetLeft))<100?5:0:u<m.clickX&&(je=(je=Ge.x-w.scrollLeft-w.offsetLeft)<100?-5:0),(je||qe)&&(w.scrollTop+=qe,w.scrollLeft+=je);var Ue={width:Math.abs(v.x-y.x),height:Math.abs(v.y-y.y)};Ee<ve?(Ee=Math.max(d,Ee),Ee=Math.min(x-Ue.width-d,Ee),ve=Math.max(Ue.width+d,ve),ve=Math.min(x-d,ve)):(ve=Math.max(d,ve),ve=Math.min(x-Ue.width-d,ve),Ee=Math.max(Ue.width+d,Ee),Ee=Math.min(x-d,Ee)),Ae<ke?(Ae=Math.max(d,Ae),Ae=Math.min(k-Ue.height-d,Ae),ke=Math.max(Ue.height+d,ke),ke=Math.min(k-d,ke)):(ke=Math.max(d,ke),ke=Math.min(k-Ue.height-d,ke),Ae=Math.max(Ue.height+d,Ae),Ae=Math.min(k-d,Ae))}this.update({start:{x:Ee,y:Ae},end:{x:ve,y:ke}})}m.clickX=u,m.clickY=s}}},{key:"handleDelete",value:function(r){this.layer.tool&&r&&r.stopPropagation(),this.delete();var o={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(o.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",o)}},{key:"delete",value:function(){var r;this.handleOutside(),(r=this.annotationContainer)===null||r===void 0||r.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleKeyDown",value:function(r){}},{key:"handleMouseUp",value:function(r){if(r.button===0||r.type!=="mouseup"){this.layer.tool&&r.stopPropagation(),r.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0,this.startState=null;var o=getInitialPoint(this.start,this.layer.viewport.scale),u=getInitialPoint(this.end,this.layer.viewport.scale),s={left:o.x,top:o.y,right:u.x,bottom:u.y},w=this.annotation;if(s!==w.rect||w.pageIndex!==this.layer.page){w.rect=s;for(var g=[],v=0;v<this.inkPath.length;v++){for(var y=[],m=0;m<this.inkPath[v].length;m++)y.push({PointX:this.inkPath[v][m].x/this.layer.viewport.scale+o.x,PointY:o.y+this.inkPath[v][m].y/this.layer.viewport.scale});g.push(y)}if(w.inkPointes=g,w.pageIndex!==this.layer.page){var d={type:"delete",annotation:{operate:"del-annot",name:w.name,pageIndex:w.pageIndex,annotPtr:w.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",d);var f=Object.assign({},w);delete f.annotPtr,delete f.pagePtr,delete f.name,f.operate="add-annot",f.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:f}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,inkPointes:g,rect:s}})}}}},{key:"handlePoint",value:function(r){var o=this.rect,u=getInitialPoint({x:r[0]+o.left,y:r[1]+o.top},this.layer.viewport.scale);return u.x+","+u.y}},{key:"update",value:function(r){var o=r.start,u=r.end,s=this.calculate(o,u);if(this.startState&&this.startState.operator!=="move")for(var w=s.width/this.rect.width,g=s.height/this.rect.height,v=0;v<this.inkPath.length;v++)for(var y=0;y<this.inkPath[v].length;y++)this.inkPath[v][y].x=w*this.inkPath[v][y].x,this.inkPath[v][y].y=g*this.inkPath[v][y].y;this.rect=s,this.start=o,this.end=u;var m=this.annotation,d=this.annotation.borderWidth*this.layer.viewport.scale;this.annotationContainer.style.top=s.top-d+"px",this.annotationContainer.style.left=s.left-d+"px",this.annotationContainer.style.width=s.width+2*d+"px",this.annotationContainer.style.height=s.height+2*d+"px",this.svgElement.setAttribute("viewBox","".concat(-d," ").concat(-d," ").concat(s.width+2*d," ").concat(s.height+2*d)),this.svgElement.innerHTML="";for(var f=0;f<this.inkPath.length;f++)if(this.inkPath[f].length>1){for(var x=document.createElementNS("http://www.w3.org/2000/svg","path"),k="M "+this.inkPath[f][0].x.toFixed(2)+" "+this.inkPath[f][0].y.toFixed(2),P=1;P<this.inkPath[f].length;P++)k=k+" L "+this.inkPath[f][P].x.toFixed(2)+" "+this.inkPath[f][P].y.toFixed(2);if(x.setAttribute("d",k),x.setAttribute("stroke",m.borderColor),x.setAttribute("stroke-width",d),x.setAttribute("stroke-opacity",m.opacity||1),x.setAttribute("fill","none"),x.setAttribute("fill-opacity",0),d<5){var S=document.createElementNS("http://www.w3.org/2000/svg","path");S.setAttribute("d",k),S.setAttribute("stroke",m.borderColor),S.setAttribute("stroke-width",d+8*this.layer.viewport.scale),S.setAttribute("stroke-opacity",0),S.setAttribute("fill","none"),S.setAttribute("fill-opacity",0),x.style.pointerEvents="none",this.svgElement.append(S)}this.svgElement.append(x)}else if(this.inkPath[f].length==1){var E=document.createElementNS("http://www.w3.org/2000/svg","circle");E.setAttribute("cx",this.inkPath[f][0].x.toFixed(2)),E.setAttribute("cy",this.inkPath[f][0].y.toFixed(2)),E.setAttribute("r",d/2),E.setAttribute("fill",m.borderColor),this.svgElement.append(E)}var M=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2;this.outerLine.style.left="".concat(s.left-M,"px"),this.outerLine.style.top="".concat(s.top-M,"px"),this.outerLine.style.width="".concat(s.width+2*M,"px"),this.outerLine.style.height="".concat(s.height+2*M,"px"),this.popupElement.style.left=s.left+s.width-114+"px",this.popupElement.style.top=s.top+s.height+12+"px",this.moveRect.setAttribute("width",s.width+this.selectionOutlinePadding),this.moveRect.setAttribute("height",s.height+this.selectionOutlinePadding),this.LeftRect.setAttribute("y",(s.height+this.selectionOutlinePadding)/2),this.bottomLeftRect.setAttribute("y",s.height+this.selectionOutlinePadding),this.bottomRect.setAttribute("x",(s.width+this.selectionOutlinePadding)/2),this.bottomRect.setAttribute("y",s.height+this.selectionOutlinePadding),this.bottomRightRect.setAttribute("x",s.width+this.selectionOutlinePadding),this.bottomRightRect.setAttribute("y",s.height+this.selectionOutlinePadding),this.rightRect.setAttribute("x",s.width+this.selectionOutlinePadding),this.rightRect.setAttribute("y",(s.height+this.selectionOutlinePadding)/2),this.topRightRect.setAttribute("x",s.width+this.selectionOutlinePadding),this.topRect.setAttribute("x",(s.width+this.selectionOutlinePadding)/2)}},{key:"render",value:function(){var r=this.annotation,o=r.rect,u=o.left,s=o.top,w=o.right,g=o.bottom;u=parseFloat(u*this.layer.viewport.scale),g=parseFloat(g*this.layer.viewport.scale),w=parseFloat(w*this.layer.viewport.scale);var v={left:u,top:s=parseFloat(s*this.layer.viewport.scale),bottom:g,right:w,width:w-u,height:g-s};this.rect=v,this.start={x:v.left,y:v.top},this.end={x:v.right,y:v.bottom},r.borderColor||(r.borderColor="#000000");for(var y=r.inkPointes,m=0;m<y.length;m++){for(var d=y[m],f=[],x=0;x<d.length;x++){var k=d[x],P=this.formatePoint(parseFloat(k.PointX),parseFloat(k.PointY));f.push({x:parseFloat(P[0].toFixed(2))-this.rect.left,y:parseFloat(P[1].toFixed(2))-this.rect.top})}f.length>0&&this.inkPath.push(f)}var S=this.annotation.borderWidth*this.layer.viewport.scale,E=document.createElement("div");E.id=r.name,E.className="annotation",E.style.top=v.top-S+"px",E.style.left=v.left-S+"px",E.style.width=v.width+2*S+"px",E.style.height=v.height+2*S+"px",this.annotationContainer=E,this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.setAttribute("viewBox","".concat(-S," ").concat(-S," ").concat(v.width+2*S," ").concat(v.height+2*S)),this.svgElement.addEventListener("mousedown",this.handleClick.bind(this));for(var M=0;M<this.inkPath.length;M++)if(this.inkPath[M].length>1){for(var T=document.createElementNS("http://www.w3.org/2000/svg","path"),D="M "+this.inkPath[M][0].x.toFixed(2)+" "+this.inkPath[M][0].y.toFixed(2),I=1;I<this.inkPath[M].length;I++)D=D+" L "+this.inkPath[M][I].x.toFixed(2)+" "+this.inkPath[M][I].y.toFixed(2);if(T.setAttribute("d",D),T.setAttribute("stroke",r.borderColor),T.setAttribute("stroke-width",S),T.setAttribute("stroke-opacity",r.opacity||1),T.setAttribute("fill","none"),T.setAttribute("fill-opacity",0),S<5){var N=document.createElementNS("http://www.w3.org/2000/svg","path");N.setAttribute("d",D),N.setAttribute("stroke",r.borderColor),N.setAttribute("stroke-width",S+8*this.layer.viewport.scale),N.setAttribute("stroke-opacity",0),N.setAttribute("fill","none"),N.setAttribute("fill-opacity",0),T.style.pointerEvents="none",this.svgElement.append(N)}this.svgElement.append(T)}else if(this.inkPath[M].length==1){var O=document.createElementNS("http://www.w3.org/2000/svg","circle");O.setAttribute("cx",this.inkPath[M][0].x.toFixed(2)),O.setAttribute("cy",this.inkPath[M][0].y.toFixed(2)),O.setAttribute("r",S/2),O.setAttribute("fill",r.borderColor),this.svgElement.append(O)}this.annotationContainer.append(this.svgElement),this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:v.left+v.width-114+"px",top:v.top+v.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,this.replyButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr;var F=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2;this.outerLine=createSvg("svg",{},{position:"absolute",left:"".concat(v.left-F,"px"),top:"".concat(v.top-F,"px"),width:"".concat(v.width+2*F,"px"),height:"".concat(v.height+2*F,"px"),zIndex:1}),this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"fill-opacity":0,width:v.width+this.selectionOutlinePadding,height:v.height+this.selectionOutlinePadding,x:this.selectionOutlinePointWidth/2,y:this.selectionOutlinePointWidth/2}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:0,y:(v.height+this.selectionOutlinePadding)/2}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:0,y:v.height+this.selectionOutlinePadding}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:(v.width+this.selectionOutlinePadding)/2,y:v.height+this.selectionOutlinePadding}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:v.width+this.selectionOutlinePadding,y:v.height+this.selectionOutlinePadding}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:v.width+this.selectionOutlinePadding,y:(v.height+this.selectionOutlinePadding)/2}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:v.width+this.selectionOutlinePadding,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:(v.width+this.selectionOutlinePadding)/2,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine);var U=this.layer.documentViewer.isAnnotationPopup;U&&this.outerLineContainer.append(this.popupElement),U&&this.enableReply&&this.popupElement.append(this.replyButton),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1)}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"handlePropertyPanel",value:function(r){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var o=this.annotation,u=0;for(var s in r)for(var w in o){var g=r[s];w===s&&o[w]!==g&&(o[s]=g,u++,["borderColor","borderWidth","opacity"].includes(s)&&this.update({start:this.start,end:this.end}))}if(u>0){var v={operate:"mod-annot",name:o.name,pageIndex:this.layer.page,pagePtr:o.pagePtr,annotPtr:o.annotPtr};r.borderColor&&(o.color=o.borderColor,v.color=o.color);var y=Object.assign({},v,r);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:y})}}}}])}(),Freetext$1=function(e){function n(r){var o,u=r.annotation,s=u===void 0?null:u,w=r.layer,g=r.show,v=g!==void 0&&g,y=r.enableReply,m=y===void 0||y;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:s,layer:w}])).enableReply=m,o.hidden=!0,o.initial=!1,o.leftTop=null,o.rightBottom=null,o.newLeftTop=null,o.newRightBottom=null,o.startCircle=null,o.endCircle=null,o.show=v,o.editing=!1,o.lastClickTime=null,o.onContainerClick=o.handleContainerClick.bind(o),o.onMousedown=o.handleMouseDown.bind(o),o.onMousemove=o.handleMouseMove.bind(o),o.onMouseup=o.handleMouseUp.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.onBlur=o.handleFreetextEditElementBlur.bind(o),o.onSingleClick=o.onSingleClick.bind(o),o.onDbclick=o.handleElementDbClick.bind(o),o.handleStopPropagation=o.handleStopPropagation.bind(o),o.onPaste=o.handleFreetextEditElementPaste.bind(o),o.render(),o}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"setCss",value:function(r,o){if(r&&o)for(var u in o)r.style[u]=o[u]}},{key:"render",value:function(){var r=this.layer.viewport,o=r.width,u=r.height,s=this.annotation,w=this.getActualRect(this.layer.viewport.scale),g=w.leftTop,v=w.rightBottom;this.initialRect={width:Math.abs(g.x-v.x),height:Math.abs(g.y-v.y)},this.leftTop=g,this.rightBottom=v;var y=this.calculate(this.leftTop,this.rightBottom);s.color||(s.color="#000000"),s.fontSize||(s.fontSize=16),s.fontWeight||(s.fontWeight="normal"),s.fontStyle||(s.fontStyle="normal");var m=document.createElement("div");m.className="annotation",this.setCss(m,{top:y.top-2+"px",left:y.left-4+"px"}),this.annotationContainer=m;var d=document.createElement("div");d.setAttribute("role","textbox"),d.setAttribute("contenteditable",!0),d.setAttribute("spellcheck",!1),d.className="freetext";var f=o-this.leftTop.x,x=u-this.leftTop.y,k=s.textAlignment||"left",P=this.layer.viewport.scale;this.setCss(d,{maxWidth:f+"px",maxHeight:x+"px",width:y.width+"px",height:y.height+"px",fontSize:s.fontSize*P+"pt",lineHeight:"1.2em",fontFamily:s.fontName,fontWeight:s.fontWeight,fontStyle:s.fontStyle,color:s.color,opacity:s.opacity,textAlign:k,verticalAlign:"bottom",borderWidth:(s.borderWidth||0)+"px",borderColor:s.borderColor?s.borderColor:"#000000",borderStyle:s.borderStyle?s.borderStyle:"solid",overflow:"auto",backgroundColor:s.fillColor?s.fillColor:"transparent","-webkit-user-select":"text"}),this.freetextEditElement=d;var S=document.createElement("div");if(S.className="freetext",this.setCss(S,{width:y.width+"px",height:y.height+"px",fontFamily:s.fontName,fontWeight:s.fontWeight,fontStyle:s.fontStyle,opacity:s.opacity,lineHeight:"1.2em",color:s.color,fontSize:s.fontSize*P+"pt",textAlign:k,verticalAlign:"bottom",borderWidth:(s.borderWidth||0)+"px",borderColor:s.borderColor?s.borderColor:"#000000",borderStyle:s.borderStyle?s.borderStyle:"solid",overflow:"hidden",backgroundColor:s.fillColor?s.fillColor:"transparent"}),s.contents)S.innerHTML=s.contents,d.innerHTML=s.contents;else if(s["contents-richtext"]){var E=new window.DOMParser().parseFromString(s["contents-richtext"],"text/xml");E.getElementsByTagName("parsererror").length>0?(S.innerHTML=s["contents-richtext"],d.innerHTML=s["contents-richtext"]):(S.innerHTML=E.firstElementChild.innerText,d.innerHTML=E.firstElementChild.innerText)}this.freetextElement=S,this.appendOrRemoveFreetextElement("append"),this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container";var M=createSvg("svg",null,{position:"absolute",zIndex:1,left:"".concat(y.left-12,"px"),top:"".concat(y.top-9,"px"),width:"".concat(y.width+16,"px"),height:"".concat(y.height+15,"px")});this.outerLine=M,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"fill-opacity":0,width:y.width+10,height:y.height+9,x:3,y:3}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:y.height/2+4}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:0,y:y.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:y.width/2+5,y:y.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:y.width+10,y:y.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:y.width+10,y:y.height/2+4}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:y.width+10,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:6,height:6,x:y.width/2+5,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.layer.documentViewer.isAnnotationPopup,this.initial=!0,this.show&&!this.layer.addMode&&this.handleElementSelect()}},{key:"handleElementDbClick",value:function(r){r&&r.stopPropagation(),r&&r.preventDefault(),console.log(333),this.freetextEditElement&&(this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLine.removeEventListener("dblclick",this.onDbclick),this.outerLine.removeEventListener("dblclick",this.onSingleClick),this.outerLineContainer.remove(),this.appendOrRemoveFreetextElement("remove"),this.appendOrRemoveFreetextEditElement("append"),this.editing=!0)}},{key:"getFreetextRectPoint",value:function(){var r=this.freetextEditElement.getBoundingClientRect(),o=r.width,u=r.height,s=this.leftTop,w=s.x+o,g=s.y+u,v=w>this.rightBottom.x?w:this.rightBottom.x,y=g>this.rightBottom.y?g:this.rightBottom.y;this.rightBottom={x:v,y}}},{key:"getFreetextRect",value:function(){var r=this.layer.viewport.scale;this.getFreetextRectPoint();var o=getInitialPoint(this.leftTop,r),u=getInitialPoint(this.rightBottom,r);return{left:o.x,top:o.y,right:u.x,bottom:u.y}}},{key:"fontName",set:function(r){var o=this.annotation;this.annotation.fontName!==r&&(this.setCss(this.freetextEditElement,{fontFamily:r}),this.setCss(this.freetextElement,{fontFamily:r}),this.annotation.fontName=r,this.setAnnotationChanged({contents:o.contents,textAlignment:o.textAlignment,fontName:r,fontWeight:o.fontWeight,fontStyle:o.fontStyle,fontSize:o.fontSize,color:o.color}))}},{key:"fontStyle",set:function(r){var o=this.annotation;r!==o.fontStyle&&(this.setCss(this.freetextEditElement,{fontStyle:r}),this.setCss(this.freetextElement,{fontStyle:r}),this.annotation.fontStyle=r,this.setAnnotationChanged({contents:o.contents,textAlignment:o.textAlignment,fontName:o.fontName,fontWeight:o.fontWeight,fontStyle:r,fontSize:o.fontSize,color:o.color}))}},{key:"fontWeight",set:function(r){var o=this.annotation;r!==o.fontWeight&&(this.setCss(this.freetextEditElement,{fontWeight:r}),this.setCss(this.freetextElement,{fontWeight:r}),this.annotation.fontWeight=r,this.setAnnotationChanged({contents:o.contents,textAlignment:o.textAlignment,fontName:o.fontName,fontWeight:r,fontStyle:o.fontStyle,fontSize:o.fontSize,color:o.color}))}},{key:"fontSize",set:function(r){var o=this.annotation;if(o.fontSize!==r){var u=this.layer.viewport.scale;this.setCss(this.freetextEditElement,{fontSize:r*u+"pt"}),this.setCss(this.freetextElement,{fontSize:r*u+"pt"}),o.fontSize=r,this.setAnnotationChanged({contents:o.contents,textAlignment:o.textAlignment,fontName:o.fontName,fontWeight:o.fontWeight,fontStyle:o.fontStyle,fontSize:r,color:o.color})}}},{key:"textAlignment",set:function(r){var o=this.annotation;o.textAlignment!==r&&(this.setCss(this.freetextEditElement,{textAlign:r}),this.setCss(this.freetextElement,{textAlign:r}),o.textAlignment=r,this.setAnnotationChanged({contents:o.contents,textAlignment:r,fontName:o.fontName,fontWeight:o.fontWeight,fontStyle:o.fontStyle,fontSize:o.fontSize,color:o.color}))}},{key:"color",set:function(r){var o=this.annotation;o.color!==r&&(this.setCss(this.freetextEditElement,{color:r}),this.setCss(this.freetextElement,{color:r}),o.color=r,this.setAnnotationChanged({contents:o.contents,textAlignment:o.textAlignment,fontName:o.fontName,fontWeight:o.fontWeight,fontStyle:o.fontStyle,fontSize:o.fontSize,color:r}))}},{key:"borderWidth",set:function(r){var o=this.annotation;o.borderWidth!==r&&(this.setCss(this.freetextEditElement,{borderWidth:r+"px",borderColor:o.borderColor?o.borderColor:"#000000",borderStyle:o.borderStyle?o.borderStyle:"solid"}),this.setCss(this.freetextElement,{borderWidth:r+"px",borderColor:o.borderColor?o.borderColor:"#000000",borderStyle:o.borderStyle?o.borderStyle:"solid"}),o.borderWidth=r,this.setAnnotationChanged({borderWidth:r}))}},{key:"borderColor",set:function(r){var o=this.annotation;o.borderColor!==r&&(this.setCss(this.freetextEditElement,{borderColor:r}),this.setCss(this.freetextElement,{borderColor:r}),o.borderColor=r,this.setAnnotationChanged({borderColor:r}))}},{key:"fillColor",set:function(r){var o=this.annotation;o.fillColor!==r&&(this.setCss(this.freetextEditElement,{backgroundColor:r&&r!=="transparent"?r:"transparent"}),this.setCss(this.freetextElement,{backgroundColor:r&&r!=="transparent"?r:"transparent"}),o.fillColor=r,this.setAnnotationChanged({fillColor:r}))}},{key:"opacity",set:function(r){var o=this.annotation;o.opacity!==r&&(this.setCss(this.freetextEditElement,{opacity:r}),this.setCss(this.freetextElement,{opacity:r}),o.opacity=r,this.setAnnotationChanged({opacity:r}))}},{key:"setAnnotationChanged",value:function(r){var o=this.annotation;this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:_objectSpread2$1({type:"freetext",operate:"mod-annot",name:o.name,pageIndex:this.layer.page,pagePtr:o.pagePtr,annotPtr:o.annotPtr},r)})}},{key:"handleFreetextEditElementBlur",value:function(){var r=this.freetextEditElement;if(r&&r.innerText!==this.annotation.contents){var o=this.getFreetextRect(),u=this.annotation,s=getHtmlToText(r);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:u.name,pageIndex:this.layer.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr,contents:s,rect:o}}),this.update({leftTop:this.leftTop,rightBottom:this.rightBottom}),this.annotation.contents=s,this.freetextElement.innerText=s}this.appendOrRemoveFreetextEditElement("remove"),this.appendOrRemoveFreetextElement("append"),this.handleContainerClick(),this.editing=!1}},{key:"appendOrRemoveFreetextElement",value:function(r){var o=this.freetextElement;r==="append"?(o.addEventListener("mousedown",this.onContainerClick),this.annotationContainer.append(o)):(o.removeEventListener("mousedown",this.onContainerClick),o.remove())}},{key:"appendOrRemoveFreetextEditElement",value:function(r){var o=this.freetextEditElement;r==="append"?(o.addEventListener("blur",this.onBlur),o.addEventListener("click",this.handleStopPropagation),o.addEventListener("paste",this.onPaste),this.annotationContainer.append(o),o.focus(),keepLastIndex(o)):(o.removeEventListener("blur",this.onBlur),o.removeEventListener("click",this.handleStopPropagation),o.removeEventListener("paste",this.onPaste),o.remove())}},{key:"handleElementSelect",value:function(){this.hidden=!1,this.show&&(this.updateTool(),this.show=!1);var r=[this.freetextElement,this.outerLine,document.querySelector(".toggle-button"),document.querySelector(".sidebar-style"),document.querySelector(".freetext-panel")],o=document.querySelector(".freetext-popup");o&&r.push(o),onClickOutside$1(r,this.handleOutside.bind(this))}},{key:"getActualRect",value:function(r){var o=this.annotation.rect,u=o.left,s=o.top,w=o.right,g=o.bottom,v=getActualPoint({x:u,y:s},r),y=getActualPoint({x:w,y:g},r);return{leftTop:{x:Math.min(v.x,y.x),y:Math.min(v.y,y.y)},rightBottom:{x:Math.max(v.x,y.x),y:Math.max(v.y,y.y)}}}},{key:"rectCalc",value:function(r){var o=r.leftTop,u=r.rightBottom;return{top:o.y<u.y?o.y:u.y,left:o.x<u.x?o.x:u.x,width:Math.abs(u.x-o.x),height:Math.abs(u.y-o.y)}}},{key:"calculate",value:function(r,o){var u=this.rectCalc({leftTop:r,rightBottom:o});return{top:u.top,left:u.left,width:u.width,height:u.height}}},{key:"getInitialPoint",value:function(){var r=this.leftTop.x,o=this.leftTop.y,u=this.rightBottom.x,s=this.rightBottom.y,w=this.layer.viewport.scale;return{leftTop:{x:r/w,y:o/w},rightBottom:{x:u/w,y:s/w}}}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleContainerClick()}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.outerLineContainer.remove(),this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null);else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var r=this.annotation;this.layer.annotationStore.selectedElementName=r.name;var o=_objectSpread2$1({},r);delete o.annotPtr,delete o.pagePtr,delete o.operate,delete o.targetPage,this.layer.eventBus.dispatch("annotationSelected",o),this.layer.eventBus.dispatch("annotationSelectedAttr",this)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("dblclick",this.onDbclick),this.outerLine.addEventListener("click",this.onSingleClick),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"onSingleClick",value:function(r){var o=new Date().getTime();o-this.lastClickTime<300&&this.onDbclick(),this.lastClickTime=o}},{key:"handleContainerClick",value:function(r){if(!(!this.hidden||this.layer.addMode||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(r==null?void 0:r.target))){this.hidden=!1,this.updateTool();var o=[this.freetextElement,this.outerLine,document.querySelector(".toggle-button"),document.querySelector(".sidebar-style"),document.querySelector(".freetext-panel")],u=document.querySelector(".freetext-popup");u&&o.push(u),onClickOutside$1(o,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var r,o,u,s,w;this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),(r=this.outerLine)===null||r===void 0||r.removeEventListener("mousedown",this.onMousedown),(o=this.outerLine)===null||o===void 0||o.removeEventListener("touchstart",this.onMousedown),(u=this.outerLine)===null||u===void 0||u.removeEventListener("dblclick",this.onDbclick),(s=this.outerLine)===null||s===void 0||s.addEventListener("click",this.onSingleClick),(w=this.outerLineContainer)===null||w===void 0||w.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto"}},{key:"handleStopPropagation",value:function(r){r.stopPropagation()}},{key:"handleMouseDown",value:function(r){if(r.button===0||r.type!=="mousedown"){this.layer.tool&&r.stopPropagation();var o=r.target.getAttribute("data-id"),u=this.layer.documentViewer.getScrollViewElement();this.scrollTop=u.scrollTop,this.scrollLeft=u.scrollLeft;var s=getClickPoint(r),w=s.pageX,g=s.pageY;this.startState={operator:o,clickX:w,clickY:g},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(r){if(r.button===0||r.type!=="mousemove"){r.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var o=getClickPoint(r),u=o.pageX,s=o.pageY,w=this.layer.documentViewer.getScrollViewElement(),g=w.scrollTop;u=u+w.scrollLeft-this.scrollLeft,s=s+g-this.scrollTop;var v=this.leftTop,y=this.rightBottom,m=this.startState,d=this.layer.viewport,f=d.width,x=d.height,k=10,P=10;if(m.operator==="nw-resize"){var S=u-(m.clickX-v.x),E=s-(m.clickY-v.y);S=Math.min(y.x-k,S),S=Math.max(12,S),E=Math.min(y.y-P,E),E=Math.max(9,E),this.update({leftTop:{x:S,y:E},rightBottom:y})}else if(m.operator==="w-resize"){var M=u-(m.clickX-v.x);M=Math.min(y.x-k,M),M=Math.max(12,M),this.update({leftTop:{x:M,y:v.y},rightBottom:y})}else if(m.operator==="sw-resize"){var T=u-(m.clickX-v.x),D=s-(m.clickY-y.y);T=Math.min(y.x-k,T),T=Math.max(12,T),D=Math.min(x-6,D),D=Math.max(v.y+P,D),this.update({leftTop:{x:T,y:v.y},rightBottom:{x:y.x,y:D}})}else if(m.operator==="s-resize"){var I=s-(m.clickY-y.y);I=Math.min(x-6,I),I=Math.max(v.y+P,I),this.update({leftTop:v,rightBottom:{x:y.x,y:I}})}else if(m.operator==="se-resize"){var N=u-(m.clickX-y.x),O=s-(m.clickY-y.y);N=Math.min(f-4,N),N=Math.max(v.x+k,N),O=Math.min(x-6,O),O=Math.max(v.y+P,O),this.update({leftTop:v,rightBottom:{x:N,y:O}})}else if(m.operator==="e-resize"){var F=u-(m.clickX-y.x);F=Math.min(f-4,F),F=Math.max(v.x+k,F),this.update({leftTop:v,rightBottom:{x:F,y:y.y}})}else if(m.operator==="ne-resize"){var U=u-(m.clickX-y.x),Y=s-(m.clickY-v.y);U=Math.min(f-4,U),U=Math.max(v.x+k,U),Y=Math.min(y.y-P,Y),Y=Math.max(9,Y),this.update({leftTop:{x:v.x,y:Y},rightBottom:{x:U,y:y.y}})}else if(m.operator==="n-resize"){var Q=s-(m.clickY-v.y);Q=Math.min(y.y-P,Q),Q=Math.max(9,Q),this.update({leftTop:{x:v.x,y:Q},rightBottom:y})}else if(m.operator==="move"){var q,ne,J,re,X=this.layer.documentViewer,j=this.getMouseLocation(r),Z=X.getSelectedPage(j,j);if(Z.first&&Z.first!==this.layer.page+1){var W=X.windowToPage(j,Z.first,!1),te=Math.abs(v.x-y.x),le=Math.abs(v.y-y.y);if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===0)q=u-(m.clickX-v.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=u-(m.clickX-y.x),re=Z.first>this.layer.page+1?W.y+le:W.y;else if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===1)q=Z.first>this.layer.page+1?W.x:W.x-te,ne=s-(m.clickY-v.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=s-(m.clickY-y.y);else if(X.pdfViewer.spreadMode===1&&X.pdfViewer.scrollMode===0){var oe=Math.min(Z.first,this.layer.page+1),Ee=Math.max(Z.first,this.layer.page+1);if(Ee-oe>2||oe+1===Ee&&oe%2==0)return;oe+1===Ee?(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=s-(m.clickY-v.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=s-(m.clickY-y.y)):oe+2===Ee&&(q=u-(m.clickX-v.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=u-(m.clickX-y.x),re=Z.first>this.layer.page+1?W.y+le:W.y)}else if(X.pdfViewer.spreadMode===2&&X.pdfViewer.scrollMode===0){var Ae=Math.min(Z.first,this.layer.page+1),ve=Math.max(Z.first,this.layer.page+1);if(ve-Ae>2||Ae+1===ve&&(Ae!==1||ve!==2)&&ve%2==0||Ae===1&&ve===3)return;Ae+2===ve||Ae===1&&ve===2?(q=u-(m.clickX-v.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=u-(m.clickX-y.x),re=Z.first>this.layer.page+1?W.y+le:W.y):Ae+1===ve&&(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=s-(m.clickY-v.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=s-(m.clickY-y.y))}var ke=X.pdfViewer._pages[Z.first-1].compdfAnnotationLayer;if(!ke)return;this.layer=ke,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ce=this.layer.div;Ce.append(this.annotationContainer),Ce.append(this.outerLineContainer)}else{q=u-(m.clickX-v.x),ne=s-(m.clickY-v.y),J=u-(m.clickX-y.x),re=s-(m.clickY-y.y);var Pe=X.pageToWindow({x:q,y:ne},this.layer.page+1,!1),Me=X.pageToWindow({x:J,y:re},this.layer.page+1,!1),Le=0,Te=0;s>m.clickY?Te=(Te=w.offsetHeight-(Me.y-w.scrollTop-w.offsetTop))<100?5:0:s<m.clickY&&(Te=(Te=Pe.y-w.scrollTop-w.offsetTop)<100?-5:0),u>m.clickX?Le=(Le=w.offsetWidth-(Me.x-w.scrollLeft-w.offsetLeft))<100?5:0:u<m.clickX&&(Le=(Le=Pe.x-w.scrollLeft-w.offsetLeft)<100?-5:0),(Le||Te)&&(w.scrollTop+=Te,w.scrollLeft+=Le);var ye={width:Math.abs(q-J),height:Math.abs(re-ne)};q<J?(q=Math.max(12,q),q=Math.min(f-ye.width-4,q),J=Math.max(ye.width+12,J),J=Math.min(f-4,J)):(J=Math.max(4,J),J=Math.min(f-ye.width-12,J),q=Math.max(ye.width+4,q),q=Math.min(f-12,q)),re<ne?(re=Math.max(6,re),re=Math.min(x-ye.height-9,re),ne=Math.max(ye.height+6,ne),ne=Math.min(x-9,ne)):(ne=Math.max(9,ne),ne=Math.min(x-ye.height-6,ne),re=Math.max(ye.height+9,re),re=Math.min(x-6,re))}this.update({leftTop:{x:q,y:ne},rightBottom:{x:J,y:re}})}m.clickX=u,m.clickY=s;var _e=this.getInitialPoint();this.layer.eventBus.dispatch("mouseMoving",{rect:{left:_e.leftTop.x,top:_e.leftTop.y,right:_e.rightBottom.x,bottom:_e.rightBottom.y},pageNumber:this.annotation.pageIndex+1})}}},{key:"handleMouseUp",value:function(r){if(r.button===0||r.type!=="mouseup"){this.layer.tool&&r.stopPropagation(),r.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var o=this.annotation,u=this.getInitialPoint(),s=u.leftTop,w=u.rightBottom,g={left:s.x,top:s.y,right:w.x,bottom:w.y};if(g!==o.rect||o.pageIndex!==this.layer.page)if(o.rect=g,o.pageIndex!==this.layer.page){var v={type:"delete",annotation:{operate:"del-annot",name:o.name,pageIndex:o.pageIndex,annotPtr:o.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",v);var y=Object.assign({},o);delete y.annotPtr,delete y.pagePtr,delete y.name,y.operate="add-annot",y.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:y}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:o.name,pageIndex:this.layer.page,pagePtr:o.pagePtr,annotPtr:o.annotPtr,rect:g}})}}},{key:"update",value:function(r){var o=r.leftTop,u=r.rightBottom,s=this.layer.viewport,w=s.width,g=s.height,v=this.calculate(o,u);this.leftTop=o,this.rightBottom=u,this.setCss(this.annotationContainer,{top:v.top-2+"px",left:v.left-4+"px"});var y=w-o.x,m=g-o.y;this.setCss(this.freetextEditElement,{maxWidth:y+"px",maxHeight:m+"px",width:v.width+"px",height:v.height+"px"}),this.setCss(this.freetextElement,{width:v.width+"px",height:v.height+"px"}),this.setCss(this.outerLine,{left:"".concat(v.left-12,"px"),top:"".concat(v.top-9,"px"),width:"".concat(v.width+16,"px"),height:"".concat(v.height+15,"px")}),this.moveRect.setAttribute("width",v.width+10),this.moveRect.setAttribute("height",v.height+9),this.LeftRect.setAttribute("y",v.height/2+4),this.bottomLeftRect.setAttribute("y",v.height+9),this.bottomRect.setAttribute("x",v.width/2+5),this.bottomRect.setAttribute("y",v.height+9),this.bottomRightRect.setAttribute("x",v.width+10),this.bottomRightRect.setAttribute("y",v.height+9),this.rightRect.setAttribute("x",v.width+10),this.rightRect.setAttribute("y",v.height/2+4),this.topRightRect.setAttribute("x",v.width+10),this.topRect.setAttribute("x",v.width/2+5)}},{key:"handleDelete",value:function(r){if(!this.editing){this.layer.tool&&r&&r.stopPropagation(),this.delete();var o={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(o.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",o)}}},{key:"delete",value:function(){var r;this.handleOutside(),(r=this.annotationContainer)===null||r===void 0||r.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"handleFreetextEditElementPaste",value:function(r){pastePlainText(r)}}])}(),Text$1=function(e){function n(r){var o,u=r.annotation,s=r.layer,w=r.show,g=w!==void 0&&w,v=r.enableReply,y=v===void 0||v;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:u,layer:s}])).enableReply=y,o.textNoteStr=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M2.39961 3.60004H21.5996V18H11.9996L5.99961 21.6V18H2.39961V3.60004Z" fill="currentColor"/>
      <rect x="5.99902" y="7.20001" width="7.2" height="1.8" fill="white"/>
      <rect x="5.99902" y="11.4" width="12" height="1.8" fill="white"/>
    </svg>`,o.deleteSvgStr='<path id="ic" fill-rule="evenodd" clip-rule="evenodd" d="M13 2.75V1.25H7V2.75H13ZM19 5.75V4.25H16.75H3.25H1V5.75H3.25V18.75H16.75V5.75H19ZM4.75 17.25V5.75H15.25V17.25H4.75ZM8.75 8.5V14.5H7.25V8.5H8.75ZM12.75 8.5V14.5H11.25V8.5H12.75Z" fill="currentColor"/>',o.hidden=!0,o.initial=!1,o.rect=null,o.start=null,o.end=null,o.newStart=null,o.newEnd=null,o.show=g,o.popShow=!1,o.onClick=o.handleClick.bind(o),o.onBlur=o.handleBlur.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.onMousedown=o.handleMouseDown.bind(o),o.onMousemove=o.handleMouseMove.bind(o),o.onMouseup=o.handleMouseUp.bind(o),o.handleStopPropagation=o.handlestopPropagation.bind(o),o.onPaste=o.handlePaste.bind(o),o.handlePropertyPanel=o.handlePropertyPanel.bind(o),o.render(),o}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){this.annotation.isHidden||(this.renderTextElement(),this.renderTextEditor(),this.layer.div.append(this.annotationContainer))}},{key:"handleDelete",value:function(r){this.layer.tool&&r&&r.stopPropagation(),this.delete();var o={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(o.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",o)}},{key:"delete",value:function(){var r,o,u,s;this.handleClickOutside(),(r=this.textEditorContainer)===null||r===void 0||r.removeEventListener("click",this.handleStopPropagation),(o=this.textEditorContainer)===null||o===void 0||o.removeEventListener("paste",this.onPaste),(u=this.annotationContainer)===null||u===void 0||u.remove(),(s=this.textEditorContainer)===null||s===void 0||s.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handlestopPropagation",value:function(r){r.stopPropagation()}},{key:"handleBlur",value:function(){var r=this.annotation,o=getHtmlToText(this.textEditorElement);o!==r.contents&&(this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:r.name,pageIndex:this.layer.page,pagePtr:r.pagePtr,annotPtr:r.annotPtr,contents:o}}),r.contents=o),this.textEditorContainer.removeEventListener("click",this.handleStopPropagation),this.textEditorContainer.removeEventListener("paste",this.onPaste),this.textEditorContainer.remove()}},{key:"handleMouseDown",value:function(r){if((r.button===0||r.type!=="mousedown")&&!this.layer.addMode){this.layer.tool&&r.stopPropagation(),this.moving=!1;var o=this.layer.documentViewer.getScrollViewElement();this.scrollTop=o.scrollTop,this.scrollLeft=o.scrollLeft;var u=getClickPoint(r),s=u.pageX,w=u.pageY;this.startState={clickX:s,clickY:w},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(r){if(r.button===0||r.type!=="mousemove"){r.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none");var o=getClickPoint(r),u=o.pageX,s=o.pageY,w=this.layer.documentViewer,g=w.getScrollViewElement(),v=g.scrollTop;if(u=u+g.scrollLeft-this.scrollLeft,s=s+v-this.scrollTop,u!==this.startState.clickX||s!==this.startState.clickY){this.moving=!0;var y,m,d,f,x=this.start,k=this.end,P=this.startState,S=this.layer.viewport,E=S.width,M=S.height,T=this.getMouseLocation(r),D=w.getSelectedPage(T,T);if(D.first&&D.first!==this.layer.page+1){var I=w.windowToPage(T,D.first,!1),N=Math.abs(x.x-k.x),O=Math.abs(x.y-k.y);if(w.pdfViewer.spreadMode===0&&w.pdfViewer.scrollMode===0)y=u-(P.clickX-this.start.x),m=D.first>this.layer.page+1?I.y:I.y-O,d=u-(P.clickX-this.end.x),f=D.first>this.layer.page+1?I.y+O:I.y;else if(w.pdfViewer.spreadMode===0&&w.pdfViewer.scrollMode===1)y=D.first>this.layer.page+1?I.x:I.x-N,m=s-(P.clickY-this.start.y),d=D.first>this.layer.page+1?I.x+N:I.x,f=s-(P.clickY-this.end.y);else if(w.pdfViewer.spreadMode===1&&w.pdfViewer.scrollMode===0){var F=Math.min(D.first,this.layer.page+1),U=Math.max(D.first,this.layer.page+1);if(U-F>2||F+1===U&&F%2==0)return;F+1===U?(y=D.first>this.layer.page+1?I.x:I.x-N,m=s-(P.clickY-this.start.y),d=D.first>this.layer.page+1?I.x+N:I.x,f=s-(P.clickY-this.end.y)):F+2===U&&(y=u-(P.clickX-this.start.x),m=D.first>this.layer.page+1?I.y:I.y-O,d=u-(P.clickX-this.end.x),f=D.first>this.layer.page+1?I.y+O:I.y)}else if(w.pdfViewer.spreadMode===2&&w.pdfViewer.scrollMode===0){var Y=Math.min(D.first,this.layer.page+1),Q=Math.max(D.first,this.layer.page+1);if(Q-Y>2||Y+1===Q&&(Y!==1||Q!==2)&&Q%2==0||Y===1&&Q===3)return;Y+2===Q||Y===1&&Q===2?(y=u-(P.clickX-this.start.x),m=D.first>this.layer.page+1?I.y:I.y-O,d=u-(P.clickX-this.end.x),f=D.first>this.layer.page+1?I.y+O:I.y):Y+1===Q&&(y=D.first>this.layer.page+1?I.x:I.x-N,m=s-(P.clickY-this.start.y),d=D.first>this.layer.page+1?I.x+N:I.x,f=s-(P.clickY-this.end.y))}var q=w.pdfViewer._pages[D.first-1].compdfAnnotationLayer;if(!q)return;this.layer=q,this.annotationContainer.remove(),this.layer.div.append(this.annotationContainer)}else{y=u-(P.clickX-this.start.x),m=s-(P.clickY-this.start.y),d=u-(P.clickX-this.end.x),f=s-(P.clickY-this.end.y);var ne=w.pageToWindow({x:y,y:m},this.layer.page+1,!1),J=w.pageToWindow({x:d,y:f},this.layer.page+1,!1),re=0,X=0;s>P.clickY?X=(X=g.offsetHeight-(J.y-g.scrollTop-g.offsetTop))<100?5:0:s<P.clickY&&(X=(X=ne.y-g.scrollTop-g.offsetTop)<100?-5:0),u>P.clickX?re=(re=g.offsetWidth-(J.x-g.scrollLeft-g.offsetLeft))<100?5:0:u<P.clickX&&(re=(re=ne.x-g.scrollLeft-g.offsetLeft)<100?-5:0),(re||X)&&(g.scrollTop+=X,g.scrollLeft+=re);var j={width:Math.abs(x.x-k.x),height:Math.abs(x.y-k.y)};y<d?(y=Math.max(0,y),y=Math.min(E-j.width,y),d=Math.max(j.width,d),d=Math.min(E,d)):(d=Math.max(0,d),d=Math.min(E-j.width,d),y=Math.max(j.width,y),y=Math.min(E,y)),m<f?(m=Math.max(0,m),m=Math.min(M-j.height,m),f=Math.max(j.height,f),f=Math.min(M,f)):(f=Math.max(0,f),f=Math.min(M-j.height,f),m=Math.max(j.height,m),m=Math.min(M,m))}this.update({start:{x:y,y:m},end:{x:d,y:f}}),P.clickX=u,P.clickY=s}}}},{key:"handleMouseUp",value:function(r){if(r.button===0||r.type!=="mouseup"){this.layer.tool&&r.stopPropagation(),r.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.scrollLeft=0,this.scrollTop=0;var o=this.annotation,u=getInitialPoint(this.start,this.layer.viewport.scale),s=getInitialPoint(this.end,this.layer.viewport.scale),w={left:u.x,top:u.y,right:s.x,bottom:s.y};if(w!==o.rect||o.pageIndex!==this.layer.page)if(o.rect=w,o.pageIndex!==this.layer.page){var g={type:"delete",annotation:{operate:"del-annot",name:o.name,pageIndex:o.pageIndex,annotPtr:o.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",g);var v=Object.assign({},o);delete v.annotPtr,delete v.pagePtr,delete v.name,v.operate="add-annot",v.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:v}),this.annotationContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:o.name,pageIndex:this.layer.page,pagePtr:o.pagePtr,annotPtr:o.annotPtr,rect:w}})}}},{key:"update",value:function(r){var o=r.start,u=r.end,s=this.rectCalc({start:o,end:u});this.start=o,this.end=u,this.annotationContainer.style.top=s.top+"px",this.annotationContainer.style.left=s.left+"px",this.textEditorContainer.style.top=s.top+28+"px",this.textEditorContainer.style.left=s.left+16+"px"}},{key:"rectCalc",value:function(r){var o=r.start,u=r.end;return{top:o.y<u.y?o.y:u.y,left:o.x<u.x?o.x:u.x,width:Math.abs(u.x-o.x),height:Math.abs(u.y-o.y)}}},{key:"getActualRect",value:function(r){var o=this.annotation.rect,u=o.left,s=o.top,w=o.right,g=o.bottom;return{start:getActualPoint({x:u,y:s},r),end:getActualPoint({x:w,y:g},r)}}},{key:"handleClickOutside",value:function(r){r!==this.annotationContainer&&this.popShow&&(this.popShow=!1,this.annotationContainer.style.zIndex=2,this.handleBlur(),this.updateTool())}},{key:"setCss",value:function(r,o){if(r&&o)for(var u in o)r.style[u]=o[u]}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(r){if(!(this.layer.addMode||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(r==null?void 0:r.target)||this.moving||(r&&this.layer.eventBus.dispatch("closeTextEditor",r.target.closest(".annotation.text")),this.popShow))){this.popShow=!0,this.layer.pageDiv.append(this.textEditorContainer),this.updateTool(),this.textEditorContainer.addEventListener("click",this.handleStopPropagation),this.textEditorContainer.addEventListener("paste",this.onPaste),this.textEditorElement.focus(),keepLastIndex(this.textEditorElement);var o=[this.annotationContainer,this.textEditorContainer,document.querySelector(".annotation-panel")],u=document.querySelector(".toggle-button");u&&o.push(u);var s=document.getElementById("annotationPropertyPanelButton");s&&o.push(s),onClickOutside$1(o,this.handleClickOutside.bind(this))}}},{key:"updateTool",value:function(){if(this.popShow){if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var r=this.annotation;this.layer.annotationStore.selectedElementName=r.name;var o=_objectSpread2$1({},r);delete o.annotPtr,delete o.pagePtr,delete o.operate,delete o.targetPage,this.layer.eventBus.dispatch("annotationSelected",o)}this.layer.documentViewer.getScrollViewElement().style.touchAction="none",this.layer.eventBus._on("annotationPropertyChanged",this.handlePropertyPanel)}else this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),this.layer.eventBus._on("annotationPropertyChanged",this.handlePropertyPanel)}},{key:"renderTextElement",value:function(){var r=this.getActualRect(this.layer.viewport.scale),o=r.start,u=r.end;this.start=o,this.end=u;var s=this.annotation;s.color||(s.color="#FF0000");var w=this.rectCalc({start:o,end:u});this.rect=w;var g=document.createElement("div");g.id=s.name,g.className="annotation text",this.setCss(g,{position:"absolute",left:w.left+"px",top:w.top+"px",width:"24px",height:"24px",color:s.color,opacity:s.opacity||1}),g.innerHTML=this.textNoteStr,g.addEventListener("mousedown",this.onClick),g.addEventListener("mousedown",this.onMousedown),g.addEventListener("touchstart",this.onMousedown),this.annotationContainer=g}},{key:"renderTextEditor",value:function(){var r=document.createElement("div");this.textEditorContainer=r,this.setCss(r,{position:"absolute",left:this.rect.left+16+"px",top:this.rect.top+28+"px",zIndex:2,border:"2px solid",borderColor:this.annotation.color,outline:"none",padding:"0 8px 28px",borderRadius:"4px",background:"#FFFFFF"}),this.textEditorContainer.className="text-editor-container";var o=document.createElement("div");o.className="text-title",o.innerText=this.layer.annotationStore.$t("header.note"),r.append(o);var u=document.createElement("div");if(u.setAttribute("role","textbox"),u.setAttribute("contenteditable",!0),u.setAttribute("spellcheck",!1),this.setCss(u,{width:"290px",height:"110px",fontSize:"16px",color:"#000",lineHeight:"1.2em",outline:"none",overflow:"auto",whiteSpace:"pre-wrap",textAlign:"left","-webkit-user-select":"text"}),u.className="text-editor",this.annotation.contents)u.innerHTML=this.annotation.contents;else if(this.annotation["contents-richtext"]){var s=new window.DOMParser().parseFromString(this.annotation["contents-richtext"],"text/xml");s.getElementsByTagName("parsererror").length>0?u.innerHTML=this.annotation["contents-richtext"]:u.innerHTML=s.firstElementChild.innerText}this.textEditorElement=u,r.append(u);var w=createSvg("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",class:"delete-button"},{width:"20px",height:"20px",position:"absolute",right:"10px",bottom:"10px"});w.innerHTML=this.deleteSvgStr,this.deletetButton=w,r.append(w),this.deletetButton.addEventListener("click",this.onDelete),this.replyButton=createElement("div",{position:"absolute",right:"40px",bottom:"10px",width:"20px",height:"20px"},{class:"reply-button"}),this.replyButton.innerHTML=this.replySvgStr,this.enableReply&&r.append(this.replyButton),this.replyButton.addEventListener("click",this.onOpenReply)}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"handlePaste",value:function(r){pastePlainText(r)}},{key:"handlePropertyPanel",value:function(r){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var o=this.annotation,u=0;for(var s in r)for(var w in o){var g=r[s];w===s&&o[w]!==g&&(o[s]=g,u++,s==="color"&&(this.annotationContainer.style.color=g,this.textEditorContainer.style.borderColor=g),s==="contents"&&(this.textEditorElement.innerHTML=g))}if(u>0){var v={operate:"mod-annot",name:o.name,pageIndex:this.layer.page,pagePtr:o.pagePtr,annotPtr:o.annotPtr},y=Object.assign({},v,r);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:y})}}}}])}(),Stamp=function(e){function n(s){var w,g=s.annotation,v=s.layer,y=s.show,m=y!==void 0&&y,d=s.enableReply,f=d===void 0||d;return _classCallCheck(this,n),(w=_callSuper(this,n,[{annotation:g,layer:v}])).enableReply=f,w.show=m,w.hidden=!0,w.initial=!1,w.start=null,w.end=null,w.newStart=null,w.newEnd=null,w.startCircle=null,w.endCircle=null,w.ratio=window.devicePixelRatio||1,w.selectionOutlinePadding=8,w.selectionOutlinePointWidth=6,w.onMousedown=w.handleMouseDown.bind(w),w.onMouseup=w.handleMouseUp.bind(w),w.onMousemove=w.handleMouseMove.bind(w),w.onDelete=w.handleDelete.bind(w),w.onOpenReply=w.openReply.bind(w),w.handlePropertyPanel=w.handlePropertyPanel.bind(w),w.render(),w}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var w,g,v,y,m,d,f,x,k,P,S,E,M,T,D,I,N;return _regeneratorRuntime().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if((w=this.annotation).rect){O.next=17;break}return O.next=4,this.layer.messageHandler.sendWithPromise("GetAnnotRect",{pagePtr:w.pagePtr,annotPtr:w.annotPtr});case 4:return g=O.sent,v=this.layer.viewport.viewBox[2],y=this.layer.viewport.viewBox[3],m=g.right-g.left,d=g.bottom-g.top,f={left:(v-m)/2,top:(y-d)/2,right:(v+m)/2,bottom:(y+d)/2},O.next=16,this.layer.messageHandler.sendWithPromise("SetAnnotRect",{pagePtr:w.pagePtr,annotPtr:w.annotPtr,rect:f});case 16:w.rect=f;case 17:if(x=this.getActualRect(this.layer.viewport.scale),k=x.start,P=x.end,this.start=k,this.end=P,S=this.calculate(k,P),this.ratioRate=S.height/S.width,(E=document.createElement("div")).id=w.name,E.className="annotation",E.style.top=S.top+"px",E.style.left=S.left+"px",E.style.width=S.width+"px",E.style.height=S.height+"px",E.style.fontSize="0",M=null,(M=document.createElement("img")).style.width="100%",M.style.height="100%",T="",!w.image){O.next=39;break}T=w.image,O.next=44;break;case 39:if(w.stampType!=="standard"&&w.stampType!=="image"&&w.stampType!=="text"){O.next=44;break}return D={width:Math.ceil(S.width*this.ratio),height:Math.ceil(S.height*this.ratio)},O.next=43,this.getAnnotImage(D);case 43:T=O.sent;case 44:w.imageBase64=T,M.src=T,this.imgEle=M,E.append(this.imgEle),this.imgEle.addEventListener("mousedown",this.handleClick.bind(this)),this.annotationContainer=E,this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:S.left+S.width-114+"px",top:S.top+S.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,this.replyButton=createElement("div",{width:"30px",height:"30px",borderRadius:"2px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr,I=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2,this.outerLine=createSvg("svg",{},{position:"absolute",left:"".concat(S.left-I,"px"),top:"".concat(S.top-I,"px"),width:"".concat(S.width+2*I,"px"),height:"".concat(S.height+2*I,"px"),zIndex:1}),this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"fill-opacity":0,width:S.width+this.selectionOutlinePadding,height:S.height+this.selectionOutlinePadding,x:this.selectionOutlinePointWidth/2,y:this.selectionOutlinePointWidth/2}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:0,y:0}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:0,y:S.height+this.selectionOutlinePadding}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:S.width+this.selectionOutlinePadding,y:S.height+this.selectionOutlinePadding}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:S.width+this.selectionOutlinePadding,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.topRightRect),this.outerLineContainer.append(this.outerLine),(N=this.layer.documentViewer.isAnnotationPopup)&&this.outerLineContainer.append(this.popupElement),N&&this.enableReply&&this.popupElement.append(this.replyButton),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.initial=!0,this.layer.eventBus.dispatch("imageChange"),this.layer.annotationStore.creating=!1,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 85:case"end":return O.stop()}},s,this)})),function(){return u.apply(this,arguments)})},{key:"getAnnotImage",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(w){var g,v,y,m,d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return g=this.annotation,f.next=3,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{pagePtr:g.pagePtr,annotPtr:g.annotPtr,width:w.width,height:w.height});case 3:return v=f.sent,(y=document.createElement("canvas")).style.width=w.width+"px",y.style.height=w.height+"px",y.width=w.width,y.height=w.height,m=y.getContext("2d"),(d=m.createImageData(w.width,w.height)).data.set(v),m.putImageData(d,0,0),f.abrupt("return",y.toDataURL("image/png",1));case 14:case"end":return f.stop()}},s,this)})),function(s){return o.apply(this,arguments)})},{key:"getActualRect",value:function(s){var w=this.annotation.rect,g=w.left,v=w.top,y=w.right,m=w.bottom;return{start:getActualPoint({x:g,y:v},s),end:getActualPoint({x:y,y:m},s)}}},{key:"rectCalc",value:function(s){var w=s.start,g=s.end;return{top:w.y<g.y?w.y:g.y,left:w.x<g.x?w.x:g.x,width:Math.abs(g.x-w.x),height:Math.abs(g.y-w.y)}}},{key:"calculate",value:function(s,w){var g=this.rectCalc({start:s,end:w});return{top:g.top,left:g.left,width:g.width,height:g.height}}},{key:"getInitialPoint",value:function(){var s=this.layer.viewport.scale;return{start:{x:this.start.x/s,y:this.start.y/s},end:{x:this.end.x/s,y:this.end.y/s}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var s=this.annotation;this.layer.annotationStore.selectedElementName=s.name;var w=_objectSpread2$1({},s);delete w.annotPtr,delete w.pagePtr,delete w.operate,delete w.targetPage,this.layer.eventBus.dispatch("annotationSelected",w)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(s){if(this.layer.tool&&s&&s.preventDefault(),this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(s==null?void 0:s.target)){this.hidden=!1,this.updateTool(),this.layer.eventBus._on("annotationPropertyChanged",this.handlePropertyPanel);var w=[this.annotationContainer,this.popupElement,this.outerLine,document.querySelector(".annotation-panel")],g=document.getElementById("annotationPropertyPanelButton");g&&w.push(g);var v=document.querySelector(".toggle-button");v&&w.push(v),onClickOutside$1(w,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var s,w,g;this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),(s=this.outerLine)===null||s===void 0||s.removeEventListener("mousedown",this.onMousedown),(w=this.outerLine)===null||w===void 0||w.removeEventListener("touchstart",this.onMousedown),(g=this.outerLineContainer)===null||g===void 0||g.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("annotationPropertyChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(s){if(s.button===0||s.type!=="mousedown"){this.layer.tool&&s.stopPropagation(),s.type==="touchstart"&&(this.layer.pageDiv.style.touchAction="none",document.body.style.userSelect="none",document.getElementById("app").style.touchAction="none");var w=s.target.getAttribute("data-id"),g=this.layer.documentViewer.getScrollViewElement();this.scrollTop=g.scrollTop,this.scrollLeft=g.scrollLeft;var v=getClickPoint(s),y=v.pageX,m=v.pageY;this.startState={operator:w,clickX:y,clickY:m},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(s){if(s.button===0||s.type!=="mousemove"){this.layer.tool&&s.stopPropagation(),this.moving=!0;var w=getClickPoint(s),g=w.pageX,v=w.pageY,y=this.layer.documentViewer.getScrollViewElement(),m=y.scrollTop;g=g+y.scrollLeft-this.scrollLeft,v=v+m-this.scrollTop;var d=this.start,f=this.end,x=this.startState,k=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2,P=this.layer.viewport,S=P.width,E=P.height;if(x.operator==="nw-resize"){var M=g-(x.clickX-this.start.x),T=v-(x.clickY-this.start.y);if(M=Math.min(f.x-5,M),M=Math.max(k,M),T=Math.min(f.y-5,T),T=Math.max(k,T),this.ratioRate){var D=(M-this.start.x)*this.ratioRate;if((T=this.start.y+D)<k||M<k)return}this.update({start:{x:M,y:T},end:f})}else if(x.operator==="sw-resize"){var I=g-(x.clickX-this.start.x),N=v-(x.clickY-this.end.y);if(I=Math.min(f.x-5,I),I=Math.max(k,I),N=Math.min(E-k,N),N=Math.max(d.y+5,N),this.ratioRate){var O=(I-this.start.x)*this.ratioRate;if((N=this.end.y-O)>=E-k||I<k)return}this.update({start:{x:I,y:d.y},end:{x:f.x,y:N}})}else if(x.operator==="se-resize"){var F=g-(x.clickX-this.end.x),U=v-(x.clickY-this.end.y);if(F=Math.min(S-k,F),F=Math.max(d.x+5,F),U=Math.min(E-k,U),U=Math.max(d.y+5,U),this.ratioRate){var Y=(this.end.x-F)*this.ratioRate;if((U=this.end.y-Y)>=E-k||F>=S-k)return}this.update({start:d,end:{x:F,y:U}})}else if(x.operator==="ne-resize"){var Q=g-(x.clickX-this.end.x),q=v-(x.clickY-this.start.y);if(Q=Math.min(S-k,Q),Q=Math.max(d.x+5,Q),q=Math.min(f.y-5,q),q=Math.max(k,q),this.ratioRate){var ne=(this.end.x-Q)*this.ratioRate;if((q=this.start.y+ne)<=k||Q>=S-k)return}this.update({start:{x:d.x,y:q},end:{x:Q,y:f.y}})}else if(x.operator==="move"){var J,re,X,j,Z=this.layer.documentViewer,W=this.getMouseLocation(s),te=Z.getSelectedPage(W,W);if(te.first&&te.first!==this.layer.page+1){var le=Z.windowToPage(W,te.first,!1),oe=Math.abs(d.x-f.x),Ee=Math.abs(d.y-f.y);if(Z.pdfViewer.spreadMode===0&&Z.pdfViewer.scrollMode===0)J=g-(x.clickX-this.start.x),re=te.first>this.layer.page+1?le.y:le.y-Ee,X=g-(x.clickX-this.end.x),j=te.first>this.layer.page+1?le.y+Ee:le.y;else if(Z.pdfViewer.spreadMode===0&&Z.pdfViewer.scrollMode===1)J=te.first>this.layer.page+1?le.x:le.x-oe,re=v-(x.clickY-this.start.y),X=te.first>this.layer.page+1?le.x+oe:le.x,j=v-(x.clickY-this.end.y);else if(Z.pdfViewer.spreadMode===1&&Z.pdfViewer.scrollMode===0){var Ae=Math.min(te.first,this.layer.page+1),ve=Math.max(te.first,this.layer.page+1);if(ve-Ae>2||Ae+1===ve&&Ae%2==0)return;Ae+1===ve?(J=te.first>this.layer.page+1?le.x:le.x-oe,re=v-(x.clickY-this.start.y),X=te.first>this.layer.page+1?le.x+oe:le.x,j=v-(x.clickY-this.end.y)):Ae+2===ve&&(J=g-(x.clickX-this.start.x),re=te.first>this.layer.page+1?le.y:le.y-Ee,X=g-(x.clickX-this.end.x),j=te.first>this.layer.page+1?le.y+Ee:le.y)}else if(Z.pdfViewer.spreadMode===2&&Z.pdfViewer.scrollMode===0){var ke=Math.min(te.first,this.layer.page+1),Ce=Math.max(te.first,this.layer.page+1);if(Ce-ke>2||ke+1===Ce&&(ke!==1||Ce!==2)&&Ce%2==0||ke===1&&Ce===3)return;ke+2===Ce||ke===1&&Ce===2?(J=g-(x.clickX-this.start.x),re=te.first>this.layer.page+1?le.y:le.y-Ee,X=g-(x.clickX-this.end.x),j=te.first>this.layer.page+1?le.y+Ee:le.y):ke+1===Ce&&(J=te.first>this.layer.page+1?le.x:le.x-oe,re=v-(x.clickY-this.start.y),X=te.first>this.layer.page+1?le.x+oe:le.x,j=v-(x.clickY-this.end.y))}var Pe=Z.pdfViewer._pages[te.first-1].compdfAnnotationLayer;if(!Pe)return;this.layer=Pe,this.annotationContainer.remove(),this.outerLineContainer.remove();var Me=this.layer.div;Me.append(this.annotationContainer),Me.append(this.outerLineContainer)}else{J=g-(x.clickX-this.start.x),re=v-(x.clickY-this.start.y),X=g-(x.clickX-this.end.x),j=v-(x.clickY-this.end.y);var Le=Z.pageToWindow({x:J,y:re},this.layer.page+1,!1),Te=Z.pageToWindow({x:X,y:j},this.layer.page+1,!1),ye=0,_e=0;v>x.clickY?_e=(_e=y.offsetHeight-(Te.y-y.scrollTop-y.offsetTop))<100?5:0:v<x.clickY&&(_e=(_e=Le.y-y.scrollTop-y.offsetTop)<100?-5:0),g>x.clickX?ye=(ye=y.offsetWidth-(Te.x-y.scrollLeft-y.offsetLeft))<100?5:0:g<x.clickX&&(ye=(ye=Le.x-y.scrollLeft-y.offsetLeft)<100?-5:0),(ye||_e)&&(y.scrollTop+=_e,y.scrollLeft+=ye);var we={width:Math.abs(d.x-f.x),height:Math.abs(d.y-f.y)};J<X?(J=Math.max(k,J),J=Math.min(S-we.width-k,J),X=Math.max(we.width+k,X),X=Math.min(S-k,X)):(X=Math.max(k,X),X=Math.min(S-we.width-k,X),J=Math.max(we.width+k,J),J=Math.min(S-k,J)),re<j?(re=Math.max(k,re),re=Math.min(E-we.height-k,re),j=Math.max(we.height+k,j),j=Math.min(E-k,j)):(j=Math.max(k,j),j=Math.min(E-we.height-k,j),re=Math.max(we.height+k,re),re=Math.min(E-k,re))}this.update({start:{x:J,y:re},end:{x:X,y:j}})}x.clickX=g,x.clickY=v}}},{key:"handleDelete",value:function(s){this.layer.tool&&s&&s.stopPropagation(),this.delete();var w={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(w.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",w)}},{key:"delete",value:function(){var s;this.handleOutside(),(s=this.annotationContainer)===null||s===void 0||s.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(w){var g,v,y,m,d,f,x,k,P;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(w.button===0||w.type!=="mouseup"){S.next=2;break}return S.abrupt("return");case 2:if(this.layer.tool&&w.stopPropagation(),w.type==="touchend"&&(this.layer.pageDiv.style.touchAction="",document.body.style.userSelect="auto",document.getElementById("app").style.touchAction="auto",this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0,g=this.annotation,v=this.getInitialPoint(),y=v.start,m=v.end,(d={left:y.x,top:y.y,right:m.x,bottom:m.y})!==g.rect||g.pageIndex!==this.layer.page){S.next=16;break}return S.abrupt("return");case 16:return f=this.calculate(this.start,this.end),S.next=19,this.getAnnotImage({width:Math.ceil(f.width*this.ratio),height:Math.ceil(f.height*this.ratio)});case 19:x=S.sent,this.imgEle.src=x,this.annotation.imageBase64&&(this.annotation.imageBase64=x),g.rect=d,g.pageIndex!==this.layer.page?(k={type:"delete",annotation:{operate:"del-annot",name:g.name,pageIndex:g.pageIndex,annotPtr:g.annotPtr}},this.layer.eventBus.dispatch("annotationChanged",k),delete(P=Object.assign({},g)).annotPtr,delete P.pagePtr,delete P.name,P.operate="add-annot",P.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:P}),this.annotationContainer.remove(),this.outerLineContainer.remove()):this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:g.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rect:d}});case 24:case"end":return S.stop()}},s,this)})),function(s){return r.apply(this,arguments)})},{key:"update",value:function(s){var w=s.start,g=s.end,v=this.calculate(w,g);this.start=w,this.end=g,this.annotationContainer.style.top=v.top+"px",this.annotationContainer.style.left=v.left+"px",this.annotationContainer.style.width=v.width+"px",this.annotationContainer.style.height=v.height+"px",this.imgEle.style.width=v.width+"px",this.imgEle.style.height=v.height+"px";var y=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2;this.outerLine.style.left="".concat(v.left-y,"px"),this.outerLine.style.top="".concat(v.top-y,"px"),this.outerLine.style.width="".concat(v.width+2*y,"px"),this.outerLine.style.height="".concat(v.height+2*y,"px"),this.popupElement.style.left=v.left+v.width-114+"px",this.popupElement.style.top=v.top+v.height+12+"px",this.moveRect.setAttribute("width",v.width+this.selectionOutlinePadding),this.moveRect.setAttribute("height",v.height+this.selectionOutlinePadding),this.bottomLeftRect.setAttribute("y",v.height+this.selectionOutlinePadding),this.bottomRightRect.setAttribute("x",v.width+this.selectionOutlinePadding),this.bottomRightRect.setAttribute("y",v.height+this.selectionOutlinePadding),this.topRightRect.setAttribute("x",v.width+this.selectionOutlinePadding)}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"handlePropertyPanel",value:function(s){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var w=this.annotation;w.contents=s.contents;var g={operate:"mod-annot",name:w.name,pageIndex:this.layer.page,pagePtr:w.pagePtr,annotPtr:w.annotPtr,contents:w.contents};this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:g})}}}]);var r,o,u}(),Freetext=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.layer;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.freetextElement=null,this.start=null,this.end=null,this.onClick=this.handleClick.bind(this),this.onBlur=this.handleBlur.bind(this),this.onPaste=this.handlePaste.bind(this),this.init()},[{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||this.reset(),this._tool=e)}},{key:"reset",value:function(){var e=this.freetextElement;this.layer.pageDiv.removeEventListener("click",this.onClick),e&&this.handleFreetext(),this.start=null,this.end=null}},{key:"init",value:function(){this.layer.pageDiv.removeEventListener("click",this.onClick),this.layer.pageDiv.addEventListener("click",this.onClick)}},{key:"getFreetextRectPoint",value:function(){var e=this.start,n=this.end;return{start:{x:e.x,y:e.y},end:{x:n.x,y:n.y}}}},{key:"getFreetextRect",value:function(){var e=this.layer.viewport.scale,n=this.getFreetextRectPoint(),r=getInitialPoint(n.start,e),o=getInitialPoint(n.end,e);return{left:r.x,top:r.y,right:o.x,bottom:o.y}}},{key:"handleFreetext",value:function(){this.layer.addMode=!1;var e=this.freetextElement;if(e.innerText){var n=e.getBoundingClientRect();this.end={x:this.start.x+n.width+1,y:this.start.y+n.height-4};var r=this.getFreetextRect(),o=getHtmlToText(e),u=this.layer.annotationStore.freetextDefault,s={operate:"add-annot",type:"freetext",pageIndex:this.layer.page,date:new Date,color:u.color,fontSize:u.fontSize,fontName:u.fontName,fontStyle:u.fontStyle,fontWeight:u.fontWeight,textAlignment:u.textAlignment,borderWidth:u.borderWidth,borderColor:u.borderColor,fillColor:u.fillColor,contents:o,rect:r};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:s})}e.removeEventListener("blur",this.onBlur),e.removeEventListener("paste",this.onPaste),e.remove(),this.freetextElement=null}},{key:"handleBlur",value:function(){this.handleFreetext()}},{key:"handleClick",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=this.freetextElement;n&&e.target===n||n||this.layer.annotationStore.selectedElementName||(this.layer.addMode=!0,this.renderFreetext(e))}}},{key:"setCss",value:function(e,n){if(e&&n)for(var r in n)e.style[r]=n[r]}},{key:"renderFreetext",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e);if(this.start=n,!this.freetextElement){var r=this.layer.viewport,o=r.width,u=r.height,s=o-this.start.x,w=u-this.start.y,g=document.createElement("div");g.setAttribute("role","textbox"),g.setAttribute("contenteditable",!0),g.setAttribute("spellcheck",!1);var v=this.layer.annotationStore.freetextDefault,y=v.color,m=v.fontSize,d=v.fontName,f=v.fontStyle,x=v.fontWeight,k=v.textAlignment,P=v.borderWidth,S=v.borderColor,E=v.fillColor,M=this.layer.viewport.scale;this.setCss(g,_defineProperty$1(_defineProperty$1(_defineProperty$1(_defineProperty$1(_defineProperty$1(_defineProperty$1(_defineProperty$1(_defineProperty$1(_defineProperty$1({position:"absolute",left:n.x-4+"px",top:n.y-4+"px",maxWidth:s+"px",maxHeight:w+"px",minWidth:"20px",textAlign:"left",whiteSpace:"pre-wrap",fontFamily:d,color:y,fontSize:m*M+"pt",fontStyle:f,fontWeight:x},"textAlign",k),"borderWidth",P+"px"),"borderColor",S||"rgb(0, 0, 0)"),"borderStyle","solid"),"backgroundColor",E||"transparent"),"lineHeight","1.2em"),"padding","3px"),"overflow","auto"),"-webkit-user-select","text")),g.className="freetext",g.addEventListener("blur",this.onBlur),g.addEventListener("paste",this.onPaste),this.freetextElement=g,this.layer.pageDiv.append(g),g.focus()}}},{key:"handlePaste",value:function(e){pastePlainText(e)}}])}();function $(e,n,r,o=u=>u){return e*o(.5-n*(.5-r))}function se(e){return[-e[0],-e[1]]}function l(e,n){return[e[0]+n[0],e[1]+n[1]]}function a(e,n){return[e[0]-n[0],e[1]-n[1]]}function b(e,n){return[e[0]*n,e[1]*n]}function he(e,n){return[e[0]/n,e[1]/n]}function R(e){return[e[1],-e[0]]}function B(e,n){return e[0]*n[0]+e[1]*n[1]}function ue(e,n){return e[0]===n[0]&&e[1]===n[1]}function ge(e){return Math.hypot(e[0],e[1])}function de(e){return e[0]*e[0]+e[1]*e[1]}function A(e,n){return de(a(e,n))}function G(e){return he(e,ge(e))}function ie(e,n){return Math.hypot(e[1]-n[1],e[0]-n[0])}function L(e,n,r){let o=Math.sin(r),u=Math.cos(r),s=e[0]-n[0],w=e[1]-n[1],g=s*o+w*u;return[s*u-w*o+n[0],g+n[1]]}function K(e,n,r){return l(e,b(a(n,e),r))}function ee(e,n,r){return l(e,b(n,r))}var{min:C,PI:xe}=Math,pe=.275,V=xe+1e-4;function ce(e,n={}){let{size:r=16,smoothing:o=.5,thinning:u=.5,simulatePressure:s=!0,easing:w=j=>j,start:g={},end:v={},last:y=!1}=n,{cap:m=!0,easing:d=j=>j*(2-j)}=g,{cap:f=!0,easing:x=j=>--j*j*j+1}=v;if(e.length===0||r<=0)return[];let k,P=e[e.length-1].runningLength,S=g.taper===!1?0:g.taper===!0?Math.max(r,P):g.taper,E=v.taper===!1?0:v.taper===!0?Math.max(r,P):v.taper,M=Math.pow(r*o,2),T=[],D=[],I=e.slice(0,10).reduce((j,Z)=>{let W=Z.pressure;if(s){let te=C(1,Z.distance/r),le=C(1,1-te);W=C(1,j+te*pe*(le-j))}return(j+W)/2},e[0].pressure),N=$(r,u,e[e.length-1].pressure,w),O=e[0].vector,F=e[0].point,U=F,Y=F,Q=U,q=!1;for(let j=0;j<e.length;j++){let{pressure:Z}=e[j],{point:W,vector:te,distance:le,runningLength:oe}=e[j];if(j<e.length-1&&P-oe<3)continue;if(u){if(s){let Me=C(1,le/r),Le=C(1,1-Me);Z=C(1,I+Me*pe*(Le-I))}N=$(r,u,Z,w)}else N=r/2;k===void 0&&(k=N);let Ee=oe<S?d(oe/S):1,Ae=P-oe<E?x((P-oe)/E):1;N=Math.max(.01,N*Math.min(Ee,Ae));let ve=(j<e.length-1?e[j+1]:e[j]).vector,ke=j<e.length-1?B(te,ve):1,Ce=ke!==null&&ke<0;if(B(te,O)<0&&!q||Ce){let Me=b(R(O),N);for(let Le=1/13,Te=0;Te<=1;Te+=Le)Y=L(a(W,Me),W,V*Te),T.push(Y),Q=L(l(W,Me),W,V*-Te),D.push(Q);F=Y,U=Q,Ce&&(q=!0);continue}if(q=!1,j===e.length-1){let Me=b(R(te),N);T.push(a(W,Me)),D.push(l(W,Me));continue}let Pe=b(R(K(ve,te,ke)),N);Y=a(W,Pe),(j<=1||A(F,Y)>M)&&(T.push(Y),F=Y),Q=l(W,Pe),(j<=1||A(U,Q)>M)&&(D.push(Q),U=Q),I=Z,O=te}let ne=e[0].point.slice(0,2),J=e.length>1?e[e.length-1].point.slice(0,2):l(e[0].point,[1,1]),re=[],X=[];if(e.length===1){if(!S&&!E||y){let j=ee(ne,G(R(a(ne,J))),-(k||N)),Z=[];for(let W=1/13,te=W;te<=1;te+=W)Z.push(L(j,ne,2*V*te));return Z}}else{if(!(S||E&&e.length===1))if(m)for(let Z=1/13,W=Z;W<=1;W+=Z){let te=L(D[0],ne,V*W);re.push(te)}else{let Z=a(T[0],D[0]),W=b(Z,.5),te=b(Z,.51);re.push(a(ne,W),a(ne,te),l(ne,te),l(ne,W))}let j=R(se(e[e.length-1].vector));if(E||S&&e.length===1)X.push(J);else if(f){let Z=ee(J,j,N);for(let W=1/29,te=W;te<1;te+=W)X.push(L(Z,J,3*V*te))}else X.push(l(J,b(j,N)),l(J,b(j,.99*N)),a(J,b(j,.99*N)),a(J,b(j,N)))}return T.concat(X,D.reverse(),re)}function me(e,n={}){var r;let{streamline:o=.5,size:u=16,last:s=!1}=n;if(e.length===0)return[];let w=.15+.85*(1-o),g=Array.isArray(e[0])?e:e.map(({x,y:k,pressure:P=.5})=>[x,k,P]);if(g.length===2){let x=g[1];g=g.slice(0,-1);for(let k=1;k<5;k++)g.push(K(g[0],x,k/4))}g.length===1&&(g=[...g,[...l(g[0],[1,1]),...g[0].slice(2)]]);let v=[{point:[g[0][0],g[0][1]],pressure:g[0][2]>=0?g[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],y=!1,m=0,d=v[0],f=g.length-1;for(let x=1;x<g.length;x++){let k=s&&x===f?g[x].slice(0,2):K(d.point,g[x],w);if(ue(d.point,k))continue;let P=ie(k,d.point);if(m+=P,x<f&&!y){if(m<u)continue;y=!0}d={point:k,pressure:g[x][2]>=0?g[x][2]:.5,vector:G(a(d.point,k)),distance:P,runningLength:m},v.push(d)}return v[0].vector=((r=v[1])==null?void 0:r.vector)||[0,0],v}function ae(e,n={}){return ce(me(e,n),n)}var PaintShape=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.layer;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||this.reset(),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)}},{key:"checkSvgChild",value:function(e){switch(e){case"square":return"rect";case"circle":return"ellipse";case"ink":return"path";default:return"line"}}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale),u=Math.min(r.x,o.x),s=Math.min(r.y,o.y),w=Math.max(r.x,o.x),g=Math.max(r.y,o.y),v={left:u,top:s,right:w,bottom:g},y=this.color,m={operate:"add-annot",type:this.tool==="arrow"?"line":this.tool,pageIndex:this.layer.page,date:new Date,borderWidth:2,opacity:1,borderColor:y,color:y,rect:v,borderStyle:"solid",dashes:[],contents:""};if(this.tool==="arrow"&&(m.arrow=!0),m.type=="line"){var d=[r.x,r.y,o.x,o.y];m.linePoints=d,m.rect={left:u-6,top:s-6,right:w+6,bottom:g+6},m.tail="none",m.head="none",this.tool==="arrow"&&(m.tail="openarrow",m.arrow=!0)}else if(this.tool==="ink"){var f=this.formatPath(),x=f.inkPointes,k=f.rect;m.rect=k,m.inkPointes=x}else{var P=[u,g,w,s];m.linePoints=P,m.fillTransparency=1,m.fillColor=""}this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:m})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,u=this.layer.viewport,s=u.width,w=u.height,g=this.layer.viewport.scale;if(r=Math.min(s,r),r=Math.max(0,r),o=Math.min(w,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x===this.initEndPoint.x&&(this.initEndPoint.x=this.initEndPoint.x+1),this.initStartPoint.y===this.initEndPoint.y&&(this.initEndPoint.y=this.initEndPoint.y+1),this.shapeEle){if(e.shiftKey&&(this.tool==="circle"||this.tool==="square")){var v=this.initStartPoint,y=this.initEndPoint,m=Math.abs(y.x-v.x),d=Math.abs(y.y-v.y),f=Math.min(m,d);v.x<y.x?y.x=v.x+f:y.x=v.x-f,v.y<y.y?y.y=v.y+f:y.y=v.y-f}var x=this.calculate(this.initStartPoint,this.initEndPoint),k=this.shapeEle;if(this.tool==="circle")k.setAttribute("cx",x.left+x.width/2),k.setAttribute("cy",x.top+x.height/2),k.setAttribute("rx",(x.width-1)/2),k.setAttribute("ry",(x.height-1)/2);else if(this.tool==="square")k.setAttribute("x",x.left+.5),k.setAttribute("y",x.top-.5),k.setAttribute("width","".concat(Math.abs(x.width-1),"px")),k.setAttribute("height","".concat(Math.abs(x.height-1),"px"));else if(this.tool==="line"||this.tool==="arrow"){if(k.setAttribute("x1",this.initStartPoint.x),k.setAttribute("y1",this.initStartPoint.y),k.setAttribute("x2",this.initEndPoint.x),k.setAttribute("y2",this.initEndPoint.y),this.tool==="arrow"){var P=this.layer.svgElement.querySelector("[tail]");if(P){var S=12*g,E=new ArrowHelper(this.initStartPoint,this.initEndPoint).getArrowPoints("openarrow",30,S),M="";E.forEach(function(O){M.length>0&&(M+=" "),M+="".concat(O.x,",").concat(O.y)}),M.length>0&&P.setAttribute("points",M)}}}else if(this.tool==="ink"){this.path.push([r,o]);var T=this.getFreeDrawSvgPath();k.setAttribute("d",T)}}else{var D=createSvg(this.checkSvgChild(this.tool),{fill:"none",stroke:this.color,"stroke-width":2*g,"stroke-opacity":1});if(this.tool==="arrow"){var I=12*g,N=new ArrowHelper(this.initStartPoint,this.initEndPoint).getArrow("openarrow",30,I);N&&(this.tail="openarrow",N.setAttribute("tail",""),N.setAttribute("stroke",this.color),N.setAttribute("stroke-width",2*g),N.setAttribute("fill","none"),N.setAttribute("stroke-opacity",1),this.layer.svgElement.append(N))}this.shapeEle=D,this.layer.svgElement.append(this.shapeEle)}}},{key:"getFreeDrawSvgPath",value:function(){var e={simulatePressure:!1,size:1,thinning:0,smoothing:.3,streamline:.5,easing:function(n){return Math.sin(n*Math.PI/2)},last:!1};return getSvgPathFromStroke(ae(this.path,e))}},{key:"handlePoint",value:function(e){var n=getInitialPoint({x:e[0],y:e[1]},this.layer.viewport.scale);return{x:n.x,y:n.y}}},{key:"getRect",value:function(){var e=[],n=[];this.path.forEach(function(w){e.push(w[0]),n.push(w[1])});var r=Math.min.apply(Math,n),o=Math.min.apply(Math,e),u=Math.max.apply(Math,n),s=Math.max.apply(Math,e);return this.path=this.path.map(function(w){return[w[0]-o,w[1]-r]}),{left:o,top:r,bottom:u,right:s,width:s-o,height:u-r}}},{key:"formatPath",value:function(){for(var e=[],n=this.path.length,r=[],o=[],u=[],s=0;s<n;s++){var w=this.handlePoint(this.path[s]);r.push(w.x),o.push(w.y),e.push({PointX:w.x.toFixed(2),PointY:w.y.toFixed(2)})}return u.push(e),{inkPointes:u,rect:{left:Math.min.apply(Math,r),bottom:Math.max.apply(Math,o),right:Math.max.apply(Math,r),top:Math.min.apply(Math,o)}}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}}])}(),Text=function(){return _createClass(function e(n){var r=n.tool,o=n.layer;_classCallCheck(this,e),this.textNoteStr=`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M2.39961 3.60004H21.5996V18H11.9996L5.99961 21.6V18H2.39961V3.60004Z" fill="currentColor"/>
      <rect x="5.99902" y="7.20001" width="7.2" height="1.8" fill="white"/>
      <rect x="5.99902" y="11.4" width="12" height="1.8" fill="white"/>
    </svg>`,this.deleteSvgStr=`<path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M14 1.5V4.5H19V5.5H16.5V18.5H3.5V5.5H1V4.5H6V1.5H14ZM4.5 5.5V17.5H15.5V5.5H4.5ZM13 2.5V4.5H7V2.5H13ZM8.5 8V15H7.5V8H8.5ZM12.5 15V8H11.5V15H12.5Z" fill="#333333"/>
    `,this.layer=o,this._tool=r,this.color="#FF0000",this.freetextElement=null,this.start=null,this.end=null,this.onClick=this.handleClick.bind(this),this.onBlur=this.handleBlur.bind(this),this.onPaste=this.handlePaste.bind(this),this.init()},[{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||this.reset(),this._tool=e)}},{key:"reset",value:function(){this.start=null,this.end=null,this.layer.pageDiv.removeEventListener("click",this.onClick);var e=this.textElement,n=this.textEditorElement;n&&(n.remove(),n.removeEventListener("blur",this.onBlur),n.removeEventListener("paste",this.onPaste),this.textEditorElement=null),e&&(e.remove(),this.textElement=null)}},{key:"init",value:function(){this.layer.pageDiv.removeEventListener("click",this.onClick),this.layer.pageDiv.addEventListener("click",this.onClick)}},{key:"getTextRect",value:function(){var e=this.layer.viewport.scale,n=getInitialPoint(this.start,e),r=getInitialPoint(this.end,e);return{left:n.x,top:n.y,right:r.x,bottom:r.y}}},{key:"handleText",value:function(){var e=this.textEditorElement;if(e.innerText){this.end={x:this.start.x+24,y:this.start.y-24};var n=this.getTextRect(),r=this.color,o=getHtmlToText(e),u={operate:"add-annot",type:"text",pageIndex:this.layer.page,date:new Date,color:r,opacity:1,contents:o,rect:n};this.layer.eventBus.dispatch("annotationChanged",{type:"add",annotation:u})}this.layer.addMode=!1,e.remove(),e.removeEventListener("blur",this.onBlur),e.removeEventListener("paste",this.onPaste),this.textElement.remove(),this.textElement=null,this.textEditorElement=null}},{key:"handleBlur",value:function(e){this.textEditorElement&&this.handleText(e)}},{key:"handleClick",value:function(e){this.textElement||this.layer.annotationStore.selectedElementName||(this.layer.addMode=!0,this.renderTextElement(e),this.layer.pageDiv.append(this.textElement),this.textEditorElement.focus())}},{key:"setTextEditor",value:function(){var e=document.createElement("div");this.textElementContainer=e,this.setCss(e,{position:"absolute",left:"16px",top:"28px",border:"2px solid #FF0000",outline:"none",padding:"0 8px 28px",borderRadius:"4px",background:"#FFFFFF",whiteSpace:"pre-wrap",textAlign:"left"});var n=document.createElement("div");n.className="text-title",n.innerText=this.layer.annotationStore.$t("header.note"),e.append(n);var r=document.createElement("div");r.setAttribute("role","textbox"),r.setAttribute("contenteditable",!0),r.setAttribute("spellcheck",!1),this.setCss(r,{width:"290px",height:"110px",fontSize:"16px",color:"#000",lineHeight:"1.2em",outline:"none",overflow:"auto","-webkit-user-select":"text"}),r.className="text-editor",this.textEditorElement=r,e.append(r),r.addEventListener("paste",this.onPaste),onClickOutside$1([this.textElementContainer,this.textElement],this.onBlur.bind(this))}},{key:"setCss",value:function(e,n){if(e&&n)for(var r in n)e.style[r]=n[r]}},{key:"renderTextElement",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e);this.start={x:n.x-12,y:n.y+12};var r=document.createElement("div");this.setCss(r,{position:"absolute",left:n.x-12+"px",top:n.y-12+"px",zIndex:6,color:"#FF0000"}),this.layer.eventBus.dispatch("textAdd",{left:n.x-12,top:n.y-12}),r.innerHTML=this.textNoteStr,r.className="text",this.textElement=r,this.setTextEditor(n),this.textElement.append(this.textElementContainer)}},{key:"handlePaste",value:function(e){pastePlainText(e)}}])}(),TextField=function(e){function n(u){var s,w=u.annotation,g=u.layer,v=u.show,y=v!==void 0&&v,m=u.highlight;return _classCallCheck(this,n),(s=_callSuper(this,n,[{annotation:w,layer:g}])).hidden=!0,s.initial=!1,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=y,s.highlight=m,s.onMousedown=s.handleMouseDown.bind(s),s.onMouseup=s.handleMouseUp.bind(s),s.onMousemove=s.handleMouseMove.bind(s),s.onDelete=s.handleDelete.bind(s),s.onBlur=s.handleBlur.bind(s),s.toggleAttrbutePanel=s.toggleAttrbutePanel.bind(s),s.handlePropertyPanel=s.handlePropertyPanel.bind(s),s.setProperty=s.setProperty.bind(s),s.setHighlight=s.setHighlight.bind(s),s.render(),s}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){this.layer.eventBus._on("setProperty",this.setProperty),this.layer.eventBus._on("setHighlightForm",this.setHighlight);var u=this.annotation;u.contents||(u.contents=""),"required"in u||(u.required=0),u.backgroundColor||(u.backgroundColor="transparent"),u.textAlignment||(u.textAlignment="left"),u.isBold&&u.isItalic?u.fontStyle="boldItalic":u.isBold?u.fontStyle="bold":u.isItalic?u.fontStyle="italic":u.fontStyle="normal";var s=this.getActualRect(this.layer.viewport.scale),w=s.start,g=s.end;this.start=w,this.end=g;var v,y=this.calculate(w,g),m=document.createElement("div");m.id=u.name,m.className="annotation",m.style.top=y.top+"px",m.style.left=y.left+"px",m.style.width=y.width+"px",m.style.height=y.height+"px",m.style.backgroundColor=this.highlight?"#4982E54D":"",m.style.overflow="hidden",this.annotationContainer=m,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),v=createElement("div",{left:0,top:0,width:"".concat(Math.abs(y.width),"px"),height:"".concat(Math.abs(y.height),"px"),position:"relative"}),this.shapeElement=v,this.getImage(),this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),this.setMultiLine(u.isMultiLine),this.shapeElement.append(this.textContainer),this.textContainer.addEventListener("blur",this.onBlur),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:y.left+y.width-84+"px",top:y.top+y.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.style.position="absolute",d.style.zIndex=1,d.style.left="".concat(y.left-4,"px"),d.style.top="".concat(y.top-4,"px"),d.style.width="".concat(y.width+8,"px"),d.style.height="".concat(y.height+8,"px"),this.outerLine=d,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:y.width,height:y.height,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height/2+1}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height+1}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+1,y:y.height+1}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+1,y:y.height+1}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+1,y:y.height/2+1}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+1,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+1,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.popupElement),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.initial=!0,this.layer.documentViewer.toolMode!=="form"&&(u.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):u.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1)}},{key:"getActualRect",value:function(u){var s=this.annotation.rect,w=s.left,g=s.top,v=s.right,y=s.bottom;return{start:getActualPoint({x:w,y:g},u),end:getActualPoint({x:v,y},u)}}},{key:"rectCalc",value:function(u){var s=u.start,w=u.end;return{top:s.y<w.y?s.y:w.y,left:s.x<w.x?s.x:w.x,width:Math.abs(w.x-s.x),height:Math.abs(w.y-s.y)}}},{key:"calculate",value:function(u,s){var w=this.rectCalc({start:u,end:s});this.initRect=w;var g=(this.annotation.borderWidth||1)*this.layer.viewport.scale;return{top:w.top-g,left:w.left-g,width:w.width+2*g,height:w.height+2*g}}},{key:"getInitialPoint",value:function(){var u,s,w,g,v=this.layer.viewport.scale,y=this.start.x,m=this.start.y,d=this.end.x,f=this.end.y,x=this.layer.viewport,k=x.width,P=x.height,S=x.rotation;return S===0?(u=y/v,s=m/v,w=d/v,g=f/v):S===90?(u=m/v,s=y/v,w=f/v,g=d/v):S===180?(u=(k-y)/v,s=m/v,w=(k-d)/v,g=f/v):(u=(P-m)/v,s=(k-y)/v,w=(P-f)/v,g=(k-d)/v),{start:{x:u,y:s},end:{x:w,y:g}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var u=this.annotation;this.layer.annotationStore.selectedElementName=u.name;var s=_objectSpread2$1({},u);delete s.annotPtr,delete s.pagePtr,delete s.operate,delete s.targetPage,this.layer.eventBus.dispatch("annotationSelected",s),this.layer.eventBus.dispatch("changeRightPanelBtnDisabled")}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("propertyChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(u){var s=this;if(!(!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(u==null?void 0:u.target)))if(this.layer.documentViewer.toolMode==="form"){this.hidden=!1,this.updateTool();var w=[this.annotationContainer,this.outerLine,this.popupElement,document.getElementById("formPropertyPanelButton"),document.getElementsByClassName("right-panel")[0]];this.layer.eventBus._on("textfieldPropertyPanelChanged",this.handlePropertyPanel),onClickOutside$1(w,this.handleOutside.bind(this)),this.textContainer.style.pointerEvents="none",this.textContainer.style.cursor="pointer"}else setTimeout(function(){s.textContainer.focus(),s.textContainer.setSelectionRange(s.textContainer.value.length,s.textContainer.value.length)},0),this.textContainer.style.pointerEvents="auto",this.textContainer.style.cursor="text",this.textContainer.style.opacity="",this.imgEle.style.opacity=0}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleOutside",value:function(){this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(this.layer.eventBus.dispatch("annotationDeselected"),this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("propertyChange",null)),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLine.removeEventListener("mousedown",this.onMousedown),this.outerLine.removeEventListener("touchstart",this.onMousedown),this.outerLineContainer.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("textfieldPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleBlur",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var s,w,g,v,y,m,d,f,x,k=this;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:for(s=null,w=0,g=0,this.annotation.contents!==this.textContainer.value&&(this.annotation.contents=this.textContainer.value,this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{type:"textfield",operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,contents:this.annotation.contents}}),this.getImage()),v=Object.values(this.layer.documentViewer.annotations).reduce(function(S,E){return S.concat(E)},[]),y=v.findIndex(function(S){return S.name===k.annotation.name}),m=y+1;m<v.length;m++)(d=v[m]).type!=="textfield"||d.contents||(this.annotation.contents&&!s&&(s=d),w++,d.required&&g++);for(f=0;f<y;f++)(x=v[f]).type!=="textfield"||x.contents||(!s&&(s=x),w++,x.required&&g++);this.layer.documentViewer.isFillConsecutively&&s&&this.layer.documentViewer.jumpToAnnotation(s),this.annotation.contents||(w++,this.annotation.required&&g++),this.layer.eventBus.dispatch("textfieldsFilledComplete",{unFilledAllNumber:w,unFilledNumber:g}),this.textContainer.style.pointerEvents="none",this.textContainer.style.cursor="pointer",this.textContainer.style.opacity=0,this.imgEle.style.opacity="";case 15:case"end":return P.stop()}},u,this)})),function(){return o.apply(this,arguments)})},{key:"handleMouseDown",value:function(u){this.layer.tool&&u.stopPropagation();var s=u.target.getAttribute("data-id"),w=this.layer.documentViewer.getScrollViewElement();this.scrollTop=w.scrollTop,this.scrollLeft=w.scrollLeft;var g=getClickPoint(u),v=g.pageX,y=g.pageY;this.startState={operator:s,clickX:v,clickY:y},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(u){u.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var s=getClickPoint(u),w=s.pageX,g=s.pageY,v=this.layer.documentViewer.getScrollViewElement(),y=v.scrollTop;w=w+v.scrollLeft-this.scrollLeft,g=g+y-this.scrollTop;var m=this.start,d=this.end,f=this.startState,x=this.layer.viewport,k=x.width,P=x.height;if(f.operator==="nw-resize"){var S=w-(f.clickX-this.start.x),E=g-(f.clickY-this.start.y);S=Math.min(d.x-5,S),S=Math.max(0,S),E=Math.min(d.y-5,E),E=Math.max(0,E),this.update({start:{x:S,y:E},end:d})}else if(f.operator==="w-resize"){var M=w-(f.clickX-this.start.x);M=Math.min(d.x-5,M),M=Math.max(0,M),this.update({start:{x:M,y:m.y},end:d})}else if(f.operator==="sw-resize"){var T=w-(f.clickX-this.start.x),D=g-(f.clickY-this.end.y);T=Math.min(d.x-5,T),T=Math.max(0,T),D=Math.min(P,D),D=Math.max(m.y+5,D),this.update({start:{x:T,y:m.y},end:{x:d.x,y:D}})}else if(f.operator==="s-resize"){var I=g-(f.clickY-this.end.y);I=Math.min(P,I),I=Math.max(m.y+5,I),this.update({start:m,end:{x:d.x,y:I}})}else if(f.operator==="se-resize"){var N=w-(f.clickX-this.end.x),O=g-(f.clickY-this.end.y);N=Math.min(k,N),N=Math.max(m.x+5,N),O=Math.min(P,O),O=Math.max(m.y+5,O),this.update({start:m,end:{x:N,y:O}})}else if(f.operator==="e-resize"){var F=w-(f.clickX-this.end.x);F=Math.min(k,F),F=Math.max(m.x+5,F),this.update({start:m,end:{x:F,y:d.y}})}else if(f.operator==="ne-resize"){var U=w-(f.clickX-this.end.x),Y=g-(f.clickY-this.start.y);U=Math.min(k,U),U=Math.max(m.x+5,U),Y=Math.min(d.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:m.x,y:Y},end:{x:U,y:d.y}})}else if(f.operator==="n-resize"){var Q=g-(f.clickY-this.start.y);Q=Math.min(d.y-5,Q),Q=Math.max(0,Q),this.update({start:{x:m.x,y:Q},end:d})}else if(f.operator==="move"){var q,ne,J,re,X=this.layer.documentViewer,j=this.getMouseLocation(u),Z=X.getSelectedPage(j,j);if(Z.first&&Z.first!==this.layer.page+1){var W=X.windowToPage(j,Z.first,!1),te=Math.abs(m.x-d.x),le=Math.abs(m.y-d.y);if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===0)q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y;else if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===1)q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y);else if(X.pdfViewer.spreadMode===1&&X.pdfViewer.scrollMode===0){var oe=Math.min(Z.first,this.layer.page+1),Ee=Math.max(Z.first,this.layer.page+1);if(Ee-oe>2||oe+1===Ee&&oe%2==0)return;oe+1===Ee?(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y)):oe+2===Ee&&(q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y)}else if(X.pdfViewer.spreadMode===2&&X.pdfViewer.scrollMode===0){var Ae=Math.min(Z.first,this.layer.page+1),ve=Math.max(Z.first,this.layer.page+1);if(ve-Ae>2||Ae+1===ve&&(Ae!==1||ve!==2)&&ve%2==0||Ae===1&&ve===3)return;Ae+2===ve||Ae===1&&ve===2?(q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y):Ae+1===ve&&(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y))}var ke=X.pdfViewer._pages[Z.first-1].compdfAnnotationLayer;if(!ke)return;this.layer=ke,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ce=this.layer.div;Ce.append(this.annotationContainer),Ce.append(this.outerLineContainer)}else{q=w-(f.clickX-this.start.x),ne=g-(f.clickY-this.start.y),J=w-(f.clickX-this.end.x),re=g-(f.clickY-this.end.y);var Pe=X.pageToWindow({x:q,y:ne},this.layer.page+1,!1),Me=X.pageToWindow({x:J,y:re},this.layer.page+1,!1),Le=0,Te=0;g>f.clickY?Te=(Te=v.offsetHeight-(Me.y-v.scrollTop-v.offsetTop))<100?5:0:g<f.clickY&&(Te=(Te=Pe.y-v.scrollTop-v.offsetTop)<100?-5:0),w>f.clickX?Le=(Le=v.offsetWidth-(Me.x-v.scrollLeft-v.offsetLeft))<100?5:0:w<f.clickX&&(Le=(Le=Pe.x-v.scrollLeft-v.offsetLeft)<100?-5:0),(Le||Te)&&(v.scrollTop+=Te,v.scrollLeft+=Le);var ye={width:Math.abs(m.x-d.x),height:Math.abs(m.y-d.y)};q<J?(q=Math.max(0,q),q=Math.min(k-ye.width,q),J=Math.max(ye.width,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-ye.width,J),q=Math.max(ye.width,q),q=Math.min(k,q)),ne<re?(ne=Math.max(0,ne),ne=Math.min(P-ye.height,ne),re=Math.max(ye.height,re),re=Math.min(P,re)):(re=Math.max(0,re),re=Math.min(P-ye.height,re),ne=Math.max(ye.height,ne),ne=Math.min(P,ne))}this.update({start:{x:q,y:ne},end:{x:J,y:re}})}f.clickX=w,f.clickY=g}},{key:"toggleAttrbutePanel",value:function(){this.layer.eventBus.dispatch("toggleAttrbutePanel")}},{key:"handleDelete",value:function(u){this.layer.tool&&u&&u.stopPropagation(),this.delete();var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",s)}},{key:"delete",value:function(){var u;this.handleOutside(),(u=this.annotationContainer)===null||u===void 0||u.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(u){this.layer.tool&&u.stopPropagation(),u.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var s=this.annotation,w=this.getInitialPoint(),g=w.start,v=w.end,y={left:g.x,top:g.y,right:v.x,bottom:v.y};if(y!==s.rect||s.pageIndex!==this.layer.page)if(s.rect=y,s.pageIndex!==this.layer.page){var m={type:"delete",annotation:{operate:"del-annot",name:s.name,pageIndex:s.pageIndex,annotPtr:s.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",m);var d=Object.assign({},s);delete d.annotPtr,delete d.pagePtr,delete d.name,d.operate="add-form",d.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:d}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",name:s.name,pageIndex:this.layer.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr,rect:y}}),this.getImage(!0)}},{key:"update",value:function(u){var s=u.start,w=u.end,g=this.calculate(s,w);this.start=s,this.end=w,this.annotationContainer.style.top=g.top+"px",this.annotationContainer.style.left=g.left+"px",this.annotationContainer.style.width=g.width+"px",this.annotationContainer.style.height=g.height+"px",this.annotationContainer.style.width="".concat(g.width,"px"),this.annotationContainer.style.height="".concat(g.height,"px"),this.outerLine.style.left="".concat(g.left-4,"px"),this.outerLine.style.top="".concat(g.top-4,"px"),this.outerLine.style.width="".concat(g.width+8,"px"),this.outerLine.style.height="".concat(g.height+8,"px");var v=g.left+g.width-84+"px",y=g.top+g.height+12+"px";this.popupElement.style.left=v,this.popupElement.style.top=y,this.moveRect.setAttribute("width",g.width),this.moveRect.setAttribute("height",g.height),this.LeftRect.setAttribute("y",g.height/2+1),this.bottomLeftRect.setAttribute("y",g.height+1),this.bottomRect.setAttribute("x",g.width/2+1),this.bottomRect.setAttribute("y",g.height+1),this.bottomRightRect.setAttribute("x",g.width+1),this.bottomRightRect.setAttribute("y",g.height+1),this.rightRect.setAttribute("x",g.width+1),this.rightRect.setAttribute("y",g.height/2+1),this.topRightRect.setAttribute("x",g.width+1),this.topRect.setAttribute("x",g.width/2+1)}},{key:"handlePropertyPanel",value:function(u){var s=this;if(this.layer.annotationStore.selectedElementName===this.annotation.name){var w=this.annotation,g=0;for(var v in u)for(var y in this.annotation)if(y===v&&this.annotation[y]!==u[v]){if(u.contents!==""&&(this.annotation[y]=u[v],g++),v==="backgroundColor"&&(this.textContainer.style[v]=u[v]),v==="textAlignment"&&(this.textContainer.style.textAlign=u[v]),v==="fontSize"&&(this.textContainer.style.fontSize=u[v]*this.layer.viewport.scale+"px"),v==="color"&&(this.textContainer.style.color=u[v]),v==="fontName"&&(this.textContainer.style.fontFamily=u[v]),v==="fontStyle"){var m=u[v];m==="boldItalic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="bold",w.isBold=!0,w.isItalic=!0):m==="bold"?(this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="bold",w.isBold=!0,w.isItalic=!1):m==="italic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="normal",w.isBold=!1,w.isItalic=!0):(w.isItalic=!1,w.isBold=!1,this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="normal")}v==="contents"&&(this.textContainer.nodeName==="INPUT"?this.textContainer.value=u[v]:this.textContainer.innerHTML=this.annotation.contents),v==="isMultiLine"&&this.changeElementMultiLine(u[v])}if(g>0){var d={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr},f=["fontSize","fontName","color","fontStyle"].some(function(U){return u[U]});if(f){d.fontSize=w.fontSize,d.color=w.color;var x={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},k=w.fontName;w.isBold&&w.isItalic?d.fontName=x[k].boldItalic:w.isBold?d.fontName=x[k].bold:w.isItalic?d.fontName=x[k].italic:d.fontName=x[k]?x[k].normal:k,delete u.fontName}var P=Object.assign({},d,u),S=0,E=0;if("contents"in P&&P.contents){for(var M=Object.values(this.layer.documentViewer.annotations).reduce(function(U,Y){return U.concat(Y)},[]),T=M.findIndex(function(U){return U.name===s.annotation.name}),D=null,I=T+1;I<M.length;I++){var N=M[I];N.type!=="textfield"||N.contents||(!D&&(D=N),S++,N.required&&E++)}for(var O=0;O<T;O++){var F=M[O];F.type!=="textfield"||F.contents||(!D&&(D=F),S++,F.required&&E++)}this.layer.documentViewer.isFillConsecutively&&D&&this.layer.documentViewer.jumpToAnnotation(D)}"contents"in P&&(P.contents||(S++,this.annotation.required&&E++),this.layer.eventBus.dispatch("textfieldsFilledComplete",{unFilledAllNumber:S,unFilledNumber:E})),this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:P}),this.getImage()}}}},{key:"changeElementMultiLine",value:function(u){this.textContainer.remove(),this.textContainer=null,this.setMultiLine(u),this.shapeElement.append(this.textContainer),this.textContainer.removeEventListener("blur",this.onBlur),this.textContainer.addEventListener("blur",this.onBlur)}},{key:"setMultiLine",value:function(u){var s=null;u?(s=createElement("textarea",{position:"absolute",left:0,top:0,width:"100%",height:"100%",outline:"none",borderColor:this.annotation.borderColor,borderStyle:this.annotation.borderStyle,borderWidth:this.annotation.borderWidth+"px",borderRadius:0,color:this.annotation.color,backgroundColor:this.annotation.backgroundColor,pointerEvents:"none",cursor:"pointer",resize:"none",overflowWrap:"break-word",textAlign:this.annotation.textAlignment,fontSize:this.annotation.fontSize*this.layer.viewport.scale+"px",fontWeight:this.annotation.isBold?"bold":"normal",fontStyle:this.annotation.isItalic?"italic":"normal",fontFamily:this.annotation.fontName,opacity:0})).innerHTML=this.annotation.contents:s=createElement("input",{position:"absolute",left:0,top:0,width:"100%",height:"100%",outline:"none",borderColor:this.annotation.borderColor,borderStyle:this.annotation.borderStyle,borderWidth:this.annotation.borderWidth+"px",borderRadius:0,color:this.annotation.color,backgroundColor:this.annotation.backgroundColor,pointerEvents:"none",cursor:"pointer",textAlign:this.annotation.textAlignment,fontSize:this.annotation.fontSize*this.layer.viewport.scale+"px",fontWeight:this.annotation.isBold?"bold":"normal",fontStyle:this.annotation.isItalic?"italic":"normal",fontFamily:this.annotation.fontName,opacity:0},{value:this.annotation.contents}),this.textContainer=s;var w=this.annotation.fontStyle;w==="boldItalic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="bold"):w==="bold"?(this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="bold"):w==="italic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="normal"):(this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="normal")}},{key:"setProperty",value:function(u){if(u.name===this.annotation.name){for(var s in u)for(var w in this.annotation)if(w===s&&this.annotation[w]!==u[s]){if(u.contents!==""&&(this.annotation[w]=u[s],updatePropsNum++),s==="backgroundColor"&&(this.textContainer.style[s]=u[s]),s==="textAlignment"&&(this.textContainer.style.textAlign=u[s]),s==="fontSize"&&(this.textContainer.style.fontSize=u[s]*this.layer.viewport.scale+"px"),s==="color"&&(this.textContainer.style.color=u[s]),s==="fontName"&&(this.textContainer.style.fontFamily=u[s]),s==="fontStyle"){var g=u[s];g==="boldItalic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="bold",annotation.isBold=!0,annotation.isItalic=!0):g==="bold"?(this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="bold",annotation.isBold=!0,annotation.isItalic=!1):g==="italic"?(this.textContainer.style.fontStyle="italic",this.textContainer.style.fontWeight="normal",annotation.isBold=!1,annotation.isItalic=!0):(annotation.isItalic=!1,annotation.isBold=!1,this.textContainer.style.fontStyle="normal",this.textContainer.style.fontWeight="normal")}s==="contents"&&(this.textContainer.nodeName==="INPUT"?this.textContainer.value=u[s]:this.textContainer.innerHTML=this.annotation.contents),s==="isMultiLine"&&this.changeElementMultiLine(u[s])}var v={operate:"mod-form",pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr},y=["fontSize","fontName","color","fontStyle"].some(function(x){return u[x]});if(y){v.fontSize=annotation.fontSize,v.color=annotation.color;var m={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},d=annotation.fontName;annotation.isBold&&annotation.isItalic?v.fontName=m[d].boldItalic:annotation.isBold?v.fontName=m[d].bold:annotation.isItalic?v.fontName=m[d].italic:v.fontName=m[d]?m[d].normal:d,delete u.fontName}var f=Object.assign({},v,u);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:f}),this.getImage()}}},{key:"setHighlight",value:function(u){this.highlight=u,this.annotationContainer.style.backgroundColor=this.highlight?"#4982E54D":""}},{key:"getImage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function u(s){var w,g,v,y,m,d,f,x,k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return w=this.initRect,g={width:parseInt(w.width*this.layer.ratio),height:parseInt(w.height*this.layer.ratio)},P.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,width:g.width,height:g.height});case 4:v=P.sent,(y=document.createElement("canvas")).style.width=g.width+"px",y.style.height=g.height+"px",y.width=g.width,y.height=g.height,(m=y.getContext("2d")).clearRect(0,0,y.width,y.height),(d=m.createImageData(g.width,g.height)).data.set(v),m.putImageData(d,0,0),f=y.toDataURL("image/png",1),s&&(x=this.calculate(this.start,this.end),this.shapeElement.style.width="".concat(x.width,"px"),this.shapeElement.style.height="".concat(x.height,"px")),this.imgEle?this.imgEle.src=f:((k=document.createElement("img")).style.width="100%",k.style.height="100%",k.style.pointerEvents="none",k.style.display="block",k.src=f,this.imgEle=k,this.shapeElement.append(this.imgEle));case 18:case"end":return P.stop()}},u,this)})),function(u){return r.apply(this,arguments)})}]);var r,o}(),AddTextField=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.layer;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initTextfieldName=this.setInitProperty.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.eventBus._on("initTextfieldName",this.initTextfieldName)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initTextfieldName",this.initTextfieldName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale);this.setInitProperty();var u={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},s={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},w={left:u.x,top:u.y,right:s.x,bottom:s.y},g={operate:"add-form",type:"textfield",pageIndex:this.layer.page,date:new Date,rect:w,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,color:"#000000",fontName:"Helvetica",fontSize:14,textAlignment:"left",textFieldSpe:0,isMultiLine:!1};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:g})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,u=this.layer.viewport,s=u.width,w=u.height;if(this.layer.viewport.scale,r=Math.min(s,r),r=Math.max(0,r),o=Math.min(w,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var g=this.initStartPoint,v=this.initEndPoint,y=Math.abs(v.x-g.x),m=Math.abs(v.y-g.y),d=Math.min(y,m);g.x<v.x?v.x=g.x+d:v.x=g.x-d,g.y<v.y?v.y=g.y+d:v.y=g.y-d}var f=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(f.top,"px"),x.style.left="".concat(f.left,"px"),x.style.width="".concat(Math.abs(f.width-1),"px"),x.style.height="".concat(Math.abs(f.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",position:"absolute"});this.shapeEle=k,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"setInitProperty",value:function(){var e=1;if(this.layer.annotationStore.annotationsAll)for(var n=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(u,s){return u.concat(s)},[]).filter(function(u){return u.type==="textfield"}),r=function(){var u="Text Field"+(o+1);if(n.every(function(s){return s.fieldName!==u}))return e=o+1,1},o=0;o<=n.length&&!r();o++);this.fieldName="Text Field"+e}}])}(),CheckBox=function(e){function n(u){var s,w=u.annotation,g=u.layer,v=u.show,y=v!==void 0&&v,m=u.highlight;return _classCallCheck(this,n),(s=_callSuper(this,n,[{annotation:w,layer:g}])).hidden=!0,s.initial=!1,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=y,s.highlight=m,s.onMousedown=s.handleMouseDown.bind(s),s.onMouseup=s.handleMouseUp.bind(s),s.onMousemove=s.handleMouseMove.bind(s),s.onDelete=s.handleDelete.bind(s),s.toggleAttrbutePanel=s.toggleAttrbutePanel.bind(s),s.handlePropertyPanel=s.handlePropertyPanel.bind(s),s.setProperty=s.setProperty.bind(s),s.setHighlight=s.setHighlight.bind(s),s.render(),s}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var s,w,g,v,y,m,d,f,x,k,P,S,E,M,T,D;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:this.layer.eventBus._on("setProperty",this.setProperty),this.layer.eventBus._on("setHighlightForm",this.setHighlight),(s=this.annotation).fieldName||(s.fieldName="Check Box_"+s.date.toLocaleString()),w=this.getActualRect(this.layer.viewport.scale),g=w.start,v=w.end,this.start=g,this.end=v,y=this.calculate(g,v),(m=document.createElement("div")).id=s.name,m.className="annotation",m.style.top=y.top+"px",m.style.left=y.left+"px",m.style.width=y.width+"px",m.style.height=y.height+"px",m.style.backgroundColor=this.highlight?"#4982E54D":"",m.style.overflow="hidden",this.annotationContainer=m,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),d=createElement("div",{left:0,top:0,width:"".concat(Math.abs(y.width),"px"),height:"".concat(Math.abs(y.height),"px"),position:"relative"}),this.shapeElement=d,this.getImage(),this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),f=createElement("div",{position:"absolute",left:0,top:0,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",borderColor:s.borderColor,borderWidth:"1px"|s.borderWidth,borderStyle:s.borderStyle,backgroundColor:s.backgroundColor,opacity:0}),this.borderElement=f,x=createSvg("svg",{width:"15",height:"12",viewBox:"0 0 15 12",fill:"none"},{width:"".concat(y.width/2,"px"),height:"".concat(y.height/2,"px")}),this.svgElement=x,k=createSvg("path",{d:"M14.0908 1.59619 L5.59625 10.0908 L1.00006 5.49457",stroke:"#43474D","stroke-width":"2"}),this.checkPath=k,P=createSvg("path",{d:"M0 7C0 3.13401 3.13401 0 7 0C10.866 0 14 3.13401 14 7C14 10.866 10.866 14 7 14C3.13401 14 0 10.866 0 7Z",fill:"#43474D"}),this.circlePath=P,S=createSvg("path",{d:"M6.00001 7.41421L10.1924 11.6066L11.6066 10.1924L7.41422 6L11.6066 1.80762L10.1924 0.393403L6.00001 4.58579L1.70711 0.292895L0.292897 1.70711L4.58579 6L0.292897 10.2929L1.70711 11.7071L6.00001 7.41421Z",fill:"#43474D","fill-rule":"evenodd","clip-rule":"evenodd"}),this.crossPath=S,E=createSvg("path",{d:"M0 7.07108L7.07107 8.99256e-06L14.1421 7.07108L7.07107 14.1421L0 7.07108Z",fill:"#43474D"}),this.diamondPath=E,M=createSvg("rect",{width:"12",height:"12",fill:"#43474D"}),this.squarePath=M,T=createSvg("path",{d:"M8 0L10.3794 4.7251L15.6085 5.52786L11.8499 9.2509L12.7023 14.4721L8 12.048L3.29772 14.4721L4.15012 9.2509L0.391548 5.52786L5.62065 4.7251L8 0Z",fill:"#43474D"}),this.starPath=T,this.setSelectedShape(s.checkStyle),s.isChecked===0&&(this.svgElement.style.display="none"),this.borderElement.append(this.svgElement),this.shapeElement.append(this.borderElement),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:y.left+y.width-84+"px",top:y.top+y.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,(D=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",D.style.zIndex=1,D.style.left="".concat(y.left-4,"px"),D.style.top="".concat(y.top-4,"px"),D.style.width="".concat(y.width+8,"px"),D.style.height="".concat(y.height+8,"px"),this.outerLine=D,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:y.width,height:y.height,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height/2+1}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height+1}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+1,y:y.height+1}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+1,y:y.height+1}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+1,y:y.height/2+1}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+1,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+1,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.popupElement),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.initial=!0,this.layer.documentViewer.toolMode!=="form"&&(s.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):s.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 86:case"end":return I.stop()}},u,this)})),function(){return o.apply(this,arguments)})},{key:"getActualRect",value:function(u){var s=this.annotation.rect,w=s.left,g=s.top,v=s.right,y=s.bottom;return{start:getActualPoint({x:w,y:g},u),end:getActualPoint({x:v,y},u)}}},{key:"rectCalc",value:function(u){var s=u.start,w=u.end;return{top:s.y<w.y?s.y:w.y,left:s.x<w.x?s.x:w.x,width:Math.abs(w.x-s.x),height:Math.abs(w.y-s.y)}}},{key:"calculate",value:function(u,s){var w=this.rectCalc({start:u,end:s});this.initRect=w;var g=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:w.top-g,left:w.left-g,width:w.width+2*g,height:w.height+2*g}}},{key:"getInitialPoint",value:function(){var u,s,w,g,v=this.layer.viewport.scale,y=this.start.x,m=this.start.y,d=this.end.x,f=this.end.y,x=this.layer.viewport,k=x.width,P=x.height,S=x.rotation;return S===0?(u=y/v,s=m/v,w=d/v,g=f/v):S===90?(u=m/v,s=y/v,w=f/v,g=d/v):S===180?(u=(k-y)/v,s=m/v,w=(k-d)/v,g=f/v):(u=(P-m)/v,s=(k-y)/v,w=(P-f)/v,g=(k-d)/v),{start:{x:u,y:s},end:{x:w,y:g}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var u=this.annotation;this.layer.annotationStore.selectedElementName=u.name;var s=_objectSpread2$1({},u);delete s.annotPtr,delete s.pagePtr,delete s.operate,delete s.targetPage,this.layer.eventBus.dispatch("annotationSelected",s),this.layer.eventBus.dispatch("changeRightPanelBtnDisabled")}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("propertyChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(u){if(!(!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(u==null?void 0:u.target)))if(this.layer.documentViewer.toolMode==="form"){this.hidden=!1,this.updateTool(),this.judgeCheckboxIsOne(),this.layer.eventBus._on("checkboxPropertyPanelChanged",this.handlePropertyPanel),onClickOutside$1([this.annotationContainer,this.outerLine,this.popupElement,document.getElementById("formPropertyPanelButton"),document.getElementsByClassName("right-panel")[0]],this.handleOutside.bind(this));var s=[this.annotationContainer,this.outerLine,this.popupElement,document.querySelector(".right-panel")],w=document.getElementById("formPropertyPanelButton");w&&s.push(w),onClickOutside$1(s,this.handleOutside.bind(this))}else{this.annotation.isChecked=this.annotation.isChecked==0?1:0,this.annotation.isChecked==1?this.svgElement.style.display="block":this.svgElement.style.display="none";var g={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type,isChecked:this.annotation.isChecked};this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:g}),this.getImage()}}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleOutside",value:function(){var u,s,w;this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(this.layer.eventBus.dispatch("annotationDeselected"),this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("propertyChange",null)),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(u=this.outerLine)===null||u===void 0||u.removeEventListener("mousedown",this.onMousedown),(s=this.outerLine)===null||s===void 0||s.removeEventListener("touchstart",this.onMousedown),(w=this.outerLineContainer)===null||w===void 0||w.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("checkboxPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(u){this.layer.tool&&u.stopPropagation();var s=u.target.getAttribute("data-id"),w=this.layer.documentViewer.getScrollViewElement();this.scrollTop=w.scrollTop,this.scrollLeft=w.scrollLeft;var g=getClickPoint(u),v=g.pageX,y=g.pageY;this.startState={operator:s,clickX:v,clickY:y},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(u){u.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var s=getClickPoint(u),w=s.pageX,g=s.pageY,v=this.layer.documentViewer.getScrollViewElement(),y=v.scrollTop;w=w+v.scrollLeft-this.scrollLeft,g=g+y-this.scrollTop;var m=this.start,d=this.end,f=this.startState,x=this.layer.viewport,k=x.width,P=x.height;if(f.operator==="nw-resize"){var S=w-(f.clickX-this.start.x),E=g-(f.clickY-this.start.y);S=Math.min(d.x-5,S),S=Math.max(0,S),E=Math.min(d.y-5,E),E=Math.max(0,E),this.update({start:{x:S,y:E},end:d})}else if(f.operator==="w-resize"){var M=w-(f.clickX-this.start.x);M=Math.min(d.x-5,M),M=Math.max(0,M),this.update({start:{x:M,y:m.y},end:d})}else if(f.operator==="sw-resize"){var T=w-(f.clickX-this.start.x),D=g-(f.clickY-this.end.y);T=Math.min(d.x-5,T),T=Math.max(0,T),D=Math.min(P,D),D=Math.max(m.y+5,D),this.update({start:{x:T,y:m.y},end:{x:d.x,y:D}})}else if(f.operator==="s-resize"){var I=g-(f.clickY-this.end.y);I=Math.min(P,I),I=Math.max(m.y+5,I),this.update({start:m,end:{x:d.x,y:I}})}else if(f.operator==="se-resize"){var N=w-(f.clickX-this.end.x),O=g-(f.clickY-this.end.y);N=Math.min(k,N),N=Math.max(m.x+5,N),O=Math.min(P,O),O=Math.max(m.y+5,O),this.update({start:m,end:{x:N,y:O}})}else if(f.operator==="e-resize"){var F=w-(f.clickX-this.end.x);F=Math.min(k,F),F=Math.max(m.x+5,F),this.update({start:m,end:{x:F,y:d.y}})}else if(f.operator==="ne-resize"){var U=w-(f.clickX-this.end.x),Y=g-(f.clickY-this.start.y);U=Math.min(k,U),U=Math.max(m.x+5,U),Y=Math.min(d.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:m.x,y:Y},end:{x:U,y:d.y}})}else if(f.operator==="n-resize"){var Q=g-(f.clickY-this.start.y);Q=Math.min(d.y-5,Q),Q=Math.max(0,Q),this.update({start:{x:m.x,y:Q},end:d})}else if(f.operator==="move"){var q,ne,J,re,X=this.layer.documentViewer,j=this.getMouseLocation(u),Z=X.getSelectedPage(j,j);if(Z.first&&Z.first!==this.layer.page+1){var W=X.windowToPage(j,Z.first,!1),te=Math.abs(m.x-d.x),le=Math.abs(m.y-d.y);if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===0)q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y;else if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===1)q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y);else if(X.pdfViewer.spreadMode===1&&X.pdfViewer.scrollMode===0){var oe=Math.min(Z.first,this.layer.page+1),Ee=Math.max(Z.first,this.layer.page+1);if(Ee-oe>2||oe+1===Ee&&oe%2==0)return;oe+1===Ee?(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y)):oe+2===Ee&&(q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y)}else if(X.pdfViewer.spreadMode===2&&X.pdfViewer.scrollMode===0){var Ae=Math.min(Z.first,this.layer.page+1),ve=Math.max(Z.first,this.layer.page+1);if(ve-Ae>2||Ae+1===ve&&(Ae!==1||ve!==2)&&ve%2==0||Ae===1&&ve===3)return;Ae+2===ve||Ae===1&&ve===2?(q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y):Ae+1===ve&&(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y))}var ke=X.pdfViewer._pages[Z.first-1].compdfAnnotationLayer;if(!ke)return;this.layer=ke,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ce=this.layer.div;Ce.append(this.annotationContainer),Ce.append(this.outerLineContainer)}else{q=w-(f.clickX-this.start.x),ne=g-(f.clickY-this.start.y),J=w-(f.clickX-this.end.x),re=g-(f.clickY-this.end.y);var Pe=X.pageToWindow({x:q,y:ne},this.layer.page+1,!1),Me=X.pageToWindow({x:J,y:re},this.layer.page+1,!1),Le=0,Te=0;g>f.clickY?Te=(Te=v.offsetHeight-(Me.y-v.scrollTop-v.offsetTop))<100?5:0:g<f.clickY&&(Te=(Te=Pe.y-v.scrollTop-v.offsetTop)<100?-5:0),w>f.clickX?Le=(Le=v.offsetWidth-(Me.x-v.scrollLeft-v.offsetLeft))<100?5:0:w<f.clickX&&(Le=(Le=Pe.x-v.scrollLeft-v.offsetLeft)<100?-5:0),(Le||Te)&&(v.scrollTop+=Te,v.scrollLeft+=Le);var ye={width:Math.abs(m.x-d.x),height:Math.abs(m.y-d.y)};q<J?(q=Math.max(0,q),q=Math.min(k-ye.width,q),J=Math.max(ye.width,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-ye.width,J),q=Math.max(ye.width,q),q=Math.min(k,q)),ne<re?(ne=Math.max(0,ne),ne=Math.min(P-ye.height,ne),re=Math.max(ye.height,re),re=Math.min(P,re)):(re=Math.max(0,re),re=Math.min(P-ye.height,re),ne=Math.max(ye.height,ne),ne=Math.min(P,ne))}this.update({start:{x:q,y:ne},end:{x:J,y:re}})}f.clickX=w,f.clickY=g}},{key:"toggleAttrbutePanel",value:function(){this.layer.eventBus.dispatch("toggleAttrbutePanel")}},{key:"handleDelete",value:function(u){this.layer.tool&&u&&u.stopPropagation(),this.delete();var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",s)}},{key:"delete",value:function(){var u;this.handleOutside(),(u=this.annotationContainer)===null||u===void 0||u.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(u){this.layer.tool&&u.stopPropagation(),u.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var s=this.annotation,w=this.getInitialPoint(),g=w.start,v=w.end,y={left:g.x,top:g.y,right:v.x,bottom:v.y};if(y!==s.rect||s.pageIndex!==this.layer.page)if(s.rect=y,s.pageIndex!==this.layer.page){var m={type:"delete",annotation:{operate:"del-annot",name:s.name,pageIndex:s.pageIndex,annotPtr:s.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",m);var d=Object.assign({},s);delete d.annotPtr,delete d.pagePtr,delete d.name,d.operate="add-form",d.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:d}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",name:s.name,pageIndex:this.layer.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr,rect:y}}),this.getImage(!0)}},{key:"update",value:function(u){var s=u.start,w=u.end,g=this.calculate(s,w);this.start=s,this.end=w,this.annotationContainer.style.top=g.top+"px",this.annotationContainer.style.left=g.left+"px",this.annotationContainer.style.width=g.width+"px",this.annotationContainer.style.height=g.height+"px",this.annotationContainer.style.width="".concat(g.width,"px"),this.annotationContainer.style.height="".concat(g.height,"px"),this.outerLine.style.left="".concat(g.left-4,"px"),this.outerLine.style.top="".concat(g.top-4,"px"),this.outerLine.style.width="".concat(g.width+8,"px"),this.outerLine.style.height="".concat(g.height+8,"px");var v=g.left+g.width-84+"px",y=g.top+g.height+12+"px";this.popupElement.style.left=v,this.popupElement.style.top=y,this.moveRect.setAttribute("width",g.width),this.moveRect.setAttribute("height",g.height),this.LeftRect.setAttribute("y",g.height/2+1),this.bottomLeftRect.setAttribute("y",g.height+1),this.bottomRect.setAttribute("x",g.width/2+1),this.bottomRect.setAttribute("y",g.height+1),this.bottomRightRect.setAttribute("x",g.width+1),this.bottomRightRect.setAttribute("y",g.height+1),this.rightRect.setAttribute("x",g.width+1),this.rightRect.setAttribute("y",g.height/2+1),this.topRightRect.setAttribute("x",g.width+1),this.topRect.setAttribute("x",g.width/2+1),this.svgElement.style.width="".concat(g.width/2,"px"),this.svgElement.style.height="".concat(g.height/2,"px")}},{key:"handlePropertyPanel",value:function(u){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var s=0;for(var w in u)for(var g in this.annotation)g===w&&this.annotation[g]!==u[w]&&w!=="fieldName"&&(this.annotation[g]=u[w],s++,w==="backgroundColor"&&(this.borderElement.style[w]=u[w]),w==="checkStyle"&&(this.svgElement.removeChild(this.svgElement.firstChild),this.setSelectedShape(u[w])),w==="isChecked"&&(u[w]?this.svgElement.style.display="block":this.svgElement.style.display="none")),g===w&&this.annotation[g]!==u[w]&&w==="fieldName"&&(this.judgeCheckboxIsOne(u[w]),this.isOne&&(this.annotation[g]=u[w],s++));if(s>0){var v={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type},y=Object.assign({},v,u);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:y}),this.getImage()}}}},{key:"setSelectedShape",value:function(u){u===1?(this.svgElement.setAttribute("width","14"),this.svgElement.setAttribute("height","14"),this.svgElement.setAttribute("viewBox","0 0 14 14"),this.svgElement.append(this.circlePath)):u===2?(this.svgElement.setAttribute("width","12"),this.svgElement.setAttribute("height","12"),this.svgElement.setAttribute("viewBox","0 0 12 12"),this.svgElement.append(this.crossPath)):u===3?(this.svgElement.setAttribute("width","15"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 15 15"),this.svgElement.append(this.diamondPath)):u===4?(this.svgElement.setAttribute("width","12"),this.svgElement.setAttribute("height","12"),this.svgElement.setAttribute("viewBox","0 0 12 12"),this.svgElement.append(this.squarePath)):u===5?(this.svgElement.setAttribute("width","16"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 16 15"),this.svgElement.append(this.starPath)):(this.svgElement.setAttribute("width","15"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 15 12"),this.svgElement.append(this.checkPath))}},{key:"setProperty",value:function(u){if(u.name===this.annotation.name){var s=this.annotation;for(var w in u)for(var g in s)g===w&&s[g]!==u[w]&&(s[g]=u[w],w==="backgroundColor"&&(this.borderElement.style[w]=u[w]),w==="checkStyle"&&(this.svgElement.removeChild(this.svgElement.firstChild),this.setSelectedShape(u[w])),w==="isChecked"&&(u[w]?this.svgElement.style.display="block":this.svgElement.style.display="none"));var v={operate:"mod-form",pageIndex:this.layer.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr,type:this.annotation.type},y=Object.assign({},v,u);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:y}),this.getImage()}}},{key:"judgeCheckboxIsOne",value:function(u){var s=u!=null?u:this.annotation.fieldName,w=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(m,d){return m.concat(d)},[]);this.isOne=!0;var g,v=_createForOfIteratorHelper(w);try{for(v.s();!(g=v.n()).done;){var y=g.value;if(y.hasOwnProperty("fieldName")&&y.fieldName===s&&y.name!==this.annotation.name&&y.type==="checkbox"){this.isOne=!1;break}}}catch(m){v.e(m)}finally{v.f()}this.layer.eventBus.dispatch("judgeCheckboxIsOne",this.isOne)}},{key:"setHighlight",value:function(u){this.highlight=u,this.annotationContainer.style.backgroundColor=this.highlight?"#4982E54D":""}},{key:"getImage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function u(s){var w,g,v,y,m,d,f,x,k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return w=this.initRect,g={width:parseInt(w.width*this.layer.ratio),height:parseInt(w.height*this.layer.ratio)},P.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,width:g.width,height:g.height});case 4:v=P.sent,(y=document.createElement("canvas")).style.width=g.width+"px",y.style.height=g.height+"px",y.width=g.width,y.height=g.height,(m=y.getContext("2d")).clearRect(0,0,y.width,y.height),(d=m.createImageData(g.width,g.height)).data.set(v),m.putImageData(d,0,0),f=y.toDataURL("image/png",1),s&&(x=this.calculate(this.start,this.end),this.shapeElement.style.width="".concat(x.width,"px"),this.shapeElement.style.height="".concat(x.height,"px")),this.imgEle?this.imgEle.src=f:((k=document.createElement("img")).style.width="100%",k.style.height="100%",k.style.pointerEvents="none",k.style.position="absolute",k.style.display="block",k.src=f,this.imgEle=k,this.shapeElement.append(this.imgEle));case 18:case"end":return P.stop()}},u,this)})),function(u){return r.apply(this,arguments)})}]);var r,o}(),AddCheckBox=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.layer;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initCheckboxName=this.setInitProperty.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.eventBus._on("initCheckboxName",this.initCheckboxName)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initCheckboxName",this.initCheckboxName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale);this.setInitProperty();var u={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},s={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},w={left:u.x,top:u.y,right:s.x,bottom:s.y},g={operate:"add-form",type:"checkbox",pageIndex:this.layer.page,date:new Date,rect:w,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,isChecked:0,checkStyle:0};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:g})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,u=this.layer.viewport,s=u.width,w=u.height;if(this.layer.viewport.scale,r=Math.min(s,r),r=Math.max(0,r),o=Math.min(w,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var g=this.initStartPoint,v=this.initEndPoint,y=Math.abs(v.x-g.x),m=Math.abs(v.y-g.y),d=Math.min(y,m);g.x<v.x?v.x=g.x+d:v.x=g.x-d,g.y<v.y?v.y=g.y+d:v.y=g.y-d}var f=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(f.top,"px"),x.style.left="".concat(f.left,"px"),x.style.width="".concat(Math.abs(f.width-1),"px"),x.style.height="".concat(Math.abs(f.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",borderColor:"#43474D",borderWidth:"1px",borderStyle:"solid",position:"absolute"});this.shapeEle=k,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"setInitProperty",value:function(){var e=1;if(this.layer.annotationStore.annotationsAll)for(var n=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(u,s){return u.concat(s)},[]).filter(function(u){return u.type==="checkbox"}),r=function(){var u="Check Box"+(o+1);if(n.every(function(s){return s.fieldName!==u}))return e=o+1,1},o=0;o<=n.length&&!r();o++);this.fieldName="Check Box"+e}}])}(),RadioButton=function(e){function n(u){var s,w=u.annotation,g=u.layer,v=u.show,y=v!==void 0&&v,m=u.highlight;return _classCallCheck(this,n),(s=_callSuper(this,n,[{annotation:w,layer:g}])).hidden=!0,s.initial=!1,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=y,s.highlight=m,s.onMousedown=s.handleMouseDown.bind(s),s.onMouseup=s.handleMouseUp.bind(s),s.onMousemove=s.handleMouseMove.bind(s),s.onDelete=s.handleDelete.bind(s),s.toggleAttrbutePanel=s.toggleAttrbutePanel.bind(s),s.handlePropertyPanel=s.handlePropertyPanel.bind(s),s.setProperty=s.setProperty.bind(s),s.setHighlight=s.setHighlight.bind(s),s.render(),s}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var s,w,g,v,y,m,d,f,x,k,P,S,E,M,T,D;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:this.layer.eventBus._on("setProperty",this.setProperty),this.layer.eventBus._on("setHighlightForm",this.setHighlight),s=this.annotation,this.annotation.fieldName||(this.annotation.fieldName="Group_"+this.annotation.date.toLocaleString()),w=this.getActualRect(this.layer.viewport.scale),g=w.start,v=w.end,this.start=g,this.end=v,y=this.calculate(g,v),(m=document.createElement("div")).id=s.name,m.className="annotation",m.style.top=y.top+"px",m.style.left=y.left+"px",m.style.width=y.width+"px",m.style.height=y.height+"px",m.style.backgroundColor=this.highlight?"#4982E54D":"",m.style.overflow="hidden",this.annotationContainer=m,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),d=createElement("div",{left:0,top:0,width:"".concat(Math.abs(y.width),"px"),height:"".concat(Math.abs(y.height),"px"),position:"relative"}),this.shapeElement=d,this.getImage(),this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),f=createElement("div",{position:"absolute",left:0,top:0,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",borderColor:s.borderColor,borderWidth:"1px"|s.borderWidth,borderStyle:s.borderStyle,borderRadius:"100%",backgroundColor:s.backgroundColor,opacity:0}),this.borderElement=f,x=createSvg("svg",{width:"15",height:"12",viewBox:"0 0 15 12",fill:"none"},{width:"".concat(y.width/2,"px"),height:"".concat(y.height/2,"px")}),this.svgElement=x,k=createSvg("path",{d:"M14.0908 1.59619 L5.59625 10.0908 L1.00006 5.49457",stroke:"#43474D","stroke-width":"2"}),this.checkPath=k,P=createSvg("path",{d:"M0 7C0 3.13401 3.13401 0 7 0C10.866 0 14 3.13401 14 7C14 10.866 10.866 14 7 14C3.13401 14 0 10.866 0 7Z",fill:"#43474D"}),this.circlePath=P,S=createSvg("path",{d:"M6.00001 7.41421L10.1924 11.6066L11.6066 10.1924L7.41422 6L11.6066 1.80762L10.1924 0.393403L6.00001 4.58579L1.70711 0.292895L0.292897 1.70711L4.58579 6L0.292897 10.2929L1.70711 11.7071L6.00001 7.41421Z",fill:"#43474D","fill-rule":"evenodd","clip-rule":"evenodd"}),this.crossPath=S,E=createSvg("path",{d:"M0 7.07108L7.07107 8.99256e-06L14.1421 7.07108L7.07107 14.1421L0 7.07108Z",fill:"#43474D"}),this.diamondPath=E,M=createSvg("rect",{width:"12",height:"12",fill:"#43474D"}),this.squarePath=M,T=createSvg("path",{d:"M8 0L10.3794 4.7251L15.6085 5.52786L11.8499 9.2509L12.7023 14.4721L8 12.048L3.29772 14.4721L4.15012 9.2509L0.391548 5.52786L5.62065 4.7251L8 0Z",fill:"#43474D"}),this.starPath=T,this.setSelectedShape(s.checkStyle),s.isChecked==0&&(this.svgElement.style.display="none"),this.borderElement.append(this.svgElement),this.shapeElement.append(this.borderElement),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:y.left+y.width-84+"px",top:y.top+y.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,(D=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",D.style.zIndex=1,D.style.left="".concat(y.left-4,"px"),D.style.top="".concat(y.top-4,"px"),D.style.width="".concat(y.width+8,"px"),D.style.height="".concat(y.height+8,"px"),this.outerLine=D,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:y.width,height:y.height,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height/2+1}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height+1}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+1,y:y.height+1}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+1,y:y.height+1}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+1,y:y.height/2+1}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+1,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+1,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.popupElement),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.initial=!0,this.layer.documentViewer.toolMode!=="form"&&(this.annotation.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):this.annotation.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 86:case"end":return I.stop()}},u,this)})),function(){return o.apply(this,arguments)})},{key:"getActualRect",value:function(u){var s=this.annotation.rect,w=s.left,g=s.top,v=s.right,y=s.bottom;return{start:getActualPoint({x:w,y:g},u),end:getActualPoint({x:v,y},u)}}},{key:"rectCalc",value:function(u){var s=u.start,w=u.end;return{top:s.y<w.y?s.y:w.y,left:s.x<w.x?s.x:w.x,width:Math.abs(w.x-s.x),height:Math.abs(w.y-s.y)}}},{key:"calculate",value:function(u,s){var w=this.rectCalc({start:u,end:s});this.initRect=w;var g=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:w.top-g,left:w.left-g,width:w.width+2*g,height:w.height+2*g}}},{key:"getInitialPoint",value:function(){var u,s,w,g,v=this.layer.viewport.scale,y=this.start.x,m=this.start.y,d=this.end.x,f=this.end.y,x=this.layer.viewport,k=x.width,P=x.height,S=x.rotation;return S===0?(u=y/v,s=m/v,w=d/v,g=f/v):S===90?(u=m/v,s=y/v,w=f/v,g=d/v):S===180?(u=(k-y)/v,s=m/v,w=(k-d)/v,g=f/v):(u=(P-m)/v,s=(k-y)/v,w=(P-f)/v,g=(k-d)/v),{start:{x:u,y:s},end:{x:w,y:g}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var u=this.annotation;this.layer.annotationStore.selectedElementName=u.name;var s=_objectSpread2$1({},u);delete s.annotPtr,delete s.pagePtr,delete s.operate,delete s.targetPage,this.layer.eventBus.dispatch("annotationSelected",s),this.layer.eventBus.dispatch("changeRightPanelBtnDisabled")}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("propertyChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(u){if(!(!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(u==null?void 0:u.target)))if(this.layer.documentViewer.toolMode==="form")this.hidden=!1,this.updateTool(),this.judgeRadioBtnIsOne(),this.layer.eventBus._on("radioButtonPropertyPanelChanged",this.handlePropertyPanel),onClickOutside$1([this.annotationContainer,this.outerLine,this.popupElement,document.getElementById("formPropertyPanelButton"),document.getElementsByClassName("right-panel")[0]],this.handleOutside.bind(this));else{this.annotation.isChecked=this.annotation.isChecked==0?1:0,this.annotation.isChecked==0?this.svgElement.style.display="none":(this.svgElement.style.display="block",this.cancelSameGroupButton());var s={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type,isChecked:this.annotation.isChecked};this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:s}),this.getImage()}}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleOutside",value:function(){var u,s,w;this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(this.layer.eventBus.dispatch("annotationDeselected"),this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("propertyChange",null)),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(u=this.outerLine)===null||u===void 0||u.removeEventListener("mousedown",this.onMousedown),(s=this.outerLine)===null||s===void 0||s.removeEventListener("touchstart",this.onMousedown),(w=this.outerLineContainer)===null||w===void 0||w.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("radioButtonPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(u){this.layer.tool&&u.stopPropagation();var s=u.target.getAttribute("data-id"),w=this.layer.documentViewer.getScrollViewElement();this.scrollTop=w.scrollTop,this.scrollLeft=w.scrollLeft;var g=getClickPoint(u),v=g.pageX,y=g.pageY;this.startState={operator:s,clickX:v,clickY:y},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(u){u.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var s=getClickPoint(u),w=s.pageX,g=s.pageY,v=this.layer.documentViewer.getScrollViewElement(),y=v.scrollTop;w=w+v.scrollLeft-this.scrollLeft,g=g+y-this.scrollTop;var m=this.start,d=this.end,f=this.startState,x=this.layer.viewport,k=x.width,P=x.height;if(f.operator==="nw-resize"){var S=w-(f.clickX-this.start.x),E=g-(f.clickY-this.start.y);S=Math.min(d.x-5,S),S=Math.max(0,S),E=Math.min(d.y-5,E),E=Math.max(0,E),this.update({start:{x:S,y:E},end:d})}else if(f.operator==="w-resize"){var M=w-(f.clickX-this.start.x);M=Math.min(d.x-5,M),M=Math.max(0,M),this.update({start:{x:M,y:m.y},end:d})}else if(f.operator==="sw-resize"){var T=w-(f.clickX-this.start.x),D=g-(f.clickY-this.end.y);T=Math.min(d.x-5,T),T=Math.max(0,T),D=Math.min(P,D),D=Math.max(m.y+5,D),this.update({start:{x:T,y:m.y},end:{x:d.x,y:D}})}else if(f.operator==="s-resize"){var I=g-(f.clickY-this.end.y);I=Math.min(P,I),I=Math.max(m.y+5,I),this.update({start:m,end:{x:d.x,y:I}})}else if(f.operator==="se-resize"){var N=w-(f.clickX-this.end.x),O=g-(f.clickY-this.end.y);N=Math.min(k,N),N=Math.max(m.x+5,N),O=Math.min(P,O),O=Math.max(m.y+5,O),this.update({start:m,end:{x:N,y:O}})}else if(f.operator==="e-resize"){var F=w-(f.clickX-this.end.x);F=Math.min(k,F),F=Math.max(m.x+5,F),this.update({start:m,end:{x:F,y:d.y}})}else if(f.operator==="ne-resize"){var U=w-(f.clickX-this.end.x),Y=g-(f.clickY-this.start.y);U=Math.min(k,U),U=Math.max(m.x+5,U),Y=Math.min(d.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:m.x,y:Y},end:{x:U,y:d.y}})}else if(f.operator==="n-resize"){var Q=g-(f.clickY-this.start.y);Q=Math.min(d.y-5,Q),Q=Math.max(0,Q),this.update({start:{x:m.x,y:Q},end:d})}else if(f.operator==="move"){var q,ne,J,re,X=this.layer.documentViewer,j=this.getMouseLocation(u),Z=X.getSelectedPage(j,j);if(Z.first&&Z.first!==this.layer.page+1){var W=X.windowToPage(j,Z.first,!1),te=Math.abs(m.x-d.x),le=Math.abs(m.y-d.y);if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===0)q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y;else if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===1)q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y);else if(X.pdfViewer.spreadMode===1&&X.pdfViewer.scrollMode===0){var oe=Math.min(Z.first,this.layer.page+1),Ee=Math.max(Z.first,this.layer.page+1);if(Ee-oe>2||oe+1===Ee&&oe%2==0)return;oe+1===Ee?(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y)):oe+2===Ee&&(q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y)}else if(X.pdfViewer.spreadMode===2&&X.pdfViewer.scrollMode===0){var Ae=Math.min(Z.first,this.layer.page+1),ve=Math.max(Z.first,this.layer.page+1);if(ve-Ae>2||Ae+1===ve&&(Ae!==1||ve!==2)&&ve%2==0||Ae===1&&ve===3)return;Ae+2===ve||Ae===1&&ve===2?(q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y):Ae+1===ve&&(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y))}var ke=X.pdfViewer._pages[Z.first-1].compdfAnnotationLayer;if(!ke)return;this.layer=ke,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ce=this.layer.div;Ce.append(this.annotationContainer),Ce.append(this.outerLineContainer)}else{q=w-(f.clickX-this.start.x),ne=g-(f.clickY-this.start.y),J=w-(f.clickX-this.end.x),re=g-(f.clickY-this.end.y);var Pe=X.pageToWindow({x:q,y:ne},this.layer.page+1,!1),Me=X.pageToWindow({x:J,y:re},this.layer.page+1,!1),Le=0,Te=0;g>f.clickY?Te=(Te=v.offsetHeight-(Me.y-v.scrollTop-v.offsetTop))<100?5:0:g<f.clickY&&(Te=(Te=Pe.y-v.scrollTop-v.offsetTop)<100?-5:0),w>f.clickX?Le=(Le=v.offsetWidth-(Me.x-v.scrollLeft-v.offsetLeft))<100?5:0:w<f.clickX&&(Le=(Le=Pe.x-v.scrollLeft-v.offsetLeft)<100?-5:0),(Le||Te)&&(v.scrollTop+=Te,v.scrollLeft+=Le);var ye={width:Math.abs(m.x-d.x),height:Math.abs(m.y-d.y)};q<J?(q=Math.max(0,q),q=Math.min(k-ye.width,q),J=Math.max(ye.width,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-ye.width,J),q=Math.max(ye.width,q),q=Math.min(k,q)),ne<re?(ne=Math.max(0,ne),ne=Math.min(P-ye.height,ne),re=Math.max(ye.height,re),re=Math.min(P,re)):(re=Math.max(0,re),re=Math.min(P-ye.height,re),ne=Math.max(ye.height,ne),ne=Math.min(P,ne))}this.update({start:{x:q,y:ne},end:{x:J,y:re}})}f.clickX=w,f.clickY=g}},{key:"toggleAttrbutePanel",value:function(){this.layer.eventBus.dispatch("toggleAttrbutePanel")}},{key:"handleDelete",value:function(u){this.layer.tool&&u&&u.stopPropagation(),this.delete();var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",s)}},{key:"delete",value:function(){var u;this.handleOutside(),(u=this.annotationContainer)===null||u===void 0||u.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(u){this.layer.tool&&u.stopPropagation(),u.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var s=this.annotation,w=this.getInitialPoint(),g=w.start,v=w.end,y={left:g.x,top:g.y,right:v.x,bottom:v.y};if(y!==s.rect||s.pageIndex!==this.layer.page)if(s.rect=y,s.pageIndex!==this.layer.page){var m={type:"delete",annotation:{operate:"del-annot",name:s.name,pageIndex:s.pageIndex,annotPtr:s.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",m);var d=Object.assign({},s);delete d.annotPtr,delete d.pagePtr,delete d.name,d.operate="add-form",d.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:d}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",name:s.name,pageIndex:this.layer.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr,rect:y}}),this.getImage(!0)}},{key:"update",value:function(u){var s=u.start,w=u.end,g=this.calculate(s,w);this.start=s,this.end=w,this.annotationContainer.style.top=g.top+"px",this.annotationContainer.style.left=g.left+"px",this.annotationContainer.style.width=g.width+"px",this.annotationContainer.style.height=g.height+"px",this.annotationContainer.style.width="".concat(g.width,"px"),this.annotationContainer.style.height="".concat(g.height,"px"),this.outerLine.style.left="".concat(g.left-4,"px"),this.outerLine.style.top="".concat(g.top-4,"px"),this.outerLine.style.width="".concat(g.width+8,"px"),this.outerLine.style.height="".concat(g.height+8,"px");var v=g.left+g.width-84+"px",y=g.top+g.height+12+"px";this.popupElement.style.left=v,this.popupElement.style.top=y,this.moveRect.setAttribute("width",g.width),this.moveRect.setAttribute("height",g.height),this.LeftRect.setAttribute("y",g.height/2+1),this.bottomLeftRect.setAttribute("y",g.height+1),this.bottomRect.setAttribute("x",g.width/2+1),this.bottomRect.setAttribute("y",g.height+1),this.bottomRightRect.setAttribute("x",g.width+1),this.bottomRightRect.setAttribute("y",g.height+1),this.rightRect.setAttribute("x",g.width+1),this.rightRect.setAttribute("y",g.height/2+1),this.topRightRect.setAttribute("x",g.width+1),this.topRect.setAttribute("x",g.width/2+1),this.svgElement.style.width="".concat(g.width/2,"px"),this.svgElement.style.height="".concat(g.height/2,"px")}},{key:"handlePropertyPanel",value:function(u){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var s=0;for(var w in u)for(var g in this.annotation)g===w&&this.annotation[g]!==u[w]&&(this.annotation[g]=u[w],s++,w==="backgroundColor"&&(this.borderElement.style[w]=u[w],u[w]===""&&(u.clearBackgroundColor=!0)),w==="checkStyle"&&(this.svgElement.removeChild(this.svgElement.firstChild),this.setSelectedShape(u[w])),w==="isChecked"&&(u[w]?(this.svgElement.style.display="block",this.cancelSameGroupButton()):this.svgElement.style.display="none"),w==="fieldName"&&this.judgeRadioBtnIsOne());if(s>0){var v={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type},y=Object.assign({},v,u);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:y}),this.getImage()}}}},{key:"setSelectedShape",value:function(u){u===1?(this.svgElement.setAttribute("width","14"),this.svgElement.setAttribute("height","14"),this.svgElement.setAttribute("viewBox","0 0 14 14"),this.svgElement.append(this.circlePath)):u===2?(this.svgElement.setAttribute("width","12"),this.svgElement.setAttribute("height","12"),this.svgElement.setAttribute("viewBox","0 0 12 12"),this.svgElement.append(this.crossPath)):u===3?(this.svgElement.setAttribute("width","15"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 15 15"),this.svgElement.append(this.diamondPath)):u===4?(this.svgElement.setAttribute("width","12"),this.svgElement.setAttribute("height","12"),this.svgElement.setAttribute("viewBox","0 0 12 12"),this.svgElement.append(this.squarePath)):u===5?(this.svgElement.setAttribute("width","16"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 16 15"),this.svgElement.append(this.starPath)):(this.svgElement.setAttribute("width","15"),this.svgElement.setAttribute("height","15"),this.svgElement.setAttribute("viewBox","0 0 15 12"),this.svgElement.append(this.checkPath))}},{key:"setProperty",value:function(u){if(u.name===this.annotation.name){for(var s in u)for(var w in this.annotation)w===s&&this.annotation[w]!==u[s]&&(this.annotation[w]=u[s],s==="backgroundColor"&&(this.borderElement.style[s]=u[s]),s==="checkStyle"&&(this.svgElement.removeChild(this.svgElement.firstChild),this.setSelectedShape(u[s])),s==="isChecked"&&(u[s]==0?this.svgElement.style.display="none":(this.svgElement.style.display="block",this.cancelSameGroupButton())),s==="fieldName"&&this.judgeRadioBtnIsOne());var g={operate:"mod-form",pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,type:this.annotation.type},v=Object.assign({},g,u);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:v}),this.getImage()}}},{key:"cancelSameGroupButton",value:function(){var u,s=this,w=_createForOfIteratorHelper(Object.values(this.layer.annotationStore.annotationsAll).reduce(function(v,y){return v.concat(y)},[]).filter(function(v){return v.fieldName===s.annotation.fieldName&&v.name!==s.annotation.name&&v.isChecked!=0&&v.type==="radiobutton"}));try{for(w.s();!(u=w.n()).done;){var g=u.value;this.layer.eventBus.dispatch("handleField",{id:g.name,key:"isChecked",value:0})}}catch(v){w.e(v)}finally{w.f()}}},{key:"judgeRadioBtnIsOne",value:function(){var u,s=!0,w=_createForOfIteratorHelper(Object.values(this.layer.annotationStore.annotationsAll).reduce(function(v,y){return v.concat(y)},[]));try{for(w.s();!(u=w.n()).done;){var g=u.value;if(g.hasOwnProperty("fieldName")&&g.fieldName===this.annotation.fieldName&&g.name!==this.annotation.name&&g.type==="radiobutton"){s=!1;break}}}catch(v){w.e(v)}finally{w.f()}this.layer.eventBus.dispatch("judgeRadioBtnIsOne",s)}},{key:"setHighlight",value:function(u){this.highlight=u,this.annotationContainer.style.backgroundColor=this.highlight?"#4982E54D":""}},{key:"getImage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function u(s){var w,g,v,y,m,d,f,x,k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return w=this.initRect,g={width:parseInt(w.width*this.layer.ratio+1),height:parseInt(w.height*this.layer.ratio+1)},P.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,width:g.width,height:g.height});case 4:v=P.sent,(y=document.createElement("canvas")).style.width=g.width+"px",y.style.height=g.height+"px",y.width=g.width,y.height=g.height,(m=y.getContext("2d")).clearRect(0,0,y.width,y.height),(d=m.createImageData(g.width,g.height)).data.set(v),m.putImageData(d,0,0),f=y.toDataURL("image/png",1),s&&(x=this.calculate(this.start,this.end),this.shapeElement.style.width="".concat(x.width,"px"),this.shapeElement.style.height="".concat(x.height,"px")),this.imgEle?this.imgEle.src=f:((k=document.createElement("img")).style.width="100%",k.style.height="100%",k.style.pointerEvents="none",k.style.display="block",k.src=f,this.imgEle=k,this.shapeElement.append(this.imgEle));case 18:case"end":return P.stop()}},u,this)})),function(u){return r.apply(this,arguments)})}]);var r,o}(),AddRadioButton=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.layer;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initRadioButtonName=this.setInitProperty.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.eventBus._on("initRadioButtonName",this.initRadioButtonName)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initRadioButtonName",this.initRadioButtonName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale);this.setInitProperty();var u={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},s={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},w={left:u.x,top:u.y,right:s.x,bottom:s.y},g={operate:"add-form",type:"radiobutton",pageIndex:this.layer.page,date:new Date,rect:w,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,isChecked:0,checkStyle:1};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:g})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,u=this.layer.viewport,s=u.width,w=u.height;if(this.layer.viewport.scale,r=Math.min(s,r),r=Math.max(0,r),o=Math.min(w,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var g=this.initStartPoint,v=this.initEndPoint,y=Math.abs(v.x-g.x),m=Math.abs(v.y-g.y),d=Math.min(y,m);g.x<v.x?v.x=g.x+d:v.x=g.x-d,g.y<v.y?v.y=g.y+d:v.y=g.y-d}var f=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(f.top,"px"),x.style.left="".concat(f.left,"px"),x.style.width="".concat(Math.abs(f.width-1),"px"),x.style.height="".concat(Math.abs(f.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",borderColor:"#43474D",borderWidth:"1px",borderStyle:"solid",borderRadius:"100%",position:"absolute"});this.shapeEle=k,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"setInitProperty",value:function(){var e=1;if(this.layer.annotationStore.annotationsAll)for(var n=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(u,s){return u.concat(s)},[]).filter(function(u){return u.type==="radiobutton"}),r=function(){var u="Group"+(o+1);if(n.every(function(s){return s.fieldName!==u}))return e=o+1,1},o=0;o<=n.length&&!r();o++);this.fieldName="Group"+e}}])}(),PushButton=function(e){function n(u){var s,w=u.annotation,g=u.layer,v=u.show,y=v!==void 0&&v,m=u.highlight;return _classCallCheck(this,n),(s=_callSuper(this,n,[{annotation:w,layer:g}])).hidden=!0,s.initial=!1,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=y,s.highlight=m,s.onMousedown=s.handleMouseDown.bind(s),s.onMouseup=s.handleMouseUp.bind(s),s.onMousemove=s.handleMouseMove.bind(s),s.onDelete=s.handleDelete.bind(s),s.toggleAttrbutePanel=s.toggleAttrbutePanel.bind(s),s.handlePropertyPanel=s.handlePropertyPanel.bind(s),s.setProperty=s.setProperty.bind(s),s.setHighlight=s.setHighlight.bind(s),s.render(),s}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var s,w,g,v,y,m,d,f;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:this.layer.eventBus._on("setProperty",this.setProperty),this.layer.eventBus._on("setHighlightForm",this.setHighlight),s=this.annotation,this.annotation.backgroundColor||(this.annotation.backgroundColor="#1460F3"),s.isBold&&s.isItalic?s.fontStyle="boldItalic":s.isBold?s.fontStyle="bold":s.isItalic?s.fontStyle="italic":s.fontStyle="normal",w=this.getActualRect(this.layer.viewport.scale),g=w.start,v=w.end,this.start=g,this.end=v,y=this.calculate(g,v),(m=document.createElement("div")).id=s.name,m.className="annotation",m.style.top=y.top+"px",m.style.left=y.left+"px",m.style.width=y.width+"px",m.style.height=y.height+"px",m.style.backgroundColor=this.highlight?"#4982E54D":"",m.style.overflow="hidden",this.annotationContainer=m,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),d=createElement("div",{left:0,top:0,width:"".concat(Math.abs(y.width),"px"),height:"".concat(Math.abs(y.height),"px"),position:"relative"}),this.shapeElement=d,this.getImage(),this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),this.buttonContainer=createElement("a",{position:"absolute",left:0,top:0,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",outline:"none",borderColor:s.borderColor,borderWidth:(s.borderWidth||1)+"px",borderStyle:s.borderStyle||"solid",color:s.color,backgroundColor:s.backgroundColor,fontFamily:s.fontName,fontSize:s.fontSize||"12px",fontWeight:s.isBold?"bold":"normal",fontStyle:s.isItalic?"italic":"normal",overflow:"hidden",textDecoration:"none",opacity:0}),this.buttonContainer.innerHTML=s.title,this.shapeElement.append(this.buttonContainer),this.buttonContainer.addEventListener("blur",this.onBlur),this.annotation.url&&(this.buttonContainer.setAttribute("href",this.annotation.url),this.buttonContainer.setAttribute("target","_blank")),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:y.left+y.width-84+"px",top:y.top+y.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,(f=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",f.style.zIndex=1,f.style.left="".concat(y.left-8,"px"),f.style.top="".concat(y.top-8,"px"),f.style.width="".concat(y.width+16,"px"),f.style.height="".concat(y.height+16,"px"),this.outerLine=f,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:y.width+8,height:y.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+5,y:y.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+9,y:y.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+9,y:y.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+5,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.popupElement),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.initial=!0,this.layer.documentViewer.toolMode!=="form"&&(this.annotation.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):this.annotation.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.toggleAttrbutePanel(),this.show=!1);case 72:case"end":return x.stop()}},u,this)})),function(){return o.apply(this,arguments)})},{key:"getActualRect",value:function(u){var s=this.annotation.rect,w=s.left,g=s.top,v=s.right,y=s.bottom;return{start:getActualPoint({x:w,y:g},u),end:getActualPoint({x:v,y},u)}}},{key:"rectCalc",value:function(u){var s=u.start,w=u.end;return{top:s.y<w.y?s.y:w.y,left:s.x<w.x?s.x:w.x,width:Math.abs(w.x-s.x),height:Math.abs(w.y-s.y)}}},{key:"calculate",value:function(u,s){var w=this.rectCalc({start:u,end:s});this.initRect=w;var g=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:w.top-g,left:w.left-g,width:w.width+2*g,height:w.height+2*g}}},{key:"getInitialPoint",value:function(){var u,s,w,g,v=this.layer.viewport.scale,y=this.start.x,m=this.start.y,d=this.end.x,f=this.end.y,x=this.layer.viewport,k=x.width,P=x.height,S=x.rotation;return S===0?(u=y/v,s=m/v,w=d/v,g=f/v):S===90?(u=m/v,s=y/v,w=f/v,g=d/v):S===180?(u=(k-y)/v,s=m/v,w=(k-d)/v,g=f/v):(u=(P-m)/v,s=(k-y)/v,w=(P-f)/v,g=(k-d)/v),{start:{x:u,y:s},end:{x:w,y:g}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var u=this.annotation;this.layer.annotationStore.selectedElementName=u.name;var s=_objectSpread2$1({},u);delete s.annotPtr,delete s.pagePtr,delete s.operate,delete s.targetPage,this.layer.eventBus.dispatch("annotationSelected",s),this.layer.eventBus.dispatch("changeRightPanelBtnDisabled")}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("propertyChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(u){if(!(!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(u==null?void 0:u.target)))if(this.layer.documentViewer.toolMode==="form"){this.hidden=!1,this.updateTool();var s=[this.annotationContainer,this.outerLine,this.popupElement,document.getElementById("formPropertyPanelButton"),document.getElementsByClassName("right-panel")[0]];this.layer.eventBus._on("pushButtonPropertyPanelChanged",this.handlePropertyPanel),onClickOutside$1(s,this.handleOutside.bind(this))}else this.annotation.actionType==1&&this.annotation.destPage?this.layer.eventBus.dispatch("pageNumberChanged",this.annotation.destPage):this.annotation.actionType==6&&this.annotation.url&&this.buttonContainer.click()}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleOutside",value:function(){var u,s,w;this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(this.layer.eventBus.dispatch("annotationDeselected"),this.layer.eventBus.dispatch("propertyChange",null),this.layer.eventBus.dispatch("changeRightPanelBtnDisabled")),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(u=this.outerLine)===null||u===void 0||u.removeEventListener("mousedown",this.onMousedown),(s=this.outerLine)===null||s===void 0||s.removeEventListener("touchstart",this.onMousedown),(w=this.outerLineContainer)===null||w===void 0||w.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("pushButtonPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(u){this.layer.tool&&u.stopPropagation();var s=u.target.getAttribute("data-id"),w=this.layer.documentViewer.getScrollViewElement();this.scrollTop=w.scrollTop,this.scrollLeft=w.scrollLeft;var g=getClickPoint(u),v=g.pageX,y=g.pageY;this.startState={operator:s,clickX:v,clickY:y},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(u){u.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var s=getClickPoint(u),w=s.pageX,g=s.pageY,v=this.layer.documentViewer.getScrollViewElement(),y=v.scrollTop;w=w+v.scrollLeft-this.scrollLeft,g=g+y-this.scrollTop;var m=this.start,d=this.end,f=this.startState,x=this.layer.viewport,k=x.width,P=x.height;if(f.operator==="nw-resize"){var S=w-(f.clickX-this.start.x),E=g-(f.clickY-this.start.y);S=Math.min(d.x-5,S),S=Math.max(0,S),E=Math.min(d.y-5,E),E=Math.max(0,E),this.update({start:{x:S,y:E},end:d})}else if(f.operator==="w-resize"){var M=w-(f.clickX-this.start.x);M=Math.min(d.x-5,M),M=Math.max(0,M),this.update({start:{x:M,y:m.y},end:d})}else if(f.operator==="sw-resize"){var T=w-(f.clickX-this.start.x),D=g-(f.clickY-this.end.y);T=Math.min(d.x-5,T),T=Math.max(0,T),D=Math.min(P,D),D=Math.max(m.y+5,D),this.update({start:{x:T,y:m.y},end:{x:d.x,y:D}})}else if(f.operator==="s-resize"){var I=g-(f.clickY-this.end.y);I=Math.min(P,I),I=Math.max(m.y+5,I),this.update({start:m,end:{x:d.x,y:I}})}else if(f.operator==="se-resize"){var N=w-(f.clickX-this.end.x),O=g-(f.clickY-this.end.y);N=Math.min(k,N),N=Math.max(m.x+5,N),O=Math.min(P,O),O=Math.max(m.y+5,O),this.update({start:m,end:{x:N,y:O}})}else if(f.operator==="e-resize"){var F=w-(f.clickX-this.end.x);F=Math.min(k,F),F=Math.max(m.x+5,F),this.update({start:m,end:{x:F,y:d.y}})}else if(f.operator==="ne-resize"){var U=w-(f.clickX-this.end.x),Y=g-(f.clickY-this.start.y);U=Math.min(k,U),U=Math.max(m.x+5,U),Y=Math.min(d.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:m.x,y:Y},end:{x:U,y:d.y}})}else if(f.operator==="n-resize"){var Q=g-(f.clickY-this.start.y);Q=Math.min(d.y-5,Q),Q=Math.max(0,Q),this.update({start:{x:m.x,y:Q},end:d})}else if(f.operator==="move"){var q,ne,J,re,X=this.layer.documentViewer,j=this.getMouseLocation(u),Z=X.getSelectedPage(j,j);if(Z.first&&Z.first!==this.layer.page+1){var W=X.windowToPage(j,Z.first,!1),te=Math.abs(m.x-d.x),le=Math.abs(m.y-d.y);if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===0)q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y;else if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===1)q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y);else if(X.pdfViewer.spreadMode===1&&X.pdfViewer.scrollMode===0){var oe=Math.min(Z.first,this.layer.page+1),Ee=Math.max(Z.first,this.layer.page+1);if(Ee-oe>2||oe+1===Ee&&oe%2==0)return;oe+1===Ee?(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y)):oe+2===Ee&&(q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y)}else if(X.pdfViewer.spreadMode===2&&X.pdfViewer.scrollMode===0){var Ae=Math.min(Z.first,this.layer.page+1),ve=Math.max(Z.first,this.layer.page+1);if(ve-Ae>2||Ae+1===ve&&(Ae!==1||ve!==2)&&ve%2==0||Ae===1&&ve===3)return;Ae+2===ve||Ae===1&&ve===2?(q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y):Ae+1===ve&&(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y))}var ke=X.pdfViewer._pages[Z.first-1].compdfAnnotationLayer;if(!ke)return;this.layer=ke,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ce=this.layer.div;Ce.append(this.annotationContainer),Ce.append(this.outerLineContainer)}else{q=w-(f.clickX-this.start.x),ne=g-(f.clickY-this.start.y),J=w-(f.clickX-this.end.x),re=g-(f.clickY-this.end.y);var Pe=X.pageToWindow({x:q,y:ne},this.layer.page+1,!1),Me=X.pageToWindow({x:J,y:re},this.layer.page+1,!1),Le=0,Te=0;g>f.clickY?Te=(Te=v.offsetHeight-(Me.y-v.scrollTop-v.offsetTop))<100?5:0:g<f.clickY&&(Te=(Te=Pe.y-v.scrollTop-v.offsetTop)<100?-5:0),w>f.clickX?Le=(Le=v.offsetWidth-(Me.x-v.scrollLeft-v.offsetLeft))<100?5:0:w<f.clickX&&(Le=(Le=Pe.x-v.scrollLeft-v.offsetLeft)<100?-5:0),(Le||Te)&&(v.scrollTop+=Te,v.scrollLeft+=Le);var ye={width:Math.abs(m.x-d.x),height:Math.abs(m.y-d.y)};q<J?(q=Math.max(0,q),q=Math.min(k-ye.width,q),J=Math.max(ye.width,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-ye.width,J),q=Math.max(ye.width,q),q=Math.min(k,q)),ne<re?(ne=Math.max(0,ne),ne=Math.min(P-ye.height,ne),re=Math.max(ye.height,re),re=Math.min(P,re)):(re=Math.max(0,re),re=Math.min(P-ye.height,re),ne=Math.max(ye.height,ne),ne=Math.min(P,ne))}this.update({start:{x:q,y:ne},end:{x:J,y:re}})}f.clickX=w,f.clickY=g}},{key:"toggleAttrbutePanel",value:function(){this.layer.eventBus.dispatch("toggleAttrbutePanel")}},{key:"handleDelete",value:function(u){this.layer.tool&&u&&u.stopPropagation(),this.delete();var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",s)}},{key:"delete",value:function(){var u;this.handleOutside(),(u=this.annotationContainer)===null||u===void 0||u.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(u){this.layer.tool&&u.stopPropagation(),u.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var s=this.annotation,w=this.getInitialPoint(),g=w.start,v=w.end,y={left:g.x,top:g.y,right:v.x,bottom:v.y};if(y!==s.rect||s.pageIndex!==this.layer.page)if(s.rect=y,s.pageIndex!==this.layer.page){var m={type:"delete",annotation:{operate:"del-annot",name:s.name,pageIndex:s.pageIndex,annotPtr:s.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",m);var d=Object.assign({},s);delete d.annotPtr,delete d.pagePtr,delete d.name,d.operate="add-form",d.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:d}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",name:s.name,pageIndex:this.layer.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr,rect:y}}),this.getImage(!0)}},{key:"update",value:function(u){var s=u.start,w=u.end,g=this.calculate(s,w);this.start=s,this.end=w,this.annotationContainer.style.top=g.top+"px",this.annotationContainer.style.left=g.left+"px",this.annotationContainer.style.width=g.width+"px",this.annotationContainer.style.height=g.height+"px",this.annotationContainer.style.width="".concat(g.width,"px"),this.annotationContainer.style.height="".concat(g.height,"px"),this.outerLine.style.left="".concat(g.left-8,"px"),this.outerLine.style.top="".concat(g.top-8,"px"),this.outerLine.style.width="".concat(g.width+16,"px"),this.outerLine.style.height="".concat(g.height+16,"px");var v=g.left+g.width-84+"px",y=g.top+g.height+12+"px";this.popupElement.style.left=v,this.popupElement.style.top=y,this.moveRect.setAttribute("width",g.width+9),this.moveRect.setAttribute("height",g.height+9),this.LeftRect.setAttribute("y",g.height/2+5),this.bottomLeftRect.setAttribute("y",g.height+9),this.bottomRect.setAttribute("x",g.width/2+5),this.bottomRect.setAttribute("y",g.height+9),this.bottomRightRect.setAttribute("x",g.width+9),this.bottomRightRect.setAttribute("y",g.height+9),this.rightRect.setAttribute("x",g.width+9),this.rightRect.setAttribute("y",g.height/2+5),this.topRightRect.setAttribute("x",g.width+9),this.topRect.setAttribute("x",g.width/2+5)}},{key:"handlePropertyPanel",value:function(u){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var s=this.annotation,w=0;for(var g in u)for(var v in this.annotation)if(v===g&&this.annotation[v]!==u[g]&&(this.annotation[v]=u[g],w++,g==="backgroundColor"&&(this.buttonContainer.style[g]=u[g],u[g]===""&&(u.clearBackgroundColor=!0)),g==="fontSize"&&(this.buttonContainer.style.fontSize=u[g]+"px"),g==="color"&&(this.buttonContainer.style.color=u[g]),g==="fontName"&&(this.buttonContainer.style.fontFamily=u[g]),g==="title"&&(this.buttonContainer.innerHTML=u[g]),g==="url"&&(this.buttonContainer.setAttribute("href",this.annotation.url),this.buttonContainer.setAttribute("target","_blank")),g==="fontStyle")){var y=u[g];y==="boldItalic"?(this.buttonContainer.style.fontStyle="italic",this.buttonContainer.style.fontWeight="bold",s.isBold=!0,s.isItalic=!0):y==="bold"?(this.buttonContainer.style.fontStyle="normal",this.buttonContainer.style.fontWeight="bold",s.isBold=!0,s.isItalic=!1):y==="italic"?(this.buttonContainer.style.fontStyle="italic",this.buttonContainer.style.fontWeight="normal",s.isBold=!1,s.isItalic=!0):(s.isItalic=!1,s.isBold=!1,this.buttonContainer.style.fontStyle="normal",this.buttonContainer.style.fontWeight="normal")}if(w>0){var m={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,pageHeight:this.layer.viewport.rawDims.pageHeight};(u.destPage||u.url)&&this.annotation.actionType!=="0"&&(m.actionType=this.annotation.actionType);var d=["fontSize","fontName","color","fontStyle"].some(function(P){return u[P]});if(d){m.fontSize=s.fontSize,m.color=s.color;var f={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},x=s.fontName;s.isBold&&s.isItalic?m.fontName=f[x].boldItalic:s.isBold?m.fontName=f[x].bold:s.isItalic?m.fontName=f[x].italic:m.fontName=f[x]?f[x].normal:x,delete u.fontName}var k=Object.assign({},m,u);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:k}),this.getImage()}}}},{key:"setProperty",value:function(u){if(u.name===this.annotation.name){var s=this.annotation,w=0;for(var g in u)for(var v in this.annotation)if(v===g&&this.annotation[v]!==u[g]&&(this.annotation[v]=u[g],w++,g==="backgroundColor"&&(this.buttonContainer.style[g]=u[g],u[g]===""&&(u.clearBackgroundColor=!0)),g==="fontSize"&&(this.buttonContainer.style.fontSize=u[g]+"px"),g==="color"&&(this.buttonContainer.style.color=u[g]),g==="fontName"&&(this.buttonContainer.style.fontFamily=u[g]),g==="title"&&(this.buttonContainer.innerHTML=u[g]),g==="url"&&(this.buttonContainer.setAttribute("href",this.annotation.url),this.buttonContainer.setAttribute("target","_blank")),g==="fontStyle")){var y=u[g];y==="boldItalic"?(this.buttonContainer.style.fontStyle="italic",this.buttonContainer.style.fontWeight="bold",s.isBold=!0,s.isItalic=!0):y==="bold"?(this.buttonContainer.style.fontStyle="normal",this.buttonContainer.style.fontWeight="bold",s.isBold=!0,s.isItalic=!1):y==="italic"?(this.buttonContainer.style.fontStyle="italic",this.buttonContainer.style.fontWeight="normal",s.isBold=!1,s.isItalic=!0):(s.isItalic=!1,s.isBold=!1,this.buttonContainer.style.fontStyle="normal",this.buttonContainer.style.fontWeight="normal")}if(w>0){var m={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,pageHeight:this.layer.viewport.rawDims.pageHeight};(u.destPage||u.url)&&this.annotation.actionType!=="0"&&(m.actionType=this.annotation.actionType);var d=["fontSize","fontName","color","fontStyle"].some(function(P){return u[P]});if(d){m.fontSize=s.fontSize,m.color=s.color;var f={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},x=s.fontName;s.isBold&&s.isItalic?m.fontName=f[x].boldItalic:s.isBold?m.fontName=f[x].bold:s.isItalic?m.fontName=f[x].italic:m.fontName=f[x]?f[x].normal:x,delete u.fontName}var k=Object.assign({},m,u);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:k}),this.getImage()}}}},{key:"setHighlight",value:function(u){this.highlight=u,this.annotationContainer.style.backgroundColor=this.highlight?"#4982E54D":""}},{key:"getImage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function u(s){var w,g,v,y,m,d,f,x,k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return w=this.initRect,g={width:parseInt(w.width*this.layer.ratio+1),height:parseInt(w.height*this.layer.ratio+1)},P.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,width:g.width,height:g.height});case 4:v=P.sent,(y=document.createElement("canvas")).style.width=g.width+"px",y.style.height=g.height+"px",y.width=g.width,y.height=g.height,(m=y.getContext("2d")).clearRect(0,0,y.width,y.height),(d=m.createImageData(g.width,g.height)).data.set(v),m.putImageData(d,0,0),f=y.toDataURL("image/png",1),s&&(x=this.calculate(this.start,this.end),this.shapeElement.style.width="".concat(x.width,"px"),this.shapeElement.style.height="".concat(x.height,"px")),this.imgEle?this.imgEle.src=f:((k=document.createElement("img")).style.width="100%",k.style.height="100%",k.style.pointerEvents="none",k.style.display="block",k.src=f,this.imgEle=k,this.shapeElement.append(this.imgEle));case 18:case"end":return P.stop()}},u,this)})),function(u){return r.apply(this,arguments)})}]);var r,o}(),AddPushButton=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.layer;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.buttonEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initPushButtonName=this.setInitProperty.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.eventBus._on("initPushButtonName",this.initPushButtonName)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.buttonEle&&this.buttonEle.remove(),this.buttonEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initPushButtonName",this.initPushButtonName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale);this.setInitProperty();var u={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},s={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},w={left:u.x,top:u.y,right:s.x,bottom:s.y},g={operate:"add-form",type:"pushbutton",pageIndex:this.layer.page,date:new Date,rect:w,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,color:"#000000",fontName:"Helvetica",fontSize:14,title:"OK",actionType:0,destPage:"",url:""};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:g})}this.initStartPoint=null,this.initEndPoint=null,this.buttonEle&&this.buttonEle.remove(),this.buttonEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,u=this.layer.viewport,s=u.width,w=u.height;if(this.layer.viewport.scale,r=Math.min(s,r),r=Math.max(0,r),o=Math.min(w,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.buttonEle){if(e.shiftKey){var g=this.initStartPoint,v=this.initEndPoint,y=Math.abs(v.x-g.x),m=Math.abs(v.y-g.y),d=Math.min(y,m);g.x<v.x?v.x=g.x+d:v.x=g.x-d,g.y<v.y?v.y=g.y+d:v.y=g.y-d}var f=this.calculate(this.initStartPoint,this.initEndPoint),x=this.buttonEle;x.style.top="".concat(f.top,"px"),x.style.left="".concat(f.left,"px"),x.style.width="".concat(Math.abs(f.width-1),"px"),x.style.height="".concat(Math.abs(f.height-1),"px")}else{var k=createElement("div",{display:"flex",alignItems:"center",justifyContent:"center",color:"#000000",fontSize:"14px",borderColor:"#001A4E",borderWidth:"1px",borderStyle:"solid",backgroundColor:"#DDE9FF",position:"absolute",fontFamily:"Helvetica",overflow:"hidden"});k.innerHTML="OK",this.buttonEle=k,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.buttonEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"setInitProperty",value:function(){var e=1;if(this.layer.annotationStore.annotationsAll)for(var n=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(u,s){return u.concat(s)},[]).filter(function(u){return u.type==="pushbutton"}),r=function(){var u="Button"+(o+1);if(n.every(function(s){return s.fieldName!==u}))return e=o+1,1},o=0;o<=n.length&&!r();o++);this.fieldName="Button"+e}}])}(),ListBox=function(e){function n(u){var s,w=u.annotation,g=u.layer,v=u.show,y=v!==void 0&&v,m=u.highlight;return _classCallCheck(this,n),(s=_callSuper(this,n,[{annotation:w,layer:g}])).hidden=!0,s.initial=!1,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=y,s.highlight=m,s.onMousedown=s.handleMouseDown.bind(s),s.onMouseup=s.handleMouseUp.bind(s),s.onMousemove=s.handleMouseMove.bind(s),s.onDelete=s.handleDelete.bind(s),s.toggleAttrbutePanel=s.toggleAttrbutePanel.bind(s),s.setProperty=s.setProperty.bind(s),s.changeSelectAvailable=s.changeSelectAvailable.bind(s),s.handlePropertyPanel=s.handlePropertyPanel.bind(s),s.setHighlight=s.setHighlight.bind(s),s.render(),s}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var s,w,g,v,y,m,d,f,x,k,P;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(this.layer.eventBus._on("setProperty",this.setProperty),this.layer.eventBus._on("toolModeChanged",this.changeSelectAvailable),this.layer.eventBus._on("setHighlightForm",this.setHighlight),(s=this.annotation).items||(s.items=[]),s.fontName||(s.fontName="Helvetica"),s.isBold&&s.isItalic?s.fontStyle="boldItalic":s.isBold?s.fontStyle="bold":s.isItalic?s.fontStyle="italic":s.fontStyle="normal",this.annotation.selected||this.annotation.selected===0||(this.annotation.selected=null),w=this.getActualRect(this.layer.viewport.scale),g=w.start,v=w.end,this.start=g,this.end=v,y=this.calculate(g,v),(m=document.createElement("div")).id=s.name,m.className="annotation",m.style.top=y.top+"px",m.style.left=y.left+"px",m.style.width=y.width+"px",m.style.height=y.height+"px",m.style.backgroundColor=this.highlight?"#4982E54D":"",m.style.overflow="hidden",this.annotationContainer=m,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),d=createElement("div",{left:0,top:0,width:"".concat(Math.abs(y.width),"px"),height:"".concat(Math.abs(y.height),"px"),position:"relative"}),this.shapeElement=d,this.getImage(),this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),f=createElement("div",{position:"absolute",left:0,top:0,width:"100%",height:"100%",borderColor:s.borderColor,borderWidth:(s.borderWidth||1)+"px",borderStyle:s.borderStyle||"solid",backgroundColor:s.backgroundColor,fontSize:s.fontSize||"12px",fontWeight:s.isBold?"bold":"normal",fontStyle:s.isItalic?"italic":"normal",fontFamily:s.fontName,color:s.color||"#001A4E",overflow:"auto",opacity:0}),this.selectElement=f,this.shapeElement.append(this.selectElement),s.items&&s.items.length>0)for(x=0;x<s.items.length;x++)(k=createElement("div",{width:"100%",height:Math.round(20*this.layer.viewport.scale)+"px",lineHeight:Math.round(20*this.layer.viewport.scale)+"px",borderBottom:"1px solid #666666",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},{class:"option"})).innerText=s.items[x].Value,this.annotation.selected===x&&(k.style.backgroundColor="#dcdcdc"),this.selectElement.appendChild(k);this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:y.left+y.width-84+"px",top:y.top+y.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,(P=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",P.style.zIndex=1,P.style.left="".concat(y.left-8,"px"),P.style.top="".concat(y.top-8,"px"),P.style.width="".concat(y.width+16,"px"),P.style.height="".concat(y.height+16,"px"),this.outerLine=P,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:y.width+8,height:y.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+5,y:y.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+9,y:y.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+9,y:y.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+4,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.popupElement),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.initial=!0,this.layer.documentViewer.toolMode!=="form"&&(this.annotation.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):this.annotation.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.toggleAttrbutePanel(),this.show=!1);case 74:case"end":return S.stop()}},u,this)})),function(){return o.apply(this,arguments)})},{key:"getActualRect",value:function(u){var s=this.annotation.rect,w=s.left,g=s.top,v=s.right,y=s.bottom;return{start:getActualPoint({x:w,y:g},u),end:getActualPoint({x:v,y},u)}}},{key:"rectCalc",value:function(u){var s=u.start,w=u.end;return{top:s.y<w.y?s.y:w.y,left:s.x<w.x?s.x:w.x,width:Math.abs(w.x-s.x),height:Math.abs(w.y-s.y)}}},{key:"calculate",value:function(u,s){var w=this.rectCalc({start:u,end:s});this.initRect=w;var g=(this.annotation.borderWidth||1)*this.layer.viewport.scale;return{top:w.top-g,left:w.left-g,width:w.width+2*g,height:w.height+2*g}}},{key:"getInitialPoint",value:function(){var u,s,w,g,v=this.layer.viewport.scale,y=this.start.x,m=this.start.y,d=this.end.x,f=this.end.y,x=this.layer.viewport,k=x.width,P=x.height,S=x.rotation;return S===0?(u=y/v,s=m/v,w=d/v,g=f/v):S===90?(u=m/v,s=y/v,w=f/v,g=d/v):S===180?(u=(k-y)/v,s=m/v,w=(k-d)/v,g=f/v):(u=(P-m)/v,s=(k-y)/v,w=(P-f)/v,g=(k-d)/v),{start:{x:u,y:s},end:{x:w,y:g}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var u=this.annotation;this.layer.annotationStore.selectedElementName=u.name;var s=_objectSpread2$1({},u);delete s.annotPtr,delete s.pagePtr,delete s.operate,delete s.targetPage,this.layer.eventBus.dispatch("annotationSelected",s),this.layer.eventBus.dispatch("changeRightPanelBtnDisabled")}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("propertyChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(u){if(!(!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(u==null?void 0:u.target))){if(this.layer.documentViewer.toolMode==="form")this.hidden=!1,this.updateTool(),this.layer.eventBus._on("listBoxPropertyPanelChanged",this.handlePropertyPanel),onClickOutside$1([this.annotationContainer,this.outerLine,this.popupElement,document.getElementById("formPropertyPanelButton"),document.getElementsByClassName("right-panel")[0]],this.handleOutside.bind(this));else if(u.target&&u.target.className==="option"){for(var s=u.target.parentNode.children,w=0;w<s.length;w++)if(s[w]===u.target){this.annotation.selected=w;break}this.handleSelectItemBg()}}}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleOutside",value:function(){var u,s,w;this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("annotationDeselected"),this.layer.eventBus.dispatch("propertyChange",null)),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(u=this.outerLine)===null||u===void 0||u.removeEventListener("mousedown",this.onMousedown),(s=this.outerLine)===null||s===void 0||s.removeEventListener("touchstart",this.onMousedown),(w=this.outerLineContainer)===null||w===void 0||w.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("listBoxPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(u){this.layer.tool&&u.stopPropagation();var s=u.target.getAttribute("data-id"),w=this.layer.documentViewer.getScrollViewElement();this.scrollTop=w.scrollTop,this.scrollLeft=w.scrollLeft;var g=getClickPoint(u),v=g.pageX,y=g.pageY;this.startState={operator:s,clickX:v,clickY:y},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(u){u.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var s=getClickPoint(u),w=s.pageX,g=s.pageY,v=this.layer.documentViewer.getScrollViewElement(),y=v.scrollTop;w=w+v.scrollLeft-this.scrollLeft,g=g+y-this.scrollTop;var m=this.start,d=this.end,f=this.startState,x=this.layer.viewport,k=x.width,P=x.height;if(f.operator==="nw-resize"){var S=w-(f.clickX-this.start.x),E=g-(f.clickY-this.start.y);S=Math.min(d.x-5,S),S=Math.max(0,S),E=Math.min(d.y-5,E),E=Math.max(0,E),this.update({start:{x:S,y:E},end:d})}else if(f.operator==="w-resize"){var M=w-(f.clickX-this.start.x);M=Math.min(d.x-5,M),M=Math.max(0,M),this.update({start:{x:M,y:m.y},end:d})}else if(f.operator==="sw-resize"){var T=w-(f.clickX-this.start.x),D=g-(f.clickY-this.end.y);T=Math.min(d.x-5,T),T=Math.max(0,T),D=Math.min(P,D),D=Math.max(m.y+5,D),this.update({start:{x:T,y:m.y},end:{x:d.x,y:D}})}else if(f.operator==="s-resize"){var I=g-(f.clickY-this.end.y);I=Math.min(P,I),I=Math.max(m.y+5,I),this.update({start:m,end:{x:d.x,y:I}})}else if(f.operator==="se-resize"){var N=w-(f.clickX-this.end.x),O=g-(f.clickY-this.end.y);N=Math.min(k,N),N=Math.max(m.x+5,N),O=Math.min(P,O),O=Math.max(m.y+5,O),this.update({start:m,end:{x:N,y:O}})}else if(f.operator==="e-resize"){var F=w-(f.clickX-this.end.x);F=Math.min(k,F),F=Math.max(m.x+5,F),this.update({start:m,end:{x:F,y:d.y}})}else if(f.operator==="ne-resize"){var U=w-(f.clickX-this.end.x),Y=g-(f.clickY-this.start.y);U=Math.min(k,U),U=Math.max(m.x+5,U),Y=Math.min(d.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:m.x,y:Y},end:{x:U,y:d.y}})}else if(f.operator==="n-resize"){var Q=g-(f.clickY-this.start.y);Q=Math.min(d.y-5,Q),Q=Math.max(0,Q),this.update({start:{x:m.x,y:Q},end:d})}else if(f.operator==="move"){var q,ne,J,re,X=this.layer.documentViewer,j=this.getMouseLocation(u),Z=X.getSelectedPage(j,j);if(Z.first&&Z.first!==this.layer.page+1){var W=X.windowToPage(j,Z.first,!1),te=Math.abs(m.x-d.x),le=Math.abs(m.y-d.y);if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===0)q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y;else if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===1)q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y);else if(X.pdfViewer.spreadMode===1&&X.pdfViewer.scrollMode===0){var oe=Math.min(Z.first,this.layer.page+1),Ee=Math.max(Z.first,this.layer.page+1);if(Ee-oe>2||oe+1===Ee&&oe%2==0)return;oe+1===Ee?(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y)):oe+2===Ee&&(q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y)}else if(X.pdfViewer.spreadMode===2&&X.pdfViewer.scrollMode===0){var Ae=Math.min(Z.first,this.layer.page+1),ve=Math.max(Z.first,this.layer.page+1);if(ve-Ae>2||Ae+1===ve&&(Ae!==1||ve!==2)&&ve%2==0||Ae===1&&ve===3)return;Ae+2===ve||Ae===1&&ve===2?(q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y):Ae+1===ve&&(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y))}var ke=X.pdfViewer._pages[Z.first-1].compdfAnnotationLayer;if(!ke)return;this.layer=ke,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ce=this.layer.div;Ce.append(this.annotationContainer),Ce.append(this.outerLineContainer)}else{q=w-(f.clickX-this.start.x),ne=g-(f.clickY-this.start.y),J=w-(f.clickX-this.end.x),re=g-(f.clickY-this.end.y);var Pe=X.pageToWindow({x:q,y:ne},this.layer.page+1,!1),Me=X.pageToWindow({x:J,y:re},this.layer.page+1,!1),Le=0,Te=0;g>f.clickY?Te=(Te=v.offsetHeight-(Me.y-v.scrollTop-v.offsetTop))<100?5:0:g<f.clickY&&(Te=(Te=Pe.y-v.scrollTop-v.offsetTop)<100?-5:0),w>f.clickX?Le=(Le=v.offsetWidth-(Me.x-v.scrollLeft-v.offsetLeft))<100?5:0:w<f.clickX&&(Le=(Le=Pe.x-v.scrollLeft-v.offsetLeft)<100?-5:0),(Le||Te)&&(v.scrollTop+=Te,v.scrollLeft+=Le);var ye={width:Math.abs(m.x-d.x),height:Math.abs(m.y-d.y)};q<J?(q=Math.max(0,q),q=Math.min(k-ye.width,q),J=Math.max(ye.width,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-ye.width,J),q=Math.max(ye.width,q),q=Math.min(k,q)),ne<re?(ne=Math.max(0,ne),ne=Math.min(P-ye.height,ne),re=Math.max(ye.height,re),re=Math.min(P,re)):(re=Math.max(0,re),re=Math.min(P-ye.height,re),ne=Math.max(ye.height,ne),ne=Math.min(P,ne))}this.update({start:{x:q,y:ne},end:{x:J,y:re}})}f.clickX=w,f.clickY=g}},{key:"toggleAttrbutePanel",value:function(){this.layer.eventBus.dispatch("toggleAttrbutePanel")}},{key:"handleDelete",value:function(u){this.layer.tool&&u&&u.stopPropagation(),this.delete();var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),u||(s.type="empty"),this.layer.eventBus.dispatch("annotationChanged",s)}},{key:"delete",value:function(){var u;this.handleOutside(),(u=this.annotationContainer)===null||u===void 0||u.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(u){this.layer.tool&&u.stopPropagation(),u.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var s=this.annotation,w=this.getInitialPoint(),g=w.start,v=w.end,y={left:g.x,top:g.y,right:v.x,bottom:v.y};if(y!==s.rect||s.pageIndex!==this.layer.page)if(s.rect=y,s.pageIndex!==this.layer.page){var m={type:"delete",annotation:{operate:"del-annot",name:s.name,pageIndex:s.pageIndex,annotPtr:s.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",m);var d=Object.assign({},s);delete d.annotPtr,delete d.pagePtr,delete d.name,d.operate="add-form",d.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:d}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",name:s.name,pageIndex:this.layer.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr,rect:y}}),this.getImage(!0)}},{key:"update",value:function(u){var s=u.start,w=u.end,g=this.calculate(s,w);this.start=s,this.end=w,this.annotationContainer.style.top=g.top+"px",this.annotationContainer.style.left=g.left+"px",this.annotationContainer.style.width=g.width+"px",this.annotationContainer.style.height=g.height+"px",this.annotationContainer.style.width="".concat(g.width,"px"),this.annotationContainer.style.height="".concat(g.height,"px"),this.outerLine.style.left="".concat(g.left-8,"px"),this.outerLine.style.top="".concat(g.top-8,"px"),this.outerLine.style.width="".concat(g.width+16,"px"),this.outerLine.style.height="".concat(g.height+16,"px");var v=g.left+g.width-84+"px",y=g.top+g.height+12+"px";this.popupElement.style.left=v,this.popupElement.style.top=y,this.moveRect.setAttribute("width",g.width+9),this.moveRect.setAttribute("height",g.height+9),this.LeftRect.setAttribute("y",g.height/2+5),this.bottomLeftRect.setAttribute("y",g.height+9),this.bottomRect.setAttribute("x",g.width/2+5),this.bottomRect.setAttribute("y",g.height+9),this.bottomRightRect.setAttribute("x",g.width+9),this.bottomRightRect.setAttribute("y",g.height+9),this.rightRect.setAttribute("x",g.width+9),this.rightRect.setAttribute("y",g.height/2+5),this.topRightRect.setAttribute("x",g.width+9),this.topRect.setAttribute("x",g.width/2+5)}},{key:"handlePropertyPanel",value:function(u){var s=this.annotation;if(this.layer.annotationStore.selectedElementName===s.name){var w=0;for(var g in u){for(var v in s)if(v===g&&this.annotation[v]!==u[g]&&g!=="items"&&(this.annotation[v]=u[g],w++,s[v]=u[g],g==="backgroundColor"&&(u[g]===""&&(u.clearBackgroundColor=!0),this.selectElement.style[g]=u[g]),g==="fontSize"&&(this.selectElement.style.fontSize=u[g]+"px"),g==="color"&&(this.selectElement.style.color=u[g]),g==="fontName"&&(this.selectElement.style.fontFamily=u[g]),g==="fontStyle")){var y=u[g];y==="boldItalic"?(this.selectElement.style.fontStyle="italic",this.selectElement.style.fontWeight="bold",s.isBold=!0,s.isItalic=!0):y==="bold"?(this.selectElement.style.fontStyle="normal",this.selectElement.style.fontWeight="bold",s.isBold=!0,s.isItalic=!1):y==="italic"?(this.selectElement.style.fontStyle="italic",this.selectElement.style.fontWeight="normal",s.isBold=!1,s.isItalic=!0):(s.isItalic=!1,s.isBold=!1,this.selectElement.style.fontStyle="normal",this.selectElement.style.fontWeight="normal")}if(g==="item"){if(s.items.includes(u.item)){delete u.item;continue}w++,s.items.push({Value:u.item,String:u.item});var m=createElement("div",{width:"100%",height:Math.round(20*this.layer.viewport.scale)+"px",lineHeight:Math.round(20*this.layer.viewport.scale)+"px",borderBottom:"1px solid #666666",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},{class:"option"});m.value=u.item,m.innerHTML=u.item,this.selectElement.appendChild(m),u.item={value:u.item,index:s.items.length-1}}if(g==="deleteItemIndex"){w++;var d=u.deleteItemIndex;s.selected===u.deleteItemIndex&&(s.selected=null),s.items.splice(d,1),this.selectElement.children[d].remove()}if(g==="moveOption"){w++;var f=u.moveOption.fromIndex,x=u.moveOption.toIndex,k=s.items;f>x?k.splice(f-1,2,k[f],k[f-1]):k.splice(f,2,k[f+1],k[f]),u.moveOption.item={Value:k[x].Value,String:k[x].String};var P=this.selectElement.children[f];P.remove(),this.selectElement.insertBefore(P,this.selectElement.children[x])}}if(w>0){var S={operate:"mod-form",name:this.annotation.name,pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr};s.items.length||(u.clearOption=!0);var E=["fontSize","fontName","color","fontStyle"].some(function(I){return u[I]});if(E){S.fontSize=s.fontSize,S.color=s.color;var M={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},T=s.fontName;s.isBold&&s.isItalic?S.fontName=M[T].boldItalic:s.isBold?S.fontName=M[T].bold:s.isItalic?S.fontName=M[T].italic:S.fontName=M[T]?M[T].normal:T,delete u.fontName}var D=Object.assign({},S,u);!s.annotPtr&&(D.items=s.items),this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:D}),this.getImage()}}}},{key:"setProperty",value:function(u){var s=this.annotation;if(u.name===s.name){for(var w in u)for(var g in s)g===w&&s[g]!==u[w]&&(s[g]=u[w],w==="backgroundColor"&&(this.selectElement.style[w]=u[w]));var v={operate:"mod-form",pageIndex:this.layer.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr},y=["fontSize","fontName","color","fontStyle"].some(function(x){return u[x]});if(y){v.fontSize=s.fontSize,v.color=s.color;var m={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},d=s.fontName;s.isBold&&s.isItalic?v.fontName=m[d].boldItalic:s.isBold?v.fontName=m[d].bold:s.isItalic?v.fontName=m[d].italic:v.fontName=m[d]?m[d].normal:d,delete u.fontName}var f=Object.assign({},v,u);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:f}),this.getImage()}}},{key:"changeSelectAvailable",value:function(){this.layer.documentViewer.toolMode==="form"?this.selectElement.style.pointerEvents="none":this.selectElement.style.pointerEvents=""}},{key:"handleSelectItemBg",value:function(){var u,s=_createForOfIteratorHelper(this.selectElement.children);try{for(s.s();!(u=s.n()).done;)u.value.style.backgroundColor="unset"}catch(w){s.e(w)}finally{s.f()}this.selectElement.children[this.annotation.selected]&&(this.selectElement.children[this.annotation.selected].style.backgroundColor="#dcdcdc"),this.setProperty({selected:this.annotation.selected,name:this.annotation.name})}},{key:"setHighlight",value:function(u){this.highlight=u,this.annotationContainer.style.backgroundColor=this.highlight?"#4982E54D":""}},{key:"getImage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function u(s){var w,g,v,y,m,d,f,x,k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return w=this.initRect,g={width:parseInt(w.width*this.layer.ratio+1),height:parseInt(w.height*this.layer.ratio+1)},P.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,width:g.width,height:g.height});case 4:v=P.sent,(y=document.createElement("canvas")).style.width=g.width+"px",y.style.height=g.height+"px",y.width=g.width,y.height=g.height,(m=y.getContext("2d")).clearRect(0,0,y.width,y.height),(d=m.createImageData(g.width,g.height)).data.set(v),m.putImageData(d,0,0),f=y.toDataURL("image/png",1),s&&(x=this.calculate(this.start,this.end),this.shapeElement.style.width="".concat(x.width,"px"),this.shapeElement.style.height="".concat(x.height,"px")),this.imgEle?this.imgEle.src=f:((k=document.createElement("img")).style.width="100%",k.style.height="100%",k.style.pointerEvents="none",k.style.display="block",k.src=f,this.imgEle=k,this.shapeElement.append(this.imgEle));case 18:case"end":return P.stop()}},u,this)})),function(u){return r.apply(this,arguments)})}]);var r,o}(),AddListBox=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.layer;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initListboxName=this.setInitProperty.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.eventBus._on("initListboxName",this.initListboxName)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initListboxName",this.initListboxName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale);this.setInitProperty();var u={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},s={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},w={left:u.x,top:u.y,right:s.x,bottom:s.y},g={operate:"add-form",type:"listbox",pageIndex:this.layer.page,date:new Date,rect:w,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,color:"#000000",fontName:"Helvetica",fontSize:14,items:[{Value:this.layer.annotationStore.$t("rightPanel.option")+"1",String:this.layer.annotationStore.$t("rightPanel.option")+"1"},{Value:this.layer.annotationStore.$t("rightPanel.option")+"2",String:this.layer.annotationStore.$t("rightPanel.option")+"2"}],selected:0};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:g})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,u=this.layer.viewport,s=u.width,w=u.height;if(this.layer.viewport.scale,r=Math.min(s,r),r=Math.max(0,r),o=Math.min(w,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var g=this.initStartPoint,v=this.initEndPoint,y=Math.abs(v.x-g.x),m=Math.abs(v.y-g.y),d=Math.min(y,m);g.x<v.x?v.x=g.x+d:v.x=g.x-d,g.y<v.y?v.y=g.y+d:v.y=g.y-d}var f=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(f.top,"px"),x.style.left="".concat(f.left,"px"),x.style.width="".concat(Math.abs(f.width-1),"px"),x.style.height="".concat(Math.abs(f.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",borderColor:"#43474D",borderWidth:"1px",borderStyle:"solid",position:"absolute"});this.shapeEle=k,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"setInitProperty",value:function(){var e=1;if(this.layer.annotationStore.annotationsAll)for(var n=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(u,s){return u.concat(s)},[]).filter(function(u){return u.type==="listbox"}),r=function(){var u="List Box"+(o+1);if(n.every(function(s){return s.fieldName!==u}))return e=o+1,1},o=0;o<=n.length&&!r();o++);this.fieldName="List Box"+e}}])}(),ComboBox=function(e){function n(u){var s,w=u.annotation,g=u.layer,v=u.show,y=v!==void 0&&v,m=u.highlight;return _classCallCheck(this,n),(s=_callSuper(this,n,[{annotation:w,layer:g}])).hidden=!0,s.initial=!1,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.show=y,s.highlight=m,s.onMousedown=s.handleMouseDown.bind(s),s.onMouseup=s.handleMouseUp.bind(s),s.onMousemove=s.handleMouseMove.bind(s),s.onDelete=s.handleDelete.bind(s),s.toggleAttrbutePanel=s.toggleAttrbutePanel.bind(s),s.handlePropertyPanel=s.handlePropertyPanel.bind(s),s.setProperty=s.setProperty.bind(s),s.changeSelectAvailable=s.changeSelectAvailable.bind(s),s.setHighlight=s.setHighlight.bind(s),s.render(),s}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var s,w,g,v,y,m,d,f,x,k,P,S,E;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(this.layer.eventBus._on("setProperty",this.setProperty),this.layer.eventBus._on("toolModeChanged",this.changeSelectAvailable),this.layer.eventBus._on("setHighlightForm",this.setHighlight),(s=this.annotation).items||(s.items=[]),s.fontName||(s.fontName="Helvetica"),this.annotation.selected||this.annotation.selected===0||(this.annotation.selected=null),this.annotation.backgroundColor||(this.annotation.backgroundColor="transparent"),s.isBold&&s.isItalic?s.fontStyle="boldItalic":s.isBold?s.fontStyle="bold":s.isItalic?s.fontStyle="italic":s.fontStyle="normal",w=this.getActualRect(this.layer.viewport.scale),g=w.start,v=w.end,this.start=g,this.end=v,y=this.calculate(g,v),(m=document.createElement("div")).id=s.name,m.className="annotation",m.style.top=y.top+"px",m.style.left=y.left+"px",m.style.width=y.width+"px",m.style.height=y.height+"px",m.style.backgroundColor=this.highlight?"#4982E54D":"",m.style.overflow="hidden",this.annotationContainer=m,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),d=createElement("div",{left:0,top:0,width:"".concat(Math.abs(y.width),"px"),height:"".concat(Math.abs(y.height),"px"),position:"relative",overflow:"hidden"}),this.shapeElement=d,this.getImage(),this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),f=createElement("select",{position:"absolute",left:0,top:0,paddingLeft:"4px",width:"100%",height:"100%",borderColor:s.borderColor,borderWidth:(s.borderWidth||1)+"px",borderStyle:s.borderStyle||"solid",cursor:"pointer",webkitAppearance:"none",appearance:"none",backgroundColor:s.backgroundColor,fontSize:s.fontSize||"12px",fontFamily:s.fontName,color:s.color,fontWeight:s.isBold?"bold":"normal",fontStyle:s.isItalic?"italic":"normal",textOverflow:"ellipsis",whiteSpace:"nowrap",opacity:0}),this.layer.documentViewer.toolMode==="form"&&(f.style.pointerEvents="none"),this.selectElement=f,x=createSvg("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},{width:"".concat(y.height/2,"px"),height:"".concat(y.height/2,"px"),position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",opacity:0}),k=createSvg("path",{d:"M4 5.51025L8.0041 10.5L12 5.5L4 5.51025Z",fill:"#666"},{pointerEvents:"none"}),this.svgElement=x,this.svgElement.append(k),this.shapeElement.append(this.svgElement),this.shapeElement.append(this.selectElement),s.items&&s.items.length>0)for(P=0;P<s.items.length;P++)(S=createElement("option")).value=s.items[P].Value,S.innerHTML=s.items[P].Value,s.selected===P&&(S.selected=!0),this.selectElement.appendChild(S);this.selectElement.addEventListener("change",this.handleSelect.bind(this)),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:y.left+y.width-84+"px",top:y.top+y.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,(E=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",E.style.zIndex=1,E.style.left="".concat(y.left-8,"px"),E.style.top="".concat(y.top-8,"px"),E.style.width="".concat(y.width+16,"px"),E.style.height="".concat(y.height+16,"px"),this.outerLine=E,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:y.width+8,height:y.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:y.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+5,y:y.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+9,y:y.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+9,y:y.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:y.width/2+4,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.popupElement),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.initial=!0,this.layer.documentViewer.toolMode!=="form"&&(this.annotation.isHidden==1?(this.annotationContainer.style.display="none",this.annotationContainer.style.pointerEvents="none"):this.annotation.isHidden==0&&(this.annotationContainer.style.display="block",this.annotationContainer.style.pointerEvents="auto")),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.toggleAttrbutePanel(),this.show=!1);case 82:case"end":return M.stop()}},u,this)})),function(){return o.apply(this,arguments)})},{key:"getActualRect",value:function(u){var s=this.annotation.rect,w=s.left,g=s.top,v=s.right,y=s.bottom;return{start:getActualPoint({x:w,y:g},u),end:getActualPoint({x:v,y},u)}}},{key:"rectCalc",value:function(u){var s=u.start,w=u.end;return{top:s.y<w.y?s.y:w.y,left:s.x<w.x?s.x:w.x,width:Math.abs(w.x-s.x),height:Math.abs(w.y-s.y)}}},{key:"calculate",value:function(u,s){var w=this.rectCalc({start:u,end:s});this.initRect=w;var g=(this.annotation.borderWidth||1)*this.layer.viewport.scale;return{top:w.top-g,left:w.left-g,width:w.width+2*g,height:w.height+2*g}}},{key:"getInitialPoint",value:function(){var u,s,w,g,v=this.layer.viewport.scale,y=this.start.x,m=this.start.y,d=this.end.x,f=this.end.y,x=this.layer.viewport,k=x.width,P=x.height,S=x.rotation;return S===0?(u=y/v,s=m/v,w=d/v,g=f/v):S===90?(u=m/v,s=y/v,w=f/v,g=d/v):S===180?(u=(k-y)/v,s=m/v,w=(k-d)/v,g=f/v):(u=(P-m)/v,s=(k-y)/v,w=(P-f)/v,g=(k-d)/v),{start:{x:u,y:s},end:{x:w,y:g}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var u=this.annotation;this.layer.annotationStore.selectedElementName=u.name;var s=_objectSpread2$1({},u);delete s.annotPtr,delete s.pagePtr,delete s.operate,delete s.targetPage,this.layer.eventBus.dispatch("annotationSelected",s),this.layer.eventBus.dispatch("changeRightPanelBtnDisabled")}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("propertyChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(u){!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(u==null?void 0:u.target)||this.layer.documentViewer.toolMode==="form"&&(this.hidden=!1,this.updateTool(),this.layer.eventBus._on("comboBoxPropertyPanelChanged",this.handlePropertyPanel),onClickOutside$1([this.annotationContainer,this.outerLine,this.popupElement,document.getElementById("formPropertyPanelButton"),document.getElementsByClassName("right-panel")[0]],this.handleOutside.bind(this)))}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleOutside",value:function(){var u,s,w;this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(this.layer.eventBus.dispatch("annotationDeselected"),this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("propertyChange",null)),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(u=this.outerLine)===null||u===void 0||u.removeEventListener("mousedown",this.onMousedown),(s=this.outerLine)===null||s===void 0||s.removeEventListener("touchstart",this.onMousedown),(w=this.outerLineContainer)===null||w===void 0||w.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.layer.eventBus._off("comboBoxPropertyPanelChanged",this.handlePropertyPanel)}},{key:"handleMouseDown",value:function(u){this.layer.tool&&u.stopPropagation();var s=u.target.getAttribute("data-id"),w=this.layer.documentViewer.getScrollViewElement();this.scrollTop=w.scrollTop,this.scrollLeft=w.scrollLeft;var g=getClickPoint(u),v=g.pageX,y=g.pageY;this.startState={operator:s,clickX:v,clickY:y},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}},{key:"handleMouseMove",value:function(u){u.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var s=getClickPoint(u),w=s.pageX,g=s.pageY,v=this.layer.documentViewer.getScrollViewElement(),y=v.scrollTop;w=w+v.scrollLeft-this.scrollLeft,g=g+y-this.scrollTop;var m=this.start,d=this.end,f=this.startState,x=this.layer.viewport,k=x.width,P=x.height;if(f.operator==="nw-resize"){var S=w-(f.clickX-this.start.x),E=g-(f.clickY-this.start.y);S=Math.min(d.x-5,S),S=Math.max(0,S),E=Math.min(d.y-5,E),E=Math.max(0,E),this.update({start:{x:S,y:E},end:d})}else if(f.operator==="w-resize"){var M=w-(f.clickX-this.start.x);M=Math.min(d.x-5,M),M=Math.max(0,M),this.update({start:{x:M,y:m.y},end:d})}else if(f.operator==="sw-resize"){var T=w-(f.clickX-this.start.x),D=g-(f.clickY-this.end.y);T=Math.min(d.x-5,T),T=Math.max(0,T),D=Math.min(P,D),D=Math.max(m.y+5,D),this.update({start:{x:T,y:m.y},end:{x:d.x,y:D}})}else if(f.operator==="s-resize"){var I=g-(f.clickY-this.end.y);I=Math.min(P,I),I=Math.max(m.y+5,I),this.update({start:m,end:{x:d.x,y:I}})}else if(f.operator==="se-resize"){var N=w-(f.clickX-this.end.x),O=g-(f.clickY-this.end.y);N=Math.min(k,N),N=Math.max(m.x+5,N),O=Math.min(P,O),O=Math.max(m.y+5,O),this.update({start:m,end:{x:N,y:O}})}else if(f.operator==="e-resize"){var F=w-(f.clickX-this.end.x);F=Math.min(k,F),F=Math.max(m.x+5,F),this.update({start:m,end:{x:F,y:d.y}})}else if(f.operator==="ne-resize"){var U=w-(f.clickX-this.end.x),Y=g-(f.clickY-this.start.y);U=Math.min(k,U),U=Math.max(m.x+5,U),Y=Math.min(d.y-5,Y),Y=Math.max(0,Y),this.update({start:{x:m.x,y:Y},end:{x:U,y:d.y}})}else if(f.operator==="n-resize"){var Q=g-(f.clickY-this.start.y);Q=Math.min(d.y-5,Q),Q=Math.max(0,Q),this.update({start:{x:m.x,y:Q},end:d})}else if(f.operator==="move"){var q,ne,J,re,X=this.layer.documentViewer,j=this.getMouseLocation(u),Z=X.getSelectedPage(j,j);if(Z.first&&Z.first!==this.layer.page+1){var W=X.windowToPage(j,Z.first,!1),te=Math.abs(m.x-d.x),le=Math.abs(m.y-d.y);if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===0)q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y;else if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===1)q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y);else if(X.pdfViewer.spreadMode===1&&X.pdfViewer.scrollMode===0){var oe=Math.min(Z.first,this.layer.page+1),Ee=Math.max(Z.first,this.layer.page+1);if(Ee-oe>2||oe+1===Ee&&oe%2==0)return;oe+1===Ee?(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y)):oe+2===Ee&&(q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y)}else if(X.pdfViewer.spreadMode===2&&X.pdfViewer.scrollMode===0){var Ae=Math.min(Z.first,this.layer.page+1),ve=Math.max(Z.first,this.layer.page+1);if(ve-Ae>2||Ae+1===ve&&(Ae!==1||ve!==2)&&ve%2==0||Ae===1&&ve===3)return;Ae+2===ve||Ae===1&&ve===2?(q=w-(f.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=w-(f.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y):Ae+1===ve&&(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=g-(f.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=g-(f.clickY-this.end.y))}var ke=X.pdfViewer._pages[Z.first-1].compdfAnnotationLayer;if(!ke)return;this.layer=ke,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ce=this.layer.div;Ce.append(this.annotationContainer),Ce.append(this.outerLineContainer)}else{q=w-(f.clickX-this.start.x),ne=g-(f.clickY-this.start.y),J=w-(f.clickX-this.end.x),re=g-(f.clickY-this.end.y);var Pe=X.pageToWindow({x:q,y:ne},this.layer.page+1,!1),Me=X.pageToWindow({x:J,y:re},this.layer.page+1,!1),Le=0,Te=0;g>f.clickY?Te=(Te=v.offsetHeight-(Me.y-v.scrollTop-v.offsetTop))<100?5:0:g<f.clickY&&(Te=(Te=Pe.y-v.scrollTop-v.offsetTop)<100?-5:0),w>f.clickX?Le=(Le=v.offsetWidth-(Me.x-v.scrollLeft-v.offsetLeft))<100?5:0:w<f.clickX&&(Le=(Le=Pe.x-v.scrollLeft-v.offsetLeft)<100?-5:0),(Le||Te)&&(v.scrollTop+=Te,v.scrollLeft+=Le);var ye={width:Math.abs(m.x-d.x),height:Math.abs(m.y-d.y)};q<J?(q=Math.max(0,q),q=Math.min(k-ye.width,q),J=Math.max(ye.width,J),J=Math.min(k,J)):(J=Math.max(0,J),J=Math.min(k-ye.width,J),q=Math.max(ye.width,q),q=Math.min(k,q)),ne<re?(ne=Math.max(0,ne),ne=Math.min(P-ye.height,ne),re=Math.max(ye.height,re),re=Math.min(P,re)):(re=Math.max(0,re),re=Math.min(P-ye.height,re),ne=Math.max(ye.height,ne),ne=Math.min(P,ne))}this.update({start:{x:q,y:ne},end:{x:J,y:re}})}f.clickX=w,f.clickY=g}},{key:"toggleAttrbutePanel",value:function(){this.layer.eventBus.dispatch("toggleAttrbutePanel")}},{key:"handleDelete",value:function(u){this.layer.tool&&u&&u.stopPropagation(),this.delete();var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",s)}},{key:"delete",value:function(){var u;this.handleOutside(),(u=this.annotationContainer)===null||u===void 0||u.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(u){this.layer.tool&&u.stopPropagation(),u.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var s=this.annotation,w=this.getInitialPoint(),g=w.start,v=w.end,y={left:g.x,top:g.y,right:v.x,bottom:v.y};if(y!==s.rect||s.pageIndex!==this.layer.page)if(s.rect=y,s.pageIndex!==this.layer.page){var m={type:"delete",annotation:{operate:"del-annot",name:s.name,pageIndex:s.pageIndex,annotPtr:s.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",m);var d=Object.assign({},s);delete d.annotPtr,delete d.pagePtr,delete d.name,d.operate="add-form",d.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:d}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",name:s.name,pageIndex:this.layer.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr,rect:y}}),this.getImage(!0)}},{key:"update",value:function(u){var s=u.start,w=u.end,g=this.calculate(s,w);this.start=s,this.end=w,this.annotationContainer.style.top=g.top+"px",this.annotationContainer.style.left=g.left+"px",this.annotationContainer.style.width=g.width+"px",this.annotationContainer.style.height=g.height+"px",this.annotationContainer.style.width="".concat(g.width,"px"),this.annotationContainer.style.height="".concat(g.height,"px"),this.outerLine.style.left="".concat(g.left-8,"px"),this.outerLine.style.top="".concat(g.top-8,"px"),this.outerLine.style.width="".concat(g.width+16,"px"),this.outerLine.style.height="".concat(g.height+16,"px");var v=g.left+g.width-84+"px",y=g.top+g.height+12+"px";this.popupElement.style.left=v,this.popupElement.style.top=y,this.moveRect.setAttribute("width",g.width+9),this.moveRect.setAttribute("height",g.height+9),this.LeftRect.setAttribute("y",g.height/2+5),this.bottomLeftRect.setAttribute("y",g.height+9),this.bottomRect.setAttribute("x",g.width/2+5),this.bottomRect.setAttribute("y",g.height+9),this.bottomRightRect.setAttribute("x",g.width+9),this.bottomRightRect.setAttribute("y",g.height+9),this.rightRect.setAttribute("x",g.width+9),this.rightRect.setAttribute("y",g.height/2+5),this.topRightRect.setAttribute("x",g.width+9),this.topRect.setAttribute("x",g.width/2+5),this.svgElement.style.width="".concat(g.height/2,"px"),this.svgElement.style.height="".concat(g.height/2,"px")}},{key:"handlePropertyPanel",value:function(u){var s=this.annotation;if(this.layer.annotationStore.selectedElementName===s.name){var w=0;for(var g in u){for(var v in s)if(v===g&&s[v]!==u[g]&&(w++,s[v]=u[g],g==="backgroundColor"&&(u[g]===""&&(u.clearBackgroundColor=!0),this.selectElement.style[g]=u[g]),g==="fontSize"&&(this.selectElement.style.fontSize=u[g]+"px"),g==="color"&&(this.selectElement.style.color=u[g]),g==="fontName"&&(this.selectElement.style.fontFamily=u[g]),g==="fontStyle")){var y=u[g];y==="boldItalic"?(this.selectElement.style.fontStyle="italic",this.selectElement.style.fontWeight="bold",s.isBold=!0,s.isItalic=!0):y==="bold"?(this.selectElement.style.fontWeight="bold",this.selectElement.style.fontStyle="normal",s.isBold=!0,s.isItalic=!1):y==="italic"?(this.selectElement.style.fontWeight="normal",this.selectElement.style.fontStyle="italic",s.isBold=!1,s.isItalic=!0):(s.isItalic=!1,s.isBold=!1,this.selectElement.style.fontStyle="normal",this.selectElement.style.fontWeight="normal")}if(g==="item"){if(s.items.includes(u.item)){delete u.item;continue}w++,s.items.push({Value:u.item,String:u.item});var m=createElement("option");m.value=u.item,m.innerHTML=u.item,this.selectElement.appendChild(m),u.item={value:u.item,index:s.items.length-1},u.selected=s.selected}if(g==="deleteItemIndex"){w++;var d=u.deleteItemIndex;s.selected===u.deleteItemIndex&&(s.selected=null),s.items.splice(d,1),this.selectElement.options[d].remove()}if(g==="moveOption"){w++;var f=u.moveOption.fromIndex,x=u.moveOption.toIndex,k=s.items;f>x?k.splice(f-1,2,k[f],k[f-1]):k.splice(f,2,k[f+1],k[f]),u.moveOption.item={Value:k[x].Value,String:k[x].String},u.selected=0,s.selected=0;var P=this.selectElement.options[f];P.remove(),this.selectElement.insertBefore(P,this.selectElement.options[x]),this.selectElement.selectedIndex=0}}if(w>0){var S={operate:"mod-form",name:s.name,pageIndex:this.layer.page,index:s.items.length-1,pagePtr:s.pagePtr,annotPtr:s.annotPtr};s.items.length||(u.clearOption=!0);var E=["fontSize","fontName","color","fontStyle"].some(function(I){return u[I]});if(E){S.fontSize=s.fontSize,S.color=s.color;var M={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},T=s.fontName;s.isBold&&s.isItalic?S.fontName=M[T].boldItalic:s.isBold?S.fontName=M[T].bold:s.isItalic?S.fontName=M[T].italic:S.fontName=M[T]?M[T].normal:T,delete u.fontName}var D=Object.assign({},S,u);!s.annotPtr&&(D.items=s.items),this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:D}),this.getImage()}}}},{key:"setProperty",value:function(u){var s=this.annotation;if(u.name===s.name){for(var w in u)for(var g in s)g===w&&s[g]!==u[w]&&(s[g]=u[w],w==="backgroundColor"&&(this.selectElement.style[w]=u[w]));var v={operate:"mod-form",pageIndex:this.layer.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr},y=["fontSize","fontName","color","fontStyle"].some(function(x){return u[x]});if(y){v.fontSize=s.fontSize,v.color=s.color;var m={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},d=s.fontName;s.isBold&&s.isItalic?v.fontName=m[d].boldItalic:s.isBold?v.fontName=m[d].bold:s.isItalic?v.fontName=m[d].italic:v.fontName=m[d]?m[d].normal:d,delete u.fontName}var f=Object.assign({},v,u);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:f}),this.getImage()}}},{key:"changeSelectAvailable",value:function(){this.layer.documentViewer.toolMode==="form"?this.selectElement.style.pointerEvents="none":this.selectElement.style.pointerEvents=""}},{key:"handleSelect",value:function(){this.annotation.selected=this.selectElement.selectedIndex,this.setProperty({selected:this.annotation.selected,name:this.annotation.name})}},{key:"setHighlight",value:function(u){this.highlight=u,this.annotationContainer.style.backgroundColor=this.highlight?"#4982E54D":""}},{key:"getImage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function u(s){var w,g,v,y,m,d,f,x,k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return w=this.initRect,g={width:parseInt(w.width*this.layer.ratio+1),height:parseInt(w.height*this.layer.ratio+1)},P.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,width:g.width,height:g.height});case 4:v=P.sent,(y=document.createElement("canvas")).style.width=g.width+"px",y.style.height=g.height+"px",y.width=g.width,y.height=g.height,(m=y.getContext("2d")).clearRect(0,0,y.width,y.height),(d=m.createImageData(g.width,g.height)).data.set(v),m.putImageData(d,0,0),f=y.toDataURL("image/png",1),s&&(x=this.calculate(this.start,this.end),this.shapeElement.style.width="".concat(x.width,"px"),this.shapeElement.style.height="".concat(x.height,"px")),this.imgEle?this.imgEle.src=f:((k=document.createElement("img")).style.width="100%",k.style.height="100%",k.style.pointerEvents="none",k.style.display="block",k.src=f,this.imgEle=k,this.shapeElement.append(this.imgEle));case 18:case"end":return P.stop()}},u,this)})),function(u){return r.apply(this,arguments)})}]);var r,o}(),AddComboBox=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.layer;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.initComboboxName=this.setInitProperty.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.eventBus._on("initComboboxName",this.initComboboxName)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initComboboxName",this.initComboboxName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale);this.setInitProperty();var u={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},s={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},w={left:u.x,top:u.y,right:s.x,bottom:s.y},g={operate:"add-form",type:"combobox",pageIndex:this.layer.page,date:new Date,rect:w,backgroundColor:"#DDE9FF",borderColor:"#43474D",borderStyle:"solid",borderWidth:1,fieldName:this.fieldName,isHidden:0,color:"#000000",fontName:"Helvetica",fontSize:14,items:[{Value:this.layer.annotationStore.$t("rightPanel.option")+"1",String:this.layer.annotationStore.$t("rightPanel.option")+"1"},{Value:this.layer.annotationStore.$t("rightPanel.option")+"2",String:this.layer.annotationStore.$t("rightPanel.option")+"2"}],selected:0};this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:g})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,u=this.layer.viewport,s=u.width,w=u.height;if(this.layer.viewport.scale,r=Math.min(s,r),r=Math.max(0,r),o=Math.min(w,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var g=this.initStartPoint,v=this.initEndPoint,y=Math.abs(v.x-g.x),m=Math.abs(v.y-g.y),d=Math.min(y,m);g.x<v.x?v.x=g.x+d:v.x=g.x-d,g.y<v.y?v.y=g.y+d:v.y=g.y-d}var f=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(f.top,"px"),x.style.left="".concat(f.left,"px"),x.style.width="".concat(Math.abs(f.width-1),"px"),x.style.height="".concat(Math.abs(f.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",borderColor:"#43474D",borderWidth:"1px",borderStyle:"solid",position:"absolute"});this.shapeEle=k,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"setInitProperty",value:function(){var e=1;if(this.layer.annotationStore.annotationsAll)for(var n=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(u,s){return u.concat(s)},[]).filter(function(u){return u.type==="combobox"}),r=function(){var u="Combo Box"+(o+1);if(n.every(function(s){return s.fieldName!==u}))return e=o+1,1},o=0;o<=n.length&&!r();o++);this.fieldName="Combo Box"+e}}])}(),MakupAnnotation=function(e){function n(o){var u,s=o.annotation,w=o.layer;return _classCallCheck(this,n),(u=_callSuper(this,n,[{annotation:s,layer:w}])).hidden=!0,u.markupContainer=null,u.outerLineContainer=null,u.ratio=window.devicePixelRatio||1,u.layer.pageViewer.canvas&&(u.ctx=u.layer.pageViewer.canvas.getContext("2d",{willReadFrequently:!0})),u.lineWidth=2*u.layer.viewport.scale*u.ratio,u.onHandleClick=u.handleClick.bind(u),u.onDelete=u.handleDelete.bind(u),u.onOpenReply=u.openReply.bind(u),u.handlePropertyPanel=u.handlePropertyPanel.bind(u),u}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){var o=this.annotation,u=this.layer.viewport.scale,s=this.getActualRect(u),w=s.start,g=s.end,v=this.calculate(w,g);this.rect=v;var y=o.quadPoints;if(y){for(var m=[],d=0;d+3<y.length;d+=4){var f=parseInt(y[d].PointX*u,10),x=parseInt(y[d].PointY*u,10),k=parseInt(y[d+1].PointX*u,10),P=parseInt(y[d+2].PointY*u,10),S=Math.min(f,k),E=Math.max(f,k),M=Math.min(x,P),T=Math.max(x,P),D=parseInt(E-S),I=parseInt(T-M);m.push({left:S,top:M,width:D,height:I})}this.positionArray=m,this.ctx&&(this.ctx.globalCompositeOperation="multiply",this.renderCanvansRect(m),this.markupContainer.addEventListener("mousedown",this.onHandleClick)),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container";var N=createSvg("svg");N.style.left=v.left-6+"px",N.style.top=v.top-6+"px",N.style.width=v.width+12+"px",N.style.height=v.height+12+"px";var O=createSvg("rect",{x:3,y:3,width:v.width+6,height:v.height+6,fill:"#ffffff","fill-opacity":0,"stroke-width":1,stroke:"#1460F3"});N.append(O),this.popupElement=createElement("div",{left:v.left+v.width-114+"px",top:v.top+v.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel);var F=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"});F.addEventListener("click",this.onDelete),F.innerHTML=this.deleteSvgStr,this.replyButton=createElement("div",{width:"30px",height:"30px",borderRadius:"2px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr,this.deletetButton=F,this.outerLineContainer.append(N);var U=this.layer.documentViewer.isAnnotationPopup;U&&this.outerLineContainer.append(this.popupElement),U&&this.enableReply&&this.popupElement.append(this.replyButton),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton)}}},{key:"getActualRect",value:function(o){var u=this.annotation.rect,s=u.left,w=u.top,g=u.right,v=u.bottom;return s=Math.min(s,g),s=Math.max(s,0),w=Math.min(w,v),w=Math.max(w,0),g=Math.max(s,g),g=Math.min(g,this.layer.viewport.rawDims.pageWidth),v=Math.max(w,v),v=Math.min(v,this.layer.viewport.rawDims.pageHeight),{start:getActualPoint({x:s,y:w},o),end:getActualPoint({x:g,y:v},o)}}},{key:"setCss",value:function(o,u){if(o&&u)for(var s in u)o.style[s]=u[s]}},{key:"rectCalc",value:function(o){var u=o.start,s=o.end;return{top:u.y<s.y?u.y:s.y,left:u.x<s.x?u.x:s.x,width:Math.abs(s.x-u.x),height:Math.abs(s.y-u.y)}}},{key:"calculate",value:function(o,u){var s=this.rectCalc({start:o,end:u});return{top:s.top-2,left:s.left-2,width:s.width+4,height:s.height+4}}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(o){if(this.hidden&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(o==null?void 0:o.target)){this.hidden=!1,this.updateTool(),this.layer.eventBus._on("annotationPropertyChanged",this.handlePropertyPanel);var u=[this.markupContainer,this.popupElement,this.outerLineContainer,this.deletetButton,this.replyButton,document.querySelector(".annotation-panel")],s=document.querySelector(".toggle-button");s&&u.push(s);var w=document.getElementById("annotationPropertyPanelButton");w&&u.push(w),onClickOutside$1(u,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),this.outerLineContainer.remove(),this.layer.eventBus._off("annotationPropertyChanged",this.handlePropertyPanel)}},{key:"updateTool",value:function(){if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var o=this.annotation;this.layer.annotationStore.selectedElementName=o.name;var u=_objectSpread2$1({},o);delete u.annotPtr,delete u.pagePtr,delete u.operate,delete u.targetPage,this.layer.eventBus.dispatch("annotationSelected",u)}this.layer.div.append(this.outerLineContainer)}}},{key:"handleDelete",value:function(o){this.layer.tool&&o&&o.stopPropagation(),this.delete();var u={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(u.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",u),this.layer.redrawMarkups({pageIndex:this.layer.page})}},{key:"delete",value:function(){var o;this.handleOutside(),(o=this.markupContainer)===null||o===void 0||o.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"renderCanvansRect",value:function(o){var u=document.createElement("div");u.className="markup";for(var s=0;s<o.length;s++){var w=o[s],g=document.createElement("div");this.setCss(g,{position:"absolute",top:w.top+"px",left:w.left+"px",width:w.width+"px",height:w.height+"px"}),u.append(g)}this.drawCanvas(o),this.layer.div.append(u),this.markupContainer=u}},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"reRenderAfterContentEdit",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function o(u){var s,w,g,v,y,m,d,f;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(s=u.pagePtr,w=u.rect,g=this.rect,v=w,!(g.left>v.left+v.width||g.left+g.width<v.left||g.top>v.top+v.height||g.top+g.height<v.top)){x.next=5;break}return x.abrupt("return");case 5:if(y={left:parseInt(this.rect.left*this.ratio),top:parseInt(this.rect.top*this.ratio),right:parseInt(this.rect.left*this.ratio)+parseInt(this.rect.width*this.ratio),bottom:parseInt(this.rect.top*this.ratio)+parseInt(this.rect.height*this.ratio),width:parseInt(this.rect.width*this.ratio),height:parseInt(this.rect.height*this.ratio)},m=null,!this.layer.pageViewer.documentViewer.renderLayerPermission||!this.layer.pageViewer.documentViewer.layers.length){x.next=13;break}return x.next=10,this.layer.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:s,scale:this.layer.viewport.scale*this.ratio,top:y.top,left:y.left,right:y.right,bottom:y.bottom,ocgsPtr:_toConsumableArray$1(this.layer.documentViewer.ocgsPtr)});case 10:m=x.sent,x.next=16;break;case 13:return x.next=15,this.layer.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:s,scale:this.layer.viewport.scale*this.ratio,top:y.top,left:y.left,right:y.right,bottom:y.bottom});case 15:m=x.sent;case 16:d=m.imageArray,(f=this.ctx.createImageData(parseInt(y.width),parseInt(y.height))).data.set(d),this.ctx.clearRect(y.left,y.top,y.width,y.height),this.ctx.putImageData(f,y.left,y.top),this.drawCanvas(this.positionArray);case 22:case"end":return x.stop()}},o,this)})),function(o){return r.apply(this,arguments)})},{key:"getIntersection",value:function(o,u){var s=Math.max(o.left,u.left),w=Math.min(o.left+o.width,u.right),g=Math.max(o.top,u.top),v=Math.min(o.top+o.height,u.bottom);return w>s&&v>g?{left:s,top:g,width:w-s,height:v-g}:null}},{key:"handlePropertyPanel",value:function(o){if(this.layer.annotationStore.selectedElementName===this.annotation.name){var u=this.annotation,s=0;for(var w in o)for(var g in u){var v=o[w];g===w&&u[g]!==v&&(u[w]=v,s++,w!=="opacity"&&w!=="color"||this.layer.eventBus.dispatch("redrawMarkups",{pageIndex:u.pageIndex,afterContentEdit:!1,rect:this.rect,pagePtr:u.pagePtr}))}if(s>0){var y={operate:"mod-annot",name:u.name,pageIndex:this.layer.page,pagePtr:u.pagePtr,annotPtr:u.annotPtr},m=Object.assign({},y,o);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:m})}}}}]);var r}(),TextHighlightAnnotation=function(e){function n(r){var o,u=r.annotation,s=r.layer,w=r.enableReply,g=w===void 0||w;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:u,layer:s}])).type="highlight",o.enableReply=g,o.hidden=!0,o.markupContainer=null,o.outerLineContainer=null,o.ratio=window.devicePixelRatio||1,o.layer.pageViewer.canvas&&(o.ctx=o.layer.pageViewer.canvas.getContext("2d",{willReadFrequently:!0})),o.lineWidth=2*o.layer.viewport.scale*o.ratio,o.onHandleClick=o.handleClick.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.render(),o}return _inherits(n,MakupAnnotation),_createClass(n,[{key:"drawCanvas",value:function(r){var o=this.annotation,u=convertColorToRGB(o.color),s=u.R,w=u.G,g=u.B;this.ctx.fillStyle="rgba(".concat(s,", ").concat(w,", ").concat(g,", ").concat(o.opacity||1,")");for(var v=0;v<r.length;v++){var y=r[v];this.ctx.fillRect(y.left*this.ratio,y.top*this.ratio,y.width*this.ratio,y.height*this.ratio)}}}])}(),TextSquigglyAnnotation=function(e){function n(r){var o,u=r.annotation,s=r.layer,w=r.enableReply,g=w===void 0||w;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:u,layer:s}])).type="squiggly",o.enableReply=g,o.hidden=!0,o.markupContainer=null,o.outerLineContainer=null,o.ratio=window.devicePixelRatio||1,o.layer.pageViewer.canvas&&(o.ctx=o.layer.pageViewer.canvas.getContext("2d",{willReadFrequently:!0})),o.lineWidth=2*o.layer.viewport.scale*o.ratio,o.onHandleClick=o.handleClick.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.render(),o}return _inherits(n,MakupAnnotation),_createClass(n,[{key:"drawCanvas",value:function(r){var o=this.annotation,u=3*this.layer.viewport.scale,s=20*this.layer.viewport.scale,w=convertColorToRGB(o.color),g=w.R,v=w.G,y=w.B;this.ctx.strokeStyle="rgba(".concat(g,", ").concat(v,", ").concat(y,", ").concat(o.opacity||1,")"),this.ctx.lineWidth=this.lineWidth;for(var m=0;m<r.length;m++){var d=r[m];this.ctx.beginPath();for(var f=d.left*this.ratio;f<=(d.left+d.width)*this.ratio;f++){var x=(d.top+d.height)*this.ratio+u*Math.sin(f/s*2*Math.PI);this.ctx.lineTo(f,x)}this.ctx.stroke()}}}])}(),TextStrikeoutAnnotation=function(e){function n(r){var o,u=r.annotation,s=r.layer,w=r.enableReply,g=w===void 0||w;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:u,layer:s}])).type="strikeout",o.enableReply=g,o.hidden=!0,o.markupContainer=null,o.outerLineContainer=null,o.ratio=window.devicePixelRatio||1,o.layer.pageViewer.canvas&&(o.ctx=o.layer.pageViewer.canvas.getContext("2d",{willReadFrequently:!0})),o.lineWidth=2*o.layer.viewport.scale*o.ratio,o.onHandleClick=o.handleClick.bind(o),o.onDelete=o.handleDelete.bind(o),o.onOpenReply=o.openReply.bind(o),o.render(),o}return _inherits(n,MakupAnnotation),_createClass(n,[{key:"drawCanvas",value:function(r){var o=this.annotation,u=convertColorToRGB(o.color),s=u.R,w=u.G,g=u.B;this.ctx.fillStyle="rgba(".concat(s,", ").concat(w,", ").concat(g,", ").concat(o.opacity||1,")");for(var v=0;v<r.length;v++){var y=r[v];this.ctx.fillRect(y.left*this.ratio,(y.top+y.height/2)*this.ratio,y.width*this.ratio,this.lineWidth)}}}])}(),TextUnderlineAnnotation=function(e){function n(r){var o,u=r.annotation,s=r.layer,w=r.enableReply,g=w===void 0||w;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:u,layer:s}])).type="underline",o.enableReply=g,o.render(),o}return _inherits(n,MakupAnnotation),_createClass(n,[{key:"drawCanvas",value:function(r){var o=this.annotation,u=convertColorToRGB(o.color),s=u.R,w=u.G,g=u.B;this.ctx.fillStyle="rgba(".concat(s,", ").concat(w,", ").concat(g,", ").concat(o.opacity||1,")");for(var v=0;v<r.length;v++){var y=r[v];this.ctx.fillRect(y.left*this.ratio,(y.top+y.height)*this.ratio,y.width*this.ratio,this.lineWidth)}}}])}(),PaintLink=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.layer;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.linkEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.linkEle&&this.linkEle.remove(),this.linkEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale),u={operate:"add-annot",type:"link",pageIndex:this.layer.page,date:new Date},s={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},w={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},g={left:s.x,top:s.y,right:w.x,bottom:w.y};u.rect=g,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:u})}this.initStartPoint=null,this.initEndPoint=null,this.linkEle&&this.linkEle.remove(),this.linkEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,u=this.layer.viewport,s=u.width,w=u.height;if(this.layer.viewport.scale,r=Math.min(s,r),r=Math.max(0,r),o=Math.min(w,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.linkEle){var g=this.calculate(this.initStartPoint,this.initEndPoint),v=this.linkEle;v.style.top="".concat(g.top,"px"),v.style.left="".concat(g.left,"px"),v.style.width="".concat(Math.abs(g.width-1),"px"),v.style.height="".concat(Math.abs(g.height-1),"px")}else{var y=createElement("div",{display:"block",backgroundColor:"#93B9FD",opacity:"0.3",position:"absolute"});this.linkEle=y,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.linkEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}}])}(),Link=function(e){function n(u){var s,w=u.annotation,g=u.layer,v=u.show,y=v!==void 0&&v,m=u.highlight;return _classCallCheck(this,n),(s=_callSuper(this,n,[{annotation:w,layer:g}])).show=y,s.highlight=m,s.hidden=!0,s.initial=!1,s.start=null,s.end=null,s.newStart=null,s.newEnd=null,s.startCircle=null,s.endCircle=null,s.selectionOutlinePadding=8,s.selectionOutlinePointWidth=6,s.onMousedown=s.handleMouseDown.bind(s),s.onMouseup=s.handleMouseUp.bind(s),s.onMousemove=s.handleMouseMove.bind(s),s.onDelete=s.handleDelete.bind(s),s.setHighlight=s.setHighlight.bind(s),s.render(),s}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){var u;for(var s in this.layer.eventBus._on("linkPropertyPanelChanged",this.handlePropertyPanel.bind(this)),this.layer.eventBus._on("setProperty",this.setProperty.bind(this)),this.layer.eventBus._on("setHighlightLink",this.setHighlight),this.annotation)s==="background-color"&&(this.annotation.backgroundColor=this.annotation[s],delete this.annotation[s]),s==="OnActivation"&&(this.annotation[s].Action&&this.annotation[s].Action.Dest&&this.annotation[s].Action.Dest.XYZ?(this.annotation.destPage=(parseInt(this.annotation.OnActivation.Action.Dest.XYZ.Page)+1).toString(),this.annotation.url=""):this.annotation[s].Action&&this.annotation[s].Action.URI&&(this.annotation.url=this.annotation.OnActivation.Action.URI.URI,this.annotation.destPage=""),delete this.annotation[s]),s==="Dest"&&(this.annotation[s].XYZ&&this.annotation[s].XYZ.Page&&(this.annotation.destPage=(parseInt(this.annotation.Dest.XYZ.Page)+1).toString(),this.annotation.url=""),delete this.annotation[s]);if((u=this.annotation.url)===null||u===void 0||!u.startsWith("af://")){var w=this.annotation,g=this.getActualRect(this.layer.viewport.scale),v=g.start,y=g.end;this.start=v,this.end=y;var m,d=this.calculate(v,y),f=document.createElement("div");f.id=w.name,f.className="annotation",f.style.top=d.top+"px",f.style.left=d.left+"px",f.style.width=d.width+"px",f.style.height=d.height+"px",f.style.backgroundColor=this.highlight?"#93B9FD":"",f.style.opacity=.3,this.annotationContainer=f,this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),m=createElement("div",{left:0,top:0,width:"".concat(Math.abs(d.width),"px"),height:"".concat(Math.abs(d.height),"px"),position:"relative"}),this.shapeElement=m,this.annotationContainer.append(this.shapeElement),this.layer.div.append(this.annotationContainer),this.buttonContainer=createElement("a",{display:"block",width:"100%",height:"100%",outline:"none"}),this.shapeElement.append(this.buttonContainer),this.buttonContainer.addEventListener("blur",this.onBlur),this.annotation.url&&(this.buttonContainer.setAttribute("href",this.annotation.url),this.buttonContainer.setAttribute("target","_blank")),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:d.left+d.width-42+"px",top:d.top+d.height+12+"px"},{class:"popupElement"}),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var x=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2+1;this.outerLine=createSvg("svg",{},{position:"absolute",left:"".concat(d.left-x,"px"),top:"".concat(d.top-x,"px"),width:"".concat(d.width+2*x,"px"),height:"".concat(d.height+2*x,"px"),zIndex:1}),this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:d.width+this.selectionOutlinePadding,height:d.height+this.selectionOutlinePadding,x:this.selectionOutlinePointWidth/2+1,y:this.selectionOutlinePointWidth/2+1}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:1,y:(d.height+this.selectionOutlinePadding)/2+1}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:1,y:d.height+this.selectionOutlinePadding+1}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:(d.width+this.selectionOutlinePadding)/2+1,y:d.height+this.selectionOutlinePadding+1}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:d.width+this.selectionOutlinePadding+1,y:d.height+this.selectionOutlinePadding+1}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:d.width+this.selectionOutlinePadding+1,y:(d.height+this.selectionOutlinePadding)/2+1}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:d.width+this.selectionOutlinePadding+1,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:(d.width+this.selectionOutlinePadding)/2+1,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.popupElement),this.popupElement.append(this.deletetButton),this.initial=!0,this.show&&this.handleClick()}}},{key:"getActualRect",value:function(u){var s=this.annotation.rect,w=s.left,g=s.top,v=s.right,y=s.bottom;return{start:getActualPoint({x:w,y:g},u),end:getActualPoint({x:v,y},u)}}},{key:"rectCalc",value:function(u){var s=u.start,w=u.end;return{top:s.y<w.y?s.y:w.y,left:s.x<w.x?s.x:w.x,width:Math.abs(w.x-s.x),height:Math.abs(w.y-s.y)}}},{key:"calculate",value:function(u,s){var w=this.rectCalc({start:u,end:s});return{top:w.top,left:w.left,width:w.width,height:w.height}}},{key:"getInitialPoint",value:function(){var u=this.layer.viewport.scale;return{start:{x:this.start.x/u,y:this.start.y/u},end:{x:this.end.x/u,y:this.end.y/u}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var u=this.annotation;this.layer.annotationStore.selectedElementName=u.name;var s=_objectSpread2$1({},u);delete s.annotPtr,delete s.pagePtr,delete s.operate,delete s.targetPage,this.layer.eventBus.dispatch("annotationSelected",s)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.eventBus.dispatch("linkPanelChange",this.annotation),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(u){!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(u==null?void 0:u.target)||this.layer.documentViewer.toolMode==="editor"||(this.layer.documentViewer.toolMode==="annotation"&&this.layer.tool==="link"?(this.hidden=!1,this.updateTool(),onClickOutside$1([this.annotationContainer,this.outerLine,this.popupElement,document.getElementById("linkPanel")],this.handleOutside.bind(this))):this.annotation.destPage?this.layer.eventBus.dispatch("pageNumberChanged",this.annotation.destPage):this.annotation.url&&this.buttonContainer.click())}},{key:"handleOutside",value:function(){var u,s,w;if(this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(this.layer.eventBus.dispatch("linkPanelChange",null),this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(u=this.outerLine)===null||u===void 0||u.removeEventListener("mousedown",this.onMousedown),(s=this.outerLine)===null||s===void 0||s.removeEventListener("touchstart",this.onMousedown),(w=this.outerLineContainer)===null||w===void 0||w.remove(),!this.annotation.url&&!this.annotation.destPage){var g;(g=this.annotationContainer)===null||g===void 0||g.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name});var v={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(v.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",v)}this.layer.documentViewer.getScrollViewElement().style.touchAction="auto"}},{key:"handleMouseDown",value:function(u){if(u.button===0||u.type!=="mousedown"){this.layer.tool&&u.stopPropagation();var s=u.target.getAttribute("data-id"),w=this.layer.documentViewer.getScrollViewElement();this.scrollTop=w.scrollTop,this.scrollLeft=w.scrollLeft;var g=getClickPoint(u),v=g.pageX,y=g.pageY;this.startState={operator:s,clickX:v,clickY:y},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup),this.handleClick()}}},{key:"handleMouseMove",value:function(u){if(u.button===0||u.type!=="mousemove"){u.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var s=getClickPoint(u),w=s.pageX,g=s.pageY,v=this.layer.documentViewer.getScrollViewElement(),y=v.scrollTop;w=w+v.scrollLeft-this.scrollLeft,g=g+y-this.scrollTop;var m=this.start,d=this.end,f=this.startState,x=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2+1,k=this.layer.viewport,P=k.width,S=k.height;if(f.operator==="nw-resize"){var E=w-(f.clickX-this.start.x),M=g-(f.clickY-this.start.y);E=Math.min(d.x-5,E),E=Math.max(x,E),M=Math.min(d.y-5,M),M=Math.max(x,M),this.update({start:{x:E,y:M},end:d})}else if(f.operator==="w-resize"){var T=w-(f.clickX-this.start.x);T=Math.min(d.x-5,T),T=Math.max(x,T),this.update({start:{x:T,y:m.y},end:d})}else if(f.operator==="sw-resize"){var D=w-(f.clickX-this.start.x),I=g-(f.clickY-this.end.y);D=Math.min(d.x-5,D),D=Math.max(x,D),I=Math.min(S-x,I),I=Math.max(m.y+5,I),this.update({start:{x:D,y:m.y},end:{x:d.x,y:I}})}else if(f.operator==="s-resize"){var N=g-(f.clickY-this.end.y);N=Math.min(S-x,N),N=Math.max(m.y+5,N),this.update({start:m,end:{x:d.x,y:N}})}else if(f.operator==="se-resize"){var O=w-(f.clickX-this.end.x),F=g-(f.clickY-this.end.y);O=Math.min(P-x,O),O=Math.max(m.x+5,O),F=Math.min(S-x,F),F=Math.max(m.y+5,F),this.update({start:m,end:{x:O,y:F}})}else if(f.operator==="e-resize"){var U=w-(f.clickX-this.end.x);U=Math.min(P-x,U),U=Math.max(m.x+5,U),this.update({start:m,end:{x:U,y:d.y}})}else if(f.operator==="ne-resize"){var Y=w-(f.clickX-this.end.x),Q=g-(f.clickY-this.start.y);Y=Math.min(P-x,Y),Y=Math.max(m.x+5,Y),Q=Math.min(d.y-5,Q),Q=Math.max(x,Q),this.update({start:{x:m.x,y:Q},end:{x:Y,y:d.y}})}else if(f.operator==="n-resize"){var q=g-(f.clickY-this.start.y);q=Math.min(d.y-5,q),q=Math.max(x,q),this.update({start:{x:m.x,y:q},end:d})}else if(f.operator==="move"){var ne,J,re,X,j=this.layer.documentViewer,Z=this.getMouseLocation(u),W=j.getSelectedPage(Z,Z);if(W.first&&W.first!==this.layer.page+1){var te=j.windowToPage(Z,W.first,!1),le=Math.abs(m.x-d.x),oe=Math.abs(m.y-d.y);if(j.pdfViewer.spreadMode===0&&j.pdfViewer.scrollMode===0)ne=w-(f.clickX-this.start.x),J=W.first>this.layer.page+1?te.y:te.y-oe,re=w-(f.clickX-this.end.x),X=W.first>this.layer.page+1?te.y+oe:te.y;else if(j.pdfViewer.spreadMode===0&&j.pdfViewer.scrollMode===1)ne=W.first>this.layer.page+1?te.x:te.x-le,J=g-(f.clickY-this.start.y),re=W.first>this.layer.page+1?te.x+le:te.x,X=g-(f.clickY-this.end.y);else if(j.pdfViewer.spreadMode===1&&j.pdfViewer.scrollMode===0){var Ee=Math.min(W.first,this.layer.page+1),Ae=Math.max(W.first,this.layer.page+1);if(Ae-Ee>2||Ee+1===Ae&&Ee%2==0)return;Ee+1===Ae?(ne=W.first>this.layer.page+1?te.x:te.x-le,J=g-(f.clickY-this.start.y),re=W.first>this.layer.page+1?te.x+le:te.x,X=g-(f.clickY-this.end.y)):Ee+2===Ae&&(ne=w-(f.clickX-this.start.x),J=W.first>this.layer.page+1?te.y:te.y-oe,re=w-(f.clickX-this.end.x),X=W.first>this.layer.page+1?te.y+oe:te.y)}else if(j.pdfViewer.spreadMode===2&&j.pdfViewer.scrollMode===0){var ve=Math.min(W.first,this.layer.page+1),ke=Math.max(W.first,this.layer.page+1);if(ke-ve>2||ve+1===ke&&(ve!==1||ke!==2)&&ke%2==0||ve===1&&ke===3)return;ve+2===ke||ve===1&&ke===2?(ne=w-(f.clickX-this.start.x),J=W.first>this.layer.page+1?te.y:te.y-oe,re=w-(f.clickX-this.end.x),X=W.first>this.layer.page+1?te.y+oe:te.y):ve+1===ke&&(ne=W.first>this.layer.page+1?te.x:te.x-le,J=g-(f.clickY-this.start.y),re=W.first>this.layer.page+1?te.x+le:te.x,X=g-(f.clickY-this.end.y))}var Ce=j.pdfViewer._pages[W.first-1].compdfAnnotationLayer;if(!Ce)return;this.layer=Ce,this.annotationContainer.remove(),this.outerLineContainer.remove();var Pe=this.layer.div;Pe.append(this.annotationContainer),Pe.append(this.outerLineContainer)}else{ne=w-(f.clickX-this.start.x),J=g-(f.clickY-this.start.y),re=w-(f.clickX-this.end.x),X=g-(f.clickY-this.end.y);var Me=j.pageToWindow({x:ne,y:J},this.layer.page+1,!1),Le=j.pageToWindow({x:re,y:X},this.layer.page+1,!1),Te=0,ye=0;g>f.clickY?ye=(ye=v.offsetHeight-(Le.y-v.scrollTop-v.offsetTop))<100?5:0:g<f.clickY&&(ye=(ye=Me.y-v.scrollTop-v.offsetTop)<100?-5:0),w>f.clickX?Te=(Te=v.offsetWidth-(Le.x-v.scrollLeft-v.offsetLeft))<100?5:0:w<f.clickX&&(Te=(Te=Me.x-v.scrollLeft-v.offsetLeft)<100?-5:0),(Te||ye)&&(v.scrollTop+=ye,v.scrollLeft+=Te);var _e={width:Math.abs(m.x-d.x),height:Math.abs(m.y-d.y)};ne<re?(ne=Math.max(x,ne),ne=Math.min(P-_e.width-x,ne),re=Math.max(_e.width+x,re),re=Math.min(P-x,re)):(re=Math.max(x,re),re=Math.min(P-_e.width-x,re),ne=Math.max(_e.width+x,ne),ne=Math.min(P-x,ne)),J<X?(J=Math.max(x,J),J=Math.min(S-_e.height-x,J),X=Math.max(_e.height+x,X),X=Math.min(S-x,X)):(X=Math.max(x,X),X=Math.min(S-_e.height-x,X),J=Math.max(_e.height+x,J),J=Math.min(S-x,J))}this.update({start:{x:ne,y:J},end:{x:re,y:X}})}f.clickX=w,f.clickY=g}}},{key:"handleDelete",value:function(u){this.layer.tool&&u&&u.stopPropagation(),this.delete();var s={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(s.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",s)}},{key:"delete",value:function(){var u;this.handleOutside(),(u=this.annotationContainer)===null||u===void 0||u.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(u){if(u.button===0||u.type!=="mouseup"){this.layer.tool&&u.stopPropagation(),u.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var s=this.annotation,w=this.getInitialPoint(),g=w.start,v=w.end,y={left:g.x,top:g.y,right:v.x,bottom:v.y};if(y!==s.rect||s.pageIndex!==this.layer.page)if(s.rect=y,s.pageIndex!==this.layer.page){var m={type:"delete",annotation:{operate:"del-annot",name:s.name,pageIndex:s.pageIndex,annotPtr:s.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",m);var d=Object.assign({},s);delete d.annotPtr,delete d.pagePtr,delete d.name,d.operate="add-annot",d.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:d}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:s.name,pageIndex:this.layer.page,pagePtr:s.pagePtr,annotPtr:s.annotPtr,rect:y}})}}},{key:"update",value:function(u){var s=u.start,w=u.end,g=this.calculate(s,w);this.start=s,this.end=w,this.annotationContainer.style.top=g.top+"px",this.annotationContainer.style.left=g.left+"px",this.annotationContainer.style.width=g.width+"px",this.annotationContainer.style.height=g.height+"px",this.annotationContainer.style.width="".concat(g.width,"px"),this.annotationContainer.style.height="".concat(g.height,"px"),this.shapeElement.style.width="".concat(g.width,"px"),this.shapeElement.style.height="".concat(g.height,"px");var v=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2+1;this.outerLine.style.left="".concat(g.left-v,"px"),this.outerLine.style.top="".concat(g.top-v,"px"),this.outerLine.style.width="".concat(g.width+2*v,"px"),this.outerLine.style.height="".concat(g.height+2*v,"px");var y=g.left+g.width-42+"px",m=g.top+g.height+12+"px";this.popupElement.style.left=y,this.popupElement.style.top=m,this.moveRect.setAttribute("width",g.width+this.selectionOutlinePadding+1),this.moveRect.setAttribute("height",g.height+this.selectionOutlinePadding+1),this.LeftRect.setAttribute("y",(g.height+this.selectionOutlinePadding)/2+1),this.bottomLeftRect.setAttribute("y",g.height+this.selectionOutlinePadding+1),this.bottomRect.setAttribute("x",(g.width+this.selectionOutlinePadding)/2+1),this.bottomRect.setAttribute("y",g.height+this.selectionOutlinePadding+1),this.bottomRightRect.setAttribute("x",g.width+this.selectionOutlinePadding+1),this.bottomRightRect.setAttribute("y",g.height+this.selectionOutlinePadding+1),this.rightRect.setAttribute("x",g.width+this.selectionOutlinePadding+1),this.rightRect.setAttribute("y",(g.height+this.selectionOutlinePadding)/2+1),this.topRightRect.setAttribute("x",g.width+this.selectionOutlinePadding+1),this.topRect.setAttribute("x",(g.width+this.selectionOutlinePadding)/2+1)}},{key:"handlePropertyPanel",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function u(s){var w,g,v,y,m,d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.layer.annotationStore.selectedElementName===this.annotation.name){f.next=2;break}return f.abrupt("return");case 2:for(v in w=this.annotation,g=0,s){for(y in w)y!==v||w[y]===s[v]||["url","destPage"].includes(v)||(w[y]=s[v],g++);v==="url"&&w[v]!==s[v]&&(this.buttonContainer.setAttribute("href",s[v]),this.buttonContainer.setAttribute("target","_blank"),w.destPage="",w.url=s[v],g++),v==="destPage"&&w[v]!==s[v]&&(w.url="",w.destPage=s[v],g++)}if(!(g>0)){f.next=10;break}return m={operate:"mod-annot",name:w.name,pageIndex:this.layer.page,pagePtr:w.pagePtr,annotPtr:w.annotPtr,url:w.url,destPage:w.destPage},d=Object.assign({},m,s),f.next=10,this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:d});case 10:this.handleOutside();case 11:case"end":return f.stop()}},u,this)})),function(u){return o.apply(this,arguments)})},{key:"setProperty",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function u(s){var w,g,v,y,m,d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.layer.annotationStore.selectedElementName===this.annotation.name){f.next=2;break}return f.abrupt("return");case 2:for(v in w=this.annotation,g=0,s){for(y in w)y!==v||w[y]===s[v]||["url","destPage"].includes(v)||(w[y]=s[v],g++);v==="url"&&w[v]!==s[v]&&(this.buttonContainer.setAttribute("href",s[v]),this.buttonContainer.setAttribute("target","_blank"),w.destPage="",w.url=s[v],g++),v==="destPage"&&w[v]!==s[v]&&(w.url="",w.destPage=s[v],g++)}if(!(g>0)){f.next=10;break}return m={operate:"mod-annot",name:w.name,pageIndex:this.layer.page,pagePtr:w.pagePtr,annotPtr:w.annotPtr,url:w.url,destPage:w.destPage},d=Object.assign({},m,s),f.next=10,this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:d});case 10:case"end":return f.stop()}},u,this)})),function(u){return r.apply(this,arguments)})},{key:"isURL",value:function(u){return/^(?:(?:https?|ftp):\/\/)?(?:www\.)?(?:[\w]+\.){1,3}(?:[a-z]{2,})?(?:\/[\w .-]*)*(?:\?[^\s]*)?$/.test(u)}},{key:"setHighlight",value:function(u){this.highlight=u,this.annotationContainer&&(this.annotationContainer.style.backgroundColor=this.highlight?"#93B9FD":"")}}]);var r,o}(),AddSignField=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.layer;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.eventBus._off("initTextfieldName",this.initTextfieldName)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName&&!document.getElementById("sign-image-save")){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale),u={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},s={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},w={left:u.x,top:u.y,right:s.x,bottom:s.y},g={operate:"add-form",type:"signatureFields",pageIndex:this.layer.page,date:new Date,rect:w,isSigned:0},v=1;if(this.layer.annotationStore.annotationsAll)for(var y=Object.values(this.layer.annotationStore.annotationsAll).reduce(function(f,x){return f.concat(x)},[]).filter(function(f){return f.type==="signatureFields"}),m=function(){var f="SignatureFormField"+(d+1);if(y.every(function(x){return x.fieldName!==f}))return v=d+1,1},d=0;d<=y.length&&!m();d++);g.fieldName="SignatureFormField"+v,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:g})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.tool==="signatureFields"&&document.getElementById("createSignFieldButton").click()}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,u=this.layer.viewport,s=u.width,w=u.height;if(this.layer.viewport.scale,r=Math.min(s,r),r=Math.max(0,r),o=Math.min(w,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var g=this.initStartPoint,v=this.initEndPoint,y=Math.abs(v.x-g.x),m=Math.abs(v.y-g.y),d=Math.min(y,m);g.x<v.x?v.x=g.x+d:v.x=g.x-d,g.y<v.y?v.y=g.y+d:v.y=g.y-d}var f=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(f.top,"px"),x.style.left="".concat(f.left,"px"),x.style.width="".concat(Math.abs(f.width-1),"px"),x.style.height="".concat(Math.abs(f.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#93B9FD",opacity:"0.3",position:"absolute"});this.shapeEle=k,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.layer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}}])}(),SignatureFields=function(e){function n(g){var v,y=g.annotation,m=g.layer;return _classCallCheck(this,n),(v=_callSuper(this,n,[{annotation:y,layer:m}])).hidden=!0,v.start=null,v.end=null,v.newStart=null,v.newEnd=null,v.startCircle=null,v.endCircle=null,v.ratio=window.devicePixelRatio||1,v.isDigital=!1,v.onMousedown=v.handleMouseDown.bind(v),v.onMouseup=v.handleMouseUp.bind(v),v.onMousemove=v.handleMouseMove.bind(v),v.onDelete=v.handleDelete.bind(v),v.toggleAttrbutePanel=v.toggleAttrbutePanel.bind(v),v.render(),v}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function g(){var v,y,m,d,f,x,k,P,S,E,M,T,D;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:for(y in v=this.annotation,this.layer.eventBus._on("setProperty",this.setProperty.bind(this)),this.layer.eventBus._on("updateSignatureFieldAp",this.updateAp.bind(this)),v)y==="background-color"&&(v.backgroundColor=v[y],delete v[y]);return m=this.getActualRect(this.layer.viewport.scale),d=m.start,f=m.end,this.start=d,this.end=f,x=this.calculate(d,f),(k=document.createElement("div")).id=v.name,k.className="annotation",k.style.top=x.top+"px",k.style.left=x.left+"px",k.style.width=x.width+"px",k.style.height=x.height+"px",k.style.overflow="hidden",this.annotationContainer=k,P=createElement("div",{left:0,top:0,width:"".concat(Math.abs(x.width),"px"),height:"".concat(Math.abs(x.height),"px"),backgroundColor:"#93B9FD",opacity:"0.3",position:"relative"}),this.shapeElement=P,v.isSigned||v.isSignedDigitally||((S=createElement("div",{position:"absolute",left:0,top:0,width:"73px",height:"22px",backgroundColor:"#1460F3",fontSize:"12px",fontWeight:"600",color:"white",lineHeight:"22px",textAlign:"center",transformOrigin:"0 0"})).innerText="SIGN HERE",E=Math.min(x.width/73,x.height/22),S.style.transform=E<1?"scale(".concat(E,")"):"",this.tagElement=S),(M=this.layer.annotationStore.signatures.find(function(N){return N.signaturePtr===v.signaturePtr}))&&(this.isDigital=M.isDigital),I.next=24,this.getSignatureImage();case 24:T=I.sent,v.imageBase64=T,this.annotationContainer.append(this.shapeElement),!v.isSigned&&this.annotationContainer.append(this.tagElement),this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),this.layer.div.append(this.annotationContainer),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:x.left+x.width-84+"px",top:x.top+x.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,(D=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.position="absolute",D.style.zIndex=1,D.style.left="".concat(x.left-8,"px"),D.style.top="".concat(x.top-8,"px"),D.style.width="".concat(x.width+16,"px"),D.style.height="".concat(x.height+16,"px"),this.outerLine=D,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:x.width+8,height:x.height+8,x:4,y:4}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:1}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:x.height/2+5}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:1,y:x.height+9}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:x.width/2+5,y:x.height+9}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:x.width+9,y:x.height+9}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:x.width+9,y:x.height/2+5}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:x.width+9,y:1}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#FFFFFF",stroke:"#4982E6","stroke-width":1,width:6,height:6,x:x.width/2+5,y:1}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.popupElement),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 70:case"end":return I.stop()}},g,this)})),function(){return w.apply(this,arguments)})},{key:"getActualRect",value:function(g){var v=this.annotation.rect,y=v.left,m=v.top,d=v.right,f=v.bottom;return{start:getActualPoint({x:y,y:m},g),end:getActualPoint({x:d,y:f},g)}}},{key:"rectCalc",value:function(g){var v=g.start,y=g.end;return{top:v.y<y.y?v.y:y.y,left:v.x<y.x?v.x:y.x,width:Math.abs(y.x-v.x),height:Math.abs(y.y-v.y)}}},{key:"calculate",value:function(g,v){var y=this.rectCalc({start:g,end:v});this.initRect=y;var m=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:y.top-m,left:y.left-m,width:y.width+2*m,height:y.height+2*m}}},{key:"getInitialPoint",value:function(){var g=this.layer.viewport.scale;return{start:{x:this.start.x/g,y:this.start.y/g},end:{x:this.end.x/g,y:this.end.y/g}}}},{key:"updateTool",value:function(){if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var g=this.annotation;this.layer.annotationStore.selectedElementName=g.name;var v=_objectSpread2$1({},g);delete v.annotPtr,delete v.pagePtr,delete v.operate,delete v.targetPage,this.layer.eventBus.dispatch("annotationSelected",v)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(g){!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||["redaction","remove"].includes(this.layer.tool)||document.querySelector(".compare-document-container").contains(g==null?void 0:g.target)||this.layer.documentViewer.toolMode==="editor"||document.getElementById("sign-image-save")||this.isDigital||this.layer.pageDiv.querySelector(".annotationLayer svg").style.cursor==="crosshair"&&this.layer.documentViewer.toolMode!=="sign"||(this.layer.tool==="signatureFields"?(this.hidden=!1,this.updateTool(),onClickOutside$1([this.annotationContainer,this.outerLine,this.popupElement],this.handleOutside.bind(this))):this.layer.eventBus.dispatch("openSelectSignTypeDialog",this.annotation))}},{key:"handleOutside",value:function(){var g,v,y;this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected"),this.layer.eventBus.dispatch("propertyChange",null)),(g=this.outerLine)===null||g===void 0||g.removeEventListener("mousedown",this.onMousedown),(v=this.outerLine)===null||v===void 0||v.removeEventListener("touchstart",this.onMousedown),(y=this.outerLineContainer)===null||y===void 0||y.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto"}},{key:"handleMouseDown",value:function(g){if(g.button===0||g.type!=="mousedown"){this.layer.tool&&g.stopPropagation();var v=g.target.getAttribute("data-id"),y=this.layer.documentViewer.getScrollViewElement();this.scrollTop=y.scrollTop,this.scrollLeft=y.scrollLeft;var m=getClickPoint(g),d=m.pageX,f=m.pageY;this.startState={operator:v,clickX:d,clickY:f},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(g){if(g.button===0||g.type!=="mousemove"){g.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var v=getClickPoint(g),y=v.pageX,m=v.pageY,d=this.layer.documentViewer.getScrollViewElement(),f=d.scrollTop;y=y+d.scrollLeft-this.scrollLeft,m=m+f-this.scrollTop;var x=this.start,k=this.end,P=this.startState,S=this.layer.viewport,E=S.width,M=S.height;if(P.operator==="nw-resize"){var T=y-(P.clickX-this.start.x),D=m-(P.clickY-this.start.y);T=Math.min(k.x-5,T),T=Math.max(0,T),D=Math.min(k.y-5,D),D=Math.max(0,D),this.update({start:{x:T,y:D},end:k})}else if(P.operator==="w-resize"){var I=y-(P.clickX-this.start.x);I=Math.min(k.x-5,I),I=Math.max(0,I),this.update({start:{x:I,y:x.y},end:k})}else if(P.operator==="sw-resize"){var N=y-(P.clickX-this.start.x),O=m-(P.clickY-this.end.y);N=Math.min(k.x-5,N),N=Math.max(0,N),O=Math.min(M,O),O=Math.max(x.y+5,O),this.update({start:{x:N,y:x.y},end:{x:k.x,y:O}})}else if(P.operator==="s-resize"){var F=m-(P.clickY-this.end.y);F=Math.min(M,F),F=Math.max(x.y+5,F),this.update({start:x,end:{x:k.x,y:F}})}else if(P.operator==="se-resize"){var U=y-(P.clickX-this.end.x),Y=m-(P.clickY-this.end.y);U=Math.min(E,U),U=Math.max(x.x+5,U),Y=Math.min(M,Y),Y=Math.max(x.y+5,Y),this.update({start:x,end:{x:U,y:Y}})}else if(P.operator==="e-resize"){var Q=y-(P.clickX-this.end.x);Q=Math.min(E,Q),Q=Math.max(x.x+5,Q),this.update({start:x,end:{x:Q,y:k.y}})}else if(P.operator==="ne-resize"){var q=y-(P.clickX-this.end.x),ne=m-(P.clickY-this.start.y);q=Math.min(E,q),q=Math.max(x.x+5,q),ne=Math.min(k.y-5,ne),ne=Math.max(0,ne),this.update({start:{x:x.x,y:ne},end:{x:q,y:k.y}})}else if(P.operator==="n-resize"){var J=m-(P.clickY-this.start.y);J=Math.min(k.y-5,J),J=Math.max(0,J),this.update({start:{x:x.x,y:J},end:k})}else if(P.operator==="move"){var re,X,j,Z,W=this.layer.documentViewer,te=this.getMouseLocation(g),le=W.getSelectedPage(te,te);if(le.first&&le.first!==this.layer.page+1){var oe=W.windowToPage(te,le.first,!1),Ee=Math.abs(x.x-k.x),Ae=Math.abs(x.y-k.y);if(W.pdfViewer.spreadMode===0&&W.pdfViewer.scrollMode===0)re=y-(P.clickX-this.start.x),X=le.first>this.layer.page+1?oe.y:oe.y-Ae,j=y-(P.clickX-this.end.x),Z=le.first>this.layer.page+1?oe.y+Ae:oe.y;else if(W.pdfViewer.spreadMode===0&&W.pdfViewer.scrollMode===1)re=le.first>this.layer.page+1?oe.x:oe.x-Ee,X=m-(P.clickY-this.start.y),j=le.first>this.layer.page+1?oe.x+Ee:oe.x,Z=m-(P.clickY-this.end.y);else if(W.pdfViewer.spreadMode===1&&W.pdfViewer.scrollMode===0){var ve=Math.min(le.first,this.layer.page+1),ke=Math.max(le.first,this.layer.page+1);if(ke-ve>2||ve+1===ke&&ve%2==0)return;ve+1===ke?(re=le.first>this.layer.page+1?oe.x:oe.x-Ee,X=m-(P.clickY-this.start.y),j=le.first>this.layer.page+1?oe.x+Ee:oe.x,Z=m-(P.clickY-this.end.y)):ve+2===ke&&(re=y-(P.clickX-this.start.x),X=le.first>this.layer.page+1?oe.y:oe.y-Ae,j=y-(P.clickX-this.end.x),Z=le.first>this.layer.page+1?oe.y+Ae:oe.y)}else if(W.pdfViewer.spreadMode===2&&W.pdfViewer.scrollMode===0){var Ce=Math.min(le.first,this.layer.page+1),Pe=Math.max(le.first,this.layer.page+1);if(Pe-Ce>2||Ce+1===Pe&&(Ce!==1||Pe!==2)&&Pe%2==0||Ce===1&&Pe===3)return;Ce+2===Pe||Ce===1&&Pe===2?(re=y-(P.clickX-this.start.x),X=le.first>this.layer.page+1?oe.y:oe.y-Ae,j=y-(P.clickX-this.end.x),Z=le.first>this.layer.page+1?oe.y+Ae:oe.y):Ce+1===Pe&&(re=le.first>this.layer.page+1?oe.x:oe.x-Ee,X=m-(P.clickY-this.start.y),j=le.first>this.layer.page+1?oe.x+Ee:oe.x,Z=m-(P.clickY-this.end.y))}var Me=W.pdfViewer._pages[le.first-1].compdfAnnotationLayer;if(!Me)return;this.layer=Me,this.annotationContainer.remove(),this.outerLineContainer.remove();var Le=this.layer.div;Le.append(this.annotationContainer),Le.append(this.outerLineContainer)}else{re=y-(P.clickX-this.start.x),X=m-(P.clickY-this.start.y),j=y-(P.clickX-this.end.x),Z=m-(P.clickY-this.end.y);var Te=W.pageToWindow({x:re,y:X},this.layer.page+1,!1),ye=W.pageToWindow({x:j,y:Z},this.layer.page+1,!1),_e=0,we=0;m>P.clickY?we=(we=d.offsetHeight-(ye.y-d.scrollTop-d.offsetTop))<100?5:0:m<P.clickY&&(we=(we=Te.y-d.scrollTop-d.offsetTop)<100?-5:0),y>P.clickX?_e=(_e=d.offsetWidth-(ye.x-d.scrollLeft-d.offsetLeft))<100?5:0:y<P.clickX&&(_e=(_e=Te.x-d.scrollLeft-d.offsetLeft)<100?-5:0),(_e||we)&&(d.scrollTop+=we,d.scrollLeft+=_e);var Se={width:Math.abs(x.x-k.x),height:Math.abs(x.y-k.y)};re<j?(re=Math.max(0,re),re=Math.min(E-Se.width,re),j=Math.max(Se.width,j),j=Math.min(E,j)):(j=Math.max(0,j),j=Math.min(E-Se.width,j),re=Math.max(Se.width,re),re=Math.min(E,re)),X<Z?(X=Math.max(0,X),X=Math.min(M-Se.height,X),Z=Math.max(Se.height,Z),Z=Math.min(M,Z)):(Z=Math.max(0,Z),Z=Math.min(M-Se.height,Z),X=Math.max(Se.height,X),X=Math.min(M,X))}this.update({start:{x:re,y:X},end:{x:j,y:Z}})}P.clickX=y,P.clickY=m}}},{key:"toggleAttrbutePanel",value:function(){this.layer.eventBus.dispatch("toggleAttrbutePanel")}},{key:"handleDelete",value:function(g){var v=g instanceof Event?g:null;if(v||!g||g.signaturePtr===this.annotation.signaturePtr){this.layer.tool&&v&&v.stopPropagation(),this.delete();var y={type:"delete",annotation:{type:this.annotation.type,operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(y.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",y)}}},{key:"delete",value:function(){var g;this.handleOutside(),(g=this.annotationContainer)===null||g===void 0||g.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(g){if(g.button===0||g.type!=="mouseup"){this.layer.tool&&g.stopPropagation(),g.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0;var v=this.annotation,y=this.getInitialPoint(),m=y.start,d=y.end,f={left:m.x,top:m.y,right:d.x,bottom:d.y};if(f!==v.rect||v.pageIndex!==this.layer.page)if(v.rect=f,v.pageIndex!==this.layer.page){var x={type:"delete",annotation:{type:v.type,operate:"del-annot",name:v.name,pageIndex:v.pageIndex,annotPtr:v.annotPtr}};this.layer.eventBus.dispatch("annotationChanged",x);var k=Object.assign({},v);delete k.annotPtr,delete k.pagePtr,delete k.name,k.operate="add-form",k.pageIndex=this.layer.page,this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:k}),this.annotationContainer.remove(),this.outerLineContainer.remove()}else this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-form",type:v.type,name:v.name,pageIndex:this.layer.page,pagePtr:v.pagePtr,annotPtr:v.annotPtr,rect:f}})}}},{key:"update",value:function(g){var v=g.start,y=g.end,m=this.calculate(v,y);this.start=v,this.end=y,this.annotationContainer.style.top=m.top+"px",this.annotationContainer.style.left=m.left+"px",this.annotationContainer.style.width=m.width+"px",this.annotationContainer.style.height=m.height+"px",this.annotationContainer.style.width="".concat(m.width,"px"),this.annotationContainer.style.height="".concat(m.height,"px"),this.shapeElement.style.width="".concat(m.width,"px"),this.shapeElement.style.height="".concat(m.height,"px"),this.outerLine.style.left="".concat(m.left-8,"px"),this.outerLine.style.top="".concat(m.top-8,"px"),this.outerLine.style.width="".concat(m.width+16,"px"),this.outerLine.style.height="".concat(m.height+16,"px");var d=m.left+m.width-84+"px",f=m.top+m.height+12+"px";this.popupElement.style.left=d,this.popupElement.style.top=f,this.moveRect.setAttribute("width",m.width+9),this.moveRect.setAttribute("height",m.height+9),this.LeftRect.setAttribute("y",m.height/2+5),this.bottomLeftRect.setAttribute("y",m.height+9),this.bottomRect.setAttribute("x",m.width/2+5),this.bottomRect.setAttribute("y",m.height+9),this.bottomRightRect.setAttribute("x",m.width+9),this.bottomRightRect.setAttribute("y",m.height+9),this.rightRect.setAttribute("x",m.width+9),this.rightRect.setAttribute("y",m.height/2+5),this.topRightRect.setAttribute("x",m.width+9),this.topRect.setAttribute("x",m.width/2+5)}},{key:"handlePropertyPanel",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function g(v){var y,m,d,f,x,k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(this.layer.annotationStore.selectedElementName===this.annotation.name){P.next=2;break}return P.abrupt("return");case 2:for(d in y=this.annotation,m=0,v)for(f in y)f===d&&y[f]!==v[d]&&(y[f]=v[d],m++);if(!(m>0)){P.next=10;break}return x={operate:"mod-form",type:y.type,name:y.name,pageIndex:this.layer.page,pagePtr:y.pagePtr,annotPtr:y.annotPtr,url:y.url,destPage:y.destPage},k=Object.assign({},x,v),P.next=10,this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:k});case 10:this.handleOutside();case 11:case"end":return P.stop()}},g,this)})),function(g){return s.apply(this,arguments)})},{key:"setProperty",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function g(v){var y,m,d,f,x,k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(this.layer.annotationStore.selectedElementName===this.annotation.name){P.next=2;break}return P.abrupt("return");case 2:for(d in y=this.annotation,m=0,v)for(f in y)f===d&&y[f]!==v[d]&&(y[f]=v[d],m++);if(!(m>0)){P.next=10;break}return x={operate:"mod-form",type:y.type,name:y.name,pageIndex:this.layer.page,pagePtr:y.pagePtr,annotPtr:y.annotPtr,url:y.url,destPage:y.destPage},k=Object.assign({},x,v),P.next=10,this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:k});case 10:case"end":return P.stop()}},g,this)})),function(g){return u.apply(this,arguments)})},{key:"getSignatureImage",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function g(){var v,y,m,d,f,x,k,P;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return v=this.initRect,y={width:parseInt(v.width*this.ratio+1),height:parseInt(v.height*this.ratio+1)},S.next=4,this.layer.messageHandler.sendWithPromise("GetRenderAnnot",{pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,width:y.width,height:y.height});case 4:return m=S.sent,(d=document.createElement("canvas")).style.width=y.width+"px",d.style.height=y.height+"px",d.width=y.width,d.height=y.height,(f=d.getContext("2d")).clearRect(0,0,d.width,d.height),(x=f.createImageData(y.width,y.height)).data.set(m),f.putImageData(x,0,0),k=d.toDataURL("image/png",1),this.imgEle?this.imgEle.src=k:((P=document.createElement("img")).style.width="100%",P.style.height="100%",P.style.pointerEvents="none",P.style.display="block",this.isDigital&&(this.annotationContainer.style.zIndex=1,this.shapeElement.style.pointerEvents="none"),this.shapeElement.style.position="absolute",P.src=k,this.imgEle=P,this.annotationContainer.append(this.imgEle)),S.abrupt("return",k);case 18:case"end":return S.stop()}},g,this)})),function(){return o.apply(this,arguments)})},{key:"updateAp",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function g(v){var y,m,d,f,x,k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(y=v.annotPtr,m=y===void 0?0:y,d=v.signaturePtr,f=d===void 0?0:d,this.annotation.signaturePtr!==f){P.next=5;break}this.handleDelete({signaturePtr:f}),P.next=13;break;case 5:if(this.annotation.annotPtr!==m){P.next=13;break}return this.isDigital=!1,this.annotation.isSigned=1,(x=this.tagElement)===null||x===void 0||x.remove(),P.next=11,this.getSignatureImage();case 11:k=P.sent,this.annotation.imageBase64=k;case 13:case"end":return P.stop()}},g,this)})),function(g){return r.apply(this,arguments)})}]);var r,o,u,s,w}(),PaintRedaction=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.layer;_classCallCheck(this,e),this.layer=u,this._tool=r,this.color=o,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.linkEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()},[{key:"init",value:function(){this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown),this.layer.pageDiv.addEventListener("mousedown",this.onMousedown),this.layer.pageDiv.addEventListener("touchstart",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.linkEle&&this.linkEle.remove(),this.linkEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.layer.pageDiv.removeEventListener("mousedown",this.onMousedown),this.layer.pageDiv.removeEventListener("touchstart",this.onMousedown)}},{key:"handleMouseDown",value:function(e){if(!this.layer.annotationStore.selectedElementName&&!this.layer.pageDiv.classList.contains("text")){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y;this.initStartPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.layer.viewport.scale),o=getInitialPoint(n,this.layer.viewport.scale),u={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},s={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},w={rect:{left:u.x,top:u.y,right:s.x,bottom:s.y},operate:"add-annot",type:"redact",pageIndex:this.layer.page,date:new Date,erasure:this._tool==="remove"};this._tool==="redaction"&&(w.fillColor="rgb(0, 0, 0)"),this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:w})}this.initStartPoint=null,this.initEndPoint=null,this.linkEle&&this.linkEle.remove(),this.linkEle=null,this.layer.svgElement.innerHTML="",this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.layer.pageDiv,e),r=n.x,o=n.y,u=this.layer.viewport,s=u.width,w=u.height,g=this.layer.viewport.scale;if(r=Math.min(s,r),r=Math.max(0,r),o=Math.min(w,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.linkEle){var v=this.calculate(this.initStartPoint,this.initEndPoint),y=this.linkEle;y.style.top="".concat(v.top,"px"),y.style.left="".concat(v.left,"px"),y.style.width="".concat(Math.abs(v.width-1),"px"),y.style.height="".concat(Math.abs(v.height-1),"px")}else{var m=createElement("div",{display:"block",border:"".concat(2*g,"px solid #FF0000"),position:"absolute"});this.linkEle=m,this.scene=this.layer.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.linkEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n});return{top:r.top,left:r.left,width:r.width,height:r.height}}}])}(),Redaction=function(e){function n(r){var o,u=r.annotation,s=r.layer,w=r.show,g=w!==void 0&&w;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:u,layer:s}])).hidden=!0,o.initial=!1,o.start=null,o.end=null,o.startCircle=null,o.endCircle=null,o.show=g,o.onMousedown=o.handleMouseDown.bind(o),o.onMouseup=o.handleMouseUp.bind(o),o.onDelete=o.handleDelete.bind(o),o.onKeydown=o.handleKeyDown.bind(o),o.render(),o}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){var r=this,o=this.annotation;if(o.hasOwnProperty("rect")){var u=this.getActualRect(this.layer.viewport.scale),s=u.start,w=u.end;this.start=s,this.end=w;var g=this.calculate(s,w),v=[];o.rects&&o.rects.length?o.rects.forEach(function(x){var k=r.getActualRect(r.layer.viewport.scale,x),P=k.start,S=k.end;v.push(r.calculate(P,S))}):v.push(g);var y=createElement("div",{left:g.left+"px",top:g.top+"px",width:"".concat(Math.abs(g.width),"px"),height:"".concat(Math.abs(g.height),"px")},{id:o.name,class:"annotation redact"});this.annotationContainer=y;var m=(o.borderWidth||2)*this.layer.viewport.scale,d=[];v.forEach(function(x){var k=createElement("div",{left:x.left-g.left-(o.erasure?m/2:m)+"px",top:x.top-g.top+"px",width:"".concat(Math.abs(x.width)+(o.erasure?m:2*m),"px"),height:"".concat(Math.abs(x.height),"px"),position:"absolute",border:"".concat(m,"px solid #FF0000"),transition:"none"});o.erasure&&(k.style.backgroundColor="rgba(255, 255, 255)"),d.push(k),r.annotationContainer.append(k)}),this.layer.div.append(this.annotationContainer),this.annotationContainer.addEventListener("mousedown",this.handleClick.bind(this)),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.popupElement=createElement("div",{left:g.left+g.width-42+"px",top:g.top+g.height+12+"px"},{class:"popupElement"}),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr;var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.style.position="absolute",f.style.zIndex=1,f.style.left="".concat(g.left-8-(o.erasure?m/2:m),"px"),f.style.top="".concat(g.top-8,"px"),f.style.width="".concat(g.width+16+(o.erasure?m:2*m),"px"),f.style.height="".concat(g.height+16,"px"),this.outerLine=f,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#4982E6","stroke-width":1,"fill-opacity":0,width:g.width+8+(o.erasure?m:2*m),height:g.height+8,x:4,y:4},{cursor:"pointer"}),this.outerLine.append(this.moveRect),this.outerLineContainer.append(this.outerLine),this.outerLineContainer.append(this.popupElement),this.popupElement.append(this.deletetButton),o.erasure||(this.annotationContainer.addEventListener("mouseenter",function(){r.layer.pageDiv.classList.contains("selecting")||d.forEach(function(x){x.style.backgroundColor="#000000",x.style.border=""})}),this.annotationContainer.addEventListener("mouseleave",function(){d.forEach(function(x){x.style.backgroundColor="",x.style.border="".concat(m,"px solid #FF0000")})}),this.moveRect.addEventListener("mouseenter",function(){d.forEach(function(x){x.style.backgroundColor="#000000",x.style.border=""})}),this.moveRect.addEventListener("mouseleave",function(){d.forEach(function(x){x.style.backgroundColor="",x.style.border="2px solid #FF0000"})})),this.initial=!0}}},{key:"getActualRect",value:function(r,o){var u=o||this.annotation.rect,s=u.left,w=u.top,g=u.right,v=u.bottom;return{start:getActualPoint({x:s,y:w},r),end:getActualPoint({x:g,y:v},r)}}},{key:"rectCalc",value:function(r){var o=r.start,u=r.end;return{top:o.y<u.y?o.y:u.y,left:o.x<u.x?o.x:u.x,width:Math.abs(u.x-o.x),height:Math.abs(u.y-o.y)}}},{key:"calculate",value:function(r,o){var u=this.rectCalc({start:r,end:o});return{top:u.top,left:u.left,width:u.width,height:u.height}}},{key:"getInitialPoint",value:function(){var r=this.layer.viewport.scale;return{start:{x:this.start.x/r,y:this.start.y/r},end:{x:this.end.x/r,y:this.end.y/r}}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var r=this.annotation;this.layer.annotationStore.selectedElementName=r.name;var o=_objectSpread2$1({},r);delete o.annotPtr,delete o.pagePtr,delete o.operate,delete o.targetPage,this.layer.eventBus.dispatch("annotationSelected",o)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown)}}},{key:"handleClick",value:function(){!this.hidden||document.fullscreenElement||this.layer.annotationStore.creating||this.layer.documentViewer.toolMode==="editor"||this.layer.documentViewer.toolMode==="redaction"&&(this.hidden=!1,this.updateTool(),onClickOutside$1([this.annotationContainer,this.outerLine,this.popupElement],this.handleOutside.bind(this)))}},{key:"handleOutside",value:function(){var r,o,u;this.hidden||this.layer.annotationStore.selectedElementName!==this.annotation.name||(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),(r=this.outerLine)===null||r===void 0||r.removeEventListener("mousedown",this.onMousedown),(o=this.outerLine)===null||o===void 0||o.removeEventListener("touchstart",this.onMousedown),(u=this.outerLineContainer)===null||u===void 0||u.remove(),document.removeEventListener("keydown",this.onKeydown)}},{key:"handleMouseDown",value:function(r){if(r.button===0||r.type!=="mousedown"){this.layer.tool&&r.stopPropagation();var o=r.target.getAttribute("data-id"),u=getClickPoint(r),s=u.pageX,w=u.pageY;this.startState={operator:o,clickX:s,clickY:w},document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchend",this.onMouseup),this.handleClick()}}},{key:"handleDelete",value:function(r){this.layer.tool&&r&&r.stopPropagation(),this.delete();var o={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(o.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",o)}},{key:"delete",value:function(){var r;this.handleOutside(),(r=this.annotationContainer)===null||r===void 0||r.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:function(r){if(r.button===0||r.type!=="mouseup"){this.layer.tool&&r.stopPropagation(),r.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchend",this.onMouseup);var o=getClickPoint(r),u=o.pageX,s=o.pageY;if(u!==this.startState.clickX||s!==this.startState.clickY){var w=this.annotation,g=this.getInitialPoint(),v=g.start,y=g.end,m={left:v.x,top:v.y,right:y.x,bottom:y.y};this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:{operate:"mod-annot",name:w.name,pageIndex:this.layer.page,pagePtr:w.pagePtr,annotPtr:w.annotPtr,rect:m}})}}}},{key:"handleKeyDown",value:function(r){var o=r.keyCode||r.which;o!==8&&o!==46||this.handleDelete(r)}}])}(),Shape=function(e){function n(r){var o,u=r.annotation,s=r.layer,w=r.show,g=w!==void 0&&w,v=r.enableReply,y=v===void 0||v;return _classCallCheck(this,n),(o=_callSuper(this,n,[{annotation:u,layer:s}])).enableReply=y,o.hidden=!0,o.initial=!1,o.start=null,o.end=null,o.newStart=null,o.newEnd=null,o.startCircle=null,o.endCircle=null,o.show=g,o.handleClick=o.handleClick.bind(o),o.onDelete=o.handleDelete.bind(o),o.render(),o}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:function(){var r=this.annotation,o=this.getActualRect(this.layer.viewport.scale),u=o.start,s=o.end;this.start=u,this.end=s;var w=this.calculate(u,s);r.borderWidth,this.layer.viewport.scale,r.borderColor||(r.borderColor="#000000");var g=document.createElement("div");g.id=r.name,g.className="annotation",g.style.top=w.top+"px",g.style.left=w.left+"px",g.style.width=w.width+"px",g.style.height=w.height+"px",g.style.border="1px solid "+r.borderColor,g.style.pointerEvents="auto",g.addEventListener("click",this.handleClick),this.annotationContainer=g,this.layer.div.append(this.annotationContainer),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1)}},{key:"setCss",value:function(r,o){if(r&&o)for(var u in o)r.style[u]=o[u]}},{key:"getActualRect",value:function(r){var o=this.annotation.rect,u=o.left,s=o.top,w=o.right,g=o.bottom;return{start:getActualPoint({x:u,y:s},r),end:getActualPoint({x:w,y:g},r)}}},{key:"rectCalc",value:function(r){var o=r.start,u=r.end;return{top:o.y<u.y?o.y:u.y,left:o.x<u.x?o.x:u.x,width:Math.abs(u.x-o.x),height:Math.abs(u.y-o.y)}}},{key:"calculate",value:function(r,o){var u=this.rectCalc({start:r,end:o}),s=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:u.top-s,left:u.left-s,width:u.width+2*s,height:u.height+2*s}}},{key:"getInitialPoint",value:function(){var r=this.layer.viewport.scale;return{start:{x:this.start.x/r,y:this.start.y/r},end:{x:this.end.x/r,y:this.end.y/r}}}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null);else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var r=this.annotation;this.layer.annotationStore.selectedElementName=r.name,this.setCss(this.annotationContainer,this.annotation.selectedStyle);var o=_objectSpread2$1({},r);delete o.operate,delete o.targetPage,this.layer.eventBus.dispatch("annotationSelected",o)}this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(r){if(this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(r==null?void 0:r.target)){this.hidden=!1,this.updateTool();var o=[this.annotationContainer],u=document.querySelector(".toggle-button");u&&o.push(u),onClickOutside$1(o,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),this.annotationContainer.remove(),this.annotationContainer=null,this.render(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto"}},{key:"handleDelete",value:function(r){this.layer.tool&&r&&r.stopPropagation(),this.delete();var o={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.layer.eventBus.dispatch("annotationChanged",o)}},{key:"delete",value:function(){var r;this.handleOutside(),(r=this.annotationContainer)===null||r===void 0||r.remove(),this.annotation.isDelete=!0,this.layer.deleteAnnotationInLayer({name:this.annotation.name})}}])}(),Polygon=function(e){function n(y){var m,d=y.annotation,f=y.layer,x=y.show,k=x!==void 0&&x,P=y.enableReply,S=P===void 0||P,E=y.creating,M=E!==void 0&&E;return _classCallCheck(this,n),(m=_callSuper(this,n,[{annotation:d,layer:f}])).show=k,m.enableReply=S,m.creating=M,m.hidden=!0,m.initial=!1,m.start=null,m.end=null,m.rect=null,m.realVertices=null,m.svgElement=null,m.ratio=window.devicePixelRatio||1,m.decimalPlaces=0,m.showPerimeter=m.layer.annotationStore.polygon.showPerimeter,m.showArea=m.layer.annotationStore.polygon.showArea,m.isPopupShow=!1,m.selectionOutlineBdWidth=parseFloat(m.layer.viewport.scale.toFixed(1)),m.onClick=m.handleClick.bind(m),m.onMousedown=m.handleMouseDown.bind(m),m.onMouseup=m.handleMouseUp.bind(m),m.onMousemove=m.handleMouseMove.bind(m),m.onDelete=m.handleDelete.bind(m),m.onOpenReply=m.openReply.bind(m),m.handlePropertyPanel=m.handlePropertyPanel.bind(m),m.onHandlePopup=m.handlePopup.bind(m),m.onKeydown=m.handleKeyDown.bind(m),m.render(),m}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var m,d,f,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(m=this.annotation,d=this.layer.viewport.scale,this.updateRect(),f=this.rect,this.realVertices=this.annotation.vertices.map(function(P){return getActualPoint(P,d)}),m.showPerimeter!==void 0&&(this.showPerimeter=m.showPerimeter,delete m.showPerimeter),m.showArea!==void 0&&(this.showArea=m.showArea,delete m.showArea),!m.contents&&m.measure&&this.getResult(),m.precision&&(m.precision>1&&(m.precision=Math.pow(10,-Math.floor(Math.log10(m.precision)))),this.decimalPlaces=((x=Math.abs(m.precision).toString().split(".")[1])===null||x===void 0?void 0:x.length)||0,m.area=this.formatValue(m.area),m.perimeter=this.formatValue(m.perimeter)),m.borderColor||(m.borderColor=m.color||"#FF0000"),m.factor||!m.measure){k.next=14;break}return k.next=13,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",m.rulerPtr);case 13:m.factor=k.sent;case 14:m.fontStyle||(m.fontStyle="regular"),this.annotationContainer=createElement("div",{top:f.top+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px"},{id:m.name,class:"annotation"}),this.svgElement=createSvg("svg",{viewBox:"".concat(f.left," ").concat(f.top," ").concat(f.width," ").concat(f.height)},{pointerEvents:"all",overflow:"visible"}),this.annotationContainer.append(this.svgElement),this.svgElement.addEventListener("mousedown",this.onClick),this.layer.div.append(this.annotationContainer),this.draw(),this.outerLineContainer=createElement("div",{},{class:"outline-container"}),this.outerLine=createSvg("svg",{"data-id":"move",width:f.width,height:f.height,viewBox:"".concat(f.left," ").concat(f.top," ").concat(f.width," ").concat(f.height)},{position:"absolute",zIndex:1,left:"".concat(f.left,"px"),top:"".concat(f.top,"px"),width:"".concat(f.width,"px"),height:"".concat(f.height,"px"),border:"".concat(this.selectionOutlineBdWidth,"px ").concat(m.measure?"dashed":"solid"," #1460F3"),pointerEvents:"all",cursor:"all-scroll",overflow:"visible"}),this.outerLineContainer.append(this.outerLine),m.measure||(this.popupElement=createElement("div",{left:f.left+f.width-114+"px",top:f.top+f.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,this.replyButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr,this.layer.documentViewer.isAnnotationPopup&&this.enableReply&&this.popupElement.append(this.replyButton),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.outerLineContainer.append(this.popupElement)),this.updateCircle(),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 28:case"end":return k.stop()}},y,this)})),function(){return v.apply(this,arguments)})},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(y){if(this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(y==null?void 0:y.target)){this.hidden=!1,this.updateTool(),this.annotation.measure?(this.layer.eventBus._on("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._on("measurementPopupClicked",this.onHandlePopup)):this.layer.eventBus._on("annotationPropertyChanged",this.handlePropertyPanel),document.addEventListener("keydown",this.onKeydown);var m=[this.svgElement,this.outerLine,document.querySelector(".measure-panel"),document.querySelector(".measurement-board"),document.querySelector(".measurements-settings"),document.querySelector(".measurement-popup")];this.popupElement&&m.push(this.popupElement);var d=document.getElementById(this.annotation.measure?"measurePropertyPanelButton":"annotationPropertyPanelButton");d&&m.push(d);var f=document.querySelector(".toggle-button");f&&m.push(f),onClickOutside$1(m,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var y,m,d,f;!this.hidden&&this.annotation.measure&&this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",{isOpen:!1}),(f=this.layer.documentViewer)===null||f===void 0||(f=f.pdfViewer)===null||f===void 0||(f=f.measurementTool)===null||f===void 0||f.updateMeasurePanel(),this.hidePopup()),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),document.removeEventListener("keydown",this.onKeydown),(y=this.outerLine)===null||y===void 0||y.removeEventListener("mousedown",this.onMousedown),(m=this.outerLine)===null||m===void 0||m.removeEventListener("touchstart",this.onMousedown),(d=this.outerLineContainer)===null||d===void 0||d.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.annotation.measure?(this.layer.eventBus._off("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._off("measurementPopupClicked",this.onHandlePopup)):this.layer.eventBus._off("annotationPropertyChanged",this.handlePropertyPanel)}},{key:"getActualRect",value:function(y){var m=this.annotation.rect,d=m.left,f=m.top,x=m.right,k=m.bottom;return{start:getActualPoint({x:d,y:f},y),end:getActualPoint({x,y:k},y)}}},{key:"getInitialPoint",value:function(){var y=this.layer.viewport.scale;return{start:{x:this.start.x/y,y:this.start.y/y},end:{x:this.end.x/y,y:this.end.y/y}}}},{key:"calculate",value:function(y,m){var d=this.rectCalc({start:y,end:m}),f=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:d.top-f,left:d.left-f,width:d.width+2*f,height:d.height+2*f}}},{key:"rectCalc",value:function(y){var m=y.start,d=y.end;return{top:m.y<d.y?m.y:d.y,left:m.x<d.x?m.x:d.x,width:Math.abs(d.x-m.x),height:Math.abs(d.y-m.y)}}},{key:"rectCalcByVertices",value:function(y){var m=y.map(function(f){return f.x}),d=y.map(function(f){return f.y});return{left:Math.min.apply(Math,_toConsumableArray$1(m)),top:Math.min.apply(Math,_toConsumableArray$1(d)),right:Math.max.apply(Math,_toConsumableArray$1(m)),bottom:Math.max.apply(Math,_toConsumableArray$1(d))}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove(),document.removeEventListener("keydown",this.onKeydown);else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var y=this.annotation;this.layer.annotationStore.selectedElementName=y.name;var m=_objectSpread2$1({},y);delete m.annotPtr,delete m.pagePtr,delete m.operate,delete m.targetPage,delete m.arrow,this.layer.eventBus.dispatch("annotationSelected",m)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown),this.annotation.measure&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,area:this.annotation.area||0,perimeter:this.annotation.perimeter,showPerimeter:this.showPerimeter,showArea:this.showArea}),this.showPopup()),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleMouseDown",value:function(y){if(y.button===0||y.type!=="mousedown"){this.layer.tool&&y.stopPropagation();var m=y.target.getAttribute("data-id"),d=this.layer.documentViewer.getScrollViewElement();this.scrollTop=d.scrollTop,this.scrollLeft=d.scrollLeft;var f=getClickPoint(y),x=f.pageX,k=f.pageY;this.startState={operator:m,clickX:x,clickY:k},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(y){if(y.button===0||y.type!=="mousemove"){this.hidePopup(),y.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var m=getClickPoint(y),d=m.pageX,f=m.pageY,x=this.layer.documentViewer.getScrollViewElement(),k=x.scrollTop;d=d+x.scrollLeft-this.scrollLeft,f=f+k-this.scrollTop;var P=2*this.selectionOutlineBdWidth,S=this.start,E=this.end,M=this.startState,T=this.layer.viewport,D=T.width,I=T.height;T.scale;var N=/^point(\d+)$/.exec(M.operator);if(N){var O=+N[1],F=this.realVertices[O],U=d-(M.clickX-F.x),Y=f-(M.clickY-F.y);U=Math.min(D-P,U),U=Math.max(P,U),Y=Math.min(I-P,Y),Y=Math.max(P,Y),this.setPathPoint(O,U,Y),this.update(O)}else if(M.operator==="move"){var Q,q,ne,J,re=this.layer.documentViewer,X=this.getMouseLocation(y),j=re.getSelectedPage(X,X);if(j.first&&j.first!==this.layer.page+1){var Z=re.windowToPage(X,j.first,!1),W=Math.abs(S.x-E.x),te=Math.abs(S.y-E.y);if(re.pdfViewer.spreadMode===0&&re.pdfViewer.scrollMode===0)Q=d-(M.clickX-this.start.x),q=j.first>this.layer.page+1?Z.y:Z.y-te,ne=d-(M.clickX-this.end.x),J=j.first>this.layer.page+1?Z.y+te:Z.y;else if(re.pdfViewer.spreadMode===0&&re.pdfViewer.scrollMode===1)Q=j.first>this.layer.page+1?Z.x:Z.x-W,q=f-(M.clickY-this.start.y),ne=j.first>this.layer.page+1?Z.x+W:Z.x,J=f-(M.clickY-this.end.y);else if(re.pdfViewer.spreadMode===1&&re.pdfViewer.scrollMode===0){var le=Math.min(j.first,this.layer.page+1),oe=Math.max(j.first,this.layer.page+1);if(oe-le>2||le+1===oe&&le%2==0)return;le+1===oe?(Q=j.first>this.layer.page+1?Z.x:Z.x-W,q=f-(M.clickY-this.start.y),ne=j.first>this.layer.page+1?Z.x+W:Z.x,J=f-(M.clickY-this.end.y)):le+2===oe&&(Q=d-(M.clickX-this.start.x),q=j.first>this.layer.page+1?Z.y:Z.y-te,ne=d-(M.clickX-this.end.x),J=j.first>this.layer.page+1?Z.y+te:Z.y)}else if(re.pdfViewer.spreadMode===2&&re.pdfViewer.scrollMode===0){var Ee=Math.min(j.first,this.layer.page+1),Ae=Math.max(j.first,this.layer.page+1);if(Ae-Ee>2||Ee+1===Ae&&(Ee!==1||Ae!==2)&&Ae%2==0||Ee===1&&Ae===3)return;Ee+2===Ae||Ee===1&&Ae===2?(Q=d-(M.clickX-this.start.x),q=j.first>this.layer.page+1?Z.y:Z.y-te,ne=d-(M.clickX-this.end.x),J=j.first>this.layer.page+1?Z.y+te:Z.y):Ee+1===Ae&&(Q=j.first>this.layer.page+1?Z.x:Z.x-W,q=f-(M.clickY-this.start.y),ne=j.first>this.layer.page+1?Z.x+W:Z.x,J=f-(M.clickY-this.end.y))}var ve=re.pdfViewer._pages[j.first-1].compdfAnnotationLayer;if(!ve)return;this.layer=ve,this.annotationContainer.remove(),this.outerLineContainer.remove();var ke=this.layer.div;ke.append(this.annotationContainer),ke.append(this.outerLineContainer)}else{Q=d-(M.clickX-this.start.x),q=f-(M.clickY-this.start.y),ne=d-(M.clickX-this.end.x),J=f-(M.clickY-this.end.y);var Ce=re.pageToWindow({x:Q,y:q},this.layer.page+1,!1),Pe=re.pageToWindow({x:ne,y:J},this.layer.page+1,!1),Me=0,Le=0;f>M.clickY?Le=(Le=x.offsetHeight-(Pe.y-x.scrollTop-x.offsetTop))<100?5:0:f<M.clickY&&(Le=(Le=Ce.y-x.scrollTop-x.offsetTop)<100?-5:0),d>M.clickX?Me=(Me=x.offsetWidth-(Pe.x-x.scrollLeft-x.offsetLeft))<100?5:0:d<M.clickX&&(Me=(Me=Ce.x-x.scrollLeft-x.offsetLeft)<100?-5:0),(Me||Le)&&(x.scrollTop+=Le,x.scrollLeft+=Me);var Te=(this.annotation.borderWidth||2)*this.layer.viewport.scale;Q<ne?(Q=Math.max(P,Q),Q=Math.min(D-this.rect.width+Te,Q),ne=Math.max(this.rect.width,ne),ne=Math.min(D,ne)):(ne=Math.max(P,ne),ne=Math.min(D-this.rect.width+Te,ne),Q=Math.max(this.rect.width,Q),Q=Math.min(D,Q)),q<J?(q=Math.max(P,q),q=Math.min(I-this.rect.height+Te,q),J=Math.max(this.rect.height,J),J=Math.min(I,J)):(J=Math.max(P,J),J=Math.min(I-this.rect.height+Te,J),q=Math.max(this.rect.height,q),q=Math.min(I,q))}for(var ye=Q-S.x,_e=q-S.y,we=0;we<this.realVertices.length;we++){var Se=this.realVertices[we],$e=Se.x+ye,Be=Se.y+_e;this.setPathPoint(we,$e,Be)}this.update()}M.clickX=d,M.clickY=f}}},{key:"handleDelete",value:function(y){this.layer.tool&&y&&y.stopPropagation(),this.delete();var m={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(m.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",m)}},{key:"delete",value:function(){var y;this.handleOutside(),(y=this.annotationContainer)===null||y===void 0||y.remove(),this.annotation.isDelete=!0,this.annotation.name&&this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d,f,x,k,P;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(m.button===0||m.type!=="mouseup"){S.next=2;break}return S.abrupt("return");case 2:if(this.layer.tool&&m.stopPropagation(),m.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0,(d=this.annotation).measure&&this.layer.annotationStore.selectedElementName===d.name&&this.showPopup(),d.pageIndex===this.layer.page){S.next=36;break}if(f={type:"delete",annotation:{operate:"del-annot",name:d.name,pageIndex:d.pageIndex,annotPtr:d.annotPtr}},this.layer.eventBus.dispatch("annotationChanged",f),delete(x=Object.assign({},d)).annotPtr,delete x.pagePtr,delete x.name,x.operate="add-annot",x.pageIndex=this.layer.page,!d.measure){S.next=31;break}return S.next=25,this.layer.documentViewer.annotationManager.createMeasurementAnnotation(x);case 25:return k=S.sent,this.annotation=k[0],S.next=29,this.layer.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 29:S.next=32;break;case 31:this.layer.eventBus.dispatch("annotationChanged",{type:"add",show:!0,annotation:x});case 32:this.annotationContainer.remove(),this.outerLineContainer.remove(),S.next=43;break;case 36:if(P={operate:"mod-annot",name:d.name,pageIndex:this.layer.page,pagePtr:d.pagePtr,annotPtr:d.annotPtr,rect:d.rect,vertices:d.vertices},!d.measure){S.next=42;break}return S.next=40,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(P);case 40:S.next=43;break;case 42:this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:P});case 43:case"end":return S.stop()}},y,this)})),function(y){return g.apply(this,arguments)})},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"update",value:function(y){var m=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.updateRect();var d=this.rect;if(this.annotationContainer.style.top=d.top+"px",this.annotationContainer.style.left=d.left+"px",this.annotationContainer.style.width=d.width+"px",this.annotationContainer.style.height=d.height+"px",this.svgElement.setAttribute("width",d.width),this.svgElement.setAttribute("height",d.height),this.svgElement.setAttribute("viewBox","".concat(d.left," ").concat(d.top," ").concat(d.width," ").concat(d.height)),this.outerLine.setAttribute("height",d.height),this.outerLine.setAttribute("viewBox","".concat(d.left," ").concat(d.top," ").concat(d.width," ").concat(d.height)),this.outerLine.style.left="".concat(d.left,"px"),this.outerLine.style.top="".concat(d.top,"px"),this.outerLine.style.width="".concat(d.width,"px"),this.outerLine.style.height="".concat(d.height,"px"),this.popupElement&&(this.popupElement.style.left=d.left+d.width-114+"px"),this.popupElement&&(this.popupElement.style.top=d.top+d.height+12+"px"),this.updateCircle(y!=null?y:null),this.annotation.measure){var f={x:d.left+d.width/2+this.annotation.borderWidth,y:d.top+d.height/2+this.annotation.borderWidth};this.getResult(),this.permiterTspan&&(this.permiterTspan.setAttribute("x",f.x),this.permiterTspan.setAttribute("y",f.y),this.permiterTspan.textContent=this.annotation.perimeter.toFixed(this.decimalPlaces)+this.annotation.scale.translateUnit),this.areaTspan&&(this.areaTspan.setAttribute("x",f.x),this.areaTspan.setAttribute("y",f.y),this.areaTspan.textContent=this.annotation.area.toFixed(this.decimalPlaces)+this.annotation.scale.translateUnit+"\xB2"),m&&this.updateMeasure()}}},{key:"updateMeasure",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var m;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!this.startState||this.startState.operator==="move"){d.next=5;break}return m={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:this.annotation.rect,vertices:this.annotation.vertices},this.annotation.contents&&(m.contents=this.annotation.contents,m.labelPosition=this.annotation.labelPosition),d.next=5,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(m);case 5:if(!this.startState||this.startState.operator!=="move"){d.next=7;break}return d.abrupt("return");case 7:this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,area:this.annotation.area||0,perimeter:this.annotation.perimeter});case 8:case"end":return d.stop()}},y,this)})),function(){return w.apply(this,arguments)})},{key:"handlePropertyPanel",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d,f,x,k,P=this;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(d=this.annotation,this.layer.annotationStore.selectedElementName===d.name){S.next=3;break}return S.abrupt("return");case 3:f=0,S.t0=_regeneratorRuntime().keys(m);case 5:if((S.t1=S.t0()).done){S.next=13;break}return x=S.t1.value,S.t2=f,S.next=10,this.setCustomData(x,m[x],!0);case 10:f=S.t2+=S.sent,S.next=5;break;case 13:if(f>0&&this.sendData(m),f!==0||!["showPerimeter","showArea"].some(function(E){return E in m})){S.next=22;break}return this.getResult(),k=[],this.permiterTspan&&k.push(this.permiterTspan),this.areaTspan&&k.push(this.areaTspan),k.forEach(function(E,M){E.setAttribute("dy",M+"em"),P.textEle.appendChild(E)}),S.next=22,this.layer.documentViewer.annotationManager.editMeasurementAnnotation({annotPtr:d.annotPtr,contents:d.contents});case 22:["scale","precision","showPerimeter","showArea"].some(function(E){return E in m})&&this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,area:this.annotation.area||0,perimeter:this.annotation.perimeter,showPerimeter:this.showPerimeter,showArea:this.showArea});case 23:case"end":return S.stop()}},y,this)})),function(y){return s.apply(this,arguments)})},{key:"setCustomData",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function y(m,d){var f,x,k,P,S,E,M,T,D,I=arguments;return _regeneratorRuntime().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(f=I.length>2&&I[2]!==void 0&&I[2],x=this.annotation,k=0,P={x:this.rect.left+this.rect.width/2+this.annotation.borderWidth,y:this.rect.top+this.rect.height/2+this.annotation.borderWidth},m!=="showPerimeter"){N.next=8;break}return this.showPerimeter=d,!d&&this.permiterTspan?(this.permiterTspan.remove(),this.permiterTspan=null):d&&(this.permiterTspan||(this.permiterTspan=createSvg("tspan",{x:P.x,y:P.y})),this.permiterTspan.textContent=x.perimeter.toFixed(this.decimalPlaces)+x.scale.translateUnit),N.abrupt("return",0);case 8:if(m!=="showArea"){N.next=12;break}return this.showArea=d,!d&&this.areaTspan?(this.areaTspan.remove(),this.areaTspan=null):d&&(this.areaTspan||(this.areaTspan=createSvg("tspan",{x:P.x,y:P.y})),this.areaTspan.textContent=x.area.toFixed(this.decimalPlaces)+x.scale.translateUnit+"\xB2"),N.abrupt("return",0);case 12:N.t0=_regeneratorRuntime().keys(x);case 13:if((N.t1=N.t0()).done){N.next=45;break}if((S=N.t1.value)!==m||x[S]===d){N.next=43;break}if(x[S]=d,k=1,m==="fillColor"&&this.shapeEle.setAttribute("fill",d||"none"),m==="fillTransparency"&&this.shapeEle.setAttribute("fill-opacity",d),m==="borderColor"&&(this.shapeEle.setAttribute("stroke",d),!x.measure&&(x.color=d)),m==="opacity"&&(this.shapeEle.setAttribute("stroke-opacity",d),(E=this.textEle)===null||E===void 0||E.setAttribute("fill-opacity",d)),m==="borderWidth"&&(this.shapeEle.setAttribute("stroke-width",d*this.layer.viewport.scale),this.update({start:this.start,end:this.end},!1),x.measure&&this.showPopup()),m==="borderStyle"&&(d==="solid"&&this.shapeEle.setAttribute("stroke-dasharray",""),d==="dashed"&&this.shapeEle.setAttribute("stroke-dasharray",this.getDashString())),m==="dashes"&&this.shapeEle.setAttribute("stroke-dasharray",this.getDashString()),m==="color"&&this.textEle.setAttribute("fill",d),m==="fontSize"&&this.textEle.setAttribute("font-size",d*this.layer.viewport.scale),m==="fontName"&&(this.textEle.style.fontFamily=d),m==="fontStyle"&&((M=d)==="boldItalic"?(this.textEle.style.fontStyle="italic",this.textEle.style.fontWeight="bold",x.isBold=!0,x.isItalic=!0):M==="bold"?(this.textEle.style.fontStyle="normal",this.textEle.style.fontWeight="bold",x.isBold=!0,x.isItalic=!1):M==="italic"?(this.textEle.style.fontStyle="italic",this.textEle.style.fontWeight="normal",x.isBold=!1,x.isItalic=!0):(x.isItalic=!1,x.isBold=!1,this.textEle.style.fontStyle="normal",this.textEle.style.fontWeight="normal")),m==="contents"&&x.measure&&(this.areaTspan&&(this.areaTspan.remove(),this.areaTspan=null),this.permiterTspan||(this.permiterTspan=createSvg("tspan",{x:P.x,y:P.y,dy:"0em"}),this.textEle.appendChild(this.permiterTspan)),this.permiterTspan.textContent=d),m!=="scale"&&m!=="precision"){N.next=43;break}return m==="precision"&&(this.decimalPlaces=((T=Math.abs(x.precision).toString().split(".")[1])===null||T===void 0?void 0:T.length)||0),N.next=34,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(_defineProperty$1({rulerPtr:x.rulerPtr},m,d));case 34:return N.next=36,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",x.rulerPtr);case 36:return D=N.sent,x.factor=D,this.getResult(),this.layer.annotationStore.selectedElementName!==this.annotation.name||document.querySelector(".measure-panel").classList.contains("closed")||this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),N.next=42,this.layer.documentViewer.annotationManager.editMeasurementAnnotation({annotPtr:x.annotPtr,contents:x.contents});case 42:k=0;case 43:N.next=13;break;case 45:return!f&&this.sendData(_defineProperty$1({},m,d)),N.abrupt("return",k);case 47:case"end":return N.stop()}},y,this)})),function(y,m){return u.apply(this,arguments)})},{key:"sendData",value:function(y){var m=this.annotation;if(m.measure){var d={pagePtr:m.pagePtr,annotPtr:m.annotPtr,rulerPtr:m.rulerPtr,pageIndex:m.pageIndex,contents:m.contents};if(["fontSize","fontName","color","fontStyle"].some(function(E){return y[E]})){d.fontSize=m.fontSize,d.color=m.color;var f={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},x=m.fontName;m.isBold&&m.isItalic?d.fontName=f[x].boldItalic:m.isBold?d.fontName=f[x].bold:m.isItalic?d.fontName=f[x].italic:d.fontName=f[x]?f[x].normal:x,delete y.fontName}y.dashes&&(d.borderStyle=m.borderStyle,d.borderWidth=m.borderWidth),y.borderStyle&&(d.dashes=y.borderStyle==="solid"?[]:m.dashes,d.borderWidth=m.borderWidth);var k=Object.assign({},d,y);this.layer.documentViewer.annotationManager.editMeasurementAnnotation(k)}else{var P={operate:"mod-annot",name:m.name,pageIndex:m.pageIndex,pagePtr:m.pagePtr,annotPtr:m.annotPtr};y.dashes&&(P.borderStyle=m.borderStyle,P.borderWidth=m.borderWidth),y.borderStyle&&(P.dashes=y.borderStyle==="solid"?[]:m.dashes,P.borderWidth=m.borderWidth),y.borderColor&&(P.color=m.color);var S=Object.assign({},P,y);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:S})}}},{key:"getResult",value:function(){var y=this.annotation,m=y.vertices,d=y.factor,f=y.scale.translateUnit,x=m.length,k=[],P=0;if(x>=3){P=m[0].y*(m[x-1].x-m[1].x);for(var S=1;S<x;++S)P+=m[S].y*(m[S-1].x-m[(S+1)%x].x)}var E=this.formatValue(Math.abs(P/2)*d*d),M=0;if(x>=2){for(var T=0;T<x-1;T++){var D=m[T],I=m[T+1];M+=Math.sqrt(Math.pow(I.x-D.x,2)+Math.pow(I.y-D.y,2))}var N=m[0],O=m[x-1];M+=Math.sqrt(Math.pow(N.x-O.x,2)+Math.pow(N.y-O.y,2))}var F=this.formatValue(M*d);this.annotation.perimeter=F,this.annotation.area=E,this.showPerimeter&&k.push(this.annotation.perimeter.toFixed(this.decimalPlaces)+f),this.showArea&&k.push(this.annotation.area.toFixed(this.decimalPlaces)+f+"\xB2"),this.annotation.contents=k.join(`
`)}},{key:"showPopup",value:function(){var y=this.layer.div.getBoundingClientRect(),m=y.left+this.rect.left,d=this.rect.top+y.top,f={left:m,top:d,right:m+this.rect.width,bottom:d+this.rect.height};this.layer.eventBus.dispatch("showMeasurementPopup",{rect:f}),this.isPopupShow=!0}},{key:"hidePopup",value:function(){this.isPopupShow&&(this.isPopupShow=!1,this.layer.eventBus.dispatch("showMeasurementPopup"))}},{key:"handlePopup",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d,f=this;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:m==="delete"&&this.handleDelete(),m==="reply"&&(this.openReply(),(d=document.getElementById("leftPanel"))!=null&&d.classList.contains("closed")&&setTimeout(function(){f.showPopup()},350));case 2:case"end":return x.stop()}},y,this)})),function(y){return o.apply(this,arguments)})},{key:"formatValue",value:function(y){return y%1==0?y:Number(y.toFixed(this.decimalPlaces))}},{key:"handleKeyDown",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"){f.next=2;break}return f.abrupt("return");case 2:(d=m.keyCode||m.which)!==8&&d!==46||this.handleDelete();case 4:case"end":return f.stop()}},y,this)})),function(y){return r.apply(this,arguments)})},{key:"updateRect",value:function(){this.annotation.rect=this.rectCalcByVertices(this.annotation.vertices);var y=this.getActualRect(this.layer.viewport.scale),m=y.start,d=y.end;this.start=m,this.end=d,this.rect=this.calculate(m,d)}},{key:"draw",value:function(){var y=this,m=this.annotation,d=this.layer.viewport.scale,f=(m.borderWidth||2)*d,x=this.getDashString();if(this.svgElement.innerHTML="",this.creating){for(var k=0;k<this.realVertices.length-1;k++){var P=this.realVertices[k],S=this.realVertices[k+1],E=createSvg("line",{"data-id":"line"+k,stroke:m.borderColor,"stroke-width":f,"stroke-dasharray":x,"stroke-opacity":m.opacity||1,x1:P.x,y1:P.y,x2:S.x,y2:S.y});this.svgElement.append(E)}this.dashLineEle=createSvg("line",{stroke:m.borderColor,"stroke-width":f,"stroke-dasharray":x||"8","stroke-opacity":m.opacity||1,x1:this.realVertices[0].x,y1:this.realVertices[0].y,x2:this.realVertices[this.realVertices.length-1].x,y2:this.realVertices[this.realVertices.length-1].y}),this.svgElement.append(this.dashLineEle)}else{var M=this.realVertices.map(function(I){return"".concat(I.x,",").concat(I.y)}).join(" ");this.shapeEle=createSvg("polygon",{points:M,stroke:m.borderColor,"stroke-dasharray":x,"stroke-width":f,"stroke-opacity":m.opacity||1,fill:m.fillColor?m.fillColor:"none","fill-opacity":m.fillTransparency||1}),this.svgElement.append(this.shapeEle)}if(m.measure){var T={x:this.rect.left+this.rect.width/2+this.annotation.borderWidth,y:this.rect.top+this.rect.height/2+this.annotation.borderWidth};this.textEle=createSvg("text",{fill:m.color||m.borderColor,"fill-opacity":m.opacity||1,"text-anchor":"middle","dominant-baseline":"middle","font-size":m.fontSize*d+"px"}),this.svgElement.append(this.textEle);var D=[];this.showPerimeter&&(this.permiterTspan=createSvg("tspan",{x:T.x,y:T.y}),this.permiterTspan.textContent=m.perimeter.toFixed(this.decimalPlaces)+m.scale.translateUnit,D.push(this.permiterTspan)),this.showArea&&(this.areaTspan=createSvg("tspan",{x:T.x,y:T.y}),this.areaTspan.textContent=m.area.toFixed(this.decimalPlaces)+m.scale.translateUnit+"\xB2",D.push(this.areaTspan)),D.forEach(function(I,N){I.setAttribute("dy",N+"em"),y.textEle.appendChild(I)})}}},{key:"updateCircle",value:function(y){if(Number.isFinite(y)&&y<this.realVertices.length-1&&y>=0){var m=this.realVertices[y],d=m.x,f=m.y,x=this.outerLine.querySelector('circle[data-id="point'+y+'"]');return x.setAttribute("cx",d),void x.setAttribute("cy",f)}this.outerLineContainer.querySelectorAll("circle").forEach(function(T){return T.remove()});var k=[],P={};this.realVertices.forEach(function(T){var D="".concat(T.x,"-").concat(T.y);P[D]||(P[D]=!0,k.push(T))});for(var S=0;S<k.length;S++){var E=k[S],M=createSvg("circle",{"data-id":"point"+S,fill:"#1460F3",stroke:"#FFFFFF","stroke-width":2,cx:E.x,cy:E.y,r:6},{cursor:"default"});this.outerLine.append(M)}}},{key:"addPathPoint",value:function(y,m){var d=this.annotation,f=this.layer.viewport.scale,x=getInitialPoint({x:y,y:m},f);d.vertices.push(x),this.realVertices.push({x:y,y:m});var k=_slicedToArray(this.realVertices.slice(-2),2),P=k[0],S=P.x,E=P.y,M=k[1],T=M.x,D=M.y;if([S,E,T,D].every(Number.isFinite)){S===T&&E===D&&(T+=1,D+=1);var I=createSvg("line",{"data-id":"line"+(this.realVertices.length-2),stroke:d.borderColor,"stroke-width":2*f,"stroke-opacity":d.opacity||1,"stroke-dasharray":this.getDashString(),x1:S,y1:E,x2:T,y2:D},{"stroke-linecap":"round"});this.svgElement.append(I)}}},{key:"setPathPoint",value:function(y,m,d){if(!(y>this.realVertices.length-1||y<0)){var f=this.annotation,x=getInitialPoint({x:m,y:d},this.layer.viewport.scale);if(f.vertices[y].x=x.x,f.vertices[y].y=x.y,this.realVertices[y].x=m,this.realVertices[y].y=d,this.creating)y===0?this.updateLineElement(y):y===this.realVertices.length-1?this.updateLineElement(y-1):(this.updateLineElement(y-1),this.updateLineElement(y));else{var k=this.realVertices.map(function(P){return"".concat(P.x,",").concat(P.y)}).join(" ");this.shapeEle.setAttribute("points",k)}}}},{key:"updateLineElement",value:function(y){var m=this.realVertices[y],d=m.x,f=m.y,x=this.realVertices[y+1],k=x.x,P=x.y;if([d,f,k,P].every(Number.isFinite)&&(d!==k||f!==P)){var S=this.svgElement.querySelector('line[data-id="line'+y+'"]');S.setAttribute("x1",d),S.setAttribute("y1",f),S.setAttribute("x2",k),S.setAttribute("y2",P);var E=this.realVertices[0],M=this.realVertices[this.realVertices.length-1];this.dashLineEle.setAttribute("x1",E.x),this.dashLineEle.setAttribute("y1",E.y),this.dashLineEle.setAttribute("x2",M.x),this.dashLineEle.setAttribute("y2",M.y)}}},{key:"getDashString",value:function(){var y=this.annotation.dashes,m=Math.ceil(this.ratio*this.layer.viewport.scale),d="";return y.length===1||y.length===2&&y[0]===y[1]?d=Math.ceil(y[0]*m)+"":y.length>2&&(d=y.map(function(f){return Math.ceil(f*m)}).join(", ")),d}}]);var r,o,u,s,w,g,v}(),Polyline=function(e){function n(y){var m,d=y.annotation,f=y.layer,x=y.show,k=x!==void 0&&x,P=y.enableReply,S=P===void 0||P;return _classCallCheck(this,n),(m=_callSuper(this,n,[{annotation:d,layer:f}])).show=k,m.enableReply=S,m.hidden=!0,m.initial=!1,m.start=null,m.end=null,m.rect=null,m.realVertices=null,m.svgElement=null,m.ratio=window.devicePixelRatio||1,m.decimalPlaces=0,m.isPopupShow=!1,m.selectionOutlineBdWidth=parseFloat(m.layer.viewport.scale.toFixed(1)),m.onClick=m.handleClick.bind(m),m.onMousedown=m.handleMouseDown.bind(m),m.onMouseup=m.handleMouseUp.bind(m),m.onMousemove=m.handleMouseMove.bind(m),m.onDelete=m.handleDelete.bind(m),m.onOpenReply=m.openReply.bind(m),m.handlePropertyPanel=m.handlePropertyPanel.bind(m),m.onHandlePopup=m.handlePopup.bind(m),m.onKeydown=m.handleKeyDown.bind(m),m.render(),m}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var m,d,f,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(m=this.annotation,d=this.layer.viewport.scale,this.updateRect(),f=this.rect,this.realVertices=this.annotation.vertices.map(function(P){return getActualPoint(P,d)}),m.precision&&(m.precision>1&&(m.precision=Math.pow(10,-Math.floor(Math.log10(m.precision)))),this.decimalPlaces=((x=Math.abs(m.precision).toString().split(".")[1])===null||x===void 0?void 0:x.length)||0),m.borderColor||(m.borderColor=m.color||"#FF0000"),m.factor||!m.measure){k.next=11;break}return k.next=10,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",m.rulerPtr);case 10:m.factor=k.sent;case 11:m.fontStyle||(m.fontStyle="regular"),m.perimeter&&(m.perimeter=this.formatValue(m.perimeter)),!m.contents&&m.measure&&this.getResult(),this.annotationContainer=createElement("div",{top:f.top+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px"},{id:m.name,class:"annotation"}),this.svgElement=createSvg("svg",{viewBox:"".concat(f.left," ").concat(f.top," ").concat(f.width," ").concat(f.height)},{pointerEvents:"all",overflow:"visible",opacity:m.opacity?m.opacity:""}),this.annotationContainer.append(this.svgElement),this.svgElement.addEventListener("mousedown",this.onClick),this.layer.div.append(this.annotationContainer),this.draw(),this.outerLineContainer=createElement("div",{},{class:"outline-container"}),this.outerLine=createSvg("svg",{"data-id":"move",width:f.width,height:f.height,viewBox:"".concat(f.left," ").concat(f.top," ").concat(f.width," ").concat(f.height)},{position:"absolute",zIndex:1,left:"".concat(f.left,"px"),top:"".concat(f.top,"px"),width:"".concat(f.width,"px"),height:"".concat(f.height,"px"),border:"".concat(this.selectionOutlineBdWidth,"px ").concat(m.measure?"dashed":"solid"," #1460F3"),pointerEvents:"all",cursor:"all-scroll",overflow:"visible","box-sizing":"content-box"}),this.outerLineContainer.append(this.outerLine),m.measure||(this.popupElement=createElement("div",{left:f.left+f.width-114+"px",top:f.top+f.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,this.replyButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr,this.layer.documentViewer.isAnnotationPopup&&this.enableReply&&this.popupElement.append(this.replyButton),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.outerLineContainer.append(this.popupElement)),this.updateCircle(),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 27:case"end":return k.stop()}},y,this)})),function(){return v.apply(this,arguments)})},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(y){if(this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(y==null?void 0:y.target)){this.hidden=!1,this.updateTool(),this.annotation.measure?(this.layer.eventBus._on("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._on("measurementPopupClicked",this.onHandlePopup)):this.layer.eventBus._on("annotationPropertyChanged",this.handlePropertyPanel),document.addEventListener("keydown",this.onKeydown);var m=[this.svgElement,this.outerLine,document.querySelector(".measure-panel"),document.querySelector(".measurement-board"),document.querySelector(".measurements-settings"),document.querySelector(".measurement-popup")];this.popupElement&&m.push(this.popupElement);var d=document.getElementById(this.annotation.measure?"measurePropertyPanelButton":"annotationPropertyPanelButton");d&&m.push(d);var f=document.querySelector(".toggle-button");f&&m.push(f),onClickOutside$1(m,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var y,m,d,f;!this.hidden&&this.annotation.measure&&this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",{isOpen:!1}),(f=this.layer.documentViewer)===null||f===void 0||(f=f.pdfViewer)===null||f===void 0||(f=f.measurementTool)===null||f===void 0||f.updateMeasurePanel(),this.hidePopup()),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),document.removeEventListener("keydown",this.onKeydown),(y=this.outerLine)===null||y===void 0||y.removeEventListener("mousedown",this.onMousedown),(m=this.outerLine)===null||m===void 0||m.removeEventListener("touchstart",this.onMousedown),(d=this.outerLineContainer)===null||d===void 0||d.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.annotation.measure?(this.layer.eventBus._off("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._off("measurementPopupClicked",this.onHandlePopup)):this.layer.eventBus._off("annotationPropertyChanged",this.handlePropertyPanel)}},{key:"getActualRect",value:function(y){var m=this.annotation.rect,d=m.left,f=m.top,x=m.right,k=m.bottom;return{start:getActualPoint({x:d,y:f},y),end:getActualPoint({x,y:k},y)}}},{key:"getInitialPoint",value:function(){var y=this.layer.viewport.scale;return{start:{x:this.start.x/y,y:this.start.y/y},end:{x:this.end.x/y,y:this.end.y/y}}}},{key:"calculate",value:function(y,m){var d=this.rectCalc({start:y,end:m}),f=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:d.top-f,left:d.left-f,width:d.width+2*f,height:d.height+2*f}}},{key:"rectCalc",value:function(y){var m=y.start,d=y.end;return{top:m.y<d.y?m.y:d.y,left:m.x<d.x?m.x:d.x,width:Math.abs(d.x-m.x),height:Math.abs(d.y-m.y)}}},{key:"rectCalcByVertices",value:function(y){var m=y.map(function(f){return f.x}),d=y.map(function(f){return f.y});return{left:Math.min.apply(Math,_toConsumableArray$1(m)),top:Math.min.apply(Math,_toConsumableArray$1(d)),right:Math.max.apply(Math,_toConsumableArray$1(m)),bottom:Math.max.apply(Math,_toConsumableArray$1(d))}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove(),document.removeEventListener("keydown",this.onKeydown);else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var y=this.annotation;this.layer.annotationStore.selectedElementName=y.name;var m=_objectSpread2$1({},y);delete m.annotPtr,delete m.pagePtr,delete m.operate,delete m.targetPage,delete m.arrow,this.layer.eventBus.dispatch("annotationSelected",m)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown),this.annotation.measure&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,length:this.annotation.perimeter}),this.showPopup()),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleMouseDown",value:function(y){if(y.button===0||y.type!=="mousedown"){this.layer.tool&&y.stopPropagation();var m=y.target.getAttribute("data-id"),d=this.layer.documentViewer.getScrollViewElement();this.scrollTop=d.scrollTop,this.scrollLeft=d.scrollLeft;var f=getClickPoint(y),x=f.pageX,k=f.pageY;this.startState={operator:m,clickX:x,clickY:k},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(y){if(y.button===0||y.type!=="mousemove"){this.hidePopup(),y.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var m=getClickPoint(y),d=m.pageX,f=m.pageY,x=this.layer.documentViewer.getScrollViewElement(),k=x.scrollTop;d=d+x.scrollLeft-this.scrollLeft,f=f+k-this.scrollTop;var P=2*this.selectionOutlineBdWidth,S=this.start,E=this.end,M=this.startState,T=this.layer.viewport,D=T.width,I=T.height,N=T.scale,O=/^point(\d+)$/.exec(M.operator);if(O){var F=+O[1],U=this.realVertices[F],Y=d-(M.clickX-U.x),Q=f-(M.clickY-U.y);Y=Math.min(D-P,Y),Y=Math.max(P,Y),Q=Math.min(I-P,Q),Q=Math.max(P,Q),this.setPathPoint(F,Y,Q),this.update(F)}else if(M.operator==="move"){var q,ne,J,re,X=this.layer.documentViewer,j=this.getMouseLocation(y),Z=X.getSelectedPage(j,j);if(Z.first&&Z.first!==this.layer.page+1){var W=X.windowToPage(j,Z.first,!1),te=Math.abs(S.x-E.x),le=Math.abs(S.y-E.y);if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===0)q=d-(M.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=d-(M.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y;else if(X.pdfViewer.spreadMode===0&&X.pdfViewer.scrollMode===1)q=Z.first>this.layer.page+1?W.x:W.x-te,ne=f-(M.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=f-(M.clickY-this.end.y);else if(X.pdfViewer.spreadMode===1&&X.pdfViewer.scrollMode===0){var oe=Math.min(Z.first,this.layer.page+1),Ee=Math.max(Z.first,this.layer.page+1);if(Ee-oe>2||oe+1===Ee&&oe%2==0)return;oe+1===Ee?(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=f-(M.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=f-(M.clickY-this.end.y)):oe+2===Ee&&(q=d-(M.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=d-(M.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y)}else if(X.pdfViewer.spreadMode===2&&X.pdfViewer.scrollMode===0){var Ae=Math.min(Z.first,this.layer.page+1),ve=Math.max(Z.first,this.layer.page+1);if(ve-Ae>2||Ae+1===ve&&(Ae!==1||ve!==2)&&ve%2==0||Ae===1&&ve===3)return;Ae+2===ve||Ae===1&&ve===2?(q=d-(M.clickX-this.start.x),ne=Z.first>this.layer.page+1?W.y:W.y-le,J=d-(M.clickX-this.end.x),re=Z.first>this.layer.page+1?W.y+le:W.y):Ae+1===ve&&(q=Z.first>this.layer.page+1?W.x:W.x-te,ne=f-(M.clickY-this.start.y),J=Z.first>this.layer.page+1?W.x+te:W.x,re=f-(M.clickY-this.end.y))}var ke=X.pdfViewer._pages[Z.first-1].compdfAnnotationLayer;if(!ke)return;this.layer=ke,this.annotationContainer.remove(),this.outerLineContainer.remove();var Ce=this.layer.div;Ce.append(this.annotationContainer),Ce.append(this.outerLineContainer)}else{q=d-(M.clickX-this.start.x),ne=f-(M.clickY-this.start.y),J=d-(M.clickX-this.end.x),re=f-(M.clickY-this.end.y);var Pe=X.pageToWindow({x:q,y:ne},this.layer.page+1,!1),Me=X.pageToWindow({x:J,y:re},this.layer.page+1,!1),Le=0,Te=0;f>M.clickY?Te=(Te=x.offsetHeight-(Me.y-x.scrollTop-x.offsetTop))<100?5:0:f<M.clickY&&(Te=(Te=Pe.y-x.scrollTop-x.offsetTop)<100?-5:0),d>M.clickX?Le=(Le=x.offsetWidth-(Me.x-x.scrollLeft-x.offsetLeft))<100?5:0:d<M.clickX&&(Le=(Le=Pe.x-x.scrollLeft-x.offsetLeft)<100?-5:0),(Le||Te)&&(x.scrollTop+=Te,x.scrollLeft+=Le);var ye=(this.annotation.borderWidth||2)*N;q<J?(q=Math.max(P,q),q=Math.min(D-this.rect.width+ye,q),J=Math.max(this.rect.width,J),J=Math.min(D,J)):(J=Math.max(P,J),J=Math.min(D-this.rect.width+ye,J),q=Math.max(this.rect.width,q),q=Math.min(D,q)),ne<re?(ne=Math.max(P,ne),ne=Math.min(I-this.rect.height+ye,ne),re=Math.max(this.rect.height,re),re=Math.min(I,re)):(re=Math.max(P,re),re=Math.min(I-this.rect.height+ye,re),ne=Math.max(this.rect.height,ne),ne=Math.min(I,ne))}for(var _e=q-S.x,we=ne-S.y,Se=0;Se<this.realVertices.length;Se++){var $e=this.realVertices[Se],Be=$e.x+_e,Oe=$e.y+we;this.setPathPoint(Se,Be,Oe)}this.update()}M.clickX=d,M.clickY=f}}},{key:"handleDelete",value:function(y){this.layer.tool&&y&&y.stopPropagation(),this.delete();var m={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(m.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",m)}},{key:"delete",value:function(){var y;this.handleOutside(),(y=this.annotationContainer)===null||y===void 0||y.remove(),this.annotation.isDelete=!0,this.annotation.name&&this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d,f,x,k,P;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(m.button===0||m.type!=="mouseup"){S.next=2;break}return S.abrupt("return");case 2:if(this.layer.tool&&m.stopPropagation(),m.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0,(d=this.annotation).measure&&this.layer.annotationStore.selectedElementName===d.name&&this.showPopup(),d.pageIndex===this.layer.page){S.next=32;break}return f={type:"delete",annotation:{operate:"del-annot",name:d.name,pageIndex:d.pageIndex,annotPtr:d.annotPtr}},this.layer.eventBus.dispatch("annotationChanged",f),delete(x=Object.assign({},d)).annotPtr,delete x.pagePtr,delete x.name,x.operate="add-annot",x.pageIndex=this.layer.page,S.next=24,this.layer.documentViewer.annotationManager.createMeasurementAnnotation(x);case 24:return k=S.sent,this.annotation=k[0],S.next=28,this.layer.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 28:this.annotationContainer.remove(),this.outerLineContainer.remove(),S.next=35;break;case 32:return P={operate:"mod-annot",name:d.name,pageIndex:this.layer.page,pagePtr:d.pagePtr,annotPtr:d.annotPtr,rect:d.rect,vertices:d.vertices},S.next=35,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(P);case 35:case"end":return S.stop()}},y,this)})),function(y){return g.apply(this,arguments)})},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"update",value:function(y){var m=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.updateRect();var d=this.rect;this.annotationContainer.style.top=d.top+"px",this.annotationContainer.style.left=d.left+"px",this.annotationContainer.style.width=d.width+"px",this.annotationContainer.style.height=d.height+"px",this.svgElement.setAttribute("width",d.width),this.svgElement.setAttribute("height",d.height),this.svgElement.setAttribute("viewBox","".concat(d.left," ").concat(d.top," ").concat(d.width," ").concat(d.height)),this.outerLine.setAttribute("height",d.height),this.outerLine.setAttribute("viewBox","".concat(d.left," ").concat(d.top," ").concat(d.width," ").concat(d.height)),this.outerLine.style.left="".concat(d.left,"px"),this.outerLine.style.top="".concat(d.top,"px"),this.outerLine.style.width="".concat(d.width,"px"),this.outerLine.style.height="".concat(d.height,"px"),this.popupElement&&(this.popupElement.style.left=d.left+d.width-114+"px"),this.popupElement&&(this.popupElement.style.top=d.top+d.height+12+"px"),this.updateCircle(y!=null?y:null),this.annotation.measure&&m&&this.updateMeasure()}},{key:"updateMeasure",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function y(){return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(this.startState&&this.startState.operator!=="move"&&this.getResult(),!this.startState||this.startState.operator!=="move"){m.next=3;break}return m.abrupt("return");case 3:this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,length:this.annotation.perimeter});case 4:case"end":return m.stop()}},y,this)})),function(){return w.apply(this,arguments)})},{key:"handlePropertyPanel",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d,f,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(d=this.annotation,this.layer.annotationStore.selectedElementName===d.name){k.next=3;break}return k.abrupt("return");case 3:f=0,k.t0=_regeneratorRuntime().keys(m);case 5:if((k.t1=k.t0()).done){k.next=13;break}return x=k.t1.value,k.t2=f,k.next=10,this.setCustomData(x,m[x],!0);case 10:f=k.t2+=k.sent,k.next=5;break;case 13:f>0&&this.sendData(m);case 14:case"end":return k.stop()}},y,this)})),function(y){return s.apply(this,arguments)})},{key:"setCustomData",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function y(m,d){var f,x,k,P,S,E,M,T=this,D=arguments;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:f=D.length>2&&D[2]!==void 0&&D[2],x=this.annotation,k=0,I.t0=_regeneratorRuntime().keys(x);case 4:if((I.t1=I.t0()).done){I.next=34;break}if((P=I.t1.value)!==m||x[P]===d){I.next=32;break}if(x[P]=d,k=1,m==="borderColor"&&(x.measure?this.svgElement.querySelectorAll("line").forEach(function(N){return N.setAttribute("stroke",d)}):(this.polylineEle.setAttribute("stroke",d),x.color=d)),m==="opacity"&&(this.svgElement.style.opacity=d),m==="borderWidth"&&this.draw(),m==="borderStyle"&&(x.measure?this.svgElement.querySelectorAll("line").forEach(function(N){d==="solid"&&N.setAttribute("stroke-dasharray",""),d==="dashed"&&N.setAttribute("stroke-dasharray",T.getDashString())}):(d==="solid"&&this.polylineEle.setAttribute("stroke-dasharray",""),d==="dashed"&&this.polylineEle.setAttribute("stroke-dasharray",this.getDashString()))),m==="dashes"&&(x.measure?this.svgElement.querySelectorAll("line").forEach(function(N){return N.setAttribute("stroke-dasharray",T.getDashString())}):this.polylineEle.setAttribute("stroke-dasharray",this.getDashString())),m==="color"&&this.svgElement.querySelectorAll("text").forEach(function(N){return N.setAttribute("fill",d)}),m==="fontSize"&&this.svgElement.querySelectorAll("text").forEach(function(N){return N.setAttribute("font-size",d*T.layer.viewport.scale)}),m==="fontName"&&this.svgElement.querySelectorAll("text").forEach(function(N){return N.style.fontFamily=d}),m==="fontStyle"&&((S=d)==="boldItalic"?(this.svgElement.querySelectorAll("text").forEach(function(N){N.style.fontStyle="italic",N.style.fontWeight="bold"}),x.isBold=!0,x.isItalic=!0):S==="bold"?(this.svgElement.querySelectorAll("text").forEach(function(N){N.style.fontStyle="normal",N.style.fontWeight="bold"}),x.isBold=!0,x.isItalic=!1):S==="italic"?(this.svgElement.querySelectorAll("text").forEach(function(N){N.style.fontStyle="italic",N.style.fontWeight="normal"}),x.isBold=!1,x.isItalic=!0):(this.svgElement.querySelectorAll("text").forEach(function(N){N.style.fontStyle="normal",N.style.fontWeight="normal"}),x.isItalic=!1,x.isBold=!1)),m==="contents"&&x.measure&&(this.totalTextEle.textContent=d),m!=="scale"&&m!=="precision"){I.next=32;break}return m==="precision"&&(this.decimalPlaces=((E=Math.abs(x.precision).toString().split(".")[1])===null||E===void 0?void 0:E.length)||0),this.getResult(),I.next=24,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(_defineProperty$1(_defineProperty$1(_defineProperty$1({rulerPtr:x.rulerPtr},m,d),"annotPtr",x.annotPtr),"contents",x.contents));case 24:return I.next=26,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",x.rulerPtr);case 26:M=I.sent,x.factor=M,this.draw(),this.layer.annotationStore.selectedElementName!==this.annotation.name||document.querySelector(".measure-panel").classList.contains("closed")||this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),this.layer.eventBus.dispatch("updateMeasureData",{scale:d,length:x.perimeter}),k=0;case 32:I.next=4;break;case 34:return!f&&this.sendData(_defineProperty$1({},m,d)),I.abrupt("return",k);case 36:case"end":return I.stop()}},y,this)})),function(y,m){return u.apply(this,arguments)})},{key:"sendData",value:function(y){var m=this.annotation;if(m.measure){var d={pagePtr:m.pagePtr,annotPtr:m.annotPtr,rulerPtr:m.rulerPtr,pageIndex:m.pageIndex,contents:m.contents};if(["fontSize","fontName","color","fontStyle"].some(function(E){return y[E]})){d.fontSize=m.fontSize,d.color=m.color;var f={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},x=m.fontName;m.isBold&&m.isItalic?d.fontName=f[x].boldItalic:m.isBold?d.fontName=f[x].bold:m.isItalic?d.fontName=f[x].italic:d.fontName=f[x]?f[x].normal:x,delete y.fontName}y.dashes&&(d.borderStyle=m.borderStyle,d.borderWidth=m.borderWidth),y.borderStyle&&(d.dashes=y.borderStyle==="solid"?[]:m.dashes,d.borderWidth=m.borderWidth);var k=Object.assign({},d,y);this.layer.documentViewer.annotationManager.editMeasurementAnnotation(k)}else{var P={operate:"mod-annot",name:m.name,pageIndex:m.pageIndex,pagePtr:m.pagePtr,annotPtr:m.annotPtr};y.dashes&&(P.borderStyle=m.borderStyle,P.borderWidth=m.borderWidth),y.borderStyle&&(P.dashes=y.borderStyle==="solid"?[]:m.dashes,P.borderWidth=m.borderWidth),y.borderColor&&(P.color=m.color);var S=Object.assign({},P,y);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:S})}}},{key:"getResult",value:function(){for(var y=this.annotation,m=y.vertices,d=y.factor,f=y.scale.translateUnit,x=0,k=0;k<m.length-1;k++){var P=m[k],S=m[k+1];x+=Math.hypot(S.x-P.x,S.y-P.y)*d}x=this.formatValue(x),this.annotation.perimeter=x,this.annotation.contents=x.toFixed(this.decimalPlaces)+f}},{key:"showPopup",value:function(){var y=this.layer.div.getBoundingClientRect(),m=y.left+this.rect.left,d=this.rect.top+y.top,f={left:m,top:d,right:m+this.rect.width,bottom:d+this.rect.height};this.layer.eventBus.dispatch("showMeasurementPopup",{rect:f}),this.isPopupShow=!0}},{key:"hidePopup",value:function(){this.isPopupShow&&(this.isPopupShow=!1,this.layer.eventBus.dispatch("showMeasurementPopup"))}},{key:"handlePopup",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d,f=this;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:m==="delete"&&this.handleDelete(),m==="reply"&&(this.openReply(),(d=document.getElementById("leftPanel"))!=null&&d.classList.contains("closed")&&setTimeout(function(){f.showPopup()},350));case 2:case"end":return x.stop()}},y,this)})),function(y){return o.apply(this,arguments)})},{key:"formatValue",value:function(y){return y%1==0?y:Number(y.toFixed(this.decimalPlaces))}},{key:"getTextWidth",value:function(y){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=document.createElement("canvas").getContext("2d"),f=this.layer.viewport.scale;d.font="".concat(this.annotation.fontSize*f,"px ").concat(this.annotation.fontFamily);var x=d.measureText(y),k=(this.annotation.borderWidth||2)*f,P=1.1*x.width+k;return m>P?P:m}},{key:"handleKeyDown",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"){f.next=2;break}return f.abrupt("return");case 2:(d=m.keyCode||m.which)!==8&&d!==46||this.handleDelete();case 4:case"end":return f.stop()}},y,this)})),function(y){return r.apply(this,arguments)})},{key:"updateRect",value:function(){this.annotation.rect=this.rectCalcByVertices(this.annotation.vertices);var y=this.getActualRect(this.layer.viewport.scale),m=y.start,d=y.end;this.start=m,this.end=d;var f=this.calculate(m,d);this.rect=f}},{key:"draw",value:function(){var y=this.annotation,m=this.layer.viewport.scale,d=(y.borderWidth||2)*m,f=this.getDashString();if(this.svgElement.innerHTML="",!y.measure){var x=this.realVertices.map(function(X){return"".concat(X.x,",").concat(X.y)}).join(" ");return this.polylineEle=createSvg("polyline",{fill:"none",stroke:y.borderColor,"stroke-width":d,"stroke-dasharray":f,points:x}),void this.svgElement.append(this.polylineEle)}this.totalTextEle=null;for(var k=0;k<this.realVertices.length-1;k++){var P=this.realVertices[k],S=this.realVertices[k+1],E={x:(P.x+S.x)/2,y:(P.y+S.y)/2},M=Math.atan2(S.y-P.y,S.x-P.x)/Math.PI*180,T=Math.abs(M)>90?M-180:M,D=S.x-P.x,I=S.y-P.y,N=Math.sqrt(D*D+I*I),O=D/N,F=I/N,U=D/m,Y=I/m,Q=this.formatValue(Math.sqrt(U*U+Y*Y)*y.factor).toFixed(this.decimalPlaces)+y.scale.translateUnit,q=this.getTextWidth(Q,N),ne=createSvg("line",{"data-id":"startLine"+k,stroke:y.borderColor,"stroke-width":d,"stroke-dasharray":f,x1:P.x,y1:P.y,x2:P.x+O*(N/2-q/2),y2:P.y+F*(N/2-q/2)}),J=createSvg("line",{"data-id":"endLine"+k,stroke:y.borderColor,"stroke-width":d,"stroke-dasharray":f,x1:P.x+O*(N/2+q/2),y1:P.y+F*(N/2+q/2),x2:S.x,y2:S.y}),re=createSvg("text",{"data-id":"text"+k,fill:y.color||y.borderColor,"text-anchor":"middle","dominant-baseline":"middle","font-size":y.fontSize*m,x:E.x,y:E.y,transform:"rotate(".concat(T," ").concat(E.x," ").concat(E.y,")")},{pointerEvents:"none"});re.textContent=Q,this.svgElement.append(ne),this.svgElement.append(J),this.svgElement.append(re),k===this.realVertices.length-2&&(this.totalTextEle=createSvg("text",{fill:y.color||y.borderColor,"text-anchor":"middle","dominant-baseline":"middle","font-size":y.fontSize*m,x:E.x,y:E.y+y.fontSize*m,transform:"rotate(".concat(T," ").concat(E.x," ").concat(E.y,")")},{pointerEvents:"none"}),this.totalTextEle.textContent=y.contents,this.svgElement.append(this.totalTextEle))}}},{key:"updateCircle",value:function(y){if(Number.isFinite(y)&&y<this.realVertices.length-1&&y>=0){var m=this.realVertices[y],d=m.x,f=m.y,x=this.outerLine.querySelector('circle[data-id="point'+y+'"]');return x.setAttribute("cx",d),void x.setAttribute("cy",f)}this.outerLineContainer.querySelectorAll("circle").forEach(function(E){return E.remove()});for(var k=0;k<this.realVertices.length;k++){var P=this.realVertices[k],S=createSvg("circle",{"data-id":"point"+k,fill:"#1460F3",stroke:"#FFFFFF","stroke-width":2,cx:P.x,cy:P.y,r:6},{cursor:"default"});this.outerLine.append(S)}}},{key:"addPathPoint",value:function(y,m){var d=this.annotation,f=this.layer.viewport.scale,x=getInitialPoint({x:y,y:m},f);d.vertices.push(x),this.realVertices.push({x:y,y:m});var k=_slicedToArray(this.realVertices.slice(-2),2),P=k[0],S=P.x,E=P.y,M=k[1],T=M.x,D=M.y;if([S,E,T,D].every(Number.isFinite))if(d.measure){S===T&&E===D&&(T+=1,D+=1);var I={x:(S+T)/2,y:(E+D)/2},N=Math.atan2(D-E,T-S)/Math.PI*180,O=Math.abs(N)>90?N-180:N,F=T-S,U=D-E,Y=Math.sqrt(F*F+U*U),Q=F/Y,q=U/Y,ne=F/f,J=U/f,re=this.formatValue(Math.sqrt(ne*ne+J*J)*d.factor).toFixed(this.decimalPlaces)+d.scale.translateUnit,X=this.getTextWidth(re,Y),j=this.getDashString(),Z=createSvg("line",{"data-id":"startLine"+(this.realVertices.length-2),stroke:d.borderColor,"stroke-width":2*f,"stroke-dasharray":j,x1:S,y1:E,x2:S+Q*(Y/2-X/2),y2:E+q*(Y/2-X/2)},{"stroke-linecap":"round"}),W=createSvg("line",{"data-id":"endLine"+(this.realVertices.length-2),stroke:d.borderColor,"stroke-width":2*f,"stroke-dasharray":j,x1:S+Q*(Y/2+X/2),y1:E+q*(Y/2+X/2),x2:T,y2:D},{"stroke-linecap":"round"}),te=createSvg("text",{"data-id":"text"+(this.realVertices.length-2),fill:d.color||d.borderColor,"text-anchor":"middle","dominant-baseline":"middle","font-size":d.fontSize*f,x:I.x,y:I.y,transform:"rotate(".concat(O," ").concat(I.x," ").concat(I.y,")")});te.textContent=re,this.svgElement.append(Z),this.svgElement.append(W),this.svgElement.append(te),this.totalTextEle?(this.totalTextEle.setAttribute("x",I.x),this.totalTextEle.setAttribute("y",I.y+d.fontSize*f),this.totalTextEle.setAttribute("transform","rotate(".concat(O," ").concat(I.x," ").concat(I.y,")")),this.getResult(),this.totalTextEle.textContent=d.contents):this.draw()}else{var le=this.realVertices.map(function(oe){return"".concat(oe.x,",").concat(oe.y)}).join(" ");this.polylineEle.setAttribute("points",le)}}},{key:"setPathPoint",value:function(y,m,d){if(!(y>this.realVertices.length-1||y<0)){var f=this.annotation,x=this.layer.viewport.scale,k=getInitialPoint({x:m,y:d},x);if(f.vertices[y].x=k.x,f.vertices[y].y=k.y,this.realVertices[y].x=m,this.realVertices[y].y=d,f.measure){y===0?this.updateLineElement(y):y===this.realVertices.length-1?this.updateLineElement(y-1):(this.updateLineElement(y-1),this.updateLineElement(y));var P=_slicedToArray(this.realVertices.slice(-2).map(function(Q){return Q!=null?Q:{x:NaN,y:NaN}}),2),S=P[0],E=S.x,M=S.y,T=P[1],D=T.x,I=T.y;if([E,M,D,I].every(Number.isFinite)&&(E!==D||M!==I))if(this.totalTextEle){var N={x:(E+D)/2,y:(M+I)/2},O=Math.atan2(I-M,D-E)/Math.PI*180,F=Math.abs(O)>90?O-180:O;this.totalTextEle.setAttribute("x",N.x),this.totalTextEle.setAttribute("y",N.y+f.fontSize*x),this.totalTextEle.setAttribute("transform","rotate(".concat(F," ").concat(N.x," ").concat(N.y,")")),this.getResult(),this.totalTextEle.textContent=f.contents;var U=0;this.realVertices.length>=3&&(U=y===0?this.calculateAngle(this.realVertices[y],this.realVertices[y+1],this.realVertices[y+2]):y===this.realVertices.length-1?this.calculateAngle(this.realVertices[y-2],this.realVertices[y-1],this.realVertices[y]):this.calculateAngle(this.realVertices[y-1],this.realVertices[y],this.realVertices[y+1])),this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,length:this.annotation.perimeter,angle:U})}else this.draw()}else{var Y=this.realVertices.map(function(Q){return"".concat(Q.x,",").concat(Q.y)}).join(" ");this.polylineEle.setAttribute("points",Y)}}}},{key:"updateLineElement",value:function(y){var m=this.realVertices[y],d=m.x,f=m.y,x=this.realVertices[y+1],k=x.x,P=x.y;if([d,f,k,P].every(Number.isFinite)&&(d!==k||f!==P)){var S=this.svgElement.querySelector('line[data-id="startLine'+y+'"]'),E=this.svgElement.querySelector('line[data-id="endLine'+y+'"]'),M=this.svgElement.querySelector('text[data-id="text'+y+'"]'),T={x:(d+k)/2,y:(f+P)/2},D=Math.atan2(P-f,k-d)/Math.PI*180,I=Math.abs(D)>90?D-180:D,N=k-d,O=P-f,F=Math.sqrt(N*N+O*O),U=N/F,Y=O/F,Q=N/this.layer.viewport.scale,q=O/this.layer.viewport.scale,ne=this.formatValue(Math.sqrt(Q*Q+q*q)*this.annotation.factor).toFixed(this.decimalPlaces)+this.annotation.scale.translateUnit,J=this.getTextWidth(ne,F);S.setAttribute("x1",d),S.setAttribute("y1",f),S.setAttribute("x2",d+U*(F/2-J/2)),S.setAttribute("y2",f+Y*(F/2-J/2)),E.setAttribute("x1",d+U*(F/2+J/2)),E.setAttribute("y1",f+Y*(F/2+J/2)),E.setAttribute("x2",k),E.setAttribute("y2",P),M.setAttribute("x",T.x),M.setAttribute("y",T.y),M.setAttribute("transform","rotate(".concat(I," ").concat(T.x," ").concat(T.y,")")),M.textContent=ne}}},{key:"getDashString",value:function(){var y=this.annotation.dashes,m=Math.ceil(this.ratio*this.layer.viewport.scale),d="";return y.length===1||y.length===2&&y[0]===y[1]?d=Math.ceil(y[0]*m)+"":y.length>2&&(d=y.map(function(f){return Math.ceil(f*m)}).join(", ")),d}},{key:"calculateAngle",value:function(y,m,d){var f={x:m.x-y.x,y:m.y-y.y},x={x:d.x-m.x,y:d.y-m.y},k=(f.x*x.x+f.y*x.y)/(Math.sqrt(Math.pow(f.x,2)+Math.pow(f.y,2))*Math.sqrt(Math.pow(x.x,2)+Math.pow(x.y,2))),P=Math.max(-1,Math.min(1,k)),S=Math.acos(P)*(180/Math.PI);return Math.round(Math.abs(180-S))}}]);var r,o,u,s,w,g,v}(),Circle=function(e){function n(y){var m,d=y.annotation,f=y.layer,x=y.show,k=x!==void 0&&x,P=y.enableReply,S=P===void 0||P;return _classCallCheck(this,n),(m=_callSuper(this,n,[{annotation:d,layer:f}])).show=k,m.enableReply=S,m.hidden=!0,m.initial=!1,m.start=null,m.end=null,m.rect=null,m.svgElement=null,m.ratio=window.devicePixelRatio||1,m.decimalPlaces=0,m.isPopupShow=!1,m.showRadius=m.layer.annotationStore.circle.showRadius,m.showPerimeter=m.layer.annotationStore.circle.showPerimeter,m.showArea=m.layer.annotationStore.circle.showArea,m.selectionOutlinePadding=8,m.selectionOutlinePointWidth=6,m.onClick=m.handleClick.bind(m),m.onMousedown=m.handleMouseDown.bind(m),m.onMouseup=m.handleMouseUp.bind(m),m.onMousemove=m.handleMouseMove.bind(m),m.onDelete=m.handleDelete.bind(m),m.onOpenReply=m.openReply.bind(m),m.handlePropertyPanel=m.handlePropertyPanel.bind(m),m.onHandlePopup=m.handlePopup.bind(m),m.onKeydown=m.handleKeyDown.bind(m),m.render(),m}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var m,d,f,x,k,P,S,E=this;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(m=this.annotation,d=this.getActualRect(this.layer.viewport.scale),f=d.start,x=d.end,this.start=f,this.end=x,this.rect=this.calculate(f,x),k=this.rect,["showPerimeter","showArea","showRadius"].forEach(function(T){m[T]!==void 0&&(E[T]=m[T],delete m[T])}),m.precision&&(m.precision>1&&(m.precision=Math.pow(10,-Math.floor(Math.log10(m.precision)))),this.decimalPlaces=((P=Math.abs(m.precision).toString().split(".")[1])===null||P===void 0?void 0:P.length)||0),m.borderColor||(m.borderColor=m.color||"#FF0000"),m.factor){M.next=14;break}return M.next=13,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",m.rulerPtr);case 13:m.factor=M.sent;case 14:m.fontStyle||(m.fontStyle="regular"),this.getResult(),this.annotationContainer=createElement("div",{top:k.top+"px",left:k.left+"px",width:k.width+"px",height:k.height+"px"},{id:m.name,class:"annotation"}),this.svgElement=createSvg("svg",{viewBox:"0 0 ".concat(k.width," ").concat(k.height)},{pointerEvents:"all",overflow:"visible"}),this.annotationContainer.append(this.svgElement),this.svgElement.addEventListener("mousedown",this.onClick),this.layer.div.append(this.annotationContainer),this.draw(),this.outerLineContainer=createElement("div",{},{class:"outline-container"}),S=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2,this.outerLine=createSvg("svg",{},{position:"absolute",left:"".concat(k.left-S,"px"),top:"".concat(k.top-S,"px"),width:"".concat(k.width+2*S,"px"),height:"".concat(k.height+2*S,"px"),zIndex:1}),this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"stroke-dasharray":"2","fill-opacity":0,width:k.width+this.selectionOutlinePadding,height:k.height+this.selectionOutlinePadding,x:this.selectionOutlinePointWidth/2,y:this.selectionOutlinePointWidth/2}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:0,y:0}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:0,y:k.height+this.selectionOutlinePadding}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:k.width+this.selectionOutlinePadding,y:k.height+this.selectionOutlinePadding}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:k.width+this.selectionOutlinePadding,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.topRightRect),this.outerLineContainer.append(this.outerLine),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 38:case"end":return M.stop()}},y,this)})),function(){return v.apply(this,arguments)})},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(y){if(this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(y==null?void 0:y.target)){this.hidden=!1,this.updateTool(),this.annotation.measure&&(this.layer.eventBus._on("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._on("measurementPopupClicked",this.onHandlePopup)),document.addEventListener("keydown",this.onKeydown);var m=[this.svgElement,this.outerLine,document.querySelector(".measure-panel"),document.querySelector(".measurement-board"),document.querySelector(".measurements-settings"),document.querySelector(".measurement-popup")];this.deletetButton&&m.push(this.deletetButton),this.replyButton&&m.push(this.replyButton);var d=document.getElementById("measurePropertyPanelButton");d&&m.push(d);var f=document.querySelector(".toggle-button");f&&m.push(f),onClickOutside$1(m,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var y,m,d,f;!this.hidden&&this.annotation.measure&&this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",{isOpen:!1}),(f=this.layer.documentViewer)===null||f===void 0||(f=f.pdfViewer)===null||f===void 0||(f=f.measurementTool)===null||f===void 0||f.updateMeasurePanel(),this.hidePopup()),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),document.removeEventListener("keydown",this.onKeydown),(y=this.outerLine)===null||y===void 0||y.removeEventListener("mousedown",this.onMousedown),(m=this.outerLine)===null||m===void 0||m.removeEventListener("touchstart",this.onMousedown),(d=this.outerLineContainer)===null||d===void 0||d.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.annotation.measure&&(this.layer.eventBus._off("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._off("measurementPopupClicked",this.onHandlePopup))}},{key:"getActualRect",value:function(y){var m=this.annotation.rect,d=m.left,f=m.top,x=m.right,k=m.bottom;return{start:getActualPoint({x:d,y:f},y),end:getActualPoint({x,y:k},y)}}},{key:"getInitialPoint",value:function(){var y=this.layer.viewport.scale;return{start:{x:this.start.x/y,y:this.start.y/y},end:{x:this.end.x/y,y:this.end.y/y}}}},{key:"calculate",value:function(y,m){var d=this.rectCalc({start:y,end:m}),f=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:d.top-f,left:d.left-f,width:d.width+2*f,height:d.height+2*f}}},{key:"rectCalc",value:function(y){var m=y.start,d=y.end;return{top:m.y<d.y?m.y:d.y,left:m.x<d.x?m.x:d.x,width:Math.abs(d.x-m.x),height:Math.abs(d.y-m.y)}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove(),document.removeEventListener("keydown",this.onKeydown);else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var y=this.annotation;this.layer.annotationStore.selectedElementName=y.name;var m=_objectSpread2$1({},y);delete m.annotPtr,delete m.pagePtr,delete m.operate,delete m.targetPage,delete m.arrow,this.layer.eventBus.dispatch("annotationSelected",m)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown),this.annotation.measure&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,radius:this.annotation.radius,perimeter:this.annotation.perimeter,area:this.annotation.area,showRadius:this.showRadius,showPerimeter:this.showPerimeter,showArea:this.showArea}),this.showPopup()),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleMouseDown",value:function(y){if(y.button===0||y.type!=="mousedown"){this.layer.tool&&y.stopPropagation();var m=y.target.getAttribute("data-id"),d=this.layer.documentViewer.getScrollViewElement();this.scrollTop=d.scrollTop,this.scrollLeft=d.scrollLeft;var f=getClickPoint(y),x=f.pageX,k=f.pageY;this.startState={operator:m,clickX:x,clickY:k},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(y){if(y.button===0||y.type!=="mousemove"){this.hidePopup(),y.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var m=getClickPoint(y),d=m.pageX,f=m.pageY,x=this.layer.documentViewer.getScrollViewElement(),k=x.scrollTop;d=d+x.scrollLeft-this.scrollLeft,f=f+k-this.scrollTop;var P=this.start,S=this.end,E=this.startState,M=this.layer.viewport,T=M.width,D=M.height,I=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2+this.annotation.borderWidth*this.layer.viewport.scale;if(E.operator==="nw-resize"){var N=d-(E.clickX-this.start.x),O=f-(E.clickY-this.start.y);N=Math.min(S.x-5,N),N=Math.max(I,N),O=Math.min(S.y-5,O),O=Math.max(I,O),this.update({start:{x:N,y:O},end:S})}else if(E.operator==="sw-resize"){var F=d-(E.clickX-this.start.x),U=f-(E.clickY-this.end.y);F=Math.min(S.x-5,F),F=Math.max(I,F),U=Math.min(D-I,U),U=Math.max(P.y+5,U),this.update({start:{x:F,y:P.y},end:{x:S.x,y:U}})}else if(E.operator==="se-resize"){var Y=d-(E.clickX-this.end.x),Q=f-(E.clickY-this.end.y);Y=Math.min(T-I,Y),Y=Math.max(P.x+5,Y),Q=Math.min(D-I,Q),Q=Math.max(P.y+5,Q),this.update({start:P,end:{x:Y,y:Q}})}else if(E.operator==="ne-resize"){var q=d-(E.clickX-this.end.x),ne=f-(E.clickY-this.start.y);q=Math.min(T-I,q),q=Math.max(P.x+5,q),ne=Math.min(S.y-I,ne),ne=Math.max(I,ne),this.update({start:{x:P.x,y:ne},end:{x:q,y:S.y}})}else if(E.operator==="move"){var J,re,X,j,Z=this.layer.documentViewer,W=this.getMouseLocation(y),te=Z.getSelectedPage(W,W);if(te.first&&te.first!==this.layer.page+1){var le=Z.windowToPage(W,te.first,!1),oe=Math.abs(P.x-S.x),Ee=Math.abs(P.y-S.y);if(Z.pdfViewer.spreadMode===0&&Z.pdfViewer.scrollMode===0)J=d-(E.clickX-this.start.x),re=te.first>this.layer.page+1?le.y:le.y-Ee,X=d-(E.clickX-this.end.x),j=te.first>this.layer.page+1?le.y+Ee:le.y;else if(Z.pdfViewer.spreadMode===0&&Z.pdfViewer.scrollMode===1)J=te.first>this.layer.page+1?le.x:le.x-oe,re=f-(E.clickY-this.start.y),X=te.first>this.layer.page+1?le.x+oe:le.x,j=f-(E.clickY-this.end.y);else if(Z.pdfViewer.spreadMode===1&&Z.pdfViewer.scrollMode===0){var Ae=Math.min(te.first,this.layer.page+1),ve=Math.max(te.first,this.layer.page+1);if(ve-Ae>2||Ae+1===ve&&Ae%2==0)return;Ae+1===ve?(J=te.first>this.layer.page+1?le.x:le.x-oe,re=f-(E.clickY-this.start.y),X=te.first>this.layer.page+1?le.x+oe:le.x,j=f-(E.clickY-this.end.y)):Ae+2===ve&&(J=d-(E.clickX-this.start.x),re=te.first>this.layer.page+1?le.y:le.y-Ee,X=d-(E.clickX-this.end.x),j=te.first>this.layer.page+1?le.y+Ee:le.y)}else if(Z.pdfViewer.spreadMode===2&&Z.pdfViewer.scrollMode===0){var ke=Math.min(te.first,this.layer.page+1),Ce=Math.max(te.first,this.layer.page+1);if(Ce-ke>2||ke+1===Ce&&(ke!==1||Ce!==2)&&Ce%2==0||ke===1&&Ce===3)return;ke+2===Ce||ke===1&&Ce===2?(J=d-(E.clickX-this.start.x),re=te.first>this.layer.page+1?le.y:le.y-Ee,X=d-(E.clickX-this.end.x),j=te.first>this.layer.page+1?le.y+Ee:le.y):ke+1===Ce&&(J=te.first>this.layer.page+1?le.x:le.x-oe,re=f-(E.clickY-this.start.y),X=te.first>this.layer.page+1?le.x+oe:le.x,j=f-(E.clickY-this.end.y))}var Pe=Z.pdfViewer._pages[te.first-1].compdfAnnotationLayer;if(!Pe)return;this.layer=Pe,this.annotationContainer.remove(),this.outerLineContainer.remove();var Me=this.layer.div;Me.append(this.annotationContainer),Me.append(this.outerLineContainer)}else{re=f-(E.clickY-this.start.y),J=d-(E.clickX-this.start.x),X=d-(E.clickX-this.end.x),j=f-(E.clickY-this.end.y);var Le=Z.pageToWindow({x:J,y:re},this.layer.page+1,!1),Te=Z.pageToWindow({x:X,y:j},this.layer.page+1,!1),ye=0,_e=0;f>E.clickY?_e=(_e=x.offsetHeight-(Te.y-x.scrollTop-x.offsetTop))<100?5:0:f<E.clickY&&(_e=(_e=Le.y-x.scrollTop-x.offsetTop)<100?-5:0),d>E.clickX?ye=(ye=x.offsetWidth-(Te.x-x.scrollLeft-x.offsetLeft))<100?5:0:d<E.clickX&&(ye=(ye=Le.x-x.scrollLeft-x.offsetLeft)<100?-5:0),(ye||_e)&&(x.scrollTop+=_e,x.scrollLeft+=ye);var we={width:Math.abs(P.x-S.x),height:Math.abs(P.y-S.y)};J<X?(J=Math.max(I,J),J=Math.min(T-we.width-I,J),X=Math.max(we.width+I,X),X=Math.min(T-I,X)):(X=Math.max(I,X),X=Math.min(T-we.width-I,X),J=Math.max(we.width+I,J),J=Math.min(T-I,J)),re<j?(re=Math.max(I,re),re=Math.min(D-we.height-I,re),j=Math.max(we.height+I,j),j=Math.min(D-I,j)):(j=Math.max(I,j),j=Math.min(D-we.height-I,j),re=Math.max(we.height+I,re),re=Math.min(D-I,re))}this.update({start:{x:J,y:re},end:{x:X,y:j}})}E.clickX=d,E.clickY=f}}},{key:"handleDelete",value:function(y){this.layer.tool&&y&&y.stopPropagation(),this.delete();var m={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(m.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",m)}},{key:"delete",value:function(){var y;this.handleOutside(),(y=this.annotationContainer)===null||y===void 0||y.remove(),this.annotation.isDelete=!0,this.annotation.name&&this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d,f,x,k,P;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(m.button===0||m.type!=="mouseup"){S.next=2;break}return S.abrupt("return");case 2:if(this.layer.tool&&m.stopPropagation(),m.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0,(d=this.annotation).measure&&this.layer.annotationStore.selectedElementName===d.name&&this.showPopup(),d.pageIndex===this.layer.page){S.next=32;break}return f={type:"delete",annotation:{operate:"del-annot",name:d.name,pageIndex:d.pageIndex,annotPtr:d.annotPtr}},this.layer.eventBus.dispatch("annotationChanged",f),delete(x=Object.assign({},d)).annotPtr,delete x.pagePtr,delete x.name,x.operate="add-annot",x.pageIndex=this.layer.page,S.next=24,this.layer.documentViewer.annotationManager.createMeasurementAnnotation(x);case 24:return k=S.sent,this.annotation=k[0],S.next=28,this.layer.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 28:this.annotationContainer.remove(),this.outerLineContainer.remove(),S.next=35;break;case 32:return P={operate:"mod-annot",name:d.name,pageIndex:this.layer.page,pagePtr:d.pagePtr,annotPtr:d.annotPtr,rect:d.rect},S.next=35,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(P);case 35:case"end":return S.stop()}},y,this)})),function(y){return g.apply(this,arguments)})},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"update",value:function(y){var m=y.start,d=y.end,f=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.start=m,this.end=d;var x=this.getInitialPoint();this.annotation.rect={left:x.start.x,top:x.start.y,right:x.end.x,bottom:x.end.y},this.rect=this.calculate(m,d);var k=this.rect,P=(this.annotation.borderWidth||2)*this.layer.viewport.scale;this.annotationContainer.style.top=k.top+"px",this.annotationContainer.style.left=k.left+"px",this.annotationContainer.style.width=k.width+"px",this.annotationContainer.style.height=k.height+"px",this.svgElement.setAttribute("width",k.width),this.svgElement.setAttribute("height",k.height),this.svgElement.setAttribute("viewBox","0 0 ".concat(k.width," ").concat(k.height)),this.shapeEle.setAttribute("cx",k.width/2),this.shapeEle.setAttribute("cy",k.height/2),this.shapeEle.setAttribute("rx",(k.width-P)/2),this.shapeEle.setAttribute("ry",(k.height-P)/2);var S=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2;this.outerLine.setAttribute("width",k.width+2*S),this.outerLine.setAttribute("height",k.height+2*S),this.outerLine.setAttribute("viewBox","0 0 ".concat(k.width+2*S," ").concat(k.height+2*S)),this.outerLine.style.left="".concat(k.left-S,"px"),this.outerLine.style.top="".concat(k.top-S,"px"),this.outerLine.style.width="".concat(k.width+2*S,"px"),this.outerLine.style.height="".concat(k.height+2*S,"px"),this.deletetButton&&(this.deletetButton.style.left=k.left+k.width+MARGIN_DISTANCE-30+"px",this.deletetButton.style.top=k.top-MARGIN_DISTANCE-30+"px"),this.replyButton&&(this.replyButton.style.left=k.left+k.width+MARGIN_DISTANCE-65+"px",this.replyButton.style.top=k.top-MARGIN_DISTANCE-30+"px"),this.moveRect.setAttribute("width",k.width+this.selectionOutlinePadding),this.moveRect.setAttribute("height",k.height+this.selectionOutlinePadding),this.bottomLeftRect.setAttribute("y",k.height+this.selectionOutlinePadding),this.bottomRightRect.setAttribute("x",k.width+this.selectionOutlinePadding),this.bottomRightRect.setAttribute("y",k.height+this.selectionOutlinePadding),this.topRightRect.setAttribute("x",k.width+this.selectionOutlinePadding);var E={x:(k.width-P)/2,y:(k.height-P)/2};this.getResult(),this.radiusTspan&&(this.radiusTspan.setAttribute("x",E.x),this.radiusTspan.setAttribute("y",E.y),this.radiusTspan.textContent=this.annotation.radius.toFixed(this.decimalPlaces)+this.annotation.scale.translateUnit),this.permiterTspan&&(this.permiterTspan.setAttribute("x",E.x),this.permiterTspan.setAttribute("y",E.y),this.permiterTspan.textContent=this.annotation.perimeter.toFixed(this.decimalPlaces)+this.annotation.scale.translateUnit),this.areaTspan&&(this.areaTspan.setAttribute("x",E.x),this.areaTspan.setAttribute("y",E.y),this.areaTspan.textContent=this.annotation.area.toFixed(this.decimalPlaces)+this.annotation.scale.translateUnit+"\xB2"),this.annotation.measure&&f&&this.updateMeasure()}},{key:"updateMeasure",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var m;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!this.startState||this.startState.operator==="move"){d.next=5;break}return m={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:this.annotation.rect},this.annotation.contents&&(m.contents=this.annotation.contents,m.labelPosition=this.annotation.labelPosition),d.next=5,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(m);case 5:if(!this.startState||this.startState.operator!=="move"){d.next=7;break}return d.abrupt("return");case 7:this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,radius:this.annotation.radius,perimeter:this.annotation.perimeter,area:this.annotation.area});case 8:case"end":return d.stop()}},y,this)})),function(){return w.apply(this,arguments)})},{key:"handlePropertyPanel",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d,f,x,k,P=this;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(d=this.annotation,this.layer.annotationStore.selectedElementName===d.name){S.next=3;break}return S.abrupt("return");case 3:f=0,S.t0=_regeneratorRuntime().keys(m);case 5:if((S.t1=S.t0()).done){S.next=13;break}return x=S.t1.value,S.t2=f,S.next=10,this.setCustomData(x,m[x],!0);case 10:f=S.t2+=S.sent,S.next=5;break;case 13:if(f>0&&this.sendData(m),f!==0||!["showRadius","showPerimeter","showArea"].some(function(E){return E in m})){S.next=23;break}return this.getResult(),k=[],this.radiusTspan&&k.push(this.radiusTspan),this.permiterTspan&&k.push(this.permiterTspan),this.areaTspan&&k.push(this.areaTspan),k.forEach(function(E,M){k.length===3?E.setAttribute("dy",M-1+"em"):E.setAttribute("dy",M+"em"),P.textEle.appendChild(E)}),S.next=23,this.layer.documentViewer.annotationManager.editMeasurementAnnotation({annotPtr:d.annotPtr,contents:d.contents});case 23:["scale","precision","showRadius","showPerimeter","showArea"].some(function(E){return E in m})&&this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,radius:this.annotation.radius,perimeter:this.annotation.perimeter,area:this.annotation.area,showRadius:this.showRadius,showPerimeter:this.showPerimeter,showArea:this.showArea});case 24:case"end":return S.stop()}},y,this)})),function(y){return s.apply(this,arguments)})},{key:"setCustomData",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function y(m,d){var f,x,k,P,S,E,M,T,D,I,N,O,F,U,Y,Q,q,ne,J,re=arguments;return _regeneratorRuntime().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(f=re.length>2&&re[2]!==void 0&&re[2],x=this.annotation,k=0,P=(x.borderWidth||2)*this.layer.viewport.scale,S={x:(this.rect.width-P)/2,y:(this.rect.height-P)/2},m!=="showRadius"){X.next=9;break}return this.showRadius=d,!d&&this.radiusTspan?(this.radiusTspan.remove(),this.radiusTspan=null):d&&(this.radiusTspan||(this.radiusTspan=createSvg("tspan",{x:S.x,y:S.y}),this.textEle.appendChild(this.radiusTspan)),this.radiusTspan.textContent=x.radius.toFixed(this.decimalPlaces)+x.scale.translateUnit),X.abrupt("return",0);case 9:if(m!=="showPerimeter"){X.next=13;break}return this.showPerimeter=d,!d&&this.permiterTspan?(this.permiterTspan.remove(),this.permiterTspan=null):d&&(this.permiterTspan||(this.permiterTspan=createSvg("tspan",{x:S.x,y:S.y}),this.textEle.appendChild(this.permiterTspan)),this.permiterTspan.textContent=x.perimeter.toFixed(this.decimalPlaces)+x.scale.translateUnit),X.abrupt("return",0);case 13:if(m!=="showArea"){X.next=17;break}return this.showArea=d,!d&&this.areaTspan?(this.areaTspan.remove(),this.areaTspan=null):d&&(this.areaTspan||(this.areaTspan=createSvg("tspan",{x:S.x,y:S.y}),this.textEle.appendChild(this.areaTspan)),this.areaTspan.textContent=x.area.toFixed(this.decimalPlaces)+x.scale.translateUnit+"\xB2"),X.abrupt("return",0);case 17:X.t0=_regeneratorRuntime().keys(x);case 18:if((X.t1=X.t0()).done){X.next=54;break}if((E=X.t1.value)!==m||this.annotation[E]===d){X.next=52;break}if(x[E]=d,k=1,m==="fillColor"&&this.shapeEle.setAttribute("fill",d||"none"),m==="fillTransparency"&&this.shapeEle.setAttribute("fill-opacity",d),m==="borderColor"&&this.shapeEle.setAttribute("stroke",d),m==="opacity"&&(this.shapeEle.setAttribute("stroke-opacity",d),this.textEle.setAttribute("fill-opacity",d)),m==="borderWidth"&&(this.shapeEle.setAttribute("stroke-width",d*this.layer.viewport.scale),this.update({start:this.start,end:this.end},!1),this.showPopup()),m==="borderStyle"&&(d==="solid"&&this.shapeEle.setAttribute("stroke-dasharray",""),d==="dashed"&&this.shapeEle.setAttribute("stroke-dasharray",this.getDashString())),m==="dashes"&&this.shapeEle.setAttribute("stroke-dasharray",this.getDashString()),m==="color"&&this.textEle.setAttribute("fill",d),m==="fontSize"&&this.textEle.setAttribute("font-size",d*this.layer.viewport.scale),m==="fontName"&&(this.textEle.style.fontFamily=d),m==="fontStyle"&&((M=d)==="boldItalic"?(this.textEle.style.fontStyle="italic",this.textEle.style.fontWeight="bold",x.isBold=!0,x.isItalic=!0):M==="bold"?(this.textEle.style.fontStyle="normal",this.textEle.style.fontWeight="bold",x.isBold=!0,x.isItalic=!1):M==="italic"?(this.textEle.style.fontStyle="italic",this.textEle.style.fontWeight="normal",x.isBold=!1,x.isItalic=!0):(x.isItalic=!1,x.isBold=!1,this.textEle.style.fontStyle="normal",this.textEle.style.fontWeight="normal")),m==="contents"&&(this.radiusTspan&&(this.radiusTspan.remove(),this.radiusTspan=null),this.areaTspan&&(this.areaTspan.remove(),this.areaTspan=null),this.permiterTspan||(this.permiterTspan=createSvg("tspan",{x:S.x,y:S.y,dy:"0em"}),this.textEle.appendChild(this.permiterTspan)),this.permiterTspan.textContent=d),m!=="scale"&&m!=="precision"){X.next=51;break}return m==="precision"&&(this.decimalPlaces=((T=Math.abs(x.precision).toString().split(".")[1])===null||T===void 0?void 0:T.length)||0),X.next=39,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(_defineProperty$1({rulerPtr:x.rulerPtr},m,d));case 39:return X.next=41,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",x.rulerPtr);case 41:return D=X.sent,x.factor=D,this.getResult(),this.radiusTspan&&(this.radiusTspan.textContent=x.radius.toFixed(this.decimalPlaces)+x.scale.translateUnit),this.permiterTspan&&(this.permiterTspan.textContent=x.perimeter.toFixed(this.decimalPlaces)+x.scale.translateUnit),this.areaTspan&&(this.areaTspan.textContent=x.area.toFixed(this.decimalPlaces)+x.scale.translateUnit+"\xB2"),this.layer.annotationStore.selectedElementName!==this.annotation.name||document.querySelector(".measure-panel").classList.contains("closed")||this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),X.next=50,this.layer.documentViewer.annotationManager.editMeasurementAnnotation({annotPtr:x.annotPtr,contents:x.contents});case 50:k=0;case 51:m==="radius"&&(I=this.rect,N=I.left,O=I.top,F=this.layer.viewport,U=F.width,Y=F.height,Q=F.scale,q=Math.min(U-N,Y-O)/2,ne=Math.max(0,Math.min(d/x.factor*Q,q)),J={x:N+2*ne,y:O+2*ne},this.startState={operator:"end"},this.update({start:this.start,end:J}),this.showPopup(),k=0);case 52:X.next=18;break;case 54:return!f&&this.sendData(_defineProperty$1({},m,d)),X.abrupt("return",k);case 56:case"end":return X.stop()}},y,this)})),function(y,m){return u.apply(this,arguments)})},{key:"sendData",value:function(y){var m=this.annotation,d={pagePtr:m.pagePtr,annotPtr:m.annotPtr,rulerPtr:m.rulerPtr,pageIndex:m.pageIndex,contents:m.contents};if(["fontSize","fontName","color","fontStyle"].some(function(P){return y[P]})){d.fontSize=m.fontSize,d.color=m.color;var f={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},x=m.fontName;m.isBold&&m.isItalic?d.fontName=f[x].boldItalic:m.isBold?d.fontName=f[x].bold:m.isItalic?d.fontName=f[x].italic:d.fontName=f[x]?f[x].normal:x,delete y.fontName}y.dashes&&(d.borderStyle=m.borderStyle,d.borderWidth=m.borderWidth),y.borderStyle&&(d.dashes=y.borderStyle==="solid"?[]:m.dashes,d.borderWidth=m.borderWidth);var k=Object.assign({},d,y);this.layer.documentViewer.annotationManager.editMeasurementAnnotation(k)}},{key:"getResult",value:function(){var y=this.annotation,m=y.rect,d=y.factor,f=y.scale.translateUnit,x=Math.abs(m.right-m.left),k=Math.abs(m.bottom-m.top),P=this.formatValue(Math.max(x,k)/2*d),S=this.formatValue(Math.min(x,k)/2*d),E=Math.max(P,S),M=0,T=0;P===S?(M=this.formatValue(Math.PI*Math.pow(E,2)),T=this.formatValue(2*Math.PI*E)):(M=this.formatValue(Math.PI*P*S),T=this.formatValue(Math.PI*(3*(P+S)-Math.sqrt((3*P+S)*(P+3*S))))),this.annotation.radius=E,this.annotation.area=M,this.annotation.perimeter=T;var D=[];this.showRadius&&D.push(this.annotation.radius.toFixed(this.decimalPlaces)+f),this.showPerimeter&&D.push(this.annotation.perimeter.toFixed(this.decimalPlaces)+f),this.showArea&&D.push(this.annotation.area.toFixed(this.decimalPlaces)+f+"\xB2"),this.annotation.contents=D.join(`
`)}},{key:"showPopup",value:function(){var y=this.layer.div.getBoundingClientRect(),m=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2,d=y.left+this.rect.left-m,f=this.rect.top+y.top-m,x={left:d,top:f,right:d+this.rect.width+2*m,bottom:f+this.rect.height+2*m};this.layer.eventBus.dispatch("showMeasurementPopup",{rect:x}),this.isPopupShow=!0}},{key:"hidePopup",value:function(){this.isPopupShow&&(this.isPopupShow=!1,this.layer.eventBus.dispatch("showMeasurementPopup"))}},{key:"handlePopup",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d,f=this;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:m==="delete"&&this.handleDelete(),m==="reply"&&(this.openReply(),(d=document.getElementById("leftPanel"))!=null&&d.classList.contains("closed")&&setTimeout(function(){f.showPopup()},350));case 2:case"end":return x.stop()}},y,this)})),function(y){return o.apply(this,arguments)})},{key:"formatValue",value:function(y){return y%1==0?y:Number(y.toFixed(this.decimalPlaces))}},{key:"handleKeyDown",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"){f.next=2;break}return f.abrupt("return");case 2:(d=m.keyCode||m.which)!==8&&d!==46||this.handleDelete();case 4:case"end":return f.stop()}},y,this)})),function(y){return r.apply(this,arguments)})},{key:"draw",value:function(){var y=this,m=this.annotation,d=this.rect,f=this.layer.viewport.scale,x=(m.borderWidth||2)*f,k=this.getDashString();if(this.svgElement.innerHTML="",this.shapeEle=createSvg("ellipse",{cx:d.width/2,cy:d.height/2,rx:(d.width-x)/2,ry:(d.height-x)/2,stroke:m.borderColor,"stroke-dasharray":k,"stroke-width":x,"stroke-opacity":m.opacity||1,fill:m.fillColor?m.fillColor:"none","fill-opacity":m.fillTransparency||1}),this.svgElement.append(this.shapeEle),m.measure){var P={x:(d.width-x)/2,y:(d.height-x)/2};this.textEle=createSvg("text",{fill:m.color||m.borderColor,"fill-opacity":m.opacity||1,"text-anchor":"middle","dominant-baseline":"middle","font-size":m.fontSize*f+"px"}),this.svgElement.append(this.textEle);var S=[];this.showRadius&&(this.radiusTspan=createSvg("tspan",{x:P.x,y:P.y}),this.radiusTspan.textContent=m.radius.toFixed(this.decimalPlaces)+m.scale.translateUnit,S.push(this.radiusTspan)),this.showPerimeter&&(this.permiterTspan=createSvg("tspan",{x:P.x,y:P.y}),this.permiterTspan.textContent=m.perimeter.toFixed(this.decimalPlaces)+m.scale.translateUnit,S.push(this.permiterTspan)),this.showArea&&(this.areaTspan=createSvg("tspan",{x:P.x,y:P.y}),this.areaTspan.textContent=m.area.toFixed(this.decimalPlaces)+m.scale.translateUnit+"\xB2",S.push(this.areaTspan)),S.forEach(function(E,M){S.length===3?E.setAttribute("dy",M-1+"em"):E.setAttribute("dy",M+"em"),y.textEle.appendChild(E)})}}},{key:"getDashString",value:function(){var y=this.annotation.dashes,m=Math.ceil(this.ratio*this.layer.viewport.scale),d="";return y.length===1||y.length===2&&y[0]===y[1]?d=Math.ceil(y[0]*m)+"":y.length>2&&(d=y.map(function(f){return Math.ceil(f*m)}).join(", ")),d}}]);var r,o,u,s,w,g,v}(),Rectangle=function(e){function n(m){var d,f=m.annotation,x=m.layer,k=m.show,P=k!==void 0&&k,S=m.enableReply,E=S===void 0||S;return _classCallCheck(this,n),(d=_callSuper(this,n,[{annotation:f,layer:x}])).enableReply=E,d.hidden=!0,d.initial=!1,d.start=null,d.end=null,d.newStart=null,d.newEnd=null,d.svgElement=null,d.startCircle=null,d.endCircle=null,d.show=P,d.ratio=window.devicePixelRatio||1,d.decimalPlaces=0,d.showPerimeter=d.layer.annotationStore.rectangle.showPerimeter,d.showArea=d.layer.annotationStore.rectangle.showArea,d.isPopupShow=!1,d.selectionOutlinePadding=8,d.selectionOutlinePointWidth=6,d.onMousedown=d.handleMouseDown.bind(d),d.onMouseup=d.handleMouseUp.bind(d),d.onMousemove=d.handleMouseMove.bind(d),d.onDelete=d.handleDelete.bind(d),d.onOpenReply=d.openReply.bind(d),d.handlePropertyPanel=d.handlePropertyPanel.bind(d),d.onHandlePopup=d.handlePopup.bind(d),d.onKeydown=d.handleKeyDown.bind(d),d.render(),d}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function m(){var d,f,x,k,P,S,E,M,T,D,I=this;return _regeneratorRuntime().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:d=this.annotation,f=this.layer.viewport.scale,this.updateRect(),x=this.rect,this.realVertices=this.annotation.vertices.map(function(O){return getActualPoint(O,f)}),k=(d.borderWidth||2)*f,d.showPerimeter!==void 0&&(this.showPerimeter=d.showPerimeter,delete d.showPerimeter),d.showArea!==void 0&&(this.showArea=d.showArea,delete d.showArea),d.fillColor||(d.fillColor=""),d.borderStyle||(d.borderStyle="solid"),!d.contents&&d.measure&&this.getResult(),d.precision&&(d.precision>1&&(d.precision=Math.pow(10,-Math.floor(Math.log10(d.precision)))),this.decimalPlaces=((P=Math.abs(d.precision).toString().split(".")[1])===null||P===void 0?void 0:P.length)||0,d.area=this.formatValue(d.area),d.perimeter=this.formatValue(d.perimeter)),d.fontStyle||(d.fontStyle="regular"),d.borderColor||(d.borderColor=d.color||"#FF0000"),d.width&&d.length||(S=(d.rect.right-d.rect.left)*d.factor,E=(d.rect.bottom-d.rect.top)*d.factor,d.length=this.formatValue(S),d.width=this.formatValue(E)),this.annotationContainer=createElement("div",{top:x.top+"px",left:x.left+"px",width:x.width+"px",height:x.height+"px"},{id:d.name,class:"annotation"}),this.svgElement=createSvg("svg",{viewBox:"0 0 ".concat(x.width," ").concat(x.height)},{pointerEvents:"all",overflow:"visible"}),M=this.getDashString(),this.shapeEle=createSvg("rect",{x:k/2,y:k/2,width:"".concat(Math.abs(x.width-k),"px"),height:"".concat(Math.abs(x.height-k),"px"),stroke:d.borderColor,"stroke-width":k,"stroke-dasharray":M,"stroke-opacity":d.opacity||1,fill:d.fillColor?d.fillColor:"none","fill-opacity":d.fillTransparency||1},{"stroke-linecap":"butt"}),this.svgElement.append(this.shapeEle),this.annotationContainer.append(this.svgElement),this.layer.div.append(this.annotationContainer),this.svgElement.addEventListener("mousedown",this.handleClick.bind(this)),d.measure&&(this.textEle=createSvg("text",{fill:d.color||d.borderColor,"fill-opacity":d.opacity||1,"text-anchor":"middle","dominant-baseline":"middle","font-size":d.fontSize*f+"px"}),this.svgElement.append(this.textEle),T=[],this.showPerimeter&&(this.permiterTspan=createSvg("tspan",{x:x.width/2,y:x.height/2}),this.permiterTspan.textContent=d.perimeter.toFixed(this.decimalPlaces)+d.scale.translateUnit,T.push(this.permiterTspan)),this.showArea&&(this.areaTspan=createSvg("tspan",{x:x.width/2,y:x.height/2}),this.areaTspan.textContent=d.area.toFixed(this.decimalPlaces)+d.scale.translateUnit+"\xB2",T.push(this.areaTspan)),T.forEach(function(O,F){O.setAttribute("dy",F+"em"),I.textEle.appendChild(O)})),this.outerLineContainer=createElement("div",{},{class:"outline-container"}),D=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2,this.outerLine=createSvg("svg",{},{position:"absolute",left:"".concat(x.left-D,"px"),top:"".concat(x.top-D,"px"),width:"".concat(x.width+2*D,"px"),height:"".concat(x.height+2*D,"px"),zIndex:1}),this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":1,"stroke-dasharray":"2","fill-opacity":0,width:x.width+this.selectionOutlinePadding,height:x.height+this.selectionOutlinePadding,x:this.selectionOutlinePointWidth/2,y:this.selectionOutlinePointWidth/2}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:0,y:0}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:0,y:x.height+this.selectionOutlinePadding}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:x.width+this.selectionOutlinePadding,y:x.height+this.selectionOutlinePadding}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.selectionOutlinePointWidth,height:this.selectionOutlinePointWidth,x:x.width+this.selectionOutlinePadding,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.topRightRect),this.outerLineContainer.append(this.outerLine),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 40:case"end":return N.stop()}},m,this)})),function(){return y.apply(this,arguments)})},{key:"getActualRect",value:function(m){var d=this.annotation.rect,f=d.left,x=d.top,k=d.right,P=d.bottom;return{start:getActualPoint({x:f,y:x},m),end:getActualPoint({x:k,y:P},m)}}},{key:"rectCalc",value:function(m){var d=m.start,f=m.end;return{top:d.y<f.y?d.y:f.y,left:d.x<f.x?d.x:f.x,width:Math.abs(f.x-d.x),height:Math.abs(f.y-d.y)}}},{key:"calculate",value:function(m,d){var f=this.rectCalc({start:m,end:d}),x=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:f.top-x,left:f.left-x,width:f.width+2*x,height:f.height+2*x}}},{key:"getInitialPoint",value:function(){var m=this.layer.viewport.scale;return{start:{x:this.start.x/m,y:this.start.y/m},end:{x:this.end.x/m,y:this.end.y/m}}}},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove();else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var m=this.annotation;this.layer.annotationStore.selectedElementName=m.name;var d=_objectSpread2$1({},m);delete d.annotPtr,delete d.pagePtr,delete d.operate,delete d.targetPage,this.layer.eventBus.dispatch("annotationSelected",d)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),this.annotation.measure&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,perimeter:this.annotation.perimeter,area:this.annotation.area,width:this.annotation.width,length:this.annotation.length,showPerimeter:this.showPerimeter,showArea:this.showArea})),this.showPopup(),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleClick",value:function(m){if(this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(m==null?void 0:m.target)){this.hidden=!1,this.updateTool(),this.annotation.measure&&(this.layer.eventBus._on("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._on("measurementPopupClicked",this.onHandlePopup)),document.addEventListener("keydown",this.onKeydown);var d=[this.svgElement,this.outerLine,document.querySelector(".measure-panel"),document.querySelector(".measurement-board"),document.querySelector(".measurements-settings"),document.querySelector(".measurement-popup")],f=document.getElementById("measurePropertyPanelButton");f&&d.push(f);var x=document.querySelector(".toggle-button");x&&d.push(x),onClickOutside$1(d,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var m,d,f,x;!this.hidden&&this.annotation.measure&&this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",{isOpen:!1}),(x=this.layer.documentViewer)===null||x===void 0||(x=x.pdfViewer)===null||x===void 0||(x=x.measurementTool)===null||x===void 0||x.updateMeasurePanel(),this.hidePopup()),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),document.removeEventListener("keydown",this.onKeydown),(m=this.outerLine)===null||m===void 0||m.removeEventListener("mousedown",this.onMousedown),(d=this.outerLine)===null||d===void 0||d.removeEventListener("touchstart",this.onMousedown),(f=this.outerLineContainer)===null||f===void 0||f.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.annotation.measure&&(this.layer.eventBus._off("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._off("measurementPopupClicked",this.onHandlePopup))}},{key:"handleMouseDown",value:function(m){if(m.button===0||m.type!=="mousedown"){this.layer.tool&&m.stopPropagation();var d=m.target.getAttribute("data-id"),f=this.layer.documentViewer.getScrollViewElement();this.scrollTop=f.scrollTop,this.scrollLeft=f.scrollLeft;var x=getClickPoint(m),k=x.pageX,P=x.pageY;this.startState={operator:d,clickX:k,clickY:P},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(m){if(m.button===0||m.type!=="mousemove"){this.hidePopup(),m.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var d=getClickPoint(m),f=d.pageX,x=d.pageY,k=this.layer.documentViewer.getScrollViewElement(),P=k.scrollTop;f=f+k.scrollLeft-this.scrollLeft,x=x+P-this.scrollTop;var S=this.start,E=this.end,M=this.startState,T=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2+this.annotation.borderWidth*this.layer.viewport.scale,D=this.layer.viewport,I=D.width,N=D.height;if(M.operator==="nw-resize"){var O=f-(M.clickX-this.start.x),F=x-(M.clickY-this.start.y);O=Math.min(E.x-5,O),O=Math.max(T,O),F=Math.min(E.y-5,F),F=Math.max(T,F),this.update({start:{x:O,y:F},end:E})}else if(M.operator==="sw-resize"){var U=f-(M.clickX-this.start.x),Y=x-(M.clickY-this.end.y);U=Math.min(E.x-5,U),U=Math.max(T,U),Y=Math.min(N-T,Y),Y=Math.max(S.y+5,Y),this.update({start:{x:U,y:S.y},end:{x:E.x,y:Y}})}else if(M.operator==="se-resize"){var Q=f-(M.clickX-this.end.x),q=x-(M.clickY-this.end.y);Q=Math.min(I-T,Q),Q=Math.max(S.x+5,Q),q=Math.min(N-T,q),q=Math.max(S.y+5,q),this.update({start:S,end:{x:Q,y:q}})}else if(M.operator==="ne-resize"){var ne=f-(M.clickX-this.end.x),J=x-(M.clickY-this.start.y);ne=Math.min(I-T,ne),ne=Math.max(S.x+5,ne),J=Math.min(E.y,J),J=Math.max(T,J),this.update({start:{x:S.x,y:J},end:{x:ne,y:E.y}})}else if(M.operator==="move"){var re,X,j,Z,W=this.layer.documentViewer,te=this.getMouseLocation(m),le=W.getSelectedPage(te,te);if(le.first&&le.first!==this.layer.page+1){var oe=W.windowToPage(te,le.first,!1),Ee=Math.abs(S.x-E.x),Ae=Math.abs(S.y-E.y);if(W.pdfViewer.spreadMode===0&&W.pdfViewer.scrollMode===0)re=f-(M.clickX-this.start.x),X=le.first>this.layer.page+1?oe.y:oe.y-Ae,j=f-(M.clickX-this.end.x),Z=le.first>this.layer.page+1?oe.y+Ae:oe.y;else if(W.pdfViewer.spreadMode===0&&W.pdfViewer.scrollMode===1)re=le.first>this.layer.page+1?oe.x:oe.x-Ee,X=x-(M.clickY-this.start.y),j=le.first>this.layer.page+1?oe.x+Ee:oe.x,Z=x-(M.clickY-this.end.y);else if(W.pdfViewer.spreadMode===1&&W.pdfViewer.scrollMode===0){var ve=Math.min(le.first,this.layer.page+1),ke=Math.max(le.first,this.layer.page+1);if(ke-ve>2||ve+1===ke&&ve%2==0)return;ve+1===ke?(re=le.first>this.layer.page+1?oe.x:oe.x-Ee,X=x-(M.clickY-this.start.y),j=le.first>this.layer.page+1?oe.x+Ee:oe.x,Z=x-(M.clickY-this.end.y)):ve+2===ke&&(re=f-(M.clickX-this.start.x),X=le.first>this.layer.page+1?oe.y:oe.y-Ae,j=f-(M.clickX-this.end.x),Z=le.first>this.layer.page+1?oe.y+Ae:oe.y)}else if(W.pdfViewer.spreadMode===2&&W.pdfViewer.scrollMode===0){var Ce=Math.min(le.first,this.layer.page+1),Pe=Math.max(le.first,this.layer.page+1);if(Pe-Ce>2||Ce+1===Pe&&(Ce!==1||Pe!==2)&&Pe%2==0||Ce===1&&Pe===3)return;Ce+2===Pe||Ce===1&&Pe===2?(re=f-(M.clickX-this.start.x),X=le.first>this.layer.page+1?oe.y:oe.y-Ae,j=f-(M.clickX-this.end.x),Z=le.first>this.layer.page+1?oe.y+Ae:oe.y):Ce+1===Pe&&(re=le.first>this.layer.page+1?oe.x:oe.x-Ee,X=x-(M.clickY-this.start.y),j=le.first>this.layer.page+1?oe.x+Ee:oe.x,Z=x-(M.clickY-this.end.y))}var Me=W.pdfViewer._pages[le.first-1].compdfAnnotationLayer;if(!Me)return;this.layer=Me,this.annotationContainer.remove(),this.outerLineContainer.remove();var Le=this.layer.div;Le.append(this.annotationContainer),Le.append(this.outerLineContainer)}else{X=x-(M.clickY-this.start.y),re=f-(M.clickX-this.start.x),j=f-(M.clickX-this.end.x),Z=x-(M.clickY-this.end.y);var Te=W.pageToWindow({x:re,y:X},this.layer.page+1,!1),ye=W.pageToWindow({x:j,y:Z},this.layer.page+1,!1),_e=0,we=0;x>M.clickY?we=(we=k.offsetHeight-(ye.y-k.scrollTop-k.offsetTop))<100?5:0:x<M.clickY&&(we=(we=Te.y-k.scrollTop-k.offsetTop)<100?-5:0),f>M.clickX?_e=(_e=k.offsetWidth-(ye.x-k.scrollLeft-k.offsetLeft))<100?5:0:f<M.clickX&&(_e=(_e=Te.x-k.scrollLeft-k.offsetLeft)<100?-5:0),(_e||we)&&(k.scrollTop+=we,k.scrollLeft+=_e);var Se={width:Math.abs(S.x-E.x),height:Math.abs(S.y-E.y)};re<j?(re=Math.max(T,re),re=Math.min(I-Se.width-T,re),j=Math.max(Se.width+T,j),j=Math.min(I-T,j)):(j=Math.max(T,j),j=Math.min(I-Se.width-T,j),re=Math.max(Se.width+T,re),re=Math.min(I-T,re)),X<Z?(X=Math.max(T,X),X=Math.min(N-Se.height-T,X),Z=Math.max(Se.height+T,Z),Z=Math.min(N-T,Z)):(Z=Math.max(T,Z),Z=Math.min(N-Se.height-T,Z),X=Math.max(Se.height+T,X),X=Math.min(N-T,X))}this.update({start:{x:re,y:X},end:{x:j,y:Z}})}M.clickX=f,M.clickY=x}}},{key:"handleDelete",value:function(m){this.layer.tool&&m&&m.stopPropagation(),this.delete();var d={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(d.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",d)}},{key:"delete",value:function(){var m;this.handleOutside(),(m=this.annotationContainer)===null||m===void 0||m.remove(),this.annotation.isDelete=!0,this.annotation.name&&this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){var f,x,k,P,S,E,M,T,D,I;return _regeneratorRuntime().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(d.button===0||d.type!=="mouseup"){N.next=2;break}return N.abrupt("return");case 2:if(this.layer.tool&&d.stopPropagation(),d.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0,f=this.annotation,x=this.getInitialPoint(),k=x.start,P=x.end,S={left:k.x,top:k.y,right:P.x,bottom:P.y},E=[{x:S.left,y:S.top},{x:S.right,y:S.top},{x:S.right,y:S.bottom},{x:S.left,y:S.bottom}],S!==f.rect||f.pageIndex!==this.layer.page){N.next=17;break}return N.abrupt("return");case 17:if(f.rect=S,f.vertices=E,this.layer.annotationStore.selectedElementName===f.name&&this.showPopup(),f.pageIndex===this.layer.page){N.next=39;break}return M={type:"delete",annotation:{operate:"del-annot",name:f.name,pageIndex:f.pageIndex,annotPtr:f.annotPtr}},this.layer.eventBus.dispatch("annotationChanged",M),delete(T=Object.assign({},f)).annotPtr,delete T.pagePtr,delete T.name,T.operate="add-annot",T.pageIndex=this.layer.page,N.next=31,this.layer.documentViewer.annotationManager.createMeasurementAnnotation(T);case 31:return D=N.sent,this.annotation=D[0],N.next=35,this.layer.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 35:this.annotationContainer.remove(),this.outerLineContainer.remove(),N.next=42;break;case 39:return I={operate:"mod-annot",name:f.name,pageIndex:this.layer.page,pagePtr:f.pagePtr,annotPtr:f.annotPtr,rect:S,vertices:E},N.next=42,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(I);case 42:case"end":return N.stop()}},m,this)})),function(m){return v.apply(this,arguments)})},{key:"update",value:function(m){var d=m.start,f=m.end,x=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.start=d,this.end=f;var k=this.getInitialPoint(),P=k.start,S=k.end;this.annotation.vertices=[{x:P.x,y:P.y},{x:S.x,y:P.y},{x:S.x,y:S.y},{x:P.x,y:S.y}],this.updateRect();var E=this.rect,M=(this.annotation.borderWidth||2)*this.layer.viewport.scale;this.annotationContainer.style.top=E.top+"px",this.annotationContainer.style.left=E.left+"px",this.annotationContainer.style.width=E.width+"px",this.annotationContainer.style.height=E.height+"px",this.svgElement.setAttribute("viewBox","0 0 ".concat(E.width," ").concat(E.height)),this.shapeEle.setAttribute("x",M/2),this.shapeEle.setAttribute("y",M/2),this.shapeEle.setAttribute("width","".concat(Math.abs(E.width-M),"px")),this.shapeEle.setAttribute("height","".concat(Math.abs(E.height-M),"px"));var T=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2;this.outerLine.style.left="".concat(E.left-T,"px"),this.outerLine.style.top="".concat(E.top-T,"px"),this.outerLine.style.width="".concat(E.width+2*T,"px"),this.outerLine.style.height="".concat(E.height+2*T,"px"),this.moveRect.setAttribute("width",E.width+this.selectionOutlinePadding),this.moveRect.setAttribute("height",E.height+this.selectionOutlinePadding),this.bottomLeftRect.setAttribute("y",E.height+this.selectionOutlinePadding),this.bottomRightRect.setAttribute("x",E.width+this.selectionOutlinePadding),this.bottomRightRect.setAttribute("y",E.height+this.selectionOutlinePadding),this.topRightRect.setAttribute("x",E.width+this.selectionOutlinePadding),this.annotation.measure&&(this.getResult(),this.permiterTspan&&(this.permiterTspan.setAttribute("x",E.width/2),this.permiterTspan.setAttribute("y",E.height/2),this.permiterTspan.textContent=this.annotation.perimeter.toFixed(this.decimalPlaces)+this.annotation.scale.translateUnit),this.areaTspan&&(this.areaTspan.setAttribute("x",E.width/2),this.areaTspan.setAttribute("y",E.height/2),this.areaTspan.textContent=this.annotation.area.toFixed(this.decimalPlaces)+this.annotation.scale.translateUnit+"\xB2"),this.annotation.measure&&this.updateMeasure(x))}},{key:"updateMeasure",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){var f;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!this.startState||this.startState.operator==="move"||!d){x.next=4;break}return f={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:this.annotation.rect,contents:this.annotation.contents,vertices:this.annotation.vertices},x.next=4,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(f);case 4:if(!this.startState||this.startState.operator!=="move"){x.next=6;break}return x.abrupt("return");case 6:this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,perimeter:this.annotation.perimeter,area:this.annotation.area,width:this.annotation.width,length:this.annotation.length});case 7:case"end":return x.stop()}},m,this)})),function(m){return g.apply(this,arguments)})},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"handlePropertyPanel",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){var f,x,k,P=this;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(this.layer.annotationStore.selectedElementName===this.annotation.name){S.next=2;break}return S.abrupt("return");case 2:f=0,S.t0=_regeneratorRuntime().keys(d);case 4:if((S.t1=S.t0()).done){S.next=12;break}return x=S.t1.value,S.t2=f,S.next=9,this.setCustomData(x,d[x],!0);case 9:f=S.t2+=S.sent,S.next=4;break;case 12:if(f>0&&this.sendData(d),f!==0||!["showPerimeter","showArea"].some(function(E){return E in d})){S.next=21;break}return this.getResult(),k=[],this.permiterTspan&&k.push(this.permiterTspan),this.areaTspan&&k.push(this.areaTspan),k.forEach(function(E,M){E.setAttribute("dy",M+"em"),P.textEle.appendChild(E)}),S.next=21,this.layer.documentViewer.annotationManager.editMeasurementAnnotation({annotPtr:this.annotation.annotPtr,contents:this.annotation.contents});case 21:["scale","precision","showPerimeter","showArea"].some(function(E){return E in d})&&this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,perimeter:this.annotation.perimeter,area:this.annotation.area,width:this.annotation.width,length:this.annotation.length,showPerimeter:this.showPerimeter,showArea:this.showArea});case 22:case"end":return S.stop()}},m,this)})),function(m){return w.apply(this,arguments)})},{key:"setCustomData",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function m(d,f){var x,k,P,S,E,M,T,D,I,N,O,F,U,Y,Q,q,ne,J,re,X=arguments;return _regeneratorRuntime().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(x=X.length>2&&X[2]!==void 0&&X[2],k=this.annotation,P=0,d!=="showPerimeter"){j.next=7;break}return this.showPerimeter=f,!f&&this.permiterTspan?(this.permiterTspan.remove(),this.permiterTspan=null):f&&(this.permiterTspan||(this.permiterTspan=createSvg("tspan",{x:this.rect.width/2,y:this.rect.height/2})),this.permiterTspan.textContent=k.perimeter.toFixed(this.decimalPlaces)+k.scale.translateUnit),j.abrupt("return",0);case 7:if(d!=="showArea"){j.next=11;break}return this.showArea=f,!f&&this.areaTspan?(this.areaTspan.remove(),this.areaTspan=null):f&&(this.areaTspan||(this.areaTspan=createSvg("tspan",{x:this.rect.width/2,y:this.rect.height/2})),this.areaTspan.textContent=k.area.toFixed(this.decimalPlaces)+k.scale.translateUnit+"\xB2"),j.abrupt("return",0);case 11:j.t0=_regeneratorRuntime().keys(k);case 12:if((j.t1=j.t0()).done){j.next=47;break}if((S=j.t1.value)!==d||k[S]===f){j.next=45;break}if(k[S]=f,P=1,d==="borderColor"&&this.shapeEle.setAttribute("stroke",f),d==="fillColor"&&this.shapeEle.setAttribute("fill",f||"none"),d==="fillTransparency"&&this.shapeEle.setAttribute("fill-opacity",f),d==="opacity"&&(this.shapeEle.setAttribute("stroke-opacity",f),this.textEle.setAttribute("fill-opacity",f)),d==="borderWidth"&&(this.shapeEle.setAttribute("stroke-width",f*this.layer.viewport.scale),this.update({start:this.start,end:this.end},!1),this.showPopup()),d==="borderStyle"&&(f==="solid"&&this.shapeEle.setAttribute("stroke-dasharray",""),f==="dashed"&&this.shapeEle.setAttribute("stroke-dasharray",this.getDashString())),d==="dashes"&&this.shapeEle.setAttribute("stroke-dasharray",this.getDashString()),d==="color"&&this.textEle.setAttribute("fill",f),d==="fontSize"&&this.textEle.setAttribute("font-size",f*this.layer.viewport.scale),d==="fontName"&&(this.textEle.style.fontFamily=f),d==="fontStyle"&&((E=f)==="boldItalic"?(this.textEle.style.fontStyle="italic",this.textEle.style.fontWeight="bold",k.isBold=!0,k.isItalic=!0):E==="bold"?(this.textEle.style.fontStyle="normal",this.textEle.style.fontWeight="bold",k.isBold=!0,k.isItalic=!1):E==="italic"?(this.textEle.style.fontStyle="italic",this.textEle.style.fontWeight="normal",k.isBold=!1,k.isItalic=!0):(k.isItalic=!1,k.isBold=!1,this.textEle.style.fontStyle="normal",this.textEle.style.fontWeight="normal")),d==="contents"&&(this.areaTspan&&(this.areaTspan.remove(),this.areaTspan=null),this.permiterTspan||(this.permiterTspan=createSvg("tspan",{x:this.rect.width/2,y:this.rect.height/2,dy:"0em"}),this.textEle.appendChild(this.permiterTspan)),this.permiterTspan.textContent=f),d!=="scale"&&d!=="precision"){j.next=43;break}return d==="precision"&&(this.decimalPlaces=((M=Math.abs(k.precision).toString().split(".")[1])===null||M===void 0?void 0:M.length)||0),j.next=33,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(_defineProperty$1({rulerPtr:k.rulerPtr},d,f));case 33:return j.next=35,this.getResult();case 35:return T=[],this.showPerimeter&&this.permiterTspan&&(D=k.perimeter.toFixed(this.decimalPlaces)+k.scale.translateUnit,T.push(D),this.permiterTspan.textContent=D),this.showArea&&this.areaTspan&&(I=k.area.toFixed(this.decimalPlaces)+k.scale.translateUnit+"\xB2",T.push(I),this.areaTspan.textContent=I),k.contents=T.join(`
`),this.layer.annotationStore.selectedElementName!==this.annotation.name||document.querySelector(".measure-panel").classList.contains("closed")||this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),j.next=42,this.layer.documentViewer.annotationManager.editMeasurementAnnotation({annotPtr:k.annotPtr,contents:k.contents});case 42:P=0;case 43:d==="length"&&(N=this.layer.viewport,O=N.width,F=N.scale,U=f/k.factor*F,Y=this.start.x+U,Y=Math.min(O,Y),Y=Math.max(0,Y),this.startState={operator:"end"},this.update({start:this.start,end:{x:Y,y:this.end.y}}),this.showPopup(),P=0),d==="width"&&(Q=this.layer.viewport,q=Q.height,ne=Q.scale,J=f/k.factor*ne,re=this.start.y+J,re=Math.min(q,re),re=Math.max(0,re),this.startState={operator:"end"},this.update({start:this.start,end:{x:this.end.x,y:re}}),this.showPopup(),P=0);case 45:j.next=12;break;case 47:return!x&&this.sendData(_defineProperty$1({},d,f)),j.abrupt("return",P);case 49:case"end":return j.stop()}},m,this)})),function(m,d){return s.apply(this,arguments)})},{key:"sendData",value:function(m){var d=this.annotation,f={type:"rectangle",pagePtr:d.pagePtr,annotPtr:d.annotPtr,rulerPtr:d.rulerPtr,pageIndex:d.pageIndex,contents:d.contents};if(["fontSize","fontName","color","fontStyle"].some(function(S){return m[S]})){f.fontSize=d.fontSize,f.color=d.color;var x={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},k=d.fontName;d.isBold&&d.isItalic?f.fontName=x[k].boldItalic:d.isBold?f.fontName=x[k].bold:d.isItalic?f.fontName=x[k].italic:f.fontName=x[k]?x[k].normal:k,delete m.fontName}m.dashes&&(m.dashes.length===1&&(m.dashes=new Array(2).fill(m.dashes[0])),f.borderStyle=d.borderStyle,f.borderWidth=d.borderWidth),m.borderStyle&&(f.dashes=m.borderStyle==="solid"?[]:d.dashes.length===1?new Array(2).fill(d.dashes[0]):d.dashes,f.borderWidth=d.borderWidth);var P=Object.assign({},f,m);this.layer.documentViewer.annotationManager.editMeasurementAnnotation(P)}},{key:"getResult",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function m(){var d,f,x,k,P,S,E;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:d=this.annotation,f=d.rect,x=d.factor,k=d.scale.translateUnit,P=(f.right-f.left)*x,S=(f.bottom-f.top)*x,this.annotation.length=this.formatValue(P),this.annotation.width=this.formatValue(S),this.annotation.area=this.formatValue(P*S),this.annotation.perimeter=this.formatValue(2*(P+S)),E=[],this.showPerimeter&&E.push(this.annotation.perimeter.toFixed(this.decimalPlaces)+k),this.showArea&&E.push(this.annotation.area.toFixed(this.decimalPlaces)+k+"\xB2"),this.annotation.contents=E.join(`
`);case 11:case"end":return M.stop()}},m,this)})),function(){return u.apply(this,arguments)})},{key:"showPopup",value:function(){var m=this.layer.div.getBoundingClientRect(),d=(this.selectionOutlinePadding+this.selectionOutlinePointWidth)/2,f=m.left+this.rect.left-d,x=this.rect.top+m.top-d,k={left:f,top:x,right:f+this.rect.width+2*d,bottom:x+this.rect.height+2*d};this.layer.eventBus.dispatch("showMeasurementPopup",{rect:k}),this.isPopupShow=!0}},{key:"hidePopup",value:function(){this.isPopupShow&&(this.isPopupShow=!1,this.layer.eventBus.dispatch("showMeasurementPopup"))}},{key:"handlePopup",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){var f,x=this;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:d==="delete"&&this.handleDelete(),d==="reply"&&(this.openReply(),(f=document.getElementById("leftPanel"))!=null&&f.classList.contains("closed")&&setTimeout(function(){x.showPopup()},350));case 2:case"end":return k.stop()}},m,this)})),function(m){return o.apply(this,arguments)})},{key:"formatValue",value:function(m){return m%1==0?m:Number(m.toFixed(this.decimalPlaces))}},{key:"handleKeyDown",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function m(d){var f;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"){x.next=2;break}return x.abrupt("return");case 2:(f=d.keyCode||d.which)!==8&&f!==46||this.handleDelete();case 4:case"end":return x.stop()}},m,this)})),function(m){return r.apply(this,arguments)})},{key:"updateRect",value:function(){this.annotation.rect=this.rectCalcByVertices(this.annotation.vertices);var m=this.getActualRect(this.layer.viewport.scale),d=m.start,f=m.end;this.start=d,this.end=f,this.rect=this.calculate(d,f)}},{key:"rectCalcByVertices",value:function(m){var d=m.map(function(x){return x.x}),f=m.map(function(x){return x.y});return{left:Math.min.apply(Math,_toConsumableArray$1(d)),top:Math.min.apply(Math,_toConsumableArray$1(f)),right:Math.max.apply(Math,_toConsumableArray$1(d)),bottom:Math.max.apply(Math,_toConsumableArray$1(f))}}},{key:"getDashString",value:function(){var m=this.annotation.dashes,d=Math.ceil(this.ratio*this.layer.viewport.scale),f="";return m.length===1||m.length===2&&m[0]===m[1]?f=Math.ceil(m[0]*d)+"":m.length>2&&(f=m.map(function(x){return Math.ceil(x*d)}).join(", ")),f}}]);var r,o,u,s,w,g,v,y}(),Curve=function(e){function n(y){var m,d=y.annotation,f=y.layer,x=y.show,k=x!==void 0&&x,P=y.enableReply,S=P===void 0||P;return _classCallCheck(this,n),(m=_callSuper(this,n,[{annotation:d,layer:f}])).show=k,m.enableReply=S,m.hidden=!0,m.initial=!1,m.start=null,m.end=null,m.rect=null,m.realVertices=null,m.svgElement=null,m.ratio=window.devicePixelRatio||1,m.decimalPlaces=0,m.isPopupShow=!1,m.selectionOutlineBdWidth=parseFloat(m.layer.viewport.scale.toFixed(1)),m.onClick=m.handleClick.bind(m),m.onMousedown=m.handleMouseDown.bind(m),m.onMouseup=m.handleMouseUp.bind(m),m.onMousemove=m.handleMouseMove.bind(m),m.onDelete=m.handleDelete.bind(m),m.onOpenReply=m.openReply.bind(m),m.handlePropertyPanel=m.handlePropertyPanel.bind(m),m.onHandlePopup=m.handlePopup.bind(m),m.onKeydown=m.handleKeyDown.bind(m),m.render(),m}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var m,d,f,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(m=this.annotation,d=this.layer.viewport.scale,this.realVertices=m.inkPointes[0].map(function(P){return getActualPoint({x:P.PointX,y:P.PointY},d)}),this.updateRect(),f=this.rect,m.contents||this.getResult(),m.precision&&(m.precision>1&&(m.precision=Math.pow(10,-Math.floor(Math.log10(m.precision)))),this.decimalPlaces=((x=Math.abs(m.precision).toString().split(".")[1])===null||x===void 0?void 0:x.length)||0,m.perimeter=this.formatValue(m.perimeter)),m.borderColor||(m.borderColor=m.color||"#FF0000"),m.factor){k.next=12;break}return k.next=11,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",m.rulerPtr);case 11:m.factor=k.sent;case 12:m.fontStyle||(m.fontStyle="regular"),this.annotationContainer=createElement("div",{top:f.top+"px",left:f.left+"px",width:f.width+"px",height:f.height+"px"},{id:m.name,class:"annotation"}),this.svgElement=createSvg("svg",{viewBox:"".concat(f.left," ").concat(f.top," ").concat(f.width," ").concat(f.height)},{pointerEvents:"all",overflow:"visible",opacity:m.opacity?m.opacity:""}),this.annotationContainer.append(this.svgElement),this.svgElement.addEventListener("mousedown",this.onClick),this.layer.div.append(this.annotationContainer),this.draw(),this.outerLineContainer=createElement("div",{},{class:"outline-container"}),this.outerLine=createSvg("svg",{"data-id":"move",width:f.width,height:f.height,viewBox:"".concat(f.left," ").concat(f.top," ").concat(f.width," ").concat(f.height)},{position:"absolute",zIndex:1,left:"".concat(f.left,"px"),top:"".concat(f.top,"px"),width:"".concat(f.width,"px"),height:"".concat(f.height,"px"),border:"".concat(this.selectionOutlineBdWidth,"px dashed #1460F3"),pointerEvents:"all",cursor:"all-scroll",overflow:"visible"}),this.outerLineContainer.append(this.outerLine),this.updateCircle(),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 25:case"end":return k.stop()}},y,this)})),function(){return v.apply(this,arguments)})},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(y){if(this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(y==null?void 0:y.target)){this.hidden=!1,this.updateTool(),this.annotation.measure&&(this.layer.eventBus._on("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._on("measurementPopupClicked",this.onHandlePopup)),document.addEventListener("keydown",this.onKeydown);var m=[this.svgElement,this.outerLine,document.querySelector(".measure-panel"),document.querySelector(".measurement-board"),document.querySelector(".measurements-settings"),document.querySelector(".measurement-popup")];this.deletetButton&&m.push(this.deletetButton),this.replyButton&&m.push(this.replyButton);var d=document.getElementById("measurePropertyPanelButton");d&&m.push(d);var f=document.querySelector(".toggle-button");f&&m.push(f),onClickOutside$1(m,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var y,m,d,f;!this.hidden&&this.annotation.measure&&this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",{isOpen:!1}),(f=this.layer.documentViewer)===null||f===void 0||(f=f.pdfViewer)===null||f===void 0||(f=f.measurementTool)===null||f===void 0||f.updateMeasurePanel(),this.hidePopup()),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),document.removeEventListener("keydown",this.onKeydown),(y=this.outerLine)===null||y===void 0||y.removeEventListener("mousedown",this.onMousedown),(m=this.outerLine)===null||m===void 0||m.removeEventListener("touchstart",this.onMousedown),(d=this.outerLineContainer)===null||d===void 0||d.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.annotation.measure&&(this.layer.eventBus._off("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._off("measurementPopupClicked",this.onHandlePopup))}},{key:"getActualRect",value:function(y){var m=this.annotation.rect,d=m.left,f=m.top,x=m.right,k=m.bottom;return{start:getActualPoint({x:d,y:f},y),end:getActualPoint({x,y:k},y)}}},{key:"getInitialPoint",value:function(){var y=this.layer.viewport.scale;return{start:{x:this.start.x/y,y:this.start.y/y},end:{x:this.end.x/y,y:this.end.y/y}}}},{key:"calculate",value:function(y,m){var d=this.rectCalc({start:y,end:m}),f=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:d.top-f,left:d.left-f,width:d.width+2*f,height:d.height+2*f}}},{key:"rectCalc",value:function(y){var m=y.start,d=y.end;return{top:m.y<d.y?m.y:d.y,left:m.x<d.x?m.x:d.x,width:Math.abs(d.x-m.x),height:Math.abs(d.y-m.y)}}},{key:"rectCalcByVertices",value:function(y){var m=y.map(function(f){return f.x}),d=y.map(function(f){return f.y});return{left:Math.min.apply(Math,_toConsumableArray$1(m)),top:Math.min.apply(Math,_toConsumableArray$1(d)),right:Math.max.apply(Math,_toConsumableArray$1(m)),bottom:Math.max.apply(Math,_toConsumableArray$1(d))}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove(),document.removeEventListener("keydown",this.onKeydown);else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var y=this.annotation;this.layer.annotationStore.selectedElementName=y.name;var m=_objectSpread2$1({},y);delete m.annotPtr,delete m.pagePtr,delete m.operate,delete m.targetPage,delete m.arrow,this.layer.eventBus.dispatch("annotationSelected",m)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown),this.annotation.measure&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,length:this.annotation.perimeter}),this.showPopup()),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleMouseDown",value:function(y){if(y.button===0||y.type!=="mousedown"){this.layer.tool&&y.stopPropagation();var m=y.target.getAttribute("data-id"),d=this.layer.documentViewer.getScrollViewElement();this.scrollTop=d.scrollTop,this.scrollLeft=d.scrollLeft;var f=getClickPoint(y),x=f.pageX,k=f.pageY;this.startState={operator:m,clickX:x,clickY:k},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(y){if(y.button===0||y.type!=="mousemove"){this.hidePopup(),y.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var m=getClickPoint(y),d=m.pageX,f=m.pageY,x=this.layer.documentViewer.getScrollViewElement(),k=x.scrollTop;d=d+x.scrollLeft-this.scrollLeft,f=f+k-this.scrollTop;var P=this.start,S=this.end,E=this.startState,M=this.layer.viewport,T=M.width,D=M.height;M.scale;var I=/^point(\d+)$/.exec(E.operator),N=2*this.selectionOutlineBdWidth;if(I){var O=+I[1],F=this.realVertices[O],U=d-(E.clickX-F.x),Y=f-(E.clickY-F.y);U=Math.min(T-N,U),U=Math.max(N,U),Y=Math.min(D-N,Y),Y=Math.max(N,Y),this.setPathPoint(O,U,Y),this.update(O)}else if(E.operator==="move"){var Q,q,ne,J,re=this.layer.documentViewer,X=this.getMouseLocation(y),j=re.getSelectedPage(X,X);if(j.first&&j.first!==this.layer.page+1){var Z=re.windowToPage(X,j.first,!1),W=Math.abs(P.x-S.x),te=Math.abs(P.y-S.y);if(re.pdfViewer.spreadMode===0&&re.pdfViewer.scrollMode===0)Q=d-(E.clickX-this.start.x),q=j.first>this.layer.page+1?Z.y:Z.y-te,ne=d-(E.clickX-this.end.x),J=j.first>this.layer.page+1?Z.y+te:Z.y;else if(re.pdfViewer.spreadMode===0&&re.pdfViewer.scrollMode===1)Q=j.first>this.layer.page+1?Z.x:Z.x-W,q=f-(E.clickY-this.start.y),ne=j.first>this.layer.page+1?Z.x+W:Z.x,J=f-(E.clickY-this.end.y);else if(re.pdfViewer.spreadMode===1&&re.pdfViewer.scrollMode===0){var le=Math.min(j.first,this.layer.page+1),oe=Math.max(j.first,this.layer.page+1);if(oe-le>2||le+1===oe&&le%2==0)return;le+1===oe?(Q=j.first>this.layer.page+1?Z.x:Z.x-W,q=f-(E.clickY-this.start.y),ne=j.first>this.layer.page+1?Z.x+W:Z.x,J=f-(E.clickY-this.end.y)):le+2===oe&&(Q=d-(E.clickX-this.start.x),q=j.first>this.layer.page+1?Z.y:Z.y-te,ne=d-(E.clickX-this.end.x),J=j.first>this.layer.page+1?Z.y+te:Z.y)}else if(re.pdfViewer.spreadMode===2&&re.pdfViewer.scrollMode===0){var Ee=Math.min(j.first,this.layer.page+1),Ae=Math.max(j.first,this.layer.page+1);if(Ae-Ee>2||Ee+1===Ae&&(Ee!==1||Ae!==2)&&Ae%2==0||Ee===1&&Ae===3)return;Ee+2===Ae||Ee===1&&Ae===2?(Q=d-(E.clickX-this.start.x),q=j.first>this.layer.page+1?Z.y:Z.y-te,ne=d-(E.clickX-this.end.x),J=j.first>this.layer.page+1?Z.y+te:Z.y):Ee+1===Ae&&(Q=j.first>this.layer.page+1?Z.x:Z.x-W,q=f-(E.clickY-this.start.y),ne=j.first>this.layer.page+1?Z.x+W:Z.x,J=f-(E.clickY-this.end.y))}var ve=re.pdfViewer._pages[j.first-1].compdfAnnotationLayer;if(!ve)return;this.layer=ve,this.annotationContainer.remove(),this.outerLineContainer.remove();var ke=this.layer.div;ke.append(this.annotationContainer),ke.append(this.outerLineContainer)}else{Q=d-(E.clickX-this.start.x),q=f-(E.clickY-this.start.y),ne=d-(E.clickX-this.end.x),J=f-(E.clickY-this.end.y);var Ce=re.pageToWindow({x:Q,y:q},this.layer.page+1,!1),Pe=re.pageToWindow({x:ne,y:J},this.layer.page+1,!1),Me=0,Le=0;f>E.clickY?Le=(Le=x.offsetHeight-(Pe.y-x.scrollTop-x.offsetTop))<100?5:0:f<E.clickY&&(Le=(Le=Ce.y-x.scrollTop-x.offsetTop)<100?-5:0),d>E.clickX?Me=(Me=x.offsetWidth-(Pe.x-x.scrollLeft-x.offsetLeft))<100?5:0:d<E.clickX&&(Me=(Me=Ce.x-x.scrollLeft-x.offsetLeft)<100?-5:0),(Me||Le)&&(x.scrollTop+=Le,x.scrollLeft+=Me);var Te=(this.annotation.borderWidth||2)*this.layer.viewport.scale;Q<ne?(Q=Math.max(N,Q),Q=Math.min(T-this.rect.width+Te,Q),ne=Math.max(this.rect.width,ne),ne=Math.min(T,ne)):(ne=Math.max(N,ne),ne=Math.min(T-this.rect.width+Te,ne),Q=Math.max(this.rect.width,Q),Q=Math.min(T,Q)),q<J?(q=Math.max(N,q),q=Math.min(D-this.rect.height+Te,q),J=Math.max(this.rect.height,J),J=Math.min(D,J)):(J=Math.max(N,J),J=Math.min(D-this.rect.height+Te,J),q=Math.max(this.rect.height,q),q=Math.min(D,q))}for(var ye=Q-P.x,_e=q-P.y,we=0;we<this.realVertices.length;we++){var Se=this.realVertices[we],$e=Se.x+ye,Be=Se.y+_e;this.setPathPoint(we,$e,Be)}this.update()}E.clickX=d,E.clickY=f}}},{key:"handleDelete",value:function(y){this.layer.tool&&y&&y.stopPropagation(),this.delete();var m={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(m.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",m)}},{key:"delete",value:function(){var y;this.handleOutside(),(y=this.annotationContainer)===null||y===void 0||y.remove(),this.annotation.isDelete=!0,this.annotation.name&&this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d,f,x,k,P;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(m.button===0||m.type!=="mouseup"){S.next=2;break}return S.abrupt("return");case 2:if(this.layer.tool&&m.stopPropagation(),m.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0,(d=this.annotation).measure&&this.layer.annotationStore.selectedElementName===d.name&&this.showPopup(),d.pageIndex===this.layer.page){S.next=32;break}return f={type:"delete",annotation:{operate:"del-annot",name:d.name,pageIndex:d.pageIndex,annotPtr:d.annotPtr}},this.layer.eventBus.dispatch("annotationChanged",f),delete(x=Object.assign({},d)).annotPtr,delete x.pagePtr,delete x.name,x.operate="add-annot",x.pageIndex=this.layer.page,S.next=24,this.layer.documentViewer.annotationManager.createMeasurementAnnotation(x);case 24:return k=S.sent,this.annotation=k[0],S.next=28,this.layer.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 28:this.annotationContainer.remove(),this.outerLineContainer.remove(),S.next=35;break;case 32:return P={operate:"mod-annot",name:d.name,pageIndex:this.layer.page,pagePtr:d.pagePtr,annotPtr:d.annotPtr,rect:d.rect,inkPointes:d.inkPointes,borderWidth:d.borderWidth,borderColor:d.borderColor,opacity:d.opacity},S.next=35,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(P);case 35:case"end":return S.stop()}},y,this)})),function(y){return g.apply(this,arguments)})},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"update",value:function(y){var m=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.updateRect(),this.updateInkPoints();var d=this.rect;this.annotationContainer.style.top=d.top+"px",this.annotationContainer.style.left=d.left+"px",this.annotationContainer.style.width=d.width+"px",this.annotationContainer.style.height=d.height+"px",this.svgElement.setAttribute("width",d.width),this.svgElement.setAttribute("height",d.height),this.svgElement.setAttribute("viewBox","".concat(d.left," ").concat(d.top," ").concat(d.width," ").concat(d.height)),this.outerLine.setAttribute("height",d.height),this.outerLine.setAttribute("viewBox","".concat(d.left," ").concat(d.top," ").concat(d.width," ").concat(d.height)),this.outerLine.style.left="".concat(d.left,"px"),this.outerLine.style.top="".concat(d.top,"px"),this.outerLine.style.width="".concat(d.width,"px"),this.outerLine.style.height="".concat(d.height,"px"),this.deletetButton&&(this.deletetButton.style.left=d.left+d.width+MARGIN_DISTANCE-30+"px",this.deletetButton.style.top=d.top-MARGIN_DISTANCE-30+"px"),this.replyButton&&(this.replyButton.style.left=d.left+d.width+MARGIN_DISTANCE-65+"px",this.replyButton.style.top=d.top-MARGIN_DISTANCE-30+"px"),this.updateCircle(y!=null?y:null),this.annotation.measure&&m&&this.updateMeasure()}},{key:"updateMeasure",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function y(){var m;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!this.startState||this.startState.operator==="move"){d.next=6;break}return m={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:this.annotation.rect,inkPointes:this.annotation.inkPointes,borderWidth:this.annotation.borderWidth,borderColor:this.annotation.borderColor,opacity:this.annotation.opacity},this.annotation.contents&&(m.contents=this.annotation.contents),d.next=5,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(m);case 5:this.getResult();case 6:if(!this.startState||this.startState.operator!=="move"){d.next=8;break}return d.abrupt("return");case 8:this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,length:this.annotation.perimeter});case 9:case"end":return d.stop()}},y,this)})),function(){return w.apply(this,arguments)})},{key:"handlePropertyPanel",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d,f,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(d=this.annotation,this.layer.annotationStore.selectedElementName===d.name){k.next=3;break}return k.abrupt("return");case 3:f=0,k.t0=_regeneratorRuntime().keys(m);case 5:if((k.t1=k.t0()).done){k.next=13;break}return x=k.t1.value,k.t2=f,k.next=10,this.setCustomData(x,m[x],!0);case 10:f=k.t2+=k.sent,k.next=5;break;case 13:f>0&&this.sendData(m);case 14:case"end":return k.stop()}},y,this)})),function(y){return s.apply(this,arguments)})},{key:"setCustomData",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function y(m,d){var f,x,k,P,S,E,M,T,D,I,N,O,F,U,Y=arguments;return _regeneratorRuntime().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:f=Y.length>2&&Y[2]!==void 0&&Y[2],x=this.annotation,k=0,Q.t0=_regeneratorRuntime().keys(x);case 4:if((Q.t1=Q.t0()).done){Q.next=34;break}if((P=Q.t1.value)!==m||this.annotation[P]===d){Q.next=32;break}if(x[P]=d,k=1,m==="borderColor"&&this.shapeEle.setAttribute("stroke",d),m==="opacity"&&(this.svgElement.style.opacity=d),m==="borderWidth"&&(this.shapeEle.setAttribute("stroke-width",d*this.layer.viewport.scale),this.update({start:this.start,end:this.end},!1),this.showPopup()),m==="borderStyle"&&(d==="solid"&&this.shapeEle.setAttribute("stroke-dasharray",d),d==="dashed"&&this.shapeEle.setAttribute("stroke-dasharray",this.getDashString())),m==="dashes"&&this.shapeEle.setAttribute("stroke-dasharray",this.getDashString()),m==="color"&&this.textEle.setAttribute("fill",d),m==="fontSize"&&(S=this.calculateLinePoints(),E=Math.floor(S.length/2),M={x:S[E-1].x,y:S[E-1].y},T={x:S[E].x,y:S[E].y},D={x:(M.x+T.x)/2,y:(M.y+T.y)/2},I=Math.atan2(T.y-M.y,T.x-M.x)/Math.PI*180,N=Math.abs(I)>90?I-180:I,this.textEle.setAttribute("font-size",d*this.layer.viewport.scale),this.textEle.setAttribute("x",D.x),this.textEle.setAttribute("y",D.y+x.fontSize),this.textEle.setAttribute("transform","rotate(".concat(N," ").concat(D.x," ").concat(D.y,")"))),m==="fontName"&&(this.textEle.style.fontFamily=d),m==="fontStyle"&&((O=d)==="boldItalic"?(this.textEle.style.fontStyle="italic",this.textEle.style.fontWeight="bold",x.isBold=!0,x.isItalic=!0):O==="bold"?(this.textEle.style.fontStyle="normal",this.textEle.style.fontWeight="bold",x.isBold=!0,x.isItalic=!1):O==="italic"?(this.textEle.style.fontStyle="italic",this.textEle.style.fontWeight="normal",x.isBold=!1,x.isItalic=!0):(x.isItalic=!1,x.isBold=!1,this.textEle.style.fontStyle="normal",this.textEle.style.fontWeight="normal")),m==="contents"&&(this.textEle.textContent=d),m!=="scale"&&m!=="precision"){Q.next=32;break}return m==="precision"&&(this.decimalPlaces=((F=Math.abs(x.precision).toString().split(".")[1])===null||F===void 0?void 0:F.length)||0),this.getResult(),Q.next=24,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(_defineProperty$1(_defineProperty$1(_defineProperty$1({rulerPtr:x.rulerPtr},m,d),"annotPtr",x.annotPtr),"contents",x.contents));case 24:return Q.next=26,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",x.rulerPtr);case 26:U=Q.sent,x.factor=U,this.textEle&&(this.textEle.textContent=x.contents),this.layer.annotationStore.selectedElementName!==this.annotation.name||document.querySelector(".measure-panel").classList.contains("closed")||this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),this.layer.eventBus.dispatch("updateMeasureData",{scale:d,length:x.perimeter}),k=0;case 32:Q.next=4;break;case 34:return!f&&this.sendData(_defineProperty$1({},m,d)),Q.abrupt("return",k);case 36:case"end":return Q.stop()}},y,this)})),function(y,m){return u.apply(this,arguments)})},{key:"sendData",value:function(y){var m=this.annotation,d={pagePtr:m.pagePtr,annotPtr:m.annotPtr,rulerPtr:m.rulerPtr,pageIndex:m.pageIndex,inkPointes:m.inkPointes,borderWidth:m.borderWidth,borderColor:m.borderColor,opacity:m.opacity,contents:m.contents};if(["fontSize","fontName","color","fontStyle"].some(function(P){return y[P]})){d.fontSize=m.fontSize,d.color=m.color;var f={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},x=m.fontName;m.isBold&&m.isItalic?d.fontName=f[x].boldItalic:m.isBold?d.fontName=f[x].bold:m.isItalic?d.fontName=f[x].italic:d.fontName=f[x]?f[x].normal:x,delete y.fontName}y.dashes&&(d.borderStyle=m.borderStyle,d.borderWidth=m.borderWidth),y.borderStyle&&(d.dashes=y.borderStyle==="solid"?[]:m.dashes,d.borderWidth=m.borderWidth);var k=Object.assign({},d,y);this.layer.documentViewer.annotationManager.editMeasurementAnnotation(k)}},{key:"getResult",value:function(){for(var y=this,m=_slicedToArray(this.realVertices.map(function(N){return getInitialPoint(N,y.layer.viewport.scale)}),4),d=m[0],f=m[1],x=m[2],k=m[3],P=0,S={x:d.x,y:d.y},E=1;E<=200;E++){var M=E/200,T={x:Math.pow(1-M,3)*d.x+3*Math.pow(1-M,2)*M*f.x+3*(1-M)*Math.pow(M,2)*x.x+Math.pow(M,3)*k.x,y:Math.pow(1-M,3)*d.y+3*Math.pow(1-M,2)*M*f.y+3*(1-M)*Math.pow(M,2)*x.y+Math.pow(M,3)*k.y},D=T.x-S.x,I=T.y-S.y;P+=Math.sqrt(D*D+I*I),S=T}P=this.formatValue(P*this.annotation.factor),this.annotation.perimeter=P,this.annotation.contents=P.toFixed(this.decimalPlaces)+this.annotation.scale.translateUnit}},{key:"showPopup",value:function(){var y=this.layer.div.getBoundingClientRect(),m=y.left+this.rect.left,d=this.rect.top+y.top,f={left:m,top:d,right:m+this.rect.width,bottom:d+this.rect.height};this.layer.eventBus.dispatch("showMeasurementPopup",{rect:f}),this.isPopupShow=!0}},{key:"hidePopup",value:function(){this.isPopupShow&&(this.isPopupShow=!1,this.layer.eventBus.dispatch("showMeasurementPopup"))}},{key:"handlePopup",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d,f=this;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:m==="delete"&&this.handleDelete(),m==="reply"&&(this.openReply(),(d=document.getElementById("leftPanel"))!=null&&d.classList.contains("closed")&&setTimeout(function(){f.showPopup()},350));case 2:case"end":return x.stop()}},y,this)})),function(y){return o.apply(this,arguments)})},{key:"formatValue",value:function(y){return y%1==0?y:Number(y.toFixed(this.decimalPlaces))}},{key:"handleKeyDown",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function y(m){var d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(m.target.tagName!=="INPUT"&&m.target.tagName!=="TEXTAREA"){f.next=2;break}return f.abrupt("return");case 2:(d=m.keyCode||m.which)!==8&&d!==46||this.handleDelete();case 4:case"end":return f.stop()}},y,this)})),function(y){return r.apply(this,arguments)})},{key:"updateRect",value:function(){var y=this,m=this.realVertices.map(function(P){return getInitialPoint(P,y.layer.viewport.scale)});this.annotation.rect=this.rectCalcByVertices(m);var d=this.getActualRect(this.layer.viewport.scale),f=d.start,x=d.end;this.start=f,this.end=x;var k=this.calculate(f,x);this.rect=k}},{key:"draw",value:function(){var y=this.annotation,m=this.layer.viewport.scale,d=(y.borderWidth||2)*m,f=this.getDashString();this.svgElement.innerHTML="";var x=_slicedToArray(this.realVertices,4),k=x[0],P=x[1],S=x[2],E=x[3];this.shapeEle=createSvg("path",{stroke:y.borderColor,"stroke-width":d,"stroke-dasharray":f,fill:"transparent",d:"M".concat(k.x,",").concat(k.y," C").concat(P.x,",").concat(P.y," ").concat(S.x,",").concat(S.y," ").concat(E.x,",").concat(E.y)});var M=this.calculateLinePoints(),T=Math.floor(M.length/2),D=M[T-1].x,I=M[T-1].y,N=M[T].x,O=M[T].y,F={x:(D+N)/2,y:(I+O)/2},U=Math.atan2(O-I,N-D)/Math.PI*180,Y=Math.abs(U)>90?U-180:U;this.textEle=createSvg("text",{fill:y.color||y.borderColor,"text-anchor":"middle","dominant-baseline":"middle","font-size":y.fontSize*m,x:F.x,y:F.y+y.fontSize,transform:"rotate(".concat(Y," ").concat(F.x," ").concat(F.y,")")},{pointerEvents:"none"}),this.textEle.textContent=y.contents,this.svgElement.append(this.shapeEle),this.svgElement.append(this.textEle)}},{key:"updateCircle",value:function(y){if(Number.isFinite(y)&&y<this.realVertices.length-1&&y>=0){var m=this.realVertices[y],d=m.x,f=m.y,x=this.outerLine.querySelector('circle[data-id="point'+y+'"]');return x.setAttribute("cx",d),void x.setAttribute("cy",f)}this.outerLineContainer.querySelectorAll("circle").forEach(function(E){return E.remove()});for(var k=0;k<this.realVertices.length;k++){var P=this.realVertices[k],S=createSvg("circle",{"data-id":"point"+k,fill:"#1460F3",stroke:"#FFFFFF","stroke-width":2,cx:P.x,cy:P.y,r:6},{cursor:"default"});this.outerLine.append(S)}}},{key:"setPathPoint",value:function(y,m,d){if(!(y>this.realVertices.length-1||y<0)){var f=this.annotation;this.realVertices[y].x=m,this.realVertices[y].y=d;var x=_slicedToArray(this.realVertices,4),k=x[0],P=x[1],S=x[2],E=x[3];this.shapeEle.setAttribute("d","M".concat(k.x,",").concat(k.y," C").concat(P.x,",").concat(P.y," ").concat(S.x,",").concat(S.y," ").concat(E.x,",").concat(E.y)),this.updateRect(),this.updateInkPoints(),this.getResult();var M=this.calculateLinePoints(),T=Math.floor(M.length/2),D=M[T-1].x,I=M[T-1].y,N=M[T].x,O=M[T].y,F={x:(D+N)/2,y:(I+O)/2},U=Math.atan2(O-I,N-D)/Math.PI*180,Y=Math.abs(U)>90?U-180:U;this.textEle.setAttribute("x",F.x),this.textEle.setAttribute("y",F.y+f.fontSize),this.textEle.setAttribute("transform","rotate(".concat(Y," ").concat(F.x," ").concat(F.y,")")),this.textEle.textContent=f.contents,this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,length:this.annotation.perimeter})}}},{key:"calculateLinePoints",value:function(){for(var y=_slicedToArray(this.realVertices,4),m=y[0],d=y[1],f=y[2],x=y[3],k=[],P=0;P<=1;P+=.01){var S=Math.pow(1-P,3)*m.x+3*Math.pow(1-P,2)*P*d.x+3*(1-P)*Math.pow(P,2)*f.x+Math.pow(P,3)*x.x,E=Math.pow(1-P,3)*m.y+3*Math.pow(1-P,2)*P*d.y+3*(1-P)*Math.pow(P,2)*f.y+Math.pow(P,3)*x.y;k.push({x:S,y:E})}return k.push(x),_toConsumableArray$1(new Map(k.map(function(M){return[M.x+M.y,M]})).values())}},{key:"calculateEqualPoints",value:function(){var y=this.realVertices[0],m=this.realVertices[3],d=1/3,f=2/3,x={x:y.x+d*(m.x-y.x),y:y.y+d*(m.y-y.y)},k={x:y.x+f*(m.x-y.x),y:y.y+f*(m.y-y.y)};this.realVertices[1]=x,this.realVertices[2]=k}},{key:"updateInkPoints",value:function(){var y=this;this.annotation.inkPointes[0]=this.realVertices.map(function(m){var d=getInitialPoint(m,y.layer.viewport.scale);return{PointX:d.x,PointY:d.y}})}},{key:"getDashString",value:function(){var y=this.annotation.dashes,m=Math.ceil(this.ratio*this.layer.viewport.scale),d="";return y.length===1||y.length===2&&y[0]===y[1]?d=Math.ceil(y[0]*m)+"":y.length>2&&(d=y.map(function(f){return Math.ceil(f*m)}).join(", ")),d}}]);var r,o,u,s,w,g,v}(),Arc=function(e){function n(d){var f,x=d.annotation,k=d.layer,P=d.show,S=P!==void 0&&P,E=d.enableReply,M=E===void 0||E;return _classCallCheck(this,n),(f=_callSuper(this,n,[{annotation:x,layer:k}])).show=S,f.enableReply=M,f.hidden=!0,f.initial=!1,f.start=null,f.end=null,f.rect=null,f.realVertices=null,f.svgElement=null,f.ratio=window.devicePixelRatio||1,f.decimalPlaces=0,f.showRadius=f.layer.annotationStore.arc.showRadius,f.showArcLength=f.layer.annotationStore.arc.showArcLength,f.showAngle=f.layer.annotationStore.arc.showAngle,f.isPopupShow=!1,f.inkPoints=null,f.selectionOutlineBdWidth=parseFloat(f.layer.viewport.scale.toFixed(1)),f.onClick=f.handleClick.bind(f),f.onMousedown=f.handleMouseDown.bind(f),f.onMouseup=f.handleMouseUp.bind(f),f.onMousemove=f.handleMouseMove.bind(f),f.onDelete=f.handleDelete.bind(f),f.onOpenReply=f.openReply.bind(f),f.handlePropertyPanel=f.handlePropertyPanel.bind(f),f.onHandlePopup=f.handlePopup.bind(f),f.onKeydown=f.handleKeyDown.bind(f),f.render(),f}return _inherits(n,BaseAnnotation),_createClass(n,[{key:"render",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function d(){var f,x,k,P,S=this;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return f=this.annotation,x=this.layer.viewport.scale,f.vertices&&(f.arcPoints=f.vertices,delete f.vertices),this.realVertices=this.annotation.arcPoints.map(function(M){return getActualPoint(M,x)}),E.next=6,this.updateRect();case 6:if(k=this.rect,["showRadius","showArcLength","showAngle"].forEach(function(M){f[M]!==void 0&&(S[M]=f[M],delete f[M])}),f.precision&&(f.precision>1&&(f.precision=Math.pow(10,-Math.floor(Math.log10(f.precision)))),this.decimalPlaces=((P=Math.abs(f.precision).toString().split(".")[1])===null||P===void 0?void 0:P.length)||0),f.borderColor||(f.borderColor=f.color||"#FF0000"),f.factor||!f.measure){E.next=15;break}return E.next=14,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",f.rulerPtr);case 14:f.factor=E.sent;case 15:f.fontStyle||(f.fontStyle="regular"),!f.contents&&f.measure&&this.getResult(),this.annotationContainer=createElement("div",{top:k.top+"px",left:k.left+"px",width:k.width+"px",height:k.height+"px"},{id:f.name,class:"annotation"}),this.svgElement=createSvg("svg",{viewBox:"".concat(k.left," ").concat(k.top," ").concat(k.width," ").concat(k.height)},{pointerEvents:"all",overflow:"visible",opacity:f.opacity?f.opacity:""}),this.annotationContainer.append(this.svgElement),this.svgElement.addEventListener("mousedown",this.onClick),this.layer.div.append(this.annotationContainer),this.draw(),this.outerLineContainer=createElement("div",{},{class:"outline-container"}),this.outerLine=createSvg("svg",{"data-id":"move",width:k.width,height:k.height,viewBox:"".concat(k.left," ").concat(k.top," ").concat(k.width," ").concat(k.height)},{position:"absolute",zIndex:1,left:"".concat(k.left,"px"),top:"".concat(k.top,"px"),width:"".concat(k.width,"px"),height:"".concat(k.height,"px"),border:"".concat(this.selectionOutlineBdWidth,"px ").concat(f.measure?"dashed":"solid"," #1460F3"),pointerEvents:"all",cursor:"all-scroll",overflow:"visible"}),f.measure||(this.popupElement=createElement("div",{left:k.left+k.width-114+"px",top:k.top+k.height+12+"px"},{class:"popupElement"}),this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,this.replyButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"reply-button"}),this.replyButton.addEventListener("click",this.onOpenReply),this.replyButton.innerHTML=this.replySvgStr,this.layer.documentViewer.isAnnotationPopup&&this.enableReply&&this.popupElement.append(this.replyButton),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.outerLineContainer.append(this.popupElement)),this.outerLineContainer.append(this.outerLine),this.updateCircle(),this.initial=!0,this.show&&(!this.layer.addMode&&this.selectAnnotation(),this.show=!1);case 30:case"end":return E.stop()}},d,this)})),function(){return m.apply(this,arguments)})},{key:"selectAnnotation",value:function(){this.layer.annotationStore.selectedElementName!==this.annotation.name&&this.handleClick()}},{key:"handleClick",value:function(d){if(this.hidden&&!this.layer.annotationStore.creating&&!["redaction","remove"].includes(this.layer.tool)&&!document.querySelector(".compare-document-container").contains(d==null?void 0:d.target)){this.hidden=!1,this.updateTool(),this.annotation.measure?(this.layer.eventBus._on("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._on("measurementPopupClicked",this.onHandlePopup)):this.layer.eventBus._on("annotationPropertyChanged",this.handlePropertyPanel),document.addEventListener("keydown",this.onKeydown);var f=[this.svgElement,this.outerLine,document.querySelector(".measure-panel"),document.querySelector(".measurement-board"),document.querySelector(".measurements-settings"),document.querySelector(".measurement-popup")];this.popupElement&&f.push(this.popupElement);var x=document.getElementById(this.annotation.measure?"measurePropertyPanelButton":"annotationPropertyPanelButton");x&&f.push(x);var k=document.querySelector(".toggle-button");k&&f.push(k),onClickOutside$1(f,this.handleOutside.bind(this))}}},{key:"handleOutside",value:function(){var d,f,x,k;!this.hidden&&this.annotation.measure&&this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",{isOpen:!1}),(k=this.layer.documentViewer)===null||k===void 0||(k=k.pdfViewer)===null||k===void 0||(k=k.measurementTool)===null||k===void 0||k.updateMeasurePanel(),this.hidePopup()),this.hidden=!0,this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null,this.layer.eventBus.dispatch("annotationDeselected")),document.removeEventListener("keydown",this.onKeydown),(d=this.outerLine)===null||d===void 0||d.removeEventListener("mousedown",this.onMousedown),(f=this.outerLine)===null||f===void 0||f.removeEventListener("touchstart",this.onMousedown),(x=this.outerLineContainer)===null||x===void 0||x.remove(),this.layer.documentViewer.getScrollViewElement().style.touchAction="auto",this.annotation.measure?(this.layer.eventBus._off("measurePropertyPanelChanged",this.handlePropertyPanel),this.layer.eventBus._off("measurementPopupClicked",this.onHandlePopup)):this.layer.eventBus._off("annotationPropertyChanged",this.handlePropertyPanel)}},{key:"getActualRect",value:function(d){var f=this.annotation.rect,x=f.left,k=f.top,P=f.right,S=f.bottom;return{start:getActualPoint({x,y:k},d),end:getActualPoint({x:P,y:S},d)}}},{key:"getInitialPoint",value:function(){var d=this.layer.viewport.scale;return{start:{x:this.start.x/d,y:this.start.y/d},end:{x:this.end.x/d,y:this.end.y/d}}}},{key:"calculate",value:function(d,f){var x=this.rectCalc({start:d,end:f}),k=(this.annotation.borderWidth||2)*this.layer.viewport.scale;return{top:x.top-k,left:x.left-k,width:x.width+2*k,height:x.height+2*k}}},{key:"rectCalc",value:function(d){var f=d.start,x=d.end;return{top:f.y<x.y?f.y:x.y,left:f.x<x.x?f.x:x.x,width:Math.abs(x.x-f.x),height:Math.abs(x.y-f.y)}}},{key:"rectCalcByVertices",value:function(d){var f=d.map(function(k){return k.x}),x=d.map(function(k){return k.y});return{left:Math.min.apply(Math,_toConsumableArray$1(f)),top:Math.min.apply(Math,_toConsumableArray$1(x)),right:Math.max.apply(Math,_toConsumableArray$1(f)),bottom:Math.max.apply(Math,_toConsumableArray$1(x))}}},{key:"updateTool",value:function(){if(this.initial)if(this.hidden)this.layer.annotationStore.selectedElementName===this.annotation.name&&(this.layer.annotationStore.selectedElementName=null),this.outerLineContainer.remove(),document.removeEventListener("keydown",this.onKeydown);else{if(this.layer.annotationStore.selectedElementName!==this.annotation.name){var d=this.annotation;this.layer.annotationStore.selectedElementName=d.name;var f=_objectSpread2$1({},d);delete f.annotPtr,delete f.pagePtr,delete f.operate,delete f.targetPage,delete f.arrow,this.layer.eventBus.dispatch("annotationSelected",f)}this.layer.div.append(this.outerLineContainer),this.outerLine.addEventListener("mousedown",this.onMousedown),this.outerLine.addEventListener("touchstart",this.onMousedown),document.addEventListener("keydown",this.onKeydown),this.annotation.measure&&(this.layer.eventBus.dispatch("changeRightPanelBtnDisabled"),this.layer.eventBus.dispatch("measurePropertyChange",this.annotation),this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,arcLength:this.annotation.arcLength,angle:this.annotation.angle||0,radius:this.annotation.radius,showRadius:this.showRadius,showArcLength:this.showArcLength,showAngle:this.showAngle}),this.showPopup()),this.layer.documentViewer.getScrollViewElement().style.touchAction="none"}}},{key:"handleMouseDown",value:function(d){if(d.button===0||d.type!=="mousedown"){this.layer.tool&&d.stopPropagation();var f=d.target.getAttribute("data-id"),x=this.layer.documentViewer.getScrollViewElement();this.scrollTop=x.scrollTop,this.scrollLeft=x.scrollLeft;var k=getClickPoint(d),P=k.pageX,S=k.pageY;this.startState={operator:f,clickX:P,clickY:S},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(d){if(d.button===0||d.type!=="mousemove"){this.hidePopup(),d.type==="touchmove"&&(this.layer.pageDiv.style.touchAction="none"),this.moving=!0;var f=getClickPoint(d),x=f.pageX,k=f.pageY,P=this.layer.documentViewer.getScrollViewElement(),S=P.scrollTop;x=x+P.scrollLeft-this.scrollLeft,k=k+S-this.scrollTop;var E=2*this.selectionOutlineBdWidth,M=this.start,T=this.end,D=this.startState,I=this.layer.viewport,N=I.width,O=I.height;I.scale;var F=/^point(\d+)$/.exec(D.operator);if(F){var U=+F[1],Y=this.realVertices[U],Q=x-(D.clickX-Y.x),q=k-(D.clickY-Y.y);Q=Math.min(N-E,Q),Q=Math.max(E,Q),q=Math.min(O-E,q),q=Math.max(E,q),this.setPathPoint(U,Q,q),this.update(U,!1)}else if(D.operator==="move"){var ne,J,re,X,j=this.layer.documentViewer,Z=this.getMouseLocation(d),W=j.getSelectedPage(Z,Z);if(W.first&&W.first!==this.layer.page+1){var te=j.windowToPage(Z,W.first,!1),le=Math.abs(M.x-T.x),oe=Math.abs(M.y-T.y);if(j.pdfViewer.spreadMode===0&&j.pdfViewer.scrollMode===0)ne=x-(D.clickX-this.start.x),J=W.first>this.layer.page+1?te.y:te.y-oe,re=x-(D.clickX-this.end.x),X=W.first>this.layer.page+1?te.y+oe:te.y;else if(j.pdfViewer.spreadMode===0&&j.pdfViewer.scrollMode===1)ne=W.first>this.layer.page+1?te.x:te.x-le,J=k-(D.clickY-this.start.y),re=W.first>this.layer.page+1?te.x+le:te.x,X=k-(D.clickY-this.end.y);else if(j.pdfViewer.spreadMode===1&&j.pdfViewer.scrollMode===0){var Ee=Math.min(W.first,this.layer.page+1),Ae=Math.max(W.first,this.layer.page+1);if(Ae-Ee>2||Ee+1===Ae&&Ee%2==0)return;Ee+1===Ae?(ne=W.first>this.layer.page+1?te.x:te.x-le,J=k-(D.clickY-this.start.y),re=W.first>this.layer.page+1?te.x+le:te.x,X=k-(D.clickY-this.end.y)):Ee+2===Ae&&(ne=x-(D.clickX-this.start.x),J=W.first>this.layer.page+1?te.y:te.y-oe,re=x-(D.clickX-this.end.x),X=W.first>this.layer.page+1?te.y+oe:te.y)}else if(j.pdfViewer.spreadMode===2&&j.pdfViewer.scrollMode===0){var ve=Math.min(W.first,this.layer.page+1),ke=Math.max(W.first,this.layer.page+1);if(ke-ve>2||ve+1===ke&&(ve!==1||ke!==2)&&ke%2==0||ve===1&&ke===3)return;ve+2===ke||ve===1&&ke===2?(ne=x-(D.clickX-this.start.x),J=W.first>this.layer.page+1?te.y:te.y-oe,re=x-(D.clickX-this.end.x),X=W.first>this.layer.page+1?te.y+oe:te.y):ve+1===ke&&(ne=W.first>this.layer.page+1?te.x:te.x-le,J=k-(D.clickY-this.start.y),re=W.first>this.layer.page+1?te.x+le:te.x,X=k-(D.clickY-this.end.y))}var Ce=j.pdfViewer._pages[W.first-1].compdfAnnotationLayer;if(!Ce)return;this.layer=Ce,this.annotationContainer.remove(),this.outerLineContainer.remove();var Pe=this.layer.div;Pe.append(this.annotationContainer),Pe.append(this.outerLineContainer)}else{ne=x-(D.clickX-this.start.x),J=k-(D.clickY-this.start.y),re=x-(D.clickX-this.end.x),X=k-(D.clickY-this.end.y);var Me=j.pageToWindow({x:ne,y:J},this.layer.page+1,!1),Le=j.pageToWindow({x:re,y:X},this.layer.page+1,!1),Te=0,ye=0;k>D.clickY?ye=(ye=P.offsetHeight-(Le.y-P.scrollTop-P.offsetTop))<100?5:0:k<D.clickY&&(ye=(ye=Me.y-P.scrollTop-P.offsetTop)<100?-5:0),x>D.clickX?Te=(Te=P.offsetWidth-(Le.x-P.scrollLeft-P.offsetLeft))<100?5:0:x<D.clickX&&(Te=(Te=Me.x-P.scrollLeft-P.offsetLeft)<100?-5:0),(Te||ye)&&(P.scrollTop+=ye,P.scrollLeft+=Te);var _e=(this.annotation.borderWidth||2)*this.layer.viewport.scale;ne<re?(ne=Math.max(E,ne),ne=Math.min(N-this.rect.width+_e,ne),re=Math.max(this.rect.width,re),re=Math.min(N,re)):(re=Math.max(E,re),re=Math.min(N-this.rect.width+_e,re),ne=Math.max(this.rect.width,ne),ne=Math.min(N,ne)),J<X?(J=Math.max(E,J),J=Math.min(O-this.rect.height+_e,J),X=Math.max(this.rect.height,X),X=Math.min(O,X)):(X=Math.max(E,X),X=Math.min(O-this.rect.height+_e,X),J=Math.max(this.rect.height,J),J=Math.min(O,J))}for(var we=ne-M.x,Se=J-M.y,$e=0;$e<this.realVertices.length;$e++){var Be=this.realVertices[$e],Oe=Be.x+we,Ge=Be.y+Se;this.setPathPoint($e,Oe,Ge)}this.update(null,!1)}D.clickX=x,D.clickY=k}}},{key:"handleDelete",value:function(d){this.layer.tool&&d&&d.stopPropagation(),this.delete();var f={type:"delete",annotation:{operate:"del-annot",name:this.annotation.name,pageIndex:this.layer.page}};this.annotation.annotPtr&&(f.annotation.annotPtr=this.annotation.annotPtr),this.layer.eventBus.dispatch("annotationChanged",f)}},{key:"delete",value:function(){var d;this.handleOutside(),(d=this.annotationContainer)===null||d===void 0||d.remove(),this.annotation.isDelete=!0,this.annotation.name&&this.layer.deleteAnnotationInLayer({name:this.annotation.name})}},{key:"handleMouseUp",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var x,k,P,S,E;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(f.button===0||f.type!=="mouseup"){M.next=2;break}return M.abrupt("return");case 2:if(this.layer.tool&&f.stopPropagation(),f.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),this.moving=!1,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.scrollLeft=0,this.scrollTop=0,(x=this.annotation).measure&&this.layer.annotationStore.selectedElementName===x.name&&this.showPopup(),x.pageIndex===this.layer.page){M.next=32;break}return k={type:"delete",annotation:{operate:"del-annot",name:x.name,pageIndex:x.pageIndex,annotPtr:x.annotPtr}},this.layer.eventBus.dispatch("annotationChanged",k),delete(P=Object.assign({},x)).annotPtr,delete P.pagePtr,delete P.name,P.operate="add-annot",P.pageIndex=this.layer.page,M.next=24,this.layer.documentViewer.annotationManager.createMeasurementAnnotation(P);case 24:return S=M.sent,this.annotation=S[0],M.next=28,this.layer.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 28:this.annotationContainer.remove(),this.outerLineContainer.remove(),M.next=42;break;case 32:if(E={operate:"mod-annot",name:x.name,pageIndex:this.layer.page,pagePtr:x.pagePtr,annotPtr:x.annotPtr,arcPoints:this.changedArcPoints,rect:x.rect},x.contents&&(E.contents=x.contents),!x.measure){M.next=41;break}return(E=_objectSpread2$1(_objectSpread2$1({},E),{},{inkPointes:x.inkPointes,borderWidth:x.borderWidth,borderColor:x.borderColor,opacity:x.opacity})).rulerPtr=x.rulerPtr,M.next=39,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(E);case 39:M.next=42;break;case 41:this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:E});case 42:case"end":return M.stop()}},d,this)})),function(d){return y.apply(this,arguments)})},{key:"openReply",value:function(){this.layer.eventBus.dispatch("openAnnotationReply",this.annotation)}},{key:"update",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var x,k,P,S,E,M,T,D,I=arguments;return _regeneratorRuntime().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return x=!(I.length>1&&I[1]!==void 0)||I[1],this.annotation.measure&&this.updateMeasure(x),N.next=4,this.updateRect();case 4:if(k=this.rect,this.annotationContainer.style.top=k.top+"px",this.annotationContainer.style.left=k.left+"px",this.annotationContainer.style.width=k.width+"px",this.annotationContainer.style.height=k.height+"px",this.svgElement.setAttribute("width",k.width),this.svgElement.setAttribute("height",k.height),this.svgElement.setAttribute("viewBox","".concat(k.left," ").concat(k.top," ").concat(k.width," ").concat(k.height)),this.outerLine.setAttribute("height",k.height),this.outerLine.setAttribute("viewBox","".concat(k.left," ").concat(k.top," ").concat(k.width," ").concat(k.height)),this.outerLine.style.left="".concat(k.left,"px"),this.outerLine.style.top="".concat(k.top,"px"),this.outerLine.style.width="".concat(k.width,"px"),this.outerLine.style.height="".concat(k.height,"px"),this.popupElement&&(this.popupElement.style.left=k.left+k.width-114+"px"),this.popupElement&&(this.popupElement.style.top=k.top+k.height+12+"px"),this.deletetButton&&(this.deletetButton.style.left=k.left+k.width+MARGIN_DISTANCE-30+"px",this.deletetButton.style.top=k.top-MARGIN_DISTANCE-30+"px"),this.replyButton&&(this.replyButton.style.left=k.left+k.width+MARGIN_DISTANCE-65+"px",this.replyButton.style.top=k.top-MARGIN_DISTANCE-30+"px"),this.smallArcEle||!this.annotation.measure){N.next=25;break}return this.draw(),N.abrupt("return");case 25:if(P=_slicedToArray(this.realVertices,3),S=P[0],E=P[1],M=P[2],T=this.calculateCenter(S,E,M)){N.next=29;break}return N.abrupt("return");case 29:if(this.arcEle.setAttribute("d",this.describeArc(S,E,M,T)),this.updateCircle(f!=null?f:null),this.annotation.measure){N.next=33;break}return N.abrupt("return");case 33:this.smallArcEle.setAttribute("d",this.describeArc(S,E,M,T,.15)),this.startLineEle.setAttribute("x1",S.x),this.startLineEle.setAttribute("y1",S.y),this.startLineEle.setAttribute("x2",T.x),this.startLineEle.setAttribute("y2",T.y),this.endLineEle.setAttribute("x1",M.x),this.endLineEle.setAttribute("y1",M.y),this.endLineEle.setAttribute("x2",T.x),this.endLineEle.setAttribute("y2",T.y),D={x:(M.x+T.x)/2,y:(M.y+T.y)/2},this.arcLengthTspan&&(this.arcLengthTspan.setAttribute("x",D.x),this.arcLengthTspan.setAttribute("y",D.y),this.arcLengthTspan.textContent=this.annotation.arcLength.toFixed(this.decimalPlaces)+this.annotation.scale.translateUnit),this.angleTspan&&(this.angleTspan.setAttribute("x",D.x),this.angleTspan.setAttribute("y",D.y),this.angleTspan.textContent=this.annotation.angle+"\xB0"),this.radiusTspan&&(this.radiusTspan.setAttribute("x",D.x),this.radiusTspan.setAttribute("y",D.y),this.radiusTspan.textContent=this.annotation.radius.toFixed(this.decimalPlaces)+this.annotation.scale.translateUnit);case 46:case"end":return N.stop()}},d,this)})),function(d){return v.apply(this,arguments)})},{key:"updateMeasure",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(this.layer.annotationStore.creating||!this.annotation.annotPtr||!f){k.next=5;break}return x={pageIndex:this.layer.page,pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,arcPoints:this.changedArcPoints,inkPointes:this.annotation.inkPointes,borderWidth:this.annotation.borderWidth,borderColor:this.annotation.borderColor,opacity:this.annotation.opacity},this.annotation.contents&&(x.contents=this.annotation.contents),k.next=5,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(x);case 5:if(this.getResult(),!this.startState||this.startState.operator!=="move"){k.next=8;break}return k.abrupt("return");case 8:this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,arcLength:this.annotation.arcLength,angle:this.annotation.angle||0,radius:this.annotation.radius});case 9:case"end":return k.stop()}},d,this)})),function(d){return g.apply(this,arguments)})},{key:"handlePropertyPanel",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var x,k,P;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(x=this.annotation,this.layer.annotationStore.selectedElementName===x.name){S.next=3;break}return S.abrupt("return");case 3:k=0,S.t0=_regeneratorRuntime().keys(f);case 5:if((S.t1=S.t0()).done){S.next=13;break}return P=S.t1.value,S.t2=k,S.next=10,this.setCustomData(P,f[P],!0);case 10:k=S.t2+=S.sent,S.next=5;break;case 13:k>0&&this.sendData(f),k===0&&["showRadius","showArcLength","showAngle"].some(function(E){return E in f})&&(this.getResult(),this.sendData({}));case 15:case"end":return S.stop()}},d,this)})),function(d){return w.apply(this,arguments)})},{key:"setCustomData",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function d(f,x){var k,P,S,E,M,T,D,I,N,O,F,U,Y,Q,q,ne,J,re,X,j,Z=arguments;return _regeneratorRuntime().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(k=Z.length>2&&Z[2]!==void 0&&Z[2],P=this.annotation,S=0,E=_slicedToArray(this.realVertices,3),M=E[0],T=E[1],D=E[2],I=this.calculateCenter(M,T,D)){W.next=7;break}return W.abrupt("return",0);case 7:if(N={x:(D.x+I.x)/2,y:(D.y+I.y)/2},f!=="showRadius"){W.next=12;break}return this.showRadius=x,!x&&this.radiusTspan?(this.radiusTspan.remove(),this.radiusTspan=null):x&&(this.radiusTspan||(this.radiusTspan=createSvg("tspan",{x:N.x,y:N.y,dy:"-1em"}),this.textEle.appendChild(this.radiusTspan)),this.radiusTspan.textContent=P.radius.toFixed(this.decimalPlaces)+P.scale.translateUnit),W.abrupt("return",0);case 12:if(f!=="showArcLength"){W.next=16;break}return this.showArcLength=x,!x&&this.arcLengthTspan?(this.arcLengthTspan.remove(),this.arcLengthTspan=null):x&&(this.arcLengthTspan||(this.arcLengthTspan=createSvg("tspan",{x:N.x,y:N.y,dy:"0em"}),this.textEle.appendChild(this.arcLengthTspan)),this.arcLengthTspan.textContent=P.arcLength.toFixed(this.decimalPlaces)+P.scale.translateUnit),W.abrupt("return",0);case 16:if(f!=="showAngle"){W.next=20;break}return this.showAngle=x,!x&&this.angleTspan?(this.angleTspan.remove(),this.angleTspan=null):x&&(this.angleTspan||(this.angleTspan=createSvg("tspan",{x:N.x,y:N.y,dy:"1em"}),this.textEle.appendChild(this.angleTspan)),this.angleTspan.textContent=P.angle+"\xB0"),W.abrupt("return",0);case 20:W.t0=_regeneratorRuntime().keys(P);case 21:if((W.t1=W.t0()).done){W.next=46;break}if((O=W.t1.value)!==f||P[O]===x){W.next=44;break}if(P[O]=x,S=1,f==="borderColor"&&(this.arcEle.setAttribute("stroke",x),(F=this.smallArcEle)===null||F===void 0||F.setAttribute("stroke",x),(U=this.startLineEle)===null||U===void 0||U.setAttribute("stroke",x),(Y=this.endLineEle)===null||Y===void 0||Y.setAttribute("stroke",x),!P.measure&&(P.color=x)),f==="opacity"&&(this.svgElement.style.opacity=x),f==="borderWidth"&&(J=x*this.layer.viewport.scale,this.arcEle.setAttribute("stroke-width",J),(Q=this.smallArcEle)===null||Q===void 0||Q.setAttribute("stroke-width",J),(q=this.startLineEle)===null||q===void 0||q.setAttribute("stroke-width",J),(ne=this.endLineEle)===null||ne===void 0||ne.setAttribute("stroke-width",J),this.update(null,!1),P.measure&&this.showPopup()),f==="color"&&this.textEle.setAttribute("fill",x),f==="fontSize"&&this.textEle.setAttribute("font-size",x*this.layer.viewport.scale),f==="fontName"&&(this.textEle.style.fontFamily=x),f==="fontStyle"&&((re=x)==="boldItalic"?(this.textEle.style.fontStyle="italic",this.textEle.style.fontWeight="bold",P.isBold=!0,P.isItalic=!0):re==="bold"?(this.textEle.style.fontStyle="normal",this.textEle.style.fontWeight="bold",P.isBold=!0,P.isItalic=!1):re==="italic"?(this.textEle.style.fontStyle="italic",this.textEle.style.fontWeight="normal",P.isBold=!1,P.isItalic=!0):(P.isItalic=!1,P.isBold=!1,this.textEle.style.fontStyle="normal",this.textEle.style.fontWeight="normal")),f==="contents"&&P.measure&&(this.angleTspan&&(this.angleTspan.remove(),this.angleTspan=null),this.radiusTspan&&(this.radiusTspan.remove(),this.radiusTspan=null),this.arcLengthTspan||(this.arcLengthTspan=createSvg("tspan",{x:N.x,y:N.y,dy:"0em"}),this.textEle.appendChild(this.arcLengthTspan)),this.arcLengthTspan.textContent=x),f!=="scale"&&f!=="precision"){W.next=44;break}return f==="precision"&&(this.decimalPlaces=((X=Math.abs(P.precision).toString().split(".")[1])===null||X===void 0?void 0:X.length)||0),W.next=38,this.layer.documentViewer.annotationManager.editMeasurementAnnotation(_defineProperty$1(_defineProperty$1(_defineProperty$1({rulerPtr:P.rulerPtr},f,x),"annotPtr",P.annotPtr),"contents",P.contents));case 38:return W.next=40,this.layer.documentViewer.messageHandler.sendWithPromise("GetFactor",P.rulerPtr);case 40:j=W.sent,P.factor=j,this.update(),S=0;case 44:W.next=21;break;case 46:return!k&&this.sendData(_defineProperty$1({},f,x)),W.abrupt("return",S);case 48:case"end":return W.stop()}},d,this)})),function(d,f){return s.apply(this,arguments)})},{key:"sendData",value:function(d){var f=this.annotation;if(f.measure){var x={pagePtr:f.pagePtr,annotPtr:f.annotPtr,rulerPtr:f.rulerPtr,pageIndex:f.pageIndex,inkPointes:f.inkPointes,arcPoints:this.changedArcPoints,borderWidth:f.borderWidth,borderColor:f.borderColor,opacity:f.opacity,contents:f.contents};if(["fontSize","fontName","color","fontStyle"].some(function(T){return d[T]})){x.fontSize=f.fontSize,x.color=f.color;var k={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}},P=f.fontName;f.isBold&&f.isItalic?x.fontName=k[P].boldItalic:f.isBold?x.fontName=k[P].bold:f.isItalic?x.fontName=k[P].italic:x.fontName=k[P]?k[P].normal:P,delete d.fontName}var S=Object.assign({},x,d);this.layer.documentViewer.annotationManager.editMeasurementAnnotation(S)}else{var E={operate:"mod-annot",name:f.name,pageIndex:f.pageIndex,pagePtr:f.pagePtr,annotPtr:f.annotPtr};d.borderColor&&(E.color=f.color);var M=Object.assign({},E,d);this.layer.eventBus.dispatch("annotationChanged",{type:"modify",annotation:M})}}},{key:"getResult",value:function(){var d=this.annotation;d.arcPoints,d.factor;var f=d.scale.translateUnit,x=[];this.showRadius&&this.annotation.radius&&x.push(this.annotation.radius.toFixed(this.decimalPlaces)+f),this.showArcLength&&this.annotation.arcLength&&x.push(this.annotation.arcLength.toFixed(this.decimalPlaces)+f),this.showAngle&&this.annotation.angle&&x.push(this.annotation.angle+"\xB0"),this.annotation.contents=x.join(`
`)}},{key:"showPopup",value:function(){var d=this.layer.div.getBoundingClientRect(),f=d.left+this.rect.left,x=this.rect.top+d.top,k={left:f,top:x,right:f+this.rect.width,bottom:x+this.rect.height};this.layer.eventBus.dispatch("showMeasurementPopup",{rect:k}),this.isPopupShow=!0}},{key:"hidePopup",value:function(){this.isPopupShow&&(this.isPopupShow=!1,this.layer.eventBus.dispatch("showMeasurementPopup"))}},{key:"handlePopup",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var x,k=this;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:f==="delete"&&this.handleDelete(),f==="reply"&&(this.openReply(),(x=document.getElementById("leftPanel"))!=null&&x.classList.contains("closed")&&setTimeout(function(){k.showPopup()},350));case 2:case"end":return P.stop()}},d,this)})),function(d){return u.apply(this,arguments)})},{key:"formatValue",value:function(d){return d%1==0?d:Number(d.toFixed(this.decimalPlaces))}},{key:"handleKeyDown",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"){k.next=2;break}return k.abrupt("return");case 2:(x=f.keyCode||f.which)!==8&&x!==46||this.handleDelete();case 4:case"end":return k.stop()}},d,this)})),function(d){return o.apply(this,arguments)})},{key:"updateRect",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function d(){var f,x,k,P,S,E,M,T,D,I,N,O,F,U;return _regeneratorRuntime().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(this.realVertices.length!==3){Y.next=14;break}if(f=_slicedToArray(this.realVertices,3),x=f[0],k=f[1],P=f[2],S=this.calculateCenter(x,k,P)){Y.next=5;break}return Y.abrupt("return");case 5:this.describeArc(x,k,P,S),E=this.rectCalcByVertices(this.inkPoints),this.start={x:E.left,y:E.top},this.end={x:E.right,y:E.bottom},this.rect=this.calculate(this.start,this.end),M=this.getMinBoundingRect(this.annotation.arcPoints[0],this.annotation.arcPoints[1],this.annotation.arcPoints[2]),T=M.left,D=M.top,I=M.right,N=M.bottom,this.annotation.rect={left:T,top:D,right:I,bottom:N},Y.next=19;break;case 14:this.annotation.rect=this.rectCalcByVertices(this.annotation.arcPoints),O=this.getActualRect(this.layer.viewport.scale),F=O.start,U=O.end,this.start=F,this.end=U,this.rect=this.calculate(F,U);case 19:case"end":return Y.stop()}},d,this)})),function(){return r.apply(this,arguments)})},{key:"calculateCircle",value:function(d,f,x){var k=d.x,P=d.y,S=f.x,E=f.y,M=x.x,T=x.y,D=2*(S-k),I=2*(E-P),N=Math.pow(S,2)+Math.pow(E,2)-Math.pow(k,2)-Math.pow(P,2),O=2*(M-k),F=2*(T-P),U=Math.pow(M,2)+Math.pow(T,2)-Math.pow(k,2)-Math.pow(P,2),Y=D*F-O*I;if(Y===0)return null;var Q=(F*N-I*U)/Y,q=(D*U-O*N)/Y;return{x:Q,y:q,radius:Math.hypot(k-Q,P-q)}}},{key:"isAngleInRange",value:function(d,f,x,k){return d=(d+2*Math.PI)%(2*Math.PI),f=(f+2*Math.PI)%(2*Math.PI),x=(x+2*Math.PI)%(2*Math.PI),k?f>=x?d<=f&&d>=x:d<=f||d>=x:f<=x?d>=f&&d<=x:d>=f||d<=x}},{key:"getMinBoundingRect",value:function(d,f,x){var k=this,P=this.calculateCircle(d,f,x);if(!P){var S=[d.x,f.x,x.x],E=[d.y,f.y,x.y];return{left:Math.min.apply(Math,S),right:Math.max.apply(Math,S),top:Math.max.apply(Math,E),bottom:Math.min.apply(Math,E)}}var M=function(ne){var J=ne.x-P.x,re=ne.y-P.y;return Math.atan2(re,J)},T=M(d);M(f);var D=M(x),I=(f.x-d.x)*(x.y-d.y)-(f.y-d.y)*(x.x-d.x)<0,N=T,O=D;I?D>T&&(O-=2*Math.PI):D<T&&(O+=2*Math.PI);var F=[0,Math.PI/2,Math.PI,3*Math.PI/2].map(function(ne){return k.isAngleInRange(ne,N,O,I)}),U=P.x,Y=P.y,Q=P.radius,q=[d,f,x];return{left:F[2]?U-Q:Math.min.apply(Math,_toConsumableArray$1(q.map(function(ne){return ne.x}))),right:F[0]?U+Q:Math.max.apply(Math,_toConsumableArray$1(q.map(function(ne){return ne.x}))),top:F[1]?Y+Q:Math.max.apply(Math,_toConsumableArray$1(q.map(function(ne){return ne.y}))),bottom:F[3]?Y-Q:Math.min.apply(Math,_toConsumableArray$1(q.map(function(ne){return ne.y})))}}},{key:"draw",value:function(){var d=this.annotation,f=this.layer.viewport.scale,x=(d.borderWidth||2)*f;if(this.svgElement.innerHTML="",!(this.realVertices.length<2)){var k=_slicedToArray(this.realVertices,3),P=k[0],S=k[1],E=k[2],M=this.calculateCenter(P,S,E);if(M&&(this.arcEle=createSvg("path",{stroke:d.borderColor,"stroke-width":x,fill:"none",d:this.describeArc(P,S,E,M)}),this.svgElement.append(this.arcEle),d.measure)){this.smallArcEle=createSvg("path",{stroke:d.borderColor,"stroke-width":x,fill:"none",d:this.describeArc(P,S,E,M,.15)}),this.startLineEle=createSvg("line",{stroke:d.borderColor,"stroke-width":x,"stroke-dasharray":4*f,x1:P.x,y1:P.y,x2:M.x,y2:M.y}),this.endLineEle=createSvg("line",{stroke:d.borderColor,"stroke-width":x,"stroke-dasharray":4*f,x1:E.x,y1:E.y,x2:M.x,y2:M.y}),this.svgElement.append(this.smallArcEle),this.svgElement.append(this.startLineEle),this.svgElement.append(this.endLineEle);var T={x:(E.x+M.x)/2,y:(E.y+M.y)/2};this.textEle=createSvg("text",{fill:d.color||d.borderColor,"fill-opacity":d.opacity||1,"text-anchor":"middle","dominant-baseline":"middle","font-size":d.fontSize*f+"px"}),this.svgElement.append(this.textEle),this.showRadius&&(this.radiusTspan=createSvg("tspan",{x:T.x,y:T.y,dy:"-1em"}),this.radiusTspan.textContent=d.radius.toFixed(this.decimalPlaces)+d.scale.translateUnit,this.textEle.appendChild(this.radiusTspan)),this.showArcLength&&(this.arcLengthTspan=createSvg("tspan",{x:T.x,y:T.y,dy:"0em"}),this.arcLengthTspan.textContent=d.arcLength.toFixed(this.decimalPlaces)+d.scale.translateUnit,this.textEle.appendChild(this.arcLengthTspan)),this.showAngle&&(this.angleTspan=createSvg("tspan",{x:T.x,y:T.y,dy:"1em"}),this.angleTspan.textContent=d.angle+"\xB0",this.textEle.appendChild(this.angleTspan))}}}},{key:"updateCircle",value:function(d){if(Number.isFinite(d)&&d<this.realVertices.length-1&&d>=0){var f=this.realVertices[d],x=f.x,k=f.y,P=this.outerLine.querySelector('circle[data-id="point'+d+'"]');return P.setAttribute("cx",x),void P.setAttribute("cy",k)}this.outerLineContainer.querySelectorAll("circle").forEach(function(I){return I.remove()});var S=[],E={};this.realVertices.forEach(function(I){var N="".concat(I.x,"-").concat(I.y);E[N]||(E[N]=!0,S.push(I))});for(var M=0;M<S.length;M++){var T=S[M],D=createSvg("circle",{"data-id":"point"+M,fill:"#1460F3",stroke:"#FFFFFF","stroke-width":2,cx:T.x,cy:T.y,r:6},{cursor:"default"});this.outerLine.append(D)}}},{key:"addPathPoint",value:function(d,f){var x=this.annotation,k=getInitialPoint({x:d,y:f},this.layer.viewport.scale);x.arcPoints.push(k),this.realVertices.push({x:d,y:f});var P=_slicedToArray(this.realVertices.slice(-2),2),S=P[0],E=P[1];[S.x,S.y,E.x,E.y].every(Number.isFinite)&&(S.x===E.x&&S.y===E.y&&(E.x+=1,E.y+=1),this.realVertices.length===3&&this.draw())}},{key:"setPathPoint",value:function(d,f,x){if(!(d>this.realVertices.length-1||d<0)){var k=this.annotation,P=this.layer.viewport.scale,S=getInitialPoint({x:f,y:x},P);if(k.arcPoints[d].x=S.x,k.arcPoints[d].y=S.y,this.realVertices[d].x=f,this.realVertices[d].y=x,this.realVertices.length===2){var E=_slicedToArray(this.realVertices,2),M=E[0],T=E[1],D={x:(M.x+T.x)/2,y:(M.y+T.y)/2},I=this.calculateCenter(M,D,T);if(!I)return;var N=(k.borderWidth||2)*P;return this.arcEle||(this.arcEle=createSvg("path",{stroke:k.borderColor,"stroke-width":N,fill:"none"}),this.svgElement.append(this.arcEle)),void this.arcEle.setAttribute("d",this.describeArc(M,D,T,I))}k.measure&&this.layer.eventBus.dispatch("updateMeasureData",{scale:this.annotation.scale,precision:this.annotation.precision,arcLength:this.annotation.arcLength,angle:this.annotation.angle||0,radius:this.annotation.radius})}}},{key:"calculateCenter",value:function(d,f,x){var k=d.x*(f.y-x.y)+f.x*(x.y-d.y)+x.x*(d.y-f.y);if(Math.abs(k)<1e-10)return{x:(d.x+x.x)/2,y:(d.y+x.y)/2};var P,S,E={x:(d.x+f.x)/2,y:(d.y+f.y)/2},M={x:(f.x+x.x)/2,y:(f.y+x.y)/2},T=f.x!==d.x?(f.y-d.y)/(f.x-d.x):1/0,D=x.x!==f.x?(x.y-f.y)/(x.x-f.x):1/0,I=T!==0&&T!==1/0?-1/T:1/0,N=D!==0&&D!==1/0?-1/D:1/0;if(T===1/0)S=N*((P=E.x)-M.x)+M.y;else if(D===1/0)S=I*((P=M.x)-E.x)+E.y;else{if(I===N)return{x:E.x,y:E.y};S=I*((P=(I*E.x-N*M.x+M.y-E.y)/(I-N))-E.x)+E.y}return isNaN(P)||isNaN(S)?null:{x:P,y:S}}},{key:"describeArc",value:function(d,f,x,k){var P=this,S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,E=function(re){return{x:k.x+(re.x-k.x)*S,y:k.y+(re.y-k.y)*S}};S!==1&&(d=E(d),f=E(f),x=E(x));var M=Math.hypot(d.x-k.x,d.y-k.y),T=function(re){return(Math.atan2(re.y-k.y,re.x-k.x)+2*Math.PI)%(2*Math.PI)},D=T(d),I=T(f),N=T(x),O=!1,F=(O=D<N?I>D&&I<N:I>D||I<N)?1:0,U=((N-D+2*Math.PI)%(2*Math.PI)<=Math.PI?O:!O)?0:1;if(S===1){var Y=this.annotation.factor,Q=Math.abs(N-D);U===1&&(Q=2*Math.PI-Q),this.annotation.measure&&(this.annotation.radius=this.formatValue(M*Y),this.annotation.angle=Math.round(Q*(180/Math.PI)),this.annotation.arcLength=this.formatValue(M*Q*Y));for(var q=[],ne=0;ne<this.annotation.arcPoints.length;ne++){var J=this.annotation.arcPoints[ne];q.push({PointX:J.x,PointY:J.y})}!this.annotation.inkPointes&&(this.annotation.inkPointes=[]),this.annotation.inkPointes[0]=q,this.changedArcPoints=[],this.changedArcPoints.push(F?x:d,f,F?d:x),this.changedArcPoints=this.changedArcPoints.map(function(re){return getInitialPoint(re,P.layer.viewport.scale)}),this.inkPoints=this.arcToPoints(M,d,x,k,F)}return"M ".concat(d.x," ").concat(d.y," A ").concat(M," ").concat(M," 0 ").concat(U," ").concat(F," ").concat(x.x," ").concat(x.y)}},{key:"calculateInkPoints",value:function(d,f,x,k,P){var S=[],E=x.x-f.x,M=x.y-f.y;if(Math.sqrt(E*E+M*M)!==0){for(var T=k.x,D=k.y,I=0;I<=1;I+=.01){var N=Math.atan2(f.y-D,f.x-T),O=Math.atan2(x.y-D,x.x-T),F=N+I*(P?(O-N+2*Math.PI)%(2*Math.PI):(O-N)%(2*Math.PI)),U={x:(T+d*Math.cos(F))/1,y:(D+d*Math.sin(F))/1};if(S.length>0){var Y=S[S.length-1],Q=U.x-Y.x,q=U.y-Y.y,ne=Math.sqrt(Q*Q+q*q);if(ne>=1)for(var J=Math.floor(ne/1),re=1;re<=J;re++){var X={x:(Y.x+Q/J*re)/1,y:(Y.y+q/J*re)/1};S.push(X)}}S.push(U)}return S}}},{key:"arcToPoints",value:function(d,f,x,k,P){var S=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1,E=Math.atan2(f.y-k.y,f.x-k.x),M=Math.atan2(x.y-k.y,x.x-k.x)-E;P?M<0&&(M+=2*Math.PI):M>0&&(M-=2*Math.PI),M=Math.abs(M);for(var T=Math.ceil(M/(S*(Math.PI/180))),D=[],I=0;I<=T;I++){var N=E+M*(I/T)*(P?1:-1),O=k.x+d*Math.cos(N),F=k.y+d*Math.sin(N);D.push({x:O,y:F})}return D}}]);var r,o,u,s,w,g,v,y,m}(),ComPDFAnnotationLayer=function(){return _createClass(function e(n){var r,o=n.documentViewer,u=n.annotationStore,s=n.pageViewer,w=n.messageHandler,g=n.pageDiv,v=n.pdfPage,y=n.annotations,m=y===void 0?null:y,d=n.annotationsAll,f=n.viewport,x=n.scale,k=n.pageIndex,P=n.eventBus,S=n.enableReply,E=S===void 0||S,M=n.$t;_classCallCheck(this,e),this.documentViewer=o,this.annotationStore=u,this.pageViewer=s,this.pageDiv=g,this.pdfPage=v,this.messageHandler=w,this.annotations=m||[],this.annotationsAll=d,this.viewport=f,this.annotationsArray=[],this.scale=x,this.eventBus=P,this.page=k,this.annotationStore.$t=M,this.enableReply=E,this._cancelled=!1,this.tool=s.tool||"",this.color=s.color||"",this.annotateManager=null,this.isDraging=!1,this.selectedElementName=null,this.addMode=!1,this.toolMode=s.toolMode||"",this.managerArray=["freetextManager","textManager","textFieldManager","checkBoxManager","radioButtonManager","pushButtonManager","listBoxManager","comboBoxManager","annotateManager","linkManager","signFieldManager","redactionManager"],this.ratio=window.devicePixelRatio||1,this.onHandleTool=this.handleTool.bind(this),this.onHandleToolMode=this.handleToolMode.bind(this),this.onHandlePropertyPanelChanged=this.handlePropertyPanelChanged.bind(this),this.onHandleAddSign=this.addSign.bind(this),this.onRedrawMarkups=this.redrawMarkups.bind(this),this.annotationStore.$t=M,this.enableReply=E,this.markupType=["highlight","underline","squiggly","strikeout"],this.ctx=(r=this.pageViewer.canvas)===null||r===void 0?void 0:r.getContext("2d")},[{key:"handleTool",value:function(e){var n=this,r=e.tool,o=e.color;if(this.tool=r,this.color=o,this.pageViewer.tool=r,this.pageViewer.color=o,this.svgElement||(this.destroy(),this.renderPaintScene()),r&&!this.markupType.includes(r)||document.querySelector(".document").classList.remove("annotation-edit"),(this.markupType.includes(r)||["cropPage","selectText","stamp","polygon","polyline","arc"].includes(r))&&this.resetManagers(),this.markupType.includes(r)&&o&&this.svgElement.classList.add("point-none"),this.managerArray.forEach(function(u){n[u]&&(n[u].tool=n.tool,n[u].color=n.color)}),["line","arrow","circle","square","ink"].includes(r)&&o&&this.toolMode!=="measurement"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("annotateManager"),this.annotateManager)return void this.annotateManager.init();this.annotateManager=new PaintShape({tool:r,color:o,layer:this})}else if(r==="freetext"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("freetextManager"),this.freetextManager)return void this.freetextManager.init();this.freetextManager=new Freetext({tool:r,color:o,layer:this})}else if(r==="text"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("textManager"),this.textManager)return void this.textManager.init();this.textManager=new Text({tool:r,color:o,layer:this})}else if(r==="textfield"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("textFieldManager"),this.textFieldManager)return void this.textFieldManager.init();this.textFieldManager=new AddTextField({tool:r,color:o,layer:this})}else if(r==="checkbox"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("checkBoxManager"),this.checkBoxManager)return void this.checkBoxManager.init();this.checkBoxManager=new AddCheckBox({tool:r,color:o,layer:this})}else if(r==="radiobutton"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("radioButtonManager"),this.radioButtonManager)return void this.radioButtonManager.init();this.radioButtonManager=new AddRadioButton({tool:r,color:o,layer:this})}else if(r==="pushbutton"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("pushButtonManager"),this.pushButtonManager)return void this.pushButtonManager.init();this.pushButtonManager=new AddPushButton({tool:r,color:o,layer:this})}else if(r==="combobox"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("comboBoxManager"),this.comboBoxManager)return void this.comboBoxManager.init();this.comboBoxManager=new AddComboBox({tool:r,color:o,layer:this})}else if(r==="listbox"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("listBoxManager"),this.listBoxManager)return void this.listBoxManager.init();this.listBoxManager=new AddListBox({tool:r,color:o,layer:this})}else if(r==="link"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("linkManager"),this.linkManager)return void this.linkManager.init();this.linkManager=new PaintLink({tool:r,color:o,layer:this})}else if(r==="signatureFields"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("signFieldManager"),this.signFieldManager)return void this.signFieldManager.init();this.signFieldManager=new AddSignField({tool:r,color:o,layer:this})}else if(r==="redaction"||r==="remove"){if(document.querySelector(".document").classList.add("annotation-edit"),this.resetManagers("redactionManager"),this.redactionManager)return void this.redactionManager.init();this.redactionManager=new PaintRedaction({tool:r,color:o,layer:this})}}},{key:"resetManagers",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];Array.isArray(n)||(n=[n]),this.managerArray.filter(function(r){return!n.includes(r)}).forEach(function(r){e[r]&&e[r].reset()})}},{key:"render",value:function(e){var n=this;if(!this._cancelled){if(this.renderPaintScene(),this.eventBus._on("toolChanged",this.onHandleTool),this.eventBus._on("toolModeChanged",this.onHandleToolMode),this.eventBus._on("setDefaultSelect",this.onHandleDefaultSelect),this.eventBus._on("propertyPanelChanged",this.onHandlePropertyPanelChanged),this.eventBus._on("redrawMarkups",this.onRedrawMarkups),e){var r=e.clone({dontFlip:!0});this.viewport=r,this.scale=r.scale,this.managerArray.forEach(function(Ee){n[Ee]&&(n[Ee].viewport=r)})}if(this.div||this.renderContainer(),this.annotations&&this.annotations.length)for(var o=this.enableReply,u=0;u<this.annotations.length;u++){var s,w,g,v,y,m,d,f=this.annotations[u];if(f)if(f.type==="custom"){var x=new Shape({annotation:f,layer:this});this.annotationsArray.push(x)}else if(f.type==="highlight"){var k=new TextHighlightAnnotation({annotation:f,layer:this,enableReply:o});this.annotationsArray.push(k)}else if(f.type==="squiggly"){var P=new TextSquigglyAnnotation({annotation:f,layer:this,enableReply:o});this.annotationsArray.push(P)}else if(f.type==="strikeout"){var S=new TextStrikeoutAnnotation({annotation:f,layer:this,enableReply:o});this.annotationsArray.push(S)}else if(f.type==="underline"){var E=new TextUnderlineAnnotation({annotation:f,layer:this,enableReply:o});this.annotationsArray.push(E)}else if(f.type!=="line"||f.isDelete)if(!["square","circle"].includes(f.type)||f.isDelete||f.measure)if(f.type!=="polygon"||f.isDelete)if(f.type!=="freetext"||f.isDelete)if(f.type!=="text"||f.isDelete)if(f.type!=="stamp"&&f.type!=="image"||f.isDelete)if(((s=f.type)===null||s===void 0?void 0:s.replace("-",""))!=="textfield"||f.isDelete)if(((w=f.type)===null||w===void 0?void 0:w.replace("-",""))!=="checkbox"||f.isDelete)if(((g=f.type)===null||g===void 0?void 0:g.replace("-",""))!=="radiobutton"||f.isDelete)if(((v=f.type)===null||v===void 0?void 0:v.replace("-",""))!=="pushbutton"||f.isDelete)if(((y=f.type)===null||y===void 0?void 0:y.replace("-",""))!=="listbox"||f.isDelete)if(((m=f.type)===null||m===void 0?void 0:m.replace("-",""))!=="combobox"||f.isDelete)if(((d=f.type)===null||d===void 0?void 0:d.replace("-",""))!=="link"||f.isDelete)if(f.type!=="signatureFields"||f.isDelete)if(f.type!=="redact"||f.isDelete)if(f.type!=="polyline"||f.isDelete)if(f.type!=="circle"||f.isDelete)if(f.type!=="rectangle"||f.isDelete){if(f.type==="arc"||f.type==="ink"&&!f.isDelete&&(f.inkPointes[0].length===3||f.arcPoints)){var M=new Arc({annotation:f,layer:this});this.annotationsArray.push(M)}else if(f.type==="ink"&&!f.isDelete&&f.measure){var T=new Curve({annotation:f,layer:this});this.annotationsArray.push(T)}else if(f.type==="ink"&&!f.isDelete&&!f.measure){var D=new Ink({annotation:f,layer:this,enableReply:o});this.annotationsArray.push(D)}}else{var I=new Rectangle({annotation:f,layer:this});this.annotationsArray.push(I)}else{var N=new Circle({annotation:f,layer:this});this.annotationsArray.push(N)}else{var O=new Polyline({annotation:f,layer:this});this.annotationsArray.push(O)}else{var F=new Redaction({annotation:f,layer:this});this.annotationsArray.push(F)}else{var U=new SignatureFields({annotation:f,layer:this});this.annotationsArray.push(U)}else{var Y=new Link({annotation:f,layer:this,highlight:this.annotationStore.highlightLink});this.annotationsArray.push(Y)}else{var Q=new ComboBox({annotation:f,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(Q)}else{var q=new ListBox({annotation:f,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(q)}else{var ne=new PushButton({annotation:f,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(ne)}else{var J=new RadioButton({annotation:f,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(J)}else{var re=new CheckBox({annotation:f,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(re)}else{var X=new TextField({annotation:f,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(X)}else{var j=new Stamp({annotation:f,layer:this,enableReply:o});this.annotationsArray.push(j)}else{var Z=new Text$1({annotation:f,layer:this,enableReply:o});this.annotationsArray.push(Z)}else{var W=new Freetext$1({annotation:f,layer:this,enableReply:o});this.annotationsArray.push(W)}else{var te=new Polygon({annotation:f,layer:this,enableReply:o});this.annotationsArray.push(te)}else{var le=new Shape$1({annotation:f,layer:this,enableReply:o});this.annotationsArray.push(le)}else{var oe=new Line({annotation:f,layer:this,enableReply:o});this.annotationsArray.push(oe)}}this.handleTool({tool:this.tool,color:this.color}),this.annotationStore.toSelectAnnotationName&&this.pageViewer.selectAnnotation(this.annotationStore.toSelectAnnotationName)}}},{key:"renderContainer",value:function(){var e=document.createElement("div");e.className="annotationContainer",this.scene.append(e),this.div=e}},{key:"emptyAnnotations",value:function(){for(var e=this.annotationsArray.length-1;e>=0;e--)this.annotationsArray[e].delete();this.annotationsArray=[]}},{key:"cancel",value:function(){this._cancelled=!0,this.destroy()}},{key:"destroy",value:function(){var e,n;this.svgElement||(this.svgElement=this.pageDiv.querySelector(".annotationLayer svg")),(e=this.svgElement)===null||e===void 0||e.remove(),this.div||(this.div=this.pageDiv.querySelector(".annotationContainer")),(n=this.div)===null||n===void 0||n.remove(),this.resetManagers(),this.svgElement=null,this.div=null,this.eventBus._off("toolChanged",this.onHandleTool),this.eventBus._off("toolModeChanged",this.onHandleToolMode),this.eventBus._off("setDefaultSelect",this.onHandleDefaultSelect),this.eventBus._off("propertyPanelChanged",this.onHandlePropertyPanelChanged),this.eventBus._off("redrawMarkups",this.onRedrawMarkups),this.annotationStore.notFirstRender=!0}},{key:"setSceneDimensions",value:function(e){if(e){var n=e.clone({dontFlip:!0});this.viewport=n,this.annotateManager&&(this.annotateManager.viewport=n)}if(this.svgElement){var r=this.viewport,o=this.scene;o.style.width=r.width+"px",o.style.height=r.height+"px",this.svgElement.setAttribute("viewBox","0 0 ".concat(r.width," ").concat(r.height))}}},{key:"renderPaintScene",value:function(){this.svgElement||(this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.scene=this.pageDiv.querySelector(".annotationLayer"),this.scene.append(this.svgElement)),this.setSceneDimensions()}},{key:"renderAnnotation",value:function(e,n){this.div||this.renderContainer();var r=this.enableReply;if(e.type==="custom"){var o=new Shape({annotation:e,layer:this});this.annotationsArray.push(o)}else if(e.type==="highlight"){var u=new TextHighlightAnnotation({annotation:e,layer:this,enableReply:r});this.annotationsArray.push(u)}else if(e.type==="squiggly"){var s=new TextSquigglyAnnotation({annotation:e,layer:this,enableReply:r});this.annotationsArray.push(s)}else if(e.type==="strikeout"){var w=new TextStrikeoutAnnotation({annotation:e,layer:this,enableReply:r});this.annotationsArray.push(w)}else if(e.type==="underline"){var g=new TextUnderlineAnnotation({annotation:e,layer:this,enableReply:r});this.annotationsArray.push(g)}else if(e.type==="line"||e.type==="arrow"){var v=new Line({annotation:e,show:n,layer:this,enableReply:r});this.annotationsArray.push(v)}else if(["square","circle"].includes(e.type)&&!e.measure){var y=new Shape$1({annotation:e,show:n,layer:this,enableReply:r});this.annotationsArray.push(y)}else if(e.type!=="polygon"||e.isDelete)if(e.type!=="freetext"||e.isDelete)if(e.type!=="text"||e.isDelete)if(e.type!=="stamp"||e.isDelete)if(e.type!=="textfield"||e.isDelete)if(e.type!=="checkbox"||e.isDelete)if(e.type!=="radiobutton"||e.isDelete)if(e.type!=="pushbutton"||e.isDelete)if(e.type!=="listbox"||e.isDelete)if(e.type!=="combobox"||e.isDelete)if(e.type!=="link"||e.isDelete)if(e.type!=="signatureFields"||e.isDelete)if(e.type!=="redact"||e.isDelete)if(e.type!=="polyline"||e.isDelete)if(e.type!=="circle"||e.isDelete)if(e.type!=="rectangle"||e.isDelete){if(e.type==="arc"||e.type==="ink"&&!e.isDelete&&(e.inkPointes[0].length===3||e.arcPoints)){var m=new Arc({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightLink});this.annotationsArray.push(m)}else if(e.type==="ink"&&!e.isDelete&&e.measure){var d=new Curve({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightLink});this.annotationsArray.push(d)}else if(e.type==="ink"&&!e.isDelete&&!e.measure){var f=new Ink({annotation:e,show:n,layer:this,enableReply:r});this.annotationsArray.push(f)}}else{var x=new Rectangle({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightLink});this.annotationsArray.push(x)}else{var k=new Circle({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightLink});this.annotationsArray.push(k)}else{var P=new Polyline({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightLink});this.annotationsArray.push(P)}else{var S=new Redaction({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightLink});this.annotationsArray.push(S)}else{var E=new SignatureFields({annotation:e,show:n,layer:this});this.annotationsArray.push(E)}else{var M=new Link({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightLink});this.annotationsArray.push(M)}else{var T=new ComboBox({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(T)}else{var D=new ListBox({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(D)}else{var I=new PushButton({annotation:e,layer:this,show:n,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(I)}else{var N=new RadioButton({annotation:e,show:n,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(N)}else{var O=new CheckBox({annotation:e,show:n,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(O)}else{var F=new TextField({annotation:e,show:n,layer:this,highlight:this.annotationStore.highlightForm});this.annotationsArray.push(F)}else{var U=new Stamp({annotation:e,show:n,layer:this,enableReply:r});this.annotationsArray.push(U)}else{var Y=new Text$1({annotation:e,show:n,layer:this,enableReply:r});this.annotationsArray.push(Y)}else{var Q=new Freetext$1({annotation:e,layer:this,show:n,enableReply:r});this.annotationsArray.push(Q)}else{var q=new Polygon({annotation:e,show:n,layer:this,enableReply:r});this.annotationsArray.push(q)}}},{key:"handleToolMode",value:function(e){this.toolMode=e,this.pageViewer.toolMode=e}},{key:"handlePropertyPanelChanged",value:function(e){var n,r=this;if(this.annotations&&this.annotations.length){var o=this.annotations.find(function(s){return s.name===r.annotationStore.selectedElementName||s.name===r.selectedElementName});if(o){var u={textfield:"textfieldPropertyPanelChanged",checkbox:"checkboxPropertyPanelChanged",radiobutton:"radioButtonPropertyPanelChanged",pushbutton:"pushButtonPropertyPanelChanged",listbox:"listBoxPropertyPanelChanged",combobox:"comboBoxPropertyPanelChanged",link:"linkPropertyPanelChanged"}[(n=o.type)===null||n===void 0?void 0:n.replace("-","")];u?this.eventBus.dispatch(u,e):o.measure?this.eventBus.dispatch("measurePropertyPanelChanged",e):this.eventBus.dispatch("annotationPropertyChanged",e)}}}},{key:"addSign",value:function(e){if(document.getElementsByClassName("sign-ink-save").length){var n=e instanceof PointerEvent;n&&this.eventBus.dispatch("getSignData",{page:this.page,viewport:this.viewport,clickX:e.offsetX,clickY:e.offsetY}),e&&e.page===this.page&&e.annotationData&&!n&&this.renderAnnotation(e.annotationData),this.pageDiv.removeEventListener("click",this.onHandleAddSign),this.eventBus.dispatch("initCursorStyle")}else this.pageDiv.removeEventListener("click",this.onHandleAddSign)}},{key:"redrawMarkups",value:function(e){var n=e.pageIndex,r=e.afterContentEdit,o=r!==void 0&&r,u=e.pagePtr,s=e.rect,w=e.isRestorePage,g=w===void 0||w;if(n===this.page){if(this.ctx.globalCompositeOperation="multiply",!o&&g){var v=Math.round(this.viewport.width*this.ratio),y=Math.round(this.viewport.height*this.ratio);this.ctx.clearRect(0,0,v,y),this.ctx.putImageData(this.pageViewer.baseImageData,0,0)}for(var m=0;m<this.annotationsArray.length;m++){var d=this.annotationsArray[m],f=d.annotation,x=d.positionArray;!f.isDelete&&this.markupType.includes(f.type)&&(o?d.reRenderAfterContentEdit:d.drawCanvas).call(d,o?{pagePtr:u,rect:s}:x)}}}},{key:"getAnnoationIndex",value:function(e){return this.annotationsArray.findIndex(function(n){return n.annotation.name===e.name})}},{key:"getAnnoation",value:function(e){return this.annotationsArray.find(function(n){return n.annotation.name===e.name})}},{key:"deleteAnnotationInLayer",value:function(e){var n=this.annotationsArray,r=this.getAnnoationIndex(e);r>-1&&n.splice(r,1)}},{key:"deleteAnnotation",value:function(e){var n=this.annotationsArray,r=this.getAnnoationIndex(e);r>-1&&n[r].handleDelete()}}])}(),toggleSelection$1=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var n=document.activeElement,r=[],o=0;o<e.rangeCount;o++)r.push(e.getRangeAt(o));switch(n.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":n.blur();break;default:n=null}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(u){e.addRange(u)}),n&&n.focus()}},deselectCurrent$1=toggleSelection$1,clipboardToIE11Formatting$1={"text/plain":"Text","text/html":"Url",default:"Text"},defaultMessage$1="Copy to clipboard: #{key}, Enter";function format$1(e){var n=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,n)}function copy$1(e,n){var r,o,u,s,w,g,v=!1;n||(n={}),r=n.debug||!1;try{if(u=deselectCurrent$1(),s=document.createRange(),w=document.getSelection(),(g=document.createElement("span")).textContent=e,g.ariaHidden="true",g.style.all="unset",g.style.position="fixed",g.style.top=0,g.style.clip="rect(0, 0, 0, 0)",g.style.whiteSpace="pre",g.style.webkitUserSelect="text",g.style.MozUserSelect="text",g.style.msUserSelect="text",g.style.userSelect="text",g.addEventListener("copy",function(y){if(y.stopPropagation(),n.format)if(y.preventDefault(),y.clipboardData===void 0){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var m=clipboardToIE11Formatting$1[n.format]||clipboardToIE11Formatting$1.default;window.clipboardData.setData(m,e)}else y.clipboardData.clearData(),y.clipboardData.setData(n.format,e);n.onCopy&&(y.preventDefault(),n.onCopy(y.clipboardData))}),document.body.appendChild(g),s.selectNodeContents(g),w.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");v=!0}catch(y){r&&console.error("unable to copy using execCommand: ",y),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(n.format||"text",e),n.onCopy&&n.onCopy(window.clipboardData),v=!0}catch(m){r&&console.error("unable to copy using clipboardData: ",m),r&&console.error("falling back to prompt"),o=format$1("message"in n?n.message:defaultMessage$1),window.prompt(o,e)}}finally{w&&(typeof w.removeRange=="function"?w.removeRange(s):w.removeAllRanges()),g&&document.body.removeChild(g),u()}return v}var copyToClipboard$1=copy$1,_editList=new WeakMap,TextEditor=function(){return _createClass(function Y(Q){var q=Q.eventBus,ne=Q.contentContainer,J=Q.container,re=Q.pageDiv,X=Q.pagePtr,j=Q.editPagePtr,Z=Q.editAreaPtr,W=Q.editAreaIndex,te=Q.viewport,le=Q.scale,oe=Q.messageHandler,Ee=Q.newAdd,Ae=Q.pageViewer,ve=Q.hidden,ke=Q.isUpdate,Ce=ke!==void 0&&ke;_classCallCheck(this,Y),_classPrivateFieldInitSpec(this,_editList,[]),this.eventBus=q,this.contentContainer=ne,this.container=J,this.pageDiv=re,this.pagePtr=X,this.editPagePtr=j,this.editAreaPtr=Z,this.editAreaIndex=W,this.viewport=te,this.scale=le,this.messageHandler=oe,this.newAdd=Ee,this.pageViewer=Ae,this.hidden=ve,this.isUpdate=Ce,this.margin=5,this.type="text",this.frame=null,this.canvas=null,this.borderWidth=2,this.pointWidth=6,this.pointHeight=6,this.activeCharPlace={SectionIndex:0,LineIndex:0,RunIndex:0,CharIndex:0},this.selectedRects=null,this.selectedCharRange=null,this.entireCharRange=null,this.state=0,this.mouseDown=!1,this.moving=!1,this.ratio=window.devicePixelRatio||1,this.removed=!1,this.start=null,this.end=null,this.newStart=null,this.newEnd=null,this.offsetX=0,this.offsetY=0,this.startPoint=null,this.endPoint=null,this.composing=!1,this.needUndoRec=!1,this.isFirefox=navigator.userAgent.indexOf("Firefox")>-1,this.mousedown=isMobileDevice$1?"touchstart":"mousedown",this.mouseup=isMobileDevice$1?"touchend":"mouseup",this.mousemove=isMobileDevice$1?"touchmove":"mousemove",this.textInput=isMobileDevice$1||this.isFirefox?"input":"textInput",this.onClick=this.handleClick.bind(this),this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.onBlur=this.handleBlur.bind(this),this.onKeydown=this.handleKeyDown.bind(this),this.onKeyup=this.handleKeyup.bind(this),this.onTextInput=this.handleTextInput.bind(this),this.onHandlePropertyPanelChanged=this.handlePropertyPanelChanged.bind(this),this.onCompositionstart=this.handleCompositionstart.bind(this),this.onCompositionend=this.handleCompositionend.bind(this),this.onShowContentEditorType=this.handleShow.bind(this),this.onHandlePopup=this.handlePopup.bind(this),this.render()},[{key:"render",value:(U=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Q,q,ne,J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke,Ce,Pe,Me,Le;return _regeneratorRuntime().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return this.eventBus._on("textPropertyChanged",this.onHandlePropertyPanelChanged),this.eventBus._on("showContentEditorType",this.onShowContentEditorType),this.eventBus._on("contentEditorPopupClicked",this.onHandlePopup),Te.next=5,this.getRect();case 5:return ne=this.margin,this.canvas=document.createElement("canvas"),this.canvas.width=(this.rect.width+2*(ne+this.borderWidth))*this.ratio,this.canvas.height=(this.rect.height+2*(ne+this.borderWidth))*this.ratio,J=createElement("div",{position:"absolute",left:this.rect.left-ne-this.borderWidth+"px",top:this.rect.top-ne-this.borderWidth+"px",width:this.rect.width+2*(ne+this.borderWidth)+"px",height:this.rect.height+2*(ne+this.borderWidth)+"px",display:this.hidden?"none":"block"},{class:"frame-container",index:this.editAreaIndex}),this.frameContainer=J,(Q=this.container)===null||Q===void 0||Q.append(this.frameContainer),this.frameContainer.appendChild(this.canvas),re=createElement("div",{position:"absolute",left:0,top:0,width:"100%",height:"100%",borderWidth:this.borderWidth+"px",borderColor:"#1460F3"},{class:"text-container"}),this.textContainer=re,(X=createElement("textarea",{position:"absolute",left:0,top:0,width:"100%",height:"100%",resize:"none",opacity:0,touchAction:"none"})).name="text-editor",this.textContainer.append(X),this.textarea=X,Te.next=21,this.getText();case 21:if(j=Te.sent,this.textarea.value=j,(q=this.frameContainer)===null||q===void 0||q.append(this.textContainer),this.textContainer.addEventListener(this.mousedown,this.onMousedown),this.textContainer.addEventListener(this.mouseup,this.onMouseup),isMobileDevice$1&&this.textarea.addEventListener("contextmenu",function(ye){return ye.preventDefault()}),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.outerLineContainer.style.position="absolute",Z=this.getOutlineRect(this.rect),W=Z.width,te=Z.height,le=Z.innerWidth,oe=Z.innerHeight,Ee=Z.left,Ae=Z.top,ve=Z.right,ke=Z.bottom,Ce=Z.centerY,Pe=Z.centerX,Me=this.rect,Le=createSvg("svg",{class:"outerline"},{position:"absolute",left:Me.left-ne-(this.pointWidth+this.borderWidth)/2+"px",top:Me.top-ne-(this.pointHeight+this.borderWidth)/2+"px",width:W+"px",height:te+"px",zIndex:2}),this.outerLine=Le,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":this.borderWidth,"fill-opacity":0,width:le,height:oe,x:this.pointWidth/2,y:this.pointHeight/2}),this.topLeftRect=createSvg("rect",{class:"nw-resize resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:Ee,y:Ae}),this.LeftRect=createSvg("rect",{class:"w-resize resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:Ee,y:Ce}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:Ee,y:ke}),this.bottomRect=createSvg("rect",{class:"s-resize resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:Pe,y:ke}),this.bottomRightRect=createSvg("rect",{class:"se-resize resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:ve,y:ke}),this.rightRect=createSvg("rect",{class:"e-resize resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:ve,y:Ce}),this.topRightRect=createSvg("rect",{class:"ne-resize resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:ve,y:Ae}),this.topRect=createSvg("rect",{class:"n-resize resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:Pe,y:Ae}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.outerLine.addEventListener(this.mousedown,this.onMousedown),this.outerLine.addEventListener(this.mouseup,this.onMouseup),this.newAdd&&(this.goEditing(),this.addUndoHistory(),this.newAdd=!1),Te.t0=this.isUpdate,!Te.t0){Te.next=60;break}return Te.next=60,this.updateCanvas();case 60:case"end":return Te.stop()}},Y,this)})),function(){return U.apply(this,arguments)})},{key:"getFrameContainerRect",value:function(){var Y=this.rect,Q=this.margin,q=this.borderWidth;return{left:Y.left-Q-q,top:Y.top-Q-q,width:Y.width+2*(Q+q),height:Y.height+2*(Q+q)}}},{key:"getOutlineRect",value:function(Y){var Q=this.margin,q=this.pointWidth,ne=this.pointHeight,J=this.borderWidth,re=Y.width+2*Q+q+J,X=Y.height+2*Q+ne+J;return{width:re,height:X,innerWidth:re-q,innerHeight:X-ne,left:0,top:0,right:re-q,bottom:X-ne,centerY:(X-ne)/2,centerX:(re-q)/2}}},{key:"getActualRect",value:function(Y,Q){var q=Q.left,ne=Q.top,J=Q.right,re=Q.bottom;return{start:getActualPoint({x:q,y:ne},Y),end:getActualPoint({x:J,y:re},Y)}}},{key:"rectCalc",value:function(Y,Q){return{top:Y.y<Q.y?Y.y:Q.y,left:Y.x<Q.x?Y.x:Q.x,width:Math.abs(Q.x-Y.x),height:Math.abs(Q.y-Y.y)}}},{key:"getInitialPoint",value:function(Y,Q){var q=this.scale;return{start:{x:Y.x/q,y:Y.y/q},end:{x:Q.x/q,y:Q.y/q}}}},{key:"handleMouseDown",value:function(Y){if(isMobileDevice$1&&Y.preventDefault(),Y.button!==2&&!this.hidden){if(this.state===1){var Q=Y.target.getAttribute("data-id"),q=getClickPoint(Y),ne=q.pageX,J=q.pageY;this.startState={operator:Q,clickX:ne,clickY:J},document.addEventListener(this.mousemove,this.onMousemove)}else if(this.state===2){if(isMobileDevice$1){var re=Y.changedTouches[0].clientX-this.pageViewer.div.getBoundingClientRect().left,X=Y.changedTouches[0].clientY-this.pageViewer.div.getBoundingClientRect().top;this.startPoint={x:re/this.scale,y:X/this.scale}}else{var j=Y.offsetX,Z=Y.offsetY;this.startPoint={x:(j+this.rect.left-this.margin-this.borderWidth)/this.scale,y:(Z+this.rect.top-this.margin-this.borderWidth)/this.scale}}this.textContainer.addEventListener(this.mousemove,this.onMousemove)}document.addEventListener(this.mouseup,this.onMouseup),this.selectedCharRange=null,this.mouseMoved=!1,this.mouseDown=!0}}},{key:"handleMouseUp",value:(F=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q){var q,ne,J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke,Ce,Pe,Me,Le,Te,ye,_e,we,Se,$e,Be,Oe,Ge,Ie,je,qe;return _regeneratorRuntime().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:if(!Q||this.textContainer.contains(Q.target)||this.state!==0){Ue.next=2;break}return Ue.abrupt("return");case 2:if((q=this.contentContainer.getSelectedEditBox())===null||q===this||this.state!==0){Ue.next=5;break}return Ue.abrupt("return");case 5:if(document.removeEventListener(this.mousemove,this.onMousemove),document.removeEventListener(this.mouseup,this.onMouseup),this.textContainer.removeEventListener(this.mousemove,this.onMousemove),Q&&Q.target!==this.textarea&&Q.target!==this.textContainer&&(isMobileDevice$1?(ne=Q.changedTouches[0].clientX-this.pageViewer.div.getBoundingClientRect().left,J=Q.changedTouches[0].clientY-this.pageViewer.div.getBoundingClientRect().top):(ne=Q.offsetX,J=Q.offsetY),re=new MouseEvent(this.mouseup,{offsetX:ne,offsetY:J,type:Q.type,target:this.textarea}),this.textarea.dispatchEvent(re)),this.mouseDown){Ue.next=11;break}return Ue.abrupt("return");case 11:if(this.mouseDown=!1,this.moving=!1,this.textContainer.removeEventListener(this.mousemove,this.onMousemove),Q.type==="touchend"&&(this.pageDiv.style.touchAction=""),X=!0,this.state===0&&(this.state=1,X=!1,this.getTextStyle(),this.contentContainer.setSelectedEditBox(this),this.eventBus.dispatch("changeRightPanelBtnDisabled",!1),this.eventBus.dispatch("contentBoxSelected",{type:"text",pageNumber:this.pageViewer.pageIndex+1})),this.state!==1){Ue.next=36;break}if(this.frameContainer.classList.remove("editing"),W={start:this.start,end:this.end},te={start:this.newStart,end:this.newEnd},le=getClickPoint(Q),oe=le.pageX,Ee=le.pageY,(oe!==((j=this.startState)===null||j===void 0?void 0:j.clickX)||Ee!==((Z=this.startState)===null||Z===void 0?void 0:Z.clickY))&&this.newStart&&this.newEnd&&(this.start=this.newStart,this.end=this.newEnd),this.container.append(this.outerLineContainer),!this.mouseMoved){Ue.next=34;break}return Ae=this.getInitialPoint(this.start,this.end),ve=Ae.start,ke=Ae.end,Ce={left:ve.x,top:ve.y,right:ke.x,bottom:ke.y},Ue.next=29,this.messageHandler.sendWithPromise("SetFrame",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,rect:Ce});case 29:return this.needUndoRec=!0,Ue.next=32,this.updateCanvas({oldPoint:W,newPoint:te});case 32:Ue.next=35;break;case 34:!this.mouseMoved&&X&&(this.state=2,isMobileDevice$1||this.eventBus.dispatch("contentPropertyChange",{type:"text",isOpen:!0}));case 35:this.showPopup();case 36:if(this.state!==2){Ue.next=65;break}return this.outerLineContainer.remove(),this.frameContainer.classList.add("editing"),isMobileDevice$1?(this.textarea.focus(),Me=Q.changedTouches[0].clientX-this.pageViewer.div.getBoundingClientRect().left,Le=Q.changedTouches[0].clientY-this.pageViewer.div.getBoundingClientRect().top,Pe={x:Me/this.scale,y:Le/this.scale}):(Te=Q.offsetX,ye=Q.offsetY,Pe={x:(Te+this.rect.left-this.margin-this.borderWidth)/this.scale,y:(ye+this.rect.top-this.margin-this.borderWidth)/this.scale}),this.mouseMoved&&(Pe=this.endPoint),this.startPoint||(this.startPoint=Pe),Ue.next=44,this.getCharsRange(this.startPoint,Pe);case 44:if(_e=Ue.sent,we=_e.start,Se=_e.end,this.activeCharPlace=Se,this.getTextStyle(),this.cursor?this.cursor.style.display="block":($e=createSvg("svg",{class:"cursor-animation"},{position:"absolute",left:"-2px",top:"-2px",width:this.rect.width+2*(this.margin+this.borderWidth)+"px",height:this.rect.height+2*(this.margin+this.borderWidth)+"px"}),this.cursor=$e,this.textContainer.append(this.cursor)),this.updateCursorLine(),(this.selectedRects&&!this.mouseMoved||we.SectionIndex===Se.SectionIndex&&we.LineIndex===Se.LineIndex&&we.RunIndex===Se.RunIndex&&we.CharIndex===Se.CharIndex)&&this.clearSelectText(),!this.selectedRects){Ue.next=57;break}return Ue.next=55,this.getText();case 55:this.selectedText=Ue.sent,this.eventBus.dispatch("contentTextSelected",this.selectedText);case 57:this.textarea.focus(),this.textarea.addEventListener("blur",this.onBlur),this.textarea.addEventListener("keydown",this.onKeydown),this.textarea.addEventListener("keyup",this.onKeyup),this.textarea.addEventListener(this.textInput,this.onTextInput),(this.isFirefox||isMobileDevice$1)&&(this.textarea.addEventListener("compositionstart",this.onCompositionstart),this.textarea.addEventListener("compositionend",this.onCompositionend)),onClickOutsideUp([this.textContainer],this.handleTextOutside.bind(this)),this.hidePopup();case 65:this.frameContainer.classList.add("selected"),this.state!==1||this.mouseMoved||(Be=[this.textContainer,this.outerLine],(Oe=document.querySelector(".editor-panel"))&&Be.push(Oe),(Ge=document.getElementById("editorPropertyPanelButton"))&&Be.push(Ge),(Ie=document.getElementById("undo"))&&Be.push(Ie),(je=document.getElementById("redo"))&&Be.push(je),(qe=document.querySelector(".content-editor-popup"))&&Be.push(qe),onClickOutsideUp(Be,this.handleOutside.bind(this)));case 67:case"end":return Ue.stop()}},Y,this)})),function(Y){return F.apply(this,arguments)})},{key:"handleMouseMove",value:(O=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q){var q,ne,J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke,Ce,Pe,Me,Le,Te,ye,_e,we,Se,$e,Be,Oe,Ge,Ie,je,qe,Ue,Je,et,nt;return _regeneratorRuntime().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:if((q=this.contentContainer.getSelectedEditBox())===null||q===this||this.state!==0){st.next=3;break}return st.abrupt("return");case 3:if(this.moving=!0,this.hidePopup(),Q.type==="touchmove"&&(this.pageDiv.style.touchAction="none"),this.state!==1){st.next=19;break}if(ne=getClickPoint(Q),J=ne.pageX,re=ne.pageY,X=this.start,j=this.end,Z=this.startState){st.next=13;break}return st.abrupt("return");case 13:if(Z.clickX!==J||Z.clickY!==re){st.next=15;break}return st.abrupt("return");case 15:W=this.viewport,te=W.width,le=W.height,Z.operator==="nw-resize"?(oe=J-(Z.clickX-this.start.x),Ee=re-(Z.clickY-this.start.y),oe=Math.min(j.x-5,oe),oe=Math.max(0,oe),Ee=Math.min(j.y-5,Ee),Ee=Math.max(0,Ee),this.updateOutline({start:{x:oe,y:Ee},end:j})):Z.operator==="w-resize"?(Ae=J-(Z.clickX-this.start.x),Ae=Math.min(j.x-5,Ae),Ae=Math.max(0,Ae),this.updateOutline({start:{x:Ae,y:X.y},end:j})):Z.operator==="sw-resize"?(ve=J-(Z.clickX-this.start.x),ke=re-(Z.clickY-this.end.y),ve=Math.min(j.x-5,ve),ve=Math.max(0,ve),ke=Math.min(le,ke),ke=Math.max(X.y+5,ke),this.updateOutline({start:{x:ve,y:X.y},end:{x:j.x,y:ke}})):Z.operator==="s-resize"?(Ce=re-(Z.clickY-this.end.y),Ce=Math.min(le,Ce),Ce=Math.max(X.y+5,Ce),this.updateOutline({start:X,end:{x:j.x,y:Ce}})):Z.operator==="se-resize"?(Pe=J-(Z.clickX-this.end.x),Me=re-(Z.clickY-this.end.y),Pe=Math.min(te,Pe),Pe=Math.max(X.x+5,Pe),Me=Math.min(le,Me),Me=Math.max(X.y+5,Me),this.updateOutline({start:X,end:{x:Pe,y:Me}})):Z.operator==="e-resize"?(Le=J-(Z.clickX-this.end.x),Le=Math.min(te,Le),Le=Math.max(X.x+5,Le),this.updateOutline({start:X,end:{x:Le,y:j.y}})):Z.operator==="ne-resize"?(Te=J-(Z.clickX-this.end.x),ye=re-(Z.clickY-this.start.y),Te=Math.min(te,Te),Te=Math.max(X.x+5,Te),ye=Math.min(j.y-5,ye),ye=Math.max(0,ye),this.updateOutline({start:{x:X.x,y:ye},end:{x:Te,y:j.y}})):Z.operator==="n-resize"?(_e=re-(Z.clickY-this.start.y),_e=Math.min(j.y-5,_e),_e=Math.max(0,_e),this.updateOutline({start:{x:X.x,y:_e},end:j})):Z.operator==="move"&&(we=J-(Z.clickX-this.start.x),Se=re-(Z.clickY-this.start.y),$e=J-(Z.clickX-this.end.x),Be=re-(Z.clickY-this.end.y),Oe={width:Math.abs(X.x-j.x),height:Math.abs(X.y-j.y)},we<$e?(we=Math.max(0,we),we=Math.min(te-Oe.width,we),$e=Math.max(Oe.width,$e),$e=Math.min(te,$e)):($e=Math.max(0,$e),$e=Math.min(te-Oe.width,$e),we=Math.max(Oe.width,we),we=Math.min(te,we)),Se<Be?(Se=Math.max(0,Se),Se=Math.min(le-Oe.height,Se),Be=Math.max(Oe.height,Be),Be=Math.min(le,Be)):(Be=Math.max(0,Be),Be=Math.min(le-Oe.height,Be),Se=Math.max(Oe.height,Se),Se=Math.min(le,Se)),this.updateOutline({start:{x:we,y:Se},end:{x:$e,y:Be}})),st.next=32;break;case 19:if(this.startPoint){st.next=21;break}return st.abrupt("return");case 21:return isMobileDevice$1?(Ie=Q.changedTouches[0].clientX-this.pageViewer.div.getBoundingClientRect().left,je=Q.changedTouches[0].clientY-this.pageViewer.div.getBoundingClientRect().top,Ge={x:Ie/this.scale,y:je/this.scale}):(qe=Q.offsetX,Ue=Q.offsetY,Ge={x:(qe+this.rect.left-this.margin-this.borderWidth)/this.scale,y:(Ue+this.rect.top-this.margin-this.borderWidth)/this.scale}),this.endPoint=Ge,st.next=25,this.getCharsRange(this.startPoint,Ge);case 25:Je=st.sent,et=Je.start,nt=Je.end,this.activeCharPlace=nt,this.selectedCharRange={start:et,end:nt},this.cursor.style.display="none",this.updateSelectedRect(!0);case 32:this.mouseMoved=!0;case 33:case"end":return st.stop()}},Y,this)})),function(Y){return O.apply(this,arguments)})},{key:"handleClick",value:function(){}},{key:"handleBlur",value:function(){}},{key:"handleTextOutside",value:function(){this.cursor&&(this.cursor.style.display="none")}},{key:"handleOutside",value:(N=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Q,q,ne,J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke,Ce=this;return _regeneratorRuntime().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(!this.moving){Pe.next=14;break}return ne=[this.textContainer,this.outerLine],(J=document.querySelector(".editor-panel"))&&ne.push(J),(re=document.getElementById("editorPropertyPanelButton"))&&ne.push(re),(X=document.getElementById("undo"))&&ne.push(X),(j=document.getElementById("redo"))&&ne.push(j),(Z=document.querySelector(".content-editor-popup"))&&ne.push(Z),onClickOutsideUp(ne,this.handleOutside.bind(this)),Pe.abrupt("return");case 14:if(this.state=this.state===2?1:this.state===1?0:this.state,(Q=this.frameContainer)===null||Q===void 0||Q.classList.remove("editing"),this.clearSelectText(),(q=this.cursor)===null||q===void 0||q.remove(),this.cursor=null,this.state===0&&((W=this.frameContainer)===null||W===void 0||W.classList.remove("selected"),(te=this.outerLineContainer)===null||te===void 0||te.remove(),this.removed||this.contentContainer.setSelectedEditBox(null),setTimeout(function(){document.querySelector(".frame-container.selected")||(Ce.eventBus.dispatch("contentPropertyChange",{type:"text",isOpen:!1}),Ce.eventBus.dispatch("changeRightPanelBtnDisabled",!0),Ce.eventBus.dispatch("contentBoxDeselected",{type:"text",pageNumber:Ce.pageViewer.pageIndex+1}))},1),this.hidePopup()),this.state!==1){Pe.next=29;break}return Pe.next=23,this.getText();case 23:if(Pe.sent.length!==0){Pe.next=27;break}return this.remove(),Pe.abrupt("return");case 27:this.textContainer.removeEventListener(this.mousemove,this.onMousemove),this.hidden||(this.container.append(this.outerLineContainer),le=[this.textContainer,this.outerLine],(oe=document.querySelector(".editor-panel"))&&le.push(oe),(Ee=document.getElementById("editorPropertyPanelButton"))&&le.push(Ee),(Ae=document.getElementById("undo"))&&le.push(Ae),(ve=document.getElementById("redo"))&&le.push(ve),(ke=document.querySelector(".content-editor-popup"))&&le.push(ke),onClickOutsideUp(le,this.handleOutside.bind(this)),this.showPopup(!1));case 29:this.textarea.removeEventListener("blur",this.onBlur),this.textarea.removeEventListener("keydown",this.onKeydown),this.textarea.removeEventListener("keyup",this.onKeyup),this.textarea.removeEventListener(this.textInput,this.onTextInput),(this.isFirefox||isMobileDevice$1)&&(this.textarea.removeEventListener("compositionstart",this.onCompositionstart),this.textarea.removeEventListener("compositionend",this.onCompositionend));case 34:case"end":return Pe.stop()}},Y,this)})),function(){return N.apply(this,arguments)})},{key:"handleKeyDown",value:(I=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q){var q,ne,J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke,Ce;return _regeneratorRuntime().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(q=Q.keyCode||Q.which,ne=[9,16,17,18,20,27,37,38,39,40,91,93],J=Q.ctrlKey||Q.altKey||Q.metaKey||ne.includes(q),this.isToolKey=J,this.state===2){Pe.next=6;break}return Pe.abrupt("return");case 6:if(q!==8&&q!==46){Pe.next=37;break}if(this.activeCharPlace.SectionIndex!==0||this.activeCharPlace.LineIndex!==0||this.activeCharPlace.RunIndex!==0||this.activeCharPlace.CharIndex!==-1||this.selectedCharRange){Pe.next=9;break}return Pe.abrupt("return");case 9:if(re={},!this.selectedCharRange){Pe.next=17;break}return Pe.next=13,this.getCharPlace("DeleteChars");case 13:re=Pe.sent,this.selectedCharRange=null,Pe.next=26;break;case 17:if(q!==8){Pe.next=23;break}return Pe.next=20,this.getCharPlace("BackSpaceChar");case 20:re=Pe.sent,Pe.next=26;break;case 23:return Pe.next=25,this.getCharPlace("DeleteChar");case 25:re=Pe.sent;case 26:return this.activeCharPlace=re,this.needUndoRec=!0,Pe.next=30,this.updateCanvas(null,!0);case 30:return this.clearSelectText(),this.updateCursorLine(),Pe.next=34,this.getText();case 34:return X=Pe.sent,this.textarea.value=X,Pe.abrupt("return");case 37:if(!this.selectedCharRange||J){Pe.next=47;break}return Pe.next=40,this.getCharPlace("DeleteChars");case 40:return j=Pe.sent,this.activeCharPlace=j,this.selectedCharRange=null,this.needUndoRec=!0,Pe.next=46,this.updateCanvas(null,!0);case 46:this.updateCursorLine();case 47:if(this.isPasteKey=(Q.metaKey||Q.ctrlKey)&&Q.key.toLowerCase()==="v",q!==37){Pe.next=55;break}return Pe.next=51,this.getCharPlace("GetPrevCharPlace");case 51:Z=Pe.sent,this.activeCharPlace=Z.start,Pe.next=124;break;case 55:if(q!==38){Pe.next=62;break}return Pe.next=58,this.getCharPlace("GetUpCharPlace");case 58:W=Pe.sent,this.activeCharPlace=W.start,Pe.next=124;break;case 62:if(q!==39){Pe.next=69;break}return Pe.next=65,this.getCharPlace("GetNextCharPlace");case 65:te=Pe.sent,this.activeCharPlace=te.start,Pe.next=124;break;case 69:if(q!==40){Pe.next=76;break}return Pe.next=72,this.getCharPlace("GetDownCharPlace");case 72:le=Pe.sent,this.activeCharPlace=le.start,Pe.next=124;break;case 76:if(!Q.metaKey&&!Q.ctrlKey||Q.key.toLowerCase()!=="c"||!this.selectedCharRange){Pe.next=84;break}return Pe.next=79,this.getText();case 79:return this.selectedText=Pe.sent,copyToClipboard$1(this.selectedText),Pe.abrupt("return");case 84:if(!Q.metaKey&&!Q.ctrlKey||Q.key.toLowerCase()!=="x"||!this.selectedCharRange){Pe.next=103;break}return Pe.next=87,this.getText();case 87:return this.selectedText=Pe.sent,copyToClipboard$1(this.selectedText),Pe.next=91,this.getCharPlace("DeleteChars");case 91:return oe=Pe.sent,this.activeCharPlace=oe,this.selectedCharRange=null,this.needUndoRec=!0,Pe.next=97,this.getText();case 97:return Ee=Pe.sent,this.textarea.value=Ee,Pe.next=101,this.updateCanvas(null,!0);case 101:Pe.next=124;break;case 103:if(!Q.metaKey&&!Q.ctrlKey||Q.key.toLowerCase()!=="a"){Pe.next=123;break}return Pe.next=106,this.getEntireCharPlace();case 106:return Ae=Pe.sent,ve=Ae.start,ke=Ae.end,this.selectedCharRange={start:ve,end:ke},Pe.next=112,this.getCharsRect(ve,ke);case 112:if((Ce=Pe.sent)!=null&&Ce.length){Pe.next=115;break}return Pe.abrupt("return");case 115:return this.selectedRects=Ce,Pe.next=118,this.getText();case 118:return this.selectedText=Pe.sent,this.selectText(),Pe.abrupt("return");case 123:return Pe.abrupt("return");case 124:return this.clearSelectText(),this.updateCursorLine(),Pe.next=128,this.getTextStyle();case 128:case"end":return Pe.stop()}},Y,this)})),function(Y){return I.apply(this,arguments)})},{key:"handleKeyup",value:function(Y){this.textarea.setSelectionRange(0,0)}},{key:"handleTextInput",value:(D=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q){var q;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!this.isToolKey||this.isPasteKey){ne.next=2;break}return ne.abrupt("return");case 2:if(q=Q.data,!this.isFirefox&&!isMobileDevice$1){ne.next=10;break}if(Q.inputType!=="insertLineBreak"){ne.next=8;break}q=`
`,ne.next=10;break;case 8:if(!this.composing&&q!==null){ne.next=10;break}return ne.abrupt("return");case 10:if(_classPrivateFieldGet2(_editList,this).push(q),!(_classPrivateFieldGet2(_editList,this).length>1)){ne.next=13;break}return ne.abrupt("return");case 13:this.handleInsertText();case 14:case"end":return ne.stop()}},Y,this)})),function(Y){return D.apply(this,arguments)})},{key:"handleInsertText",value:(T=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Q;return _regeneratorRuntime().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.messageHandler.sendWithPromise("InsertText",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace,text:_classPrivateFieldGet2(_editList,this)[0]});case 2:return Q=q.sent,this.activeCharPlace=Q,this.addUndoHistory(),this.updateCanvas(),this.updateCursorLine(),q.next=9,this.getTextStyle();case 9:if(_classPrivateFieldGet2(_editList,this).length&&_classPrivateFieldGet2(_editList,this).shift(),!(_classPrivateFieldGet2(_editList,this).length>0)){q.next=13;break}return q.next=13,this.handleInsertText();case 13:case"end":return q.stop()}},Y,this)})),function(){return T.apply(this,arguments)})},{key:"handleCompositionstart",value:function(){this.composing=!0}},{key:"handleCompositionend",value:(M=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q){var q;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,this.messageHandler.sendWithPromise("InsertText",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace,text:Q.data});case 2:q=ne.sent,this.activeCharPlace=q,this.needUndoRec=!0,this.updateCanvas(),this.updateCursorLine(),this.composing=!1;case 8:case"end":return ne.stop()}},Y,this)})),function(Y){return M.apply(this,arguments)})},{key:"getRect",value:(E=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Q,q,ne,J;return _regeneratorRuntime().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,this.messageHandler.sendWithPromise("GetFrame",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr});case 2:this.frame=re.sent,Q=this.getActualRect(this.scale,this.frame),q=Q.start,ne=Q.end,this.start=q,this.end=ne,this.oldRect=this.rect||null,J=this.rectCalc(q,ne),this.rect=J;case 9:case"end":return re.stop()}},Y,this)})),function(){return E.apply(this,arguments)})},{key:"updateCanvas",value:(S=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q,q,ne){var J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke,Ce,Pe,Me,Le,Te,ye,_e,we,Se;return _regeneratorRuntime().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(this.removed){$e.next=3;break}return $e.next=3,this.getRect();case 3:if(J=this.margin,this.frameContainer&&this.outerLineContainer&&(this.updateOutline({start:this.start,end:this.end}),re=this.getFrameContainerRect(),X=re.left,j=re.top,Z=re.width,W=re.height,setCss(this.frameContainer,{left:X+"px",top:j+"px",width:Z+"px",height:W+"px"})),Q?(te=Q.oldPoint,le=Q.newPoint,oe=this.getEntireArea(te,le),Ee=this.getActualRect(this.scale,oe),Ae=Ee.start,ve=Ee.end,ke=this.rectCalc(Ae,ve),Ce=this.rectCalc(te.start,te.end),Pe=this.getEntireArea(Ce,this.rect),Me={left:Pe.left,top:Pe.top,width:Pe.right-Pe.left,height:Pe.bottom-Pe.top},parseInt(ke.left)===parseInt(Pe.left)&&parseInt(ke.top)===parseInt(Pe.top)&&parseInt(ke.width)===parseInt(Pe.width)&&parseInt(ke.height)===parseInt(Pe.height)||(ke=Me),Le={left:parseInt(ke.left*this.ratio),top:parseInt(ke.top*this.ratio),right:parseInt(ke.left*this.ratio)+parseInt(ke.width*this.ratio),bottom:parseInt(ke.top*this.ratio)+parseInt(ke.height*this.ratio),width:parseInt(ke.width*this.ratio),height:parseInt(ke.height*this.ratio)},this.imgRect=Le,this.canvas.width=(this.rect.width+2*(J+this.borderWidth))*this.ratio,this.canvas.height=(this.rect.height+2*(J+this.borderWidth))*this.ratio):q?(Te=this.getEntireArea(this.oldRect,this.rect),ye={left:parseInt(Te.left*this.ratio),top:parseInt(Te.top*this.ratio),right:parseInt(Te.right*this.ratio),bottom:parseInt(Te.bottom*this.ratio),width:parseInt(Te.right*this.ratio)-parseInt(Te.left*this.ratio),height:parseInt(Te.bottom*this.ratio)-parseInt(Te.top*this.ratio)},this.imgRect=ye,this.canvas.width=(this.rect.width+2*(J+this.borderWidth))*this.ratio,this.canvas.height=(this.rect.height+2*(J+this.borderWidth))*this.ratio):(_e={left:parseInt(this.rect.left*this.ratio),top:parseInt(this.rect.top*this.ratio),right:parseInt(this.rect.left*this.ratio)+parseInt(this.rect.width*this.ratio),bottom:parseInt(this.rect.top*this.ratio)+parseInt(this.rect.height*this.ratio),width:parseInt(this.rect.width*this.ratio),height:parseInt(this.rect.height*this.ratio)},this.imgRect=_e,this.canvas.width=_e.width+2*(J+this.borderWidth)*this.ratio,this.canvas.height=_e.height+2*(J+this.borderWidth)*this.ratio),!ne){$e.next=8;break}return $e.abrupt("return");case 8:if(we=null,!this.pageViewer.documentViewer.renderLayerPermission||!this.pageViewer.documentViewer.layers.length){$e.next=15;break}return $e.next=12,this.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top,ocgsPtr:_toConsumableArray$1(this.pageViewer.documentViewer.ocgsPtr)});case 12:we=$e.sent,$e.next=18;break;case 15:return $e.next=17,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top});case 17:we=$e.sent;case 18:Se=we.imageArray,this.imageArray=Se,this.drawCanvas(),this.saveEdit();case 22:case"end":return $e.stop()}},Y,this)})),function(Y,Q,q){return S.apply(this,arguments)})},{key:"drawCanvas",value:function(){var Y=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.imgRect){if(this.pageViewer.canvas&&!Y){var Q=this.pageViewer.canvas.getContext("2d"),q=Q.createImageData(parseInt(this.imgRect.width),parseInt(this.imgRect.height));q.data.set(this.imageArray),Q.putImageData(q,this.imgRect.left,this.imgRect.top),this.eventBus.dispatch("redrawMarkups",{pageIndex:this.pageViewer.pageIndex,afterContentEdit:!0,rect:this.oldRect?this.getEntireArea(this.oldRect,this.rect):this.rect,pagePtr:this.pagePtr})}}else this.updateCanvas(null,null,Y)}},{key:"updateCursorLine",value:(P=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q){var q,ne,J,re;return _regeneratorRuntime().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return Q&&(this.activeCharPlace=Q),X.next=3,this.messageHandler.sendWithPromise("GetTextCursorPoints",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 3:if(q=X.sent,this.cursor){X.next=6;break}return X.abrupt("return");case 6:ne=this.margin,J=this.borderWidth,this.cursor.innerHTML="",setCss(this.cursor,{width:this.rect.width+2*(ne+J)+"px",height:this.rect.height+2*(ne+J)+"px"}),re=createSvg("line",{x1:q.HighPointX*this.scale-this.rect.left+ne+J,x2:q.LowPointX*this.scale-this.rect.left+ne+J,y1:q.HighPointY*this.scale-this.rect.top+ne+J,y2:q.LowPointY*this.scale-this.rect.top+ne+J,stroke:"currentcolor"}),this.cursorLine=re,this.cursor.append(re);case 13:case"end":return X.stop()}},Y,this)})),function(Y){return P.apply(this,arguments)})},{key:"getTextStyle",value:(k=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Q,q,ne,J,re,X,j,Z;return _regeneratorRuntime().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,this.messageHandler.sendWithPromise("GetTextStyle",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 2:return Q=W.sent,W.next=5,this.messageHandler.sendWithPromise("GetBaseFontName",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 5:return q=W.sent,W.next=8,this.messageHandler.sendWithPromise("GetLineLeading",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 8:return ne=W.sent,W.next=11,this.messageHandler.sendWithPromise("GetSectionAfterLeading",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 11:return J=W.sent,W.next=14,this.getEntireCharPlace();case 14:return re=this.selectedCharRange||this.entireCharRange,W.next=17,this.messageHandler.sendWithPromise("GetCharacterSpacing",{editAreaPtr:this.editAreaPtr,start:re.start,end:re.end});case 17:return X=W.sent,j={color:"rgb(".concat(Q.R,", ").concat(Q.G,", ").concat(Q.B,")"),opacity:Math.round(100*Q.Transparency),fontStyle:Q.IsBold&&Q.IsItalic?3:Q.IsBold||Q.IsItalic?Q.IsBold?1:2:0,fontSize:Math.round(Q.FontSize),fontFamily:q,lineSpacing:Math.round(10*ne)/10,paragraphSpacing:Math.round(10*J)/10,characterSpacing:Math.max(Math.round(10*X)/10,0)},this.textStyle=j,W.next=22,this.messageHandler.sendWithPromise("GetTextSectionAlignType",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace});case 22:Z=W.sent,this.eventBus.dispatch("contentPropertyChange",_objectSpread2$1(_objectSpread2$1({type:"text"},j),{},{alignType:Z}));case 24:case"end":return W.stop()}},Y,this)})),function(){return k.apply(this,arguments)})},{key:"getCharPlace",value:(x=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q){var q;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return q={editAreaPtr:this.editAreaPtr,char:this.activeCharPlace},Q==="DeleteChars"&&(q.start=this.selectedCharRange.start,q.end=this.selectedCharRange.end),ne.next=4,this.messageHandler.sendWithPromise(Q,q);case 4:return ne.abrupt("return",ne.sent);case 5:case"end":return ne.stop()}},Y,this)})),function(Y){return x.apply(this,arguments)})},{key:"getCharsRange",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q,q){return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,this.messageHandler.sendWithPromise("SelectCharsRangeAtPos",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,startPoint:Q,endPoint:q});case 2:return ne.abrupt("return",ne.sent);case 3:case"end":return ne.stop()}},Y,this)})),function(Y,Q){return f.apply(this,arguments)})},{key:"saveEdit",value:function(){this.messageHandler.sendWithPromise("EndEdit",this.editPagePtr),this.needUndoRec&&(this.addUndoHistory(),this.needUndoRec=!1)}},{key:"getText",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Q,q,ne;return _regeneratorRuntime().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!this.selectedCharRange){J.next=7;break}return Q=this.selectedCharRange,q=Q.start,ne=Q.end,J.next=4,this.messageHandler.sendWithPromise("GetTextByRange",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,start:q,end:ne});case 4:case 9:return J.abrupt("return",J.sent);case 7:return J.next=9,this.messageHandler.sendWithPromise("GetText",this.editAreaPtr);case 10:case"end":return J.stop()}},Y,this)})),function(){return d.apply(this,arguments)})},{key:"updateOutline",value:function(Y){var Q=Y.start,q=Y.end,ne=this.rectCalc(Q,q);this.newStart=Q,this.newEnd=q;var J=this.getOutlineRect(ne),re=J.width,X=J.height,j=J.innerWidth,Z=J.innerHeight,W=J.right,te=J.bottom,le=J.centerY,oe=J.centerX;setCss(this.outerLine,{left:ne.left-this.margin-(this.pointWidth+this.borderWidth)/2+"px",top:ne.top-this.margin-(this.pointHeight+this.borderWidth)/2+"px",width:re+"px",height:X+"px"}),this.moveRect.setAttribute("width",j),this.moveRect.setAttribute("height",Z),this.LeftRect.setAttribute("y",le),this.bottomLeftRect.setAttribute("y",te),this.bottomRect.setAttribute("x",oe),this.bottomRect.setAttribute("y",te),this.bottomRightRect.setAttribute("x",W),this.bottomRightRect.setAttribute("y",te),this.rightRect.setAttribute("x",W),this.rightRect.setAttribute("y",le),this.topRightRect.setAttribute("x",W),this.topRect.setAttribute("x",oe)}},{key:"getCharsRect",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q,q,ne){var J,re,X,j,Z,W,te,le;return _regeneratorRuntime().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(Q.SectionIndex!==q.SectionIndex||Q.LineIndex!==q.LineIndex||Q.RunIndex!==q.RunIndex||Q.CharIndex!==q.CharIndex){oe.next=2;break}return oe.abrupt("return");case 2:return oe.next=4,this.messageHandler.sendWithPromise("GetSelectLineRects",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,start:Q,end:q});case 4:for(J=oe.sent,re=[],X=0;X<J.length;X++)j={left:J[X].Left,top:J[X].Top,right:J[X].Right,bottom:J[X].Bottom},Z=this.getActualRect(this.scale,j),W=Z.start,te=Z.end,ne||(this.start=W,this.end=te),le=this.rectCalc(W,te,0),re.push(le);return oe.abrupt("return",re);case 8:case"end":return oe.stop()}},Y,this)})),function(Y,Q,q){return m.apply(this,arguments)})},{key:"updateSelectedRect",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q){var q,ne,J,re,X,j,Z,W,te,le,oe,Ee;return _regeneratorRuntime().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(this.selectedCharRange){Ae.next=2;break}return Ae.abrupt("return");case 2:return J=this.selectedCharRange,re=J.start,X=J.end,Ae.next=5,this.getCharsRect(re,X);case 5:if((j=Ae.sent)!=null&&j.length){Ae.next=8;break}return Ae.abrupt("return");case 8:if(Z=(q=this.selectedRects)===null||q===void 0?void 0:q[this.selectedRects.length-1],!Q||(Z==null?void 0:Z.left)!==j[0].left||(Z==null?void 0:Z.top)!==j[0].top||(Z==null?void 0:Z.width)!==j[0].width||(Z==null?void 0:Z.height)!==j[0].height){Ae.next=12;break}return this.selectedRects=j,Ae.abrupt("return");case 12:if(W=this.canvas.getContext("2d"),(ne=this.selectedRects)===null||ne===void 0||!ne.length){Ae.next=26;break}te=Math.max(this.selectedRects.length,j.length),le=0;case 16:if(!(le<te)){Ae.next=25;break}if(oe=this.selectedRects[le],Ee=j[le],(oe==null?void 0:oe.left)!==(Ee==null?void 0:Ee.left)||(oe==null?void 0:oe.top)!==(Ee==null?void 0:Ee.top)||(oe==null?void 0:oe.width)!==(Ee==null?void 0:Ee.width)||(oe==null?void 0:oe.height)!==(Ee==null?void 0:Ee.height)){Ae.next=21;break}return Ae.abrupt("continue",22);case 21:W.clearRect(0,0,this.canvas.width,this.canvas.height);case 22:le++,Ae.next=16;break;case 25:this.drawCanvas(!0);case 26:this.selectedRects=j,this.selectText(),this.updateCursorLine();case 29:case"end":return Ae.stop()}},Y,this)})),function(Y){return y.apply(this,arguments)})},{key:"selectText",value:function(){var Y;if((Y=this.selectedRects)!==null&&Y!==void 0&&Y.length){var Q=this.canvas.getContext("2d");Q.clearRect(0,0,this.canvas.width,this.canvas.height);var q,ne=this.margin,J=this.borderWidth,re=_createForOfIteratorHelper(this.selectedRects);try{for(re.s();!(q=re.n()).done;){var X=q.value;Q.beginPath(),Q.fillStyle="rgba(0, 117, 255, 0.3)",Q.fillRect((X.left-this.rect.left+ne+J)*this.ratio,(X.top-this.rect.top+ne+J)*this.ratio,X.width*this.ratio,X.height*this.ratio)}}catch(j){re.e(j)}finally{re.f()}}}},{key:"clearSelectText",value:function(){var Y;(Y=this.selectedRects)!==null&&Y!==void 0&&Y.length&&(this.canvas.getContext("2d").clearRect(0,0,this.canvas.width,this.canvas.height),this.updateCanvas()),this.selectedRects=null,this.selectedCharRange=null,this.selectedText=""}},{key:"handlePropertyPanelChanged",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q){var q,ne,J,re;return _regeneratorRuntime().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(this.state!==0){X.next=2;break}return X.abrupt("return");case 2:return q=!1,X.next=5,this.getEntireCharPlace();case 5:ne=this.selectedCharRange||this.entireCharRange,X.t0=_regeneratorRuntime().keys(Q);case 7:if((X.t1=X.t0()).done){X.next=70;break}if(J=X.t1.value,Q[J]!==this.textStyle[J]){X.next=11;break}return X.abrupt("continue",7);case 11:if(J!=="alignType"){X.next=19;break}if(this.selectedCharRange||this.state!==2){X.next=17;break}return X.next=15,this.messageHandler.sendWithPromise("SetTextAligningSection",{editAreaPtr:this.editAreaPtr,alignType:Q.alignType,char:this.activeCharPlace});case 15:X.next=19;break;case 17:return X.next=19,this.messageHandler.sendWithPromise("SetTextAligningRange",{editAreaPtr:this.editAreaPtr,alignType:Q.alignType,start:ne.start,end:ne.end});case 19:if(J!=="color"){X.next=22;break}return X.next=22,this.messageHandler.sendWithPromise("SetCharsFontColor",{editAreaPtr:this.editAreaPtr,start:ne.start,end:ne.end,color:Q.color});case 22:if(J!=="opacity"){X.next=25;break}return X.next=25,this.messageHandler.sendWithPromise("SetCharsFontTransparency",{editAreaPtr:this.editAreaPtr,start:ne.start,end:ne.end,opacity:Q.opacity/100});case 25:if(J!=="fontSize"){X.next=28;break}return X.next=28,this.messageHandler.sendWithPromise("SetCharsFontSize",{editAreaPtr:this.editAreaPtr,start:ne.start,end:ne.end,fontSize:Q.fontSize});case 28:if(J!=="fontFamily"){X.next=31;break}return X.next=31,this.messageHandler.sendWithPromise("SetFontFromNativeTrueTypeFont",{editAreaPtr:this.editAreaPtr,start:ne.start,end:ne.end,fontFamily:Q.fontFamily});case 31:if(J!=="fontStyle"){X.next=56;break}return re=Q.fontStyle,X.next=35,this.setCharsFontStyle("ClearCharsFontBold");case 35:return X.next=37,this.refreshSelectedRange();case 37:return X.next=39,this.setCharsFontStyle("ClearCharsFontItalic");case 39:return X.next=41,this.refreshSelectedRange();case 41:if(re!==1){X.next=46;break}return X.next=44,this.setCharsFontStyle("SetCharsFontBold");case 44:X.next=56;break;case 46:if(re!==2){X.next=51;break}return X.next=49,this.setCharsFontStyle("SetCharsFontItalic");case 49:X.next=56;break;case 51:if(re!==3){X.next=56;break}return X.next=54,this.setCharsFontStyle("SetCharsFontBold");case 54:return X.next=56,this.setCharsFontStyle("SetCharsFontItalic");case 56:if(J!=="lineSpacing"){X.next=59;break}return X.next=59,this.messageHandler.sendWithPromise("SetLineLeading",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace,spacing:Q.lineSpacing});case 59:if(J!=="paragraphSpacing"){X.next=62;break}return X.next=62,this.messageHandler.sendWithPromise("SetSectionAfterLeading",{editAreaPtr:this.editAreaPtr,char:this.activeCharPlace,spacing:Q.paragraphSpacing});case 62:if(J!=="characterSpacing"){X.next=65;break}return X.next=65,this.messageHandler.sendWithPromise("SetCharacterSpacing",{editAreaPtr:this.editAreaPtr,start:ne.start,end:ne.end,spacing:Q.characterSpacing});case 65:this.textStyle[J]=Q[J],q=!0,this.needUndoRec=!0,X.next=7;break;case 70:if(q){X.next=72;break}return X.abrupt("return");case 72:return X.next=74,this.updateCanvas(null,!0);case 74:if(!this.selectedCharRange||this.state!==2){X.next=77;break}return X.next=77,this.refreshSelectedRange();case 77:this.state===2&&(this.updateSelectedRect(),this.updateCursorLine());case 78:case"end":return X.stop()}},Y,this)})),function(Y){return v.apply(this,arguments)})},{key:"setCharsFontStyle",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q){var q;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return q=this.selectedCharRange||this.entireCharRange,ne.next=3,this.messageHandler.sendWithPromise("SetCharsFontStyle",{editAreaPtr:this.editAreaPtr,start:q.start,end:q.end,fontStyle:Q});case 3:case"end":return ne.stop()}},Y,this)})),function(Y){return g.apply(this,arguments)})},{key:"hexToRgb",value:function(Y){return Y=(Y=Y.replace("#","")).length===3?Y.repeat(2):Y,{r:parseInt(Y.substr(0,2),16),g:parseInt(Y.substr(2,2),16),b:parseInt(Y.substr(4,2),16)}}},{key:"getEntireArea",value:function(Y,Q){var q=null;if("start"in Y&&"start"in Q){var ne=this.getInitialPoint(Y.start,Y.end),J=this.getInitialPoint(Q.start,Q.end);q={left:Math.min(ne.start.x,J.start.x),top:Math.min(ne.start.y,J.start.y),right:Math.max(ne.end.x,J.end.x),bottom:Math.max(ne.end.y,J.end.y)}}else"left"in Y&&"left"in Q&&(q={left:Math.min(Y.left,Q.left),top:Math.min(Y.top,Q.top),right:Math.max(Y.left+Y.width,Q.left+Q.width),bottom:Math.max(Y.top+Y.height,Q.top+Q.height)});return q}},{key:"goEditing",value:function(){this.state=2,this.eventBus.dispatch("changeRightPanelBtnDisabled",!1),this.contentContainer.setSelectedEditBox(this),this.frameContainer.classList.add("selected"),this.frameContainer.classList.add("editing"),this.activeCharPlace={SectionIndex:0,LineIndex:0,RunIndex:0,CharIndex:-1};var Y=createSvg("svg",{class:"cursor-animation"},{position:"absolute",left:0,top:0,width:"100%",height:"100%"});this.cursor=Y,this.textContainer.append(this.cursor),this.updateCursorLine(),this.textarea.focus(),this.textarea.addEventListener("blur",this.onBlur),this.textarea.addEventListener("keydown",this.onKeydown),this.textarea.addEventListener("keyup",this.onKeyup),this.textarea.addEventListener(this.textInput,this.onTextInput),(this.isFirefox||isMobileDevice$1)&&(this.textarea.addEventListener("compositionstart",this.onCompositionstart),this.textarea.addEventListener("compositionend",this.onCompositionend));var Q=[this.textContainer,this.outerLine],q=document.querySelector(".editor-panel");q&&Q.push(q);var ne=document.getElementById("editorPropertyPanelButton");ne&&Q.push(ne);var J=document.getElementById("undo");J&&Q.push(J);var re=document.getElementById("redo");re&&Q.push(re);var X=document.querySelector(".content-editor-popup");X&&Q.push(X),onClickOutsideUp(Q,this.handleOutside.bind(this))}},{key:"remove",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){return _regeneratorRuntime().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return this.state=0,Q.next=3,this.handleOutside();case 3:return Q.next=5,this.outerLineContainer.remove();case 5:return this.frameContainer.remove(),this.frameContainer=null,this.contentContainer.setSelectedEditBox(null),this.removed=!0,Q.next=11,this.messageHandler.send("RemoveEditAreaByIndex",{editPagePtr:this.editPagePtr,editAreaIndex:this.editAreaIndex});case 11:this.needUndoRec=!0,this.updateCanvas(),this.contentContainer.removeEditor(this.editAreaIndex),this.eventBus.dispatch("contentPropertyChange",{type:"text",isOpen:!1}),this.eventBus._off("textPropertyChanged",this.onHandlePropertyPanelChanged),this.eventBus._off("showContentEditorType",this.onShowContentEditorType),this.eventBus._off("contentEditorPopupClicked",this.onHandlePopup);case 18:case"end":return Q.stop()}},Y,this)})),function(){return w.apply(this,arguments)})},{key:"removeViewer",value:function(){var Y,Q;this.state=0,(Y=this.outerLineContainer)===null||Y===void 0||Y.remove(),(Q=this.frameContainer)===null||Q===void 0||Q.remove(),this.frameContainer=null,this.contentContainer.setSelectedEditBox(null),this.removed=!0,this.eventBus.dispatch("contentPropertyChange",{type:"text",isOpen:!1})}},{key:"getEntireCharPlace",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Q,q,ne;return _regeneratorRuntime().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,this.messageHandler.sendWithPromise("GetBeginAndEndCharPlace",this.editAreaPtr);case 2:return Q=J.sent,q=Q.start,ne=Q.end,this.entireCharRange={start:q,end:ne},J.abrupt("return",{start:q,end:ne});case 7:case"end":return J.stop()}},Y,this)})),function(){return s.apply(this,arguments)})},{key:"selectedAllText",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Q,q,ne,J;return _regeneratorRuntime().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(this.state===1||this.state===2){re.next=2;break}return re.abrupt("return");case 2:return re.next=4,this.getEntireCharPlace();case 4:return Q=re.sent,q=Q.start,ne=Q.end,this.selectedCharRange={start:q,end:ne},re.next=10,this.getCharsRect(q,ne);case 10:if((J=re.sent)!=null&&J.length){re.next=13;break}return re.abrupt("return");case 13:return this.selectedRects=J,re.next=16,this.getText();case 16:this.selectedText=re.sent,this.selectText();case 18:case"end":return re.stop()}},Y,this)})),function(){return u.apply(this,arguments)})},{key:"handleShow",value:function(Y){Y==="image"?(this.hidden=!0,this.frameContainer&&(this.frameContainer.style.display="none"),this.state===1&&this.handleOutside()):(this.hidden=!1,this.frameContainer&&(this.frameContainer.style.display="block"))}},{key:"addUndoHistory",value:function(){this.contentContainer.handleOperateList({editPagePtr:this.editPagePtr,editAreaIndex:this.editAreaIndex,editAreaPtr:this.editAreaPtr,pageIndex:this.pageViewer.pageIndex})}},{key:"updateCanvasAfterUndoRedo",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Q,q,ne,J,re,X,j,Z,W,te;return _regeneratorRuntime().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.next=2,this.getRect();case 2:if(Q=this.margin,this.frameContainer&&this.outerLineContainer&&(this.updateOutline({start:this.start,end:this.end}),q=this.getFrameContainerRect(),ne=q.left,J=q.top,re=q.width,X=q.height,setCss(this.frameContainer,{left:ne+"px",top:J+"px",width:re+"px",height:X+"px"})),j=this.getEntireArea(this.oldRect,this.rect),Z={left:parseInt(j.left*this.ratio),top:parseInt(j.top*this.ratio),right:parseInt(j.right*this.ratio),bottom:parseInt(j.bottom*this.ratio),width:parseInt(j.right*this.ratio)-parseInt(j.left*this.ratio),height:parseInt(j.bottom*this.ratio)-parseInt(j.top*this.ratio)},this.imgRect=Z,this.canvas.width=(this.rect.width+2*(Q+this.borderWidth))*this.ratio,this.canvas.height=(this.rect.height+2*(Q+this.borderWidth))*this.ratio,W=null,!this.pageViewer.documentViewer.renderLayerPermission||!this.pageViewer.documentViewer.layers.length){le.next=16;break}return le.next=13,this.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top,ocgsPtr:_toConsumableArray$1(this.pageViewer.documentViewer.ocgsPtr)});case 13:W=le.sent,le.next=19;break;case 16:return le.next=18,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top});case 18:W=le.sent;case 19:te=W.imageArray,this.imageArray=te,this.drawCanvas(),this.saveEdit(),this.contentContainer.getSelectedEditBox()===this&&this.getTextStyle();case 24:case"end":return le.stop()}},Y,this)})),function(){return o.apply(this,arguments)})},{key:"refreshSelectedRange",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Q,q,ne,J;return _regeneratorRuntime().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return Q=this.selectedCharRange||this.entireCharRange,re.next=3,this.messageHandler.sendWithPromise("RefreshRange",{editAreaPtr:this.editAreaPtr,start:Q.start,end:Q.end});case 3:q=re.sent,ne=q.start,J=q.end,this.selectedCharRange?this.selectedCharRange={start:ne,end:J}:this.entireCharRange={start:ne,end:J},this.activeCharPlace.CharIndex===ne.CharIndex?this.activeCharPlace=ne:this.activeCharPlace=J;case 8:case"end":return re.stop()}},Y,this)})),function(){return r.apply(this,arguments)})},{key:"showPopup",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function Y(){var Q,q,ne,J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke,Ce,Pe,Me,Le=arguments;return _regeneratorRuntime().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(Q=!(Le.length>0&&Le[0]!==void 0)||Le[0],q=this.container.getBoundingClientRect(),this.pageDiv.contains(this.container)){Te.next=6;break}return Te.next=5,this.handleOutside();case 5:return Te.abrupt("return");case 6:if(ne=q.left+this.rect.left-this.borderWidth-this.margin,J=this.rect.top+q.top-this.borderWidth-this.margin,re=ne+2*(this.borderWidth+this.margin)+this.rect.width,X=J+2*(this.borderWidth+this.margin)+this.rect.height,j={left:ne,top:J,right:re,bottom:X},this.eventBus.dispatch("showContentEditorPopup",{rect:j}),this.isPopupShow=!0,this.state!==1||!Q){Te.next=31;break}if(Z=[],Te.t0=this.selectedCharRange,Te.t0){Te.next=20;break}return Te.next=19,this.getEntireCharPlace();case 19:Te.t0=Te.sent;case 20:return W=Te.t0,te=W.start,le=W.end,Te.next=25,this.getCharsRect(te,le,!0);case 25:for(oe=Te.sent,Ee=0;Ee<oe.length;Ee++)Ae=oe[Ee],ve=Ae.left,ke=Ae.top,Ce=Ae.width,Pe=Ae.height,Z.push({left:ve,top:ke,right:ve+Ce,bottom:ke+Pe});return Te.next=29,this.getText();case 29:Me=Te.sent,this.eventBus.dispatch("contentSelected",{selectedText:Me,pageNumber:this.pageViewer.pageIndex+1,textRects:Z});case 31:case"end":return Te.stop()}},Y,this)})),function(){return n.apply(this,arguments)})},{key:"hidePopup",value:function(){this.isPopupShow&&(this.isPopupShow=!1,this.eventBus.dispatch("showContentEditorPopup"))}},{key:"handlePopup",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function Y(Q){var q;return _regeneratorRuntime().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(this.state!==0){ne.next=2;break}return ne.abrupt("return");case 2:ne.t0=Q,ne.next=ne.t0==="copy"?5:ne.t0==="delete"?10:12;break;case 5:return ne.next=7,this.getText();case 7:return q=ne.sent,copyToClipboard$1(q),ne.abrupt("break",12);case 10:return this.remove(),ne.abrupt("break",12);case 12:case"end":return ne.stop()}},Y,this)})),function(Y){return e.apply(this,arguments)})}]);var e,n,r,o,u,s,w,g,v,y,m,d,f,x,k,P,S,E,M,T,D,I,N,O,F,U}(),ImageEditor=function(){return _createClass(function x(k){var P=k.eventBus,S=k.contentContainer,E=k.container,M=k.pageDiv,T=k.pagePtr,D=k.editPagePtr,I=k.editAreaPtr,N=k.editAreaIndex,O=k.viewport,F=k.scale,U=k.messageHandler,Y=k.newAdd,Q=k.pageViewer,q=k.$t,ne=k.hidden;_classCallCheck(this,x),this.eventBus=P,this.contentContainer=S,this.container=E,this.pageDiv=M,this.pagePtr=T,this.editPagePtr=D,this.editAreaPtr=I,this.editAreaIndex=N,this.viewport=O,this.scale=F,this.messageHandler=U,this.newAdd=Y,this.pageViewer=Q,this.$t=q,this.hidden=ne,this.type="image",this.deleteSvgStr=`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path id="ic" fill-rule="evenodd" clip-rule="evenodd" d="M13 2.75V1.25H7V2.75H13ZM19 5.75V4.25H16.75H3.25H1V5.75H3.25V18.75H16.75V5.75H19ZM4.75 17.25V5.75H15.25V17.25H4.75ZM8.75 8.5V14.5H7.25V8.5H8.75ZM12.75 8.5V14.5H11.25V8.5H12.75Z" fill="currentColor"/>
    </svg>`,this.attrbuteSvgStr=`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M8.54546 4.375L16.6666 4.375V5.625L8.54546 5.625C8.29821 6.2358 7.69939 6.66667 6.99994 6.66667C6.30049 6.66667 5.70167 6.2358 5.45442 5.625L3.33325 5.625L3.33325 4.375L5.45442 4.375C5.70167 3.7642 6.30049 3.33333 6.99994 3.33333C7.69939 3.33333 8.29821 3.7642 8.54546 4.375ZM3.33325 10.625L11.2877 10.625C11.5349 11.2358 12.1337 11.6667 12.8332 11.6667C13.5326 11.6667 14.1314 11.2358 14.3787 10.625H16.6666V9.375H14.3787C14.1314 8.7642 13.5326 8.33333 12.8332 8.33333C12.1337 8.33333 11.5349 8.7642 11.2877 9.375L3.33325 9.375L3.33325 10.625ZM5.45432 15.625H3.33325L3.33325 14.375H5.45432C5.70156 13.7642 6.30038 13.3333 6.99984 13.3333C7.69929 13.3333 8.29811 13.7642 8.54535 14.375L16.6666 14.375V15.625L8.54535 15.625C8.29811 16.2358 7.69929 16.6667 6.99984 16.6667C6.30038 16.6667 5.70156 16.2358 5.45432 15.625Z" fill="currentColor"/>
    </svg>`,this.frame=null,this.borderWidth=2,this.pointWidth=6,this.pointHeight=6,this.activeCharPlace=null,this.selectedRects=null,this.selectedCharRange=null,this.state=0,this.mouseDown=!1,this.moving=!1,this.ratio=window.devicePixelRatio||1,this.opacity=1,this.imageRatio=1,this.imageUrl=null,this.cropped=!1,this.removed=!1,this.listener=null,this.start=null,this.end=null,this.newStart=null,this.newEnd=null,this.needUndoRec=!1,this.mousedown=isMobileDevice$1?"touchstart":"mousedown",this.mouseup=isMobileDevice$1?"touchend":"mouseup",this.mousemove=isMobileDevice$1?"touchmove":"mousemove",this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.onHandlePropertyPanelChanged=this.handlePropertyPanelChanged.bind(this),this.onDelete=this.handleDelete.bind(this),this.toggleAttrbutePanel=this.toggleAttrbutePanel.bind(this),this.onShowContentEditorType=this.handleShow.bind(this),this.render()},[{key:"render",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function x(){var k,P,S,E;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return this.eventBus._on("imagePropertyChanged",this.onHandlePropertyPanelChanged),this.eventBus._on("showContentEditorType",this.onShowContentEditorType),M.next=4,this.updateCanvas();case 4:return M.next=6,this.messageHandler.sendWithPromise("GetImageTransparency",this.editAreaPtr);case 6:this.opacity=M.sent,(P=createElement("div",{position:"absolute",left:this.rect.left+"px",top:this.rect.top+"px",width:this.rect.width+"px",height:this.rect.height+"px",display:this.hidden?"none":"block"},{class:"frame-container",index:this.editAreaIndex})).classList.add("image"),this.frameContainer=P,(k=this.container)===null||k===void 0||k.append(this.frameContainer),S=createElement("div",{position:"absolute",left:0,top:0,width:"100%",height:"100%",borderWidth:this.borderWidth+"px",borderColor:"#1460F3"},{class:"image-container"}),this.imageContainer=S,this.frameContainer.append(this.imageContainer),this.imageContainer.addEventListener(this.mousedown,this.onMousedown),this.imageContainer.addEventListener(this.mouseup,this.onMouseup),this.outerLineContainer=document.createElement("div"),this.outerLineContainer.className="outline-container",this.outerLineContainer.style.position="absolute",this.popupElement=createElement("div",{left:this.rect.left+this.rect.width-80+"px",top:this.rect.top+this.rect.height+12+"px"},{class:"popupElement"}),this.deletetButton=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"delete-button"}),this.deletetButton.addEventListener("click",this.onDelete),this.deletetButton.innerHTML=this.deleteSvgStr,this.attrbuteElement=createElement("div",{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center"},{class:"attrbute-button"}),this.attrbuteElement.innerHTML=this.attrbuteSvgStr,this.attrbuteElement.addEventListener("click",this.toggleAttrbutePanel),E=createSvg("svg",{class:"outerline"},{position:"absolute",left:this.rect.left-this.borderWidth+"px",top:this.rect.top-this.borderWidth+"px",width:this.rect.width+this.borderWidth+this.pointWidth/2+"px",height:this.rect.height+this.borderWidth+this.pointHeight/2+"px",zIndex:2}),this.outerLine=E,this.moveRect=createSvg("rect",{class:"move","data-id":"move",stroke:"#1460F3","stroke-width":this.borderWidth,"fill-opacity":0,width:this.rect.width-this.borderWidth,height:this.rect.height-this.borderWidth,x:this.pointWidth/2,y:this.pointHeight/2}),this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:0}),this.LeftRect=createSvg("rect",{class:"w-resize","data-id":"w-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:(this.rect.height-this.pointHeight+this.borderWidth)/2}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.bottomRect=createSvg("rect",{class:"s-resize","data-id":"s-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:(this.rect.width-this.pointWidth+this.borderWidth)/2,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.rightRect=createSvg("rect",{class:"e-resize","data-id":"e-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:(this.rect.height-this.pointHeight+this.borderWidth)/2}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:0}),this.topRect=createSvg("rect",{class:"n-resize","data-id":"n-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:(this.rect.width-this.pointWidth+this.borderWidth)/2,y:0}),this.outerLine.append(this.moveRect),this.outerLine.append(this.topLeftRect),this.outerLine.append(this.LeftRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRect),this.outerLine.append(this.bottomRightRect),this.outerLine.append(this.rightRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.topRect),this.outerLineContainer.append(this.outerLine),this.popupElement.append(this.attrbuteElement),this.popupElement.append(this.deletetButton),this.outerLineContainer.append(this.popupElement),this.outerLine.addEventListener(this.mousedown,this.onMousedown),this.outerLine.addEventListener(this.mouseup,this.onMouseup),this.newAdd&&(this.goEditing(),this.addUndoHistory(),this.newAdd=!1),this.initial=!0;case 54:case"end":return M.stop()}},x,this)})),function(){return f.apply(this,arguments)})},{key:"getActualRect",value:function(x,k){var P=k.left,S=k.top,E=k.right,M=k.bottom;return{start:getActualPoint({x:P,y:S},x),end:getActualPoint({x:E,y:M},x)}}},{key:"rectCalc",value:function(x,k){return{top:x.y<k.y?x.y:k.y,left:x.x<k.x?x.x:k.x,width:Math.abs(k.x-x.x),height:Math.abs(k.y-x.y)}}},{key:"getInitialPoint",value:function(x,k){var P=this.scale;return{start:{x:x.x/P,y:x.y/P},end:{x:k.x/P,y:k.y/P}}}},{key:"handleMouseDown",value:function(x){if(x.preventDefault(),x.button!==2&&!this.hidden){if(this.state>0){var k=x.target.getAttribute("data-id"),P=getClickPoint(x),S=P.pageX,E=P.pageY;this.startState={operator:k,clickX:S,clickY:E},document.addEventListener(this.mousemove,this.onMousemove)}document.addEventListener(this.mouseup,this.onMouseup),this.selectedCharRange=null,this.mouseMoved=!1,this.mouseDown=!0}}},{key:"handleMouseUp",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function x(k){var P,S,E,M,T,D,I,N,O,F,U,Y,Q,q,ne,J,re,X;return _regeneratorRuntime().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(this.frameContainer){j.next=2;break}return j.abrupt("return");case 2:if(!k||this.frameContainer.contains(k.target)||this.state!==0){j.next=4;break}return j.abrupt("return");case 4:if((P=this.contentContainer.getSelectedEditBox())===null||P===this||this.state!==0){j.next=7;break}return j.abrupt("return");case 7:if(document.removeEventListener(this.mousemove,this.onMousemove),document.removeEventListener(this.mouseup,this.onMouseup),this.mouseDown){j.next=11;break}return j.abrupt("return");case 11:if(this.mouseDown=!1,this.moving=!1,this.frameContainer.classList.add("selected"),k.type==="touchend"&&(this.pageDiv.style.touchAction=""),this.state!==0||this.imageUrl||this.updateOriginalImageUrl(),this.state===0||this.mouseMoved||this.eventBus.dispatch("contentPropertyChange",{type:"image",isOpen:!0,opacity:100*this.opacity}),this.state===0&&(this.state=1,this.contentContainer.setSelectedEditBox(this),this.container.append(this.outerLineContainer),this.eventBus.dispatch("changeRightPanelBtnDisabled",!1),this.eventBus.dispatch("contentBoxSelected",{type:"image",pageNumber:this.pageViewer.pageIndex+1})),!this.mouseMoved){j.next=31;break}return M={start:this.start,end:this.end},T={start:this.newStart,end:this.newEnd},D=getClickPoint(k),I=D.pageX,N=D.pageY,(I!==((S=this.startState)===null||S===void 0?void 0:S.clickX)||N!==((E=this.startState)===null||E===void 0?void 0:E.clickY))&&this.newStart&&this.newEnd&&(this.start=this.newStart,this.end=this.newEnd),O=this.getInitialPoint(this.start,this.end),F=O.start,U=O.end,Y={left:F.x,top:F.y,right:U.x,bottom:U.y},Q=this.cropped?"SetClipRect":"SetFrame",this.state===2&&(Q="CutWithRect",this.cropped=!0),j.next=29,this.messageHandler.sendWithPromise(Q,{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr,rect:Y});case 29:this.needUndoRec=!0,this.updateCanvas({oldPoint:M,newPoint:T});case 31:q=[this.imageContainer,this.outerLine,this.popupElement],(ne=document.querySelector(".editor-panel"))&&q.push(ne),(J=document.getElementById("editorPropertyPanelButton"))&&q.push(J),(re=document.getElementById("undo"))&&q.push(re),(X=document.getElementById("redo"))&&q.push(X),this.listener&&document.removeEventListener(isMobileDevice$1?"touchend":"mouseup",this.listener),this.listener=onClickOutsideUp(q,this.handleOutside.bind(this));case 42:case"end":return j.stop()}},x,this)})),function(x){return d.apply(this,arguments)})},{key:"handleMouseMove",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function x(k){var P,S,E,M,T,D,I,N,O,F,U,Y,Q,q,ne,J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke,Ce,Pe,Me,Le,Te,ye,_e;return _regeneratorRuntime().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if((P=this.contentContainer.getSelectedEditBox())===null||P===this||this.state!==0){we.next=3;break}return we.abrupt("return");case 3:if(this.moving=!0,k.type==="touchmove"&&(this.pageDiv.style.touchAction="none"),S=getClickPoint(k),E=S.pageX,M=S.pageY,T=this.start,D=this.end,I=this.startState){we.next=11;break}return we.abrupt("return");case 11:if(I.clickX!==E||I.clickY!==M){we.next=13;break}return we.abrupt("return");case 13:if(N=this.viewport,O=N.width,F=N.height,I.operator!=="nw-resize"){we.next=30;break}if(U=E-(I.clickX-T.x),Y=M-(I.clickY-T.y),U=Math.min(D.x-2,U),U=Math.max(this.state===2?T.x:0,U),Y=Math.min(D.y-2,Y),Y=Math.max(this.state===2?T.y:0,Y),this.state!==1){we.next=27;break}if(Q=U-T.x,q=Q*this.imageRatio,!((Y=T.y+q)<0||U<0||Y>=D.y)){we.next=27;break}return we.abrupt("return");case 27:this.updateOutline({start:{x:U,y:Y},end:{x:D.x,y:D.y}}),we.next=117;break;case 30:if(I.operator!=="w-resize"){we.next=37;break}ne=E-(I.clickX-T.x),ne=Math.min(D.x-2,ne),ne=Math.max(this.state===2?T.x:7,ne),this.updateOutline({start:{x:ne,y:T.y},end:D}),we.next=117;break;case 37:if(I.operator!=="sw-resize"){we.next=53;break}if(J=E-(I.clickX-T.x),re=M-(I.clickY-D.y),J=Math.min(D.x-2,J),J=Math.max(this.state===2?T.x:0,J),re=Math.min(this.state===2?D.y:F,re),re=Math.max(T.y+2,re),this.state!==1){we.next=50;break}if(X=J-T.x,j=X*this.imageRatio,!((re=D.y-j)>=F||J<0||re<=T.y)){we.next=50;break}return we.abrupt("return");case 50:this.updateOutline({start:{x:J,y:T.y},end:{x:D.x,y:re}}),we.next=117;break;case 53:if(I.operator!=="s-resize"){we.next=60;break}Z=M-(I.clickY-D.y),Z=Math.min(this.state===2?D.y:F,Z),Z=Math.max(T.y+2,Z),this.updateOutline({start:T,end:{x:D.x,y:Z}}),we.next=117;break;case 60:if(I.operator!=="se-resize"){we.next=76;break}if(W=E-(I.clickX-D.x),te=M-(I.clickY-D.y),W=Math.min(this.state===2?D.x:O,W),W=Math.max(T.x+2,W),te=Math.min(this.state===2?D.y:F,te),te=Math.max(T.y+2,te),this.state!==1){we.next=73;break}if(le=D.x-W,oe=le*this.imageRatio,!((te=D.y-oe)>=F||W>=O||te-T.y<=0)){we.next=73;break}return we.abrupt("return");case 73:this.updateOutline({start:{x:T.x,y:T.y},end:{x:W,y:te}}),we.next=117;break;case 76:if(I.operator!=="e-resize"){we.next=83;break}Ee=E-(I.clickX-D.x),Ee=Math.min(this.state===2?D.x:O,Ee),Ee=Math.max(T.x+2,Ee),this.updateOutline({start:T,end:{x:Ee,y:D.y}}),we.next=117;break;case 83:if(I.operator!=="ne-resize"){we.next=99;break}if(Ae=E-(I.clickX-D.x),ve=M-(I.clickY-T.y),Ae=Math.min(this.state===2?D.x:O,Ae),Ae=Math.max(T.x+2,Ae),ve=Math.min(D.y-2,ve),ve=Math.max(this.state===2?T.y:0,ve),this.state!==1){we.next=96;break}if(ke=D.x-Ae,Ce=ke*this.imageRatio,!((ve=T.y+Ce)<=0||Ae>=O||D.y-ve<=0)){we.next=96;break}return we.abrupt("return");case 96:this.updateOutline({start:{x:T.x,y:ve},end:{x:Ae,y:D.y}}),we.next=117;break;case 99:if(I.operator!=="n-resize"){we.next=106;break}Pe=M-(I.clickY-T.y),Pe=Math.min(D.y-2,Pe),Pe=Math.max(this.state===2?T.y:0,Pe),this.updateOutline({start:{x:T.x,y:Pe},end:D}),we.next=117;break;case 106:if(I.operator!=="move"){we.next=117;break}if(this.state!==2){we.next=109;break}return we.abrupt("return");case 109:Me=E-(I.clickX-T.x),Le=M-(I.clickY-T.y),Te=E-(I.clickX-D.x),ye=M-(I.clickY-D.y),_e={width:Math.abs(T.x-D.x),height:Math.abs(T.y-D.y)},Me<Te?(Me=Math.max(this.state===2?T.x:0,Me),Me=Math.min(this.state===2?D.x-_e.width:O-_e.width,Me),Te=Math.max(this.state===2?T.x+_e.width:_e.width,Te),Te=Math.min(this.state===2?D.x:O,Te)):(Te=Math.max(this.state===2?T.x:0,Te),Te=Math.min(this.state===2?D.x-_e.width:O-_e.width,Te),Me=Math.max(this.state===2?T.x+_e.width:_e.width,Me),Me=Math.min(this.state===2?D.x:O,Me)),Le<ye?(Le=Math.max(this.state===2?T.y:0,Le),Le=Math.min(this.state===2?D.y-_e.height:F-_e.height,Le),ye=Math.max(this.state===2?T.y+_e.height:_e.height,ye),ye=Math.min(this.state===2?D.y:F,ye)):(ye=Math.max(this.state===2?T.y:0,ye),ye=Math.min(this.state===2?D.y-_e.height:F-_e.height,ye),Le=Math.max(this.state===2?T.y+_e.height:_e.height,Le),Le=Math.min(this.state===2?D.y:F,Le)),this.updateOutline({start:{x:Me,y:Le},end:{x:Te,y:ye}});case 117:this.mouseMoved=!0;case 118:case"end":return we.stop()}},x,this)})),function(x){return m.apply(this,arguments)})},{key:"handleOutside",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function x(){var k,P,S,E,M,T,D,I=this;return _regeneratorRuntime().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!this.moving){N.next=12;break}return S=[this.imageContainer,this.outerLine,this.popupElement],(E=document.querySelector(".editor-panel"))&&S.push(E),(M=document.getElementById("editorPropertyPanelButton"))&&S.push(M),(T=document.getElementById("undo"))&&S.push(T),(D=document.getElementById("redo"))&&S.push(D),onClickOutsideUp(S,this.handleOutside.bind(this)),N.abrupt("return");case 12:this.state=0,this.imageUrl=null,this.removed||this.contentContainer.setSelectedEditBox(null),this.moveRect.style.cursor="all-scroll",this.updateRectStyle(),this.updateOutline({start:this.start,end:this.end}),(k=this.frameContainer)===null||k===void 0||k.classList.remove("editing"),(P=this.frameContainer)===null||P===void 0||P.classList.remove("selected"),this.outerLineContainer.remove(),this.outerLineContainer.append(this.popupElement),setTimeout(function(){document.querySelector(".frame-container.selected")||(I.eventBus.dispatch("contentPropertyChange",{type:"image",isOpen:!1}),I.eventBus.dispatch("changeRightPanelBtnDisabled",!0),I.eventBus.dispatch("contentBoxDeselected",{type:"image",pageNumber:I.pageViewer.pageIndex+1}))},1);case 23:case"end":return N.stop()}},x,this)})),function(){return y.apply(this,arguments)})},{key:"getRect",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function x(){var k,P,S,E,M;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(this.cropped){T.next=4;break}return T.next=3,this.messageHandler.sendWithPromise("GetFrame",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr});case 3:k=T.sent;case 4:return T.next=6,this.messageHandler.sendWithPromise("GetClipRect",{pagePtr:this.pagePtr,editAreaPtr:this.editAreaPtr});case 6:this.frame=T.sent,!k||k.left===this.frame.left&&k.top===this.frame.top&&k.right===this.frame.right&&k.bottom===this.frame.bottom||(this.cropped=!0),P=this.getActualRect(this.scale,this.frame),S=P.start,E=P.end,this.start=S,this.end=E,this.oldRect=this.rect||null,M=this.rectCalc(S,E),this.rect=M,this.imageRatio=this.rect.height/this.rect.width;case 15:case"end":return T.stop()}},x,this)})),function(){return v.apply(this,arguments)})},{key:"updateCanvas",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function x(k,P){var S,E,M,T,D,I,N,O,F,U,Y,Q,q,ne,J,re;return _regeneratorRuntime().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(this.removed){X.next=3;break}return X.next=3,this.getRect();case 3:if(this.frameContainer&&this.outerLineContainer&&(this.updateOutline({start:this.start,end:this.end}),setCss(this.frameContainer,{left:this.rect.left+"px",top:this.rect.top+"px",width:this.rect.width+"px",height:this.rect.height+"px"})),k?(S=k.oldPoint,E=k.newPoint,M=this.getEntireArea(S,E),T=this.getActualRect(this.scale,M),D=T.start,I=T.end,N=this.rectCalc(D,I),O=this.rectCalc(S.start,S.end),F=this.getEntireArea(O,this.rect),U={left:F.left,top:F.top,width:F.right-F.left,height:F.bottom-F.top},parseInt(N.left)===parseInt(F.left)&&parseInt(N.top)===parseInt(F.top)&&parseInt(N.width)===parseInt(F.width)&&parseInt(N.height)===parseInt(F.height)||(N=U),Y={left:parseInt(N.left*this.ratio),top:parseInt(N.top*this.ratio),right:Math.ceil((N.left+N.width)*this.ratio),bottom:Math.ceil((N.top+N.height)*this.ratio),width:Math.ceil(N.width*this.ratio),height:Math.ceil(N.height*this.ratio)},this.imgRect=Y):P?(Q=this.getEntireArea(this.oldRect,this.rect),q={left:parseInt(Q.left*this.ratio),top:parseInt(Q.top*this.ratio),right:parseInt(Q.right*this.ratio),bottom:parseInt(Q.bottom*this.ratio),width:parseInt(Q.right*this.ratio)-parseInt(Q.left*this.ratio),height:parseInt(Q.bottom*this.ratio)-parseInt(Q.top*this.ratio)},this.imgRect=q):(ne={left:parseInt(this.rect.left*this.ratio),top:parseInt(this.rect.top*this.ratio),right:Math.ceil(this.rect.left*this.ratio+this.rect.width*this.ratio),bottom:Math.ceil(this.rect.top*this.ratio+this.rect.height*this.ratio),width:Math.ceil(this.rect.width*this.ratio),height:Math.ceil(this.rect.height*this.ratio)},this.imgRect=ne),this.initial||this.newAdd){X.next=7;break}return X.abrupt("return");case 7:if(J=null,!this.pageViewer.documentViewer.renderLayerPermission||!this.pageViewer.documentViewer.layers.length){X.next=14;break}return X.next=11,this.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top,ocgsPtr:_toConsumableArray$1(this.pageViewer.documentViewer.ocgsPtr)});case 11:J=X.sent,X.next=17;break;case 14:return X.next=16,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top});case 16:J=X.sent;case 17:re=J.imageArray,this.imageArray=re,this.drawCanvas(),this.saveEdit();case 21:case"end":return X.stop()}},x,this)})),function(x,k){return g.apply(this,arguments)})},{key:"drawCanvas",value:function(){if(this.imgRect){if(this.pageViewer.canvas){var x=this.pageViewer.canvas.getContext("2d"),k=x.createImageData(parseInt(this.imgRect.right-this.imgRect.left),parseInt(this.imgRect.bottom-this.imgRect.top));k.data.set(this.imageArray),x.putImageData(k,this.imgRect.left,this.imgRect.top)}}else this.updateCanvas()}},{key:"saveEdit",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function x(){return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.messageHandler.sendWithPromise("EndEdit",this.editPagePtr);case 2:this.needUndoRec&&(this.addUndoHistory(),this.needUndoRec=!1);case 3:case"end":return k.stop()}},x,this)})),function(){return w.apply(this,arguments)})},{key:"updateOutline",value:function(x){var k=x.start,P=x.end,S=this.rectCalc(k,P);this.newStart=k,this.newEnd=P,setCss(this.outerLine,{left:S.left-this.borderWidth+"px",top:S.top-this.borderWidth+"px",width:S.width+this.borderWidth+this.pointWidth/2+"px",height:S.height+this.borderWidth+this.pointHeight/2+"px"});var E=S.left+S.width-80+"px",M=S.top+S.height+12+"px";if(this.popupElement.style.left=E,this.popupElement.style.top=M,this.moveRect.setAttribute("width",S.width-this.borderWidth),this.moveRect.setAttribute("height",S.height-this.borderWidth),this.LeftRect.setAttribute("y",(S.height-this.pointHeight+this.borderWidth)/2),this.bottomRect.setAttribute("x",(S.width-this.pointWidth+this.borderWidth)/2),this.bottomRect.setAttribute("y",S.height-this.pointHeight/2+this.borderWidth/2),this.rightRect.setAttribute("x",S.width-this.pointWidth/2+this.borderWidth/2),this.rightRect.setAttribute("y",(S.height-this.pointHeight+this.borderWidth)/2),this.topRect.setAttribute("x",(S.width-this.pointWidth+this.borderWidth)/2),this.state===2){var T=15;this.LeftRect.setAttribute("y",(S.height-T+this.borderWidth)/2),this.topRect.setAttribute("x",(S.width-T+this.borderWidth)/2),this.rightRect.setAttribute("y",(S.height-T+this.borderWidth)/2),this.bottomRect.setAttribute("x",(S.width-T+this.borderWidth)/2),this.topRightRect.setAttribute("d","M".concat(S.width+this.borderWidth/2-T+this.pointWidth/2,",").concat(this.pointWidth/2," H").concat(S.width+this.borderWidth/2," V").concat(T)),this.bottomLeftRect.setAttribute("d","M".concat(this.pointWidth/2,",").concat(S.height+this.borderWidth/2-T+this.pointWidth/2," V").concat(S.height+this.borderWidth/2," H").concat(T)),this.bottomRightRect.setAttribute("d","M".concat(S.width+this.borderWidth/2,",").concat(S.height+this.borderWidth/2-T+this.pointWidth/2," V").concat(S.height+this.borderWidth/2," H").concat(S.width+this.borderWidth/2-T+this.pointWidth/2));var D=S.left-this.rect.left,I=S.top-this.rect.top,N=this.rect.left+this.rect.width-S.left-S.width,O=this.rect.top+this.rect.height-S.top-S.height;switch(this.startState.operator){case"sw-resize":this.frameContainer.style["box-shadow"]="inset ".concat(D,"px ").concat(-O,"px rgba(0, 0, 0, 0.5)");break;case"ne-resize":this.frameContainer.style["box-shadow"]="inset ".concat(-N,"px ").concat(I,"px rgba(0, 0, 0, 0.5)");break;case"nw-resize":case"n-resize":case"w-resize":this.frameContainer.style["box-shadow"]="inset ".concat(D,"px ").concat(I,"px rgba(0, 0, 0, 0.5)");break;case"se-resize":case"s-resize":case"e-resize":this.frameContainer.style["box-shadow"]="inset ".concat(-N,"px ").concat(-O,"px rgba(0, 0, 0, 0.5)")}}else this.bottomLeftRect.setAttribute("y",S.height-this.pointHeight/2+this.borderWidth/2),this.bottomRightRect.setAttribute("x",S.width-this.pointWidth/2+this.borderWidth/2),this.bottomRightRect.setAttribute("y",S.height-this.pointHeight/2+this.borderWidth/2),this.topRightRect.setAttribute("x",S.width-this.pointWidth/2+this.borderWidth/2)}},{key:"setProperty",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function x(k){var P;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:S.t0=_regeneratorRuntime().keys(k);case 1:if((S.t1=S.t0()).done){S.next=25;break}if((P=S.t1.value)!=="alignType"){S.next=11;break}if(this.selectedCharRange){S.next=9;break}return S.next=7,this.messageHandler.sendWithPromise("SetTextAligningSection",{editAreaPtr:this.editAreaPtr,alignType:k.alignType,char:activeCharPlace={SectionIndex:0,LineIndex:0,RunIndex:0,CharIndex:-1}});case 7:S.next=11;break;case 9:return S.next=11,this.messageHandler.sendWithPromise("SetTextAligningRange",{editAreaPtr:this.editAreaPtr,alignType:k.alignType,start:this.selectedCharRange.start,end:this.selectedCharRange.end});case 11:if(this.selectedCharRange||P==="alignType"){S.next=14;break}return S.next=14,this.selectAllText();case 14:if(P!=="opacity"){S.next=17;break}return S.next=17,this.messageHandler.sendWithPromise("SetCharsFontTransparency",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,opacity:k.opacity/100});case 17:if(P!=="fontSize"){S.next=20;break}return S.next=20,this.messageHandler.sendWithPromise("SetCharsFontSize",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,fontSize:k.fontSize});case 20:if(P!=="fontFamily"){S.next=23;break}return S.next=23,this.messageHandler.sendWithPromise("SetFontFromNativeTrueTypeFont",{editAreaPtr:this.editAreaPtr,start:this.selectedCharRange.start,end:this.selectedCharRange.end,fontFamily:k.fontFamily});case 23:S.next=1;break;case 25:return S.next=27,this.updateCanvas(null,!0);case 27:case"end":return S.stop()}},x,this)})),function(x){return s.apply(this,arguments)})},{key:"handlePropertyPanelChanged",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function x(k){var P,S=this;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(this.state!==0){E.next=2;break}return E.abrupt("return");case 2:E.t0=_regeneratorRuntime().keys(k);case 3:if((E.t1=E.t0()).done){E.next=48;break}if((P=E.t1.value)!=="rotate"){E.next=9;break}return E.next=8,this.messageHandler.sendWithPromise("RotateImage",{editAreaPtr:this.editAreaPtr,angle:k[P]});case 8:this.needUndoRec=!0;case 9:if(P!=="flip"){E.next=19;break}if(k[P]!=="x"){E.next=15;break}return E.next=13,this.messageHandler.sendWithPromise("HorizontalMirrorImage",this.editAreaPtr);case 13:E.next=18;break;case 15:if(k[P]!=="y"){E.next=18;break}return E.next=18,this.messageHandler.sendWithPromise("VerticalMirrorImage",this.editAreaPtr);case 18:this.needUndoRec=!0;case 19:if(P!=="opacity"){E.next=31;break}if(100*this.opacity!==k.opacity){E.next=22;break}return E.abrupt("return");case 22:return E.next=24,this.messageHandler.sendWithPromise("GetImageTransparency",this.editAreaPtr);case 24:if(100*E.sent!==k.opacity){E.next=27;break}return E.abrupt("return");case 27:return E.next=29,this.messageHandler.sendWithPromise("SetImageTransparency",{editAreaPtr:this.editAreaPtr,opacity:k.opacity/100});case 29:this.opacity=k.opacity/100,this.needUndoRec=!0;case 31:if(P!=="tool"||k.tool!=="replace"){E.next=34;break}return E.next=34,this.uploadFile().then(function(){var M=_asyncToGenerator(_regeneratorRuntime().mark(function T(D){var I,N,O,F,U,Y,Q,q,ne,J,re,X;return _regeneratorRuntime().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return I=D.imageBase64,N=D.width,O=D.height,F={top:S.frame.top,left:S.frame.left,width:S.frame.right-S.frame.left,height:S.frame.bottom-S.frame.top},(U=N/O)>F.width/F.height?(Y=F.width,Q=F.width/U):(Y=F.height*U,Q=F.height),q=(X={x:F.left+F.width/2,y:F.top+F.height/2}).x-Y/2,ne=X.x+Y/2,J=X.y+Q/2,re=X.y-Q/2,j.next=12,S.messageHandler.sendWithPromise("ReplaceImageAreaByStream",{pagePtr:S.pagePtr,editPagePtr:S.editPagePtr,editAreaPtr:S.editAreaPtr,rect:{left:q,right:ne,bottom:J,top:re},imageBase64:I});case 12:return S.editAreaPtr=j.sent,j.next=15,S.messageHandler.sendWithPromise("GetImageTransparency",S.editAreaPtr);case 15:S.opacity=j.sent,S.eventBus.dispatch("contentPropertyChange",{type:"image",opacity:100*S.opacity}),S.needUndoRec=!0,S.saveEdit();case 19:case"end":return j.stop()}},T)}));return function(T){return M.apply(this,arguments)}}()).catch(function(M){console.error(M)});case 34:if(P!=="tool"||k.tool!=="export"){E.next=37;break}return this.exportImage(this.imageUrl),E.abrupt("return");case 37:if(P!=="tool"||k.tool!=="crop"){E.next=46;break}if(this.state!==2){E.next=40;break}return E.abrupt("return");case 40:return this.state=2,this.frameContainer.classList.add("editing"),this.popupElement.remove(),this.moveRect.style.cursor="auto",this.updateRectStyle(),E.abrupt("return");case 46:E.next=3;break;case 48:return E.next=50,this.updateCanvas(null,!0);case 50:this.updateOriginalImageUrl();case 51:case"end":return E.stop()}},x,this)})),function(x){return u.apply(this,arguments)})},{key:"getEntireArea",value:function(x,k){var P=null;if("start"in x&&"start"in k){var S=this.getInitialPoint(x.start,x.end),E=this.getInitialPoint(k.start,k.end);P={left:Math.min(S.start.x,E.start.x),top:Math.min(S.start.y,E.start.y),right:Math.max(S.end.x,E.end.x),bottom:Math.max(S.end.y,E.end.y)}}else"left"in x&&"left"in k&&(P={left:Math.min(x.left,k.left),top:Math.min(x.top,k.top),right:Math.max(x.left+x.width,k.left+k.width),bottom:Math.max(x.top+x.height,k.top+k.height)});return P}},{key:"goEditing",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function x(){var k,P,S,E,M;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:this.state=1,this.contentContainer.setSelectedEditBox(this),this.frameContainer.classList.add("selected"),this.container.append(this.outerLineContainer),this.imageUrl||this.updateOriginalImageUrl(),k=[this.imageContainer,this.outerLine,this.popupElement],(P=document.querySelector(".editor-panel"))&&k.push(P),(S=document.getElementById("editorPropertyPanelButton"))&&k.push(S),(E=document.getElementById("undo"))&&k.push(E),(M=document.getElementById("redo"))&&k.push(M),onClickOutsideUp(k,this.handleOutside.bind(this));case 15:case"end":return T.stop()}},x,this)})),function(){return o.apply(this,arguments)})},{key:"toggleAttrbutePanel",value:function(){this.eventBus.dispatch("toggleAttrbutePanel","editor")}},{key:"handleDelete",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function x(){return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.handleOutside();case 2:return this.removed=!0,this.outerLineContainer.remove(),this.frameContainer.remove(),this.frameContainer=null,this.contentContainer.setSelectedEditBox(null),k.next=9,this.messageHandler.send("RemoveEditArea",{editPagePtr:this.editPagePtr,editAreaPtr:this.editAreaPtr});case 9:this.needUndoRec=!0,this.updateCanvas(),this.contentContainer.removeEditor(this.editAreaIndex),this.eventBus.dispatch("contentPropertyChange",{type:"image",isOpen:!1});case 13:case"end":return k.stop()}},x,this)})),function(){return r.apply(this,arguments)})},{key:"remove",value:function(){this.handleDelete()}},{key:"removeViewer",value:function(){var x,k,P;this.state=0,this.removed=!0,(x=this.outerLineContainer)===null||x===void 0||x.remove(),(k=this.frameContainer)===null||k===void 0||k.remove(),this.frameContainer=null,(P=this.contentContainer)===null||P===void 0||P.setSelectedEditBox(null),this.eventBus.dispatch("contentPropertyChange",{type:"image",isOpen:!1})}},{key:"uploadFile",value:function(){var x=this;return new Promise(function(k,P){var S=document.createElement("input");S.type="file",S.accept=".jpg, .jpeg, .png",S.onchange=function(){var E=S.files[0];if(E.size>2097152)return P(x.$t("editorPanel.maximum")),S.remove(),void window.$message.error(x.$t("editorPanel.maximum"),{duration:3e3});if(E){var M=new FileReader;M.onload=function(T){var D=new Image;D.onload=function(){k({imageBase64:T.target.result,width:D.width,height:D.height})},D.onerror=function(I){P(I)},D.src=T.target.result},M.onerror=function(T){P(T)},M.readAsDataURL(E),S.remove()}},S.click()})}},{key:"updateOriginalImageUrl",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function x(){var k,P,S,E,M,T;return _regeneratorRuntime().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.messageHandler.sendWithPromise("GetImageAreaSize",this.editAreaPtr);case 2:return k=D.sent,P=k.width,S=k.height,E=k.stride,D.next=8,this.messageHandler.sendWithPromise("ExtractOriginalImage",{editAreaPtr:this.editAreaPtr,width:P,height:S,stride:E});case 8:M=D.sent,T=M.imageArray,this.imageUrl=this.imageArrayToUrl(T,P,S),this.eventBus.dispatch("contentPropertyChange",{type:"image",imageUrl:this.imageUrl,opacity:100*this.opacity});case 12:case"end":return D.stop()}},x,this)})),function(){return n.apply(this,arguments)})},{key:"updateRectStyle",value:function(){if(this.topLeftRect.remove(),this.topRightRect.remove(),this.bottomLeftRect.remove(),this.bottomRightRect.remove(),this.state===2){var x=15;this.LeftRect.setAttribute("height",x),this.LeftRect.setAttribute("y",(this.rect.height-x+this.borderWidth)/2),this.LeftRect.style.cursor="e-resize",this.topRect.setAttribute("width",x),this.topRect.setAttribute("x",(this.rect.width-x+this.borderWidth)/2),this.topRect.style.cursor="s-resize",this.rightRect.setAttribute("height",x),this.rightRect.setAttribute("y",(this.rect.height-x+this.borderWidth)/2),this.rightRect.style.cursor="w-resize",this.bottomRect.setAttribute("width",x),this.bottomRect.setAttribute("x",(this.rect.width-x+this.borderWidth)/2),this.bottomRect.style.cursor="n-resize",this.topLeftRect=createSvg("path",{class:"nw-resize","data-id":"nw-resize",fill:"none",stroke:"#1460F3","stroke-width":this.pointWidth,d:"M".concat(x,",").concat(this.pointWidth/2," H").concat(this.pointWidth/2," V").concat(x)},{cursor:"se-resize"}),this.topRightRect=createSvg("path",{class:"ne-resize","data-id":"ne-resize",fill:"none",stroke:"#1460F3","stroke-width":this.pointWidth,d:"M".concat(this.rect.width+this.borderWidth/2-x+this.pointWidth/2,",").concat(this.pointWidth/2," H").concat(this.rect.width+this.borderWidth/2," V").concat(x)},{cursor:"sw-resize"}),this.bottomLeftRect=createSvg("path",{class:"sw-resize","data-id":"sw-resize",fill:"none",stroke:"#1460F3","stroke-width":this.pointWidth,d:"M".concat(this.pointWidth/2,",").concat(this.rect.height+this.borderWidth/2-x+this.pointWidth/2," V").concat(this.rect.height+this.borderWidth/2," H").concat(x)},{cursor:"ne-resize"}),this.bottomRightRect=createSvg("path",{class:"se-resize","data-id":"se-resize",fill:"none",stroke:"#1460F3","stroke-width":this.pointWidth,d:"M".concat(this.rect.width+this.borderWidth/2,",").concat(this.rect.height+this.borderWidth/2-x+this.pointWidth/2," V").concat(this.rect.height+this.borderWidth/2," H").concat(this.rect.width+this.borderWidth/2-x+this.pointWidth/2)},{cursor:"nw-resize"})}else this.LeftRect.setAttribute("height",this.pointHeight),this.LeftRect.style.cursor="w-resize",this.topRect.setAttribute("width",this.pointWidth),this.topRect.style.cursor="n-resize",this.rightRect.setAttribute("height",this.pointHeight),this.rightRect.style.cursor="e-resize",this.bottomRect.setAttribute("width",this.pointWidth),this.bottomRect.style.cursor="s-resize",this.topLeftRect=createSvg("rect",{class:"nw-resize","data-id":"nw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:0}),this.topRightRect=createSvg("rect",{class:"ne-resize","data-id":"ne-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:0}),this.bottomLeftRect=createSvg("rect",{class:"sw-resize","data-id":"sw-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:0,y:this.rect.height-this.pointHeight/2+this.borderWidth/2}),this.bottomRightRect=createSvg("rect",{class:"se-resize","data-id":"se-resize",fill:"#1460F3",stroke:"none",width:this.pointWidth,height:this.pointHeight,x:this.rect.width-this.pointWidth/2+this.borderWidth/2,y:this.rect.height-this.pointHeight/2+this.borderWidth/2});this.outerLine.append(this.topLeftRect),this.outerLine.append(this.topRightRect),this.outerLine.append(this.bottomLeftRect),this.outerLine.append(this.bottomRightRect)}},{key:"imageArrayToUrl",value:function(x,k,P){var S=document.createElement("canvas"),E=S.getContext("2d");S.width=k,S.height=P;var M=E.createImageData(k,P),T=new Uint8ClampedArray(x.buffer);M.data.set(T),E.putImageData(M,0,0);var D=S.toDataURL("image/png",1);return S.remove(),S=null,D}},{key:"exportImage",value:function(x,k){var P=document.createElement("a");P.href=x,P.download=k||"image",document.body.appendChild(P),P.click(),document.body.removeChild(P)}},{key:"handleShow",value:function(x){x==="text"?(this.hidden=!0,this.frameContainer&&(this.frameContainer.style.display="none"),this.state&&this.handleOutside()):(this.hidden=!1,this.frameContainer&&(this.frameContainer.style.display="block"))}},{key:"addUndoHistory",value:function(){this.contentContainer.handleOperateList({editPagePtr:this.editPagePtr,editAreaIndex:this.editAreaIndex,editAreaPtr:this.editAreaPtr,pageIndex:this.pageViewer.pageIndex})}},{key:"updateCanvasAfterUndoRedo",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function x(){var k,P,S,E,M;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this.getRect();case 2:if(this.frameContainer&&this.outerLineContainer&&(this.updateOutline({start:this.start,end:this.end}),setCss(this.frameContainer,{left:this.rect.left+"px",top:this.rect.top+"px",width:this.rect.width+"px",height:this.rect.height+"px"})),k=this.getEntireArea(this.oldRect,this.rect),P={left:parseInt(k.left*this.ratio),top:parseInt(k.top*this.ratio),right:Math.ceil(k.right*this.ratio),bottom:Math.ceil(k.bottom*this.ratio),width:parseInt(k.right*this.ratio)-parseInt(k.left*this.ratio),height:parseInt(k.bottom*this.ratio)-parseInt(k.top*this.ratio)},this.imgRect=P,S=null,!this.pageViewer.documentViewer.renderLayerPermission||!this.pageViewer.documentViewer.layers.length){T.next=13;break}return T.next=10,this.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top,ocgsPtr:_toConsumableArray$1(this.pageViewer.documentViewer.ocgsPtr)});case 10:S=T.sent,T.next=16;break;case 13:return T.next=15,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagePtr,scale:this.scale*this.ratio,left:this.imgRect.left,right:this.imgRect.right,bottom:this.imgRect.bottom,top:this.imgRect.top});case 15:S=T.sent;case 16:if(E=S.imageArray,this.imageArray=E,this.drawCanvas(),this.saveEdit(),this.contentContainer.getSelectedEditBox()!==this){T.next=27;break}return this.updateOriginalImageUrl(),T.next=24,this.messageHandler.sendWithPromise("GetImageTransparency",this.editAreaPtr);case 24:M=T.sent,this.opacity=Math.round(100*M)/100,this.eventBus.dispatch("contentPropertyChange",{type:"image",opacity:100*this.opacity});case 27:case"end":return T.stop()}},x,this)})),function(){return e.apply(this,arguments)})}]);var e,n,r,o,u,s,w,g,v,y,m,d,f}(),AddText=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.container,s=n.pageViewer,w=n.viewport,g=n.page,v=n.eventBus,y=n.contentContainer;_classCallCheck(this,e),this._tool=r,this.color=o,this.container=u,this.pageViewer=s,this.viewport=w,this.page=g,this.eventBus=v,this.contentContainer=y,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()},[{key:"init",value:function(){this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.container.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.container.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)}},{key:"handleMouseDown",value:function(e){var n=this.pageViewer.documentViewer.getContentEditManager();if(e.target.classList&&e.target.classList.contains("contentContainer")&&n.getSelectedEditBox()===null){var r=getAbsoluteCoordinate(this.container,e),o=r.x,u=r.y;this.initStartPoint={x:o,y:u},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this.initStartPoint,n=this.initEndPoint;if(n&&e.x!==n.x&&e.y!==n.y){var r=getInitialPoint(e,this.pageViewer.viewport.scale),o=getInitialPoint(n,this.pageViewer.viewport.scale),u={x:Math.min(r.x,o.x),y:Math.min(r.y,o.y)},s={x:Math.max(r.x,o.x),y:Math.max(r.y,o.y)},w={rect:{left:u.x,top:u.y,right:s.x,bottom:u.y+16},fontData:{fontName:"Helvetica",fontSize:14,r:0,g:0,b:0,opacity:1,isBold:0,italic:0},alignType:2};this.contentContainer.addTextEditor(w)}else{var g=getInitialPoint(e,this.pageViewer.viewport.scale),v={rect:{left:g.x,top:g.y,right:g.x+10,bottom:g.y+16},fontData:{fontName:"Helvetica",fontSize:14,r:0,g:0,b:0,opacity:1,isBold:0,italic:0},alignType:2};this.contentContainer.addTextEditor(v)}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.container,e),r=n.x,o=n.y,u=this.pageViewer.viewport,s=u.width,w=u.height;if(this.pageViewer.viewport.scale,r=Math.min(s,r),r=Math.max(0,r),o=Math.min(w,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var g=this.initStartPoint,v=this.initEndPoint,y=Math.abs(v.x-g.x),m=Math.abs(v.y-g.y),d=Math.min(y,m);g.x<v.x?v.x=g.x+d:v.x=g.x-d,g.y<v.y?v.y=g.y+d:v.y=g.y-d}var f=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(f.top,"px"),x.style.left="".concat(f.left,"px"),x.style.width="".concat(Math.abs(f.width-1),"px"),x.style.height="".concat(Math.abs(f.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",position:"absolute","z-index":3},{class:"add-text"});this.shapeEle=k,this.container.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.pageViewer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}}])}(),AddImage=function(){return _createClass(function e(n){var r=n.tool,o=n.color,u=n.container,s=n.pageViewer,w=n.viewport,g=n.rotation,v=n.page,y=n.eventBus,m=n.contentContainer,d=n.$t;_classCallCheck(this,e),this._tool=r,this.color=o,this.container=u,this.pageViewer=s,this.viewport=w,this.page=v,this.rotation=g,this.eventBus=y,this.contentContainer=m,this.$t=d,this.path=[],this.initStartPoint=null,this.initEndPoint=null,this.shapeEle=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.init()},[{key:"init",value:function(){this.container.addEventListener("mousedown",this.onMousedown),this.container.addEventListener("touchstart",this.onMousedown),this.container.style.cursor="crosshair",this.container.style.touchAction="none",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"tool",get:function(){return this._tool},set:function(e){e!==this._tool&&(e||(this.reset(),this.container.style.cursor="default",this.container.style.touchAction="",this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)),this._tool=e)}},{key:"reset",value:function(){this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.container.removeEventListener("mousedown",this.onMousedown),this.container.removeEventListener("touchstart",this.onMousedown)}},{key:"handleMouseDown",value:function(e){var n=this.pageViewer.documentViewer.getContentEditManager();if(e.target.classList&&e.target.classList.contains("contentContainer")&&n.getSelectedEditBox()===null){var r=getAbsoluteCoordinate(this.container,e),o=r.x,u=r.y;this.initStartPoint={x:o,y:u},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseUp",value:function(){var e=this,n=this.initStartPoint,r=this.initEndPoint;if(r&&n.x!==r.x&&n.y!==r.y){var o=getInitialPoint(n,this.pageViewer.viewport.scale),u=getInitialPoint(r,this.pageViewer.viewport.scale),s={x:Math.min(o.x,u.x),y:Math.min(o.y,u.y)},w={x:Math.max(o.x,u.x),y:Math.max(o.y,u.y)},g={left:s.x,top:s.y,right:w.x,bottom:w.y,width:w.x-s.x,height:w.y-s.y};this.uploadFile().then(function(x){var k,P,S=x.imageBase64,E=x.width/x.height;E>g.width/g.height?(k=g.width,P=g.width/E):(k=g.height*E,P=g.height);var M=g.left+g.width/2,T=g.top+g.height/2,D={left:M-k/2,top:T-P/2,right:M+k/2,bottom:T+P/2};e.contentContainer.addImageEditor({rect:D,imageBase64:S})}).catch(function(x){console.error(x)})}else{var v=getInitialPoint(n,this.pageViewer.viewport.scale),y=this.pageViewer.viewport.viewBox[2],m=this.pageViewer.viewport.viewBox[3],d=y/2,f=m/2;this.uploadFile().then(function(x){var k=x.imageBase64,P=x.width,S=x.height,E=P,M=S;if(P>d||S>f){var T=P/S;T>d/f?(E=d,M=d/T):(E=f*T,M=f)}var D=null;if((D=e.rotation/90%2>0?{left:v.x-M/2,top:v.y-E/2,right:v.x+M/2,bottom:v.y+E/2}:{left:v.x-E/2,top:v.y-M/2,right:v.x+E/2,bottom:v.y+M/2}).left<7){var I=7-D.left;D.left+=I,D.right+=I}if(D.top<7){var N=7-D.top;D.top+=N,D.bottom+=N}if(D.right>y){var O=D.right-y+7;D.right-=O,D.left-=O}if(D.bottom>m){var F=D.bottom-m+7;D.bottom-=F,D.top-=F}e.contentContainer.addImageEditor({rect:D,imageBase64:k})}).catch(function(x){console.error(x)})}this.initStartPoint=null,this.initEndPoint=null,this.shapeEle&&this.shapeEle.remove(),this.shapeEle=null,this.path=[],document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup)}},{key:"handleMouseMove",value:function(e){var n=getAbsoluteCoordinate(this.container,e),r=n.x,o=n.y,u=this.pageViewer.viewport,s=u.width,w=u.height;if(this.pageViewer.viewport.scale,r=Math.min(s,r),r=Math.max(0,r),o=Math.min(w,o),o=Math.max(0,o),this.initEndPoint={x:r,y:o},this.initStartPoint.x!==this.initEndPoint.x&&this.initStartPoint.y!==this.initEndPoint.y)if(this.shapeEle){if(e.shiftKey){var g=this.initStartPoint,v=this.initEndPoint,y=Math.abs(v.x-g.x),m=Math.abs(v.y-g.y),d=Math.min(y,m);g.x<v.x?v.x=g.x+d:v.x=g.x-d,g.y<v.y?v.y=g.y+d:v.y=g.y-d}var f=this.calculate(this.initStartPoint,this.initEndPoint),x=this.shapeEle;x.style.top="".concat(f.top,"px"),x.style.left="".concat(f.left,"px"),x.style.width="".concat(Math.abs(f.width-1),"px"),x.style.height="".concat(Math.abs(f.height-1),"px")}else{var k=createElement("div",{backgroundColor:"#DDE9FF",position:"absolute","z-index":3},{class:"add-text"});this.shapeEle=k,this.container.append(this.shapeEle)}}},{key:"rectCalc",value:function(e){var n=e.start,r=e.end;return{top:n.y<r.y?n.y:r.y,left:n.x<r.x?n.x:r.x,width:Math.abs(r.x-n.x),height:Math.abs(r.y-n.y)}}},{key:"calculate",value:function(e,n){var r=this.rectCalc({start:e,end:n}),o=1*this.pageViewer.viewport.scale;return{top:r.top-o,left:r.left-o,width:r.width+2*o,height:r.height+2*o}}},{key:"uploadFile",value:function(){var e=this;return new Promise(function(n,r){var o=document.createElement("input");o.type="file",o.accept=".jpg, .jpeg, .png",o.onchange=function(){var u=o.files[0];if(u.size>2097152)return r(e.$t("editorPanel.maximum")),o.remove(),void window.$message.error(e.$t("editorPanel.maximum"),{duration:3e3});if(u){var s=new FileReader;s.onload=function(w){var g=new Image;g.onload=function(){n({imageBase64:w.target.result,width:g.width,height:g.height})},g.onerror=function(v){r(v)},g.src=w.target.result},s.onerror=function(w){r(w)},s.readAsDataURL(u),o.remove()}},o.click()})}}])}(),ContentContainer=function(){return _createClass(function d(f){_classCallCheck(this,d),this.pageViewer=f.pageViewer,this.eventBus=f.eventBus,this.pageIndex=f.pageIndex,this.pagePtr=f.pagePtr,this.rotation=f.rotation,this.messageHandler=f.messageHandler,this.pageDiv=f.pageDiv,this.viewport=f.viewport,this.scale=f.scale,this.$t=f.$t,this.historyManager=f.contentEditHistoryManager,this.destroyed=!1,this.rendered=!1,this.isRendering=!1,this.frameEditorList=[],this.tool=this.pageViewer.tool||"",this.color=this.pageViewer.color||"",this.onHandleTool=this.handleTool.bind(this),this.onKeydown=this.handleKeyDown.bind(this)},[{key:"init",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function d(){return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.update();case 2:return document.addEventListener("keydown",this.onKeydown),this.eventBus._on("toolChanged",this.onHandleTool),f.next=6,this.render();case 6:case"end":return f.stop()}},d,this)})),function(){return m.apply(this,arguments)})},{key:"update",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function d(){var f,x,k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,this.messageHandler.sendWithPromise("InitEditPage",{pagePtr:this.pagePtr});case 2:return f=P.sent,x=f.editPagePtr,this.editPagePtr=x,P.next=7,this.messageHandler.sendWithPromise("BeginEdit",{editPagePtr:this.editPagePtr,type:3});case 7:if(!(k=P.sent)||!k.code){P.next=12;break}return this.eventBus.dispatch("message",{type:"ERROR",message:k.message}),console.log(k.message),P.abrupt("return",!1);case 12:this.tool=this.pageViewer.tool||"";case 13:case"end":return P.stop()}},d,this)})),function(){return y.apply(this,arguments)})},{key:"render",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function d(){var f,x,k,P,S,E,M;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!this.contentContainer){T.next=2;break}return T.abrupt("return");case 2:return f=this.isRendering,this.isRendering=!0,(x=document.createElement("div")).className="contentContainer",this.contentContainer=x,this.pageDiv.append(this.contentContainer),this.frameEditorList.forEach(function(D){D.removeViewer()}),this.frameEditorList.length=0,T.prev=10,T.next=13,this.messageHandler.sendWithPromise("GetEditAreaCount",this.editPagePtr);case 13:k=T.sent,P=0;case 15:if(!(P<k)){T.next=37;break}if(!f){T.next=18;break}return T.abrupt("break",37);case 18:return T.next=20,this.messageHandler.sendWithPromise("GetEditArea",{editPagePtr:this.editPagePtr,index:P});case 20:if(S=T.sent){T.next=23;break}return T.abrupt("continue",34);case 23:return T.next=25,this.messageHandler.sendWithPromise("IsTextArea",S);case 25:if(!T.sent){T.next=30;break}return E=new TextEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pageDiv:this.pageDiv,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:S,editAreaIndex:P,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,hidden:this.tool==="addImage"}),this.frameEditorList.push(E),T.abrupt("continue",34);case 30:return T.next=32,this.messageHandler.sendWithPromise("IsImageArea",S);case 32:T.sent&&(M=new ImageEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pageDiv:this.pageDiv,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:S,editAreaIndex:P,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,$t:this.$t,hidden:this.tool==="addText"}),this.frameEditorList.push(M));case 34:P++,T.next=15;break;case 37:return T.prev=37,this.isRendering=!1,T.finish(37);case 40:this.tool==="addText"&&this.addTextManager(),this.tool==="addImage"&&this.addImageManager(),this.destroyed=!1,this.rendered=!0;case 44:case"end":return T.stop()}},d,this,[[10,,37,40]])})),function(){return v.apply(this,arguments)})},{key:"show",value:function(){this.contentContainer.style.display="block"}},{key:"hide",value:function(){this.contentContainer.style.display="none",this.textManager&&(this.textManager.tool="",this.textManager.reset()),this.imageManager&&(this.imageManager.tool="",this.imageManager.reset())}},{key:"cancel",value:function(){var d;!this.destroyed&&this.rendered&&((d=this.contentContainer)===null||d===void 0||d.remove(),this.contentContainer=null,this.textManager&&(this.textManager.tool="",this.textManager.reset()),this.imageManager&&(this.imageManager.tool="",this.imageManager.reset()))}},{key:"destroy",value:function(){var d;!this.destroyed&&this.rendered&&((d=this.contentContainer)===null||d===void 0||d.remove(),this.contentContainer=null,this.textManager&&(this.textManager.tool="",this.textManager.reset()),this.imageManager&&(this.imageManager.tool="",this.imageManager.reset()),this.destroyed=!0,this.eventBus._off("toolChanged",this.onHandleTool),document.removeEventListener("keydown",this.onKeydown),this.messageHandler.sendWithPromise("ClearEditPage",this.editPagePtr))}},{key:"handleTool",value:function(d){var f=d.tool,x=d.color;this.tool=f,this.color=x,this.textManager&&(this.textManager.tool=f,this.textManager.color=x),this.imageManager&&(this.imageManager.tool=f,this.imageManager.color=x),f==="addText"&&(this.imageManager&&(this.imageManager.tool="",this.imageManager.reset()),this.addTextManager()),f==="addImage"&&(this.textManager&&(this.textManager.tool="",this.textManager.reset()),this.addImageManager());var k={addText:"text",addImage:"image"},P=k[this.tool]?k[this.tool]:"";this.eventBus.dispatch("showContentEditorType",P)}},{key:"addTextManager",value:function(){this.textManager?this.textManager.init():this.textManager=new AddText({tool:this.tool,color:this.color,container:this.pageDiv,pageViewer:this.pageViewer,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,page:this.page,eventBus:this.eventBus,contentContainer:this})}},{key:"addImageManager",value:function(){this.imageManager?this.imageManager.init():this.imageManager=new AddImage({tool:this.tool,color:this.color,container:this.pageDiv,pageViewer:this.pageViewer,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,page:this.page,rotation:this.rotation,eventBus:this.eventBus,contentContainer:this,$t:this.$t})}},{key:"addTextEditor",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var x,k,P,S,E;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return x=f.rect,k=f.fontData,P=f.alignType,M.next=3,this.messageHandler.sendWithPromise("CreateNewTextArea",{pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,rect:x,fontData:k,alignType:P});case 3:if(S=M.sent){M.next=6;break}return M.abrupt("return");case 6:E=new TextEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pageDiv:this.pageDiv,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:S,editAreaIndex:this.frameEditorList.length,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,newAdd:!0,pageViewer:this.pageViewer}),this.frameEditorList.push(E);case 8:case"end":return M.stop()}},d,this)})),function(d){return g.apply(this,arguments)})},{key:"addImageEditor",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var x,k,P,S;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return x=f.rect,k=f.imageBase64,E.next=3,this.messageHandler.sendWithPromise("CreateNewImageAreaByStream",{pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,rect:x,imageBase64:k});case 3:if(P=E.sent){E.next=6;break}return E.abrupt("return");case 6:S=new ImageEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pageDiv:this.pageDiv,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:P,editAreaIndex:this.frameEditorList.length,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,newAdd:!0,pageViewer:this.pageViewer,$t:this.$t}),this.frameEditorList.push(S);case 8:case"end":return E.stop()}},d,this)})),function(d){return w.apply(this,arguments)})},{key:"removeEditor",value:function(d){this.frameEditorList.splice(d,1),this.frameEditorList.forEach(function(f,x){return f.editAreaIndex=x})}},{key:"handleKeyDown",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var x,k,P,S,E;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(x=this.getSelectedEditBox(),k=this.pageViewer.documentViewer,!f.metaKey&&!f.ctrlKey||f.key.toLowerCase()!=="v"||x&&x.state===2){M.next=11;break}if(k.page-1===this.pageIndex){M.next=6;break}return M.abrupt("return");case 6:return P=k.getContentEditManager(),M.next=9,P.pasteAreaInPage(k.page);case 9:M.next=17;break;case 11:if(!f.metaKey&&!f.ctrlKey||f.key.toLowerCase()!=="c"){M.next=17;break}if(!x||x.state!==1){M.next=17;break}return M.next=15,this.copyArea({editPagePtr:x.editPagePtr,editAreaPtr:x.editAreaPtr});case 15:S=M.sent,k.getContentEditManager().setCopyArea({editAreaInfoPtr:S,rect:x.frame});case 17:if(x&&x.state===1&&!document.querySelector(".n-color-picker-panel")&&f.target.className!=="n-input__input-el"){M.next=19;break}return M.abrupt("return");case 19:(E=f.keyCode||f.which)!==8&&E!==46||x.remove();case 21:case"end":return M.stop()}},d,this)})),function(d){return s.apply(this,arguments)})},{key:"copyArea",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var x,k,P;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return x=f.editPagePtr,k=f.editAreaPtr,S.next=3,this.messageHandler.sendWithPromise("CopyArea",{editPagePtr:x,editAreaPtr:k});case 3:return P=S.sent,S.abrupt("return",P);case 5:case"end":return S.stop()}},d,this)})),function(d){return u.apply(this,arguments)})},{key:"getSelectedEditBox",value:function(){return this.pageViewer.documentViewer.getContentEditManager().getSelectedEditBox()}},{key:"setSelectedEditBox",value:function(d){this.pageViewer.documentViewer.getContentEditManager().setSelectedEditBox(d)}},{key:"handleResetOperate",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(f!=="undo"){x.next=6;break}return x.next=3,this.historyManager.undo();case 3:x.sent,x.next=10;break;case 6:if(f!=="redo"){x.next=10;break}return x.next=9,this.historyManager.redo();case 9:x.sent;case 10:case"end":return x.stop()}},d,this)})),function(d){return o.apply(this,arguments)})},{key:"handleOperateList",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.historyManager.canUndo(f);case 2:if(x.sent){x.next=5;break}return x.abrupt("return");case 5:this.eventBus.dispatch("undoRedoStatusChanged"),this.historyManager.undoList.push(f),this.historyManager.redoList.length=0,this.eventBus.dispatch("changeOperateList",{undoListLength:this.historyManager.undoList.length,redoListLength:this.historyManager.redoList.length}),this.eventBus.dispatch("isContentEditModyfied",!0);case 10:case"end":return x.stop()}},d,this)})),function(d){return r.apply(this,arguments)})},{key:"updateFrameEditor",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var x,k,P,S,E,M,T,D;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(x=f.editAreaPtr,k=f.editCharPlace,!(P=this.frameEditorList.find(function(N){return N.editAreaPtr===x}))){I.next=6;break}return P.updateCanvasAfterUndoRedo(),P.type==="text"&&(k.CharIndex!==-1||k.LineIndex!==-1||k.RunIndex!==-1||k.SectionIndex!==-1)&&P.updateCursorLine(k),I.abrupt("return");case 6:return S=[],I.next=9,this.messageHandler.sendWithPromise("GetEditAreaCount",this.editPagePtr);case 9:E=I.sent,M=0;case 11:if(!(M<E)){I.next=32;break}return I.next=14,this.messageHandler.sendWithPromise("GetEditArea",{editPagePtr:this.editPagePtr,index:M});case 14:if(T=I.sent){I.next=17;break}return I.abrupt("continue",29);case 17:return D=void 0,I.next=20,this.messageHandler.sendWithPromise("IsTextArea",T);case 20:if(!I.sent){I.next=24;break}D=new TextEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pageDiv:this.pageDiv,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:T,editAreaIndex:M,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,hidden:this.tool==="addImage",isUpdate:!0}),I.next=28;break;case 24:return I.next=26,this.messageHandler.sendWithPromise("IsImageArea",T);case 26:if(!I.sent){I.next=28;break}D=new ImageEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pageDiv:this.pageDiv,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:T,editAreaIndex:M,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,$t:this.$t,hidden:this.tool==="addText"});case 28:D&&S.push(D);case 29:M++,I.next=11;break;case 32:this.frameEditorList.forEach(function(){var N=_asyncToGenerator(_regeneratorRuntime().mark(function O(F){return _regeneratorRuntime().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,F.updateCanvas(null,!0);case 2:F.isPopupShow&&F.hidePopup(),F.removeViewer();case 4:case"end":return U.stop()}},O)}));return function(O){return N.apply(this,arguments)}}()),this.frameEditorList.length=0,this.frameEditorList=S;case 35:case"end":return I.stop()}},d,this)})),function(d){return n.apply(this,arguments)})},{key:"addEditArea",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return x=null,k.next=3,this.messageHandler.sendWithPromise("IsTextArea",f);case 3:return k.sent&&(x=new TextEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pageDiv:this.pageDiv,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:f,editAreaIndex:this.frameEditorList.length,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,isUpdate:!0,hidden:this.tool==="addImage"})),k.next=7,this.messageHandler.sendWithPromise("IsImageArea",f);case 7:return k.sent&&(x=new ImageEditor({eventBus:this.eventBus,contentContainer:this,container:this.contentContainer,pageDiv:this.pageDiv,pagePtr:this.pagePtr,editPagePtr:this.editPagePtr,editAreaPtr:f,editAreaIndex:this.frameEditorList.length,viewport:this.pageViewer.viewport,scale:this.pageViewer.scale,messageHandler:this.messageHandler,pageViewer:this.pageViewer,$t:this.$t,hidden:this.tool==="addText"})),x&&this.frameEditorList.push(x),k.abrupt("return",x);case 11:case"end":return k.stop()}},d,this)})),function(d){return e.apply(this,arguments)})}]);var e,n,r,o,u,s,w,g,v,y,m}(),_TextSelection_pagePtr,_TextSelection_textPtr;function __awaiter(e,n,r,o){return new(r||(r=Promise))(function(u,s){function w(y){try{v(o.next(y))}catch(m){s(m)}}function g(y){try{v(o.throw(y))}catch(m){s(m)}}function v(y){y.done?u(y.value):function(m){return m instanceof r?m:new r(function(d){d(m)})}(y.value).then(w,g)}v((o=o.apply(e,n||[])).next())})}function __classPrivateFieldGet(e,n,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?e!==n||!o:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(e):o?o.value:n.get(e)}function __classPrivateFieldSet(e,n,r,o,u){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?e!==n||!u:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?u.call(e,r):u?u.value=r:n.set(e,r),r}var markupType=isMobileDevice$1?["highlight","underline","squiggly","strikeout","selectText"]:["highlight","underline","squiggly","strikeout","","redaction","remove"],markupTypeNotNull=["highlight","underline","squiggly","strikeout","redaction","remove"],leftSelectedPointerStr=`<svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 5.01475C0 2.25333 2.23858 0 5 0H9.94118V5.02941C9.94118 7.77459 7.71577 10 4.97059 10C2.22541 10 0 7.75993 0 5.01475Z" fill="#4982E6"/>
  </svg>`,rightSelectedPointerStr=`<svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M9.94116 5.01475C9.94116 2.25333 7.70259 0 4.94116 0H-1.43051e-05V5.02941C-1.43051e-05 7.77459 2.22539 10 4.97057 10C7.71575 10 9.94116 7.75993 9.94116 5.01475Z" fill="#4982E6"/>
  </svg>`,TextSelection=function(){return _createClass(function e(n){_classCallCheck(this,e),_TextSelection_pagePtr.set(this,void 0),_TextSelection_textPtr.set(this,void 0),this._tool=null,this.color=null,this.selecting=!1,this.documentViewer=n.documentViewer,this._selection=null,this.leftSelectedPointer=this.rightSelectedPointer=null,this.messageHandler=n.messageHandler,this.container=n.container||null,__classPrivateFieldSet(this,_TextSelection_textPtr,n.pagePtr.textPtr,"f"),__classPrivateFieldSet(this,_TextSelection_pagePtr,n.pagePtr.pagePtr,"f"),this.selected=n.selected,this.viewport=n.viewport,this.scale=n.scale,this.eventBus=n.eventBus,this.pageIndex=n.pageIndex,this.pageViewer=n.pageViewer,this.handleTool=this.handleTool.bind(this),this.handleToolMode=this.handleToolMode.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleDobuleClick=this.handleDobuleClick.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleTextPopup=this.handleTextPopup.bind(this),this.handleLeftPointerMouseDown=this.handleLeftPointerMouseDown.bind(this),this.handleRightPointerMouseDown=this.handleRightPointerMouseDown.bind(this),this.toolMode=n.toolMode,this.tool=n.tool,this.color=n.color,this.eventBus._on("toolChanged",this.handleTool),this.eventBus._on("toolModeChanged",this.handleToolMode),this.eventBus._on("textPopupClicked",this.handleTextPopup)},[{key:"handleToolMode",value:function(e){e!==this.toolMode&&(this.toolMode=e,document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("touchstart",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("dblclick",this.handleDobuleClick),["view","annotation","redaction"].includes(this.toolMode)&&(document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("touchstart",this.handleMouseDown),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleMouseMove),document.addEventListener("dblclick",this.handleDobuleClick)))}},{key:"handleTool",value:function(e){var n=e.tool,r=e.color;this.tool=n,this.color=r,markupType.includes(this.tool)?(document.body.style.userSelect="auto",document.body.style.webkitUserSelect="auto"):(document.body.style.userSelect="none",document.body.style.webkitUserSelect="none")}},{key:"tool",get:function(){return this._tool},set:function(e){if(e!==this._tool||e===""){if(!markupType.includes(e)||this.toolMode==="editor")return document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("touchstart",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("dblclick",this.handleDobuleClick),void(this._tool=e);markupType.includes(e)&&markupType.includes(this.tool)||(document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("mousedown",this.handleMouseDown),document.addEventListener("touchstart",this.handleMouseDown),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleMouseMove),document.addEventListener("dblclick",this.handleDobuleClick)),this._tool=e}}},{key:"testPoint",value:function(e){var n=getAbsoluteCoordinate(this.container,e),r=n.x,o=n.y,u=n.width,s=n.height;return!(r<0||o<0||r>u||o>s)&&{x:r,y:o}}},{key:"handleKeyDown",value:function(e){var n;if(e.key.toLocaleLowerCase()==="c"&&(e.ctrlKey||e.metaKey)){var r=(n=this._selection)===null||n===void 0?void 0:n.textContent;if(r){var o=this.documentViewer.getPermission("allowsCopying");if(!o)return this.documentViewer.permissionPasswordCallback(),{type:"permission",message:"The document contains a permission password."};o&&copyToClipboard$1(r)}}}},{key:"handleMouseDown",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!this.isTargetInElement(e.target,".text-popup")){m.next=2;break}return m.abrupt("return");case 2:if(this.cleanSelection(),r=this.tool,!(o=document.querySelectorAll(".dialog")).length){m.next=13;break}u=0;case 7:if(!(u<o.length)){m.next=13;break}if(!o[u].contains(e.target)){m.next=10;break}return m.abrupt("return");case 10:u++,m.next=7;break;case 13:if(e.target.className==="annotationContainer"||!this.isTargetInElement(e.target,".annotationContainer")||this.isTargetInElement(e.target,".markup")){m.next=15;break}return m.abrupt("return");case 15:if(!this.isTargetInElement(e.target,".text-editor-container")){m.next=17;break}return m.abrupt("return");case 17:if(this.isTargetInElement(e.target,".document-container")||this.isTargetInElement(e.target,".compare-document-container")){m.next=19;break}return m.abrupt("return");case 19:if(markupType.includes(r)){m.next=21;break}return m.abrupt("return");case 21:if(s=this.testPoint(e)){m.next=24;break}return m.abrupt("return");case 24:return w=s.x,g=s.y,v=getInitialPoint({x:w,y:g},this.scale),this.startPoint=v,m.next=29,this.isTextAtPoint(v);case 29:y=m.sent,this.selecting=!!y,document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleMouseUp);case 33:case"end":return m.stop()}},n,this)}))}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y,m,d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!this.pageViewer.documentViewer.pdfCursorTools.active){f.next=2;break}return f.abrupt("return");case 2:if(!this.isTargetInElement(e.target,".redaction-confirm-dialog")&&!this.isTargetInElement(e.target,".mask")){f.next=4;break}return f.abrupt("return");case 4:if((w=this.testPoint(e))&&!document.querySelector(".annotationContainer .outline-container")){f.next=8;break}return(r=this.container)===null||r===void 0||r.classList.remove("text"),f.abrupt("return");case 8:return g=w.x,v=w.y,y=getInitialPoint({x:g,y:v},this.scale),f.next=12,this.isTextAtPoint(y);case 12:if(!(m=f.sent)){f.next=17;break}(o=this.container)===null||o===void 0||o.classList.add("text"),f.next=19;break;case 17:return(u=this.container)===null||u===void 0||u.classList.remove("text"),f.abrupt("return");case 19:if(this.selecting){f.next=21;break}return f.abrupt("return");case 21:if(this.selecting&&m&&(this.selecting==="left"?this.startPoint=y:this.endPoint=y),!this.startPoint||this.startPoint.x!==this.endPoint.x||this.startPoint.y!==this.endPoint.y){f.next=24;break}return f.abrupt("return");case 24:return(s=this.container)===null||s===void 0||s.classList.add("selecting"),f.next=27,this.messageHandler.sendWithPromise("GetCharsRangeAtPos",{pagePtr:__classPrivateFieldGet(this,_TextSelection_pagePtr,"f"),textPtr:__classPrivateFieldGet(this,_TextSelection_textPtr,"f"),start:this.startPoint,end:this.endPoint});case 27:d=f.sent,this._selection=d,this.updateSelection();case 30:case"end":return f.stop()}},n,this)}))}},{key:"handleDobuleClick",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!this.pageViewer.documentViewer.pdfCursorTools.active){y.next=2;break}return y.abrupt("return");case 2:if(e.stopPropagation(),e.preventDefault(),(o=this.testPoint(e))&&!document.querySelector(".annotationContainer .outline-container")){y.next=8;break}return(r=this.container)===null||r===void 0||r.classList.remove("text"),y.abrupt("return");case 8:return u=o.x,s=o.y,w=getInitialPoint({x:u,y:s},this.scale),y.next=12,this.isTextAtPoint(w);case 12:if(y.sent){y.next=15;break}return y.abrupt("return");case 15:return y.next=17,this.messageHandler.sendWithPromise("GetSelectionForWordAtPos",{pagePtr:__classPrivateFieldGet(this,_TextSelection_pagePtr,"f"),textPtr:__classPrivateFieldGet(this,_TextSelection_textPtr,"f"),start:w,end:w});case 17:g=y.sent,this._selection=g,this.updateSelection(),this._selection&&this.textContainer&&["redaction","remove"].includes(this.tool)?(v={operate:"add-annot",type:"redact",pageIndex:this.pageIndex,date:new Date,rect:this.rect,rects:this.rects,color:this.color,erasure:this.tool==="remove",quadPoints:this.quadPoints,contents:this._selection.textContent||void 0},this.tool==="redaction"&&(v.fillColor="rgb(0, 0, 0)"),this.eventBus.dispatch("annotationChanged",{type:"add",annotation:v}),this.cleanSelection()):this._selection&&this.textContainer&&this.showTextPopup();case 21:case"end":return y.stop()}},n,this)}))}},{key:"handleMouseUp",value:function(){if(this.selecting&&this._selection&&markupTypeNotNull.includes(this.tool)){var e={operate:"add-annot",type:this.tool,pageIndex:this.pageIndex,date:new Date,opacity:1,quadPoints:this.quadPoints,rect:this.rect,color:this.color,contents:this._selection.textContent||void 0};this.tool!=="redaction"&&this.tool!=="remove"||(e.type="redact",e.rects=this.rects,e.erasure=this.tool==="remove",this.tool==="redaction"&&(e.fillColor="rgb(0, 0, 0)"),delete e.opacity),this.eventBus.dispatch("annotationChanged",{type:"add",annotation:e}),this.cleanSelection()}this.selecting=!1,this._selection&&this.textContainer&&this.showTextPopup()}},{key:"updateSelection",value:function(){var e,n,r,o=this._selection.textRects;(e=this.textContainer)===null||e===void 0||(e.textContent=""),!this.leftSelectedPointer&&(this.leftSelectedPointer=this.createSelectionPointer(!0)),!this.rightSelectedPointer&&(this.rightSelectedPointer=this.createSelectionPointer()),(n=this.textContainer)===null||n===void 0||n.append(this.leftSelectedPointer),(r=this.textContainer)===null||r===void 0||r.append(this.rightSelectedPointer);for(var u=[],s=[],w=[],g=[],v=[],y=[],m=0;m<o.length;m++){var d=o[m],f=d.Left,x=d.Top,k=d.Right,P=d.Bottom,S={left:f*this.scale,top:x*this.scale,right:k*this.scale,bottom:P*this.scale};w.push(x),g.push(P),v.push(f),y.push(k);var E={PointX:f,PointY:x},M={PointX:k,PointY:x},T={PointX:f,PointY:P},D={PointX:k,PointY:P};s.push(E,M,T,D),u.push({top:x,left:f,right:k,bottom:P}),m===0&&(this.leftSelectedPointer.style.left=S.left-10+"px",this.leftSelectedPointer.style.top=S.top+"px",this.leftSelectedPointer.style.height=S.bottom-S.top+10+"px"),m===o.length-1&&(this.rightSelectedPointer.style.left=S.right+"px",this.rightSelectedPointer.style.top=S.top+"px",this.rightSelectedPointer.style.height=S.bottom-S.top+10+"px"),this.drawSelection(S)}this.quadPoints=s,this.rects=u;var I=Math.min.apply(Math,w),N=Math.max.apply(Math,g),O=Math.min.apply(Math,v),F=Math.max.apply(Math,y);this.rect={left:O,top:I,right:F,bottom:N}}},{key:"drawSelection",value:function(e){var n,r;this.textContainer||(this.textContainer=document.createElement("div"),this.textContainer.classList.add("text-container"),(n=this.container)===null||n===void 0||n.appendChild(this.textContainer));var o=e.left,u=e.top,s=e.right,w=e.bottom,g=document.createElement("div");return g.classList.add("text-selection"),g.style.left="".concat(o,"px"),g.style.top="".concat(u,"px"),g.style.width="".concat(s-o,"px"),g.style.height="".concat(w-u,"px"),(r=this.textContainer)===null||r===void 0||r.appendChild(g),g}},{key:"createSelectionPointer",value:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=createElement("div",{width:"10px",display:"flex",justifyContent:"center",alignItems:"flex-end",position:"absolute",zIndex:122,cursor:"pointer"},{class:"pointer"});return e?(n.innerHTML=leftSelectedPointerStr,n.addEventListener("mousedown",this.handleLeftPointerMouseDown),n.addEventListener("touchstart",this.handleLeftPointerMouseDown)):(n.innerHTML=rightSelectedPointerStr,n.addEventListener("mousedown",this.handleRightPointerMouseDown),n.addEventListener("touchstart",this.handleRightPointerMouseDown)),n}},{key:"handleLeftPointerMouseDown",value:function(e){e.stopPropagation(),this.eventBus.dispatch("showTextPopup",{show:!1}),this.selecting="left"}},{key:"handleRightPointerMouseDown",value:function(e){e.stopPropagation(),this.eventBus.dispatch("showTextPopup",{show:!1}),this.selecting="right"}},{key:"cleanSelection",value:function(){var e,n,r,o,u,s;this.startPoint=null,this.endPoint=null,this.selecting=!1,(e=this.container)===null||e===void 0||e.classList.remove("selecting"),(n=this.textContainer)===null||n===void 0||n.remove(),this.textContainer=null,this._selection=null,(r=this.leftSelectedPointer)===null||r===void 0||r.addEventListener("mousedown",this.handleLeftPointerMouseDown),(o=this.leftSelectedPointer)===null||o===void 0||o.addEventListener("touchstart",this.handleLeftPointerMouseDown),(u=this.rightSelectedPointer)===null||u===void 0||u.addEventListener("mousedown",this.handleRightPointerMouseDown),(s=this.rightSelectedPointer)===null||s===void 0||s.addEventListener("touchstart",this.handleRightPointerMouseDown),this.leftSelectedPointer=this.rightSelectedPointer=null,document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleMouseUp),this.eventBus.dispatch("showTextPopup",{show:!1})}},{key:"destroy",value:function(){this.cleanSelection(),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("touchstart",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleMouseUp),document.removeEventListener("dblclick",this.handleDobuleClick),this.eventBus._off("toolChanged",this.handleTool),this.eventBus._off("toolModeChanged",this.handleToolMode),this.eventBus._off("textPopupClicked",this.handleTextPopup)}},{key:"showTextPopup",value:function(){var e,n,r=this.container.getBoundingClientRect(),o={left:this.rect.left*this.scale+r.left,top:this.rect.top*this.scale+r.top,right:this.rect.right*this.scale+r.left,bottom:this.rect.bottom*this.scale+r.top};this.eventBus.dispatch("showTextPopup",{show:!0,rect:o,text:(e=this._selection)===null||e===void 0?void 0:e.textContent});for(var u=[],s=0;s<this._selection.textRects.length;s++){var w=this._selection.textRects[s],g=w.Left,v=w.Top,y=w.Right,m=w.Bottom;u.push({left:g,top:v,right:y,bottom:m})}var d={selectedText:(n=this._selection)===null||n===void 0?void 0:n.textContent,pageNumber:this.pageIndex+1,textRects:u};this.eventBus.dispatch("textSelected",d)}},{key:"handleTextPopup",value:function(e){var n;if(this._selection){var r=e.tool,o=e.color,u=(n=this._selection)===null||n===void 0?void 0:n.textContent;if(markupTypeNotNull.includes(r)){var s={operate:"add-annot",type:r,pageIndex:this.pageIndex,date:new Date,opacity:.5,quadPoints:this.quadPoints,rect:this.rect,color:o||"#ff0000",contents:u};this.eventBus.dispatch("annotationChanged",{type:"add",annotation:s}),this.cleanSelection(),this.endPoint=null}}}},{key:"isTargetInElement",value:function(e,n){var r=document.querySelector(n);return!(!r||!r.contains(e))}},{key:"isTextAtPoint",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.messageHandler.sendWithPromise("GetCharIndexAtPos",{pagePtr:__classPrivateFieldGet(this,_TextSelection_pagePtr,"f"),textPtr:__classPrivateFieldGet(this,_TextSelection_textPtr,"f"),point:e});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},n,this)}))}}])}();_TextSelection_pagePtr=new WeakMap,_TextSelection_textPtr=new WeakMap;var TextSearch=function(){return _createClass(function e(n){var r=n.container,o=n.viewport,u=n.scale,s=n.pageIndex,w=n.results;_classCallCheck(this,e),this.searchContainer=null,this.activeIndex=0,this.container=null,this.scale=0,this.pageIndex=0,this._searchResults=[],this.color="rgba(255, 255, 0, 0.25)",this.container=r,this.viewport=o,this.scale=u,this.pageIndex=s,this._searchResults=w,w&&w.length&&this.renderSearchResults()},[{key:"searchResults",get:function(){return this._searchResults},set:function(e){this._searchResults=e,this.renderSearchResults()}},{key:"setActiveSearchResult",value:function(e){var n=e.pageNum;e&&(this.searchContainer&&this.searchContainer.querySelectorAll(".searchItems")[e.pageSearchIndex].classList.add("selected"),this.activeIndex=n-1)}},{key:"clearActiveSearchResult",value:function(e){if(this.searchContainer){var n=e.pageSearchIndex;this.searchContainer.querySelectorAll(".searchItems")[n].classList.remove("selected")}}},{key:"renderSearchResults",value:function(){var e=this.scale;if(!this.searchContainer){var n=document.createElement("div");n.className="searchContainer",this.container.appendChild(n),this.searchContainer=n}this.searchContainer.textContent="";for(var r=0;r<this.searchResults.length;r++)if(this.searchResults[r].pageNum===this.pageIndex+1){var o=this.searchResults[r],u=document.createElement("div");u.className="searchItems";for(var s=0;s<o.quads.length;s++){var w=o.quads[s],g=w.left,v=w.top,y={left:g*e,top:v*e,width:w.right*e-g*e,height:w.bottom*e-v*e},m=document.createElement("div");m.className="highlight",m.style.position="absolute",m.style.left="".concat(y.left,"px"),m.style.top="".concat(y.top,"px"),m.style.width="".concat(y.width,"px"),m.style.height="".concat(y.height,"px"),u.appendChild(m)}this.searchContainer.appendChild(u)}}},{key:"destroy",value:function(){this.searchContainer&&(this.searchContainer.parentNode.removeChild(this.searchContainer),this.searchContainer=null)}}])}(),CropPage=function(){return _createClass(function n(r){var o=r.container,u=r.viewport,s=r.scale,w=r.pageIndex,g=r.pagePtr,v=r.eventBus,y=r.messageHandler,m=r.pageViewer,d=r.annotationStore;_classCallCheck(this,n),this.container=o,this.viewport=u,this.scale=s,this.pageIndex=w,this.pagePtr=g.pagePtr,this.eventBus=v,this.messageHandler=y,this.pageViewer=m,this.annotationStore=d,this.startPoint=null,this.endPoint=null,this.listener=null,this.moved=!1,this.mousedown=isMobileDevice$1?"touchstart":"mousedown",this.mouseup=isMobileDevice$1?"touchend":"mouseup",this.mousemove=isMobileDevice$1?"touchmove":"mousemove",this.onDrawMousedown=this.handleDrawMouseDown.bind(this),this.onDrawMouseup=this.handleDrawMouseUp.bind(this),this.onDrawMousemove=this.handleDrawMouseMove.bind(this),this.onMousedown=this.handleMouseDown.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.handlePopup=this.handlePopup.bind(this)},[{key:"init",value:function(){var n=this;this.container.removeEventListener(this.mousedown,this.onDrawMousedown),this.container.addEventListener(this.mousedown,this.onDrawMousedown),setTimeout(function(){n.cropping||(n.container.style.cursor="crosshair"),n.container.style.touchAction="none"}),document.removeEventListener(this.mousemove,this.onDrawMousemove),document.removeEventListener(this.mouseup,this.onDrawMouseup)}},{key:"resetDraw",value:function(){this.startPoint=null,this.endPoint=null,this.container.style.cursor="",document.removeEventListener(this.mousemove,this.onDrawMousemove),document.removeEventListener(this.mouseup,this.onDrawMouseup),this.container.removeEventListener(this.mousedown,this.onDrawMousedown)}},{key:"reset",value:function(){this.startPoint=null,this.endPoint=null,this.cropContainer&&this.cropContainer.remove(),this.cropContainer=null,this.container.style.cursor="auto",this.container.style.touchAction="",document.removeEventListener(this.mousemove,this.onMousemove),document.removeEventListener(this.mouseup,this.onMouseup),this.container.removeEventListener(this.mousedown,this.onDrawMousedown),this.eventBus.dispatch("snipSelected",{rect:null,pageNumber:0}),this.eventBus.dispatch("pageCropped",{rect:null,pageNumber:0}),this.eventBus._off("cropPagePopupClicked",this.handlePopup),this.cropping=!1,this.annotationStore.cropping=!1,document.removeEventListener(this.mousedown,this.listener)}},{key:"getMouseLocation",value:function(n){var r=this.pageViewer.documentViewer.getScrollViewElement(),o=r.scrollLeft||0,u=r.scrollTop||0,s=getClickPoint(n);return{x:s.pageX+o,y:s.pageY+u}}},{key:"handleDrawMouseDown",value:function(n){if(!this.annotationStore.cropping){var r=this.getMouseLocation(n),o=this.pageViewer.documentViewer.windowToPage({x:r.x,y:r.y},this.pageIndex+1),u=o.x,s=o.y;this.startPoint={x:u,y:s},document.addEventListener(this.mousemove,this.onDrawMousemove),document.addEventListener(this.mouseup,this.onDrawMouseup)}}},{key:"handleDrawMouseMove",value:function(n){var r=this.getMouseLocation(n),o=this.pageViewer.documentViewer.windowToPage({x:r.x,y:r.y},this.pageIndex+1),u=o.x,s=o.y,w=this.viewport.viewBox[2],g=this.viewport.viewBox[3];if(u=Math.min(w,u),u=Math.max(0,u),s=Math.min(g,s),s=Math.max(0,s),this.endPoint={x:u,y:s},this.startPoint.x!==this.endPoint.x&&this.startPoint.y!==this.endPoint.y)if(this.cropContainer){var v=this.rectCalc(this.startPoint,this.endPoint),y=this.cropContainer;y.style.top="".concat(v.top,"px"),y.style.left="".concat(v.left,"px"),y.style.width="".concat(Math.abs(v.width-1),"px"),y.style.height="".concat(Math.abs(v.height-1),"px")}else{var m=createElement("div",{position:"absolute",border:"1px solid #1460F3",cursor:"all-scroll",zIndex:2},{class:"crop-box","data-id":"move"});this.cropContainer=m,this.container.append(this.cropContainer)}}},{key:"handleDrawMouseUp",value:function(){var n=this.startPoint,r=this.endPoint;if(this.resetDraw(),!r||n.x===r.x||n.y===r.y)return this.container.style.cursor="crosshair",void this.container.addEventListener(this.mousedown,this.onDrawMousedown);var o={x:Math.min(n.x,r.x),y:Math.min(n.y,r.y)},u={x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)},s={left:o.x,top:o.y,right:u.x,bottom:u.y};this.rect=s,this.start=o,this.end=u,this.renderCropBox()}},{key:"rectCalc",value:function(n,r){var o=this.viewport.scale,u=(n.y<r.y?n.y:r.y)*o,s=(n.x<r.x?n.x:r.x)*o,w=(n.x>r.x?n.x:r.x)*o,g=(n.y>r.y?n.y:r.y)*o;return{top:u,left:s,right:w,bottom:g,width:w-s,height:g-u}}},{key:"renderCropBox",value:function(){var n=10;this.tl=createElement("div",{position:"absolute",top:"".concat(-5,"px"),left:"".concat(-5,"px"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"nw-resize"},{class:"handle handle-tl","data-id":"nw-resize"}),this.tm=createElement("div",{position:"absolute",top:"".concat(-5,"px"),left:"50%",transform:"translateX(".concat(-5,"px)"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"n-resize"},{class:"handle handle-tm","data-id":"n-resize"}),this.tr=createElement("div",{position:"absolute",top:"".concat(-5,"px"),right:"".concat(-5,"px"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"ne-resize"},{class:"handle handle-tr","data-id":"ne-resize"}),this.mr=createElement("div",{position:"absolute",top:"50%",right:"".concat(-5,"px"),transform:"translateY(".concat(-5,"px)"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"e-resize"},{class:"handle handle-mr","data-id":"e-resize"}),this.br=createElement("div",{position:"absolute",bottom:"".concat(-5,"px"),right:"".concat(-5,"px"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"se-resize"},{class:"handle handle-br","data-id":"se-resize"}),this.bm=createElement("div",{position:"absolute",bottom:"".concat(-5,"px"),left:"50%",transform:"translateX(".concat(-5,"px)"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"s-resize"},{class:"handle handle-bm","data-id":"s-resize"}),this.bl=createElement("div",{position:"absolute",bottom:"".concat(-5,"px"),left:"".concat(-5,"px"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"sw-resize"},{class:"handle handle-bl","data-id":"sw-resize"}),this.ml=createElement("div",{position:"absolute",top:"50%",left:"".concat(-5,"px"),transform:"translateY(".concat(-5,"px)"),width:"".concat(n,"px"),height:"".concat(n,"px"),background:"#1460F3",cursor:"w-resize"},{class:"handle handle-ml","data-id":"w-resize"}),this.cropContainer.append(this.tl),this.cropContainer.append(this.tm),this.cropContainer.append(this.tr),this.cropContainer.append(this.mr),this.cropContainer.append(this.br),this.cropContainer.append(this.bm),this.cropContainer.append(this.bl),this.cropContainer.append(this.ml),this.cropContainer.addEventListener(this.mousedown,this.onMousedown),this.showPopup(),this.eventBus._on("cropPagePopupClicked",this.handlePopup),this.eventBus.dispatch("pageCropped",{rect:this.rect,pageNumber:this.pageIndex+1}),this.cropping=!0,this.annotationStore.cropping=!0,this.listener=onClickOutside$1([this.cropContainer],this.handleOutside.bind(this))}},{key:"handleMouseDown",value:function(n){var r=n.target.getAttribute("data-id"),o=this.getMouseLocation(n),u=this.pageViewer.documentViewer;this.moved=!1;var s=u.windowToPage({x:o.x,y:o.y},this.pageIndex+1),w=s.x,g=s.y;this.startState={operator:r,x:w,y:g},document.addEventListener(this.mousemove,this.onMousemove),document.addEventListener(this.mouseup,this.onMouseup)}},{key:"handleMouseMove",value:function(n){n.type==="touchmove"&&(document.body.style.overscrollBehavior="none");var r=this.getMouseLocation(n),o=this.pageViewer.documentViewer.windowToPage({x:r.x,y:r.y},this.pageIndex+1),u=o.x,s=o.y,w=this.start,g=this.end,v=this.startState,y=this.viewport.viewBox[2],m=this.viewport.viewBox[3];if(this.moved=!0,v.operator==="nw-resize"){var d=u-(v.x-this.start.x),f=s-(v.y-this.start.y);d=Math.min(g.x-5,d),d=Math.max(0,d),f=Math.min(g.y-5,f),f=Math.max(0,f),this.update({start:{x:d,y:f},end:g})}else if(v.operator==="w-resize"){var x=u-(v.x-this.start.x);x=Math.min(g.x-5,x),x=Math.max(0,x),this.update({start:{x,y:w.y},end:g})}else if(v.operator==="sw-resize"){var k=u-(v.x-this.start.x),P=s-(v.y-this.end.y);k=Math.min(g.x-5,k),k=Math.max(0,k),P=Math.min(m,P),P=Math.max(w.y+5,P),this.update({start:{x:k,y:w.y},end:{x:g.x,y:P}})}else if(v.operator==="s-resize"){var S=s-(v.y-this.end.y);S=Math.min(m,S),S=Math.max(w.y+5,S),this.update({start:w,end:{x:g.x,y:S}})}else if(v.operator==="se-resize"){var E=(v.x,this.end.x),M=(v.y,this.end.y);E=Math.max(w.x+5,u),M=Math.max(w.y+5,s),this.update({start:w,end:{x:E,y:M}})}else if(v.operator==="e-resize"){var T=(v.x,this.end.x);T=Math.max(w.x+5,u),this.update({start:w,end:{x:T,y:g.y}})}else if(v.operator==="ne-resize"){var D=(v.x,this.end.x),I=(v.y,this.start.y);D=Math.max(w.x+5,u),Math.min(g.y-5,s),I=Math.max(0,s),this.update({start:{x:w.x,y:I},end:{x:D,y:g.y}})}else if(v.operator==="n-resize"){var N=(v.y,this.start.y);Math.min(g.y-5,s),N=Math.max(0,s),this.update({start:{x:w.x,y:N},end:g})}else if(v.operator==="move"){var O=u-(v.x-this.start.x),F=s-(v.y-this.start.y),U=u-(v.x-this.end.x),Y=s-(v.y-this.end.y),Q={width:Math.abs(w.x-g.x),height:Math.abs(w.y-g.y)};O<U?(O=Math.max(0,O),O=Math.min(y-Q.width,O),U=Math.max(Q.width,U),U=Math.min(y,U)):(U=Math.max(0,U),U=Math.min(y-Q.width,U),O=Math.max(Q.width,O),O=Math.min(y,O)),F<Y?(F=Math.max(0,F),F=Math.min(m-Q.height,F),Y=Math.max(Q.height,Y),Y=Math.min(m,Y)):(Y=Math.max(0,Y),Y=Math.min(m-Q.height,Y),F=Math.max(Q.height,F),F=Math.min(m,F)),this.update({start:{x:O,y:F},end:{x:U,y:Y}})}}},{key:"handleMouseUp",value:function(n){if(n.type==="touchend"&&(this.layer.pageDiv.style.touchAction=""),document.removeEventListener(this.mousemove,this.onMousemove),document.removeEventListener(this.mouseup,this.onMouseup),this.moved){var r=getClickPoint(n),o=r.pageX,u=r.pageY;o!==this.startState.x||u!==this.startState.y?(this.start=this.newStart,this.end=this.newEnd,this.rect={left:this.start.x,top:this.start.y,right:this.end.x,bottom:this.end.y},this.showPopup(),this.eventBus.dispatch("pageCropped",{rect:this.rect,pageNumber:this.pageIndex+1})):this.showPopup()}}},{key:"update",value:function(n){var r=n.start,o=n.end,u=this.rectCalc(r,o);this.newStart=r,this.newEnd=o,this.cropContainer.style.top=u.top+"px",this.cropContainer.style.left=u.left+"px",this.cropContainer.style.width=u.width+"px",this.cropContainer.style.height=u.height+"px",this.cropContainer.style.width="".concat(u.width,"px"),this.cropContainer.style.height="".concat(u.height,"px"),this.showPopup({left:r.x,top:r.y,right:o.x,bottom:o.y})}},{key:"showPopup",value:function(n){this.eventBus.dispatch("snipSelected",{rect:n||this.rect,pageNumber:this.pageIndex+1})}},{key:"handlePopup",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(r){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:r==="close"&&(this.reset(),this.init());case 1:case"end":return o.stop()}},n,this)})),function(n){return e.apply(this,arguments)})},{key:"draw",value:function(){document.removeEventListener(this.mousedown,this.listener);var n=this.viewport.scale,r=this.rect,o=r.left,u=r.top,s=r.right,w=r.bottom,g=createElement("div",{position:"absolute",border:"1px solid #1460F3",cursor:"all-scroll",top:"".concat(u*n,"px"),left:"".concat(o*n,"px"),width:"".concat((s-o)*n,"px"),height:"".concat((w-u)*n,"px"),zIndex:2},{class:"crop-box","data-id":"move"});this.cropContainer=g,this.container.append(this.cropContainer),this.renderCropBox()}},{key:"handleOutside",value:function(){this.reset(),this.init()}},{key:"updateInitialProps",value:function(){this.container=this.pageViewer.div,this.viewport=this.pageViewer.viewport,this.scale=this.pageViewer.scale,this.pageIndex=this.pageViewer.pageIndex,this.pagePtr=this.pageViewer.pagesPtr[this.pageViewer.pageIndex].pagePtr,this.eventBus=this.pageViewer.eventBus,this.messageHandler=this.pageViewer.messageHandler,this.annotationStore=this.pageViewer.annotationStore}}]);var e}(),Separation=function(){return _createClass(function e(n){_classCallCheck(this,e),this.iccData=null,this.isClearData=!1,this.latestRequestPoint=null,this.isRequestInProgress=!1,this.colorList=[],this.onMousemove=this.handleMouseMove.bind(this),this.onClick=this.handleClick.bind(this),this.onUpdateCanvas=this.updateCanvas.bind(this),this.documentViewer=n.documentViewer,this.container=n.container,this.pageViewer=n.pageViewer,this.pagePtr=n.pagePtr},[{key:"init",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.initColorsList();case 2:this.documentViewer.eventBus._on("updateSeparationView",this.onUpdateCanvas),document.addEventListener("mousemove",this.onMousemove);case 4:case"end":return n.stop()}},e,this)}))}},{key:"initColorsList",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){var n,r,o,u,s,w,g=this;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return n=this.documentViewer,r=n.messageHandler,o=n.doc,u=n.eventBus,s=n.colorFile,r.sendWithPromise("InitColorList",o),v.next=4,r.sendWithPromise("GetPDFSeparationColor",{pagePtr:this.pagePtr.pagePtr,fileData:s});case 4:return w=v.sent,this.pagePtr.sepColorPtr=w,v.next=8,r.sendWithPromise("GetColorsList",o);case 8:this.colorList=v.sent,u.dispatch("colorSeparationUpdate",this.colorList),!this.documentViewer.colorList.length&&this.colorList.length&&(this.documentViewer.colorList=this.colorList,setTimeout(function(){u.dispatch("colorSeparationAdded",g.colorList)},100));case 11:case"end":return v.stop()}},e,this)}))}},{key:"destroy",value:function(){this.documentViewer.eventBus._off("updateSeparationView",this.onUpdateCanvas),document.removeEventListener("mousemove",this.onMousemove)}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(this.documentViewer.doc===this.pagePtr.doc){w.next=2;break}return w.abrupt("return");case 2:if(this.testPoint(e)){w.next=7;break}return!this.isClearData&&this.documentViewer.eventBus.dispatch("colorSeparationUpdate",this.colorList),this.isClearData=!0,w.abrupt("return");case 7:if(r=getAbsoluteCoordinate(this.container,e),o=r.x,u=r.y,s=getInitialPoint({x:o,y:u},this.pageViewer.viewport.scale),this.latestRequestPoint=s,!this.isRequestInProgress){w.next=12;break}return w.abrupt("return");case 12:return w.next=14,this.processLatestRequest();case 14:case"end":return w.stop()}},n,this)}))}},{key:"handleClick",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:r=getAbsoluteCoordinate(this.container,e),o=r.x,u=r.y,getInitialPoint({x:o,y:u},this.pageViewer.viewport.scale);case 2:case"end":return s.stop()}},n,this)}))}},{key:"getSelectPointColor",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.documentViewer.messageHandler.sendWithPromise("GetSelectPointColor",{pagePtr:this.pagePtr.pagePtr,sepColorPtr:this.pagePtr.sepColorPtr,point:e});case 2:if(!(r=s.sent).length){s.next=12;break}return o=this.colorList.map(function(w){return Object.assign({},w)}),u=[],r.forEach(function(w){o[w.Index].intensity=w.ColorIntensity,u.push({name:o[w.Index].name,value:w.ColorIntensity})}),this.documentViewer.eventBus.dispatch("colorSeparationUpdate",o),this.isClearData=!1,s.abrupt("return",u);case 12:return this.isClearData||this.documentViewer.eventBus.dispatch("colorSeparationUpdate",this.colorList),this.isClearData=!0,s.abrupt("return",r);case 15:case"end":return s.stop()}},n,this)}))}},{key:"updateCanvas",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y,m,d,f;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(this.pageViewer.canvas){x.next=2;break}return x.abrupt("return");case 2:return o=window.devicePixelRatio||1,u=this.pageViewer.viewport,s=u.width,w=u.height,g=Math.round(s*o),v=Math.round(w*o),x.next=8,this.documentViewer.messageHandler.sendWithPromise("RenderPageAndIgnoreColorByIndex",{sepColorPtr:this.pagePtr.sepColorPtr,width:g,height:v,indexs:e});case 8:if(y=x.sent,m=y.imageArray,d=(r=this.pageViewer.canvas)===null||r===void 0?void 0:r.getContext("2d")){x.next=13;break}return x.abrupt("return");case 13:d.clearRect(0,0,g,v),(f=d.createImageData(g,v)).data.set(m),d.putImageData(f,0,0),this.documentViewer.eventBus.dispatch("redrawMarkups",{pageIndex:this.pageViewer.pageIndex,isRestorePage:!1}),this.documentViewer.eventBus.dispatch("finishUpdateSeparationView");case 19:case"end":return x.stop()}},n,this)}))}},{key:"testPoint",value:function(e){var n=getAbsoluteCoordinate(this.container,e),r=n.x,o=n.y,u=n.width,s=n.height;return!(r<0||o<0||r>u||o>s)&&{x:r,y:o}}},{key:"processLatestRequest",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){var n;return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.isRequestInProgress=!0,!(n=this.latestRequestPoint)){r.next=11;break}return r.prev=3,r.next=6,this.getSelectPointColor(n);case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(3),console.error("\u8BF7\u6C42\u51FA\u9519:",r.t0);case 11:this.isRequestInProgress=!1;case 12:case"end":return r.stop()}},e,this,[[3,8]])}))}}])}(),MAX_CANVAS_PIXELS=maxCanvasPixels,_previousRotation=new WeakMap,_useThumbnailCanvas=new WeakMap,_PDFPageView_brand=new WeakSet,PDFPageView=function(){return _createClass(function s(w){var g;_classCallCheck(this,s),_classPrivateMethodInitSpec(this,_PDFPageView_brand),_classPrivateFieldInitSpec(this,_previousRotation,null),_classPrivateFieldInitSpec(this,_useThumbnailCanvas,{initialOptionalContent:!0,regularAnnotations:!0}),_defineProperty$1(this,"_activeSearch",null),this.documentViewer=w.documentViewer,this._loadingId=null;var v=w.container,y=w.defaultViewport;this.id=w.id,this.pageIndex=w.pageIndex,this.renderingId="page"+this.id,this.layerProperties=w.layerProperties,this.doc=w.doc,this.messageHandler=w.messageHandler,this.pagesPtr=w.pagesPtr,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.annotationStore=w.annotationStore,this.tool="",this.color="",this.toolMode="",this.enableReply=w.enableReply,this.scale=w.scale||DEFAULT_SCALE,this.viewport=y,this.pdfPageRotate=y.rotation,this.hasRestrictedScaling=!1,this.textLayerMode=(g=w.textLayerMode)!==null&&g!==void 0?g:TextLayerMode.ENABLE,this.imageResourcesPath=w.imageResourcesPath||"",this.useOnlyCssZoom=w.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=!0,this.maxCanvasPixels=w.maxCanvasPixels||MAX_CANVAS_PIXELS,this.pageColors=w.pageColors||null,this.eventBus=w.eventBus,this._annotations=w.annotations,this._annotationsAll=w.annotationsAll,this.pagesPtr=w.pagesPtr,(typeof PDFJSDev>"u"||PDFJSDev.test("!PRODUCTION || GENERIC"))&&(this.renderer=w.renderer||RendererType.CANVAS),this.l10n=w.l10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this._renderingState=RenderingStates$1.INITIAL,this.resume=null,this._renderError=null,this._annotationCanvasMap=null,this.annotationLayer=null,this.compdfAnnotationLayer=null,this.annotationEditorLayer=null,this.textSelect=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.contentContainer=null,this.textSelection=null,this.textSearch=null,this.searchResults=null,this.cropPage=null,this.separation=null;var m=document.createElement("div");m.className="page page-number"+this.id,m.setAttribute("data-page-number",this.id),m.setAttribute("role","region"),this.pagePressHandle=this.pagePressHandle.bind(this),m.addEventListener("click",this.pagePressHandle),this.div=m,_assertClassBrand(_PDFPageView_brand,this,_setDimensions).call(this),v==null||v.append(m),this.selected=w.selected,this.$t=w.$t,this.eventBus._on("toolChanged",this.handleTool.bind(this)),this.eventBus._on("toolModeChanged",this.handleToolMode.bind(this)),this.eventBus._on("search",this.handleSearch.bind(this)),this.mode=null,this.contentEditHistoryManager=w.contentEditHistoryManager,v==null||v.style.setProperty("--scale-factor",this.scale*PixelsPerInch.PDF_TO_CSS_UNITS)},[{key:"pagePressHandle",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function s(w){var g,v,y,m,d,f,x,k,P,S,E,M,T,D,I,N,O,F,U,Y;return _regeneratorRuntime().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(g=w.currentTarget,v=this.id,y=this.pageIndex,v&&(m=document.getElementById("sign-image-save"))){if(d=m.getAttribute("src"),f=g.getBoundingClientRect(),x=m.getBoundingClientRect(),k=x.x-f.x,P=x.y-f.y,S=k+m.width,E=P+m.height,M=k/this.scale,T=P/this.scale,D=S/this.scale,I=E/this.scale,N=null,m.inkPath){for(O=[],F=0;F<m.inkPath.length;F++){for(U=[],Y=0;Y<m.inkPath[F].length;Y++)U.push({PointX:m.inkPath[F][Y].x/this.scale+M,PointY:T+m.inkPath[F][Y].y/this.scale});O.push(U)}N={operate:"add-annot",type:"ink",pageIndex:y,inkPointes:O,rect:{left:M,top:T,right:D,bottom:I},targetPage:v,borderWidth:m.inkParam.width||1,borderColor:m.inkParam.color||"#000",date:new Date,name:v4()}}else N={operate:"add-annot",type:"stamp",stampType:"image",pageIndex:y,imageBase64:d,rect:{left:M,top:T,right:D,bottom:I},targetPage:v,date:new Date,name:v4()};N&&this.eventBus.dispatch("createSignature",N),m.remove(),document.querySelector(".content").onmousemove=null}case 4:case"end":return Q.stop()}},s,this)})),function(s){return u.apply(this,arguments)})},{key:"handleTool",value:function(s){var w=s.tool,g=s.color;this.cropPage&&(w==="cropPage"?this.cropPage.init():this.cropPage.reset()),this.compdfAnnotationLayer||(this.tool=w,this.color=g)}},{key:"handleToolMode",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(w){var g;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(g=this.mode,this.mode=w,this.toolMode=w,!this.contentContainer){v.next=10;break}if(w!=="editor"){v.next=9;break}return v.next=7,this.contentContainer.init();case 7:v.next=10;break;case 9:this.contentContainer.destroy();case 10:this.separation&&(g!=="separation"&&w==="separation"?(this.separation.init(),document.querySelector(".document").classList.add("color-separation")):g==="separation"&&w!=="separation"&&(this.separation.destroy(),document.querySelector(".document").classList.remove("color-separation")));case 11:case"end":return v.stop()}},s,this)})),function(s){return o.apply(this,arguments)})},{key:"handleSearch",value:function(s,w){this.searchResults=s,this.textSearch&&(this.textSearch.color=w||"rgba(255, 255, 0, 0.25)",this.textSearch.searchResults=s)}},{key:"annotations",get:function(){return this._annotations},set:function(s){this._annotations=s,this.compdfAnnotationLayer&&(this.compdfAnnotationLayer.annotations=this.annotations)}},{key:"annotationsAll",get:function(){return this._annotationsAll},set:function(s){this._annotationsAll=s,this.compdfAnnotationLayer&&(this.compdfAnnotationLayer.annotationsAll=this.annotationsAll)}},{key:"renderingState",get:function(){return this._renderingState},set:function(s){var w=this;if(s!==this._renderingState)switch(this._renderingState=s,this._loadingId&&(clearTimeout(this._loadingId),this._loadingId=null),s){case RenderingStates$1.PAUSED:this.div.classList.remove("loading");break;case RenderingStates$1.RUNNING:this.div.classList.add("loadingIcon"),this._loadingId=setTimeout(function(){w.div.classList.add("loading"),w._loadingId=null},0);break;case RenderingStates$1.INITIAL:case RenderingStates$1.FINISHED:this.div.classList.remove("loadingIcon","loading")}}},{key:"selectedText",get:function(){if(!this.textSelection)return null;var s=this.textSelection._selection;return s?s.textContent:null}},{key:"selectedTextQuads",get:function(){var s=this.textSelection;return s&&s._selection?{textQuads:s.rects,rect:s.rect,pageIndex:this.pageIndex}:null}},{key:"setPdfPage",value:function(s){this.pdfPage=s,this.pdfPageRotate=s.rotate;var w=(this.rotation+this.pdfPageRotate)%360;this.viewport=s.getViewport({scale:this.scale*PixelsPerInch.PDF_TO_CSS_UNITS,rotation:w}),_assertClassBrand(_PDFPageView_brand,this,_setDimensions).call(this),this.reset()}},{key:"destroy",value:function(){var s;this.reset(),(s=this.pdfPage)===null||s===void 0||s.cleanup()}},{key:"clearSearchResults",value:function(){this.searchResults=null,this.textSearch&&this.textSearch.destroy()}},{key:"_renderAnnotationLayer",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var w;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return w=null,g.prev=1,g.next=4,this.annotationLayer.render(this.viewport,"display");case 4:g.next=10;break;case 6:g.prev=6,g.t0=g.catch(1),console.error('_renderAnnotationLayer: "'.concat(g.t0,'".')),w=g.t0;case 10:return g.prev=10,this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:w}),g.finish(10);case 13:case"end":return g.stop()}},s,this,[[1,6,10,13]])})),function(){return r.apply(this,arguments)})},{key:"emptyAnnotations",value:function(){this.compdfAnnotationLayer&&this.compdfAnnotationLayer.emptyAnnotations()}},{key:"_renderAnnotationEditorLayer",value:function(){this.annotationEditorLayer.render(this.viewport,"display")}},{key:"selectAnnotation",value:function(s){var w=this;s.name&&(this.annotationStore.toSelectAnnotationName=s.name);var g=this.compdfAnnotationLayer;if(g){var v=g.annotationsArray,y=v.findIndex(function(d){return d.annotation.name===w.annotationStore.toSelectAnnotationName});if(this.annotationStore.selectedElementName){var m=v.findIndex(function(d){return d.annotation.name===w.annotationStore.selectedElementName});m>-1&&g.annotationsArray[m].handleOutside()}y>-1&&(g.annotationsArray[y].selectAnnotation(),this.annotationStore.toSelectAnnotationName=null)}}},{key:"deselectAnnotation",value:function(s){var w=this.annotationStore.selectedElementName;s.name===w&&this.getAnnotationWithName(s.name).handleOutside()}},{key:"getAnnotationWithName",value:function(s){var w=this.compdfAnnotationLayer;if(w){var g=w.annotationsArray.findIndex(function(v){return v.annotation.name===s});return g>-1?w.annotationsArray[g]:void 0}}},{key:"renderPage",value:function(){var s=this;this.renderingState!==RenderingStates$1.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());var w=this.div,g=this.viewport,v=this.pdfPage,y=this.annotations,m=this.annotationsAll;if(!v)throw this.renderingState=RenderingStates$1.FINISHED,new Error("pdfPage is not loaded");this.renderingState=RenderingStates$1.RUNNING;var d=document.createElement("div");d.classList.add("canvasWrapper"),w.append(d);var f=document.createElement("canvas");f.setAttribute("role","presentation"),f.hidden=!0;var x=!0;d.append(f),this.canvas=f;var k=window.devicePixelRatio||1;this.radio=k;var P=g.width,S=g.height,E=g.scale,M=Math.round(P*k),T=Math.round(S*k);f.width=M,f.height=T;var D=f.style;D.width=Math.round(P)+"px",D.height=Math.round(S)+"px",this.paintedViewportMap.set(f,g);var I=(this.renderTask=this.internalRenderTask({width:P,height:S,scale:E*k})).promise.then(_asyncToGenerator(_regeneratorRuntime().mark(function N(){var O,F,U,Y;return _regeneratorRuntime().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return x&&(f.hidden=!1,x=!1),Q.next=3,s.finishRenderTask();case 3:if(_assertClassBrand(_PDFPageView_brand,s,_renderTextLayer).call(s),!s.annotationLayer){Q.next=7;break}return Q.next=7,s._renderAnnotationLayer();case 7:if(s.annotationEditorLayer){Q.next=12;break}if(F=s.layerProperties(),U=F.annotationEditorUIManager,Y=F.annotationStorage,U){Q.next=11;break}return Q.abrupt("return");case 11:s.annotationEditorLayer=new PDFAnnotationLayer({uiManager:U,annotationStorage:Y,pageIndex:s.pageIndex,pageDiv:w,viewport:s.viewport,scale:s.scale,annotations:y,accessibilityManager:s._accessibilityManager});case 12:if(s._renderAnnotationEditorLayer(),s.compdfAnnotationLayer||(s.compdfAnnotationLayer=new ComPDFAnnotationLayer({annotationStore:s.annotationStore,messageHandler:s.messageHandler,pageViewer:s,annotations:y,annotationsAll:m,viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,pageDiv:w,eventBus:s.eventBus,selected:s.selected,enableReply:s.enableReply,$t:s.$t})),s.compdfAnnotationLayer.render(s.viewport),s.contentContainer){Q.next=20;break}s.contentContainer=new ContentContainer({annotationStore:s.annotationStore,pageViewer:s,annotations:y,annotationsAll:m,viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,pageDiv:w,eventBus:s.eventBus,selected:s.selected,pagePtr:s.pagesPtr[s.pageIndex].pagePtr,messageHandler:s.messageHandler,$t:s.$t,contentEditHistoryManager:s.contentEditHistoryManager}),s.mode==="editor"&&s.contentContainer.init(),Q.next=23;break;case 20:if(s.mode!=="editor"){Q.next=23;break}return Q.next=23,s.contentContainer.render();case 23:s.textSelection||(s.textSelection=new TextSelection({documentViewer:s.documentViewer,viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,container:w,eventBus:s.eventBus,selected:s.selected,pagePtr:s.pagesPtr[s.pageIndex],messageHandler:s.messageHandler,tool:s.tool,toolMode:s.toolMode,color:s.color,pageViewer:s})),s.textSearch||(s.textSearch=new TextSearch({viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,container:w,results:s.searchResults}),s._activeSearch&&s.textSearch.setActiveSearchResult(s._activeSearch)),(O=s.cropPage)!==null&&O!==void 0&&O.cropping&&s.cropPage.draw(),s.cropPage?s.cropPage.updateInitialProps():s.cropPage=new CropPage({viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,container:w,eventBus:s.eventBus,selected:s.selected,pagePtr:s.pagesPtr[s.pageIndex],messageHandler:s.messageHandler,tool:s.tool,toolMode:s.toolMode,color:s.color,pageViewer:s,annotationStore:s.annotationStore}),s.tool==="cropPage"&&s.cropPage.init(),s.separation||(s.separation=new Separation({documentViewer:s.documentViewer,container:w,pagePtr:s.pagesPtr[s.pageIndex],pageViewer:s}),s.mode==="separation"&&s.separation.init());case 29:case"end":return Q.stop()}},N)})),function(N){return console.log(N),s.finishRenderTask(N)});return w.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),I}},{key:"internalRenderTask",value:function(s){var w=s.width,g=s.height,v=s.scale,y=this.renderTask;return y&&y.cancel(),y=this.render({width:w,height:g,scale:v})}},{key:"render",value:function(s){var w=this,g=s.width,v=s.height,y=s.scale,m=new PromiseExt;m.cancel=function(){m.reject("Cancel")};var d=this.canvas,f=this.pagesPtr,x=this.pageIndex;return this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:f[x].pagePtr,left:0,top:0,right:Math.round(g),bottom:Math.round(v),scale:y}).then(function(k){var P=d.getContext("2d");if(k&&k.code)return w.eventBus.dispatch("message",{type:"ERROR",message:k.message}),void console.log(k.message);var S=k.imageArray;P.clearRect(0,0,g,v);var E=P.createImageData(g,v);E.data.set(S),P.putImageData(E,0,0),w.baseImageData=E,m.resolve()}).catch(function(k){console.log(k)}),m}},{key:"finishRenderTask",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.renderTask=null,this._renderError=s,this.renderingState=RenderingStates$1.FINISHED,this._resetZoomLayer(!0),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this._renderError}),s)throw s}},{key:"_resetZoomLayer",value:function(){var s=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.zoomLayer){var w=this.zoomLayer.firstChild;this.paintedViewportMap.delete(w),w.width=0,w.height=0,s&&this.zoomLayer.remove(),this.zoomLayer=null}}},{key:"reset",value:function(){var s,w,g,v,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=y.keepZoomLayer,d=m!==void 0&&m,f=y.keepAnnotationLayer,x=f!==void 0&&f,k=y.keepAnnotationEditorLayer,P=k!==void 0&&k,S=y.keepXfaLayer,E=S!==void 0&&S,M=y.keepTextLayer,T=M!==void 0&&M;this.cancelRendering({keepAnnotationLayer:x,keepAnnotationEditorLayer:P,keepXfaLayer:E,keepTextLayer:T}),this.renderingState=RenderingStates$1.INITIAL;for(var D,I=this.div,N=I.childNodes,O=d&&this.zoomLayer||null,F=x&&((s=this.annotationLayer)===null||s===void 0?void 0:s.div)||null,U=P&&((w=this.annotationEditorLayer)===null||w===void 0?void 0:w.div)||null,Y=T&&((g=this.textLayer)===null||g===void 0?void 0:g.div)||null,Q=N.length-1;Q>=0;Q--){var q=N[Q];switch(q){case O:case Y:case F:case U:continue}q.remove()}I.removeAttribute("data-loaded"),F&&this.annotationLayer.hide(),U?this.annotationEditorLayer.hide():(D=this.annotationEditorLayer)===null||D===void 0||D.destroy(),Y&&this.textLayer.hide(),(v=this.structTreeLayer)===null||v===void 0||v.hide(),O||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}},{key:"update",value:function(s){var w,g=s.scale,v=g===void 0?0:g,y=s.rotation,m=y===void 0?null:y,d=s.drawingDelay,f=d===void 0?-1:d;this.scale=v||this.scale,typeof m=="number"&&(this.rotation=m);var x=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*PixelsPerInch.PDF_TO_CSS_UNITS,rotation:x}),_assertClassBrand(_PDFPageView_brand,this,_setDimensions).call(this),(w=this.div.parentNode)===null||w===void 0||w.style.setProperty("--scale-factor",this.viewport.scale);var k=f>=0&&f<1e3;if(this.canvas){if(k||this.useOnlyCssZoom||this.hasRestrictedScaling&&isScalingRestricted)return k&&this.renderingState!==RenderingStates$1.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:f}),this.renderingState=RenderingStates$1.FINISHED),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!k,hideTextLayer:k}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError}),void this.reset({keepZoomLayer:!1,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0});this.zoomLayer||this.canvas.hidden||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}},{key:"cancelRendering",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=s.keepAnnotationLayer,g=w!==void 0&&w,v=s.keepAnnotationEditorLayer,y=v!==void 0&&v,m=s.cancelExtraDelay,d=m===void 0?0:m;this.paintTask&&(this.paintTask.cancel(d),this.paintTask=null),this.resume=null,this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),!this.annotationLayer||g&&this.annotationLayer.div||(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.compdfAnnotationLayer&&(this.compdfAnnotationLayer.cancel(),this.compdfAnnotationLayer=null),!this.annotationEditorLayer||y&&this.annotationEditorLayer.div||(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.contentContainer&&this.contentContainer.cancel(),this.textSelection&&(this.textSelection.destroy(),this.textSelection=null),this.textSearch&&(this.textSearch.destroy(),this.textSearch=null),this.separation&&(this.separation.destroy(),this.separation=null)}},{key:"cssTransform",value:function(s){var w=s.target,g=s.redrawAnnotationLayer,v=g!==void 0&&g,y=s.redrawAnnotationEditorLayer,m=y!==void 0&&y;s.redrawXfaLayer;var d=s.redrawTextLayer,f=d!==void 0&&d,x=s.hideTextLayer,k=x!==void 0&&x;if(w instanceof HTMLCanvasElement){if(!w.hasAttribute("zooming")){w.setAttribute("zooming",!0);var P=w.style;P.width=P.height=""}}else{var S=this.div,E=this.viewport,M=E.width,T=E.height;w.style.width=w.parentNode.style.width=S.style.width=Math.floor(M)+"px",w.style.height=w.parentNode.style.height=S.style.height=Math.floor(T)+"px"}var D,I=this.paintedViewportMap.get(w);if(this.viewport!==I){var N=this.viewport.rotation-I.rotation,O=Math.abs(N),F=1,U=1;if(O===90||O===270){var Y=this.viewport,Q=Y.width,q=Y.height;F=q/Q,U=Q/q}O!==0&&(w.style.transform="rotate(".concat(N,"deg) scale(").concat(F,", ").concat(U,")"))}v&&this.annotationLayer&&this._renderAnnotationLayer(),m&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer(),this.textLayer&&(k?(this.textLayer.hide(),(D=this.structTreeLayer)===null||D===void 0||D.hide()):f&&_assertClassBrand(_PDFPageView_brand,this,_renderTextLayer).call(this))}},{key:"width",get:function(){return this.viewport.width}},{key:"height",get:function(){return this.viewport.height}},{key:"getPagePoint",value:function(s,w){return this.viewport.convertToPdfPoint(s,w)}},{key:"addTextEditor",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function s(w){var g,v,y,m;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.contentContainer){d.next=5;break}return g=this.div,v=this.annotationStore,y=this.annotations,m=this.annotationsAll,this.contentContainer=new ContentContainer({annotationStore:v,pageViewer:this,annotations:y,annotationsAll:m,viewport:this.viewport,scale:this.scale,pageIndex:this.pageIndex,pageDiv:g,eventBus:this.eventBus,selected:this.selected,pagePtr:this.pagesPtr[this.pageIndex].pagePtr,rotation:this.pagesPtr[this.pageIndex].rotation,messageHandler:this.messageHandler,$t:this.$t,contentEditHistoryManager:this.contentEditHistoryManager}),d.next=5,this.contentContainer.init();case 5:this.contentContainer.addTextEditor(w);case 6:case"end":return d.stop()}},s,this)})),function(s){return n.apply(this,arguments)})},{key:"getEditAnnotation",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var w,g,v,y;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(this.contentContainer){m.next=5;break}return w=this.div,g=this.annotationStore,v=this.annotations,y=this.annotationsAll,this.contentContainer=new ContentContainer({annotationStore:g,pageViewer:this,annotations:v,annotationsAll:y,viewport:this.viewport,scale:this.scale,pageIndex:this.pageIndex,pageDiv:w,eventBus:this.eventBus,selected:this.selected,pagePtr:this.pagesPtr[this.pageIndex].pagePtr,rotation:this.pagesPtr[this.pageIndex].rotation,messageHandler:this.messageHandler,$t:this.$t,contentEditHistoryManager:this.contentEditHistoryManager}),m.next=5,this.contentContainer.init();case 5:return m.abrupt("return",this.contentContainer);case 6:case"end":return m.stop()}},s,this)})),function(){return e.apply(this,arguments)})},{key:"draw",value:function(){var s=this;this.renderingState!==RenderingStates$1.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());var w=this.div,g=this.pdfPage,v=this.annotations,y=this.annotationsAll;if(!g)return this.renderingState=RenderingStates$1.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=RenderingStates$1.RUNNING;var m=document.createElement("div");m.classList.add("canvasWrapper"),w.append(m);var d=function(){var k=_asyncToGenerator(_regeneratorRuntime().mark(function P(){var S,E=arguments;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(S=E.length>0&&E[0]!==void 0?E[0]:null,f===s.paintTask&&(s.paintTask=null),!(S instanceof pdfExports.RenderingCancelledException)){M.next=5;break}return s._renderError=null,M.abrupt("return");case 5:if(s._renderError=S,s.renderingState=RenderingStates$1.FINISHED,s._resetZoomLayer(!0),_classPrivateFieldGet2(_useThumbnailCanvas,s).regularAnnotations=!f.separateAnnots,s.eventBus.dispatch("pagerendered",{source:s,pageNumber:s.id,cssTransform:!1,timestamp:performance.now(),error:s._renderError}),!S){M.next=12;break}throw S;case 12:case"end":return M.stop()}},P)}));return function(){return k.apply(this,arguments)}}(),f=this.paintOnCanvas(m);f.onRenderContinue=null,this.paintTask=f;var x=f.promise.then(function(){return d(null).then(_asyncToGenerator(_regeneratorRuntime().mark(function k(){var P,S,E,M;return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(_assertClassBrand(_PDFPageView_brand,s,_renderTextLayer).call(s),!s.annotationLayer){T.next=4;break}return T.next=4,s._renderAnnotationLayer();case 4:if(s.annotationEditorLayer){T.next=9;break}if(S=s.layerProperties(),E=S.annotationEditorUIManager,M=S.annotationStorage,E){T.next=8;break}return T.abrupt("return");case 8:s.annotationEditorLayer=new PDFAnnotationLayer({uiManager:E,annotationStorage:M,pageIndex:s.pageIndex,pageDiv:w,viewport:s.viewport,scale:s.scale,annotations:v,accessibilityManager:s._accessibilityManager});case 9:if(s._renderAnnotationEditorLayer(),s.compdfAnnotationLayer?s.compdfAnnotationLayer.destroy():s.compdfAnnotationLayer=new ComPDFAnnotationLayer({documentViewer:s.documentViewer,annotationStore:s.annotationStore,messageHandler:s.messageHandler,pageViewer:s,annotations:v,annotationsAll:y,viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,pageDiv:w,eventBus:s.eventBus,selected:s.selected,enableReply:s.enableReply,$t:s.$t}),s.compdfAnnotationLayer.render(s.viewport),s.contentContainer){T.next=17;break}s.contentContainer=new ContentContainer({annotationStore:s.annotationStore,pageViewer:s,annotations:v,annotationsAll:y,viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,pageDiv:w,eventBus:s.eventBus,selected:s.selected,pagePtr:s.pagesPtr[s.pageIndex].pagePtr,rotation:s.pagesPtr[s.pageIndex].rotation,messageHandler:s.messageHandler,$t:s.$t,contentEditHistoryManager:s.contentEditHistoryManager}),s.mode==="editor"&&s.contentContainer.init(),T.next=20;break;case 17:if(s.mode!=="editor"){T.next=20;break}return T.next=20,s.contentContainer.render();case 20:if(!s.contentContainer||s.contentContainer.pagePtr===s.pagesPtr[s.pageIndex].pagePtr){T.next=24;break}return s.contentContainer.pagePtr=s.pagesPtr[s.pageIndex].pagePtr,T.next=24,s.contentContainer.update();case 24:s.textSelection||(s.textSelection=new TextSelection({documentViewer:s.documentViewer,viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,container:w,eventBus:s.eventBus,selected:s.selected,pagePtr:s.pagesPtr[s.pageIndex],messageHandler:s.messageHandler,tool:s.tool,toolMode:s.toolMode,color:s.color,pageViewer:s})),s.textSearch||(s.textSearch=new TextSearch({viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,container:w,results:s.searchResults}),s._activeSearch&&s.textSearch.setActiveSearchResult(s._activeSearch)),(P=s.cropPage)!==null&&P!==void 0&&P.cropping&&s.cropPage.draw(),s.cropPage?s.cropPage.updateInitialProps():s.cropPage=new CropPage({viewport:s.viewport,scale:s.scale,pageIndex:s.pageIndex,container:w,eventBus:s.eventBus,selected:s.selected,pagePtr:s.pagesPtr[s.pageIndex],messageHandler:s.messageHandler,tool:s.tool,toolMode:s.toolMode,color:s.color,pageViewer:s,annotationStore:s.annotationStore}),s.tool==="cropPage"&&s.cropPage.init();case 29:case"end":return T.stop()}},k)})))},function(k){return d(k)});return w.setAttribute("data-loaded",!0),x}},{key:"paintOnCanvas",value:function(s){var w=this,g=pdfExports.createPromiseCapability(),v={promise:g.promise,onRenderContinue:function(N){N()},cancel:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;I.cancel(N)},get separateAnnots(){return I.separateAnnots}},y=document.createElement("canvas");y.setAttribute("role","presentation"),y.hidden=!0;var m=!0,d=function(){m&&(y.hidden=!1,m=!1)};s.append(y),this.canvas=y;var f=y.getContext("2d"),x=window.devicePixelRatio||1;this.radio=x;var k=this.viewport,P=k.width,S=k.height,E=k.scale,M=Math.round(P*x),T=Math.round(S*x);y.width=M,y.height=T;var D=y.style;D.width=Math.round(P)+"px",D.height=Math.round(S)+"px",this.paintedViewportMap.set(y,k);var I=new PromiseExt;return I.cancel=function(){},I.resolve(),I.promise.then(_asyncToGenerator(_regeneratorRuntime().mark(function N(){var O,F,U;return _regeneratorRuntime().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(O=null,w.separation){Y.next=7;break}if(w.separation=new Separation({documentViewer:w.documentViewer,container:w.div,pagePtr:w.pagesPtr[w.pageIndex],pageViewer:w}),Y.t0=w.mode==="separation",!Y.t0){Y.next=7;break}return Y.next=7,w.separation.init();case 7:if(w.toolMode!=="separation"||!w.annotationStore.ignoreColors.length){Y.next=13;break}return Y.next=10,w.messageHandler.sendWithPromise("RenderPageAndIgnoreColorByIndex",{sepColorPtr:w.pagesPtr[w.pageIndex].sepColorPtr,x:0,y:0,width:M,height:T,indexs:w.annotationStore.ignoreColors});case 10:O=Y.sent,Y.next=22;break;case 13:if(!w.documentViewer.renderLayerPermission||!w.documentViewer.layers.length){Y.next=19;break}return Y.next=16,w.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:w.pagesPtr[w.pageIndex].pagePtr,left:0,top:0,right:Math.round(M),bottom:Math.round(T),scale:E*x,ocgsPtr:_toConsumableArray$1(w.documentViewer.ocgsPtr)});case 16:O=Y.sent,Y.next=22;break;case 19:return Y.next=21,w.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:w.pagesPtr[w.pageIndex].pagePtr,left:0,top:0,right:Math.round(M),bottom:Math.round(T),scale:E*x});case 21:O=Y.sent;case 22:if(!O||!O.code){Y.next=26;break}return w.eventBus.dispatch("message",{type:"ERROR",message:O.message}),console.log(O.message),Y.abrupt("return");case 26:F=O.imageArray,f.clearRect(0,0,M,T),(U=f.createImageData(M,T)).data.set(F),f.putImageData(U,0,0),w.baseImageData=U,d(),g.resolve();case 34:case"end":return Y.stop()}},N)})),function(N){console.log(N),N instanceof pdfExports.RenderingCancelledException||d(),g.reject(N)}),v}},{key:"setActiveSearchResult",value:function(s){this._activeSearch=s,this.textSearch&&this.textSearch.setActiveSearchResult(s)}},{key:"clearActiveSearchResult",value:function(s){this._activeSearch=null,this.textSearch&&this.textSearch.clearActiveSearchResult(s)}},{key:"setPageLabel",value:function(s){this.pageLabel=typeof s=="string"?s:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}},{key:"thumbnailCanvas",get:function(){return this.canvas}},{key:"fontFile",get:function(){return this._fontFile},set:function(s){this._fontFile=s}},{key:"redrawCanvas",value:function(){var s=this;this.renderingState=RenderingStates$1.RUNNING;var w=pdfExports.createPromiseCapability(),g={promise:w.promise,onRenderContinue:function(I){I()},cancel:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;D.cancel(I)},get separateAnnots(){return D.separateAnnots}},v=this.canvas;v.hidden=!0;var y=!0,m=function(){y&&(v.hidden=!1,y=!1)},d=v.getContext("2d"),f=window.devicePixelRatio||1;this.radio=f;var x=this.viewport,k=x.width,P=x.height,S=x.scale,E=Math.round(k*f),M=Math.round(P*f);v.width=E,v.height=M;var T=v.style;T.width=Math.round(k)+"px",T.height=Math.round(P)+"px",this.paintedViewportMap.set(v,x);var D=new PromiseExt;return D.cancel=function(){},D.resolve(),D.promise.then(_asyncToGenerator(_regeneratorRuntime().mark(function I(){var N,O,F;return _regeneratorRuntime().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(N=null,s.toolMode!=="separation"||!s.annotationStore.ignoreColors.length){U.next=7;break}return U.next=4,s.messageHandler.sendWithPromise("RenderPageAndIgnoreColorByIndex",{sepColorPtr:s.pagesPtr[s.pageIndex].sepColorPtr,x:0,y:0,width:E,height:M,indexs:s.annotationStore.ignoreColors});case 4:N=U.sent,U.next=16;break;case 7:if(!s.documentViewer.renderLayerPermission||!s.documentViewer.layers.length){U.next=13;break}return U.next=10,s.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:s.pagesPtr[s.pageIndex].pagePtr,left:0,top:0,right:Math.round(E),bottom:Math.round(M),scale:S*f,ocgsPtr:_toConsumableArray$1(s.documentViewer.ocgsPtr)});case 10:N=U.sent,U.next=16;break;case 13:return U.next=15,s.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:s.pagesPtr[s.pageIndex].pagePtr,left:0,top:0,right:Math.round(E),bottom:Math.round(M),scale:S*f});case 15:N=U.sent;case 16:if(!N||!N.code){U.next=20;break}return s.eventBus.dispatch("message",{type:"ERROR",message:N.message}),console.log(N.message),U.abrupt("return");case 20:O=N.imageArray,d.clearRect(0,0,E,M),(F=d.createImageData(E,M)).data.set(O),d.putImageData(F,0,0),s.baseImageData=F,s.eventBus.dispatch("redrawMarkups",{pageIndex:s.pageIndex,isRestorePage:!1}),m(),w.resolve(),s.renderingState=RenderingStates$1.FINISHED;case 30:case"end":return U.stop()}},I)})),function(I){console.log(I),I instanceof pdfExports.RenderingCancelledException||m(),w.reject(I)}),g}}]);var e,n,r,o,u}();function _setDimensions(){var e=this.viewport;if(this.pdfPage){if(_classPrivateFieldGet2(_previousRotation,this)===e.rotation)return;_classPrivateFieldSet2(_previousRotation,this,e.rotation)}pdfExports.setLayerDimensions(this.div,e,!0,!1)}function _renderTextLayer(){return _renderTextLayer2.apply(this,arguments)}function _renderTextLayer2(){return(_renderTextLayer2=_asyncToGenerator(_regeneratorRuntime().mark(function e(){var n,r,o,u,s;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(n=this.pdfPage,r=this.textLayer,o=this.viewport,r){w.next=3;break}return w.abrupt("return");case 3:return u=null,w.prev=4,r.renderingDone||(s=n.streamTextContent({includeMarkedContent:!0}),r.setTextContentSource(s)),w.next=8,r.render(o);case 8:w.next=16;break;case 10:if(w.prev=10,w.t0=w.catch(4),!(w.t0 instanceof pdfExports.AbortException)){w.next=14;break}return w.abrupt("return");case 14:console.error('#renderTextLayer: "'.concat(w.t0,'".')),u=w.t0;case 16:this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:r.numTextDivs,error:u});case 17:case"end":return w.stop()}},e,this,[[4,10]])}))).apply(this,arguments)}var ContentEditHistoryManager=function(){return _createClass(function s(w){_classCallCheck(this,s),this.messageHandler=w.messageHandler,this.eventBus=w.eventBus,this.pdfViewer=w.pdfViewer,this.undoList=[],this.redoList=[],this.eventBus._on("toolModeChanged",this.handleToolMode.bind(this))},[{key:"canRedo",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function s(w){var g;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(w){v.next=2;break}return v.abrupt("return",this.redoList.length>0);case 2:if(w.editPagePtr){v.next=4;break}return v.abrupt("return",!1);case 4:return v.next=6,this.messageHandler.sendWithPromise("CanRedo",w.editPagePtr);case 6:return g=v.sent,v.abrupt("return",!!g);case 8:case"end":return v.stop()}},s,this)})),function(s){return u.apply(this,arguments)})},{key:"canUndo",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(w){var g;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(w){v.next=2;break}return v.abrupt("return",this.undoList.length>0);case 2:if(w.editPagePtr){v.next=4;break}return v.abrupt("return",!1);case 4:return v.next=6,this.messageHandler.sendWithPromise("CanUndo",w.editPagePtr);case 6:return g=v.sent,v.abrupt("return",!!g);case 8:case"end":return v.stop()}},s,this)})),function(s){return o.apply(this,arguments)})},{key:"redo",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var w,g;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(w=this.redoList.pop()){v.next=4;break}return console.warn("No actions to redo"),v.abrupt("return",!1);case 4:return v.next=6,this.messageHandler.sendWithPromise("Redo",w.editPagePtr);case 6:g=v.sent,this.undoList.push(w),this.updateView(w.pageIndex,g),this.eventBus.dispatch("undoRedoStatusChanged");case 10:case"end":return v.stop()}},s,this)})),function(){return r.apply(this,arguments)})},{key:"undo",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var w,g;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(w=this.undoList.pop()){v.next=4;break}return console.warn("No actions to undo"),v.abrupt("return",!1);case 4:return v.next=6,this.messageHandler.sendWithPromise("Undo",w.editPagePtr);case 6:return g=v.sent,v.next=9,this.canRedo(w);case 9:v.sent&&this.redoList.push(w),this.updateView(w.pageIndex,g),this.eventBus.dispatch("undoRedoStatusChanged");case 13:case"end":return v.stop()}},s,this)})),function(){return n.apply(this,arguments)})},{key:"updateView",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function s(w,g){return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.pdfViewer._pages[w].contentContainer.updateFrameEditor(g);case 2:this.eventBus.dispatch("changeOperateList",{undoListLength:this.undoList.length,redoListLength:this.redoList.length});case 3:case"end":return v.stop()}},s,this)})),function(s,w){return e.apply(this,arguments)})},{key:"handleToolMode",value:function(s){s!=="editor"&&(this.undoList.length||this.redoList.length)&&(this.undoList.length=0,this.redoList.length=0)}}]);var e,n,r,o,u}(),DistanceMeasurementCreateTool=function(){return _createClass(function e(n){var r;_classCallCheck(this,e),this.drawingPageIndex=-1,this.drawingLayer=null,this.realStartPoint=null,this.realEndPoint=null,this.oriStartPoint=null,this.oriEndPoint=null,this.startLineEle=null,this.endLineEle=null,this.startArrowEle=null,this.endArrowEle=null,this.startPerpendicularLine=null,this.endPerpendicularLine=null,this.annotation=null,this.onClick=this.handleClick.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.handleTool=this.handleTool.bind(this),this.documentViewer=n.documentViewer,this.tool=n.documentViewer.activeTool,this.eventBus=n.documentViewer.eventBus,this.annotationStore=n.annotationStore,this.measureType="distance",this.defaults={scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1},this.defaultStyles={borderWidth:2,opacity:1,color:"#FF0000",borderColor:"#FF0000",borderStyle:"solid",dashes:[],head:"openarrow",tail:"openarrow",fontName:"Helvetica",fontSize:14,fontStyle:"regular"},this.leaderLineDefaultOptions={leadLength:9,leadOffset:-9,leadExtension:6,labelPosition:"inside"},this.decimalPlaces=((r=this.defaults.precision.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0,this.eventBus._on("toolChanged",this.handleTool)},[{key:"handleTool",value:function(e){var n=e.tool;e.color,this.tool,this.tool=n}},{key:"init",value:function(){document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),this.documentViewer.viewerContainer.addEventListener("click",this.onClick),this.documentViewer.viewerContainer.classList.add("annotation-edit")}},{key:"reset",value:function(){this.realStartPoint=null,this.realEndPoint=null,this.oriStartPoint=null,this.oriEndPoint=null,this.startLineEle=null,this.endLineEle=null,this.startArrowEle=null,this.endArrowEle=null,this.startPerpendicularLine=null,this.endPerpendicularLine=null,this.documentViewer.viewerContainer.removeEventListener("click",this.onClick),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mousedown",this.onMousedown),this.documentViewer.viewerContainer.classList.remove("annotation-edit")}},{key:"handleClick",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y,m,d,f,x,k,P,S,E,M,T;return _regeneratorRuntime().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(u=this.getMouseLocation(e),s=this.documentViewer.getSelectedPage(u,u),!((w=s.first-1)<0)){D.next=5;break}return D.abrupt("return");case 5:if(!(this.annotationStore.selectedElementName&&this.drawingPageIndex<0)){D.next=7;break}return D.abrupt("return");case 7:if(g=this.documentViewer.pdfViewer._pages[w].compdfAnnotationLayer,v=getAbsoluteCoordinate(g.pageDiv,e),y=this.documentViewer.windowToPage(u,w+1),!(this.drawingPageIndex<0)){D.next=27;break}return this.drawingPageIndex=w,this.drawingLayer=g,this.drawingLayer.annotationStore.creating=!0,this.realStartPoint={x:v.x,y:v.y},this.oriStartPoint={x:y.x,y:y.y},m=this.oriStartPoint,d={left:m.x,top:m.y,right:m.x+1,bottom:m.y+1},(f=Object.assign(Object.assign({measure:1,operate:"add-annot",type:"line",measureType:this.measureType,pageIndex:w,date:new Date,rect:d},this.defaults),this.defaultStyles)).type=="line"&&(x=[m.x,m.y,m.x+1,m.y+1],f.linePoints=x,f=Object.assign(f,this.leaderLineDefaultOptions)),D.next=22,this.documentViewer.annotationManager.createMeasurementAnnotation(f);case 22:return k=D.sent,this.annotation=k[0],document.addEventListener("mousemove",this.onMousemove),this.updateMeasureData(),D.abrupt("return");case 27:if(this.drawingPageIndex=-1,this.drawingLayer.annotationStore.creating=!1,this.realEndPoint={x:v.x,y:v.y},this.oriEndPoint={x:y.x,y:y.y},!this.realEndPoint||((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x&&((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y){D.next=48;break}if(P=Object.assign({},this.oriStartPoint),S=Object.assign({},this.oriEndPoint),this.oriStartPoint.y===this.oriEndPoint.y||this.oriStartPoint.x===this.oriEndPoint.x?(P.x=Math.min(this.oriEndPoint.x,this.oriStartPoint.x),P.y=Math.min(this.oriEndPoint.y,this.oriStartPoint.y),S.x=Math.max(this.oriEndPoint.x,this.oriStartPoint.x),S.y=Math.max(this.oriEndPoint.y,this.oriStartPoint.y)):this.oriStartPoint.y>this.oriEndPoint.y&&(P=this.oriEndPoint,S=this.oriStartPoint),P){D.next=37;break}return D.abrupt("return");case 37:return E={left:Math.min(P.x,S.x),top:Math.min(P.y,S.y),right:Math.max(P.x,S.x),bottom:Math.max(P.y,S.y)},M=[P.x,P.y,S.x,S.y],T={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:E,linePoints:M,labelPosition:this.annotation.labelPosition,contents:this.annotation.contents},this.annotation.rect=E,this.annotation.linePoints=M,D.next=44,this.documentViewer.annotationManager.editMeasurementAnnotation(T);case 44:return D.next=46,this.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 46:D.next=49;break;case 48:this.documentViewer.deleteAnnotations(this.annotation);case 49:this.annotation=null,this.realStartPoint=null,this.realEndPoint=null,this.oriStartPoint=null,this.oriEndPoint=null,this.startLineEle=null,this.endLineEle=null,this.startArrowEle=null,this.endArrowEle=null,this.startPerpendicularLine=null,this.endPerpendicularLine=null,g.svgElement.innerHTML="",document.removeEventListener("mousemove",this.onMousemove),this.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:this.documentViewer.annotations});case 63:case"end":return D.stop()}},n,this)}))}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y,m,d,f,x,k,P,S,E,M,T,D,I,N,O,F,U,Y,Q,q,ne;return _regeneratorRuntime().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!(this.drawingPageIndex<0)){J.next=2;break}return J.abrupt("return");case 2:return u=getAbsoluteCoordinate(this.drawingLayer.pageDiv,e),s=u.x,w=u.y,g=this.drawingLayer.viewport,v=g.width,y=g.height,m=g.scale,s=Math.max(0,Math.min(v,s)),w=Math.max(0,Math.min(y,w)),this.realEndPoint={x:s,y:w},((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x&&(this.realEndPoint.x+=1),((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y&&(this.realEndPoint.y+=1),d=getInitialPoint({x:s,y:w},m),this.oriEndPoint={x:d.x,y:d.y},f=Object.assign({},this.oriStartPoint),x=Object.assign({},this.oriEndPoint),this.oriStartPoint.y===this.oriEndPoint.y||this.oriStartPoint.x===this.oriEndPoint.x?(f.x=Math.min(this.oriEndPoint.x,this.oriStartPoint.x),f.y=Math.min(this.oriEndPoint.y,this.oriStartPoint.y),x.x=Math.max(this.oriEndPoint.x,this.oriStartPoint.x),x.y=Math.max(this.oriEndPoint.y,this.oriStartPoint.y)):this.oriStartPoint.y>this.oriEndPoint.y&&(f=this.oriEndPoint,x=this.oriStartPoint),k={left:Math.min(f.x,x.x),top:Math.min(f.y,x.y),right:Math.max(f.x,x.x),bottom:Math.max(f.y,x.y)},P=[f.x,f.y,x.x,x.y],S={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:k,linePoints:P},this.annotation.contents&&(S.contents=this.annotation.contents,S.labelPosition=this.annotation.labelPosition),this.annotation.rect=k,this.annotation.linePoints=P,J.next=22,this.documentViewer.annotationManager.editMeasurementAnnotation(S);case 22:return J.next=24,this.getResult();case 24:(E=J.sent)&&(this.annotation.length=E,this.annotation.contents=E+this.defaults.scale.translateUnit),this.startLineEle||(this.startLineEle=createSvg("line",{stroke:this.defaultStyles.borderColor,"stroke-width":2*m,"stroke-opacity":.8}),this.endLineEle=createSvg("line",{stroke:this.defaultStyles.borderColor,"stroke-width":2*m,"stroke-opacity":.8}),this.drawingLayer.svgElement.append(this.endLineEle),this.drawingLayer.svgElement.append(this.startLineEle),this.startArrowEle=this.createArrow(this.realStartPoint,this.realEndPoint,!0),this.endArrowEle=this.createArrow(this.realStartPoint,this.realEndPoint,!1),this.textEle=createSvg("text",{fill:this.defaultStyles.color||this.defaultStyles.borderColor,"text-anchor":"middle","dominant-baseline":"middle","font-size":this.defaultStyles.fontSize+"px"}),this.drawingLayer.svgElement.append(this.textEle)),this.updateArrow(this.startArrowEle,this.realStartPoint,this.realEndPoint,!0),this.updateArrow(this.endArrowEle,this.realStartPoint,this.realEndPoint,!1),M={x:(this.realStartPoint.x+this.realEndPoint.x)/2,y:(this.realStartPoint.y+this.realEndPoint.y)/2},T=Math.atan2(this.realEndPoint.y-this.realStartPoint.y,this.realEndPoint.x-this.realStartPoint.x)/Math.PI*180,D=Math.abs(T)>90?T-180:T,I=Math.abs(T)>90?180-Math.abs(T):T,N=1*Math.abs(I).toFixed(this.decimalPlaces),this.annotation.angle=N,O=this.realEndPoint.x-this.realStartPoint.x,F=this.realEndPoint.y-this.realStartPoint.y,U=Math.sqrt(O*O+F*F),Y=O/U,Q=F/U,q=this.annotation.contents.length*this.annotation.fontSize*.65,ne=U>q?q:U,this.startLineEle.setAttribute("x1","".concat(this.realStartPoint.x)),this.startLineEle.setAttribute("y1","".concat(this.realStartPoint.y)),this.startLineEle.setAttribute("x2","".concat(this.realStartPoint.x+Y*(U/2-ne/2))),this.startLineEle.setAttribute("y2","".concat(this.realStartPoint.y+Q*(U/2-ne/2))),this.endLineEle.setAttribute("x1","".concat(this.realStartPoint.x+Y*(U/2+ne/2))),this.endLineEle.setAttribute("y1","".concat(this.realStartPoint.y+Q*(U/2+ne/2))),this.endLineEle.setAttribute("x2","".concat(this.realEndPoint.x)),this.endLineEle.setAttribute("y2","".concat(this.realEndPoint.y)),this.textEle.setAttribute("x",M.x),this.textEle.setAttribute("y",M.y),this.textEle.setAttribute("transform","rotate(".concat(D," ").concat(M.x," ").concat(M.y,")")),this.textEle.textContent=this.annotation.contents,this.updateMeasureData();case 57:case"end":return J.stop()}},n,this)}))}},{key:"createArrow",value:function(e,n){var r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],o=this.drawingLayer.viewport.scale,u=new ArrowHelper(e,n),s=r?u.getStartArrow(45,10*o,!1):u.getEndArrow(45,10*o,!1);return s&&(s.setAttribute("stroke","#FF0000"),s.setAttribute("stroke-width","".concat(2*o)),s.setAttribute("fill","none"),s.setAttribute("stroke-opacity","0.8"),this.drawingLayer.svgElement.append(s)),s}},{key:"updateArrow",value:function(e,n,r,o){if(e){var u=new ArrowHelper(n,r),s=o?u.getStartArrowPoints(45,10*this.drawingLayer.viewport.scale):u.getEndArrowPoints(45,10*this.drawingLayer.viewport.scale);if(s&&s.length){var w=s.map(function(g){return"".concat(g.x,",").concat(g.y)}).join(" ");e.setAttribute("points",w)}}}},{key:"updatePerpendicularLines",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:12,n=this.realEndPoint.x-this.realStartPoint.x,r=this.realEndPoint.y-this.realStartPoint.y,o=Math.sqrt(n*n+r*r);if(o!==0){var u=-(r/o),s=n/o,w=this.drawingLayer.viewport.scale,g=e*w/2,v={x:this.realStartPoint.x+u*g,y:this.realStartPoint.y+s*g},y={x:this.realStartPoint.x-u*g,y:this.realStartPoint.y-s*g},m={x:this.realEndPoint.x+u*g,y:this.realEndPoint.y+s*g},d={x:this.realEndPoint.x-u*g,y:this.realEndPoint.y-s*g};this.startPerpendicularLine?(this.startPerpendicularLine.setAttribute("x1",v.x),this.startPerpendicularLine.setAttribute("y1",v.y),this.startPerpendicularLine.setAttribute("x2",y.x),this.startPerpendicularLine.setAttribute("y2",y.y)):(this.startPerpendicularLine=createSvg("line",{x1:v.x,y1:v.y,x2:y.x,y2:y.y,stroke:"#FF0000","stroke-width":2*w,"stroke-opacity":.8}),this.drawingLayer.svgElement.append(this.startPerpendicularLine)),this.endPerpendicularLine?(this.endPerpendicularLine.setAttribute("x1",m.x),this.endPerpendicularLine.setAttribute("y1",m.y),this.endPerpendicularLine.setAttribute("x2",d.x),this.endPerpendicularLine.setAttribute("y2",d.y)):(this.endPerpendicularLine=createSvg("line",{x1:m.x,y1:m.y,x2:d.x,y2:d.y,stroke:"#FF0000","stroke-width":2*w,"stroke-opacity":.8}),this.drawingLayer.svgElement.append(this.endPerpendicularLine))}}},{key:"destroy",value:function(){this.reset(),this.eventBus._off("toolChanged",this.handleTool)}},{key:"getMouseLocation",value:function(e){var n,r=this.documentViewer.getScrollViewElement(),o=((n=document.querySelector(".document-container"))===null||n===void 0?void 0:n.style.marginLeft)||0;o=parseFloat(o);var u=r.scrollLeft||0,s=r.scrollTop||0,w=getClickPoint(e);return{x:w.pageX+u-o,y:w.pageY+s}}},{key:"getLeaderLineDefaultOptions",value:function(){return this.leaderLineDefaultOptions}},{key:"getResult",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){var n,r,o,u;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=this.annotation,r=n.annotPtr,o=n.rulerPtr,s.next=3,this.documentViewer.messageHandler.sendWithPromise("GetMeasurementResult",{annotPtr:r,rulerPtr:o});case 3:if((u=s.sent)%1!=0){s.next=8;break}return s.abrupt("return",u);case 8:return s.abrupt("return",u.toFixed(this.decimalPlaces));case 9:case"end":return s.stop()}},e,this)}))}},{key:"updateMeasureData",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){var n,r,o;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n=0,r=0,!this.annotation.rulerPtr||!this.oriEndPoint){u.next=11;break}return u.next=5,this.documentViewer.messageHandler.sendWithPromise("GetFactor",this.annotation.rulerPtr);case 5:o=u.sent,n=(Math.abs(this.oriEndPoint.x-this.oriStartPoint.x)*o).toFixed(this.decimalPlaces),r=(Math.abs(this.oriEndPoint.y-this.oriStartPoint.y)*o).toFixed(this.decimalPlaces),this.annotation.factor=o,this.annotation.X=n,this.annotation.Y=r;case 11:this.documentViewer.eventBus.dispatch("updateMeasureData",{scale:this.defaults.scale,precision:this.defaults.precision,length:this.annotation.length||0,angle:this.annotation.angle||0,X:n,Y:r});case 12:case"end":return u.stop()}},e,this)}))}},{key:"setDefaults",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u=this;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(Object.entries(e).forEach(function(w){var g=_slicedToArray(w,2),v=g[0],y=g[1];Object.entries(u.defaults).forEach(function(m){var d,f=_slicedToArray(m,2),x=f[0],k=f[1];v===x&&k!==y&&(u.defaults[x]=y,x==="precision"&&(u.decimalPlaces=((d=y.toString().split(".")[1])===null||d===void 0?void 0:d.length)||0))})}),!this.annotationStore.selectedElementName){s.next=3;break}return s.abrupt("return");case 3:if(r={scale:this.defaults.scale,precision:this.defaults.precision,length:0,angle:0,X:0,Y:0},!this.annotation){s.next=11;break}return s.next=7,this.getResult();case 7:o=s.sent,this.annotation.length=o,this.annotation.contents=o+this.defaults.scale.translateUnit,r.length=o;case 11:this.documentViewer.eventBus.dispatch("updateMeasureData",r);case 12:case"end":return s.stop()}},n,this)}))}}])}(),AreaMeasurementCreateTool=function(){return _createClass(function e(n){var r;_classCallCheck(this,e),this.drawingPageIndex=-1,this.drawingLayer=null,this.realStartPoint=null,this.realEndPoint=null,this.oriStartPoint=null,this.oriEndPoint=null,this.shapeEle=null,this.textEle=null,this.annotation=null,this.onMousedown=this.handleMouseDown.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.handleTool=this.handleTool.bind(this),this.documentViewer=n.documentViewer,this.tool=n.documentViewer.activeTool,this.eventBus=n.documentViewer.eventBus,this.annotationStore=n.annotationStore,this.measureType="area",this.defaults={scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1},this.defaultStyles={borderWidth:2,opacity:1,fillTransparency:1,color:"#FF0000",borderColor:"#FF0000",borderStyle:"solid",dashes:[],fontName:"Helvetica",fontSize:14,fontStyle:"regular",labelPosition:"inside"},this.decimalPlaces=((r=this.defaults.precision.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0,this.showPerimeter=!0,this.showArea=!0,this.eventBus._on("toolChanged",this.handleTool)},[{key:"handleTool",value:function(e){var n=e.tool;e.color,this.tool,this.tool=n}},{key:"init",value:function(){document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.addEventListener("mousedown",this.onMousedown),this.documentViewer.viewerContainer.classList.add("annotation-edit")}},{key:"reset",value:function(){this.realStartPoint=null,this.realEndPoint=null,this.oriStartPoint=null,this.oriEndPoint=null,this.shapeEle=null,this.textEle=null,document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),this.documentViewer.viewerContainer.classList.remove("annotation-edit")}},{key:"handleMouseDown",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(e.target.className==="annotationContainer"){m.next=2;break}return m.abrupt("return");case 2:if(r=this.getMouseLocation(e),o=this.documentViewer.getSelectedPage(r,r),!((u=o.first-1)<0)){m.next=7;break}return m.abrupt("return");case 7:if(!(this.annotationStore.selectedElementName&&this.drawingPageIndex<0)){m.next=9;break}return m.abrupt("return");case 9:return s=this.documentViewer.pdfViewer._pages[u].compdfAnnotationLayer,w=getAbsoluteCoordinate(s.pageDiv,e),g=this.documentViewer.windowToPage(r,u+1),this.drawingPageIndex=u,this.drawingLayer=s,this.realStartPoint={x:w.x,y:w.y},this.oriStartPoint={x:g.x,y:g.y},this.oriStartPoint,v=Object.assign(Object.assign({measure:1,operate:"add-annot",type:"polygon",measureType:this.measureType,pageIndex:u,date:new Date},this.defaults),this.defaultStyles),m.next=20,this.documentViewer.annotationManager.createMeasurementAnnotation(v);case 20:y=m.sent,this.annotation=y[0],document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),this.updateMeasureData();case 25:case"end":return m.stop()}},n,this)}))}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y,m,d,f,x,k,P,S,E,M,T,D;return _regeneratorRuntime().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(this.drawingPageIndex<0)){I.next=2;break}return I.abrupt("return");case 2:return u=getAbsoluteCoordinate(this.drawingLayer.pageDiv,e),s=u.x,w=u.y,g=this.drawingLayer.viewport,v=g.width,y=g.height,m=g.scale,s=Math.max(0,Math.min(v,s)),w=Math.max(0,Math.min(y,w)),this.realEndPoint={x:s,y:w},((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x&&(this.realEndPoint.x+=1),((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y&&(this.realEndPoint.y+=1),d=getInitialPoint({x:s,y:w},m),this.oriEndPoint={x:d.x,y:d.y},f=this.oriStartPoint,x=this.oriEndPoint,k={left:Math.min(f.x,x.x),top:Math.min(f.y,x.y),right:Math.max(f.x,x.x),bottom:Math.max(f.y,x.y)},P=[{x:k.left,y:k.top},{x:k.right,y:k.top},{x:k.right,y:k.bottom},{x:k.left,y:k.bottom}],S={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:k,vertices:P},this.annotation.contents&&(S.contents=this.annotation.contents,S.labelPosition=this.annotation.labelPosition),this.annotation.rect=k,this.annotation.vertices=P,I.next=21,this.documentViewer.annotationManager.editMeasurementAnnotation(S);case 21:return I.next=23,this.getResult();case 23:E=[],this.showPerimeter&&E.push(this.annotation.perimeter+this.defaults.scale.translateUnit),this.showArea&&E.push(this.annotation.area+this.defaults.scale.translateUnit+"\xB2"),this.annotation.contents=E.join(`
`),this.shapeEle||(this.shapeEle=createSvg("rect",{fill:"none",stroke:this.defaultStyles.borderColor,"stroke-width":2*m,"stroke-opacity":.8}),this.drawingLayer.svgElement.append(this.shapeEle)),this.textEle||(this.textEle=createSvg("text",{fill:this.defaultStyles.color||this.defaultStyles.borderColor,"text-anchor":"middle","dominant-baseline":"middle","font-size":this.defaultStyles.fontSize+"px"}),this.drawingLayer.svgElement.append(this.textEle)),M={x:(this.realStartPoint.x+this.realEndPoint.x)/2-this.annotation.borderWidth,y:(this.realStartPoint.y+this.realEndPoint.y)/2-this.annotation.borderWidth},this.shapeEle.setAttribute("x",Math.min(this.realStartPoint.x,this.realEndPoint.x)-this.annotation.borderWidth),this.shapeEle.setAttribute("y",Math.min(this.realStartPoint.y,this.realEndPoint.y)-this.annotation.borderWidth),this.shapeEle.setAttribute("width","".concat(Math.abs(this.realEndPoint.x-this.realStartPoint.x)+2*this.annotation.borderWidth,"px")),this.shapeEle.setAttribute("height","".concat(Math.abs(this.realEndPoint.y-this.realStartPoint.y)+2*this.annotation.borderWidth,"px")),this.textEle.textContent="",this.showPerimeter&&((T=createSvg("tspan",{x:M.x,y:M.y,dy:"0em"})).textContent=this.annotation.perimeter+this.defaults.scale.translateUnit,this.textEle.appendChild(T)),this.showArea&&((D=createSvg("tspan",{x:M.x,y:M.y,dy:"1em"})).textContent=this.annotation.area+this.defaults.scale.translateUnit+"\xB2",this.textEle.appendChild(D)),this.updateMeasureData();case 38:case"end":return I.stop()}},n,this)}))}},{key:"handleMouseUp",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y,m,d,f,x,k,P,S;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(u=getAbsoluteCoordinate(this.drawingLayer.pageDiv,e),s=u.x,w=u.y,g=this.drawingLayer.viewport,v=g.width,y=g.height,m=g.scale,s=Math.max(0,Math.min(v,s)),w=Math.max(0,Math.min(y,w)),this.realEndPoint={x:s,y:w},this.drawingPageIndex=-1,d=getInitialPoint({x:s,y:w},m),this.oriEndPoint={x:d.x,y:d.y},!this.realEndPoint||((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x||((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y){E.next=29;break}if(f=this.oriStartPoint,x=this.oriEndPoint,f){E.next=13;break}return E.abrupt("return");case 13:return k={left:Math.min(f.x,x.x),top:Math.min(f.y,x.y),right:Math.max(f.x,x.x),bottom:Math.max(f.y,x.y)},P=[{x:k.left,y:k.top},{x:k.right,y:k.top},{x:k.right,y:k.bottom},{x:k.left,y:k.bottom}],S={pagePtr:this.annotation.pagePtr,annotPtr:this.annotation.annotPtr,rulerPtr:this.annotation.rulerPtr,pageIndex:this.annotation.pageIndex,rect:k,vertices:P,labelPosition:this.annotation.labelPosition,contents:this.annotation.contents},this.annotation.rect=k,this.annotation.vertices=P,this.annotation.showPerimeter=this.showPerimeter,this.annotation.showArea=this.showArea,E.next=22,this.documentViewer.messageHandler.sendWithPromise("GetFactor",this.annotation.rulerPtr);case 22:return this.annotation.factor=E.sent,E.next=25,this.documentViewer.annotationManager.editMeasurementAnnotation(S);case 25:return E.next=27,this.documentViewer.annotationManager.drawAnnotationsFromList(this.annotation);case 27:E.next=30;break;case 29:this.documentViewer.deleteAnnotations(this.annotation);case 30:this.annotation=null,this.realStartPoint=null,this.realEndPoint=null,this.oriStartPoint=null,this.oriEndPoint=null,this.shapeEle=null,this.textEle=null,this.drawingLayer.svgElement.innerHTML="",document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),this.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:this.documentViewer.annotations});case 41:case"end":return E.stop()}},n,this)}))}},{key:"destroy",value:function(){this.reset(),this.eventBus._off("toolChanged",this.handleTool)}},{key:"getMouseLocation",value:function(e){var n,r=this.documentViewer.getScrollViewElement(),o=((n=document.querySelector(".document-container"))===null||n===void 0?void 0:n.style.marginLeft)||0;o=parseFloat(o);var u=r.scrollLeft||0,s=r.scrollTop||0,w=getClickPoint(e);return{x:w.pageX+u-o,y:w.pageY+s}}},{key:"getResult",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){var n,r,o,u,s=this;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return n=this.annotation.rulerPtr,w.next=3,this.documentViewer.messageHandler.sendWithPromise("GetMeasurementResult",{rulerPtr:n,captionType:"area"});case 3:return r=w.sent,w.next=6,this.documentViewer.messageHandler.sendWithPromise("GetMeasurementResult",{rulerPtr:n,captionType:"length"});case 6:o=w.sent,u=function(g){return g%1==0?g:Number(g.toFixed(s.decimalPlaces))},this.annotation.area=u(r),this.annotation.perimeter=u(o);case 10:case"end":return w.stop()}},e,this)}))}},{key:"updateMeasureData",value:function(){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function e(){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:this.documentViewer.eventBus.dispatch("updateMeasureData",{scale:this.defaults.scale,precision:this.defaults.precision,perimeter:this.annotation.perimeter||0,area:this.annotation.area||0});case 1:case"end":return n.stop()}},e,this)}))}},{key:"setDefaults",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g=this;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(e.showPerimeter===void 0&&e.showArea===void 0||(this.showPerimeter=(r=e.showPerimeter)!==null&&r!==void 0?r:this.showPerimeter,this.showArea=(o=e.showArea)!==null&&o!==void 0?o:this.showArea),Object.entries(e).forEach(function(y){var m=_slicedToArray(y,2),d=m[0],f=m[1];Object.entries(g.defaults).forEach(function(x){var k,P=_slicedToArray(x,2),S=P[0],E=P[1];d!==S||E===f||["showPerimeter","showArea"].includes(d)||(g.defaults[S]=f,S==="precision"&&(g.decimalPlaces=((k=f.toString().split(".")[1])===null||k===void 0?void 0:k.length)||0))})}),!this.annotationStore.selectedElementName){v.next=4;break}return v.abrupt("return");case 4:if(u={scale:this.defaults.scale,precision:this.defaults.precision,perimeter:0,area:0},!this.annotation){v.next=17;break}return v.next=8,this.getResult();case 8:if(s=[],this.showPerimeter&&s.push(this.annotation.perimeter+this.defaults.scale.translateUnit),this.showArea&&s.push(this.annotation.area+this.defaults.scale.translateUnit+"\xB2"),this.annotation.contents=s.join(`
`),!this.annotation.rulerPtr||!this.oriEndPoint){v.next=17;break}return v.next=15,this.documentViewer.messageHandler.sendWithPromise("GetFactor",this.annotation.rulerPtr);case 15:w=v.sent,this.annotation.factor=w;case 17:this.documentViewer.eventBus.dispatch("updateMeasureData",u);case 18:case"end":return v.stop()}},n,this)}))}}])}(),LineCreateTool=function(){return _createClass(function e(n){var r;_classCallCheck(this,e),this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.layer=null,this.onMousemove=this.handleMouseMove.bind(this),this.documentViewer=n.documentViewer,this.eventBus=n.documentViewer.eventBus,this.annotationStore=n.annotationStore,this.defaults={scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1,factor:.0352778},this.defaultStyles={borderWidth:2,opacity:1,color:"#FF0000",borderColor:"#FF0000",borderStyle:"solid",dashes:[],head:"openarrow",tail:"openarrow",fontName:"Helvetica",fontSize:14,fontStyle:"regular",contents:""},this.leaderLineDefaultOptions={leadLength:9,leadOffset:-9,leadExtension:6,labelPosition:"inside"},this.decimalPlaces=((r=this.defaults.precision.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0},[{key:"reset",value:function(){this.annotationStore.creating&&this.drawingAnnot.delete(),this.annotationStore.creating=!1,this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.layer=null,document.removeEventListener("mousemove",this.onMousemove)}},{key:"handleClick",value:function(e){return __awaiter(this,arguments,void 0,function(n){var r=this,o=n.pageIndex,u=n.oriPoint,s=n.realPoint,w=n.layer;return _regeneratorRuntime().mark(function g(){var v,y,m,d,f,x,k,P,S,E;return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!r.annotationStore.selectedElementName){M.next=2;break}return M.abrupt("return");case 2:if(r.layer=w,r.annotationStore.creating){M.next=16;break}return r.annotationStore.creating=!0,r.realStartPoint={x:s.x,y:s.y},m=u.x,d=u.y,f=u.x+1,x=u.y+1,k={left:m,top:d,right:f,bottom:x},P=[m,x,f,d],S=Object.assign(Object.assign(Object.assign({measure:1,type:"line",measureType:"distance",pageIndex:o,rect:k,linePoints:P},r.defaults),r.defaultStyles),r.leaderLineDefaultOptions),r.drawingAnnot=new Line({annotation:S,layer:w,highlight:r.annotationStore.highlightLink}),document.addEventListener("mousemove",r.onMousemove),M.abrupt("return");case 16:if(r.drawingAnnot.layer.div){M.next=19;break}return r.reset(),M.abrupt("return");case 19:if(r.annotationStore.creating=!1,!s||((v=r.realStartPoint)===null||v===void 0?void 0:v.x)===s.x&&((y=r.realStartPoint)===null||y===void 0?void 0:y.y)===s.y){M.next=31;break}return M.next=23,r.documentViewer.annotationManager.createMeasurementAnnotation(r.drawingAnnot.annotation);case 23:E=M.sent,_slicedToArray(E,1)[0],r.documentViewer.annotationManager.pushAnnotationToLayer(r.drawingAnnot),r.drawingAnnot.selectAnnotation(),r.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:r.documentViewer.annotations}),M.next=32;break;case 31:r.drawingAnnot.delete();case 32:r.reset();case 33:case"end":return M.stop()}},g)})()})}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(this.annotationStore.creating){m.next=2;break}return m.abrupt("return");case 2:u=getAbsoluteCoordinate(this.layer.pageDiv,e),s=u.x,w=u.y,g=this.layer.viewport,v=g.width,y=g.height,g.scale,s=Math.max(0,Math.min(v,s)),w=Math.max(0,Math.min(y,w)),this.realEndPoint={x:s,y:w},((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x&&(this.realEndPoint.x+=1),((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y&&(this.realEndPoint.y+=1),this.drawingAnnot.update({start:this.drawingAnnot.start,end:this.realEndPoint});case 10:case"end":return m.stop()}},n,this)}))}},{key:"setDefaults",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r=this;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:Object.entries(e).forEach(function(u){var s,w=_slicedToArray(u,2),g=w[0],v=w[1];Object.hasOwn(r.defaults,g)&&r.defaults[g]!==v&&(r.defaults[g]=v,g==="precision"&&(r.decimalPlaces=((s=v.toString().split(".")[1])===null||s===void 0?void 0:s.length)||0)),Object.hasOwn(r.defaultStyles,g)&&r.defaultStyles[g]!==v&&(r.defaultStyles[g]=v)}),this.updateMeasureData(!this.annotationStore.selectedElementName);case 2:case"end":return o.stop()}},n,this)}))}},{key:"updateMeasureData",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],n={scale:this.defaults.scale,precision:this.defaults.precision};e&&(n.length=0,n.angle=0,n.X=0,n.Y=0),this.documentViewer.eventBus.dispatch("updateMeasureData",n)}}])}(),PolylineCreateTool=function(){return _createClass(function e(n){var r;_classCallCheck(this,e),this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.layer=null,this.clickTimeId=null,this.addedBeforeMove=!1,this.onMousemove=this.handleMouseMove.bind(this),this.onKeydown=this.handleKeyDown.bind(this),this.documentViewer=n.documentViewer,this.eventBus=n.documentViewer.eventBus,this.annotationStore=n.annotationStore,this.measure=+n.measure||0,this.defaults={scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1,factor:.0352778},this.defaultStyles={borderWidth:2,opacity:1,color:"#FF0000",borderColor:"#FF0000",borderStyle:"solid",dashes:[],fontName:"Helvetica",fontSize:14,fontStyle:"regular",contents:""},this.decimalPlaces=((r=this.defaults.precision.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0},[{key:"reset",value:function(){this.annotationStore.creating&&this.drawingAnnot.delete(),this.annotationStore.creating=!1,this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.layer=null,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("keydown",this.onKeydown)}},{key:"handleClick",value:function(e){return __awaiter(this,arguments,void 0,function(n){var r=this,o=n.pageIndex,u=n.oriPoint,s=n.realPoint,w=n.layer;return _regeneratorRuntime().mark(function g(){var v,y,m;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!r.clickTimeId){d.next=4;break}return clearTimeout(r.clickTimeId),r.clickTimeId=null,d.abrupt("return");case 4:if(!r.annotationStore.selectedElementName){d.next=6;break}return d.abrupt("return");case 6:if(r.layer=w,r.annotationStore.creating){d.next=17;break}return r.annotationStore.creating=!0,r.addedBeforeMove=!1,r.realStartPoint={x:s.x,y:s.y},m=Object.assign({measure:r.measure,type:"polyline",pageIndex:o,vertices:[{x:u.x,y:u.y}]},r.defaultStyles),r.measure&&Object.assign(m,Object.assign({measureType:"perimeter"},r.defaults)),r.drawingAnnot=new Polyline({annotation:m,layer:w,highlight:r.annotationStore.highlightLink}),document.addEventListener("mousemove",r.onMousemove),document.addEventListener("keydown",r.onKeydown),d.abrupt("return");case 17:if(r.drawingAnnot.layer.div){d.next=20;break}return r.reset(),d.abrupt("return");case 20:if(r.clickTimeId=setTimeout(function(){r.realEndPoint={x:s.x,y:s.y},r.realStartPoint=r.realEndPoint,r.clickTimeId=null},250),s&&!(Math.abs(((v=r.realStartPoint)===null||v===void 0?void 0:v.x)-s.x)<=5&&Math.abs(((y=r.realStartPoint)===null||y===void 0?void 0:y.y)-s.y)<=5)){d.next=23;break}return d.abrupt("return");case 23:r.drawingAnnot.setPathPoint(r.drawingAnnot.realVertices.length-1,s.x,s.y),r.addedBeforeMove=!1;case 25:case"end":return d.stop()}},g)})()})}},{key:"handleKeyDown",value:function(e){(e.keyCode||e.which)===27&&(e.preventDefault(),this.reset())}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y,m;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.annotationStore.creating){d.next=2;break}return d.abrupt("return");case 2:if(u=getAbsoluteCoordinate(this.layer.pageDiv,e),s=u.x,w=u.y,g=this.layer.viewport,v=g.width,y=g.height,g.scale,s=Math.max(0,Math.min(v,s)),w=Math.max(0,Math.min(y,w)),this.realEndPoint={x:s,y:w},!(Math.abs(((r=this.realStartPoint)===null||r===void 0?void 0:r.x)-s)<=5&&Math.abs(((o=this.realStartPoint)===null||o===void 0?void 0:o.y)-w)<=5)){d.next=9;break}return d.abrupt("return");case 9:!this.addedBeforeMove&&this.drawingAnnot.addPathPoint(s,w),this.addedBeforeMove=!0,m=this.drawingAnnot.realVertices.length-1,this.drawingAnnot.setPathPoint(m,s,w),this.drawingAnnot.update(m,!1);case 14:case"end":return d.stop()}},n,this)}))}},{key:"setDefaults",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r=this;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:Object.entries(e).forEach(function(u){var s,w=_slicedToArray(u,2),g=w[0],v=w[1];Object.hasOwn(r.defaults,g)&&r.defaults[g]!==v&&(r.defaults[g]=v,g==="precision"&&(r.decimalPlaces=((s=v.toString().split(".")[1])===null||s===void 0?void 0:s.length)||0)),Object.hasOwn(r.defaultStyles,g)&&r.defaultStyles[g]!==v&&(r.defaultStyles[g]=v)}),this.updateMeasureData(!this.annotationStore.selectedElementName);case 2:case"end":return o.stop()}},n,this)}))}},{key:"updateMeasureData",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],n={scale:this.defaults.scale,precision:this.defaults.precision};e&&(n.length=0,n.angle=0),this.documentViewer.eventBus.dispatch("updateMeasureData",n)}},{key:"handleDoubleClick",value:function(e){return __awaiter(this,arguments,void 0,function(n){var r=this,o=n.realPoint;return _regeneratorRuntime().mark(function u(){var s,w,g,v,y,m,d,f,x,k,P,S;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(r.clickTimeId&&(clearTimeout(r.clickTimeId),r.clickTimeId=null),r.annotationStore.creating=!1,!o||((s=r.realStartPoint)===null||s===void 0?void 0:s.x)===o.x&&((w=r.realStartPoint)===null||w===void 0?void 0:w.y)===o.y||r.drawingAnnot.setPathPoint(r.drawingAnnot.realVertices.length-1,o.x,o.y),r.drawingAnnot.update(),r.drawingAnnot.realVertices.length>=2&&(v=r.drawingAnnot.realVertices.slice(-2),y=_slicedToArray(v,2),m=y[0],d=m.x,f=m.y,x=y[1],k=x.x,P=x.y,Math.abs(parseInt(d)-parseInt(k))<=1&&Math.abs(parseInt(f)-parseInt(P))<=1&&(r.drawingAnnot.realVertices.pop(),r.drawingAnnot.annotation.vertices.pop(),r.drawingAnnot.draw())),!(r.drawingAnnot.realVertices.length<2)){E.next=9;break}r.drawingAnnot.delete(),E.next=23;break;case 9:if(!r.measure){E.next=20;break}return E.next=12,r.documentViewer.annotationManager.createMeasurementAnnotation(r.drawingAnnot.annotation);case 12:S=E.sent,_slicedToArray(S,1)[0],r.documentViewer.annotationManager.pushAnnotationToLayer(r.drawingAnnot),r.drawingAnnot.selectAnnotation(),r.eventBus.dispatch("updateMeasureData",{angle:0}),E.next=23;break;case 20:(g=r.drawingAnnot.annotationContainer)===null||g===void 0||g.remove(),r.drawingAnnot.annotation.operate="add-annot",r.documentViewer.handleAnnotationChange({type:"add",show:!0,annotation:r.drawingAnnot.annotation});case 23:r.reset(),r.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:r.documentViewer.annotations});case 25:case"end":return E.stop()}},u)})()})}}])}(),CurveCreateTool=function(){return _createClass(function e(n){var r;_classCallCheck(this,e),this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.layer=null,this.onMousemove=this.handleMouseMove.bind(this),this.documentViewer=n.documentViewer,this.eventBus=n.documentViewer.eventBus,this.annotationStore=n.annotationStore,this.defaults={scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1,factor:.0352778},this.defaultStyles={borderWidth:2,opacity:1,color:"#FF0000",borderColor:"#FF0000",borderStyle:"solid",dashes:[],fontName:"Helvetica",fontSize:14,fontStyle:"regular",contents:""},this.decimalPlaces=((r=this.defaults.precision.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0},[{key:"reset",value:function(){this.annotationStore.creating&&this.drawingAnnot.delete(),this.annotationStore.creating=!1,this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.layer=null,document.removeEventListener("mousemove",this.onMousemove)}},{key:"handleClick",value:function(e){return __awaiter(this,arguments,void 0,function(n){var r=this,o=n.pageIndex,u=n.oriPoint,s=n.realPoint,w=n.layer;return _regeneratorRuntime().mark(function g(){var v,y,m,d;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!r.annotationStore.selectedElementName){f.next=2;break}return f.abrupt("return");case 2:if(r.layer=w,r.annotationStore.creating){f.next=10;break}return r.annotationStore.creating=!0,r.realStartPoint={x:s.x,y:s.y},m=Object.assign(Object.assign({measure:1,type:"ink",measureType:"arc",captionType:"generic",pageIndex:o,inkPointes:[[{PointX:u.x,PointY:u.y},{PointX:u.x+1,PointY:u.y+1},{PointX:u.x+2,PointY:u.y+2},{PointX:u.x+3,PointY:u.y+3}]]},r.defaults),r.defaultStyles),r.drawingAnnot=new Curve({annotation:m,layer:w,highlight:r.annotationStore.highlightLink}),document.addEventListener("mousemove",r.onMousemove),f.abrupt("return");case 10:if(r.drawingAnnot.layer.div){f.next=13;break}return r.reset(),f.abrupt("return");case 13:if(r.annotationStore.creating=!1,!s||((v=r.realStartPoint)===null||v===void 0?void 0:v.x)===s.x&&((y=r.realStartPoint)===null||y===void 0?void 0:y.y)===s.y){f.next=28;break}return r.drawingAnnot.setPathPoint(r.drawingAnnot.realVertices.length-1,s.x,s.y),r.drawingAnnot.calculateEqualPoints(),r.drawingAnnot.update(),f.next=20,r.documentViewer.annotationManager.createMeasurementAnnotation(r.drawingAnnot.annotation);case 20:d=f.sent,_slicedToArray(d,1)[0],r.documentViewer.annotationManager.pushAnnotationToLayer(r.drawingAnnot),r.drawingAnnot.selectAnnotation(),r.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:r.documentViewer.annotations}),f.next=29;break;case 28:r.drawingAnnot.delete();case 29:r.reset();case 30:case"end":return f.stop()}},g)})()})}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.annotationStore.creating){v.next=2;break}return v.abrupt("return");case 2:if(r=getAbsoluteCoordinate(this.layer.pageDiv,e),o=r.x,u=r.y,s=this.layer.viewport,w=s.width,g=s.height,s.scale,o=Math.max(0,Math.min(w,o)),u=Math.max(0,Math.min(g,u)),this.realEndPoint={x:o,y:u},this.realStartPoint.x!==this.realEndPoint.x||this.realStartPoint.y!==this.realEndPoint.y){v.next=9;break}return v.abrupt("return");case 9:this.drawingAnnot.setPathPoint(this.drawingAnnot.realVertices.length-1,o,u),this.drawingAnnot.calculateEqualPoints();case 11:case"end":return v.stop()}},n,this)}))}},{key:"setDefaults",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r=this;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:Object.entries(e).forEach(function(u){var s,w=_slicedToArray(u,2),g=w[0],v=w[1];Object.hasOwn(r.defaults,g)&&r.defaults[g]!==v&&(r.defaults[g]=v,g==="precision"&&(r.decimalPlaces=((s=v.toString().split(".")[1])===null||s===void 0?void 0:s.length)||0)),Object.hasOwn(r.defaultStyles,g)&&r.defaultStyles[g]!==v&&(r.defaultStyles[g]=v)}),this.updateMeasureData(!this.annotationStore.selectedElementName);case 2:case"end":return o.stop()}},n,this)}))}},{key:"updateMeasureData",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],n={scale:this.defaults.scale,precision:this.defaults.precision};e&&(n.length=0),this.documentViewer.eventBus.dispatch("updateMeasureData",n)}}])}(),ArcCreateTool=function(){return _createClass(function e(n){var r;_classCallCheck(this,e),this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.clickId=0,this.addedBeforeMove=!1,this.layer=null,this.onMousemove=this.handleMouseMove.bind(this),this.documentViewer=n.documentViewer,this.eventBus=n.documentViewer.eventBus,this.annotationStore=n.annotationStore,this.measure=+n.measure||0,this.defaults={scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1,factor:.0352778},this.defaultStyles={borderWidth:2,opacity:1,color:"#FF0000",borderColor:"#FF0000",borderStyle:"solid",dashes:[],fontName:"Helvetica",fontSize:14,fontStyle:"regular",contents:""},this.decimalPlaces=((r=this.defaults.precision.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0,this.showOption=this.annotationStore.arc},[{key:"reset",value:function(){this.annotationStore.creating&&this.drawingAnnot.delete(),this.annotationStore.creating=!1,this.realStartPoint=null,this.realEndPoint=null,this.clickId=0,this.drawingAnnot=null,this.layer=null,document.removeEventListener("mousemove",this.onMousemove)}},{key:"handleClick",value:function(e){return __awaiter(this,arguments,void 0,function(n){var r=this,o=n.pageIndex,u=n.oriPoint,s=n.realPoint,w=n.layer;return _regeneratorRuntime().mark(function g(){var v,y,m,d,f,x,k,P;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!r.annotationStore.selectedElementName){S.next=2;break}return S.abrupt("return");case 2:if(r.layer=w,r.annotationStore.creating||r.clickId){S.next=23;break}if(r.annotationStore.creating=!0,r.clickId=1,r.addedBeforeMove=!1,r.realStartPoint={x:s.x,y:s.y},x=Object.assign({measure:r.measure,type:"arc",pageIndex:o,arcPoints:[{x:u.x,y:u.y}],inkPointes:[]},r.defaultStyles),r.measure&&Object.assign(x,Object.assign(Object.assign({type:"ink",measureType:"arc"},r.defaults),{showRadius:r.showOption.showRadius,showAngle:r.showOption.showAngle,showArcLength:r.showOption.showArcLength})),!isMobileDevice$1){S.next=20;break}return u.x,u.y,u.x<100&&(u.x=100),u.y<50&&(u.y=50),k=Object.assign(Object.assign({},x),{arcPoints:[{x:u.x,y:u.y},{x:u.x-50,y:u.y-50},{x:u.x,y:u.y-100}],operate:"add-annot"}),r.documentViewer.handleAnnotationChange({type:"add",show:!0,annotation:k}),r.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:r.documentViewer.annotations}),r.annotationStore.creating=!1,r.reset(),S.abrupt("return");case 20:return r.drawingAnnot=new Arc({annotation:x,layer:w,highlight:r.annotationStore.highlightLink}),document.addEventListener("mousemove",r.onMousemove),S.abrupt("return");case 23:if(r.drawingAnnot.layer.div){S.next=26;break}return r.reset(),S.abrupt("return");case 26:if(r.clickId!==1){S.next=34;break}if(s&&!(Math.abs(((v=r.realStartPoint)===null||v===void 0?void 0:v.x)-s.x)<=5&&Math.abs(((y=r.realStartPoint)===null||y===void 0?void 0:y.y)-s.y)<=5)){S.next=29;break}return S.abrupt("return");case 29:return r.clickId=2,r.drawingAnnot.setPathPoint(r.drawingAnnot.realVertices.length-1,s.x,s.y),r.addedBeforeMove=!1,document.addEventListener("mousemove",r.onMousemove),S.abrupt("return");case 34:if(r.addedBeforeMove&&!(r.drawingAnnot.realVertices.length<3)){S.next=36;break}return S.abrupt("return");case 36:if(r.annotationStore.creating=!1,!s||((m=r.realStartPoint)===null||m===void 0?void 0:m.x)===s.x&&((d=r.realStartPoint)===null||d===void 0?void 0:d.y)===s.y){S.next=57;break}if(r.drawingAnnot.setPathPoint(r.drawingAnnot.realVertices.length-1,s.x,s.y),Object.assign(r.drawingAnnot.annotation,{arcPoints:r.drawingAnnot.changedArcPoints}),r.drawingAnnot.update(),!r.measure){S.next=51;break}return S.next=44,r.documentViewer.annotationManager.createMeasurementAnnotation(r.drawingAnnot.annotation);case 44:P=S.sent,_slicedToArray(P,1)[0],r.documentViewer.annotationManager.pushAnnotationToLayer(r.drawingAnnot),r.drawingAnnot.selectAnnotation(),S.next=54;break;case 51:(f=r.drawingAnnot.annotationContainer)===null||f===void 0||f.remove(),r.drawingAnnot.annotation.operate="add-annot",r.documentViewer.handleAnnotationChange({type:"add",show:!0,annotation:r.drawingAnnot.annotation});case 54:r.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:r.documentViewer.annotations}),S.next=58;break;case 57:r.drawingAnnot.delete();case 58:r.reset();case 59:case"end":return S.stop()}},g)})()})}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.annotationStore.creating&&this.clickId){v.next=2;break}return v.abrupt("return");case 2:if(r=getAbsoluteCoordinate(this.layer.pageDiv,e),o=r.x,u=r.y,s=this.layer.viewport,w=s.width,g=s.height,s.scale,o=Math.max(0,Math.min(w,o)),u=Math.max(0,Math.min(g,u)),this.realEndPoint={x:o,y:u},this.realStartPoint.x!==this.realEndPoint.x||this.realStartPoint.y!==this.realEndPoint.y){v.next=9;break}return v.abrupt("return");case 9:!this.addedBeforeMove&&this.drawingAnnot.addPathPoint(o,u),this.addedBeforeMove=!0,this.drawingAnnot.setPathPoint(this.drawingAnnot.realVertices.length-1,o,u),this.clickId===2&&this.drawingAnnot.update(null,!1);case 13:case"end":return v.stop()}},n,this)}))}},{key:"setDefaults",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r=this;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:["showAngle","showArcLength","showRadius"].forEach(function(u){var s;e[u]!==void 0&&(r.showOption[u]=(s=e[u])!==null&&s!==void 0?s:r.showOption[u])}),Object.entries(e).forEach(function(u){var s,w=_slicedToArray(u,2),g=w[0],v=w[1];Object.hasOwn(r.defaults,g)&&r.defaults[g]!==v&&(r.defaults[g]=v,g==="precision"&&(r.decimalPlaces=((s=v.toString().split(".")[1])===null||s===void 0?void 0:s.length)||0)),Object.hasOwn(r.defaultStyles,g)&&r.defaultStyles[g]!==v&&(r.defaultStyles[g]=v)}),this.updateMeasureData(!this.annotationStore.selectedElementName);case 4:case"end":return o.stop()}},n,this)}))}},{key:"updateMeasureData",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],n={scale:this.defaults.scale,precision:this.defaults.precision,showRadius:this.showOption.showRadius,showAngle:this.showOption.showAngle,showArcLength:this.showOption.showArcLength};e&&(n.radius=0,n.arcLength=0,n.angle=0),this.documentViewer.eventBus.dispatch("updateMeasureData",n)}}])}(),CircleCreateTool=function(){return _createClass(function e(n){var r;_classCallCheck(this,e),this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.layer=null,this.onMousemove=this.handleMouseMove.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.documentViewer=n.documentViewer,this.eventBus=n.documentViewer.eventBus,this.annotationStore=n.annotationStore,this.defaults={scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1,factor:.0352778},this.defaultStyles={borderWidth:2,opacity:1,fillTransparency:1,color:"#FF0000",borderColor:"#FF0000",borderStyle:"solid",dashes:[],fillColor:"",fontName:"Helvetica",fontSize:14,fontStyle:"regular",contents:"",labelPosition:"inside"},this.decimalPlaces=((r=this.defaults.precision.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0,this.showOption=this.annotationStore.circle},[{key:"reset",value:function(){this.annotationStore.creating&&this.drawingAnnot.delete(),this.annotationStore.creating=!1,this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.layer=null,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup)}},{key:"handleMouseDown",value:function(e){return __awaiter(this,arguments,void 0,function(n){var r=this,o=n.pageIndex,u=n.oriPoint,s=n.realPoint,w=n.layer;return _regeneratorRuntime().mark(function g(){var v,y,m,d,f,x;return _regeneratorRuntime().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!r.annotationStore.selectedElementName&&!r.annotationStore.creating){k.next=2;break}return k.abrupt("return");case 2:r.layer=w,r.annotationStore.creating=!0,r.realStartPoint={x:s.x,y:s.y},v=u.x,y=u.y,m=u.x+1,d=u.y+1,f={left:v,top:y,right:m,bottom:d},x=Object.assign(Object.assign(Object.assign({measure:1,type:"circle",measureType:"area",pageIndex:o,rect:f},r.defaults),r.defaultStyles),{showRadius:r.showOption.showRadius,showPerimeter:r.showOption.showPerimeter,showArea:r.showOption.showArea}),r.drawingAnnot=new Circle({annotation:x,layer:w,highlight:r.annotationStore.highlightLink}),document.addEventListener("mousemove",r.onMousemove),document.addEventListener("mouseup",r.onMouseup);case 14:case"end":return k.stop()}},g)})()})}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y,m,d,f;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(this.annotationStore.creating){x.next=2;break}return x.abrupt("return");case 2:u=getAbsoluteCoordinate(this.layer.pageDiv,e),s=u.x,w=u.y,g=this.layer.viewport,v=g.width,y=g.height,g.scale,s=Math.max(0,Math.min(v,s)),w=Math.max(0,Math.min(y,w)),this.realEndPoint={x:s,y:w},((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x&&(this.realEndPoint.x+=1),((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y&&(this.realEndPoint.y+=1),e.shiftKey&&(m=Math.abs(this.realEndPoint.x-this.realStartPoint.x),d=Math.abs(this.realEndPoint.y-this.realStartPoint.y),f=Math.min(m,d),this.realStartPoint.x<this.realEndPoint.x?this.realEndPoint.x=this.realStartPoint.x+f:this.realEndPoint.x=this.realStartPoint.x-f,this.realStartPoint.y<this.realEndPoint.y?this.realEndPoint.y=this.realStartPoint.y+f:this.realEndPoint.y=this.realStartPoint.y-f),this.drawingAnnot.update({start:this.drawingAnnot.start,end:this.realEndPoint});case 11:case"end":return x.stop()}},n,this)}))}},{key:"handleMouseUp",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.annotationStore.creating=!1,!this.realEndPoint||((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x||((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y){s.next=12;break}return s.next=4,this.documentViewer.annotationManager.createMeasurementAnnotation(this.drawingAnnot.annotation);case 4:u=s.sent,_slicedToArray(u,1)[0],this.documentViewer.annotationManager.pushAnnotationToLayer(this.drawingAnnot),this.drawingAnnot.selectAnnotation(),this.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:this.documentViewer.annotations}),s.next=13;break;case 12:this.drawingAnnot.delete();case 13:this.reset();case 14:case"end":return s.stop()}},n,this)}))}},{key:"setDefaults",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r=this;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:["showPerimeter","showArea","showRadius"].forEach(function(u){var s;e[u]!==void 0&&(r.showOption[u]=(s=e[u])!==null&&s!==void 0?s:r.showOption[u])}),Object.entries(e).forEach(function(u){var s,w=_slicedToArray(u,2),g=w[0],v=w[1];Object.hasOwn(r.defaults,g)&&r.defaults[g]!==v&&(r.defaults[g]=v,g==="precision"&&(r.decimalPlaces=((s=v.toString().split(".")[1])===null||s===void 0?void 0:s.length)||0)),Object.hasOwn(r.defaultStyles,g)&&r.defaultStyles[g]!==v&&(r.defaultStyles[g]=v)}),this.updateMeasureData(!this.annotationStore.selectedElementName);case 4:case"end":return o.stop()}},n,this)}))}},{key:"updateMeasureData",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],n={scale:this.defaults.scale,precision:this.defaults.precision,showRadius:this.showOption.showRadius,showPerimeter:this.showOption.showPerimeter,showArea:this.showOption.showArea};e&&(n.radius=0,n.perimeter=0,n.area=0),this.documentViewer.eventBus.dispatch("updateMeasureData",n)}}])}(),RectangleCreateTool=function(){return _createClass(function e(n){var r;_classCallCheck(this,e),this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.layer=null,this.onMousemove=this.handleMouseMove.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.documentViewer=n.documentViewer,this.eventBus=n.documentViewer.eventBus,this.annotationStore=n.annotationStore,this.defaults={scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1,factor:.0352778},this.defaultStyles={borderWidth:2,opacity:1,fillTransparency:1,color:"#FF0000",borderColor:"#FF0000",borderStyle:"solid",dashes:[],fillColor:"",fontName:"Helvetica",fontSize:14,fontStyle:"regular",contents:"",labelPosition:"inside"},this.decimalPlaces=((r=this.defaults.precision.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0,this.showOption=this.annotationStore.rectangle},[{key:"reset",value:function(){this.annotationStore.creating&&this.drawingAnnot.delete(),this.annotationStore.creating=!1,this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.layer=null,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup)}},{key:"handleMouseDown",value:function(e){return __awaiter(this,arguments,void 0,function(n){var r=this,o=n.pageIndex,u=n.oriPoint,s=n.realPoint,w=n.layer;return _regeneratorRuntime().mark(function g(){var v,y,m,d,f,x,k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!r.annotationStore.selectedElementName&&!r.annotationStore.creating){P.next=2;break}return P.abrupt("return");case 2:r.layer=w,r.annotationStore.creating=!0,r.realStartPoint={x:s.x,y:s.y},v=u.x,y=u.y,m=u.x+1,d=u.y+1,f={left:v,top:y,right:m,bottom:d},x=[{x:v,y},{x:m,y},{x:m,y:d},{x:v,y:d}],k=Object.assign(Object.assign(Object.assign({measure:1,type:"rectangle",measureType:"area",pageIndex:o,rect:f,vertices:x},r.defaults),r.defaultStyles),{showPerimeter:r.showOption.showPerimeter,showArea:r.showOption.showArea}),r.drawingAnnot=new Rectangle({annotation:k,layer:w,highlight:r.annotationStore.highlightLink}),document.addEventListener("mousemove",r.onMousemove),document.addEventListener("mouseup",r.onMouseup);case 15:case"end":return P.stop()}},g)})()})}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(this.annotationStore.creating){m.next=2;break}return m.abrupt("return");case 2:u=getAbsoluteCoordinate(this.layer.pageDiv,e),s=u.x,w=u.y,g=this.layer.viewport,v=g.width,y=g.height,g.scale,s=Math.max(0,Math.min(v,s)),w=Math.max(0,Math.min(y,w)),this.realEndPoint={x:s,y:w},((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x&&(this.realEndPoint.x+=1),((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y&&(this.realEndPoint.y+=1),this.drawingAnnot.update({start:this.drawingAnnot.start,end:this.realEndPoint});case 10:case"end":return m.stop()}},n,this)}))}},{key:"handleMouseUp",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v,y,m,d,f;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(u=getAbsoluteCoordinate(this.layer.pageDiv,e),s=u.x,w=u.y,g=this.layer.viewport,v=g.width,y=g.height,m=g.scale,s=Math.max(0,Math.min(v,s)),w=Math.max(0,Math.min(y,w)),this.realEndPoint={x:s,y:w},this.annotationStore.creating=!1,d=getInitialPoint({x:s,y:w},m),this.oriEndPoint={x:d.x,y:d.y},!this.realEndPoint||((r=this.realStartPoint)===null||r===void 0?void 0:r.x)===this.realEndPoint.x||((o=this.realStartPoint)===null||o===void 0?void 0:o.y)===this.realEndPoint.y){x.next=19;break}return x.next=11,this.documentViewer.annotationManager.createMeasurementAnnotation(this.drawingAnnot.annotation);case 11:f=x.sent,_slicedToArray(f,1)[0],this.documentViewer.annotationManager.pushAnnotationToLayer(this.drawingAnnot),this.drawingAnnot.selectAnnotation(),this.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:this.documentViewer.annotations}),x.next=20;break;case 19:this.drawingAnnot.delete();case 20:this.reset();case 21:case"end":return x.stop()}},n,this)}))}},{key:"updateMeasureData",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],n={scale:this.defaults.scale,precision:this.defaults.precision,showPerimeter:this.showOption.showPerimeter,showArea:this.showOption.showArea};e&&(n.perimeter=0,n.area=0,n.length=0,n.width=0),this.documentViewer.eventBus.dispatch("updateMeasureData",n)}},{key:"setDefaults",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u=this;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e.showPerimeter===void 0&&e.showArea===void 0||(this.showOption.showPerimeter=(r=e.showPerimeter)!==null&&r!==void 0?r:this.showOption.showPerimeter,this.showOption.showArea=(o=e.showArea)!==null&&o!==void 0?o:this.showOption.showArea),Object.entries(e).forEach(function(w){var g,v=_slicedToArray(w,2),y=v[0],m=v[1];Object.hasOwn(u.defaults,y)&&u.defaults[y]!==m&&(u.defaults[y]=m,y==="precision"&&(u.decimalPlaces=((g=m.toString().split(".")[1])===null||g===void 0?void 0:g.length)||0)),Object.hasOwn(u.defaultStyles,y)&&u.defaultStyles[y]!==m&&(u.defaultStyles[y]=m)}),this.updateMeasureData(!this.annotationStore.selectedElementName);case 3:case"end":return s.stop()}},n,this)}))}}])}(),PolygonCreateTool=function(){return _createClass(function e(n){var r;_classCallCheck(this,e),this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.layer=null,this.clickTimeId=null,this.addedBeforeMove=!1,this.onMousemove=this.handleMouseMove.bind(this),this.onKeydown=this.handleKeyDown.bind(this),this.documentViewer=n.documentViewer,this.eventBus=n.documentViewer.eventBus,this.annotationStore=n.annotationStore,this.measure=+n.measure||0,this.defaults={scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1,factor:.0352778},this.defaultStyles={borderWidth:2,opacity:1,fillTransparency:1,color:"#FF0000",fillColor:"",borderColor:"#FF0000",borderStyle:"solid",dashes:[],fontName:"Helvetica",fontSize:14,fontStyle:"regular",contents:""},this.decimalPlaces=((r=this.defaults.precision.toString().split(".")[1])===null||r===void 0?void 0:r.length)||0,this.showOption=this.annotationStore.polygon},[{key:"reset",value:function(){this.annotationStore.creating&&this.drawingAnnot.delete(),this.annotationStore.creating=!1,this.realStartPoint=null,this.realEndPoint=null,this.drawingAnnot=null,this.layer=null,document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("keydown",this.onKeydown)}},{key:"handleClick",value:function(e){return __awaiter(this,arguments,void 0,function(n){var r=this,o=n.pageIndex,u=n.oriPoint,s=n.realPoint,w=n.layer;return _regeneratorRuntime().mark(function g(){var v,y,m;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!r.clickTimeId){d.next=4;break}return clearTimeout(r.clickTimeId),r.clickTimeId=null,d.abrupt("return");case 4:if(!r.annotationStore.selectedElementName){d.next=6;break}return d.abrupt("return");case 6:if(r.layer=w,r.annotationStore.creating){d.next=17;break}return r.annotationStore.creating=!0,r.addedBeforeMove=!1,r.realStartPoint={x:s.x,y:s.y},m=Object.assign({measure:r.measure,type:"polygon",pageIndex:o,vertices:[{x:u.x,y:u.y}]},r.defaultStyles),r.measure&&Object.assign(m,Object.assign(Object.assign({measureType:"area"},r.defaults),{showPerimeter:r.showOption.showPerimeter,showArea:r.showOption.showArea})),r.drawingAnnot=new Polygon({annotation:m,layer:w,highlight:r.annotationStore.highlightLink,creating:!0}),document.addEventListener("keydown",r.onKeydown),document.addEventListener("mousemove",r.onMousemove),d.abrupt("return");case 17:if(r.drawingAnnot.layer.div){d.next=20;break}return r.reset(),d.abrupt("return");case 20:if(r.clickTimeId=setTimeout(function(){r.realEndPoint={x:s.x,y:s.y},r.realStartPoint=r.realEndPoint,r.clickTimeId=null},250),s&&!(Math.abs(((v=r.realStartPoint)===null||v===void 0?void 0:v.x)-s.x)<=5&&Math.abs(((y=r.realStartPoint)===null||y===void 0?void 0:y.y)-s.y)<=5)){d.next=23;break}return d.abrupt("return");case 23:r.drawingAnnot.setPathPoint(r.drawingAnnot.realVertices.length-1,s.x,s.y),r.addedBeforeMove=!1;case 25:case"end":return d.stop()}},g)})()})}},{key:"handleKeyDown",value:function(e){(e.keyCode||e.which)===27&&(e.preventDefault(),this.reset())}},{key:"handleMouseMove",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.annotationStore.creating){v.next=2;break}return v.abrupt("return");case 2:if(r=getAbsoluteCoordinate(this.layer.pageDiv,e),o=r.x,u=r.y,s=this.layer.viewport,w=s.width,g=s.height,s.scale,o=Math.max(0,Math.min(w,o)),u=Math.max(0,Math.min(g,u)),this.realEndPoint={x:o,y:u},this.realStartPoint.x!==this.realEndPoint.x||this.realStartPoint.y!==this.realEndPoint.y){v.next=9;break}return v.abrupt("return");case 9:!this.addedBeforeMove&&this.drawingAnnot.addPathPoint(o,u),this.addedBeforeMove=!0,this.drawingAnnot.setPathPoint(this.drawingAnnot.realVertices.length-1,o,u),this.drawingAnnot.update(this.drawingAnnot.realVertices.length-1);case 13:case"end":return v.stop()}},n,this)}))}},{key:"setDefaults",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u=this;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:e.showPerimeter===void 0&&e.showArea===void 0||(this.showOption.showPerimeter=(r=e.showPerimeter)!==null&&r!==void 0?r:this.showOption.showPerimeter,this.showOption.showArea=(o=e.showArea)!==null&&o!==void 0?o:this.showOption.showArea),Object.entries(e).forEach(function(w){var g,v=_slicedToArray(w,2),y=v[0],m=v[1];Object.hasOwn(u.defaults,y)&&u.defaults[y]!==m&&(u.defaults[y]=m,y==="precision"&&(u.decimalPlaces=((g=m.toString().split(".")[1])===null||g===void 0?void 0:g.length)||0)),Object.hasOwn(u.defaultStyles,y)&&u.defaultStyles[y]!==m&&(u.defaultStyles[y]=m)}),this.updateMeasureData(!this.annotationStore.selectedElementName);case 3:case"end":return s.stop()}},n,this)}))}},{key:"updateMeasureData",value:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],n={scale:this.defaults.scale,precision:this.defaults.precision,showPerimeter:this.showOption.showPerimeter,showArea:this.showOption.showArea};e&&(n.perimeter=0,n.area=0),this.documentViewer.eventBus.dispatch("updateMeasureData",n)}},{key:"handleDoubleClick",value:function(e){return __awaiter(this,arguments,void 0,function(n){var r=this,o=n.realPoint;return _regeneratorRuntime().mark(function u(){var s,w,g,v;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(r.clickTimeId&&(clearTimeout(r.clickTimeId),r.clickTimeId=null),r.annotationStore.creating=!1,!o||((s=r.realStartPoint)===null||s===void 0?void 0:s.x)===o.x&&((w=r.realStartPoint)===null||w===void 0?void 0:w.y)===o.y||r.drawingAnnot.setPathPoint(r.drawingAnnot.realVertices.length-1,o.x,o.y),o&&(Math.abs(r.drawingAnnot.realVertices[0].x-o.x)<=5&&Math.abs(r.drawingAnnot.realVertices[0].y-o.y)<=5||Math.abs(r.drawingAnnot.realVertices[r.drawingAnnot.realVertices.length-2].x-o.x)<=2&&Math.abs(r.drawingAnnot.realVertices[r.drawingAnnot.realVertices.length-2].y-o.y)<=2)&&(r.drawingAnnot.realVertices.pop(),r.drawingAnnot.annotation.vertices.pop()),r.drawingAnnot.creating=!1,!(r.drawingAnnot.realVertices.length<3)){y.next=9;break}r.drawingAnnot.delete(),y.next=24;break;case 9:if(r.drawingAnnot.draw(),r.drawingAnnot.update(),!r.measure){y.next=21;break}return y.next=14,r.documentViewer.annotationManager.createMeasurementAnnotation(r.drawingAnnot.annotation);case 14:v=y.sent,_slicedToArray(v,1)[0],r.documentViewer.annotationManager.pushAnnotationToLayer(r.drawingAnnot),r.drawingAnnot.selectAnnotation(),y.next=24;break;case 21:(g=r.drawingAnnot.annotationContainer)===null||g===void 0||g.remove(),r.drawingAnnot.annotation.operate="add-annot",r.documentViewer.handleAnnotationChange({type:"add",show:!0,annotation:r.drawingAnnot.annotation});case 24:r.reset(),r.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:r.documentViewer.annotations});case 26:case"end":return y.stop()}},u)})()})}}])}(),MeasurementTool=function(){return _createClass(function e(n){_classCallCheck(this,e),this.onHandleTool=this.handleTool.bind(this),this.onHandleToolMode=this.handleToolMode.bind(this),this.onClick=this.handleClick.bind(this),this.onDbclick=this.handleDbclick.bind(this),this.onMousedown=this.handleMousedown.bind(this),this.onKeydown=this.handleKeyDown.bind(this),this.documentViewer=n.documentViewer,this.tool=n.documentViewer.activeTool,this.eventBus=n.documentViewer.eventBus,this.annotationStore=n.annotationStore,this.eventBus._on("toolChanged",this.onHandleTool),this.eventBus._on("toolModeChanged",this.onHandleToolMode),this.eventBus._on("pdfClick",this.onClick),this.eventBus._on("pdfDbclick",this.onDbclick),this.eventBus._on("pdfMousedown",this.onMousedown),this.lineCreateTool=new LineCreateTool(n),this.polylineCreateTool=new PolylineCreateTool(n),this.curveCreateTool=new CurveCreateTool(n),this.arcCreateTool=new ArcCreateTool(n),this.circleCreateTool=new CircleCreateTool(n),this.rectangleCreateTool=new RectangleCreateTool(n),this.polygonCreateTool=new PolygonCreateTool(n),this.createTools=[this.lineCreateTool,this.polylineCreateTool,this.curveCreateTool,this.arcCreateTool,this.circleCreateTool,this.rectangleCreateTool,this.polygonCreateTool],this.toolMapping={line:"lineCreateTool",polyline:"polylineCreateTool",curve:"curveCreateTool",arc:"arcCreateTool",circle:"circleCreateTool",rectangle:"rectangleCreateTool",polygon:"polygonCreateTool"},this.activeTool=null},[{key:"handleTool",value:function(e){var n=e.tool;e.color;var r=this.tool;this.tool=n,this.activeTool=null;var o=this.documentViewer.toolMode==="measurement"?1:0;this.toolMapping[r]&&this.tool!==r&&this[this.toolMapping[r]].reset(),(o||["polyline","arc","polygon"].includes(n))&&(n&&this.toolMapping[this.tool]?(this.activeTool=this[this.toolMapping[this.tool]],this.activeTool.measure=o,document.querySelector(".document").classList.add("annotation-edit"),o&&this.updateMeasurePanel(),document.addEventListener("keydown",this.onKeydown)):(this.eventBus.dispatch("measurePropertyChange",{isOpen:!1}),document.removeEventListener("keydown",this.onKeydown)))}},{key:"handleToolMode",value:function(e){var n,r=this.toolMode;this.toolMode=e,r==="measurement"&&e!==r&&(this.eventBus.dispatch("measurePropertyChange",{isOpen:!1}),(n=this[this.toolMapping[this.tool]])===null||n===void 0||n.reset())}},{key:"destroy",value:function(){this.createTools.forEach(function(e){e.reset(),e=null}),this.eventBus._off("toolChanged",this.onHandleTool),this.eventBus._off("toolModeChanged",this.onHandleToolMode),this.eventBus._off("pdfClick",this.onClick),this.eventBus._off("pdfDbclick",this.onDbclick),this.eventBus._off("pdfMousedown",this.onMousedown)}},{key:"setDefaults",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if((e.scale||e.precision)&&(r={},e.scale&&(r.scale=e.scale,delete e.scale),e.precision&&(r.precision=e.precision,delete e.precision),this.createTools.forEach(function(u){u.setDefaults(r)})),Object.keys(e).length!==0||e.constructor!==Object){o.next=3;break}return o.abrupt("return");case 3:this.activeTool&&this.activeTool.setDefaults&&this.activeTool.setDefaults(e);case 4:case"end":return o.stop()}},n,this)}))}},{key:"handleClick",value:function(e){this.handleEvent(e,"handleClick")}},{key:"handleDbclick",value:function(e){this.handleEvent(e,"handleDoubleClick")}},{key:"handleMousedown",value:function(e){this.handleEvent(e,"handleMouseDown")}},{key:"handleEvent",value:function(e,n){var r=e.pageNumber,o=e.x,u=e.y,s=e.event;if(!this.annotationStore.selectedElementName){var w=r-1,g=this.documentViewer.pdfViewer._pages[w].compdfAnnotationLayer;if(g){var v=getAbsoluteCoordinate(g.pageDiv,s);this.activeTool&&this.activeTool[n]&&this.activeTool[n]({pageIndex:w,oriPoint:{x:o,y:u},realPoint:v,layer:g})}}}},{key:"updateMeasurePanel",value:function(){this.activeTool&&(this.eventBus.dispatch("measurePropertyChange",Object.assign(Object.assign({},this.activeTool.defaultStyles),{measure:1})),this.activeTool.updateMeasureData())}},{key:"handleKeyDown",value:function(e){(e.keyCode||e.which)===27&&(e.preventDefault(),this.activeTool&&this.activeTool.drawingAnnot&&(this.annotationStore.creating=!1,this.activeTool.drawingAnnot.delete(),this.activeTool.reset()))}}])}(),DEFAULT_CACHE_SIZE=3,ENABLE_PERMISSIONS_CLASS="enablePermissions",PagesCountLimit={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function isValidAnnotationEditorMode(e){return Object.values(pdfExports.AnnotationEditorType).includes(e)&&e!==pdfExports.AnnotationEditorType.DISABLE}var _buf=new WeakMap,_size=new WeakMap,_PDFPageViewBuffer_brand=new WeakSet,PDFPageViewBuffer=function(){return _createClass(function e(n){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_PDFPageViewBuffer_brand),_classPrivateFieldInitSpec(this,_buf,new Set),_classPrivateFieldInitSpec(this,_size,0),_classPrivateFieldSet2(_size,this,n)},[{key:"push",value:function(e){var n=_classPrivateFieldGet2(_buf,this);n.has(e)&&n.delete(e),n.add(e),n.size>_classPrivateFieldGet2(_size,this)&&_assertClassBrand(_PDFPageViewBuffer_brand,this,_destroyFirstView).call(this)}},{key:"resize",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;_classPrivateFieldSet2(_size,this,e);var r=_classPrivateFieldGet2(_buf,this);if(n){var o,u=r.size,s=1,w=_createForOfIteratorHelper(r);try{for(w.s();!(o=w.n()).done;){var g=o.value;if(n.has(g.id)&&(r.delete(g),r.add(g)),++s>u)break}}catch(v){w.e(v)}finally{w.f()}}for(;r.size>_classPrivateFieldGet2(_size,this);)_assertClassBrand(_PDFPageViewBuffer_brand,this,_destroyFirstView).call(this)}},{key:"has",value:function(e){return _classPrivateFieldGet2(_buf,this).has(e)}},{key:Symbol.iterator,value:function(){return _classPrivateFieldGet2(_buf,this).keys()}}])}();function _destroyFirstView(){var e=_classPrivateFieldGet2(_buf,this).keys().next().value;e==null||e.destroy(),_classPrivateFieldGet2(_buf,this).delete(e)}var _buffer=new WeakMap,_enablePermissions=new WeakMap,_scrollModePageState=new WeakMap,_onVisibilityChange=new WeakMap,_scaleTimeoutId=new WeakMap,_renderedPagesView=new WeakMap,_rendering=new WeakMap,_cacheTask=new WeakMap,_PDFViewer_brand=new WeakSet,PDFViewer=function(){return _createClass(function o(u){var s,w,g,v,y;if(_classCallCheck(this,o),_classPrivateMethodInitSpec(this,_PDFViewer_brand),_classPrivateFieldInitSpec(this,_buffer,null),_classPrivateFieldInitSpec(this,_enablePermissions,!1),_classPrivateFieldInitSpec(this,_scrollModePageState,null),_classPrivateFieldInitSpec(this,_onVisibilityChange,null),_classPrivateFieldInitSpec(this,_scaleTimeoutId,null),_classPrivateFieldInitSpec(this,_renderedPagesView,[]),_classPrivateFieldInitSpec(this,_rendering,!1),_classPrivateFieldInitSpec(this,_cacheTask,[]),this.documentViewer=u.documentViewer,this.eventBus=u.eventBus,this._annotationEditorUIManager=null,this.container=u.container,this.viewer=u.viewer||u.container.firstElementChild,this.annotationStore=u.annotationStore,this.messageHandler=u.messageHandler,this.exitPresentationMode=!1,((s=this.container)===null||s===void 0?void 0:s.tagName)!=="DIV"||((w=this.viewer)===null||w===void 0?void 0:w.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");this.linkService=u.linkService,this.removePageBorders=!1,this.textLayerMode=(g=u.textLayerMode)!==null&&g!==void 0?g:TextLayerMode.ENABLE,this._annotationEditorMode=(v=u.annotationEditorMode)!==null&&v!==void 0?v:pdfExports.AnnotationEditorType.NONE,this.imageResourcesPath=u.imageResourcesPath||"",this.enablePrintAutoRotate=u.enablePrintAutoRotate||!1,this.renderer=u.renderer||RendererType.CANVAS,this.useOnlyCssZoom=u.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=(y=u.isOffscreenCanvasSupported)===null||y===void 0||y,this.maxCanvasPixels=maxCanvasPixels,_classPrivateFieldSet2(_enablePermissions,this,u.enablePermissions||!1),this.pageColors=u.pageColors||null,this.$t=u.$t,this.doc=u.doc,this.messageHandler=u.messageHandler,this._fontFile=null,this.contentEditHistoryManager=null,this.distanceMeasurementCreateTool=null,this.areaMeasurementCreateTool=null,this.measurementTool=null,!this.pageColors||CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground)||((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.renderingQueue=u.renderingQueue,this.scroll=watchScroll(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders")},[{key:"pagesCount",get:function(){return this._pages.length}},{key:"getPageView",value:function(o){return this._pages[o]}},{key:"pageViewsReady",get:function(){return!!this._pagesCapability.settled&&this._pages.every(function(o){return o==null?void 0:o.pdfPage})}},{key:"currentPageNumber",get:function(){return this._currentPageNumber},set:function(o){if(!Number.isInteger(o))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(o,!0)||console.error('currentPageNumber: "'.concat(o,'" is not a valid page.')))}},{key:"_setCurrentPageNumber",value:function(o){var u,s,w=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this._currentPageNumber===o)return w&&this._resetCurrentPageView(),!0;if(!(0<o&&o<=this.pagesCount))return!1;var g=this._currentPageNumber;return this._currentPageNumber=o,this.eventBus.dispatch("onPageNumberUpdated",{source:this,pageNumber:o,pageLabel:(u=(s=this._pageLabels)===null||s===void 0?void 0:s[o-1])!==null&&u!==void 0?u:null,previous:g}),this.eventBus.dispatch("pageNumberUpdated",o),w&&this._resetCurrentPageView(),!0}},{key:"currentPageLabel",get:function(){var o,u;return(o=(u=this._pageLabels)===null||u===void 0?void 0:u[this._currentPageNumber-1])!==null&&o!==void 0?o:null},set:function(o){if(this.pdfDocument){var u=0|o;if(this._pageLabels){var s=this._pageLabels.indexOf(o);s>=0&&(u=s+1)}this._setCurrentPageNumber(u,!0)||console.error('currentPageLabel: "'.concat(o,'" is not a valid page.'))}}},{key:"currentScale",get:function(){return this._currentScale!==UNKNOWN_SCALE?this._currentScale:DEFAULT_SCALE},set:function(o){if(isNaN(o))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(o,{noScroll:!1})}},{key:"currentScaleValue",get:function(){return this._currentScaleValue},set:function(o){this.pdfDocument&&this._setScale(o,{noScroll:!1,drawingDelay:400})}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(o){if(!isValidRotation(o))throw new Error("Invalid pages rotation angle.");if(this.pdfDocument&&((o%=360)<0&&(o+=360),this._pagesRotation!==o)){this._pagesRotation=o;var u=this._currentPageNumber;this.refresh(!0,{rotation:o}),this._currentScaleValue&&this._setScale(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:o,pageNumber:u})}}},{key:"firstPagePromise",get:function(){return this.pdfDocument?this._firstPageCapability.promise:null}},{key:"onePageRendered",get:function(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}},{key:"pagesPromise",get:function(){return this.pdfDocument?this._pagesCapability.promise:null}},{key:"setDocument",value:function(o,u,s,w){var g=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this._annotationEditorUIManager&&(this._annotationEditorUIManager.destroy(),this._annotationEditorUIManager=null)),this.pdfDocument=o,o){var v=o.numPages,y=o.getPage(1),m=o.getOptionalContentConfig(),d=_classPrivateFieldGet2(_enablePermissions,this)?o.getPermissions():Promise.resolve();if(v>PagesCountLimit.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");var f=this._scrollMode=ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:f})}this._pagesCapability.promise.then(function(){g.eventBus.dispatch("pagesloaded",{source:g,pagesCount:v})},function(){}),this._onBeforeDraw=function(x){g._pages[x.pageNumber-1]},this._onAfterDraw=function(x){x.cssTransform||g._onePageRenderedCapability.settled||(g._onePageRenderedCapability.resolve({timestamp:x.timestamp}),g.eventBus._off("pagerendered",g._onAfterDraw),g._onAfterDraw=null,_classPrivateFieldGet2(_onVisibilityChange,g)&&(document.removeEventListener("visibilitychange",_classPrivateFieldGet2(_onVisibilityChange,g)),_classPrivateFieldSet2(_onVisibilityChange,g,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([y,d]).then(function(x){var k=_slicedToArray(x,2),P=k[0],S=k[1];if(o===g.pdfDocument){g._firstPageCapability.resolve(P),g._optionalContentConfigPromise=m;var E=_assertClassBrand(_PDFViewer_brand,g,_initializePermissions).call(g,S),M=E.annotationEditorMode,T=E.textLayerMode;if(M!==pdfExports.AnnotationEditorType.DISABLE){var D=M;o.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):isValidAnnotationEditorMode(D)?(g._annotationEditorUIManager=new pdfExports.AnnotationEditorUIManager(g.container,g.eventBus,o==null?void 0:o.annotationStorage),D!==pdfExports.AnnotationEditorType.NONE&&g._annotationEditorUIManager.updateMode(D)):console.error("Invalid AnnotationEditor mode: ".concat(D))}var I=_assertClassBrand(_PDFViewer_brand,g,_layerProperties).bind(g),N=g._scrollMode===ScrollMode.PAGE?null:g.viewer,O=g.currentScale,F=P.getViewport({scale:O*PixelsPerInch.PDF_TO_CSS_UNITS});F.rotation!==0&&(F.rotation=0),g.viewer.style.setProperty("--scale-factor",F.scale),g.contentEditHistoryManager=new ContentEditHistoryManager({messageHandler:g.messageHandler,eventBus:g.eventBus,pdfViewer:g}),g.distanceMeasurementCreateTool=new DistanceMeasurementCreateTool({documentViewer:g.documentViewer,annotationStore:g.annotationStore}),g.areaMeasurementCreateTool=new AreaMeasurementCreateTool({documentViewer:g.documentViewer,annotationStore:g.annotationStore}),g.measurementTool=new MeasurementTool({documentViewer:g.documentViewer,annotationStore:g.annotationStore});for(var U=1;U<=v;++U){var Y=U-1,Q=new PDFPageView(_defineProperty$1(_defineProperty$1(_defineProperty$1({documentViewer:g.documentViewer,container:N,eventBus:g.eventBus,id:U,pageIndex:Y,scale:O,messageHandler:g.messageHandler,annotationStore:g.annotationStore,annotations:u&&u[Y]||null,annotationsAll:u,pagesPtr:s,defaultViewport:F.clone(),optionalContentConfigPromise:m,renderingQueue:g.renderingQueue,textLayerMode:T,imageResourcesPath:g.imageResourcesPath,renderer:typeof PDFJSDev>"u"||PDFJSDev.test("!PRODUCTION || GENERIC")?g.renderer:null,useOnlyCssZoom:g.useOnlyCssZoom,isOffscreenCanvasSupported:g.isOffscreenCanvasSupported,maxCanvasPixels:g.maxCanvasPixels,pageColors:g.pageColors,layerProperties:I,l10n:g.l10n,$t:g.$t,doc:g.doc},"messageHandler",g.messageHandler),"contentEditHistoryManager",g.contentEditHistoryManager),"enableReply",w));g._pages.push(Q)}var q=g._pages[0];q&&(q.setPdfPage(P),g.linkService.cachePageRef(1,P.ref)),g._scrollMode===ScrollMode.PAGE?_assertClassBrand(_PDFViewer_brand,g,_ensurePageViewVisible).call(g):g._spreadMode!==SpreadMode.NONE&&g._updateSpreadMode(),_assertClassBrand(_PDFViewer_brand,g,_onePageRenderedOrForceFetch).call(g).then(_asyncToGenerator(_regeneratorRuntime().mark(function ne(){var J,re,X;return _regeneratorRuntime().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(g._annotationEditorUIManager&&g.eventBus.dispatch("annotationeditormodechanged",{source:g,mode:g._annotationEditorMode}),!(o.loadingParams.disableAutoFetch||v>PagesCountLimit.FORCE_LAZY_PAGE_INIT)){j.next=4;break}return g._pagesCapability.resolve(),j.abrupt("return");case 4:if(!((J=v-1)<=0)){j.next=8;break}return g._pagesCapability.resolve(),j.abrupt("return");case 8:re=_regeneratorRuntime().mark(function Z(W){var te;return _regeneratorRuntime().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(te=o.getPage(W).then(function(oe){var Ee=g._pages[W-1];Ee.pdfPage||Ee.setPdfPage(oe),g.linkService.cachePageRef(W,oe.ref),--J==0&&g._pagesCapability.resolve()},function(oe){console.error("Unable to get page ".concat(W," to initialize viewer"),oe),--J==0&&g._pagesCapability.resolve()}),W%PagesCountLimit.PAUSE_EAGER_PAGE_INIT!=0){le.next=4;break}return le.next=4,te;case 4:case"end":return le.stop()}},Z)}),X=2;case 10:if(!(X<=v)){j.next=15;break}return j.delegateYield(re(X),"t0",12);case 12:++X,j.next=10;break;case 15:case"end":return j.stop()}},ne)}))),g.eventBus.dispatch("pagesinit",{source:g}),o.getMetadata().then(function(ne){var J=ne.info;o===g.pdfDocument&&J.Language&&(g.viewer.lang=J.Language)})}}).catch(function(x){console.error("Unable to initialize viewer",x),g._pagesCapability.reject(x)})}}},{key:"setPageLabels",value:function(o){if(this.pdfDocument){o?Array.isArray(o)&&this.pdfDocument.numPages===o.length?this._pageLabels=o:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var u=0,s=this._pages.length;u<s;u++){var w,g;this._pages[u].setPageLabel((w=(g=this._pageLabels)===null||g===void 0?void 0:g[u])!==null&&w!==void 0?w:null)}}}},{key:"renderAnnotation",value:function(o,u){var s=this._pages[o.pageIndex];s&&s.compdfAnnotationLayer&&(s.textSelection&&s.textSelection.cleanSelection(),s.compdfAnnotationLayer.renderAnnotation(o,u))}},{key:"getAnnotation",value:function(o){var u=o.pageIndex,s=this._pages[u];return s&&s.compdfAnnotationLayer?s.compdfAnnotationLayer.getAnnotation(o):null}},{key:"deleteAnnotations",value:function(o){for(var u=Array.isArray(o)?o:[o],s=0;s<u.length;s++){var w=u[s],g=w.pageIndex,v=this._pages[g];v&&v.compdfAnnotationLayer&&v.compdfAnnotationLayer.deleteAnnotation(w)}}},{key:"_resetView",value:function(){this._pages=[],this._currentPageNumber=1,this._currentScale=UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,_classPrivateFieldSet2(_buffer,this,new PDFPageViewBuffer(DEFAULT_CACHE_SIZE)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=pdfExports.createPromiseCapability(),this._onePageRenderedCapability=pdfExports.createPromiseCapability(),this._pagesCapability=pdfExports.createPromiseCapability(),this._scrollMode=ScrollMode.VERTICAL,this._previousScrollMode=ScrollMode.UNKNOWN,this._spreadMode=SpreadMode.NONE,this.contentEditHistoryManager=null,_classPrivateFieldSet2(_scrollModePageState,this,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),_classPrivateFieldGet2(_onVisibilityChange,this)&&(document.removeEventListener("visibilitychange",_classPrivateFieldGet2(_onVisibilityChange,this)),_classPrivateFieldSet2(_onVisibilityChange,this,null)),this.distanceMeasurementCreateTool&&(this.distanceMeasurementCreateTool.destroy(),this.distanceMeasurementCreateTool=null),this.areaMeasurementCreateTool&&(this.areaMeasurementCreateTool.destroy(),this.areaMeasurementCreateTool=null),this.measurementTool&&(this.measurementTool.destroy(),this.measurementTool=null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(ENABLE_PERMISSIONS_CLASS)}},{key:"_scrollUpdate",value:function(){this.pagesCount!==0&&this.update()}},{key:"_scrollIntoView",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(o){var s=o.div,w=o.id;if(this._currentPageNumber!==w&&this._setCurrentPageNumber(w),this._scrollMode===ScrollMode.PAGE&&(_assertClassBrand(_PDFViewer_brand,this,_ensurePageViewVisible).call(this),this.update()),!u&&!this.isInPresentationMode){var g=s.offsetLeft+s.clientLeft,v=g+s.clientWidth,y=this.container,m=y.scrollLeft,d=y.clientWidth;(this._scrollMode===ScrollMode.HORIZONTAL||g<m||v>m+d)&&(u={left:0,top:0})}scrollIntoView(s,u),!this._currentScaleValue&&this._location&&(this._location=null)}}},{key:"_setScaleUpdatePages",value:function(o,u,s){var w=this,g=s.noScroll,v=g!==void 0&&g,y=s.preset,m=y!==void 0&&y,d=s.drawingDelay,f=d===void 0?-1:d;if(this._currentScaleValue=u.toString(),_assertClassBrand(_PDFViewer_brand,this,_isSameScale).call(this,o))m&&this.eventBus.dispatch("scalechanging",{source:this,scale:o,presetValue:u});else{this.viewer.style.setProperty("--scale-factor",o*PixelsPerInch.PDF_TO_CSS_UNITS);var x=f>=0&&f<1e3;if(this.refresh(!0,{scale:o,drawingDelay:x?f:-1}),x&&_classPrivateFieldSet2(_scaleTimeoutId,this,setTimeout(function(){_classPrivateFieldSet2(_scaleTimeoutId,w,null),w.refresh(),w.exitPresentationMode=!1},f)),this._currentScale=o,!v){var k,P=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(P=this._location.pageNumber,k=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:P,destArray:k,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:o,presetValue:m?u:void 0})}}},{key:"_pageWidthScaleFactor",get:function(){return this._spreadMode!==SpreadMode.NONE&&this._scrollMode!==ScrollMode.HORIZONTAL?2:1}},{key:"_setScale",value:function(o,u){var s=parseFloat(o);if(s>0)u.preset=!1,this._setScaleUpdatePages(s,o,u);else{var w=this._pages[this._currentPageNumber-1];if(!w)return;var g=SCROLLBAR_PADDING,v=VERTICAL_PADDING;if(this.isInPresentationMode)g=v=4,this._spreadMode!==SpreadMode.NONE&&(g*=2);else if(this.removePageBorders)g=v=0;else if(this._scrollMode===ScrollMode.HORIZONTAL){var y=[v,g];g=y[0],v=y[1]}var m=(this.container.clientWidth-g)/w.width*w.scale/this._pageWidthScaleFactor,d=(this.container.clientHeight-v)/w.height*w.scale;switch(o){case"page-actual":s=1;break;case"page-width":s=m;break;case"page-height":s=d;break;case"page-fit":s=Math.min(m,d);break;case"auto":var f=isPortraitOrientation(w)?m:Math.min(d,m);s=Math.min(MAX_AUTO_SCALE,f);break;default:return void console.error('_setScale: "'.concat(o,'" is an unknown zoom value.'))}u.preset=!0,this._setScaleUpdatePages(s,o,u)}}},{key:"_resetCurrentPageView",value:function(){var o=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,{noScroll:!0}),this._scrollIntoView(o)}},{key:"pageLabelToPageNumber",value:function(o){if(!this._pageLabels)return null;var u=this._pageLabels.indexOf(o);return u<0?null:u+1}},{key:"scrollPageIntoView",value:function(o){var u=o.pageNumber,s=o.destArray,w=s===void 0?null:s,g=o.allowNegativeOffset,v=g!==void 0&&g,y=o.ignoreDestinationZoom,m=y!==void 0&&y;if(this.pdfDocument&&(!this._pages||this._pages.length)){var d=Number.isInteger(u)&&this._pages[u-1];if(d)if(!this.isInPresentationMode&&w){var f,x,k=0,P=0,S=0,E=0,M=d.rotation%180!=0,T=(M?d.height:d.width)/d.scale/PixelsPerInch.PDF_TO_CSS_UNITS,D=(M?d.width:d.height)/d.scale/PixelsPerInch.PDF_TO_CSS_UNITS,I=0;switch(w[1].name){case"XYZ":k=w[2],P=w[3],I=w[4],k=k!==null?k:0,P=P!==null?P:D;break;case"Fit":case"FitB":I="page-fit";break;case"FitH":case"FitBH":I="page-width",(P=w[2])===null&&this._location?(k=this._location.left,P=this._location.top):(typeof P!="number"||P<0)&&(P=D);break;case"FitV":case"FitBV":k=w[2],S=T,E=D,I="page-height";break;case"FitR":k=w[2],P=w[3],S=w[4]-k,E=w[5]-P;var N=this.removePageBorders?0:SCROLLBAR_PADDING,O=this.removePageBorders?0:VERTICAL_PADDING;f=(this.container.clientWidth-N)/S/PixelsPerInch.PDF_TO_CSS_UNITS,x=(this.container.clientHeight-O)/E/PixelsPerInch.PDF_TO_CSS_UNITS,I=Math.min(Math.abs(f),Math.abs(x));break;default:return void console.error('scrollPageIntoView: "'.concat(w[1].name,'" is not a valid destination type.'))}if(m||(I&&I!==this._currentScale?this.currentScaleValue=I:this._currentScale===UNKNOWN_SCALE&&(this.currentScaleValue=DEFAULT_SCALE_VALUE)),I!=="page-fit"||w[4]){var F=[d.viewport.convertToViewportPoint(k,P),d.viewport.convertToViewportPoint(k+S,P+E)],U=Math.min(F[0][0],F[1][0]),Y=Math.min(F[0][1],F[1][1]);v||(U=Math.max(U,0),Y=Math.max(Y,0)),this._scrollIntoView(d,{left:U,top:Y})}else this._scrollIntoView(d)}else this._setCurrentPageNumber(u,!0);else console.error('scrollPageIntoView: "'.concat(u,'" is not a valid pageNumber parameter.'))}}},{key:"_updateLocation",value:function(o){var u=this._currentScale,s=this._currentScaleValue,w=parseFloat(s)===u?Math.round(1e4*u)/100:s,g=o.id,v=this._pages[g-1],y=this.container,m=v.getPagePoint(y.scrollLeft-o.x,y.scrollTop-o.y),d=Math.round(m[0]),f=Math.round(m[1]),x="#page=".concat(g);this.isInPresentationMode||(x+="&zoom=".concat(w,",").concat(d,",").concat(f)),this._location={pageNumber:g,scale:w,top:f,left:d,rotation:this._pagesRotation,pdfOpenParams:x}}},{key:"cleanupPages",value:function(){var o=this._getVisiblePages(),u=o.views;if(u.length!==0){for(var s=0;s<_classPrivateFieldGet2(_renderedPagesView,this).length;s++){var w=_classPrivateFieldGet2(_renderedPagesView,this)[s];o.ids.has(w.id)||w.destroy()}var g,v=this._spreadMode===SpreadMode.NONE&&(this._scrollMode===ScrollMode.PAGE||this._scrollMode===ScrollMode.VERTICAL),y=this._currentPageNumber,m=!1,d=_createForOfIteratorHelper(u);try{for(d.s();!(g=d.n()).done;){var f=g.value;if(f.percent<100)break;if(f.id===y&&v){m=!0;break}}}catch(x){d.e(x)}finally{d.f()}this._setCurrentPageNumber(m?y:u[0].id),this._updateLocation(o.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}}},{key:"update",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function o(){var u,s;return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(_classPrivateFieldGet2(_scaleTimeoutId,this)===null||this.isInPresentationMode||this.exitPresentationMode||(clearTimeout(_classPrivateFieldGet2(_scaleTimeoutId,this)),_classPrivateFieldSet2(_scaleTimeoutId,this,null)),u=this._getVisiblePages(),u.views.length!==0){w.next=5;break}return w.abrupt("return");case 5:return s=DEFAULT_CACHE_SIZE,_classPrivateFieldGet2(_buffer,this).resize(s,u.ids),w.next=9,this.forceRendering(u);case 9:this.cleanupPages();case 10:case"end":return w.stop()}},o,this)})),function(){return r.apply(this,arguments)})},{key:"containsElement",value:function(o){return this.container.contains(o)}},{key:"focus",value:function(){this.container.focus()}},{key:"_isContainerRtl",get:function(){return getComputedStyle(this.container).direction==="rtl"}},{key:"isInPresentationMode",get:function(){return this.presentationModeState===PresentationModeState.FULLSCREEN}},{key:"isChangingPresentationMode",get:function(){return this.presentationModeState===PresentationModeState.CHANGING}},{key:"isHorizontalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}},{key:"isVerticalScrollbarEnabled",get:function(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}},{key:"_getVisiblePages",value:function(){var o=this._scrollMode===ScrollMode.PAGE?_classPrivateFieldGet2(_scrollModePageState,this).pages:this._pages,u=this._scrollMode===ScrollMode.HORIZONTAL,s=u&&this._isContainerRtl;return getVisibleElements({scrollEl:this.container,views:o,sortByVisibility:!0,horizontal:u,rtl:s})}},{key:"isPageVisible",value:function(o){return!!this.pdfDocument&&(Number.isInteger(o)&&o>0&&o<=this.pagesCount?this._getVisiblePages().ids.has(o):(console.error('isPageVisible: "'.concat(o,'" is not a valid page.')),!1))}},{key:"isPageCached",value:function(o){if(!this.pdfDocument)return!1;if(!(Number.isInteger(o)&&o>0&&o<=this.pagesCount))return console.error('isPageCached: "'.concat(o,'" is not a valid page.')),!1;var u=this._pages[o-1];return _classPrivateFieldGet2(_buffer,this).has(u)}},{key:"cleanup",value:function(){var o,u=_createForOfIteratorHelper(this._pages);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.renderingState!==RenderingStates$1.FINISHED&&s.reset()}}catch(w){u.e(w)}finally{u.f()}}},{key:"_cancelRendering",value:function(){var o,u=_createForOfIteratorHelper(this._pages);try{for(u.s();!(o=u.n()).done;){var s,w=o.value;(s=w.contentContainer)===null||s===void 0||s.destroy(),w.contentContainer=null,w.cancelRendering()}}catch(g){u.e(g)}finally{u.f()}}},{key:"forceRendering",value:function(){var o=_asyncToGenerator(_regeneratorRuntime().mark(function u(s){var w,g,v,y,m,d=this;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(w=s||this._getVisiblePages(),!_classPrivateFieldGet2(_rendering,this)){f.next=4;break}return _classPrivateFieldGet2(_cacheTask,this).push({visiblePages:w}),f.abrupt("return");case 4:_classPrivateFieldSet2(_rendering,this,!0),g=[],v=_regeneratorRuntime().mark(function x(){var k;return _regeneratorRuntime().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if((k=w.views[y].view).renderingState!==RenderingStates$1.FINISHED||!k.canvas){P.next=5;break}return P.abrupt("return",1);case 5:k.renderingState===RenderingStates$1.FINISHED&&k.reset();case 6:return P.next=8,_assertClassBrand(_PDFViewer_brand,d,_ensurePdfPageLoaded$1).call(d,k).then(function(){g.push(k.draw()),_classPrivateFieldGet2(_renderedPagesView,d).push(k)});case 8:case"end":return P.stop()}},x)}),y=0;case 8:if(!(y<w.views.length)){f.next=15;break}return f.delegateYield(v(),"t0",10);case 10:if(!f.t0){f.next=12;break}return f.abrupt("continue",12);case 12:y++,f.next=8;break;case 15:return f.next=17,Promise.all(g);case 17:if(_classPrivateFieldSet2(_rendering,this,!1),!_classPrivateFieldGet2(_cacheTask,this).length){f.next=24;break}return m=_classPrivateFieldGet2(_cacheTask,this).pop(),_classPrivateFieldSet2(_cacheTask,this,[]),f.next=23,this.forceRendering(m.visiblePages);case 23:return f.abrupt("return",!0);case 24:return f.abrupt("return",!1);case 25:case"end":return f.stop()}},u,this)}));return function(u){return o.apply(this,arguments)}}()},{key:"hasEqualPageSizes",get:function(){for(var o=this._pages[0],u=1,s=this._pages.length;u<s;++u){var w=this._pages[u];if(w.width!==o.width||w.height!==o.height)return!1}return!0}},{key:"getPagesOverview",value:function(){var o=this;return this._pages.map(function(u){var s=u.pdfPage.getViewport({scale:1});return!o.enablePrintAutoRotate||isPortraitOrientation(s)?{width:s.width,height:s.height,rotation:s.rotation}:{width:s.height,height:s.width,rotation:(s.rotation-90)%360}})}},{key:"optionalContentConfigPromise",get:function(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)},set:function(o){if(!(o instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(o));this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=o,this.refresh(!1,{optionalContentConfigPromise:o}))}},{key:"scrollMode",get:function(){return this._scrollMode},set:function(o){if(this._scrollMode!==o){if(!isValidScrollMode(o))throw new Error("Invalid scroll mode: ".concat(o));this.pagesCount>PagesCountLimit.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=o,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:o}),this._updateScrollMode(this._currentPageNumber))}}},{key:"_updateScrollMode",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,u=this._scrollMode,s=this.viewer;s.classList.toggle("scrollHorizontal",u===ScrollMode.HORIZONTAL),s.classList.toggle("scrollWrapped",u===ScrollMode.WRAPPED),this.pdfDocument&&o&&(u===ScrollMode.PAGE?_assertClassBrand(_PDFViewer_brand,this,_ensurePageViewVisible).call(this):this._previousScrollMode===ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(o,!0),this.update())}},{key:"spreadMode",get:function(){return this._spreadMode},set:function(o){if(this._spreadMode!==o){if(!isValidSpreadMode(o))throw new Error("Invalid spread mode: ".concat(o));this._spreadMode=o,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:o}),this._updateSpreadMode(this._currentPageNumber)}}},{key:"_updateSpreadMode",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.pdfDocument){var u=this.viewer,s=this._pages;if(this._scrollMode===ScrollMode.PAGE)_assertClassBrand(_PDFViewer_brand,this,_ensurePageViewVisible).call(this);else if(u.textContent="",this._spreadMode===SpreadMode.NONE){var w,g=_createForOfIteratorHelper(this._pages);try{for(g.s();!(w=g.n()).done;){var v=w.value;u.append(v.div)}}catch(x){g.e(x)}finally{g.f()}}else for(var y=this._spreadMode-1,m=null,d=0,f=s.length;d<f;++d)m===null?((m=document.createElement("div")).className="spread",u.append(m)):d%2===y&&(m=m.cloneNode(!1),u.append(m)),m.append(s[d].div);o&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(o,!0),this.update())}}},{key:"_getPageAdvance",value:function(o){var u=arguments.length>1&&arguments[1]!==void 0&&arguments[1];switch(this._scrollMode){case ScrollMode.WRAPPED:var s,w=this._getVisiblePages().views,g=new Map,v=_createForOfIteratorHelper(w);try{for(v.s();!(s=v.n()).done;){var y=s.value,m=y.id,d=y.y,f=y.percent,x=y.widthPercent;if(!(f===0||x<100)){var k=g.get(d);k||g.set(d,k||(k=[])),k.push(m)}}}catch(le){v.e(le)}finally{v.f()}var P,S=_createForOfIteratorHelper(g.values());try{for(S.s();!(P=S.n()).done;){var E=P.value,M=E.indexOf(o);if(M!==-1){var T=E.length;if(T===1)break;if(u)for(var D=M-1;D>=0;D--){var I=E[D],N=E[D+1]-1;if(I<N)return o-N}else for(var O=M+1,F=T;O<F;O++){var U=E[O],Y=E[O-1]+1;if(U>Y)return Y-o}if(u){var Q=E[0];if(Q<o)return o-Q+1}else{var q=E[T-1];if(q>o)return q-o+1}break}}}catch(le){S.e(le)}finally{S.f()}break;case ScrollMode.HORIZONTAL:break;case ScrollMode.PAGE:case ScrollMode.VERTICAL:if(this._spreadMode===SpreadMode.NONE)break;var ne=this._spreadMode-1;if(u&&o%2!==ne||!u&&o%2===ne)break;var J,re=u?o-1:o+1,X=_createForOfIteratorHelper(this._getVisiblePages().views);try{for(X.s();!(J=X.n()).done;){var j=J.value,Z=j.id,W=j.percent,te=j.widthPercent;if(Z===re){if(W>0&&te===100)return 2;break}}}catch(le){X.e(le)}finally{X.f()}}return 1}},{key:"nextPage",value:function(){var o=this._currentPageNumber,u=this.pagesCount;if(o>=u)return!1;var s=this._getPageAdvance(o,!1)||1;return this.currentPageNumber=Math.min(o+s,u),!0}},{key:"previousPage",value:function(){var o=this._currentPageNumber;if(o<=1)return!1;var u=this._getPageAdvance(o,!0)||1;return this.currentPageNumber=Math.max(o-u,1),!0}},{key:"increaseScale",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(typeof o=="number"&&(console.error("The `increaseScale` method-signature was updated, please use an object instead."),o={steps:o}),this.pdfDocument){o||(o=Object.create(null));var u=this._currentScale;if(o.scaleFactor>1)u=Math.min(MAX_SCALE,Math.round(u*o.scaleFactor*100)/100);else{var s,w=(s=o.steps)!==null&&s!==void 0?s:1;do u=(u*DEFAULT_SCALE_DELTA).toFixed(2),u=Math.ceil(10*u)/10,u=Math.min(MAX_SCALE,u);while(--w>0&&u<MAX_SCALE)}o.noScroll=!0,this._setScale(u,o),_classPrivateFieldSet2(_rendering,this,!1)}}},{key:"decreaseScale",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(typeof o=="number"&&(console.error("The `decreaseScale` method-signature was updated, please use an object instead."),o={steps:o}),this.pdfDocument){o||(o=Object.create(null));var u=this._currentScale;if(o.scaleFactor>0&&o.scaleFactor<1)u=Math.max(MIN_SCALE,Math.round(u*o.scaleFactor*100)/100);else{var s,w=(s=o.steps)!==null&&s!==void 0?s:1;do u=(u/DEFAULT_SCALE_DELTA).toFixed(2),u=Math.floor(10*u)/10,u=Math.max(MIN_SCALE,u);while(--w>0&&u>MIN_SCALE)}o.noScroll=!0,this._setScale(u,o),_classPrivateFieldSet2(_rendering,this,!1)}}},{key:"resize",value:function(o){this._setScale(o,{noScroll:!1,drawingDelay:400}),_classPrivateFieldSet2(_rendering,this,!1)}},{key:"annotationEditorMode",get:function(){return this._annotationEditorUIManager?this._annotationEditorMode:pdfExports.AnnotationEditorType.DISABLE},set:function(o){if(!this._annotationEditorUIManager)throw new Error("The AnnotationEditor is not enabled.");if(this._annotationEditorMode!==o){if(!isValidAnnotationEditorMode(o))throw new Error("Invalid AnnotationEditor mode: ".concat(o));this.pdfDocument&&(this._annotationEditorMode=o,this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:o}),this._annotationEditorUIManager.updateMode(o))}}},{key:"refresh",value:function(){var o=arguments.length>0&&arguments[0]!==void 0&&arguments[0],u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object.create(null);if(this.pdfDocument){var s,w=_createForOfIteratorHelper(this._pages);try{for(w.s();!(s=w.n()).done;)s.value.update(u)}catch(g){w.e(g)}finally{w.f()}_classPrivateFieldGet2(_scaleTimeoutId,this)===null||this.isInPresentationMode||this.exitPresentationMode||(clearTimeout(_classPrivateFieldGet2(_scaleTimeoutId,this)),_classPrivateFieldSet2(_scaleTimeoutId,this,null)),o||this.update()}}},{key:"setFontFile",value:function(o){var u,s=_createForOfIteratorHelper(this._pages);try{for(s.s();!(u=s.n()).done;)u.value.fontFile=o}catch(w){s.e(w)}finally{s.f()}}},{key:"refreshCanvas",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function o(){var u;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if((u=this._getVisiblePages()).views.length!==0){s.next=3;break}return s.abrupt("return");case 3:return s.next=5,this.renderCanvas(u);case 5:case"end":return s.stop()}},o,this)})),function(){return n.apply(this,arguments)})},{key:"renderCanvas",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function o(u){var s,w,g,v,y;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(s=u||this._getVisiblePages(),!_classPrivateFieldGet2(_rendering,this)){m.next=4;break}return _classPrivateFieldGet2(_cacheTask,this).push({visiblePages:s}),m.abrupt("return");case 4:for(_classPrivateFieldSet2(_rendering,this,!0),w=[],g=0;g<s.views.length;g++)v=s.views[g].view,w.push(v.redrawCanvas());return m.next=9,Promise.all(w);case 9:if(_classPrivateFieldSet2(_rendering,this,!1),!_classPrivateFieldGet2(_cacheTask,this).length){m.next=16;break}return y=_classPrivateFieldGet2(_cacheTask,this).pop(),_classPrivateFieldSet2(_cacheTask,this,[]),m.next=15,this.renderCanvas(y.visiblePages);case 15:return m.abrupt("return",!0);case 16:return m.abrupt("return",!1);case 17:case"end":return m.stop()}},o,this)})),function(o){return e.apply(this,arguments)})}]);var e,n,r}();function _layerProperties(){var e=this;return{get annotationEditorUIManager(){return e._annotationEditorUIManager},get annotationStorage(){var n;return(n=e.pdfDocument)===null||n===void 0?void 0:n.annotationStorage},get fieldObjectsPromise(){var n;return(n=e.pdfDocument)===null||n===void 0?void 0:n.getFieldObjects()},get hasJSActionsPromise(){var n;return(n=e.pdfDocument)===null||n===void 0?void 0:n.hasJSActions()},get linkService(){return e.linkService}}}function _initializePermissions(e){var n={annotationEditorMode:this._annotationEditorMode,textLayerMode:this.textLayerMode};return e&&(e.includes(pdfExports.PermissionFlag.COPY)||this.viewer.classList.add(ENABLE_PERMISSIONS_CLASS),e.includes(pdfExports.PermissionFlag.MODIFY_CONTENTS)||(n.annotationEditorMode=pdfExports.AnnotationEditorType.DISABLE),e.includes(pdfExports.PermissionFlag.MODIFY_ANNOTATIONS)||e.includes(pdfExports.PermissionFlag.FILL_INTERACTIVE_FORMS)||(n.annotationMode=pdfExports.AnnotationMode.ENABLE)),n}function _onePageRenderedOrForceFetch(){var e=this;if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();var n=new Promise(function(r){_classPrivateFieldSet2(_onVisibilityChange,e,function(){document.visibilityState==="hidden"&&(r(),document.removeEventListener("visibilitychange",_classPrivateFieldGet2(_onVisibilityChange,e)),_classPrivateFieldSet2(_onVisibilityChange,e,null))}),document.addEventListener("visibilitychange",_classPrivateFieldGet2(_onVisibilityChange,e))});return Promise.race([this._onePageRenderedCapability.promise,n])}function _ensurePageViewVisible(){if(this._scrollMode!==ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");var e=this._currentPageNumber,n=_classPrivateFieldGet2(_scrollModePageState,this),r=this.viewer;if(r.textContent="",n.pages.length=0,this._spreadMode!==SpreadMode.NONE||this.isInPresentationMode){var o=new Set,u=this._spreadMode-1;u===-1?o.add(e-1):e%2!==u?(o.add(e-1),o.add(e)):(o.add(e-2),o.add(e-1));var s=document.createElement("div");s.className="spread",this.isInPresentationMode;var w,g=_createForOfIteratorHelper(o);try{for(g.s();!(w=g.n()).done;){var v=w.value,y=this._pages[v];y&&(s.append(y.div),n.pages.push(y))}}catch(d){g.e(d)}finally{g.f()}r.append(s)}else{var m=this._pages[e-1];r.append(m.div),n.pages.push(m)}n.scrollDown=e>=n.previousPageNumber,n.previousPageNumber=e}function _isSameScale(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}function _ensurePdfPageLoaded$1(e){return _ensurePdfPageLoaded2$1.apply(this,arguments)}function _ensurePdfPageLoaded2$1(){return(_ensurePdfPageLoaded2$1=_asyncToGenerator(_regeneratorRuntime().mark(function e(n){var r,o,u;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!n.pdfPage){s.next=2;break}return s.abrupt("return",n.pdfPage);case 2:return s.prev=2,s.next=5,this.pdfDocument.getPage(n.id);case 5:return u=s.sent,n.pdfPage||n.setPdfPage(u),(r=(o=this.linkService)._cachedPageNumber)!==null&&r!==void 0&&r.call(o,u.ref)||this.linkService.cachePageRef(n.id,u.ref),s.abrupt("return",u);case 11:return s.prev=11,s.t0=s.catch(2),console.error("Unable to get page for page view",s.t0),s.abrupt("return",null);case 15:case"end":return s.stop()}},e,this,[[2,11]])}))).apply(this,arguments)}var DRAW_UPSCALE_FACTOR=2,MAX_NUM_SCALING_STEPS=3,THUMBNAIL_CANVAS_BORDER_WIDTH=0,THUMBNAIL_WIDTH=120,TempImageFactory=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getCanvas",value:function(n,r){var o=_assertClassBrand(e,this,_tempCanvas)._||(_tempCanvas._=_assertClassBrand(e,this,document.createElement("canvas")));o.width=n,o.height=r;var u=o.getContext("2d",{alpha:!1});return u.save(),u.fillStyle="rgb(255, 255, 255)",u.fillRect(0,0,n,r),u.restore(),[o,o.getContext("2d")]}},{key:"destroyCanvas",value:function(){var n=_assertClassBrand(e,this,_tempCanvas)._;n&&(n.width=0,n.height=0),_tempCanvas._=_assertClassBrand(e,this,null)}}])}(),_tempCanvas={_:null},PDFThumbnailView=function(){return _createClass(function e(n){var r=n.container,o=n.id,u=n.defaultViewport,s=n.linkService,w=n.renderingQueue,g=n.pageColors;_classCallCheck(this,e),this.id=o,this.renderingId="thumbnail"+o,this.pageLabel=null,this.pdfPage=null,this.rotation=0,this.viewport=u,this.pdfPageRotate=u.rotation,this.pageColors=g||null,this.linkService=s,this.renderingQueue=w,this.renderTask=null,this.renderingState=RenderingStates$1.INITIAL,this.resume=null;var v=this.viewport.width,y=v/this.viewport.height;this.canvasWidth=THUMBNAIL_WIDTH,this.canvasHeight=this.canvasWidth/y|0,this.scale=this.canvasWidth/v;var m=document.createElement("div");m.onclick=function(){return s.goToPage(o),isMobile$1&&window.instances.UI.closeElement("leftPanel"),!1},this.anchor=m;var d=document.createElement("div");d.className="thumbnail",d.setAttribute("data-page-number",this.id),this.div=d;var f=document.createElement("div");f.className="thumbnailSelectionRing";var x=2*THUMBNAIL_CANVAS_BORDER_WIDTH;f.style.width=this.canvasWidth+x+"px",f.style.height=this.canvasHeight+x+"px",this.ring=f,d.append(f);var k=document.createElement("div");k.className="box-thumbnail",k.textContent=this.id,d.append(k),m.append(d),r.append(m)},[{key:"setPdfPage",value:function(e){this.pdfPage=e,this.pdfPageRotate=e.rotate;var n=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:1,rotation:n}),this.reset()}},{key:"reset",value:function(){this.cancelRendering(),this.renderingState=RenderingStates$1.INITIAL;var e=this.viewport.width,n=e/this.viewport.height;this.canvasHeight=this.canvasWidth/n|0,this.scale=this.canvasWidth/e,this.div.removeAttribute("data-loaded");var r=this.ring;r.textContent="";var o=2*THUMBNAIL_CANVAS_BORDER_WIDTH;r.style.width=this.canvasWidth+o+"px",r.style.height=this.canvasHeight+o+"px",this.canvas&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.image&&(this.image.removeAttribute("src"),delete this.image)}},{key:"update",value:function(e){var n=e.rotation,r=n===void 0?null:n;typeof r=="number"&&(this.rotation=r);var o=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:o}),this.reset()}},{key:"cancelRendering",value:function(){this.renderTask&&(this.renderTask.cancel(),this.renderTask=null),this.resume=null}},{key:"_getPageDrawContext",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=document.createElement("canvas"),r=n.getContext("2d",{alpha:!1}),o=new OutputScale;return n.width=e*this.canvasWidth*o.sx|0,n.height=e*this.canvasHeight*o.sy|0,{ctx:r,canvas:n,transform:o.scaled?[o.sx,0,0,o.sy,0,0]:null}}},{key:"_convertCanvasToImage",value:function(e){if(this.renderingState!==RenderingStates$1.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");var n=this._reduceImage(e),r=document.createElement("img");r.className="thumbnailImage",this._thumbPageCanvas.then(function(o){r.setAttribute("aria-label",o)}),r.style.width=this.canvasWidth+"px",r.style.height=this.canvasHeight+"px",r.src=n.toDataURL(),this.image=r,this.div.setAttribute("data-loaded",!0),this.ring.append(r),n.width=0,n.height=0}},{key:"draw",value:function(){var e=this;if(this.renderingState!==RenderingStates$1.INITIAL)return console.error("Must be in new state before drawing"),Promise.resolve();var n=this.pdfPage;if(!n)return this.renderingState=RenderingStates$1.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=RenderingStates$1.RUNNING;var r=function(){var y=_asyncToGenerator(_regeneratorRuntime().mark(function m(){var d,f=arguments;return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(d=f.length>0&&f[0]!==void 0?f[0]:null,g===e.renderTask&&(e.renderTask=null),!(d instanceof pdfExports.RenderingCancelledException)){x.next=4;break}return x.abrupt("return");case 4:if(e.renderingState=RenderingStates$1.FINISHED,e._convertCanvasToImage(s),!d){x.next=8;break}throw d;case 8:case"end":return x.stop()}},m)}));return function(){return y.apply(this,arguments)}}(),o=this._getPageDrawContext(DRAW_UPSCALE_FACTOR),u=o.ctx,s=o.canvas,w={canvasContext:u,transform:o.transform,viewport:this.viewport.clone({scale:DRAW_UPSCALE_FACTOR*this.scale}),pageColors:this.pageColors},g=this.renderTask=n.render(w);g.onContinue=function(y){if(!e.renderingQueue.isHighestPriority(e))return e.renderingState=RenderingStates$1.PAUSED,void(e.resume=function(){e.renderingState=RenderingStates$1.RUNNING,y()});y()};var v=g.promise.then(function(){return r(null)},function(y){return r(y)});return v.finally(function(){var y;s.width=0,s.height=0,e.linkService.isPageCached(e.id)||(y=e.pdfPage)===null||y===void 0||y.cleanup()}),v}},{key:"setImage",value:function(e){if(this.renderingState===RenderingStates$1.INITIAL){var n=e.thumbnailCanvas,r=e.pdfPage,o=e.scale;n&&(this.pdfPage||this.setPdfPage(r),o<this.scale||(this.renderingState=RenderingStates$1.FINISHED,this._convertCanvasToImage(n)))}}},{key:"_reduceImage",value:function(e){var n=this._getPageDrawContext(),r=n.ctx,o=n.canvas;if(e.width<=2*o.width)return r.drawImage(e,0,0,e.width,e.height,0,0,o.width,o.height),o;for(var u=o.width<<MAX_NUM_SCALING_STEPS,s=o.height<<MAX_NUM_SCALING_STEPS,w=_slicedToArray(TempImageFactory.getCanvas(u,s),2),g=w[0],v=w[1];u>e.width||s>e.height;)u>>=1,s>>=1;for(v.drawImage(e,0,0,e.width,e.height,0,0,u,s);u>2*o.width;)v.drawImage(g,0,0,u,s,0,0,u>>1,s>>1),u>>=1,s>>=1;return r.drawImage(g,0,0,u,s,0,0,o.width,o.height),o}},{key:"_thumbPageTitle",get:function(){var e;return Promise.resolve("Page ".concat((e=this.pageLabel)!==null&&e!==void 0?e:this.id))}},{key:"_thumbPageCanvas",get:function(){var e;return Promise.resolve("Thumbnail of Page ".concat((e=this.pageLabel)!==null&&e!==void 0?e:this.id))}},{key:"setPageLabel",value:function(e){var n=this;this.pageLabel=typeof e=="string"?e:null,this._thumbPageTitle.then(function(r){n.anchor.title=r}),this.renderingState===RenderingStates$1.FINISHED&&this._thumbPageCanvas.then(function(r){var o;(o=n.image)===null||o===void 0||o.setAttribute("aria-label",r)})}}])}(),THUMBNAIL_SCROLL_MARGIN=-19,THUMBNAIL_SELECTED_CLASS="selected",_PDFThumbnailViewer_brand=new WeakSet,PDFThumbnailViewer=function(){return _createClass(function e(n){var r=n.container,o=n.renderingQueue,u=n.linkService;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_PDFThumbnailViewer_brand),this.container=r,this.linkService=u,this.renderingQueue=o,this.pageColors=null,typeof PDFJSDev<"u"&&PDFJSDev.test("MOZCENTRAL")||!this.pageColors||CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground)||((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFThumbnailViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.scroll=watchScroll(this.container,this._scrollUpdated.bind(this)),this._resetView()},[{key:"_scrollUpdated",value:function(){this.renderingQueue.renderHighestPriority()}},{key:"getThumbnail",value:function(e){return this._thumbnails[e]}},{key:"_getVisibleThumbs",value:function(){return getVisibleElements({scrollEl:this.container,views:this._thumbnails})}},{key:"scrollThumbnailIntoView",value:function(e){if(this.pdfDocument){var n=this._thumbnails[e-1];if(n){e!==this._currentPageNumber&&(this._thumbnails[this._currentPageNumber-1].div.classList.remove(THUMBNAIL_SELECTED_CLASS),n.div.classList.add(THUMBNAIL_SELECTED_CLASS));var r=this._getVisibleThumbs(),o=r.first,u=r.last,s=r.views;if(s.length>0){var w=!1;if(e<=o.id||e>=u.id)w=!0;else{var g,v=_createForOfIteratorHelper(s);try{for(v.s();!(g=v.n()).done;){var y=g.value,m=y.id,d=y.percent;if(m===e){w=d<100;break}}}catch(f){v.e(f)}finally{v.f()}}this._scrollUpdated(),w&&scrollIntoView(n.div,{top:THUMBNAIL_SCROLL_MARGIN})}this._currentPageNumber=e}else console.warn('scrollThumbnailIntoView: Invalid "pageNumber" parameter.')}}},{key:"pagesRotation",get:function(){return this._pagesRotation},set:function(e){if(!isValidRotation(e))throw new Error("Invalid thumbnails rotation angle.");if(this.pdfDocument&&this._pagesRotation!==e){this._pagesRotation=e;var n,r={rotation:e},o=_createForOfIteratorHelper(this._thumbnails);try{for(o.s();!(n=o.n()).done;)n.value.update(r)}catch(u){o.e(u)}finally{o.f()}}}},{key:"cleanup",value:function(){var e,n=_createForOfIteratorHelper(this._thumbnails);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.renderingState!==RenderingStates$1.FINISHED&&r.reset()}}catch(o){n.e(o)}finally{n.f()}TempImageFactory.destroyCanvas()}},{key:"_resetView",value:function(){this._thumbnails=[],this._currentPageNumber=1,this._pageLabels=null,this._pagesRotation=0,this.container.textContent=""}},{key:"setDocument",value:function(e){var n=this;this.pdfDocument&&(this._cancelRendering(),this._resetView()),this.pdfDocument=e,e&&e.getPage(1).then(function(r){for(var o,u=e.numPages,s=r.getViewport({scale:1}),w=1;w<=u;++w){var g=new PDFThumbnailView({container:n.container,id:w,defaultViewport:s.clone(),linkService:n.linkService,renderingQueue:n.renderingQueue,pageColors:n.pageColors});n._thumbnails.push(g)}(o=n._thumbnails[0])===null||o===void 0||o.setPdfPage(r),n._thumbnails[n._currentPageNumber-1].div.classList.add(THUMBNAIL_SELECTED_CLASS)}).catch(function(r){console.error("Unable to initialize thumbnail viewer",r)})}},{key:"_cancelRendering",value:function(){var e,n=_createForOfIteratorHelper(this._thumbnails);try{for(n.s();!(e=n.n()).done;)e.value.cancelRendering()}catch(r){n.e(r)}finally{n.f()}}},{key:"setPageLabels",value:function(e){if(this.pdfDocument){e?Array.isArray(e)&&this.pdfDocument.numPages===e.length?this._pageLabels=e:(this._pageLabels=null,console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")):this._pageLabels=null;for(var n=0,r=this._thumbnails.length;n<r;n++){var o,u;this._thumbnails[n].setPageLabel((o=(u=this._pageLabels)===null||u===void 0?void 0:u[n])!==null&&o!==void 0?o:null)}}}},{key:"forceRendering",value:function(){var e=this,n=this._getVisibleThumbs(),r=_assertClassBrand(_PDFThumbnailViewer_brand,this,_getScrollAhead).call(this,n),o=this.renderingQueue.getHighestPriority(n,this._thumbnails,r);return!!o&&(_assertClassBrand(_PDFThumbnailViewer_brand,this,_ensurePdfPageLoaded).call(this,o).then(function(){e.renderingQueue.renderView(o)}),!0)}}])}();function _ensurePdfPageLoaded(e){return _ensurePdfPageLoaded2.apply(this,arguments)}function _ensurePdfPageLoaded2(){return(_ensurePdfPageLoaded2=_asyncToGenerator(_regeneratorRuntime().mark(function e(n){var r;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!n.pdfPage){o.next=2;break}return o.abrupt("return",n.pdfPage);case 2:return o.prev=2,o.next=5,this.pdfDocument.getPage(n.id);case 5:return r=o.sent,n.pdfPage||n.setPdfPage(r),o.abrupt("return",r);case 10:return o.prev=10,o.t0=o.catch(2),console.error("Unable to get page for thumb view",o.t0),o.abrupt("return",null);case 14:case"end":return o.stop()}},e,this,[[2,10]])}))).apply(this,arguments)}function _getScrollAhead(e){var n,r;return((n=e.first)===null||n===void 0?void 0:n.id)===1||((r=e.last)===null||r===void 0?void 0:r.id)!==this._thumbnails.length&&this.scroll.down}var CLEANUP_TIMEOUT=3e4,PDFRenderingQueue=function(){return _createClass(function n(){_classCallCheck(this,n),this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1},[{key:"setViewer",value:function(n){this.pdfViewer=n}},{key:"setThumbnailViewer",value:function(n){this.pdfThumbnailViewer=n}},{key:"isHighestPriority",value:function(n){return this.highestPriorityPage===n.renderingId}},{key:"hasViewer",value:function(){return!!this.pdfViewer}},{key:"renderHighestPriority",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(r){var o;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),u.next=3,this.pdfViewer.forceRendering(r);case 3:if(!u.sent){u.next=5;break}return u.abrupt("return");case 5:if(!this.isThumbnailViewEnabled||(o=this.pdfThumbnailViewer)===null||o===void 0||!o.forceRendering()){u.next=7;break}return u.abrupt("return");case 7:if(!this.printing){u.next=9;break}return u.abrupt("return");case 9:this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT));case 10:case"end":return u.stop()}},n,this)})),function(n){return e.apply(this,arguments)})},{key:"getHighestPriority",value:function(n,r,o){var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],s=n.views,w=s.length;if(w===0)return null;for(var g=0;g<w;g++){var v=s[g].view;if(!this.isViewFinished(v))return v}var y=n.first.id,m=n.last.id;if(m-y+1>w)for(var d=n.ids,f=1,x=m-y;f<x;f++){var k=o?y+f:m-f;if(!d.has(k)){var P=r[k-1];if(!this.isViewFinished(P))return P}}var S=o?m:y-2,E=r[S];return E&&!this.isViewFinished(E)||u&&(E=r[S+=o?1:-1])&&!this.isViewFinished(E)?E:null}},{key:"isViewFinished",value:function(n){return n.renderingState===RenderingStates.FINISHED}},{key:"renderView",value:function(n){var r=this;switch(n.renderingState){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:this.highestPriorityPage=n.renderingId,n.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=n.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=n.renderingId,n.draw().finally(function(){r.renderHighestPriority()})}return!0}}]);var e}(),UI_NOTIFICATION_CLASS="pdfSidebarNotification",_PDFSidebar_brand=new WeakSet,PDFSidebar=function(){return _createClass(function e(n){var r=n.elements,o=n.pdfViewer,u=n.pdfThumbnailViewer,s=n.eventBus,w=n.l10n;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_PDFSidebar_brand),this.isOpen=!1,this.active=SidebarView.THUMBS,this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,this.onToggled=null,this.pdfViewer=o,this.pdfThumbnailViewer=u,this.outerContainer=r.outerContainer,this.sidebarContainer=r.sidebarContainer,this.toggleButton=r.toggleButton,this.thumbnailButton=r.thumbnailButton,this.outlineButton=r.outlineButton,this.attachmentsButton=r.attachmentsButton,this.layersButton=r.layersButton,this.thumbnailView=r.thumbnailView,this.outlineView=r.outlineView,this.attachmentsView=r.attachmentsView,this.layersView=r.layersView,this._outlineOptionsContainer=r.outlineOptionsContainer,this._currentOutlineItemButton=r.currentOutlineItemButton,this.eventBus=s,this.l10n=w,this.eventBus._on("pagesloaded",function(){})},[{key:"reset",value:function(){this.isInitialViewSet=!1,this.isInitialEventDispatched=!1,_assertClassBrand(_PDFSidebar_brand,this,_hideUINotification).call(this,!0),this.switchView(SidebarView.THUMBS)}},{key:"visibleView",get:function(){return this.isOpen?this.active:SidebarView.NONE}},{key:"setInitialView",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SidebarView.NONE;this.isInitialViewSet||(this.isInitialViewSet=!0,e!==SidebarView.NONE&&e!==SidebarView.UNKNOWN?(this.switchView(e,!0),this.isInitialEventDispatched||_assertClassBrand(_PDFSidebar_brand,this,_dispatchEvent$1).call(this)):_assertClassBrand(_PDFSidebar_brand,this,_dispatchEvent$1).call(this))}},{key:"switchView",value:function(e){var n,r,o,u,s,w,g,v,y,m,d,f,x,k=arguments.length>1&&arguments[1]!==void 0&&arguments[1],P=e!==this.active,S=!1;switch(e){case SidebarView.NONE:return void(this.isOpen&&this.close());case SidebarView.THUMBS:this.isOpen&&P&&(S=!0);break;case SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case SidebarView.OUTLINE:case SidebarView.LAYERS:break;default:return void console.error('PDFSidebar.switchView: "'.concat(e,'" is not a valid view.'))}this.active=e;var E=e===SidebarView.THUMBS,M=e===SidebarView.OUTLINE,T=e===SidebarView.ATTACHMENTS,D=e===SidebarView.LAYERS;(n=this.thumbnailButton)===null||n===void 0||n.classList.toggle("toggled",E),(r=this.outlineButton)===null||r===void 0||r.classList.toggle("toggled",M),(o=this.attachmentsButton)===null||o===void 0||o.classList.toggle("toggled",T),(u=this.layersButton)===null||u===void 0||u.classList.toggle("toggled",D),(s=this.thumbnailButton)===null||s===void 0||s.setAttribute("aria-checked",E),(w=this.outlineButton)===null||w===void 0||w.setAttribute("aria-checked",M),(g=this.attachmentsButton)===null||g===void 0||g.setAttribute("aria-checked",T),(v=this.layersButton)===null||v===void 0||v.setAttribute("aria-checked",D),(y=this.thumbnailView)===null||y===void 0||y.classList.toggle("hidden",!E),(m=this.outlineView)===null||m===void 0||m.classList.toggle("hidden",!M),(d=this.attachmentsView)===null||d===void 0||d.classList.toggle("hidden",!T),(f=this.layersView)===null||f===void 0||f.classList.toggle("hidden",!D),(x=this._outlineOptionsContainer)===null||x===void 0||x.classList.toggle("hidden",!M),!k||this.isOpen?(S&&(_assertClassBrand(_PDFSidebar_brand,this,_updateThumbnailViewer).call(this),_assertClassBrand(_PDFSidebar_brand,this,_forceRendering).call(this)),P&&_assertClassBrand(_PDFSidebar_brand,this,_dispatchEvent$1).call(this)):this.open()}},{key:"open",value:function(){var e,n,r;this.isOpen||(this.isOpen=!0,(e=this.toggleButton)===null||e===void 0||e.classList.add("toggled"),(n=this.toggleButton)===null||n===void 0||n.setAttribute("aria-expanded","true"),(r=this.outerContainer)===null||r===void 0||r.classList.add("sidebarMoving","sidebarOpen"),this.active===SidebarView.THUMBS&&_assertClassBrand(_PDFSidebar_brand,this,_updateThumbnailViewer).call(this),_assertClassBrand(_PDFSidebar_brand,this,_forceRendering).call(this),_assertClassBrand(_PDFSidebar_brand,this,_dispatchEvent$1).call(this),_assertClassBrand(_PDFSidebar_brand,this,_hideUINotification).call(this))}},{key:"close",value:function(){var e,n,r,o;this.isOpen&&(this.isOpen=!1,(e=this.toggleButton)===null||e===void 0||e.classList.remove("toggled"),(n=this.toggleButton)===null||n===void 0||n.setAttribute("aria-expanded","false"),(r=this.outerContainer)===null||r===void 0||r.classList.add("sidebarMoving"),(o=this.outerContainer)===null||o===void 0||o.classList.remove("sidebarOpen"),_assertClassBrand(_PDFSidebar_brand,this,_forceRendering).call(this),_assertClassBrand(_PDFSidebar_brand,this,_dispatchEvent$1).call(this))}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}}])}();function _dispatchEvent$1(){this.isInitialViewSet&&!this.isInitialEventDispatched&&(this.isInitialEventDispatched=!0),this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}function _forceRendering(){this.onToggled?this.onToggled():(this.pdfViewer.forceRendering(),this.pdfThumbnailViewer.forceRendering())}function _updateThumbnailViewer(){for(var e=this.pdfViewer,n=this.pdfThumbnailViewer,r=e.pagesCount,o=0;o<r;o++){var u=e.getPageView(o);(u==null?void 0:u.renderingState)===RenderingStates$1.FINISHED&&n.getThumbnail(o).setImage(u)}n.scrollThumbnailIntoView(e.currentPageNumber)}function _hideUINotification(){var e,n,r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];(this.isOpen||r)&&((e=this.toggleButton)===null||e===void 0||e.classList.remove(UI_NOTIFICATION_CLASS)),r&&((n=this.toggleButton)===null||n===void 0||n.setAttribute("data-l10n-id","toggle_sidebar"))}function _download(e,n){var r=document.createElement("a");if(!r.click)throw new Error('DownloadManager: "a.click()" is not supported.');r.href=e,r.target="_parent","download"in r&&(r.download=n),(document.body||document.documentElement).append(r),r.click(),r.remove()}var _openBlobUrls=new WeakMap,DownloadManager=function(){return _createClass(function e(){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_openBlobUrls,new WeakMap)},[{key:"downloadUrl",value:function(e,n){pdfExports.createValidAbsoluteUrl(e,"http://example.com")?_download(e+"#pdfjs.action=download",n):console.error("downloadUrl - not a valid URL: ".concat(e))}},{key:"downloadData",value:function(e,n,r){_download(URL.createObjectURL(new Blob([e],{type:r})),n)}},{key:"openOrDownloadData",value:function(e,n,r){var o=pdfExports.isPdfFile(r),u=o?"application/pdf":"";if(o){var s,w=_classPrivateFieldGet2(_openBlobUrls,this).get(e);w||(w=URL.createObjectURL(new Blob([n],{type:u})),_classPrivateFieldGet2(_openBlobUrls,this).set(e,w)),typeof PDFJSDev>"u"||PDFJSDev.test("GENERIC")?s="?file="+encodeURIComponent(w+"#"+r):PDFJSDev.test("CHROME")&&(s=chrome.runtime.getURL("/content/web/viewer.html")+"?file="+encodeURIComponent(w+"#"+r));try{return window.open(s),!0}catch(g){console.error("openOrDownloadData: ".concat(g)),URL.revokeObjectURL(w),_classPrivateFieldGet2(_openBlobUrls,this).delete(e)}}return this.downloadData(n,r,u),!1}},{key:"download",value:function(e,n,r){_download(URL.createObjectURL(e),r)}}])}(),DefaultExternalServices=function(){return _createClass(function e(){throw _classCallCheck(this,e),new Error("Cannot initialize DefaultExternalServices.")},null,[{key:"updateFindControlState",value:function(e){}},{key:"updateFindMatchesCount",value:function(e){}},{key:"initPassiveLoading",value:function(e){}},{key:"reportTelemetry",value:function(e){}},{key:"createDownloadManager",value:function(){throw new Error("Not implemented: createDownloadManager")}},{key:"createPreferences",value:function(){throw new Error("Not implemented: createPreferences")}},{key:"createL10n",value:function(e){throw new Error("Not implemented: createL10n")}},{key:"createScripting",value:function(e){throw new Error("Not implemented: createScripting")}},{key:"supportsIntegratedFind",get:function(){return shadow(this,"supportsIntegratedFind",!1)}},{key:"supportsDocumentFonts",get:function(){return shadow(this,"supportsDocumentFonts",!0)}},{key:"supportedMouseWheelZoomModifierKeys",get:function(){return shadow(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}},{key:"isInAutomation",get:function(){return shadow(this,"isInAutomation",!1)}},{key:"updateEditorStates",value:function(e){throw new Error("Not implemented: updateEditorStates")}}])}(),GenericExternalServices=function(e){function n(){return _classCallCheck(this,n),_callSuper(this,n,arguments)}return _inherits(n,DefaultExternalServices),_createClass(n,null,[{key:"createDownloadManager",value:function(){return new DownloadManager}}])}(),CSS_CLASS_GRAB="grab-to-pan-grab",_GrabToPan_brand=new WeakSet,GrabToPan=function(){return _createClass(function e(n){_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_GrabToPan_brand),this.element=n.element,this.document=n.element.ownerDocument,typeof n.ignoreTarget=="function"&&(this.ignoreTarget=n.ignoreTarget),this.onActiveChanged=n.onActiveChanged,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onMouseDown=_assertClassBrand(_GrabToPan_brand,this,_onMouseDown).bind(this),this._onMouseMove=_assertClassBrand(_GrabToPan_brand,this,_onMouseMove).bind(this),this._endPan=_assertClassBrand(_GrabToPan_brand,this,_endPan).bind(this),(this.overlay=document.createElement("div")).className="grab-to-pan-grabbing"},[{key:"activate",value:function(){var e;this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onMouseDown,!0),this.element.classList.add(CSS_CLASS_GRAB),(e=this.onActiveChanged)===null||e===void 0||e.call(this,!0))}},{key:"deactivate",value:function(){var e;this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onMouseDown,!0),this._endPan(),this.element.classList.remove(CSS_CLASS_GRAB),(e=this.onActiveChanged)===null||e===void 0||e.call(this,!1))}},{key:"toggle",value:function(){this.active?this.deactivate():this.activate()}},{key:"ignoreTarget",value:function(e){return e.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}}])}();function _onMouseDown(e){if(e.button===0&&!this.ignoreTarget(e.target)){if(e.originalTarget)try{e.originalTarget.tagName}catch{return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=e.clientX,this.clientYStart=e.clientY,this.document.addEventListener("mousemove",this._onMouseMove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),e.preventDefault(),e.stopPropagation();var n=document.activeElement;n&&!n.contains(e.target)&&n.blur()}}function _onMouseMove(e){if(this.element.removeEventListener("scroll",this._endPan,!0),1&e.buttons){var n=e.clientX-this.clientXStart,r=e.clientY-this.clientYStart,o=this.scrollTopStart-r,u=this.scrollLeftStart-n;this.element.scrollTo?this.element.scrollTo({top:o,left:u,behavior:"instant"}):(this.element.scrollTop=o,this.element.scrollLeft=u),this.overlay.parentNode||document.body.append(this.overlay)}else this._endPan()}function _endPan(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onMouseMove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()}var CursorTool={SELECT:0,HAND:1,ZOOM:2},_PDFCursorTools_brand=new WeakSet,PDFCursorTools=function(){return _createClass(function e(n){var r=this,o=n.container,u=n.eventBus,s=n.cursorToolOnLoad,w=s===void 0?CursorTool.SELECT:s;_classCallCheck(this,e),_classPrivateMethodInitSpec(this,_PDFCursorTools_brand),this.container=o,this.eventBus=u,this.active=CursorTool.SELECT,this.previouslyActive=null,this.handTool=new GrabToPan({element:this.container}),_assertClassBrand(_PDFCursorTools_brand,this,_addEventListeners).call(this),Promise.resolve().then(function(){r.switchTool(w)})},[{key:"activeTool",get:function(){return this.active}},{key:"switchTool",value:function(e){var n=this;if(this.previouslyActive===null&&e!==this.active){var r=function(){switch(n.active){case CursorTool.SELECT:break;case CursorTool.HAND:n.handTool.deactivate()}};switch(e){case CursorTool.SELECT:r();break;case CursorTool.HAND:r(),this.handTool.activate();break;case CursorTool.ZOOM:default:return void console.error('switchTool: "'.concat(e,'" is an unsupported value.'))}this.active=e,_assertClassBrand(_PDFCursorTools_brand,this,_dispatchEvent$2).call(this)}}}])}();function _dispatchEvent$2(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}function _addEventListeners(){var e=this;this.eventBus._on("switchcursortool",function(s){e.switchTool(s.tool)});var n=pdfExports.AnnotationEditorType.NONE,r=PresentationModeState.NORMAL,o=function(){var s,w=e.active;e.switchTool(CursorTool.SELECT),(s=e.previouslyActive)!==null&&s!==void 0||(e.previouslyActive=w)},u=function(){var s=e.previouslyActive;s!==null&&n===pdfExports.AnnotationEditorType.NONE&&r===PresentationModeState.NORMAL&&(e.previouslyActive=null,e.switchTool(s))};this.eventBus._on("secondarytoolbarreset",function(s){e.previouslyActive!==null&&(n=pdfExports.AnnotationEditorType.NONE,r=PresentationModeState.NORMAL,u())}),this.eventBus._on("annotationeditormodechanged",function(s){var w=s.mode;n=w,w===pdfExports.AnnotationEditorType.NONE?u():o()}),this.eventBus._on("presentationmodechanged",function(s){var w=s.state;r=w,w===PresentationModeState.NORMAL?u():w===PresentationModeState.FULLSCREEN&&o()})}var DELAY_BEFORE_HIDING_CONTROLS=3e3,ACTIVE_SELECTOR="pdfPresentationMode",CONTROLS_SELECTOR="pdfPresentationModeControls",MOUSE_SCROLL_COOLDOWN_TIME=50,PAGE_SWITCH_THRESHOLD=.1,SWIPE_MIN_DISTANCE_THRESHOLD=50,SWIPE_ANGLE_THRESHOLD=Math.PI/6,_state=new WeakMap,_args=new WeakMap,_PDFPresentationMode_brand=new WeakSet,PDFPresentationMode=function(){return _createClass(function n(r){var o=r.container,u=r.pdfViewer,s=r.eventBus;_classCallCheck(this,n),_classPrivateMethodInitSpec(this,_PDFPresentationMode_brand),_classPrivateFieldInitSpec(this,_state,PresentationModeState.UNKNOWN),_classPrivateFieldInitSpec(this,_args,null),this.container=o,this.pdfViewer=u,this.eventBus=s,this.contextMenuOpen=!1,this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0,this.touchSwipeState=null,this.isHandlingFullScreen=!1},[{key:"request",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(){var r,o,u;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(r=this.container,o=this.pdfViewer,!this.active&&o.pagesCount){s.next=3;break}return s.abrupt("return",!1);case 3:return _assertClassBrand(_PDFPresentationMode_brand,this,_addFullscreenChangeListeners).call(this),_assertClassBrand(_PDFPresentationMode_brand,this,_notifyStateChange).call(this,PresentationModeState.CHANGING),u=null,r.webkitRequestFullScreen?u=r.webkitRequestFullScreen():r.mozRequestFullScreen?u=r.mozRequestFullScreen():r.requestFullscreen&&(u=r.requestFullscreen()),_classPrivateFieldSet2(_args,this,{pageNumber:o.currentPageNumber,scaleValue:o.currentScaleValue,scrollMode:o.scrollMode,spreadMode:null,annotationEditorMode:null}),o.spreadMode===SpreadMode.NONE||o.pageViewsReady&&o.hasEqualPageSizes||(console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes."),_classPrivateFieldGet2(_args,this).spreadMode=o.spreadMode),o.annotationEditorMode!==pdfExports.AnnotationEditorType.DISABLE&&(_classPrivateFieldGet2(_args,this).annotationEditorMode=o.annotationEditorMode),s.prev=10,s.next=13,u;case 13:return o.focus(),s.abrupt("return",!0);case 17:s.prev=17,s.t0=s.catch(10),_assertClassBrand(_PDFPresentationMode_brand,this,_removeFullscreenChangeListeners).call(this),_assertClassBrand(_PDFPresentationMode_brand,this,_notifyStateChange).call(this,PresentationModeState.NORMAL);case 21:return s.abrupt("return",!1);case 22:case"end":return s.stop()}},n,this,[[10,17]])})),function(){return e.apply(this,arguments)})},{key:"active",get:function(){return _classPrivateFieldGet2(_state,this)===PresentationModeState.CHANGING||_classPrivateFieldGet2(_state,this)===PresentationModeState.FULLSCREEN}}]);var e}();function _mouseWheel(e){if(this.active){e.preventDefault();var n=normalizeWheelEventDelta(e),r=Date.now(),o=this.mouseScrollTimeStamp;if(!(r>o&&r-o<MOUSE_SCROLL_COOLDOWN_TIME)&&((this.mouseScrollDelta>0&&n<0||this.mouseScrollDelta<0&&n>0)&&_assertClassBrand(_PDFPresentationMode_brand,this,_resetMouseScrollState).call(this),this.mouseScrollDelta+=n,Math.abs(this.mouseScrollDelta)>=PAGE_SWITCH_THRESHOLD)){var u=this.mouseScrollDelta;_assertClassBrand(_PDFPresentationMode_brand,this,_resetMouseScrollState).call(this),(u>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=r)}}}function _notifyStateChange(e){_classPrivateFieldSet2(_state,this,e),this.eventBus.dispatch("presentationmodechanged",{source:this,state:e})}function _enter(){var e=this;_assertClassBrand(_PDFPresentationMode_brand,this,_notifyStateChange).call(this,PresentationModeState.FULLSCREEN),this.container.classList.add(ACTIVE_SELECTOR),setTimeout(function(){e.pdfViewer.scrollMode=ScrollMode.PAGE,_classPrivateFieldGet2(_args,e).spreadMode!==null&&(e.pdfViewer.spreadMode=SpreadMode.NONE),e.pdfViewer.currentPageNumber=_classPrivateFieldGet2(_args,e).pageNumber,e.pdfViewer.currentScaleValue="page-fit",_classPrivateFieldGet2(_args,e).annotationEditorMode!==null&&(e.pdfViewer.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},0),_assertClassBrand(_PDFPresentationMode_brand,this,_addWindowListeners).call(this),_assertClassBrand(_PDFPresentationMode_brand,this,_showControls).call(this),this.contextMenuOpen=!1,window.getSelection().removeAllRanges()}function _exit(){var e=this,n=this.pdfViewer.currentPageNumber;this.container.classList.remove(ACTIVE_SELECTOR),setTimeout(function(){_assertClassBrand(_PDFPresentationMode_brand,e,_removeFullscreenChangeListeners).call(e),_assertClassBrand(_PDFPresentationMode_brand,e,_notifyStateChange).call(e,PresentationModeState.NORMAL),e.pdfViewer.scrollMode=_classPrivateFieldGet2(_args,e).scrollMode,_classPrivateFieldGet2(_args,e).spreadMode!==null&&(e.pdfViewer.spreadMode=_classPrivateFieldGet2(_args,e).spreadMode),e.pdfViewer.exitPresentationMode=!0,e.pdfViewer.currentPageNumber=n,e.pdfViewer.currentScaleValue=_classPrivateFieldGet2(_args,e).scaleValue,_classPrivateFieldGet2(_args,e).annotationEditorMode!==null&&(e.pdfViewer.annotationEditorMode=_classPrivateFieldGet2(_args,e).annotationEditorMode),_classPrivateFieldSet2(_args,e,null)},0),_assertClassBrand(_PDFPresentationMode_brand,this,_removeWindowListeners).call(this),_assertClassBrand(_PDFPresentationMode_brand,this,_hideControls).call(this),_assertClassBrand(_PDFPresentationMode_brand,this,_resetMouseScrollState).call(this),this.contextMenuOpen=!1}function _mouseDown(e){var n;if(this.contextMenuOpen)return this.contextMenuOpen=!1,void e.preventDefault();e.button===0&&(e.target.href&&(n=e.target.parentNode)!==null&&n!==void 0&&n.hasAttribute("data-internal-link")||(e.preventDefault(),e.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()))}function _contextMenu(){this.contextMenuOpen=!0}function _showControls(){var e=this;this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(CONTROLS_SELECTOR),this.controlsTimeout=setTimeout(function(){e.container.classList.remove(CONTROLS_SELECTOR),delete e.controlsTimeout},DELAY_BEFORE_HIDING_CONTROLS)}function _hideControls(){this.controlsTimeout&&(clearTimeout(this.controlsTimeout),this.container.classList.remove(CONTROLS_SELECTOR),delete this.controlsTimeout)}function _resetMouseScrollState(){this.mouseScrollTimeStamp=0,this.mouseScrollDelta=0}function _touchSwipe(e){if(this.active)if(e.touches.length>1)this.touchSwipeState=null;else switch(e.type){case"touchstart":this.touchSwipeState={startX:e.touches[0].pageX,startY:e.touches[0].pageY,endX:e.touches[0].pageX,endY:e.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null)return;this.touchSwipeState.endX=e.touches[0].pageX,this.touchSwipeState.endY=e.touches[0].pageY,e.preventDefault();break;case"touchend":if(this.touchSwipeState===null)return;var n=0,r=this.touchSwipeState.endX-this.touchSwipeState.startX,o=this.touchSwipeState.endY-this.touchSwipeState.startY,u=Math.abs(Math.atan2(o,r));Math.abs(r)>SWIPE_MIN_DISTANCE_THRESHOLD&&(u<=SWIPE_ANGLE_THRESHOLD||u>=Math.PI-SWIPE_ANGLE_THRESHOLD)?n=r:Math.abs(o)>SWIPE_MIN_DISTANCE_THRESHOLD&&Math.abs(u-Math.PI/2)<=SWIPE_ANGLE_THRESHOLD&&(n=o),n>0?this.pdfViewer.previousPage():n<0&&this.pdfViewer.nextPage()}}function _addWindowListeners(){this.showControlsBind=_assertClassBrand(_PDFPresentationMode_brand,this,_showControls).bind(this),this.mouseDownBind=_assertClassBrand(_PDFPresentationMode_brand,this,_mouseDown).bind(this),this.mouseWheelBind=_assertClassBrand(_PDFPresentationMode_brand,this,_mouseWheel).bind(this),this.resetMouseScrollStateBind=_assertClassBrand(_PDFPresentationMode_brand,this,_resetMouseScrollState).bind(this),this.contextMenuBind=_assertClassBrand(_PDFPresentationMode_brand,this,_contextMenu).bind(this),this.touchSwipeBind=_assertClassBrand(_PDFPresentationMode_brand,this,_touchSwipe).bind(this),window.addEventListener("mousemove",this.showControlsBind),window.addEventListener("mousedown",this.mouseDownBind),window.addEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.addEventListener("keydown",this.resetMouseScrollStateBind),window.addEventListener("contextmenu",this.contextMenuBind),window.addEventListener("touchstart",this.touchSwipeBind),window.addEventListener("touchmove",this.touchSwipeBind),window.addEventListener("touchend",this.touchSwipeBind)}function _removeWindowListeners(){window.removeEventListener("mousemove",this.showControlsBind),window.removeEventListener("mousedown",this.mouseDownBind),window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1}),window.removeEventListener("keydown",this.resetMouseScrollStateBind),window.removeEventListener("contextmenu",this.contextMenuBind),window.removeEventListener("touchstart",this.touchSwipeBind),window.removeEventListener("touchmove",this.touchSwipeBind),window.removeEventListener("touchend",this.touchSwipeBind),delete this.showControlsBind,delete this.mouseDownBind,delete this.mouseWheelBind,delete this.resetMouseScrollStateBind,delete this.contextMenuBind,delete this.touchSwipeBind}function _fullscreenChange(){var e=this;this.isHandlingFullScreen||(this.isHandlingFullScreen=!0,document.fullscreenElement?_assertClassBrand(_PDFPresentationMode_brand,this,_enter).call(this):_assertClassBrand(_PDFPresentationMode_brand,this,_exit).call(this),setTimeout(function(){e.isHandlingFullScreen=!1},0))}function _addFullscreenChangeListeners(){this.fullscreenChangeBind=_assertClassBrand(_PDFPresentationMode_brand,this,_fullscreenChange).bind(this),window.addEventListener("fullscreenchange",this.fullscreenChangeBind),window.addEventListener("webkitfullscreenchange",this.fullscreenChangeBind),window.addEventListener("mozfullscreenchange",this.fullscreenChangeBind)}function _removeFullscreenChangeListeners(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind),window.removeEventListener("webkitfullscreenchange",this.fullscreenChangeBind),window.removeEventListener("mozfullscreenchange",this.fullscreenChangeBind),delete this.fullscreenChangeBind}var annotationStore={selectedName:null,annotationsAll:null,notFirstRender:!1,creating:!1,fileData:null,$t:null,signatures:[],highlightLink:!0,highlightForm:!0,cropping:!1,ignoreColors:[],freetextDefault:{fontName:"Helvetica",fontStyle:"normal",fontWeight:"normal",fontSize:14,textAlignment:"left",color:"rgb(0, 0, 0)",borderWidth:0,borderColor:"rgb(0, 0, 0)",fillColor:""},polygon:{showPerimeter:!0,showArea:!0},rectangle:{showPerimeter:!0,showArea:!0},circle:{showRadius:!1,showPerimeter:!1,showArea:!0},arc:{showRadius:!1,showAngle:!0,showArcLength:!1}},Signatures=function(){return _createClass(function n(r){var o=r.pdfViewer,u=r.eventBus,s=r.type;_classCallCheck(this,n),this.pdfViewer=o,this.eventBus=u,this.type=s,this.path=[],this.inkPath=[],this.currentPath=[],this.areaBound=[NaN,NaN,NaN,NaN],this.inkPadding={x:10,y:10},this.strokeWidth=5,this.strokColor="#000",this.onMousedown=this.handleMouseDown.bind(this),this.onMousemove=this.handleMouseMove.bind(this),this.onMouseup=this.handleMouseUp.bind(this),this.onHandleGetSignData=this.getData.bind(this),this.onHandleInitCursorStyle=this.initCursorStyle.bind(this),this.init()},[{key:"init",value:function(){var n=document.getElementById("digitalTrackpadCanvas"),r=document.getElementById("electronicTrackpadCanvas");this.canvas=this.type?n:r,this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=578,this.canvas.height=270),this.ctx=this.canvas.getContext("2d"),this.canvas.style.cursor="crosshair",this.canvas.addEventListener("mousedown",this.onMousedown),this.canvas.addEventListener("touchstart",this.onMousedown),this.eventBus._on("getSignData",this.onHandleGetSignData),this.eventBus._on("initCursorStyle",this.onHandleInitCursorStyle)}},{key:"handleMouseDown",value:function(n){if(!n.changedTouches||n.changedTouches.length===1){var r,o,u=n.clientX||n.changedTouches[0].clientX,s=n.clientY||n.changedTouches[0].clientY;isMobile$1&&this.type?(r=s-this.canvas.getBoundingClientRect().top,o=this.canvas.height-(u-this.canvas.getBoundingClientRect().left)):(r=u-this.canvas.getBoundingClientRect().left,o=s-this.canvas.getBoundingClientRect().top),this.ctx.lineWidth=this.strokeWidth,this.ctx.strokeStyle=this.strokColor,this.ctx.lineJoin="round",this.ctx.lineCap="round",this.currentPath.length>0&&(this.inkPath.push(this.currentPath),this.currentPath=[]),this.ctx.beginPath(),this.ctx.moveTo(r,o),this.mousedown=!0,this.pressPoint={x:r,y:o},document.addEventListener("mousemove",this.onMousemove),document.addEventListener("mouseup",this.onMouseup),document.addEventListener("touchmove",this.onMousemove),document.addEventListener("touchend",this.onMouseup)}}},{key:"handleMouseMove",value:function(n){var r,o,u=n.clientX||n.changedTouches[0].clientX,s=n.clientY||n.changedTouches[0].clientY;if(isMobile$1&&this.type?(r=s-this.canvas.getBoundingClientRect().top,o=this.canvas.height-(u-this.canvas.getBoundingClientRect().left)):(r=u-this.canvas.getBoundingClientRect().left,o=s-this.canvas.getBoundingClientRect().top),!(r>this.canvas.width||o>this.canvas.height||r<0||o<0)){var w=!0;this.mousedown&&this.pressPoint&&r==this.pressPoint.x&&o==this.pressPoint.y&&(w=!1),w&&(this.ctx.lineTo(r,o),this.ctx.stroke(),this.path.push([r,o]),this.currentPath.push({x:r,y:o}))}}},{key:"handleMouseUp",value:function(){document.removeEventListener("mousemove",this.onMousemove),document.removeEventListener("mouseup",this.onMouseup),document.removeEventListener("touchmove",this.onMousemove),document.removeEventListener("touchend",this.onMouseup),this.mousedown=!1,this.pressPoint={x:-1,y:-1};var n=this.getRect();this.rect=n,this.currentPath.length>0&&(this.inkPath.push(this.currentPath),this.currentPath=[],this.eventBus.dispatch("signaturesImageChanged",{type:"addSignature",imageBase64:this.getImageBase64()}))}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.path=[],this.inkPath=[],this.currentPath=[],this.areaBound=[NaN,NaN,NaN,NaN],this.initCursorStyle(),this.eventBus.dispatch("signaturesImageChanged",{type:"clear",imageBase64:null})}},{key:"reset",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.path=[],this.inkPath=[],this.currentPath=[],this.areaBound=[NaN,NaN,NaN,NaN],this.onMousedown=null,this.onMousemove=null,this.onMouseup=null,this.onHandleGetSignData=null,this.onHandleInitCursorStyle=null,this.eventBus.dispatch("signaturesImageChanged",{type:"reset",imageBase64:null})}},{key:"getRect",value:function(){var n=[],r=[];this.path.forEach(function(g){n.push(g[0]),r.push(g[1])});var o=Math.min.apply(Math,r),u=Math.min.apply(Math,n),s=Math.max.apply(Math,r),w=Math.max.apply(Math,n);return{left:u,top:o,bottom:s,right:w,width:w-u,height:s-o}}},{key:"getImageBase64",value:function(){var n=null;if(this.path.length!==0){var r=this.getInkPathData();n=r.toDataURL("image/png"),r||(n=(r=this.paintFinalCanvas()).toDataURL("image/jpeg"))}return n}},{key:"toImage",value:function(n){var r=n.annotation,o=n.imageBase64,u=r.annotPtr,s=r.rect,w=r.pagePtr,g=null;if(this.path.length!==0){var v=this.getInkPathData(),y=v.toDataURL("image/png");v||(y=(v=this.paintFinalCanvas()).toDataURL("image/jpeg")),g=y}this.dataURL=g||o;var m=g?this.dataURLToArrayBuffer(g):null;if(u&&(m||o)&&!this.type)return this.eventBus.dispatch("updateSignatureAp",{type:this.type,annotPtr:u,pagePtr:w,rect:s,imageArray:m,imageBase64:o,annotation:r}),g}},{key:"getData",value:function(n){if(this.path.length!==0){this.layerData=n;var r={operate:"add-annot",type:"image",pageIndex:this.layerData.page+1,imageBase64:this.dataURL,date:new Date},o=this.formatPath();o.path;var u=o.rect;r.rect=u,this.eventBus.dispatch("createSignature",r)}}},{key:"calcInkPath",value:function(){if(this.inkPath.length>0){for(var n=[NaN,NaN,NaN,NaN],r=[],o=0;o<this.inkPath.length;o++)for(var u=0;u<this.inkPath[o].length;u++)isNaN(n[0])?(n[0]=this.inkPath[o][u].x,n[1]=this.inkPath[o][u].y,n[2]=this.inkPath[o][u].x,n[3]=this.inkPath[o][u].y):(n[0]>this.inkPath[o][u].x&&(n[0]=this.inkPath[o][u].x),n[1]>this.inkPath[o][u].y&&(n[1]=this.inkPath[o][u].y),n[2]<this.inkPath[o][u].x&&(n[2]=this.inkPath[o][u].x),n[3]<this.inkPath[o][u].y&&(n[3]=this.inkPath[o][u].y));if(!isNaN(n[0]))for(var s={x:this.inkPadding.x-n[0],y:this.inkPadding.y-n[1]},w=0;w<this.inkPath.length;w++){var g=[];r.push(g);for(var v=0;v<this.inkPath[w].length;v++)g.push({x:this.inkPath[w][v].x+s.x,y:this.inkPath[w][v].y+s.y})}return{areaBound:n,inkPaths:r}}}},{key:"getInkPathData",value:function(){var n=this.calcInkPath(),r=n.areaBound,o=n.inkPaths;if(!isNaN(r[0])){var u=document.createElement("canvas"),s=u.getContext("2d");u.width=r[2]-r[0]+2*this.inkPadding.x,u.height=r[3]-r[1]+2*this.inkPadding.y,s.strokeStyle=this.strokColor,s.lineWidth=this.strokeWidth;for(var w=0;w<o.length;w++)if(o[w].length==1&&(s.beginPath(),s.fillStyle=this.strokColor,s.ellipse(o[w][0].x,o[w][0].y,this.strokeWidth/2,this.strokeWidth/2,0,0,360,!1),s.fill(),s.closePath()),o[w].length>1){s.beginPath(),s.moveTo(o[w][0].x,o[w][0].y);for(var g=1;g<o[w].length;g++)s.lineTo(o[w][g].x,o[w][g].y);s.stroke(),s.closePath()}return u}return null}},{key:"formatPath",value:function(){for(var n="",r=this.path.length,o=[],u=[],s=0;s<r;s+=2){var w=this.handlePoint(this.path[s]);if(o.push(w.x),u.push(w.y),n+=w.x.toFixed(2)+","+w.y.toFixed(2),s+1<r){var g=this.handlePoint(this.path[s]);o.push(g.x),u.push(g.y),n+=";"+g.x.toFixed(2)+","+g.y.toFixed(2),s+2<r&&(n+=";")}}var v=Math.min.apply(Math,o),y=Math.min.apply(Math,u),m=Math.max.apply(Math,o),d=Math.max.apply(Math,u);return{path:n,rect:"".concat(v,",").concat(y,",").concat(m,",").concat(d)}}},{key:"handlePoint",value:function(n){var r=getInitialPoint({x:n[0]+this.layerData.clickX-this.rect.width/2,y:n[1]+this.layerData.clickY-this.rect.height/2},this.layerData.viewport.scale);return{x:r.x,y:r.y}}},{key:"initCursorStyle",value:function(){this.img&&this.img.remove()}},{key:"paintFinalCanvas",value:function(){var n=document.createElement("canvas"),r=n.getContext("2d");return n.width=this.rect.width,n.height=this.rect.height,r.fillStyle="white",r.fillRect(0,0,n.width,n.height),r.lineWidth=3,r.strokeStyle="black",r.drawImage(this.canvas,this.rect.left,this.rect.top,n.width,n.height,0,0,n.width,n.height),n}},{key:"update",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function n(r){var o,u,s,w;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(this.type&&this.toImage(r),o=r.width,u=r.color,o&&(this.strokeWidth=o),u&&(this.strokColor=u),this.inkPath){for(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.lineWidth=this.strokeWidth,this.ctx.strokeStyle=this.strokColor,s=0;s<this.inkPath.length;s++)if(this.inkPath[s].length==1&&(this.ctx.beginPath(),this.ctx.fillStyle=this.strokColor,this.ctx.ellipse(this.inkPath[s][0].x,this.inkPath[s][0].y,this.strokeWidth/2,this.strokeWidth/2,0,0,360,!1),this.ctx.fill(),this.ctx.closePath()),this.inkPath[s].length>1){for(this.ctx.beginPath(),this.ctx.moveTo(this.inkPath[s][0].x,this.inkPath[s][0].y),w=1;w<this.inkPath[s].length;w++)this.ctx.lineTo(this.inkPath[s][w].x,this.inkPath[s][w].y);this.ctx.stroke(),this.ctx.closePath()}}case 5:case"end":return g.stop()}},n,this)})),function(n){return e.apply(this,arguments)})},{key:"dataURLToArrayBuffer",value:function(n){var r=atob(n.split(",")[1]);n.split(";")[0].split(":")[1];for(var o=new ArrayBuffer(r.length),u=new Uint8Array(o),s=0;s<r.length;s++)u[s]=r.charCodeAt(s);return u}},{key:"updateSignature",value:function(n){}}]);var e}(),MessageHandler=function(){return _createClass(function e(n,r,o){var u=this;_classCallCheck(this,e),this.sourceName=n,this.targetName=r,this.comObj=o,this.callbackId=1,this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(s){var w=s.data;if(w.targetName===u.sourceName)if(w.callback){var g=w.callbackId,v=u.callbackCapabilities[g];if(!v)throw new Error("Cannot resolve callback ".concat(g));if(delete u.callbackCapabilities[g],w.callback!=="resolve")throw console.log({data:{action:w.data.action,data:w.data.data},message:w.reason&&w.reason.message}),new Error("Unexpected callback case");v.resolve(w.data)}else{var y=u.actionHandler[w.action];if(!y)throw new Error("Unknown action from worker: ".concat(w.action));if(w.callbackId){var m=u.sourceName,d=w.sourceName;new Promise(function(f){f(y(w.data))}).then(function(f){o.postMessage({sourceName:m,targetName:d,callback:"resolve",callbackId:w.callbackId,data:f})},function(f){o.postMessage({data:w,sourceName:m,targetName:d,callback:"reject",callbackId:w.callbackId,reason:f})})}else y(w.data)}},o.addEventListener("message",this._onComObjOnMessage)},[{key:"on",value:function(e,n){var r=this.actionHandler;if(r[e])throw new Error('There is already an actionName called "'.concat(e,'"'));r[e]=n}},{key:"send",value:function(e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n})}},{key:"sendWithPromise",value:function(e,n){var r=this.callbackId++,o=new PromiseExt;this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:n})}catch(u){o.reject(u)}return o.promise}},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}])}(),jszip_minExports={},jszip_min={get exports(){return jszip_minExports},set exports(e){jszip_minExports=e}};jszip_min.exports=function e(n,r,o){function u(g,v){if(!r[g]){if(!n[g]){var y=typeof commonjsRequire=="function"&&commonjsRequire;if(!v&&y)return y(g,!0);if(s)return s(g,!0);var m=new Error("Cannot find module '"+g+"'");throw m.code="MODULE_NOT_FOUND",m}var d=r[g]={exports:{}};n[g][0].call(d.exports,function(f){return u(n[g][1][f]||f)},d,d.exports,e,n,r,o)}return r[g].exports}for(var s=typeof commonjsRequire=="function"&&commonjsRequire,w=0;w<o.length;w++)u(o[w]);return u}({1:[function(e,n,r){var o=e("./utils"),u=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(w){for(var g,v,y,m,d,f,x,k=[],P=0,S=w.length,E=S,M=o.getTypeOf(w)!=="string";P<w.length;)E=S-P,y=M?(g=w[P++],v=P<S?w[P++]:0,P<S?w[P++]:0):(g=w.charCodeAt(P++),v=P<S?w.charCodeAt(P++):0,P<S?w.charCodeAt(P++):0),m=g>>2,d=(3&g)<<4|v>>4,f=1<E?(15&v)<<2|y>>6:64,x=2<E?63&y:64,k.push(s.charAt(m)+s.charAt(d)+s.charAt(f)+s.charAt(x));return k.join("")},r.decode=function(w){var g,v,y,m,d,f,x=0,k=0,P="data:";if(w.substr(0,P.length)===P)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(w=w.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(w.charAt(w.length-1)===s.charAt(64)&&E--,w.charAt(w.length-2)===s.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=u.uint8array?new Uint8Array(0|E):new Array(0|E);x<w.length;)g=s.indexOf(w.charAt(x++))<<2|(m=s.indexOf(w.charAt(x++)))>>4,v=(15&m)<<4|(d=s.indexOf(w.charAt(x++)))>>2,y=(3&d)<<6|(f=s.indexOf(w.charAt(x++))),S[k++]=g,d!==64&&(S[k++]=v),f!==64&&(S[k++]=y);return S}},{"./support":30,"./utils":32}],2:[function(e,n,r){var o=e("./external"),u=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),w=e("./stream/DataLengthProbe");function g(v,y,m,d,f){this.compressedSize=v,this.uncompressedSize=y,this.crc32=m,this.compression=d,this.compressedContent=f}g.prototype={getContentWorker:function(){var v=new u(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new w("data_length")),y=this;return v.on("end",function(){if(this.streamInfo.data_length!==y.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new u(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},g.createWorkerFrom=function(v,y,m){return v.pipe(new s).pipe(new w("uncompressedSize")).pipe(y.compressWorker(m)).pipe(new w("compressedSize")).withStreamInfo("compression",y)},n.exports=g},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,r){var o=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,r){var o=e("./utils"),u=function(){for(var s,w=[],g=0;g<256;g++){s=g;for(var v=0;v<8;v++)s=1&s?3988292384^s>>>1:s>>>1;w[g]=s}return w}();n.exports=function(s,w){return s!==void 0&&s.length?o.getTypeOf(s)!=="string"?function(g,v,y,m){var d=u,f=m+y;g^=-1;for(var x=m;x<f;x++)g=g>>>8^d[255&(g^v[x])];return~g}(0|w,s,s.length,0):function(g,v,y,m){var d=u,f=m+y;g^=-1;for(var x=m;x<f;x++)g=g>>>8^d[255&(g^v.charCodeAt(x))];return~g}(0|w,s,s.length,0):0}},{"./utils":32}],5:[function(e,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,n,r){var o=null;o=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:o}},{lie:37}],7:[function(e,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=e("pako"),s=e("./utils"),w=e("./stream/GenericWorker"),g=o?"uint8array":"array";function v(y,m){w.call(this,"FlateWorker/"+y),this._pako=null,this._pakoAction=y,this._pakoOptions=m,this.meta={}}r.magic="\b\0",s.inherits(v,w),v.prototype.processChunk=function(y){this.meta=y.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(g,y.data),!1)},v.prototype.flush=function(){w.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){w.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var y=this;this._pako.onData=function(m){y.push({data:m,meta:y.meta})}},r.compressWorker=function(y){return new v("Deflate",y)},r.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,r){function o(d,f){var x,k="";for(x=0;x<f;x++)k+=String.fromCharCode(255&d),d>>>=8;return k}function u(d,f,x,k,P,S){var E,M,T=d.file,D=d.compression,I=S!==g.utf8encode,N=s.transformTo("string",S(T.name)),O=s.transformTo("string",g.utf8encode(T.name)),F=T.comment,U=s.transformTo("string",S(F)),Y=s.transformTo("string",g.utf8encode(F)),Q=O.length!==T.name.length,q=Y.length!==F.length,ne="",J="",re="",X=T.dir,j=T.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};f&&!x||(Z.crc32=d.crc32,Z.compressedSize=d.compressedSize,Z.uncompressedSize=d.uncompressedSize);var W=0;f&&(W|=8),I||!Q&&!q||(W|=2048);var te=0,le=0;X&&(te|=16),P==="UNIX"?(le=798,te|=function(Ee,Ae){var ve=Ee;return Ee||(ve=Ae?16893:33204),(65535&ve)<<16}(T.unixPermissions,X)):(le=20,te|=function(Ee){return 63&(Ee||0)}(T.dosPermissions)),E=j.getUTCHours(),E<<=6,E|=j.getUTCMinutes(),E<<=5,E|=j.getUTCSeconds()/2,M=j.getUTCFullYear()-1980,M<<=4,M|=j.getUTCMonth()+1,M<<=5,M|=j.getUTCDate(),Q&&(J=o(1,1)+o(v(N),4)+O,ne+="up"+o(J.length,2)+J),q&&(re=o(1,1)+o(v(U),4)+Y,ne+="uc"+o(re.length,2)+re);var oe="";return oe+=`
\0`,oe+=o(W,2),oe+=D.magic,oe+=o(E,2),oe+=o(M,2),oe+=o(Z.crc32,4),oe+=o(Z.compressedSize,4),oe+=o(Z.uncompressedSize,4),oe+=o(N.length,2),oe+=o(ne.length,2),{fileRecord:y.LOCAL_FILE_HEADER+oe+N+ne,dirRecord:y.CENTRAL_FILE_HEADER+o(le,2)+oe+o(U.length,2)+"\0\0\0\0"+o(te,4)+o(k,4)+N+ne+U}}var s=e("../utils"),w=e("../stream/GenericWorker"),g=e("../utf8"),v=e("../crc32"),y=e("../signature");function m(d,f,x,k){w.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=f,this.zipPlatform=x,this.encodeFileName=k,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(m,w),m.prototype.push=function(d){var f=d.meta.percent||0,x=this.entriesCount,k=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,w.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:x?(f+100*(x-k-1))/x:100}}))},m.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var f=this.streamFiles&&!d.file.dir;if(f){var x=u(d,f,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(d){this.accumulate=!1;var f=this.streamFiles&&!d.file.dir,x=u(d,f,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),f)this.push({data:function(k){return y.DATA_DESCRIPTOR+o(k.crc32,4)+o(k.compressedSize,4)+o(k.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var d=this.bytesWritten,f=0;f<this.dirRecords.length;f++)this.push({data:this.dirRecords[f],meta:{percent:100}});var x=this.bytesWritten-d,k=function(P,S,E,M,T){var D=s.transformTo("string",T(M));return y.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(P,2)+o(P,2)+o(S,4)+o(E,4)+o(D.length,2)+D}(this.dirRecords.length,x,d,this.zipComment,this.encodeFileName);this.push({data:k,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(d){this._sources.push(d);var f=this;return d.on("data",function(x){f.processChunk(x)}),d.on("end",function(){f.closedSource(f.previous.streamInfo),f._sources.length?f.prepareNextSource():f.end()}),d.on("error",function(x){f.error(x)}),this},m.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(d){var f=this._sources;if(!w.prototype.error.call(this,d))return!1;for(var x=0;x<f.length;x++)try{f[x].error(d)}catch{}return!0},m.prototype.lock=function(){w.prototype.lock.call(this);for(var d=this._sources,f=0;f<d.length;f++)d[f].lock()},n.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,r){var o=e("../compressions"),u=e("./ZipFileWorker");r.generateWorker=function(s,w,g){var v=new u(w.streamFiles,g,w.platform,w.encodeFileName),y=0;try{s.forEach(function(m,d){y++;var f=function(S,E){var M=S||E,T=o[M];if(!T)throw new Error(M+" is not a valid compression method !");return T}(d.options.compression,w.compression),x=d.options.compressionOptions||w.compressionOptions||{},k=d.dir,P=d.date;d._compressWorker(f,x).withStreamInfo("file",{name:m,dir:k,date:P,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(v)}),v.entriesCount=y}catch(m){v.error(m)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,r){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new o;for(var s in this)typeof this[s]!="function"&&(u[s]=this[s]);return u}}(o.prototype=e("./object")).loadAsync=e("./load"),o.support=e("./support"),o.defaults=e("./defaults"),o.version="3.10.1",o.loadAsync=function(u,s){return new o().loadAsync(u,s)},o.external=e("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,r){var o=e("./utils"),u=e("./external"),s=e("./utf8"),w=e("./zipEntries"),g=e("./stream/Crc32Probe"),v=e("./nodejsUtils");function y(m){return new u.Promise(function(d,f){var x=m.decompressed.getContentWorker().pipe(new g);x.on("error",function(k){f(k)}).on("end",function(){x.streamInfo.crc32!==m.decompressed.crc32?f(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(m,d){var f=this;return d=o.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),v.isNode&&v.isStream(m)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",m,!0,d.optimizedBinaryString,d.base64).then(function(x){var k=new w(d);return k.load(x),k}).then(function(x){var k=[u.Promise.resolve(x)],P=x.files;if(d.checkCRC32)for(var S=0;S<P.length;S++)k.push(y(P[S]));return u.Promise.all(k)}).then(function(x){for(var k=x.shift(),P=k.files,S=0;S<P.length;S++){var E=P[S],M=E.fileNameStr,T=o.resolve(E.fileNameStr);f.file(T,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:d.createFolders}),E.dir||(f.file(T).unsafeOriginalName=M)}return k.zipComment.length&&(f.comment=k.zipComment),f})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,r){var o=e("../utils"),u=e("../stream/GenericWorker");function s(w,g){u.call(this,"Nodejs stream input adapter for "+w),this._upstreamEnded=!1,this._bindStream(g)}o.inherits(s,u),s.prototype._bindStream=function(w){var g=this;(this._stream=w).pause(),w.on("data",function(v){g.push({data:v,meta:{percent:0}})}).on("error",function(v){g.isPaused?this.generatedError=v:g.error(v)}).on("end",function(){g.isPaused?g._upstreamEnded=!0:g.end()})},s.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,r){var o=e("readable-stream").Readable;function u(s,w,g){o.call(this,w),this._helper=s;var v=this;s.on("data",function(y,m){v.push(y)||v._helper.pause(),g&&g(m)}).on("error",function(y){v.emit("error",y)}).on("end",function(){v.push(null)})}e("../utils").inherits(u,o),u.prototype._read=function(){this._helper.resume()},n.exports=u},{"../utils":32,"readable-stream":16}],14:[function(e,n,r){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,u);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,u)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var u=new Buffer(o);return u.fill(0),u},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(e,n,r){function o(T,D,I){var N,O=s.getTypeOf(D),F=s.extend(I||{},v);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(T=P(T)),F.createFolders&&(N=k(T))&&S.call(this,N,!0);var U=O==="string"&&F.binary===!1&&F.base64===!1;I&&I.binary!==void 0||(F.binary=!U),(D instanceof y&&D.uncompressedSize===0||F.dir||!D||D.length===0)&&(F.base64=!1,F.binary=!0,D="",F.compression="STORE",O="string");var Y=null;Y=D instanceof y||D instanceof w?D:f.isNode&&f.isStream(D)?new x(T,D):s.prepareContent(T,D,F.binary,F.optimizedBinaryString,F.base64);var Q=new m(T,Y,F);this.files[T]=Q}var u=e("./utf8"),s=e("./utils"),w=e("./stream/GenericWorker"),g=e("./stream/StreamHelper"),v=e("./defaults"),y=e("./compressedObject"),m=e("./zipObject"),d=e("./generate"),f=e("./nodejsUtils"),x=e("./nodejs/NodejsStreamInputAdapter"),k=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var D=T.lastIndexOf("/");return 0<D?T.substring(0,D):""},P=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},S=function(T,D){return D=D!==void 0?D:v.createFolders,T=P(T),this.files[T]||o.call(this,T,null,{dir:!0,createFolders:D}),this.files[T]};function E(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var M={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var D,I,N;for(D in this.files)N=this.files[D],(I=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&T(I,N)},filter:function(T){var D=[];return this.forEach(function(I,N){T(I,N)&&D.push(N)}),D},file:function(T,D,I){if(arguments.length!==1)return T=this.root+T,o.call(this,T,D,I),this;if(E(T)){var N=T;return this.filter(function(F,U){return!U.dir&&N.test(F)})}var O=this.files[this.root+T];return O&&!O.dir?O:null},folder:function(T){if(!T)return this;if(E(T))return this.filter(function(O,F){return F.dir&&T.test(O)});var D=this.root+T,I=S.call(this,D),N=this.clone();return N.root=I.name,N},remove:function(T){T=this.root+T;var D=this.files[T];if(D||(T.slice(-1)!=="/"&&(T+="/"),D=this.files[T]),D&&!D.dir)delete this.files[T];else for(var I=this.filter(function(O,F){return F.name.slice(0,T.length)===T}),N=0;N<I.length;N++)delete this.files[I[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var D,I={};try{if((I=s.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");s.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var N=I.comment||this.comment||"";D=d.generateWorker(this,I,N)}catch(O){(D=new w("error")).error(O)}return new g(D,I.type||"string",I.mimeType)},generateAsync:function(T,D){return this.generateInternalStream(T).accumulate(D)},generateNodeStream:function(T,D){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(D)}};n.exports=M},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,r){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,r){var o=e("./DataReader");function u(s){o.call(this,s);for(var w=0;w<this.data.length;w++)s[w]=255&s[w]}e("../utils").inherits(u,o),u.prototype.byteAt=function(s){return this.data[this.zero+s]},u.prototype.lastIndexOfSignature=function(s){for(var w=s.charCodeAt(0),g=s.charCodeAt(1),v=s.charCodeAt(2),y=s.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===w&&this.data[m+1]===g&&this.data[m+2]===v&&this.data[m+3]===y)return m-this.zero;return-1},u.prototype.readAndCheckSignature=function(s){var w=s.charCodeAt(0),g=s.charCodeAt(1),v=s.charCodeAt(2),y=s.charCodeAt(3),m=this.readData(4);return w===m[0]&&g===m[1]&&v===m[2]&&y===m[3]},u.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var w=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,w},n.exports=u},{"../utils":32,"./DataReader":18}],18:[function(e,n,r){var o=e("../utils");function u(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var w,g=0;for(this.checkOffset(s),w=this.index+s-1;w>=this.index;w--)g=(g<<8)+this.byteAt(w);return this.index+=s,g},readString:function(s){return o.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},n.exports=u},{"../utils":32}],19:[function(e,n,r){var o=e("./Uint8ArrayReader");function u(s){o.call(this,s)}e("../utils").inherits(u,o),u.prototype.readData=function(s){this.checkOffset(s);var w=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,w},n.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,r){var o=e("./DataReader");function u(s){o.call(this,s)}e("../utils").inherits(u,o),u.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},u.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},u.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},u.prototype.readData=function(s){this.checkOffset(s);var w=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,w},n.exports=u},{"../utils":32,"./DataReader":18}],21:[function(e,n,r){var o=e("./ArrayReader");function u(s){o.call(this,s)}e("../utils").inherits(u,o),u.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var w=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,w},n.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,r){var o=e("../utils"),u=e("../support"),s=e("./ArrayReader"),w=e("./StringReader"),g=e("./NodeBufferReader"),v=e("./Uint8ArrayReader");n.exports=function(y){var m=o.getTypeOf(y);return o.checkSupport(m),m!=="string"||u.uint8array?m==="nodebuffer"?new g(y):u.uint8array?new v(o.transformTo("uint8array",y)):new s(o.transformTo("array",y)):new w(y)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,r){var o=e("./GenericWorker"),u=e("../utils");function s(w){o.call(this,"ConvertWorker to "+w),this.destType=w}u.inherits(s,o),s.prototype.processChunk=function(w){this.push({data:u.transformTo(this.destType,w.data),meta:w.meta})},n.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,r){var o=e("./GenericWorker"),u=e("../crc32");function s(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,o),s.prototype.processChunk=function(w){this.streamInfo.crc32=u(w.data,this.streamInfo.crc32||0),this.push(w)},n.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,r){var o=e("../utils"),u=e("./GenericWorker");function s(w){u.call(this,"DataLengthProbe for "+w),this.propName=w,this.withStreamInfo(w,0)}o.inherits(s,u),s.prototype.processChunk=function(w){if(w){var g=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=g+w.data.length}u.prototype.processChunk.call(this,w)},n.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,r){var o=e("../utils"),u=e("./GenericWorker");function s(w){u.call(this,"DataWorker");var g=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,w.then(function(v){g.dataIsReady=!0,g.data=v,g.max=v&&v.length||0,g.type=o.getTypeOf(v),g.isPaused||g._tickAndRepeat()},function(v){g.error(v)})}o.inherits(s,u),s.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var w=null,g=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":w=this.data.substring(this.index,g);break;case"uint8array":w=this.data.subarray(this.index,g);break;case"array":case"nodebuffer":w=this.data.slice(this.index,g)}return this.index=g,this.push({data:w,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,r){function o(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,s){return this._listeners[u].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,s){if(this._listeners[u])for(var w=0;w<this._listeners[u].length;w++)this._listeners[u][w].call(this,s)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var s=this;return u.on("data",function(w){s.processChunk(w)}),u.on("end",function(){s.end()}),u.on("error",function(w){s.error(w)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,s){return this.extraStreamInfo[u]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},n.exports=o},{}],29:[function(e,n,r){var o=e("../utils"),u=e("./ConvertWorker"),s=e("./GenericWorker"),w=e("../base64"),g=e("../support"),v=e("../external"),y=null;if(g.nodestream)try{y=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(f,x){return new v.Promise(function(k,P){var S=[],E=f._internalType,M=f._outputType,T=f._mimeType;f.on("data",function(D,I){S.push(D),x&&x(I)}).on("error",function(D){S=[],P(D)}).on("end",function(){try{var D=function(I,N,O){switch(I){case"blob":return o.newBlob(o.transformTo("arraybuffer",N),O);case"base64":return w.encode(N);default:return o.transformTo(I,N)}}(M,function(I,N){var O,F=0,U=null,Y=0;for(O=0;O<N.length;O++)Y+=N[O].length;switch(I){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(U=new Uint8Array(Y),O=0;O<N.length;O++)U.set(N[O],F),F+=N[O].length;return U;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+I+"'")}}(E,S),T);k(D)}catch(I){P(I)}S=[]}).resume()})}function d(f,x,k){var P=x;switch(x){case"blob":case"arraybuffer":P="uint8array";break;case"base64":P="string"}try{this._internalType=P,this._outputType=x,this._mimeType=k,o.checkSupport(P),this._worker=f.pipe(new u(P)),f.lock()}catch(S){this._worker=new s("error"),this._worker.error(S)}}d.prototype={accumulate:function(f){return m(this,f)},on:function(f,x){var k=this;return f==="data"?this._worker.on(f,function(P){x.call(k,P.data,P.meta)}):this._worker.on(f,function(){o.delay(x,arguments,k)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new y(this,{objectMode:this._outputType!=="nodebuffer"},f)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var o=new ArrayBuffer(0);try{r.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(o),r.blob=u.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,r){for(var o=e("./utils"),u=e("./support"),s=e("./nodejsUtils"),w=e("./stream/GenericWorker"),g=new Array(256),v=0;v<256;v++)g[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;function y(){w.call(this,"utf-8 decode"),this.leftOver=null}function m(){w.call(this,"utf-8 encode")}g[254]=g[254]=1,r.utf8encode=function(d){return u.nodebuffer?s.newBufferFrom(d,"utf-8"):function(f){var x,k,P,S,E,M=f.length,T=0;for(S=0;S<M;S++)(64512&(k=f.charCodeAt(S)))==55296&&S+1<M&&(64512&(P=f.charCodeAt(S+1)))==56320&&(k=65536+(k-55296<<10)+(P-56320),S++),T+=k<128?1:k<2048?2:k<65536?3:4;for(x=u.uint8array?new Uint8Array(T):new Array(T),S=E=0;E<T;S++)(64512&(k=f.charCodeAt(S)))==55296&&S+1<M&&(64512&(P=f.charCodeAt(S+1)))==56320&&(k=65536+(k-55296<<10)+(P-56320),S++),k<128?x[E++]=k:(k<2048?x[E++]=192|k>>>6:(k<65536?x[E++]=224|k>>>12:(x[E++]=240|k>>>18,x[E++]=128|k>>>12&63),x[E++]=128|k>>>6&63),x[E++]=128|63&k);return x}(d)},r.utf8decode=function(d){return u.nodebuffer?o.transformTo("nodebuffer",d).toString("utf-8"):function(f){var x,k,P,S,E=f.length,M=new Array(2*E);for(x=k=0;x<E;)if((P=f[x++])<128)M[k++]=P;else if(4<(S=g[P]))M[k++]=65533,x+=S-1;else{for(P&=S===2?31:S===3?15:7;1<S&&x<E;)P=P<<6|63&f[x++],S--;1<S?M[k++]=65533:P<65536?M[k++]=P:(P-=65536,M[k++]=55296|P>>10&1023,M[k++]=56320|1023&P)}return M.length!==k&&(M.subarray?M=M.subarray(0,k):M.length=k),o.applyFromCharCode(M)}(d=o.transformTo(u.uint8array?"uint8array":"array",d))},o.inherits(y,w),y.prototype.processChunk=function(d){var f=o.transformTo(u.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var x=f;(f=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),f.set(x,this.leftOver.length)}else f=this.leftOver.concat(f);this.leftOver=null}var k=function(S,E){var M;for((E=E||S.length)>S.length&&(E=S.length),M=E-1;0<=M&&(192&S[M])==128;)M--;return M<0||M===0?E:M+g[S[M]]>E?M:E}(f),P=f;k!==f.length&&(u.uint8array?(P=f.subarray(0,k),this.leftOver=f.subarray(k,f.length)):(P=f.slice(0,k),this.leftOver=f.slice(k,f.length))),this.push({data:r.utf8decode(P),meta:d.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=y,o.inherits(m,w),m.prototype.processChunk=function(d){this.push({data:r.utf8encode(d.data),meta:d.meta})},r.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,r){var o=e("./support"),u=e("./base64"),s=e("./nodejsUtils"),w=e("./external");function g(x){return x}function v(x,k){for(var P=0;P<x.length;++P)k[P]=255&x.charCodeAt(P);return k}e("setimmediate"),r.newBlob=function(x,k){r.checkSupport("blob");try{return new Blob([x],{type:k})}catch{try{var P=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return P.append(x),P.getBlob(k)}catch{throw new Error("Bug : can't construct the Blob.")}}};var y={stringifyByChunk:function(x,k,P){var S=[],E=0,M=x.length;if(M<=P)return String.fromCharCode.apply(null,x);for(;E<M;)k==="array"||k==="nodebuffer"?S.push(String.fromCharCode.apply(null,x.slice(E,Math.min(E+P,M)))):S.push(String.fromCharCode.apply(null,x.subarray(E,Math.min(E+P,M)))),E+=P;return S.join("")},stringifyByChar:function(x){for(var k="",P=0;P<x.length;P++)k+=String.fromCharCode(x[P]);return k},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function m(x){var k=65536,P=r.getTypeOf(x),S=!0;if(P==="uint8array"?S=y.applyCanBeUsed.uint8array:P==="nodebuffer"&&(S=y.applyCanBeUsed.nodebuffer),S)for(;1<k;)try{return y.stringifyByChunk(x,P,k)}catch{k=Math.floor(k/2)}return y.stringifyByChar(x)}function d(x,k){for(var P=0;P<x.length;P++)k[P]=x[P];return k}r.applyFromCharCode=m;var f={};f.string={string:g,array:function(x){return v(x,new Array(x.length))},arraybuffer:function(x){return f.string.uint8array(x).buffer},uint8array:function(x){return v(x,new Uint8Array(x.length))},nodebuffer:function(x){return v(x,s.allocBuffer(x.length))}},f.array={string:m,array:g,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return s.newBufferFrom(x)}},f.arraybuffer={string:function(x){return m(new Uint8Array(x))},array:function(x){return d(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:g,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return s.newBufferFrom(new Uint8Array(x))}},f.uint8array={string:m,array:function(x){return d(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:g,nodebuffer:function(x){return s.newBufferFrom(x)}},f.nodebuffer={string:m,array:function(x){return d(x,new Array(x.length))},arraybuffer:function(x){return f.nodebuffer.uint8array(x).buffer},uint8array:function(x){return d(x,new Uint8Array(x.length))},nodebuffer:g},r.transformTo=function(x,k){if(k=k||"",!x)return k;r.checkSupport(x);var P=r.getTypeOf(k);return f[P][x](k)},r.resolve=function(x){for(var k=x.split("/"),P=[],S=0;S<k.length;S++){var E=k[S];E==="."||E===""&&S!==0&&S!==k.length-1||(E===".."?P.pop():P.push(E))}return P.join("/")},r.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":o.nodebuffer&&s.isBuffer(x)?"nodebuffer":o.uint8array&&x instanceof Uint8Array?"uint8array":o.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(x){if(!o[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(x){var k,P,S="";for(P=0;P<(x||"").length;P++)S+="\\x"+((k=x.charCodeAt(P))<16?"0":"")+k.toString(16).toUpperCase();return S},r.delay=function(x,k,P){setImmediate(function(){x.apply(P||null,k||[])})},r.inherits=function(x,k){function P(){}P.prototype=k.prototype,x.prototype=new P},r.extend=function(){var x,k,P={};for(x=0;x<arguments.length;x++)for(k in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],k)&&P[k]===void 0&&(P[k]=arguments[x][k]);return P},r.prepareContent=function(x,k,P,S,E){return w.Promise.resolve(k).then(function(M){return o.blob&&(M instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(M))!==-1)&&typeof FileReader<"u"?new w.Promise(function(T,D){var I=new FileReader;I.onload=function(N){T(N.target.result)},I.onerror=function(N){D(N.target.error)},I.readAsArrayBuffer(M)}):M}).then(function(M){var T=r.getTypeOf(M);return T?(T==="arraybuffer"?M=r.transformTo("uint8array",M):T==="string"&&(E?M=u.decode(M):P&&S!==!0&&(M=function(D){return v(D,o.uint8array?new Uint8Array(D.length):new Array(D.length))}(M))),M):w.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,r){var o=e("./reader/readerFor"),u=e("./utils"),s=e("./signature"),w=e("./zipEntry"),g=e("./support");function v(y){this.files=[],this.loadOptions=y}v.prototype={checkSignature:function(y){if(!this.reader.readAndCheckSignature(y)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(m)+", expected "+u.pretty(y)+")")}},isSignature:function(y,m){var d=this.reader.index;this.reader.setIndex(y);var f=this.reader.readString(4)===m;return this.reader.setIndex(d),f},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var y=this.reader.readData(this.zipCommentLength),m=g.uint8array?"uint8array":"array",d=u.transformTo(m,y);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var y,m,d,f=this.zip64EndOfCentralSize-44;0<f;)y=this.reader.readInt(2),m=this.reader.readInt(4),d=this.reader.readData(m),this.zip64ExtensibleData[y]={id:y,length:m,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var y,m;for(y=0;y<this.files.length;y++)m=this.files[y],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var y;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(y=new w({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(y);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var y=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(y<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(y);var m=y;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(y=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(y),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var f=m-d;if(0<f)this.isSignature(m,s.CENTRAL_FILE_HEADER)||(this.reader.zero=f);else if(f<0)throw new Error("Corrupted zip: missing "+Math.abs(f)+" bytes.")},prepareReader:function(y){this.reader=o(y)},load:function(y){this.prepareReader(y),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,r){var o=e("./reader/readerFor"),u=e("./utils"),s=e("./compressedObject"),w=e("./crc32"),g=e("./utf8"),v=e("./compressions"),y=e("./support");function m(d,f){this.options=d,this.loadOptions=f}m.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(d){var f,x;if(d.skip(22),this.fileNameLength=d.readInt(2),x=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((f=function(k){for(var P in v)if(Object.prototype.hasOwnProperty.call(v,P)&&v[P].magic===k)return v[P];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,f,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var f=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(f),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=o(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var f,x,k,P=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<P;)f=d.readInt(2),x=d.readInt(2),k=d.readData(x),this.extraFields[f]={id:f,length:x,value:k};d.setIndex(P)},handleUTF8:function(){var d=y.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=g.utf8decode(this.fileName),this.fileCommentStr=g.utf8decode(this.fileComment);else{var f=this.findExtraFieldUnicodePath();if(f!==null)this.fileNameStr=f;else{var x=u.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var k=this.findExtraFieldUnicodeComment();if(k!==null)this.fileCommentStr=k;else{var P=u.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(P)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var f=o(d.value);return f.readInt(1)!==1||w(this.fileName)!==f.readInt(4)?null:g.utf8decode(f.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var f=o(d.value);return f.readInt(1)!==1||w(this.fileComment)!==f.readInt(4)?null:g.utf8decode(f.readData(d.length-5))}return null}},n.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,r){function o(f,x,k){this.name=f,this.dir=k.dir,this.date=k.date,this.comment=k.comment,this.unixPermissions=k.unixPermissions,this.dosPermissions=k.dosPermissions,this._data=x,this._dataBinary=k.binary,this.options={compression:k.compression,compressionOptions:k.compressionOptions}}var u=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),w=e("./utf8"),g=e("./compressedObject"),v=e("./stream/GenericWorker");o.prototype={internalStream:function(f){var x=null,k="string";try{if(!f)throw new Error("No output type specified.");var P=(k=f.toLowerCase())==="string"||k==="text";k!=="binarystring"&&k!=="text"||(k="string"),x=this._decompressWorker();var S=!this._dataBinary;S&&!P&&(x=x.pipe(new w.Utf8EncodeWorker)),!S&&P&&(x=x.pipe(new w.Utf8DecodeWorker))}catch(E){(x=new v("error")).error(E)}return new u(x,k,"")},async:function(f,x){return this.internalStream(f).accumulate(x)},nodeStream:function(f,x){return this.internalStream(f||"nodebuffer").toNodejsStream(x)},_compressWorker:function(f,x){if(this._data instanceof g&&this._data.compression.magic===f.magic)return this._data.getCompressedWorker();var k=this._decompressWorker();return this._dataBinary||(k=k.pipe(new w.Utf8EncodeWorker)),g.createWorkerFrom(k,f,x)},_decompressWorker:function(){return this._data instanceof g?this._data.getContentWorker():this._data instanceof v?this._data:new s(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<y.length;d++)o.prototype[y[d]]=m;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,r){(function(o){var u,s,w=o.MutationObserver||o.WebKitMutationObserver;if(w){var g=0,v=new w(f),y=o.document.createTextNode("");v.observe(y,{characterData:!0}),u=function(){y.data=g=++g%2}}else if(o.setImmediate||o.MessageChannel===void 0)u="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var x=o.document.createElement("script");x.onreadystatechange=function(){f(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},o.document.documentElement.appendChild(x)}:function(){setTimeout(f,0)};else{var m=new o.MessageChannel;m.port1.onmessage=f,u=function(){m.port2.postMessage(0)}}var d=[];function f(){var x,k;s=!0;for(var P=d.length;P;){for(k=d,d=[],x=-1;++x<P;)k[x]();P=d.length}s=!1}n.exports=function(x){d.push(x)!==1||s||u()}}).call(this,commonjsGlobal$1!==void 0?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,r){var o=e("immediate");function u(){}var s={},w=["REJECTED"],g=["FULFILLED"],v=["PENDING"];function y(P){if(typeof P!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,P!==u&&x(this,P)}function m(P,S,E){this.promise=P,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function d(P,S,E){o(function(){var M;try{M=S(E)}catch(T){return s.reject(P,T)}M===P?s.reject(P,new TypeError("Cannot resolve promise with itself")):s.resolve(P,M)})}function f(P){var S=P&&P.then;if(P&&(_typeof$1(P)=="object"||typeof P=="function")&&typeof S=="function")return function(){S.apply(P,arguments)}}function x(P,S){var E=!1;function M(I){E||(E=!0,s.reject(P,I))}function T(I){E||(E=!0,s.resolve(P,I))}var D=k(function(){S(T,M)});D.status==="error"&&M(D.value)}function k(P,S){var E={};try{E.value=P(S),E.status="success"}catch(M){E.status="error",E.value=M}return E}(n.exports=y).prototype.finally=function(P){if(typeof P!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(P()).then(function(){return E})},function(E){return S.resolve(P()).then(function(){throw E})})},y.prototype.catch=function(P){return this.then(null,P)},y.prototype.then=function(P,S){if(typeof P!="function"&&this.state===g||typeof S!="function"&&this.state===w)return this;var E=new this.constructor(u);return this.state!==v?d(E,this.state===g?P:S,this.outcome):this.queue.push(new m(E,P,S)),E},m.prototype.callFulfilled=function(P){s.resolve(this.promise,P)},m.prototype.otherCallFulfilled=function(P){d(this.promise,this.onFulfilled,P)},m.prototype.callRejected=function(P){s.reject(this.promise,P)},m.prototype.otherCallRejected=function(P){d(this.promise,this.onRejected,P)},s.resolve=function(P,S){var E=k(f,S);if(E.status==="error")return s.reject(P,E.value);var M=E.value;if(M)x(P,M);else{P.state=g,P.outcome=S;for(var T=-1,D=P.queue.length;++T<D;)P.queue[T].callFulfilled(S)}return P},s.reject=function(P,S){P.state=w,P.outcome=S;for(var E=-1,M=P.queue.length;++E<M;)P.queue[E].callRejected(S);return P},y.resolve=function(P){return P instanceof this?P:s.resolve(new this(u),P)},y.reject=function(P){var S=new this(u);return s.reject(S,P)},y.all=function(P){var S=this;if(Object.prototype.toString.call(P)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=P.length,M=!1;if(!E)return this.resolve([]);for(var T=new Array(E),D=0,I=-1,N=new this(u);++I<E;)O(P[I],I);return N;function O(F,U){S.resolve(F).then(function(Y){T[U]=Y,++D!==E||M||(M=!0,s.resolve(N,T))},function(Y){M||(M=!0,s.reject(N,Y))})}},y.race=function(P){var S=this;if(Object.prototype.toString.call(P)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=P.length,M=!1;if(!E)return this.resolve([]);for(var T,D=-1,I=new this(u);++D<E;)T=P[D],S.resolve(T).then(function(N){M||(M=!0,s.resolve(I,N))},function(N){M||(M=!0,s.reject(I,N))});return I}},{immediate:36}],38:[function(e,n,r){var o={};(0,e("./lib/utils/common").assign)(o,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,r){var o=e("./zlib/deflate"),u=e("./utils/common"),s=e("./utils/strings"),w=e("./zlib/messages"),g=e("./zlib/zstream"),v=Object.prototype.toString,y=0,m=-1,d=0,f=8;function x(P){if(!(this instanceof x))return new x(P);this.options=u.assign({level:m,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},P||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var E=o.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==y)throw new Error(w[E]);if(S.header&&o.deflateSetHeader(this.strm,S.header),S.dictionary){var M;if(M=typeof S.dictionary=="string"?s.string2buf(S.dictionary):v.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=o.deflateSetDictionary(this.strm,M))!==y)throw new Error(w[E]);this._dict_set=!0}}function k(P,S){var E=new x(S);if(E.push(P,!0),E.err)throw E.msg||w[E.err];return E.result}x.prototype.push=function(P,S){var E,M,T=this.strm,D=this.options.chunkSize;if(this.ended)return!1;M=S===~~S?S:S===!0?4:0,typeof P=="string"?T.input=s.string2buf(P):v.call(P)==="[object ArrayBuffer]"?T.input=new Uint8Array(P):T.input=P,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new u.Buf8(D),T.next_out=0,T.avail_out=D),(E=o.deflate(T,M))!==1&&E!==y)return this.onEnd(E),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||M!==4&&M!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(u.shrinkBuf(T.output,T.next_out))):this.onData(u.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&E!==1);return M===4?(E=o.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===y):M!==2||(this.onEnd(y),!(T.avail_out=0))},x.prototype.onData=function(P){this.chunks.push(P)},x.prototype.onEnd=function(P){P===y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=P,this.msg=this.strm.msg},r.Deflate=x,r.deflate=k,r.deflateRaw=function(P,S){return(S=S||{}).raw=!0,k(P,S)},r.gzip=function(P,S){return(S=S||{}).gzip=!0,k(P,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,r){var o=e("./zlib/inflate"),u=e("./utils/common"),s=e("./utils/strings"),w=e("./zlib/constants"),g=e("./zlib/messages"),v=e("./zlib/zstream"),y=e("./zlib/gzheader"),m=Object.prototype.toString;function d(x){if(!(this instanceof d))return new d(x);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},x||{});var k=this.options;k.raw&&0<=k.windowBits&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15)),!(0<=k.windowBits&&k.windowBits<16)||x&&x.windowBits||(k.windowBits+=32),15<k.windowBits&&k.windowBits<48&&!(15&k.windowBits)&&(k.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var P=o.inflateInit2(this.strm,k.windowBits);if(P!==w.Z_OK)throw new Error(g[P]);this.header=new y,o.inflateGetHeader(this.strm,this.header)}function f(x,k){var P=new d(k);if(P.push(x,!0),P.err)throw P.msg||g[P.err];return P.result}d.prototype.push=function(x,k){var P,S,E,M,T,D,I=this.strm,N=this.options.chunkSize,O=this.options.dictionary,F=!1;if(this.ended)return!1;S=k===~~k?k:k===!0?w.Z_FINISH:w.Z_NO_FLUSH,typeof x=="string"?I.input=s.binstring2buf(x):m.call(x)==="[object ArrayBuffer]"?I.input=new Uint8Array(x):I.input=x,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new u.Buf8(N),I.next_out=0,I.avail_out=N),(P=o.inflate(I,w.Z_NO_FLUSH))===w.Z_NEED_DICT&&O&&(D=typeof O=="string"?s.string2buf(O):m.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,P=o.inflateSetDictionary(this.strm,D)),P===w.Z_BUF_ERROR&&F===!0&&(P=w.Z_OK,F=!1),P!==w.Z_STREAM_END&&P!==w.Z_OK)return this.onEnd(P),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&P!==w.Z_STREAM_END&&(I.avail_in!==0||S!==w.Z_FINISH&&S!==w.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=s.utf8border(I.output,I.next_out),M=I.next_out-E,T=s.buf2string(I.output,E),I.next_out=M,I.avail_out=N-M,M&&u.arraySet(I.output,I.output,E,M,0),this.onData(T)):this.onData(u.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(F=!0)}while((0<I.avail_in||I.avail_out===0)&&P!==w.Z_STREAM_END);return P===w.Z_STREAM_END&&(S=w.Z_FINISH),S===w.Z_FINISH?(P=o.inflateEnd(this.strm),this.onEnd(P),this.ended=!0,P===w.Z_OK):S!==w.Z_SYNC_FLUSH||(this.onEnd(w.Z_OK),!(I.avail_out=0))},d.prototype.onData=function(x){this.chunks.push(x)},d.prototype.onEnd=function(x){x===w.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},r.Inflate=d,r.inflate=f,r.inflateRaw=function(x,k){return(k=k||{}).raw=!0,f(x,k)},r.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,r){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(w){for(var g=Array.prototype.slice.call(arguments,1);g.length;){var v=g.shift();if(v){if(_typeof$1(v)!="object")throw new TypeError(v+"must be non-object");for(var y in v)v.hasOwnProperty(y)&&(w[y]=v[y])}}return w},r.shrinkBuf=function(w,g){return w.length===g?w:w.subarray?w.subarray(0,g):(w.length=g,w)};var u={arraySet:function(w,g,v,y,m){if(g.subarray&&w.subarray)w.set(g.subarray(v,v+y),m);else for(var d=0;d<y;d++)w[m+d]=g[v+d]},flattenChunks:function(w){var g,v,y,m,d,f;for(g=y=0,v=w.length;g<v;g++)y+=w[g].length;for(f=new Uint8Array(y),g=m=0,v=w.length;g<v;g++)d=w[g],f.set(d,m),m+=d.length;return f}},s={arraySet:function(w,g,v,y,m){for(var d=0;d<y;d++)w[m+d]=g[v+d]},flattenChunks:function(w){return[].concat.apply([],w)}};r.setTyped=function(w){w?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,u)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(o)},{}],42:[function(e,n,r){var o=e("./common"),u=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var w=new o.Buf8(256),g=0;g<256;g++)w[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;function v(y,m){if(m<65537&&(y.subarray&&s||!y.subarray&&u))return String.fromCharCode.apply(null,o.shrinkBuf(y,m));for(var d="",f=0;f<m;f++)d+=String.fromCharCode(y[f]);return d}w[254]=w[254]=1,r.string2buf=function(y){var m,d,f,x,k,P=y.length,S=0;for(x=0;x<P;x++)(64512&(d=y.charCodeAt(x)))==55296&&x+1<P&&(64512&(f=y.charCodeAt(x+1)))==56320&&(d=65536+(d-55296<<10)+(f-56320),x++),S+=d<128?1:d<2048?2:d<65536?3:4;for(m=new o.Buf8(S),x=k=0;k<S;x++)(64512&(d=y.charCodeAt(x)))==55296&&x+1<P&&(64512&(f=y.charCodeAt(x+1)))==56320&&(d=65536+(d-55296<<10)+(f-56320),x++),d<128?m[k++]=d:(d<2048?m[k++]=192|d>>>6:(d<65536?m[k++]=224|d>>>12:(m[k++]=240|d>>>18,m[k++]=128|d>>>12&63),m[k++]=128|d>>>6&63),m[k++]=128|63&d);return m},r.buf2binstring=function(y){return v(y,y.length)},r.binstring2buf=function(y){for(var m=new o.Buf8(y.length),d=0,f=m.length;d<f;d++)m[d]=y.charCodeAt(d);return m},r.buf2string=function(y,m){var d,f,x,k,P=m||y.length,S=new Array(2*P);for(d=f=0;d<P;)if((x=y[d++])<128)S[f++]=x;else if(4<(k=w[x]))S[f++]=65533,d+=k-1;else{for(x&=k===2?31:k===3?15:7;1<k&&d<P;)x=x<<6|63&y[d++],k--;1<k?S[f++]=65533:x<65536?S[f++]=x:(x-=65536,S[f++]=55296|x>>10&1023,S[f++]=56320|1023&x)}return v(S,f)},r.utf8border=function(y,m){var d;for((m=m||y.length)>y.length&&(m=y.length),d=m-1;0<=d&&(192&y[d])==128;)d--;return d<0||d===0?m:d+w[y[d]]>m?d:m}},{"./common":41}],43:[function(e,n,r){n.exports=function(o,u,s,w){for(var g=65535&o,v=o>>>16&65535,y=0;s!==0;){for(s-=y=2e3<s?2e3:s;v=v+(g=g+u[w++]|0)|0,--y;);g%=65521,v%=65521}return g|v<<16}},{}],44:[function(e,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,r){var o=function(){for(var u,s=[],w=0;w<256;w++){u=w;for(var g=0;g<8;g++)u=1&u?3988292384^u>>>1:u>>>1;s[w]=u}return s}();n.exports=function(u,s,w,g){var v=o,y=g+w;u^=-1;for(var m=g;m<y;m++)u=u>>>8^v[255&(u^s[m])];return~u}},{}],46:[function(e,n,r){var o,u=e("../utils/common"),s=e("./trees"),w=e("./adler32"),g=e("./crc32"),v=e("./messages"),y=0,m=4,d=0,f=-2,x=-1,k=4,P=2,S=8,E=9,M=286,T=30,D=19,I=2*M+1,N=15,O=3,F=258,U=F+O+1,Y=42,Q=113,q=1,ne=2,J=3,re=4;function X(ye,_e){return ye.msg=v[_e],_e}function j(ye){return(ye<<1)-(4<ye?9:0)}function Z(ye){for(var _e=ye.length;0<=--_e;)ye[_e]=0}function W(ye){var _e=ye.state,we=_e.pending;we>ye.avail_out&&(we=ye.avail_out),we!==0&&(u.arraySet(ye.output,_e.pending_buf,_e.pending_out,we,ye.next_out),ye.next_out+=we,_e.pending_out+=we,ye.total_out+=we,ye.avail_out-=we,_e.pending-=we,_e.pending===0&&(_e.pending_out=0))}function te(ye,_e){s._tr_flush_block(ye,0<=ye.block_start?ye.block_start:-1,ye.strstart-ye.block_start,_e),ye.block_start=ye.strstart,W(ye.strm)}function le(ye,_e){ye.pending_buf[ye.pending++]=_e}function oe(ye,_e){ye.pending_buf[ye.pending++]=_e>>>8&255,ye.pending_buf[ye.pending++]=255&_e}function Ee(ye,_e){var we,Se,$e=ye.max_chain_length,Be=ye.strstart,Oe=ye.prev_length,Ge=ye.nice_match,Ie=ye.strstart>ye.w_size-U?ye.strstart-(ye.w_size-U):0,je=ye.window,qe=ye.w_mask,Ue=ye.prev,Je=ye.strstart+F,et=je[Be+Oe-1],nt=je[Be+Oe];ye.prev_length>=ye.good_match&&($e>>=2),Ge>ye.lookahead&&(Ge=ye.lookahead);do if(je[(we=_e)+Oe]===nt&&je[we+Oe-1]===et&&je[we]===je[Be]&&je[++we]===je[Be+1]){Be+=2,we++;do;while(je[++Be]===je[++we]&&je[++Be]===je[++we]&&je[++Be]===je[++we]&&je[++Be]===je[++we]&&je[++Be]===je[++we]&&je[++Be]===je[++we]&&je[++Be]===je[++we]&&je[++Be]===je[++we]&&Be<Je);if(Se=F-(Je-Be),Be=Je-F,Oe<Se){if(ye.match_start=_e,Ge<=(Oe=Se))break;et=je[Be+Oe-1],nt=je[Be+Oe]}}while((_e=Ue[_e&qe])>Ie&&--$e!=0);return Oe<=ye.lookahead?Oe:ye.lookahead}function Ae(ye){var _e,we,Se,$e,Be,Oe,Ge,Ie,je,qe,Ue=ye.w_size;do{if($e=ye.window_size-ye.lookahead-ye.strstart,ye.strstart>=Ue+(Ue-U)){for(u.arraySet(ye.window,ye.window,Ue,Ue,0),ye.match_start-=Ue,ye.strstart-=Ue,ye.block_start-=Ue,_e=we=ye.hash_size;Se=ye.head[--_e],ye.head[_e]=Ue<=Se?Se-Ue:0,--we;);for(_e=we=Ue;Se=ye.prev[--_e],ye.prev[_e]=Ue<=Se?Se-Ue:0,--we;);$e+=Ue}if(ye.strm.avail_in===0)break;if(Oe=ye.strm,Ge=ye.window,Ie=ye.strstart+ye.lookahead,qe=void 0,(je=$e)<(qe=Oe.avail_in)&&(qe=je),we=qe===0?0:(Oe.avail_in-=qe,u.arraySet(Ge,Oe.input,Oe.next_in,qe,Ie),Oe.state.wrap===1?Oe.adler=w(Oe.adler,Ge,qe,Ie):Oe.state.wrap===2&&(Oe.adler=g(Oe.adler,Ge,qe,Ie)),Oe.next_in+=qe,Oe.total_in+=qe,qe),ye.lookahead+=we,ye.lookahead+ye.insert>=O)for(Be=ye.strstart-ye.insert,ye.ins_h=ye.window[Be],ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[Be+1])&ye.hash_mask;ye.insert&&(ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[Be+O-1])&ye.hash_mask,ye.prev[Be&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=Be,Be++,ye.insert--,!(ye.lookahead+ye.insert<O)););}while(ye.lookahead<U&&ye.strm.avail_in!==0)}function ve(ye,_e){for(var we,Se;;){if(ye.lookahead<U){if(Ae(ye),ye.lookahead<U&&_e===y)return q;if(ye.lookahead===0)break}if(we=0,ye.lookahead>=O&&(ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[ye.strstart+O-1])&ye.hash_mask,we=ye.prev[ye.strstart&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=ye.strstart),we!==0&&ye.strstart-we<=ye.w_size-U&&(ye.match_length=Ee(ye,we)),ye.match_length>=O)if(Se=s._tr_tally(ye,ye.strstart-ye.match_start,ye.match_length-O),ye.lookahead-=ye.match_length,ye.match_length<=ye.max_lazy_match&&ye.lookahead>=O){for(ye.match_length--;ye.strstart++,ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[ye.strstart+O-1])&ye.hash_mask,we=ye.prev[ye.strstart&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=ye.strstart,--ye.match_length!=0;);ye.strstart++}else ye.strstart+=ye.match_length,ye.match_length=0,ye.ins_h=ye.window[ye.strstart],ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[ye.strstart+1])&ye.hash_mask;else Se=s._tr_tally(ye,0,ye.window[ye.strstart]),ye.lookahead--,ye.strstart++;if(Se&&(te(ye,!1),ye.strm.avail_out===0))return q}return ye.insert=ye.strstart<O-1?ye.strstart:O-1,_e===m?(te(ye,!0),ye.strm.avail_out===0?J:re):ye.last_lit&&(te(ye,!1),ye.strm.avail_out===0)?q:ne}function ke(ye,_e){for(var we,Se,$e;;){if(ye.lookahead<U){if(Ae(ye),ye.lookahead<U&&_e===y)return q;if(ye.lookahead===0)break}if(we=0,ye.lookahead>=O&&(ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[ye.strstart+O-1])&ye.hash_mask,we=ye.prev[ye.strstart&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=ye.strstart),ye.prev_length=ye.match_length,ye.prev_match=ye.match_start,ye.match_length=O-1,we!==0&&ye.prev_length<ye.max_lazy_match&&ye.strstart-we<=ye.w_size-U&&(ye.match_length=Ee(ye,we),ye.match_length<=5&&(ye.strategy===1||ye.match_length===O&&4096<ye.strstart-ye.match_start)&&(ye.match_length=O-1)),ye.prev_length>=O&&ye.match_length<=ye.prev_length){for($e=ye.strstart+ye.lookahead-O,Se=s._tr_tally(ye,ye.strstart-1-ye.prev_match,ye.prev_length-O),ye.lookahead-=ye.prev_length-1,ye.prev_length-=2;++ye.strstart<=$e&&(ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[ye.strstart+O-1])&ye.hash_mask,we=ye.prev[ye.strstart&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=ye.strstart),--ye.prev_length!=0;);if(ye.match_available=0,ye.match_length=O-1,ye.strstart++,Se&&(te(ye,!1),ye.strm.avail_out===0))return q}else if(ye.match_available){if((Se=s._tr_tally(ye,0,ye.window[ye.strstart-1]))&&te(ye,!1),ye.strstart++,ye.lookahead--,ye.strm.avail_out===0)return q}else ye.match_available=1,ye.strstart++,ye.lookahead--}return ye.match_available&&(Se=s._tr_tally(ye,0,ye.window[ye.strstart-1]),ye.match_available=0),ye.insert=ye.strstart<O-1?ye.strstart:O-1,_e===m?(te(ye,!0),ye.strm.avail_out===0?J:re):ye.last_lit&&(te(ye,!1),ye.strm.avail_out===0)?q:ne}function Ce(ye,_e,we,Se,$e){this.good_length=ye,this.max_lazy=_e,this.nice_length=we,this.max_chain=Se,this.func=$e}function Pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*I),this.dyn_dtree=new u.Buf16(2*(2*T+1)),this.bl_tree=new u.Buf16(2*(2*D+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(N+1),this.heap=new u.Buf16(2*M+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*M+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Me(ye){var _e;return ye&&ye.state?(ye.total_in=ye.total_out=0,ye.data_type=P,(_e=ye.state).pending=0,_e.pending_out=0,_e.wrap<0&&(_e.wrap=-_e.wrap),_e.status=_e.wrap?Y:Q,ye.adler=_e.wrap===2?0:1,_e.last_flush=y,s._tr_init(_e),d):X(ye,f)}function Le(ye){var _e=Me(ye);return _e===d&&function(we){we.window_size=2*we.w_size,Z(we.head),we.max_lazy_match=o[we.level].max_lazy,we.good_match=o[we.level].good_length,we.nice_match=o[we.level].nice_length,we.max_chain_length=o[we.level].max_chain,we.strstart=0,we.block_start=0,we.lookahead=0,we.insert=0,we.match_length=we.prev_length=O-1,we.match_available=0,we.ins_h=0}(ye.state),_e}function Te(ye,_e,we,Se,$e,Be){if(!ye)return f;var Oe=1;if(_e===x&&(_e=6),Se<0?(Oe=0,Se=-Se):15<Se&&(Oe=2,Se-=16),$e<1||E<$e||we!==S||Se<8||15<Se||_e<0||9<_e||Be<0||k<Be)return X(ye,f);Se===8&&(Se=9);var Ge=new Pe;return(ye.state=Ge).strm=ye,Ge.wrap=Oe,Ge.gzhead=null,Ge.w_bits=Se,Ge.w_size=1<<Ge.w_bits,Ge.w_mask=Ge.w_size-1,Ge.hash_bits=$e+7,Ge.hash_size=1<<Ge.hash_bits,Ge.hash_mask=Ge.hash_size-1,Ge.hash_shift=~~((Ge.hash_bits+O-1)/O),Ge.window=new u.Buf8(2*Ge.w_size),Ge.head=new u.Buf16(Ge.hash_size),Ge.prev=new u.Buf16(Ge.w_size),Ge.lit_bufsize=1<<$e+6,Ge.pending_buf_size=4*Ge.lit_bufsize,Ge.pending_buf=new u.Buf8(Ge.pending_buf_size),Ge.d_buf=1*Ge.lit_bufsize,Ge.l_buf=3*Ge.lit_bufsize,Ge.level=_e,Ge.strategy=Be,Ge.method=we,Le(ye)}o=[new Ce(0,0,0,0,function(ye,_e){var we=65535;for(we>ye.pending_buf_size-5&&(we=ye.pending_buf_size-5);;){if(ye.lookahead<=1){if(Ae(ye),ye.lookahead===0&&_e===y)return q;if(ye.lookahead===0)break}ye.strstart+=ye.lookahead,ye.lookahead=0;var Se=ye.block_start+we;if((ye.strstart===0||ye.strstart>=Se)&&(ye.lookahead=ye.strstart-Se,ye.strstart=Se,te(ye,!1),ye.strm.avail_out===0)||ye.strstart-ye.block_start>=ye.w_size-U&&(te(ye,!1),ye.strm.avail_out===0))return q}return ye.insert=0,_e===m?(te(ye,!0),ye.strm.avail_out===0?J:re):(ye.strstart>ye.block_start&&(te(ye,!1),ye.strm.avail_out),q)}),new Ce(4,4,8,4,ve),new Ce(4,5,16,8,ve),new Ce(4,6,32,32,ve),new Ce(4,4,16,16,ke),new Ce(8,16,32,32,ke),new Ce(8,16,128,128,ke),new Ce(8,32,128,256,ke),new Ce(32,128,258,1024,ke),new Ce(32,258,258,4096,ke)],r.deflateInit=function(ye,_e){return Te(ye,_e,S,15,8,0)},r.deflateInit2=Te,r.deflateReset=Le,r.deflateResetKeep=Me,r.deflateSetHeader=function(ye,_e){return ye&&ye.state?ye.state.wrap!==2?f:(ye.state.gzhead=_e,d):f},r.deflate=function(ye,_e){var we,Se,$e,Be;if(!ye||!ye.state||5<_e||_e<0)return ye?X(ye,f):f;if(Se=ye.state,!ye.output||!ye.input&&ye.avail_in!==0||Se.status===666&&_e!==m)return X(ye,ye.avail_out===0?-5:f);if(Se.strm=ye,we=Se.last_flush,Se.last_flush=_e,Se.status===Y)if(Se.wrap===2)ye.adler=0,le(Se,31),le(Se,139),le(Se,8),Se.gzhead?(le(Se,(Se.gzhead.text?1:0)+(Se.gzhead.hcrc?2:0)+(Se.gzhead.extra?4:0)+(Se.gzhead.name?8:0)+(Se.gzhead.comment?16:0)),le(Se,255&Se.gzhead.time),le(Se,Se.gzhead.time>>8&255),le(Se,Se.gzhead.time>>16&255),le(Se,Se.gzhead.time>>24&255),le(Se,Se.level===9?2:2<=Se.strategy||Se.level<2?4:0),le(Se,255&Se.gzhead.os),Se.gzhead.extra&&Se.gzhead.extra.length&&(le(Se,255&Se.gzhead.extra.length),le(Se,Se.gzhead.extra.length>>8&255)),Se.gzhead.hcrc&&(ye.adler=g(ye.adler,Se.pending_buf,Se.pending,0)),Se.gzindex=0,Se.status=69):(le(Se,0),le(Se,0),le(Se,0),le(Se,0),le(Se,0),le(Se,Se.level===9?2:2<=Se.strategy||Se.level<2?4:0),le(Se,3),Se.status=Q);else{var Oe=S+(Se.w_bits-8<<4)<<8;Oe|=(2<=Se.strategy||Se.level<2?0:Se.level<6?1:Se.level===6?2:3)<<6,Se.strstart!==0&&(Oe|=32),Oe+=31-Oe%31,Se.status=Q,oe(Se,Oe),Se.strstart!==0&&(oe(Se,ye.adler>>>16),oe(Se,65535&ye.adler)),ye.adler=1}if(Se.status===69)if(Se.gzhead.extra){for($e=Se.pending;Se.gzindex<(65535&Se.gzhead.extra.length)&&(Se.pending!==Se.pending_buf_size||(Se.gzhead.hcrc&&Se.pending>$e&&(ye.adler=g(ye.adler,Se.pending_buf,Se.pending-$e,$e)),W(ye),$e=Se.pending,Se.pending!==Se.pending_buf_size));)le(Se,255&Se.gzhead.extra[Se.gzindex]),Se.gzindex++;Se.gzhead.hcrc&&Se.pending>$e&&(ye.adler=g(ye.adler,Se.pending_buf,Se.pending-$e,$e)),Se.gzindex===Se.gzhead.extra.length&&(Se.gzindex=0,Se.status=73)}else Se.status=73;if(Se.status===73)if(Se.gzhead.name){$e=Se.pending;do{if(Se.pending===Se.pending_buf_size&&(Se.gzhead.hcrc&&Se.pending>$e&&(ye.adler=g(ye.adler,Se.pending_buf,Se.pending-$e,$e)),W(ye),$e=Se.pending,Se.pending===Se.pending_buf_size)){Be=1;break}Be=Se.gzindex<Se.gzhead.name.length?255&Se.gzhead.name.charCodeAt(Se.gzindex++):0,le(Se,Be)}while(Be!==0);Se.gzhead.hcrc&&Se.pending>$e&&(ye.adler=g(ye.adler,Se.pending_buf,Se.pending-$e,$e)),Be===0&&(Se.gzindex=0,Se.status=91)}else Se.status=91;if(Se.status===91)if(Se.gzhead.comment){$e=Se.pending;do{if(Se.pending===Se.pending_buf_size&&(Se.gzhead.hcrc&&Se.pending>$e&&(ye.adler=g(ye.adler,Se.pending_buf,Se.pending-$e,$e)),W(ye),$e=Se.pending,Se.pending===Se.pending_buf_size)){Be=1;break}Be=Se.gzindex<Se.gzhead.comment.length?255&Se.gzhead.comment.charCodeAt(Se.gzindex++):0,le(Se,Be)}while(Be!==0);Se.gzhead.hcrc&&Se.pending>$e&&(ye.adler=g(ye.adler,Se.pending_buf,Se.pending-$e,$e)),Be===0&&(Se.status=103)}else Se.status=103;if(Se.status===103&&(Se.gzhead.hcrc?(Se.pending+2>Se.pending_buf_size&&W(ye),Se.pending+2<=Se.pending_buf_size&&(le(Se,255&ye.adler),le(Se,ye.adler>>8&255),ye.adler=0,Se.status=Q)):Se.status=Q),Se.pending!==0){if(W(ye),ye.avail_out===0)return Se.last_flush=-1,d}else if(ye.avail_in===0&&j(_e)<=j(we)&&_e!==m)return X(ye,-5);if(Se.status===666&&ye.avail_in!==0)return X(ye,-5);if(ye.avail_in!==0||Se.lookahead!==0||_e!==y&&Se.status!==666){var Ge=Se.strategy===2?function(Ie,je){for(var qe;;){if(Ie.lookahead===0&&(Ae(Ie),Ie.lookahead===0)){if(je===y)return q;break}if(Ie.match_length=0,qe=s._tr_tally(Ie,0,Ie.window[Ie.strstart]),Ie.lookahead--,Ie.strstart++,qe&&(te(Ie,!1),Ie.strm.avail_out===0))return q}return Ie.insert=0,je===m?(te(Ie,!0),Ie.strm.avail_out===0?J:re):Ie.last_lit&&(te(Ie,!1),Ie.strm.avail_out===0)?q:ne}(Se,_e):Se.strategy===3?function(Ie,je){for(var qe,Ue,Je,et,nt=Ie.window;;){if(Ie.lookahead<=F){if(Ae(Ie),Ie.lookahead<=F&&je===y)return q;if(Ie.lookahead===0)break}if(Ie.match_length=0,Ie.lookahead>=O&&0<Ie.strstart&&(Ue=nt[Je=Ie.strstart-1])===nt[++Je]&&Ue===nt[++Je]&&Ue===nt[++Je]){et=Ie.strstart+F;do;while(Ue===nt[++Je]&&Ue===nt[++Je]&&Ue===nt[++Je]&&Ue===nt[++Je]&&Ue===nt[++Je]&&Ue===nt[++Je]&&Ue===nt[++Je]&&Ue===nt[++Je]&&Je<et);Ie.match_length=F-(et-Je),Ie.match_length>Ie.lookahead&&(Ie.match_length=Ie.lookahead)}if(Ie.match_length>=O?(qe=s._tr_tally(Ie,1,Ie.match_length-O),Ie.lookahead-=Ie.match_length,Ie.strstart+=Ie.match_length,Ie.match_length=0):(qe=s._tr_tally(Ie,0,Ie.window[Ie.strstart]),Ie.lookahead--,Ie.strstart++),qe&&(te(Ie,!1),Ie.strm.avail_out===0))return q}return Ie.insert=0,je===m?(te(Ie,!0),Ie.strm.avail_out===0?J:re):Ie.last_lit&&(te(Ie,!1),Ie.strm.avail_out===0)?q:ne}(Se,_e):o[Se.level].func(Se,_e);if(Ge!==J&&Ge!==re||(Se.status=666),Ge===q||Ge===J)return ye.avail_out===0&&(Se.last_flush=-1),d;if(Ge===ne&&(_e===1?s._tr_align(Se):_e!==5&&(s._tr_stored_block(Se,0,0,!1),_e===3&&(Z(Se.head),Se.lookahead===0&&(Se.strstart=0,Se.block_start=0,Se.insert=0))),W(ye),ye.avail_out===0))return Se.last_flush=-1,d}return _e!==m?d:Se.wrap<=0?1:(Se.wrap===2?(le(Se,255&ye.adler),le(Se,ye.adler>>8&255),le(Se,ye.adler>>16&255),le(Se,ye.adler>>24&255),le(Se,255&ye.total_in),le(Se,ye.total_in>>8&255),le(Se,ye.total_in>>16&255),le(Se,ye.total_in>>24&255)):(oe(Se,ye.adler>>>16),oe(Se,65535&ye.adler)),W(ye),0<Se.wrap&&(Se.wrap=-Se.wrap),Se.pending!==0?d:1)},r.deflateEnd=function(ye){var _e;return ye&&ye.state?(_e=ye.state.status)!==Y&&_e!==69&&_e!==73&&_e!==91&&_e!==103&&_e!==Q&&_e!==666?X(ye,f):(ye.state=null,_e===Q?X(ye,-3):d):f},r.deflateSetDictionary=function(ye,_e){var we,Se,$e,Be,Oe,Ge,Ie,je,qe=_e.length;if(!ye||!ye.state||(Be=(we=ye.state).wrap)===2||Be===1&&we.status!==Y||we.lookahead)return f;for(Be===1&&(ye.adler=w(ye.adler,_e,qe,0)),we.wrap=0,qe>=we.w_size&&(Be===0&&(Z(we.head),we.strstart=0,we.block_start=0,we.insert=0),je=new u.Buf8(we.w_size),u.arraySet(je,_e,qe-we.w_size,we.w_size,0),_e=je,qe=we.w_size),Oe=ye.avail_in,Ge=ye.next_in,Ie=ye.input,ye.avail_in=qe,ye.next_in=0,ye.input=_e,Ae(we);we.lookahead>=O;){for(Se=we.strstart,$e=we.lookahead-(O-1);we.ins_h=(we.ins_h<<we.hash_shift^we.window[Se+O-1])&we.hash_mask,we.prev[Se&we.w_mask]=we.head[we.ins_h],we.head[we.ins_h]=Se,Se++,--$e;);we.strstart=Se,we.lookahead=O-1,Ae(we)}return we.strstart+=we.lookahead,we.block_start=we.strstart,we.insert=we.lookahead,we.lookahead=0,we.match_length=we.prev_length=O-1,we.match_available=0,ye.next_in=Ge,ye.input=Ie,ye.avail_in=Oe,we.wrap=Be,d},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,r){n.exports=function(o,u){var s,w,g,v,y,m,d,f,x,k,P,S,E,M,T,D,I,N,O,F,U,Y,Q,q,ne;s=o.state,w=o.next_in,q=o.input,g=w+(o.avail_in-5),v=o.next_out,ne=o.output,y=v-(u-o.avail_out),m=v+(o.avail_out-257),d=s.dmax,f=s.wsize,x=s.whave,k=s.wnext,P=s.window,S=s.hold,E=s.bits,M=s.lencode,T=s.distcode,D=(1<<s.lenbits)-1,I=(1<<s.distbits)-1;e:do{E<15&&(S+=q[w++]<<E,E+=8,S+=q[w++]<<E,E+=8),N=M[S&D];t:for(;;){if(S>>>=O=N>>>24,E-=O,(O=N>>>16&255)==0)ne[v++]=65535&N;else{if(!(16&O)){if(!(64&O)){N=M[(65535&N)+(S&(1<<O)-1)];continue t}if(32&O){s.mode=12;break e}o.msg="invalid literal/length code",s.mode=30;break e}F=65535&N,(O&=15)&&(E<O&&(S+=q[w++]<<E,E+=8),F+=S&(1<<O)-1,S>>>=O,E-=O),E<15&&(S+=q[w++]<<E,E+=8,S+=q[w++]<<E,E+=8),N=T[S&I];n:for(;;){if(S>>>=O=N>>>24,E-=O,!(16&(O=N>>>16&255))){if(!(64&O)){N=T[(65535&N)+(S&(1<<O)-1)];continue n}o.msg="invalid distance code",s.mode=30;break e}if(U=65535&N,E<(O&=15)&&(S+=q[w++]<<E,(E+=8)<O&&(S+=q[w++]<<E,E+=8)),d<(U+=S&(1<<O)-1)){o.msg="invalid distance too far back",s.mode=30;break e}if(S>>>=O,E-=O,(O=v-y)<U){if(x<(O=U-O)&&s.sane){o.msg="invalid distance too far back",s.mode=30;break e}if(Q=P,(Y=0)===k){if(Y+=f-O,O<F){for(F-=O;ne[v++]=P[Y++],--O;);Y=v-U,Q=ne}}else if(k<O){if(Y+=f+k-O,(O-=k)<F){for(F-=O;ne[v++]=P[Y++],--O;);if(Y=0,k<F){for(F-=O=k;ne[v++]=P[Y++],--O;);Y=v-U,Q=ne}}}else if(Y+=k-O,O<F){for(F-=O;ne[v++]=P[Y++],--O;);Y=v-U,Q=ne}for(;2<F;)ne[v++]=Q[Y++],ne[v++]=Q[Y++],ne[v++]=Q[Y++],F-=3;F&&(ne[v++]=Q[Y++],1<F&&(ne[v++]=Q[Y++]))}else{for(Y=v-U;ne[v++]=ne[Y++],ne[v++]=ne[Y++],ne[v++]=ne[Y++],2<(F-=3););F&&(ne[v++]=ne[Y++],1<F&&(ne[v++]=ne[Y++]))}break}}break}}while(w<g&&v<m);w-=F=E>>3,S&=(1<<(E-=F<<3))-1,o.next_in=w,o.next_out=v,o.avail_in=w<g?g-w+5:5-(w-g),o.avail_out=v<m?m-v+257:257-(v-m),s.hold=S,s.bits=E}},{}],49:[function(e,n,r){var o=e("../utils/common"),u=e("./adler32"),s=e("./crc32"),w=e("./inffast"),g=e("./inftrees"),v=1,y=2,m=0,d=-2,f=1,x=852,k=592;function P(Y){return(Y>>>24&255)+(Y>>>8&65280)+((65280&Y)<<8)+((255&Y)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(Y){var Q;return Y&&Y.state?(Q=Y.state,Y.total_in=Y.total_out=Q.total=0,Y.msg="",Q.wrap&&(Y.adler=1&Q.wrap),Q.mode=f,Q.last=0,Q.havedict=0,Q.dmax=32768,Q.head=null,Q.hold=0,Q.bits=0,Q.lencode=Q.lendyn=new o.Buf32(x),Q.distcode=Q.distdyn=new o.Buf32(k),Q.sane=1,Q.back=-1,m):d}function M(Y){var Q;return Y&&Y.state?((Q=Y.state).wsize=0,Q.whave=0,Q.wnext=0,E(Y)):d}function T(Y,Q){var q,ne;return Y&&Y.state?(ne=Y.state,Q<0?(q=0,Q=-Q):(q=1+(Q>>4),Q<48&&(Q&=15)),Q&&(Q<8||15<Q)?d:(ne.window!==null&&ne.wbits!==Q&&(ne.window=null),ne.wrap=q,ne.wbits=Q,M(Y))):d}function D(Y,Q){var q,ne;return Y?(ne=new S,(Y.state=ne).window=null,(q=T(Y,Q))!==m&&(Y.state=null),q):d}var I,N,O=!0;function F(Y){if(O){var Q;for(I=new o.Buf32(512),N=new o.Buf32(32),Q=0;Q<144;)Y.lens[Q++]=8;for(;Q<256;)Y.lens[Q++]=9;for(;Q<280;)Y.lens[Q++]=7;for(;Q<288;)Y.lens[Q++]=8;for(g(v,Y.lens,0,288,I,0,Y.work,{bits:9}),Q=0;Q<32;)Y.lens[Q++]=5;g(y,Y.lens,0,32,N,0,Y.work,{bits:5}),O=!1}Y.lencode=I,Y.lenbits=9,Y.distcode=N,Y.distbits=5}function U(Y,Q,q,ne){var J,re=Y.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new o.Buf8(re.wsize)),ne>=re.wsize?(o.arraySet(re.window,Q,q-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(ne<(J=re.wsize-re.wnext)&&(J=ne),o.arraySet(re.window,Q,q-ne,J,re.wnext),(ne-=J)?(o.arraySet(re.window,Q,q-ne,ne,0),re.wnext=ne,re.whave=re.wsize):(re.wnext+=J,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=J))),0}r.inflateReset=M,r.inflateReset2=T,r.inflateResetKeep=E,r.inflateInit=function(Y){return D(Y,15)},r.inflateInit2=D,r.inflate=function(Y,Q){var q,ne,J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke,Ce,Pe,Me,Le,Te,ye,_e,we,Se,$e=0,Be=new o.Buf8(4),Oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Y||!Y.state||!Y.output||!Y.input&&Y.avail_in!==0)return d;(q=Y.state).mode===12&&(q.mode=13),X=Y.next_out,J=Y.output,Z=Y.avail_out,re=Y.next_in,ne=Y.input,j=Y.avail_in,W=q.hold,te=q.bits,le=j,oe=Z,_e=m;e:for(;;)switch(q.mode){case f:if(q.wrap===0){q.mode=13;break}for(;te<16;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}if(2&q.wrap&&W===35615){Be[q.check=0]=255&W,Be[1]=W>>>8&255,q.check=s(q.check,Be,2,0),te=W=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&W)<<8)+(W>>8))%31){Y.msg="incorrect header check",q.mode=30;break}if((15&W)!=8){Y.msg="unknown compression method",q.mode=30;break}if(te-=4,ye=8+(15&(W>>>=4)),q.wbits===0)q.wbits=ye;else if(ye>q.wbits){Y.msg="invalid window size",q.mode=30;break}q.dmax=1<<ye,Y.adler=q.check=1,q.mode=512&W?10:12,te=W=0;break;case 2:for(;te<16;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}if(q.flags=W,(255&q.flags)!=8){Y.msg="unknown compression method",q.mode=30;break}if(57344&q.flags){Y.msg="unknown header flags set",q.mode=30;break}q.head&&(q.head.text=W>>8&1),512&q.flags&&(Be[0]=255&W,Be[1]=W>>>8&255,q.check=s(q.check,Be,2,0)),te=W=0,q.mode=3;case 3:for(;te<32;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}q.head&&(q.head.time=W),512&q.flags&&(Be[0]=255&W,Be[1]=W>>>8&255,Be[2]=W>>>16&255,Be[3]=W>>>24&255,q.check=s(q.check,Be,4,0)),te=W=0,q.mode=4;case 4:for(;te<16;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}q.head&&(q.head.xflags=255&W,q.head.os=W>>8),512&q.flags&&(Be[0]=255&W,Be[1]=W>>>8&255,q.check=s(q.check,Be,2,0)),te=W=0,q.mode=5;case 5:if(1024&q.flags){for(;te<16;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}q.length=W,q.head&&(q.head.extra_len=W),512&q.flags&&(Be[0]=255&W,Be[1]=W>>>8&255,q.check=s(q.check,Be,2,0)),te=W=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&(j<(Ee=q.length)&&(Ee=j),Ee&&(q.head&&(ye=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),o.arraySet(q.head.extra,ne,re,Ee,ye)),512&q.flags&&(q.check=s(q.check,ne,Ee,re)),j-=Ee,re+=Ee,q.length-=Ee),q.length))break e;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(j===0)break e;for(Ee=0;ye=ne[re+Ee++],q.head&&ye&&q.length<65536&&(q.head.name+=String.fromCharCode(ye)),ye&&Ee<j;);if(512&q.flags&&(q.check=s(q.check,ne,Ee,re)),j-=Ee,re+=Ee,ye)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(j===0)break e;for(Ee=0;ye=ne[re+Ee++],q.head&&ye&&q.length<65536&&(q.head.comment+=String.fromCharCode(ye)),ye&&Ee<j;);if(512&q.flags&&(q.check=s(q.check,ne,Ee,re)),j-=Ee,re+=Ee,ye)break e}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;te<16;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}if(W!==(65535&q.check)){Y.msg="header crc mismatch",q.mode=30;break}te=W=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),Y.adler=q.check=0,q.mode=12;break;case 10:for(;te<32;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}Y.adler=q.check=P(W),te=W=0,q.mode=11;case 11:if(q.havedict===0)return Y.next_out=X,Y.avail_out=Z,Y.next_in=re,Y.avail_in=j,q.hold=W,q.bits=te,2;Y.adler=q.check=1,q.mode=12;case 12:if(Q===5||Q===6)break e;case 13:if(q.last){W>>>=7&te,te-=7&te,q.mode=27;break}for(;te<3;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}switch(q.last=1&W,te-=1,3&(W>>>=1)){case 0:q.mode=14;break;case 1:if(F(q),q.mode=20,Q!==6)break;W>>>=2,te-=2;break e;case 2:q.mode=17;break;case 3:Y.msg="invalid block type",q.mode=30}W>>>=2,te-=2;break;case 14:for(W>>>=7&te,te-=7&te;te<32;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}if((65535&W)!=(W>>>16^65535)){Y.msg="invalid stored block lengths",q.mode=30;break}if(q.length=65535&W,te=W=0,q.mode=15,Q===6)break e;case 15:q.mode=16;case 16:if(Ee=q.length){if(j<Ee&&(Ee=j),Z<Ee&&(Ee=Z),Ee===0)break e;o.arraySet(J,ne,re,Ee,X),j-=Ee,re+=Ee,Z-=Ee,X+=Ee,q.length-=Ee;break}q.mode=12;break;case 17:for(;te<14;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}if(q.nlen=257+(31&W),W>>>=5,te-=5,q.ndist=1+(31&W),W>>>=5,te-=5,q.ncode=4+(15&W),W>>>=4,te-=4,286<q.nlen||30<q.ndist){Y.msg="too many length or distance symbols",q.mode=30;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;te<3;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}q.lens[Oe[q.have++]]=7&W,W>>>=3,te-=3}for(;q.have<19;)q.lens[Oe[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,we={bits:q.lenbits},_e=g(0,q.lens,0,19,q.lencode,0,q.work,we),q.lenbits=we.bits,_e){Y.msg="invalid code lengths set",q.mode=30;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;Ce=($e=q.lencode[W&(1<<q.lenbits)-1])>>>16&255,Pe=65535&$e,!((ke=$e>>>24)<=te);){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}if(Pe<16)W>>>=ke,te-=ke,q.lens[q.have++]=Pe;else{if(Pe===16){for(Se=ke+2;te<Se;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}if(W>>>=ke,te-=ke,q.have===0){Y.msg="invalid bit length repeat",q.mode=30;break}ye=q.lens[q.have-1],Ee=3+(3&W),W>>>=2,te-=2}else if(Pe===17){for(Se=ke+3;te<Se;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}te-=ke,ye=0,Ee=3+(7&(W>>>=ke)),W>>>=3,te-=3}else{for(Se=ke+7;te<Se;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}te-=ke,ye=0,Ee=11+(127&(W>>>=ke)),W>>>=7,te-=7}if(q.have+Ee>q.nlen+q.ndist){Y.msg="invalid bit length repeat",q.mode=30;break}for(;Ee--;)q.lens[q.have++]=ye}}if(q.mode===30)break;if(q.lens[256]===0){Y.msg="invalid code -- missing end-of-block",q.mode=30;break}if(q.lenbits=9,we={bits:q.lenbits},_e=g(v,q.lens,0,q.nlen,q.lencode,0,q.work,we),q.lenbits=we.bits,_e){Y.msg="invalid literal/lengths set",q.mode=30;break}if(q.distbits=6,q.distcode=q.distdyn,we={bits:q.distbits},_e=g(y,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,we),q.distbits=we.bits,_e){Y.msg="invalid distances set",q.mode=30;break}if(q.mode=20,Q===6)break e;case 20:q.mode=21;case 21:if(6<=j&&258<=Z){Y.next_out=X,Y.avail_out=Z,Y.next_in=re,Y.avail_in=j,q.hold=W,q.bits=te,w(Y,oe),X=Y.next_out,J=Y.output,Z=Y.avail_out,re=Y.next_in,ne=Y.input,j=Y.avail_in,W=q.hold,te=q.bits,q.mode===12&&(q.back=-1);break}for(q.back=0;Ce=($e=q.lencode[W&(1<<q.lenbits)-1])>>>16&255,Pe=65535&$e,!((ke=$e>>>24)<=te);){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}if(Ce&&!(240&Ce)){for(Me=ke,Le=Ce,Te=Pe;Ce=($e=q.lencode[Te+((W&(1<<Me+Le)-1)>>Me)])>>>16&255,Pe=65535&$e,!(Me+(ke=$e>>>24)<=te);){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}W>>>=Me,te-=Me,q.back+=Me}if(W>>>=ke,te-=ke,q.back+=ke,q.length=Pe,Ce===0){q.mode=26;break}if(32&Ce){q.back=-1,q.mode=12;break}if(64&Ce){Y.msg="invalid literal/length code",q.mode=30;break}q.extra=15&Ce,q.mode=22;case 22:if(q.extra){for(Se=q.extra;te<Se;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}q.length+=W&(1<<q.extra)-1,W>>>=q.extra,te-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;Ce=($e=q.distcode[W&(1<<q.distbits)-1])>>>16&255,Pe=65535&$e,!((ke=$e>>>24)<=te);){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}if(!(240&Ce)){for(Me=ke,Le=Ce,Te=Pe;Ce=($e=q.distcode[Te+((W&(1<<Me+Le)-1)>>Me)])>>>16&255,Pe=65535&$e,!(Me+(ke=$e>>>24)<=te);){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}W>>>=Me,te-=Me,q.back+=Me}if(W>>>=ke,te-=ke,q.back+=ke,64&Ce){Y.msg="invalid distance code",q.mode=30;break}q.offset=Pe,q.extra=15&Ce,q.mode=24;case 24:if(q.extra){for(Se=q.extra;te<Se;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}q.offset+=W&(1<<q.extra)-1,W>>>=q.extra,te-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){Y.msg="invalid distance too far back",q.mode=30;break}q.mode=25;case 25:if(Z===0)break e;if(Ee=oe-Z,q.offset>Ee){if((Ee=q.offset-Ee)>q.whave&&q.sane){Y.msg="invalid distance too far back",q.mode=30;break}Ae=Ee>q.wnext?(Ee-=q.wnext,q.wsize-Ee):q.wnext-Ee,Ee>q.length&&(Ee=q.length),ve=q.window}else ve=J,Ae=X-q.offset,Ee=q.length;for(Z<Ee&&(Ee=Z),Z-=Ee,q.length-=Ee;J[X++]=ve[Ae++],--Ee;);q.length===0&&(q.mode=21);break;case 26:if(Z===0)break e;J[X++]=q.length,Z--,q.mode=21;break;case 27:if(q.wrap){for(;te<32;){if(j===0)break e;j--,W|=ne[re++]<<te,te+=8}if(oe-=Z,Y.total_out+=oe,q.total+=oe,oe&&(Y.adler=q.check=q.flags?s(q.check,J,oe,X-oe):u(q.check,J,oe,X-oe)),oe=Z,(q.flags?W:P(W))!==q.check){Y.msg="incorrect data check",q.mode=30;break}te=W=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;te<32;){if(j===0)break e;j--,W+=ne[re++]<<te,te+=8}if(W!==(4294967295&q.total)){Y.msg="incorrect length check",q.mode=30;break}te=W=0}q.mode=29;case 29:_e=1;break e;case 30:_e=-3;break e;case 31:return-4;default:return d}return Y.next_out=X,Y.avail_out=Z,Y.next_in=re,Y.avail_in=j,q.hold=W,q.bits=te,(q.wsize||oe!==Y.avail_out&&q.mode<30&&(q.mode<27||Q!==4))&&U(Y,Y.output,Y.next_out,oe-Y.avail_out)?(q.mode=31,-4):(le-=Y.avail_in,oe-=Y.avail_out,Y.total_in+=le,Y.total_out+=oe,q.total+=oe,q.wrap&&oe&&(Y.adler=q.check=q.flags?s(q.check,J,oe,Y.next_out-oe):u(q.check,J,oe,Y.next_out-oe)),Y.data_type=q.bits+(q.last?64:0)+(q.mode===12?128:0)+(q.mode===20||q.mode===15?256:0),(le==0&&oe===0||Q===4)&&_e===m&&(_e=-5),_e)},r.inflateEnd=function(Y){if(!Y||!Y.state)return d;var Q=Y.state;return Q.window&&(Q.window=null),Y.state=null,m},r.inflateGetHeader=function(Y,Q){var q;return Y&&Y.state&&2&(q=Y.state).wrap?((q.head=Q).done=!1,m):d},r.inflateSetDictionary=function(Y,Q){var q,ne=Q.length;return Y&&Y.state?(q=Y.state).wrap!==0&&q.mode!==11?d:q.mode===11&&u(1,Q,ne,0)!==q.check?-3:U(Y,Q,ne,ne)?(q.mode=31,-4):(q.havedict=1,m):d},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,r){var o=e("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],g=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(v,y,m,d,f,x,k,P){var S,E,M,T,D,I,N,O,F,U=P.bits,Y=0,Q=0,q=0,ne=0,J=0,re=0,X=0,j=0,Z=0,W=0,te=null,le=0,oe=new o.Buf16(16),Ee=new o.Buf16(16),Ae=null,ve=0;for(Y=0;Y<=15;Y++)oe[Y]=0;for(Q=0;Q<d;Q++)oe[y[m+Q]]++;for(J=U,ne=15;1<=ne&&oe[ne]===0;ne--);if(ne<J&&(J=ne),ne===0)return f[x++]=20971520,f[x++]=20971520,P.bits=1,0;for(q=1;q<ne&&oe[q]===0;q++);for(J<q&&(J=q),Y=j=1;Y<=15;Y++)if(j<<=1,(j-=oe[Y])<0)return-1;if(0<j&&(v===0||ne!==1))return-1;for(Ee[1]=0,Y=1;Y<15;Y++)Ee[Y+1]=Ee[Y]+oe[Y];for(Q=0;Q<d;Q++)y[m+Q]!==0&&(k[Ee[y[m+Q]]++]=Q);if(I=v===0?(te=Ae=k,19):v===1?(te=u,le-=257,Ae=s,ve-=257,256):(te=w,Ae=g,-1),Y=q,D=x,X=Q=W=0,M=-1,T=(Z=1<<(re=J))-1,v===1&&852<Z||v===2&&592<Z)return 1;for(;;){for(N=Y-X,F=k[Q]<I?(O=0,k[Q]):k[Q]>I?(O=Ae[ve+k[Q]],te[le+k[Q]]):(O=96,0),S=1<<Y-X,q=E=1<<re;f[D+(W>>X)+(E-=S)]=N<<24|O<<16|F,E!==0;);for(S=1<<Y-1;W&S;)S>>=1;if(S!==0?(W&=S-1,W+=S):W=0,Q++,--oe[Y]==0){if(Y===ne)break;Y=y[m+k[Q]]}if(J<Y&&(W&T)!==M){for(X===0&&(X=J),D+=q,j=1<<(re=Y-X);re+X<ne&&!((j-=oe[re+X])<=0);)re++,j<<=1;if(Z+=1<<re,v===1&&852<Z||v===2&&592<Z)return 1;f[M=W&T]=J<<24|re<<16|D-x}}return W!==0&&(f[D+W]=Y-X<<24|64<<16),P.bits=J,0}},{"../utils/common":41}],51:[function(e,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,r){var o=e("../utils/common"),u=0,s=1;function w($e){for(var Be=$e.length;0<=--Be;)$e[Be]=0}var g=0,v=29,y=256,m=y+1+v,d=30,f=19,x=2*m+1,k=15,P=16,S=7,E=256,M=16,T=17,D=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=new Array(2*(m+2));w(U);var Y=new Array(2*d);w(Y);var Q=new Array(512);w(Q);var q=new Array(256);w(q);var ne=new Array(v);w(ne);var J,re,X,j=new Array(d);function Z($e,Be,Oe,Ge,Ie){this.static_tree=$e,this.extra_bits=Be,this.extra_base=Oe,this.elems=Ge,this.max_length=Ie,this.has_stree=$e&&$e.length}function W($e,Be){this.dyn_tree=$e,this.max_code=0,this.stat_desc=Be}function te($e){return $e<256?Q[$e]:Q[256+($e>>>7)]}function le($e,Be){$e.pending_buf[$e.pending++]=255&Be,$e.pending_buf[$e.pending++]=Be>>>8&255}function oe($e,Be,Oe){$e.bi_valid>P-Oe?($e.bi_buf|=Be<<$e.bi_valid&65535,le($e,$e.bi_buf),$e.bi_buf=Be>>P-$e.bi_valid,$e.bi_valid+=Oe-P):($e.bi_buf|=Be<<$e.bi_valid&65535,$e.bi_valid+=Oe)}function Ee($e,Be,Oe){oe($e,Oe[2*Be],Oe[2*Be+1])}function Ae($e,Be){for(var Oe=0;Oe|=1&$e,$e>>>=1,Oe<<=1,0<--Be;);return Oe>>>1}function ve($e,Be,Oe){var Ge,Ie,je=new Array(k+1),qe=0;for(Ge=1;Ge<=k;Ge++)je[Ge]=qe=qe+Oe[Ge-1]<<1;for(Ie=0;Ie<=Be;Ie++){var Ue=$e[2*Ie+1];Ue!==0&&($e[2*Ie]=Ae(je[Ue]++,Ue))}}function ke($e){var Be;for(Be=0;Be<m;Be++)$e.dyn_ltree[2*Be]=0;for(Be=0;Be<d;Be++)$e.dyn_dtree[2*Be]=0;for(Be=0;Be<f;Be++)$e.bl_tree[2*Be]=0;$e.dyn_ltree[2*E]=1,$e.opt_len=$e.static_len=0,$e.last_lit=$e.matches=0}function Ce($e){8<$e.bi_valid?le($e,$e.bi_buf):0<$e.bi_valid&&($e.pending_buf[$e.pending++]=$e.bi_buf),$e.bi_buf=0,$e.bi_valid=0}function Pe($e,Be,Oe,Ge){var Ie=2*Be,je=2*Oe;return $e[Ie]<$e[je]||$e[Ie]===$e[je]&&Ge[Be]<=Ge[Oe]}function Me($e,Be,Oe){for(var Ge=$e.heap[Oe],Ie=Oe<<1;Ie<=$e.heap_len&&(Ie<$e.heap_len&&Pe(Be,$e.heap[Ie+1],$e.heap[Ie],$e.depth)&&Ie++,!Pe(Be,Ge,$e.heap[Ie],$e.depth));)$e.heap[Oe]=$e.heap[Ie],Oe=Ie,Ie<<=1;$e.heap[Oe]=Ge}function Le($e,Be,Oe){var Ge,Ie,je,qe,Ue=0;if($e.last_lit!==0)for(;Ge=$e.pending_buf[$e.d_buf+2*Ue]<<8|$e.pending_buf[$e.d_buf+2*Ue+1],Ie=$e.pending_buf[$e.l_buf+Ue],Ue++,Ge===0?Ee($e,Ie,Be):(Ee($e,(je=q[Ie])+y+1,Be),(qe=I[je])!==0&&oe($e,Ie-=ne[je],qe),Ee($e,je=te(--Ge),Oe),(qe=N[je])!==0&&oe($e,Ge-=j[je],qe)),Ue<$e.last_lit;);Ee($e,E,Be)}function Te($e,Be){var Oe,Ge,Ie,je=Be.dyn_tree,qe=Be.stat_desc.static_tree,Ue=Be.stat_desc.has_stree,Je=Be.stat_desc.elems,et=-1;for($e.heap_len=0,$e.heap_max=x,Oe=0;Oe<Je;Oe++)je[2*Oe]!==0?($e.heap[++$e.heap_len]=et=Oe,$e.depth[Oe]=0):je[2*Oe+1]=0;for(;$e.heap_len<2;)je[2*(Ie=$e.heap[++$e.heap_len]=et<2?++et:0)]=1,$e.depth[Ie]=0,$e.opt_len--,Ue&&($e.static_len-=qe[2*Ie+1]);for(Be.max_code=et,Oe=$e.heap_len>>1;1<=Oe;Oe--)Me($e,je,Oe);for(Ie=Je;Oe=$e.heap[1],$e.heap[1]=$e.heap[$e.heap_len--],Me($e,je,1),Ge=$e.heap[1],$e.heap[--$e.heap_max]=Oe,$e.heap[--$e.heap_max]=Ge,je[2*Ie]=je[2*Oe]+je[2*Ge],$e.depth[Ie]=($e.depth[Oe]>=$e.depth[Ge]?$e.depth[Oe]:$e.depth[Ge])+1,je[2*Oe+1]=je[2*Ge+1]=Ie,$e.heap[1]=Ie++,Me($e,je,1),2<=$e.heap_len;);$e.heap[--$e.heap_max]=$e.heap[1],function(nt,st){var gt,_t,wt,He,Ve,ze,Ne=st.dyn_tree,We=st.max_code,Fe=st.stat_desc.static_tree,Ye=st.stat_desc.has_stree,Ke=st.stat_desc.extra_bits,Ze=st.stat_desc.extra_base,ot=st.stat_desc.max_length,Qe=0;for(He=0;He<=k;He++)nt.bl_count[He]=0;for(Ne[2*nt.heap[nt.heap_max]+1]=0,gt=nt.heap_max+1;gt<x;gt++)ot<(He=Ne[2*Ne[2*(_t=nt.heap[gt])+1]+1]+1)&&(He=ot,Qe++),Ne[2*_t+1]=He,We<_t||(nt.bl_count[He]++,Ve=0,Ze<=_t&&(Ve=Ke[_t-Ze]),ze=Ne[2*_t],nt.opt_len+=ze*(He+Ve),Ye&&(nt.static_len+=ze*(Fe[2*_t+1]+Ve)));if(Qe!==0){do{for(He=ot-1;nt.bl_count[He]===0;)He--;nt.bl_count[He]--,nt.bl_count[He+1]+=2,nt.bl_count[ot]--,Qe-=2}while(0<Qe);for(He=ot;He!==0;He--)for(_t=nt.bl_count[He];_t!==0;)We<(wt=nt.heap[--gt])||(Ne[2*wt+1]!==He&&(nt.opt_len+=(He-Ne[2*wt+1])*Ne[2*wt],Ne[2*wt+1]=He),_t--)}}($e,Be),ve(je,et,$e.bl_count)}function ye($e,Be,Oe){var Ge,Ie,je=-1,qe=Be[1],Ue=0,Je=7,et=4;for(qe===0&&(Je=138,et=3),Be[2*(Oe+1)+1]=65535,Ge=0;Ge<=Oe;Ge++)Ie=qe,qe=Be[2*(Ge+1)+1],++Ue<Je&&Ie===qe||(Ue<et?$e.bl_tree[2*Ie]+=Ue:Ie!==0?(Ie!==je&&$e.bl_tree[2*Ie]++,$e.bl_tree[2*M]++):Ue<=10?$e.bl_tree[2*T]++:$e.bl_tree[2*D]++,je=Ie,et=(Ue=0)===qe?(Je=138,3):Ie===qe?(Je=6,3):(Je=7,4))}function _e($e,Be,Oe){var Ge,Ie,je=-1,qe=Be[1],Ue=0,Je=7,et=4;for(qe===0&&(Je=138,et=3),Ge=0;Ge<=Oe;Ge++)if(Ie=qe,qe=Be[2*(Ge+1)+1],!(++Ue<Je&&Ie===qe)){if(Ue<et)for(;Ee($e,Ie,$e.bl_tree),--Ue!=0;);else Ie!==0?(Ie!==je&&(Ee($e,Ie,$e.bl_tree),Ue--),Ee($e,M,$e.bl_tree),oe($e,Ue-3,2)):Ue<=10?(Ee($e,T,$e.bl_tree),oe($e,Ue-3,3)):(Ee($e,D,$e.bl_tree),oe($e,Ue-11,7));je=Ie,et=(Ue=0)===qe?(Je=138,3):Ie===qe?(Je=6,3):(Je=7,4)}}w(j);var we=!1;function Se($e,Be,Oe,Ge){oe($e,(g<<1)+(Ge?1:0),3),function(Ie,je,qe,Ue){Ce(Ie),Ue&&(le(Ie,qe),le(Ie,~qe)),o.arraySet(Ie.pending_buf,Ie.window,je,qe,Ie.pending),Ie.pending+=qe}($e,Be,Oe,!0)}r._tr_init=function($e){we||(function(){var Be,Oe,Ge,Ie,je,qe=new Array(k+1);for(Ie=Ge=0;Ie<v-1;Ie++)for(ne[Ie]=Ge,Be=0;Be<1<<I[Ie];Be++)q[Ge++]=Ie;for(q[Ge-1]=Ie,Ie=je=0;Ie<16;Ie++)for(j[Ie]=je,Be=0;Be<1<<N[Ie];Be++)Q[je++]=Ie;for(je>>=7;Ie<d;Ie++)for(j[Ie]=je<<7,Be=0;Be<1<<N[Ie]-7;Be++)Q[256+je++]=Ie;for(Oe=0;Oe<=k;Oe++)qe[Oe]=0;for(Be=0;Be<=143;)U[2*Be+1]=8,Be++,qe[8]++;for(;Be<=255;)U[2*Be+1]=9,Be++,qe[9]++;for(;Be<=279;)U[2*Be+1]=7,Be++,qe[7]++;for(;Be<=287;)U[2*Be+1]=8,Be++,qe[8]++;for(ve(U,m+1,qe),Be=0;Be<d;Be++)Y[2*Be+1]=5,Y[2*Be]=Ae(Be,5);J=new Z(U,I,y+1,m,k),re=new Z(Y,N,0,d,k),X=new Z(new Array(0),O,0,f,S)}(),we=!0),$e.l_desc=new W($e.dyn_ltree,J),$e.d_desc=new W($e.dyn_dtree,re),$e.bl_desc=new W($e.bl_tree,X),$e.bi_buf=0,$e.bi_valid=0,ke($e)},r._tr_stored_block=Se,r._tr_flush_block=function($e,Be,Oe,Ge){var Ie,je,qe=0;0<$e.level?($e.strm.data_type===2&&($e.strm.data_type=function(Ue){var Je,et=4093624447;for(Je=0;Je<=31;Je++,et>>>=1)if(1&et&&Ue.dyn_ltree[2*Je]!==0)return u;if(Ue.dyn_ltree[18]!==0||Ue.dyn_ltree[20]!==0||Ue.dyn_ltree[26]!==0)return s;for(Je=32;Je<y;Je++)if(Ue.dyn_ltree[2*Je]!==0)return s;return u}($e)),Te($e,$e.l_desc),Te($e,$e.d_desc),qe=function(Ue){var Je;for(ye(Ue,Ue.dyn_ltree,Ue.l_desc.max_code),ye(Ue,Ue.dyn_dtree,Ue.d_desc.max_code),Te(Ue,Ue.bl_desc),Je=f-1;3<=Je&&Ue.bl_tree[2*F[Je]+1]===0;Je--);return Ue.opt_len+=3*(Je+1)+5+5+4,Je}($e),Ie=$e.opt_len+3+7>>>3,(je=$e.static_len+3+7>>>3)<=Ie&&(Ie=je)):Ie=je=Oe+5,Oe+4<=Ie&&Be!==-1?Se($e,Be,Oe,Ge):$e.strategy===4||je===Ie?(oe($e,2+(Ge?1:0),3),Le($e,U,Y)):(oe($e,4+(Ge?1:0),3),function(Ue,Je,et,nt){var st;for(oe(Ue,Je-257,5),oe(Ue,et-1,5),oe(Ue,nt-4,4),st=0;st<nt;st++)oe(Ue,Ue.bl_tree[2*F[st]+1],3);_e(Ue,Ue.dyn_ltree,Je-1),_e(Ue,Ue.dyn_dtree,et-1)}($e,$e.l_desc.max_code+1,$e.d_desc.max_code+1,qe+1),Le($e,$e.dyn_ltree,$e.dyn_dtree)),ke($e),Ge&&Ce($e)},r._tr_tally=function($e,Be,Oe){return $e.pending_buf[$e.d_buf+2*$e.last_lit]=Be>>>8&255,$e.pending_buf[$e.d_buf+2*$e.last_lit+1]=255&Be,$e.pending_buf[$e.l_buf+$e.last_lit]=255&Oe,$e.last_lit++,Be===0?$e.dyn_ltree[2*Oe]++:($e.matches++,Be--,$e.dyn_ltree[2*(q[Oe]+y+1)]++,$e.dyn_dtree[2*te(Be)]++),$e.last_lit===$e.lit_bufsize-1},r._tr_align=function($e){oe($e,2,3),Ee($e,E,U),function(Be){Be.bi_valid===16?(le(Be,Be.bi_buf),Be.bi_buf=0,Be.bi_valid=0):8<=Be.bi_valid&&(Be.pending_buf[Be.pending++]=255&Be.bi_buf,Be.bi_buf>>=8,Be.bi_valid-=8)}($e)}},{"../utils/common":41}],53:[function(e,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,r){(function(o){(function(u,s){if(!u.setImmediate){var w,g,v,y,m=1,d={},f=!1,x=u.document,k=Object.getPrototypeOf&&Object.getPrototypeOf(u);k=k&&k.setTimeout?k:u,w={}.toString.call(u.process)==="[object process]"?function(M){process.nextTick(function(){S(M)})}:function(){if(u.postMessage&&!u.importScripts){var M=!0,T=u.onmessage;return u.onmessage=function(){M=!1},u.postMessage("","*"),u.onmessage=T,M}}()?(y="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",E,!1):u.attachEvent("onmessage",E),function(M){u.postMessage(y+M,"*")}):u.MessageChannel?((v=new MessageChannel).port1.onmessage=function(M){S(M.data)},function(M){v.port2.postMessage(M)}):x&&"onreadystatechange"in x.createElement("script")?(g=x.documentElement,function(M){var T=x.createElement("script");T.onreadystatechange=function(){S(M),T.onreadystatechange=null,g.removeChild(T),T=null},g.appendChild(T)}):function(M){setTimeout(S,0,M)},k.setImmediate=function(M){typeof M!="function"&&(M=new Function(""+M));for(var T=new Array(arguments.length-1),D=0;D<T.length;D++)T[D]=arguments[D+1];var I={callback:M,args:T};return d[m]=I,w(m),m++},k.clearImmediate=P}function P(M){delete d[M]}function S(M){if(f)setTimeout(S,0,M);else{var T=d[M];if(T){f=!0;try{(function(D){var I=D.callback,N=D.args;switch(N.length){case 0:I();break;case 1:I(N[0]);break;case 2:I(N[0],N[1]);break;case 3:I(N[0],N[1],N[2]);break;default:I.apply(s,N)}})(T)}finally{P(M),f=!1}}}}function E(M){M.source===u&&typeof M.data=="string"&&M.data.indexOf(y)===0&&S(+M.data.slice(y.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,commonjsGlobal$1!==void 0?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10);var JSZip=jszip_minExports,Outline=function(){return _createClass(function e(n){_classCallCheck(this,e),this.doc=n.doc,this.messageHandler=n.messageHandler,this.outline=n.outline,this.index=n.index,this.children=n.children||[],this.parent=n.parent},[{key:"pageNumber",get:function(){return this.outline.pageNumber}},{key:"title",get:function(){return this.outline.title}},{key:"level",get:function(){return this.outline.level}},{key:"getOutline",value:function(){return this.outline}}])}(),ContentEditManager=function(){return _createClass(function s(w){_classCallCheck(this,s),this.documentViewer=w,this.editAreaInfoPtr=null,this.selectedEditBox=null},[{key:"startContentEditMode",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function s(){return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:this.documentViewer.setToolMode("editor");case 1:case"end":return w.stop()}},s,this)})),function(){return u.apply(this,arguments)})},{key:"endContentEditMode",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function s(){return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:this.documentViewer.setToolMode("view");case 1:case"end":return w.stop()}},s,this)})),function(){return o.apply(this,arguments)})},{key:"getSelectedEditBox",value:function(){return this.selectedEditBox}},{key:"setSelectedEditBox",value:function(s){this.selectedEditBox=s}},{key:"getCopyArea",value:function(){return this.editAreaInfo}},{key:"setCopyArea",value:function(s){this.editAreaInfo=s}},{key:"pasteAreaInPage",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function s(w,g){var v,y,m,d,f,x,k,P;return _regeneratorRuntime().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(g){S.next=5;break}if(v=this.getCopyArea()){S.next=4;break}return S.abrupt("return");case 4:g={rect:v.rect,editAreaInfoPtr:v.editAreaInfoPtr};case 5:if(y=this.documentViewer,m=w-1,d=y.pdfViewer._pages[m],f=d.contentContainer,x=f&&f.editPagePtr){S.next=15;break}return S.next=13,d.getEditAnnotation();case 13:f=S.sent,x=f.editPagePtr;case 15:return S.next=17,y.messageHandler.sendWithPromise("PasteArea",{pagePtr:y.pagesPtr[m].pagePtr,editPagePtr:x,pageIndex:m,editAreaInfoPtr:g.editAreaInfoPtr,rect:g.rect});case 17:return k=S.sent,S.next=20,f.addEditArea(k);case 20:P=S.sent,f.handleOperateList({editPagePtr:x,editAreaIndex:P.editAreaIndex,editAreaPtr:k,pageIndex:m});case 22:case"end":return S.stop()}},s,this)})),function(s,w){return r.apply(this,arguments)})},{key:"getSelectedText",value:function(s){var w=this.documentViewer;if(s&&(s<1||s>w.pagesCount))return"";var g=w.pdfViewer._pages,v="";if(s)v+=this.getPageSelectedText(s);else for(var y=0;y<g.length;y++)g[y].contentContainer&&(v+=this.getPageSelectedText(y+1));return v}},{key:"getPageSelectedText",value:function(s){if(!s)return"";var w=s-1,g=this.documentViewer.pdfViewer._pages[w].contentContainer;if(!g)return"";for(var v=g.frameEditorList,y="",m=0;m<v.length;m++){var d=v[m];d.type==="text"&&d.selectedCharRange&&(y+=d.selectedText)}return y}},{key:"selectedEditBoxText",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var w;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if((w=this.getSelectedEditBox())&&w.type==="text"){g.next=3;break}return g.abrupt("return");case 3:if(g.t0=w.selectedAllText,!g.t0){g.next=7;break}return g.next=7,w.selectedAllText();case 7:case"end":return g.stop()}},s,this)})),function(){return n.apply(this,arguments)})},{key:"getEditBoxSelectedText",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function s(){var w,g;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(w=this.getSelectedEditBox()){v.next=3;break}return v.abrupt("return");case 3:if(w.selectedCharRange){v.next=5;break}return v.abrupt("return","");case 5:return v.next=7,w.getText();case 7:return g=v.sent,v.abrupt("return",g);case 9:case"end":return v.stop()}},s,this)})),function(){return e.apply(this,arguments)})}]);var e,n,r,o,u}();function convertFileToBuffer(e){return new Promise(function(n,r){var o=new FileReader;o.onload=function(){var u=new Uint8Array(o.result);n(u)},o.onerror=function(){r(o.error)},o.readAsArrayBuffer(e)})}var AnnotationManager=function(){return _createClass(function e(n){_classCallCheck(this,e),this.selectedAnnotation=[],this.documentViewer=n},[{key:"selectAnnotation",value:function(e){e&&this.selectedAnnotation.indexof(e)<0&&this.selectedAnnotation.push(e)}},{key:"setAnnotationStyles",value:function(e,n){Object.keys(n).forEach(function(r){e[r]=n[r]})}},{key:"createMeasurementAnnotation",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){var r,o,u,s,w,g,v;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:this.documentViewer.annotationHistory.push(e),Array.isArray(e)||(e=[e]),o=0;case 3:if(!(o<e.length)){y.next=28;break}if(u=e[o],!(Number(u.pageIndex)+1>this.documentViewer.pagesCount)){y.next=7;break}return y.abrupt("continue",25);case 7:return!u.operate&&(u.operate="add-annot"),!u.author&&(u.author=this.documentViewer.annotator),!u.date&&(u.date=new Date),(r=this.documentViewer).annotations||(r.annotations={}),this.documentViewer.pushAnnotations(u),s=this.documentViewer.pagesPtr[u.pageIndex].pagePtr,y.next=15,this.documentViewer.messageHandler.sendWithPromise("CreateMeasurementAnnotation",{doc:this.documentViewer.doc,pagePtr:s,annotation:u});case 15:if(!(w=y.sent)||!w.code){y.next=20;break}return this.documentViewer.eventBus.dispatch("message",{type:"ERROR",message:w.message}),console.log(w.message),y.abrupt("return",w);case 20:g=w.annotPtr,v=w.rulerPtr,u.doc=this.documentViewer.doc,u.pagePtr=s,u.annotPtr=g,u.rulerPtr=v;case 25:o++,y.next=3;break;case 28:return y.abrupt("return",e);case 29:case"end":return y.stop()}},n,this)}))}},{key:"editMeasurementAnnotation",value:function(e){return __awaiter(this,void 0,void 0,_regeneratorRuntime().mark(function n(){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,this.documentViewer.messageHandler.sendWithPromise("EditMeasurementAnnotation",{doc:this.documentViewer.doc,annotation:e});case 4:this.documentViewer.eventBus.dispatch("annotationUpdated",{annotations:this.documentViewer.annotations});case 5:case"end":return r.stop()}},n,this)}))}},{key:"drawAnnotationsFromList",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++)this.documentViewer.pdfViewer&&this.documentViewer.pdfViewer.renderAnnotation(e[r],n)}},{key:"pushAnnotationToLayer",value:function(e){var n,r;if(this.documentViewer.pdfViewer){var o=(r=(n=this.documentViewer.pdfViewer)===null||n===void 0?void 0:n._pages)===null||r===void 0?void 0:r[e.annotation.pageIndex];o&&o.compdfAnnotationLayer&&o.compdfAnnotationLayer.annotationsArray.push(e)}}}])}();pdfExports.GlobalWorkerOptions.workerSrc="./lib/pdf.worker.min.js";var CMAP_URL="./cmaps/";function onKeyDown(e){if(this._isCtrlKeyDown=e.key==="Control",e.target.tagName!=="INPUT"&&e.target.tagName!=="TEXTAREA"){var n=e.keyCode||e.which;if(n===8||n===46){var r=annotationStore.selectedElementName;r&&this.deleteAnnotations({name:r})}else if(n===27){var o=annotationStore.selectedElementName;o&&this.deselectAnnotation({name:o})}}}function onKeyUp(e){e.key==="Control"&&(this._isCtrlKeyDown=!1)}var _ComPDFKitViewer_brand=new WeakSet,ComPDFKitViewer=function(){return _createClass(function He(Ve){_classCallCheck(this,He),_classPrivateMethodInitSpec(this,_ComPDFKitViewer_brand),_defineProperty$1(this,"_pwd",""),_defineProperty$1(this,"_oldPwd",""),_defineProperty$1(this,"_textSearch",null),_defineProperty$1(this,"_activeSearchIndex",0),_defineProperty$1(this,"_fileList",null),_defineProperty$1(this,"_version","2.7.1"),this.config=Ve,this.viewerContainer=null,this.pdfLoadingTask=null,this.printService=null,this.pdfSidebar=null,this.pdfOutlineViewer=null,this.outlines=[],this.pdfLayerViewer=null,this.pdfDocument=null,this.downloadComplete=!1,this.isInitialViewSet=!1,this.pdfLinkService=null,this.externalServices=GenericExternalServices,this.percent=0,this.pageChangedCallback=null,this.scaleChangedCallback=null,this.annotationsNumChangedCallback=null,this.distanceChangedCallback=null,this.permissionPasswordCallback=null,this.verified=!1,this.isFillConsecutively=!1,this._license="",this._token=null,this._pdfId=null,this.annotations=null,this.annotationHistory=[],this._annotationMode=0,this._boundEvents=Object.create(null),this._title=document.title,this.activeTool="",this.color="color",this.pagesPtr=[],this.saveAction=null,this.enableReply=!0,this.isAnnotationPopup=!0,this.enableDefaultFont=!1,this.enableCustomFont=!1,this.fontsJson=null,this._permission={allowsPrinting:!0,allowsCopying:!0,allowsDocumentChanges:!0},this.webFontURL="https://www.compdf.com/fonts/",this.optionUrl={baseUrl:"https://wms.compdf.com",verifyUrl:"/api/license/verify/v2",webviewBaseUrl:"https://web-viewer-backend.compdf.com",uploadUrl:"/web-viewer/annotate/openPdfToAnnotate",editUrl:"/web-viewer/annotate/edit",saveUrl:"/web-viewer/annotate/save",flattenUrl:"/web-viewer/annotate/saveAndFlatten",uploadAnnotationsUrl:"/web-viewer/annotate/importAnnotateToPdf",downloadAnnotation:"/web-viewer/annotate/exportAnnotate",compareUrl:"/web-viewer/annotate/pdfCompare"},this.eventBus=new EventBus,this.toolMode="",this.$t=Ve.$t,this.fontFileInited=!1,this.contentEditAnnotationsManager={},this.initWorker(),this.annotator="Guest",this.isAnnotationModified=!1,this.isContentEditModyfied=!1,this.redactionList=[],this.layers=[],this.ocgsPtr=null,this.isRenderAnnotations=!1,this.colorList=[],this.renderLayerPermission=!1,this.queue=[],this.isProcessing=!1},[{key:"enqueue",value:function(He){var Ve=this;return new Promise(function(ze,Ne){var We=function(){var Fe=_asyncToGenerator(_regeneratorRuntime().mark(function Ye(){var Ke;return _regeneratorRuntime().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return Ze.prev=0,Ze.next=3,He();case 3:Ke=Ze.sent,ze(Ke),Ze.next=10;break;case 7:Ze.prev=7,Ze.t0=Ze.catch(0),Ne(Ze.t0);case 10:case"end":return Ze.stop()}},Ye,null,[[0,7]])}));return function(){return Fe.apply(this,arguments)}}();Ve.queue.push(We),Ve.processQueue()})}},{key:"processQueue",value:(wt=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve;return _regeneratorRuntime().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(!this.isProcessing&&this.queue.length!==0){ze.next=2;break}return ze.abrupt("return");case 2:return this.isProcessing=!0,Ve=this.queue.shift(),ze.prev=4,ze.next=7,Ve();case 7:return ze.prev=7,this.isProcessing=!1,this.processQueue(),ze.finish(7);case 11:case"end":return ze.stop()}},He,this,[[4,,7,11]])})),function(){return wt.apply(this,arguments)})},{key:"pagesCount",get:function(){return this.doc?this._pagesCount:0}},{key:"annotationsCount",get:function(){return this.pdfViewer.annotationStorage?this.pdfViewer.annotationStorage.size:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(He){this.pdfViewer.currentPageNumber=He}},{key:"currentPageNumber",get:function(){return this.pdfViewer.currentPageNumber}},{key:"scale",get:function(){return this.pdfViewer.currentScale}},{key:"isDocumentModified",get:function(){return this.isAnnotationModified||this.isContentEditModyfied}},{key:"getPageWidth",value:function(He){return this.pagesPtr[He-1].width}},{key:"getPageHeight",value:function(He){return this.pagesPtr[He-1].height}},{key:"initWorker",value:function(){var He=new PDFWorker;this.worker=He;var Ve=He.messageHandler;this.messageHandler=Ve}},{key:"_decrypt",value:function(He){var Ve=new JSEncrypt;Ve.setPrivateKey(`MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCb9LJZzBAOR3YDT0/rLqY1pCu6
    ge7lb0aU4k/aTnxSz10t/JUUtGMvQ2tBy36hjwulouM6xoFSm8gnjovALuVpTltRPPEfN+uX6AVy
    Wa58TsS2+Q9JRPHJlOb4sDEriUnzLtonahqF/S/EiijMAkNc2b1KNNUb2bDNmLi6YvT7d1sh3iIf
    kTggsyt3UVUjh2exEVpb8Ww4grmLJjFssi5nZksLDhlA0MUr4dPmIcDl0RlIwHTsxrJbewnX7kNd
    MsSvCxYV1EtmBx9KRCu8ON2bRwKaaWd7fAT9yZWYpjQmbZ5A4CAqDcEAlW8RrhMv0FNKVn1/GMVu
    DC/PsWTyI1fJAgMBAAECggEAazkHThmwiEC1cH0dEzLVb1faALbIitHAkygtgognjb+n7rATx1Jm
    Rt5xZaEFBQqWFWEyHPzRePxF1nx4tL8JVydaPTZLCQ2nWp9Y70+dWTXGpY4C5nsSSWeojR6GD8qq
    Hxn9PtACQFDcgKIEfo6nxbSmIdjFFArNNe1kRDE5AZHtZi7Q6JDRewp6mESrSGED1JodQ4xJoEZl
    1HPvMTxcGGQk/8EZOWXaGvGuBEfIMc33g61YxxhWXb6Rf7x8QKpa2cRLbqN+74wdiWyQUAcSjZSi
    LzeY0a4h7DKkhBEHWXT4svrXsF1RjMRpTi8amxNgUP7RSSTiF9iT6fpGpnwWKQKBgQDsP18lwMjl
    blt8mKqrL9SKVMoOLKUaci9WNV14qEUgNp/RIqjflS0wasbRo7suix2Cwd58ZVAmueuH5W9ZM9NP
    A9RP5vnm8fqfqMZIq+Z7ORhry5QpGlOo0tKkik716kTRXl5w3O/YcR8wBZ7Xzwh467OYcRMNnr2i
    8F5eT4Ny5wKBgQCo/sQrc4KqsYwdWWZW+O92jIylxgtCQsZNg1cXql91IuB3lx1HnDaN/R2MeCkp
    ok+hYXWB0848321x+vYdL9ivLUrnHpNoycFEuhqNTYbyZWnq1tKPz9RDhPIwEmlQVW3dU9hWEjF5
    6sa4NXP7/lSiYaQe0FS4BYQ7KCwahxw5zwKBgQCyCYv92oxLguBFRJQR0EjfOsjO58xA4t5TnIHl
    hQIbJa9JH1KetEBK5Z0Rrc9JYyOJP+sYWg2OMbyTPE+urMTJHjypPosEBUX3fmx3pbxbDosd6Vyt
    oR588uw1fdnFr5fPJMwNSCMkPRPgz8uGHYrn/dDpyAUw1XlaSsUDU+7e7wKBgDHCej6VD3d1Od12
    cmTPfar5bXxuWOhUwxEVyDImr17NOyzbaPqp64JZcjbnNq+UpD/Pc4sbs5FG9HHoREmJyhKikniF
    D0B+j5LN/X13w3FiHRLR2EQSHN0YqzsuYKYP0X6m7n9BciIE2ChrTNB5LbB2cZ3FF/zrWukURhA1
    kkEPAoGBAIpoB6ehuqTn7cisbXjaLqwzX35y50+KED2TamB1FkTjfU5YPsSnKBX9CfCeEd+yr08r
    mecHPUYVj5SpLlcpzx+n7taJCzNJ4SuE186qwHR+MGAS3reXsz5l5GVu7WSH2uKZ7OuXnzCJC4/r
    dx/f2C0wOi6fdC46fAZVACROoV9T`);for(var ze=Base64.decode(He),Ne=ze.length,We="",Fe=0;Fe<Ne;){var Ye=Base64.encode(ze.substr(Fe,256));We+=Ve.decrypt(Ye),Fe+=256}return We||!1}},{key:"_verifyLicense",value:(_t=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe;return _regeneratorRuntime().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return ze=window.location.hostname.split(".").slice(-2).join("."),Ne=ze,We=this.messageHandler,Ye.next=5,We.sendWithPromise("InitConfig",{license:Ve,appId:Ne,version:this._version});case 5:return Fe=Ye.sent,Ye.abrupt("return",Fe);case 7:case"end":return Ye.stop()}},He,this)})),function(He){return _t.apply(this,arguments)})},{key:"_twoStepVerification",value:(gt=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke=this;return _regeneratorRuntime().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return Ze.next=2,this._verifyLicense(Ve);case 2:if(ze=Ze.sent,Ne=Ve,!ze.code){Ze.next=16;break}return We=window.location.hostname.split(".").slice(-2).join("."),Fe=CryptoJS.MD5("".concat(Ve,"7").concat(We,"compdfkitonlinelicense")).toString(),Ye={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({license:Ne,platform:7,app_id:We,signature:Fe})},Ze.next=10,fetch(this.optionUrl.baseUrl+this.optionUrl.verifyUrl,Ye).then(function(ot){return ot.json()}).then(function(ot){if(ot.code===200){var Qe=Ke._decrypt(ot.data.license);return Qe||(Ke.eventBus.dispatch("message",{type:"ERROR",message:"Invalid License"}),console.log("Invalid License"),!1)}return Ke.eventBus.dispatch("message",{type:"ERROR",message:ot.message}),console.log(ot.message),!1}).catch(function(ot){return Ke.eventBus.dispatch("message",{type:"ERROR",message:"Network Error"}),console.log({error:!0,message:ot.message}),!1});case 10:if(Ne=Ze.sent){Ze.next=13;break}return Ze.abrupt("return",!1);case 13:return Ze.next=15,this._verifyLicense(Ne);case 15:ze=Ze.sent;case 16:if(ze.code){Ze.next=21;break}return this._license=Ne,Ze.abrupt("return",!0);case 21:return this.eventBus.dispatch("message",{type:"ERROR",message:ze.message}),console.log(ze.message),Ze.abrupt("return",!1);case 24:case"end":return Ze.stop()}},He,this)})),function(He){return gt.apply(this,arguments)})},{key:"initConfig",value:(st=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye=this;return _regeneratorRuntime().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(Ve.license){Ke.next=4;break}return this.eventBus.dispatch("message",{type:"ERROR",message:"License code not exists"}),console.log("License code not exists"),Ke.abrupt("return",!1);case 4:return this.license=Ve.license,Ke.prev=5,Ke.next=8,this.worker.promise;case 8:Ke.next=14;break;case 10:return Ke.prev=10,Ke.t0=Ke.catch(5),console.log(Ke.t0),Ke.abrupt("return");case 14:if(Ve.webviewerServer==="Server"&&(this.webviewerServer=!0),"enableDefaultFont"in Ve&&(this.enableDefaultFont=Ve.enableDefaultFont),"enableReply"in Ve&&(this.enableReply=Ve.enableReply),"isAnnotationPopup"in Ve&&(this.isAnnotationPopup=Ve.isAnnotationPopup),Ve.enableCustomFont&&(this.enableCustomFont=!0),Ve.webFontURL&&(this.enableCustomFont=!0,this.webFontURL=Ve.webFontURL.endsWith("/")?Ve.webFontURL:Ve.webFontURL+"/"),this.webviewerServer||!this.enableCustomFont){Ke.next=45;break}return ze=this.webFontURL,Ke.next=24,fetch(ze+"fonts.json");case 24:if(!(Ne=Ke.sent).ok){Ke.next=31;break}return Ke.next=28,Ne.json();case 28:this.fontsJson=Ke.sent,Ke.next=32;break;case 31:console.error("Invalid webFontURL");case 32:if(!(this.fontsJson&&this.fontsJson[0].filePath&&this.fontsJson[0].filePath.endsWith("brotli"))){Ke.next=44;break}return Ke.next=35,fetch(ze+"font.ff");case 35:if(!(We=Ke.sent).ok){Ke.next=43;break}return Ke.next=39,We.arrayBuffer();case 39:Fe=Ke.sent,this._fileList=new Uint8Array(Fe),Ke.next=44;break;case 43:console.error("Invalid webFontURL");case 44:this.messageHandler.on("LoadFont",function(Ze){var ot=Ze.fontFamily;Ye.eventBus.dispatch("LoadFont",{fontFamily:ot})});case 45:Ve.autoJumpNextSign&&(this.autoJumpNextSign=Ve.autoJumpNextSign),Ve.isRenderAnnotations&&(this.isRenderAnnotations=Ve.isRenderAnnotations),Ve.renderLayerPermission&&(this.renderLayerPermission=Ve.renderLayerPermission),this.initColorFile(Ve.colorFile);case 49:case"end":return Ke.stop()}},He,this,[[5,10]])})),function(He){return st.apply(this,arguments)})},{key:"initializeViewer",value:function(He){var Ve=He.container,ze=He.viewer,Ne=He.thumbnailView,We=He.annotationView,Fe=He.findbarView,Ye=He.toggleButton;this._initializeViewerComponents({container:Ve,viewer:ze,thumbnailView:Ne,annotationView:We,findbarView:Fe,toggleButton:Ye}),this.initBindEvents(),Ne&&We&&(this.bindEvents(),this.bindWindowEvents())}},{key:"setTool",value:function(He){var Ve=He.tool,ze=He.color;this.activeTool=Ve,this.color=ze,this.eventBus.dispatch("toolChanged",{tool:Ve,color:ze})}},{key:"initAnnotations",value:function(He){for(var Ve=arguments.length>1&&arguments[1]!==void 0&&arguments[1],ze=0;ze<He.length;ze++){var Ne=this.handleAnnotations(He[ze],!0);if(Ne&&Ne.code)return!1;Ve&&this.pdfViewer.renderAnnotation(He[ze])}this.eventBus.dispatch("annotationUpdated",{annotations:this.annotations})}},{key:"handleAnnotations",value:(nt=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at,rt,ct=arguments;return _regeneratorRuntime().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(ze=ct.length>1&&ct[1]!==void 0&&ct[1],this.annotations||(this.annotations={}),!ze){ht.next=6;break}this.initAddAnnotations(Ve),ht.next=39;break;case 6:if(!(Number(Ve.pageIndex)+1>this.pagesCount)){ht.next=8;break}return ht.abrupt("return");case 8:if(this.pushAnnotations(Ve),this.webviewerServer&&Ve.type!=="stamp"){ht.next=39;break}if("destPage"in Ve&&(Ve.doc=this.doc,Ve.pageHeight=this.pagesPtr[Ve.pageIndex].height),Ve.type!=="custom"){ht.next=13;break}return ht.abrupt("return");case 13:return Ne=this.pagesPtr[Ve.pageIndex].pagePtr,ht.next=16,this.messageHandler.sendWithPromise("CreateAnnotation",{doc:this.doc,pagePtr:Ne,annotation:Ve});case 16:if(!(We=ht.sent)||!We.code){ht.next=21;break}return this.eventBus.dispatch("message",{type:"ERROR",message:We.message}),console.log(We.message),ht.abrupt("return",We);case 21:if(Fe=We.annotPtr,Ve.pagePtr=Ne,Ve.annotPtr=Fe,Ve.rect||!this.webviewerServer){ht.next=39;break}return ht.next=27,this.messageHandler.sendWithPromise("GetAnnotRect",{pagePtr:Ne,annotPtr:Fe});case 27:Ye=ht.sent,Ke=this.pdfViewer.getPageView(Ve.pageIndex),Ze=Ke.viewport.viewBox[2],ot=Ke.viewport.viewBox[3],Qe=Ye.right-Ye.left,at=Ye.bottom-Ye.top,rt={left:(Ze-Qe)/2,top:(ot-at)/2,right:(Ze+Qe)/2,bottom:(ot+at)/2},Ve.rect=rt;case 39:case"end":return ht.stop()}},He,this)})),function(He){return nt.apply(this,arguments)})},{key:"initAddAnnotations",value:function(He){var Ve=He.pageIndex,ze=this.annotations;ze[Ve]||(ze[Ve]=[]),He.index!==void 0?ze[Ve][He.index]=He:ze[Ve].push(He),annotationStore.annotationsAll||(annotationStore.annotationsAll=ze)}},{key:"pushAnnotations",value:function(He){var Ve=He.pageIndex,ze=this.annotations;ze[Ve]||(ze[Ve]=[],this.pdfViewer._pages[Ve].annotations=ze[Ve]),annotationStore.annotationsAll||(annotationStore.annotationsAll=ze),ze[Ve].push(He)}},{key:"addAnnotations",value:function(He){var Ve=this;(Array.isArray(He)?He:[He]).forEach(function(ze){Ve.handleAnnotationChange({type:"add",annotation:ze})})}},{key:"delAnnotations",value:(et=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe;return _regeneratorRuntime().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:ze=Array.isArray(Ve)?Ve:[Ve],Ne=_createForOfIteratorHelper(ze),Ye.prev=2,Ne.s();case 4:if((We=Ne.n()).done){Ye.next=10;break}return Fe=We.value,Ye.next=8,this.handleAnnotationChange({type:"delete",annotation:Fe});case 8:Ye.next=4;break;case 10:Ye.next=15;break;case 12:Ye.prev=12,Ye.t0=Ye.catch(2),Ne.e(Ye.t0);case 15:return Ye.prev=15,Ne.f(),Ye.finish(15);case 18:case"end":return Ye.stop()}},He,this,[[2,12,15,18]])})),function(He){return et.apply(this,arguments)})},{key:"deleteAnnotations",value:(Je=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke=this;return _regeneratorRuntime().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(Ve){Ze.next=6;break}if(this.annotations){Ze.next=3;break}return Ze.abrupt("return");case 3:if((Ve=Object.values(this.annotations).reduce(function(ot,Qe){return ot.concat(Qe)},[])).length){Ze.next=6;break}return Ze.abrupt("return");case 6:ze=JSON.parse(JSON.stringify(Array.isArray(Ve)?Ve:[Ve])),Ne=Object.values(this.annotations).reduce(function(ot,Qe){return ot.concat(Qe)},[]),We=_regeneratorRuntime().mark(function ot(Qe){var at,rt,ct,ht,yt;return _regeneratorRuntime().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:if("pageIndex"in ze[Qe]||(rt=Ne.find(function($t){return $t.name===ze[Qe].name}))&&(ze[Qe].pageIndex=rt.pageIndex),Ke.annotations[ze[Qe].pageIndex]){bt.next=3;break}return bt.abrupt("return",0);case 3:if(!Ke.pdfViewer.getAnnotation(ze[Qe]).editing){bt.next=6;break}return bt.abrupt("return",{v:void 0});case 6:if((ct=Ke.annotations[ze[Qe].pageIndex].findIndex(function($t){return($t==null?void 0:$t.name)===ze[Qe].name}))!==-1){bt.next=9;break}return bt.abrupt("return",0);case 9:if(ht=Ke.annotations[ze[Qe].pageIndex][ct],yt=null,(at=ht.replies)===null||at===void 0||!at.length){bt.next=17;break}return bt.next=14,Ke.messageHandler.sendWithPromise("RemoveFromPageIncludeReplyAnnot",{pagePtr:ht.pagePtr,annotPtr:ht.annotPtr});case 14:yt=bt.sent,bt.next=20;break;case 17:return bt.next=19,Ke.messageHandler.sendWithPromise("RemoveAnnot",{annotPtr:ht.annotPtr});case 19:yt=bt.sent;case 20:if(!yt||!yt.code){bt.next=24;break}return Ke.eventBus.dispatch("message",{type:"ERROR",message:yt.message}),console.log(yt.message),bt.abrupt("return",{v:void 0});case 24:Ke.annotations[ze[Qe].pageIndex].splice(ct,1),Ke.pdfViewer.deleteAnnotations(ht),Ke.eventBus.dispatch("annotationChange",{type:"delete",annotation:ht}),Ke.eventBus.dispatch("annotationUpdated",{annotations:Ke.annotations}),Ke.isAnnotationModified=!0;case 29:case"end":return bt.stop()}},ot)}),Ye=0;case 10:if(!(Ye<ze.length)){Ze.next=20;break}return Ze.delegateYield(We(Ye),"t0",12);case 12:if((Fe=Ze.t0)!==0){Ze.next=15;break}return Ze.abrupt("continue",17);case 15:if(!Fe){Ze.next=17;break}return Ze.abrupt("return",Fe.v);case 17:Ye++,Ze.next=10;break;case 20:case"end":return Ze.stop()}},He,this)})),function(He){return Je.apply(this,arguments)})},{key:"addEvent",value:function(He,Ve){this.eventBus._on(He,Ve)}},{key:"removeEvent",value:function(He,Ve){this.eventBus._off(He,Ve)}},{key:"loadDocument",value:(Ue=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze=this,ot=arguments;return _regeneratorRuntime().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(ze=ot.length>1&&ot[1]!==void 0?ot[1]:{},this.verified){Qe.next=6;break}return Qe.next=4,this._twoStepVerification(this.license);case 4:Ne=Qe.sent,this.verified=Ne;case 6:if(this.verified){Qe.next=8;break}return Qe.abrupt("return",{verified:this.verified});case 8:if(!this.pdfLoadingTask){Qe.next=11;break}return Qe.next=11,this.close();case 11:return ze.annotations&&parseAnnotationFromXml(ze.annotations),this.info=ze.info||null,this.pageChangedCallback=ze.pageChangedCallback||this.pageChangedCallback,this.scaleChangedCallback=ze.scaleChangedCallback||this.scaleChangedCallback,this.annotationsNumChangedCallback=ze.annotationsNumChangedCallback||this.annotationsNumChangedCallback,this.distanceChangedCallback=ze.distanceChangedCallback||this.distanceChangedCallback,this.permissionPasswordCallback=ze.permissionPasswordCallback||this.permissionPasswordCallback,this.annotations=null,annotationStore.annotationsAll=null,annotationStore.signatures=null,annotationStore.selectedName=null,this.ocgsPtr=null,annotationStore.ignoreColors=[],this.fontFileInited=!1,this.saveAction=ze.saveAction||null,this.isAnnotationModified=!1,this.isContentEditModyfied=!1,this.colorList=[],We={cMapUrl:CMAP_URL,cMapPacked:!0,enableXfa:!0},typeof Ve=="string"?We.url=Ve:Ve&&"byteLength"in Ve?We.data=Ve:Ve.url&&Ve.originalUrl&&(We.url=Ve.url),We.password=ze.password||"",this._pwd=We.password,Fe=pdfExports.getDocument(We),this.pdfLoadingTask=Fe,this._docName=ze.filename||pdfExports.getPdfFilenameFromUrl(We.url),Ye=function(at){return Ze._pwd=at},Ke=function(at,rt){Ze._oldPwd&&ze.notUpdatePwd?(Ye(Ze._oldPwd),at(Ze._oldPwd),Fe.onPassword=null):ze.pwd?(Ye(ze.pwd),at(ze.pwd),Fe.onPassword=null):(Ze.passwordPrompt.setUpdateCallback(at,rt,Ye),Ze.passwordPrompt.open())},Fe.onPassword=Ke,Fe.onProgress=function(at){var rt=at.loaded,ct=at.total;(ze.progress||Ze.progress).call(Ze,rt/ct)},Qe.abrupt("return",Fe.promise.then(function(){var at=_asyncToGenerator(_regeneratorRuntime().mark(function rt(ct){return _regeneratorRuntime().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,ct.getData().then(function(){var yt=_asyncToGenerator(_regeneratorRuntime().mark(function bt($t){var At,Ft,Ht,Ot,Mt,pt,xt,Tt;return _regeneratorRuntime().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ze.pdfDocument=ct,ze.notUpdatePwd||(Ze._oldPwd=Ze._pwd),At=new Uint8Array($t),Ct.next=5,Ze.messageHandler.sendWithPromise("LoadFile",{doc:Ze.doc,pagesPtr:Ze.pagesPtr,buffer:At,webFontURL:Ze.webFontURL,fileList:Ze._fileList,fontsJson:Ze.fontsJson,enableDefaultFont:Ze.enableDefaultFont});case 5:return Ft=Ct.sent,Ze.doc=Ft,Ct.next=9,Ze.messageHandler.sendWithPromise("LoadDocumentByStream",{doc:Ze.doc,fileId:0,length:At.length,password:Ze._pwd});case 9:for(Ot in Ht=Ct.sent)Ze._permission[Ot]=!!Ht[Ot];return Ze.contentEditAnnotationsManager.addTextEditor=function(Nt){var jt=Nt.pageNumber;if(jt>Ze.pagesCount||jt<1)throw new Error({message:"Invalid pageNumber"});Ze.toolMode!=="editor"&&Ze.setToolMode("editor"),Ze.currentPageNumber!==jt&&Ze.pdfViewer.scrollPageIntoView({pageNumber:jt});var nn=jt-1,Wt=Ze.pdfViewer._pages[nn];Wt&&Wt.addTextEditor(Nt)},Ze.contentEditAnnotationsManager.getEditAnnotation=function(){var Nt=_asyncToGenerator(_regeneratorRuntime().mark(function jt(nn){var Wt,cn,Ln;return _regeneratorRuntime().wrap(function(Pn){for(;;)switch(Pn.prev=Pn.next){case 0:if(!(nn>Ze.pagesCount||nn<1)){Pn.next=2;break}throw new Error({message:"Invalid pageNumber"});case 2:if(Ze.toolMode!=="editor"&&Ze.setToolMode("editor"),Ze.currentPageNumber!==nn&&Ze.pdfViewer.scrollPageIntoView({pageNumber:nn}),Wt=nn-1,!(cn=Ze.pdfViewer._pages[Wt])){Pn.next=11;break}return Pn.next=9,cn.getEditAnnotation();case 9:return Ln=Pn.sent,Pn.abrupt("return",Ln);case 11:case"end":return Pn.stop()}},jt)}));return function(jt){return Nt.apply(this,arguments)}}(),Mt=null,Ct.next=16,Ze.initPage();case 16:if(!Ze.webviewerServer){Ct.next=28;break}return Ze.controller&&(Ze.controller.abort(),Ze.controller=null),(pt=new FormData).append("file",new Blob([$t],{type:"application/pdf"}),Ze._docName),pt.append("password",Ze._pwd),Ze.controller=new AbortController,xt=Ze.controller.signal,Tt={method:"POST",headers:{Authorization:Ze._token},signal:xt,body:pt},Ct.next=26,fetch(Ze.optionUrl.webviewBaseUrl+Ze.optionUrl.uploadUrl,Tt).then(function(Nt){return Nt.json()}).then(function(Nt){if(Nt.code==="200"){var jt=Nt.data;Ze._pdfId=jt.pdfId;var nn=jt.annotateJson&&jt.annotateJson;Mt=Ze.convertAnnotation(nn)}else Nt.code}).catch(function(Nt){if(Nt.name!=="AbortError")return console.log(Nt),{error:!0,message:Nt.message}});case 26:Ct.next=36;break;case 28:if(Ze.isRenderAnnotations){Ct.next=34;break}return Ct.next=31,Ze.getAnnotations();case 31:Mt=Ct.sent,Ct.next=36;break;case 34:return Ct.next=36,Ze.getSignatures();case 36:Mt&&Ze.initAnnotations(Mt);case 37:case"end":return Ct.stop()}},bt)}));return function(bt){return yt.apply(this,arguments)}}());case 2:return ht.next=4,Ze.load(ct);case 4:return ht.abrupt("return",{pwd:Ze._pwd,verified:Ze.verified});case 5:case"end":return ht.stop()}},rt)}));return function(rt){return at.apply(this,arguments)}}(),function(at){if(Fe===Ze.pdfLoadingTask){var rt="loading_error";if(at instanceof pdfExports.InvalidPDFException)return rt="invalid_file_error",console.warn("Invalid or corrupted PDF file."),new Promise(function(ct,ht){ht("invalid_file_error")});if(at instanceof pdfExports.MissingPDFException)rt="missing_file_error",console.warn("Missing PDF file.");else if(at instanceof pdfExports.UnexpectedResponseException)rt="unexpected_response_error",console.warn("Unexpected server response.");else if(at){if(at.message==="No password given")return rt="no_password_given",console.warn("No password given."),new Promise(function(ct,ht){ht("no_password_given")});if(at.message==="Incorrect Password")return new Promise(function(ct,ht){ht("incorrect_password")})}throw new Error(rt)}}));case 41:case"end":return Qe.stop()}},He,this)})),function(He){return Ue.apply(this,arguments)})},{key:"getSelectedText",value:function(He){if(He){var Ve=this.pdfViewer._pages[He-1];if(Ve)return Ve.selectedText}return this.pdfViewer._pages.map(function(ze){return ze.selectedText}).filter(function(ze){return ze!==null}).join(`
`)}},{key:"getSelectedTextQuads",value:function(He){if(He){var Ve=this.pdfViewer._pages[He-1];if(Ve)return Ve.selectedTextQuads}var ze=this.pdfViewer._pages.map(function(Ne){return Ne.selectedTextQuads}).filter(function(Ne){return Ne!==null});return ze.length?ze:null}},{key:"convertAnnotation",value:function(He){var Ve=[];for(var ze in He){var Ne=He[ze];Array.isArray(Ne)||(Ne=[Ne]);for(var We=0;We<Ne.length;We++){!Ne[We].type&&(Ne[We].type=ze);var Fe=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatAnnotation).call(this,Ne[We]);Ve.push(Fe)}}return Ve}},{key:"getWebFontNameList",value:(qe=_asyncToGenerator(_regeneratorRuntime().mark(function He(){return _regeneratorRuntime().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.next=2,this.messageHandler.sendWithPromise("GetWebFontNameList");case 2:return Ve.abrupt("return",Ve.sent);case 3:case"end":return Ve.stop()}},He,this)})),function(){return qe.apply(this,arguments)})},{key:"getOutlines",value:function(){if(this.outlines)return this.outlines}},{key:"scrollPageIntoView",value:function(He){He.pageNumber}},{key:"search",value:(je=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve,ze){var Ne,We,Fe;return _regeneratorRuntime().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ne=ze===void 0?this.pagesPtr:[this.pagesPtr[ze-1]],Ye.next=3,this.messageHandler.sendWithPromise("Search",{pagesPtr:Ne,value:Ve});case 3:if(!(We=Ye.sent)||!We.code){Ye.next=8;break}return this.eventBus.dispatch("message",{type:"ERROR",message:We.message}),console.log(We.message),Ye.abrupt("return");case 8:return Fe=We.searchResults,this.searchResults=Fe,this.eventBus.dispatch("search",Fe),Fe.length?this.setActiveSearchResult():(this.clearSearchResults(),this._activeSearchIndex=0),Ye.abrupt("return",Fe);case 13:case"end":return Ye.stop()}},He,this)})),function(He,Ve){return je.apply(this,arguments)})},{key:"searchInPage",value:(Ie=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve,ze,Ne){var We,Fe,Ye;return _regeneratorRuntime().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return We=ze===void 0?this.pagesPtr:[this.pagesPtr[ze-1]],Ke.next=3,this.messageHandler.sendWithPromise("Search",{pagesPtr:We,value:Ve});case 3:if(!(Fe=Ke.sent)||!Fe.code){Ke.next=8;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Fe.message}),console.log(Fe.message),Ke.abrupt("return");case 8:return Ye=Fe.searchResults,this.searchPageResults=Ye,this.eventBus.dispatch("search",Ye,Ne),Ye.length||(this.clearSearchResults(),this.searchPageResults=null),Ke.abrupt("return",Ye);case 13:case"end":return Ke.stop()}},He,this)})),function(He,Ve,ze){return Ie.apply(this,arguments)})},{key:"setActiveSearchResult",value:function(){var He=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.searchResults){var ze=He||this.searchResults[0],Ne=ze.quads[0],We=Ne.left*this.scale,Fe=Ne.top*this.scale,Ye=this.pdfViewer._pages[ze.pageNum-1];if(this.pdfViewer.currentPageNumber=ze.pageNum,scrollIntoView(Ye.div,{left:We,top:Fe}),He){var Ke=this.searchResults[this._activeSearchIndex];this.pdfViewer._pages[Ke.pageNum-1].clearActiveSearchResult(Ke),Ye.setActiveSearchResult(He),this._activeSearchIndex=Ve}else Ye.setActiveSearchResult(ze),this._activeSearchIndex=0}}},{key:"clearSearchResults",value:function(){if((this.searchResults||this.searchPageResults)&&this.pdfViewer&&this.pdfViewer._pages&&this.pdfViewer._pages.length){for(var He=0;He<this.pdfViewer._pages.length;He++)this.pdfViewer._pages[He].clearSearchResults();this.searchResults=null,this.searchPageResults=null}}},{key:"initPage",value:(Ge=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze,Ne,We;return _regeneratorRuntime().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,this.messageHandler.sendWithPromise("GetPageCount",{doc:this.doc});case 2:Ve=Fe.sent,this._pagesCount=Ve,this.pagesPtr=[],ze=0;case 6:if(!(ze<Ve)){Fe.next=17;break}return Fe.next=9,this.messageHandler.sendWithPromise("GetPageSize",{doc:this.doc,pageIndex:ze});case 9:return Ne=Fe.sent,Fe.next=12,this.messageHandler.sendWithPromise("InitText",{pagePtr:Ne.pagePtr});case 12:We=Fe.sent,this.pagesPtr.push({doc:this.doc,pageNumber:ze+1,pagePtr:Ne.pagePtr,textPtr:We,width:Ne.width,height:Ne.height,rotation:Ne.rotation});case 14:ze++,Fe.next=6;break;case 17:case"end":return Fe.stop()}},He,this)})),function(){return Ge.apply(this,arguments)})},{key:"getAnnotations",value:(Oe=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at;return _regeneratorRuntime().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:return rt.next=2,this.getSignatures();case 2:Ve=rt.sent,ze=[],Ne=this.pagesPtr,We=0;case 6:if(!(We<this.pagesCount)){rt.next=39;break}return Fe=Ne[We],rt.next=10,this.messageHandler.sendWithPromise("InitAnnot",{pageIndex:We,pagePtr:Fe.pagePtr});case 10:Ye=rt.sent,Ke=0;case 12:if(!(Ke<Ye.annotCount)){rt.next=36;break}if(Ze=Ye.annotations[Ke],ot=Ze.type,Qe=AnnotationTypeString[ot],Ze.pageIndex=We,Ze.type=Qe,at=null,Qe!=="widget"){rt.next=25;break}return rt.next=22,this.messageHandler.sendWithPromise("GetWidgetAnnotation",{doc:this.doc,annotPtr:Ze.annotPtr,pagePtr:Ze.pagePtr,typeInt:ot,signaturePtrList:Ve});case 22:at=rt.sent,rt.next=31;break;case 25:return rt.next=27,this.messageHandler.sendWithPromise("GetAnnotation",{doc:this.doc,annotPtr:Ze.annotPtr,pagePtr:Ze.pagePtr,typeInt:ot,scale:this.scale});case 27:if(at=rt.sent){rt.next=30;break}return rt.abrupt("continue",33);case 30:at.replies&&at.replies.length&&at.replies.forEach(function(ct){return ct.name=v4()});case 31:Object.assign(Ze,at),ze.push(Ze);case 33:Ke++,rt.next=12;break;case 36:We++,rt.next=6;break;case 39:return this.pdfViewer.pagesPtr=this.pagesPtr,rt.abrupt("return",ze);case 41:case"end":return rt.stop()}},He,this)})),function(){return Oe.apply(this,arguments)})},{key:"reRenderAnnotations",value:(Be=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at,rt;return _regeneratorRuntime().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return ct.next=2,this.getSignatures();case 2:Ve=ct.sent,this.annotations=null,ze=[],Ne=this.pagesPtr,We=0;case 7:if(!(We<Ne.length)){ct.next=40;break}return Fe=Ne[We],ct.next=11,this.messageHandler.sendWithPromise("InitAnnot",{pageIndex:We,pagePtr:Fe.pagePtr});case 11:Ye=ct.sent,Ke=0;case 13:if(!(Ke<Ye.annotCount)){ct.next=37;break}if(Ze=Ye.annotations[Ke],ot=Ze.type,Qe=AnnotationTypeString[ot],Ze.pageIndex=We,Ze.type=Qe,at=null,Qe!=="widget"){ct.next=26;break}return ct.next=23,this.messageHandler.sendWithPromise("GetWidgetAnnotation",{doc:this.doc,annotPtr:Ze.annotPtr,pagePtr:Ze.pagePtr,typeInt:ot,signaturePtrList:Ve});case 23:at=ct.sent,ct.next=32;break;case 26:return ct.next=28,this.messageHandler.sendWithPromise("GetAnnotation",{doc:this.doc,annotPtr:Ze.annotPtr,pagePtr:Ze.pagePtr,typeInt:ot,scale:this.scale});case 28:if(at=ct.sent){ct.next=31;break}return ct.abrupt("continue",34);case 31:at.replies&&at.replies.length&&at.replies.forEach(function(ht){return ht.name=v4()});case 32:Object.assign(Ze,at),ze.push(Ze);case 34:Ke++,ct.next=13;break;case 37:We++,ct.next=7;break;case 40:for(rt=0;rt<ze.length;rt++)this.annotations||(this.annotations={}),this.pushAnnotations(ze[rt]),this.pdfViewer.renderAnnotation(ze[rt]);this.eventBus.dispatch("annotationUpdated",{annotations:this.annotations});case 42:case"end":return ct.stop()}},He,this)})),function(){return Be.apply(this,arguments)})},{key:"supportsFullscreen",get:function(){return shadow$1(this,"supportsFullscreen",document.webkitFullscreenEnabled||document.mozFullscreenEnabled||document.fullscreenEnabled)}},{key:"removeAllAnnotations",value:function(){this.pdfViewer.annotationStorage&&this.pdfViewer.annotationStorage.cleanup()}},{key:"importAnnotations",value:($e=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye=this;return _regeneratorRuntime().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ke.next=2,new Promise(function(Ze){var ot=new FileReader;ot.onload=function(Qe){var at=Qe.target.result;Ze(at)},Ye.webviewerServer?ot.readAsText(Ve):ot.readAsArrayBuffer(Ve)});case 2:if(ze=Ke.sent,!this.webviewerServer){Ke.next=11;break}return(Ne=new FormData).append("xfdfFile",Ve),Ne.append("pdfId",this._pdfId),Ke.next=9,fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.uploadAnnotationsUrl,{method:"POST",headers:{Authorization:this._token},body:Ne}).then(function(Ze){return Ze.json()}).then(function(Ze){if(Ze.code==="200"){var ot=Ze.data;Ye._pdfId=ot.pdfId;var Qe=ot.annotateJson,at=Ye.convertAnnotation(Qe);at&&(Ye.annotations=null,Ye.initAnnotations(at,!0))}}).catch(function(Ze){if(Ze.name!=="AbortError")return console.log(Ze),{error:!0,message:Ze.message}});case 9:Ke.next=21;break;case 11:return We=new Uint8Array(ze),Ke.next=14,this.messageHandler.sendWithPromise("XFDFImportAnnotations",{doc:this.doc,xfdfBuffer:We});case 14:if(!(Fe=Ke.sent)||!Fe.code){Ke.next=19;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Fe.message}),console.log(Fe.message),Ke.abrupt("return",!1);case 19:this.emptyAnnotations(),this.reRenderAnnotations();case 21:case"end":return Ke.stop()}},He,this)})),function(He){return $e.apply(this,arguments)})},{key:"saveAnnotations",value:function(){if(this.pdfDocument&&this.info){var He,Ve=[],ze=_createForOfIteratorHelper(this.pdfViewer.annotationStorage._storage);try{for(ze.s();!(He=ze.n()).done;){var Ne=_slicedToArray(He.value,2),We=(Ne[0],Ne[1]);Ve.push(We.annotationObj)}}catch(Fe){ze.e(Fe)}finally{ze.f()}this.uploadAnnotations({append_objects:Ve,tid:this.info.tid})}}},{key:"initApiUrl",value:function(He){this.optionUrl=He}},{key:"getPermission",value:function(He){return this._permission[He]}},{key:"checkPermissionPassword",value:(Se=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.prev=0,We.next=3,this.messageHandler.sendWithPromise("CheckOwnerPassword",{doc:this.doc,pwd:Ve});case 3:if(!We.sent){We.next=10;break}for(Ne in ze=this._permission,this._permission)ze[Ne]=!0;return We.abrupt("return",!0);case 10:return We.abrupt("return",!1);case 11:We.next=16;break;case 13:return We.prev=13,We.t0=We.catch(0),We.abrupt("return",!1);case 16:case"end":return We.stop()}},He,this,[[0,13]])})),function(He){return Se.apply(this,arguments)})},{key:"setPassword",value:function(He){var Ve=He.password,ze=He.permissionPassword,Ne=He.permission;if(this.webviewerServer){var We={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId,annotateHandles:[{operate:"set-password",userPassword:value}]})};return fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.editUrl,We).then(function(Fe){return Fe.json()}).then(function(Fe){return Fe.code==="200"}).catch(function(Fe){return console.log(Fe),!1})}return this.saveAction="set",Ve!==void 0&&(this._pwd=Ve),ze!==void 0&&(this._permissionPwd=ze,this._setPermission={allowsPrinting:!Ne.allowsPrinting,allowsCopying:!Ne.allowsCopying,allowsDocumentChanges:!Ne.allowsDocumentChanges}),!0}},{key:"removePassword",value:function(){if(this.webviewerServer){var He={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId,annotateHandles:[{operate:"remove-password"}]})};return fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.editUrl,He).then(function(Ve){return Ve.json()}).then(function(Ve){return Ve.code==="200"}).catch(function(Ve){return console.log(Ve),!1})}return this._pwd&&(this.saveAction="remove",this._pwd=""),!0}},{key:"getOptionUrl",value:function(){return this.optionUrl}},{key:"uploadAnnotations",value:function(He){var Ve={method:"POST",headers:{Accept:"application/json","Content-type":"application/json"}};He.append_objects.length&&(Ve.body=JSON.stringify(He),fetch(this.optionUrl.baseUrl+this.optionUrl.saveAnnotations+"?f="+this.info.token,Ve).then(function(ze){return ze.json()}).then(function(ze){return ze}).catch(function(ze){return{error:!0,message:ze.message}}))}},{key:"toggleSidebar",value:function(){this.pdfSidebar.toggle()}},{key:"load",value:(we=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze=this;return _regeneratorRuntime().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return this.pdfLinkService.setDocument(Ve),(ze=this.pdfViewer).setDocument(Ve,this.annotations,this.pagesPtr,this.enableReply),Ne=ze.firstPagePromise,ze.onePageRendered,ze.pagesPromise,Ve.getDownloadInfo().then(function(Qe){var at=Qe.length;Ze._contentLength=at,Ze.downloadComplete=!0}),this.pdfThumbnailViewer&&this.pdfThumbnailViewer.setDocument(Ve),We=this.doc,Fe=this.messageHandler,ot.next=10,Fe.sendWithPromise("GetOutlines",{doc:We});case 10:if(Ye=ot.sent,Ke=function Qe(at,rt,ct){var ht=new Outline({outline:at,index:rt,doc:We,messageHandler:Fe,parent:ct});return at.children.forEach(function(yt,bt){ht.children.push(Qe(yt,bt,ht))}),ht},Ye.forEach(function(Qe,at){var rt=Ke(Qe,at,null);Ze.outlines.push(rt)}),ot.t0=this.renderLayerPermission,!ot.t0){ot.next=17;break}return ot.next=17,this.getLayers();case 17:Ne.then(function(Qe){Ze.setInitialView(null,{rotation:null,sidebarView:0,scrollMode:-1,spreadMode:-1}),Ze.eventBus.dispatch("documentloaded",{source:Ze})}),this.eventBus.dispatch("documentinit",{source:this});case 19:case"end":return ot.stop()}},He,this)})),function(He){return we.apply(this,arguments)})},{key:"initBindEvents",value:function(){var He=this.eventBus;this._boundEvents,He._on("scalechanging",this.webViewerScaleChanging.bind(this))}},{key:"bindEvents",value:function(){var He=this.eventBus;this._boundEvents,He._on("resize",this.webViewerResize.bind(this)),He._on("pagerendered",this.webViewerPageRendered.bind(this)),He._on("updateviewarea",this.webViewerUpdateViewarea.bind(this)),He._on("onPageNumberUpdated",this.webViewerPageChanging.bind(this)),He._on("rotationchanging",this.webViewerRotationChanging.bind(this)),He._on("sidebarviewchanged",this.webViewerSidebarViewChanged.bind(this)),He._on("presentationmodechanged",this.webViewerPresentationModeChanged.bind(this)),He._on("presentationmode",this.webViewerPresentationMode.bind(this)),He._on("nextpage",this.webViewerNextPage.bind(this)),He._on("previouspage",this.webViewerPreviousPage.bind(this)),He._on("zoomin",this.webViewerZoomIn.bind(this)),He._on("zoomout",this.webViewerZoomOut.bind(this)),He._on("pagenumberchanged",this.webViewerPageNumberChanged.bind(this)),He._on("scalechanged",this.webViewerScaleChanged.bind(this)),He._on("rotatecw",this.webViewerRotateCw.bind(this)),He._on("rotateccw",this.webViewerRotateCcw.bind(this)),He._on("switchscrollmode",this.webViewerSwitchScrollMode.bind(this)),He._on("scrollmodechanged",this.webViewerScrollModeChanged.bind(this)),He._on("switchspreadmode",this.webViewerSwitchSpreadMode.bind(this)),He._on("spreadmodechanged",this.webViewerSpreadModeChanged.bind(this)),He._on("findfromurlhash",this.webViewerFindFromUrlHash.bind(this)),He._on("updatefindmatchescount",this.webViewerUpdateFindMatchesCount.bind(this)),He._on("updatefindcontrolstate",this.webViewerUpdateFindControlState.bind(this)),He._on("fileinputchange",this.webViewerFileInputChange.bind(this)),He._on("openfile",this.webViewerOpenFile.bind(this)),He._on("switchannotationeditormode",this.webViewerSwitchAnnotationEditorMode.bind(this)),He._on("annotationsCountChanged",this.webViewerAnnotationsCountChanged.bind(this)),He._on("distanceChanged",this.webViewerDistanceChanged.bind(this)),He._on("annotationChanged",this.handleAnnotationChange.bind(this)),He._on("createSignature",this.handleCreateSignature.bind(this)),He._on("handleField",this.handleField.bind(this)),He._on("pageNumberChanged",this.pageNumberChanged.bind(this)),He._on("updateSignatureAp",this.updateSignatureAp.bind(this)),He._on("isContentEditModyfied",this.setContentEditModyfied.bind(this))}},{key:"bindWindowEvents",value:function(){var He=this,Ve=this.eventBus,ze=this._boundEvents;if(!this._windowAbortController){this._windowAbortController=new AbortController,ze.windowResize=_.debounce(function(){Ve.dispatch("resize",{source:window})},200),ze.windowHashChange=function(){Ve.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})},ze.windowUpdateFromSandbox=function(Fe){Ve.dispatch("updatefromsandbox",{source:window,detail:Fe.detail})};var Ne=this._windowAbortController.signal;window.addEventListener("keydown",onKeyDown.bind(this),{signal:Ne}),window.addEventListener("keyup",onKeyUp.bind(this),{signal:Ne}),window.addEventListener("resize",ze.windowResize),window.addEventListener("hashchange",ze.windowHashChange),window.addEventListener("updatefromsandbox",ze.windowUpdateFromSandbox);var We=this.getViewerElement();We.addEventListener("dblclick",function(Fe){He.eventBus.dispatch("dblclick",Fe)}),We.addEventListener("click",function(Fe){He.eventBus.dispatch("click",Fe)}),document.addEventListener("mouseup",function(Fe){Fe.which===1&&He.eventBus.dispatch("mouseLeftUp",Fe)})}}},{key:"close",value:(_e=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze,Ne,We,Fe;return _regeneratorRuntime().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(this.pdfLoadingTask){Ye.next=2;break}return Ye.abrupt("return");case 2:return We=[],this.doc&&We.push(this.messageHandler.sendWithPromise("ClearDocument",this.doc)),this.docEditorCopy&&(this.docEditorCopy=null),this.docEditorCopy&&(this.docEditorCopy=null),We.push(this.pdfLoadingTask.destroy()),this.pdfLoadingTask=null,this.pdfDocument&&(this.pdfDocument=null,(Fe=this.pdfThumbnailViewer)===null||Fe===void 0||Fe.setDocument(null),this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null)),this.isInitialViewSet=!1,this.downloadComplete=!1,this.url="",this.baseUrl="",this._downloadUrl="",this.documentInfo=null,this.saveAction=null,this.metadata=null,this._contentDispositionFilename=null,this._contentLength=null,this._saveInProgress=!1,this._hasAnnotationEditors=!1,(Ve=this.pdfSidebar)===null||Ve===void 0||Ve.reset(),(ze=this.pdfOutlineViewer)===null||ze===void 0||ze.reset(),(Ne=this.pdfAttachmentViewer)===null||Ne===void 0||Ne.reset(),this.outlines=[],this._pwd="",this._pdfId=null,this.annotations=null,this.doc=null,this.layers=[],this.ocgsPtr=null,Ye.next=33,Promise.all(We);case 33:case"end":return Ye.stop()}},He,this)})),function(){return _e.apply(this,arguments)})},{key:"handleInk",value:function(He){var Ve=JSON.parse(JSON.stringify(He)),ze="",Ne=[];Array.isArray(Ve.inklist)?Ne=Ve.inklist:Ne.push(Ve.inklist);for(var We=0;We<Ne.length;We++)ze=ze+Ne[We].replaceAll(";",",")+"//";return Ve.inklist=ze,Ve}},{key:"handleAnnotationChange",value:(ye=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at,rt,ct,ht,yt,bt,$t,At,Ft,Ht,Ot,Mt,pt,xt,Tt;return _regeneratorRuntime().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(ze=Ve.annotation,this.annotationHistory.push(ze),Ne=[],We=null,Fe=["textfield","checkbox","radiobutton","listbox","combobox","pushbutton","signatureFields"],Ye=["highlight","underline","strikeout","squiggly"],Ve.type!=="add"){Ct.next=31;break}Array.isArray(ze)||(ze=[ze]),Ke=ze.length,Ze=0;case 10:if(!(Ze<Ke)){Ct.next=29;break}if(!(Number(ze[Ze].pageIndex)+1>this.pagesCount)){Ct.next=13;break}return Ct.abrupt("continue",26);case 13:if(Fe.includes(ze[Ze].type)?ze[Ze].operate="add-form":(ze[Ze].operate="add-annot",ze[Ze].author=this.annotator),Ye.includes(ze[Ze].type)&&(ot=[],!ze[Ze].quadPoints[0].PointX&&!ze[Ze].quadPoints[0].PointY)){for(Qe=0;Qe<ze[Ze].quadPoints.length;Qe++)at=ze[Ze].quadPoints[Qe],rt=at.left,ct=at.top,ht=at.right,yt=at.bottom,ot.push({PointX:rt,PointY:ct}),ot.push({PointX:ht,PointY:ct}),ot.push({PointX:rt,PointY:yt}),ot.push({PointX:ht,PointY:yt});ze[Ze].quadPoints=ot}return Ct.next=17,this.handleAnnotations(ze[Ze]);case 17:if(!(bt=Ct.sent)||!bt.code){Ct.next=20;break}return Ct.abrupt("return",!1);case 20:this.pdfViewer&&this.pdfViewer.renderAnnotation(ze[Ze],!!Ve.show),ze[Ze].targetPage=1*ze[Ze].pageIndex+1,($t=JSON.parse(JSON.stringify(ze[Ze]))).inklist&&($t=this.handleInk($t)),Ne.push($t),ze[Ze].type==="redact"&&this.redactionList.push(ze[Ze]);case 26:Ze++,Ct.next=10;break;case 29:Ct.next=76;break;case 31:if(At=this.annotations[ze.pageIndex]){Ct.next=34;break}return Ct.abrupt("return");case 34:if((Ft=findIndex(ze.name,At))!==-1){Ct.next=37;break}return Ct.abrupt("return");case 37:if(We=At[Ft],this.webviewerServer&&(ze.index=Ft),Ve.type!=="delete"){Ct.next=61;break}if(this.webviewerServer){Ct.next=56;break}if(Ot=At[Ft],Mt=null,(Ht=Ot.replies)===null||Ht===void 0||!Ht.length){Ct.next=49;break}return Ct.next=46,this.messageHandler.sendWithPromise("RemoveFromPageIncludeReplyAnnot",{pagePtr:Ot.pagePtr,annotPtr:ze.annotPtr});case 46:Mt=Ct.sent,Ct.next=52;break;case 49:return Ct.next=51,this.messageHandler.sendWithPromise("RemoveAnnot",{annotPtr:ze.annotPtr});case 51:Mt=Ct.sent;case 52:if(!Mt||!Mt.code){Ct.next=56;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Mt.message}),console.log(Mt.message),Ct.abrupt("return");case 56:At.splice(Ft,1),At.length||delete this.annotations[ze.pageIndex],this.redactionList=this.redactionList.filter(function(Nt){return Nt.name!==ze.name}),Ct.next=72;break;case 61:if(this.webviewerServer){Ct.next=70;break}return ze.doc=this.doc,Ct.next=65,this.messageHandler.sendWithPromise("EditAnnotation",{annotation:ze});case 65:if(!(pt=Ct.sent)||!pt.code){Ct.next=70;break}return this.eventBus.dispatch("message",{type:"ERROR",message:pt.message}),console.log(pt.message),Ct.abrupt("return",!1);case 70:xt=At[Ft],At[Ft]=_objectSpread2$1(_objectSpread2$1({},xt),ze);case 72:ze.targetPage=ze.pageIndex+1,(Tt=ze).inklist&&(Tt=this.handleInk(Tt)),Ne.push(Tt);case 76:if(this.eventBus.dispatch("annotationChange",{type:Ve.type,annotation:Ve.type==="add"?Ve.annotation:We}),this.eventBus.dispatch("annotationUpdated",{annotations:this.annotations}),!this.webviewerServer){Ct.next=82;break}return _assertClassBrand(_ComPDFKitViewer_brand,this,_convertAnnotationsForBackend).call(this,Ne),Ct.next=82,_assertClassBrand(_ComPDFKitViewer_brand,this,_postAnnotations).call(this,Ne);case 82:return this.eventBus.dispatch("redactAnnotationChanged",this.redactionList.length),this.isAnnotationModified=!0,Ct.abrupt("return",!0);case 85:case"end":return Ct.stop()}},He,this)})),function(He){return ye.apply(this,arguments)})},{key:"emptyAnnotations",value:function(){var He=this.annotations;if(this.annotations)for(var Ve in He)this.pdfViewer._pages[Ve].emptyAnnotations()}},{key:"handleCreateSignature",value:function(He){this.eventBus.dispatch("annotationChanged",{type:"add",annotation:He})}},{key:"webViewerDistanceChanged",value:function(He){this.distanceChangedCallback(He.distance)}},{key:"progress",value:function(He){if(!this.downloadComplete){var Ve=Math.round(100*He);Ve<=this.percent||(this.percent=Ve)}}},{key:"flattenPdf",value:(Te=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze,Ne;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(!this._token||!this._pdfId){We.next=5;break}return Ve={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId})},We.abrupt("return",fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.flattenUrl,Ve).then(function(){var Fe=_asyncToGenerator(_regeneratorRuntime().mark(function Ye(Ke){var Ze;return _regeneratorRuntime().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(!Ke.headers.get("content-type").startsWith("application/json")){ot.next=8;break}return ot.next=4,Ke.json();case 4:return Ze=ot.sent,ot.abrupt("return",Promise.reject(Ze));case 8:return ot.abrupt("return",Ke.blob());case 9:case"end":return ot.stop()}},Ye)}));return function(Ye){return Fe.apply(this,arguments)}}()).then(function(Fe){return Fe}).catch(function(Fe){return console.log(Fe),!1}));case 5:return We.next=7,this.messageHandler.sendWithPromise("FlattenPage",{doc:this.doc,pagesPtr:this.pagesPtr,saveType:2,password:this._pwd,oldPassword:this._oldPwd});case 7:if(!(ze=We.sent)||!ze.code){We.next=12;break}return this.eventBus.dispatch("message",{type:"ERROR",message:ze.message}),console.log(ze.message),We.abrupt("return",!1);case 12:return Ne=ze.blobData,We.abrupt("return",Ne);case 14:case"end":return We.stop()}},He,this)})),function(){return Te.apply(this,arguments)})},{key:"flattenPdfDownload",value:(Le=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve;return _regeneratorRuntime().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.next=2,this.flattenPdf();case 2:if(!(Ve=ze.sent)){ze.next=8;break}return FileSaver_minExports.saveAs(Ve,this._docName),ze.abrupt("return",!0);case 8:return ze.abrupt("return",!1);case 9:case"end":return ze.stop()}},He,this)})),function(){return Le.apply(this,arguments)})},{key:"loadCertificates",value:(Me=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze;return _regeneratorRuntime().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.messageHandler.sendWithPromise("LoadCertificates",Ve);case 2:return ze=Ne.sent,Ne.abrupt("return",ze);case 4:case"end":return Ne.stop()}},He,this)})),function(He){return Me.apply(this,arguments)})},{key:"download",value:(Pe=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze,Ne,We,Fe,Ye,Ke=this,Ze=arguments;return _regeneratorRuntime().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(Ve=Ze.length>0&&Ze[0]!==void 0&&Ze[0],Ne=Ze.length>2?Ze[2]:void 0,!(ze=Ze.length>1?Ze[1]:void 0)){ot.next=7;break}ze.forEach(function(Qe){FileSaver_minExports.saveAs(Qe.url,Qe.fileName)}),ot.next=19;break;case 7:if(!this._token||!this._pdfId){ot.next=12;break}return We={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId})},ot.abrupt("return",fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.saveUrl,We).then(function(){var Qe=_asyncToGenerator(_regeneratorRuntime().mark(function at(rt){var ct;return _regeneratorRuntime().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(!rt.headers.get("content-type").startsWith("application/json")){ht.next=8;break}return ht.next=4,rt.json();case 4:return ct=ht.sent,ht.abrupt("return",Promise.reject(ct));case 8:return ht.abrupt("return",rt.blob());case 9:case"end":return ht.stop()}},at)}));return function(at){return Qe.apply(this,arguments)}}()).then(function(Qe){return Ve&&FileSaver_minExports.saveAs(Qe,Ke._docName),Qe}).catch(function(Qe){return console.log(Qe),!1}));case 12:return Fe={set:2,remove:3}[this.saveAction]||1,ot.next=16,this.messageHandler.sendWithPromise("SaveDocumentByStream",{doc:this.doc,saveType:Ne||Fe,password:this._pwd,oldPassword:this._oldPwd,permissionPassword:this._permissionPwd,permissions:this._setPermission});case 16:return Ye=ot.sent,Ve&&FileSaver_minExports.saveAs(Ye,this._docName),ot.abrupt("return",Ye);case 19:case"end":return ot.stop()}},He,this)})),function(){return Pe.apply(this,arguments)})},{key:"exportXfdf",value:(Ce=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze,Ne,We,Fe,Ye=arguments;return _regeneratorRuntime().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(Ve=Ye.length>0&&Ye[0]!==void 0&&Ye[0],ze="",!this.webviewerServer){Ke.next=8;break}return Ke.next=5,fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.downloadAnnotation+"?pdfId="+this._pdfId,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this._token}}).then(function(){var Ze=_asyncToGenerator(_regeneratorRuntime().mark(function ot(Qe){var at;return _regeneratorRuntime().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(!Qe.headers.get("content-type").startsWith("application/json")){rt.next=8;break}return rt.next=4,Qe.json();case 4:return at=rt.sent,rt.abrupt("return",Promise.reject(at));case 8:return rt.abrupt("return",Qe.text());case 9:case"end":return rt.stop()}},ot)}));return function(ot){return Ze.apply(this,arguments)}}()).then(function(Ze){return Ze}).catch(function(Ze){return console.log(Ze),!1});case 5:ze=Ke.sent,Ke.next=16;break;case 8:return Ke.next=10,this.messageHandler.sendWithPromise("XFDFExportAnnotations",{doc:this.doc});case 10:if(!(Ne=Ke.sent)||!Ne.code){Ke.next=15;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ne.message}),console.log(Ne.message),Ke.abrupt("return",!1);case 15:ze=Ne.Content;case 16:if(!Ve){Ke.next=23;break}return We=this._docName.replace(/\.pdf$/,".xfdf"),Fe=new Blob([ze],{type:"application/xfdf"}),FileSaver_minExports.saveAs(Fe,We),Ke.abrupt("return",!0);case 23:return Ke.abrupt("return",ze);case 24:case"end":return Ke.stop()}},He,this)})),function(){return Ce.apply(this,arguments)})},{key:"getPageTextContent",value:(ke=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze;return _regeneratorRuntime().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(!(!Ve||Ve<1||Ve>this.pagesCount)){ot.next=2;break}return ot.abrupt("return");case 2:return ze=Ve-1,Ne=this.pdfViewer.getPageView(ze),We=this.pagesPtr,Fe=We[ze],Ye=Ne.viewport.viewBox[2],Ke=Ne.viewport.viewBox[3],ot.next=10,this.messageHandler.sendWithPromise("GetCharsRangeAtPos",{pagePtr:Fe.pagePtr,textPtr:Fe.textPtr,start:{x:0,y:0},end:{x:Ye,y:Ke}});case 10:return Ze=ot.sent,ot.abrupt("return",Ze.textContent);case 12:case"end":return ot.stop()}},He,this)})),function(He){return ke.apply(this,arguments)})},{key:"getScrollViewElement",value:function(){return this.scrollContainer}},{key:"getViewerElement",value:function(){return this.viewerContainer}},{key:"getSelectedPage",value:function(He,Ve){for(var ze=null,Ne=null,We=0;We<this.pagesCount;We++){var Fe,Ye=this.pdfViewer._pages[We].div,Ke=Ye.offsetLeft,Ze=Ke+Ye.clientWidth,ot=Ye.offsetTop+((Fe=Ye.offsetParent)===null||Fe===void 0?void 0:Fe.offsetTop),Qe=ot+Ye.clientHeight;if(ze===null&&He.x<=Ze&&He.x>=Ke&&He.y<=Qe&&He.y>=ot&&(ze=We+1),Ne===null&&Ve.x<=Ze&&Ve.x>=Ke&&Ve.y<=Qe&&Ve.y>=ot&&(Ne=We+1),ze!==null&&Ne!==null)break}if(ze>Ne){var at=[Ne,ze];ze=at[0],Ne=at[1]}return{first:ze,last:Ne}}},{key:"pageToWindow",value:function(He,Ve){var ze,Ne,We=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(Ve>this.page&&Ve<1)return null;var Fe=this.pdfViewer._pages[Ve-1].div,Ye=Fe.offsetLeft+((ze=Fe.offsetParent)===null||ze===void 0?void 0:ze.offsetLeft),Ke=Fe.offsetTop+((Ne=Fe.offsetParent)===null||Ne===void 0?void 0:Ne.offsetTop),Ze=this.scale;return{x:(We?He.x*Ze:He.x)+Ye,y:(We?He.y*Ze:He.y)+Ke}}},{key:"windowToPage",value:function(He,Ve){var ze,Ne=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(Ve>this.page&&Ve<1)return null;var We=this.pdfViewer._pages[Ve-1].div,Fe=We.offsetLeft,Ye=We.offsetTop+((ze=We.offsetParent)===null||ze===void 0?void 0:ze.offsetTop),Ke=this.scale;return{pageNumber:Ve,x:Ne?(He.x-Fe)/Ke:He.x-Fe,y:Ne?(He.y-Ye)/Ke:He.y-Ye}}},{key:"_initializeViewerComponents",value:function(He){var Ve=He.container,ze=He.viewer,Ne=He.thumbnailView,We=He.annotationView,Fe=He.toggleButton;this.scrollContainer=Ve;var Ye=this;this.scrollContainer.addEventListener("mousemove",function(ot){Ye.eventBus.dispatch("mouseMove",ot)}),this.viewerContainer=ze;var Ke=new PDFRenderingQueue;Ke.onIdle=this._cleanup.bind(this),this.pdfRenderingQueue=Ke;var Ze=new PDFLinkService;this.pdfLinkService=Ze,this.pdfViewer=new PDFViewer({container:Ve,viewer:ze,documentViewer:this,messageHandler:this.messageHandler,annotationStore,tool:{tool:this.activeTool,color:this.color},annotationView:We,renderingQueue:Ke,linkService:Ze,renderer:"canvas",textLayerMode:1,enablePrintAutoRotate:!0,eventBus:this.eventBus,$t:this.$t,doc:this.doc}),Ke.setViewer(this.pdfViewer),Ze.setViewer(this.pdfViewer),Ne&&(this.pdfThumbnailViewer=new PDFThumbnailViewer({container:Ne,renderingQueue:Ke,linkService:Ze}),Ke.setThumbnailViewer(this.pdfThumbnailViewer)),this.pdfCursorTools=new PDFCursorTools({container:Ve,eventBus:this.eventBus,cursorToolOnLoad:0}),this.supportsFullscreen&&(this.pdfPresentationMode=new PDFPresentationMode({container:Ve,pdfViewer:this.pdfViewer,eventBus:this.eventBus})),this.passwordPrompt=new PasswordPrompt({dialog:document.getElementById("passwordDialog"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel"),$t:this.$t}),this.pdfSidebar=new PDFSidebar({elements:{toggleButton:Fe},pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:this.eventBus}),this.pdfSidebar.onToggled=this.forceRendering.bind(this),this.contentEditManager=new ContentEditManager(this),this.annotationManager=new AnnotationManager(this)}},{key:"setInitialView",value:function(He){var Ve,ze=this,Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ne.rotation,Ne.sidebarView;var We,Fe,Ye=Ne.scrollMode,Ke=Ne.spreadMode;this.isInitialViewSet=!0,Fe=Ke,isValidScrollMode(We=Ye)&&(ze.pdfViewer.scrollMode=We),isValidSpreadMode(Fe)&&(ze.pdfViewer.spreadMode=Fe),this.pdfViewer.currentScaleValue||(this.pdfViewer.currentScaleValue=DEFAULT_SCALE_VALUE),this.pdfViewer.forceRendering(),!((Ve=this.pdfSidebar)===null||Ve===void 0)&&Ve.isOpen&&this.pdfThumbnailViewer.forceRendering()}},{key:"requestFullScreenMode",value:function(){var He;(He=this.pdfPresentationMode)===null||He===void 0||He.request()}},{key:"_cleanup",value:function(){var He;this.pdfDocument&&(this.pdfViewer.cleanup(),(He=this.pdfThumbnailViewer)===null||He===void 0||He.cleanup(),this.pdfDocument.cleanup(this.pdfViewer.renderer==="svg"))}},{key:"cleanup",value:function(){this._cleanup()}},{key:"zoomIn",value:function(He){if(!this.pdfViewer.isInPresentationMode){var Ve=this.page;this.pdfViewer.increaseScale({drawingDelay:400}),this.page=Ve}}},{key:"zoomOut",value:function(He){if(!this.pdfViewer.isInPresentationMode){var Ve=this.page;this.pdfViewer.decreaseScale({drawingDelay:400}),this.page=Ve}}},{key:"nextPage",value:function(){return this.pdfViewer.nextPage()}},{key:"previousPage",value:function(){return this.pdfViewer.previousPage()}},{key:"pageNumberChanged",value:function(He){He!==""&&this.pdfLinkService.goToPage(He),He!==this.pdfViewer.currentPageNumber.toString()&&He!==this.pdfViewer.currentPageLabel&&this.toolbar&&this.toolbar.setPageNumber(pdfViewer.currentPageNumber,pdfViewer.currentPageLabel)}},{key:"scrollTo",value:function(He){var Ve=He.left,ze=He.top;scrollIntoView(this.viewerContainer,{left:Ve,top:ze})}},{key:"scrollToPercent",value:function(He){var Ve=He.left,ze=He.top,Ne=(this.scrollContainer.scrollHeight-this.scrollContainer.clientHeight)*ze/100,We=(this.scrollContainer.scrollWidth-this.scrollContainer.clientWidth)*Ve/100;this.scrollTo({top:Ne,left:We})}},{key:"webViewerAnnotationsCountChanged",value:function(He){this.annotationsNumChangedCallback(He.annotationsCount)}},{key:"forceRendering",value:function(){this.pdfRenderingQueue.printing=!!this.printService,this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.visibleView===SidebarView.THUMBS,this.pdfRenderingQueue.renderHighestPriority()}},{key:"webViewerResize",value:function(){var He=this.pdfDocument,Ve=this.pdfViewer;if((!this.pdfRenderingQueue.printing||!window.matchMedia("print").matches)&&He){var ze=Ve.currentScaleValue;ze!=="auto"&&ze!=="page-fit"&&ze!=="page-width"||Ve.resize(ze)}}},{key:"webViewerPageRendered",value:function(He){var Ve,ze=He.pageNumber;if(He.error,((Ve=this.pdfSidebar)===null||Ve===void 0?void 0:Ve.visibleView)===SidebarView.THUMBS){var Ne=this.pdfViewer.getPageView(ze-1),We=this.pdfThumbnailViewer.getThumbnail(ze-1);Ne&&We&&We.setImage(Ne)}}},{key:"annotationMode",get:function(){return this._annotationMode},set:function(He){this._annotationMode=He}},{key:"webViewerSwitchAnnotationEditorMode",value:function(He){this.pdfViewer.annotationEditorMode=He.mode}},{key:"switchTool",value:function(He){this.pdfCursorTools.switchTool(He)}},{key:"webViewerUpdateViewarea",value:function(He){var Ve,ze=He.location;this.isInitialViewSet&&((Ve=this.store)===null||Ve===void 0||Ve.setMultiple({page:ze.pageNumber,zoom:ze.scale,scrollLeft:ze.left,scrollTop:ze.top,rotation:ze.rotation}).catch(function(){})),this._textSearch&&this._textSearch.updateMatch()}},{key:"webViewerScrollModeChanged",value:function(He){var Ve;this.isInitialViewSet&&!this.pdfViewer.isInPresentationMode&&((Ve=this.store)===null||Ve===void 0||Ve.set("scrollMode",He.mode).catch(function(){}))}},{key:"webViewerScaleChanging",value:function(He){this.scaleChangedCallback&&this.scaleChangedCallback(He.scale)}},{key:"webViewerRotationChanging",value:function(He){this.pdfThumbnailViewer.pagesRotation=He.pagesRotation,this.forceRendering(),this.pdfViewer.currentPageNumber=He.pageNumber}},{key:"webViewerPageChanging",value:function(He){var Ve,ze=He.pageNumber;return He.pageLabel,((Ve=this.pdfSidebar)===null||Ve===void 0?void 0:Ve.visibleView)===SidebarView.THUMBS&&this.pdfThumbnailViewer.scrollThumbnailIntoView(ze),this.pageChangedCallback(this.page),this.searchPageResults&&this.clearSearchResults(),ze}},{key:"webViewerSidebarViewChanged",value:function(He){var Ve,ze=He.view;this.pdfRenderingQueue.isThumbnailViewEnabled=ze===SidebarView.THUMBS,this.isInitialViewSet&&((Ve=this.store)===null||Ve===void 0||Ve.set("sidebarView",ze).catch(function(){}))}},{key:"selectAnnotation",value:function(He){var Ve=He.pageIndex,ze=this.pdfViewer._pages[Ve];ze&&ze.selectAnnotation(He)}},{key:"deselectAnnotation",value:function(He){var Ve=Object.values(this.annotations).reduce(function(We,Fe){return We.concat(Fe)},[]);if(Ve&&Ve.length&&He){if(!("pageIndex"in He)){var ze=Ve.find(function(We){return We.name===He.name});ze&&(He.pageIndex=ze.pageIndex)}var Ne=this.pdfViewer._pages[He.pageIndex];Ne&&Ne.deselectAnnotation(He)}}},{key:"enableFillConsecutively",value:function(){this.isFillConsecutively=!0}},{key:"disableFillConsecutively",value:function(){this.isFillConsecutively=!1}},{key:"jumpToAnnotation",value:function(He){var Ve=He.rect,ze=He.pageIndex,Ne=Ve.left*this.scale,We=Ve.top*this.scale-(He.type==="text"?34:10);scrollIntoView(this.pdfViewer._pages[ze].div,{left:Ne,top:We})}},{key:"enableAnnotationPopup",value:function(){this.isAnnotationPopup=!0}},{key:"disableAnnotationPopup",value:function(){this.isAnnotationPopup=!1}},{key:"webViewerPageMode",value:function(He){var Ve,ze=He.mode;switch(ze){case"thumbs":Ve=SidebarView.THUMBS;break;case"bookmarks":case"outline":Ve=SidebarView.OUTLINE;break;case"attachments":Ve=SidebarView.ATTACHMENTS;break;case"layers":Ve=SidebarView.LAYERS;break;case"none":Ve=SidebarView.NONE;break;default:return void console.error('Invalid "pagemode" hash parameter: '+ze)}this.pdfSidebar.switchView(Ve,!0)}},{key:"webViewerNamedAction",value:(ve=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze;return _regeneratorRuntime().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:Ne.t0=Ve.action,Ne.next=Ne.t0==="GoToPage"?3:Ne.t0==="Print"?5:Ne.t0==="SaveAs"?12:14;break;case 3:return this.appConfig.toolbar.pageNumber.select(),Ne.abrupt("break",14);case 5:return Ne.next=7,this.printPages();case 7:if((ze=Ne.sent).length){Ne.next=10;break}return Ne.abrupt("return",!1);case 10:return this.printDocument(ze),Ne.abrupt("return",!0);case 12:return this.downloadOrSave(),Ne.abrupt("break",14);case 14:case"end":return Ne.stop()}},He,this)})),function(He){return ve.apply(this,arguments)})},{key:"triggerPrinting",value:function(He){var Ve=He instanceof Blob?URL.createObjectURL(He):He;Ve=decodeURIComponent(Ve),printJS({url:Ve,printable:Ve,type:"pdf",showModal:!1})}},{key:"webViewerPresentationModeChanged",value:function(He){this.pdfViewer.presentationModeState=He.state}},{key:"webViewerPresentationMode",value:function(){this.requestPresentationMode()}},{key:"webViewerNextPage",value:function(){this.pdfViewer.nextPage()}},{key:"webViewerPreviousPage",value:function(){this.pdfViewer.previousPage()}},{key:"webViewerZoomIn",value:function(){this.zoomIn()}},{key:"webViewerZoomOut",value:function(){this.zoomOut()}},{key:"webViewerPageNumberChanged",value:function(He){var Ve=this.pdfViewer;He.value!==""&&this.pdfLinkService.goToPage(He.value),He.value!==Ve.currentPageNumber.toString()&&He.value!==Ve.currentPageLabel&&this.toolbar.setPageNumber(Ve.currentPageNumber,Ve.currentPageLabel)}},{key:"webViewerScaleChanged",value:function(He){var Ve=this.page;this.pdfViewer.currentScaleValue=He,this.page=Ve}},{key:"webViewerRotateCw",value:function(){this.rotatePages(90)}},{key:"webViewerRotateCcw",value:function(){this.rotatePages(-90)}},{key:"webViewerSwitchScrollMode",value:function(He){this.pdfViewer.scrollMode=He}},{key:"webViewerSwitchSpreadMode",value:function(He){this.pdfViewer.spreadMode=He}},{key:"rotatePages",value:(Ae=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve,ze){var Ne=this;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.abrupt("return",this.enqueue(function(){return Ne.rotatePagesOri(Ve,ze)}));case 1:case"end":return We.stop()}},He,this)})),function(He,Ve){return Ae.apply(this,arguments)})},{key:"webViewerSpreadModeChanged",value:function(He){var Ve;this.isInitialViewSet&&!this.pdfViewer.isInPresentationMode&&((Ve=this.store)===null||Ve===void 0||Ve.set("spreadMode",He.mode).catch(function(){}))}},{key:"webViewerFindFromUrlHash",value:function(He){this.eventBus.dispatch("find",{source:He.source,type:"",query:He.query,phraseSearch:He.phraseSearch,caseSensitive:!1,entireWord:!1,highlightAll:!0,findPrevious:!1,matchDiacritics:!0})}},{key:"webViewerUpdateFindMatchesCount",value:function(He){var Ve=He.matchesCount;this.supportsIntegratedFind?this.externalServices.updateFindMatchesCount(Ve):this.findBar.updateResultsCount(Ve)}},{key:"webViewerUpdateFindControlState",value:function(He){var Ve=He.state,ze=He.previous,Ne=He.matchesCount,We=He.rawQuery;this.supportsIntegratedFind?this.externalServices.updateFindControlState({result:Ve,findPrevious:ze,matchesCount:Ne,rawQuery:We}):this.findBar.updateUIState(Ve,ze,Ne)}},{key:"webViewerFileInputChange",value:function(He){var Ve;if((Ve=this.pdfViewer)===null||Ve===void 0||!Ve.isInPresentationMode){var ze=He.fileInput.files[0],Ne=URL.createObjectURL(ze);ze.name&&(Ne={url:Ne,originalUrl:ze.name}),this.open(Ne)}}},{key:"webViewerOpenFile",value:function(He){this.appConfig.openFileInput.click()}},{key:"setToolMode",value:(Ee=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye;return _regeneratorRuntime().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(!isMobileDevice$1||Ve!=="separation"){Ke.next=3;break}return console.warn("This feature is not available for Mobile, please access on PC for the best experience"),Ke.abrupt("return");case 3:if(ze=this.toolMode,this.toolMode=Ve,Ve==="editor"&&this.fontFileInited,["redaction","remove"].includes(this.activeTool)&&this.toolMode!=="redaction"&&(this.redactionList.length&&this.applyRedactions(),this.setTool({color:"",tool:""})),this.eventBus.dispatch("toolModeChanged",Ve),ze!=="editor"||this.toolMode==="editor"){Ke.next=11;break}return Ke.next=11,this.updateTextPtr();case 11:ze!=="editor"&&this.toolMode==="editor"&&this.contentEditManager&&this.contentEditManager.getSelectedEditBox()&&this.contentEditManager.setSelectedEditBox(null),ze==="separation"&&this.toolMode!=="separation"&&(this.colorList.length=0,annotationStore.ignoreColors.length=0,this.pdfViewer.refreshCanvas()),Ke.t0=_regeneratorRuntime().keys(this.annotations);case 14:if((Ke.t1=Ke.t0()).done){Ke.next=28;break}Ne=Ke.t1.value,We=0;case 17:if(!(We<this.annotations[Ne].length)){Ke.next=26;break}if(Fe=this.annotations[Ne][We]){Ke.next=21;break}return Ke.abrupt("continue",23);case 21:(Ye=document.getElementById(Fe.name))&&(this.toolMode!=="form"?Fe.isHidden==1?(Ye.style.display="none",Ye.style.pointerEvents="none"):Fe.isHidden==0&&(Ye.style.display="",Ye.style.pointerEvents=""):(Ye.style.display="",Ye.style.pointerEvents=""));case 23:We++,Ke.next=17;break;case 26:Ke.next=14;break;case 28:case"end":return Ke.stop()}},He,this)})),function(He){return Ee.apply(this,arguments)})},{key:"updateTextPtr",value:(oe=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze,Ne,We=this;return _regeneratorRuntime().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,this.messageHandler.sendWithPromise("ClearPage",{doc:this.doc});case 2:Ve=0;case 3:if(!(Ve<this.pagesCount)){Fe.next=17;break}return Fe.next=6,this.messageHandler.sendWithPromise("ClearText",{textPtr:this.pagesPtr[Ve].textPtr});case 6:return Fe.next=8,this.messageHandler.sendWithPromise("GetPageSize",{doc:this.doc,pageIndex:Ve});case 8:return ze=Fe.sent,Fe.next=11,this.messageHandler.sendWithPromise("InitText",{pagePtr:ze.pagePtr});case 11:Ne=Fe.sent,this.pagesPtr[Ve].textPtr=Ne,this.pagesPtr[Ve].pagePtr=ze.pagePtr;case 14:Ve++,Fe.next=3;break;case 17:return this.pdfViewer.pagesPtr=this.pagesPtr,this.pdfViewer._pages.forEach(function(Ye){Ye.pagePtr=We.pagesPtr[Ye.pageIndex].pagePtr}),this.pdfViewer.refresh(),Fe.abrupt("return",new Promise(function(Ye){We.eventBus._on("pagerendered",function Ke(){We.eventBus._off("pagerendered",Ke),Ye()})}));case 21:case"end":return Fe.stop()}},He,this)})),function(){return oe.apply(this,arguments)})},{key:"setPropertyPanel",value:function(He){this.eventBus.dispatch("propertyPanelChanged",He)}},{key:"setContentEditorProperty",value:function(He,Ve){He==="text"?this.eventBus.dispatch("textPropertyChanged",Ve):He==="image"&&this.eventBus.dispatch("imagePropertyChanged",Ve)}},{key:"setAnnotationStyles",value:function(He,Ve){this.annotationManager.setAnnotationStyles(He,Ve)}},{key:"setInitProperty",value:function(){this.activeTool==="textfield"?this.eventBus.dispatch("initTextfieldName"):this.activeTool==="checkbox"?this.eventBus.dispatch("initCheckboxName"):this.activeTool==="radiobutton"?this.eventBus.dispatch("initRadioButtonName"):this.activeTool==="pushbutton"&&this.eventBus.dispatch("initPushButtonName")}},{key:"getDynamicStampPreview",value:(le=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze,ot;return _regeneratorRuntime().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return Qe.next=2,this.messageHandler.sendWithPromise("GetDynamicStampPreview",Ve);case 2:return ze=Qe.sent,Ne=ze.width,We=ze.height,Fe=ze.imageArray,(Ye=document.createElement("canvas")).style.width=Ne+"px",Ye.style.height=We+"px",Ye.width=Ne,Ye.height=We,(Ke=Ye.getContext("2d")).clearRect(0,0,Ye.width,Ye.height),(Ze=Ke.createImageData(Ne,We)).data.set(Fe),Ke.putImageData(Ze,0,0),ot=Ye.toDataURL("image/png",1),Qe.abrupt("return",{width:Ne,height:We,imgSrc:ot});case 18:case"end":return Qe.stop()}},He,this)})),function(He){return le.apply(this,arguments)})},{key:"handleField",value:function(He){var Ve=He.id,ze=He.key,Ne=He.value;if(Ve&&annotationStore.annotationsAll){var We=Object.values(annotationStore.annotationsAll).reduce(function(Ye,Ke){return Ye.concat(Ke)},[]).find(function(Ye){return Ye.name===Ve});if(ze&&(Ne||Ne===0)){var Fe={name:Ve};Fe[ze]=Ne,this.eventBus.dispatch("setProperty",Fe)}return We}}},{key:"handleSign",value:(te=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke;return _regeneratorRuntime().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(ze=Ve.type,Ne=ze===void 0?0:ze,We=Ve.flag,Fe=Ve.param,We!=="create"||this.Signatures||(this.Signatures=new Signatures({pdfViewer:this.pdfViewer,eventBus:this.eventBus,type:Ne})),We!=="save"||!Ne){Ze.next=6;break}return Ye=Ve.pkcs12Buffer,Ke=Ve.password,Ze.next=6,this.updateSignatureAp(_objectSpread2$1({type:Ne,annotPtr:Fe.annotation.annotPtr,pkcs12Buffer:Ye,password:Ke},Fe));case 6:if(this.Signatures){Ze.next=8;break}return Ze.abrupt("return");case 8:if(We!=="clear"&&We!=="create"||this.Signatures.clear(),We!=="save"){Ze.next=11;break}return Ze.abrupt("return",this.Signatures.toImage(Fe));case 11:if(We==="reset"&&(this.Signatures.reset(),this.Signatures=null),We==="update"&&this.Signatures.update(Fe),We!=="image"){Ze.next=15;break}return Ze.abrupt("return",this.Signatures.getImageBase64(Fe));case 15:case"end":return Ze.stop()}},He,this)})),function(He){return te.apply(this,arguments)})},{key:"handleStamp",value:(W=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at,rt,ct,ht;return _regeneratorRuntime().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:if(Ve){yt.next=2;break}return yt.abrupt("return");case 2:if(ze=Ve.page,Ne=this.pdfViewer.getPageView(ze-1),We=null,Fe=null,Ne&&(We={left:Ve.rect.x,top:Ve.rect.y,right:Ve.rect.x+Ve.rect.width,bottom:Ve.rect.y+Ve.rect.height}),Ve.stampType==="standard"&&(Fe={operate:"add-annot",type:"stamp",pageIndex:ze-1,rect:We,stampColor:"white",date:new Date,stampType:"standard",contents:Ve.contents}),Ve.stampType==="dynamic"&&(Fe={operate:"add-annot",type:"stamp",date:new Date,rect:We,pageIndex:ze-1,contents:Ve.contents,time:Ve.time,stampColor:Ve.stampColor,stampType:"text"}),Ve.stampType==="image"&&(Fe={operate:"add-annot",type:"stamp",stampType:"image",pageIndex:ze-1,date:new Date,imageBase64:Ve.imageBase64,rect:We}),Fe.stampShape=0,Fe.rect){yt.next=28;break}return yt.next=14,this.messageHandler.sendWithPromise("GetStampRect",{doc:this.doc,pagePtr:this.pagesPtr[ze-1].pagePtr,annotation:Fe});case 14:if(!(Ye=yt.sent)||!Ye.code){yt.next=19;break}return this.eventBus.dispatch("message",{type:"ERROR",message:result.message}),console.log(result.message),yt.abrupt("return",!1);case 19:Ke=Ne.viewport.viewBox[2],Ze=Ne.viewport.viewBox[3],ot=Ye.right-Ye.left,Qe=Ye.bottom-Ye.top,at=(Ke-ot)/2,rt=(Ze-Qe)/2,ct=(Ke+ot)/2,ht=(Ze+Qe)/2,Fe.rect={left:at,right:ct,top:rt,bottom:ht};case 28:this.eventBus.dispatch("annotationChanged",{type:"add",annotation:Fe});case 29:case"end":return yt.stop()}},He,this)})),function(He){return W.apply(this,arguments)})},{key:"compare",value:(Z=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze;return _regeneratorRuntime().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.messageHandler.sendWithPromise("CompareDocument",{data:Ve});case 2:if(!(ze=Ne.sent)||!ze.code){Ne.next=7;break}return this.eventBus.dispatch("message",{type:"ERROR",message:ze.message}),console.log(ze.message),Ne.abrupt("return",!1);case 7:if(Ve.type!==1){Ne.next=11;break}return Ne.abrupt("return",[{filename:Ve.leftFile.name.replace(/(\.pdf)/,"_".concat(this.$t("compare.byComPDFKit"),".pdf")),url:URL.createObjectURL(ze.oldDocument)},{filename:Ve.rightFile.name.replace(/(\.pdf)/,"_".concat(this.$t("compare.byComPDFKit"),".pdf")),url:URL.createObjectURL(ze.newDocument)},{filename:this.$t("compare.byComPDFKit")+".pdf",url:URL.createObjectURL(ze.blobData)}]);case 11:if(Ve.type!==2){Ne.next=13;break}return Ne.abrupt("return",{filename:this._docName,url:URL.createObjectURL(ze.blobData)});case 13:case"end":return Ne.stop()}},He,this)})),function(He){return Z.apply(this,arguments)})},{key:"checkPassword",value:(j=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke=this,Ze=arguments;return _regeneratorRuntime().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ze=Ze.length>1&&Ze[1]!==void 0&&Ze[1],Ne={cMapUrl:CMAP_URL,cMapPacked:!0,enableXfa:!0},typeof Ve=="string"?Ne.url=Ve:Ve&&"byteLength"in Ve?Ne.data=Ve:Ve.url&&Ve.originalUrl&&(Ne.url=Ve.url),We=pdfExports.getDocument(Ne),this.pdfLoadingTask=We,Fe="",Ye=function(Qe){return Fe=Qe},We.onPassword=function(Qe,at){Ke.passwordPrompt.setUpdateCallback(Qe,at,Ye),Ke.passwordPrompt.open()},ot.next=10,We.promise.then(function(){return Fe&&!ze&&(Ke._pwd=Fe),Fe}).catch(function(Qe){return!1});case 10:return ot.abrupt("return",ot.sent);case 11:case"end":return ot.stop()}},He,this)})),function(He){return j.apply(this,arguments)})},{key:"handleCreateStatus",value:function(He){var Ve=He.bool,ze=He.fileData;annotationStore.creating=Ve,annotationStore.fileData=ze}},{key:"initFontFile",value:(X=_asyncToGenerator(_regeneratorRuntime().mark(function He(){return _regeneratorRuntime().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:try{this.pdfViewer.setFontFile(this._fileList),this.fontFileInited=!0}catch(ze){console.log(ze)}case 1:case"end":return Ve.stop()}},He,this)})),function(){return X.apply(this,arguments)})},{key:"getPages",value:(re=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe;return _regeneratorRuntime().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.next=2,this.messageHandler.sendWithPromise("GetPageCount",{doc:Ve});case 2:ze=Ye.sent,Ne=[],We=0;case 5:if(!(We<ze)){Ye.next=13;break}return Ye.next=8,this.messageHandler.sendWithPromise("GetPageSize",{doc:Ve,pageIndex:We});case 8:Fe=Ye.sent,Ne.push({pagePtr:Fe.pagePtr,width:Fe.width,height:Fe.height});case 10:We++,Ye.next=5;break;case 13:return Ye.abrupt("return",Ne);case 14:case"end":return Ye.stop()}},He,this)})),function(He){return re.apply(this,arguments)})},{key:"getMinRadioSize",value:function(He,Ve,ze){var Ne=Math.min(ze.width/He,ze.height/Ve);return{width:He*Ne,height:Ve*Ne}}},{key:"getDocEditorPages",value:(J=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at,rt,ct,ht,yt,bt,$t,At,Ft,Ht,Ot,Mt,pt,xt,Tt=arguments;return _regeneratorRuntime().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(ze=Tt.length>1&&Tt[1]!==void 0?Tt[1]:0,Ne=Tt.length>2&&Tt[2]!==void 0?Tt[2]:null,this.docEditorCopy){Ct.next=10;break}return Ct.next=5,this.messageHandler.sendWithPromise("createEditorDoc",{doc:this.doc,password:this._oldPwd||this._pwd});case 5:return We=Ct.sent,Ct.next=8,this.getPages(We);case 8:Fe=Ct.sent,this.docEditorCopy={doc:We,pages:Fe};case 10:Ye=this.docEditorCopy.pages,Ke=window.devicePixelRatio||1,Ze=[],ot=[],Qe=0;case 15:if(!(Qe<(Ne!=null?Ne:Ye.length))){Ct.next=49;break}if(this.toolMode==="document"){Ct.next=18;break}return Ct.abrupt("break",49);case 18:return at=Ye[Qe+ze],rt=Ze.pop()||document.createElement("canvas"),ct=ot.pop()||rt.getContext("2d",{alpha:!1}),ht=this.getMinRadioSize(at.width,at.height,Ve),yt=ht.width,bt=ht.height,$t=Math.round(yt*Ke),At=Math.round(bt*Ke),Ct.next=26,this.messageHandler.sendWithPromise("RenderPageBitmap",{pagePtr:at.pagePtr,x:0,y:0,width:$t,height:At});case 26:if(!(Ft=Ct.sent)||!Ft.code){Ct.next=31;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ft.message}),console.log(Ft.message),Ct.abrupt("return");case 31:Ht=Ft.imageArray,rt.width=$t,rt.height=At,Ot=ct.createImageData(rt.width,rt.height),Mt=new Uint8ClampedArray(Ht.buffer),Ot.data.set(Mt),ct.putImageData(Ot,0,0),pt=rt.toDataURL("image/png",1),xt={type:"page",img:pt,size:{width:at.width,height:at.height},rotation:0},this.eventBus.dispatch("getDocEditorPages",{index:Qe+ze,pageData:xt}),rt.width=0,rt.height=0,ct.clearRect(0,0,$t,At),Ze.push(rt),ot.push(ct);case 46:Qe++,Ct.next=15;break;case 49:Ze.forEach(function(Nt){return URL.revokeObjectURL(Nt.toDataURL())}),Ze.length=0,ot.length=0;case 52:case"end":return Ct.stop()}},He,this)})),function(He){return J.apply(this,arguments)})},{key:"updatePages",value:(ne=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze;return _regeneratorRuntime().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.messageHandler.sendWithPromise("SaveDocumentByStream",{doc:this.doc,saveType:2,password:this._oldPwd,oldPassword:this._oldPwd,permissionPassword:this._permissionPwd,permissions:this._setPermission});case 2:return Ve=Ne.sent,ze=this.saveAction,Ne.next=6,this.loadDocument(URL.createObjectURL(Ve),{filename:this._docName,notUpdatePwd:!0,saveAction:ze});case 6:this.eventBus.dispatch("onPagesUpdated",{pageNumber:this.page});case 7:case"end":return Ne.stop()}},He,this)})),function(){return ne.apply(this,arguments)})},{key:"insertBlankPageOri",value:(q=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze,Ne,We,Fe,Ye=arguments;return _regeneratorRuntime().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(ze=Ye.length>1&&Ye[1]!==void 0?Ye[1]:595,Ne=Ye.length>2&&Ye[2]!==void 0?Ye[2]:842,!((Ve=Ye.length>0&&Ye[0]!==void 0?Ye[0]:0)>this.pagesCount||Ve<0)){Ke.next=5;break}return Ke.abrupt("return");case 5:return Ke.next=7,this.messageHandler.sendWithPromise("InsertPage",{doc:this.doc,index:Ve,width:ze,height:Ne});case 7:if(!(We=Ke.sent)||!We.code){Ke.next=12;break}return this.eventBus.dispatch("message",{type:"ERROR",message:We.message}),console.log(We.message),Ke.abrupt("return",!1);case 12:if(Fe=We.status){Ke.next=16;break}return console.warn("insert page",Fe),Ke.abrupt("return",!1);case 16:return Ke.next=18,this.updatePages();case 18:case"end":return Ke.stop()}},He,this)})),function(){return q.apply(this,arguments)})},{key:"insertBlankPage",value:(Q=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze,Ne,We=this,Fe=arguments;return _regeneratorRuntime().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ve=Fe.length>0&&Fe[0]!==void 0?Fe[0]:0,ze=Fe.length>1&&Fe[1]!==void 0?Fe[1]:595,Ne=Fe.length>2&&Fe[2]!==void 0?Fe[2]:842,Ye.abrupt("return",this.enqueue(function(){return We.insertBlankPageOri(Ve,ze,Ne)}));case 4:case"end":return Ye.stop()}},He,this)})),function(){return Q.apply(this,arguments)})},{key:"insertPagesOri",value:(Y=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze=arguments;return _regeneratorRuntime().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(ze=Ze.length>1&&Ze[1]!==void 0?Ze[1]:0,Ne=Ze.length>2&&Ze[2]!==void 0?Ze[2]:[0],We=Ze.length>3&&Ze[3]!==void 0?Ze[3]:"",!(!Ve||ze>=this.pagesCount||ze<0)){ot.next=5;break}return ot.abrupt("return");case 5:if(Fe=null,!Array.isArray(Ne)){ot.next=10;break}Fe=Ne.join(","),ot.next=15;break;case 10:if(Ne!=="all"){ot.next=14;break}Fe="all",ot.next=15;break;case 14:return ot.abrupt("return");case 15:return ot.next=17,this.messageHandler.sendWithPromise("ImportPagesAtIndex",{doc:this.doc,file:Ve,range:Fe,index:ze,password:We});case 17:if(!(Ye=ot.sent)||!Ye.code){ot.next=22;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ye.message}),console.log(Ye.message),ot.abrupt("return",!1);case 22:if(Ke=Ye.status){ot.next=26;break}return console.warn("insert pdf",Ke),ot.abrupt("return",!1);case 26:return ot.next=28,this.updatePages();case 28:case"end":return ot.stop()}},He,this)})),function(He){return Y.apply(this,arguments)})},{key:"insertPages",value:(U=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe=this,Ye=arguments;return _regeneratorRuntime().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return ze=Ye.length>1&&Ye[1]!==void 0?Ye[1]:0,Ne=Ye.length>2&&Ye[2]!==void 0?Ye[2]:[0],We=Ye.length>3&&Ye[3]!==void 0?Ye[3]:"",Ke.abrupt("return",this.enqueue(function(){return Fe.insertPagesOri(Ve,ze,Ne,We)}));case 4:case"end":return Ke.stop()}},He,this)})),function(He){return U.apply(this,arguments)})},{key:"removePagesOri",value:(F=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne=this;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(Ve.sort(function(Fe,Ye){return Ye-Fe}),ze=null,Ve.forEach(function(){var Fe=_asyncToGenerator(_regeneratorRuntime().mark(function Ye(Ke){var Ze;return _regeneratorRuntime().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(!ze||!ze.code){ot.next=2;break}return ot.abrupt("return");case 2:if(!(Ke>=Ne.pagesCount||Ke<0)){ot.next=4;break}return ot.abrupt("return");case 4:return ot.next=6,Ne.messageHandler.sendWithPromise("RemovePage",{doc:Ne.doc,index:Ke});case 6:ze=ot.sent,(Ze=ze.status)||console.warn("delete",Ze);case 9:case"end":return ot.stop()}},Ye)}));return function(Ye){return Fe.apply(this,arguments)}}()),!ze||!ze.code){We.next=7;break}return this.eventBus.dispatch("message",{type:"ERROR",message:ze.message}),console.log(ze.message),We.abrupt("return",!1);case 7:return We.next=9,this.updatePages();case 9:case"end":return We.stop()}},He,this)})),function(He){return F.apply(this,arguments)})},{key:"removePages",value:(O=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze=this;return _regeneratorRuntime().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.abrupt("return",this.enqueue(function(){return ze.removePagesOri(Ve)}));case 1:case"end":return Ne.stop()}},He,this)})),function(He){return O.apply(this,arguments)})},{key:"rotatePagesOri",value:(N=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve,ze){var Ne,We=this;return _regeneratorRuntime().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(Ne=null,Ve.forEach(function(){var Ye=_asyncToGenerator(_regeneratorRuntime().mark(function Ke(Ze){return _regeneratorRuntime().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(!Ne||!Ne.code){ot.next=2;break}return ot.abrupt("return");case 2:if(!(Ze>=We.pagesCount||Ze<0)){ot.next=4;break}return ot.abrupt("return");case 4:return ot.next=6,We.messageHandler.sendWithPromise("RotatePage",{pagePtr:We.pagesPtr[Ze].pagePtr,rotation:ze});case 6:Ne=ot.sent;case 7:case"end":return ot.stop()}},Ke)}));return function(Ke){return Ye.apply(this,arguments)}}()),!Ne||!Ne.code){Fe.next=6;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ne.message}),console.log(Ne.message),Fe.abrupt("return",!1);case 6:return Fe.next=8,this.updatePages();case 8:case"end":return Fe.stop()}},He,this)})),function(He,Ve){return N.apply(this,arguments)})},{key:"copyPagesOri",value:(I=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke;return _regeneratorRuntime().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:Ve.sort(function(ot,Qe){return Qe-ot}),ze=null,Ne=_createForOfIteratorHelper(Ve),Ze.prev=3,Ne.s();case 5:if((We=Ne.n()).done){Ze.next=28;break}if(Ye=We.value,(Fe=ze)===null||Fe===void 0||!Fe.code){Ze.next=9;break}return Ze.abrupt("break",28);case 9:if(!(Ye>=this.pagesCount||Ye<0)){Ze.next=11;break}return Ze.abrupt("continue",26);case 11:return Ze.prev=11,Ze.next=14,this.messageHandler.sendWithPromise("CopyPage",{doc:this.doc,index:Ye});case 14:if(ze=Ze.sent,(Ke=ze)===null||Ke===void 0||!Ke.code){Ze.next=19;break}return this.eventBus.dispatch("message",{type:"ERROR",message:ze.message}),console.log(ze.message),Ze.abrupt("return",!1);case 19:ze.status||console.warn("copy",ze.status),Ze.next=26;break;case 22:return Ze.prev=22,Ze.t0=Ze.catch(11),console.error("\u590D\u5236\u9875\u9762\u5931\u8D25:",Ze.t0),Ze.abrupt("return",!1);case 26:Ze.next=5;break;case 28:Ze.next=33;break;case 30:Ze.prev=30,Ze.t1=Ze.catch(3),Ne.e(Ze.t1);case 33:return Ze.prev=33,Ne.f(),Ze.finish(33);case 36:return Ze.next=38,this.updatePages();case 38:return Ze.abrupt("return",!0);case 39:case"end":return Ze.stop()}},He,this,[[3,30,33,36],[11,22]])})),function(He){return I.apply(this,arguments)})},{key:"copyPages",value:(D=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze=this;return _regeneratorRuntime().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.abrupt("return",this.enqueue(function(){return ze.copyPagesOri(Ve)}));case 1:case"end":return Ne.stop()}},He,this)})),function(He){return D.apply(this,arguments)})},{key:"extractPages",value:(T=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We;return _regeneratorRuntime().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return ze=Ve.join(","),Fe.next=3,this.messageHandler.sendWithPromise("ExtractPage",{doc:this.doc,range:ze});case 3:if(!(Ne=Fe.sent)||!Ne.code){Fe.next=8;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ne.message}),console.log(Ne.message),Fe.abrupt("return",!1);case 8:if(We=Ne.blobDataList){Fe.next=12;break}return console.warn("extract",0),Fe.abrupt("return",!1);case 12:return Fe.abrupt("return",We[0]);case 13:case"end":return Fe.stop()}},He,this)})),function(He){return T.apply(this,arguments)})},{key:"movePagesOri",value:(M=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve,ze){var Ne,We,Fe,Ye,Ke,Ze;return _regeneratorRuntime().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:Ve.sort(function(Qe,at){return Qe-at}),ze=Math.min(this.pagesCount,ze),ze=Math.max(0,ze),Ne=0;case 4:if(!(Ne<Ve.length)){ot.next=23;break}if(We=void 0,Fe=void 0,!(Ve[Ne]>=this.pagesCount||Ve[Ne]<0)){ot.next=8;break}return ot.abrupt("continue",20);case 8:if(Ve[Ne]===ze)We=Ve[Ne],Fe=ze;else if(Ve[Ne]>ze)if(We=Ve[Ne],Ve.includes(ze))for(Fe=ze,Ye=0;Ye<Ve.length;Ye++)Ve[Ye]===Fe&&We!==Fe&&Fe++;else Fe=ze;else We=Ve[Ne]-Ne,Fe=ze-1;if(!Ve.includes(We)||!Ve.includes(Fe)||We!==Fe){ot.next=11;break}return ot.abrupt("continue",20);case 11:return ot.next=13,this.messageHandler.sendWithPromise("MovePage",{doc:this.doc,index:We,targetIndex:Fe});case 13:if(!(Ke=ot.sent)||!Ke.code){ot.next=18;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ke.message}),console.log(Ke.message),ot.abrupt("return",!1);case 18:(Ze=Ke.status)||console.warn("move",Ze);case 20:Ne++,ot.next=4;break;case 23:return ot.next=25,this.updatePages();case 25:case"end":return ot.stop()}},He,this)})),function(He,Ve){return M.apply(this,arguments)})},{key:"movePages",value:(E=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve,ze){var Ne=this;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.abrupt("return",this.enqueue(function(){return Ne.movePagesOri(Ve,ze)}));case 1:case"end":return We.stop()}},He,this)})),function(He,Ve){return E.apply(this,arguments)})},{key:"saveDocumentEdit",value:(S=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at,rt,ct,ht,yt,bt,$t,At,Ft,Ht,Ot=this;return _regeneratorRuntime().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:if(this.docEditorCopy){Mt.next=2;break}return Mt.abrupt("return");case 2:if(ze=this.docEditorCopy.doc,Ne=function(){var pt=_asyncToGenerator(_regeneratorRuntime().mark(function xt(){return _regeneratorRuntime().wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:return Tt.next=2,Ot.messageHandler.sendWithPromise("ClearDocument",ze);case 2:Ot.docEditorCopy=null;case 3:case"end":return Tt.stop()}},xt)}));return function(){return pt.apply(this,arguments)}}(),We=null,_typeof$1(Ve)==="object"){Mt.next=22;break}if(Ve!=="cancel"){Mt.next=10;break}return Mt.next=9,Ne();case 9:return Mt.abrupt("return");case 10:return this.saveAction==="remove"&&(this._pwd=""),Mt.next=13,this.messageHandler.sendWithPromise("SaveDocumentByStream",{doc:ze,saveType:this.saveAction==="remove"?3:2,password:this._pwd,oldPassword:this._oldPwd,permissionPassword:this._permissionPwd,permissions:this._setPermission});case 13:if(Fe=Mt.sent,Ye=this._docName,Ve!=="saveAs"){Mt.next=17;break}return Mt.abrupt("return",{blobData:Fe,filename:Ye});case 17:return Ke=URL.createObjectURL(Fe),this.saveAction==="set"&&this._oldPwd!==this._pwd&&(this._oldPwd=this._pwd),Mt.next=21,Ne();case 21:return Mt.abrupt("return",Ke);case 22:if(Ve.type!=="insert"){Mt.next=50;break}if(!Ve.file){Mt.next=41;break}return Mt.next=26,this.messageHandler.sendWithPromise("ImportPagesAtIndex",{doc:ze,file:Ve.file,range:Ve.range,index:Ve.pageIndex,password:Ve.password});case 26:if(!(Ze=Mt.sent)||!Ze.code){Mt.next=31;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ze.message}),console.log(Ze.message),Mt.abrupt("return",!1);case 31:if(ot=Ze.status){Mt.next=35;break}return console.warn("insert pdf",ot),Mt.abrupt("return",!1);case 35:return Mt.next=37,this.getPages(ze);case 37:return this.docEditorCopy.pages=Mt.sent,Mt.abrupt("return",this.docEditorCopy.pages.length);case 41:return Mt.next=43,this.messageHandler.sendWithPromise("InsertPage",{doc:ze,index:Ve.pageIndex,width:Ve.size.width,height:Ve.size.height});case 43:if(!(Qe=Mt.sent)||!Qe.code){Mt.next=48;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Qe.message}),console.log(Qe.message),Mt.abrupt("return",!1);case 48:(at=Qe.status)||console.warn("insert page",at);case 50:if(Ve.type==="delete"&&Ve.selectedPageIndexArray.forEach(function(){var pt=_asyncToGenerator(_regeneratorRuntime().mark(function xt(Tt){var Ct;return _regeneratorRuntime().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(!We||!We.code){Nt.next=2;break}return Nt.abrupt("return");case 2:return Nt.next=4,Ot.messageHandler.sendWithPromise("RemovePage",{doc:ze,index:Tt});case 4:if(!(We=Nt.sent)||!We.code){Nt.next=9;break}return Ot.eventBus.dispatch("message",{type:"ERROR",message:We.message}),console.log(We.message),Nt.abrupt("return");case 9:(Ct=We.status)||console.warn("delete",Ct);case 11:case"end":return Nt.stop()}},xt)}));return function(xt){return pt.apply(this,arguments)}}()),Ve.type==="rotate"&&Ve.selectedPageIndexArray.forEach(function(){var pt=_asyncToGenerator(_regeneratorRuntime().mark(function xt(Tt){return _regeneratorRuntime().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(!We||!We.code){Ct.next=2;break}return Ct.abrupt("return");case 2:return Ct.next=4,Ot.messageHandler.sendWithPromise("RotatePage",{pagePtr:Ot.docEditorCopy.pages[Tt].pagePtr,rotation:Ve.rotation});case 4:if(!(We=Ct.sent)||!We.code){Ct.next=9;break}return Ot.eventBus.dispatch("message",{type:"ERROR",message:We.message}),console.log(We.message),Ct.abrupt("return");case 9:case"end":return Ct.stop()}},xt)}));return function(xt){return pt.apply(this,arguments)}}()),Ve.type==="copy"&&Ve.selectedPageIndexArray.forEach(function(){var pt=_asyncToGenerator(_regeneratorRuntime().mark(function xt(Tt){var Ct;return _regeneratorRuntime().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(!We||!We.code){Nt.next=2;break}return Nt.abrupt("return");case 2:return Nt.next=4,Ot.messageHandler.sendWithPromise("CopyPage",{doc:ze,index:Tt});case 4:if(!(We=Nt.sent)||!We.code){Nt.next=9;break}return Ot.eventBus.dispatch("message",{type:"ERROR",message:We.message}),console.log(We.message),Nt.abrupt("return",!1);case 9:(Ct=We.status)||console.warn("copy",Ct);case 11:case"end":return Nt.stop()}},xt)}));return function(xt){return pt.apply(this,arguments)}}()),Ve.type!=="extract"){Mt.next=65;break}return Mt.next=56,this.messageHandler.sendWithPromise("ExtractPage",{doc:ze,range:Ve.range,separateFile:Ve.separateFile});case 56:if(!(rt=Mt.sent)||!rt.code){Mt.next=61;break}return this.eventBus.dispatch("message",{type:"ERROR",message:rt.message}),console.log(rt.message),Mt.abrupt("return",!1);case 61:if((ct=rt.blobDataList)||console.warn("extract",!1),Ve.separateFile){for(ht=new JSZip,yt=[],bt=0;bt<ct.length;bt++)$t=ct[bt],yt.push({blobData:$t.blobData,filename:$t.name+".pdf"});yt.forEach(function(pt){ht.file(pt.filename,pt.blobData,{binary:!0})}),ht.generateAsync({type:"blob"}).then(function(pt){FileSaver_minExports.saveAs(pt,"extracted documents.zip")})}else At=this._docName,FileSaver_minExports.saveAs(ct[0],At);return Mt.abrupt("return");case 65:if(Ve.type!=="move"){Mt.next=75;break}return Mt.next=68,this.messageHandler.sendWithPromise("MovePage",{doc:ze,index:Ve.pageIndex,targetIndex:Ve.targetPageIndex});case 68:if(!(Ft=Mt.sent)||!Ft.code){Mt.next=73;break}return this.eventBus.dispatch("message",{type:"ERROR",message:Ft.message}),console.log(Ft.message),Mt.abrupt("return",!1);case 73:(Ht=Ft.status)||console.warn("move",Ht);case 75:if(!We||!We.code){Mt.next=79;break}return this.eventBus.dispatch("message",{type:"ERROR",message:We.message}),console.log(We.message),Mt.abrupt("return",!1);case 79:return Mt.next=81,this.getPages(ze);case 81:this.docEditorCopy.pages=Mt.sent;case 82:case"end":return Mt.stop()}},He,this)})),function(He){return S.apply(this,arguments)})},{key:"addEditorImage",value:function(He){if(He){var Ve=He.imageBase64,ze=He.width,Ne=He.height,We=He.pageNum,Fe=this.pdfViewer.getPageView(We-1);if(Fe){var Ye=this.getAreaToPageRect(ze,Ne,We);Fe.contentContainer.addImageEditor({rect:Ye,imageBase64:Ve})}}}},{key:"addAnnotationImage",value:function(He){if(He){var Ve=He.imageBase64,ze=He.width,Ne=He.height,We=He.pageNum,Fe={operate:"add-annot",type:"stamp",stampType:"image",pageIndex:We-1,imageBase64:Ve,rect:this.getAreaToPageRect(ze,Ne,We),targetPage:We,date:new Date,name:v4()};this.addAnnotations(Fe)}}},{key:"getAreaToPageRect",value:function(He,Ve,ze){var Ne=this.pdfViewer.getPageView(ze-1);if(Ne){var We,Fe,Ye=.9*Ne.viewport.viewBox[2],Ke=.9*Ne.viewport.viewBox[3],Ze=He/Ve;Ze>Ye/Ke?(We=Ye,Fe=Ye/Ze):(We=Ke*Ze,Fe=Ke);var ot=Math.min(Ye,We),Qe=Math.min(Ke,Fe);return{left:(Ye-ot)/2+.1*Ne.viewport.viewBox[2],top:(Ke-Qe)/2+.1*Ne.viewport.viewBox[3],right:(Ye+ot)/2,bottom:(Ke+Qe)/2}}}},{key:"getSignature",value:(P=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe;return _regeneratorRuntime().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return ze=window.devicePixelRatio||1,Ne=Ve.rect,We=parseInt(Ne.width*ze),Fe=parseInt(Ne.height*ze),Ne.width=We,Ne.height=Fe,at.next=8,this.messageHandler.sendWithPromise("CreateSignatureAP",{rect:Ne,content:Ve.content,text:Ve.text?Ve.text:"",isContentAlginLeft:!!Ve.isContentAlginLeft&&Ve.isContentAlginLeft,isDrawOnlyContent:!!Ve.isDrawOnlyContent&&Ve.isDrawOnlyContent,isDrowLogo:!!Ve.isDrowLogo&&Ve.isDrowLogo,logoBase64:Ve.logoBase64?Ve.logoBase64:"",imageBase64:Ve.imageBase64?Ve.imageBase64:""});case 8:return Ye=at.sent,(Ke=document.createElement("canvas")).style.width=We+"px",Ke.style.height=Fe+"px",Ke.width=We,Ke.height=Fe,(Ze=Ke.getContext("2d")).clearRect(0,0,Ke.width,Ke.height),(ot=Ze.createImageData(We,Fe)).data.set(Ye),Ze.putImageData(ot,0,0),Qe=Ke.toDataURL("image/png",1),at.abrupt("return",Qe);case 21:case"end":return at.stop()}},He,this)})),function(He){return P.apply(this,arguments)})},{key:"deleteSignature",value:(k=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){return _regeneratorRuntime().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return this.messageHandler.sendWithPromise("RemoveSignature",{doc:this.doc,signaturePtr:Ve.signaturePtr}),this.eventBus.dispatch("updateSignatureFieldAp",{signaturePtr:Ve.signaturePtr}),annotationStore.signatures.splice(Ve.index,1),ze.next=5,this.getSignatures();case 5:case"end":return ze.stop()}},He,this)})),function(He){return k.apply(this,arguments)})},{key:"getSignatures",value:(x=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze,Ne;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.next=2,this.messageHandler.sendWithPromise("GetSignatures",{doc:this.doc});case 2:return Ve=We.sent,ze=Ve.signatures,Ne=Ve.signaturePtrList,annotationStore.signatures=ze,this.eventBus.dispatch("getSignatures",annotationStore.signatures),We.abrupt("return",Ne);case 8:case"end":return We.stop()}},He,this)})),function(){return x.apply(this,arguments)})},{key:"addToTrustedCertificateLists",value:(f=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return ze=annotationStore.signatures[Ve].signerList[0].signerPtr,We.next=3,this.messageHandler.sendWithPromise("AddToTrustedCertificates",{signerPtr:ze});case 3:return Ne=We.sent,annotationStore.signatures[Ve].signerList[0].isCertTrusted=!!Ne,this.eventBus.dispatch("getSignatures",annotationStore.signatures),We.abrupt("return",Ne);case 7:case"end":return We.stop()}},He,this)})),function(He){return f.apply(this,arguments)})},{key:"updateSignatureAp",value:(d=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at,rt,ct,ht,yt,bt,$t,At,Ft,Ht,Ot,Mt,pt,xt,Tt,Ct,Nt,jt;return _regeneratorRuntime().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:if(ze=Ve.type,Ne=Ve.pagePtr,We=Ve.rect,Fe=Ve.annotPtr,Ye=Ve.imageArray,Ke=Ve.imageBase64,Ze=Ve.annotation,ot=Ve.width,Qe=Ve.height,this.autoJumpNextSign&&Object.values(this.annotations).findIndex(function(Wt){return Wt.name===Ze.name}),!ze){nn.next=17;break}return at=Ve.content,rt=Ve.isDrawOnlyContent,ct=rt!==void 0&&rt,ht=Ve.isDrowLogo,yt=ht!==void 0&&ht,bt=Ve.isContentAlginLeft,$t=Ve.text,At=Ve.logoBase64,Ft=Ve.pkcs12Buffer,Ht=Ve.password,nn.next=6,this.messageHandler.sendWithPromise("UpdateDigitalSignAp",{doc:this.doc,annotPtr:Fe,content:at,isDrawOnlyContent:ct,isDrowLogo:yt,isContentAlginLeft:bt,text:$t,logoBase64:At,imageBase64:Ke,pkcs12Buffer:Ft,password:Ht,width:ot,height:Qe,appearance:Ve.appearance?Ve.appearance:"default"});case 6:return Ot=nn.sent,Mt=URL.createObjectURL(Ot),pt=this._docName,xt=this.page,nn.next=12,this.loadDocument(Mt,{filename:pt,notUpdatePwd:!0});case 12:this.page=xt,this.eventBus.dispatch("onPagesUpdated",{pageNumber:xt}),URL.revokeObjectURL(Ot),nn.next=20;break;case 17:return nn.next=19,this.messageHandler.sendWithPromise("UpdateSignatureAP",{doc:this.doc,annotPtr:Fe,pagePtr:Ne,rect:We,imageArray:Ye,imageBase64:Ke});case 19:this.eventBus.dispatch("updateSignatureFieldAp",{annotPtr:Fe});case 20:Tt=Object.values(this.annotations).reduce(function(Wt,cn){return Wt.concat(cn)},[]).filter(function(Wt){return Wt.type==="signatureFields"}),Ct=Tt.filter(function(Wt){return Wt.type==="signatureFields"&&!Wt.isSigned&&!Wt.isSignedDigitally}),this.eventBus.dispatch("signedComplete",{unSignedNumber:Ct.length}),this.autoJumpNextSign&&(Nt=Ct.findIndex(function(Wt){return Wt.name===Ze.name}),(jt=Ct[Nt+1])&&this.jumpToAnnotation(jt));case 24:case"end":return nn.stop()}},He,this)})),function(He){return d.apply(this,arguments)})},{key:"verifySignature",value:(m=_asyncToGenerator(_regeneratorRuntime().mark(function He(){return _regeneratorRuntime().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ve.next=2,this.getSignatures();case 2:case"end":return Ve.stop()}},He,this)})),function(){return m.apply(this,arguments)})},{key:"handleReplyAnnotation",value:(y=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at,rt,ct,ht,yt,bt,$t,At,Ft,Ht,Ot,Mt,pt,xt,Tt,Ct,Nt,jt,nn;return _regeneratorRuntime().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:if(ze=Ve.type,Ne=Ve.annotation,We=Ve.reply,Fe=Ve.reviewAnnotState,Ye=Ve.markedAnnotState,Ke=Ne.pagePtr,Ze=Ne.annotPtr,ot=this.annotations[Ne.pageIndex].find(function(cn){return(cn==null?void 0:cn.name)===Ne.name})){Wt.next=5;break}return Wt.abrupt("return");case 5:if(Qe=[],ze!=="add"){Wt.next=46;break}if(!We){Wt.next=30;break}if(We.name=v4(),this.webviewerServer){Wt.next=23;break}return Wt.next=12,this.messageHandler.sendWithPromise("CreateReplyAnnotation",{pagePtr:Ke,annotPtr:Ze,reply:We});case 12:return Wt.next=14,this.messageHandler.sendWithPromise("GetReplyAnnotation",{pagePtr:Ke,annotPtr:Ze});case 14:at=Wt.sent,rt=at.replies,ct=at.markedAnnotState,ht=at.reviewAnnotState,rt.length&&(rt.forEach(function(cn){return cn.name=v4()}),ot.replies=rt),ht&&(ot.reviewAnnotState=ht),ct&&(ot.markedAnnotState=ct),Wt.next=30;break;case 23:yt=this.annotations[Ne.pageIndex],bt=findIndex(ot.name,yt),ot.index=bt,Qe.push({operate:"add-annot",type:"reply",pageIndex:ot.pageIndex,title:We.author,content:We.contents,date:We.date,index:ot.index}),ot.replies||(ot.replies=[]),ot.replies.push(We),yt.push(We);case 30:if(!Fe&&!Ye){Wt.next=44;break}if(this.webviewerServer){Wt.next=38;break}return Wt.next=34,this.messageHandler.sendWithPromise("CreateReplyStateAnnotation",{pagePtr:Ke,annotPtr:Ze,state:Fe||Ye});case 34:$t=Wt.sent,Ye?ot.markedAnnotState=$t:ot.reviewAnnotState=$t,Wt.next=44;break;case 38:At=this.annotations[Ne.pageIndex],Ft=findIndex(ot.name,At),Ht={operate:"mod-annot",index:Ft,pageIndex:ot.pageIndex,targetPage:ot.pageIndex+1},Ye&&(ot.markedAnnotState=Ye,Ht.markedAnnotState=Ye),Fe&&(ot.reviewAnnotState=Fe,Ht.reviewAnnotState=Fe),Qe.push(Ht);case 44:Wt.next=86;break;case 46:if(ze!=="delete"){Wt.next=63;break}if(this.webviewerServer){Wt.next=54;break}return Wt.next=50,this.messageHandler.sendWithPromise("RemoveAnnot",{annotPtr:We.annotPtr});case 50:ot.replies=ot.replies.filter(function(cn){return cn.name!==We.name}),ot.replies.forEach(function(cn){cn.index>We.index&&cn.index--}),Wt.next=61;break;case 54:Qe.push({operate:"del-annot",index:ot.index,repliesIndex:We.index,pageIndex:We.pageIndex,targetPage:We.pageIndex+1}),Ot=findIndex(We.name,ot.replies),ot.replies.splice(Ot,1),ot.replies.map(function(cn,Ln){return cn.index=Ln}),Mt=this.annotations[Ne.pageIndex],(pt=findIndex(We.name,Mt))>-1&&Mt.splice(pt,1);case 61:Wt.next=86;break;case 63:if(ze!=="edit"){Wt.next=86;break}if(!Ye&&!Fe){Wt.next=81;break}if(this.webviewerServer){Wt.next=73;break}return Wt.next=68,this.messageHandler.sendWithPromise("SetState",{reviewAnnotState:Fe,markedAnnotState:Ye});case 68:xt=Wt.sent,Ye&&(ot.markedAnnotState=xt),Fe&&(ot.reviewAnnotState=xt),Wt.next=79;break;case 73:Tt=this.annotations[Ne.pageIndex],Ct=findIndex(ot.name,Tt),Nt={operate:"mod-annot",index:Ct,pageIndex:ot.pageIndex,targetPage:ot.pageIndex+1},Ye&&(ot.markedAnnotState=Ye,Nt.markedAnnotState=Ye),Fe&&(ot.reviewAnnotState=Fe,Nt.reviewAnnotState=Fe),Qe.push(Nt);case 79:Wt.next=86;break;case 81:this.webviewerServer||this.messageHandler.sendWithPromise("EditReplyAnnotation",{reply:We}),jt=ot.replies.findIndex(function(cn){return cn.name===We.name}),nn=ot.replies[jt],ot.replies[jt]=_objectSpread2$1(_objectSpread2$1({},nn),We),this.webviewerServer&&(Qe.push({operate:"mod-annot",index:ot.index,repliesIndex:We.index,pageIndex:We.pageIndex,targetPage:We.pageIndex+1,content:We.contents,date:new Date,author:this.annotator}),this.annotations[Ne.pageIndex].find(function(cn){return(cn==null?void 0:cn.name)===nn.name}).contents=We.contents);case 86:this.eventBus.dispatch("annotationUpdated",{annotations:this.annotations}),this.webviewerServer&&(_assertClassBrand(_ComPDFKitViewer_brand,this,_convertAnnotationsForBackend).call(this,Qe),_assertClassBrand(_ComPDFKitViewer_brand,this,_postAnnotations).call(this,Qe)),this.isAnnotationModified=!0;case 89:case"end":return Wt.stop()}},He,this)})),function(He){return y.apply(this,arguments)})},{key:"addReplyAnnotation",value:function(He,Ve){this.handleReplyAnnotation({type:"add",annotation:[He],reply:[Ve]})}},{key:"delReplyAnnotation",value:function(He){this.handleReplyAnnotation({type:"delete",reply:[He]})}},{key:"editReplyAnnotation",value:function(He,Ve){this.handleReplyAnnotation({type:"edit",annotation:[He],reply:[Ve]})}},{key:"setAnnotationState",value:function(He){var Ve=He.annotation,ze=He.reviewAnnotState,Ne=He.markedAnnotState;Ne?this.handleReplyAnnotation({type:"edit",annotation:Ve,markedAnnotState:Ne}):ze&&this.handleReplyAnnotation({type:"edit",annotation:Ve,reviewAnnotState:ze})}},{key:"setHighlightLink",value:function(He){annotationStore.highlightLink=He,this.eventBus.dispatch("setHighlightLink",He)}},{key:"jumpToTheFirstUnfilledTextfield",value:function(){for(var He=Object.values(this.annotations).reduce(function(Ne,We){return Ne.concat(We)},[]),Ve=0;Ve<He.length;Ve++){var ze=He[Ve];if(ze.type==="textfield"&&!ze.contents){this.jumpToAnnotation(ze);break}}}},{key:"jumpToTheFirstUnSigned",value:function(){var He=Object.values(this.annotations).reduce(function(Ve,ze){return Ve.concat(ze)},[]).filter(function(Ve){return Ve.type==="signatureFields"&&!Ve.isSigned&&!Ve.isSignedDigitally});He.length&&this.jumpToAnnotation(He[0])}},{key:"getUnfilledTextfieldNumber",value:function(){for(var He=this.annotations?Object.values(this.annotations).reduce(function(Fe,Ye){return Fe.concat(Ye)},[]):[],Ve=0,ze=0,Ne=0;Ne<He.length;Ne++){var We=He[Ne];We.type!=="textfield"||We.contents||(Ve++,We.required&&ze++)}return{unFilledAllNumber:Ve,unFilledNumber:ze}}},{key:"getUnSignedNumber",value:function(){return{unSignedNumber:Object.values(this.annotations).reduce(function(He,Ve){return He.concat(Ve)},[]).filter(function(He){return He.type==="signatureFields"}).filter(function(He){return He.type==="signatureFields"&&!He.isSigned&&!He.isSignedDigitally}).length}}},{key:"setHighlightForm",value:function(He){annotationStore.highlightForm=He,this.eventBus.dispatch("setHighlightForm",He)}},{key:"setAnnotator",value:function(He){this.annotator=He}},{key:"handlePopup",value:function(He){var Ve=He.type,ze=He.tool,Ne={text:"textPopupClicked",cropPage:"cropPagePopupClicked",contentEditor:"contentEditorPopupClicked",measurement:"measurementPopupClicked"}[Ve];Ne&&this.eventBus.dispatch(Ne,ze)}},{key:"getCropedPageImage",value:(v=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve,ze){var Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at,rt,ct,ht,yt,bt,$t;return _regeneratorRuntime().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:if(!(!Ve||Ve<1||Ve>this.pagesCount)){At.next=2;break}return At.abrupt("return",null);case 2:if(ze){At.next=7;break}if((Ne=this.pdfViewer._pages[Ve-1])&&Ne.cropPage&&Ne.cropPage.rect){At.next=6;break}return At.abrupt("return",null);case 6:ze=Ne.cropPage.rect;case 7:if(Fe=(We=ze).left,Ye=We.right,Ke=We.bottom,Ze=We.top,ot=window.devicePixelRatio||1,Qe=this.scale*ot,at=parseInt(Fe*Qe),rt=parseInt(Ye*Qe),ct=parseInt(Ke*Qe),ht=parseInt(Ze*Qe),yt=null,!this.renderLayerPermission||!this.layers.length){At.next=21;break}return At.next=18,this.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:this.pagesPtr[Ve-1].pagePtr,left:at,right:rt,bottom:ct,top:ht,scale:Qe,ocgsPtr:_toConsumableArray$1(this.ocgsPtr),flag:1,form:1});case 18:yt=At.sent,At.next=24;break;case 21:return At.next=23,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagesPtr[Ve-1].pagePtr,scale:Qe,left:at,right:rt,bottom:ct,top:ht,flag:1,form:1});case 23:yt=At.sent;case 24:if(!yt||!yt.code){At.next=28;break}return console.log(yt.message),alert(yt.message),At.abrupt("return",!1);case 28:return bt=yt.imageArray,$t=this.imageArrayToUrl(bt,rt-at,ct-ht),At.abrupt("return",$t);case 31:case"end":return At.stop()}},He,this)})),function(He,Ve){return v.apply(this,arguments)})},{key:"imageArrayToUrl",value:function(He,Ve,ze){var Ne=document.createElement("canvas"),We=Ne.getContext("2d");Ne.width=Ve,Ne.height=ze;var Fe=We.createImageData(Ve,ze),Ye=new Uint8ClampedArray(He.buffer);Fe.data.set(Ye),We.putImageData(Fe,0,0);var Ke=Ne.toDataURL("image/png",1);return Ne.remove(),Ne=null,Ke}},{key:"resetOperate",value:(g=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:ze=Ve.operation,Ne=Ve.pageNumber,this.pdfViewer._pages[Ne-1].contentContainer.handleResetOperate(ze);case 2:case"end":return We.stop()}},He,this)})),function(He){return g.apply(this,arguments)})},{key:"getContentEditManager",value:function(){return this.contentEditManager}},{key:"getContentEditHistoryManager",value:function(){return this.pdfViewer.contentEditHistoryManager}},{key:"setContentEditModyfied",value:function(He){this.isContentEditModyfied=He}},{key:"applyRedactions",value:(w=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at,rt,ct=this;return _regeneratorRuntime().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(Ve){ht.next=6;break}return ht.next=3,this.delAnnotations(this.redactionList);case 3:return this.redactionList.length=0,this.pdfViewer.refresh(),ht.abrupt("return");case 6:if(Ve!=="all"){ht.next=13;break}return ze=_toConsumableArray$1(this.redactionList),ht.next=10,this.delAnnotations(this.redactionList);case 10:this.redactionList.length=0,ht.next=15;break;case 13:Ne=Array.isArray(Ve)?Ve:[Ve],ze=Ne;case 15:We=_createForOfIteratorHelper(ze.filter(function(yt){return!yt.erasure})),ht.prev=16,We.s();case 18:if((Fe=We.n()).done){ht.next=24;break}return Ye=Fe.value,ht.next=22,this.messageHandler.sendWithPromise("ApplyRedaction",{annotPtr:Ye.annotPtr});case 22:ht.next=18;break;case 24:ht.next=29;break;case 26:ht.prev=26,ht.t0=ht.catch(16),We.e(ht.t0);case 29:return ht.prev=29,We.f(),ht.finish(29);case 32:Ke=_createForOfIteratorHelper(ze.filter(function(yt){return yt.erasure})),ht.prev=33,Ke.s();case 35:if((Ze=Ke.n()).done){ht.next=61;break}if(!(ot=Ze.value).rects||!ot.rects.length){ht.next=57;break}Qe=_createForOfIteratorHelper(ot.rects),ht.prev=39,Qe.s();case 41:if((at=Qe.n()).done){ht.next=47;break}return rt=at.value,ht.next=45,this.messageHandler.sendWithPromise("ErasureRedactionFromRect",{pagePtr:ot.pagePtr,rect:rt});case 45:ht.next=41;break;case 47:ht.next=52;break;case 49:ht.prev=49,ht.t1=ht.catch(39),Qe.e(ht.t1);case 52:return ht.prev=52,Qe.f(),ht.finish(52);case 55:ht.next=59;break;case 57:return ht.next=59,this.messageHandler.sendWithPromise("ErasureRedactionFromRect",{pagePtr:ot.pagePtr,rect:ot.rect});case 59:ht.next=35;break;case 61:ht.next=66;break;case 63:ht.prev=63,ht.t2=ht.catch(33),Ke.e(ht.t2);case 66:return ht.prev=66,Ke.f(),ht.finish(66);case 69:return ht.next=71,this.updateTextPtr();case 71:return this.emptyAnnotations(),this.reRenderAnnotations(),ht.abrupt("return",new Promise(function(yt){ct.eventBus._on("annotationUpdated",function bt(){ct.eventBus._off("annotationUpdated",bt),ct.pdfViewer.refresh(),yt()})}));case 74:case"end":return ht.stop()}},He,this,[[16,26,29,32],[33,63,66,69],[39,49,52,55]])})),function(He){return w.apply(this,arguments)})},{key:"setAutoJumpNextSign",value:function(He){this.autoJumpNextSign=He}},{key:"getLayers",value:(s=_asyncToGenerator(_regeneratorRuntime().mark(function He(){var Ve,ze,Ne;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.next=2,this.messageHandler.sendWithPromise("GetLayers",this.doc);case 2:return Ve=We.sent,ze=Ve.layers,Ne=Ve.ocgsPtr,this.layers=ze,this.ocgsPtr=new Set(Ne),this.eventBus.dispatch("getLayers",ze),We.abrupt("return",this.layers);case 9:case"end":return We.stop()}},He,this)})),function(){return s.apply(this,arguments)})},{key:"setLayers",value:(u=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at=this;return _regeneratorRuntime().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:ze=Array.isArray(Ve)?Ve:[Ve],Ne=this.ocgsPtr,We=_toConsumableArray$1(Ne),Fe=!1,Ye=!1,Ke=function ct(ht,yt){var bt,$t=_createForOfIteratorHelper(yt);try{for($t.s();!(bt=$t.n()).done;){var At=bt.value;if(At.node===ht)return At;var Ft=ct(ht,At.children);if(Ft)return Ft}}catch(Ht){$t.e(Ht)}finally{$t.f()}return null},Ze=_createForOfIteratorHelper(ze),rt.prev=7,Qe=_regeneratorRuntime().mark(function ct(){var ht,yt;return _regeneratorRuntime().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:if(ht=ot.value,yt=Ke(ht.node,at.layers),ht.hasOwnProperty("visible")&&(yt.visible=ht.visible?1:0,ht.visible?Ne.add(ht.ocg):Ne.delete(ht.ocg),Ne.has(0)&&Ne.delete(0),delete ht.visible,Ye=!0),!["name","defaultVisible","isLocked","printState","exportState"].some(function($t){return!!ht.hasOwnProperty($t)&&(yt[$t]=ht[$t],!0)})){bt.next=9;break}return bt.next=8,at.messageHandler.sendWithPromise("SetLayer",ht);case 8:Fe=!0;case 9:case"end":return bt.stop()}},ct)}),Ze.s();case 10:if((ot=Ze.n()).done){rt.next=14;break}return rt.delegateYield(Qe(),"t0",12);case 12:rt.next=10;break;case 14:rt.next=19;break;case 16:rt.prev=16,rt.t1=rt.catch(7),Ze.e(rt.t1);case 19:return rt.prev=19,Ze.f(),rt.finish(19);case 22:if(Ye&&!Fe||We.length!==Ne.size||!We.every(function(ct){return Ne.has(ct)})){rt.next=24;break}return rt.abrupt("return");case 24:this.pdfViewer.refreshCanvas();case 25:case"end":return rt.stop()}},He,this,[[7,16,19,22]])})),function(He){return u.apply(this,arguments)})},{key:"exportLayers",value:(o=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke=arguments;return _regeneratorRuntime().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(ze=Ke.length>1&&Ke[1]!==void 0&&Ke[1],Ne=Array.isArray(Ve)?Ve:[Ve],Ve||(Ne=this.layers.filter(function(ot){return ot.visible===1&&ot.exportState!==1||ot.exportState===0}).map(function(ot){return ot.ocg})),Ne.length){Ze.next=5;break}return Ze.abrupt("return",!1);case 5:return Ze.next=7,this.messageHandler.sendWithPromise("ExportLayers",{doc:this.doc,ocgsPtr:Ne});case 7:if(!(We=Ze.sent)||!We.code){Ze.next=12;break}return console.log(We.message),alert(We.message),Ze.abrupt("return",!1);case 12:if(We){Ze.next=15;break}return console.warn("export",0),Ze.abrupt("return",!1);case 15:if(!ze){Ze.next=22;break}return Fe=this._docName,Ne.length===1&&(Ye=function ot(Qe,at){var rt,ct=_createForOfIteratorHelper(at);try{for(ct.s();!(rt=ct.n()).done;){var ht=rt.value;if(ht.ocg===Qe)return ht;var yt=ot(Qe,ht.children);if(yt)return yt}}catch(bt){ct.e(bt)}finally{ct.f()}return null}(Ne[0],this.layers))&&(Fe=Ye.name),FileSaver_minExports.saveAs(We,Fe),Ze.abrupt("return",!0);case 22:return Ze.abrupt("return",We);case 23:case"end":return Ze.stop()}},He,this)})),function(He){return o.apply(this,arguments)})},{key:"initColorFile",value:(r=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne;return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(!Ve){We.next=4;break}ze=convertFileToBuffer(Ve),We.next=10;break;case 4:return We.next=6,fetch("./lib/CMYK/CoatedFOGRA39.icc");case 6:return Ne=We.sent,We.next=9,Ne.arrayBuffer();case 9:ze=We.sent;case 10:if(ze){We.next=13;break}return console.error("Invalid File"),We.abrupt("return");case 13:this.colorFile=ze;case 14:case"end":return We.stop()}},He,this)})),function(He){return r.apply(this,arguments)})},{key:"updateViewWithColorIndex",value:function(He){var Ve=this;return annotationStore.ignoreColors=He,this.eventBus.dispatch("updateSeparationView",He),new Promise(function(ze){Ve.eventBus._on("finishUpdateSeparationView",function Ne(){Ve.eventBus._off("finishUpdateSeparationView",Ne),ze()})})}},{key:"enableColorSeparations",value:function(He){var Ve=this;if(this.toolMode==="separation"){var ze=Array.isArray(He)?He:[He],Ne=[];ze.forEach(function(Fe){var Ye=Ve.colorList.find(function(Ke){return Ke.name===Fe});Ye&&Ne.push(Ye.index)});var We=annotationStore.ignoreColors.filter(function(Fe){return!Ne.includes(Fe)});this.updateViewWithColorIndex(We),this.eventBus.dispatch("ignoreColorsUpdate",We)}else console.warn("Color separation not enabled.")}},{key:"disableColorSeparations",value:function(He){var Ve=this;if(this.toolMode==="separation"){var ze=Array.isArray(He)?He:[He],Ne=[];ze.forEach(function(We){var Fe=Ve.colorList.find(function(Ye){return Ye.name===We});Fe&&Ne.push(Fe.index)}),Ne.length?(this.updateViewWithColorIndex(Ne),this.eventBus.dispatch("ignoreColorsUpdate",Ne)):console.warn("Invalid color.")}else console.warn("Color separation not enabled.")}},{key:"getColorSeparationsAtPoint",value:(n=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve,ze,Ne){return _regeneratorRuntime().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(this.toolMode==="separation"){We.next=2;break}return We.abrupt("return");case 2:return We.next=4,this.pdfViewer._pages[Ve-1].separation.getSelectPointColor({x:ze,y:Ne});case 4:return We.abrupt("return",We.sent);case 5:case"end":return We.stop()}},He,this)})),function(He,Ve,ze){return n.apply(this,arguments)})},{key:"printPages",value:(e=_asyncToGenerator(_regeneratorRuntime().mark(function He(Ve){var ze,Ne,We,Fe,Ye,Ke,Ze,ot,Qe,at,rt,ct,ht,yt,bt,$t,At,Ft;return _regeneratorRuntime().wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:ze=[],Ne=isNaN(Number(Ve))?window.devicePixelRatio||1:Number(Ve),We=2500,Fe=new Set,this.layers.forEach(function(Ot){Ot.printState===0?Fe.add(Ot.ocg):Ot.printState===1?Fe.delete(Ot.ocg):Ot.visible?Fe.add(Ot.ocg):Fe.delete(Ot.ocg)}),Ye=0;case 6:if(!(Ye<this.pdfViewer._pages.length)){Ht.next=46;break}if(Ke=document.createElement("canvas"),Ze=Ke.getContext("2d"),ot=this.pagesPtr[Ye],Qe=ot.width,at=ot.height,rt=1,(ct=Math.sqrt(Qe*at))>We&&(rt=We/ct),ht=Ne*rt,yt=Math.round(Qe*ht),bt=Math.round(at*ht),Ke.width=yt,Ke.height=bt,$t=null,this.toolMode!=="separation"||!annotationStore.ignoreColors.length){Ht.next=25;break}return Ht.next=22,this.messageHandler.sendWithPromise("RenderPageAndIgnoreColorByIndex",{sepColorPtr:this.pagesPtr[Ye].sepColorPtr,x:0,y:0,width:yt,height:bt,indexs:annotationStore.ignoreColors,flag:1});case 22:$t=Ht.sent,Ht.next=34;break;case 25:if(!this.renderLayerPermission||!this.layers.length){Ht.next=31;break}return Ht.next=28,this.messageHandler.sendWithPromise("RenderLayerBitmapWithMatrix",{pagePtr:this.pagesPtr[Ye].pagePtr,left:0,top:0,right:yt,bottom:bt,scale:ht,ocgsPtr:_toConsumableArray$1(Fe),flag:1,form:1});case 28:$t=Ht.sent,Ht.next=34;break;case 31:return Ht.next=33,this.messageHandler.sendWithPromise("PushRenderTask",{pagePtr:this.pagesPtr[Ye].pagePtr,left:0,top:0,right:yt,bottom:bt,scale:ht,flag:1,form:1});case 33:$t=Ht.sent;case 34:if(!$t||!$t.code){Ht.next=37;break}return console.log($t.message),Ht.abrupt("continue",43);case 37:At=$t.imageArray,Ze.clearRect(0,0,yt,bt),(Ft=Ze.createImageData(yt,bt)).data.set(At),Ze.putImageData(Ft,0,0),ze[Ye]=Ke.toDataURL("image/png");case 43:Ye++,Ht.next=6;break;case 46:return Ht.abrupt("return",ze);case 47:case"end":return Ht.stop()}},He,this)})),function(He){return e.apply(this,arguments)})},{key:"printDocument",value:function(He){var Ve=this,ze=this.buildPrintContent(He),Ne=window.parent.document.title,We=function(){window.parent.document.title=Ve._docName},Fe=function(){window.parent.document.title=Ne},Ye=document.createElement("iframe");Ye.style.display="none",document.body.appendChild(Ye),Ye.contentDocument.open(),Ye.contentDocument.write(ze),Ye.contentDocument.close(),Ye.onload=function(){Ye.contentWindow.focus(),Ye.contentWindow.addEventListener("beforeprint",We,{once:!0}),Ye.contentWindow.addEventListener("afterprint",Fe,{once:!0}),Ye.contentWindow.print(),setTimeout(function(){document.body.removeChild(Ye)},500)}}},{key:"buildPrintContent",value:function(He){var Ve=`
      <html>
        <head>
          <style>
            @media print {
              @page {
                margin: 0;
                padding: 0;
              }

              body {
                height: 100%;
                display: block! important;
                overflow: visible !important;
                margin: 0 !important;
                padding: 0 !important;
              }

              .page__container img {
                display: block !important;
                max-width: 100%;
                max-height: 100%;
                height: 100%;
                width: 100%;
                object-fit: contain;
                page-break-after: always;
                padding: 0;
                margin: 0;
              }
            }
          </style>
        </head>
        <body>
          <div class="page__container">
    `;return He.forEach(function(ze,Ne){Ve+='<img src="'.concat(ze,'" alt="Page ').concat(Ne+1,'">')}),Ve+="</div></body></html>"}},{key:"setMeasurementDefaults",value:function(He){if(annotationStore.annotationsAll){var Ve=Object.values(annotationStore.annotationsAll).flat().find(function(ze){return ze.name===annotationStore.selectedElementName});Ve&&Ve.measure&&this.eventBus.dispatch("measurePropertyPanelChanged",He)}this.pdfViewer.measurementTool.setDefaults(JSON.parse(JSON.stringify(He)))}},{key:"setFreetextDefault",value:function(He){Object.keys(He).forEach(function(Ve){annotationStore.freetextDefault[Ve]=He[Ve]})}},{key:"showPopup",value:function(He){var Ve,ze,Ne,We,Fe,Ye,Ke,Ze;switch(He.type){case"measurementPopup":var ot=He.annotation,Qe=He.pageIndex;if(Ze=(Ve=this.pdfViewer)===null||Ve===void 0||(Ve=Ve._pages)===null||Ve===void 0?void 0:Ve[Qe],ot!=null&&ot.measure&&(ze=Ze)!==null&&ze!==void 0&&ze.compdfAnnotationLayer){var at=Ze.compdfAnnotationLayer.annotationsArray.find(function(ct){return ct.annotation.name===ot.name});at&&at.showPopup()}break;case"textPupop":(We=Ze=(Ne=this.pdfViewer)===null||Ne===void 0||(Ne=Ne._pages)===null||Ne===void 0?void 0:Ne[He.pageIndex])!==null&&We!==void 0&&We.textSelection&&Ze.textSelection.showTextPopup();break;case"cropPagePupop":(Ye=Ze=(Fe=this.pdfViewer)===null||Fe===void 0||(Fe=Fe._pages)===null||Fe===void 0?void 0:Fe[He.pageIndex])!==null&&Ye!==void 0&&Ye.cropPage&&Ze.cropPage.showPopup();break;case"contentEditorPupop":var rt=(Ke=this.contentEditManager)===null||Ke===void 0?void 0:Ke.getSelectedEditBox();rt&&rt.showPopup(!1)}}}]);var e,n,r,o,u,s,w,g,v,y,m,d,f,x,k,P,S,E,M,T,D,I,N,O,F,U,Y,Q,q,ne,J,re,X,j,Z,W,te,le,oe,Ee,Ae,ve,ke,Ce,Pe,Me,Le,Te,ye,_e,we,Se,$e,Be,Oe,Ge,Ie,je,qe,Ue,Je,et,nt,st,gt,_t,wt}();function _formatRect(e){var n,r=e.page;if((n=this.pagesPtr[r])!==null&&n!==void 0&&n.height){var o=this.pagesPtr[r].height,u=e.rect.split(",");return{left:round(u[0],2),bottom:round(o-Number(u[1]),2),right:round(u[2],2),top:round(o-Number(u[3]),2)}}}function _formatCoords(e){var n,r=[],o=e.page;if((n=this.pagesPtr[o])!==null&&n!==void 0&&n.height){for(var u=this.pagesPtr[o].height,s=e.coords.split(","),w=0;w+7<s.length;w+=8){var g=round(s[w],2),v=round(u-Number(s[w+1]),2),y=round(s[w+2],2);round(u-Number(s[w+3]),2),round(s[w+4],2);var m=round(u-Number(s[w+5]),2);round(s[w+6],2),round(u-Number(s[w+7]),2);var d=Math.min(g,y),f=Math.max(g,y),x=Math.min(v,m),k=Math.max(v,m);r.push({PointX:d,PointY:x}),r.push({PointX:f,PointY:x}),r.push({PointX:d,PointY:k}),r.push({PointX:f,PointY:k})}return r}}function _formatLinePoints(e){var n,r=e.page;if((n=this.pagesPtr[r])!==null&&n!==void 0&&n.height){var o=this.pagesPtr[r].height,u=[],s=e.start.split(","),w=e.end.split(",");return u.push(round(s[0],2)),u.push(round(o-Number(s[1]),2)),u.push(round(w[0],2)),u.push(round(o-Number(w[1]),2)),u}}function _formatInkPointes(e){var n,r=e.page;if((n=this.pagesPtr[r])!==null&&n!==void 0&&n.height){var o=this.pagesPtr[r].height,u=[],s=e.inklist.gesture;Array.isArray(s)||(s=[s]);for(var w=0;w<s.length;w++){s[w][s[w].length-1]===";"&&(s[w]=s[w].slice(0,s[w].length-1));var g=s[w].split(";").map(function(v){var y=v.split(",");return{PointX:round(y[0],2),PointY:round(o-Number(y[1]),2)}});u.push(g)}return u}}function _formatAnnotation(e){var n,r={};switch(r.type=e.type,e.rect&&(r.rect=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatRect).call(this,e)),r.date=parseAdobePDFTimestamp(e.creationdate),r.pageIndex=Number(e.page),r.index=Number(e.index),r.contents=e.content||"",r.opacity=round(e.opacity,2)||1,e.mainName&&(r.mainName=e.mainName),e.replies&&(r.replies=e.replies),(e.markedAnnotState||e.markedAnnotState===0)&&(r.markedAnnotState=AnnotationStateString[e.markedAnnotState]),(e.reviewAnnotState||e.reviewAnnotState===0)&&(r.reviewAnnotState=AnnotationStateString[e.reviewAnnotState]),r.name=e.name||v4(),e.type){case"freetext":var o=e.textStyle.fontName;if(o=o[0].toUpperCase()+o.slice(1),r.fontName=o,r.fontSize=round(e.textStyle.fontSize,0),r.color=e.textStyle.fontColor,r.textAlignment=e.justification,r.contents=e["contents-richtext"]||e.content,e["contents-richtext"]){var u=new DOMParser().parseFromString(e["contents-richtext"],"text/xml");u.getElementsByTagName("parsererror").length>0?r.contents=e["contents-richtext"]:r.contents=u.firstElementChild.innerText}break;case"text":r.color=e.color,r.isHidden=e.isHidden||e.flags&&e.flags==="invisible"?1:0;break;case"highlight":case"underline":case"strikeout":case"squiggly":r.color=e.color,r.quadPoints=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatCoords).call(this,e);break;case"line":r.linePoints=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatLinePoints).call(this,e),r.tail=e.tail,r.head=e.head,r.borderColor=e.color,r.borderWidth=round(e.width,2);break;case"square":case"circle":r.borderColor=e.color,r.borderWidth=round(e.width,2),e["interior-opacity"]&&(r.fillTransparency=round(e["interior-opacity"],2)),e["interior-color"]&&(r.fillColor=e["interior-color"]);break;case"ink":r.borderColor=e.color,r.borderWidth=round(e.width,2),r.inkPointes=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatInkPointes).call(this,e);break;case"link":e.Dest&&e.Dest.XYZ?(r.destPage=Number(e.Dest.XYZ.Page)+1,r.url=""):e.OnActivation&&e.OnActivation.Action.URI&&(r.url=e.OnActivation.Action.URI.URI,r.destPage="");break;case"stamp":r.contents=e.icon,e.image&&(r.image=e.image),r.stampType=e["stamp-type"];break;case"textfield":e["background-color"]&&(r.backgroundColor=e["background-color"]),r.borderStyle=e.borderStyle||"solid",r.borderWidth=e.width&&round(e.width,2)||1,e["border-color"]&&(r.borderColor=e["border-color"]);var s=e.textStyle.fontName;r.isBold=/bold/i.test(s),r.isItalic=/(oblique|italic)/i.test(s),r.fontName=s.split("-")[0],r.fontSize=round(e.textStyle.fontSize,0),r.color=e.textStyle.fontColor,r.textAlignment=e.textStyle.alignment,r.contents=e.value,r.fieldName=e.fieldname,r.isMultiLine=e.textStyle.multiLine==="true"?1:0,r.isHidden=e.flags&&e.flags!=="invisible"?0:1;break;case"checkbox":case"radiobutton":e["background-color"]&&(r.backgroundColor=e["background-color"]),r.borderStyle=e.borderStyle||"solid",r.borderWidth=e.width&&round(e.width,2)||1,e["border-color"]&&(r.borderColor=e["border-color"]),r.fieldName=e.fieldname,r.isHidden=e.flags&&e.flags!=="invisible"?0:1,r.isChecked=e.value==="Yes"?1:0,r.checkStyle=Number(e.styleCA);break;case"combobox":case"listbox":if(e["background-color"]&&(r.backgroundColor=e["background-color"]),r.borderStyle=e.borderStyle||"solid",r.borderWidth=e.width&&round(e.width,2)||1,e["border-color"]&&(r.borderColor=e["border-color"]),r.fieldName=e.fieldname,e.textStyle&&e.textStyle.fontName){var w=e.textStyle.fontName;w=w[0].toUpperCase()+w.slice(1),r.fontName=w,r.fontSize=round(e.textStyle.fontSize,0)}r.color=e.textStyle.fontColor,r.isBold=e.textStyle.blod==="true",r.isItalic=e.textStyle.italic==="true",r.isMultiLine=e.textStyle.multiLine==="true"?1:0,r.isHidden=e.flags||e.flags!=="invisible"?0:1,r.items=_assertClassBrand(_ComPDFKitViewer_brand,this,_getItems).call(this,e),r.selected=round(e.select,0)-1;break;case"pushbutton":var g=e.OnActivation&&e.OnActivation.Action;if(g&&g.URI?(r.url=g.URI.URI,r.destPage="",r.actionType=6):g&&g.Dest&&g.Dest.XYZ&&(r.destPage=Number(g.Dest.XYZ.Page)+1,r.url="",r.actionType=1),e["background-color"]&&(r.backgroundColor=e["background-color"]),r.borderStyle=e.borderStyle||"solid",r.borderWidth=e.width&&round(e.width,2)||1,e["border-color"]&&(r.borderColor=e["border-color"]),r.fieldName=e.fieldname,e.textStyle.fontName){var v=e.textStyle.fontName;v=v[0].toUpperCase()+v.slice(1),r.fontName=v}else r.fontName="Helvetica";r.fontSize=round(e.textStyle.fontSize,0),r.color=e.textStyle.fontColor,r.isBold=e.textStyle.blod==="true",r.isItalic=e.textStyle.italic==="true",r.title=e.styleCA,r.isHidden=e.flags||e.flags!=="invisible"?0:1}if((n=r.replies)!==null&&n!==void 0&&n.length){var y,m=_createForOfIteratorHelper(r.replies);try{for(m.s();!(y=m.n()).done;){var d=y.value;d.name=d.name||v4(),d.mainName=d.mainName||r.name,d.contents=d.content,delete d.content,d.date=parseAdobePDFTimestamp(e.recentlyModifyDate||e.date||e.creationdate),d.pageIndex=Number(e.page),delete d.page}}catch(f){m.e(f)}finally{m.f()}}return r}function _getItems(e){for(var n=[],r=e.opt,o=0;o<r.length;o++)n.push({Value:r[o].value,String:r[o].key});return n}function _convertAnnotationsForBackend(e){for(var n=0;n<e.length;n++){var r=e[n],o=this.pagesPtr[r.pageIndex].height;switch(r.type){case"text":r.borderColor=r.color,r.fillTransparency=1,delete r.color;break;case"freetext":r.fillColor=r.bgColor,r.textColor=r.color,delete r.color,delete r.bgColor;break;case"highlight":case"underline":case"strikeout":case"squiggly":r.borderColor=r.color,delete r.color;break;case"square":case"circle":if(r.arrow=!1,!r.linePoints){var u=r.rect,s=u.left,w=u.top,g=u.right,v=u.bottom;r.linePoints=[s,v,g,w]}r.opacity||r.opacity===0||(r.transparency=1);break;case"line":r.tail==="OpenArrow"||r.arrow?r.arrow=!0:r.arrow=!1;break;case"stamp":r.stampType==="standard"?r.standardStampType=r.contents:r.stampType==="text"?(r.textStampFirststring=r.contents,r.textStampSecondstring=r.time,r.textStampColor=r.stampColor,r.textStampShape=r.stampShape,delete r.time,delete r.stampColor,delete r.stampShape):r.stampType==="image"&&(r.type="image",delete r.annotPtr,delete r.imageData,delete r.pagePtr),delete r.contents;break;case"textfield":r.type="text-field",r.color&&(r.textColor=r.color),r.textAlignment&&(r.alignment=ALIGNMAP[r.textAlignment]||0),r.format="0",delete r.color,delete r.textAlignment;break;case"checkbox":r.type="check-box";break;case"radiobutton":r.type="radio-button";break;case"listbox":r.type="list-box",r.color&&(r.textColor=r.color),"selected"in r&&(r.selecte=r.selected),delete r.selected,delete r.color;break;case"combobox":r.type="combo-box",r.color&&(r.textColor=r.color),delete r.color;break;case"pushbutton":r.type="push-button",r.color&&(r.textColor=r.color),"destPage"in r&&(r.destPage=r.destPage-1),delete r.color;break;case"reply":r.page=r.pageIndex,r.targetPage=r.pageIndex+1,delete r.pageIndex}for(var y in r.operate==="mod-form"&&(r.color&&(r.textColor=r.color),"destPage"in r&&(r.destPage=r.destPage-1),delete r.color),r)switch(y){case"index":r.index+=1;break;case"rect":r.rect=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatRectForBackend).call(this,r.rect,r.pageIndex);break;case"linePoints":r.linePoints=_assertClassBrand(_ComPDFKitViewer_brand,this,_formatLinePointsForBackend).call(this,r.linePoints,r.pageIndex);break;case"borderWidth":r.lineWidth=r.borderWidth,delete r.borderWidth;break;case"isChecked":r.select=r.isChecked,delete r.isChecked;break;case"checkStyle":r.style=r.checkStyle,delete r.checkStyle;break;case"selected":r.selecte=r.selected,delete r.selected;break;case"items":for(var m=r.items,d="",f=0;f<m.length;f++)f===0?d=m[f].Value:d+=",".concat(m[f].Value);r.options=d,delete r.items;break;case"textAlignment":r.textAlignment&&(r.alignment=ALIGNMAP[r.textAlignment]||0),delete r.textAlignment;break;case"contents":r.content=r.contents,delete r.contents;break;case"opacity":r.transparency=r.opacity,delete r.opacity;break;case"quadPoints":for(var x=r.quadPoints,k="",P=0;P<x.length;P++)k+=P===0?x[P].PointX:",".concat(x[P].PointX),k+=",".concat(o-x[P].PointY);r.quadPoints=k;break;case"inkPointes":for(var S=r.inkPointes,E="",M=0;M<S.length;M++){for(var T=S[M],D=0;D+1<T.length;D+=2)E+=D===0?T[D].PointX:",".concat(T[D].PointX),E+=",".concat(o-T[D+1].PointY);E+="//"}delete r.inkPointes,r.inklist=E;break;case"title":r.operate.indexOf("form")>-1&&(r.title&&(r.value=r.title),delete r.title);break;case"replies":var I,N=_createForOfIteratorHelper(r.replies);try{for(N.s();!(I=N.n()).done;){var O=I.value;O.page=O.pageIndex,O.targetPage=O.pageIndex+1,delete O.pageIndex}}catch(F){N.e(F)}finally{N.f()}break;case"markedAnnotState":r.markedAnnotState=AnnotationState[r.markedAnnotState];break;case"reviewAnnotState":r.reviewAnnotState=AnnotationState[r.reviewAnnotState];break;case"repliesIndex":r.repliesIndex+=1}}}function _formatRectForBackend(e,n){var r;if((r=this.pagesPtr[n])!==null&&r!==void 0&&r.height){var o=this.pagesPtr[n].height,u=e.left,s=e.top,w=e.right,g=o-s,v=o-e.bottom;return"".concat(u,",").concat(v,",").concat(w,",").concat(g)}}function _formatLinePointsForBackend(e,n){var r;if((r=this.pagesPtr[n])!==null&&r!==void 0&&r.height){var o=this.pagesPtr[n].height,u=o-e[1],s=o-e[3];return"".concat(e[0],",").concat(u,",").concat(e[2],",").concat(s)}}function _postAnnotations(e){return _postAnnotations2.apply(this,arguments)}function _postAnnotations2(){return(_postAnnotations2=_asyncToGenerator(_regeneratorRuntime().mark(function e(n){var r;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json",Authorization:this._token},body:JSON.stringify({pdfId:this._pdfId,annotateHandles:n})},o.next=3,fetch(this.optionUrl.webviewBaseUrl+this.optionUrl.editUrl,r).then(function(u){return u.json()}).then(function(u){return u.code==="200"}).catch(function(u){return console.log(u)});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},e,this)}))).apply(this,arguments)}var PDFWorker=function(){return _createClass(function e(){_classCallCheck(this,e),_defineProperty$1(this,"destroyed",!1),this._promiseCapability=new PromiseExt,this._messageHandler=null,this._webWorker=null,this._initialize()},[{key:"_initialize",value:function(){var e=this;try{var n=new Worker("./lib/PDFWorker.js"),r=new MessageHandler("main","worker",n);this._messageHandler=r;var o=function(){n.removeEventListener("error",u),r.destroy(),n.terminate(),e.destroyed?e._promiseCapability.reject(new Error("Worker was destroyed")):console.error("The worker has been disabled.")},u=function(){e._webWorker||o()};n.addEventListener("error",u),r.on("test",function(w){n.removeEventListener("error",u),e.destroyed?o():w&&(e._messageHandler=r,e._webWorker=n,e._promiseCapability.resolve(!0))}),r.on("ready",function(w){if(n.removeEventListener("error",u),e.destroyed)o();else try{s(),r.send("Ready",!0)}catch{console.error("The worker has been disabled.")}});var s=function(){var w=new Uint8Array;r.send("test",w)};s()}catch(w){console.log(w),console.log("The worker has been disabled.")}}},{key:"promise",get:function(){return this._promiseCapability.promise}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}])}();const documentViewerMap=new Map,setDocumentViewer=(e,n,r)=>{if(n)documentViewerMap.set(e,n);else{const o=new ComPDFKitViewer(r);documentViewerMap.set(e,o)}},deleteDocumentViewer=e=>{documentViewerMap.delete(e)},getDocumentViewer=(e=1)=>documentViewerMap.get(e),getDocumentViewers=()=>Array.from(documentViewerMap.values()),loadDocument=(e,n,r)=>core.getDocumentViewer(r).loadDocument(e,n),initializeViewer=({container:e,viewer:n,thumbnailView:r,annotationView:o,outlineView:u,toggleButton:s},w)=>core.getDocumentViewer(w).initializeViewer({container:e,viewer:n,thumbnailView:r,annotationView:o,outlineView:u,toggleButton:s}),toggleSidebar=()=>core.getDocumentViewer().toggleSidebar(),getPagesCount=()=>core.getDocumentViewer().pagesCount,nextPage=()=>core.getDocumentViewer().nextPage(),previousPage=()=>core.getDocumentViewer().previousPage(),getCurrentPage=()=>core.getDocumentViewer().page,rotateClockwise=()=>core.getDocumentViewer().webViewerRotateCw(),rotateCounterclockwise=()=>core.getDocumentViewer().webViewerRotateCcw(),zoomIn=e=>core.getDocumentViewer(e).zoomIn(),zoomOut=e=>core.getDocumentViewer(e).zoomOut(),pageNumberChanged=e=>core.getDocumentViewer().pageNumberChanged(e.value),scaleChanged=(e,n)=>core.getDocumentViewer(n).webViewerScaleChanged(e),getScale=()=>core.getDocumentViewer().scale,switchAnnotationEditorMode=e=>core.getDocumentViewer().webViewerSwitchAnnotationEditorMode({mode:e}),switchTool=e=>core.getDocumentViewer().switchTool(e),requestFullScreenMode=()=>core.getDocumentViewer().requestFullScreenMode(),saveAnnotations=()=>core.getDocumentViewer().saveAnnotations(),removeAllAnnotations=()=>core.getDocumentViewer().removeAllAnnotations(),getOptionUrl=()=>core.getDocumentViewer().getOptionUrl(),importAnnotations=e=>core.getDocumentViewer().importAnnotations(e),switchSpreadMode=e=>core.getDocumentViewer().webViewerSwitchSpreadMode(e),webViewerNamedAction=(e,n)=>core.getDocumentViewer().webViewerNamedAction({action:e,close:n}),switchScrollMode=e=>core.getDocumentViewer().webViewerSwitchScrollMode(e),initConfig=(e,n=1)=>core.getDocumentViewer(n).initConfig(e),download=(e=!0,n)=>core.getDocumentViewer().download(e,n),addEvent=(e,n)=>core.getDocumentViewer().addEvent(e,n),removeEvent=(e,n)=>core.getDocumentViewer().removeEvent(e,n),setTool=({tool:e,color:n})=>core.getDocumentViewer().setTool({tool:e,color:n}),exportXfdf=(e=!1)=>core.getDocumentViewer().exportXfdf(e),webViewerPageMode=e=>core.getDocumentViewer().webViewerPageMode({mode:e}),setToolMode=e=>core.getDocumentViewer().setToolMode(e),setPropertyPanel=e=>core.getDocumentViewer().setPropertyPanel(e),setInitProperty=()=>core.getDocumentViewer().setInitProperty(),setDefaultSelect=e=>core.getDocumentViewer().setDefaultSelect(e),handleField=(e,n,r)=>core.getDocumentViewer().handleField(e,n,r),handleSign=e=>core.getDocumentViewer().handleSign(e),handleStamp=e=>core.getDocumentViewer().handleStamp(e),flattenPdfDownload=e=>core.getDocumentViewer().flattenPdfDownload(e),compare=e=>core.getDocumentViewer().compare(e),setPassword=e=>core.getDocumentViewer().setPassword(e),removePassword=()=>core.getDocumentViewer().removePassword(),checkPassword=(e,n)=>core.getDocumentViewer().checkPassword(e,n),handleCreateStatus=({bool:e,fileData:n})=>core.getDocumentViewer().handleCreateStatus({bool:e,fileData:n}),triggerPrinting=e=>core.getDocumentViewer().triggerPrinting(e),setContentEditorProperty=(e,n)=>core.getDocumentViewer().setContentEditorProperty(e,n),getOutlines=()=>core.getDocumentViewer().getOutlines(),search=(e,n)=>core.getDocumentViewer(1).search(e),setActiveSearchResult=(e,n,r)=>core.getDocumentViewer(1).setActiveSearchResult(e,n),clearSearchResults=e=>core.getDocumentViewer(1).clearSearchResults(),init=(e=1)=>core.getDocumentViewer(e).init(),getSelectedText=()=>core.getDocumentViewer().getSelectedText(),getDocEditorPages=(e,n,r)=>core.getDocumentViewer().getDocEditorPages(e,n,r),saveDocumentEdit=e=>core.getDocumentViewer().saveDocumentEdit(e),getScrollViewElement=(e=1)=>core.getDocumentViewer(e).getScrollViewElement(),getSelectedPage=(e,n,r=1)=>core.getDocumentViewer(r).getSelectedPage(e,n),pageToWindow=(e,n=1,r=1)=>core.getDocumentViewer(r).pageToWindow(e,n),windowToPage=(e,n=1,r=1)=>core.getDocumentViewer(r).windowToPage(e,n),addEditorImage=e=>core.getDocumentViewer().addEditorImage(e),flattenPdf=e=>core.getDocumentViewer().flattenPdf(e),getSignature=e=>core.getDocumentViewer().getSignature(e),deleteSignature=e=>core.getDocumentViewer().deleteSignature(e),loadCertificates=e=>core.getDocumentViewer().loadCertificates(e),addToTrustedCertificateLists=e=>core.getDocumentViewer().addToTrustedCertificateLists(e),verifySignature=()=>core.getDocumentViewer().verifySignature(),handleReplyAnnotation=e=>core.getDocumentViewer().handleReplyAnnotation(e),setHighlightLink=e=>core.getDocumentViewer().setHighlightLink(e),setHighlightForm=e=>core.getDocumentViewer().setHighlightForm(e),setAnnotator$1=e=>core.getDocumentViewer().setAnnotator(e),selectAnnotation=e=>core.getDocumentViewer().selectAnnotation(e),jumpToAnnotation=e=>core.getDocumentViewer().jumpToAnnotation(e),getCropedPageImage=e=>core.getDocumentViewer().getCropedPageImage(e),resetOperate=e=>core.getDocumentViewer().resetOperate(e),eventBus=()=>core.getDocumentViewer().eventBus,handlePopup=e=>core.getDocumentViewer().handlePopup(e),addAnnotationImage=e=>core.getDocumentViewer().addAnnotationImage(e),applyRedactions=e=>core.getDocumentViewer().applyRedactions(e),setAutoJumpNextSign$1=e=>core.getDocumentViewer().setAutoJumpNextSign(e),enableFillConsecutively=e=>core.getDocumentViewer().enableFillConsecutively(e),disableFillConsecutively=e=>core.getDocumentViewer().disableFillConsecutively(),setLayers=e=>core.getDocumentViewer().setLayers(e),exportLayers=(e,n)=>core.getDocumentViewer().exportLayers(e,n),updateViewWithColorIndex=e=>core.getDocumentViewer().updateViewWithColorIndex(e),setMeasurementDefaults=e=>core.getDocumentViewer().setMeasurementDefaults(e),setAnnotationStyles=(e,n,r)=>core.getDocumentViewer(1).setAnnotationStyles(e,n),setFreetextDefault=(e,n)=>core.getDocumentViewer(1).setFreetextDefault(e),getDynamicStampPreview=e=>core.getDocumentViewer().getDynamicStampPreview(e),getStampRect=e=>core.getDocumentViewer().getStampRect(e),getViewerElement=(e=1)=>core.getDocumentViewer(e).getViewerElement(),checkPermissionPassword=e=>core.getDocumentViewer().checkPermissionPassword(e),getPermission=e=>core.getDocumentViewer().getPermission(e),showPopup=e=>core.getDocumentViewer().showPopup(e),core={getDocumentViewer,setDocumentViewer,getDocumentViewers,deleteDocumentViewer,loadDocument,initializeViewer,toggleSidebar,getPagesCount,nextPage,previousPage,getCurrentPage,rotateClockwise,rotateCounterclockwise,zoomIn,zoomOut,pageNumberChanged,scaleChanged,getScale,switchAnnotationEditorMode,switchTool,requestFullScreenMode,saveAnnotations,removeAllAnnotations,getOptionUrl,importAnnotations,switchSpreadMode,webViewerNamedAction,switchScrollMode,initConfig,download,addEvent,removeEvent,setTool,exportXfdf,webViewerPageMode,setToolMode,setPropertyPanel,setInitProperty,setDefaultSelect,handleField,handleSign,handleStamp,flattenPdfDownload,compare,setPassword,removePassword,checkPassword,handleCreateStatus,triggerPrinting,setContentEditorProperty,getOutlines,search,setActiveSearchResult,clearSearchResults,init,getSelectedText,getDocEditorPages,saveDocumentEdit,getScrollViewElement,getSelectedPage,pageToWindow,windowToPage,addEditorImage,flattenPdf,getSignature,deleteSignature,loadCertificates,addToTrustedCertificateLists,verifySignature,handleReplyAnnotation,setHighlightLink,setHighlightForm,setAnnotator:setAnnotator$1,selectAnnotation,jumpToAnnotation,getCropedPageImage,resetOperate,eventBus,handlePopup,addAnnotationImage,applyRedactions,setAutoJumpNextSign:setAutoJumpNextSign$1,enableFillConsecutively,disableFillConsecutively,setLayers,exportLayers,updateViewWithColorIndex,setMeasurementDefaults,setAnnotationStyles,setFreetextDefault,getDynamicStampPreview,getStampRect,getViewerElement,checkPermissionPassword,getPermission,showPopup},isMobile=window.innerWidth<640;navigator.userAgent.indexOf("Edge")>-1;navigator.userAgent.indexOf("Edg/")>-1;navigator.userAgent.indexOf("Trident/7.0")>-1;navigator.userAgent.toLowerCase().indexOf("firefox")>-1;const checkForIOS13=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,isIOS$1=window.navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||checkForIOS13,isAndroid=window.navigator.userAgent.match(/Android/i),isMobileDevice=isIOS$1||isAndroid||window.navigator.userAgent.match(/webOS|BlackBerry|IEMobile|Opera Mini/i);navigator.appVersion.indexOf("Mac")>-1;navigator.appVersion.indexOf("Windows")>-1;(function(){const e=window.navigator.userAgent.match(/OPR/),n=window.navigator.userAgent.match(/Maxthon/),r=window.navigator.userAgent.match(/Edge/);return window.navigator.userAgent.match(/Chrome\/(.*?) /)&&!e&&!n&&!r})();/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||/^((?!chrome|android).)*$/.test(navigator.userAgent);window.navigator.userAgent.match(/CriOS\/(.*?) /);window.navigator.userAgent.match(/(FxiOS)\/(.*?) /);const useViewerStore=defineStore({id:"viewer",state:()=>({language:"en",fullMode:!1,currentPage:0,searchStatus:!1,scale:"",oldScale:"",newScale:"",themeMode:"Light",pageMode:0,webviewerMode:"Standalone",scrollMode:"Vertical",pageLabels:[],zoomLevel:["auto","page-fit",.5,1,1.25,1.5,2,2.5],activeTab:0,activeStickNote:!1,activeActiveMeasure:!1,activeHand:!1,license:null,verified:!1,annotation:{isAnnotationExport:!0,isAnnotationImport:!0},electronicSignaturesList:[],digitalSignaturesList:[],customStamps:[],activeElements:{leftPanel:!1,rightPanel:!1,pageModePanel:!1,stampPanel:!1,linkPanel:!1,compareSettingDialog:!1,settingsDialog:!1,setPasswordModal:!1,signCreatePanel:!1,createCustomStampDialog:!1,digitalSignCreatePanel:!1,downloadSettingDialog:!1,printSettingDialog:!1,contentEditorPanel:!1,contentEditorPreventDialog:!1,docEditorPreventDialog:!1,insertPageSettingDialog:!1,deletePageDialog:!1,deleteCustomStampDialog:!1,extractPageSettingDialog:!1,movePageSettingDialog:!1,selectSignTypeDialog:!1,signatureAppearanceDialog:!1,signatureDetailsDialog:!1,certificateViewerDialog:!1,deleteSignatureDialog:!1,addDigitalFileDialog:!1,layerPropertyDialog:!1,colorSeparationPanel:!1,unsupportedMobileDialog:!1,redactionTipDialog:!1,measurementSettingsDialog:!1,measurePanel:!1,freetextPanel:!1,permissionPasswordDialog:!1},digitalSignature:{preview:null},activeElementsTab:{leftPanel:"THUMBS",rightPanel:"GENERAL",stampPanel:"STANDARD",signPanel:"keyboard"},disabledElements:{header:{disabled:!1},pageNavOverlay:{disabled:!1},thumbnails:{disabled:!1},layers:{disabled:!1},outlines:{disabled:!1},annotation:{disabled:!1},signature:{disabled:!1},search:{disabled:!1}},headers:[{type:"toggleElementButton",img:"icon-header-sidebar-line",element:"leftPanel",dataElement:"leftPanelButton",title:"Left Panel",class:"toggle-button"},{type:"divider",hidden:["small-mobile"]},{type:"pageDisplayButton",dataElement:"pageDisplayButton",element:"pageDisplayButton",title:"Page Display"},{type:"fullScreenButton",dataElement:"fullScreenButton",element:"fullScreenButton",title:"Full Screen"},{type:"handToolButton",dataElement:"handToolButton",element:"handToolButton",title:"Pan Tool"},{type:"selectTools",dataElement:"selectTools"},{type:"divider",hidden:["small-mobile"]},{type:"zoomOverlay",dataElement:"zoomOverlayButton",element:"zoomOverlay",hiddenOnMobileDevice:!0},{type:"divider",hidden:["small-mobile"]},{type:"themeMode",dataElement:"themeMode",element:"themeMode"},{type:"stickyNoteButton",dataElement:"stickyNoteButton",element:"stickyNoteButton"},{type:"compareButton",dataElement:"compareButton",element:"compareButton",hidden:!0},{type:"saveButton",dataElement:"saveButton",element:"saveButton",hidden:!0},{type:"cropPageButton",dataElement:"cropPageButton",element:"cropPageButton"},{type:"openFileButton",dataElement:"openFileButton",element:"openFileButton",title:"Open File"}],rightHeaders:[{type:"openFileButton",dataElement:"openFileButton",element:"openFileButton",title:"Open File"},{type:"searchButton",dataElement:"searchButton",element:"searchButton",title:"Search"},{type:"pageModeButton",dataElement:"pageModeButton",element:"pageModeButton"},{type:"downloadButton",dataElement:"downloadButton",element:"downloadButton",title:"Download"},{type:"flattenButton",dataElement:"flattenButton",element:"flattenButton",title:"Save as Flattened PDF"},{type:"printButton",dataElement:"printButton",element:"printButton",title:"Print"},{type:"themeMode",dataElement:"themeMode",element:"themeMode"},{type:"settingButton",dataElement:"settingButton",element:"settingButton",title:"Setting"}],toolMode:"view",tools:[{element:"view",dataElement:"toolMenu-View"},{element:"annotation",dataElement:"toolMenu-Annotation"},{element:"form",dataElement:"toolMenu-Form"},{element:"measurement",dataElement:"toolMenu-Measurement"},{element:"sign",dataElement:"toolMenu-Sign"},{element:"security",dataElement:"toolMenu-Security"},{element:"redaction",dataElement:"toolMenu-Redaction"},{element:"compare",dataElement:"toolMenu-Compare"},{element:"editor",dataElement:"toolMenu-Editor"},{element:"document",dataElement:"toolMenu-Document"},{element:"separation",dataElement:"toolMenu-Separation"}],toolItems:{annotation:[{type:"note",dataElement:"note"},{type:"text",dataElement:"text"},{type:"ink",dataElement:"ink"},{type:"highlight",dataElement:"highlight"},{type:"underline",dataElement:"underline"},{type:"strikeout",dataElement:"strikeout"},{type:"squiggly",dataElement:"squiggly"},{type:"circle",dataElement:"circle"},{type:"arc",dataElement:"arc"},{type:"square",dataElement:"square"},{type:"polygon",dataElement:"polygon"},{type:"polyline",dataElement:"polyline"},{type:"arrow",dataElement:"arrow"},{type:"line",dataElement:"line"},{type:"freetext",dataElement:"freetext"},{type:"stamp",dataElement:"stamp"},{type:"image",dataElement:"image"},{type:"link",dataElement:"link"},{type:"divider"},{type:"property",dataElement:"annotationPropertyPanelButton",id:"annotationPropertyPanelButton",title:"properties"}],form:[{type:"textFieldButton",dataElement:"textFieldButton",element:"textFieldButton",title:"Form Field"},{type:"checkBoxButton",dataElement:"checkBoxButton",element:"checkBoxButton",title:"Check Box"},{type:"radioButton",dataElement:"radioButton",element:"radioButton",title:"Radio Button"},{type:"listBox",dataElement:"listBox",element:"listBox",title:"List Box"},{type:"comboBox",dataElement:"comboBox",element:"comboBox",title:"Combo Box"},{type:"pushButton",dataElement:"pushButton",element:"pushButton",title:"Push Button"},{type:"divider"},{type:"property",dataElement:"formPropertyPanelButton",id:"formPropertyPanelButton",title:"properties"}],security:[{type:"encryption",dataElement:"encryption",title:"security.encryption"},{type:"decryption",dataElement:"decryption",title:"security.decryption"}],redaction:[{type:"fillBlack",dataElement:"redaction",title:"security.fillBlack"},{type:"fillWhite",dataElement:"remove",title:"security.fillWhite"}],compare:[{type:"comparedToolbar"}],editor:[{type:"addText",dataElement:"addText",element:"addText",title:"header.addText"},{type:"addImage",dataElement:"addImage",element:"addImage",title:"header.addImage"},{type:"divider"},{type:"undo",dataElement:"undo",element:"undo",title:"header.undo"},{type:"redo",dataElement:"redo",element:"redo",title:"header.redo"},{type:"divider"},{type:"property",dataElement:"editorPropertyPanelButton",id:"editorPropertyPanelButton",title:"properties"}],sign:[{type:"signatureToolBar"}],measurement:[{type:"line",dataElement:"measureLine",element:"measureLine",title:"header.measureLine"},{type:"polyline",dataElement:"measureMultiline",element:"measureMultiline",title:"header.measureMultiline"},{type:"curve",dataElement:"measureCurve",element:"measureCurve",title:"header.measureCurve"},{type:"arc",dataElement:"measureArc",element:"measureArc",title:"header.measureArc"},{type:"circle",dataElement:"measureCircle",element:"measureCircle",title:"header.measureCircle"},{type:"rectangle",dataElement:"measureRectangle",element:"measureRectangle",title:"header.measureRectangle"},{type:"polygon",dataElement:"measurePolygon",element:"measurePolygon",title:"header.measurePolygon"},{type:"divider"},{type:"property",dataElement:"measurePropertyPanelButton",id:"measurePropertyPanelButton",title:"properties"}]},customFonts:[{fontFamily:"Helvetica",fontName:"Helvetica"},{fontFamily:"Courier",fontName:"Courier"},{fontFamily:"Times-Roman",fontName:"Times-Roman"}],signatureDialogTabs:["trackpad","keyboard","image"],signatureDialogProperties:{keyboard:{colors:[{type:"color",value:"rgb(0, 0, 0)"},{type:"color",value:"rgb(255, 0, 0)"},{type:"color",value:"rgb(45, 119, 250)"}],enableCustomColor:!0,fonts:["Arial","Courier New","Times New Roman"]},trackpad:{enableLineWidth:!0,lineWidth:5,colors:[{type:"color",value:"rgb(0, 0, 0)"},{type:"color",value:"rgb(255, 0, 0)"},{type:"color",value:"rgb(45, 119, 250)"}],enableCustomColor:!0}},downloading:!1,downloadError:"",popoverChanged:!1,compareStatus:"",upload:!0,uploadLoading:!1,compareMode:"content",contentEditorType:"text",signatureVerify:0,selectedSignatureField:null,disableSignatureTool:!1,documentEditorSaveStatus:!0,documentEditorSaveAsStatus:!0,textPopup:[{type:"copy",dataElement:"copyTextButton"},{type:"highlight",dataElement:"highlightButton"},{type:"underline",dataElement:"underlineButton"},{type:"strikeout",dataElement:"strikeoutButton"},{type:"squiggly",dataElement:"squigglyButton"}],cropPagePopup:[{type:"cropPage",dataElement:"cropDownloadButton"},{type:"close",dataElement:"exitCroppingButton"}],contentEditorPopup:[{type:"copy",dataElement:"copyTextButton"},{type:"property",dataElement:"propertyButton"},{type:"delete",dataElement:"deleteButton"}],measurementPopup:[{type:"reply",dataElement:"replyButton"},{type:"settings",dataElement:"measureSettingsButton"},{type:"property",dataElement:"measurePropertyButton"},{type:"delete",dataElement:"deleteMeasurementButton"}],isDisabledHeader:!1,rightPanelButtonDisabled:!0,redactionConfirmDialog:-1,commonLoading:!1,customLoading:null,showCompareTip:!1}),getters:{getLanguage(){return this.language},getFullMode(){return this.fullMode},getCurrentPage(){return this.currentPage},getThemeMode(){return this.themeMode},getPageMode(){return this.pageMode},getScrollMode(){return this.scrollMode},getWebviewerMode(){return this.webviewerMode},getActiveHeaderItems(){return this.headers},getActiveRightHeaderItems(){return this.rightHeaders},isElementOpen:e=>n=>e.activeElements[n],getActiveElementTab:e=>n=>e.activeElementsTab[n],getScale(){return Math.round(this.scale*100)},getOldScale(){return Math.round(this.oldScale*100)},getNewScale(){return Math.round(this.newScale*100)},getActiveStickNote(){return this.activeStickNote},getActiveMeasure(){return this.activeActiveMeasure},getActiveHand(){return this.activeHand},getSearchStatus(){return this.searchStatus},getToolMode(){return this.toolMode},getTools(){return this.tools},getToolItems(){return this.toolItems},getDownloading(){return this.downloading},getDownloadError(){return this.downloadError},getPopoverChanged(){return this.popoverChanged},getCompareStatus(){return this.compareStatus},getUpload(){return this.upload},getUploadLoading(){return this.uploadLoading},getCompareMode(){return this.compareMode},getLicense(){return this.license},getVerified(){return this.verified},getContentEditorType(){return this.contentEditorType},getSignatureVerify(){return this.signatureVerify},getSelectedSignatureField(){return this.selectedSignatureField},getDigitalSignaturePreview(){return this.digitalSignature.preview},getCertSubject(){return this.digitalSignature.certSubject},getPopupItems(e){return n=>e[n]},getDisabledHeader(){return this.isDisabledHeader},getDisabledElementsObj:e=>e.disabledElements,getDisabledElements:e=>n=>{var r;return(r=e.disabledElements[n])==null?void 0:r.disabled},getRightPanelButtonDisabled(){return this.rightPanelButtonDisabled},getCustomFonts(){return this.customFonts},getRedactionConfirmDialog(){return this.redactionConfirmDialog},getCommonLoading(){return this.commonLoading},getSignatureDialogTabs(){return this.signatureDialogTabs},getSignatureDialogProperties(){return this.signatureDialogProperties},getCustomLoading(){return this.customLoading},isAnnotationExport(){return this.annotation.isAnnotationExport},isAnnotationImport(){return this.annotation.isAnnotationImport},getDisableSignatureTool(){return this.disableSignatureTool},isShowCompareTip(){return this.showCompareTip},getDocumentEditorSaveStatus(){return this.documentEditorSaveStatus},getDocumentEditorSaveAsStatus(){return this.documentEditorSaveAsStatus},getCustomStamps(){return this.customStamps},getElectronicSignaturesList(){return this.electronicSignaturesList},getDigitalSignaturesList(){return this.digitalSignaturesList}},actions:{resetSetting(){this.fullMode=!1,this.currentPage=0,this.scale="",this.themeMode="Light",this.pageMode=0,this.scrollMode="Vertical",this.activeTab=0,this.searchStatus=!1,this.activeElements={leftPanel:!1,rightPanel:!1,pageModePanel:!1,stampPanel:!1,linkPanel:!1,compareSettingDialog:!1,settingsDialog:!1,contentEditorPreventDialog:!1,docEditorPreventDialog:!1,setPasswordModal:!1,signCreatePanel:!1,createCustomStampDialog:!1,digitalSignCreatePanel:!1,downloadSettingDialog:!1,printSettingDialog:!1,contentEditorPanel:!1,insertPageSettingDialog:!1,deletePageDialog:!1,deleteCustomStampDialog:!1,extractPageSettingDialog:!1,movePageSettingDialog:!1,selectSignTypeDialog:!1,signatureAppearanceDialog:!1,signatureDetailsDialog:!1,certificateViewerDialog:!1,deleteSignatureDialog:!1,addDigitalFileDialog:!1,colorSeparationPanel:!1,redactionTipDialog:!1,measurementSettingsDialog:!1,measurePanel:!1,freetextPanel:!1},this.activeElementsTab={leftPanel:"THUMBS",rightPanel:"GENERAL",stampPanel:"STANDARD",signPanel:"trackpad"},this.signatureVerify=0},resetPanels(){this.activeElements.leftPanel&&this.closeElement("leftPanel"),this.searchStatus=!1,this.activeElements={leftPanel:!1,rightPanel:!1,pageModePanel:!1,stampPanel:!1}},setLanguage(e){this.language=e},setLicense(e){this.license=e},setVerified(e){this.verified=e},setFullMode(e){return this.fullMode=e},setCurrentPage(e){this.currentPage=e},setThemeMode(e){this.themeMode=e},setPageMode(e){this.pageMode=e},setScrollMode(e){this.scrollMode=e},setWebviewerMode(e){this.webviewerMode=e},setCurrentScale(e){this.scale=e},setOldCurrentScale(e){this.oldScale=e},setNewCurrentScale(e){this.newScale=e},openElement(e){this.activeElements[e]||(this.activeElements[e]=!0,e==="leftPanel"&&core.toggleSidebar())},closeElement(e){!this.activeElements[e]||(this.activeElements[e]=!1,e==="leftPanel"&&core.toggleSidebar()&&setTimeout(()=>core.webViewerPageMode("none"),0))},toggleElement(e){this.activeElements[e]?this.closeElement(e):this.openElement(e)},setActiveElementTab(e,n){this.activeElementsTab[e]=n;const r={THUMBS:"thumbs",OUTLINE:"outline"};r[n]&&setTimeout(()=>core.webViewerPageMode(r[n]),0)},toggleActiveStickNote(){this.activeStickNote=!this.activeStickNote},closeActiveStickNote(){this.activeStickNote=!1},toggleActiveMeasure(){this.activeActiveMeasure=!this.activeActiveMeasure},closeActiveMeasure(){this.activeActiveMeasure=!1},toggleActiveHand(e){this.activeHand=e},closeActiveHand(){this.activeHand=!1},setSearchStatus(e){this.searchStatus=e},setActiveToolMode(e){if(isMobileDevice&&e==="separation"){this.activeElements.unsupportedMobileDialog=!0;return}this.toolMode=e,this.activeElements.stampPanel=!1,this.activeElements.linkPanel=!1,this.activeElements.contentEditorPanel=!1,this.activeElements.measurePanel=!1,this.activeElements.freetextPanel=!1,core.setToolMode(e)},setDownloading(e){this.downloading=e},setDownloadError(e){this.downloadError=e},setActiveSignWay(e){this.activeElementsTab.signPanel=e},setPopoverChanged(e){this.popoverChanged=e},setCompareStatus(e){this.compareStatus=e},setUpload(e){this.upload=e},setUploadLoading(e){this.uploadLoading=e},setCompareMode(e){this.compareMode=e},setContentEditorType(e){this.contentEditorType=e},setSignatureVerify(e){this.signatureVerify=e},setSelectedSignatureField(e){this.selectedSignatureField=e},setDigitalSignaturePreview(e){this.digitalSignature.preview=e},setCertSubject(e){this.digitalSignature.certSubject=e},dispatch(e){return this[e]},getState(e){return e?this.$state[e]:this.$state},setDisableHeader(e){this.isDisabledHeader=e},setDisabledElements(e){const n=this.disabledElements;e in n?n[e].disabled=!0:n[e]={disabled:!0}},setEnabledElements(e){const n=this.disabledElements;e in n?n[e].disabled=!1:n[e]={disabled:!1}},setRightPanelButtonDisabled(e){this.rightPanelButtonDisabled=e},setCustomFonts(e){typeof e=="string"&&(e=[{fontName:e,fontFamily:e}]);for(let n=0;n<e.length;n++){let r=e[n];typeof r=="string"&&(r={fontFamily:r,fontName:r}),this.customFonts.some(o=>o.fontName===r.fontName&&o.fontFamily===r.fontFamily)||this.customFonts.push(r)}},setRedactionConfirmDialog(e){this.redactionConfirmDialog=e},setCommonLoading(e){this.commonLoading=Boolean(e)},setSignatureDialogTabs(e){this.signatureDialogTabs=e},setSignatureDialogProperties(e,n){const r={...this.signatureDialogProperties[e],...n};this.signatureDialogProperties[e]=r},setCustomLoading(e){this.customLoading=e},setAnnotationExport(e){this.annotation.isAnnotationExport=e},setAnnotationImport(e){this.annotation.isAnnotationImport=e},setDisableSignatureTool(e){this.disableSignatureTool=e},setShowCompareTip(e){this.showCompareTip=e},setDocumentEditorSaveStatus(e){this.documentEditorSaveStatus=e},setDocumentEditorSaveAsStatus(e){this.documentEditorSaveAsStatus=e},addCustomStamps(e){this.customStamps.unshift(e),window.localStorage.setItem("customStamps",JSON.stringify(this.customStamps))},setCustomStamps(e){this.customStamps=e},removeCustomStamp(e){this.customStamps.splice(e,1),window.localStorage.setItem("customStamps",JSON.stringify(this.customStamps))},addElectronicSignature(e){this.electronicSignaturesList.unshift(e),window.localStorage.setItem("electronicSignatures",JSON.stringify(this.electronicSignaturesList))},setElectronicSignature(e){this.electronicSignaturesList=e},addDigitalSignature(e){this.digitalSignaturesList.unshift(e),window.localStorage.setItem("digitalSignatures",JSON.stringify(this.digitalSignaturesList))},setDigitalSignature(e){this.digitalSignaturesList=e},removeElectronicSignature(e){this.electronicSignaturesList.splice(e,1),window.localStorage.setItem("electronicSignatures",JSON.stringify(this.electronicSignaturesList))},removeDigitalSignature(e){this.digitalSignaturesList.splice(e,1),window.localStorage.setItem("digitalSignatures",JSON.stringify(this.digitalSignaturesList))}}}),_sfc_main$4j={},_hoisted_1$3Y={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3K=createStaticVNode('<circle cx="12" cy="12" r="11.5333" fill="white" stroke="#DADBDE" stroke-width="0.933333"></circle><mask id="mask0_5731_11399" style="mask-type:luminance;" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="24"><circle cx="12" cy="12" r="12" fill="white"></circle></mask><g mask="url(#mask0_5731_11399)"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.61636 22.203L2.00011 20.5868L20.5869 2L22.2032 3.61624L3.61636 22.203Z" fill="#FA1E5D"></path></g>',3),_hoisted_5$S=[_hoisted_2$3K];function _sfc_render$2G(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3Y,_hoisted_5$S)}const __unplugin_components_0$x=_export_sfc(_sfc_main$4j,[["render",_sfc_render$2G]]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){var n=e.default;if(typeof n=="function"){var r=function(){return n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var u=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,u.get?u:{enumerable:!0,get:function(){return e[o]}})}),r}var dayjs_min={exports:{}};(function(e,n){(function(r,o){e.exports=o()})(commonjsGlobal,function(){var r=1e3,o=6e4,u=36e5,s="millisecond",w="second",g="minute",v="hour",y="day",m="week",d="month",f="quarter",x="year",k="date",P="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(J){var re=["th","st","nd","rd"],X=J%100;return"["+J+(re[(X-20)%10]||re[X]||re[0])+"]"}},T=function(J,re,X){var j=String(J);return!j||j.length>=re?J:""+Array(re+1-j.length).join(X)+J},D={s:T,z:function(J){var re=-J.utcOffset(),X=Math.abs(re),j=Math.floor(X/60),Z=X%60;return(re<=0?"+":"-")+T(j,2,"0")+":"+T(Z,2,"0")},m:function J(re,X){if(re.date()<X.date())return-J(X,re);var j=12*(X.year()-re.year())+(X.month()-re.month()),Z=re.clone().add(j,d),W=X-Z<0,te=re.clone().add(j+(W?-1:1),d);return+(-(j+(X-Z)/(W?Z-te:te-Z))||0)},a:function(J){return J<0?Math.ceil(J)||0:Math.floor(J)},p:function(J){return{M:d,y:x,w:m,d:y,D:k,h:v,m:g,s:w,ms:s,Q:f}[J]||String(J||"").toLowerCase().replace(/s$/,"")},u:function(J){return J===void 0}},I="en",N={};N[I]=M;var O="$isDayjsObject",F=function(J){return J instanceof q||!(!J||!J[O])},U=function J(re,X,j){var Z;if(!re)return I;if(typeof re=="string"){var W=re.toLowerCase();N[W]&&(Z=W),X&&(N[W]=X,Z=W);var te=re.split("-");if(!Z&&te.length>1)return J(te[0])}else{var le=re.name;N[le]=re,Z=le}return!j&&Z&&(I=Z),Z||!j&&I},Y=function(J,re){if(F(J))return J.clone();var X=typeof re=="object"?re:{};return X.date=J,X.args=arguments,new q(X)},Q=D;Q.l=U,Q.i=F,Q.w=function(J,re){return Y(J,{locale:re.$L,utc:re.$u,x:re.$x,$offset:re.$offset})};var q=function(){function J(X){this.$L=U(X.locale,null,!0),this.parse(X),this.$x=this.$x||X.x||{},this[O]=!0}var re=J.prototype;return re.parse=function(X){this.$d=function(j){var Z=j.date,W=j.utc;if(Z===null)return new Date(NaN);if(Q.u(Z))return new Date;if(Z instanceof Date)return new Date(Z);if(typeof Z=="string"&&!/Z$/i.test(Z)){var te=Z.match(S);if(te){var le=te[2]-1||0,oe=(te[7]||"0").substring(0,3);return W?new Date(Date.UTC(te[1],le,te[3]||1,te[4]||0,te[5]||0,te[6]||0,oe)):new Date(te[1],le,te[3]||1,te[4]||0,te[5]||0,te[6]||0,oe)}}return new Date(Z)}(X),this.init()},re.init=function(){var X=this.$d;this.$y=X.getFullYear(),this.$M=X.getMonth(),this.$D=X.getDate(),this.$W=X.getDay(),this.$H=X.getHours(),this.$m=X.getMinutes(),this.$s=X.getSeconds(),this.$ms=X.getMilliseconds()},re.$utils=function(){return Q},re.isValid=function(){return this.$d.toString()!==P},re.isSame=function(X,j){var Z=Y(X);return this.startOf(j)<=Z&&Z<=this.endOf(j)},re.isAfter=function(X,j){return Y(X)<this.startOf(j)},re.isBefore=function(X,j){return this.endOf(j)<Y(X)},re.$g=function(X,j,Z){return Q.u(X)?this[j]:this.set(Z,X)},re.unix=function(){return Math.floor(this.valueOf()/1e3)},re.valueOf=function(){return this.$d.getTime()},re.startOf=function(X,j){var Z=this,W=!!Q.u(j)||j,te=Q.p(X),le=function(Me,Le){var Te=Q.w(Z.$u?Date.UTC(Z.$y,Le,Me):new Date(Z.$y,Le,Me),Z);return W?Te:Te.endOf(y)},oe=function(Me,Le){return Q.w(Z.toDate()[Me].apply(Z.toDate("s"),(W?[0,0,0,0]:[23,59,59,999]).slice(Le)),Z)},Ee=this.$W,Ae=this.$M,ve=this.$D,ke="set"+(this.$u?"UTC":"");switch(te){case x:return W?le(1,0):le(31,11);case d:return W?le(1,Ae):le(0,Ae+1);case m:var Ce=this.$locale().weekStart||0,Pe=(Ee<Ce?Ee+7:Ee)-Ce;return le(W?ve-Pe:ve+(6-Pe),Ae);case y:case k:return oe(ke+"Hours",0);case v:return oe(ke+"Minutes",1);case g:return oe(ke+"Seconds",2);case w:return oe(ke+"Milliseconds",3);default:return this.clone()}},re.endOf=function(X){return this.startOf(X,!1)},re.$set=function(X,j){var Z,W=Q.p(X),te="set"+(this.$u?"UTC":""),le=(Z={},Z[y]=te+"Date",Z[k]=te+"Date",Z[d]=te+"Month",Z[x]=te+"FullYear",Z[v]=te+"Hours",Z[g]=te+"Minutes",Z[w]=te+"Seconds",Z[s]=te+"Milliseconds",Z)[W],oe=W===y?this.$D+(j-this.$W):j;if(W===d||W===x){var Ee=this.clone().set(k,1);Ee.$d[le](oe),Ee.init(),this.$d=Ee.set(k,Math.min(this.$D,Ee.daysInMonth())).$d}else le&&this.$d[le](oe);return this.init(),this},re.set=function(X,j){return this.clone().$set(X,j)},re.get=function(X){return this[Q.p(X)]()},re.add=function(X,j){var Z,W=this;X=Number(X);var te=Q.p(j),le=function(Ae){var ve=Y(W);return Q.w(ve.date(ve.date()+Math.round(Ae*X)),W)};if(te===d)return this.set(d,this.$M+X);if(te===x)return this.set(x,this.$y+X);if(te===y)return le(1);if(te===m)return le(7);var oe=(Z={},Z[g]=o,Z[v]=u,Z[w]=r,Z)[te]||1,Ee=this.$d.getTime()+X*oe;return Q.w(Ee,this)},re.subtract=function(X,j){return this.add(-1*X,j)},re.format=function(X){var j=this,Z=this.$locale();if(!this.isValid())return Z.invalidDate||P;var W=X||"YYYY-MM-DDTHH:mm:ssZ",te=Q.z(this),le=this.$H,oe=this.$m,Ee=this.$M,Ae=Z.weekdays,ve=Z.months,ke=Z.meridiem,Ce=function(Le,Te,ye,_e){return Le&&(Le[Te]||Le(j,W))||ye[Te].slice(0,_e)},Pe=function(Le){return Q.s(le%12||12,Le,"0")},Me=ke||function(Le,Te,ye){var _e=Le<12?"AM":"PM";return ye?_e.toLowerCase():_e};return W.replace(E,function(Le,Te){return Te||function(ye){switch(ye){case"YY":return String(j.$y).slice(-2);case"YYYY":return Q.s(j.$y,4,"0");case"M":return Ee+1;case"MM":return Q.s(Ee+1,2,"0");case"MMM":return Ce(Z.monthsShort,Ee,ve,3);case"MMMM":return Ce(ve,Ee);case"D":return j.$D;case"DD":return Q.s(j.$D,2,"0");case"d":return String(j.$W);case"dd":return Ce(Z.weekdaysMin,j.$W,Ae,2);case"ddd":return Ce(Z.weekdaysShort,j.$W,Ae,3);case"dddd":return Ae[j.$W];case"H":return String(le);case"HH":return Q.s(le,2,"0");case"h":return Pe(1);case"hh":return Pe(2);case"a":return Me(le,oe,!0);case"A":return Me(le,oe,!1);case"m":return String(oe);case"mm":return Q.s(oe,2,"0");case"s":return String(j.$s);case"ss":return Q.s(j.$s,2,"0");case"SSS":return Q.s(j.$ms,3,"0");case"Z":return te}return null}(Le)||te.replace(":","")})},re.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},re.diff=function(X,j,Z){var W,te=this,le=Q.p(j),oe=Y(X),Ee=(oe.utcOffset()-this.utcOffset())*o,Ae=this-oe,ve=function(){return Q.m(te,oe)};switch(le){case x:W=ve()/12;break;case d:W=ve();break;case f:W=ve()/3;break;case m:W=(Ae-Ee)/6048e5;break;case y:W=(Ae-Ee)/864e5;break;case v:W=Ae/u;break;case g:W=Ae/o;break;case w:W=Ae/r;break;default:W=Ae}return Z?W:Q.a(W)},re.daysInMonth=function(){return this.endOf(d).$D},re.$locale=function(){return N[this.$L]},re.locale=function(X,j){if(!X)return this.$L;var Z=this.clone(),W=U(X,j,!0);return W&&(Z.$L=W),Z},re.clone=function(){return Q.w(this.$d,this)},re.toDate=function(){return new Date(this.valueOf())},re.toJSON=function(){return this.isValid()?this.toISOString():null},re.toISOString=function(){return this.$d.toISOString()},re.toString=function(){return this.$d.toUTCString()},J}(),ne=q.prototype;return Y.prototype=ne,[["$ms",s],["$s",w],["$m",g],["$H",v],["$W",y],["$M",d],["$y",x],["$D",k]].forEach(function(J){ne[J[1]]=function(re){return this.$g(re,J[0],J[1])}}),Y.extend=function(J,re){return J.$i||(J(re,q,Y),J.$i=!0),Y},Y.locale=U,Y.isDayjs=F,Y.unix=function(J){return Y(1e3*J)},Y.en=N[I],Y.Ls=N,Y.p={},Y})})(dayjs_min);const dayjs=dayjs_min.exports;var fabric$1={};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);(function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var n=n||{version:"5.5.2"};if(e.fabric=n,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?n.document=document:n.document=document.implementation.createHTMLDocument(""),n.window=window;else{var r=require$$2,o=new r.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;n.document=o.document,n.jsdomImplForWrapper=require$$2.implForWrapper,n.nodeCanvas=require$$2.Canvas,n.window=o,DOMParser=n.window.DOMParser}n.isTouchSupported="ontouchstart"in n.window||"ontouchstart"in n.document||n.window&&n.window.navigator&&n.window.navigator.maxTouchPoints>0,n.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",n.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],n.DPI=96,n.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",n.commaWsp="(?:\\s+,?\\s*|,\\s*)",n.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,n.reNonWord=/[ \n\.,;!\?\-]/,n.fontPaths={},n.iMatrix=[1,0,0,1,0,0],n.svgNS="http://www.w3.org/2000/svg",n.perfLimitSizeTotal=2097152,n.maxCacheSideLimit=4096,n.minCacheSideLimit=256,n.charWidthsCache={},n.textureSize=2048,n.disableStyleCopyPaste=!1,n.enableGLFiltering=!0,n.devicePixelRatio=n.window.devicePixelRatio||n.window.webkitDevicePixelRatio||n.window.mozDevicePixelRatio||1,n.browserShadowBlurConstant=1,n.arcToSegmentsCache={},n.boundsOfCurveCache={},n.cachesBoundsOfCurve=!0,n.forceGLPutImageData=!1,n.initFilterBackend=function(){if(n.enableGLFiltering&&n.isWebglSupported&&n.isWebglSupported(n.textureSize))return console.log("max texture size: "+n.maxTextureSize),new n.WebglFilterBackend({tileSize:n.textureSize});if(n.Canvas2dFilterBackend)return new n.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=n),function(){function g(x,k){if(!!this.__eventListeners[x]){var P=this.__eventListeners[x];k?P[P.indexOf(k)]=!1:n.util.array.fill(P,!1)}}function v(x,k){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var P in x)this.on(P,x[P]);else this.__eventListeners[x]||(this.__eventListeners[x]=[]),this.__eventListeners[x].push(k);return this}function y(x,k){var P=function(){k.apply(this,arguments),this.off(x,P)}.bind(this);this.on(x,P)}function m(x,k){if(arguments.length===1)for(var P in x)y.call(this,P,x[P]);else y.call(this,x,k);return this}function d(x,k){if(!this.__eventListeners)return this;if(arguments.length===0)for(x in this.__eventListeners)g.call(this,x);else if(arguments.length===1&&typeof arguments[0]=="object")for(var P in x)g.call(this,P,x[P]);else g.call(this,x,k);return this}function f(x,k){if(!this.__eventListeners)return this;var P=this.__eventListeners[x];if(!P)return this;for(var S=0,E=P.length;S<E;S++)P[S]&&P[S].call(this,k||{});return this.__eventListeners[x]=P.filter(function(M){return M!==!1}),this}n.Observable={fire:f,on:v,once:m,off:d}}(),n.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var g=0,v=arguments.length;g<v;g++)this._onObjectAdded(arguments[g]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(g,v,y){var m=this._objects;return y?m[v]=g:m.splice(v,0,g),this._onObjectAdded&&this._onObjectAdded(g),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var g=this._objects,v,y=!1,m=0,d=arguments.length;m<d;m++)v=g.indexOf(arguments[m]),v!==-1&&(y=!0,g.splice(v,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[m]));return this.renderOnAddRemove&&y&&this.requestRenderAll(),this},forEachObject:function(g,v){for(var y=this.getObjects(),m=0,d=y.length;m<d;m++)g.call(v,y[m],m,y);return this},getObjects:function(g){return typeof g>"u"?this._objects.concat():this._objects.filter(function(v){return v.type===g})},item:function(g){return this._objects[g]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(g,v){return this._objects.indexOf(g)>-1?!0:v?this._objects.some(function(y){return typeof y.contains=="function"&&y.contains(g,!0)}):!1},complexity:function(){return this._objects.reduce(function(g,v){return g+=v.complexity?v.complexity():0,g},0)}},n.CommonMethods={_setOptions:function(g){for(var v in g)this.set(v,g[v])},_initGradient:function(g,v){g&&g.colorStops&&!(g instanceof n.Gradient)&&this.set(v,new n.Gradient(g))},_initPattern:function(g,v,y){g&&g.source&&!(g instanceof n.Pattern)?this.set(v,new n.Pattern(g,y)):y&&y()},_setObject:function(g){for(var v in g)this._set(v,g[v])},set:function(g,v){return typeof g=="object"?this._setObject(g):this._set(g,v),this},_set:function(g,v){this[g]=v},toggle:function(g){var v=this.get(g);return typeof v=="boolean"&&this.set(g,!v),this},get:function(g){return this[g]}},function(g){var v=Math.sqrt,y=Math.atan2,m=Math.pow,d=Math.PI/180,f=Math.PI/2;n.util={cos:function(x){if(x===0)return 1;x<0&&(x=-x);var k=x/f;switch(k){case 1:case 3:return 0;case 2:return-1}return Math.cos(x)},sin:function(x){if(x===0)return 0;var k=x/f,P=1;switch(x<0&&(P=-1),k){case 1:return P;case 2:return 0;case 3:return-P}return Math.sin(x)},removeFromArray:function(x,k){var P=x.indexOf(k);return P!==-1&&x.splice(P,1),x},getRandomInt:function(x,k){return Math.floor(Math.random()*(k-x+1))+x},degreesToRadians:function(x){return x*d},radiansToDegrees:function(x){return x/d},rotatePoint:function(x,k,P){var S=new n.Point(x.x-k.x,x.y-k.y),E=n.util.rotateVector(S,P);return new n.Point(E.x,E.y).addEquals(k)},rotateVector:function(x,k){var P=n.util.sin(k),S=n.util.cos(k),E=x.x*S-x.y*P,M=x.x*P+x.y*S;return{x:E,y:M}},createVector:function(x,k){return new n.Point(k.x-x.x,k.y-x.y)},calcAngleBetweenVectors:function(x,k){return Math.acos((x.x*k.x+x.y*k.y)/(Math.hypot(x.x,x.y)*Math.hypot(k.x,k.y)))},getHatVector:function(x){return new n.Point(x.x,x.y).multiply(1/Math.hypot(x.x,x.y))},getBisector:function(x,k,P){var S=n.util.createVector(x,k),E=n.util.createVector(x,P),M=n.util.calcAngleBetweenVectors(S,E),T=n.util.calcAngleBetweenVectors(n.util.rotateVector(S,M),E),D=M*(T===0?1:-1)/2;return{vector:n.util.getHatVector(n.util.rotateVector(S,D)),angle:M}},projectStrokeOnPoints:function(x,k,P){var S=[],E=k.strokeWidth/2,M=k.strokeUniform?new n.Point(1/k.scaleX,1/k.scaleY):new n.Point(1,1),T=function(D){var I=E/Math.hypot(D.x,D.y);return new n.Point(D.x*I*M.x,D.y*I*M.y)};return x.length<=1||x.forEach(function(D,I){var N=new n.Point(D.x,D.y),O,F;I===0?(F=x[I+1],O=P?T(n.util.createVector(F,N)).addEquals(N):x[x.length-1]):I===x.length-1?(O=x[I-1],F=P?T(n.util.createVector(O,N)).addEquals(N):x[0]):(O=x[I-1],F=x[I+1]);var U=n.util.getBisector(N,O,F),Y=U.vector,Q=U.angle,q,ne;if(k.strokeLineJoin==="miter"&&(q=-E/Math.sin(Q/2),ne=new n.Point(Y.x*q*M.x,Y.y*q*M.y),Math.hypot(ne.x,ne.y)/E<=k.strokeMiterLimit)){S.push(N.add(ne)),S.push(N.subtract(ne));return}q=-E*Math.SQRT2,ne=new n.Point(Y.x*q*M.x,Y.y*q*M.y),S.push(N.add(ne)),S.push(N.subtract(ne))}),S},transformPoint:function(x,k,P){return P?new n.Point(k[0]*x.x+k[2]*x.y,k[1]*x.x+k[3]*x.y):new n.Point(k[0]*x.x+k[2]*x.y+k[4],k[1]*x.x+k[3]*x.y+k[5])},makeBoundingBoxFromPoints:function(x,k){if(k)for(var P=0;P<x.length;P++)x[P]=n.util.transformPoint(x[P],k);var S=[x[0].x,x[1].x,x[2].x,x[3].x],E=n.util.array.min(S),M=n.util.array.max(S),T=M-E,D=[x[0].y,x[1].y,x[2].y,x[3].y],I=n.util.array.min(D),N=n.util.array.max(D),O=N-I;return{left:E,top:I,width:T,height:O}},invertTransform:function(x){var k=1/(x[0]*x[3]-x[1]*x[2]),P=[k*x[3],-k*x[1],-k*x[2],k*x[0]],S=n.util.transformPoint({x:x[4],y:x[5]},P,!0);return P[4]=-S.x,P[5]=-S.y,P},toFixed:function(x,k){return parseFloat(Number(x).toFixed(k))},parseUnit:function(x,k){var P=/\D{0,2}$/.exec(x),S=parseFloat(x);switch(k||(k=n.Text.DEFAULT_SVG_FONT_SIZE),P[0]){case"mm":return S*n.DPI/25.4;case"cm":return S*n.DPI/2.54;case"in":return S*n.DPI;case"pt":return S*n.DPI/72;case"pc":return S*n.DPI/72*12;case"em":return S*k;default:return S}},falseFunction:function(){return!1},getKlass:function(x,k){return x=n.util.string.camelize(x.charAt(0).toUpperCase()+x.slice(1)),n.util.resolveNamespace(k)[x]},getSvgAttributes:function(x){var k=["instantiated_by_use","style","id","class"];switch(x){case"linearGradient":k=k.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":k=k.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":k=k.concat(["offset","stop-color","stop-opacity"]);break}return k},resolveNamespace:function(x){if(!x)return n;var k=x.split("."),P=k.length,S,E=g||n.window;for(S=0;S<P;++S)E=E[k[S]];return E},loadImage:function(x,k,P,S){if(!x){k&&k.call(P,x);return}var E=n.util.createImage(),M=function(){k&&k.call(P,E,!1),E=E.onload=E.onerror=null};E.onload=M,E.onerror=function(){n.log("Error loading "+E.src),k&&k.call(P,null,!0),E=E.onload=E.onerror=null},x.indexOf("data")!==0&&S!==void 0&&S!==null&&(E.crossOrigin=S),x.substring(0,14)==="data:image/svg"&&(E.onload=null,n.util.loadImageInDom(E,M)),E.src=x},loadImageInDom:function(x,k){var P=n.document.createElement("div");P.style.width=P.style.height="1px",P.style.left=P.style.top="-100%",P.style.position="absolute",P.appendChild(x),n.document.querySelector("body").appendChild(P),x.onload=function(){k(),P.parentNode.removeChild(P),P=null}},enlivenObjects:function(x,k,P,S){x=x||[];var E=[],M=0,T=x.length;function D(){++M===T&&k&&k(E.filter(function(I){return I}))}if(!T){k&&k(E);return}x.forEach(function(I,N){if(!I||!I.type){D();return}var O=n.util.getKlass(I.type,P);O.fromObject(I,function(F,U){U||(E[N]=F),S&&S(I,F,U),D()})})},enlivenObjectEnlivables:function(x,k,P){var S=n.Object.ENLIVEN_PROPS.filter(function(E){return!!x[E]});n.util.enlivenObjects(S.map(function(E){return x[E]}),function(E){var M={};S.forEach(function(T,D){M[T]=E[D],k&&(k[T]=E[D])}),P&&P(M)})},enlivenPatterns:function(x,k){x=x||[];function P(){++E===M&&k&&k(S)}var S=[],E=0,M=x.length;if(!M){k&&k(S);return}x.forEach(function(T,D){T&&T.source?new n.Pattern(T,function(I){S[D]=I,P()}):(S[D]=T,P())})},groupSVGElements:function(x,k,P){var S;return x&&x.length===1?(typeof P<"u"&&(x[0].sourcePath=P),x[0]):(k&&(k.width&&k.height?k.centerPoint={x:k.width/2,y:k.height/2}:(delete k.width,delete k.height)),S=new n.Group(x,k),typeof P<"u"&&(S.sourcePath=P),S)},populateWithProperties:function(x,k,P){if(P&&Array.isArray(P))for(var S=0,E=P.length;S<E;S++)P[S]in x&&(k[P[S]]=x[P[S]])},createCanvasElement:function(){return n.document.createElement("canvas")},copyCanvasElement:function(x){var k=n.util.createCanvasElement();return k.width=x.width,k.height=x.height,k.getContext("2d").drawImage(x,0,0),k},toDataURL:function(x,k,P){return x.toDataURL("image/"+k,P)},createImage:function(){return n.document.createElement("img")},multiplyTransformMatrices:function(x,k,P){return[x[0]*k[0]+x[2]*k[1],x[1]*k[0]+x[3]*k[1],x[0]*k[2]+x[2]*k[3],x[1]*k[2]+x[3]*k[3],P?0:x[0]*k[4]+x[2]*k[5]+x[4],P?0:x[1]*k[4]+x[3]*k[5]+x[5]]},qrDecompose:function(x){var k=y(x[1],x[0]),P=m(x[0],2)+m(x[1],2),S=v(P),E=(x[0]*x[3]-x[2]*x[1])/S,M=y(x[0]*x[2]+x[1]*x[3],P);return{angle:k/d,scaleX:S,scaleY:E,skewX:M/d,skewY:0,translateX:x[4],translateY:x[5]}},calcRotateMatrix:function(x){if(!x.angle)return n.iMatrix.concat();var k=n.util.degreesToRadians(x.angle),P=n.util.cos(k),S=n.util.sin(k);return[P,S,-S,P,0,0]},calcDimensionsMatrix:function(x){var k=typeof x.scaleX>"u"?1:x.scaleX,P=typeof x.scaleY>"u"?1:x.scaleY,S=[x.flipX?-k:k,0,0,x.flipY?-P:P,0,0],E=n.util.multiplyTransformMatrices,M=n.util.degreesToRadians;return x.skewX&&(S=E(S,[1,0,Math.tan(M(x.skewX)),1],!0)),x.skewY&&(S=E(S,[1,Math.tan(M(x.skewY)),0,1],!0)),S},composeMatrix:function(x){var k=[1,0,0,1,x.translateX||0,x.translateY||0],P=n.util.multiplyTransformMatrices;return x.angle&&(k=P(k,n.util.calcRotateMatrix(x))),(x.scaleX!==1||x.scaleY!==1||x.skewX||x.skewY||x.flipX||x.flipY)&&(k=P(k,n.util.calcDimensionsMatrix(x))),k},resetObjectTransform:function(x){x.scaleX=1,x.scaleY=1,x.skewX=0,x.skewY=0,x.flipX=!1,x.flipY=!1,x.rotate(0)},saveObjectTransform:function(x){return{scaleX:x.scaleX,scaleY:x.scaleY,skewX:x.skewX,skewY:x.skewY,angle:x.angle,left:x.left,flipX:x.flipX,flipY:x.flipY,top:x.top}},isTransparent:function(x,k,P,S){S>0&&(k>S?k-=S:k=0,P>S?P-=S:P=0);var E=!0,M,T,D=x.getImageData(k,P,S*2||1,S*2||1),I=D.data.length;for(M=3;M<I&&(T=D.data[M],E=T<=0,E!==!1);M+=4);return D=null,E},parsePreserveAspectRatioAttribute:function(x){var k="meet",P="Mid",S="Mid",E=x.split(" "),M;return E&&E.length&&(k=E.pop(),k!=="meet"&&k!=="slice"?(M=k,k="meet"):E.length&&(M=E.pop())),P=M!=="none"?M.slice(1,4):"none",S=M!=="none"?M.slice(5,8):"none",{meetOrSlice:k,alignX:P,alignY:S}},clearFabricFontCache:function(x){x=(x||"").toLowerCase(),x?n.charWidthsCache[x]&&delete n.charWidthsCache[x]:n.charWidthsCache={}},limitDimsByArea:function(x,k){var P=Math.sqrt(k*x),S=Math.floor(k/P);return{x:Math.floor(P),y:S}},capValue:function(x,k,P){return Math.max(x,Math.min(k,P))},findScaleToFit:function(x,k){return Math.min(k.width/x.width,k.height/x.height)},findScaleToCover:function(x,k){return Math.max(k.width/x.width,k.height/x.height)},matrixToSVG:function(x){return"matrix("+x.map(function(k){return n.util.toFixed(k,n.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(x,k){var P=n.util.invertTransform(k),S=n.util.multiplyTransformMatrices(P,x.calcOwnMatrix());n.util.applyTransformToObject(x,S)},addTransformToObject:function(x,k){n.util.applyTransformToObject(x,n.util.multiplyTransformMatrices(k,x.calcOwnMatrix()))},applyTransformToObject:function(x,k){var P=n.util.qrDecompose(k),S=new n.Point(P.translateX,P.translateY);x.flipX=!1,x.flipY=!1,x.set("scaleX",P.scaleX),x.set("scaleY",P.scaleY),x.skewX=P.skewX,x.skewY=P.skewY,x.angle=P.angle,x.setPositionByOrigin(S,"center","center")},sizeAfterTransform:function(x,k,P){var S=x/2,E=k/2,M=[{x:-S,y:-E},{x:S,y:-E},{x:-S,y:E},{x:S,y:E}],T=n.util.calcDimensionsMatrix(P),D=n.util.makeBoundingBoxFromPoints(M,T);return{x:D.width,y:D.height}},mergeClipPaths:function(x,k){var P=x,S=k;P.inverted&&!S.inverted&&(P=k,S=x),n.util.applyTransformToObject(S,n.util.multiplyTransformMatrices(n.util.invertTransform(P.calcTransformMatrix()),S.calcTransformMatrix()));var E=P.inverted&&S.inverted;return E&&(P.inverted=S.inverted=!1),new n.Group([P],{clipPath:S,inverted:E})},hasStyleChanged:function(x,k,P){return P=P||!1,x.fill!==k.fill||x.stroke!==k.stroke||x.strokeWidth!==k.strokeWidth||x.fontSize!==k.fontSize||x.fontFamily!==k.fontFamily||x.fontWeight!==k.fontWeight||x.fontStyle!==k.fontStyle||x.textBackgroundColor!==k.textBackgroundColor||x.deltaY!==k.deltaY||P&&(x.overline!==k.overline||x.underline!==k.underline||x.linethrough!==k.linethrough)},stylesToArray:function(P,k){for(var P=n.util.object.clone(P,!0),S=k.split(`
`),E=-1,M={},T=[],D=0;D<S.length;D++){if(!P[D]){E+=S[D].length;continue}for(var I=0;I<S[D].length;I++){E++;var N=P[D][I];if(N&&Object.keys(N).length>0){var O=n.util.hasStyleChanged(M,N,!0);O?T.push({start:E,end:E+1,style:N}):T[T.length-1].end++}M=N||{}}}return T},stylesFromArray:function(x,k){if(!Array.isArray(x))return x;for(var P=k.split(`
`),S=-1,E=0,M={},T=0;T<P.length;T++)for(var D=0;D<P[T].length;D++)S++,x[E]&&x[E].start<=S&&S<x[E].end&&(M[T]=M[T]||{},M[T][D]=Object.assign({},x[E].style),S===x[E].end-1&&E++);return M}}}(e),function(){var g=Array.prototype.join,v={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},y={m:"l",M:"L"};function m(W,te,le,oe,Ee,Ae,ve,ke,Ce,Pe,Me){var Le=n.util.cos(W),Te=n.util.sin(W),ye=n.util.cos(te),_e=n.util.sin(te),we=le*Ee*ye-oe*Ae*_e+ve,Se=oe*Ee*ye+le*Ae*_e+ke,$e=Pe+Ce*(-le*Ee*Te-oe*Ae*Le),Be=Me+Ce*(-oe*Ee*Te+le*Ae*Le),Oe=we+Ce*(le*Ee*_e+oe*Ae*ye),Ge=Se+Ce*(oe*Ee*_e-le*Ae*ye);return["C",$e,Be,Oe,Ge,we,Se]}function d(W,te,le,oe,Ee,Ae,ve){var ke=Math.PI,Ce=ve*ke/180,Pe=n.util.sin(Ce),Me=n.util.cos(Ce),Le=0,Te=0;le=Math.abs(le),oe=Math.abs(oe);var ye=-Me*W*.5-Pe*te*.5,_e=-Me*te*.5+Pe*W*.5,we=le*le,Se=oe*oe,$e=_e*_e,Be=ye*ye,Oe=we*Se-we*$e-Se*Be,Ge=0;if(Oe<0){var Ie=Math.sqrt(1-Oe/(we*Se));le*=Ie,oe*=Ie}else Ge=(Ee===Ae?-1:1)*Math.sqrt(Oe/(we*$e+Se*Be));var je=Ge*le*_e/oe,qe=-Ge*oe*ye/le,Ue=Me*je-Pe*qe+W*.5,Je=Pe*je+Me*qe+te*.5,et=f(1,0,(ye-je)/le,(_e-qe)/oe),nt=f((ye-je)/le,(_e-qe)/oe,(-ye-je)/le,(-_e-qe)/oe);Ae===0&&nt>0?nt-=2*ke:Ae===1&&nt<0&&(nt+=2*ke);for(var st=Math.ceil(Math.abs(nt/ke*2)),gt=[],_t=nt/st,wt=8/3*Math.sin(_t/4)*Math.sin(_t/4)/Math.sin(_t/2),He=et+_t,Ve=0;Ve<st;Ve++)gt[Ve]=m(et,He,Me,Pe,le,oe,Ue,Je,wt,Le,Te),Le=gt[Ve][5],Te=gt[Ve][6],et=He,He+=_t;return gt}function f(W,te,le,oe){var Ee=Math.atan2(te,W),Ae=Math.atan2(oe,le);return Ae>=Ee?Ae-Ee:2*Math.PI-(Ee-Ae)}function x(W,te,le,oe,Ee,Ae,ve,ke){var Ce;if(n.cachesBoundsOfCurve&&(Ce=g.call(arguments),n.boundsOfCurveCache[Ce]))return n.boundsOfCurveCache[Ce];var Pe=Math.sqrt,Me=Math.min,Le=Math.max,Te=Math.abs,ye=[],_e=[[],[]],we,Se,$e,Be,Oe,Ge,Ie,je;Se=6*W-12*le+6*Ee,we=-3*W+9*le-9*Ee+3*ve,$e=3*le-3*W;for(var qe=0;qe<2;++qe){if(qe>0&&(Se=6*te-12*oe+6*Ae,we=-3*te+9*oe-9*Ae+3*ke,$e=3*oe-3*te),Te(we)<1e-12){if(Te(Se)<1e-12)continue;Be=-$e/Se,0<Be&&Be<1&&ye.push(Be);continue}Ie=Se*Se-4*$e*we,!(Ie<0)&&(je=Pe(Ie),Oe=(-Se+je)/(2*we),0<Oe&&Oe<1&&ye.push(Oe),Ge=(-Se-je)/(2*we),0<Ge&&Ge<1&&ye.push(Ge))}for(var Ue,Je,et=ye.length,nt=et,st;et--;)Be=ye[et],st=1-Be,Ue=st*st*st*W+3*st*st*Be*le+3*st*Be*Be*Ee+Be*Be*Be*ve,_e[0][et]=Ue,Je=st*st*st*te+3*st*st*Be*oe+3*st*Be*Be*Ae+Be*Be*Be*ke,_e[1][et]=Je;_e[0][nt]=W,_e[1][nt]=te,_e[0][nt+1]=ve,_e[1][nt+1]=ke;var gt=[{x:Me.apply(null,_e[0]),y:Me.apply(null,_e[1])},{x:Le.apply(null,_e[0]),y:Le.apply(null,_e[1])}];return n.cachesBoundsOfCurve&&(n.boundsOfCurveCache[Ce]=gt),gt}function k(W,te,le){for(var oe=le[1],Ee=le[2],Ae=le[3],ve=le[4],ke=le[5],Ce=le[6],Pe=le[7],Me=d(Ce-W,Pe-te,oe,Ee,ve,ke,Ae),Le=0,Te=Me.length;Le<Te;Le++)Me[Le][1]+=W,Me[Le][2]+=te,Me[Le][3]+=W,Me[Le][4]+=te,Me[Le][5]+=W,Me[Le][6]+=te;return Me}function P(W){var te=0,le=0,oe=W.length,Ee=0,Ae=0,ve,ke,Ce,Pe=[],Me,Le,Te;for(ke=0;ke<oe;++ke){switch(Ce=!1,ve=W[ke].slice(0),ve[0]){case"l":ve[0]="L",ve[1]+=te,ve[2]+=le;case"L":te=ve[1],le=ve[2];break;case"h":ve[1]+=te;case"H":ve[0]="L",ve[2]=le,te=ve[1];break;case"v":ve[1]+=le;case"V":ve[0]="L",le=ve[1],ve[1]=te,ve[2]=le;break;case"m":ve[0]="M",ve[1]+=te,ve[2]+=le;case"M":te=ve[1],le=ve[2],Ee=ve[1],Ae=ve[2];break;case"c":ve[0]="C",ve[1]+=te,ve[2]+=le,ve[3]+=te,ve[4]+=le,ve[5]+=te,ve[6]+=le;case"C":Le=ve[3],Te=ve[4],te=ve[5],le=ve[6];break;case"s":ve[0]="S",ve[1]+=te,ve[2]+=le,ve[3]+=te,ve[4]+=le;case"S":Me==="C"?(Le=2*te-Le,Te=2*le-Te):(Le=te,Te=le),te=ve[3],le=ve[4],ve[0]="C",ve[5]=ve[3],ve[6]=ve[4],ve[3]=ve[1],ve[4]=ve[2],ve[1]=Le,ve[2]=Te,Le=ve[3],Te=ve[4];break;case"q":ve[0]="Q",ve[1]+=te,ve[2]+=le,ve[3]+=te,ve[4]+=le;case"Q":Le=ve[1],Te=ve[2],te=ve[3],le=ve[4];break;case"t":ve[0]="T",ve[1]+=te,ve[2]+=le;case"T":Me==="Q"?(Le=2*te-Le,Te=2*le-Te):(Le=te,Te=le),ve[0]="Q",te=ve[1],le=ve[2],ve[1]=Le,ve[2]=Te,ve[3]=te,ve[4]=le;break;case"a":ve[0]="A",ve[6]+=te,ve[7]+=le;case"A":Ce=!0,Pe=Pe.concat(k(te,le,ve)),te=ve[6],le=ve[7];break;case"z":case"Z":te=Ee,le=Ae;break}Ce||Pe.push(ve),Me=ve[0]}return Pe}function S(W,te,le,oe){return Math.sqrt((le-W)*(le-W)+(oe-te)*(oe-te))}function E(W){return W*W*W}function M(W){return 3*W*W*(1-W)}function T(W){return 3*W*(1-W)*(1-W)}function D(W){return(1-W)*(1-W)*(1-W)}function I(W,te,le,oe,Ee,Ae,ve,ke){return function(Ce){var Pe=E(Ce),Me=M(Ce),Le=T(Ce),Te=D(Ce);return{x:ve*Pe+Ee*Me+le*Le+W*Te,y:ke*Pe+Ae*Me+oe*Le+te*Te}}}function N(W,te,le,oe,Ee,Ae,ve,ke){return function(Ce){var Pe=1-Ce,Me=3*Pe*Pe*(le-W)+6*Pe*Ce*(Ee-le)+3*Ce*Ce*(ve-Ee),Le=3*Pe*Pe*(oe-te)+6*Pe*Ce*(Ae-oe)+3*Ce*Ce*(ke-Ae);return Math.atan2(Le,Me)}}function O(W){return W*W}function F(W){return 2*W*(1-W)}function U(W){return(1-W)*(1-W)}function Y(W,te,le,oe,Ee,Ae){return function(ve){var ke=O(ve),Ce=F(ve),Pe=U(ve);return{x:Ee*ke+le*Ce+W*Pe,y:Ae*ke+oe*Ce+te*Pe}}}function Q(W,te,le,oe,Ee,Ae){return function(ve){var ke=1-ve,Ce=2*ke*(le-W)+2*ve*(Ee-le),Pe=2*ke*(oe-te)+2*ve*(Ae-oe);return Math.atan2(Pe,Ce)}}function q(W,te,le){var oe={x:te,y:le},Ee,Ae=0,ve;for(ve=1;ve<=100;ve+=1)Ee=W(ve/100),Ae+=S(oe.x,oe.y,Ee.x,Ee.y),oe=Ee;return Ae}function ne(W,te){for(var le=0,oe=0,Ee=W.iterator,Ae={x:W.x,y:W.y},ve,ke,Ce=.01,Pe=W.angleFinder,Me;oe<te&&Ce>1e-4;)ve=Ee(le),Me=le,ke=S(Ae.x,Ae.y,ve.x,ve.y),ke+oe>te?(le-=Ce,Ce/=2):(Ae=ve,le+=Ce,oe+=ke);return ve.angle=Pe(Me),ve}function J(W){for(var te=0,le=W.length,oe,Ee=0,Ae=0,ve=0,ke=0,Ce=[],Pe,Me,Le,Te=0;Te<le;Te++){switch(oe=W[Te],Me={x:Ee,y:Ae,command:oe[0]},oe[0]){case"M":Me.length=0,ve=Ee=oe[1],ke=Ae=oe[2];break;case"L":Me.length=S(Ee,Ae,oe[1],oe[2]),Ee=oe[1],Ae=oe[2];break;case"C":Pe=I(Ee,Ae,oe[1],oe[2],oe[3],oe[4],oe[5],oe[6]),Le=N(Ee,Ae,oe[1],oe[2],oe[3],oe[4],oe[5],oe[6]),Me.iterator=Pe,Me.angleFinder=Le,Me.length=q(Pe,Ee,Ae),Ee=oe[5],Ae=oe[6];break;case"Q":Pe=Y(Ee,Ae,oe[1],oe[2],oe[3],oe[4]),Le=Q(Ee,Ae,oe[1],oe[2],oe[3],oe[4]),Me.iterator=Pe,Me.angleFinder=Le,Me.length=q(Pe,Ee,Ae),Ee=oe[3],Ae=oe[4];break;case"Z":case"z":Me.destX=ve,Me.destY=ke,Me.length=S(Ee,Ae,ve,ke),Ee=ve,Ae=ke;break}te+=Me.length,Ce.push(Me)}return Ce.push({length:te,x:Ee,y:Ae}),Ce}function re(W,te,le){le||(le=J(W));for(var oe=0;te-le[oe].length>0&&oe<le.length-2;)te-=le[oe].length,oe++;var Ee=le[oe],Ae=te/Ee.length,ve=Ee.command,ke=W[oe],Ce;switch(ve){case"M":return{x:Ee.x,y:Ee.y,angle:0};case"Z":case"z":return Ce=new n.Point(Ee.x,Ee.y).lerp(new n.Point(Ee.destX,Ee.destY),Ae),Ce.angle=Math.atan2(Ee.destY-Ee.y,Ee.destX-Ee.x),Ce;case"L":return Ce=new n.Point(Ee.x,Ee.y).lerp(new n.Point(ke[1],ke[2]),Ae),Ce.angle=Math.atan2(ke[2]-Ee.y,ke[1]-Ee.x),Ce;case"C":return ne(Ee,te);case"Q":return ne(Ee,te)}}function X(W){var te=[],le=[],oe,Ee,Ae=n.rePathCommand,ve="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",ke="("+ve+")"+n.commaWsp,Ce="([01])"+n.commaWsp+"?",Pe=ke+"?"+ke+"?"+ke+Ce+Ce+ke+"?("+ve+")",Me=new RegExp(Pe,"g"),Le,Te,ye;if(!W||!W.match)return te;ye=W.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var _e=0,we,Se=ye.length;_e<Se;_e++){oe=ye[_e],Te=oe.slice(1).trim(),le.length=0;var $e=oe.charAt(0);if(we=[$e],$e.toLowerCase()==="a")for(var Be;Be=Me.exec(Te);)for(var Oe=1;Oe<Be.length;Oe++)le.push(Be[Oe]);else for(;Le=Ae.exec(Te);)le.push(Le[0]);for(var Oe=0,Ge=le.length;Oe<Ge;Oe++)Ee=parseFloat(le[Oe]),isNaN(Ee)||we.push(Ee);var Ie=v[$e.toLowerCase()],je=y[$e]||$e;if(we.length-1>Ie)for(var qe=1,Ue=we.length;qe<Ue;qe+=Ie)te.push([$e].concat(we.slice(qe,qe+Ie))),$e=je;else te.push(we)}return te}function j(W,te){var le=[],oe,Ee=new n.Point(W[0].x,W[0].y),Ae=new n.Point(W[1].x,W[1].y),ve=W.length,ke=1,Ce=0,Pe=ve>2;for(te=te||0,Pe&&(ke=W[2].x<Ae.x?-1:W[2].x===Ae.x?0:1,Ce=W[2].y<Ae.y?-1:W[2].y===Ae.y?0:1),le.push(["M",Ee.x-ke*te,Ee.y-Ce*te]),oe=1;oe<ve;oe++){if(!Ee.eq(Ae)){var Me=Ee.midPointFrom(Ae);le.push(["Q",Ee.x,Ee.y,Me.x,Me.y])}Ee=W[oe],oe+1<W.length&&(Ae=W[oe+1])}return Pe&&(ke=Ee.x>W[oe-2].x?1:Ee.x===W[oe-2].x?0:-1,Ce=Ee.y>W[oe-2].y?1:Ee.y===W[oe-2].y?0:-1),le.push(["L",Ee.x+ke*te,Ee.y+Ce*te]),le}function Z(W,te,le){return le&&(te=n.util.multiplyTransformMatrices(te,[1,0,0,1,-le.x,-le.y])),W.map(function(oe){for(var Ee=oe.slice(0),Ae={},ve=1;ve<oe.length-1;ve+=2)Ae.x=oe[ve],Ae.y=oe[ve+1],Ae=n.util.transformPoint(Ae,te),Ee[ve]=Ae.x,Ee[ve+1]=Ae.y;return Ee})}n.util.joinPath=function(W){return W.map(function(te){return te.join(" ")}).join(" ")},n.util.parsePath=X,n.util.makePathSimpler=P,n.util.getSmoothPathFromPoints=j,n.util.getPathSegmentsInfo=J,n.util.getBoundsOfCurve=x,n.util.getPointOnPath=re,n.util.transformPath=Z}(),function(){var g=Array.prototype.slice;function v(x,k){for(var P=g.call(arguments,2),S=[],E=0,M=x.length;E<M;E++)S[E]=P.length?x[E][k].apply(x[E],P):x[E][k].call(x[E]);return S}function y(x,k){return f(x,k,function(P,S){return P>=S})}function m(x,k){return f(x,k,function(P,S){return P<S})}function d(x,k){for(var P=x.length;P--;)x[P]=k;return x}function f(x,k,P){if(!(!x||x.length===0)){var S=x.length-1,E=k?x[S][k]:x[S];if(k)for(;S--;)P(x[S][k],E)&&(E=x[S][k]);else for(;S--;)P(x[S],E)&&(E=x[S]);return E}}n.util.array={fill:d,invoke:v,min:m,max:y}}(),function(){function g(y,m,d){if(d)if(!n.isLikelyNode&&m instanceof Element)y=m;else if(m instanceof Array){y=[];for(var f=0,x=m.length;f<x;f++)y[f]=g({},m[f],d)}else if(m&&typeof m=="object")for(var k in m)k==="canvas"||k==="group"?y[k]=null:m.hasOwnProperty(k)&&(y[k]=g({},m[k],d));else y=m;else for(var k in m)y[k]=m[k];return y}function v(y,m){return g({},y,m)}n.util.object={extend:g,clone:v},n.util.object.extend(n.util,n.Observable)}(),function(){function g(f){return f.replace(/-+(.)?/g,function(x,k){return k?k.toUpperCase():""})}function v(f,x){return f.charAt(0).toUpperCase()+(x?f.slice(1):f.slice(1).toLowerCase())}function y(f){return f.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(f){var x=0,k,P=[];for(x=0,k;x<f.length;x++)(k=d(f,x))!==!1&&P.push(k);return P}function d(f,x){var k=f.charCodeAt(x);if(isNaN(k))return"";if(k<55296||k>57343)return f.charAt(x);if(55296<=k&&k<=56319){if(f.length<=x+1)throw"High surrogate without following low surrogate";var P=f.charCodeAt(x+1);if(56320>P||P>57343)throw"High surrogate without following low surrogate";return f.charAt(x)+f.charAt(x+1)}if(x===0)throw"Low surrogate without preceding high surrogate";var S=f.charCodeAt(x-1);if(55296>S||S>56319)throw"Low surrogate without preceding high surrogate";return!1}n.util.string={camelize:g,capitalize:v,escapeXml:y,graphemeSplit:m}}(),function(){var g=Array.prototype.slice,v=function(){},y=function(){for(var k in{toString:1})if(k==="toString")return!1;return!0}(),m=function(k,P,S){for(var E in P)E in k.prototype&&typeof k.prototype[E]=="function"&&(P[E]+"").indexOf("callSuper")>-1?k.prototype[E]=function(M){return function(){var T=this.constructor.superclass;this.constructor.superclass=S;var D=P[M].apply(this,arguments);if(this.constructor.superclass=T,M!=="initialize")return D}}(E):k.prototype[E]=P[E],y&&(P.toString!==Object.prototype.toString&&(k.prototype.toString=P.toString),P.valueOf!==Object.prototype.valueOf&&(k.prototype.valueOf=P.valueOf))};function d(){}function f(k){for(var P=null,S=this;S.constructor.superclass;){var E=S.constructor.superclass.prototype[k];if(S[k]!==E){P=E;break}S=S.constructor.superclass.prototype}return P?arguments.length>1?P.apply(this,g.call(arguments,1)):P.call(this):console.log("tried to callSuper "+k+", method not found in prototype chain",this)}function x(){var k=null,P=g.call(arguments,0);typeof P[0]=="function"&&(k=P.shift());function S(){this.initialize.apply(this,arguments)}S.superclass=k,S.subclasses=[],k&&(d.prototype=k.prototype,S.prototype=new d,k.subclasses.push(S));for(var E=0,M=P.length;E<M;E++)m(S,P[E],k);return S.prototype.initialize||(S.prototype.initialize=v),S.prototype.constructor=S,S.prototype.callSuper=f,S}n.util.createClass=x}(),function(){var g=!!n.document.createElement("div").attachEvent,v=["touchstart","touchmove","touchend"];n.util.addListener=function(m,d,f,x){m&&m.addEventListener(d,f,g?!1:x)},n.util.removeListener=function(m,d,f,x){m&&m.removeEventListener(d,f,g?!1:x)};function y(m){var d=m.changedTouches;return d&&d[0]?d[0]:m}n.util.getPointer=function(m){var d=m.target,f=n.util.getScrollLeftTop(d),x=y(m);return{x:x.clientX+f.left,y:x.clientY+f.top}},n.util.isTouchEvent=function(m){return v.indexOf(m.type)>-1||m.pointerType==="touch"}}(),function(){function g(x,k){var P=x.style;if(!P)return x;if(typeof k=="string")return x.style.cssText+=";"+k,k.indexOf("opacity")>-1?f(x,k.match(/opacity:\s*(\d?\.?\d*)/)[1]):x;for(var S in k)if(S==="opacity")f(x,k[S]);else{var E=S==="float"||S==="cssFloat"?typeof P.styleFloat>"u"?"cssFloat":"styleFloat":S;P.setProperty(E,k[S])}return x}var v=n.document.createElement("div"),y=typeof v.style.opacity=="string",m=typeof v.style.filter=="string",d=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,f=function(x){return x};y?f=function(x,k){return x.style.opacity=k,x}:m&&(f=function(x,k){var P=x.style;return x.currentStyle&&!x.currentStyle.hasLayout&&(P.zoom=1),d.test(P.filter)?(k=k>=.9999?"":"alpha(opacity="+k*100+")",P.filter=P.filter.replace(d,k)):P.filter+=" alpha(opacity="+k*100+")",x}),n.util.setStyle=g}(),function(){var g=Array.prototype.slice;function v(D){return typeof D=="string"?n.document.getElementById(D):D}var y,m=function(D){return g.call(D,0)};try{y=m(n.document.childNodes)instanceof Array}catch{}y||(m=function(D){for(var I=new Array(D.length),N=D.length;N--;)I[N]=D[N];return I});function d(D,I){var N=n.document.createElement(D);for(var O in I)O==="class"?N.className=I[O]:O==="for"?N.htmlFor=I[O]:N.setAttribute(O,I[O]);return N}function f(D,I){D&&(" "+D.className+" ").indexOf(" "+I+" ")===-1&&(D.className+=(D.className?" ":"")+I)}function x(D,I,N){return typeof I=="string"&&(I=d(I,N)),D.parentNode&&D.parentNode.replaceChild(I,D),I.appendChild(D),I}function k(D){for(var I=0,N=0,O=n.document.documentElement,F=n.document.body||{scrollLeft:0,scrollTop:0};D&&(D.parentNode||D.host)&&(D=D.parentNode||D.host,D===n.document?(I=F.scrollLeft||O.scrollLeft||0,N=F.scrollTop||O.scrollTop||0):(I+=D.scrollLeft||0,N+=D.scrollTop||0),!(D.nodeType===1&&D.style.position==="fixed")););return{left:I,top:N}}function P(D){var I,N=D&&D.ownerDocument,O={left:0,top:0},F={left:0,top:0},U,Y={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!N)return F;for(var Q in Y)F[Y[Q]]+=parseInt(S(D,Q),10)||0;return I=N.documentElement,typeof D.getBoundingClientRect<"u"&&(O=D.getBoundingClientRect()),U=k(D),{left:O.left+U.left-(I.clientLeft||0)+F.left,top:O.top+U.top-(I.clientTop||0)+F.top}}var S;n.document.defaultView&&n.document.defaultView.getComputedStyle?S=function(D,I){var N=n.document.defaultView.getComputedStyle(D,null);return N?N[I]:void 0}:S=function(D,I){var N=D.style[I];return!N&&D.currentStyle&&(N=D.currentStyle[I]),N},function(){var D=n.document.documentElement.style,I="userSelect"in D?"userSelect":"MozUserSelect"in D?"MozUserSelect":"WebkitUserSelect"in D?"WebkitUserSelect":"KhtmlUserSelect"in D?"KhtmlUserSelect":"";function N(F){return typeof F.onselectstart<"u"&&(F.onselectstart=n.util.falseFunction),I?F.style[I]="none":typeof F.unselectable=="string"&&(F.unselectable="on"),F}function O(F){return typeof F.onselectstart<"u"&&(F.onselectstart=null),I?F.style[I]="":typeof F.unselectable=="string"&&(F.unselectable=""),F}n.util.makeElementUnselectable=N,n.util.makeElementSelectable=O}();function E(D){var I=n.jsdomImplForWrapper(D);return I._canvas||I._image}function M(D){if(!!n.isLikelyNode){var I=n.jsdomImplForWrapper(D);I&&(I._image=null,I._canvas=null,I._currentSrc=null,I._attributes=null,I._classList=null)}}function T(D,I){D.imageSmoothingEnabled=D.imageSmoothingEnabled||D.webkitImageSmoothingEnabled||D.mozImageSmoothingEnabled||D.msImageSmoothingEnabled||D.oImageSmoothingEnabled,D.imageSmoothingEnabled=I}n.util.setImageSmoothing=T,n.util.getById=v,n.util.toArray=m,n.util.addClass=f,n.util.makeElement=d,n.util.wrapElement=x,n.util.getScrollLeftTop=k,n.util.getElementOffset=P,n.util.getNodeCanvas=E,n.util.cleanUpJsdomNode=M}(),function(){function g(m,d){return m+(/\?/.test(m)?"&":"?")+d}function v(){}function y(m,d){d||(d={});var f=d.method?d.method.toUpperCase():"GET",x=d.onComplete||function(){},k=new n.window.XMLHttpRequest,P=d.body||d.parameters;return k.onreadystatechange=function(){k.readyState===4&&(x(k),k.onreadystatechange=v)},f==="GET"&&(P=null,typeof d.parameters=="string"&&(m=g(m,d.parameters))),k.open(f,m,!0),(f==="POST"||f==="PUT")&&k.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),k.send(P),k}n.util.request=y}(),n.log=console.log,n.warn=console.warn,function(){var g=n.util.object.extend,v=n.util.object.clone,y=[];n.util.object.extend(y,{cancelAll:function(){var E=this.splice(0);return E.forEach(function(M){M.cancel()}),E},cancelByCanvas:function(E){if(!E)return[];var M=this.filter(function(T){return typeof T.target=="object"&&T.target.canvas===E});return M.forEach(function(T){T.cancel()}),M},cancelByTarget:function(E){var M=this.findAnimationsByTarget(E);return M.forEach(function(T){T.cancel()}),M},findAnimationIndex:function(E){return this.indexOf(this.findAnimation(E))},findAnimation:function(E){return this.find(function(M){return M.cancel===E})},findAnimationsByTarget:function(E){return E?this.filter(function(M){return M.target===E}):[]}});function m(){return!1}function d(E,M,T,D){return-T*Math.cos(E/D*(Math.PI/2))+T+M}function f(E){E||(E={});var M=!1,T,D=function(){var I=n.runningAnimations.indexOf(T);return I>-1&&n.runningAnimations.splice(I,1)[0]};return T=g(v(E),{cancel:function(){return M=!0,D()},currentValue:"startValue"in E?E.startValue:0,completionRate:0,durationRate:0}),n.runningAnimations.push(T),P(function(I){var N=I||+new Date,O=E.duration||500,F=N+O,U,Y=E.onChange||m,Q=E.abort||m,q=E.onComplete||m,ne=E.easing||d,J="startValue"in E?E.startValue.length>0:!1,re="startValue"in E?E.startValue:0,X="endValue"in E?E.endValue:100,j=E.byValue||(J?re.map(function(Z,W){return X[W]-re[W]}):X-re);E.onStart&&E.onStart(),function Z(W){U=W||+new Date;var te=U>F?O:U-N,le=te/O,oe=J?re.map(function(Ae,ve){return ne(te,re[ve],j[ve],O)}):ne(te,re,j,O),Ee=Math.abs(J?(oe[0]-re[0])/j[0]:(oe-re)/j);if(T.currentValue=J?oe.slice():oe,T.completionRate=Ee,T.durationRate=le,!M){if(Q(oe,Ee,le)){D();return}if(U>F){T.currentValue=J?X.slice():X,T.completionRate=1,T.durationRate=1,Y(J?X.slice():X,1,1),q(X,1,1),D();return}else Y(oe,Ee,le),P(Z)}}(N)}),T.cancel}var x=n.window.requestAnimationFrame||n.window.webkitRequestAnimationFrame||n.window.mozRequestAnimationFrame||n.window.oRequestAnimationFrame||n.window.msRequestAnimationFrame||function(E){return n.window.setTimeout(E,1e3/60)},k=n.window.cancelAnimationFrame||n.window.clearTimeout;function P(){return x.apply(n.window,arguments)}function S(){return k.apply(n.window,arguments)}n.util.animate=f,n.util.requestAnimFrame=P,n.util.cancelAnimFrame=S,n.runningAnimations=y}(),function(){function g(y,m,d){var f="rgba("+parseInt(y[0]+d*(m[0]-y[0]),10)+","+parseInt(y[1]+d*(m[1]-y[1]),10)+","+parseInt(y[2]+d*(m[2]-y[2]),10);return f+=","+(y&&m?parseFloat(y[3]+d*(m[3]-y[3])):1),f+=")",f}function v(y,m,d,f){var x=new n.Color(y).getSource(),k=new n.Color(m).getSource(),P=f.onComplete,S=f.onChange;return f=f||{},n.util.animate(n.util.object.extend(f,{duration:d||500,startValue:x,endValue:k,byValue:k,easing:function(E,M,T,D){var I=f.colorEasing?f.colorEasing(E,D):1-Math.cos(E/D*(Math.PI/2));return g(M,T,I)},onComplete:function(E,M,T){if(P)return P(g(k,k,0),M,T)},onChange:function(E,M,T){if(S){if(Array.isArray(E))return S(g(E,E,0),M,T);S(E,M,T)}}}))}n.util.animateColor=v}(),function(){function g(W,te,le,oe){return W<Math.abs(te)?(W=te,oe=le/4):te===0&&W===0?oe=le/(2*Math.PI)*Math.asin(1):oe=le/(2*Math.PI)*Math.asin(te/W),{a:W,c:te,p:le,s:oe}}function v(W,te,le){return W.a*Math.pow(2,10*(te-=1))*Math.sin((te*le-W.s)*(2*Math.PI)/W.p)}function y(W,te,le,oe){return le*((W=W/oe-1)*W*W+1)+te}function m(W,te,le,oe){return W/=oe/2,W<1?le/2*W*W*W+te:le/2*((W-=2)*W*W+2)+te}function d(W,te,le,oe){return le*(W/=oe)*W*W*W+te}function f(W,te,le,oe){return-le*((W=W/oe-1)*W*W*W-1)+te}function x(W,te,le,oe){return W/=oe/2,W<1?le/2*W*W*W*W+te:-le/2*((W-=2)*W*W*W-2)+te}function k(W,te,le,oe){return le*(W/=oe)*W*W*W*W+te}function P(W,te,le,oe){return le*((W=W/oe-1)*W*W*W*W+1)+te}function S(W,te,le,oe){return W/=oe/2,W<1?le/2*W*W*W*W*W+te:le/2*((W-=2)*W*W*W*W+2)+te}function E(W,te,le,oe){return-le*Math.cos(W/oe*(Math.PI/2))+le+te}function M(W,te,le,oe){return le*Math.sin(W/oe*(Math.PI/2))+te}function T(W,te,le,oe){return-le/2*(Math.cos(Math.PI*W/oe)-1)+te}function D(W,te,le,oe){return W===0?te:le*Math.pow(2,10*(W/oe-1))+te}function I(W,te,le,oe){return W===oe?te+le:le*(-Math.pow(2,-10*W/oe)+1)+te}function N(W,te,le,oe){return W===0?te:W===oe?te+le:(W/=oe/2,W<1?le/2*Math.pow(2,10*(W-1))+te:le/2*(-Math.pow(2,-10*--W)+2)+te)}function O(W,te,le,oe){return-le*(Math.sqrt(1-(W/=oe)*W)-1)+te}function F(W,te,le,oe){return le*Math.sqrt(1-(W=W/oe-1)*W)+te}function U(W,te,le,oe){return W/=oe/2,W<1?-le/2*(Math.sqrt(1-W*W)-1)+te:le/2*(Math.sqrt(1-(W-=2)*W)+1)+te}function Y(W,te,le,oe){var Ee=1.70158,Ae=0,ve=le;if(W===0)return te;if(W/=oe,W===1)return te+le;Ae||(Ae=oe*.3);var ke=g(ve,le,Ae,Ee);return-v(ke,W,oe)+te}function Q(W,te,le,oe){var Ee=1.70158,Ae=0,ve=le;if(W===0)return te;if(W/=oe,W===1)return te+le;Ae||(Ae=oe*.3);var ke=g(ve,le,Ae,Ee);return ke.a*Math.pow(2,-10*W)*Math.sin((W*oe-ke.s)*(2*Math.PI)/ke.p)+ke.c+te}function q(W,te,le,oe){var Ee=1.70158,Ae=0,ve=le;if(W===0)return te;if(W/=oe/2,W===2)return te+le;Ae||(Ae=oe*(.3*1.5));var ke=g(ve,le,Ae,Ee);return W<1?-.5*v(ke,W,oe)+te:ke.a*Math.pow(2,-10*(W-=1))*Math.sin((W*oe-ke.s)*(2*Math.PI)/ke.p)*.5+ke.c+te}function ne(W,te,le,oe,Ee){return Ee===void 0&&(Ee=1.70158),le*(W/=oe)*W*((Ee+1)*W-Ee)+te}function J(W,te,le,oe,Ee){return Ee===void 0&&(Ee=1.70158),le*((W=W/oe-1)*W*((Ee+1)*W+Ee)+1)+te}function re(W,te,le,oe,Ee){return Ee===void 0&&(Ee=1.70158),W/=oe/2,W<1?le/2*(W*W*(((Ee*=1.525)+1)*W-Ee))+te:le/2*((W-=2)*W*(((Ee*=1.525)+1)*W+Ee)+2)+te}function X(W,te,le,oe){return le-j(oe-W,0,le,oe)+te}function j(W,te,le,oe){return(W/=oe)<1/2.75?le*(7.5625*W*W)+te:W<2/2.75?le*(7.5625*(W-=1.5/2.75)*W+.75)+te:W<2.5/2.75?le*(7.5625*(W-=2.25/2.75)*W+.9375)+te:le*(7.5625*(W-=2.625/2.75)*W+.984375)+te}function Z(W,te,le,oe){return W<oe/2?X(W*2,0,le,oe)*.5+te:j(W*2-oe,0,le,oe)*.5+le*.5+te}n.util.ease={easeInQuad:function(W,te,le,oe){return le*(W/=oe)*W+te},easeOutQuad:function(W,te,le,oe){return-le*(W/=oe)*(W-2)+te},easeInOutQuad:function(W,te,le,oe){return W/=oe/2,W<1?le/2*W*W+te:-le/2*(--W*(W-2)-1)+te},easeInCubic:function(W,te,le,oe){return le*(W/=oe)*W*W+te},easeOutCubic:y,easeInOutCubic:m,easeInQuart:d,easeOutQuart:f,easeInOutQuart:x,easeInQuint:k,easeOutQuint:P,easeInOutQuint:S,easeInSine:E,easeOutSine:M,easeInOutSine:T,easeInExpo:D,easeOutExpo:I,easeInOutExpo:N,easeInCirc:O,easeOutCirc:F,easeInOutCirc:U,easeInElastic:Y,easeOutElastic:Q,easeInOutElastic:q,easeInBack:ne,easeOutBack:J,easeInOutBack:re,easeInBounce:X,easeOutBounce:j,easeInOutBounce:Z}}(),function(g){var v=g.fabric||(g.fabric={}),y=v.util.object.extend,m=v.util.object.clone,d=v.util.toFixed,f=v.util.parseUnit,x=v.util.multiplyTransformMatrices,k=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],P=["symbol","image","marker","pattern","view","svg"],S=["pattern","defs","symbol","metadata","clipPath","mask","desc"],E=["symbol","g","a","svg","clipPath","defs"],M={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},T={stroke:"strokeOpacity",fill:"fillOpacity"},D="font-size",I="clip-path";v.svgValidTagNamesRegEx=F(k),v.svgViewBoxElementsRegEx=F(P),v.svgInvalidAncestorsRegEx=F(S),v.svgValidParentsRegEx=F(E),v.cssRules={},v.gradientDefs={},v.clipPaths={};function N(Ae){return Ae in M?M[Ae]:Ae}function O(Ae,ve,ke,Ce){var Pe=Array.isArray(ve),Me;if((Ae==="fill"||Ae==="stroke")&&ve==="none")ve="";else{if(Ae==="strokeUniform")return ve==="non-scaling-stroke";if(Ae==="strokeDashArray")ve==="none"?ve=null:ve=ve.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(Ae==="transformMatrix")ke&&ke.transformMatrix?ve=x(ke.transformMatrix,v.parseTransformAttribute(ve)):ve=v.parseTransformAttribute(ve);else if(Ae==="visible")ve=ve!=="none"&&ve!=="hidden",ke&&ke.visible===!1&&(ve=!1);else if(Ae==="opacity")ve=parseFloat(ve),ke&&typeof ke.opacity<"u"&&(ve*=ke.opacity);else if(Ae==="textAnchor")ve=ve==="start"?"left":ve==="end"?"right":"center";else if(Ae==="charSpacing")Me=f(ve,Ce)/Ce*1e3;else if(Ae==="paintFirst"){var Le=ve.indexOf("fill"),Te=ve.indexOf("stroke"),ve="fill";(Le>-1&&Te>-1&&Te<Le||Le===-1&&Te>-1)&&(ve="stroke")}else{if(Ae==="href"||Ae==="xlink:href"||Ae==="font")return ve;if(Ae==="imageSmoothing")return ve==="optimizeQuality";Me=Pe?ve.map(f):f(ve,Ce)}}return!Pe&&isNaN(Me)?ve:Me}function F(Ae){return new RegExp("^("+Ae.join("|")+")\\b","i")}function U(Ae){for(var ve in T)if(!(typeof Ae[T[ve]]>"u"||Ae[ve]==="")){if(typeof Ae[ve]>"u"){if(!v.Object.prototype[ve])continue;Ae[ve]=v.Object.prototype[ve]}if(Ae[ve].indexOf("url(")!==0){var ke=new v.Color(Ae[ve]);Ae[ve]=ke.setAlpha(d(ke.getAlpha()*Ae[T[ve]],2)).toRgba()}}return Ae}function Y(Ae,ve){var ke,Ce=[],Pe,Me,Le;for(Me=0,Le=ve.length;Me<Le;Me++)ke=ve[Me],Pe=Ae.getElementsByTagName(ke),Ce=Ce.concat(Array.prototype.slice.call(Pe));return Ce}v.parseTransformAttribute=function(){function Ae(qe,Ue){var Je=v.util.cos(Ue[0]),et=v.util.sin(Ue[0]),nt=0,st=0;Ue.length===3&&(nt=Ue[1],st=Ue[2]),qe[0]=Je,qe[1]=et,qe[2]=-et,qe[3]=Je,qe[4]=nt-(Je*nt-et*st),qe[5]=st-(et*nt+Je*st)}function ve(qe,Ue){var Je=Ue[0],et=Ue.length===2?Ue[1]:Ue[0];qe[0]=Je,qe[3]=et}function ke(qe,Ue,Je){qe[Je]=Math.tan(v.util.degreesToRadians(Ue[0]))}function Ce(qe,Ue){qe[4]=Ue[0],Ue.length===2&&(qe[5]=Ue[1])}var Pe=v.iMatrix,Me=v.reNum,Le=v.commaWsp,Te="(?:(skewX)\\s*\\(\\s*("+Me+")\\s*\\))",ye="(?:(skewY)\\s*\\(\\s*("+Me+")\\s*\\))",_e="(?:(rotate)\\s*\\(\\s*("+Me+")(?:"+Le+"("+Me+")"+Le+"("+Me+"))?\\s*\\))",we="(?:(scale)\\s*\\(\\s*("+Me+")(?:"+Le+"("+Me+"))?\\s*\\))",Se="(?:(translate)\\s*\\(\\s*("+Me+")(?:"+Le+"("+Me+"))?\\s*\\))",$e="(?:(matrix)\\s*\\(\\s*("+Me+")"+Le+"("+Me+")"+Le+"("+Me+")"+Le+"("+Me+")"+Le+"("+Me+")"+Le+"("+Me+")\\s*\\))",Be="(?:"+$e+"|"+Se+"|"+we+"|"+_e+"|"+Te+"|"+ye+")",Oe="(?:"+Be+"(?:"+Le+"*"+Be+")*)",Ge="^\\s*(?:"+Oe+"?)\\s*$",Ie=new RegExp(Ge),je=new RegExp(Be,"g");return function(qe){var Ue=Pe.concat(),Je=[];if(!qe||qe&&!Ie.test(qe))return Ue;qe.replace(je,function(nt){var st=new RegExp(Be).exec(nt).filter(function(wt){return!!wt}),gt=st[1],_t=st.slice(2).map(parseFloat);switch(gt){case"translate":Ce(Ue,_t);break;case"rotate":_t[0]=v.util.degreesToRadians(_t[0]),Ae(Ue,_t);break;case"scale":ve(Ue,_t);break;case"skewX":ke(Ue,_t,2);break;case"skewY":ke(Ue,_t,1);break;case"matrix":Ue=_t;break}Je.push(Ue.concat()),Ue=Pe.concat()});for(var et=Je[0];Je.length>1;)Je.shift(),et=v.util.multiplyTransformMatrices(et,Je[0]);return et}}();function Q(Ae,ve){var ke,Ce;Ae.replace(/;\s*$/,"").split(";").forEach(function(Pe){var Me=Pe.split(":");ke=Me[0].trim().toLowerCase(),Ce=Me[1].trim(),ve[ke]=Ce})}function q(Ae,ve){var ke,Ce;for(var Pe in Ae)typeof Ae[Pe]>"u"||(ke=Pe.toLowerCase(),Ce=Ae[Pe],ve[ke]=Ce)}function ne(Ae,ve){var ke={};for(var Ce in v.cssRules[ve])if(J(Ae,Ce.split(" ")))for(var Pe in v.cssRules[ve][Ce])ke[Pe]=v.cssRules[ve][Ce][Pe];return ke}function J(Ae,ve){var ke,Ce=!0;return ke=X(Ae,ve.pop()),ke&&ve.length&&(Ce=re(Ae,ve)),ke&&Ce&&ve.length===0}function re(Ae,ve){for(var ke,Ce=!0;Ae.parentNode&&Ae.parentNode.nodeType===1&&ve.length;)Ce&&(ke=ve.pop()),Ae=Ae.parentNode,Ce=X(Ae,ke);return ve.length===0}function X(Ae,ve){var ke=Ae.nodeName,Ce=Ae.getAttribute("class"),Pe=Ae.getAttribute("id"),Me,Le;if(Me=new RegExp("^"+ke,"i"),ve=ve.replace(Me,""),Pe&&ve.length&&(Me=new RegExp("#"+Pe+"(?![a-zA-Z\\-]+)","i"),ve=ve.replace(Me,"")),Ce&&ve.length)for(Ce=Ce.split(" "),Le=Ce.length;Le--;)Me=new RegExp("\\."+Ce[Le]+"(?![a-zA-Z\\-]+)","i"),ve=ve.replace(Me,"");return ve.length===0}function j(Ae,ve){var ke;if(Ae.getElementById&&(ke=Ae.getElementById(ve)),ke)return ke;var Ce,Pe,Me,Le=Ae.getElementsByTagName("*");for(Pe=0,Me=Le.length;Pe<Me;Pe++)if(Ce=Le[Pe],ve===Ce.getAttribute("id"))return Ce}function Z(Ae){for(var ve=Y(Ae,["use","svg:use"]),ke=0;ve.length&&ke<ve.length;){var Ce=ve[ke],Pe=Ce.getAttribute("xlink:href")||Ce.getAttribute("href");if(Pe===null)return;var Me=Pe.slice(1),Le=Ce.getAttribute("x")||0,Te=Ce.getAttribute("y")||0,ye=j(Ae,Me).cloneNode(!0),_e=(ye.getAttribute("transform")||"")+" translate("+Le+", "+Te+")",we,Se=ve.length,$e,Be,Oe,Ge,Ie=v.svgNS;if(te(ye),/^svg$/i.test(ye.nodeName)){var je=ye.ownerDocument.createElementNS(Ie,"g");for(Be=0,Oe=ye.attributes,Ge=Oe.length;Be<Ge;Be++)$e=Oe.item(Be),je.setAttributeNS(Ie,$e.nodeName,$e.nodeValue);for(;ye.firstChild;)je.appendChild(ye.firstChild);ye=je}for(Be=0,Oe=Ce.attributes,Ge=Oe.length;Be<Ge;Be++)$e=Oe.item(Be),!($e.nodeName==="x"||$e.nodeName==="y"||$e.nodeName==="xlink:href"||$e.nodeName==="href")&&($e.nodeName==="transform"?_e=$e.nodeValue+" "+_e:ye.setAttribute($e.nodeName,$e.nodeValue));ye.setAttribute("transform",_e),ye.setAttribute("instantiated_by_use","1"),ye.removeAttribute("id"),we=Ce.parentNode,we.replaceChild(ye,Ce),ve.length===Se&&ke++}}var W=new RegExp("^\\s*("+v.reNum+"+)\\s*,?\\s*("+v.reNum+"+)\\s*,?\\s*("+v.reNum+"+)\\s*,?\\s*("+v.reNum+"+)\\s*$");function te(Ae){if(!v.svgViewBoxElementsRegEx.test(Ae.nodeName))return{};var ve=Ae.getAttribute("viewBox"),ke=1,Ce=1,Pe=0,Me=0,Le,Te,ye,_e,we=Ae.getAttribute("width"),Se=Ae.getAttribute("height"),$e=Ae.getAttribute("x")||0,Be=Ae.getAttribute("y")||0,Oe=Ae.getAttribute("preserveAspectRatio")||"",Ge=!ve||!(ve=ve.match(W)),Ie=!we||!Se||we==="100%"||Se==="100%",je=Ge&&Ie,qe={},Ue="",Je=0,et=0;if(qe.width=0,qe.height=0,qe.toBeParsed=je,Ge&&($e||Be)&&Ae.parentNode&&Ae.parentNode.nodeName!=="#document"&&(Ue=" translate("+f($e)+" "+f(Be)+") ",ye=(Ae.getAttribute("transform")||"")+Ue,Ae.setAttribute("transform",ye),Ae.removeAttribute("x"),Ae.removeAttribute("y")),je)return qe;if(Ge)return qe.width=f(we),qe.height=f(Se),qe;if(Pe=-parseFloat(ve[1]),Me=-parseFloat(ve[2]),Le=parseFloat(ve[3]),Te=parseFloat(ve[4]),qe.minX=Pe,qe.minY=Me,qe.viewBoxWidth=Le,qe.viewBoxHeight=Te,Ie?(qe.width=Le,qe.height=Te):(qe.width=f(we),qe.height=f(Se),ke=qe.width/Le,Ce=qe.height/Te),Oe=v.util.parsePreserveAspectRatioAttribute(Oe),Oe.alignX!=="none"&&(Oe.meetOrSlice==="meet"&&(Ce=ke=ke>Ce?Ce:ke),Oe.meetOrSlice==="slice"&&(Ce=ke=ke>Ce?ke:Ce),Je=qe.width-Le*ke,et=qe.height-Te*ke,Oe.alignX==="Mid"&&(Je/=2),Oe.alignY==="Mid"&&(et/=2),Oe.alignX==="Min"&&(Je=0),Oe.alignY==="Min"&&(et=0)),ke===1&&Ce===1&&Pe===0&&Me===0&&$e===0&&Be===0)return qe;if(($e||Be)&&Ae.parentNode.nodeName!=="#document"&&(Ue=" translate("+f($e)+" "+f(Be)+") "),ye=Ue+" matrix("+ke+" 0 0 "+Ce+" "+(Pe*ke+Je)+" "+(Me*Ce+et)+") ",Ae.nodeName==="svg"){for(_e=Ae.ownerDocument.createElementNS(v.svgNS,"g");Ae.firstChild;)_e.appendChild(Ae.firstChild);Ae.appendChild(_e)}else _e=Ae,_e.removeAttribute("x"),_e.removeAttribute("y"),ye=_e.getAttribute("transform")+ye;return _e.setAttribute("transform",ye),qe}function le(Ae,ve){for(;Ae&&(Ae=Ae.parentNode);)if(Ae.nodeName&&ve.test(Ae.nodeName.replace("svg:",""))&&!Ae.getAttribute("instantiated_by_use"))return!0;return!1}v.parseSVGDocument=function(Ae,ve,ke,Ce){if(!!Ae){Z(Ae);var Pe=v.Object.__uid++,Me,Le,Te=te(Ae),ye=v.util.toArray(Ae.getElementsByTagName("*"));if(Te.crossOrigin=Ce&&Ce.crossOrigin,Te.svgUid=Pe,ye.length===0&&v.isLikelyNode){ye=Ae.selectNodes('//*[name(.)!="svg"]');var _e=[];for(Me=0,Le=ye.length;Me<Le;Me++)_e[Me]=ye[Me];ye=_e}var we=ye.filter(function($e){return te($e),v.svgValidTagNamesRegEx.test($e.nodeName.replace("svg:",""))&&!le($e,v.svgInvalidAncestorsRegEx)});if(!we||we&&!we.length){ve&&ve([],{});return}var Se={};ye.filter(function($e){return $e.nodeName.replace("svg:","")==="clipPath"}).forEach(function($e){var Be=$e.getAttribute("id");Se[Be]=v.util.toArray($e.getElementsByTagName("*")).filter(function(Oe){return v.svgValidTagNamesRegEx.test(Oe.nodeName.replace("svg:",""))})}),v.gradientDefs[Pe]=v.getGradientDefs(Ae),v.cssRules[Pe]=v.getCSSRules(Ae),v.clipPaths[Pe]=Se,v.parseElements(we,function($e,Be){ve&&(ve($e,Te,Be,ye),delete v.gradientDefs[Pe],delete v.cssRules[Pe],delete v.clipPaths[Pe])},m(Te),ke,Ce)}};function oe(Ae,ve){var ke=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Ce="xlink:href",Pe=ve.getAttribute(Ce).slice(1),Me=j(Ae,Pe);if(Me&&Me.getAttribute(Ce)&&oe(Ae,Me),ke.forEach(function(Te){Me&&!ve.hasAttribute(Te)&&Me.hasAttribute(Te)&&ve.setAttribute(Te,Me.getAttribute(Te))}),!ve.children.length)for(var Le=Me.cloneNode(!0);Le.firstChild;)ve.appendChild(Le.firstChild);ve.removeAttribute(Ce)}var Ee=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+v.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+v.reNum+"))?\\s+(.*)");y(v,{parseFontDeclaration:function(Ae,ve){var ke=Ae.match(Ee);if(!!ke){var Ce=ke[1],Pe=ke[3],Me=ke[4],Le=ke[5],Te=ke[6];Ce&&(ve.fontStyle=Ce),Pe&&(ve.fontWeight=isNaN(parseFloat(Pe))?Pe:parseFloat(Pe)),Me&&(ve.fontSize=f(Me)),Te&&(ve.fontFamily=Te),Le&&(ve.lineHeight=Le==="normal"?1:Le)}},getGradientDefs:function(Ae){var ve=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],ke=Y(Ae,ve),Ce,Pe=0,Me={};for(Pe=ke.length;Pe--;)Ce=ke[Pe],Ce.getAttribute("xlink:href")&&oe(Ae,Ce),Me[Ce.getAttribute("id")]=Ce;return Me},parseAttributes:function(Ae,ve,ke){if(!!Ae){var Ce,Pe={},Me,Le;typeof ke>"u"&&(ke=Ae.getAttribute("svgUid")),Ae.parentNode&&v.svgValidParentsRegEx.test(Ae.parentNode.nodeName)&&(Pe=v.parseAttributes(Ae.parentNode,ve,ke));var Te=ve.reduce(function(Oe,Ge){return Ce=Ae.getAttribute(Ge),Ce&&(Oe[Ge]=Ce),Oe},{}),ye=y(ne(Ae,ke),v.parseStyleAttribute(Ae));Te=y(Te,ye),ye[I]&&Ae.setAttribute(I,ye[I]),Me=Le=Pe.fontSize||v.Text.DEFAULT_SVG_FONT_SIZE,Te[D]&&(Te[D]=Me=f(Te[D],Le));var _e,we,Se={};for(var $e in Te)_e=N($e),we=O(_e,Te[$e],Pe,Me),Se[_e]=we;Se&&Se.font&&v.parseFontDeclaration(Se.font,Se);var Be=y(Pe,Se);return v.svgValidParentsRegEx.test(Ae.nodeName)?Be:U(Be)}},parseElements:function(Ae,ve,ke,Ce,Pe){new v.ElementsParser(Ae,ve,ke,Ce,Pe).parse()},parseStyleAttribute:function(Ae){var ve={},ke=Ae.getAttribute("style");return ke&&(typeof ke=="string"?Q(ke,ve):q(ke,ve)),ve},parsePointsAttribute:function(Ae){if(!Ae)return null;Ae=Ae.replace(/,/g," ").trim(),Ae=Ae.split(/\s+/);var ve=[],ke,Ce;for(ke=0,Ce=Ae.length;ke<Ce;ke+=2)ve.push({x:parseFloat(Ae[ke]),y:parseFloat(Ae[ke+1])});return ve},getCSSRules:function(Ae){var ve=Ae.getElementsByTagName("style"),ke,Ce,Pe={},Me;for(ke=0,Ce=ve.length;ke<Ce;ke++){var Le=ve[ke].textContent;Le=Le.replace(/\/\*[\s\S]*?\*\//g,""),Le.trim()!==""&&(Me=Le.split("}"),Me=Me.filter(function(Te){return Te.trim()}),Me.forEach(function(Te){var ye=Te.split("{"),_e={},we=ye[1].trim(),Se=we.split(";").filter(function(Ge){return Ge.trim()});for(ke=0,Ce=Se.length;ke<Ce;ke++){var $e=Se[ke].split(":"),Be=$e[0].trim(),Oe=$e[1].trim();_e[Be]=Oe}Te=ye[0].trim(),Te.split(",").forEach(function(Ge){Ge=Ge.replace(/^svg/i,"").trim(),Ge!==""&&(Pe[Ge]?v.util.object.extend(Pe[Ge],_e):Pe[Ge]=v.util.object.clone(_e))})}))}return Pe},loadSVGFromURL:function(Ae,ve,ke,Ce){Ae=Ae.replace(/^\n\s*/,"").trim(),new v.util.request(Ae,{method:"get",onComplete:Pe});function Pe(Me){var Le=Me.responseXML;if(!Le||!Le.documentElement)return ve&&ve(null),!1;v.parseSVGDocument(Le.documentElement,function(Te,ye,_e,we){ve&&ve(Te,ye,_e,we)},ke,Ce)}},loadSVGFromString:function(Ae,ve,ke,Ce){var Pe=new v.window.DOMParser,Me=Pe.parseFromString(Ae.trim(),"text/xml");v.parseSVGDocument(Me.documentElement,function(Le,Te,ye,_e){ve(Le,Te,ye,_e)},ke,Ce)}})}(e),n.ElementsParser=function(g,v,y,m,d,f){this.elements=g,this.callback=v,this.options=y,this.reviver=m,this.svgUid=y&&y.svgUid||0,this.parsingOptions=d,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=f},function(g){g.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},g.createObjects=function(){var v=this;this.elements.forEach(function(y,m){y.setAttribute("svgUid",v.svgUid),v.createObject(y,m)})},g.findTag=function(v){return n[n.util.string.capitalize(v.tagName.replace("svg:",""))]},g.createObject=function(v,y){var m=this.findTag(v);if(m&&m.fromElement)try{m.fromElement(v,this.createCallback(y,v),this.options)}catch(d){n.log(d)}else this.checkIfDone()},g.createCallback=function(v,y){var m=this;return function(d){var f;m.resolveGradient(d,y,"fill"),m.resolveGradient(d,y,"stroke"),d instanceof n.Image&&d._originalElement&&(f=d.parsePreserveAspectRatioAttribute(y)),d._removeTransformMatrix(f),m.resolveClipPath(d,y),m.reviver&&m.reviver(y,d),m.instances[v]=d,m.checkIfDone()}},g.extractPropertyDefinition=function(v,y,m){var d=v[y],f=this.regexUrl;if(!!f.test(d)){f.lastIndex=0;var x=f.exec(d)[1];return f.lastIndex=0,n[m][this.svgUid][x]}},g.resolveGradient=function(v,y,m){var d=this.extractPropertyDefinition(v,m,"gradientDefs");if(d){var f=y.getAttribute(m+"-opacity"),x=n.Gradient.fromElement(d,v,f,this.options);v.set(m,x)}},g.createClipPathCallback=function(v,y){return function(m){m._removeTransformMatrix(),m.fillRule=m.clipRule,y.push(m)}},g.resolveClipPath=function(v,y){var m=this.extractPropertyDefinition(v,"clipPath","clipPaths"),d,f,x,k,P,S;if(m){k=[],x=n.util.invertTransform(v.calcTransformMatrix());for(var E=m[0].parentNode,M=y;M.parentNode&&M.getAttribute("clip-path")!==v.clipPath;)M=M.parentNode;M.parentNode.appendChild(E);for(var T=0;T<m.length;T++)d=m[T],f=this.findTag(d),f.fromElement(d,this.createClipPathCallback(v,k),this.options);k.length===1?m=k[0]:m=new n.Group(k),P=n.util.multiplyTransformMatrices(x,m.calcTransformMatrix()),m.clipPath&&this.resolveClipPath(m,M);var S=n.util.qrDecompose(P);m.flipX=!1,m.flipY=!1,m.set("scaleX",S.scaleX),m.set("scaleY",S.scaleY),m.angle=S.angle,m.skewX=S.skewX,m.skewY=0,m.setPositionByOrigin({x:S.translateX,y:S.translateY},"center","center"),v.clipPath=m}else delete v.clipPath},g.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(v){return v!=null}),this.callback(this.instances,this.elements))}}(n.ElementsParser.prototype),function(g){var v=g.fabric||(g.fabric={});if(v.Point){v.warn("fabric.Point is already defined");return}v.Point=y;function y(m,d){this.x=m,this.y=d}y.prototype={type:"point",constructor:y,add:function(m){return new y(this.x+m.x,this.y+m.y)},addEquals:function(m){return this.x+=m.x,this.y+=m.y,this},scalarAdd:function(m){return new y(this.x+m,this.y+m)},scalarAddEquals:function(m){return this.x+=m,this.y+=m,this},subtract:function(m){return new y(this.x-m.x,this.y-m.y)},subtractEquals:function(m){return this.x-=m.x,this.y-=m.y,this},scalarSubtract:function(m){return new y(this.x-m,this.y-m)},scalarSubtractEquals:function(m){return this.x-=m,this.y-=m,this},multiply:function(m){return new y(this.x*m,this.y*m)},multiplyEquals:function(m){return this.x*=m,this.y*=m,this},divide:function(m){return new y(this.x/m,this.y/m)},divideEquals:function(m){return this.x/=m,this.y/=m,this},eq:function(m){return this.x===m.x&&this.y===m.y},lt:function(m){return this.x<m.x&&this.y<m.y},lte:function(m){return this.x<=m.x&&this.y<=m.y},gt:function(m){return this.x>m.x&&this.y>m.y},gte:function(m){return this.x>=m.x&&this.y>=m.y},lerp:function(m,d){return typeof d>"u"&&(d=.5),d=Math.max(Math.min(1,d),0),new y(this.x+(m.x-this.x)*d,this.y+(m.y-this.y)*d)},distanceFrom:function(m){var d=this.x-m.x,f=this.y-m.y;return Math.sqrt(d*d+f*f)},midPointFrom:function(m){return this.lerp(m)},min:function(m){return new y(Math.min(this.x,m.x),Math.min(this.y,m.y))},max:function(m){return new y(Math.max(this.x,m.x),Math.max(this.y,m.y))},toString:function(){return this.x+","+this.y},setXY:function(m,d){return this.x=m,this.y=d,this},setX:function(m){return this.x=m,this},setY:function(m){return this.y=m,this},setFromPoint:function(m){return this.x=m.x,this.y=m.y,this},swap:function(m){var d=this.x,f=this.y;this.x=m.x,this.y=m.y,m.x=d,m.y=f},clone:function(){return new y(this.x,this.y)}}}(e),function(g){var v=g.fabric||(g.fabric={});if(v.Intersection){v.warn("fabric.Intersection is already defined");return}function y(m){this.status=m,this.points=[]}v.Intersection=y,v.Intersection.prototype={constructor:y,appendPoint:function(m){return this.points.push(m),this},appendPoints:function(m){return this.points=this.points.concat(m),this}},v.Intersection.intersectLineLine=function(m,d,f,x){var k,P=(x.x-f.x)*(m.y-f.y)-(x.y-f.y)*(m.x-f.x),S=(d.x-m.x)*(m.y-f.y)-(d.y-m.y)*(m.x-f.x),E=(x.y-f.y)*(d.x-m.x)-(x.x-f.x)*(d.y-m.y);if(E!==0){var M=P/E,T=S/E;0<=M&&M<=1&&0<=T&&T<=1?(k=new y("Intersection"),k.appendPoint(new v.Point(m.x+M*(d.x-m.x),m.y+M*(d.y-m.y)))):k=new y}else P===0||S===0?k=new y("Coincident"):k=new y("Parallel");return k},v.Intersection.intersectLinePolygon=function(m,d,f){var x=new y,k=f.length,P,S,E,M;for(M=0;M<k;M++)P=f[M],S=f[(M+1)%k],E=y.intersectLineLine(m,d,P,S),x.appendPoints(E.points);return x.points.length>0&&(x.status="Intersection"),x},v.Intersection.intersectPolygonPolygon=function(m,d){var f=new y,x=m.length,k;for(k=0;k<x;k++){var P=m[k],S=m[(k+1)%x],E=y.intersectLinePolygon(P,S,d);f.appendPoints(E.points)}return f.points.length>0&&(f.status="Intersection"),f},v.Intersection.intersectPolygonRectangle=function(m,d,f){var x=d.min(f),k=d.max(f),P=new v.Point(k.x,x.y),S=new v.Point(x.x,k.y),E=y.intersectLinePolygon(x,P,m),M=y.intersectLinePolygon(P,k,m),T=y.intersectLinePolygon(k,S,m),D=y.intersectLinePolygon(S,x,m),I=new y;return I.appendPoints(E.points),I.appendPoints(M.points),I.appendPoints(T.points),I.appendPoints(D.points),I.points.length>0&&(I.status="Intersection"),I}}(e),function(g){var v=g.fabric||(g.fabric={});if(v.Color){v.warn("fabric.Color is already defined.");return}function y(d){d?this._tryParsingColor(d):this.setSource([0,0,0,1])}v.Color=y,v.Color.prototype={_tryParsingColor:function(d){var f;d in y.colorNameMap&&(d=y.colorNameMap[d]),d==="transparent"&&(f=[255,255,255,0]),f||(f=y.sourceFromHex(d)),f||(f=y.sourceFromRgb(d)),f||(f=y.sourceFromHsl(d)),f||(f=[0,0,0,1]),f&&this.setSource(f)},_rgbToHsl:function(d,f,x){d/=255,f/=255,x/=255;var k,P,S,E=v.util.array.max([d,f,x]),M=v.util.array.min([d,f,x]);if(S=(E+M)/2,E===M)k=P=0;else{var T=E-M;switch(P=S>.5?T/(2-E-M):T/(E+M),E){case d:k=(f-x)/T+(f<x?6:0);break;case f:k=(x-d)/T+2;break;case x:k=(d-f)/T+4;break}k/=6}return[Math.round(k*360),Math.round(P*100),Math.round(S*100)]},getSource:function(){return this._source},setSource:function(d){this._source=d},toRgb:function(){var d=this.getSource();return"rgb("+d[0]+","+d[1]+","+d[2]+")"},toRgba:function(){var d=this.getSource();return"rgba("+d[0]+","+d[1]+","+d[2]+","+d[3]+")"},toHsl:function(){var d=this.getSource(),f=this._rgbToHsl(d[0],d[1],d[2]);return"hsl("+f[0]+","+f[1]+"%,"+f[2]+"%)"},toHsla:function(){var d=this.getSource(),f=this._rgbToHsl(d[0],d[1],d[2]);return"hsla("+f[0]+","+f[1]+"%,"+f[2]+"%,"+d[3]+")"},toHex:function(){var d=this.getSource(),f,x,k;return f=d[0].toString(16),f=f.length===1?"0"+f:f,x=d[1].toString(16),x=x.length===1?"0"+x:x,k=d[2].toString(16),k=k.length===1?"0"+k:k,f.toUpperCase()+x.toUpperCase()+k.toUpperCase()},toHexa:function(){var d=this.getSource(),f;return f=Math.round(d[3]*255),f=f.toString(16),f=f.length===1?"0"+f:f,this.toHex()+f.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(d){var f=this.getSource();return f[3]=d,this.setSource(f),this},toGrayscale:function(){var d=this.getSource(),f=parseInt((d[0]*.3+d[1]*.59+d[2]*.11).toFixed(0),10),x=d[3];return this.setSource([f,f,f,x]),this},toBlackWhite:function(d){var f=this.getSource(),x=(f[0]*.3+f[1]*.59+f[2]*.11).toFixed(0),k=f[3];return d=d||127,x=Number(x)<Number(d)?0:255,this.setSource([x,x,x,k]),this},overlayWith:function(d){d instanceof y||(d=new y(d));var f=[],x=this.getAlpha(),k=.5,P=this.getSource(),S=d.getSource(),E;for(E=0;E<3;E++)f.push(Math.round(P[E]*(1-k)+S[E]*k));return f[3]=x,this.setSource(f),this}},v.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,v.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,v.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,v.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function m(d,f,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?d+(f-d)*6*x:x<1/2?f:x<2/3?d+(f-d)*(2/3-x)*6:d}v.Color.fromRgb=function(d){return y.fromSource(y.sourceFromRgb(d))},v.Color.sourceFromRgb=function(d){var f=d.match(y.reRGBa);if(f){var x=parseInt(f[1],10)/(/%$/.test(f[1])?100:1)*(/%$/.test(f[1])?255:1),k=parseInt(f[2],10)/(/%$/.test(f[2])?100:1)*(/%$/.test(f[2])?255:1),P=parseInt(f[3],10)/(/%$/.test(f[3])?100:1)*(/%$/.test(f[3])?255:1);return[parseInt(x,10),parseInt(k,10),parseInt(P,10),f[4]?parseFloat(f[4]):1]}},v.Color.fromRgba=y.fromRgb,v.Color.fromHsl=function(d){return y.fromSource(y.sourceFromHsl(d))},v.Color.sourceFromHsl=function(d){var f=d.match(y.reHSLa);if(!!f){var x=(parseFloat(f[1])%360+360)%360/360,k=parseFloat(f[2])/(/%$/.test(f[2])?100:1),P=parseFloat(f[3])/(/%$/.test(f[3])?100:1),S,E,M;if(k===0)S=E=M=P;else{var T=P<=.5?P*(k+1):P+k-P*k,D=P*2-T;S=m(D,T,x+1/3),E=m(D,T,x),M=m(D,T,x-1/3)}return[Math.round(S*255),Math.round(E*255),Math.round(M*255),f[4]?parseFloat(f[4]):1]}},v.Color.fromHsla=y.fromHsl,v.Color.fromHex=function(d){return y.fromSource(y.sourceFromHex(d))},v.Color.sourceFromHex=function(d){if(d.match(y.reHex)){var f=d.slice(d.indexOf("#")+1),x=f.length===3||f.length===4,k=f.length===8||f.length===4,P=x?f.charAt(0)+f.charAt(0):f.substring(0,2),S=x?f.charAt(1)+f.charAt(1):f.substring(2,4),E=x?f.charAt(2)+f.charAt(2):f.substring(4,6),M=k?x?f.charAt(3)+f.charAt(3):f.substring(6,8):"FF";return[parseInt(P,16),parseInt(S,16),parseInt(E,16),parseFloat((parseInt(M,16)/255).toFixed(2))]}},v.Color.fromSource=function(d){var f=new y;return f.setSource(d),f}}(e),function(g){var v=g.fabric||(g.fabric={}),y=["e","se","s","sw","w","nw","n","ne","e"],m=["ns","nesw","ew","nwse"],d={},f="left",x="top",k="right",P="bottom",S="center",E={top:P,bottom:x,left:k,right:f,center:S},M=v.util.radiansToDegrees,T=Math.sign||function(_e){return(_e>0)-(_e<0)||+_e};function D(_e,we){var Se=_e.angle+M(Math.atan2(we.y,we.x))+360;return Math.round(Se%360/45)}function I(_e,we){var Se=we.transform.target,$e=Se.canvas,Be=v.util.object.clone(we);Be.target=Se,$e&&$e.fire("object:"+_e,Be),Se.fire(_e,we)}function N(_e,we){var Se=we.canvas,$e=Se.uniScaleKey,Be=_e[$e];return Se.uniformScaling&&!Be||!Se.uniformScaling&&Be}function O(_e){return _e.originX===S&&_e.originY===S}function F(_e,we,Se){var $e=_e.lockScalingX,Be=_e.lockScalingY;return!!($e&&Be||!we&&($e||Be)&&Se||$e&&we==="x"||Be&&we==="y")}function U(_e,we,Se){var $e="not-allowed",Be=N(_e,Se),Oe="";if(we.x!==0&&we.y===0?Oe="x":we.x===0&&we.y!==0&&(Oe="y"),F(Se,Oe,Be))return $e;var Ge=D(Se,we);return y[Ge]+"-resize"}function Y(_e,we,Se){var $e="not-allowed";if(we.x!==0&&Se.lockSkewingY||we.y!==0&&Se.lockSkewingX)return $e;var Be=D(Se,we)%4;return m[Be]+"-resize"}function Q(_e,we,Se){return _e[Se.canvas.altActionKey]?d.skewCursorStyleHandler(_e,we,Se):d.scaleCursorStyleHandler(_e,we,Se)}function q(_e,we,Se){var $e=_e[Se.canvas.altActionKey];if(we.x===0)return $e?"skewX":"scaleY";if(we.y===0)return $e?"skewY":"scaleX"}function ne(_e,we,Se){return Se.lockRotation?"not-allowed":we.cursorStyle}function J(_e,we,Se,$e){return{e:_e,transform:we,pointer:{x:Se,y:$e}}}function re(_e){return function(we,Se,$e,Be){var Oe=Se.target,Ge=Oe.getCenterPoint(),Ie=Oe.translateToOriginPoint(Ge,Se.originX,Se.originY),je=_e(we,Se,$e,Be);return Oe.setPositionByOrigin(Ie,Se.originX,Se.originY),je}}function X(_e,we){return function(Se,$e,Be,Oe){var Ge=we(Se,$e,Be,Oe);return Ge&&I(_e,J(Se,$e,Be,Oe)),Ge}}function j(_e,we,Se,$e,Be){var Oe=_e.target,Ge=Oe.controls[_e.corner],Ie=Oe.canvas.getZoom(),je=Oe.padding/Ie,qe=Oe.toLocalPoint(new v.Point($e,Be),we,Se);return qe.x>=je&&(qe.x-=je),qe.x<=-je&&(qe.x+=je),qe.y>=je&&(qe.y-=je),qe.y<=je&&(qe.y+=je),qe.x-=Ge.offsetX,qe.y-=Ge.offsetY,qe}function Z(_e){return _e.flipX!==_e.flipY}function W(_e,we,Se,$e,Be){if(_e[we]!==0){var Oe=_e._getTransformedDimensions()[$e],Ge=Be/Oe*_e[Se];_e.set(Se,Ge)}}function te(_e,we,Se,$e){var Be=we.target,Oe=Be._getTransformedDimensions(0,Be.skewY),Ge=j(we,we.originX,we.originY,Se,$e),Ie=Math.abs(Ge.x*2)-Oe.x,je=Be.skewX,qe;Ie<2?qe=0:(qe=M(Math.atan2(Ie/Be.scaleX,Oe.y/Be.scaleY)),we.originX===f&&we.originY===P&&(qe=-qe),we.originX===k&&we.originY===x&&(qe=-qe),Z(Be)&&(qe=-qe));var Ue=je!==qe;if(Ue){var Je=Be._getTransformedDimensions().y;Be.set("skewX",qe),W(Be,"skewY","scaleY","y",Je)}return Ue}function le(_e,we,Se,$e){var Be=we.target,Oe=Be._getTransformedDimensions(Be.skewX,0),Ge=j(we,we.originX,we.originY,Se,$e),Ie=Math.abs(Ge.y*2)-Oe.y,je=Be.skewY,qe;Ie<2?qe=0:(qe=M(Math.atan2(Ie/Be.scaleY,Oe.x/Be.scaleX)),we.originX===f&&we.originY===P&&(qe=-qe),we.originX===k&&we.originY===x&&(qe=-qe),Z(Be)&&(qe=-qe));var Ue=je!==qe;if(Ue){var Je=Be._getTransformedDimensions().x;Be.set("skewY",qe),W(Be,"skewX","scaleX","x",Je)}return Ue}function oe(_e,we,Se,$e){var Be=we.target,Oe=Be.skewX,Ge,Ie=we.originY;if(Be.lockSkewingX)return!1;if(Oe===0){var je=j(we,S,S,Se,$e);je.x>0?Ge=f:Ge=k}else Oe>0&&(Ge=Ie===x?f:k),Oe<0&&(Ge=Ie===x?k:f),Z(Be)&&(Ge=Ge===f?k:f);we.originX=Ge;var qe=X("skewing",re(te));return qe(_e,we,Se,$e)}function Ee(_e,we,Se,$e){var Be=we.target,Oe=Be.skewY,Ge,Ie=we.originX;if(Be.lockSkewingY)return!1;if(Oe===0){var je=j(we,S,S,Se,$e);je.y>0?Ge=x:Ge=P}else Oe>0&&(Ge=Ie===f?x:P),Oe<0&&(Ge=Ie===f?P:x),Z(Be)&&(Ge=Ge===x?P:x);we.originY=Ge;var qe=X("skewing",re(le));return qe(_e,we,Se,$e)}function Ae(_e,we,Se,$e){var Be=we,Oe=Be.target,Ge=Oe.translateToOriginPoint(Oe.getCenterPoint(),Be.originX,Be.originY);if(Oe.lockRotation)return!1;var Ie=Math.atan2(Be.ey-Ge.y,Be.ex-Ge.x),je=Math.atan2($e-Ge.y,Se-Ge.x),qe=M(je-Ie+Be.theta),Ue=!0;if(Oe.snapAngle>0){var Je=Oe.snapAngle,et=Oe.snapThreshold||Je,nt=Math.ceil(qe/Je)*Je,st=Math.floor(qe/Je)*Je;Math.abs(qe-st)<et?qe=st:Math.abs(qe-nt)<et&&(qe=nt)}return qe<0&&(qe=360+qe),qe%=360,Ue=Oe.angle!==qe,Oe.angle=qe,Ue}function ve(_e,we,Se,$e,Be){Be=Be||{};var Oe=we.target,Ge=Oe.lockScalingX,Ie=Oe.lockScalingY,je=Be.by,qe,Ue,Je,et,nt=N(_e,Oe),st=F(Oe,je,nt),gt,_t,wt=we.gestureScale;if(st)return!1;if(wt)Ue=we.scaleX*wt,Je=we.scaleY*wt;else{if(qe=j(we,we.originX,we.originY,Se,$e),gt=je!=="y"?T(qe.x):1,_t=je!=="x"?T(qe.y):1,we.signX||(we.signX=gt),we.signY||(we.signY=_t),Oe.lockScalingFlip&&(we.signX!==gt||we.signY!==_t))return!1;if(et=Oe._getTransformedDimensions(),nt&&!je){var He=Math.abs(qe.x)+Math.abs(qe.y),Ve=we.original,ze=Math.abs(et.x*Ve.scaleX/Oe.scaleX)+Math.abs(et.y*Ve.scaleY/Oe.scaleY),Ne=He/ze;Ue=Ve.scaleX*Ne,Je=Ve.scaleY*Ne}else Ue=Math.abs(qe.x*Oe.scaleX/et.x),Je=Math.abs(qe.y*Oe.scaleY/et.y);O(we)&&(Ue*=2,Je*=2),we.signX!==gt&&je!=="y"&&(we.originX=E[we.originX],Ue*=-1,we.signX=gt),we.signY!==_t&&je!=="x"&&(we.originY=E[we.originY],Je*=-1,we.signY=_t)}var We=Oe.scaleX,Fe=Oe.scaleY;return je?(je==="x"&&Oe.set("scaleX",Ue),je==="y"&&Oe.set("scaleY",Je)):(!Ge&&Oe.set("scaleX",Ue),!Ie&&Oe.set("scaleY",Je)),We!==Oe.scaleX||Fe!==Oe.scaleY}function ke(_e,we,Se,$e){return ve(_e,we,Se,$e)}function Ce(_e,we,Se,$e){return ve(_e,we,Se,$e,{by:"x"})}function Pe(_e,we,Se,$e){return ve(_e,we,Se,$e,{by:"y"})}function Me(_e,we,Se,$e){return _e[we.target.canvas.altActionKey]?d.skewHandlerX(_e,we,Se,$e):d.scalingY(_e,we,Se,$e)}function Le(_e,we,Se,$e){return _e[we.target.canvas.altActionKey]?d.skewHandlerY(_e,we,Se,$e):d.scalingX(_e,we,Se,$e)}function Te(_e,we,Se,$e){var Be=we.target,Oe=j(we,we.originX,we.originY,Se,$e),Ge=Be.strokeWidth/(Be.strokeUniform?Be.scaleX:1),Ie=O(we)?2:1,je=Be.width,qe=Math.abs(Oe.x*Ie/Be.scaleX)-Ge;return Be.set("width",Math.max(qe,0)),je!==qe}function ye(_e,we,Se,$e){var Be=we.target,Oe=Se-we.offsetX,Ge=$e-we.offsetY,Ie=!Be.get("lockMovementX")&&Be.left!==Oe,je=!Be.get("lockMovementY")&&Be.top!==Ge;return Ie&&Be.set("left",Oe),je&&Be.set("top",Ge),(Ie||je)&&I("moving",J(_e,we,Se,$e)),Ie||je}d.scaleCursorStyleHandler=U,d.skewCursorStyleHandler=Y,d.scaleSkewCursorStyleHandler=Q,d.rotationWithSnapping=X("rotating",re(Ae)),d.scalingEqually=X("scaling",re(ke)),d.scalingX=X("scaling",re(Ce)),d.scalingY=X("scaling",re(Pe)),d.scalingYOrSkewingX=Me,d.scalingXOrSkewingY=Le,d.changeWidth=X("resizing",re(Te)),d.skewHandlerX=oe,d.skewHandlerY=Ee,d.dragHandler=ye,d.scaleOrSkewActionName=q,d.rotationStyleHandler=ne,d.fireEvent=I,d.wrapWithFixedAnchor=re,d.wrapWithFireEvent=X,d.getLocalPoint=j,v.controlsUtils=d}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.util.degreesToRadians,m=v.controlsUtils;function d(x,k,P,S,E){S=S||{};var M=this.sizeX||S.cornerSize||E.cornerSize,T=this.sizeY||S.cornerSize||E.cornerSize,D=typeof S.transparentCorners<"u"?S.transparentCorners:E.transparentCorners,I=D?"stroke":"fill",N=!D&&(S.cornerStrokeColor||E.cornerStrokeColor),O=k,F=P,U;x.save(),x.fillStyle=S.cornerColor||E.cornerColor,x.strokeStyle=S.cornerStrokeColor||E.cornerStrokeColor,M>T?(U=M,x.scale(1,T/M),F=P*M/T):T>M?(U=T,x.scale(M/T,1),O=k*T/M):U=M,x.lineWidth=1,x.beginPath(),x.arc(O,F,U/2,0,2*Math.PI,!1),x[I](),N&&x.stroke(),x.restore()}function f(x,k,P,S,E){S=S||{};var M=this.sizeX||S.cornerSize||E.cornerSize,T=this.sizeY||S.cornerSize||E.cornerSize,D=typeof S.transparentCorners<"u"?S.transparentCorners:E.transparentCorners,I=D?"stroke":"fill",N=!D&&(S.cornerStrokeColor||E.cornerStrokeColor),O=M/2,F=T/2;x.save(),x.fillStyle=S.cornerColor||E.cornerColor,x.strokeStyle=S.cornerStrokeColor||E.cornerStrokeColor,x.lineWidth=1,x.translate(k,P),x.rotate(y(E.angle)),x[I+"Rect"](-O,-F,M,T),N&&x.strokeRect(-O,-F,M,T),x.restore()}m.renderCircleControl=d,m.renderSquareControl=f}(e),function(g){var v=g.fabric||(g.fabric={});function y(m){for(var d in m)this[d]=m[d]}v.Control=y,v.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(m,d){return d.cursorStyle},getActionName:function(m,d){return d.actionName},getVisibility:function(m,d){var f=m._controlsVisibility;return f&&typeof f[d]<"u"?f[d]:this.visible},setVisibility:function(m){this.visible=m},positionHandler:function(m,d){var f=v.util.transformPoint({x:this.x*m.x+this.offsetX,y:this.y*m.y+this.offsetY},d);return f},calcCornerCoords:function(m,d,f,x,k){var P,S,E,M,T=k?this.touchSizeX:this.sizeX,D=k?this.touchSizeY:this.sizeY;if(T&&D&&T!==D){var I=Math.atan2(D,T),N=Math.sqrt(T*T+D*D)/2,O=I-v.util.degreesToRadians(m),F=Math.PI/2-I-v.util.degreesToRadians(m);P=N*v.util.cos(O),S=N*v.util.sin(O),E=N*v.util.cos(F),M=N*v.util.sin(F)}else{var U=T&&D?T:d;N=U*.7071067812;var O=v.util.degreesToRadians(45-m);P=E=N*v.util.cos(O),S=M=N*v.util.sin(O)}return{tl:{x:f-M,y:x-E},tr:{x:f+P,y:x-S},bl:{x:f-P,y:x+S},br:{x:f+M,y:x+E}}},render:function(m,d,f,x,k){switch(x=x||{},x.cornerStyle||k.cornerStyle){case"circle":v.controlsUtils.renderCircleControl.call(this,m,d,f,x,k);break;default:v.controlsUtils.renderSquareControl.call(this,m,d,f,x,k)}}}}(e),function(){function g(f,x){var k=f.getAttribute("style"),P=f.getAttribute("offset")||0,S,E,M,T;if(P=parseFloat(P)/(/%$/.test(P)?100:1),P=P<0?0:P>1?1:P,k){var D=k.split(/\s*;\s*/);for(D[D.length-1]===""&&D.pop(),T=D.length;T--;){var I=D[T].split(/\s*:\s*/),N=I[0].trim(),O=I[1].trim();N==="stop-color"?S=O:N==="stop-opacity"&&(M=O)}}return S||(S=f.getAttribute("stop-color")||"rgb(0,0,0)"),M||(M=f.getAttribute("stop-opacity")),S=new n.Color(S),E=S.getAlpha(),M=isNaN(parseFloat(M))?1:parseFloat(M),M*=E*x,{offset:P,color:S.toRgb(),opacity:M}}function v(f){return{x1:f.getAttribute("x1")||0,y1:f.getAttribute("y1")||0,x2:f.getAttribute("x2")||"100%",y2:f.getAttribute("y2")||0}}function y(f){return{x1:f.getAttribute("fx")||f.getAttribute("cx")||"50%",y1:f.getAttribute("fy")||f.getAttribute("cy")||"50%",r1:0,x2:f.getAttribute("cx")||"50%",y2:f.getAttribute("cy")||"50%",r2:f.getAttribute("r")||"50%"}}var m=n.util.object.clone;n.Gradient=n.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(f){f||(f={}),f.coords||(f.coords={});var x,k=this;Object.keys(f).forEach(function(P){k[P]=f[P]}),this.id?this.id+="_"+n.Object.__uid++:this.id=n.Object.__uid++,x={x1:f.coords.x1||0,y1:f.coords.y1||0,x2:f.coords.x2||0,y2:f.coords.y2||0},this.type==="radial"&&(x.r1=f.coords.r1||0,x.r2=f.coords.r2||0),this.coords=x,this.colorStops=f.colorStops.slice()},addColorStop:function(f){for(var x in f){var k=new n.Color(f[x]);this.colorStops.push({offset:parseFloat(x),color:k.toRgb(),opacity:k.getAlpha()})}return this},toObject:function(f){var x={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return n.util.populateWithProperties(this,x,f),x},toSVG:function(f,E){var k=m(this.coords,!0),P,S,E=E||{},M,T,D=m(this.colorStops,!0),I=k.r1>k.r2,N=this.gradientTransform?this.gradientTransform.concat():n.iMatrix.concat(),O=-this.offsetX,F=-this.offsetY,U=!!E.additionalTransform,Y=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(D.sort(function(re,X){return re.offset-X.offset}),Y==="objectBoundingBox"?(O/=f.width,F/=f.height):(O+=f.width/2,F+=f.height/2),f.type==="path"&&this.gradientUnits!=="percentage"&&(O-=f.pathOffset.x,F-=f.pathOffset.y),N[4]-=O,N[5]-=F,T='id="SVGID_'+this.id+'" gradientUnits="'+Y+'"',T+=' gradientTransform="'+(U?E.additionalTransform+" ":"")+n.util.matrixToSVG(N)+'" ',this.type==="linear"?M=["<linearGradient ",T,' x1="',k.x1,'" y1="',k.y1,'" x2="',k.x2,'" y2="',k.y2,`">
`]:this.type==="radial"&&(M=["<radialGradient ",T,' cx="',I?k.x1:k.x2,'" cy="',I?k.y1:k.y2,'" r="',I?k.r1:k.r2,'" fx="',I?k.x2:k.x1,'" fy="',I?k.y2:k.y1,`">
`]),this.type==="radial"){if(I)for(D=D.concat(),D.reverse(),P=0,S=D.length;P<S;P++)D[P].offset=1-D[P].offset;var Q=Math.min(k.r1,k.r2);if(Q>0){var q=Math.max(k.r1,k.r2),ne=Q/q;for(P=0,S=D.length;P<S;P++)D[P].offset+=ne*(1-D[P].offset)}}for(P=0,S=D.length;P<S;P++){var J=D[P];M.push("<stop ",'offset="',J.offset*100+"%",'" style="stop-color:',J.color,typeof J.opacity<"u"?";stop-opacity: "+J.opacity:";",`"/>
`)}return M.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),M.join("")},toLive:function(f){var x,k=n.util.object.clone(this.coords),P,S;if(!!this.type){for(this.type==="linear"?x=f.createLinearGradient(k.x1,k.y1,k.x2,k.y2):this.type==="radial"&&(x=f.createRadialGradient(k.x1,k.y1,k.r1,k.x2,k.y2,k.r2)),P=0,S=this.colorStops.length;P<S;P++){var E=this.colorStops[P].color,M=this.colorStops[P].opacity,T=this.colorStops[P].offset;typeof M<"u"&&(E=new n.Color(E).setAlpha(M).toRgba()),x.addColorStop(T,E)}return x}}}),n.util.object.extend(n.Gradient,{fromElement:function(f,x,k,P){var S=parseFloat(k)/(/%$/.test(k)?100:1);S=S<0?0:S>1?1:S,isNaN(S)&&(S=1);var E=f.getElementsByTagName("stop"),M,T=f.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",D=f.getAttribute("gradientTransform")||"",I=[],N,O,F=0,U=0,Y;for(f.nodeName==="linearGradient"||f.nodeName==="LINEARGRADIENT"?(M="linear",N=v(f)):(M="radial",N=y(f)),O=E.length;O--;)I.push(g(E[O],S));Y=n.parseTransformAttribute(D),d(x,N,P,T),T==="pixels"&&(F=-x.left,U=-x.top);var Q=new n.Gradient({id:f.getAttribute("id"),type:M,coords:N,colorStops:I,gradientUnits:T,gradientTransform:Y,offsetX:F,offsetY:U});return Q}});function d(f,x,k,P){var S,E;Object.keys(x).forEach(function(M){S=x[M],S==="Infinity"?E=1:S==="-Infinity"?E=0:(E=parseFloat(x[M],10),typeof S=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(S)&&(E*=.01,P==="pixels"&&((M==="x1"||M==="x2"||M==="r2")&&(E*=k.viewBoxWidth||k.width),(M==="y1"||M==="y2")&&(E*=k.viewBoxHeight||k.height)))),x[M]=E})}}(),function(){var g=n.util.toFixed;n.Pattern=n.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(v,y){if(v||(v={}),this.id=n.Object.__uid++,this.setOptions(v),!v.source||v.source&&typeof v.source!="string"){y&&y(this);return}else{var m=this;this.source=n.util.createImage(),n.util.loadImage(v.source,function(d,f){m.source=d,y&&y(m,f)},null,this.crossOrigin)}},toObject:function(v){var y=n.Object.NUM_FRACTION_DIGITS,m,d;return typeof this.source.src=="string"?m=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(m=this.source.toDataURL()),d={type:"pattern",source:m,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:g(this.offsetX,y),offsetY:g(this.offsetY,y),patternTransform:this.patternTransform?this.patternTransform.concat():null},n.util.populateWithProperties(this,d,v),d},toSVG:function(v){var y=typeof this.source=="function"?this.source():this.source,m=y.width/v.width,d=y.height/v.height,f=this.offsetX/v.width,x=this.offsetY/v.height,k="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(d=1,x&&(d+=Math.abs(x))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(m=1,f&&(m+=Math.abs(f))),y.src?k=y.src:y.toDataURL&&(k=y.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+f+'" y="'+x+'" width="'+m+'" height="'+d+`">
<image x="0" y="0" width="`+y.width+'" height="'+y.height+'" xlink:href="'+k+`"></image>
</pattern>
`},setOptions:function(v){for(var y in v)this[y]=v[y]},toLive:function(v){var y=this.source;return!y||typeof y.src<"u"&&(!y.complete||y.naturalWidth===0||y.naturalHeight===0)?"":v.createPattern(y,this.repeat)}})}(),function(g){var v=g.fabric||(g.fabric={}),y=v.util.toFixed;if(v.Shadow){v.warn("fabric.Shadow is already defined.");return}v.Shadow=v.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(m){typeof m=="string"&&(m=this._parseShadow(m));for(var d in m)this[d]=m[d];this.id=v.Object.__uid++},_parseShadow:function(m){var d=m.trim(),f=v.Shadow.reOffsetsAndBlur.exec(d)||[],x=d.replace(v.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:x.trim(),offsetX:parseFloat(f[1],10)||0,offsetY:parseFloat(f[2],10)||0,blur:parseFloat(f[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(m){var d=40,f=40,x=v.Object.NUM_FRACTION_DIGITS,k=v.util.rotateVector({x:this.offsetX,y:this.offsetY},v.util.degreesToRadians(-m.angle)),P=20,S=new v.Color(this.color);return m.width&&m.height&&(d=y((Math.abs(k.x)+this.blur)/m.width,x)*100+P,f=y((Math.abs(k.y)+this.blur)/m.height,x)*100+P),m.flipX&&(k.x*=-1),m.flipY&&(k.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+f+'%" height="'+(100+2*f)+'%" x="-'+d+'%" width="'+(100+2*d)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+y(this.blur?this.blur/2:0,x)+`"></feGaussianBlur>
	<feOffset dx="`+y(k.x,x)+'" dy="'+y(k.y,x)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+S.toRgb()+'" flood-opacity="'+S.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var m={},d=v.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(f){this[f]!==d[f]&&(m[f]=this[f])},this),m}}),v.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(n.StaticCanvas){n.warn("fabric.StaticCanvas is already defined.");return}var g=n.util.object.extend,v=n.util.getElementOffset,y=n.util.removeFromArray,m=n.util.toFixed,d=n.util.transformPoint,f=n.util.invertTransform,x=n.util.getNodeCanvas,k=n.util.createCanvasElement,P=new Error("Could not initialize `canvas` element");n.StaticCanvas=n.util.createClass(n.CommonMethods,{initialize:function(S,E){E||(E={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(S,E)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:n.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(S,E){var M=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(S),this._initOptions(E),this.interactive||this._initRetinaScaling(),E.overlayImage&&this.setOverlayImage(E.overlayImage,M),E.backgroundImage&&this.setBackgroundImage(E.backgroundImage,M),E.backgroundColor&&this.setBackgroundColor(E.backgroundColor,M),E.overlayColor&&this.setOverlayColor(E.overlayColor,M),this.calcOffset()},_isRetinaScaling:function(){return n.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,n.devicePixelRatio):1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var S=n.devicePixelRatio;this.__initRetinaScaling(S,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(S,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(S,E,M){E.setAttribute("width",this.width*S),E.setAttribute("height",this.height*S),M.scale(S,S)},calcOffset:function(){return this._offset=v(this.lowerCanvasEl),this},setOverlayImage:function(S,E,M){return this.__setBgOverlayImage("overlayImage",S,E,M)},setBackgroundImage:function(S,E,M){return this.__setBgOverlayImage("backgroundImage",S,E,M)},setOverlayColor:function(S,E){return this.__setBgOverlayColor("overlayColor",S,E)},setBackgroundColor:function(S,E){return this.__setBgOverlayColor("backgroundColor",S,E)},__setBgOverlayImage:function(S,E,M,T){return typeof E=="string"?n.util.loadImage(E,function(D,I){if(D){var N=new n.Image(D,T);this[S]=N,N.canvas=this}M&&M(D,I)},this,T&&T.crossOrigin):(T&&E.setOptions(T),this[S]=E,E&&(E.canvas=this),M&&M(E,!1)),this},__setBgOverlayColor:function(S,E,M){return this[S]=E,this._initGradient(E,S),this._initPattern(E,S,M),this},_createCanvasElement:function(){var S=k();if(!S||(S.style||(S.style={}),typeof S.getContext>"u"))throw P;return S},_initOptions:function(S){var E=this.lowerCanvasEl;this._setOptions(S),this.width=this.width||parseInt(E.width,10)||0,this.height=this.height||parseInt(E.height,10)||0,this.lowerCanvasEl.style&&(E.width=this.width,E.height=this.height,E.style.width=this.width+"px",E.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(S){S&&S.getContext?this.lowerCanvasEl=S:this.lowerCanvasEl=n.util.getById(S)||this._createCanvasElement(),n.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(S,E){return this.setDimensions({width:S},E)},setHeight:function(S,E){return this.setDimensions({height:S},E)},setDimensions:function(S,E){var M;E=E||{};for(var T in S)M=S[T],E.cssOnly||(this._setBackstoreDimension(T,S[T]),M+="px",this.hasLostContext=!0),E.backstoreOnly||this._setCssDimension(T,M);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),E.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(S,E){return this.lowerCanvasEl[S]=E,this.upperCanvasEl&&(this.upperCanvasEl[S]=E),this.cacheCanvasEl&&(this.cacheCanvasEl[S]=E),this[S]=E,this},_setCssDimension:function(S,E){return this.lowerCanvasEl.style[S]=E,this.upperCanvasEl&&(this.upperCanvasEl.style[S]=E),this.wrapperEl&&(this.wrapperEl.style[S]=E),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(S){var E=this._activeObject,M=this.backgroundImage,T=this.overlayImage,D,I,N;for(this.viewportTransform=S,I=0,N=this._objects.length;I<N;I++)D=this._objects[I],D.group||D.setCoords(!0);return E&&E.setCoords(),M&&M.setCoords(!0),T&&T.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(S,E){var M=S,T=this.viewportTransform.slice(0);S=d(S,f(this.viewportTransform)),T[0]=E,T[3]=E;var D=d(S,T);return T[4]+=M.x-D.x,T[5]+=M.y-D.y,this.setViewportTransform(T)},setZoom:function(S){return this.zoomToPoint(new n.Point(0,0),S),this},absolutePan:function(S){var E=this.viewportTransform.slice(0);return E[4]=-S.x,E[5]=-S.y,this.setViewportTransform(E)},relativePan:function(S){return this.absolutePan(new n.Point(-S.x-this.viewportTransform[4],-S.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(S){this.stateful&&S.setupState(),S._set("canvas",this),S.setCoords(),this.fire("object:added",{target:S}),S.fire("added")},_onObjectRemoved:function(S){this.fire("object:removed",{target:S}),S.fire("removed"),delete S.canvas},clearContext:function(S){return S.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var S=this.contextContainer;return this.renderCanvas(S,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=n.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var S={},E=this.width,M=this.height,T=f(this.viewportTransform);return S.tl=d({x:0,y:0},T),S.br=d({x:E,y:M},T),S.tr=new n.Point(S.br.x,S.tl.y),S.bl=new n.Point(S.tl.x,S.br.y),this.vptCoords=S,S},cancelRequestedRender:function(){this.isRendering&&(n.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(S,E){var M=this.viewportTransform,T=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(S),n.util.setImageSmoothing(S,this.imageSmoothingEnabled),this.fire("before:render",{ctx:S}),this._renderBackground(S),S.save(),S.transform(M[0],M[1],M[2],M[3],M[4],M[5]),this._renderObjects(S,E),S.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(S),T&&(T.canvas=this,T.shouldCache(),T._transformDone=!0,T.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(S)),this._renderOverlay(S),this.controlsAboveOverlay&&this.interactive&&this.drawControls(S),this.fire("after:render",{ctx:S})},drawClipPathOnCanvas:function(S){var E=this.viewportTransform,M=this.clipPath;S.save(),S.transform(E[0],E[1],E[2],E[3],E[4],E[5]),S.globalCompositeOperation="destination-in",M.transform(S),S.scale(1/M.zoomX,1/M.zoomY),S.drawImage(M._cacheCanvas,-M.cacheTranslationX,-M.cacheTranslationY),S.restore()},_renderObjects:function(S,E){var M,T;for(M=0,T=E.length;M<T;++M)E[M]&&E[M].render(S)},_renderBackgroundOrOverlay:function(S,E){var M=this[E+"Color"],T=this[E+"Image"],D=this.viewportTransform,I=this[E+"Vpt"];if(!(!M&&!T)){if(M){S.save(),S.beginPath(),S.moveTo(0,0),S.lineTo(this.width,0),S.lineTo(this.width,this.height),S.lineTo(0,this.height),S.closePath(),S.fillStyle=M.toLive?M.toLive(S,this):M,I&&S.transform(D[0],D[1],D[2],D[3],D[4],D[5]),S.transform(1,0,0,1,M.offsetX||0,M.offsetY||0);var N=M.gradientTransform||M.patternTransform;N&&S.transform(N[0],N[1],N[2],N[3],N[4],N[5]),S.fill(),S.restore()}if(T){S.save();var O=this.skipOffscreen;this.skipOffscreen=I,I&&S.transform(D[0],D[1],D[2],D[3],D[4],D[5]),T.render(S),this.skipOffscreen=O,S.restore()}}},_renderBackground:function(S){this._renderBackgroundOrOverlay(S,"background")},_renderOverlay:function(S){this._renderBackgroundOrOverlay(S,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new n.Point(this.width/2,this.height/2)},centerObjectH:function(S){return this._centerObject(S,new n.Point(this.getCenterPoint().x,S.getCenterPoint().y))},centerObjectV:function(S){return this._centerObject(S,new n.Point(S.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(S){var E=this.getCenterPoint();return this._centerObject(S,E)},viewportCenterObject:function(S){var E=this.getVpCenter();return this._centerObject(S,E)},viewportCenterObjectH:function(S){var E=this.getVpCenter();return this._centerObject(S,new n.Point(E.x,S.getCenterPoint().y)),this},viewportCenterObjectV:function(S){var E=this.getVpCenter();return this._centerObject(S,new n.Point(S.getCenterPoint().x,E.y))},getVpCenter:function(){var S=this.getCenterPoint(),E=f(this.viewportTransform);return d(S,E)},_centerObject:function(S,E){return S.setPositionByOrigin(E,"center","center"),S.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(S){return this.toDatalessObject(S)},toObject:function(S){return this._toObjectMethod("toObject",S)},toDatalessObject:function(S){return this._toObjectMethod("toDatalessObject",S)},_toObjectMethod:function(S,E){var M=this.clipPath,T={version:n.version,objects:this._toObjects(S,E)};return M&&!M.excludeFromExport&&(T.clipPath=this._toObject(this.clipPath,S,E)),g(T,this.__serializeBgOverlay(S,E)),n.util.populateWithProperties(this,T,E),T},_toObjects:function(S,E){return this._objects.filter(function(M){return!M.excludeFromExport}).map(function(M){return this._toObject(M,S,E)},this)},_toObject:function(S,E,M){var T;this.includeDefaultValues||(T=S.includeDefaultValues,S.includeDefaultValues=!1);var D=S[E](M);return this.includeDefaultValues||(S.includeDefaultValues=T),D},__serializeBgOverlay:function(S,E){var M={},T=this.backgroundImage,D=this.overlayImage,I=this.backgroundColor,N=this.overlayColor;return I&&I.toObject?I.excludeFromExport||(M.background=I.toObject(E)):I&&(M.background=I),N&&N.toObject?N.excludeFromExport||(M.overlay=N.toObject(E)):N&&(M.overlay=N),T&&!T.excludeFromExport&&(M.backgroundImage=this._toObject(T,S,E)),D&&!D.excludeFromExport&&(M.overlayImage=this._toObject(D,S,E)),M},svgViewportTransformation:!0,toSVG:function(S,E){S||(S={}),S.reviver=E;var M=[];return this._setSVGPreamble(M,S),this._setSVGHeader(M,S),this.clipPath&&M.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(M,"background"),this._setSVGBgOverlayImage(M,"backgroundImage",E),this._setSVGObjects(M,E),this.clipPath&&M.push(`</g>
`),this._setSVGBgOverlayColor(M,"overlay"),this._setSVGBgOverlayImage(M,"overlayImage",E),M.push("</svg>"),M.join("")},_setSVGPreamble:function(S,E){E.suppressPreamble||S.push('<?xml version="1.0" encoding="',E.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(S,E){var M=E.width||this.width,T=E.height||this.height,D,I='viewBox="0 0 '+this.width+" "+this.height+'" ',N=n.Object.NUM_FRACTION_DIGITS;E.viewBox?I='viewBox="'+E.viewBox.x+" "+E.viewBox.y+" "+E.viewBox.width+" "+E.viewBox.height+'" ':this.svgViewportTransformation&&(D=this.viewportTransform,I='viewBox="'+m(-D[4]/D[0],N)+" "+m(-D[5]/D[3],N)+" "+m(this.width/D[0],N)+" "+m(this.height/D[3],N)+'" '),S.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',M,'" ','height="',T,'" ',I,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",n.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(E),`</defs>
`)},createSVGClipPathMarkup:function(S){var E=this.clipPath;return E?(E.clipPathId="CLIPPATH_"+n.Object.__uid++,'<clipPath id="'+E.clipPathId+`" >
`+this.clipPath.toClipPathSVG(S.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var S=this,E=["background","overlay"].map(function(M){var T=S[M+"Color"];if(T&&T.toLive){var D=S[M+"Vpt"],I=S.viewportTransform,N={width:S.width/(D?I[0]:1),height:S.height/(D?I[3]:1)};return T.toSVG(N,{additionalTransform:D?n.util.matrixToSVG(I):""})}});return E.join("")},createSVGFontFacesMarkup:function(){var S="",E={},M,T,D,I,N,O,F,U,Y,Q=n.fontPaths,q=[];for(this._objects.forEach(function J(re){q.push(re),re._objects&&re._objects.forEach(J)}),U=0,Y=q.length;U<Y;U++)if(M=q[U],T=M.fontFamily,!(M.type.indexOf("text")===-1||E[T]||!Q[T])&&(E[T]=!0,!!M.styles)){D=M.styles;for(N in D){I=D[N];for(F in I)O=I[F],T=O.fontFamily,!E[T]&&Q[T]&&(E[T]=!0)}}for(var ne in E)S+=[`		@font-face {
`,"			font-family: '",ne,`';
`,"			src: url('",Q[ne],`');
`,`		}
`].join("");return S&&(S=['	<style type="text/css">',`<![CDATA[
`,S,"]]>",`</style>
`].join("")),S},_setSVGObjects:function(S,E){var M,T,D,I=this._objects;for(T=0,D=I.length;T<D;T++)M=I[T],!M.excludeFromExport&&this._setSVGObject(S,M,E)},_setSVGObject:function(S,E,M){S.push(E.toSVG(M))},_setSVGBgOverlayImage:function(S,E,M){this[E]&&!this[E].excludeFromExport&&this[E].toSVG&&S.push(this[E].toSVG(M))},_setSVGBgOverlayColor:function(S,E){var M=this[E+"Color"],T=this.viewportTransform,D=this.width,I=this.height;if(!!M)if(M.toLive){var N=M.repeat,O=n.util.invertTransform(T),F=this[E+"Vpt"],U=F?n.util.matrixToSVG(O):"";S.push('<rect transform="'+U+" translate(",D/2,",",I/2,')"',' x="',M.offsetX-D/2,'" y="',M.offsetY-I/2,'" ','width="',N==="repeat-y"||N==="no-repeat"?M.source.width:D,'" height="',N==="repeat-x"||N==="no-repeat"?M.source.height:I,'" fill="url(#SVGID_'+M.id+')"',`></rect>
`)}else S.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',M,'"',`></rect>
`)},sendToBack:function(S){if(!S)return this;var E=this._activeObject,M,T,D;if(S===E&&S.type==="activeSelection")for(D=E._objects,M=D.length;M--;)T=D[M],y(this._objects,T),this._objects.unshift(T);else y(this._objects,S),this._objects.unshift(S);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(S){if(!S)return this;var E=this._activeObject,M,T,D;if(S===E&&S.type==="activeSelection")for(D=E._objects,M=0;M<D.length;M++)T=D[M],y(this._objects,T),this._objects.push(T);else y(this._objects,S),this._objects.push(S);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(S,E){if(!S)return this;var M=this._activeObject,T,D,I,N,O,F=0;if(S===M&&S.type==="activeSelection")for(O=M._objects,T=0;T<O.length;T++)D=O[T],I=this._objects.indexOf(D),I>0+F&&(N=I-1,y(this._objects,D),this._objects.splice(N,0,D)),F++;else I=this._objects.indexOf(S),I!==0&&(N=this._findNewLowerIndex(S,I,E),y(this._objects,S),this._objects.splice(N,0,S));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(S,E,M){var T,D;if(M)for(T=E,D=E-1;D>=0;--D){var I=S.intersectsWithObject(this._objects[D])||S.isContainedWithinObject(this._objects[D])||this._objects[D].isContainedWithinObject(S);if(I){T=D;break}}else T=E-1;return T},bringForward:function(S,E){if(!S)return this;var M=this._activeObject,T,D,I,N,O,F=0;if(S===M&&S.type==="activeSelection")for(O=M._objects,T=O.length;T--;)D=O[T],I=this._objects.indexOf(D),I<this._objects.length-1-F&&(N=I+1,y(this._objects,D),this._objects.splice(N,0,D)),F++;else I=this._objects.indexOf(S),I!==this._objects.length-1&&(N=this._findNewUpperIndex(S,I,E),y(this._objects,S),this._objects.splice(N,0,S));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(S,E,M){var T,D,I;if(M)for(T=E,D=E+1,I=this._objects.length;D<I;++D){var N=S.intersectsWithObject(this._objects[D])||S.isContainedWithinObject(this._objects[D])||this._objects[D].isContainedWithinObject(S);if(N){T=D;break}}else T=E+1;return T},moveTo:function(S,E){return y(this._objects,S),this._objects.splice(E,0,S),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(n.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(S){S.dispose&&S.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),n.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),n.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),g(n.StaticCanvas.prototype,n.Observable),g(n.StaticCanvas.prototype,n.Collection),g(n.StaticCanvas.prototype,n.DataURLExporter),g(n.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(S){var E=k();if(!E||!E.getContext)return null;var M=E.getContext("2d");if(!M)return null;switch(S){case"setLineDash":return typeof M.setLineDash<"u";default:return null}}}),n.StaticCanvas.prototype.toJSON=n.StaticCanvas.prototype.toObject,n.isLikelyNode&&(n.StaticCanvas.prototype.createPNGStream=function(){var S=x(this.lowerCanvasEl);return S&&S.createPNGStream()},n.StaticCanvas.prototype.createJPEGStream=function(S){var E=x(this.lowerCanvasEl);return E&&E.createJPEGStream(S)})}(),n.BaseBrush=n.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(g){g.strokeStyle=this.color,g.lineWidth=this.width,g.lineCap=this.strokeLineCap,g.miterLimit=this.strokeMiterLimit,g.lineJoin=this.strokeLineJoin,g.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(g){var v=this.canvas.viewportTransform;g.save(),g.transform(v[0],v[1],v[2],v[3],v[4],v[5])},_setShadow:function(){if(!!this.shadow){var g=this.canvas,v=this.shadow,y=g.contextTop,m=g.getZoom();g&&g._isRetinaScaling()&&(m*=n.devicePixelRatio),y.shadowColor=v.color,y.shadowBlur=v.blur*m,y.shadowOffsetX=v.offsetX*m,y.shadowOffsetY=v.offsetY*m}},needsFullRender:function(){var g=new n.Color(this.color);return g.getAlpha()<1||!!this.shadow},_resetShadow:function(){var g=this.canvas.contextTop;g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0},_isOutSideCanvas:function(g){return g.x<0||g.x>this.canvas.getWidth()||g.y<0||g.y>this.canvas.getHeight()}}),function(){n.PencilBrush=n.util.createClass(n.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(g){this.canvas=g,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(g,v,y){var m=v.midPointFrom(y);return g.quadraticCurveTo(v.x,v.y,m.x,m.y),m},onMouseDown:function(g,v){!this.canvas._isMainEvent(v.e)||(this.drawStraightLine=v.e[this.straightLineKey],this._prepareForDrawing(g),this._captureDrawingPath(g),this._render())},onMouseMove:function(g,v){if(!!this.canvas._isMainEvent(v.e)&&(this.drawStraightLine=v.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g))&&this._captureDrawingPath(g)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var y=this._points,m=y.length,d=this.canvas.contextTop;this._saveAndTransform(d),this.oldEnd&&(d.beginPath(),d.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(d,y[m-2],y[m-1],!0),d.stroke(),d.restore()}},onMouseUp:function(g){return this.canvas._isMainEvent(g.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(g){var v=new n.Point(g.x,g.y);this._reset(),this._addPoint(v),this.canvas.contextTop.moveTo(v.x,v.y)},_addPoint:function(g){return this._points.length>1&&g.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(g),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(g){var v=new n.Point(g.x,g.y);return this._addPoint(v)},_render:function(g){var v,y,m=this._points[0],d=this._points[1];if(g=g||this.canvas.contextTop,this._saveAndTransform(g),g.beginPath(),this._points.length===2&&m.x===d.x&&m.y===d.y){var f=this.width/1e3;m=new n.Point(m.x,m.y),d=new n.Point(d.x,d.y),m.x-=f,d.x+=f}for(g.moveTo(m.x,m.y),v=1,y=this._points.length;v<y;v++)this._drawSegment(g,m,d),m=this._points[v],d=this._points[v+1];g.lineTo(m.x,m.y),g.stroke(),g.restore()},convertPointsToSVGPath:function(g){var v=this.width/1e3;return n.util.getSmoothPathFromPoints(g,v)},_isEmptySVGPath:function(g){var v=n.util.joinPath(g);return v==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(g){var v=new n.Path(g,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,v.shadow=new n.Shadow(this.shadow)),v},decimatePoints:function(g,v){if(g.length<=2)return g;var y=this.canvas.getZoom(),m=Math.pow(v/y,2),d,f=g.length-1,x=g[0],k=[x],P;for(d=1;d<f-1;d++)P=Math.pow(x.x-g[d].x,2)+Math.pow(x.y-g[d].y,2),P>=m&&(x=g[d],k.push(x));return k.push(g[f]),k},_finalizeAndAddPath:function(){var g=this.canvas.contextTop;g.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var v=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(v)){this.canvas.requestRenderAll();return}var y=this.createPath(v);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:y}),this.canvas.add(y),this.canvas.requestRenderAll(),y.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:y})}})}(),n.CircleBrush=n.util.createClass(n.BaseBrush,{width:10,initialize:function(g){this.canvas=g,this.points=[]},drawDot:function(g){var v=this.addPoint(g),y=this.canvas.contextTop;this._saveAndTransform(y),this.dot(y,v),y.restore()},dot:function(g,v){g.fillStyle=v.fill,g.beginPath(),g.arc(v.x,v.y,v.radius,0,Math.PI*2,!1),g.closePath(),g.fill()},onMouseDown:function(g){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(g)},_render:function(){var g=this.canvas.contextTop,v,y,m=this.points;for(this._saveAndTransform(g),v=0,y=m.length;v<y;v++)this.dot(g,m[v]);g.restore()},onMouseMove:function(g){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(g),this._render()):this.drawDot(g))},onMouseUp:function(){var g=this.canvas.renderOnAddRemove,v,y;this.canvas.renderOnAddRemove=!1;var m=[];for(v=0,y=this.points.length;v<y;v++){var d=this.points[v],f=new n.Circle({radius:d.radius,left:d.x,top:d.y,originX:"center",originY:"center",fill:d.fill});this.shadow&&(f.shadow=new n.Shadow(this.shadow)),m.push(f)}var x=new n.Group(m);x.canvas=this.canvas,this.canvas.fire("before:path:created",{path:x}),this.canvas.add(x),this.canvas.fire("path:created",{path:x}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=g,this.canvas.requestRenderAll()},addPoint:function(g){var v=new n.Point(g.x,g.y),y=n.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,m=new n.Color(this.color).setAlpha(n.util.getRandomInt(0,100)/100).toRgba();return v.radius=y,v.fill=m,this.points.push(v),v}}),n.SprayBrush=n.util.createClass(n.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(g){this.canvas=g,this.sprayChunks=[]},onMouseDown:function(g){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(g),this.render(this.sprayChunkPoints)},onMouseMove:function(g){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(g)||(this.addSprayChunk(g),this.render(this.sprayChunkPoints))},onMouseUp:function(){var g=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var v=[],y=0,m=this.sprayChunks.length;y<m;y++)for(var d=this.sprayChunks[y],f=0,x=d.length;f<x;f++){var k=new n.Rect({width:d[f].width,height:d[f].width,left:d[f].x+1,top:d[f].y+1,originX:"center",originY:"center",fill:this.color});v.push(k)}this.optimizeOverlapping&&(v=this._getOptimizedRects(v));var P=new n.Group(v);this.shadow&&P.set("shadow",new n.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:P}),this.canvas.add(P),this.canvas.fire("path:created",{path:P}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=g,this.canvas.requestRenderAll()},_getOptimizedRects:function(g){var v={},y,m,d;for(m=0,d=g.length;m<d;m++)y=g[m].left+""+g[m].top,v[y]||(v[y]=g[m]);var f=[];for(y in v)f.push(v[y]);return f},render:function(g){var v=this.canvas.contextTop,y,m;for(v.fillStyle=this.color,this._saveAndTransform(v),y=0,m=g.length;y<m;y++){var d=g[y];typeof d.opacity<"u"&&(v.globalAlpha=d.opacity),v.fillRect(d.x,d.y,d.width,d.width)}v.restore()},_render:function(){var g=this.canvas.contextTop,v,y;for(g.fillStyle=this.color,this._saveAndTransform(g),v=0,y=this.sprayChunks.length;v<y;v++)this.render(this.sprayChunks[v]);g.restore()},addSprayChunk:function(g){this.sprayChunkPoints=[];var v,y,m,d=this.width/2,f;for(f=0;f<this.density;f++){v=n.util.getRandomInt(g.x-d,g.x+d),y=n.util.getRandomInt(g.y-d,g.y+d),this.dotWidthVariance?m=n.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):m=this.dotWidth;var x=new n.Point(v,y);x.width=m,this.randomOpacity&&(x.opacity=n.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(x)}this.sprayChunks.push(this.sprayChunkPoints)}}),n.PatternBrush=n.util.createClass(n.PencilBrush,{getPatternSrc:function(){var g=20,v=5,y=n.util.createCanvasElement(),m=y.getContext("2d");return y.width=y.height=g+v,m.fillStyle=this.color,m.beginPath(),m.arc(g/2,g/2,g/2,0,Math.PI*2,!1),m.closePath(),m.fill(),y},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(g){return g.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(g){this.callSuper("_setBrushStyles",g),g.strokeStyle=this.getPattern(g)},createPath:function(g){var v=this.callSuper("createPath",g),y=v._getLeftTopCoords().scalarAdd(v.strokeWidth/2);return v.stroke=new n.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-y.x,offsetY:-y.y}),v}}),function(){var g=n.util.getPointer,v=n.util.degreesToRadians,y=n.util.isTouchEvent;n.Canvas=n.util.createClass(n.StaticCanvas,{initialize:function(d,f){f||(f={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(d,f),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=n.PencilBrush&&new n.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var d=this.getActiveObjects(),f,x,k;if(d.length>0&&!this.preserveObjectStacking){x=[],k=[];for(var P=0,S=this._objects.length;P<S;P++)f=this._objects[P],d.indexOf(f)===-1?x.push(f):k.push(f);d.length>1&&(this._activeObject._objects=k),x.push.apply(x,k)}else x=this._objects;return x},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var d=this.contextContainer;return this.renderCanvas(d,this._chooseObjectsToRender()),this},renderTopLayer:function(d){d.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(d),this.contextTopDirty=!0),d.restore()},renderTop:function(){var d=this.contextTop;return this.clearContext(d),this.renderTopLayer(d),this.fire("after:render"),this},_normalizePointer:function(d,f){var x=d.calcTransformMatrix(),k=n.util.invertTransform(x),P=this.restorePointerVpt(f);return n.util.transformPoint(P,k)},isTargetTransparent:function(d,f,x){if(d.shouldCache()&&d._cacheCanvas&&d!==this._activeObject){var k=this._normalizePointer(d,{x:f,y:x}),P=Math.max(d.cacheTranslationX+k.x*d.zoomX,0),S=Math.max(d.cacheTranslationY+k.y*d.zoomY,0),D=n.util.isTransparent(d._cacheContext,Math.round(P),Math.round(S),this.targetFindTolerance);return D}var E=this.contextCache,M=d.selectionBackgroundColor,T=this.viewportTransform;d.selectionBackgroundColor="",this.clearContext(E),E.save(),E.transform(T[0],T[1],T[2],T[3],T[4],T[5]),d.render(E),E.restore(),d.selectionBackgroundColor=M;var D=n.util.isTransparent(E,f,x,this.targetFindTolerance);return D},_isSelectionKeyPressed:function(d){var f=!1;return Array.isArray(this.selectionKey)?f=!!this.selectionKey.find(function(x){return d[x]===!0}):f=d[this.selectionKey],f},_shouldClearSelection:function(d,f){var x=this.getActiveObjects(),k=this._activeObject;return!f||f&&k&&x.length>1&&x.indexOf(f)===-1&&k!==f&&!this._isSelectionKeyPressed(d)||f&&!f.evented||f&&!f.selectable&&k&&k!==f},_shouldCenterTransform:function(d,f,x){if(!!d){var k;return f==="scale"||f==="scaleX"||f==="scaleY"||f==="resizing"?k=this.centeredScaling||d.centeredScaling:f==="rotate"&&(k=this.centeredRotation||d.centeredRotation),k?!x:x}},_getOriginFromCorner:function(d,f){var x={x:d.originX,y:d.originY};return f==="ml"||f==="tl"||f==="bl"?x.x="right":(f==="mr"||f==="tr"||f==="br")&&(x.x="left"),f==="tl"||f==="mt"||f==="tr"?x.y="bottom":(f==="bl"||f==="mb"||f==="br")&&(x.y="top"),x},_getActionFromCorner:function(d,f,x,k){if(!f||!d)return"drag";var P=k.controls[f];return P.getActionName(x,P,k)},_setupCurrentTransform:function(d,f,x){if(!!f){var k=this.getPointer(d),P=f.__corner,S=f.controls[P],E=x&&P?S.getActionHandler(d,f,S):n.controlsUtils.dragHandler,M=this._getActionFromCorner(x,P,d,f),T=this._getOriginFromCorner(f,P),D=d[this.centeredKey],I={target:f,action:M,actionHandler:E,corner:P,scaleX:f.scaleX,scaleY:f.scaleY,skewX:f.skewX,skewY:f.skewY,offsetX:k.x-f.left,offsetY:k.y-f.top,originX:T.x,originY:T.y,ex:k.x,ey:k.y,lastX:k.x,lastY:k.y,theta:v(f.angle),width:f.width*f.scaleX,shiftKey:d.shiftKey,altKey:D,original:n.util.saveObjectTransform(f)};this._shouldCenterTransform(f,M,D)&&(I.originX="center",I.originY="center"),I.original.originX=T.x,I.original.originY=T.y,this._currentTransform=I,this._beforeTransform(d)}},setCursor:function(d){this.upperCanvasEl.style.cursor=d},_drawSelection:function(d){var f=this._groupSelector,x=new n.Point(f.ex,f.ey),k=n.util.transformPoint(x,this.viewportTransform),P=new n.Point(f.ex+f.left,f.ey+f.top),S=n.util.transformPoint(P,this.viewportTransform),E=Math.min(k.x,S.x),M=Math.min(k.y,S.y),T=Math.max(k.x,S.x),D=Math.max(k.y,S.y),I=this.selectionLineWidth/2;this.selectionColor&&(d.fillStyle=this.selectionColor,d.fillRect(E,M,T-E,D-M)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(d.lineWidth=this.selectionLineWidth,d.strokeStyle=this.selectionBorderColor,E+=I,M+=I,T-=I,D-=I,n.Object.prototype._setLineDash.call(this,d,this.selectionDashArray),d.strokeRect(E,M,T-E,D-M))},findTarget:function(d,f){if(!this.skipTargetFind){var x=!0,k=this.getPointer(d,x),P=this._activeObject,S=this.getActiveObjects(),E,M,T=y(d),D=S.length>1&&!f||S.length===1;if(this.targets=[],D&&P._findTargetCorner(k,T)||S.length>1&&!f&&P===this._searchPossibleTargets([P],k))return P;if(S.length===1&&P===this._searchPossibleTargets([P],k))if(this.preserveObjectStacking)E=P,M=this.targets,this.targets=[];else return P;var I=this._searchPossibleTargets(this._objects,k);return d[this.altSelectionKey]&&I&&E&&I!==E&&(I=E,this.targets=M),I}},_checkTarget:function(d,f,x){if(f&&f.visible&&f.evented&&f.containsPoint(d))if((this.perPixelTargetFind||f.perPixelTargetFind)&&!f.isEditing){var k=this.isTargetTransparent(f,x.x,x.y);if(!k)return!0}else return!0},_searchPossibleTargets:function(d,f){for(var x,k=d.length,P;k--;){var S=d[k],E=S.group?this._normalizePointer(S.group,f):f;if(this._checkTarget(E,S,f)){x=d[k],x.subTargetCheck&&x instanceof n.Group&&(P=this._searchPossibleTargets(x._objects,f),P&&this.targets.push(P));break}}return x},restorePointerVpt:function(d){return n.util.transformPoint(d,n.util.invertTransform(this.viewportTransform))},getPointer:function(d,f){if(this._absolutePointer&&!f)return this._absolutePointer;if(this._pointer&&f)return this._pointer;var x=g(d),k=this.upperCanvasEl,P=k.getBoundingClientRect(),S=P.width||0,E=P.height||0,M;(!S||!E)&&("top"in P&&"bottom"in P&&(E=Math.abs(P.top-P.bottom)),"right"in P&&"left"in P&&(S=Math.abs(P.right-P.left))),this.calcOffset(),x.x=x.x-this._offset.left,x.y=x.y-this._offset.top,f||(x=this.restorePointerVpt(x));var T=this.getRetinaScaling();return T!==1&&(x.x/=T,x.y/=T),S===0||E===0?M={width:1,height:1}:M={width:k.width/S,height:k.height/E},{x:x.x*M.width,y:x.y*M.height}},_createUpperCanvas:function(){var d=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),f=this.lowerCanvasEl,x=this.upperCanvasEl;x?x.className="":(x=this._createCanvasElement(),this.upperCanvasEl=x),n.util.addClass(x,"upper-canvas "+d),this.wrapperEl.appendChild(x),this._copyCanvasStyle(f,x),this._applyCanvasStyle(x),this.contextTop=x.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=n.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),n.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),n.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(d){var f=this.width||d.width,x=this.height||d.height;n.util.setStyle(d,{position:"absolute",width:f+"px",height:x+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),d.width=f,d.height=x,n.util.makeElementUnselectable(d)},_copyCanvasStyle:function(d,f){f.style.cssText=d.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var d=this._activeObject;return d?d.type==="activeSelection"&&d._objects?d._objects.slice(0):[d]:[]},_onObjectRemoved:function(d){d===this._activeObject&&(this.fire("before:selection:cleared",{target:d}),this._discardActiveObject(),this.fire("selection:cleared",{target:d}),d.fire("deselected")),d===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",d)},_fireSelectionEvents:function(d,f){var x=!1,k=this.getActiveObjects(),P=[],S=[];d.forEach(function(E){k.indexOf(E)===-1&&(x=!0,E.fire("deselected",{e:f,target:E}),S.push(E))}),k.forEach(function(E){d.indexOf(E)===-1&&(x=!0,E.fire("selected",{e:f,target:E}),P.push(E))}),d.length>0&&k.length>0?x&&this.fire("selection:updated",{e:f,selected:P,deselected:S}):k.length>0?this.fire("selection:created",{e:f,selected:P}):d.length>0&&this.fire("selection:cleared",{e:f,deselected:S})},setActiveObject:function(d,f){var x=this.getActiveObjects();return this._setActiveObject(d,f),this._fireSelectionEvents(x,f),this},_setActiveObject:function(d,f){return this._activeObject===d||!this._discardActiveObject(f,d)||d.onSelect({e:f})?!1:(this._activeObject=d,!0)},_discardActiveObject:function(d,f){var x=this._activeObject;if(x){if(x.onDeselect({e:d,object:f}))return!1;this._activeObject=null}return!0},discardActiveObject:function(d){var f=this.getActiveObjects(),x=this.getActiveObject();return f.length&&this.fire("before:selection:cleared",{target:x,e:d}),this._discardActiveObject(d),this._fireSelectionEvents(f,d),this},dispose:function(){var d=this.wrapperEl;return this.removeListeners(),d.removeChild(this.upperCanvasEl),d.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(f){n.util.cleanUpJsdomNode(this[f]),this[f]=void 0}.bind(this)),d.parentNode&&d.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,n.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(d){var f=this._activeObject;f&&f._renderControls(d)},_toObject:function(d,f,x){var k=this._realizeGroupTransformOnObject(d),P=this.callSuper("_toObject",d,f,x);return this._unwindGroupTransformOnObject(d,k),P},_realizeGroupTransformOnObject:function(d){if(d.group&&d.group.type==="activeSelection"&&this._activeObject===d.group){var f=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],x={};return f.forEach(function(k){x[k]=d[k]}),n.util.addTransformToObject(d,this._activeObject.calcOwnMatrix()),x}else return null},_unwindGroupTransformOnObject:function(d,f){f&&d.set(f)},_setSVGObject:function(d,f,x){var k=this._realizeGroupTransformOnObject(f);this.callSuper("_setSVGObject",d,f,x),this._unwindGroupTransformOnObject(f,k)},setViewportTransform:function(d){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),n.StaticCanvas.prototype.setViewportTransform.call(this,d)}});for(var m in n.StaticCanvas)m!=="prototype"&&(n.Canvas[m]=n.StaticCanvas[m])}(),function(){var g=n.util.addListener,v=n.util.removeListener,y=3,m=2,d=1,f={passive:!1};function x(k,P){return k.button&&k.button===P-1}n.util.object.extend(n.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(g,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(k,P){var S=this.upperCanvasEl,E=this._getEventPrefix();k(n.window,"resize",this._onResize),k(S,E+"down",this._onMouseDown),k(S,E+"move",this._onMouseMove,f),k(S,E+"out",this._onMouseOut),k(S,E+"enter",this._onMouseEnter),k(S,"wheel",this._onMouseWheel),k(S,"contextmenu",this._onContextMenu),k(S,"dblclick",this._onDoubleClick),k(S,"dragover",this._onDragOver),k(S,"dragenter",this._onDragEnter),k(S,"dragleave",this._onDragLeave),k(S,"drop",this._onDrop),this.enablePointerEvents||k(S,"touchstart",this._onTouchStart,f),typeof eventjs<"u"&&P in eventjs&&(eventjs[P](S,"gesture",this._onGesture),eventjs[P](S,"drag",this._onDrag),eventjs[P](S,"orientation",this._onOrientationChange),eventjs[P](S,"shake",this._onShake),eventjs[P](S,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(v,"remove");var k=this._getEventPrefix();v(n.document,k+"up",this._onMouseUp),v(n.document,"touchend",this._onTouchEnd,f),v(n.document,k+"move",this._onMouseMove,f),v(n.document,"touchmove",this._onMouseMove,f)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(k,P){this.__onTransformGesture&&this.__onTransformGesture(k,P)},_onDrag:function(k,P){this.__onDrag&&this.__onDrag(k,P)},_onMouseWheel:function(k){this.__onMouseWheel(k)},_onMouseOut:function(k){var P=this._hoveredTarget;this.fire("mouse:out",{target:P,e:k}),this._hoveredTarget=null,P&&P.fire("mouseout",{e:k});var S=this;this._hoveredTargets.forEach(function(E){S.fire("mouse:out",{target:E,e:k}),E&&E.fire("mouseout",{e:k})}),this._hoveredTargets=[]},_onMouseEnter:function(k){!this._currentTransform&&!this.findTarget(k)&&(this.fire("mouse:over",{target:null,e:k}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(k,P){this.__onOrientationChange&&this.__onOrientationChange(k,P)},_onShake:function(k,P){this.__onShake&&this.__onShake(k,P)},_onLongPress:function(k,P){this.__onLongPress&&this.__onLongPress(k,P)},_onDragOver:function(k){k.preventDefault();var P=this._simpleEventHandler("dragover",k);this._fireEnterLeaveEvents(P,k)},_onDrop:function(k){return this._simpleEventHandler("drop:before",k),this._simpleEventHandler("drop",k)},_onContextMenu:function(k){return this.stopContextMenu&&(k.stopPropagation(),k.preventDefault()),!1},_onDoubleClick:function(k){this._cacheTransformEventData(k),this._handleEvent(k,"dblclick"),this._resetTransformEventData(k)},getPointerId:function(k){var P=k.changedTouches;return P?P[0]&&P[0].identifier:this.enablePointerEvents?k.pointerId:-1},_isMainEvent:function(k){return k.isPrimary===!0?!0:k.isPrimary===!1?!1:k.type==="touchend"&&k.touches.length===0?!0:k.changedTouches?k.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(k){k.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(k)),this.__onMouseDown(k),this._resetTransformEventData();var P=this.upperCanvasEl,S=this._getEventPrefix();g(n.document,"touchend",this._onTouchEnd,f),g(n.document,"touchmove",this._onMouseMove,f),v(P,S+"down",this._onMouseDown)},_onMouseDown:function(k){this.__onMouseDown(k),this._resetTransformEventData();var P=this.upperCanvasEl,S=this._getEventPrefix();v(P,S+"move",this._onMouseMove,f),g(n.document,S+"up",this._onMouseUp),g(n.document,S+"move",this._onMouseMove,f)},_onTouchEnd:function(k){if(!(k.touches.length>0)){this.__onMouseUp(k),this._resetTransformEventData(),this.mainTouchId=null;var P=this._getEventPrefix();v(n.document,"touchend",this._onTouchEnd,f),v(n.document,"touchmove",this._onMouseMove,f);var S=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){g(S.upperCanvasEl,P+"down",S._onMouseDown),S._willAddMouseDown=0},400)}},_onMouseUp:function(k){this.__onMouseUp(k),this._resetTransformEventData();var P=this.upperCanvasEl,S=this._getEventPrefix();this._isMainEvent(k)&&(v(n.document,S+"up",this._onMouseUp),v(n.document,S+"move",this._onMouseMove,f),g(P,S+"move",this._onMouseMove,f))},_onMouseMove:function(k){!this.allowTouchScrolling&&k.preventDefault&&k.preventDefault(),this.__onMouseMove(k)},_onResize:function(){this.calcOffset()},_shouldRender:function(k){var P=this._activeObject;return!!P!=!!k||P&&k&&P!==k?!0:(P&&P.isEditing,!1)},__onMouseUp:function(k){var P,S=this._currentTransform,E=this._groupSelector,M=!1,T=!E||E.left===0&&E.top===0;if(this._cacheTransformEventData(k),P=this._target,this._handleEvent(k,"up:before"),x(k,y)){this.fireRightClick&&this._handleEvent(k,"up",y,T);return}if(x(k,m)){this.fireMiddleClick&&this._handleEvent(k,"up",m,T),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(k);return}if(!!this._isMainEvent(k)){if(S&&(this._finalizeCurrentTransform(k),M=S.actionPerformed),!T){var D=P===this._activeObject;this._maybeGroupObjects(k),M||(M=this._shouldRender(P)||!D&&P===this._activeObject)}var I,N;if(P){if(I=P._findTargetCorner(this.getPointer(k,!0),n.util.isTouchEvent(k)),P.selectable&&P!==this._activeObject&&P.activeOn==="up")this.setActiveObject(P,k),M=!0;else{var O=P.controls[I],F=O&&O.getMouseUpHandler(k,P,O);F&&(N=this.getPointer(k),F(k,S,N.x,N.y))}P.isMoving=!1}if(S&&(S.target!==P||S.corner!==I)){var U=S.target&&S.target.controls[S.corner],Y=U&&U.getMouseUpHandler(k,P,O);N=N||this.getPointer(k),Y&&Y(k,S,N.x,N.y)}this._setCursorFromEvent(k,P),this._handleEvent(k,"up",d,T),this._groupSelector=null,this._currentTransform=null,P&&(P.__corner=0),M?this.requestRenderAll():T||this.renderTop()}},_simpleEventHandler:function(k,P){var S=this.findTarget(P),E=this.targets,M={e:P,target:S,subTargets:E};if(this.fire(k,M),S&&S.fire(k,M),!E)return S;for(var T=0;T<E.length;T++)E[T].fire(k,M);return S},_handleEvent:function(k,P,S,E){var M=this._target,T=this.targets||[],D={e:k,target:M,subTargets:T,button:S||d,isClick:E||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};P==="up"&&(D.currentTarget=this.findTarget(k),D.currentSubTargets=this.targets),this.fire("mouse:"+P,D),M&&M.fire("mouse"+P,D);for(var I=0;I<T.length;I++)T[I].fire("mouse"+P,D)},_finalizeCurrentTransform:function(k){var P=this._currentTransform,S=P.target,E={e:k,target:S,transform:P,action:P.action};S._scaling&&(S._scaling=!1),S.setCoords(),(P.actionPerformed||this.stateful&&S.hasStateChanged())&&this._fire("modified",E)},_onMouseDownInDrawingMode:function(k){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(k).requestRenderAll();var P=this.getPointer(k);this.freeDrawingBrush.onMouseDown(P,{e:k,pointer:P}),this._handleEvent(k,"down")},_onMouseMoveInDrawingMode:function(k){if(this._isCurrentlyDrawing){var P=this.getPointer(k);this.freeDrawingBrush.onMouseMove(P,{e:k,pointer:P})}this.setCursor(this.freeDrawingCursor),this._handleEvent(k,"move")},_onMouseUpInDrawingMode:function(k){var P=this.getPointer(k);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:k,pointer:P}),this._handleEvent(k,"up")},__onMouseDown:function(k){this._cacheTransformEventData(k),this._handleEvent(k,"down:before");var P=this._target;if(x(k,y)){this.fireRightClick&&this._handleEvent(k,"down",y);return}if(x(k,m)){this.fireMiddleClick&&this._handleEvent(k,"down",m);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(k);return}if(!!this._isMainEvent(k)&&!this._currentTransform){var S=this._pointer;this._previousPointer=S;var E=this._shouldRender(P),M=this._shouldGroup(k,P);if(this._shouldClearSelection(k,P)?this.discardActiveObject(k):M&&(this._handleGrouping(k,P),P=this._activeObject),this.selection&&(!P||!P.selectable&&!P.isEditing&&P!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),P){var T=P===this._activeObject;P.selectable&&P.activeOn==="down"&&this.setActiveObject(P,k);var D=P._findTargetCorner(this.getPointer(k,!0),n.util.isTouchEvent(k));if(P.__corner=D,P===this._activeObject&&(D||!M)){this._setupCurrentTransform(k,P,T);var I=P.controls[D],S=this.getPointer(k),N=I&&I.getMouseDownHandler(k,P,I);N&&N(k,this._currentTransform,S.x,S.y)}}this._handleEvent(k,"down"),(E||M)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(k){this._resetTransformEventData(),this._pointer=this.getPointer(k,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(k)||null},_beforeTransform:function(k){var P=this._currentTransform;this.stateful&&P.target.saveState(),this.fire("before:transform",{e:k,transform:P})},__onMouseMove:function(k){this._handleEvent(k,"move:before"),this._cacheTransformEventData(k);var P,S;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(k);return}if(!!this._isMainEvent(k)){var E=this._groupSelector;E?(S=this._absolutePointer,E.left=S.x-E.ex,E.top=S.y-E.ey,this.renderTop()):this._currentTransform?this._transformObject(k):(P=this.findTarget(k)||null,this._setCursorFromEvent(k,P),this._fireOverOutEvents(P,k)),this._handleEvent(k,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(k,P){var S=this._hoveredTarget,E=this._hoveredTargets,M=this.targets,T=Math.max(E.length,M.length);this.fireSyntheticInOutEvents(k,P,{oldTarget:S,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var D=0;D<T;D++)this.fireSyntheticInOutEvents(M[D],P,{oldTarget:E[D],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=k,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(k,P){var S=this._draggedoverTarget,E=this._hoveredTargets,M=this.targets,T=Math.max(E.length,M.length);this.fireSyntheticInOutEvents(k,P,{oldTarget:S,evtOut:"dragleave",evtIn:"dragenter"});for(var D=0;D<T;D++)this.fireSyntheticInOutEvents(M[D],P,{oldTarget:E[D],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=k},fireSyntheticInOutEvents:function(k,P,S){var E,M,T=S.oldTarget,D,I,N=T!==k,O=S.canvasEvtIn,F=S.canvasEvtOut;N&&(E={e:P,target:k,previousTarget:T},M={e:P,target:T,nextTarget:k}),I=k&&N,D=T&&N,D&&(F&&this.fire(F,M),T.fire(S.evtOut,M)),I&&(O&&this.fire(O,E),k.fire(S.evtIn,E))},__onMouseWheel:function(k){this._cacheTransformEventData(k),this._handleEvent(k,"wheel"),this._resetTransformEventData()},_transformObject:function(k){var P=this.getPointer(k),S=this._currentTransform;S.reset=!1,S.shiftKey=k.shiftKey,S.altKey=k[this.centeredKey],this._performTransformAction(k,S,P),S.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(k,P,S){var E=S.x,M=S.y,T=P.action,D=!1,I=P.actionHandler;I&&(D=I(k,P,E,M)),T==="drag"&&D&&(P.target.isMoving=!0,this.setCursor(P.target.moveCursor||this.moveCursor)),P.actionPerformed=P.actionPerformed||D},_fire:n.controlsUtils.fireEvent,_setCursorFromEvent:function(k,P){if(!P)return this.setCursor(this.defaultCursor),!1;var S=P.hoverCursor||this.hoverCursor,E=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,M=(!E||!E.contains(P))&&P._findTargetCorner(this.getPointer(k,!0));M?this.setCursor(this.getCornerCursor(M,P,k)):(P.subTargetCheck&&this.targets.concat().reverse().map(function(T){S=T.hoverCursor||S}),this.setCursor(S))},getCornerCursor:function(k,P,S){var E=P.controls[k];return E.cursorStyleHandler(S,E,P)}})}(),function(){var g=Math.min,v=Math.max;n.util.object.extend(n.Canvas.prototype,{_shouldGroup:function(y,m){var d=this._activeObject;return d&&this._isSelectionKeyPressed(y)&&m&&m.selectable&&this.selection&&(d!==m||d.type==="activeSelection")&&!m.onSelect({e:y})},_handleGrouping:function(y,m){var d=this._activeObject;d.__corner||m===d&&(m=this.findTarget(y,!0),!m||!m.selectable)||(d&&d.type==="activeSelection"?this._updateActiveSelection(m,y):this._createActiveSelection(m,y))},_updateActiveSelection:function(y,m){var d=this._activeObject,f=d._objects.slice(0);d.contains(y)?(d.removeWithUpdate(y),this._hoveredTarget=y,this._hoveredTargets=this.targets.concat(),d.size()===1&&this._setActiveObject(d.item(0),m)):(d.addWithUpdate(y),this._hoveredTarget=d,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(f,m)},_createActiveSelection:function(y,m){var d=this.getActiveObjects(),f=this._createGroup(y);this._hoveredTarget=f,this._setActiveObject(f,m),this._fireSelectionEvents(d,m)},_createGroup:function(y){var m=this._objects,d=m.indexOf(this._activeObject)<m.indexOf(y),f=d?[this._activeObject,y]:[y,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new n.ActiveSelection(f,{canvas:this})},_groupSelectedObjects:function(y){var m=this._collectObjects(y),d;m.length===1?this.setActiveObject(m[0],y):m.length>1&&(d=new n.ActiveSelection(m.reverse(),{canvas:this}),this.setActiveObject(d,y))},_collectObjects:function(y){for(var m=[],d,f=this._groupSelector.ex,x=this._groupSelector.ey,k=f+this._groupSelector.left,P=x+this._groupSelector.top,S=new n.Point(g(f,k),g(x,P)),E=new n.Point(v(f,k),v(x,P)),M=!this.selectionFullyContained,T=f===k&&x===P,D=this._objects.length;D--&&(d=this._objects[D],!(!(!d||!d.selectable||!d.visible)&&(M&&d.intersectsWithRect(S,E,!0)||d.isContainedWithinRect(S,E,!0)||M&&d.containsPoint(S,null,!0)||M&&d.containsPoint(E,null,!0))&&(m.push(d),T))););return m.length>1&&(m=m.filter(function(I){return!I.onSelect({e:y})})),m},_maybeGroupObjects:function(y){this.selection&&this._groupSelector&&this._groupSelectedObjects(y),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){n.util.object.extend(n.StaticCanvas.prototype,{toDataURL:function(g){g||(g={});var v=g.format||"png",y=g.quality||1,m=(g.multiplier||1)*(g.enableRetinaScaling?this.getRetinaScaling():1),d=this.toCanvasElement(m,g);return n.util.toDataURL(d,v,y)},toCanvasElement:function(g,v){g=g||1,v=v||{};var y=(v.width||this.width)*g,m=(v.height||this.height)*g,d=this.getZoom(),f=this.width,x=this.height,k=d*g,P=this.viewportTransform,S=(P[4]-(v.left||0))*g,E=(P[5]-(v.top||0))*g,M=this.interactive,T=[k,0,0,k,S,E],D=this.enableRetinaScaling,I=n.util.createCanvasElement(),N=this.contextTop;return I.width=y,I.height=m,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=T,this.width=y,this.height=m,this.calcViewportBoundaries(),this.renderCanvas(I.getContext("2d"),this._objects),this.viewportTransform=P,this.width=f,this.height=x,this.calcViewportBoundaries(),this.interactive=M,this.enableRetinaScaling=D,this.contextTop=N,I}})}(),n.util.object.extend(n.StaticCanvas.prototype,{loadFromJSON:function(g,v,y){if(!!g){var m=typeof g=="string"?JSON.parse(g):n.util.object.clone(g),d=this,f=m.clipPath,x=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete m.clipPath,this._enlivenObjects(m.objects,function(k){d.clear(),d._setBgOverlay(m,function(){f?d._enlivenObjects([f],function(P){d.clipPath=P[0],d.__setupCanvas.call(d,m,k,x,v)}):d.__setupCanvas.call(d,m,k,x,v)})},y),this}},__setupCanvas:function(g,v,y,m){var d=this;v.forEach(function(f,x){d.insertAt(f,x)}),this.renderOnAddRemove=y,delete g.objects,delete g.backgroundImage,delete g.overlayImage,delete g.background,delete g.overlay,this._setOptions(g),this.renderAll(),m&&m()},_setBgOverlay:function(g,v){var y={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!g.backgroundImage&&!g.overlayImage&&!g.background&&!g.overlay){v&&v();return}var m=function(){y.backgroundImage&&y.overlayImage&&y.backgroundColor&&y.overlayColor&&v&&v()};this.__setBgOverlay("backgroundImage",g.backgroundImage,y,m),this.__setBgOverlay("overlayImage",g.overlayImage,y,m),this.__setBgOverlay("backgroundColor",g.background,y,m),this.__setBgOverlay("overlayColor",g.overlay,y,m)},__setBgOverlay:function(g,v,y,m){var d=this;if(!v){y[g]=!0,m&&m();return}g==="backgroundImage"||g==="overlayImage"?n.util.enlivenObjects([v],function(f){d[g]=f[0],y[g]=!0,m&&m()}):this["set"+n.util.string.capitalize(g,!0)](v,function(){y[g]=!0,m&&m()})},_enlivenObjects:function(g,v,y){if(!g||g.length===0){v&&v([]);return}n.util.enlivenObjects(g,function(m){v&&v(m)},null,y)},_toDataURL:function(g,v){this.clone(function(y){v(y.toDataURL(g))})},_toDataURLWithMultiplier:function(g,v,y){this.clone(function(m){y(m.toDataURLWithMultiplier(g,v))})},clone:function(g,v){var y=JSON.stringify(this.toJSON(v));this.cloneWithoutData(function(m){m.loadFromJSON(y,function(){g&&g(m)})})},cloneWithoutData:function(g){var v=n.util.createCanvasElement();v.width=this.width,v.height=this.height;var y=new n.Canvas(v);this.backgroundImage?(y.setBackgroundImage(this.backgroundImage.src,function(){y.renderAll(),g&&g(y)}),y.backgroundImageOpacity=this.backgroundImageOpacity,y.backgroundImageStretch=this.backgroundImageStretch):g&&g(y)}}),function(g){var v=g.fabric||(g.fabric={}),y=v.util.object.extend,m=v.util.object.clone,d=v.util.toFixed,f=v.util.string.capitalize,x=v.util.degreesToRadians,k=!v.isLikelyNode,P=2;v.Object||(v.Object=v.util.createClass(v.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:k,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(S){S&&this.setOptions(S)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=v.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(S){var E=v.perfLimitSizeTotal,M=S.width,T=S.height,D=v.maxCacheSideLimit,I=v.minCacheSideLimit;if(M<=D&&T<=D&&M*T<=E)return M<I&&(S.width=I),T<I&&(S.height=I),S;var N=M/T,O=v.util.limitDimsByArea(N,E),F=v.util.capValue,U=F(I,O.x,D),Y=F(I,O.y,D);return M>U&&(S.zoomX/=M/U,S.width=U,S.capped=!0),T>Y&&(S.zoomY/=T/Y,S.height=Y,S.capped=!0),S},_getCacheCanvasDimensions:function(){var S=this.getTotalObjectScaling(),E=this._getTransformedDimensions(0,0),M=E.x*S.scaleX/this.scaleX,T=E.y*S.scaleY/this.scaleY;return{width:Math.ceil(M+P),height:Math.ceil(T+P),zoomX:S.scaleX,zoomY:S.scaleY,x:M,y:T}},_updateCacheCanvas:function(){var S=this.canvas;if(this.noScaleCache&&S&&S._currentTransform){var E=S._currentTransform.target,M=S._currentTransform.action;if(this===E&&M.slice&&M.slice(0,5)==="scale")return!1}var T=this._cacheCanvas,D=this._limitCacheSize(this._getCacheCanvasDimensions()),I=D.width,N=D.height,O,F,U=D.zoomX,Y=D.zoomY,Q=I!==this.cacheWidth||N!==this.cacheHeight,q=this.zoomX!==U||this.zoomY!==Y,ne=Q||q;return ne?(Q?(T.width=I,T.height=N):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,T.width,T.height)),O=D.x/2,F=D.y/2,this.cacheTranslationX=Math.round(T.width/2-O)+O,this.cacheTranslationY=Math.round(T.height/2-F)+F,this.cacheWidth=I,this.cacheHeight=N,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(U,Y),this.zoomX=U,this.zoomY=Y,!0):!1},setOptions:function(S){this._setOptions(S),this._initGradient(S.fill,"fill"),this._initGradient(S.stroke,"stroke"),this._initPattern(S.fill,"fill"),this._initPattern(S.stroke,"stroke")},transform:function(S){var E=this.group&&!this.group._transformDone||this.group&&this.canvas&&S===this.canvas.contextTop,M=this.calcTransformMatrix(!E);S.transform(M[0],M[1],M[2],M[3],M[4],M[5])},toObject:function(S){var E=v.Object.NUM_FRACTION_DIGITS,M={type:this.type,version:v.version,originX:this.originX,originY:this.originY,left:d(this.left,E),top:d(this.top,E),width:d(this.width,E),height:d(this.height,E),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:d(this.strokeWidth,E),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:d(this.strokeMiterLimit,E),scaleX:d(this.scaleX,E),scaleY:d(this.scaleY,E),angle:d(this.angle,E),flipX:this.flipX,flipY:this.flipY,opacity:d(this.opacity,E),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:d(this.skewX,E),skewY:d(this.skewY,E)};return this.clipPath&&!this.clipPath.excludeFromExport&&(M.clipPath=this.clipPath.toObject(S),M.clipPath.inverted=this.clipPath.inverted,M.clipPath.absolutePositioned=this.clipPath.absolutePositioned),v.util.populateWithProperties(this,M,S),this.includeDefaultValues||(M=this._removeDefaultValues(M)),M},toDatalessObject:function(S){return this.toObject(S)},_removeDefaultValues:function(S){var E=v.util.getKlass(S.type).prototype,M=E.stateProperties;return M.forEach(function(T){T==="left"||T==="top"||(S[T]===E[T]&&delete S[T],Array.isArray(S[T])&&Array.isArray(E[T])&&S[T].length===0&&E[T].length===0&&delete S[T])}),S},toString:function(){return"#<fabric."+f(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var S=v.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(S.scaleX),scaleY:Math.abs(S.scaleY)}},getTotalObjectScaling:function(){var S=this.getObjectScaling(),E=S.scaleX,M=S.scaleY;if(this.canvas){var T=this.canvas.getZoom(),D=this.canvas.getRetinaScaling();E*=T*D,M*=T*D}return{scaleX:E,scaleY:M}},getObjectOpacity:function(){var S=this.opacity;return this.group&&(S*=this.group.getObjectOpacity()),S},_set:function(S,E){var M=S==="scaleX"||S==="scaleY",T=this[S]!==E,D=!1;return M&&(E=this._constrainScale(E)),S==="scaleX"&&E<0?(this.flipX=!this.flipX,E*=-1):S==="scaleY"&&E<0?(this.flipY=!this.flipY,E*=-1):S==="shadow"&&E&&!(E instanceof v.Shadow)?E=new v.Shadow(E):S==="dirty"&&this.group&&this.group.set("dirty",E),this[S]=E,T&&(D=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(S)>-1?(this.dirty=!0,D&&this.group.set("dirty",!0)):D&&this.stateProperties.indexOf(S)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:v.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(S){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(S.save(),this._setupCompositeOperation(S),this.drawSelectionBackground(S),this.transform(S),this._setOpacity(S),this._setShadow(S,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(S)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(S),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),S.restore())},renderCache:function(S){S=S||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,S.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(S,E){if(S.save(),E.inverted?S.globalCompositeOperation="destination-out":S.globalCompositeOperation="destination-in",E.absolutePositioned){var M=v.util.invertTransform(this.calcTransformMatrix());S.transform(M[0],M[1],M[2],M[3],M[4],M[5])}E.transform(S),S.scale(1/E.zoomX,1/E.zoomY),S.drawImage(E._cacheCanvas,-E.cacheTranslationX,-E.cacheTranslationY),S.restore()},drawObject:function(S,E){var M=this.fill,T=this.stroke;E?(this.fill="black",this.stroke="",this._setClippingProperties(S)):this._renderBackground(S),this._render(S),this._drawClipPath(S,this.clipPath),this.fill=M,this.stroke=T},_drawClipPath:function(S,E){!E||(E.canvas=this.canvas,E.shouldCache(),E._transformDone=!0,E.renderCache({forClipping:!0}),this.drawClipPathOnCache(S,E))},drawCacheOnCanvas:function(S){S.scale(1/this.zoomX,1/this.zoomY),S.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(S){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!S&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!S){var E=this.cacheWidth/this.zoomX,M=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-E/2,-M/2,E,M)}return!0}return!1},_renderBackground:function(S){if(!!this.backgroundColor){var E=this._getNonTransformedDimensions();S.fillStyle=this.backgroundColor,S.fillRect(-E.x/2,-E.y/2,E.x,E.y),this._removeShadow(S)}},_setOpacity:function(S){this.group&&!this.group._transformDone?S.globalAlpha=this.getObjectOpacity():S.globalAlpha*=this.opacity},_setStrokeStyles:function(S,E){var M=E.stroke;M&&(S.lineWidth=E.strokeWidth,S.lineCap=E.strokeLineCap,S.lineDashOffset=E.strokeDashOffset,S.lineJoin=E.strokeLineJoin,S.miterLimit=E.strokeMiterLimit,M.toLive?M.gradientUnits==="percentage"||M.gradientTransform||M.patternTransform?this._applyPatternForTransformedGradient(S,M):(S.strokeStyle=M.toLive(S,this),this._applyPatternGradientTransform(S,M)):S.strokeStyle=E.stroke)},_setFillStyles:function(S,E){var M=E.fill;M&&(M.toLive?(S.fillStyle=M.toLive(S,this),this._applyPatternGradientTransform(S,E.fill)):S.fillStyle=M)},_setClippingProperties:function(S){S.globalAlpha=1,S.strokeStyle="transparent",S.fillStyle="#000000"},_setLineDash:function(S,E){!E||E.length===0||(1&E.length&&E.push.apply(E,E),S.setLineDash(E))},_renderControls:function(S,E){var M=this.getViewportTransform(),T=this.calcTransformMatrix(),D,I,N;E=E||{},I=typeof E.hasBorders<"u"?E.hasBorders:this.hasBorders,N=typeof E.hasControls<"u"?E.hasControls:this.hasControls,T=v.util.multiplyTransformMatrices(M,T),D=v.util.qrDecompose(T),S.save(),S.translate(D.translateX,D.translateY),S.lineWidth=1*this.borderScaleFactor,this.group||(S.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(D.angle-=180),S.rotate(x(this.group?D.angle:this.angle)),E.forActiveSelection||this.group?I&&this.drawBordersInGroup(S,D,E):I&&this.drawBorders(S,E),N&&this.drawControls(S,E),S.restore()},_setShadow:function(S){if(!!this.shadow){var E=this.shadow,M=this.canvas,T,D=M&&M.viewportTransform[0]||1,I=M&&M.viewportTransform[3]||1;E.nonScaling?T={scaleX:1,scaleY:1}:T=this.getObjectScaling(),M&&M._isRetinaScaling()&&(D*=v.devicePixelRatio,I*=v.devicePixelRatio),S.shadowColor=E.color,S.shadowBlur=E.blur*v.browserShadowBlurConstant*(D+I)*(T.scaleX+T.scaleY)/4,S.shadowOffsetX=E.offsetX*D*T.scaleX,S.shadowOffsetY=E.offsetY*I*T.scaleY}},_removeShadow:function(S){!this.shadow||(S.shadowColor="",S.shadowBlur=S.shadowOffsetX=S.shadowOffsetY=0)},_applyPatternGradientTransform:function(S,E){if(!E||!E.toLive)return{offsetX:0,offsetY:0};var M=E.gradientTransform||E.patternTransform,T=-this.width/2+E.offsetX||0,D=-this.height/2+E.offsetY||0;return E.gradientUnits==="percentage"?S.transform(this.width,0,0,this.height,T,D):S.transform(1,0,0,1,T,D),M&&S.transform(M[0],M[1],M[2],M[3],M[4],M[5]),{offsetX:T,offsetY:D}},_renderPaintInOrder:function(S){this.paintFirst==="stroke"?(this._renderStroke(S),this._renderFill(S)):(this._renderFill(S),this._renderStroke(S))},_render:function(){},_renderFill:function(S){!this.fill||(S.save(),this._setFillStyles(S,this),this.fillRule==="evenodd"?S.fill("evenodd"):S.fill(),S.restore())},_renderStroke:function(S){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(S),S.save(),this.strokeUniform&&this.group){var E=this.getObjectScaling();S.scale(1/E.scaleX,1/E.scaleY)}else this.strokeUniform&&S.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(S,this.strokeDashArray),this._setStrokeStyles(S,this),S.stroke(),S.restore()}},_applyPatternForTransformedGradient:function(S,E){var M=this._limitCacheSize(this._getCacheCanvasDimensions()),T=v.util.createCanvasElement(),D,I=this.canvas.getRetinaScaling(),N=M.x/this.scaleX/I,O=M.y/this.scaleY/I;T.width=Math.ceil(N),T.height=Math.ceil(O),D=T.getContext("2d"),D.beginPath(),D.moveTo(0,0),D.lineTo(N,0),D.lineTo(N,O),D.lineTo(0,O),D.closePath(),D.translate(N/2,O/2),D.scale(M.zoomX/this.scaleX/I,M.zoomY/this.scaleY/I),this._applyPatternGradientTransform(D,E),D.fillStyle=E.toLive(S),D.fill(),S.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),S.scale(I*this.scaleX/M.zoomX,I*this.scaleY/M.zoomY),S.strokeStyle=D.createPattern(T,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var S=v.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",S.scaleX),this.set("scaleY",S.scaleY),this.angle=S.angle,this.skewX=S.skewX,this.skewY=0}},_removeTransformMatrix:function(S){var E=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),E=v.util.transformPoint(E,this.transformMatrix)),this.transformMatrix=null,S&&(this.scaleX*=S.scaleX,this.scaleY*=S.scaleY,this.cropX=S.cropX,this.cropY=S.cropY,E.x+=S.offsetLeft,E.y+=S.offsetTop,this.width=S.width,this.height=S.height),this.setPositionByOrigin(E,"center","center")},clone:function(S,E){var M=this.toObject(E);this.constructor.fromObject?this.constructor.fromObject(M,S):v.Object._fromObject("Object",M,S)},cloneAsImage:function(S,E){var M=this.toCanvasElement(E);return S&&S(new v.Image(M)),this},toCanvasElement:function(S){S||(S={});var E=v.util,M=E.saveObjectTransform(this),T=this.group,D=this.shadow,I=Math.abs,N=(S.multiplier||1)*(S.enableRetinaScaling?v.devicePixelRatio:1);delete this.group,S.withoutTransform&&E.resetObjectTransform(this),S.withoutShadow&&(this.shadow=null);var O=v.util.createCanvasElement(),F=this.getBoundingRect(!0,!0),U=this.shadow,Y,Q={x:0,y:0},q,ne,J;U&&(q=U.blur,U.nonScaling?Y={scaleX:1,scaleY:1}:Y=this.getObjectScaling(),Q.x=2*Math.round(I(U.offsetX)+q)*I(Y.scaleX),Q.y=2*Math.round(I(U.offsetY)+q)*I(Y.scaleY)),ne=F.width+Q.x,J=F.height+Q.y,O.width=Math.ceil(ne),O.height=Math.ceil(J);var re=new v.StaticCanvas(O,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});S.format==="jpeg"&&(re.backgroundColor="#fff"),this.setPositionByOrigin(new v.Point(re.width/2,re.height/2),"center","center");var X=this.canvas;re.add(this);var j=re.toCanvasElement(N||1,S);return this.shadow=D,this.set("canvas",X),T&&(this.group=T),this.set(M).setCoords(),re._objects=[],re.dispose(),re=null,j},toDataURL:function(S){return S||(S={}),v.util.toDataURL(this.toCanvasElement(S),S.format||"png",S.quality||1)},isType:function(S){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===S},complexity:function(){return 1},toJSON:function(S){return this.toObject(S)},rotate:function(S){var E=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return E&&this._setOriginToCenter(),this.set("angle",S),E&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(S,E){E=E||this.canvas.getPointer(S);var M=new v.Point(E.x,E.y),T=this._getLeftTopCoords();return this.angle&&(M=v.util.rotatePoint(M,T,x(-this.angle))),{x:M.x-T.x,y:M.y-T.y}},_setupCompositeOperation:function(S){this.globalCompositeOperation&&(S.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){v.runningAnimations&&v.runningAnimations.cancelByTarget(this)}}),v.util.createAccessors&&v.util.createAccessors(v.Object),y(v.Object.prototype,v.Observable),v.Object.NUM_FRACTION_DIGITS=2,v.Object.ENLIVEN_PROPS=["clipPath"],v.Object._fromObject=function(S,E,M,T){var D=v[S];E=m(E,!0),v.util.enlivenPatterns([E.fill,E.stroke],function(I){typeof I[0]<"u"&&(E.fill=I[0]),typeof I[1]<"u"&&(E.stroke=I[1]),v.util.enlivenObjectEnlivables(E,E,function(){var N=T?new D(E[T],E):new D(E);M&&M(N)})})},v.Object.__uid=0)}(e),function(){var g=n.util.degreesToRadians,v={left:-.5,center:0,right:.5},y={top:-.5,center:0,bottom:.5};n.util.object.extend(n.Object.prototype,{translateToGivenOrigin:function(m,d,f,x,k){var P=m.x,S=m.y,E,M,T;return typeof d=="string"?d=v[d]:d-=.5,typeof x=="string"?x=v[x]:x-=.5,E=x-d,typeof f=="string"?f=y[f]:f-=.5,typeof k=="string"?k=y[k]:k-=.5,M=k-f,(E||M)&&(T=this._getTransformedDimensions(),P=m.x+E*T.x,S=m.y+M*T.y),new n.Point(P,S)},translateToCenterPoint:function(m,d,f){var x=this.translateToGivenOrigin(m,d,f,"center","center");return this.angle?n.util.rotatePoint(x,m,g(this.angle)):x},translateToOriginPoint:function(m,d,f){var x=this.translateToGivenOrigin(m,"center","center",d,f);return this.angle?n.util.rotatePoint(x,m,g(this.angle)):x},getCenterPoint:function(){var m=new n.Point(this.left,this.top);return this.translateToCenterPoint(m,this.originX,this.originY)},getPointByOrigin:function(m,d){var f=this.getCenterPoint();return this.translateToOriginPoint(f,m,d)},toLocalPoint:function(m,d,f){var x=this.getCenterPoint(),k,P;return typeof d<"u"&&typeof f<"u"?k=this.translateToGivenOrigin(x,"center","center",d,f):k=new n.Point(this.left,this.top),P=new n.Point(m.x,m.y),this.angle&&(P=n.util.rotatePoint(P,x,-g(this.angle))),P.subtractEquals(k)},setPositionByOrigin:function(m,d,f){var x=this.translateToCenterPoint(m,d,f),k=this.translateToOriginPoint(x,this.originX,this.originY);this.set("left",k.x),this.set("top",k.y)},adjustPosition:function(m){var d=g(this.angle),f=this.getScaledWidth(),x=n.util.cos(d)*f,k=n.util.sin(d)*f,P,S;typeof this.originX=="string"?P=v[this.originX]:P=this.originX-.5,typeof m=="string"?S=v[m]:S=m-.5,this.left+=x*(S-P),this.top+=k*(S-P),this.setCoords(),this.originX=m},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var m=this.getCenterPoint();this.originX="center",this.originY="center",this.left=m.x,this.top=m.y},_resetOrigin:function(){var m=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=m.x,this.top=m.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function g(f){return[new n.Point(f.tl.x,f.tl.y),new n.Point(f.tr.x,f.tr.y),new n.Point(f.br.x,f.br.y),new n.Point(f.bl.x,f.bl.y)]}var v=n.util,y=v.degreesToRadians,m=v.multiplyTransformMatrices,d=v.transformPoint;v.object.extend(n.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(f,x){return x?f?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),f?this.aCoords:this.lineCoords)},getCoords:function(f,x){return g(this._getCoords(f,x))},intersectsWithRect:function(f,x,k,P){var S=this.getCoords(k,P),E=n.Intersection.intersectPolygonRectangle(S,f,x);return E.status==="Intersection"},intersectsWithObject:function(f,x,k){var P=n.Intersection.intersectPolygonPolygon(this.getCoords(x,k),f.getCoords(x,k));return P.status==="Intersection"||f.isContainedWithinObject(this,x,k)||this.isContainedWithinObject(f,x,k)},isContainedWithinObject:function(f,x,k){for(var P=this.getCoords(x,k),S=x?f.aCoords:f.lineCoords,E=0,M=f._getImageLines(S);E<4;E++)if(!f.containsPoint(P[E],M))return!1;return!0},isContainedWithinRect:function(f,x,k,P){var S=this.getBoundingRect(k,P);return S.left>=f.x&&S.left+S.width<=x.x&&S.top>=f.y&&S.top+S.height<=x.y},containsPoint:function(f,E,k,P){var S=this._getCoords(k,P),E=E||this._getImageLines(S),M=this._findCrossPoints(f,E);return M!==0&&M%2===1},isOnScreen:function(f){if(!this.canvas)return!1;var x=this.canvas.vptCoords.tl,k=this.canvas.vptCoords.br,P=this.getCoords(!0,f);return P.some(function(S){return S.x<=k.x&&S.x>=x.x&&S.y<=k.y&&S.y>=x.y})||this.intersectsWithRect(x,k,!0,f)?!0:this._containsCenterOfCanvas(x,k,f)},_containsCenterOfCanvas:function(f,x,k){var P={x:(f.x+x.x)/2,y:(f.y+x.y)/2};return!!this.containsPoint(P,null,!0,k)},isPartiallyOnScreen:function(f){if(!this.canvas)return!1;var x=this.canvas.vptCoords.tl,k=this.canvas.vptCoords.br;if(this.intersectsWithRect(x,k,!0,f))return!0;var P=this.getCoords(!0,f).every(function(S){return(S.x>=k.x||S.x<=x.x)&&(S.y>=k.y||S.y<=x.y)});return P&&this._containsCenterOfCanvas(x,k,f)},_getImageLines:function(f){var x={topline:{o:f.tl,d:f.tr},rightline:{o:f.tr,d:f.br},bottomline:{o:f.br,d:f.bl},leftline:{o:f.bl,d:f.tl}};return x},_findCrossPoints:function(f,x){var k,P,S,E,M,T=0,D;for(var I in x)if(D=x[I],!(D.o.y<f.y&&D.d.y<f.y)&&!(D.o.y>=f.y&&D.d.y>=f.y)&&(D.o.x===D.d.x&&D.o.x>=f.x?M=D.o.x:(k=0,P=(D.d.y-D.o.y)/(D.d.x-D.o.x),S=f.y-k*f.x,E=D.o.y-P*D.o.x,M=-(S-E)/(k-P)),M>=f.x&&(T+=1),T===2))break;return T},getBoundingRect:function(f,x){var k=this.getCoords(f,x);return v.makeBoundingBoxFromPoints(k)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(f){return Math.abs(f)<this.minScaleLimit?f<0?-this.minScaleLimit:this.minScaleLimit:f===0?1e-4:f},scale:function(f){return this._set("scaleX",f),this._set("scaleY",f),this.setCoords()},scaleToWidth:function(f,x){var k=this.getBoundingRect(x).width/this.getScaledWidth();return this.scale(f/this.width/k)},scaleToHeight:function(f,x){var k=this.getBoundingRect(x).height/this.getScaledHeight();return this.scale(f/this.height/k)},calcLineCoords:function(){var f=this.getViewportTransform(),x=this.padding,k=y(this.angle),P=v.cos(k),S=v.sin(k),E=P*x,M=S*x,T=E+M,D=E-M,I=this.calcACoords(),N={tl:d(I.tl,f),tr:d(I.tr,f),bl:d(I.bl,f),br:d(I.br,f)};return x&&(N.tl.x-=D,N.tl.y-=T,N.tr.x+=T,N.tr.y-=D,N.bl.x-=T,N.bl.y+=D,N.br.x+=D,N.br.y+=T),N},calcOCoords:function(){var f=this._calcRotateMatrix(),x=this._calcTranslateMatrix(),k=this.getViewportTransform(),P=m(k,x),S=m(P,f),S=m(S,[1/k[0],0,0,1/k[3],0,0]),E=this._calculateCurrentDimensions(),M={};return this.forEachControl(function(T,D,I){M[D]=T.positionHandler(E,S,I)}),M},calcACoords:function(){var f=this._calcRotateMatrix(),x=this._calcTranslateMatrix(),k=m(x,f),P=this._getTransformedDimensions(),S=P.x/2,E=P.y/2;return{tl:d({x:-S,y:-E},k),tr:d({x:S,y:-E},k),bl:d({x:-S,y:E},k),br:d({x:S,y:E},k)}},setCoords:function(f){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),f?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return v.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var f=this.getCenterPoint();return[1,0,0,1,f.x,f.y]},transformMatrixKey:function(f){var x="_",k="";return!f&&this.group&&(k=this.group.transformMatrixKey(f)+x),k+this.top+x+this.left+x+this.scaleX+x+this.scaleY+x+this.skewX+x+this.skewY+x+this.angle+x+this.originX+x+this.originY+x+this.width+x+this.height+x+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(f){var x=this.calcOwnMatrix();if(f||!this.group)return x;var k=this.transformMatrixKey(f),P=this.matrixCache||(this.matrixCache={});return P.key===k?P.value:(this.group&&(x=m(this.group.calcTransformMatrix(!1),x)),P.key=k,P.value=x,x)},calcOwnMatrix:function(){var f=this.transformMatrixKey(!0),x=this.ownMatrixCache||(this.ownMatrixCache={});if(x.key===f)return x.value;var k=this._calcTranslateMatrix(),P={angle:this.angle,translateX:k[4],translateY:k[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return x.key=f,x.value=v.composeMatrix(P),x.value},_getNonTransformedDimensions:function(){var f=this.strokeWidth,x=this.width+f,k=this.height+f;return{x,y:k}},_getTransformedDimensions:function(f,x){typeof f>"u"&&(f=this.skewX),typeof x>"u"&&(x=this.skewY);var k,P,S,E=f===0&&x===0;if(this.strokeUniform?(P=this.width,S=this.height):(k=this._getNonTransformedDimensions(),P=k.x,S=k.y),E)return this._finalizeDimensions(P*this.scaleX,S*this.scaleY);var M=v.sizeAfterTransform(P,S,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:f,skewY:x});return this._finalizeDimensions(M.x,M.y)},_finalizeDimensions:function(f,x){return this.strokeUniform?{x:f+this.strokeWidth,y:x+this.strokeWidth}:{x:f,y:x}},_calculateCurrentDimensions:function(){var f=this.getViewportTransform(),x=this._getTransformedDimensions(),k=d(x,f,!0);return k.scalarAdd(2*this.padding)}})}(),n.util.object.extend(n.Object.prototype,{sendToBack:function(){return this.group?n.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?n.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(g){return this.group?n.StaticCanvas.prototype.sendBackwards.call(this.group,this,g):this.canvas&&this.canvas.sendBackwards(this,g),this},bringForward:function(g){return this.group?n.StaticCanvas.prototype.bringForward.call(this.group,this,g):this.canvas&&this.canvas.bringForward(this,g),this},moveTo:function(g){return this.group&&this.group.type!=="activeSelection"?n.StaticCanvas.prototype.moveTo.call(this.group,this,g):this.canvas&&this.canvas.moveTo(this,g),this}}),function(){function g(y,m){if(m){if(m.toLive)return y+": url(#SVGID_"+m.id+"); ";var d=new n.Color(m),f=y+": "+d.toRgb()+"; ",x=d.getAlpha();return x!==1&&(f+=y+"-opacity: "+x.toString()+"; "),f}else return y+": none; "}var v=n.util.toFixed;n.util.object.extend(n.Object.prototype,{getSvgStyles:function(y){var m=this.fillRule?this.fillRule:"nonzero",d=this.strokeWidth?this.strokeWidth:"0",f=this.strokeDashArray?this.strokeDashArray.join(" "):"none",x=this.strokeDashOffset?this.strokeDashOffset:"0",k=this.strokeLineCap?this.strokeLineCap:"butt",P=this.strokeLineJoin?this.strokeLineJoin:"miter",S=this.strokeMiterLimit?this.strokeMiterLimit:"4",E=typeof this.opacity<"u"?this.opacity:"1",M=this.visible?"":" visibility: hidden;",T=y?"":this.getSvgFilter(),D=g("fill",this.fill),I=g("stroke",this.stroke);return[I,"stroke-width: ",d,"; ","stroke-dasharray: ",f,"; ","stroke-linecap: ",k,"; ","stroke-dashoffset: ",x,"; ","stroke-linejoin: ",P,"; ","stroke-miterlimit: ",S,"; ",D,"fill-rule: ",m,"; ","opacity: ",E,";",T,M].join("")},getSvgSpanStyles:function(y,m){var d="; ",x=y.fontFamily?"font-family: "+(y.fontFamily.indexOf("'")===-1&&y.fontFamily.indexOf('"')===-1?"'"+y.fontFamily+"'":y.fontFamily)+d:"",f=y.strokeWidth?"stroke-width: "+y.strokeWidth+d:"",x=x,k=y.fontSize?"font-size: "+y.fontSize+"px"+d:"",P=y.fontStyle?"font-style: "+y.fontStyle+d:"",S=y.fontWeight?"font-weight: "+y.fontWeight+d:"",E=y.fill?g("fill",y.fill):"",M=y.stroke?g("stroke",y.stroke):"",T=this.getSvgTextDecoration(y),D=y.deltaY?"baseline-shift: "+-y.deltaY+"; ":"";return T&&(T="text-decoration: "+T+d),[M,f,x,k,P,S,T,E,D,m?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(y){return["overline","underline","line-through"].filter(function(m){return y[m.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(y,m){var d=y?this.calcTransformMatrix():this.calcOwnMatrix(),f='transform="'+n.util.matrixToSVG(d);return f+(m||"")+'" '},_setSVGBg:function(y){if(this.backgroundColor){var m=n.Object.NUM_FRACTION_DIGITS;y.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',v(-this.width/2,m),'" y="',v(-this.height/2,m),'" width="',v(this.width,m),'" height="',v(this.height,m),`"></rect>
`)}},toSVG:function(y){return this._createBaseSVGMarkup(this._toSVG(y),{reviver:y})},toClipPathSVG:function(y){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(y),{reviver:y})},_createBaseClipPathSVGMarkup:function(y,m){m=m||{};var d=m.reviver,f=m.additionalTransform||"",x=[this.getSvgTransform(!0,f),this.getSvgCommons()].join(""),k=y.indexOf("COMMON_PARTS");return y[k]=x,d?d(y.join("")):y.join("")},_createBaseSVGMarkup:function(y,m){m=m||{};var d=m.noStyle,f=m.reviver,x=d?"":'style="'+this.getSvgStyles()+'" ',k=m.withShadow?'style="'+this.getSvgFilter()+'" ':"",P=this.clipPath,S=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",E=P&&P.absolutePositioned,M=this.stroke,T=this.fill,D=this.shadow,I,N=[],O,F=y.indexOf("COMMON_PARTS"),U=m.additionalTransform;return P&&(P.clipPathId="CLIPPATH_"+n.Object.__uid++,O='<clipPath id="'+P.clipPathId+`" >
`+P.toClipPathSVG(f)+`</clipPath>
`),E&&N.push("<g ",k,this.getSvgCommons(),` >
`),N.push("<g ",this.getSvgTransform(!1),E?"":k+this.getSvgCommons(),` >
`),I=[x,S,d?"":this.addPaintOrder()," ",U?'transform="'+U+'" ':""].join(""),y[F]=I,T&&T.toLive&&N.push(T.toSVG(this)),M&&M.toLive&&N.push(M.toSVG(this)),D&&N.push(D.toSVG(this)),P&&N.push(O),N.push(y.join("")),N.push(`</g>
`),E&&N.push(`</g>
`),f?f(N.join("")):N.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var g=n.util.object.extend,v="stateProperties";function y(d,f,x){var k={},P=!0;x.forEach(function(S){k[S]=d[S]}),g(d[f],k,P)}function m(d,f,x){if(d===f)return!0;if(Array.isArray(d)){if(!Array.isArray(f)||d.length!==f.length)return!1;for(var k=0,P=d.length;k<P;k++)if(!m(d[k],f[k]))return!1;return!0}else if(d&&typeof d=="object"){var S=Object.keys(d),E;if(!f||typeof f!="object"||!x&&S.length!==Object.keys(f).length)return!1;for(var k=0,P=S.length;k<P;k++)if(E=S[k],!(E==="canvas"||E==="group")&&!m(d[E],f[E]))return!1;return!0}}n.util.object.extend(n.Object.prototype,{hasStateChanged:function(d){d=d||v;var f="_"+d;return Object.keys(this[f]).length<this[d].length?!0:!m(this[f],this,!0)},saveState:function(d){var f=d&&d.propertySet||v,x="_"+f;return this[x]?(y(this,x,this[f]),d&&d.stateProperties&&y(this,x,d.stateProperties),this):this.setupState(d)},setupState:function(d){d=d||{};var f=d.propertySet||v;return d.propertySet=f,this["_"+f]={},this.saveState(d),this}})}(),function(){var g=n.util.degreesToRadians;n.util.object.extend(n.Object.prototype,{_findTargetCorner:function(v,y){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var m=v.x,d=v.y,f,x,k=Object.keys(this.oCoords),P=k.length-1,S;for(this.__corner=0;P>=0;P--)if(S=k[P],!!this.isControlVisible(S)&&(x=this._getImageLines(y?this.oCoords[S].touchCorner:this.oCoords[S].corner),f=this._findCrossPoints({x:m,y:d},x),f!==0&&f%2===1))return this.__corner=S,S;return!1},forEachControl:function(v){for(var y in this.controls)v(this.controls[y],y,this)},_setCornerCoords:function(){var v=this.oCoords;for(var y in v){var m=this.controls[y];v[y].corner=m.calcCornerCoords(this.angle,this.cornerSize,v[y].x,v[y].y,!1),v[y].touchCorner=m.calcCornerCoords(this.angle,this.touchCornerSize,v[y].x,v[y].y,!0)}},drawSelectionBackground:function(v){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;v.save();var y=this.getCenterPoint(),m=this._calculateCurrentDimensions(),d=this.canvas.viewportTransform;return v.translate(y.x,y.y),v.scale(1/d[0],1/d[3]),v.rotate(g(this.angle)),v.fillStyle=this.selectionBackgroundColor,v.fillRect(-m.x/2,-m.y/2,m.x,m.y),v.restore(),this},drawBorders:function(v,y){y=y||{};var m=this._calculateCurrentDimensions(),d=this.borderScaleFactor,f=m.x+d,x=m.y+d,k=typeof y.hasControls<"u"?y.hasControls:this.hasControls,P=!1;return v.save(),v.strokeStyle=y.borderColor||this.borderColor,this._setLineDash(v,y.borderDashArray||this.borderDashArray),v.strokeRect(-f/2,-x/2,f,x),k&&(v.beginPath(),this.forEachControl(function(S,E,M){S.withConnection&&S.getVisibility(M,E)&&(P=!0,v.moveTo(S.x*f,S.y*x),v.lineTo(S.x*f+S.offsetX,S.y*x+S.offsetY))}),P&&v.stroke()),v.restore(),this},drawBordersInGroup:function(v,y,m){m=m||{};var d=n.util.sizeAfterTransform(this.width,this.height,y),f=this.strokeWidth,x=this.strokeUniform,k=this.borderScaleFactor,P=d.x+f*(x?this.canvas.getZoom():y.scaleX)+k,S=d.y+f*(x?this.canvas.getZoom():y.scaleY)+k;return v.save(),this._setLineDash(v,m.borderDashArray||this.borderDashArray),v.strokeStyle=m.borderColor||this.borderColor,v.strokeRect(-P/2,-S/2,P,S),v.restore(),this},drawControls:function(v,y){y=y||{},v.save();var m=1,d,f;return this.canvas&&(m=this.canvas.getRetinaScaling()),v.setTransform(m,0,0,m,0,0),v.strokeStyle=v.fillStyle=y.cornerColor||this.cornerColor,this.transparentCorners||(v.strokeStyle=y.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(v,y.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(d=this.group.calcTransformMatrix()),this.forEachControl(function(x,k,P){f=P.oCoords[k],x.getVisibility(P,k)&&(d&&(f=n.util.transformPoint(f,d)),x.render(v,f.x,f.y,y,P))}),v.restore(),this},isControlVisible:function(v){return this.controls[v]&&this.controls[v].getVisibility(this,v)},setControlVisible:function(v,y){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[v]=y,this},setControlsVisibility:function(v){v||(v={});for(var y in v)this.setControlVisible(y,v[y]);return this},onDeselect:function(){},onSelect:function(){}})}(),n.util.object.extend(n.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(g,v){v=v||{};var y=function(){},m=v.onComplete||y,d=v.onChange||y,f=this;return n.util.animate({target:this,startValue:g.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(x){g.set("left",x),f.requestRenderAll(),d()},onComplete:function(){g.setCoords(),m()}})},fxCenterObjectV:function(g,v){v=v||{};var y=function(){},m=v.onComplete||y,d=v.onChange||y,f=this;return n.util.animate({target:this,startValue:g.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(x){g.set("top",x),f.requestRenderAll(),d()},onComplete:function(){g.setCoords(),m()}})},fxRemove:function(g,v){v=v||{};var y=function(){},m=v.onComplete||y,d=v.onChange||y,f=this;return n.util.animate({target:this,startValue:g.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(x){g.set("opacity",x),f.requestRenderAll(),d()},onComplete:function(){f.remove(g),m()}})}}),n.util.object.extend(n.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var g=[],v,y,m=[];for(v in arguments[0])g.push(v);for(var d=0,f=g.length;d<f;d++)v=g[d],y=d!==f-1,m.push(this._animate(v,arguments[0][v],arguments[1],y));return m}else return this._animate.apply(this,arguments)},_animate:function(g,v,y,m){var d=this,f;v=v.toString(),y?y=n.util.object.clone(y):y={},~g.indexOf(".")&&(f=g.split("."));var x=d.colorProperties.indexOf(g)>-1||f&&d.colorProperties.indexOf(f[1])>-1,k=f?this.get(f[0])[f[1]]:this.get(g);"from"in y||(y.from=k),x||(~v.indexOf("=")?v=k+parseFloat(v.replace("=","")):v=parseFloat(v));var P={target:this,startValue:y.from,endValue:v,byValue:y.by,easing:y.easing,duration:y.duration,abort:y.abort&&function(S,E,M){return y.abort.call(d,S,E,M)},onChange:function(S,E,M){f?d[f[0]][f[1]]=S:d.set(g,S),!m&&y.onChange&&y.onChange(S,E,M)},onComplete:function(S,E,M){m||(d.setCoords(),y.onComplete&&y.onComplete(S,E,M))}};return x?n.util.animateColor(P.startValue,P.endValue,P.duration,P):n.util.animate(P)}}),function(g){var v=g.fabric||(g.fabric={}),y=v.util.object.extend,m=v.util.object.clone,d={x1:1,x2:1,y1:1,y2:1};if(v.Line){v.warn("fabric.Line is already defined");return}v.Line=v.util.createClass(v.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:v.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(x,k){x||(x=[0,0,0,0]),this.callSuper("initialize",k),this.set("x1",x[0]),this.set("y1",x[1]),this.set("x2",x[2]),this.set("y2",x[3]),this._setWidthHeight(k)},_setWidthHeight:function(x){x||(x={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in x?x.left:this._getLeftToOriginX(),this.top="top"in x?x.top:this._getTopToOriginY()},_set:function(x,k){return this.callSuper("_set",x,k),typeof d[x]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:f({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:f({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(x){x.beginPath();var k=this.calcLinePoints();x.moveTo(k.x1,k.y1),x.lineTo(k.x2,k.y2),x.lineWidth=this.strokeWidth;var P=x.strokeStyle;x.strokeStyle=this.stroke||x.fillStyle,this.stroke&&this._renderStroke(x),x.strokeStyle=P},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(x){return y(this.callSuper("toObject",x),this.calcLinePoints())},_getNonTransformedDimensions:function(){var x=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(x.y-=this.strokeWidth),this.height===0&&(x.x-=this.strokeWidth)),x},calcLinePoints:function(){var x=this.x1<=this.x2?-1:1,k=this.y1<=this.y2?-1:1,P=x*this.width*.5,S=k*this.height*.5,E=x*this.width*-.5,M=k*this.height*-.5;return{x1:P,x2:E,y1:S,y2:M}},_toSVG:function(){var x=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',x.x1,'" y1="',x.y1,'" x2="',x.x2,'" y2="',x.y2,`" />
`]}}),v.Line.ATTRIBUTE_NAMES=v.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),v.Line.fromElement=function(x,k,P){P=P||{};var S=v.parseAttributes(x,v.Line.ATTRIBUTE_NAMES),E=[S.x1||0,S.y1||0,S.x2||0,S.y2||0];k(new v.Line(E,y(S,P)))},v.Line.fromObject=function(x,k){function P(E){delete E.points,k&&k(E)}var S=m(x,!0);S.points=[x.x1,x.y1,x.x2,x.y2],v.Object._fromObject("Line",S,P,"points")};function f(x,k){var P=x.origin,S=x.axis1,E=x.axis2,M=x.dimension,T=k.nearest,D=k.center,I=k.farthest;return function(){switch(this.get(P)){case T:return Math.min(this.get(S),this.get(E));case D:return Math.min(this.get(S),this.get(E))+.5*this.get(M);case I:return Math.max(this.get(S),this.get(E))}}}}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.util.degreesToRadians;if(v.Circle){v.warn("fabric.Circle is already defined.");return}v.Circle=v.util.createClass(v.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:v.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(d,f){return this.callSuper("_set",d,f),d==="radius"&&this.setRadius(f),this},toObject:function(d){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(d))},_toSVG:function(){var d,f=0,x=0,k=(this.endAngle-this.startAngle)%360;if(k===0)d=["<circle ","COMMON_PARTS",'cx="'+f+'" cy="'+x+'" ','r="',this.radius,`" />
`];else{var P=y(this.startAngle),S=y(this.endAngle),E=this.radius,M=v.util.cos(P)*E,T=v.util.sin(P)*E,D=v.util.cos(S)*E,I=v.util.sin(S)*E,N=k>180?"1":"0";d=['<path d="M '+M+" "+T," A "+E+" "+E," 0 ",+N+" 1"," "+D+" "+I,'" ',"COMMON_PARTS",` />
`]}return d},_render:function(d){d.beginPath(),d.arc(0,0,this.radius,y(this.startAngle),y(this.endAngle),!1),this._renderPaintInOrder(d)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(d){return this.radius=d,this.set("width",d*2).set("height",d*2)}}),v.Circle.ATTRIBUTE_NAMES=v.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),v.Circle.fromElement=function(d,f){var x=v.parseAttributes(d,v.Circle.ATTRIBUTE_NAMES);if(!m(x))throw new Error("value of `r` attribute is required and can not be negative");x.left=(x.left||0)-x.radius,x.top=(x.top||0)-x.radius,f(new v.Circle(x))};function m(d){return"radius"in d&&d.radius>=0}v.Circle.fromObject=function(d,f){v.Object._fromObject("Circle",d,f)}}(e),function(g){var v=g.fabric||(g.fabric={});if(v.Triangle){v.warn("fabric.Triangle is already defined");return}v.Triangle=v.util.createClass(v.Object,{type:"triangle",width:100,height:100,_render:function(y){var m=this.width/2,d=this.height/2;y.beginPath(),y.moveTo(-m,d),y.lineTo(0,-d),y.lineTo(m,d),y.closePath(),this._renderPaintInOrder(y)},_toSVG:function(){var y=this.width/2,m=this.height/2,d=[-y+" "+m,"0 "+-m,y+" "+m].join(",");return["<polygon ","COMMON_PARTS",'points="',d,'" />']}}),v.Triangle.fromObject=function(y,m){return v.Object._fromObject("Triangle",y,m)}}(e),function(g){var v=g.fabric||(g.fabric={}),y=Math.PI*2;if(v.Ellipse){v.warn("fabric.Ellipse is already defined.");return}v.Ellipse=v.util.createClass(v.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:v.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(m){this.callSuper("initialize",m),this.set("rx",m&&m.rx||0),this.set("ry",m&&m.ry||0)},_set:function(m,d){switch(this.callSuper("_set",m,d),m){case"rx":this.rx=d,this.set("width",d*2);break;case"ry":this.ry=d,this.set("height",d*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(m){return this.callSuper("toObject",["rx","ry"].concat(m))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(m){m.beginPath(),m.save(),m.transform(1,0,0,this.ry/this.rx,0,0),m.arc(0,0,this.rx,0,y,!1),m.restore(),this._renderPaintInOrder(m)}}),v.Ellipse.ATTRIBUTE_NAMES=v.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),v.Ellipse.fromElement=function(m,d){var f=v.parseAttributes(m,v.Ellipse.ATTRIBUTE_NAMES);f.left=(f.left||0)-f.rx,f.top=(f.top||0)-f.ry,d(new v.Ellipse(f))},v.Ellipse.fromObject=function(m,d){v.Object._fromObject("Ellipse",m,d)}}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.util.object.extend;if(v.Rect){v.warn("fabric.Rect is already defined");return}v.Rect=v.util.createClass(v.Object,{stateProperties:v.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:v.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(m){this.callSuper("initialize",m),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(m){var d=this.rx?Math.min(this.rx,this.width/2):0,f=this.ry?Math.min(this.ry,this.height/2):0,x=this.width,k=this.height,P=-this.width/2,S=-this.height/2,E=d!==0||f!==0,M=1-.5522847498;m.beginPath(),m.moveTo(P+d,S),m.lineTo(P+x-d,S),E&&m.bezierCurveTo(P+x-M*d,S,P+x,S+M*f,P+x,S+f),m.lineTo(P+x,S+k-f),E&&m.bezierCurveTo(P+x,S+k-M*f,P+x-M*d,S+k,P+x-d,S+k),m.lineTo(P+d,S+k),E&&m.bezierCurveTo(P+M*d,S+k,P,S+k-M*f,P,S+k-f),m.lineTo(P,S+f),E&&m.bezierCurveTo(P,S+M*f,P+M*d,S,P+d,S),m.closePath(),this._renderPaintInOrder(m)},toObject:function(m){return this.callSuper("toObject",["rx","ry"].concat(m))},_toSVG:function(){var m=-this.width/2,d=-this.height/2;return["<rect ","COMMON_PARTS",'x="',m,'" y="',d,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),v.Rect.ATTRIBUTE_NAMES=v.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),v.Rect.fromElement=function(m,d,f){if(!m)return d(null);f=f||{};var x=v.parseAttributes(m,v.Rect.ATTRIBUTE_NAMES);x.left=x.left||0,x.top=x.top||0,x.height=x.height||0,x.width=x.width||0;var k=new v.Rect(y(f?v.util.object.clone(f):{},x));k.visible=k.visible&&k.width>0&&k.height>0,d(k)},v.Rect.fromObject=function(m,d){return v.Object._fromObject("Rect",m,d)}}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.util.object.extend,m=v.util.array.min,d=v.util.array.max,f=v.util.toFixed,x=v.util.projectStrokeOnPoints;if(v.Polyline){v.warn("fabric.Polyline is already defined");return}v.Polyline=v.util.createClass(v.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:v.Object.prototype.cacheProperties.concat("points"),initialize:function(k,P){P=P||{},this.points=k||[],this.callSuper("initialize",P),this._setPositionDimensions(P)},_projectStrokeOnPoints:function(){return x(this.points,this,!0)},_setPositionDimensions:function(k){var P=this._calcDimensions(k),S,E=this.exactBoundingBox?this.strokeWidth:0;this.width=P.width-E,this.height=P.height-E,k.fromSVG||(S=this.translateToGivenOrigin({x:P.left-this.strokeWidth/2+E/2,y:P.top-this.strokeWidth/2+E/2},"left","top",this.originX,this.originY)),typeof k.left>"u"&&(this.left=k.fromSVG?P.left:S.x),typeof k.top>"u"&&(this.top=k.fromSVG?P.top:S.y),this.pathOffset={x:P.left+this.width/2+E/2,y:P.top+this.height/2+E/2}},_calcDimensions:function(){var k=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,P=m(k,"x")||0,S=m(k,"y")||0,E=d(k,"x")||0,M=d(k,"y")||0,T=E-P,D=M-S;return{left:P,top:S,width:T,height:D}},toObject:function(k){return y(this.callSuper("toObject",k),{points:this.points.concat()})},_toSVG:function(){for(var k=[],P=this.pathOffset.x,S=this.pathOffset.y,E=v.Object.NUM_FRACTION_DIGITS,M=0,T=this.points.length;M<T;M++)k.push(f(this.points[M].x-P,E),",",f(this.points[M].y-S,E)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',k.join(""),`" />
`]},commonRender:function(k){var P,S=this.points.length,E=this.pathOffset.x,M=this.pathOffset.y;if(!S||isNaN(this.points[S-1].y))return!1;k.beginPath(),k.moveTo(this.points[0].x-E,this.points[0].y-M);for(var T=0;T<S;T++)P=this.points[T],k.lineTo(P.x-E,P.y-M);return!0},_render:function(k){!this.commonRender(k)||this._renderPaintInOrder(k)},complexity:function(){return this.get("points").length}}),v.Polyline.ATTRIBUTE_NAMES=v.SHARED_ATTRIBUTES.concat(),v.Polyline.fromElementGenerator=function(k){return function(P,S,E){if(!P)return S(null);E||(E={});var M=v.parsePointsAttribute(P.getAttribute("points")),T=v.parseAttributes(P,v[k].ATTRIBUTE_NAMES);T.fromSVG=!0,S(new v[k](M,y(T,E)))}},v.Polyline.fromElement=v.Polyline.fromElementGenerator("Polyline"),v.Polyline.fromObject=function(k,P){return v.Object._fromObject("Polyline",k,P,"points")}}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.util.projectStrokeOnPoints;if(v.Polygon){v.warn("fabric.Polygon is already defined");return}v.Polygon=v.util.createClass(v.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return y(this.points,this)},_render:function(m){!this.commonRender(m)||(m.closePath(),this._renderPaintInOrder(m))}}),v.Polygon.ATTRIBUTE_NAMES=v.SHARED_ATTRIBUTES.concat(),v.Polygon.fromElement=v.Polyline.fromElementGenerator("Polygon"),v.Polygon.fromObject=function(m,d){v.Object._fromObject("Polygon",m,d,"points")}}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.util.array.min,m=v.util.array.max,d=v.util.object.extend,f=v.util.object.clone,x=v.util.toFixed;if(v.Path){v.warn("fabric.Path is already defined");return}v.Path=v.util.createClass(v.Object,{type:"path",path:null,cacheProperties:v.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:v.Object.prototype.stateProperties.concat("path"),initialize:function(k,P){P=f(P||{}),delete P.path,this.callSuper("initialize",P),this._setPath(k||[],P)},_setPath:function(k,P){this.path=v.util.makePathSimpler(Array.isArray(k)?k:v.util.parsePath(k)),v.Polyline.prototype._setPositionDimensions.call(this,P||{})},_renderPathCommands:function(k){var P,S=0,E=0,M=0,T=0,D=0,I=0,N=-this.pathOffset.x,O=-this.pathOffset.y;k.beginPath();for(var F=0,U=this.path.length;F<U;++F)switch(P=this.path[F],P[0]){case"L":M=P[1],T=P[2],k.lineTo(M+N,T+O);break;case"M":M=P[1],T=P[2],S=M,E=T,k.moveTo(M+N,T+O);break;case"C":M=P[5],T=P[6],D=P[3],I=P[4],k.bezierCurveTo(P[1]+N,P[2]+O,D+N,I+O,M+N,T+O);break;case"Q":k.quadraticCurveTo(P[1]+N,P[2]+O,P[3]+N,P[4]+O),M=P[3],T=P[4],D=P[1],I=P[2];break;case"z":case"Z":M=S,T=E,k.closePath();break}},_render:function(k){this._renderPathCommands(k),this._renderPaintInOrder(k)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(k){return d(this.callSuper("toObject",k),{path:this.path.map(function(P){return P.slice()})})},toDatalessObject:function(k){var P=this.toObject(["sourcePath"].concat(k));return P.sourcePath&&delete P.path,P},_toSVG:function(){var k=v.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',k,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var k=v.Object.NUM_FRACTION_DIGITS;return" translate("+x(-this.pathOffset.x,k)+", "+x(-this.pathOffset.y,k)+")"},toClipPathSVG:function(k){var P=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:k,additionalTransform:P})},toSVG:function(k){var P=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:k,additionalTransform:P})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var k=[],P=[],S,E=0,M=0,T=0,D=0,I,N=0,O=this.path.length;N<O;++N){switch(S=this.path[N],S[0]){case"L":T=S[1],D=S[2],I=[];break;case"M":T=S[1],D=S[2],E=T,M=D,I=[];break;case"C":I=v.util.getBoundsOfCurve(T,D,S[1],S[2],S[3],S[4],S[5],S[6]),T=S[5],D=S[6];break;case"Q":I=v.util.getBoundsOfCurve(T,D,S[1],S[2],S[1],S[2],S[3],S[4]),T=S[3],D=S[4];break;case"z":case"Z":T=E,D=M;break}I.forEach(function(J){k.push(J.x),P.push(J.y)}),k.push(T),P.push(D)}var F=y(k)||0,U=y(P)||0,Y=m(k)||0,Q=m(P)||0,q=Y-F,ne=Q-U;return{left:F,top:U,width:q,height:ne}}}),v.Path.fromObject=function(k,P){if(typeof k.sourcePath=="string"){var S=k.sourcePath;v.loadSVGFromURL(S,function(E){var M=E[0];M.setOptions(k),k.clipPath?v.util.enlivenObjects([k.clipPath],function(T){M.clipPath=T[0],P&&P(M)}):P&&P(M)})}else v.Object._fromObject("Path",k,P,"path")},v.Path.ATTRIBUTE_NAMES=v.SHARED_ATTRIBUTES.concat(["d"]),v.Path.fromElement=function(k,P,S){var E=v.parseAttributes(k,v.Path.ATTRIBUTE_NAMES);E.fromSVG=!0,P(new v.Path(E.d,d(E,S)))}}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.util.array.min,m=v.util.array.max;v.Group||(v.Group=v.util.createClass(v.Object,v.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(d,f,x){f=f||{},this._objects=[],x&&this.callSuper("initialize",f),this._objects=d||[];for(var k=this._objects.length;k--;)this._objects[k].group=this;if(x)this._updateObjectsACoords();else{var P=f&&f.centerPoint;f.originX!==void 0&&(this.originX=f.originX),f.originY!==void 0&&(this.originY=f.originY),P||this._calcBounds(),this._updateObjectsCoords(P),delete f.centerPoint,this.callSuper("initialize",f)}this.setCoords()},_updateObjectsACoords:function(){for(var d=!0,f=this._objects.length;f--;)this._objects[f].setCoords(d)},_updateObjectsCoords:function(f){for(var f=f||this.getCenterPoint(),x=this._objects.length;x--;)this._updateObjectCoords(this._objects[x],f)},_updateObjectCoords:function(d,f){var x=d.left,k=d.top,P=!0;d.set({left:x-f.x,top:k-f.y}),d.group=this,d.setCoords(P)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(d){var f=!!this.group;return this._restoreObjectsState(),v.util.resetObjectTransform(this),d&&(f&&v.util.removeTransformFromObject(d,this.group.calcTransformMatrix()),this._objects.push(d),d.group=this,d._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,f?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(d){return this._restoreObjectsState(),v.util.resetObjectTransform(this),this.remove(d),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(d){this.dirty=!0,d.group=this,d._set("canvas",this.canvas)},_onObjectRemoved:function(d){this.dirty=!0,delete d.group},_set:function(d,f){var x=this._objects.length;if(this.useSetOnGroup)for(;x--;)this._objects[x].setOnGroup(d,f);if(d==="canvas")for(;x--;)this._objects[x]._set(d,f);v.Object.prototype._set.call(this,d,f)},toObject:function(d){var f=this.includeDefaultValues,x=this._objects.filter(function(P){return!P.excludeFromExport}).map(function(P){var S=P.includeDefaultValues;P.includeDefaultValues=f;var E=P.toObject(d);return P.includeDefaultValues=S,E}),k=v.Object.prototype.toObject.call(this,d);return k.objects=x,k},toDatalessObject:function(d){var f,x=this.sourcePath;if(x)f=x;else{var k=this.includeDefaultValues;f=this._objects.map(function(S){var E=S.includeDefaultValues;S.includeDefaultValues=k;var M=S.toDatalessObject(d);return S.includeDefaultValues=E,M})}var P=v.Object.prototype.toDatalessObject.call(this,d);return P.objects=f,P},render:function(d){this._transformDone=!0,this.callSuper("render",d),this._transformDone=!1},shouldCache:function(){var d=v.Object.prototype.shouldCache.call(this);if(d){for(var f=0,x=this._objects.length;f<x;f++)if(this._objects[f].willDrawShadow())return this.ownCaching=!1,!1}return d},willDrawShadow:function(){if(v.Object.prototype.willDrawShadow.call(this))return!0;for(var d=0,f=this._objects.length;d<f;d++)if(this._objects[d].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(d){for(var f=0,x=this._objects.length;f<x;f++)this._objects[f].render(d);this._drawClipPath(d,this.clipPath)},isCacheDirty:function(d){if(this.callSuper("isCacheDirty",d))return!0;if(!this.statefullCache)return!1;for(var f=0,x=this._objects.length;f<x;f++)if(this._objects[f].isCacheDirty(!0)){if(this._cacheCanvas){var k=this.cacheWidth/this.zoomX,P=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-k/2,-P/2,k,P)}return!0}return!1},_restoreObjectsState:function(){var d=this.calcOwnMatrix();return this._objects.forEach(function(f){v.util.addTransformToObject(f,d),delete f.group,f.setCoords()}),this},destroy:function(){return this._objects.forEach(function(d){d.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(d){d.dispose&&d.dispose()}),this._objects=[]},toActiveSelection:function(){if(!!this.canvas){var d=this._objects,f=this.canvas;this._objects=[];var x=this.toObject();delete x.objects;var k=new v.ActiveSelection([]);return k.set(x),k.type="activeSelection",f.remove(this),d.forEach(function(P){P.group=k,P.dirty=!0,f.add(P)}),k.canvas=f,k._objects=d,f._activeObject=k,k.setCoords(),k}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var d=!0;return this.forEachObject(function(f){f.setCoords(d)}),this},_calcBounds:function(d){for(var f=[],x=[],k,P,S,E=["tr","br","bl","tl"],M=0,T=this._objects.length,D,I=E.length;M<T;++M){for(k=this._objects[M],S=k.calcACoords(),D=0;D<I;D++)P=E[D],f.push(S[P].x),x.push(S[P].y);k.aCoords=S}this._getBounds(f,x,d)},_getBounds:function(d,f,x){var k=new v.Point(y(d),y(f)),P=new v.Point(m(d),m(f)),S=k.y||0,E=k.x||0,M=P.x-k.x||0,T=P.y-k.y||0;this.width=M,this.height=T,x||this.setPositionByOrigin({x:E,y:S},"left","top")},_toSVG:function(d){for(var f=["<g ","COMMON_PARTS",` >
`],x=0,k=this._objects.length;x<k;x++)f.push("		",this._objects[x].toSVG(d));return f.push(`</g>
`),f},getSvgStyles:function(){var d=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",f=this.visible?"":" visibility: hidden;";return[d,this.getSvgFilter(),f].join("")},toClipPathSVG:function(d){for(var f=[],x=0,k=this._objects.length;x<k;x++)f.push("	",this._objects[x].toClipPathSVG(d));return this._createBaseClipPathSVGMarkup(f,{reviver:d})}}),v.Group.fromObject=function(d,f){var x=d.objects,k=v.util.object.clone(d,!0);if(delete k.objects,typeof x=="string"){v.loadSVGFromURL(x,function(P){var S=v.util.groupSVGElements(P,d,x),E=k.clipPath;delete k.clipPath,S.set(k),E?v.util.enlivenObjects([E],function(M){S.clipPath=M[0],f&&f(S)}):f&&f(S)});return}v.util.enlivenObjects(x,function(P){v.util.enlivenObjectEnlivables(d,k,function(){f&&f(new v.Group(P,k,!0))})})})}(e),function(g){var v=g.fabric||(g.fabric={});v.ActiveSelection||(v.ActiveSelection=v.util.createClass(v.Group,{type:"activeSelection",initialize:function(y,m){m=m||{},this._objects=y||[];for(var d=this._objects.length;d--;)this._objects[d].group=this;m.originX&&(this.originX=m.originX),m.originY&&(this.originY=m.originY),this._calcBounds(),this._updateObjectsCoords(),v.Object.prototype.initialize.call(this,m),this.setCoords()},toGroup:function(){var y=this._objects.concat();this._objects=[];var m=v.Object.prototype.toObject.call(this),d=new v.Group([]);if(delete m.type,d.set(m),y.forEach(function(x){x.canvas.remove(x),x.group=d}),d._objects=y,!this.canvas)return d;var f=this.canvas;return f.add(d),f._activeObject=d,d.setCoords(),d},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(y,m,d){y.save(),y.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,d=d||{},typeof d.hasControls>"u"&&(d.hasControls=!1),d.forActiveSelection=!0;for(var f=0,x=this._objects.length;f<x;f++)this._objects[f]._renderControls(y,d);this.callSuper("_renderControls",y,m),y.restore()}}),v.ActiveSelection.fromObject=function(y,m){v.util.enlivenObjects(y.objects,function(d){delete y.objects,m&&m(new v.ActiveSelection(d,y,!0))})})}(e),function(g){var v=n.util.object.extend;if(g.fabric||(g.fabric={}),g.fabric.Image){n.warn("fabric.Image is already defined.");return}n.Image=n.util.createClass(n.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:n.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:n.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(y,m){m||(m={}),this.filters=[],this.cacheKey="texture"+n.Object.__uid++,this.callSuper("initialize",m),this._initElement(y,m)},getElement:function(){return this._element||{}},setElement:function(y,m){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=y,this._originalElement=y,this._initConfig(m),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(y){var m=n.filterBackend;m&&m.evictCachesForKey&&m.evictCachesForKey(y)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(y){n.util.cleanUpJsdomNode(this[y]),this[y]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var y=this.getElement();return{width:y.naturalWidth||y.width,height:y.naturalHeight||y.height}},_stroke:function(y){if(!(!this.stroke||this.strokeWidth===0)){var m=this.width/2,d=this.height/2;y.beginPath(),y.moveTo(-m,-d),y.lineTo(m,-d),y.lineTo(m,d),y.lineTo(-m,d),y.lineTo(-m,-d),y.closePath()}},toObject:function(y){var m=[];this.filters.forEach(function(f){f&&m.push(f.toObject())});var d=v(this.callSuper("toObject",["cropX","cropY"].concat(y)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:m});return this.resizeFilter&&(d.resizeFilter=this.resizeFilter.toObject()),d},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var y=[],m=[],d,f=this._element,x=-this.width/2,k=-this.height/2,P="",S="";if(!f)return[];if(this.hasCrop()){var E=n.Object.__uid++;y.push('<clipPath id="imageCrop_'+E+`">
`,'	<rect x="'+x+'" y="'+k+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),P=' clip-path="url(#imageCrop_'+E+')" '}if(this.imageSmoothing||(S='" image-rendering="optimizeSpeed'),m.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',x-this.cropX,'" y="',k-this.cropY,'" width="',f.width||f.naturalWidth,'" height="',f.height||f.height,S,'"',P,`></image>
`),this.stroke||this.strokeDashArray){var M=this.fill;this.fill=null,d=["	<rect ",'x="',x,'" y="',k,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=M}return this.paintFirst!=="fill"?y=y.concat(d,m):y=y.concat(m,d),y},getSrc:function(y){var m=y?this._element:this._originalElement;return m?m.toDataURL?m.toDataURL():this.srcFromAttribute?m.getAttribute("src"):m.src:this.src||""},setSrc:function(y,m,d){return n.util.loadImage(y,function(f,x){this.setElement(f,d),this._setWidthHeight(),m&&m(this,x)},this,d&&d.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var y=this.resizeFilter,m=this.minimumScaleTrigger,d=this.getTotalObjectScaling(),f=d.scaleX,x=d.scaleY,k=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!y||f>m&&x>m){this._element=k,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=f,this._lastScaleY=x;return}n.filterBackend||(n.filterBackend=n.initFilterBackend());var P=n.util.createCanvasElement(),S=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,E=k.width,M=k.height;P.width=E,P.height=M,this._element=P,this._lastScaleX=y.scaleX=f,this._lastScaleY=y.scaleY=x,n.filterBackend.applyFilters([y],k,E,M,this._element,S),this._filterScalingX=P.width/this._originalElement.width,this._filterScalingY=P.height/this._originalElement.height},applyFilters:function(y){if(y=y||this.filters||[],y=y.filter(function(k){return k&&!k.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),y.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var m=this._originalElement,d=m.naturalWidth||m.width,f=m.naturalHeight||m.height;if(this._element===this._originalElement){var x=n.util.createCanvasElement();x.width=d,x.height=f,this._element=x,this._filteredEl=x}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,d,f),this._lastScaleX=1,this._lastScaleY=1;return n.filterBackend||(n.filterBackend=n.initFilterBackend()),n.filterBackend.applyFilters(y,this._originalElement,d,f,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(y){n.util.setImageSmoothing(y,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(y),this._renderPaintInOrder(y)},drawCacheOnCanvas:function(y){n.util.setImageSmoothing(y,this.imageSmoothing),n.Object.prototype.drawCacheOnCanvas.call(this,y)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(y){var m=this._element;if(!!m){var d=this._filterScalingX,f=this._filterScalingY,x=this.width,k=this.height,P=Math.min,S=Math.max,E=S(this.cropX,0),M=S(this.cropY,0),T=m.naturalWidth||m.width,D=m.naturalHeight||m.height,I=E*d,N=M*f,O=P(x*d,T-I),F=P(k*f,D-N),U=-x/2,Y=-k/2,Q=P(x,T/d-E),q=P(k,D/f-M);m&&y.drawImage(m,I,N,O,F,U,Y,Q,q)}},_needsResize:function(){var y=this.getTotalObjectScaling();return y.scaleX!==this._lastScaleX||y.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(y,m){this.setElement(n.util.getById(y),m),n.util.addClass(this.getElement(),n.Image.CSS_CANVAS)},_initConfig:function(y){y||(y={}),this.setOptions(y),this._setWidthHeight(y)},_initFilters:function(y,m){y&&y.length?n.util.enlivenObjects(y,function(d){m&&m(d)},"fabric.Image.filters"):m&&m()},_setWidthHeight:function(y){y||(y={});var m=this.getElement();this.width=y.width||m.naturalWidth||m.width||0,this.height=y.height||m.naturalHeight||m.height||0},parsePreserveAspectRatioAttribute:function(){var y=n.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),m=this._element.width,d=this._element.height,f=1,x=1,k=0,P=0,S=0,E=0,M,T=this.width,D=this.height,I={width:T,height:D};return y&&(y.alignX!=="none"||y.alignY!=="none")?(y.meetOrSlice==="meet"&&(f=x=n.util.findScaleToFit(this._element,I),M=(T-m*f)/2,y.alignX==="Min"&&(k=-M),y.alignX==="Max"&&(k=M),M=(D-d*x)/2,y.alignY==="Min"&&(P=-M),y.alignY==="Max"&&(P=M)),y.meetOrSlice==="slice"&&(f=x=n.util.findScaleToCover(this._element,I),M=m-T/f,y.alignX==="Mid"&&(S=M/2),y.alignX==="Max"&&(S=M),M=d-D/x,y.alignY==="Mid"&&(E=M/2),y.alignY==="Max"&&(E=M),m=T/f,d=D/x)):(f=T/m,x=D/d),{width:m,height:d,scaleX:f,scaleY:x,offsetLeft:k,offsetTop:P,cropX:S,cropY:E}}}),n.Image.CSS_CANVAS="canvas-img",n.Image.prototype.getSvgSrc=n.Image.prototype.getSrc,n.Image.fromObject=function(y,m){var d=n.util.object.clone(y);n.util.loadImage(d.src,function(f,x){if(x){m&&m(null,!0);return}n.Image.prototype._initFilters.call(d,d.filters,function(k){d.filters=k||[],n.Image.prototype._initFilters.call(d,[d.resizeFilter],function(P){d.resizeFilter=P[0],n.util.enlivenObjectEnlivables(d,d,function(){var S=new n.Image(f,d);m(S,!1)})})})},null,d.crossOrigin)},n.Image.fromURL=function(y,m,d){n.util.loadImage(y,function(f,x){m&&m(new n.Image(f,d),x)},null,d&&d.crossOrigin)},n.Image.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),n.Image.fromElement=function(y,m,d){var f=n.parseAttributes(y,n.Image.ATTRIBUTE_NAMES);n.Image.fromURL(f["xlink:href"],m,v(d?n.util.object.clone(d):{},f))}}(e),n.util.object.extend(n.Object.prototype,{_getAngleValueForStraighten:function(){var g=this.angle%360;return g>0?Math.round((g-1)/90)*90:Math.round(g/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(g){g=g||{};var v=function(){},y=g.onComplete||v,m=g.onChange||v,d=this;return n.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(f){d.rotate(f),m()},onComplete:function(){d.setCoords(),y()}})}}),n.util.object.extend(n.StaticCanvas.prototype,{straightenObject:function(g){return g.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(g){return g.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function g(y,m){var d="precision "+m+` float;
void main(){}`,f=y.createShader(y.FRAGMENT_SHADER);return y.shaderSource(f,d),y.compileShader(f),!!y.getShaderParameter(f,y.COMPILE_STATUS)}n.isWebglSupported=function(y){if(n.isLikelyNode)return!1;y=y||n.WebglFilterBackend.prototype.tileSize;var m=document.createElement("canvas"),d=m.getContext("webgl")||m.getContext("experimental-webgl"),f=!1;if(d){n.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE),f=n.maxTextureSize>=y;for(var x=["highp","mediump","lowp"],k=0;k<3;k++)if(g(d,x[k])){n.webGlPrecision=x[k];break}}return this.isSupported=f,f},n.WebglFilterBackend=v;function v(y){y&&y.tileSize&&(this.tileSize=y.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}v.prototype={tileSize:2048,resources:{},setupGLContext:function(y,m){this.dispose(),this.createWebGLCanvas(y,m),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(y,m)},chooseFastestCopyGLTo2DMethod:function(y,m){var d=typeof window.performance<"u",f;try{new ImageData(1,1),f=!0}catch{f=!1}var x=typeof ArrayBuffer<"u",k=typeof Uint8ClampedArray<"u";if(!!(d&&f&&x&&k)){var P=n.util.createCanvasElement(),S=new ArrayBuffer(y*m*4);if(n.forceGLPutImageData){this.imageBuffer=S,this.copyGLTo2D=w;return}var E={imageBuffer:S,destinationWidth:y,destinationHeight:m,targetCanvas:P},M,T,D;P.width=y,P.height=m,M=window.performance.now(),s.call(E,this.gl,E),T=window.performance.now()-M,M=window.performance.now(),w.call(E,this.gl,E),D=window.performance.now()-M,T>D?(this.imageBuffer=S,this.copyGLTo2D=w):this.copyGLTo2D=s}},createWebGLCanvas:function(y,m){var d=n.util.createCanvasElement();d.width=y,d.height=m;var f={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},x=d.getContext("webgl",f);x||(x=d.getContext("experimental-webgl",f)),x&&(x.clearColor(0,0,0,0),this.canvas=d,this.gl=x)},applyFilters:function(y,m,d,f,x,k){var P=this.gl,S;k&&(S=this.getCachedTexture(k,m));var E={originalWidth:m.width||m.originalWidth,originalHeight:m.height||m.originalHeight,sourceWidth:d,sourceHeight:f,destinationWidth:d,destinationHeight:f,context:P,sourceTexture:this.createTexture(P,d,f,!S&&m),targetTexture:this.createTexture(P,d,f),originalTexture:S||this.createTexture(P,d,f,!S&&m),passes:y.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:x},M=P.createFramebuffer();return P.bindFramebuffer(P.FRAMEBUFFER,M),y.forEach(function(T){T&&T.applyTo(E)}),u(E),this.copyGLTo2D(P,E),P.bindTexture(P.TEXTURE_2D,null),P.deleteTexture(E.sourceTexture),P.deleteTexture(E.targetTexture),P.deleteFramebuffer(M),x.getContext("2d").setTransform(1,0,0,1,0,0),E},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(y,m,d,f,x){var k=y.createTexture();return y.bindTexture(y.TEXTURE_2D,k),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,x||y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,x||y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),f?y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,f):y.texImage2D(y.TEXTURE_2D,0,y.RGBA,m,d,0,y.RGBA,y.UNSIGNED_BYTE,null),k},getCachedTexture:function(y,m){if(this.textureCache[y])return this.textureCache[y];var d=this.createTexture(this.gl,m.width,m.height,m);return this.textureCache[y]=d,d},evictCachesForKey:function(y){this.textureCache[y]&&(this.gl.deleteTexture(this.textureCache[y]),delete this.textureCache[y])},copyGLTo2D:s,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var y=this.gl,m={renderer:"",vendor:""};if(!y)return m;var d=y.getExtension("WEBGL_debug_renderer_info");if(d){var f=y.getParameter(d.UNMASKED_RENDERER_WEBGL),x=y.getParameter(d.UNMASKED_VENDOR_WEBGL);f&&(m.renderer=f.toLowerCase()),x&&(m.vendor=x.toLowerCase())}return this.gpuInfo=m,m}}}();function u(g){var v=g.targetCanvas,y=v.width,m=v.height,d=g.destinationWidth,f=g.destinationHeight;(y!==d||m!==f)&&(v.width=d,v.height=f)}function s(g,v){var y=g.canvas,m=v.targetCanvas,d=m.getContext("2d");d.translate(0,m.height),d.scale(1,-1);var f=y.height-m.height;d.drawImage(y,0,f,m.width,m.height,0,0,m.width,m.height)}function w(g,v){var y=v.targetCanvas,m=y.getContext("2d"),d=v.destinationWidth,f=v.destinationHeight,x=d*f*4,k=new Uint8Array(this.imageBuffer,0,x),P=new Uint8ClampedArray(this.imageBuffer,0,x);g.readPixels(0,0,d,f,g.RGBA,g.UNSIGNED_BYTE,k);var S=new ImageData(P,d,f);m.putImageData(S,0,0)}(function(){var g=function(){};n.Canvas2dFilterBackend=v;function v(){}v.prototype={evictCachesForKey:g,dispose:g,clearWebGLCaches:g,resources:{},applyFilters:function(y,m,d,f,x){var k=x.getContext("2d");k.drawImage(m,0,0,d,f);var P=k.getImageData(0,0,d,f),S=k.getImageData(0,0,d,f),E={sourceWidth:d,sourceHeight:f,imageData:P,originalEl:m,originalImageData:S,canvasEl:x,ctx:k,filterBackend:this};return y.forEach(function(M){M.applyTo(E)}),(E.imageData.width!==d||E.imageData.height!==f)&&(x.width=E.imageData.width,x.height=E.imageData.height),k.putImageData(E.imageData,0,0),E}}})(),n.Image=n.Image||{},n.Image.filters=n.Image.filters||{},n.Image.filters.BaseFilter=n.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(g){g&&this.setOptions(g)},setOptions:function(g){for(var v in g)this[v]=g[v]},createProgram:function(g,v,y){v=v||this.fragmentSource,y=y||this.vertexSource,n.webGlPrecision!=="highp"&&(v=v.replace(/precision highp float/g,"precision "+n.webGlPrecision+" float"));var m=g.createShader(g.VERTEX_SHADER);if(g.shaderSource(m,y),g.compileShader(m),!g.getShaderParameter(m,g.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+g.getShaderInfoLog(m));var d=g.createShader(g.FRAGMENT_SHADER);if(g.shaderSource(d,v),g.compileShader(d),!g.getShaderParameter(d,g.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+g.getShaderInfoLog(d));var f=g.createProgram();if(g.attachShader(f,m),g.attachShader(f,d),g.linkProgram(f),!g.getProgramParameter(f,g.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+g.getProgramInfoLog(f));var x=this.getAttributeLocations(g,f),k=this.getUniformLocations(g,f)||{};return k.uStepW=g.getUniformLocation(f,"uStepW"),k.uStepH=g.getUniformLocation(f,"uStepH"),{program:f,attributeLocations:x,uniformLocations:k}},getAttributeLocations:function(g,v){return{aPosition:g.getAttribLocation(v,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(g,v,y){var m=v.aPosition,d=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,d),g.enableVertexAttribArray(m),g.vertexAttribPointer(m,2,g.FLOAT,!1,0,0),g.bufferData(g.ARRAY_BUFFER,y,g.STATIC_DRAW)},_setupFrameBuffer:function(g){var v=g.context,y,m;g.passes>1?(y=g.destinationWidth,m=g.destinationHeight,(g.sourceWidth!==y||g.sourceHeight!==m)&&(v.deleteTexture(g.targetTexture),g.targetTexture=g.filterBackend.createTexture(v,y,m)),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,g.targetTexture,0)):(v.bindFramebuffer(v.FRAMEBUFFER,null),v.finish())},_swapTextures:function(g){g.passes--,g.pass++;var v=g.targetTexture;g.targetTexture=g.sourceTexture,g.sourceTexture=v},isNeutralState:function(){var g=this.mainParameter,v=n.Image.filters[this.type].prototype;if(g)if(Array.isArray(v[g])){for(var y=v[g].length;y--;)if(this[g][y]!==v[g][y])return!1;return!0}else return v[g]===this[g];else return!1},applyTo:function(g){g.webgl?(this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g)):this.applyTo2d(g)},retrieveShader:function(g){return g.programCache.hasOwnProperty(this.type)||(g.programCache[this.type]=this.createProgram(g.context)),g.programCache[this.type]},applyToWebGL:function(g){var v=g.context,y=this.retrieveShader(g);g.pass===0&&g.originalTexture?v.bindTexture(v.TEXTURE_2D,g.originalTexture):v.bindTexture(v.TEXTURE_2D,g.sourceTexture),v.useProgram(y.program),this.sendAttributeData(v,y.attributeLocations,g.aPosition),v.uniform1f(y.uniformLocations.uStepW,1/g.sourceWidth),v.uniform1f(y.uniformLocations.uStepH,1/g.sourceHeight),this.sendUniformData(v,y.uniformLocations),v.viewport(0,0,g.destinationWidth,g.destinationHeight),v.drawArrays(v.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(g,v,y){g.activeTexture(y),g.bindTexture(g.TEXTURE_2D,v),g.activeTexture(g.TEXTURE0)},unbindAdditionalTexture:function(g,v){g.activeTexture(v),g.bindTexture(g.TEXTURE_2D,null),g.activeTexture(g.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(g){this[this.mainParameter]=g},sendUniformData:function(){},createHelpLayer:function(g){if(!g.helpLayer){var v=document.createElement("canvas");v.width=g.sourceWidth,v.height=g.sourceHeight,g.helpLayer=v}},toObject:function(){var g={type:this.type},v=this.mainParameter;return v&&(g[v]=this[v]),g},toJSON:function(){return this.toObject()}}),n.Image.filters.BaseFilter.fromObject=function(g,v){var y=new n.Image.filters[g.type](g);return v&&v(y),y},function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass;y.ColorMatrix=m(y.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(d){this.callSuper("initialize",d),this.matrix=this.matrix.slice(0)},applyTo2d:function(d){var f=d.imageData,x=f.data,k=x.length,P=this.matrix,S,E,M,T,D,I=this.colorsOnly;for(D=0;D<k;D+=4)S=x[D],E=x[D+1],M=x[D+2],I?(x[D]=S*P[0]+E*P[1]+M*P[2]+P[4]*255,x[D+1]=S*P[5]+E*P[6]+M*P[7]+P[9]*255,x[D+2]=S*P[10]+E*P[11]+M*P[12]+P[14]*255):(T=x[D+3],x[D]=S*P[0]+E*P[1]+M*P[2]+T*P[3]+P[4]*255,x[D+1]=S*P[5]+E*P[6]+M*P[7]+T*P[8]+P[9]*255,x[D+2]=S*P[10]+E*P[11]+M*P[12]+T*P[13]+P[14]*255,x[D+3]=S*P[15]+E*P[16]+M*P[17]+T*P[18]+P[19]*255)},getUniformLocations:function(d,f){return{uColorMatrix:d.getUniformLocation(f,"uColorMatrix"),uConstants:d.getUniformLocation(f,"uConstants")}},sendUniformData:function(d,f){var x=this.matrix,k=[x[0],x[1],x[2],x[3],x[5],x[6],x[7],x[8],x[10],x[11],x[12],x[13],x[15],x[16],x[17],x[18]],P=[x[4],x[9],x[14],x[19]];d.uniformMatrix4fv(f.uColorMatrix,!1,k),d.uniform4fv(f.uConstants,P)}}),v.Image.filters.ColorMatrix.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass;y.Brightness=m(y.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(d){if(this.brightness!==0){var f=d.imageData,x=f.data,k,P=x.length,S=Math.round(this.brightness*255);for(k=0;k<P;k+=4)x[k]=x[k]+S,x[k+1]=x[k+1]+S,x[k+2]=x[k+2]+S}},getUniformLocations:function(d,f){return{uBrightness:d.getUniformLocation(f,"uBrightness")}},sendUniformData:function(d,f){d.uniform1f(f.uBrightness,this.brightness)}}),v.Image.filters.Brightness.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.util.object.extend,m=v.Image.filters,d=v.util.createClass;m.Convolute=d(m.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(f){var x=Math.sqrt(this.matrix.length),k=this.type+"_"+x+"_"+(this.opaque?1:0),P=this.fragmentSource[k];return f.programCache.hasOwnProperty(k)||(f.programCache[k]=this.createProgram(f.context,P)),f.programCache[k]},applyTo2d:function(f){var x=f.imageData,k=x.data,P=this.matrix,S=Math.round(Math.sqrt(P.length)),E=Math.floor(S/2),M=x.width,T=x.height,D=f.ctx.createImageData(M,T),I=D.data,N=this.opaque?1:0,O,F,U,Y,Q,q,ne,J,re,X,j,Z,W;for(j=0;j<T;j++)for(X=0;X<M;X++){for(Q=(j*M+X)*4,O=0,F=0,U=0,Y=0,W=0;W<S;W++)for(Z=0;Z<S;Z++)ne=j+W-E,q=X+Z-E,!(ne<0||ne>=T||q<0||q>=M)&&(J=(ne*M+q)*4,re=P[W*S+Z],O+=k[J]*re,F+=k[J+1]*re,U+=k[J+2]*re,N||(Y+=k[J+3]*re));I[Q]=O,I[Q+1]=F,I[Q+2]=U,N?I[Q+3]=k[Q+3]:I[Q+3]=Y}f.imageData=D},getUniformLocations:function(f,x){return{uMatrix:f.getUniformLocation(x,"uMatrix"),uOpaque:f.getUniformLocation(x,"uOpaque"),uHalfSize:f.getUniformLocation(x,"uHalfSize"),uSize:f.getUniformLocation(x,"uSize")}},sendUniformData:function(f,x){f.uniform1fv(x.uMatrix,this.matrix)},toObject:function(){return y(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),v.Image.filters.Convolute.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass;y.Grayscale=m(y.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(d){var f=d.imageData,x=f.data,k,P=x.length,S,E=this.mode;for(k=0;k<P;k+=4)E==="average"?S=(x[k]+x[k+1]+x[k+2])/3:E==="lightness"?S=(Math.min(x[k],x[k+1],x[k+2])+Math.max(x[k],x[k+1],x[k+2]))/2:E==="luminosity"&&(S=.21*x[k]+.72*x[k+1]+.07*x[k+2]),x[k]=S,x[k+1]=S,x[k+2]=S},retrieveShader:function(d){var f=this.type+"_"+this.mode;if(!d.programCache.hasOwnProperty(f)){var x=this.fragmentSource[this.mode];d.programCache[f]=this.createProgram(d.context,x)}return d.programCache[f]},getUniformLocations:function(d,f){return{uMode:d.getUniformLocation(f,"uMode")}},sendUniformData:function(d,f){var x=1;d.uniform1i(f.uMode,x)},isNeutralState:function(){return!1}}),v.Image.filters.Grayscale.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass;y.Invert=m(y.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(d){var f=d.imageData,x=f.data,k,P=x.length;for(k=0;k<P;k+=4)x[k]=255-x[k],x[k+1]=255-x[k+1],x[k+2]=255-x[k+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(d,f){return{uInvert:d.getUniformLocation(f,"uInvert")}},sendUniformData:function(d,f){d.uniform1i(f.uInvert,this.invert)}}),v.Image.filters.Invert.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.util.object.extend,m=v.Image.filters,d=v.util.createClass;m.Noise=d(m.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(f){if(this.noise!==0){var x=f.imageData,k=x.data,P,S=k.length,E=this.noise,M;for(P=0,S=k.length;P<S;P+=4)M=(.5-Math.random())*E,k[P]+=M,k[P+1]+=M,k[P+2]+=M}},getUniformLocations:function(f,x){return{uNoise:f.getUniformLocation(x,"uNoise"),uSeed:f.getUniformLocation(x,"uSeed")}},sendUniformData:function(f,x){f.uniform1f(x.uNoise,this.noise/255),f.uniform1f(x.uSeed,Math.random())},toObject:function(){return y(this.callSuper("toObject"),{noise:this.noise})}}),v.Image.filters.Noise.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass;y.Pixelate=m(y.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(d){var f=d.imageData,x=f.data,k=f.height,P=f.width,S,E,M,T,D,I,N,O,F,U,Y;for(E=0;E<k;E+=this.blocksize)for(M=0;M<P;M+=this.blocksize)for(S=E*4*P+M*4,T=x[S],D=x[S+1],I=x[S+2],N=x[S+3],U=Math.min(E+this.blocksize,k),Y=Math.min(M+this.blocksize,P),O=E;O<U;O++)for(F=M;F<Y;F++)S=O*4*P+F*4,x[S]=T,x[S+1]=D,x[S+2]=I,x[S+3]=N},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(d,f){return{uBlocksize:d.getUniformLocation(f,"uBlocksize"),uStepW:d.getUniformLocation(f,"uStepW"),uStepH:d.getUniformLocation(f,"uStepH")}},sendUniformData:function(d,f){d.uniform1f(f.uBlocksize,this.blocksize)}}),v.Image.filters.Pixelate.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.util.object.extend,m=v.Image.filters,d=v.util.createClass;m.RemoveColor=d(m.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(f){var x=f.imageData,k=x.data,P,S=this.distance*255,E,M,T,D=new v.Color(this.color).getSource(),I=[D[0]-S,D[1]-S,D[2]-S],N=[D[0]+S,D[1]+S,D[2]+S];for(P=0;P<k.length;P+=4)E=k[P],M=k[P+1],T=k[P+2],E>I[0]&&M>I[1]&&T>I[2]&&E<N[0]&&M<N[1]&&T<N[2]&&(k[P+3]=0)},getUniformLocations:function(f,x){return{uLow:f.getUniformLocation(x,"uLow"),uHigh:f.getUniformLocation(x,"uHigh")}},sendUniformData:function(f,x){var k=new v.Color(this.color).getSource(),P=parseFloat(this.distance),S=[0+k[0]/255-P,0+k[1]/255-P,0+k[2]/255-P,1],E=[k[0]/255+P,k[1]/255+P,k[2]/255+P,1];f.uniform4fv(x.uLow,S),f.uniform4fv(x.uHigh,E)},toObject:function(){return y(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),v.Image.filters.RemoveColor.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass,d={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var f in d)y[f]=m(y.ColorMatrix,{type:f,matrix:d[f],mainParameter:!1,colorsOnly:!0}),v.Image.filters[f].fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric,y=v.Image.filters,m=v.util.createClass;y.BlendColor=m(y.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(d){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[d]+`}
}`},retrieveShader:function(d){var f=this.type+"_"+this.mode,x;return d.programCache.hasOwnProperty(f)||(x=this.buildSource(this.mode),d.programCache[f]=this.createProgram(d.context,x)),d.programCache[f]},applyTo2d:function(d){var f=d.imageData,x=f.data,k=x.length,P,S,E,M,T,D,I,N=1-this.alpha;I=new v.Color(this.color).getSource(),P=I[0]*this.alpha,S=I[1]*this.alpha,E=I[2]*this.alpha;for(var O=0;O<k;O+=4)switch(M=x[O],T=x[O+1],D=x[O+2],this.mode){case"multiply":x[O]=M*P/255,x[O+1]=T*S/255,x[O+2]=D*E/255;break;case"screen":x[O]=255-(255-M)*(255-P)/255,x[O+1]=255-(255-T)*(255-S)/255,x[O+2]=255-(255-D)*(255-E)/255;break;case"add":x[O]=M+P,x[O+1]=T+S,x[O+2]=D+E;break;case"diff":case"difference":x[O]=Math.abs(M-P),x[O+1]=Math.abs(T-S),x[O+2]=Math.abs(D-E);break;case"subtract":x[O]=M-P,x[O+1]=T-S,x[O+2]=D-E;break;case"darken":x[O]=Math.min(M,P),x[O+1]=Math.min(T,S),x[O+2]=Math.min(D,E);break;case"lighten":x[O]=Math.max(M,P),x[O+1]=Math.max(T,S),x[O+2]=Math.max(D,E);break;case"overlay":x[O]=P<128?2*M*P/255:255-2*(255-M)*(255-P)/255,x[O+1]=S<128?2*T*S/255:255-2*(255-T)*(255-S)/255,x[O+2]=E<128?2*D*E/255:255-2*(255-D)*(255-E)/255;break;case"exclusion":x[O]=P+M-2*P*M/255,x[O+1]=S+T-2*S*T/255,x[O+2]=E+D-2*E*D/255;break;case"tint":x[O]=P+M*N,x[O+1]=S+T*N,x[O+2]=E+D*N}},getUniformLocations:function(d,f){return{uColor:d.getUniformLocation(f,"uColor")}},sendUniformData:function(d,f){var x=new v.Color(this.color).getSource();x[0]=this.alpha*x[0]/255,x[1]=this.alpha*x[1]/255,x[2]=this.alpha*x[2]/255,x[3]=this.alpha,d.uniform4fv(f.uColor,x)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),v.Image.filters.BlendColor.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric,y=v.Image.filters,m=v.util.createClass;y.BlendImage=m(y.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(d){var f=this.type+"_"+this.mode,x=this.fragmentSource[this.mode];return d.programCache.hasOwnProperty(f)||(d.programCache[f]=this.createProgram(d.context,x)),d.programCache[f]},applyToWebGL:function(d){var f=d.context,x=this.createTexture(d.filterBackend,this.image);this.bindAdditionalTexture(f,x,f.TEXTURE1),this.callSuper("applyToWebGL",d),this.unbindAdditionalTexture(f,f.TEXTURE1)},createTexture:function(d,f){return d.getCachedTexture(f.cacheKey,f._element)},calculateMatrix:function(){var d=this.image,f=d._element.width,x=d._element.height;return[1/d.scaleX,0,0,0,1/d.scaleY,0,-d.left/f,-d.top/x,1]},applyTo2d:function(d){var f=d.imageData,x=d.filterBackend.resources,k=f.data,P=k.length,S=f.width,E=f.height,M,T,D,I,N,O,F,U,Y,Q,q=this.image,ne;x.blendImage||(x.blendImage=v.util.createCanvasElement()),Y=x.blendImage,Q=Y.getContext("2d"),Y.width!==S||Y.height!==E?(Y.width=S,Y.height=E):Q.clearRect(0,0,S,E),Q.setTransform(q.scaleX,0,0,q.scaleY,q.left,q.top),Q.drawImage(q._element,0,0,S,E),ne=Q.getImageData(0,0,S,E).data;for(var J=0;J<P;J+=4)switch(N=k[J],O=k[J+1],F=k[J+2],U=k[J+3],M=ne[J],T=ne[J+1],D=ne[J+2],I=ne[J+3],this.mode){case"multiply":k[J]=N*M/255,k[J+1]=O*T/255,k[J+2]=F*D/255,k[J+3]=U*I/255;break;case"mask":k[J+3]=I;break}},getUniformLocations:function(d,f){return{uTransformMatrix:d.getUniformLocation(f,"uTransformMatrix"),uImage:d.getUniformLocation(f,"uImage")}},sendUniformData:function(d,f){var x=this.calculateMatrix();d.uniform1i(f.uImage,1),d.uniformMatrix3fv(f.uTransformMatrix,!1,x)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),v.Image.filters.BlendImage.fromObject=function(d,f){v.Image.fromObject(d.image,function(x){var k=v.util.object.clone(d);k.image=x,f(new v.Image.filters.BlendImage(k))})}}(e),function(g){var v=g.fabric||(g.fabric={}),y=Math.pow,m=Math.floor,d=Math.sqrt,f=Math.abs,x=Math.round,k=Math.sin,P=Math.ceil,S=v.Image.filters,E=v.util.createClass;S.Resize=E(S.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(M,T){return{uDelta:M.getUniformLocation(T,"uDelta"),uTaps:M.getUniformLocation(T,"uTaps")}},sendUniformData:function(M,T){M.uniform2fv(T.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),M.uniform1fv(T.uTaps,this.taps)},retrieveShader:function(M){var T=this.getFilterWindow(),D=this.type+"_"+T;if(!M.programCache.hasOwnProperty(D)){var I=this.generateShader(T);M.programCache[D]=this.createProgram(M.context,I)}return M.programCache[D]},getFilterWindow:function(){var M=this.tempScale;return Math.ceil(this.lanczosLobes/M)},getTaps:function(){for(var M=this.lanczosCreate(this.lanczosLobes),T=this.tempScale,D=this.getFilterWindow(),I=new Array(D),N=1;N<=D;N++)I[N-1]=M(N*T);return I},generateShader:function(I){for(var T=new Array(I),D=this.fragmentSourceTOP,I,N=1;N<=I;N++)T[N-1]=N+".0 * uDelta";return D+="uniform float uTaps["+I+`];
`,D+=`void main() {
`,D+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,D+=`  float sum = 1.0;
`,T.forEach(function(O,F){D+="  color += texture2D(uTexture, vTexCoord + "+O+") * uTaps["+F+`];
`,D+="  color += texture2D(uTexture, vTexCoord - "+O+") * uTaps["+F+`];
`,D+="  sum += 2.0 * uTaps["+F+`];
`}),D+=`  gl_FragColor = color / sum;
`,D+="}",D},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(M){M.webgl?(M.passes++,this.width=M.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=M.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),M.destinationWidth=this.dW,this._setupFrameBuffer(M),this.applyToWebGL(M),this._swapTextures(M),M.sourceWidth=M.destinationWidth,this.height=M.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),M.destinationHeight=this.dH,this._setupFrameBuffer(M),this.applyToWebGL(M),this._swapTextures(M),M.sourceHeight=M.destinationHeight):this.applyTo2d(M)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(M){return function(T){if(T>=M||T<=-M)return 0;if(T<11920929e-14&&T>-11920929e-14)return 1;T*=Math.PI;var D=T/M;return k(T)/T*k(D)/D}},applyTo2d:function(M){var T=M.imageData,D=this.scaleX,I=this.scaleY;this.rcpScaleX=1/D,this.rcpScaleY=1/I;var N=T.width,O=T.height,F=x(N*D),U=x(O*I),Y;this.resizeType==="sliceHack"?Y=this.sliceByTwo(M,N,O,F,U):this.resizeType==="hermite"?Y=this.hermiteFastResize(M,N,O,F,U):this.resizeType==="bilinear"?Y=this.bilinearFiltering(M,N,O,F,U):this.resizeType==="lanczos"&&(Y=this.lanczosResize(M,N,O,F,U)),M.imageData=Y},sliceByTwo:function(M,T,D,I,N){var O=M.imageData,F=.5,U=!1,Y=!1,Q=T*F,q=D*F,ne=v.filterBackend.resources,J,re,X=0,j=0,Z=T,W=0;for(ne.sliceByTwo||(ne.sliceByTwo=document.createElement("canvas")),J=ne.sliceByTwo,(J.width<T*1.5||J.height<D)&&(J.width=T*1.5,J.height=D),re=J.getContext("2d"),re.clearRect(0,0,T*1.5,D),re.putImageData(O,0,0),I=m(I),N=m(N);!U||!Y;)T=Q,D=q,I<m(Q*F)?Q=m(Q*F):(Q=I,U=!0),N<m(q*F)?q=m(q*F):(q=N,Y=!0),re.drawImage(J,X,j,T,D,Z,W,Q,q),X=Z,j=W,W+=q;return re.getImageData(X,j,I,N)},lanczosResize:function(M,T,D,I,N){function O(le){var oe,Ee,Ae,ve,ke,Ce,Pe,Me,Le,Te,ye;for(W.x=(le+.5)*q,te.x=m(W.x),oe=0;oe<N;oe++){for(W.y=(oe+.5)*ne,te.y=m(W.y),ke=0,Ce=0,Pe=0,Me=0,Le=0,Ee=te.x-X;Ee<=te.x+X;Ee++)if(!(Ee<0||Ee>=T)){Te=m(1e3*f(Ee-W.x)),Z[Te]||(Z[Te]={});for(var _e=te.y-j;_e<=te.y+j;_e++)_e<0||_e>=D||(ye=m(1e3*f(_e-W.y)),Z[Te][ye]||(Z[Te][ye]=Q(d(y(Te*J,2)+y(ye*re,2))/1e3)),Ae=Z[Te][ye],Ae>0&&(ve=(_e*T+Ee)*4,ke+=Ae,Ce+=Ae*F[ve],Pe+=Ae*F[ve+1],Me+=Ae*F[ve+2],Le+=Ae*F[ve+3]))}ve=(oe*I+le)*4,Y[ve]=Ce/ke,Y[ve+1]=Pe/ke,Y[ve+2]=Me/ke,Y[ve+3]=Le/ke}return++le<I?O(le):U}var F=M.imageData.data,U=M.ctx.createImageData(I,N),Y=U.data,Q=this.lanczosCreate(this.lanczosLobes),q=this.rcpScaleX,ne=this.rcpScaleY,J=2/this.rcpScaleX,re=2/this.rcpScaleY,X=P(q*this.lanczosLobes/2),j=P(ne*this.lanczosLobes/2),Z={},W={},te={};return O(0)},bilinearFiltering:function(M,T,D,I,N){var O,F,U,Y,Q,q,ne,J,re,X,j,Z,W=0,te,le=this.rcpScaleX,oe=this.rcpScaleY,Ee=4*(T-1),Ae=M.imageData,ve=Ae.data,ke=M.ctx.createImageData(I,N),Ce=ke.data;for(ne=0;ne<N;ne++)for(J=0;J<I;J++)for(Q=m(le*J),q=m(oe*ne),re=le*J-Q,X=oe*ne-q,te=4*(q*T+Q),j=0;j<4;j++)O=ve[te+j],F=ve[te+4+j],U=ve[te+Ee+j],Y=ve[te+Ee+4+j],Z=O*(1-re)*(1-X)+F*re*(1-X)+U*X*(1-re)+Y*re*X,Ce[W++]=Z;return ke},hermiteFastResize:function(M,T,D,I,N){for(var O=this.rcpScaleX,F=this.rcpScaleY,U=P(O/2),Y=P(F/2),Q=M.imageData,q=Q.data,ne=M.ctx.createImageData(I,N),J=ne.data,re=0;re<N;re++)for(var X=0;X<I;X++){for(var j=(X+re*I)*4,Z=0,W=0,te=0,le=0,oe=0,Ee=0,Ae=0,ve=(re+.5)*F,ke=m(re*F);ke<(re+1)*F;ke++)for(var Ce=f(ve-(ke+.5))/Y,Pe=(X+.5)*O,Me=Ce*Ce,Le=m(X*O);Le<(X+1)*O;Le++){var Te=f(Pe-(Le+.5))/U,ye=d(Me+Te*Te);ye>1&&ye<-1||(Z=2*ye*ye*ye-3*ye*ye+1,Z>0&&(Te=4*(Le+ke*T),Ae+=Z*q[Te+3],te+=Z,q[Te+3]<255&&(Z=Z*q[Te+3]/250),le+=Z*q[Te],oe+=Z*q[Te+1],Ee+=Z*q[Te+2],W+=Z))}J[j]=le/W,J[j+1]=oe/W,J[j+2]=Ee/W,J[j+3]=Ae/te}return ne},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),v.Image.filters.Resize.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass;y.Contrast=m(y.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(d){if(this.contrast!==0){var f=d.imageData,x,P,k=f.data,P=k.length,S=Math.floor(this.contrast*255),E=259*(S+255)/(255*(259-S));for(x=0;x<P;x+=4)k[x]=E*(k[x]-128)+128,k[x+1]=E*(k[x+1]-128)+128,k[x+2]=E*(k[x+2]-128)+128}},getUniformLocations:function(d,f){return{uContrast:d.getUniformLocation(f,"uContrast")}},sendUniformData:function(d,f){d.uniform1f(f.uContrast,this.contrast)}}),v.Image.filters.Contrast.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass;y.Saturation=m(y.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(d){if(this.saturation!==0){var f=d.imageData,x=f.data,k=x.length,P=-this.saturation,S,E;for(S=0;S<k;S+=4)E=Math.max(x[S],x[S+1],x[S+2]),x[S]+=E!==x[S]?(E-x[S])*P:0,x[S+1]+=E!==x[S+1]?(E-x[S+1])*P:0,x[S+2]+=E!==x[S+2]?(E-x[S+2])*P:0}},getUniformLocations:function(d,f){return{uSaturation:d.getUniformLocation(f,"uSaturation")}},sendUniformData:function(d,f){d.uniform1f(f.uSaturation,-this.saturation)}}),v.Image.filters.Saturation.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass;y.Vibrance=m(y.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(d){if(this.vibrance!==0){var f=d.imageData,x=f.data,k=x.length,P=-this.vibrance,S,E,M,T;for(S=0;S<k;S+=4)E=Math.max(x[S],x[S+1],x[S+2]),M=(x[S]+x[S+1]+x[S+2])/3,T=Math.abs(E-M)*2/255*P,x[S]+=E!==x[S]?(E-x[S])*T:0,x[S+1]+=E!==x[S+1]?(E-x[S+1])*T:0,x[S+2]+=E!==x[S+2]?(E-x[S+2])*T:0}},getUniformLocations:function(d,f){return{uVibrance:d.getUniformLocation(f,"uVibrance")}},sendUniformData:function(d,f){d.uniform1f(f.uVibrance,-this.vibrance)}}),v.Image.filters.Vibrance.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass;y.Blur=m(y.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(d){d.webgl?(this.aspectRatio=d.sourceWidth/d.sourceHeight,d.passes++,this._setupFrameBuffer(d),this.horizontal=!0,this.applyToWebGL(d),this._swapTextures(d),this._setupFrameBuffer(d),this.horizontal=!1,this.applyToWebGL(d),this._swapTextures(d)):this.applyTo2d(d)},applyTo2d:function(d){d.imageData=this.simpleBlur(d)},simpleBlur:function(d){var f=d.filterBackend.resources,x,k,P=d.imageData.width,S=d.imageData.height;f.blurLayer1||(f.blurLayer1=v.util.createCanvasElement(),f.blurLayer2=v.util.createCanvasElement()),x=f.blurLayer1,k=f.blurLayer2,(x.width!==P||x.height!==S)&&(k.width=x.width=P,k.height=x.height=S);var E=x.getContext("2d"),M=k.getContext("2d"),T=15,D,I,N,O,F=this.blur*.06*.5;for(E.putImageData(d.imageData,0,0),M.clearRect(0,0,P,S),O=-T;O<=T;O++)D=(Math.random()-.5)/4,I=O/T,N=F*I*P+D,M.globalAlpha=1-Math.abs(I),M.drawImage(x,N,D),E.drawImage(k,0,0),M.globalAlpha=1,M.clearRect(0,0,k.width,k.height);for(O=-T;O<=T;O++)D=(Math.random()-.5)/4,I=O/T,N=F*I*S+D,M.globalAlpha=1-Math.abs(I),M.drawImage(x,D,N),E.drawImage(k,0,0),M.globalAlpha=1,M.clearRect(0,0,k.width,k.height);d.ctx.drawImage(x,0,0);var U=d.ctx.getImageData(0,0,x.width,x.height);return E.globalAlpha=1,E.clearRect(0,0,x.width,x.height),U},getUniformLocations:function(d,f){return{delta:d.getUniformLocation(f,"uDelta")}},sendUniformData:function(d,f){var x=this.chooseRightDelta();d.uniform2fv(f.delta,x)},chooseRightDelta:function(){var d=1,f=[0,0],x;return this.horizontal?this.aspectRatio>1&&(d=1/this.aspectRatio):this.aspectRatio<1&&(d=this.aspectRatio),x=d*this.blur*.12,this.horizontal?f[0]=x:f[1]=x,f}}),y.Blur.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass;y.Gamma=m(y.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(d){this.gamma=[1,1,1],y.BaseFilter.prototype.initialize.call(this,d)},applyTo2d:function(d){var f=d.imageData,x=f.data,k=this.gamma,P=x.length,S=1/k[0],E=1/k[1],M=1/k[2],T;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),T=0,P=256;T<P;T++)this.rVals[T]=Math.pow(T/255,S)*255,this.gVals[T]=Math.pow(T/255,E)*255,this.bVals[T]=Math.pow(T/255,M)*255;for(T=0,P=x.length;T<P;T+=4)x[T]=this.rVals[x[T]],x[T+1]=this.gVals[x[T+1]],x[T+2]=this.bVals[x[T+2]]},getUniformLocations:function(d,f){return{uGamma:d.getUniformLocation(f,"uGamma")}},sendUniformData:function(d,f){d.uniform3fv(f.uGamma,this.gamma)}}),v.Image.filters.Gamma.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass;y.Composed=m(y.BaseFilter,{type:"Composed",subFilters:[],initialize:function(d){this.callSuper("initialize",d),this.subFilters=this.subFilters.slice(0)},applyTo:function(d){d.passes+=this.subFilters.length-1,this.subFilters.forEach(function(f){f.applyTo(d)})},toObject:function(){return v.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(d){return d.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(d){return!d.isNeutralState()})}}),v.Image.filters.Composed.fromObject=function(d,f){var x=d.subFilters||[],k=x.map(function(S){return new v.Image.filters[S.type](S)}),P=new v.Image.filters.Composed({subFilters:k});return f&&f(P),P}}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.Image.filters,m=v.util.createClass;y.HueRotation=m(y.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var d=this.rotation*Math.PI,f=v.util.cos(d),x=v.util.sin(d),k=1/3,P=Math.sqrt(k)*x,S=1-f;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=f+S/3,this.matrix[1]=k*S-P,this.matrix[2]=k*S+P,this.matrix[5]=k*S+P,this.matrix[6]=f+k*S,this.matrix[7]=k*S-P,this.matrix[10]=k*S-P,this.matrix[11]=k*S+P,this.matrix[12]=f+k*S},isNeutralState:function(d){return this.calculateMatrix(),y.BaseFilter.prototype.isNeutralState.call(this,d)},applyTo:function(d){this.calculateMatrix(),y.BaseFilter.prototype.applyTo.call(this,d)}}),v.Image.filters.HueRotation.fromObject=v.Image.filters.BaseFilter.fromObject}(e),function(g){var v=g.fabric||(g.fabric={}),y=v.util.object.clone;if(v.Text){v.warn("fabric.Text is already defined");return}var m="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");v.Text=v.util.createClass(v.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:v.Object.prototype.stateProperties.concat(m),cacheProperties:v.Object.prototype.cacheProperties.concat(m),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(d,f){this.styles=f?f.styles||{}:{},this.text=d,this.__skipDimension=!0,this.callSuper("initialize",f),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var d=this.path;d&&(d.segmentsInfo=v.util.getPathSegmentsInfo(d.path))},getMeasuringContext:function(){return v._measuringContext||(v._measuringContext=this.canvas&&this.canvas.contextCache||v.util.createCanvasElement().getContext("2d")),v._measuringContext},_splitText:function(){var d=this._splitTextIntoLines(this.text);return this.textLines=d.lines,this._textLines=d.graphemeLines,this._unwrappedTextLines=d._unwrappedLines,this._text=d.graphemeText,d},initDimensions:function(){if(!this.__skipDimension){if(this._splitText(),this._clearCache(),this.path){var d=this.getHeightOfLine(0)*1.1;this.width=this.path.width+d,this.height=this.path.height+d}else this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight();this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"})}},enlargeSpaces:function(){for(var d,f,x,k,P,S,E,M=0,T=this._textLines.length;M<T;M++)if(!(this.textAlign!=="justify"&&(M===T-1||this.isEndOfWrapping(M)))&&(k=0,P=this._textLines[M],f=this.getLineWidth(M),f<this.width&&(E=this.textLines[M].match(this._reSpacesAndTabs)))){x=E.length,d=(this.width-f)/x;for(var D=0,I=P.length;D<=I;D++)S=this.__charBounds[M][D],this._reSpaceAndTab.test(P[D])?(S.width+=d,S.kernedWidth+=d,S.left+=k,k+=d):S.left+=k}},isEndOfWrapping:function(d){return d===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var d=this.callSuper("_getCacheCanvasDimensions"),f=this.fontSize;return d.width+=f*d.zoomX,d.height+=f*d.zoomY,d},_render:function(d){var f=this.path;f&&!f.isNotVisible()&&f._render(d),this._setTextStyles(d),this._renderTextLinesBackground(d),this._renderTextDecoration(d,"underline"),this._renderText(d),this._renderTextDecoration(d,"overline"),this._renderTextDecoration(d,"linethrough")},_renderText:function(d){this.paintFirst==="stroke"?(this._renderTextStroke(d),this._renderTextFill(d)):(this._renderTextFill(d),this._renderTextStroke(d))},_setTextStyles:function(d,f,x){if(d.textBaseline="alphabetic",this.path)switch(this.pathAlign){case"center":d.textBaseline="middle";break;case"ascender":d.textBaseline="top";break;case"descender":d.textBaseline="bottom";break}d.font=this._getFontDeclaration(f,x)},calcTextWidth:function(){for(var d=this.getLineWidth(0),f=1,x=this._textLines.length;f<x;f++){var k=this.getLineWidth(f);k>d&&(d=k)}return d},_renderTextLine:function(d,f,x,k,P,S){this._renderChars(d,f,x,k,P,S)},_renderTextLinesBackground:function(d){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var f,x,k=d.fillStyle,P,S,E=this._getLeftOffset(),M=this._getTopOffset(),T=0,D=0,I,N,O=this.path,F,U=0,Y=this._textLines.length;U<Y;U++){if(f=this.getHeightOfLine(U),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",U)){M+=f;continue}P=this._textLines[U],x=this._getLineLeftOffset(U),D=0,T=0,S=this.getValueOfPropertyAt(U,0,"textBackgroundColor");for(var Q=0,q=P.length;Q<q;Q++)I=this.__charBounds[U][Q],N=this.getValueOfPropertyAt(U,Q,"textBackgroundColor"),O?(d.save(),d.translate(I.renderLeft,I.renderTop),d.rotate(I.angle),d.fillStyle=N,N&&d.fillRect(-I.width/2,-f/this.lineHeight*(1-this._fontSizeFraction),I.width,f/this.lineHeight),d.restore()):N!==S?(F=E+x+T,this.direction==="rtl"&&(F=this.width-F-D),d.fillStyle=S,S&&d.fillRect(F,M,D,f/this.lineHeight),T=I.left,D=I.width,S=N):D+=I.kernedWidth;N&&!O&&(F=E+x+T,this.direction==="rtl"&&(F=this.width-F-D),d.fillStyle=N,d.fillRect(F,M,D,f/this.lineHeight)),M+=f}d.fillStyle=k,this._removeShadow(d)}},getFontCache:function(d){var f=d.fontFamily.toLowerCase();v.charWidthsCache[f]||(v.charWidthsCache[f]={});var x=v.charWidthsCache[f],k=d.fontStyle.toLowerCase()+"_"+(d.fontWeight+"").toLowerCase();return x[k]||(x[k]={}),x[k]},_measureChar:function(d,f,x,k){var P=this.getFontCache(f),S=this._getFontDeclaration(f),E=this._getFontDeclaration(k),M=x+d,T=S===E,D,I,N,O=f.fontSize/this.CACHE_FONT_SIZE,F;if(x&&P[x]!==void 0&&(N=P[x]),P[d]!==void 0&&(F=D=P[d]),T&&P[M]!==void 0&&(I=P[M],F=I-N),D===void 0||N===void 0||I===void 0){var U=this.getMeasuringContext();this._setTextStyles(U,f,!0)}return D===void 0&&(F=D=U.measureText(d).width,P[d]=D),N===void 0&&T&&x&&(N=U.measureText(x).width,P[x]=N),T&&I===void 0&&(I=U.measureText(M).width,P[M]=I,F=I-N),{width:D*O,kernedWidth:F*O}},getHeightOfChar:function(d,f){return this.getValueOfPropertyAt(d,f,"fontSize")},measureLine:function(d){var f=this._measureLine(d);return this.charSpacing!==0&&(f.width-=this._getWidthOfCharSpacing()),f.width<0&&(f.width=0),f},_measureLine:function(d){var f=0,x,k,P=this._textLines[d],S,E,M=0,T=new Array(P.length),D=0,I,N,O=this.path,F=this.pathSide==="right";for(this.__charBounds[d]=T,x=0;x<P.length;x++)k=P[x],E=this._getGraphemeBox(k,d,x,S),T[x]=E,f+=E.kernedWidth,S=k;if(T[x]={left:E?E.left+E.width:0,width:0,kernedWidth:0,height:this.fontSize},O){switch(N=O.segmentsInfo[O.segmentsInfo.length-1].length,I=v.util.getPointOnPath(O.path,0,O.segmentsInfo),I.x+=O.pathOffset.x,I.y+=O.pathOffset.y,this.textAlign){case"left":D=F?N-f:0;break;case"center":D=(N-f)/2;break;case"right":D=F?0:N-f;break}for(D+=this.pathStartOffset*(F?-1:1),x=F?P.length-1:0;F?x>=0:x<P.length;F?x--:x++)E=T[x],D>N?D%=N:D<0&&(D+=N),this._setGraphemeOnPath(D,E,I),D+=E.kernedWidth}return{width:f,numOfSpaces:M}},_setGraphemeOnPath:function(d,f,x){var k=d+f.kernedWidth/2,P=this.path,S=v.util.getPointOnPath(P.path,k,P.segmentsInfo);f.renderLeft=S.x-x.x,f.renderTop=S.y-x.y,f.angle=S.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(d,f,x,k,P){var S=this.getCompleteStyleDeclaration(f,x),E=k?this.getCompleteStyleDeclaration(f,x-1):{},M=this._measureChar(d,S,k,E),T=M.kernedWidth,D=M.width,I;this.charSpacing!==0&&(I=this._getWidthOfCharSpacing(),D+=I,T+=I);var N={width:D,left:0,height:S.fontSize,kernedWidth:T,deltaY:S.deltaY};if(x>0&&!P){var O=this.__charBounds[f][x-1];N.left=O.left+O.width+M.kernedWidth-M.width}return N},getHeightOfLine:function(d){if(this.__lineHeights[d])return this.__lineHeights[d];for(var f=this._textLines[d],x=this.getHeightOfChar(d,0),k=1,P=f.length;k<P;k++)x=Math.max(this.getHeightOfChar(d,k),x);return this.__lineHeights[d]=x*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var d,f=0,x=0,k=this._textLines.length;x<k;x++)d=this.getHeightOfLine(x),f+=x===k-1?d/this.lineHeight:d;return f},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(d,f){d.save();for(var x=0,k=this._getLeftOffset(),P=this._getTopOffset(),S=0,E=this._textLines.length;S<E;S++){var M=this.getHeightOfLine(S),T=M/this.lineHeight,D=this._getLineLeftOffset(S);this._renderTextLine(f,d,this._textLines[S],k+D,P+x+T,S),x+=M}d.restore()},_renderTextFill:function(d){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(d,"fillText")},_renderTextStroke:function(d){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(d),d.save(),this._setLineDash(d,this.strokeDashArray),d.beginPath(),this._renderTextCommon(d,"strokeText"),d.closePath(),d.restore())},_renderChars:function(d,f,x,k,P,S){var E=this.getHeightOfLine(S),M=this.textAlign.indexOf("justify")!==-1,T,D,I="",N,O=0,F,U=this.path,Y=!M&&this.charSpacing===0&&this.isEmptyStyles(S)&&!U,Q=this.direction==="ltr",q=this.direction==="ltr"?1:-1,ne,J=f.canvas.getAttribute("dir");if(f.save(),J!==this.direction&&(f.canvas.setAttribute("dir",Q?"ltr":"rtl"),f.direction=Q?"ltr":"rtl",f.textAlign=Q?"left":"right"),P-=E*this._fontSizeFraction/this.lineHeight,Y){this._renderChar(d,f,S,0,x.join(""),k,P,E),f.restore();return}for(var re=0,X=x.length-1;re<=X;re++)F=re===X||this.charSpacing||U,I+=x[re],N=this.__charBounds[S][re],O===0?(k+=q*(N.kernedWidth-N.width),O+=N.width):O+=N.kernedWidth,M&&!F&&this._reSpaceAndTab.test(x[re])&&(F=!0),F||(T=T||this.getCompleteStyleDeclaration(S,re),D=this.getCompleteStyleDeclaration(S,re+1),F=v.util.hasStyleChanged(T,D,!1)),F&&(U?(f.save(),f.translate(N.renderLeft,N.renderTop),f.rotate(N.angle),this._renderChar(d,f,S,re,I,-O/2,0,E),f.restore()):(ne=k,this._renderChar(d,f,S,re,I,ne,P,E)),I="",T=D,k+=q*O,O=0);f.restore()},_applyPatternGradientTransformText:function(d){var f=v.util.createCanvasElement(),x,k=this.width+this.strokeWidth,P=this.height+this.strokeWidth;return f.width=k,f.height=P,x=f.getContext("2d"),x.beginPath(),x.moveTo(0,0),x.lineTo(k,0),x.lineTo(k,P),x.lineTo(0,P),x.closePath(),x.translate(k/2,P/2),x.fillStyle=d.toLive(x),this._applyPatternGradientTransform(x,d),x.fill(),x.createPattern(f,"no-repeat")},handleFiller:function(d,f,x){var k,P;return x.toLive?x.gradientUnits==="percentage"||x.gradientTransform||x.patternTransform?(k=-this.width/2,P=-this.height/2,d.translate(k,P),d[f]=this._applyPatternGradientTransformText(x),{offsetX:k,offsetY:P}):(d[f]=x.toLive(d,this),this._applyPatternGradientTransform(d,x)):(d[f]=x,{offsetX:0,offsetY:0})},_setStrokeStyles:function(d,f){return d.lineWidth=f.strokeWidth,d.lineCap=this.strokeLineCap,d.lineDashOffset=this.strokeDashOffset,d.lineJoin=this.strokeLineJoin,d.miterLimit=this.strokeMiterLimit,this.handleFiller(d,"strokeStyle",f.stroke)},_setFillStyles:function(d,f){return this.handleFiller(d,"fillStyle",f.fill)},_renderChar:function(d,f,x,k,P,S,E){var M=this._getStyleDeclaration(x,k),T=this.getCompleteStyleDeclaration(x,k),D=d==="fillText"&&T.fill,I=d==="strokeText"&&T.stroke&&T.strokeWidth,N,O;!I&&!D||(f.save(),D&&(N=this._setFillStyles(f,T)),I&&(O=this._setStrokeStyles(f,T)),f.font=this._getFontDeclaration(T),M&&M.textBackgroundColor&&this._removeShadow(f),M&&M.deltaY&&(E+=M.deltaY),D&&f.fillText(P,S-N.offsetX,E-N.offsetY),I&&f.strokeText(P,S-O.offsetX,E-O.offsetY),f.restore())},setSuperscript:function(d,f){return this._setScript(d,f,this.superscript)},setSubscript:function(d,f){return this._setScript(d,f,this.subscript)},_setScript:function(d,f,x){var k=this.get2DCursorLocation(d,!0),P=this.getValueOfPropertyAt(k.lineIndex,k.charIndex,"fontSize"),S=this.getValueOfPropertyAt(k.lineIndex,k.charIndex,"deltaY"),E={fontSize:P*x.size,deltaY:S+P*x.baseline};return this.setSelectionStyles(E,d,f),this},_getLineLeftOffset:function(d){var f=this.getLineWidth(d),x=this.width-f,k=this.textAlign,P=this.direction,E,S=0,E=this.isEndOfWrapping(d);return k==="justify"||k==="justify-center"&&!E||k==="justify-right"&&!E||k==="justify-left"&&!E?0:(k==="center"&&(S=x/2),k==="right"&&(S=x),k==="justify-center"&&(S=x/2),k==="justify-right"&&(S=x),P==="rtl"&&(S-=x),S)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var d=this._forceClearCache;return d||(d=this.hasStateChanged("_dimensionAffectingProps")),d&&(this.dirty=!0,this._forceClearCache=!1),d},getLineWidth:function(d){if(this.__lineWidths[d]!==void 0)return this.__lineWidths[d];var f=this.measureLine(d),x=f.width;return this.__lineWidths[d]=x,x},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(d,f,x){var k=this._getStyleDeclaration(d,f);return k&&typeof k[x]<"u"?k[x]:this[x]},_renderTextDecoration:function(d,f){if(!(!this[f]&&!this.styleHas(f))){d.save(),(f==="overline"||f==="linethrough")&&this._removeShadow(d);for(var x,k,P,S,E,M,T,D,I=this._getLeftOffset(),N=this._getTopOffset(),O,F,U,Y,Q,q,ne,J,re=this.path,X=this._getWidthOfCharSpacing(),j=this.offsets[f],Z=0,W=this._textLines.length;Z<W;Z++){if(x=this.getHeightOfLine(Z),!this[f]&&!this.styleHas(f,Z)){N+=x;continue}T=this._textLines[Z],q=x/this.lineHeight,S=this._getLineLeftOffset(Z),F=0,U=0,D=this.getValueOfPropertyAt(Z,0,f),J=this.getValueOfPropertyAt(Z,0,"fill"),O=N+q*(1-this._fontSizeFraction),k=this.getHeightOfChar(Z,0),E=this.getValueOfPropertyAt(Z,0,"deltaY");for(var te=0,le=T.length;te<le;te++)if(Y=this.__charBounds[Z][te],Q=this.getValueOfPropertyAt(Z,te,f),ne=this.getValueOfPropertyAt(Z,te,"fill"),P=this.getHeightOfChar(Z,te),M=this.getValueOfPropertyAt(Z,te,"deltaY"),re&&Q&&ne)d.save(),d.fillStyle=J,d.translate(Y.renderLeft,Y.renderTop),d.rotate(Y.angle),d.fillRect(-Y.kernedWidth/2,j*P+M,Y.kernedWidth,this.fontSize/15),d.restore();else if((Q!==D||ne!==J||P!==k||M!==E)&&U>0){var oe=I+S+F;this.direction==="rtl"&&(oe=this.width-oe-U),D&&J&&(d.fillStyle=J,d.fillRect(oe,O+j*k+E,U,this.fontSize/15)),F=Y.left,U=Y.width,D=Q,J=ne,k=P,E=M}else U+=Y.kernedWidth;var oe=I+S+F;this.direction==="rtl"&&(oe=this.width-oe-U),d.fillStyle=ne,Q&&ne&&d.fillRect(oe,O+j*k+E,U-X,this.fontSize/15),N+=x}d.restore()}},_getFontDeclaration:function(d,f){var x=d||this,k=this.fontFamily,P=v.Text.genericFonts.indexOf(k.toLowerCase())>-1,S=k===void 0||k.indexOf("'")>-1||k.indexOf(",")>-1||k.indexOf('"')>-1||P?x.fontFamily:'"'+x.fontFamily+'"';return[v.isLikelyNode?x.fontWeight:x.fontStyle,v.isLikelyNode?x.fontStyle:x.fontWeight,f?this.CACHE_FONT_SIZE+"px":x.fontSize+"px",S].join(" ")},render:function(d){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",d))},_splitTextIntoLines:function(d){for(var f=d.split(this._reNewline),x=new Array(f.length),k=[`
`],P=[],S=0;S<f.length;S++)x[S]=v.util.string.graphemeSplit(f[S]),P=P.concat(x[S],k);return P.pop(),{_unwrappedLines:x,lines:f,graphemeText:P,graphemeLines:x}},toObject:function(d){var f=m.concat(d),x=this.callSuper("toObject",f);return x.styles=v.util.stylesToArray(this.styles,this.text),x.path&&(x.path=this.path.toObject()),x},set:function(d,f){this.callSuper("set",d,f);var x=!1,k=!1;if(typeof d=="object")for(var P in d)P==="path"&&this.setPathInfo(),x=x||this._dimensionAffectingProps.indexOf(P)!==-1,k=k||P==="path";else x=this._dimensionAffectingProps.indexOf(d)!==-1,k=d==="path";return k&&this.setPathInfo(),x&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),v.Text.ATTRIBUTE_NAMES=v.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),v.Text.DEFAULT_SVG_FONT_SIZE=16,v.Text.fromElement=function(d,f,x){if(!d)return f(null);var k=v.parseAttributes(d,v.Text.ATTRIBUTE_NAMES),P=k.textAnchor||"left";if(x=v.util.object.extend(x?y(x):{},k),x.top=x.top||0,x.left=x.left||0,k.textDecoration){var S=k.textDecoration;S.indexOf("underline")!==-1&&(x.underline=!0),S.indexOf("overline")!==-1&&(x.overline=!0),S.indexOf("line-through")!==-1&&(x.linethrough=!0),delete x.textDecoration}"dx"in k&&(x.left+=k.dx),"dy"in k&&(x.top+=k.dy),"fontSize"in x||(x.fontSize=v.Text.DEFAULT_SVG_FONT_SIZE);var E="";"textContent"in d?E=d.textContent:"firstChild"in d&&d.firstChild!==null&&"data"in d.firstChild&&d.firstChild.data!==null&&(E=d.firstChild.data),E=E.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var M=x.strokeWidth;x.strokeWidth=0;var T=new v.Text(E,x),D=T.getScaledHeight()/T.height,I=(T.height+T.strokeWidth)*T.lineHeight-T.height,N=I*D,O=T.getScaledHeight()+N,F=0;P==="center"&&(F=T.getScaledWidth()/2),P==="right"&&(F=T.getScaledWidth()),T.set({left:T.left-F,top:T.top-(O-T.fontSize*(.07+T._fontSizeFraction))/T.lineHeight,strokeWidth:typeof M<"u"?M:1}),f(T)},v.Text.fromObject=function(d,f){var x=y(d),k=d.path;return delete x.path,v.Object._fromObject("Text",x,function(P){P.styles=v.util.stylesFromArray(d.styles,d.text),k?v.Object._fromObject("Path",k,function(S){P.set("path",S),f(P)},"path"):f(P)},"text")},v.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],v.util.createAccessors&&v.util.createAccessors(v.Text)}(e),function(){n.util.object.extend(n.Text.prototype,{isEmptyStyles:function(g){if(!this.styles||typeof g<"u"&&!this.styles[g])return!0;var v=typeof g>"u"?this.styles:{line:this.styles[g]};for(var y in v)for(var m in v[y])for(var d in v[y][m])return!1;return!0},styleHas:function(g,v){if(!this.styles||!g||g===""||typeof v<"u"&&!this.styles[v])return!1;var y=typeof v>"u"?this.styles:{0:this.styles[v]};for(var m in y)for(var d in y[m])if(typeof y[m][d][g]<"u")return!0;return!1},cleanStyle:function(g){if(!this.styles||!g||g==="")return!1;var v=this.styles,y=0,m,d,f=!0,x=0,k;for(var P in v){m=0;for(var S in v[P]){var k=v[P][S],E=k.hasOwnProperty(g);y++,E?(d?k[g]!==d&&(f=!1):d=k[g],k[g]===this[g]&&delete k[g]):f=!1,Object.keys(k).length!==0?m++:delete v[P][S]}m===0&&delete v[P]}for(var M=0;M<this._textLines.length;M++)x+=this._textLines[M].length;f&&y===x&&(this[g]=d,this.removeStyle(g))},removeStyle:function(g){if(!(!this.styles||!g||g==="")){var v=this.styles,y,m,d;for(m in v){y=v[m];for(d in y)delete y[d][g],Object.keys(y[d]).length===0&&delete y[d];Object.keys(y).length===0&&delete v[m]}}},_extendStyles:function(g,v){var y=this.get2DCursorLocation(g);this._getLineStyle(y.lineIndex)||this._setLineStyle(y.lineIndex),this._getStyleDeclaration(y.lineIndex,y.charIndex)||this._setStyleDeclaration(y.lineIndex,y.charIndex,{}),n.util.object.extend(this._getStyleDeclaration(y.lineIndex,y.charIndex),v)},get2DCursorLocation:function(g,v){typeof g>"u"&&(g=this.selectionStart);for(var y=v?this._unwrappedTextLines:this._textLines,m=y.length,d=0;d<m;d++){if(g<=y[d].length)return{lineIndex:d,charIndex:g};g-=y[d].length+this.missingNewlineOffset(d,v)}return{lineIndex:d-1,charIndex:y[d-1].length<g?y[d-1].length:g}},getSelectionStyles:function(g,v,y){typeof g>"u"&&(g=this.selectionStart||0),typeof v>"u"&&(v=this.selectionEnd||g);for(var m=[],d=g;d<v;d++)m.push(this.getStyleAtPosition(d,y));return m},getStyleAtPosition:function(g,v){var y=this.get2DCursorLocation(g),m=v?this.getCompleteStyleDeclaration(y.lineIndex,y.charIndex):this._getStyleDeclaration(y.lineIndex,y.charIndex);return m||{}},setSelectionStyles:function(g,v,y){typeof v>"u"&&(v=this.selectionStart||0),typeof y>"u"&&(y=this.selectionEnd||v);for(var m=v;m<y;m++)this._extendStyles(m,g);return this._forceClearCache=!0,this},_getStyleDeclaration:function(g,v){var y=this.styles&&this.styles[g];return y?y[v]:null},getCompleteStyleDeclaration:function(g,v){for(var y=this._getStyleDeclaration(g,v)||{},m={},d,f=0;f<this._styleProperties.length;f++)d=this._styleProperties[f],m[d]=typeof y[d]>"u"?this[d]:y[d];return m},_setStyleDeclaration:function(g,v,y){this.styles[g][v]=y},_deleteStyleDeclaration:function(g,v){delete this.styles[g][v]},_getLineStyle:function(g){return!!this.styles[g]},_setLineStyle:function(g){this.styles[g]={}},_deleteLineStyle:function(g){delete this.styles[g]}})}(),function(){function g(v){v.textDecoration&&(v.textDecoration.indexOf("underline")>-1&&(v.underline=!0),v.textDecoration.indexOf("line-through")>-1&&(v.linethrough=!0),v.textDecoration.indexOf("overline")>-1&&(v.overline=!0),delete v.textDecoration)}n.IText=n.util.createClass(n.Text,n.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(v,y){this.callSuper("initialize",v,y),this.initBehavior()},setSelectionStart:function(v){v=Math.max(v,0),this._updateAndFire("selectionStart",v)},setSelectionEnd:function(v){v=Math.min(v,this.text.length),this._updateAndFire("selectionEnd",v)},_updateAndFire:function(v,y){this[v]!==y&&(this._fireSelectionChanged(),this[v]=y),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(v){this.clearContextTop(),this.callSuper("render",v),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(v){this.callSuper("_render",v)},clearContextTop:function(v){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var y=this.canvas.contextTop,m=this.canvas.viewportTransform;y.save(),y.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this.transform(y),this._clearTextArea(y),v||y.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var v=this._getCursorBoundaries(),y=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(v,y):this.renderSelection(v,y),y.restore()}},_clearTextArea:function(v){var y=this.width+4,m=this.height+4;v.clearRect(-y/2,-m/2,y,m)},_getCursorBoundaries:function(v){typeof v>"u"&&(v=this.selectionStart);var y=this._getLeftOffset(),m=this._getTopOffset(),d=this._getCursorBoundariesOffsets(v);return{left:y,top:m,leftOffset:d.left,topOffset:d.top}},_getCursorBoundariesOffsets:function(v){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var y,m,d,f=0,x=0,k,P=this.get2DCursorLocation(v);d=P.charIndex,m=P.lineIndex;for(var S=0;S<m;S++)f+=this.getHeightOfLine(S);y=this._getLineLeftOffset(m);var E=this.__charBounds[m][d];return E&&(x=E.left),this.charSpacing!==0&&d===this._textLines[m].length&&(x-=this._getWidthOfCharSpacing()),k={top:f,left:y+(x>0?x:0)},this.direction==="rtl"&&(k.left*=-1),this.cursorOffsetCache=k,this.cursorOffsetCache},renderCursor:function(v,y){var m=this.get2DCursorLocation(),d=m.lineIndex,f=m.charIndex>0?m.charIndex-1:0,x=this.getValueOfPropertyAt(d,f,"fontSize"),k=this.scaleX*this.canvas.getZoom(),P=this.cursorWidth/k,S=v.topOffset,E=this.getValueOfPropertyAt(d,f,"deltaY");S+=(1-this._fontSizeFraction)*this.getHeightOfLine(d)/this.lineHeight-x*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(v,y),y.fillStyle=this.cursorColor||this.getValueOfPropertyAt(d,f,"fill"),y.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,y.fillRect(v.left+v.leftOffset-P/2,S+v.top+E,P,x)},renderSelection:function(v,y){for(var m=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,d=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,f=this.textAlign.indexOf("justify")!==-1,x=this.get2DCursorLocation(m),k=this.get2DCursorLocation(d),P=x.lineIndex,S=k.lineIndex,E=x.charIndex<0?0:x.charIndex,M=k.charIndex<0?0:k.charIndex,T=P;T<=S;T++){var D=this._getLineLeftOffset(T)||0,I=this.getHeightOfLine(T),N=0,O=0,F=0;if(T===P&&(O=this.__charBounds[P][E].left),T>=P&&T<S)F=f&&!this.isEndOfWrapping(T)?this.width:this.getLineWidth(T)||5;else if(T===S)if(M===0)F=this.__charBounds[S][M].left;else{var U=this._getWidthOfCharSpacing();F=this.__charBounds[S][M-1].left+this.__charBounds[S][M-1].width-U}N=I,(this.lineHeight<1||T===S&&this.lineHeight>1)&&(I/=this.lineHeight);var Y=v.left+D+O,Q=F-O,q=I,ne=0;this.inCompositionMode?(y.fillStyle=this.compositionColor||"black",q=1,ne=I):y.fillStyle=this.selectionColor,this.direction==="rtl"&&(Y=this.width-Y-Q),y.fillRect(Y,v.top+v.topOffset+ne,Q,q),v.topOffset+=N}},getCurrentCharFontSize:function(){var v=this._getCurrentCharIndex();return this.getValueOfPropertyAt(v.l,v.c,"fontSize")},getCurrentCharColor:function(){var v=this._getCurrentCharIndex();return this.getValueOfPropertyAt(v.l,v.c,"fill")},_getCurrentCharIndex:function(){var v=this.get2DCursorLocation(this.selectionStart,!0),y=v.charIndex>0?v.charIndex-1:0;return{l:v.lineIndex,c:y}}}),n.IText.fromObject=function(v,y){var m=n.util.stylesFromArray(v.styles,v.text),d=Object.assign({},v,{styles:m});if(delete d.path,g(d),d.styles)for(var f in d.styles)for(var x in d.styles[f])g(d.styles[f][x]);n.Object._fromObject("IText",d,function(k){v.path?n.Object._fromObject("Path",v.path,function(P){k.set("path",P),y(k)},"path"):y(k)},"text")}}(),function(){var g=n.util.object.clone;n.util.object.extend(n.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var v=this;this.on("added",function(){var y=v.canvas;y&&(y._hasITextHandlers||(y._hasITextHandlers=!0,v._initCanvasHandlers(y)),y._iTextInstances=y._iTextInstances||[],y._iTextInstances.push(v))})},initRemovedHandler:function(){var v=this;this.on("removed",function(){var y=v.canvas;y&&(y._iTextInstances=y._iTextInstances||[],n.util.removeFromArray(y._iTextInstances,v),y._iTextInstances.length===0&&(y._hasITextHandlers=!1,v._removeCanvasHandlers(y)))})},_initCanvasHandlers:function(v){v._mouseUpITextHandler=function(){v._iTextInstances&&v._iTextInstances.forEach(function(y){y.__isMousedown=!1})},v.on("mouse:up",v._mouseUpITextHandler)},_removeCanvasHandlers:function(v){v.off("mouse:up",v._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(v,y,m,d){var f;return f={isAborted:!1,abort:function(){this.isAborted=!0}},v.animate("_currentCursorOpacity",y,{duration:m,onComplete:function(){f.isAborted||v[d]()},onChange:function(){v.canvas&&v.selectionStart===v.selectionEnd&&v.renderCursorOrSelection()},abort:function(){return f.isAborted}}),f},_onTickComplete:function(){var v=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){v._currentTickCompleteState=v._animateCursor(v,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(v){var y=this,m=v?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){y._tick()},m)},abortCursorAnimation:function(){var v=this._currentTickState||this._currentTickCompleteState,y=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,v&&y&&y.clearContext(y.contextTop||y.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(v){var y=0,m=v-1;if(this._reSpace.test(this._text[m]))for(;this._reSpace.test(this._text[m]);)y++,m--;for(;/\S/.test(this._text[m])&&m>-1;)y++,m--;return v-y},findWordBoundaryRight:function(v){var y=0,m=v;if(this._reSpace.test(this._text[m]))for(;this._reSpace.test(this._text[m]);)y++,m++;for(;/\S/.test(this._text[m])&&m<this._text.length;)y++,m++;return v+y},findLineBoundaryLeft:function(v){for(var y=0,m=v-1;!/\n/.test(this._text[m])&&m>-1;)y++,m--;return v-y},findLineBoundaryRight:function(v){for(var y=0,m=v;!/\n/.test(this._text[m])&&m<this._text.length;)y++,m++;return v+y},searchWordBoundary:function(v,y){for(var m=this._text,d=this._reSpace.test(m[v])?v-1:v,f=m[d],x=n.reNonWord;!x.test(f)&&d>0&&d<m.length;)d+=y,f=m[d];return x.test(f)&&(d+=y===1?0:1),d},selectWord:function(v){v=v||this.selectionStart;var y=this.searchWordBoundary(v,-1),m=this.searchWordBoundary(v,1);this.selectionStart=y,this.selectionEnd=m,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(v){v=v||this.selectionStart;var y=this.findLineBoundaryLeft(v),m=this.findLineBoundaryRight(v);return this.selectionStart=y,this.selectionEnd=m,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(v){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(v),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(v){v._iTextInstances&&v._iTextInstances.forEach(function(y){y.selected=!1,y.isEditing&&y.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(v){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var y=this.getSelectionStartFromPointer(v.e),m=this.selectionStart,d=this.selectionEnd;(y!==this.__selectionStartOnMouseDown||m===d)&&(m===y||d===y)||(y>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=y):(this.selectionStart=y,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==m||this.selectionEnd!==d)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(v,y,m){var d=m.slice(0,v),f=n.util.string.graphemeSplit(d).length;if(v===y)return{selectionStart:f,selectionEnd:f};var x=m.slice(v,y),k=n.util.string.graphemeSplit(x).length;return{selectionStart:f,selectionEnd:f+k}},fromGraphemeToStringSelection:function(v,y,m){var d=m.slice(0,v),f=d.join("").length;if(v===y)return{selectionStart:f,selectionEnd:f};var x=m.slice(v,y),k=x.join("").length;return{selectionStart:f,selectionEnd:f+k}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var v=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=v.selectionStart,this.hiddenTextarea.selectionEnd=v.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var v=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=v.selectionEnd,this.inCompositionMode||(this.selectionStart=v.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var v=this._calcTextareaPosition();this.hiddenTextarea.style.left=v.left,this.hiddenTextarea.style.top=v.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var v=this.inCompositionMode?this.compositionStart:this.selectionStart,y=this._getCursorBoundaries(v),m=this.get2DCursorLocation(v),d=m.lineIndex,f=m.charIndex,x=this.getValueOfPropertyAt(d,f,"fontSize")*this.lineHeight,k=y.leftOffset,P=this.calcTransformMatrix(),S={x:y.left+k,y:y.top+y.topOffset+x},E=this.canvas.getRetinaScaling(),M=this.canvas.upperCanvasEl,T=M.width/E,D=M.height/E,I=T-x,N=D-x,O=M.clientWidth/T,F=M.clientHeight/D;return S=n.util.transformPoint(S,P),S=n.util.transformPoint(S,this.canvas.viewportTransform),S.x*=O,S.y*=F,S.x<0&&(S.x=0),S.x>I&&(S.x=I),S.y<0&&(S.y=0),S.y>N&&(S.y=N),S.x+=this.canvas._offset.left,S.y+=this.canvas._offset.top,{left:S.x+"px",top:S.y+"px",fontSize:x+"px",charHeight:x}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var v=this._textBeforeEdit!==this.text,y=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,y&&(y.blur&&y.blur(),y.parentNode&&y.parentNode.removeChild(y)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),v&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),v&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var v in this.styles)this._textLines[v]||delete this.styles[v]},removeStyleFromTo:function(v,y){var m=this.get2DCursorLocation(v,!0),d=this.get2DCursorLocation(y,!0),f=m.lineIndex,x=m.charIndex,k=d.lineIndex,P=d.charIndex,S,E;if(f!==k){if(this.styles[f])for(S=x;S<this._unwrappedTextLines[f].length;S++)delete this.styles[f][S];if(this.styles[k])for(S=P;S<this._unwrappedTextLines[k].length;S++)E=this.styles[k][S],E&&(this.styles[f]||(this.styles[f]={}),this.styles[f][x+S-P]=E);for(S=f+1;S<=k;S++)delete this.styles[S];this.shiftLineStyles(k,f-k)}else if(this.styles[f]){E=this.styles[f];var M=P-x,T,D;for(S=x;S<P;S++)delete E[S];for(D in this.styles[f])T=parseInt(D,10),T>=P&&(E[T-M]=E[D],delete E[D])}},shiftLineStyles:function(v,y){var m=g(this.styles);for(var d in this.styles){var f=parseInt(d,10);f>v&&(this.styles[f+y]=m[f],m[f-y]||delete this.styles[f])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(v,y,m,d){var f,x={},k=!1,P=this._unwrappedTextLines[v].length,S=P===y;m||(m=1),this.shiftLineStyles(v,m),this.styles[v]&&(f=this.styles[v][y===0?y:y-1]);for(var E in this.styles[v]){var M=parseInt(E,10);M>=y&&(k=!0,x[M-y]=this.styles[v][E],S&&y===0||delete this.styles[v][E])}var T=!1;for(k&&!S&&(this.styles[v+m]=x,T=!0),(T||P>y)&&m--;m>0;)d&&d[m-1]?this.styles[v+m]={0:g(d[m-1])}:f?this.styles[v+m]={0:g(f)}:delete this.styles[v+m],m--;this._forceClearCache=!0},insertCharStyleObject:function(v,y,m,d){this.styles||(this.styles={});var f=this.styles[v],x=f?g(f):{};m||(m=1);for(var k in x){var P=parseInt(k,10);P>=y&&(f[P+m]=x[P],x[P-m]||delete f[P])}if(this._forceClearCache=!0,d){for(;m--;)!Object.keys(d[m]).length||(this.styles[v]||(this.styles[v]={}),this.styles[v][y+m]=g(d[m]));return}if(!!f)for(var S=f[y?y-1:1];S&&m--;)this.styles[v][y+m]=g(S)},insertNewStyleBlock:function(v,y,m){for(var d=this.get2DCursorLocation(y,!0),f=[0],x=0,k=0;k<v.length;k++)v[k]===`
`?(x++,f[x]=0):f[x]++;f[0]>0&&(this.insertCharStyleObject(d.lineIndex,d.charIndex,f[0],m),m=m&&m.slice(f[0]+1)),x&&this.insertNewlineStyleObject(d.lineIndex,d.charIndex+f[0],x);for(var k=1;k<x;k++)f[k]>0?this.insertCharStyleObject(d.lineIndex+k,0,f[k],m):m&&this.styles[d.lineIndex+k]&&m[0]&&(this.styles[d.lineIndex+k][0]=m[0]),m=m&&m.slice(f[k]+1);f[k]>0&&this.insertCharStyleObject(d.lineIndex+k,0,f[k],m)},setSelectionStartEndWithShift:function(v,y,m){m<=v?(y===v?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=v),this.selectionStart=m):m>v&&m<y?this._selectionDirection==="right"?this.selectionEnd=m:this.selectionStart=m:(y===v?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=y),this.selectionEnd=m)},setSelectionInBoundaries:function(){var v=this.text.length;this.selectionStart>v?this.selectionStart=v:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>v?this.selectionEnd=v:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),n.util.object.extend(n.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(g){if(!!this.canvas){this.__newClickTime=+new Date;var v=g.pointer;this.isTripleClick(v)&&(this.fire("tripleclick",g),this._stopEvent(g.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=v,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(g){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===g.x&&this.__lastPointer.y===g.y},_stopEvent:function(g){g.preventDefault&&g.preventDefault(),g.stopPropagation&&g.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(g){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(g.e))},tripleClickHandler:function(g){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(g.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(g){!this.canvas||!this.editable||g.e.button&&g.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(g.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(g){!this.canvas||!this.editable||g.e.button&&g.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(g){if(this.__isMousedown=!1,!(!this.editable||this.group||g.transform&&g.transform.actionPerformed||g.e.button&&g.e.button!==1)){if(this.canvas){var v=this.canvas._activeObject;if(v&&v!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(g.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(g){var v=this.getSelectionStartFromPointer(g),y=this.selectionStart,m=this.selectionEnd;g.shiftKey?this.setSelectionStartEndWithShift(y,m,v):(this.selectionStart=v,this.selectionEnd=v),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(g){for(var v=this.getLocalPointer(g),y=0,m=0,d=0,f=0,x=0,k,P,S=0,E=this._textLines.length;S<E&&d<=v.y;S++)d+=this.getHeightOfLine(S)*this.scaleY,x=S,S>0&&(f+=this._textLines[S-1].length+this.missingNewlineOffset(S-1));k=this._getLineLeftOffset(x),m=k*this.scaleX,P=this._textLines[x],this.direction==="rtl"&&(v.x=this.width*this.scaleX-v.x+m);for(var M=0,T=P.length;M<T&&(y=m,m+=this.__charBounds[x][M].kernedWidth*this.scaleX,m<=v.x);M++)f++;return this._getNewSelectionStartFromOffset(v,y,m,f,T)},_getNewSelectionStartFromOffset:function(g,v,y,m,d){var f=g.x-v,x=y-g.x,k=x>f||x<0?0:1,P=m+k;return this.flipX&&(P=d-P),P>this._text.length&&(P=this._text.length),P}}),n.util.object.extend(n.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=n.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var g=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+g.top+"; left: "+g.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+g.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):n.document.body.appendChild(this.hiddenTextarea),n.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),n.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),n.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),n.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),n.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),n.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),n.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),n.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),n.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(n.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(g){if(!!this.isEditing){var v=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(g.keyCode in v)this[v[g.keyCode]](g);else if(g.keyCode in this.ctrlKeysMapDown&&(g.ctrlKey||g.metaKey))this[this.ctrlKeysMapDown[g.keyCode]](g);else return;g.stopImmediatePropagation(),g.preventDefault(),g.keyCode>=33&&g.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(g){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(g.keyCode in this.ctrlKeysMapUp&&(g.ctrlKey||g.metaKey))this[this.ctrlKeysMapUp[g.keyCode]](g);else return;g.stopImmediatePropagation(),g.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(g){var v=this.fromPaste;if(this.fromPaste=!1,g&&g.stopPropagation(),!!this.isEditing){var y=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,m=this._text.length,d=y.length,f,x,k=d-m,P=this.selectionStart,S=this.selectionEnd,E=P!==S,M,T,D;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var I=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),N=P>I.selectionStart;E?(f=this._text.slice(P,S),k+=S-P):d<m&&(N?f=this._text.slice(S+k,S):f=this._text.slice(P,P-k)),x=y.slice(I.selectionEnd-k,I.selectionEnd),f&&f.length&&(x.length&&(M=this.getSelectionStyles(P,P+1,!1),M=x.map(function(){return M[0]})),E?(T=P,D=S):N?(T=S-f.length,D=S):(T=S,D=S+f.length),this.removeStyleFromTo(T,D)),x.length&&(v&&x.join("")===n.copiedText&&!n.disableStyleCopyPaste&&(M=n.copiedTextStyle),this.insertNewStyleBlock(x,P,M)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(g){this.compositionStart=g.target.selectionStart,this.compositionEnd=g.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(n.copiedText=this.getSelectedText(),n.disableStyleCopyPaste?n.copiedTextStyle=null:n.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(g){return g&&g.clipboardData||n.window.clipboardData},_getWidthBeforeCursor:function(g,v){var y=this._getLineLeftOffset(g),m;return v>0&&(m=this.__charBounds[g][v-1],y+=m.left+m.width),y},getDownCursorOffset:function(g,v){var y=this._getSelectionForOffset(g,v),m=this.get2DCursorLocation(y),d=m.lineIndex;if(d===this._textLines.length-1||g.metaKey||g.keyCode===34)return this._text.length-y;var f=m.charIndex,x=this._getWidthBeforeCursor(d,f),k=this._getIndexOnLine(d+1,x),P=this._textLines[d].slice(f);return P.length+k+1+this.missingNewlineOffset(d)},_getSelectionForOffset:function(g,v){return g.shiftKey&&this.selectionStart!==this.selectionEnd&&v?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(g,v){var y=this._getSelectionForOffset(g,v),m=this.get2DCursorLocation(y),d=m.lineIndex;if(d===0||g.metaKey||g.keyCode===33)return-y;var f=m.charIndex,x=this._getWidthBeforeCursor(d,f),k=this._getIndexOnLine(d-1,x),P=this._textLines[d].slice(0,f),S=this.missingNewlineOffset(d-1);return-this._textLines[d-1].length+k-P.length+(1-S)},_getIndexOnLine:function(g,v){for(var y=this._textLines[g],m=this._getLineLeftOffset(g),d=m,f=0,x,k,P=0,S=y.length;P<S;P++)if(x=this.__charBounds[g][P].width,d+=x,d>v){k=!0;var E=d-x,M=d,T=Math.abs(E-v),D=Math.abs(M-v);f=D<T?P:P-1;break}return k||(f=y.length-1),f},moveCursorDown:function(g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",g)},moveCursorUp:function(g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",g)},_moveCursorUpOrDown:function(g,v){var y="get"+g+"CursorOffset",m=this[y](v,this._selectionDirection==="right");v.shiftKey?this.moveCursorWithShift(m):this.moveCursorWithoutShift(m),m!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(g){var v=this._selectionDirection==="left"?this.selectionStart+g:this.selectionEnd+g;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,v),g!==0},moveCursorWithoutShift:function(g){return g<0?(this.selectionStart+=g,this.selectionEnd=this.selectionStart):(this.selectionEnd+=g,this.selectionStart=this.selectionEnd),g!==0},moveCursorLeft:function(g){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",g)},_move:function(g,v,y){var m;if(g.altKey)m=this["findWordBoundary"+y](this[v]);else if(g.metaKey||g.keyCode===35||g.keyCode===36)m=this["findLineBoundary"+y](this[v]);else return this[v]+=y==="Left"?-1:1,!0;if(typeof m<"u"&&this[v]!==m)return this[v]=m,!0},_moveLeft:function(g,v){return this._move(g,v,"Left")},_moveRight:function(g,v){return this._move(g,v,"Right")},moveCursorLeftWithoutShift:function(g){var v=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(v=this._moveLeft(g,"selectionStart")),this.selectionEnd=this.selectionStart,v},moveCursorLeftWithShift:function(g){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(g,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(g,"selectionStart")},moveCursorRight:function(g){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",g)},_moveCursorLeftOrRight:function(g,v){var y="moveCursor"+g+"With";this._currentCursorOpacity=1,v.shiftKey?y+="Shift":y+="outShift",this[y](v)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(g){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(g,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(g,"selectionEnd")},moveCursorRightWithoutShift:function(g){var v=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(v=this._moveRight(g,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,v},removeChars:function(g,v){typeof v>"u"&&(v=g+1),this.removeStyleFromTo(g,v),this._text.splice(g,v-g),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(g,v,y,m){typeof m>"u"&&(m=y),m>y&&this.removeStyleFromTo(y,m);var d=n.util.string.graphemeSplit(g);this.insertNewStyleBlock(d,y,v),this._text=[].concat(this._text.slice(0,y),d,this._text.slice(m)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var g=n.util.toFixed,v=n.util.radiansToDegrees,y=n.util.calcRotateMatrix,m=n.util.transformPoint,d=/  +/g;n.util.object.extend(n.Text.prototype,{_toSVG:function(){var f=this._getSVGLeftTopOffsets(),x=this._getSVGTextAndBg(f.textTop,f.textLeft);return this._wrapSVGTextAndBg(x)},toSVG:function(f){var x=this._createBaseSVGMarkup(this._toSVG(),{reviver:f,noStyle:!0,withShadow:!0}),k=this.path;return k?x+k._createBaseSVGMarkup(k._toSVG(),{reviver:f,withShadow:!0}):x},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(f){var x=!0,k=this.getSvgTextDecoration(this);return[f.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",k?'text-decoration="'+k+'" ':"",'style="',this.getSvgStyles(x),'"',this.addPaintOrder()," >",f.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(f,x){var k=[],P=[],S=f,E;this._setSVGBg(P);for(var M=0,T=this._textLines.length;M<T;M++)E=this._getLineLeftOffset(M),(this.textBackgroundColor||this.styleHas("textBackgroundColor",M))&&this._setSVGTextLineBg(P,M,x+E,S),this._setSVGTextLineText(k,M,x+E,S),S+=this.getHeightOfLine(M);return{textSpans:k,textBgRects:P}},_createTextCharSpan:function(f,x,k,P,S){var E=f!==f.trim()||f.match(d),M=this.getSvgSpanStyles(x,E),T=M?'style="'+M+'"':"",D=x.deltaY,I="",N=n.Object.NUM_FRACTION_DIGITS,O="";if(D&&(I=' dy="'+g(D,N)+'" '),S.renderLeft!==void 0){var F=S.angle;O=' rotate="'+g(v(F),n.Object.NUM_FRACTION_DIGITS)+'" ';var U=S.width/2,Y=y({angle:v(F)});Y[4]=S.renderLeft,Y[5]=S.renderTop;var Q=m({x:-U,y:0},Y);k=Q.x,P=Q.y}return['<tspan x="',g(k,N),'" y="',g(P,N),'" ',I,T,O,">",n.util.string.escapeXml(f),"</tspan>"].join("")},_setSVGTextLineText:function(f,x,k,P){var S=this.getHeightOfLine(x),E=this.textAlign.indexOf("justify")!==-1,M,T,D="",I,N,O=0,F=this._textLines[x],U;P+=S*(1-this._fontSizeFraction)/this.lineHeight;for(var Y=0,Q=F.length-1;Y<=Q;Y++)U=Y===Q||this.charSpacing||this.path,D+=F[Y],I=this.__charBounds[x][Y],O===0?(k+=I.kernedWidth-I.width,O+=I.width):O+=I.kernedWidth,E&&!U&&this._reSpaceAndTab.test(F[Y])&&(U=!0),U||(M=M||this.getCompleteStyleDeclaration(x,Y),T=this.getCompleteStyleDeclaration(x,Y+1),U=n.util.hasStyleChanged(M,T,!0)),U&&(N=this._getStyleDeclaration(x,Y)||{},f.push(this._createTextCharSpan(D,N,k,P,I)),D="",M=T,k+=O,O=0)},_pushTextBgRect:function(f,x,k,P,S,E){var M=n.Object.NUM_FRACTION_DIGITS;f.push("		<rect ",this._getFillAttributes(x),' x="',g(k,M),'" y="',g(P,M),'" width="',g(S,M),'" height="',g(E,M),`"></rect>
`)},_setSVGTextLineBg:function(f,x,k,P){for(var S=this._textLines[x],E=this.getHeightOfLine(x)/this.lineHeight,M=0,T=0,D,I,N=this.getValueOfPropertyAt(x,0,"textBackgroundColor"),O=0,F=S.length;O<F;O++)D=this.__charBounds[x][O],I=this.getValueOfPropertyAt(x,O,"textBackgroundColor"),I!==N?(N&&this._pushTextBgRect(f,N,k+T,P,M,E),T=D.left,M=D.width,N=I):M+=D.kernedWidth;I&&this._pushTextBgRect(f,I,k+T,P,M,E)},_getFillAttributes:function(f){var x=f&&typeof f=="string"?new n.Color(f):"";return!x||!x.getSource()||x.getAlpha()===1?'fill="'+f+'"':'opacity="'+x.getAlpha()+'" fill="'+x.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(f){for(var x=0,k=0,P=0;P<f;P++)x+=this.getHeightOfLine(P);return k=this.getHeightOfLine(P),{lineTop:x,offset:(this._fontSizeMult-this._fontSizeFraction)*k/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(f){var x=n.Object.prototype.getSvgStyles.call(this,f);return x+" white-space: pre;"}})}(),function(g){var v=g.fabric||(g.fabric={});v.Textbox=v.util.createClass(v.IText,v.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:v.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(y){for(var m=0,d=0,f=0,x={},k=0;k<y.graphemeLines.length;k++)y.graphemeText[f]===`
`&&k>0?(d=0,f++,m++):!this.splitByGrapheme&&this._reSpaceAndTab.test(y.graphemeText[f])&&k>0&&(d++,f++),x[k]={line:m,offset:d},f+=y.graphemeLines[k].length,d+=y.graphemeLines[k].length;return x},styleHas:function(y,m){if(this._styleMap&&!this.isWrapping){var d=this._styleMap[m];d&&(m=d.line)}return v.Text.prototype.styleHas.call(this,y,m)},isEmptyStyles:function(y){if(!this.styles)return!0;var m=0,d=y+1,f,x,k=!1,P=this._styleMap[y],S=this._styleMap[y+1];P&&(y=P.line,m=P.offset),S&&(d=S.line,k=d===y,f=S.offset),x=typeof y>"u"?this.styles:{line:this.styles[y]};for(var E in x)for(var M in x[E])if(M>=m&&(!k||M<f))for(var T in x[E][M])return!1;return!0},_getStyleDeclaration:function(y,m){if(this._styleMap&&!this.isWrapping){var d=this._styleMap[y];if(!d)return null;y=d.line,m=d.offset+m}return this.callSuper("_getStyleDeclaration",y,m)},_setStyleDeclaration:function(y,m,d){var f=this._styleMap[y];y=f.line,m=f.offset+m,this.styles[y][m]=d},_deleteStyleDeclaration:function(y,m){var d=this._styleMap[y];y=d.line,m=d.offset+m,delete this.styles[y][m]},_getLineStyle:function(y){var m=this._styleMap[y];return!!this.styles[m.line]},_setLineStyle:function(y){var m=this._styleMap[y];this.styles[m.line]={}},_wrapText:function(y,m){var d=[],f;for(this.isWrapping=!0,f=0;f<y.length;f++)d=d.concat(this._wrapLine(y[f],f,m));return this.isWrapping=!1,d},_measureWord:function(y,m,d){var f=0,x,k=!0;d=d||0;for(var P=0,S=y.length;P<S;P++){var E=this._getGraphemeBox(y[P],m,P+d,x,k);f+=E.kernedWidth,x=y[P]}return f},_wrapLine:function(y,m,d,Y){var x=0,k=this.splitByGrapheme,P=[],S=[],E=k?v.util.string.graphemeSplit(y):y.split(this._wordJoiners),M="",T=0,D=k?"":" ",I=0,N=0,O=0,F=!0,U=this._getWidthOfCharSpacing(),Y=Y||0;E.length===0&&E.push([]),d-=Y;for(var Q=0;Q<E.length;Q++)M=k?E[Q]:v.util.string.graphemeSplit(E[Q]),I=this._measureWord(M,m,T),T+=M.length,x+=N+I-U,x>d&&!F?(P.push(S),S=[],x=I,F=!0):x+=U,!F&&!k&&S.push(D),S=S.concat(M),N=k?0:this._measureWord([D],m,T),T++,F=!1,I>O&&(O=I);return Q&&P.push(S),O+Y>this.dynamicMinWidth&&(this.dynamicMinWidth=O-U+Y),P},isEndOfWrapping:function(y){return!this._styleMap[y+1]||this._styleMap[y+1].line!==this._styleMap[y].line},missingNewlineOffset:function(y,m){return this.splitByGrapheme&&!m?this.isEndOfWrapping(y)?1:0:1},_splitTextIntoLines:function(y){for(var m=v.Text.prototype._splitTextIntoLines.call(this,y),d=this._wrapText(m.lines,this.width),f=new Array(d.length),x=0;x<d.length;x++)f[x]=d[x].join("");return m.lines=f,m.graphemeLines=d,m},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var y={};for(var m in this._styleMap)this._textLines[m]&&(y[this._styleMap[m].line]=1);for(var m in this.styles)y[m]||delete this.styles[m]},toObject:function(y){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(y))}}),v.Textbox.fromObject=function(y,m){var d=v.util.stylesFromArray(y.styles,y.text),f=Object.assign({},y,{styles:d});return delete f.path,v.Object._fromObject("Textbox",f,function(x){y.path?v.Object._fromObject("Path",y.path,function(k){x.set("path",k),m(x)},"path"):m(x)},"text")}}(e),function(){var g=n.controlsUtils,v=g.scaleSkewCursorStyleHandler,y=g.scaleCursorStyleHandler,m=g.scalingEqually,d=g.scalingYOrSkewingX,f=g.scalingXOrSkewingY,x=g.scaleOrSkewActionName,k=n.Object.prototype.controls;if(k.ml=new n.Control({x:-.5,y:0,cursorStyleHandler:v,actionHandler:f,getActionName:x}),k.mr=new n.Control({x:.5,y:0,cursorStyleHandler:v,actionHandler:f,getActionName:x}),k.mb=new n.Control({x:0,y:.5,cursorStyleHandler:v,actionHandler:d,getActionName:x}),k.mt=new n.Control({x:0,y:-.5,cursorStyleHandler:v,actionHandler:d,getActionName:x}),k.tl=new n.Control({x:-.5,y:-.5,cursorStyleHandler:y,actionHandler:m}),k.tr=new n.Control({x:.5,y:-.5,cursorStyleHandler:y,actionHandler:m}),k.bl=new n.Control({x:-.5,y:.5,cursorStyleHandler:y,actionHandler:m}),k.br=new n.Control({x:.5,y:.5,cursorStyleHandler:y,actionHandler:m}),k.mtr=new n.Control({x:0,y:-.5,actionHandler:g.rotationWithSnapping,cursorStyleHandler:g.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),n.Textbox){var P=n.Textbox.prototype.controls={};P.mtr=k.mtr,P.tr=k.tr,P.br=k.br,P.tl=k.tl,P.bl=k.bl,P.mt=k.mt,P.mb=k.mb,P.mr=new n.Control({x:.5,y:0,actionHandler:g.changeWidth,cursorStyleHandler:v,actionName:"resizing"}),P.ml=new n.Control({x:-.5,y:0,actionHandler:g.changeWidth,cursorStyleHandler:v,actionName:"resizing"})}}()})(fabric$1);const createFTextClass=()=>{fabric.FText=fabric.util.createClass(fabric.Textbox,{type:"f-text",padding:0,paintFirst:"stroke",initDimensions:function(){if(this.__skipDimension)return;this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces();const e=this.calcTextHeight();this.path?this.height=this.path.height>e?this.path.height:e:this.height=e,this.saveState({propertySet:"_dimensionAffectingProps"})}})},extend$2=fabric$1.fabric.util.object.extend,createFLineClass=()=>{fabric$1.fabric.FLine=fabric$1.fabric.util.createClass(fabric$1.fabric.Line,{type:"f-line",padding:6,borderColor:"#00000000",setStrokeWidth(e){this.set("strokeWidth",e)},setStrokeDashArray(e){this.set("strokeDashArray",e)},setStrokeLineCap(e){this.set("strokeLineCap",e?"round":"butt")},toObject(e){return extend$2(this.callSuper("toObject",e),{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2})}}),fabric$1.fabric.FLine.fromObject=(e,n)=>{function r(u){delete u.points,n&&n(u)}const o={...e};o.points=[e.x1,e.y1,e.x2,e.y2],fabric$1.fabric.Object._fromObject("FLine",o,r,"points")}};function createCustomClass(){createFTextClass(),createFLineClass()}const TEXTBOX_DEFAULT_CONFIG={editingBorderColor:"#1460F3",fontFamily:"Arial",fill:"#000000",fontStyle:"normal",fontWeight:"normal",fontSize:14,textAlign:"left",backgroundColor:"",opacity:1,width:100,zoomX:1,zoomY:1,splitByGrapheme:!0},SQUARE_DEFAULT_CONFIG={stroke:"rgb(0, 0, 0)",fill:"",strokeWidth:1,opacity:1},DATETIME_DEFAULT_CONFIG={format:"DD/MM/YYYY hh:mm:ss",editingBorderColor:"#1460F3",fontFamily:"Arial",fill:"#000000",fontStyle:"normal",fontWeight:"normal",fontSize:12,textAlign:"left",backgroundColor:"",opacity:1,zoomX:1,zoomY:1,width:100,splitByGrapheme:!0},THEME_CONFIG={mode:"Light"},getLocalPoint=(e,n,r,o,u)=>{var s=e.target,w=s.controls[e.corner],g=s.canvas.getZoom(),v=s.padding/g,y=s.toLocalPoint(new fabric$1.fabric.Point(o,u),n,r);return y.x>=v&&(y.x-=v),y.x<=-v&&(y.x+=v),y.y>=v&&(y.y-=v),y.y<=v&&(y.y+=v),y.x-=w.offsetX,y.y-=w.offsetY,y};function isTransformCentered(e){return e.originX==="center"&&e.originY==="center"}const _changeHeight=(e,n,r,o)=>{const u=n.target,s=getLocalPoint(n,n.originX,n.originY,r,o),w=u.strokeWidth/(u.strokeUniform?u.scaleX:1),g=isTransformCentered(n)?2:1,v=u.height,y=Math.abs(s.y*g/u.scaleY)-w;return u.set("height",Math.max(y,0)),v!==y},controlsUtils$2=fabric$1.fabric.controlsUtils,changeHeight=controlsUtils$2.wrapWithFireEvent("resizing",controlsUtils$2.wrapWithFixedAnchor(_changeHeight)),controlsUtils$1=fabric$1.fabric.controlsUtils,initRectControl=()=>{const e=fabric$1.fabric.Object.prototype.controls;if(fabric$1.fabric.Rect){const n=fabric$1.fabric.Rect.prototype.controls={};n.del=e.del,n.tr=e.tr,n.br=e.br,n.tl=e.tl,n.bl=e.bl,n.ml=new fabric$1.fabric.Control({x:-.5,y:0,actionHandler:controlsUtils$1.changeWidth,cursorStyleHandler:e.ml.cursorStyleHandler,actionName:"resizing",render:e.ml.render}),n.mr=new fabric$1.fabric.Control({x:.5,y:0,actionHandler:controlsUtils$1.changeWidth,cursorStyleHandler:e.mr.cursorStyleHandler,actionName:"resizing",render:e.mr.render}),n.mt=new fabric$1.fabric.Control({x:0,y:-.5,offsetY:-1,actionHandler:changeHeight,cursorStyleHandler:e.mt.cursorStyleHandler,actionName:"resizing",render:e.mt.render}),n.mb=new fabric$1.fabric.Control({x:0,y:.5,offsetY:1,actionHandler:changeHeight,cursorStyleHandler:e.mb.cursorStyleHandler,actionName:"resizing",render:e.mb.render})}},changeLineEnd=(e,n,r,o)=>{const{target:u}=n;return u.set({x2:r,y2:o}),!0},changeLineStart=(e,n,r,o)=>{const{target:u}=n;return u.set({x1:r,y1:o}),!0},linePositionHandler=(e,n)=>(r,o,u)=>{if(u!=null&&u.canvas){const s=u.calcLinePoints(),w=new fabric$1.fabric.Point(s[e],s[n]);return fabric$1.fabric.util.transformPoint(w,fabric$1.fabric.util.multiplyTransformMatrices(u.canvas.viewportTransform,u.calcTransformMatrix()))}else return new fabric$1.fabric.Point(0,0)},initLineControl=()=>{const e=fabric$1.fabric.Object.prototype.controls;if(fabric$1.fabric.Line){const n=fabric$1.fabric.Line.prototype.controls={};n.del=e.del,n.l1=new fabric$1.fabric.Control({positionHandler:linePositionHandler("x1","y1"),actionHandler:changeLineStart,cursorStyleHandler:()=>"crosshair",actionName:"line-points-change",render:e.br.render}),n.l2=new fabric$1.fabric.Control({positionHandler:linePositionHandler("x2","y2"),actionHandler:changeLineEnd,cursorStyleHandler:()=>"crosshair",actionName:"line-points-change",render:e.br.render})}},controlsUtils=fabric.controlsUtils,initFTextControl=()=>{const e=fabric.Object.prototype.controls;if(fabric.Rect){const n=fabric.FText.prototype.controls={};n.del=e.del,n.tr=e.tr,n.br=e.br,n.tl=e.tl,n.bl=e.bl,n.ml=new fabric.Control({x:-.5,y:0,offsetX:-1,actionHandler:controlsUtils.changeWidth,cursorStyleHandler:e.ml.cursorStyleHandler,actionName:"resizing",render:e.ml.render}),n.mr=new fabric.Control({x:.5,y:0,offsetX:1,actionHandler:controlsUtils.changeWidth,cursorStyleHandler:e.mr.cursorStyleHandler,actionName:"resizing",render:e.mr.render})}},removeObject=(e,n)=>{if(e||(e=n.getActiveObject()),!!e)return e.type==="activeSelection"?(e.getObjects().forEach(r=>{n.remove(r)}),n.discardActiveObject()):n.remove(e),handleMouseOutCorner(e),n.requestRenderAll(),n.fire("fabritor:del",{target:null}),!0},renderSizeIcon=(e,n,r,o,u,s)=>{e.save(),e.strokeStyle="#1460F3",e.fillStyle="#FFFFFF",e.lineWidth=2,e.translate(n,r),e.rotate(fabric$1.fabric.util.degreesToRadians(u.angle)),e.beginPath(),e.rect(-3,-3,6,6),e.fill(),e.stroke(),e.restore()},renderLTIcon=(e,n,r)=>{e.save(),e.strokeStyle="#1460F3",e.fillStyle="#FFFFFF",e.lineWidth=2,e.beginPath(),e.rect(n-4,r-4,6,6),e.fill(),e.stroke(),e.restore()},renderLBIcon=(e,n,r)=>{e.save(),e.strokeStyle="#1460F3",e.fillStyle="#FFFFFF",e.lineWidth=2,e.beginPath(),e.rect(n-4,r-2,6,6),e.fill(),e.stroke(),e.restore()},renderRTIcon=(e,n,r)=>{e.save(),e.strokeStyle="#1460F3",e.fillStyle="#FFFFFF",e.lineWidth=2,e.beginPath(),e.rect(n-2,r-4,6,6),e.fill(),e.stroke(),e.restore()},renderRBIcon=(e,n,r)=>{e.save(),e.strokeStyle="#1460F3",e.fillStyle="#FFFFFF",e.lineWidth=2,e.beginPath(),e.rect(n-2,r-2,6,6),e.fill(),e.stroke(),e.restore()};function renderSvgIcon(e){return function(r,o,u,s,w){r.save(),r.translate(o,u),r.fillStyle=THEME_CONFIG.mode==="Light"?"rgba(255, 255, 255, 1)":"#54575C",r.roundRect(-25,-20,50,42,4),r.shadowColor="rgba(0, 0, 0, 0.1)",r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=8,r.fill(),r.rotate(fabric$1.fabric.util.degreesToRadians(w.angle)),r.drawImage(e,-30/2,-30/2+2,30,30),r.restore()}}const renderLRIcon=(e,n,r,o,u)=>{renderSizeIcon(e,n,r,o,u,"LR")},renderTBIcon=(e,n,r,o,u)=>{renderSizeIcon(e,n,r,o,u,"TB")},renderController=()=>{const e={x:0,y:-.5,offsetY:-1,render:renderTBIcon};Object.keys(e).forEach(v=>{fabric$1.fabric.Object.prototype.controls.mt[v]=e[v]});const n={x:0,y:.5,offsetY:1,render:renderTBIcon};Object.keys(n).forEach(v=>{fabric$1.fabric.Object.prototype.controls.mb[v]=n[v]});const r={x:-.5,y:0,offsetX:-1,render:renderLRIcon};Object.keys(r).forEach(v=>{fabric$1.fabric.Object.prototype.controls.ml[v]=r[v]});const o={x:.5,y:0,offsetX:1,render:renderLRIcon};Object.keys(o).forEach(v=>{fabric$1.fabric.Object.prototype.controls.mr[v]=o[v]}),fabric$1.fabric.Object.prototype.borderOpacityWhenMoving=1,fabric$1.fabric.Object.prototype.borderColor="#1460F3",fabric$1.fabric.Object.prototype.padding=5,fabric$1.fabric.Object.prototype.setControlsVisibility({mtr:!1});const u={x:-.5,y:-.5,render:renderLTIcon};Object.keys(u).forEach(v=>{fabric$1.fabric.Object.prototype.controls.tl[v]=u[v]});const s={x:.5,y:-.5,render:renderRTIcon};Object.keys(s).forEach(v=>{fabric$1.fabric.Object.prototype.controls.tr[v]=s[v]});const w={x:-.5,y:.5,render:renderLBIcon};Object.keys(w).forEach(v=>{fabric$1.fabric.Object.prototype.controls.bl[v]=w[v]});const g={x:.5,y:.5,render:renderRBIcon};Object.keys(g).forEach(v=>{fabric$1.fabric.Object.prototype.controls.br[v]=g[v]})},handleDelObject=(e,n)=>{const r=n.target,o=r.canvas;return removeObject(r,o),!0},DEL_IMG=document.createElement("img"),DEL_SVG=`data:image/svg+xml;charset=utf-8,${encodeURIComponent('<svg width="31" height="30" viewBox="0 0 31 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.3333 8.15275V6.73608H12.6667V8.15275H18.3333ZM24 10.9861V9.56942H21.875H9.125H7V10.9861H9.125V23.2639H21.875V10.9861H24ZM10.5417 21.8472V10.9861H20.4583V21.8472H10.5417ZM14.3194 13.5833V19.25H12.9028V13.5833H14.3194ZM18.0972 13.5833V19.25H16.6806V13.5833H18.0972Z" fill="#43474D"/></svg>')}`;DEL_IMG.src=DEL_SVG;const DEL_IMG_DARK=document.createElement("img"),DEL_SVG_DARK=`data:image/svg+xml;charset=utf-8,${encodeURIComponent('<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0" width="30" height="30" rx="4" fill="#54575C"/><path fill-rule="evenodd" clip-rule="evenodd" d="M17.8333 8.15275V6.73608H12.1667V8.15275H17.8333ZM23.5 10.9861V9.56941H21.375H8.625H6.5V10.9861H8.625V23.2639H21.375V10.9861H23.5ZM10.0417 21.8472V10.9861H19.9583V21.8472H10.0417ZM13.8194 13.5833V19.25H12.4028V13.5833H13.8194ZM17.5972 13.5833V19.25H16.1806V13.5833H17.5972Z" fill="white"/></svg>')}`;DEL_IMG_DARK.src=DEL_SVG_DARK;const DEL_SVG_ACTIVE=`data:image/svg+xml;charset=utf-8,${encodeURIComponent('<svg width="31" height="30" viewBox="0 0 31 30" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.436768" width="30" height="30" rx="4" fill="#DDE9FF"/><path fill-rule="evenodd" clip-rule="evenodd" d="M18.2701 8.15275V6.73608H12.6034V8.15275H18.2701ZM23.9368 10.9861V9.56942H21.8118H9.06177H6.93677V10.9861H9.06177V23.2639H21.8118V10.9861H23.9368ZM10.4784 21.8472V10.9861H20.3951V21.8472H10.4784ZM14.2562 13.5833V19.25H12.8395V13.5833H14.2562ZM18.034 13.5833V19.25H16.6173V13.5833H18.034Z" fill="#43474D"/></svg>')}`,DEL_IMG_ACTIVE=document.createElement("img");DEL_IMG_ACTIVE.src=DEL_SVG_ACTIVE;const renderToolBarController=()=>{const e=new fabric$1.fabric.Control({x:.5,y:.5,offsetX:-18,offsetY:25,cursorStyle:"pointer",mouseUpHandler:handleDelObject,render:renderSvgIcon(THEME_CONFIG.mode==="Light"?DEL_IMG:DEL_IMG_DARK)});fabric$1.fabric.Object.prototype.controls.del=e},handleMouseOverCorner=(e,n)=>{e==="del"&&(n.controls[e].render=renderSvgIcon(DEL_IMG_ACTIVE)),n.canvas.requestRenderAll()},handleMouseOutCorner=e=>{var n;!e||(n=e.controls)!=null&&n.del&&(e.controls.del.render=renderSvgIcon(THEME_CONFIG.mode==="Light"?DEL_IMG:DEL_IMG_DARK))};function initControl(){renderController(),renderToolBarController(),initRectControl(),initLineControl(),initFTextControl()}class Editor{constructor(n,r){this.options=r||{},this.canvasEl=n,this.canvas=null,this.activeObject=null,this.tool="text",this.shape="rect"}init(){this._initObject(),this.canvas=new fabric$1.fabric.Canvas(this.canvasEl,this.options),this._initEvents()}_initObject(){createCustomClass(),initControl()}_initEvents(){const n=this.canvas;n.on("mouse:move",r=>{this.creatingElement&&this.creatingElement.type==="rect"&&this.updateRect(r),r.target&&console.log("Mouse move:",r.target.type),this.creatingElement&&this.creatingElement.type==="line"&&this.creatingElement&&this.updateLine(r)}),n.on("mouse:up",r=>{if(this.creatingElement){const v=this.creatingElement;if(n.setActiveObject(this.creatingElement),this.activeObject=this.creatingElement,v&&v.type==="rect"&&this.tool==="text"){this.canvas.remove(v);const{left:y,top:m,width:d,height:f}=v;this.createTextbox({text:"",scaleX:1,scaleY:1,left:y,top:m,width:d<1?100:d,height:f<1?16:f})}else v.type==="rect"?(this.updateRect(r),v.width<1&&v.height<1&&this.canvas.remove(v)):v.type==="line"&&(this.updateLine(r),v.width<1&&v.height<1&&this.canvas.remove(v));this.creatingElement=null;return}const{target:o}=r;if(!o)return;const u=o.getScaledWidth(),s=o.getScaledHeight(),w=r.transform.action;o.left<0&&((w==="resizing"||w==="scale")&&(o.scaleX=1,o.width=u+o.left-1),o.set("left",0),o.setCoords()),o.top<0&&((w==="resizing"||w==="scale")&&(o.scaleY=1,o.height=s+o.top-1),o.set("top",0),o.setCoords());const g=n.calcViewportBoundaries();o.left+u>g.br.x&&(w==="resizing"||w==="scale"?(o.scaleX=1,o.width=g.br.x-o.left-1):w==="drag"&&o.set("left",g.br.x-u+10),o.setCoords()),o.top+s>g.br.y&&(w==="resizing"||w==="scale"?(o.scaleY=1,o.height=g.br.y-o.top-1):w==="drag"&&o.set("top",g.br.y-s+10),o.setCoords()),n.renderAll()}),n.on("mouse:down",r=>{const{target:o}=r;if(!o&&this.activeObject){this.activeObject=null;return}if(o||this.activeObject)return;const u=this.tool,s=this.shape;u==="text"?this.createTextboxRect({left:r.absolutePointer.x,top:r.absolutePointer.y}):u==="shape"?s==="rect"?this.createRect({left:r.absolutePointer.x,top:r.absolutePointer.y}):s==="line"&&this.createLine({x:r.absolutePointer.x,y:r.absolutePointer.y}):u==="date"&&this.createDatetime({left:r.absolutePointer.x,top:r.absolutePointer.y,editable:!1})}),n.on("mouse:over",r=>{const{target:o}=r,u=o==null?void 0:o.__corner;u&&handleMouseOverCorner(u,r.target)}),this.canvas.on("mouse:out",r=>{const{target:o}=r;o&&(handleMouseOutCorner(o),n.requestRenderAll())}),n.on("selection:created",this.selectionHandler.bind(this)),n.on("object:scaling",r=>{const o=r.target,u=o.canvas.width,s=o.canvas.height;o.setCoords();const w=o.getBoundingRect(),g=o.getScaledWidth();if(o.getScaledHeight(),o.left+g>u){o.scaleX=1,o.setCoords();let v=o.getScaledWidth();o.scaleX=(u-w.left)/v,o.type==="f-text"&&(o.scaleY=o.scaleX),o.setCoords(),o.canvas.renderAll()}if(w.top+w.height>s){o.scaleY=1,o.setCoords();let v=o.getScaledHeight();o.scaleY=(s-w.top)/v,o.type==="f-text"&&(o.scaleX=o.scaleY),o.setCoords(),o.canvas.renderAll()}if(w.top<0){o.scaleY=1,o.setCoords();let v=o.getScaledHeight();o.scaleY=(w.height+w.top)/v,o.type==="f-text"&&(o.scaleX=o.scaleY),o.set("top",0),o.setCoords(),o.canvas.renderAll()}if(w.left<0){o.scaleX=1,o.setCoords();let v=o.getScaledWidth();o.scaleX=(w.width+w.left)/v,o.type==="f-text"&&(o.scaleY=o.scaleX),o.set("left",0),o.setCoords(),o.canvas.renderAll()}})}updateRect(n){const r=this.creatingElement,{left:o,top:u}=r,{x:s,y:w}=n.absolutePointer,g=this.canvas;if(s<=this.originalPoint.x)r.set("width",this.originalPoint.x-s),r.set("left",s);else if(s>o){const v=Math.min(s-o,g.width-o-3);r.set("width",v)}if(w<=this.originalPoint.y)r.set("height",this.originalPoint.y-w),r.set("top",w);else if(w>u){const v=Math.min(w-u,g.height-u-3);r.set("height",v)}r.setCoords(),g.renderAll()}updateLine(n){const r=this.creatingElement,{x:o,y:u}=n.absolutePointer;r.set("x2",o),r.set("y2",u),r.setCoords(),this.canvas.renderAll()}selectionHandler(n){const{selected:r}=n;if(r&&r.length){const o=this.canvas.getActiveObject();this.activeObject=o}else this.activeObject=null}createTextboxRect(n){const r=this.canvas,o=new fabric$1.fabric.Rect({fill:"",stroke:"#1460F3",strokeWidth:1,opacity:1,...n});return this.creatingElement=o,this.originalPoint={x:n.left,y:n.top},r.add(o),o}createTextbox(n){const r=this.canvas;let{text:o="",...u}=n||{};const s=new fabric$1.fabric.FText(o||"",{...TEXTBOX_DEFAULT_CONFIG,...u});return s.on("editing:entered",w=>{}),s.on("editing:exited",w=>{}),r.add(s),r.setActiveObject(s),this.activeObject=s,s.enterEditing(),r.requestRenderAll(),s}createRect(n){if(this.creating)return;const r=this.canvas,o=new fabric$1.fabric.Rect({...SQUARE_DEFAULT_CONFIG,...n});return this.creatingElement=o,this.originalPoint={x:n.left,y:n.top},r.add(o),o}createDatetime(n){const r=this.canvas,{text:o=""}=n||{},u=o||dayjs(new Date().toLocaleString()).format(DATETIME_DEFAULT_CONFIG.format),s=new fabric$1.fabric.FText(u,{...DATETIME_DEFAULT_CONFIG,...n});return this.creatingElement=s,r.add(s),r.setActiveObject(s),this.activeObject=s,r.requestRenderAll(),s}createLine(n){const r=this.canvas,{x:o,y:u}=n,s=new fabric$1.fabric.Line([o,u,o,u],{...SQUARE_DEFAULT_CONFIG});return this.creatingElement=s,r.add(s),s}destroy(){this.canvas&&(this.canvas.dispose(),this.canvas=null)}clear(){this.canvas&&this.canvas.clear()}}const CustomStamp_vue_vue_type_style_index_0_lang="",_hoisted_1$3X={class:"custom-stamp-wrapper"},_hoisted_2$3J={class:"signatures-popup-wrapper"},_hoisted_3$3n={class:"custom-stamp-popup"},_hoisted_4$1j={class:"title"},_hoisted_5$R={class:"stamp-container"},_hoisted_6$D={class:"stamp-preview"},_hoisted_7$v={class:"preview-title"},_hoisted_8$p={class:"preview-container"},_hoisted_9$n={class:"custom-category"},_hoisted_10$o={class:"preview"},_hoisted_11$k={class:"canvas-container"},_hoisted_12$j={key:0,class:"canvas-placeholder"},_hoisted_13$j={ref:"workspaceEl"},_hoisted_14$j={class:"stamp-properties"},_hoisted_15$j={class:"properties-title"},_hoisted_16$i={key:0,class:"text-properties properties-container"},_hoisted_17$h={class:"font property"},_hoisted_18$g={class:"property-name"},_hoisted_19$g={class:"font-color property"},_hoisted_20$g={class:"property-name"},_hoisted_21$f={class:"property-container"},_hoisted_22$f={class:"color-picker"},_hoisted_23$e={class:"preview-container active"},_hoisted_24$e=createBaseVNode("img",{src:_imports_0$2,alt:"colorPicker"},null,-1),_hoisted_25$d={class:"font-weight property"},_hoisted_26$c={class:"property-name"},_hoisted_27$b={class:"font-size property"},_hoisted_28$b={class:"property-name"},_hoisted_29$9={class:"text-align property"},_hoisted_30$9={class:"property-name"},_hoisted_31$9={class:"text-align property-container"},_hoisted_32$7={class:"text-align-content"},_hoisted_33$6={class:"border"},_hoisted_34$6={class:"border"},_hoisted_35$6={class:"fill-color property"},_hoisted_36$6={class:"property-name"},_hoisted_37$6={class:"property-container"},_hoisted_38$4={class:"color-picker"},_hoisted_39$4=createBaseVNode("img",{src:_imports_0$2,alt:"colorPicker"},null,-1),_hoisted_40$4={class:"opacity property"},_hoisted_41$4={class:"property-name"},_hoisted_42$3={key:1,class:"shape-properties properties-container"},_hoisted_43$3={class:"shape property"},_hoisted_44$3={class:"property-name"},_hoisted_45$3={class:"shape-container property-container"},_hoisted_46$3={class:"border-color property"},_hoisted_47$3={class:"property-name"},_hoisted_48$3={class:"property-container"},_hoisted_49$3={class:"color-picker"},_hoisted_50$3={class:"preview-container active"},_hoisted_51$3=createBaseVNode("img",{src:_imports_0$2,alt:"colorPicker"},null,-1),_hoisted_52$2={class:"border-width property"},_hoisted_53$2={class:"property-name"},_hoisted_54$2={key:0,class:"fill-color property"},_hoisted_55$2={class:"property-name"},_hoisted_56$2={class:"property-container"},_hoisted_57$3={class:"color-picker"},_hoisted_58$3=createBaseVNode("img",{src:_imports_0$2,alt:"colorPicker"},null,-1),_hoisted_59$3={class:"fill-opacity property"},_hoisted_60$3={class:"property-name"},_hoisted_61$3={key:2,class:"date-properties properties-container"},_hoisted_62$3={class:"date property"},_hoisted_63$3={class:"property-name"},_hoisted_64$2={class:"font property"},_hoisted_65$2={class:"property-name"},_hoisted_66$2={class:"font-color property"},_hoisted_67$1={class:"property-name"},_hoisted_68$1={class:"property-container"},_hoisted_69$1={class:"color-picker"},_hoisted_70$1={class:"preview-container active"},_hoisted_71$1=createBaseVNode("img",{src:_imports_0$2,alt:"colorPicker"},null,-1),_hoisted_72$1={class:"font-weight property"},_hoisted_73$1={class:"property-name"},_hoisted_74$1={class:"font-size property"},_hoisted_75$1={class:"property-name"},_hoisted_76$1={class:"text-align property"},_hoisted_77$1={class:"property-name"},_hoisted_78$1={class:"text-align property-container"},_hoisted_79$1={class:"text-align-content"},_hoisted_80$1={class:"border"},_hoisted_81$1={class:"border"},_hoisted_82$1={class:"fill-color property"},_hoisted_83$1={class:"property-name"},_hoisted_84$1={class:"property-container"},_hoisted_85={class:"color-picker"},_hoisted_86=createBaseVNode("img",{src:_imports_0$2,alt:"colorPicker"},null,-1),_hoisted_87={class:"opacity property"},_hoisted_88={class:"property-name"},_hoisted_89={class:"footer"},_hoisted_90={class:"buttons-container"},_sfc_main$4i={__name:"CustomStamp",setup(e){const r=getCurrentInstance().appContext.app.config.globalProperties.$t,o=ref(null),u=useViewerStore(),s=ref("rgb(255, 255, 255)"),w=ref("rgb(255, 255, 255)"),g=ref("rgb(255, 255, 255)"),v=shallowRef(null),y=ref(0),m=ref("text"),d=()=>{const ne=v.value.canvas.toDataURL({format:"png",multiplier:2});u.addCustomStamps(ne),P()};onMounted(()=>{M();const ne=new Editor(o.value,{width:300,height:300,selection:!1});ne.init(),ne.canvas.on("selection:updated",()=>{x()}),ne.canvas.on("selection:created",()=>{x()}),ne.canvas.on("selection:cleared",()=>{M()}),ne.canvas.on("object:added",()=>{y.value=ne.canvas.getObjects().length}),ne.canvas.on("object:removed",()=>{y.value=ne.canvas.getObjects().length,v.value.activeObject=null}),v.value=ne});const f=(ne,J)=>ne==="bold"&&J==="oblique"?"boldOblique":ne==="bold"?"bold":J==="oblique"?"oblique":"normal",x=()=>{const ne=v.value.canvas.getActiveObject();if(ne&&ne.type==="f-text"&&ne.editable){m.value="text";const J=ne.fontSize,re=ne.fontFamily,X=ne.fill,j=ne.textAlign,Z=ne.opacity,W=f(ne.fontWeight,ne.fontStyle);S.text.fontFamily=re,S.text.fill=X,S.text.fontStyle=W,S.text.fontSize=J,S.text.textAlign=j,S.text.backgroundColor=ne.backgroundColor,S.text.opacity=Z*100+"%"}else if(ne&&ne.type==="f-text"&&!ne.editable){m.value="date";const J=ne.format,re=ne.fontSize,X=ne.fontFamily,j=ne.fill,Z=ne.textAlign,W=ne.opacity,te=f(ne.fontWeight,ne.fontStyle);S.date.format=J,S.date.fontFamily=X,S.date.fill=j,S.date.fontStyle=te,S.date.fontSize=re,S.date.textAlign=Z,S.date.backgroundColor=ne.backgroundColor,S.date.opacity=W*100+"%"}else if(ne&&ne.type==="rect"){m.value="shape",S.shape.tool="rect";const J=ne.fill,re=ne.stroke,X=ne.strokeWidth,j=ne.opacity;S.shape.fill=J,S.shape.stroke=re,S.shape.strokeWidth=X,S.shape.opacity=j*100+"%"}else if(ne&&ne.type==="line"){m.value="shape",S.shape.tool="line";const J=ne.stroke,re=ne.strokeWidth,X=ne.opacity;S.shape.stroke=J,S.shape.strokeWidth=re,S.shape.opacity=X*100+"%"}},k=()=>{v.value&&v.value.clear()},P=()=>{u.closeElement("createCustomStampDialog")},S=reactive({text:{fontFamily:"Arial",fill:"rgb(0, 0, 0)",fontSize:12,fontStyle:"normal",textAlign:"left",backgroundColor:"",borderWidth:1,opacity:"100%"},shape:{tool:"rect",stroke:"rgb(0, 0, 0)",strokeWidth:1,fill:"",opacity:"100%"},date:{fontFamily:"Arial",fill:"rgb(0, 0, 0)",fontSize:12,fontStyle:"normal",textAlign:"left",backgroundColor:"",opacity:"100%",format:"DD/MM/YYYY hh:mm:ss"}}),E=[{label:"Arial",value:"Arial"},{label:"Times-Roman",value:"Times-Roman"},{label:"Courier",value:"Courier"},{label:"Helvetica",value:"Helvetica"}],M=()=>{const ne={fontSize:TEXTBOX_DEFAULT_CONFIG.fontSize,fontFamily:TEXTBOX_DEFAULT_CONFIG.fontFamily,fill:TEXTBOX_DEFAULT_CONFIG.fill,textAlign:TEXTBOX_DEFAULT_CONFIG.textAlign,opacity:TEXTBOX_DEFAULT_CONFIG.opacity,fontStyle:f(TEXTBOX_DEFAULT_CONFIG.fontWeight,TEXTBOX_DEFAULT_CONFIG.fontStyle),backgroundColor:TEXTBOX_DEFAULT_CONFIG.backgroundColor};ne.backgroundColor&&(s.value=ne.backgroundColor),S.text.fontFamily=ne.fontFamily,S.text.fill=ne.fill,S.text.fontStyle=ne.fontStyle,S.text.fontSize=ne.fontSize,S.text.textAlign=ne.textAlign,S.text.backgroundColor=ne.backgroundColor,S.text.opacity=ne.opacity*100+"%";const J={stroke:SQUARE_DEFAULT_CONFIG.stroke,strokeWidth:SQUARE_DEFAULT_CONFIG.strokeWidth,fill:SQUARE_DEFAULT_CONFIG.fill,opacity:SQUARE_DEFAULT_CONFIG.opacity};J.fill&&(w.value=J.fill),S.shape.stroke=J.stroke,S.shape.strokeWidth=J.strokeWidth,S.shape.fill=J.fill,S.shape.opacity=J.opacity*100+"%";const re={fontSize:DATETIME_DEFAULT_CONFIG.fontSize,fontFamily:DATETIME_DEFAULT_CONFIG.fontFamily,fill:DATETIME_DEFAULT_CONFIG.fill,textAlign:DATETIME_DEFAULT_CONFIG.textAlign,opacity:DATETIME_DEFAULT_CONFIG.opacity,fontStyle:f(DATETIME_DEFAULT_CONFIG.fontWeight,DATETIME_DEFAULT_CONFIG.fontStyle),backgroundColor:DATETIME_DEFAULT_CONFIG.backgroundColor,format:DATETIME_DEFAULT_CONFIG.format};re.backgroundColor&&(g.value=re.backgroundColor),S.date.fontSize=re.fontSize,S.date.fontFamily=re.fontFamily,S.date.fill=re.fill,S.date.textAlign=re.textAlign,S.date.opacity=re.opacity*100+"%",S.date.fontStyle=re.fontStyle,S.date.backgroundColor=re.backgroundColor,S.date.format=re.format},T=computed(()=>[{label:r("regular"),value:"normal"},{label:r("bold"),value:"bold"},{label:r("boldOblique"),value:"boldOblique"},{label:r("oblique"),value:"oblique"}]),D=(ne,J)=>{S[m.value][J]=ne,J==="backgroundColor"?m.value==="text"?s.value=ne:m.value==="date"&&(g.value=ne):J==="fill"&&m.value==="shape"&&(w.value=ne)},I=(ne,J)=>{S[m.value][J]=ne,J==="backgroundColor"?m.value==="text"?s.value=ne:m.value==="date"&&(g.value=ne):J==="fill"&&m.value==="shape"&&(w.value=ne)},N=ne=>{S[m.value].textAlign=ne},O=[{label:"6 pt",value:6},{label:"7 pt",value:7},{label:"8 pt",value:8},{label:"9 pt",value:9},{label:"10 pt",value:10},{label:"11 pt",value:11},{label:"12 pt",value:12},{label:"13 pt",value:13},{label:"14 pt",value:14},{label:"15 pt",value:15},{label:"16 pt",value:16},{label:"17 pt",value:17},{label:"18 pt",value:18},{label:"24 pt",value:20},{label:"36 pt",value:36},{label:"48 pt",value:48},{label:"72 pt",value:72}],F=[{label:"1 pt",value:1},{label:"2 pt",value:2},{label:"3 pt",value:3},{label:"4 pt",value:4},{label:"5 pt",value:5},{label:"6 pt",value:6},{label:"7 pt",value:7},{label:"8 pt",value:8},{label:"9 pt",value:9},{label:"10 pt",value:10}],U=[{label:"25%",value:"25%"},{label:"50%",value:"50%"},{label:"75%",value:"75%"},{label:"100%",value:"100%"}],Y=[{label:"dd/mm/yyyy",value:"DD/MM/YYYY"},{label:"dd.mm.yyyy",value:"DD.MM.YYYY"},{label:"dd-mm-yyyy",value:"DD-MM-YYYY"},{label:"dd mm yyyy",value:"DD MM YYYY"},{label:"yyyy/mm/dd",value:"YYYY/MM/DD"},{label:"yyyy.mm.dd",value:"YYYY.MM.DD"},{label:"yyyy-mm-dd",value:"YYYY-MM-DD"},{label:"yyyy mm dd",value:"YYYY MM DD"},{label:"dd/mm/yyyy hh:mm:ss",value:"DD/MM/YYYY hh:mm:ss"},{label:"dd.mm.yyyy hh:mm:ss",value:"DD.MM.YYYY hh:mm:ss"},{label:"dd-mm-yyyy hh:mm:ss",value:"DD-MM-YYYY hh:mm:ss"},{label:"dd mm yyyy hh:mm:ss",value:"DD MM YYYY hh:mm:ss"},{label:"yyyy/mm/dd hh:mm:ss",value:"YYYY/MM/DD hh:mm:ss"},{label:"yyyy.mm.dd hh:mm:ss",value:"YYYY.MM.DD hh:mm:ss"},{label:"yyyy-mm-dd hh:mm:ss",value:"YYYY-MM-DD hh:mm:ss"},{label:"yyyy mm dd hh:mm:ss",value:"YYYY MM DD hh:mm:ss"}],Q=ne=>{const J=v.value.canvas.getActiveObject();J&&(v.value.canvas.discardActiveObject(J),v.value.canvas.renderAll(),v.value.activeObject=null),m.value=ne},q=ne=>{const J=v.value.canvas.getActiveObject();J&&(v.value.canvas.discardActiveObject(J),v.value.canvas.renderAll(),v.value.activeObject=null),S.shape.tool=ne};return watch(()=>m.value,(ne,J)=>{v.value.tool=ne}),watch(()=>S.shape.tool,(ne,J)=>{v.value.shape=ne}),watch(()=>S.text.fontFamily,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="f-text"&&J.editable?(J.set("fontFamily",ne),v.value.canvas.renderAll()):TEXTBOX_DEFAULT_CONFIG.fontFamily=ne}}),watch(()=>S.text.fill,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="f-text"&&J.editable?(J.set("fill",ne),v.value.canvas.renderAll()):TEXTBOX_DEFAULT_CONFIG.fill=ne}}),watch(()=>S.text.fontSize,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="f-text"&&J.editable?(J.set("fontSize",ne),v.value.canvas.renderAll()):TEXTBOX_DEFAULT_CONFIG.fontSize=ne}}),watch(()=>S.text.fontStyle,ne=>{if(v.value){const J=v.value.canvas.getActiveObject(),re=ne.toLowerCase().indexOf("oblique")>-1?"oblique":"normal",X=ne.indexOf("bold")>-1?"bold":"normal";J&&J.type==="f-text"&&J.editable?(J.set("fontStyle",re),J.set("fontWeight",X),v.value.canvas.renderAll()):(TEXTBOX_DEFAULT_CONFIG.fontStyle=re,TEXTBOX_DEFAULT_CONFIG.fontWeight=X)}}),watch(()=>S.text.textAlign,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="f-text"&&J.editable?(J.set("textAlign",ne),v.value.canvas.renderAll()):TEXTBOX_DEFAULT_CONFIG.textAlign=ne}}),watch(()=>S.text.backgroundColor,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="f-text"&&J.editable?(J.set("backgroundColor",ne),v.value.canvas.renderAll()):TEXTBOX_DEFAULT_CONFIG.backgroundColor=ne}}),watch(()=>S.text.opacity,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="f-text"&&J.editable?(J.set("opacity",parseInt(ne)/100),v.value.canvas.renderAll()):TEXTBOX_DEFAULT_CONFIG.opacity=parseInt(ne)/100}}),watch(()=>S.shape.stroke,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&(J.type==="rect"&&S.shape.tool==="rect"||J.type==="line"&&S.shape.tool==="line")?(J.set("stroke",ne),v.value.canvas.renderAll()):SQUARE_DEFAULT_CONFIG.stroke=ne}}),watch(()=>S.shape.strokeWidth,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&(J.type==="rect"&&S.shape.tool==="rect"||J.type==="line"&&S.shape.tool==="line")?(J.set("strokeWidth",ne),v.value.canvas.renderAll()):SQUARE_DEFAULT_CONFIG.strokeWidth=ne}}),watch(()=>S.shape.fill,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="rect"&&S.shape.tool==="rect"?(J.set("fill",ne),v.value.canvas.renderAll()):SQUARE_DEFAULT_CONFIG.fill=ne}}),watch(()=>S.shape.opacity,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&(J.type==="rect"&&S.shape.tool==="rect"||J.type==="line"&&S.shape.tool==="line")?(J.set("opacity",parseInt(ne)/100),v.value.canvas.renderAll()):SQUARE_DEFAULT_CONFIG.opacity=parseInt(ne)/100}}),watch(()=>S.date.format,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();if(J&&J.type==="f-text"&&!J.editable){const re=dayjs().format(ne);J.set("text",re),v.value.canvas.renderAll()}else DATETIME_DEFAULT_CONFIG.format=ne}}),watch(()=>S.date.fontFamily,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="f-text"&&!J.editable?(J.set("fontFamily",ne),v.value.canvas.renderAll()):DATETIME_DEFAULT_CONFIG.fontFamily=ne}}),watch(()=>S.date.fill,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="f-text"&&!J.editable?(J.set("fill",ne),v.value.canvas.renderAll()):DATETIME_DEFAULT_CONFIG.fill=ne}}),watch(()=>S.date.fontSize,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="f-text"&&!J.editable?(J.set("fontSize",ne),v.value.canvas.renderAll()):DATETIME_DEFAULT_CONFIG.fontSize=ne}}),watch(()=>S.date.fontStyle,ne=>{if(v.value){const J=v.value.canvas.getActiveObject(),re=ne.toLowerCase().indexOf("oblique")>-1?"oblique":"normal",X=ne.indexOf("bold")>-1?"bold":"normal";J&&J.type==="f-text"&&!J.editable?(J.set("fontStyle",re),J.set("fontWeight",X),v.value.canvas.renderAll()):(DATETIME_DEFAULT_CONFIG.fontStyle=re,DATETIME_DEFAULT_CONFIG.fontWeight=X)}}),watch(()=>S.date.textAlign,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="f-text"&&!J.editable?(J.set("textAlign",ne),v.value.canvas.renderAll()):DATETIME_DEFAULT_CONFIG.textAlign=ne}}),watch(()=>S.date.backgroundColor,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="f-text"&&!J.editable?(J.set("backgroundColor",ne),v.value.canvas.renderAll()):DATETIME_DEFAULT_CONFIG.backgroundColor=ne}}),watch(()=>S.date.opacity,ne=>{if(v.value){const J=v.value.canvas.getActiveObject();J&&J.type==="f-text"&&!J.editable?(J.set("opacity",parseInt(ne)/100),v.value.canvas.renderAll()):DATETIME_DEFAULT_CONFIG.opacity=parseInt(ne)/100}}),(ne,J)=>{const re=__unplugin_components_0$y,X=_sfc_main$4l,j=__unplugin_components_2$g,Z=__unplugin_components_3$f,W=__unplugin_components_0$z,te=__unplugin_components_6$a,le=__unplugin_components_4$e,oe=__unplugin_components_7$9,Ee=__unplugin_components_9$5,Ae=__unplugin_components_13$2;return openBlock(),createElementBlock("div",_hoisted_1$3X,[createBaseVNode("div",_hoisted_2$3J,[createBaseVNode("div",_hoisted_3$3n,[createBaseVNode("div",_hoisted_4$1j,toDisplayString$1(unref(r)("customeStamp.title")),1),createBaseVNode("div",_hoisted_5$R,[createBaseVNode("div",_hoisted_6$D,[createBaseVNode("div",_hoisted_7$v,toDisplayString$1(unref(r)("customeStamp.preview")),1),createBaseVNode("div",_hoisted_8$p,[createBaseVNode("div",_hoisted_9$n,[createVNode(X,{onClick:J[0]||(J[0]=ve=>Q("text")),class:normalizeClass({active:m.value==="text"}),title:unref(r)("customeStamp.addText")},{default:withCtx(()=>[createVNode(re)]),_:1},8,["class","title"]),createVNode(X,{onClick:J[1]||(J[1]=ve=>Q("shape")),class:normalizeClass({active:m.value==="shape"}),title:unref(r)("customeStamp.addShape")},{default:withCtx(()=>[createVNode(j)]),_:1},8,["class","title"]),createVNode(X,{onClick:J[2]||(J[2]=ve=>Q("date")),class:normalizeClass({active:m.value==="date"}),title:unref(r)("customeStamp.addDateTime")},{default:withCtx(()=>[createVNode(Z)]),_:1},8,["class","title"])]),createBaseVNode("div",_hoisted_10$o,[createBaseVNode("div",_hoisted_11$k,[y.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_12$j,toDisplayString$1(unref(r)("customeStamp.createHere")),1)),createBaseVNode("div",_hoisted_13$j,[createBaseVNode("canvas",{ref_key:"canvasElement",ref:o,width:"300",height:"300"},null,512)],512)])])])]),createBaseVNode("div",_hoisted_14$j,[createBaseVNode("div",_hoisted_15$j,toDisplayString$1(unref(r)("customeStamp.properties")),1),m.value==="text"?(openBlock(),createElementBlock("div",_hoisted_16$i,[createBaseVNode("div",_hoisted_17$h,[createBaseVNode("div",_hoisted_18$g,toDisplayString$1(unref(r)("customeStamp.font")),1),createVNode(unref(NSelect),{value:S.text.fontFamily,"onUpdate:value":J[3]||(J[3]=ve=>S.text.fontFamily=ve),options:E,to:".text-properties",class:"font-family property-container"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value"])]),createBaseVNode("div",_hoisted_19$g,[createBaseVNode("div",_hoisted_20$g,toDisplayString$1(unref(r)("customeStamp.fontColor")),1),createBaseVNode("div",_hoisted_21$f,[createBaseVNode("div",_hoisted_22$f,[createBaseVNode("div",_hoisted_23$e,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:S.text.fill})},null,4)]),createVNode(unref(NColorPicker),{to:".font-color",onComplete:J[4]||(J[4]=ve=>D(ve,"fill")),"onUpdate:value":J[5]||(J[5]=ve=>I(ve,"fill")),value:S.text.fill,"show-alpha":!1},{label:withCtx(()=>[_hoisted_24$e]),_:1},8,["value"])])])]),createBaseVNode("div",_hoisted_25$d,[createBaseVNode("div",_hoisted_26$c,toDisplayString$1(unref(r)("customeStamp.fontStyle")),1),createVNode(unref(NSelect),{value:S.text.fontStyle,"onUpdate:value":J[6]||(J[6]=ve=>S.text.fontStyle=ve),options:T.value,to:".font-weight",class:"font-weight property-container"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value","options"])]),createBaseVNode("div",_hoisted_27$b,[createBaseVNode("div",_hoisted_28$b,toDisplayString$1(unref(r)("customeStamp.fontSize")),1),createVNode(unref(NSelect),{value:S.text.fontSize,"onUpdate:value":J[7]||(J[7]=ve=>S.text.fontSize=ve),options:O,to:".font-size",class:"font-size property-container"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value"])]),createBaseVNode("div",_hoisted_29$9,[createBaseVNode("div",_hoisted_30$9,toDisplayString$1(unref(r)("customeStamp.alignment")),1),createBaseVNode("div",_hoisted_31$9,[createBaseVNode("div",_hoisted_32$7,[createBaseVNode("div",{class:normalizeClass({active:S.text.textAlign==="left"}),onClick:J[8]||(J[8]=ve=>N("left"))},[createBaseVNode("span",_hoisted_33$6,[createVNode(te)])],2),createBaseVNode("div",{class:normalizeClass({active:S.text.textAlign==="center"}),onClick:J[9]||(J[9]=ve=>N("center"))},[createBaseVNode("span",_hoisted_34$6,[createVNode(le)])],2),createBaseVNode("div",{class:normalizeClass({active:S.text.textAlign==="right"}),onClick:J[10]||(J[10]=ve=>N("right"))},[createBaseVNode("span",null,[createVNode(oe)])],2)])])]),createBaseVNode("div",_hoisted_35$6,[createBaseVNode("div",_hoisted_36$6,toDisplayString$1(unref(r)("customeStamp.fillColor")),1),createBaseVNode("div",_hoisted_37$6,[createBaseVNode("span",{class:normalizeClass(["no-color",{active:S.text.backgroundColor===""}]),onClick:J[11]||(J[11]=ve=>S.text.backgroundColor="")},[createVNode(__unplugin_components_0$x)],2),createBaseVNode("div",_hoisted_38$4,[createBaseVNode("div",{class:normalizeClass(["preview-container",{active:S.text.backgroundColor===s.value}])},[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:s.value})},null,4)],2),createVNode(unref(NColorPicker),{to:".fill-color",onComplete:J[12]||(J[12]=ve=>D(ve,"backgroundColor")),"onUpdate:value":J[13]||(J[13]=ve=>I(ve,"backgroundColor")),value:s.value,"show-alpha":!1},{label:withCtx(()=>[_hoisted_39$4]),_:1},8,["value"])])])]),createBaseVNode("div",_hoisted_40$4,[createBaseVNode("div",_hoisted_41$4,toDisplayString$1(unref(r)("customeStamp.opacity")),1),createVNode(unref(NSelect),{value:S.text.opacity,"onUpdate:value":J[14]||(J[14]=ve=>S.text.opacity=ve),options:U,to:".text-properties",class:"opacity property-container"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value"])])])):createCommentVNode("",!0),m.value==="shape"?(openBlock(),createElementBlock("div",_hoisted_42$3,[createBaseVNode("div",_hoisted_43$3,[createBaseVNode("div",_hoisted_44$3,toDisplayString$1(unref(r)("customeStamp.shape")),1),createBaseVNode("div",_hoisted_45$3,[createVNode(X,{onClick:J[15]||(J[15]=ve=>q("rect")),class:normalizeClass({active:S.shape.tool==="rect"})},{default:withCtx(()=>[createVNode(Ee)]),_:1},8,["class"]),createVNode(X,{onClick:J[16]||(J[16]=ve=>q("line")),class:normalizeClass({active:S.shape.tool==="line"})},{default:withCtx(()=>[createVNode(Ae)]),_:1},8,["class"])])]),createBaseVNode("div",_hoisted_46$3,[createBaseVNode("div",_hoisted_47$3,toDisplayString$1(unref(r)("customeStamp.borderColor")),1),createBaseVNode("div",_hoisted_48$3,[createBaseVNode("div",_hoisted_49$3,[createBaseVNode("div",_hoisted_50$3,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:S.shape.stroke})},null,4)]),createVNode(unref(NColorPicker),{to:".shape-properties",onComplete:J[17]||(J[17]=ve=>D(ve,"stroke")),"onUpdate:value":J[18]||(J[18]=ve=>I(ve,"stroke")),value:S.shape.stroke,"show-alpha":!1},{label:withCtx(()=>[_hoisted_51$3]),_:1},8,["value"])])])]),createBaseVNode("div",_hoisted_52$2,[createBaseVNode("div",_hoisted_53$2,toDisplayString$1(unref(r)("customeStamp.borderWidth")),1),createVNode(unref(NSelect),{value:S.shape.strokeWidth,"onUpdate:value":J[19]||(J[19]=ve=>S.shape.strokeWidth=ve),options:F,to:".shape-properties",class:"border-width property-container"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value"])]),S.shape.tool==="rect"?(openBlock(),createElementBlock("div",_hoisted_54$2,[createBaseVNode("div",_hoisted_55$2,toDisplayString$1(unref(r)("customeStamp.fillColor")),1),createBaseVNode("div",_hoisted_56$2,[createBaseVNode("span",{class:normalizeClass(["no-color",{active:S.shape.fill===""}]),onClick:J[20]||(J[20]=ve=>S.shape.fill="")},[createVNode(__unplugin_components_0$x)],2),createBaseVNode("div",_hoisted_57$3,[createBaseVNode("div",{class:normalizeClass(["preview-container",{active:S.shape.fill===w.value}])},[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:w.value})},null,4)],2),createVNode(unref(NColorPicker),{to:".shape-properties",onComplete:J[21]||(J[21]=ve=>D(ve,"fill")),"onUpdate:value":J[22]||(J[22]=ve=>I(ve,"fill")),value:w.value,"show-alpha":!1},{label:withCtx(()=>[_hoisted_58$3]),_:1},8,["value"])])])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_59$3,[createBaseVNode("div",_hoisted_60$3,toDisplayString$1(unref(r)("customeStamp.opacity")),1),createVNode(unref(NSelect),{value:S.shape.opacity,"onUpdate:value":J[23]||(J[23]=ve=>S.shape.opacity=ve),options:U,to:".shape-properties",class:"fill-opacity property-container"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value"])])])):createCommentVNode("",!0),m.value==="date"?(openBlock(),createElementBlock("div",_hoisted_61$3,[createBaseVNode("div",_hoisted_62$3,[createBaseVNode("div",_hoisted_63$3,toDisplayString$1(unref(r)("customeStamp.dateTime")),1),createVNode(unref(NSelect),{"consistent-menu-width":!1,value:S.date.format,"onUpdate:value":J[24]||(J[24]=ve=>S.date.format=ve),options:Y,to:".date-properties",class:"text-family property-container"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value"])]),createBaseVNode("div",_hoisted_64$2,[createBaseVNode("div",_hoisted_65$2,toDisplayString$1(unref(r)("customeStamp.font")),1),createVNode(unref(NSelect),{value:S.date.fontFamily,"onUpdate:value":J[25]||(J[25]=ve=>S.date.fontFamily=ve),options:E,to:".date-properties",class:"text-family property-container"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value"])]),createBaseVNode("div",_hoisted_66$2,[createBaseVNode("div",_hoisted_67$1,toDisplayString$1(unref(r)("customeStamp.fontColor")),1),createBaseVNode("div",_hoisted_68$1,[createBaseVNode("div",_hoisted_69$1,[createBaseVNode("div",_hoisted_70$1,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:S.date.fill})},null,4)]),createVNode(unref(NColorPicker),{to:".date-properties",onComplete:J[26]||(J[26]=ve=>D(ve,"fill")),"onUpdate:value":J[27]||(J[27]=ve=>I(ve,"fill")),value:S.date.fill,"show-alpha":!1},{label:withCtx(()=>[_hoisted_71$1]),_:1},8,["value"])])])]),createBaseVNode("div",_hoisted_72$1,[createBaseVNode("div",_hoisted_73$1,toDisplayString$1(unref(r)("customeStamp.fontStyle")),1),createVNode(unref(NSelect),{value:S.date.fontStyle,"onUpdate:value":J[28]||(J[28]=ve=>S.date.fontStyle=ve),options:T.value,to:".date-properties",class:"text-family property-container"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value","options"])]),createBaseVNode("div",_hoisted_74$1,[createBaseVNode("div",_hoisted_75$1,toDisplayString$1(unref(r)("customeStamp.fontSize")),1),createVNode(unref(NSelect),{value:S.date.fontSize,"onUpdate:value":J[29]||(J[29]=ve=>S.date.fontSize=ve),options:O,to:".date-properties",class:"font-size property-container"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value"])]),createBaseVNode("div",_hoisted_76$1,[createBaseVNode("div",_hoisted_77$1,toDisplayString$1(unref(r)("customeStamp.alignment")),1),createBaseVNode("div",_hoisted_78$1,[createBaseVNode("div",_hoisted_79$1,[createBaseVNode("div",{class:normalizeClass({active:S.date.textAlign==="left"}),onClick:J[30]||(J[30]=ve=>N("left"))},[createBaseVNode("span",_hoisted_80$1,[createVNode(te)])],2),createBaseVNode("div",{class:normalizeClass({active:S.date.textAlign==="center"}),onClick:J[31]||(J[31]=ve=>N("center"))},[createBaseVNode("span",_hoisted_81$1,[createVNode(le)])],2),createBaseVNode("div",{class:normalizeClass({active:S.date.textAlign==="right"}),onClick:J[32]||(J[32]=ve=>N("right"))},[createBaseVNode("span",null,[createVNode(oe)])],2)])])]),createBaseVNode("div",_hoisted_82$1,[createBaseVNode("div",_hoisted_83$1,toDisplayString$1(unref(r)("customeStamp.fillColor")),1),createBaseVNode("div",_hoisted_84$1,[createBaseVNode("span",{class:normalizeClass(["no-color",{active:S.date.backgroundColor===""}]),onClick:J[33]||(J[33]=ve=>S.date.backgroundColor="")},[createVNode(__unplugin_components_0$x)],2),createBaseVNode("div",_hoisted_85,[createBaseVNode("div",{class:normalizeClass(["preview-container",{active:S.date.backgroundColor===g.value}])},[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:g.value})},null,4)],2),createVNode(unref(NColorPicker),{to:".date-properties",onComplete:J[34]||(J[34]=ve=>D(ve,"backgroundColor")),"onUpdate:value":J[35]||(J[35]=ve=>I(ve,"backgroundColor")),value:g.value,"show-alpha":!1},{label:withCtx(()=>[_hoisted_86]),_:1},8,["value"])])])]),createBaseVNode("div",_hoisted_87,[createBaseVNode("div",_hoisted_88,toDisplayString$1(unref(r)("customeStamp.opacity")),1),createVNode(unref(NSelect),{value:S.date.opacity,"onUpdate:value":J[36]||(J[36]=ve=>S.date.opacity=ve),options:U,to:".date-properties",class:"opacity property-container"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value"])])])):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_89,[createBaseVNode("span",{onClick:k},toDisplayString$1(unref(r)("customeStamp.clear")),1),createBaseVNode("div",_hoisted_90,[createBaseVNode("span",{class:"cancel-container",onClick:P},toDisplayString$1(unref(r)("customeStamp.cancel")),1),createBaseVNode("span",{class:normalizeClass({disabled:y.value===0}),onClick:d},toDisplayString$1(unref(r)("customeStamp.ok")),3)])])])])])}}},_sfc_main$4h={},_hoisted_1$3W={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3I=createBaseVNode("path",{d:"M13 1L1 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_3$3m=createBaseVNode("path",{d:"M1 1L13 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_4$1i=[_hoisted_2$3I,_hoisted_3$3m];function _sfc_render$2F(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3W,_hoisted_4$1i)}const __unplugin_components_14$3=_export_sfc(_sfc_main$4h,[["render",_sfc_render$2F]]),_sfc_main$4g={},_hoisted_1$3V={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3H=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.6466 13.2531L13.0001 13.6066L13.7072 12.8995L13.3537 12.546L8.7072 7.8995L13.2532 3.35352L13.6067 2.99997L12.8996 2.29286L12.5461 2.64642L8.00009 7.19239L3.45418 2.64648L3.10063 2.29292L2.39352 3.00003L2.74708 3.35358L7.29299 7.8995L2.64657 12.5459L2.29302 12.8995L3.00013 13.6066L3.35368 13.253L8.0001 8.6066L12.6466 13.2531Z",fill:"currentColor"},null,-1),_hoisted_3$3l=[_hoisted_2$3H];function _sfc_render$2E(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3V,_hoisted_3$3l)}const __unplugin_components_0$w=_export_sfc(_sfc_main$4g,[["render",_sfc_render$2E]]),_sfc_main$4f={},_hoisted_1$3U={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},_hoisted_2$3G=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.7331 15.7936C15.026 16.0864 15.5009 16.0864 15.7937 15.7936C16.0866 15.5007 16.0866 15.0258 15.7937 14.7329L11.3743 10.3135L15.7938 5.89408C16.0867 5.60119 16.0867 5.12631 15.7938 4.83342C15.5009 4.54052 15.026 4.54053 14.7331 4.83342L10.3137 9.25284L5.89425 4.8334C5.60136 4.54051 5.12649 4.54051 4.83359 4.8334C4.5407 5.12629 4.5407 5.60117 4.83359 5.89406L9.25303 10.3135L4.83361 14.7329C4.54072 15.0258 4.54072 15.5007 4.83361 15.7936C5.1265 16.0865 5.60138 16.0865 5.89427 15.7936L10.3137 11.3742L14.7331 15.7936Z",fill:"currentColor"},null,-1),_hoisted_3$3k=[_hoisted_2$3G];function _sfc_render$2D(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3U,_hoisted_3$3k)}const __unplugin_components_1$g=_export_sfc(_sfc_main$4f,[["render",_sfc_render$2D]]),Dialog_vue_vue_type_style_index_0_lang="",_hoisted_1$3T={key:0,class:"dialog"},_hoisted_2$3F={class:"dialog-wrapper"},_hoisted_3$3j={class:"dialog-container"},_hoisted_4$1h={key:0,class:"close"},_sfc_main$4e={__name:"Dialog",props:["show","dialogName","close"],setup(e){const{show:n,dialogName:r,close:o}=e,u=useViewerStore(),s=()=>{u.closeElement(r)},w=g=>{typeof o=="function"?o(g):s()};return(g,v)=>{const y=__unplugin_components_1$g,m=__unplugin_components_0$w,d=__unplugin_components_14$3;return e.show?(openBlock(),createElementBlock("div",_hoisted_1$3T,[createBaseVNode("div",_hoisted_2$3F,[createBaseVNode("div",_hoisted_3$3j,[e.close?(openBlock(),createElementBlock("div",_hoisted_4$1h,[e.close==="A"?(openBlock(),createBlock(y,{key:0,onClick:w})):createCommentVNode("",!0),e.close==="B"?(openBlock(),createBlock(m,{key:1,onClick:w})):(openBlock(),createBlock(d,{key:2,onClick:w}))])):createCommentVNode("",!0),createBaseVNode("header",null,[renderSlot(g.$slots,"header")]),createBaseVNode("main",null,[renderSlot(g.$slots,"default")]),createBaseVNode("footer",null,[renderSlot(g.$slots,"footer")])])])])):createCommentVNode("",!0)}}},_sfc_main$4d={},_hoisted_1$3S={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3E=createBaseVNode("path",{d:"M20 36.6667C29.2047 36.6667 36.6667 29.2047 36.6667 20C36.6667 10.7952 29.2047 3.33333 20 3.33333C10.7952 3.33333 3.33333 10.7952 3.33333 20C3.33333 29.2047 10.7952 36.6667 20 36.6667Z",fill:"#FFC061"},null,-1),_hoisted_3$3i=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21.6667 12.5C21.6667 11.5795 20.9205 10.8333 20 10.8333C19.0795 10.8333 18.3333 11.5795 18.3333 12.5L18.3333 22.5C18.3333 23.4205 19.0795 24.1667 20 24.1667C20.9205 24.1667 21.6667 23.4205 21.6667 22.5L21.6667 12.5ZM20.1667 29.3333C21.0871 29.3333 21.8333 28.5871 21.8333 27.6667C21.8333 26.7462 21.0871 26 20.1667 26C19.2462 26 18.5 26.7462 18.5 27.6667C18.5 28.5871 19.2462 29.3333 20.1667 29.3333Z",fill:"white"},null,-1),_hoisted_4$1g=[_hoisted_2$3E,_hoisted_3$3i];function _sfc_render$2C(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3S,_hoisted_4$1g)}const __unplugin_components_2$f=_export_sfc(_sfc_main$4d,[["render",_sfc_render$2C]]),_sfc_main$4c={},_hoisted_1$3R={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3D=createBaseVNode("rect",{width:"14",height:"14",rx:"1",fill:"#2D77FA"},null,-1),_hoisted_3$3h=createBaseVNode("path",{d:"M10.2784 5.27848L5.84653 9.71032L4.20261 8.06642",stroke:"white","stroke-width":"1.5","stroke-linecap":"square"},null,-1),_hoisted_4$1f=[_hoisted_2$3D,_hoisted_3$3h];function _sfc_render$2B(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3R,_hoisted_4$1f)}const __unplugin_components_1$f=_export_sfc(_sfc_main$4c,[["render",_sfc_render$2B]]),_sfc_main$4b={},_hoisted_1$3Q={width:"8",height:"16",viewBox:"0 0 8 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3C=createBaseVNode("g",{id:".base / Sliders"},[createBaseVNode("rect",{id:"Rectangle",width:"8",height:"16",rx:"4",fill:"#1460F3"})],-1),_hoisted_3$3g=[_hoisted_2$3C];function _sfc_render$2A(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3Q,_hoisted_3$3g)}const __unplugin_components_1$e=_export_sfc(_sfc_main$4b,[["render",_sfc_render$2A]]),_sfc_main$4a={},_hoisted_1$3P={width:"112",height:"112",viewBox:"0 0 112 112",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3B=createStaticVNode('<rect x="20" y="30" width="58" height="44" rx="3.168" fill="#4982E6" fill-opacity="0.15"></rect><rect x="20.5" y="30.5" width="57" height="43" rx="2.668" stroke="#4982E6" stroke-dasharray="4 4"></rect><path fill-rule="evenodd" clip-rule="evenodd" d="M30 41.168C30 39.4184 31.4184 38 33.168 38H84.832C86.5816 38 88 39.4184 88 41.168V78.832C88 80.5816 86.5816 82 84.832 82H33.168C31.4184 82 30 80.5816 30 78.832L30 41.168Z" fill="#FCFDFF"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M77 54C79.7614 54 82 51.7614 82 49C82 46.2386 79.7614 44 77 44C74.2386 44 72 46.2386 72 49C72 51.7614 74.2386 54 77 54ZM36 76H79.1397L61.8379 61L54.3148 68.1755L38.7391 56L36 58.8801V76Z" fill="#E2E3E6"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M92.2373 71.6307L81.4619 68.3981L84.6945 79.1734C84.902 79.865 85.8082 80.0262 86.2414 79.4485L87.8623 77.2874L89.5512 78.9764C89.8949 79.32 90.4521 79.32 90.7957 78.9764L92.0402 77.7319C92.3839 77.3882 92.3839 76.831 92.0402 76.4874L90.3513 74.7984L92.5124 73.1775C93.09 72.7443 92.9289 71.8381 92.2373 71.6307Z" fill="#273C62" fill-opacity="0.6"></path>',5),_hoisted_7$u=[_hoisted_2$3B];function _sfc_render$2z(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3P,_hoisted_7$u)}const __unplugin_components_3$e=_export_sfc(_sfc_main$4a,[["render",_sfc_render$2z]]),_sfc_main$49={},_hoisted_1$3O={width:"112",height:"112",viewBox:"0 0 112 112",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3A=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M27.2002 22.4002C27.2002 20.6329 28.6329 19.2002 30.4002 19.2002H68.8002L81.6002 32.0002V88.0002C81.6002 89.7675 80.1675 91.2002 78.4002 91.2002H30.4002C28.6329 91.2002 27.2002 89.7675 27.2002 88.0002V22.4002Z",fill:"#54575C"},null,-1),_hoisted_3$3f=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M68.7998 19.2002L81.5998 32.0002H71.9998C70.2325 32.0002 68.7998 30.5675 68.7998 28.8002V19.2002Z",fill:"#606773"},null,-1),_hoisted_4$1e=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M34.4002 36.7998C33.9584 36.7998 33.6002 37.158 33.6002 37.5998V41.5998C33.6002 42.0416 33.9584 42.3998 34.4002 42.3998H74.4002C74.842 42.3998 75.2002 42.0416 75.2002 41.5998V37.5998C75.2002 37.158 74.842 36.7998 74.4002 36.7998H34.4002ZM34.4001 47.2C33.9583 47.2 33.6001 47.5582 33.6001 48V52C33.6001 52.4418 33.9583 52.8 34.4001 52.8H74.4001C74.8419 52.8 75.2001 52.4418 75.2001 52V48C75.2001 47.5582 74.8419 47.2 74.4001 47.2H34.4001ZM33.6001 58.4C33.6001 57.9582 33.9583 57.6 34.4001 57.6H74.4001C74.8419 57.6 75.2001 57.9582 75.2001 58.4V62.4C75.2001 62.8418 74.8419 63.2 74.4001 63.2H34.4001C33.9583 63.2 33.6001 62.8418 33.6001 62.4V58.4ZM34.4001 68C33.9583 68 33.6001 68.3582 33.6001 68.8V72.8C33.6001 73.2418 33.9583 73.6 34.4001 73.6H55.2001C55.6419 73.6 56.0001 73.2418 56.0001 72.8V68.8C56.0001 68.3582 55.6419 68 55.2001 68H34.4001Z",fill:"#606773"},null,-1),_hoisted_5$Q=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M77.6 67.2002C74.2863 67.2002 71.6 69.8865 71.6 73.2002C71.6 75.4018 72.7857 77.3264 74.5534 78.3703C74.7147 78.8387 74.8174 79.3262 74.8174 79.8082C74.8174 82.0522 72.5913 82.263 72.5913 82.263L67.2 82.2631C65.4327 82.2631 64 83.6958 64 85.4631V89.6002H91.2V85.4631C91.2 83.6958 89.7673 82.2631 88 82.2631L82.6087 82.263C82.6087 82.263 80.3826 82.0522 80.3826 79.8082C80.3826 79.3262 80.4853 78.8387 80.6466 78.3703C82.4143 77.3264 83.6 75.4018 83.6 73.2002C83.6 69.8865 80.9137 67.2002 77.6 67.2002ZM64 93.6002V91.2002H91.2V93.6002C91.2 94.042 90.8418 94.4002 90.4 94.4002H64.8C64.3582 94.4002 64 94.042 64 93.6002Z",fill:"#6499FF"},null,-1),_hoisted_6$C=[_hoisted_2$3A,_hoisted_3$3f,_hoisted_4$1e,_hoisted_5$Q];function _sfc_render$2y(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3O,_hoisted_6$C)}const __unplugin_components_2$e=_export_sfc(_sfc_main$49,[["render",_sfc_render$2y]]),type=["ink","line","square","arc","polygon","polyline","circle","freetext","text","highlight","underline","squiggly","strikeout","image","stamp","polygon","rectangle","polyline"],useDocumentStore=defineStore({id:"document",state:()=>({totalPages:0,loadingProgress:0,annotationsCount:0,info:null,optionUrl:null,markupTool:"highlight",highlight:{color:"#FFEC66"},underline:{color:"#FF0000"},squiggly:{color:"#FF0000"},strikeout:{color:"#FF0000"},shapeTool:"square",square:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},arc:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},polygon:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},polyline:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},circle:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},arrow:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},line:{color:"#FF0000",opacity:"0.8",stroke:"1pt"},ink:{color:"#FF0000",opacity:"0.8",stroke:"2pt"},freetext:{color:"#000000"},text:{color:"#FF0000"},activeTool:"",annotations:null,textfield:{color:"#DDE9FF"},checkbox:{color:"#DDE9FF",borderColor:"#43474D"},radiobutton:{color:"#DDE9FF",borderColor:"#43474D"},listbox:{color:"#DDE9FF",borderColor:"#43474D"},combobox:{color:"#DDE9FF",borderColor:"#43474D"},pushbutton:{color:"#DDE9FF",borderColor:"#43474D"},link:{color:"#DDE9FF"},signatureFields:{color:"#DDE9FF"},redaction:{color:"#000000"},remove:{color:"#FF0000"},propertyPanel:{fieldName:"",isHidden:"0",title:"",backgroundColor:"#DDE9FF",color:"#000000",fontName:"Helvetica",fontStyle:"normal",fontSize:"14",textAlignment:"0",contents:"",isMultiLine:!1,project:"",projectList:"",checkStyle:0,isChecked:"",actionType:"0",text:"OK",url:"",destPage:"",items:[],item:null,deleteItemIndex:null,moveOption:null},compareFiles:{oldFile:null,oldFilePassword:"",newFile:null,newFilePassword:""},compareSettings:{oldFileColor:"#FBBDBF",newFileColor:"#93B9FD"},currentPdfData:null,fileHasPwd:!1,pwd:null,compareResult:null,outlines:[],activeOutlineId:null,searchResults:[],activeSearchResult:null,docEditorOperationList:[],signatures:[],selectedSignature:null,trustedCertificateLists:[],author:"ComPDFKit",annotator:"Guest",highlightLink:!0,highlightForm:!0,redactionPrompted:!1,autoJumpNextSign:!1,disableDigitalSignature:!1,disableElectronicSignature:!1,layers:[],selectedLayer:null,firstEnterRedactionTool:"",measure:{scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1}}),getters:{getTotalPages(){return this.totalPages},getLoadingProgress(){return this.loadingProgress},getAnnotationsCount(){return this.annotationsCount+" annotation"+(this.annotationsCount>1?"s":"")},getMeasure(){return this.measure},getPrecision(){return this.measure.precision===1?.1:.01},getInfo(){return this.info},getOptionUrl(){return this.optionUrl},getMarkupToolState(){return this.markupTool},getLineType(){return this.line.type},getActiveToolColor(){if(this.activeTool)return this[this.activeTool].color},getActiveTool(){return this.activeTool},getShapeToolState(){return this.shapeTool},getAllAnnotations(){const e={annotations:{},annotationsCount:0},n=this.annotations;for(const r in n){const o=n[r],u=o.length;if(u)for(let s=0;s<u;s++){const w=o[s];!o[s]||type.includes(w.type)&&!w.mainName&&(e.annotations[r]||(e.annotations[r]={pageAnnotationsCount:0,annotations:[]}),e.annotations[r].pageAnnotationsCount++,e.annotationsCount++,e.annotations[r].annotations.push(w))}}return e},getAnnotations(e){return this.annotations&&this.annotations[e]},getCompareFile(e){return n=>e.compareFiles[n]},getCompareFiles(){return this.compareFiles},getCompareSetting(e){return n=>e.compareSettings[n]},getCurrentPdfData(){return this.currentPdfData},getFilehasPwd(){return this.fileHasPwd},getPassword(){return this.pwd},getCompareResult(){return this.compareResult},getOutlines(){return this.outlines},getActiveOutlineId(){return this.activeOutlineId},getSearchResults(){return this.searchResults},getActiveSearchResult(){return this.activeSearchResult},getDocEditorOperationList(){return this.docEditorOperationList},getSignatures(){return this.signatures},getSelectedSignature(){return this.selectedSignature},getPkcs12(){return this.pkcs12},getTrustedCertificateLists(){return this.trustedCertificateLists},getAuthor(){return this.author},getAnnotator(){return this.annotator},getHighlightLink(){return this.highlightLink},getHighlightForm(){return this.highlightForm},getRedactionPrompted(){return this.redactionPrompted},getAutoJumpNextSign(){return this.autoJumpNextSign},getDisableDigitalSignature(){return this.disableDigitalSignature},getDisableElectronicSignature(){return this.disableElectronicSignature},getLayers(){return this.layers},getSelectedLayer(){return this.selectedLayer},getFirstEnterRedactionTool(){return this.firstEnterRedactionTool}},actions:{resetSetting(){this.totalPages=0,this.loadingProgress=0,this.annotationsCount=0,this.annotations=null,this.outlines=[],this.activeOutlineId=null,this.searchResults=[],this.docEditorOperationList=[],this.signatures=[],this.layers=[]},setTotalPages(e){this.totalPages=e},setLoadingProgress(e){this.loadingProgress=e},setAnnotationsCount(e){this.annotationsCount=e},setOptionUrl(e){this.optionUrl=e},setToken(e){this.info=e},setDistance(e){this.measure.distance=Math.round(e*10)/10},setMarkupToolState(e){this.markupTool=e},setMarkupToolColor(e){this[this.markupTool]=e},setShapeToolState(e){this.shapeTool=e},setLineType(e){this.line.type=e},setLineColor(e){this.line.color=e},setActiveTool(e){this.activeTool=e},setActiveToolColor(e){this.activeTool&&(this[this.activeTool].color=e,core.setTool({tool:this.activeTool,color:e}))},setToolState(e){var n;this.activeTool===e||!e?(this.activeTool="",core.setTool({tool:"",color:""})):(this.activeTool=e,core.setTool({tool:e,color:((n=this[e])==null?void 0:n.color)||""}),(this.activeTool==="textfield"||this.activeTool==="checkbox"||this.activeTool==="radiobutton"||this.activeTool==="pushbutton")&&core.setInitProperty())},initAnnotations(e){this.annotations=null,this.annotations=e},setAnnotations(e,n){const r=this.annotations;if(n==="add")r[e[page]]||(r[page]=[]),r[page].push(e);else{const o=r[e[page]],u=o.findIndex(s=>s.index===e.index);n==="delete"?o[u].isDelete=!0:o[u]={...o[u],...e}}},setPropertyPanel(e){let n={};for(const r in e)for(const o in this.propertyPanel)r===o&&(n[o]=e[r]);core.setPropertyPanel(n)},setCompareFiles(e,n){this.compareFiles[e]=n},initCompareFiles(){this.compareFiles.oldFile=null,this.compareFiles.oldFilePassword="",this.compareFiles.newFile=null,this.compareFiles.newFilePassword=""},setCompareSetting(e,n){this.compareSettings[e]=n},initCompareSetting(){this.compareSettings={oldFileColor:"#FBBDBF",newFileColor:"#93B9FD"}},setCurrentPdfData(e,n){e&&n?(this.currentPdfData||(this.currentPdfData={}),this.currentPdfData.pdf=e,this.currentPdfData.options=n):e?this.currentPdfData.pdf=e:this.currentPdfData=null},setFileHasPwd(e){this.fileHasPwd=e},setPassword(e){this.pwd=e},setCompareResult(e){this.compareResult=e},setOutline(e){this.outlines=e},setActiveOutlineId(e){this.activeOutlineId=e},setSearchResults(e){this.searchResults=e},setActiveSearchResult(e){this.activeSearchResult=e},setDocEditorOperationList(e){e==="reset"?this.docEditorOperationList=[]:e&&this.docEditorOperationList.push(e)},setSelectedSignature(e){this.selectedSignature=e},initSignatures(e){this.signatures=e.filter(n=>n.signerList.length>0)},setPkcs12(e){this.pkcs12=e},setTrustedCertificateLists(e){this.trustedCertificateLists.push(e)},setAuthor(e){this.author=e},setAnnotator(e){this.annotator=e,core.setAnnotator(e)},setHighlightLink(e){this.highlightLink=e,core.setHighlightLink(e)},setHighlightForm(e){this.highlightForm=e,core.setHighlightForm(e)},dispatch(e){return this[e]},getState(e){return e?this.$state[e]:this.$state},setRedactionPrompted(e){this.redactionPrompted=e},setAutoJumpNextSign(e){this.autoJumpNextSign=e,core.setAutoJumpNextSign(e)},setDisableDigitalSignature(e){this.disableDigitalSignature=e},setDisableElectronicSignature(e){this.disableElectronicSignature=e},setLayers(e){this.layers=e},setSelectedLayer(e){this.selectedLayer=e},setFirstEnterRedactionTool(e){this.firstEnterRedactionTool=e}}}),MessageError=""+new URL("icon-message-error.c91684dd.svg",import.meta.url).href,uploadFile=e=>new Promise((n,r)=>{const o=document.createElement("input");o.type="file",o.style.display="none",o.accept=e,o.onchange=()=>{o.files&&(n(o.files[0]),o.remove())},document.body.appendChild(o),o.click()}),hslToRgb=(e,n,r)=>{let o,u,s;if(n===0)o=u=s=r;else{const w=function(m,d,f){return f<0&&(f+=1),f>1&&(f-=1),f<.16666666666666666?m+(d-m)*6*f:f<.5?d:f<.6666666666666666?m+(d-m)*(.6666666666666666-f)*6:m},g=r<.5?r*(1+n):r+n-r*n,v=2*r-g;o=Math.round(w(v,g,e+1/3)*255),u=Math.round(w(v,g,e)*255),s=Math.round(w(v,g,e-1/3)*255)}return{R:o,G:u,B:s}},convertColor=e=>{if(!e)return null;if(e.startsWith("#")){const n=e.slice(1).match(/.{2}/g);if(n)return{R:parseInt(n[0],16),G:parseInt(n[1],16),B:parseInt(n[2],16)}}if(e.startsWith("rgb")){const n=e.match(/\d+/g);if(n&&n.length===3)return{R:parseInt(n[0]),G:parseInt(n[1]),B:parseInt(n[2])}}if(e.startsWith("hsl")){const n=e.match(/(\d+),\s*(\d+%),\s*(\d+%)/);if(n){const[r,o,u]=[parseInt(n[1]),parseInt(n[2])/100,parseInt(n[3])/100],{R:s,G:w,B:g}=hslToRgb(r/360,o,u);return{R:s,G:w,B:g}}}},areColorsSimilar=(e,n,r=10)=>{const o=convertColor(e),u=convertColor(n);if(!o||!u)return!1;const s=Math.abs(o.R-u.R),w=Math.abs(o.G-u.G),g=Math.abs(o.B-u.B);return s<=r&&w<=r&&g<=r},_sfc_main$48={},_hoisted_1$3N={width:"112",height:"112",viewBox:"0 0 112 112",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3z=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M27.2 22.4002C27.2 20.6329 28.6327 19.2002 30.4 19.2002H68.8L81.6 32.0002V88.0002C81.6 89.7675 80.1673 91.2002 78.4 91.2002H30.4C28.6327 91.2002 27.2 89.7675 27.2 88.0002V22.4002Z",fill:"#F5F6FA"},null,-1),_hoisted_3$3e=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M68.8 19.2002L81.6 32.0002H72C70.2327 32.0002 68.8 30.5675 68.8 28.8002V19.2002Z",fill:"#E2E3E6"},null,-1),_hoisted_4$1d=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M34.4 36.7998C33.9582 36.7998 33.6 37.158 33.6 37.5998V41.5998C33.6 42.0416 33.9582 42.3998 34.4 42.3998H74.4C74.8418 42.3998 75.2 42.0416 75.2 41.5998V37.5998C75.2 37.158 74.8418 36.7998 74.4 36.7998H34.4ZM34.4 47.2C33.9582 47.2 33.6 47.5582 33.6 48V52C33.6 52.4418 33.9582 52.8 34.4 52.8H74.4C74.8418 52.8 75.2 52.4418 75.2 52V48C75.2 47.5582 74.8418 47.2 74.4 47.2H34.4ZM33.6 58.4C33.6 57.9582 33.9582 57.6 34.4 57.6H74.4C74.8418 57.6 75.2 57.9582 75.2 58.4V62.4C75.2 62.8418 74.8418 63.2 74.4 63.2H34.4C33.9582 63.2 33.6 62.8418 33.6 62.4V58.4ZM34.4 68C33.9582 68 33.6 68.3582 33.6 68.8V72.8C33.6 73.2418 33.9582 73.6 34.4 73.6H55.2C55.6418 73.6 56 73.2418 56 72.8V68.8C56 68.3582 55.6418 68 55.2 68H34.4Z",fill:"#E2E3E6"},null,-1),_hoisted_5$P=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M77.6 67.2002C74.2863 67.2002 71.6 69.8865 71.6 73.2002C71.6 75.4018 72.7857 77.3264 74.5534 78.3703C74.7147 78.8387 74.8174 79.3262 74.8174 79.8082C74.8174 82.0522 72.5913 82.263 72.5913 82.263L67.2 82.2631C65.4327 82.2631 64 83.6958 64 85.4631V89.6002H91.2V85.4631C91.2 83.6958 89.7673 82.2631 88 82.2631L82.6087 82.263C82.6087 82.263 80.3826 82.0522 80.3826 79.8082C80.3826 79.3262 80.4853 78.8387 80.6466 78.3703C82.4143 77.3264 83.6 75.4018 83.6 73.2002C83.6 69.8865 80.9137 67.2002 77.6 67.2002ZM64 93.6002V91.2002H91.2V93.6002C91.2 94.042 90.8418 94.4002 90.4 94.4002H64.8C64.3582 94.4002 64 94.042 64 93.6002Z",fill:"#273C62","fill-opacity":"0.6"},null,-1),_hoisted_6$B=[_hoisted_2$3z,_hoisted_3$3e,_hoisted_4$1d,_hoisted_5$P];function _sfc_render$2x(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3N,_hoisted_6$B)}const __unplugin_components_1$d=_export_sfc(_sfc_main$48,[["render",_sfc_render$2x]]),SignCreatePanel_vue_vue_type_style_index_0_lang="",_hoisted_1$3M={class:"signatures-popup-wrapper"},_hoisted_2$3y={class:"signatures-popup"},_hoisted_3$3d={class:"sign-title"},_hoisted_4$1c={class:"sign-content"},_hoisted_5$O={class:"sign-popup-header"},_hoisted_6$A={class:"signatures-popup-lists"},_hoisted_7$t={key:0,class:"signatures-popup-empty"},_hoisted_8$o={class:"no-signatures"},_hoisted_9$m={key:1,class:"signatures-popup-list-container"},_hoisted_10$n=["onClick"],_hoisted_11$j=["src"],_hoisted_12$i={class:"signatures-popup-create"},_hoisted_13$i={class:"create-sign-header"},_hoisted_14$i=["onClick"],_hoisted_15$i=["width","height"],_hoisted_16$h={class:"keyboard-paint"},_hoisted_17$g=["placeholder"],_hoisted_18$f={key:0,class:"property-container"},_hoisted_19$f={class:"width-tool"},_hoisted_20$f={key:0},_hoisted_21$e={class:"font-tool"},_hoisted_22$e={key:0},_hoisted_23$d=["value"],_hoisted_24$d={class:"color-tool"},_hoisted_25$c={key:0},_hoisted_26$b={class:"colors-container"},_hoisted_27$a=["onClick"],_hoisted_28$a={key:0,class:"color-picker"},_hoisted_29$8=createBaseVNode("img",{src:_imports_0$2,alt:"colorPicker"},null,-1),_hoisted_30$8={class:"footer"},_hoisted_31$8={class:"clear-container"},_hoisted_32$6={class:"left-btns"},_hoisted_33$5={key:0},_hoisted_34$5={key:1},_hoisted_35$5={class:"buttons-container"},_hoisted_36$5={class:"right-btns"},_hoisted_37$5={key:0,class:"delete-page-popup"},_sfc_main$47={__name:"SignCreatePanel",setup(e){const n=getCurrentInstance().appContext.app.config.globalProperties,r=useViewerStore(),o=useDocumentStore(),u=computed(()=>r.isElementOpen("signCreatePanel")),s=computed(()=>r.getActiveElementTab("signPanel")),w=computed(()=>r.getToolMode),g=computed(()=>r.getSignatureDialogTabs),v=computed(()=>r.getSignatureDialogProperties),y=computed(()=>o.getDisableDigitalSignature),m=computed(()=>o.getDisableElectronicSignature),d=computed(()=>r.getElectronicSignaturesList),f=computed(()=>r.getThemeMode),x=computed(()=>o.getActiveTool),k=ref(!1),P=ref(0),S=ref(""),E=ref(""),M=ref(v.value.trackpad.lineWidth||5),T=ref(v.value[s.value].colors[0].value||"#000000"),D=ref(v.value.keyboard.fonts[0]||"Courier New"),I=ref(),N=ref(isMobile?289:578),O=ref(270),F=ref("rgb(0, 0, 0)"),U=ref("create"),Y=ref(!0);d.value.length>=5&&(Y.value=!1);const Q=(Ce,Pe)=>{Ce.stopPropagation(),k.value=!0,P.value=Pe},q=()=>{r.removeElectronicSignature(P.value),k.value=!1};watch(()=>v.value.keyboard.fonts,(Ce,Pe)=>{D.value=Ce[0]||"Courier New"}),watch(()=>w.value,(Ce,Pe)=>{if(!(Pe==="sign"&&Ce==="view")&&Ce!==Pe){const Me=document.getElementById("sign-image-save");Me&&Me.remove()}}),watch(()=>M.value,(Ce,Pe)=>{const Me=/^\d+$/;Ce!==""&&(Ce>10||Ce<=0||!Me.test(Ce))&&(M.value=Pe),s.value==="trackpad"&&core.handleSign({flag:"update",param:{width:M.value,color:T.value}})}),watch(()=>T.value,(Ce,Pe)=>{if(core.handleSign({flag:"update",param:{width:M.value,color:T.value}}),s.value==="keyboard"){F.value=T.value;let Me=document.querySelector(".keyboard-paint input");Me&&(Me.style.color=T.value)}}),watch(()=>u.value,(Ce,Pe)=>{Ce&&(isMobile&&nextTick(()=>{const{clientWidth:Me,clientHeight:Le}=I.value;Me&&N.value!==Me&&(N.value=Me),Le&&O.value!==Le&&(O.value=Le)}),r.setActiveSignWay("keyboard"),S.value="",core.handleSign({flag:"create"}))}),watch(()=>U.value,(Ce,Pe)=>{Ce==="create"&&isMobile&&nextTick(()=>{const{clientWidth:Me,clientHeight:Le}=I.value;Me&&N.value!==Me&&(N.value=Me),Le&&O.value!==Le&&(O.value=Le)})}),watch(()=>d.value,Ce=>{Ce&&Ce.length>=5?Y.value=!1:Y.value||(Y.value=!0)},{deep:!0}),watch(()=>u.value,Ce=>{Ce&&d.value.length>0?U.value="list":Ce&&d.value.length===0&&(U.value="create")}),watch(()=>s.value,(Ce,Pe)=>{Pe==="trackpad"&&core.handleSign({flag:"clear"}),S.value="",E.value=""});const ne=Ce=>{s.value!==Ce&&(r.setActiveSignWay(Ce),re(),X())},J=Ce=>{r.toggleElement("signCreatePanel"),core.handleSign({flag:"reset"}),s.value!=="trackpad"&&re(),X(),document.body.style.overflow="",Ce==="cancel"&&y.value&&m.value&&r.openElement("selectSignTypeDialog")},re=()=>{if(s.value==="keyboard"&&(S.value=""),s.value==="image"){E.value="";let Ce=document.querySelector(".image-paint"),Pe=document.querySelector(".image-paint input"),Me=document.querySelector(".image-paint a"),Le=document.querySelector(".image-paint img");Ce&&(Le&&(Ce.removeChild(Le),Pe.value=""),Me&&(Me.style.display="block"))}s.value==="trackpad"&&core.handleSign({flag:"clear"})},X=()=>{const Ce=v.value.trackpad.lineWidth||5,Pe=["trackpad","keyboard"].includes(s.value)&&v.value[s.value].colors[0].value||"#000000",Me=v.value.keyboard.fonts[0]||"Courier New";T.value!==Pe&&(T.value=Pe),D.value!==Me&&(D.value=Me),M.value!==Ce&&(M.value=Ce,core.handleSign({flag:"update",param:{width:M.value,color:T.value}}))},j=Ce=>{Ce.preventDefault(),Ce.stopPropagation();let Pe=Ce.dataTransfer.files[0];W(Pe)},Z=Ce=>{let Pe=Ce.target.files[0];if(Pe.size>1024*1024){window.$message.error(n.$t("signatures.uploadError"),{duration:5e3,icon:()=>h$1("img",{src:MessageError})}),Ce.target.value="";return}W(Pe)},W=Ce=>{w.value==="annotation"&&(o.setToolState("image"),core.handleCreateStatus({bool:!0,fileData:Ce}));const Pe=new FileReader;Pe.readAsDataURL(Ce),Pe.onload=function(){E.value=Pe.result;let Me=document.querySelector(".image-paint"),Le=document.querySelector(".image-paint a");if(Me){let Te=document.createElement("img");Te.setAttribute("src",E.value),Te.style.maxHeight=220+"px",Te.style.maxWidth=568+"px",Le.style.display="none",Me.append(Te)}if(x.value==="image"){const Te=new Image;Te.onload=function(){le()},Te.src=E.value}}},te=Ce=>{w.value==="annotation"&&o.setToolState("image")},le=async()=>{let Ce="",Pe=0,Me=0;const Le=r.getSelectedSignatureField;if((s.value==="image"&&E.value!==""||E.value!=="")&&(Ce=E.value),s.value==="keyboard"&&S.value!==""){let ye=document.createElement("canvas"),_e=document.createElement("canvas"),we=ye.getContext("2d");we.font="46px "+D.value;let Se=we.measureText(S.value).width;_e.width=Se,_e.height=60,we=_e.getContext("2d"),we.font="46px "+D.value,we.fillStyle=T.value,we.fillText(S.value,0,50),Pe=Se,Me=60,Ce=_e.toDataURL()}Ce&&s.value!=="trackpad"&&(core.handleSign({flag:"save",param:{imageBase64:Ce,annotation:toRaw(Le)}}),d.value.length<5&&Y.value&&r.addElectronicSignature(Ce));let Te=document.querySelector(".content");if(Te&&x.value==="image"){let ye=document.getElementById("sign-image-save");ye||(ye=document.createElement("img"),ye.style.position="absolute",ye.style.zIndex=10,ye.style.pointerEvents="none",ye.style.maxHeight="220px",ye.style.maxWidth="568px",ye.style.border="2px solid blue",ye.style.cursor="crosshair",ye.id="sign-image-save"),ye.setAttribute("src",Ce),ye.style.left="50%",ye.style.top="50%",ye.style.display="hidden",Te.append(ye),ye.offsetWidth>0&&ye.offsetHeight>0&&(Pe=ye.offsetWidth,Me=ye.offsetHeight);let _e=Math.min(parseInt(Pe/2),568/2),we=Math.min(parseInt(Me/2),220/2);ye.style.left="calc(50% -"+_e+")",ye.style.top="calc(50% -"+we+")",ye.style.display="block",Te.onmousemove=function(Se){ye.style.left=Se.clientX-_e+"px",ye.style.top=Se.clientY-we+"px"};return}if(s.value==="trackpad"){const ye=await core.handleSign({flag:"save",param:{width:M.value,color:T.value,annotation:toRaw(Le)}});d.value.length<5&&Y.value&&r.addElectronicSignature(ye)}J()},oe=Ce=>{const Pe=r.getSelectedSignatureField;Pe&&core.handleSign({flag:"save",param:{imageBase64:Ce,annotation:toRaw(Pe)}}),r.toggleElement("signCreatePanel")},Ee=Ce=>{Ce.target.value||(M.value=1)},Ae=Ce=>{T.value=Ce},ve=Ce=>{areColorsSimilar(Ce,T.value)||Ae(Ce)},ke=Ce=>{F.value=Ce};return core.addEvent("signaturesImageChanged",Ce=>{E.value=Ce.imageBase64}),(Ce,Pe)=>{const Me=__unplugin_components_14$3,Le=__unplugin_components_2$e,Te=_sfc_main$4l,ye=__unplugin_components_3$e,_e=__unplugin_components_1$e,we=__unplugin_components_1$f,Se=__unplugin_components_2$f,$e=_sfc_main$4e;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$3M,[createBaseVNode("div",_hoisted_2$3y,[createBaseVNode("div",_hoisted_3$3d,toDisplayString$1(Ce.$t("signatures.title")),1),createBaseVNode("div",{onClick:Pe[0]||(Pe[0]=Be=>J("cancel")),class:"close-button"},[createVNode(Me)]),createBaseVNode("div",_hoisted_4$1c,[createBaseVNode("div",_hoisted_5$O,[createBaseVNode("div",{onClick:Pe[1]||(Pe[1]=Be=>U.value="list"),class:normalizeClass({active:U.value==="list"})},toDisplayString$1(Ce.$t("signatures.mySignatures")),3),createBaseVNode("div",{onClick:Pe[2]||(Pe[2]=Be=>U.value="create"),class:normalizeClass({active:U.value==="create"})},toDisplayString$1(Ce.$t("signatures.createSignature")),3)]),withDirectives(createBaseVNode("div",_hoisted_6$A,[d.value.length===0?(openBlock(),createElementBlock("div",_hoisted_7$t,[createBaseVNode("div",_hoisted_8$o,[f.value==="Light"?(openBlock(),createBlock(__unplugin_components_1$d,{key:0})):(openBlock(),createBlock(Le,{key:1})),createBaseVNode("div",{onClick:Pe[3]||(Pe[3]=Be=>U.value="create")},toDisplayString$1(Ce.$t("signatures.noSignatures")),1)])])):(openBlock(),createElementBlock("div",_hoisted_9$m,[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value,(Be,Oe)=>(openBlock(),createElementBlock("div",{class:"signatures-popup-list",onClick:Ge=>oe(Be),key:Oe},[createBaseVNode("img",{src:Be},null,8,_hoisted_11$j),createVNode(Te,{class:"close-button",onClick:Ge=>Q(Ge,Oe)},{default:withCtx(()=>[createVNode(Me)]),_:2},1032,["onClick"])],8,_hoisted_10$n))),128))]))],512),[[vShow,U.value==="list"]]),withDirectives(createBaseVNode("div",_hoisted_12$i,[createBaseVNode("div",_hoisted_13$i,[(openBlock(!0),createElementBlock(Fragment,null,renderList(g.value,(Be,Oe)=>(openBlock(),createElementBlock("div",{key:Oe,onClick:Ge=>ne(Be),class:normalizeClass({active:s.value===Be})},toDisplayString$1(Ce.$t("signatures."+Be)),11,_hoisted_14$i))),128))]),createBaseVNode("div",{class:normalizeClass(["sign-create-container",{mobile:unref(isMobile)}])},[createBaseVNode("div",{class:"paint-container",ref_key:"paintContainer",ref:I},[withDirectives(createBaseVNode("canvas",{id:"electronicTrackpadCanvas",width:N.value,height:O.value},null,8,_hoisted_15$i),[[vShow,s.value==="trackpad"]]),withDirectives(createBaseVNode("div",_hoisted_16$h,[withDirectives(createBaseVNode("input",{type:"text",placeholder:Ce.$t("signatures.signHere"),"onUpdate:modelValue":Pe[4]||(Pe[4]=Be=>S.value=Be),name:"signature",style:normalizeStyle({fontFamily:D.value})},null,12,_hoisted_17$g),[[vModelText,S.value]])],512),[[vShow,s.value==="keyboard"]]),withDirectives(createBaseVNode("div",{class:"image-paint",onDrop:j,onDragover:Pe[5]||(Pe[5]=withModifiers(()=>{},["prevent"]))},[withDirectives(createBaseVNode("div",null,[createVNode(ye),createBaseVNode("div",null,toDisplayString$1(Ce.$t("signatures.dropFile")),1),createBaseVNode("a",null,[createTextVNode(toDisplayString$1(Ce.$t("signatures.selectFile")),1),createBaseVNode("input",{type:"file",id:"signImageInput",onChange:Z,accept:".png, .jpg, .jpeg",onClick:te,name:"signature"},null,32)])],512),[[vShow,!E.value]])],544),[[vShow,s.value==="image"]])],512),["trackpad","keyboard"].includes(s.value)?(openBlock(),createElementBlock("div",_hoisted_18$f,[withDirectives(createBaseVNode("div",_hoisted_19$f,[unref(isMobile)?createCommentVNode("",!0):(openBlock(),createElementBlock("span",_hoisted_20$f,toDisplayString$1(Ce.$t("signatures.lineWidth")),1)),createVNode(unref(NSlider),{value:M.value,"onUpdate:value":Pe[6]||(Pe[6]=Be=>M.value=Be),step:1,max:10,min:1,class:"width-slider"},{thumb:withCtx(()=>[createVNode(_e)]),_:1},8,["value"]),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":Pe[7]||(Pe[7]=Be=>M.value=Be),type:"text",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onBlur:Ee,name:"signature"},null,544),[[vModelText,M.value]])],512),[[vShow,s.value==="trackpad"&&v.value.trackpad.enableLineWidth]]),withDirectives(createBaseVNode("div",_hoisted_21$e,[unref(isMobile)?createCommentVNode("",!0):(openBlock(),createElementBlock("span",_hoisted_22$e,toDisplayString$1(Ce.$t("font")),1)),withDirectives(createBaseVNode("select",{id:"fontFamily","onUpdate:modelValue":Pe[8]||(Pe[8]=Be=>D.value=Be)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(v.value.keyboard.fonts,(Be,Oe)=>(openBlock(),createElementBlock("option",{value:Be,key:Oe},toDisplayString$1(Be),9,_hoisted_23$d))),128))],512),[[vModelSelect,D.value]])],512),[[vShow,s.value==="keyboard"]]),withDirectives(createBaseVNode("div",_hoisted_24$d,[unref(isMobile)?createCommentVNode("",!0):(openBlock(),createElementBlock("span",_hoisted_25$c,toDisplayString$1(Ce.$t("color")),1)),createBaseVNode("div",_hoisted_26$b,[(openBlock(!0),createElementBlock(Fragment,null,renderList(v.value[s.value].colors,(Be,Oe)=>(openBlock(),createElementBlock("span",{class:"cell-container",key:Oe},[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(T.value,Be.value)}]),onClick:Ge=>Ae(Be.value)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Be.value}`)},null,4)],10,_hoisted_27$a)]))),128)),v.value[s.value].enableCustomColor?(openBlock(),createElementBlock("div",_hoisted_28$a,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:F.value})},null,4),createVNode(unref(NColorPicker),{to:".signatures-popup",onComplete:ve,"onUpdate:value":ke,value:F.value,"show-alpha":!1},{label:withCtx(()=>[_hoisted_29$8]),_:1},8,["value"])])):createCommentVNode("",!0)])],512),[[vShow,s.value==="trackpad"||s.value==="keyboard"]])])):createCommentVNode("",!0)],2),createBaseVNode("div",_hoisted_30$8,[createBaseVNode("div",_hoisted_31$8,[createBaseVNode("span",{class:"clear top",onClick:re},toDisplayString$1(Ce.$t("signatures.clear")),1),createBaseVNode("div",_hoisted_32$6,[createBaseVNode("div",{class:normalizeClass(["check",{active:Y.value,disabled:d.value.length>=5}]),onClick:Pe[9]||(Pe[9]=Be=>d.value.length<5&&(Y.value=!Y.value))},[withDirectives(createVNode(we,null,null,512),[[vShow,Y.value]])],2),d.value.length<5?(openBlock(),createElementBlock("span",_hoisted_33$5,toDisplayString$1(Ce.$t("signatures.saveSignature")),1)):(openBlock(),createElementBlock("span",_hoisted_34$5,toDisplayString$1(Ce.$t("signatures.full")),1))])]),createBaseVNode("div",_hoisted_35$5,[createBaseVNode("span",{class:"clear bottom",onClick:re},toDisplayString$1(Ce.$t("signatures.clear")),1),createBaseVNode("div",_hoisted_36$5,[createBaseVNode("div",{class:"button",onClick:Pe[10]||(Pe[10]=Be=>J("cancel"))},toDisplayString$1(Ce.$t("cancel")),1),createBaseVNode("div",{class:normalizeClass(["button blue",{disabled:!S.value&&!E.value}]),onClick:le},toDisplayString$1(Ce.$t("signatures.apply")),3)])])])],512),[[vShow,U.value==="create"]])])])]),k.value?(openBlock(),createElementBlock("div",_hoisted_37$5,[createVNode($e,{show:k.value,dialogName:Ce.dialogName},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:Pe[11]||(Pe[11]=Be=>k.value=!1)},toDisplayString$1(Ce.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:q},toDisplayString$1(Ce.$t("ok")),1)]),default:withCtx(()=>[createVNode(Se),createBaseVNode("p",null,toDisplayString$1(Ce.$t("signatures.deleteConfirm")),1)]),_:1},8,["show","dialogName"])])):createCommentVNode("",!0)],64)}}},_sfc_main$46={},_hoisted_1$3L={width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3x=createBaseVNode("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:"#FF5050",stroke:"#FF5050","stroke-linejoin":"round"},null,-1),_hoisted_3$3c=createBaseVNode("path",{d:"M30 18L18 30",stroke:"white","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_4$1b=createBaseVNode("path",{d:"M18 18L30 30",stroke:"white","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_5$N=[_hoisted_2$3x,_hoisted_3$3c,_hoisted_4$1b];function _sfc_render$2w(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3L,_hoisted_5$N)}const __unplugin_components_16$1=_export_sfc(_sfc_main$46,[["render",_sfc_render$2w]]),_sfc_main$45={},_hoisted_1$3K={width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3w=createStaticVNode('<circle cx="47.0455" cy="16.3636" r="2.04545" fill="white"></circle><circle cx="53.1819" cy="32.0454" r="2.72727" fill="white"></circle><circle cx="47.0453" cy="47.0456" r="3.40909" fill="white"></circle><circle cx="31.3639" cy="53.8636" r="4.09091" fill="white"></circle><circle cx="15.6819" cy="47.7273" r="4.77273" fill="white"></circle><circle cx="9.54537" cy="32.0454" r="5.45455" fill="white"></circle><circle cx="15.6818" cy="17.0455" r="6.13636" fill="white"></circle><circle cx="31.3636" cy="9.54548" r="6.81818" fill="white"></circle>',8),_hoisted_10$m=[_hoisted_2$3w];function _sfc_render$2v(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3K,_hoisted_10$m)}const __unplugin_components_13$1=_export_sfc(_sfc_main$45,[["render",_sfc_render$2v]]),FreetextColorContainer_vue_vue_type_style_index_0_scoped_77b9368c_lang="",_withScopeId$1=e=>(pushScopeId("data-v-77b9368c"),e=e(),popScopeId(),e),_hoisted_1$3J={class:"colors-container"},_hoisted_2$3v={key:0,class:"cell-container"},_hoisted_3$3b=["onClick"],_hoisted_4$1a={class:"color-picker"},_hoisted_5$M=_withScopeId$1(()=>createBaseVNode("img",{src:_imports_0$2,alt:"colorPicker"},null,-1)),_sfc_main$44={__name:"FreetextColorContainer",props:{propertyColor:{type:String},colors:{type:Array,default:()=>[]},noColor:{type:Boolean,default:!1}},emits:["setActiveColor"],setup(e,{emit:n}){const{propertyColor:r}=e,o=n,u=ref("rgb(0, 0, 0)"),s=v=>{o("setActiveColor",v)},w=v=>{areColorsSimilar(v,r)||s(v)},g=v=>{u.value=v};return(v,y)=>{const m=__unplugin_components_0$x;return openBlock(),createElementBlock("div",_hoisted_1$3J,[e.noColor?(openBlock(),createElementBlock("span",_hoisted_2$3v,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:!e.propertyColor}]),onClick:y[0]||(y[0]=d=>s(""))},[createVNode(m)],2)])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.colors,(d,f)=>(openBlock(),createElementBlock("span",{class:"cell-container",key:f},[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,d)}]),onClick:x=>s(d)},[createBaseVNode("span",{class:"cell",style:normalizeStyle({backgroundColor:d})},null,4)],10,_hoisted_3$3b)]))),128)),createBaseVNode("div",_hoisted_4$1a,[createBaseVNode("div",{class:normalizeClass(["preview-container",{active:e.propertyColor===u.value}])},[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:u.value})},null,4)],2),createVNode(unref(NColorPicker),{to:".freetext-panel",onComplete:w,"onUpdate:value":g,value:u.value,"show-alpha":!1},{label:withCtx(()=>[_hoisted_5$M]),_:1},8,["value"])])])}}},__unplugin_components_5$9=_export_sfc(_sfc_main$44,[["__scopeId","data-v-77b9368c"]]),FreetextPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$3I={class:"sidebar-title"},_hoisted_2$3u={class:"edit-container"},_hoisted_3$3a={class:"text"},_hoisted_4$19={class:"text-title subtitle"},_hoisted_5$L={class:"content-block"},_hoisted_6$z={class:"text-align"},_hoisted_7$s={class:"border"},_hoisted_8$n={class:"border"},_hoisted_9$l={class:"color"},_hoisted_10$l={class:"color-title subtitle"},_hoisted_11$i={class:"border-width"},_hoisted_12$h={class:"subtitle"},_hoisted_13$h={class:"tool slider"},_hoisted_14$h={class:"color"},_hoisted_15$h={class:"color-title subtitle"},_hoisted_16$g={class:"color"},_hoisted_17$f={class:"color-title subtitle"},_hoisted_18$e={class:"border-text-opacity"},_hoisted_19$e={class:"subtitle"},_hoisted_20$e={class:"tool slider"},_sfc_main$43={__name:"FreetextPanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("freetextPanel")),o=computed(()=>n.getCustomFonts),s=getCurrentInstance().appContext.app.config.globalProperties.$t,w=["rgb(0, 0, 0)","rgb(255, 0, 0)","rgb(255, 236, 102)","rgb(45, 119, 250)"],g=["rgb(0, 0, 0)","rgb(255, 0, 0)","rgb(255, 236, 102)"];let v=null,y=reactive({fontName:"Helvetica",fontStyle:"regular",fontSize:14,textAlignment:"left",color:"rgb(0, 0, 0)",borderWidth:0,borderColor:"rgb(0, 0, 0)",opacity:100,fillColor:""});const m={fontName:"Helvetica",fontStyle:"regular",fontSize:14,textAlignment:"left",color:"rgb(0, 0, 0)",borderWidth:0,borderColor:"rgb(0, 0, 0)",opacity:100,fillColor:""};let d=ref(`${y.borderWidth} pt`),f=ref(`${y.opacity}%`);const k=[2,4,6,8,10].map(j=>({label:`${j} pt`,value:`${j} pt`})),P=j=>{const Z=j.fontFamily;n.setCustomFonts(Z)};core.addEvent("LoadFont",P),watch(()=>o.value,(j,Z)=>{E.value=S(j)},{deep:!0});const S=j=>{if(j.length)return j.map(Z=>({label:Z.fontFamily,value:Z.fontName}))},E=ref([]);E.value=S(o.value);const M=computed(()=>[{label:s("regular"),value:"normal"},{label:s("bold"),value:"bold"},{label:s("boldOblique"),value:"boldOblique"},{label:s("oblique"),value:"oblique"}]),T=[{label:"25%",value:25},{label:"50%",value:50},{label:"75%",value:75},{label:"100%",value:100}],D=[6,8,10,12,14,16,20,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72],I=D.map(j=>({label:`${j} pt`,value:j}));watch(()=>r.value,(j,Z)=>{j&&n.closeElement("pageModePanel")});const N=()=>{re({borderWidth:y.borderWidth})},O=()=>{re({opacity:y.opacity/100})};watch(()=>y.fontName,(j,Z)=>{re({fontName:j})}),watch(()=>y.fontStyle,(j,Z)=>{const W=/bold/i.test(j)?"bold":"normal",te=/(oblique|italic)/i.test(j)?"oblique":"normal";re({fontStyle:te,fontWeight:W})}),watch(()=>y.borderWidth,(j,Z)=>{d.value=j+" pt"}),watch(()=>y.opacity,(j,Z)=>{f.value=j+"%"}),watch(()=>y.fontSize,(j,Z)=>{typeof j=="number"&&re({fontSize:y.fontSize})});const F=(j,Z)=>{y[j]=Z,re({[j]:Z})},U=()=>{y.borderWidth=Number.parseInt(d.value),re({borderWidth:y.borderWidth})},Y=()=>{y.opacity=Number.parseInt(f.value),re({opacity:y.opacity/100})},Q=j=>{y.textAlignment=j,re({textAlignment:y.textAlignment})},q=j=>{const Z=j.annotation;for(const W in Z){if(W==="fontStyle"||W==="fontWeight"){const te=Z.fontWeight||"normal",le=Z.fontStyle||"normal";te==="bold"&&le==="oblique"?y.fontStyle="boldOblique":te==="bold"?y.fontStyle="bold":le==="oblique"?y.fontStyle="oblique":y.fontStyle="normal";continue}for(const te in y)if(W===te){if(W==="fontSize"&&!D.includes(Z.fontSize)){y.fontSize=Z.fontSize+" pt";continue}if(W==="opacity"){y.opacity=Z.opacity*100;continue}y[te]=Z[W]}}},ne=j=>{const{annotation:Z}=j;v&&v.annotation.name===Z.name&&q(j)},J=j=>{q(j),v=j};core.addEvent("annotationChanged",ne),core.addEvent("annotationSelectedAttr",J),core.addEvent("annotationDeselected",()=>{v=null,Object.keys(m).forEach(j=>{y[j]=m[j]}),X()});const re=j=>{v?core.setAnnotationStyles(v,j):(Object.keys(j).forEach(Z=>{m[Z]=j[Z]}),core.setFreetextDefault(j))},X=()=>{n.closeElement("freetextPanel")};return(j,Z)=>{const W=__unplugin_components_14$3,te=__unplugin_components_0$z,le=__unplugin_components_6$a,oe=__unplugin_components_4$e,Ee=__unplugin_components_7$9,Ae=__unplugin_components_5$9,ve=__unplugin_components_1$e;return openBlock(),createElementBlock("div",{class:normalizeClass(["freetext-panel property-panel",{closed:!r.value,mobile:unref(isMobileDevice)}]),style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 88px)"})},[createBaseVNode("div",_hoisted_1$3I,[createTextVNode(toDisplayString$1(unref(s)("freetextPanel.title"))+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(W,{key:0,class:"close-button",onClick:X})):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_2$3u,[createBaseVNode("div",_hoisted_3$3a,[createBaseVNode("div",_hoisted_4$19,toDisplayString$1(unref(s)("freetextPanel.fontStyle")),1),createVNode(unref(NSelect),{value:unref(y).fontName,"onUpdate:value":Z[0]||(Z[0]=ke=>unref(y).fontName=ke),options:E.value,to:".freetext-panel",class:"text-family"},{arrow:withCtx(()=>[createVNode(te)]),_:1},8,["value","options"]),createBaseVNode("div",_hoisted_5$L,[createVNode(unref(NSelect),{value:unref(y).fontStyle,"onUpdate:value":Z[1]||(Z[1]=ke=>unref(y).fontStyle=ke),options:M.value,to:".freetext-panel",class:"font-style-select"},{arrow:withCtx(()=>[createVNode(te)]),_:1},8,["value","options"]),createVNode(unref(NSelect),{value:unref(y).fontSize,"onUpdate:value":Z[2]||(Z[2]=ke=>unref(y).fontSize=ke),options:unref(I),to:".freetext-panel",class:"font-size-select"},{arrow:withCtx(()=>[createVNode(te)]),_:1},8,["value","options"])])]),createBaseVNode("div",_hoisted_6$z,[createBaseVNode("div",{class:normalizeClass({active:unref(y).textAlignment==="left"}),onClick:Z[3]||(Z[3]=ke=>Q("left"))},[createBaseVNode("span",_hoisted_7$s,[createVNode(le)])],2),createBaseVNode("div",{class:normalizeClass({active:unref(y).textAlignment==="center"}),onClick:Z[4]||(Z[4]=ke=>Q("center"))},[createBaseVNode("span",_hoisted_8$n,[createVNode(oe)])],2),createBaseVNode("div",{class:normalizeClass({active:unref(y).textAlignment==="right"}),onClick:Z[5]||(Z[5]=ke=>Q("right"))},[createBaseVNode("span",null,[createVNode(Ee)])],2)]),createBaseVNode("div",_hoisted_9$l,[createBaseVNode("div",_hoisted_10$l,toDisplayString$1(unref(s)("freetextPanel.fontColor")),1),createVNode(Ae,{colors:w,propertyColor:unref(y).color,onSetActiveColor:Z[6]||(Z[6]=ke=>F("color",ke))},null,8,["propertyColor"])]),createBaseVNode("div",_hoisted_11$i,[createBaseVNode("div",_hoisted_12$h,toDisplayString$1(unref(s)("freetextPanel.borderWidth")),1),createBaseVNode("div",_hoisted_13$h,[createVNode(unref(NSlider),{value:unref(y).borderWidth,"onUpdate:value":Z[7]||(Z[7]=ke=>unref(y).borderWidth=ke),tooltip:!1,step:1,max:10,min:0,class:"width-slider","on-dragend":N},{thumb:withCtx(()=>[createVNode(ve)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(d),"onUpdate:value":[Z[8]||(Z[8]=ke=>isRef(d)?d.value=ke:d=ke),U],options:unref(k),to:".freetext-panel"},{arrow:withCtx(()=>[createVNode(te)]),_:1},8,["value","options"])])]),createBaseVNode("div",_hoisted_14$h,[createBaseVNode("div",_hoisted_15$h,toDisplayString$1(unref(s)("freetextPanel.borderColor")),1),createVNode(Ae,{colors:w,propertyColor:unref(y).borderColor,onSetActiveColor:Z[9]||(Z[9]=ke=>F("borderColor",ke))},null,8,["propertyColor"])]),createBaseVNode("div",_hoisted_16$g,[createBaseVNode("div",_hoisted_17$f,toDisplayString$1(unref(s)("freetextPanel.fillColor")),1),createVNode(Ae,{colors:g,propertyColor:unref(y).fillColor,noColor:!0,onSetActiveColor:Z[10]||(Z[10]=ke=>F("fillColor",ke))},null,8,["propertyColor"])]),createBaseVNode("div",_hoisted_18$e,[createBaseVNode("div",_hoisted_19$e,toDisplayString$1(unref(s)("opacity")),1),createBaseVNode("div",_hoisted_20$e,[createVNode(unref(NSlider),{value:unref(y).opacity,"onUpdate:value":Z[11]||(Z[11]=ke=>unref(y).opacity=ke),tooltip:!1,step:1,max:100,min:1,class:"width-slider","on-dragend":O},{thumb:withCtx(()=>[createVNode(ve)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(f),"onUpdate:value":[Z[12]||(Z[12]=ke=>isRef(f)?f.value=ke:f=ke),Y],options:T,to:".freetext-panel"},{arrow:withCtx(()=>[createVNode(te)]),_:1},8,["value"])])])])],6)}}},ColorContainer_vue_vue_type_style_index_0_scoped_46da3324_lang="",_withScopeId=e=>(pushScopeId("data-v-46da3324"),e=e(),popScopeId(),e),_hoisted_1$3H={class:"colors-container"},_hoisted_2$3t={key:0,class:"cell-container"},_hoisted_3$39={key:1,class:"cell-container"},_hoisted_4$18=_withScopeId(()=>createBaseVNode("span",{class:"cell green"},null,-1)),_hoisted_5$K=[_hoisted_4$18],_hoisted_6$y={class:"cell-container"},_hoisted_7$r=_withScopeId(()=>createBaseVNode("span",{class:"cell red"},null,-1)),_hoisted_8$m=[_hoisted_7$r],_hoisted_9$k={class:"cell-container"},_hoisted_10$k=_withScopeId(()=>createBaseVNode("span",{class:"cell yellow"},null,-1)),_hoisted_11$h=[_hoisted_10$k],_hoisted_12$g={class:"cell-container"},_hoisted_13$g=_withScopeId(()=>createBaseVNode("span",{class:"cell blue"},null,-1)),_hoisted_14$g=[_hoisted_13$g],_hoisted_15$g={class:"cell-container"},_hoisted_16$f=_withScopeId(()=>createBaseVNode("span",{class:"cell",style:{background:"rgb(255, 246, 179)"}},null,-1)),_hoisted_17$e=[_hoisted_16$f],_hoisted_18$d={class:"cell-container"},_hoisted_19$d=_withScopeId(()=>createBaseVNode("span",{class:"cell",style:{background:"rgb(254, 191, 191)"}},null,-1)),_hoisted_20$d=[_hoisted_19$d],_hoisted_21$d={class:"cell-container"},_hoisted_22$d=_withScopeId(()=>createBaseVNode("span",{class:"cell",style:{background:"rgb(100, 188, 56)"}},null,-1)),_hoisted_23$c=[_hoisted_22$d],_hoisted_24$c={class:"color-picker"},_hoisted_25$b=_withScopeId(()=>createBaseVNode("img",{src:_imports_0$2,alt:"colorPicker"},null,-1)),_sfc_main$42={__name:"ColorContainer",props:{propertyColor:{type:String},noColor:{type:Boolean,default:!1}},emits:["setActiveColor"],setup(e,{emit:n}){const{propertyColor:r}=e,o=n,u=ref("rgb(0, 0, 0)"),s=v=>{o("setActiveColor",v)},w=v=>{areColorsSimilar(v,r)||s(v)},g=v=>{u.value=v};return(v,y)=>{const m=__unplugin_components_0$x;return openBlock(),createElementBlock("div",_hoisted_1$3H,[e.noColor?(openBlock(),createElementBlock("span",_hoisted_2$3t,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:!e.propertyColor}]),onClick:y[0]||(y[0]=d=>s(""))},[createVNode(m)],2)])):(openBlock(),createElementBlock("span",_hoisted_3$39,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(100, 188, 56)")}]),onClick:y[1]||(y[1]=d=>s("rgb(100, 188, 56)"))},_hoisted_5$K,2)])),createBaseVNode("span",_hoisted_6$y,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(255, 0, 0)")}]),onClick:y[2]||(y[2]=d=>s("rgb(255, 0, 0)"))},_hoisted_8$m,2)]),createBaseVNode("span",_hoisted_9$k,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(255, 236, 102)")}]),onClick:y[3]||(y[3]=d=>s("rgb(255, 236, 102)"))},_hoisted_11$h,2)]),createBaseVNode("span",_hoisted_12$g,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(45, 119, 250)")}]),onClick:y[4]||(y[4]=d=>s("rgb(45, 119, 250)"))},_hoisted_14$g,2)]),unref(isMobileDevice)?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("span",_hoisted_15$g,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(255, 246, 179)")}]),onClick:y[5]||(y[5]=d=>s("rgb(255, 246, 179)"))},_hoisted_17$e,2)]),createBaseVNode("span",_hoisted_18$d,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(254, 191, 191)")}]),onClick:y[6]||(y[6]=d=>s("rgb(254, 191, 191)"))},_hoisted_20$d,2)]),createBaseVNode("span",_hoisted_21$d,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(e.propertyColor,"rgb(100, 188, 56)")}]),onClick:y[7]||(y[7]=d=>s("rgb(100, 188, 56)"))},_hoisted_23$c,2)])],64)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_24$c,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:u.value})},null,4),createVNode(unref(NColorPicker),{to:".measure-panel",onComplete:w,"onUpdate:value":g,value:u.value,"show-alpha":!1},{label:withCtx(()=>[_hoisted_25$b]),_:1},8,["value"])])])}}},__unplugin_components_1$c=_export_sfc(_sfc_main$42,[["__scopeId","data-v-46da3324"]]),_sfc_main$41={},_hoisted_1$3G={width:"56",height:"16",viewBox:"0 0 56 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3s=createBaseVNode("path",{d:"M56 7.5V8.5H0V7.5H56Z",fill:"currentColor"},null,-1),_hoisted_3$38=[_hoisted_2$3s];function _sfc_render$2u(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3G,_hoisted_3$38)}const HeadLine=_export_sfc(_sfc_main$41,[["render",_sfc_render$2u]]),_sfc_main$40={},_hoisted_1$3F={width:"56",height:"16",viewBox:"0 0 56 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3r=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.06066 4.35359L4.35355 3.64648L0 8.00004L4.35355 12.3536L5.06066 11.6465L1.91418 8.5H56V7.5H1.91425L5.06066 4.35359Z",fill:"currentColor"},null,-1),_hoisted_3$37=[_hoisted_2$3r];function _sfc_render$2t(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3F,_hoisted_3$37)}const HeadArrow=_export_sfc(_sfc_main$40,[["render",_sfc_render$2t]]),_sfc_main$3$={},_hoisted_1$3E={width:"56",height:"16",viewBox:"0 0 56 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3q=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 8.5V12L0 8L5 4V7.5H56V8.5H5Z",fill:"currentColor"},null,-1),_hoisted_3$36=[_hoisted_2$3q];function _sfc_render$2s(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3E,_hoisted_3$36)}const HeadClose=_export_sfc(_sfc_main$3$,[["render",_sfc_render$2s]]),_sfc_main$3_={},_hoisted_1$3D={width:"56",height:"16",viewBox:"0 0 56 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3p=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 5H6V7.5H56V8.5H6V11H0V8.5V7.5V5Z",fill:"currentColor"},null,-1),_hoisted_3$35=[_hoisted_2$3p];function _sfc_render$2r(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3D,_hoisted_3$35)}const HeadSquare=_export_sfc(_sfc_main$3_,[["render",_sfc_render$2r]]),_sfc_main$3Z={},_hoisted_1$3C={width:"56",height:"16",viewBox:"0 0 56 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3o=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 8C0 6.34315 1.34315 5 3 5C4.4865 5 5.72048 6.08114 5.95852 7.5H56V8.5H5.95852C5.72048 9.91886 4.4865 11 3 11C1.34315 11 0 9.65685 0 8Z",fill:"currentColor"},null,-1),_hoisted_3$34=[_hoisted_2$3o];function _sfc_render$2q(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3C,_hoisted_3$34)}const HeadCircle=_export_sfc(_sfc_main$3Z,[["render",_sfc_render$2q]]),_sfc_main$3Y={},_hoisted_1$3B={width:"56",height:"16",viewBox:"0 0 56 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3n=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 8L4 4L7.5 7.5H56V8.5H7.5L4 12L0 8Z",fill:"currentColor"},null,-1),_hoisted_3$33=[_hoisted_2$3n];function _sfc_render$2p(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3B,_hoisted_3$33)}const HeadDiamond=_export_sfc(_sfc_main$3Y,[["render",_sfc_render$2p]]),_sfc_main$3X={},_hoisted_1$3A={width:"56",height:"16",viewBox:"0 0 56 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3m=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1 7.5V5.5H0V7.5V8.5V10.5H1V8.5H56V7.5H1Z",fill:"currentColor"},null,-1),_hoisted_3$32=[_hoisted_2$3m];function _sfc_render$2o(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3A,_hoisted_3$32)}const HeadButt=_export_sfc(_sfc_main$3X,[["render",_sfc_render$2o]]),_sfc_main$3W={},_hoisted_1$3z={width:"56",height:"16",viewBox:"0 0 56 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3l=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 5.87004L0.508793 5L4.25147 7.5H56V8.5H4.25147L0.508793 11L0 10.13L3.19004 8L0 5.87004Z",fill:"currentColor"},null,-1),_hoisted_3$31=[_hoisted_2$3l];function _sfc_render$2n(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3z,_hoisted_3$31)}const HeadRopen=_export_sfc(_sfc_main$3W,[["render",_sfc_render$2n]]),_sfc_main$3V={},_hoisted_1$3y={width:"56",height:"16",viewBox:"0 0 56 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3k=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 7.5V5L4.16667 7.5H56V8.5H4.16667L0 11V8.5V7.5Z",fill:"currentColor"},null,-1),_hoisted_3$30=[_hoisted_2$3k];function _sfc_render$2m(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3y,_hoisted_3$30)}const HeadRclose=_export_sfc(_sfc_main$3V,[["render",_sfc_render$2m]]),_sfc_main$3U={},_hoisted_1$3x={width:"56",height:"16",viewBox:"0 0 56 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3j=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 6.66667L2.5 6L0 9.33333L0.5 10L1.625 8.5H56V7.5H2.375L3 6.66667Z",fill:"currentColor"},null,-1),_hoisted_3$2$=[_hoisted_2$3j];function _sfc_render$2l(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3x,_hoisted_3$2$)}const HeadSlash=_export_sfc(_sfc_main$3U,[["render",_sfc_render$2l]]),MeasurePanel_vue_vue_type_style_index_0_lang="",_hoisted_1$3w={class:"sidebar-title"},_hoisted_2$3i={class:"edit-container"},_hoisted_3$2_={key:0,class:"color"},_hoisted_4$17={class:"color-title subtitle"},_hoisted_5$J={key:1,class:"color"},_hoisted_6$x={class:"color-title subtitle"},_hoisted_7$q={key:2,class:"opacity"},_hoisted_8$l={class:"subtitle"},_hoisted_9$j={class:"tool"},_hoisted_10$j={key:3,class:"color"},_hoisted_11$g={class:"color-title subtitle"},_hoisted_12$f={key:4,class:"border-width"},_hoisted_13$f={class:"subtitle"},_hoisted_14$f={class:"tool"},_hoisted_15$f={key:5,class:"opacity"},_hoisted_16$e={class:"subtitle"},_hoisted_17$d={class:"tool"},_hoisted_18$c={key:6,class:"line-style"},_hoisted_19$c={class:"line-style-title subtitle"},_hoisted_20$c={class:"block"},_hoisted_21$c={class:"line-select"},_hoisted_22$c={class:"solid"},_hoisted_23$b=createBaseVNode("div",{class:"solid-line"},null,-1),_hoisted_24$b=createBaseVNode("div",null,null,-1),_hoisted_25$a={class:"line-select"},_hoisted_26$a={class:"solid"},_hoisted_27$9=createBaseVNode("div",{class:"dashed-line"},null,-1),_hoisted_28$9={key:7,class:"arrow-style"},_hoisted_29$7={class:"subtitle"},_hoisted_30$7={class:"content-block"},_hoisted_31$7={key:8,class:"color"},_hoisted_32$5={class:"color-title subtitle"},_hoisted_33$4={key:9,class:"text"},_hoisted_34$4={class:"text-title subtitle"},_hoisted_35$4={class:"content-block"},_hoisted_36$4={class:"note"},_hoisted_37$4={class:"subtitle"},_sfc_main$3T={__name:"MeasurePanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen("measurePanel")),u=computed(()=>n.getCustomFonts),s=computed(()=>r.getActiveTool),w=computed(()=>n.getToolMode),v=getCurrentInstance().appContext.app.config.globalProperties.$t;let y=reactive({measure:0,type:"",fillColor:"rgb(0, 0, 0)",fillTransparency:100,borderColor:"rgb(0, 0, 0)",opacity:100,borderStyle:"solid",dashes:2,borderWidth:2,head:"openarrow",tail:"openarrow",color:"rgb(0, 0, 0)",fontName:"Helvetica",fontStyle:"regular",fontSize:14,contents:""}),m=!1,d=ref(`${y.opacity}%`),f=ref(`${y.fillTransparency}%`);const k=[25,50,75,100].map(Le=>({label:`${Le}%`,value:`${Le}%`}));let P=ref(`${y.borderWidth} pt`);const E=[2,4,6,8,10].map(Le=>({label:`${Le} pt`,value:`${Le} pt`})),M=Le=>{const Te=Le.fontFamily;n.setCustomFonts(Te)};core.addEvent("LoadFont",M),watch(()=>u.value,(Le,Te)=>{D.value=T(Le)},{deep:!0});const T=Le=>{if(Le.length)return Le.map(Te=>({label:Te.fontFamily,value:Te.fontName}))},D=ref([]);D.value=T(u.value);const I=computed(()=>[{label:v("regular"),value:"regular"},{label:v("bold"),value:"bold"},{label:v("boldOblique"),value:"boldItalic"},{label:v("oblique"),value:"italic"}]),N=[6,8,10,12,14,16,20,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72],O=N.map(Le=>({label:`${Le} pt`,value:Le})),F=[{label:HeadLine,value:"none"},{label:HeadArrow,value:"openarrow"},{label:HeadClose,value:"closedarrow"},{label:HeadSquare,value:"square"},{label:HeadCircle,value:"circle"},{label:HeadDiamond,value:"diamond"},{label:HeadButt,value:"butt"},{label:HeadRopen,value:"ropenarrow"},{label:HeadRclose,value:"rclosedarrow"},{label:HeadSlash,value:"slash"}],U=Le=>[h$1(Le.label,{style:{verticalAlign:"-0.15em"}})],Y=Le=>[h$1(Le.label,{style:{verticalAlign:"-0.15em",transform:"scaleX(-1)"}})];watch(()=>o.value,(Le,Te)=>{Le&&n.closeElement("pageModePanel")});const Q=computed(()=>{if(y.measure){const Te=["line","polyline","polygon","rectangle","circle","curve","arc"].includes(s.value)?s.value:"";return y.type||Te}else return["text","ink","highlight","underline","squiggly","strikeout","square","circle","arrow","line","arc","polygon","polyline","stamp","image","freetext"].includes(y.type)?y.type:""}),q=computed(()=>!y.measure&&Q.value?Q.value==="text"?v("header.note"):v(`header.${Q.value}`):v("measurementPanel.appearance")),ne=()=>{Ce({opacity:y.opacity/100})},J=()=>{Ce({fillTransparency:y.fillTransparency/100})},re=()=>{Ce({borderWidth:y.borderWidth})};watch(()=>y.fontName,(Le,Te)=>{Ce({fontName:Le})}),watch(()=>y.fontStyle,(Le,Te)=>{Ce({fontStyle:Le})}),watch(()=>y.opacity,(Le,Te)=>{d.value=Le+"%"}),watch(()=>y.fillTransparency,(Le,Te)=>{f.value=Le+"%"}),watch(()=>y.borderWidth,(Le,Te)=>{P.value=Le+" pt"}),watch(()=>y.fontSize,(Le,Te)=>{typeof Le=="number"&&Ce({fontSize:y.fontSize})}),watch(()=>y.head,(Le,Te)=>{Ce({head:Le})}),watch(()=>y.tail,(Le,Te)=>{Ce({tail:Le})});const X=(Le,Te)=>{y[Le]=Te,Ce({[Le]:Te})},j=()=>{y.opacity=Number.isNaN(Number.parseInt(d.value))?100:Number.parseInt(d.value),Ce({opacity:y.opacity/100})},Z=()=>{y.fillTransparency=Number.isNaN(Number.parseInt(f.value))?100:Number.parseInt(f.value),Ce({fillTransparency:y.fillTransparency/100})},W=()=>{y.borderWidth=Number.parseInt(P.value),Ce({borderWidth:y.borderWidth})},te=Le=>{Le!==null&&(y.dashes=Math.round(Le),Ce({dashes:[y.dashes,y.dashes]}))},le=Le=>Le===""?2:Number.parseInt(Le),oe=Le=>Le===null?"2 pt":Le+" pt",Ee=()=>{Ce({contents:y.contents})},Ae=Le=>{y.borderStyle=Le,y.borderStyle==="dashed"?Ce({borderStyle:Le,dashes:[y.dashes,y.dashes]}):Ce({borderStyle:Le})},ve=Le=>{for(const Te in Le){Te==="isOpen"&&(Le.isOpen?n.openElement("measurePanel"):(Pe(),y.type=""));for(const ye in y)if(Te===ye){if(Te==="opacity"||Te==="fillTransparency"){y[ye]=Math.round(Le[ye]*100);continue}if(Te==="dashes"){y.dashes=Le.dashes.length?Le.dashes[0]:2;continue}if(Te==="type"&&Le.type==="ink"){y.type=Le.arcPoints?"arc":"curve";continue}y[ye]=Le[Te],Te==="fontSize"&&!N.includes(Le.fontSize)&&(y.fontSize=Le.fontSize+" pt")}}};core.addEvent("measurePropertyChange",ve);const ke=Le=>{if(y.measure=Le.measure||0,(!Le.measure&&w.value==="measurement"||Le.measure&&w.value==="annotation")&&o.value){Pe(),y.type="",w.value==="measurement"&&s.value&&(m=!0);return}for(const Te in Le)for(const ye in y)if(Te===ye){if(Te==="opacity"||Te==="fillTransparency"){y[ye]=Math.round(Le[ye]*100);continue}if(Te==="dashes"){y.dashes=Le.dashes.length?Le.dashes[0]:2;continue}if(!Te.measure&&Te==="type"&&Le.type==="stamp"&&Le.stampType==="image"){y.type="image";continue}if(["highlight","underline","squiggly","strikeout"].includes(Le.type)&&Te==="color"){y.borderColor=Le.color;continue}y[ye]=Le[Te],Te==="fontSize"&&!N.includes(Le.fontSize)&&(y.fontSize=Le.fontSize+" pt")}"contents"in Le||(y.contents="")};core.addEvent("annotationSelected",ke);const Ce=Le=>{y.type?core.setPropertyPanel(Le):core.setMeasurementDefaults(Le)},Pe=()=>{n.closeElement("measurePanel")},Me=()=>{var Le,Te,ye;o.value&&Pe(),y.type="",m&&(m=!1,(ye=(Te=(Le=core.getDocumentViewer())==null?void 0:Le.pdfViewer)==null?void 0:Te.measurementTool)==null||ye.updateMeasurePanel())};return core.addEvent("annotationDeselected",Me),(Le,Te)=>{const ye=__unplugin_components_14$3,_e=__unplugin_components_1$c,we=__unplugin_components_1$e,Se=__unplugin_components_0$z;return openBlock(),createElementBlock("div",{class:normalizeClass(["measure-panel property-panel annotation-panel",{closed:!o.value,mobile:unref(isMobileDevice)}]),style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 88px)"})},[createBaseVNode("div",_hoisted_1$3w,[createTextVNode(toDisplayString$1(q.value)+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(ye,{key:0,class:"close-button",onClick:Pe})):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_2$3i,[["circle","polygon","rectangle","square"].includes(Q.value)?(openBlock(),createElementBlock("div",_hoisted_3$2_,[createBaseVNode("div",_hoisted_4$17,toDisplayString$1(unref(v)("measurementPanel.fillColor")),1),createVNode(_e,{propertyColor:unref(y).fillColor,noColor:!0,onSetActiveColor:Te[0]||(Te[0]=$e=>X("fillColor",$e))},null,8,["propertyColor"])])):createCommentVNode("",!0),["freetext","text"].includes(Q.value)?(openBlock(),createElementBlock("div",_hoisted_5$J,[createBaseVNode("div",_hoisted_6$x,toDisplayString$1(Q.value==="freetext"?unref(v)("measurementPanel.fontColor"):unref(v)("color")),1),createVNode(_e,{propertyColor:unref(y).color,onSetActiveColor:Te[1]||(Te[1]=$e=>X("color",$e))},null,8,["propertyColor"])])):createCommentVNode("",!0),["circle","polygon","rectangle","square"].includes(Q.value)?(openBlock(),createElementBlock("div",_hoisted_7$q,[createBaseVNode("div",_hoisted_8$l,toDisplayString$1(unref(v)("measurementPanel.fillOpacity")),1),createBaseVNode("div",_hoisted_9$j,[createVNode(unref(NSlider),{value:unref(y).fillTransparency,"onUpdate:value":Te[2]||(Te[2]=$e=>unref(y).fillTransparency=$e),tooltip:!1,step:1,max:100,min:0,class:"width-slider","on-dragend":J},{thumb:withCtx(()=>[createVNode(we)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(f),"onUpdate:value":[Te[3]||(Te[3]=$e=>isRef(f)?f.value=$e:f=$e),Z],options:unref(k),to:".measure-panel"},{arrow:withCtx(()=>[createVNode(Se)]),_:1},8,["value","options"])])])):createCommentVNode("",!0),["freetext","text","stamp","image"].includes(Q.value)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_10$j,[createBaseVNode("div",_hoisted_11$g,toDisplayString$1(unref(v)("measurementPanel.lineColor")),1),createVNode(_e,{propertyColor:unref(y).borderColor,onSetActiveColor:Te[4]||(Te[4]=$e=>X(["highlight","underline","squiggly","strikeout"].includes(Q.value)?"color":"borderColor",$e))},null,8,["propertyColor"])])),["highlight","underline","squiggly","strikeout","freetext","text","stamp","image"].includes(Q.value)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_12$f,[createBaseVNode("div",_hoisted_13$f,toDisplayString$1(unref(v)("measurementPanel.lineWidth")),1),createBaseVNode("div",_hoisted_14$f,[createVNode(unref(NSlider),{value:unref(y).borderWidth,"onUpdate:value":Te[5]||(Te[5]=$e=>unref(y).borderWidth=$e),tooltip:!1,step:1,max:10,min:1,class:"width-slider","on-dragend":re},{thumb:withCtx(()=>[createVNode(we)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(P),"onUpdate:value":[Te[6]||(Te[6]=$e=>isRef(P)?P.value=$e:P=$e),W],options:unref(E),to:".measure-panel"},{arrow:withCtx(()=>[createVNode(Se)]),_:1},8,["value","options"])])])),["text","stamp","image"].includes(Q.value)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_15$f,[createBaseVNode("div",_hoisted_16$e,toDisplayString$1(Q.value==="freetext"?unref(v)("opacity"):unref(y).measure?unref(v)("measurementPanel.lineTextOpacity"):unref(v)("measurementPanel.lineOpacity")),1),createBaseVNode("div",_hoisted_17$d,[createVNode(unref(NSlider),{value:unref(y).opacity,"onUpdate:value":Te[7]||(Te[7]=$e=>unref(y).opacity=$e),tooltip:!1,step:1,max:100,min:0,class:"width-slider","on-dragend":ne},{thumb:withCtx(()=>[createVNode(we)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(d),"onUpdate:value":[Te[8]||(Te[8]=$e=>isRef(d)?d.value=$e:d=$e),j],options:unref(k),to:".measure-panel"},{arrow:withCtx(()=>[createVNode(Se)]),_:1},8,["value","options"])])])),["arc","curve","highlight","underline","squiggly","strikeout","ink","freetext","text","stamp","image"].includes(Q.value)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_18$c,[createBaseVNode("div",_hoisted_19$c,toDisplayString$1(unref(y).measure?unref(v)("measurementPanel.lineStyle"):unref(v)("measurementPanel.lineBorderStyle")),1),createBaseVNode("div",_hoisted_20$c,[createBaseVNode("div",_hoisted_21$c,[createBaseVNode("div",{class:normalizeClass(["checkbox",{active:unref(y).borderStyle==="solid"}]),onClick:Te[9]||(Te[9]=$e=>Ae("solid"))},[withDirectives(createBaseVNode("div",_hoisted_22$c,null,512),[[vShow,unref(y).borderStyle==="solid"]])],2),_hoisted_23$b]),_hoisted_24$b,createBaseVNode("div",_hoisted_25$a,[createBaseVNode("div",{class:normalizeClass(["checkbox",{active:unref(y).borderStyle==="dashed"}]),onClick:Te[10]||(Te[10]=$e=>Ae("dashed"))},[withDirectives(createBaseVNode("div",_hoisted_26$a,null,512),[[vShow,unref(y).borderStyle==="dashed"]])],2),_hoisted_27$9]),createVNode(unref(NInputNumber),{value:unref(y).dashes,"onUpdate:value":[Te[11]||(Te[11]=$e=>unref(y).dashes=$e),te],placeholder:"2 pt",min:"0",max:"10",step:1,parse:le,format:oe,"update-value-on-input":!1,disabled:unref(y).borderStyle!=="dashed"},{"minus-icon":withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["arrow down",{disabled:unref(y).borderStyle!=="dashed"}])},null,2)]),"add-icon":withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["arrow up",{disabled:unref(y).borderStyle!=="dashed"}])},null,2)]),_:1},8,["value","disabled"])])])),Q.value==="line"?(openBlock(),createElementBlock("div",_hoisted_28$9,[createBaseVNode("div",_hoisted_29$7,toDisplayString$1(unref(v)("measurementPanel.start"))+" & "+toDisplayString$1(unref(v)("measurementPanel.end")),1),createBaseVNode("div",_hoisted_30$7,[createVNode(unref(NSelect),{value:unref(y).head,"onUpdate:value":Te[12]||(Te[12]=$e=>unref(y).head=$e),options:F,to:".measure-panel",class:"font-style-select","render-label":U},{arrow:withCtx(()=>[createVNode(Se)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(y).tail,"onUpdate:value":Te[13]||(Te[13]=$e=>unref(y).tail=$e),options:F,to:".measure-panel",class:"font-size-select","render-label":Y},{arrow:withCtx(()=>[createVNode(Se)]),_:1},8,["value"])])])):createCommentVNode("",!0),unref(y).measure?(openBlock(),createElementBlock("div",_hoisted_31$7,[createBaseVNode("div",_hoisted_32$5,toDisplayString$1(unref(v)("measurementPanel.fontColor")),1),createVNode(_e,{propertyColor:unref(y).color,onSetActiveColor:Te[14]||(Te[14]=$e=>X("color",$e))},null,8,["propertyColor"])])):createCommentVNode("",!0),unref(y).measure||Q.value==="freetext"?(openBlock(),createElementBlock("div",_hoisted_33$4,[createBaseVNode("div",_hoisted_34$4,toDisplayString$1(unref(v)("measurementPanel.fontStyle")),1),createVNode(unref(NSelect),{value:unref(y).fontName,"onUpdate:value":Te[15]||(Te[15]=$e=>unref(y).fontName=$e),options:D.value,to:".measure-panel",class:"text-family"},{arrow:withCtx(()=>[createVNode(Se)]),_:1},8,["value","options"]),createBaseVNode("div",_hoisted_35$4,[createVNode(unref(NSelect),{value:unref(y).fontStyle,"onUpdate:value":Te[16]||(Te[16]=$e=>unref(y).fontStyle=$e),options:I.value,to:".measure-panel",class:"font-style-select"},{arrow:withCtx(()=>[createVNode(Se)]),_:1},8,["value","options"]),createVNode(unref(NSelect),{value:unref(y).fontSize,"onUpdate:value":Te[17]||(Te[17]=$e=>unref(y).fontSize=$e),options:unref(O),to:".measure-panel",class:"font-size-select"},{arrow:withCtx(()=>[createVNode(Se)]),_:1},8,["value","options"])])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_36$4,[createBaseVNode("div",_hoisted_37$4,toDisplayString$1(unref(v)("measurementPanel.note")),1),withDirectives(createBaseVNode("textarea",{name:"note",rows:"4","onUpdate:modelValue":Te[18]||(Te[18]=$e=>unref(y).contents=$e),onBlur:Ee},null,544),[[vModelText,unref(y).contents]])])])],6)}}},_sfc_main$3S={},_hoisted_1$3v={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3h=createBaseVNode("rect",{width:"14",height:"14",rx:"1",fill:"currentColor"},null,-1),_hoisted_3$2Z=createBaseVNode("path",{d:"M10.2784 5.27848L5.84653 9.71032L4.20261 8.06642",stroke:"white","stroke-width":"1.5","stroke-linecap":"square"},null,-1),_hoisted_4$16=[_hoisted_2$3h,_hoisted_3$2Z];function _sfc_render$2k(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3v,_hoisted_4$16)}const __unplugin_components_1$b=_export_sfc(_sfc_main$3S,[["render",_sfc_render$2k]]),ColorSeparationPanel_vue_vue_type_style_index_0_scoped_fc173268_lang="",_hoisted_1$3u={class:"sidebar-title"},_hoisted_2$3g={class:"container"},_hoisted_3$2Y={class:"all"},_hoisted_4$15={class:"color-list"},_hoisted_5$I=["onClick"],_hoisted_6$w={class:"name"},_sfc_main$3R={__name:"ColorSeparationPanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("colorSeparationPanel")),o=computed(()=>n.getToolMode),u=ref([]),s=ref(new Set);watch(o,(f,x)=>{f==="separation"?(n.openElement("colorSeparationPanel"),n.closeElement("pageModePanel")):r.value&&(n.closeElement("colorSeparationPanel"),s.value.clear())});const w=f=>{u.value=f};core.addEvent("colorSeparationUpdate",w);const g=f=>{s.value.clear(),f.forEach(x=>s.value.add(x))};core.addEvent("ignoreColorsUpdate",g);const v=()=>{n.closeElement("colorSeparationPanel")},y=async()=>{n.setCommonLoading(!0);const f=s.value.size!==0;u.value.forEach(x=>{f?s.value.delete(x.index):s.value.add(x.index)}),await core.updateViewWithColorIndex(Array.from(s.value)),n.setCommonLoading(!1)},m=async f=>{n.setCommonLoading(!0),s.value.has(f.index)?s.value.delete(f.index):s.value.add(f.index),await core.updateViewWithColorIndex(Array.from(s.value)),n.setCommonLoading(!1)},d=(f,x=220)=>{const P=/rgb\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/.exec(f);if(!P)return null;const S=parseInt(P[1]),E=parseInt(P[2]),M=parseInt(P[3]);return .299*S+.587*E+.114*M>x};return(f,x)=>{const k=__unplugin_components_14$3,P=__unplugin_components_1$b;return openBlock(),createElementBlock("div",{class:normalizeClass(["color-separation-panel",{closed:!r.value,mobile:unref(isMobileDevice)}]),style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":""})},[createBaseVNode("div",_hoisted_1$3u,[createTextVNode(toDisplayString$1(f.$t("header.separation"))+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(k,{key:0,class:"close-button",onClick:v})):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_2$3g,[createBaseVNode("div",_hoisted_3$2Y,[createBaseVNode("div",{class:normalizeClass(["check-box",{active:s.value.size===0}]),onClick:y},[withDirectives(createVNode(P,null,null,512),[[vShow,s.value.size===0]])],2),createBaseVNode("span",null,toDisplayString$1(f.$t("colorSeparation.toggleColor")),1)]),createBaseVNode("div",_hoisted_4$15,[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.value,S=>(openBlock(),createElementBlock("div",{class:"row",key:S.index},[createBaseVNode("div",{class:normalizeClass(["check-box",{active:!s.value.has(S.index),darker:d(S.color)}]),onClick:E=>m(S),style:normalizeStyle({borderColor:S.color,color:S.color})},[withDirectives(createVNode(P,null,null,512),[[vShow,!s.value.has(S.index)]])],14,_hoisted_5$I),createBaseVNode("span",_hoisted_6$w,toDisplayString$1(S.name),1),createBaseVNode("span",null,toDisplayString$1(S.intensity||0)+"%",1)]))),128))])])],6)}}},__unplugin_components_10$6=_export_sfc(_sfc_main$3R,[["__scopeId","data-v-fc173268"]]),_sfc_main$3Q={},_hoisted_1$3t={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3f=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.8 12.6V3.29999H11.7561L11.2345 3.85884L11.9655 4.54115L12.3 4.18279V12.6H3.8ZM2.6 13.2V3.29999H0V2.29999H2.6V0.399994H3.8V2.29999H12.8H13.3V2.79999V12.6H16V13.8H13.3V15.6H12.3V13.8H3.2H2.6V13.2ZM14.2055 2.14115L14.7655 1.54115L14.0345 0.858835L13.4745 1.45884L14.2055 2.14115ZM9.72553 6.94115L10.8455 5.74115L10.1145 5.05884L8.99447 6.25883L9.72553 6.94115ZM7.48553 9.34115L8.60553 8.14115L7.87447 7.45883L6.75447 8.65883L7.48553 9.34115ZM5.24553 11.7412L6.36553 10.5412L5.63447 9.85884L4.51447 11.0588L5.24553 11.7412Z",fill:"currentColor"},null,-1),_hoisted_3$2X=[_hoisted_2$3f];function _sfc_render$2j(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3t,_hoisted_3$2X)}const __unplugin_components_15$1=_export_sfc(_sfc_main$3Q,[["render",_sfc_render$2j]]),_sfc_main$3P={},_hoisted_1$3s={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3e=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.8537 7.17423L8.5001 10.5279L8.5001 1.60001V1.10001H7.5001V1.60001L7.5001 10.5277L4.14666 7.17423L3.7931 6.82068L3.086 7.52778L3.43955 7.88134L7.64664 12.0884C7.8419 12.2837 8.15849 12.2837 8.35375 12.0884L12.5608 7.88134L12.9144 7.52778L12.2073 6.82068L11.8537 7.17423ZM1.6001 13.9H1.1001V14.9H1.6001H14.4001H14.9001V13.9H14.4001H1.6001Z",fill:"currentColor"},null,-1),_hoisted_3$2W=[_hoisted_2$3e];function _sfc_render$2i(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3s,_hoisted_3$2W)}const __unplugin_components_14$2=_export_sfc(_sfc_main$3P,[["render",_sfc_render$2i]]),_sfc_main$3O={},_hoisted_1$3r={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3d=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.904297 1.60429H0.404297V2.10429V11.5177V12.0177H0.904297H3.57684V13.2072V14.2072H4.57684H9.59007V13.532L9.59996 12.8L6.91751 11.5177L4.57684 12.9057V5.7938H14.6032V10.1729H15.6032V5.7938V4.7938H14.6032H13.4307V2.10429V1.60429H12.9307H0.904297ZM12.4307 4.7938V2.60429H1.4043V11.0177H3.57684V5.7938V4.7938H4.57684H12.4307ZM11.7263 8.42116C12.1681 8.42116 12.5263 8.06071 12.5263 7.61607C12.5263 7.17143 12.1681 6.81098 11.7263 6.81098C11.2845 6.81098 10.9263 7.17143 10.9263 7.61607C10.9263 8.06071 11.2845 8.42116 11.7263 8.42116ZM12.3683 9.91808L12.0502 9.53231L12.8218 8.89613L13.1399 9.2819L14.3095 10.7004L14.9841 11.5185H13.9237H10.3999H9.89994V10.5185H10.3999H12.8634L12.3683 9.91808ZM12.5638 13.9004L12.8819 14.2861L12.1104 14.9223L11.7923 14.5365L10.6227 13.1181L9.94808 12.3H11.0084H14.5322H15.0322V13.3H14.5322H12.0688L12.5638 13.9004Z",fill:"currentColor"},null,-1),_hoisted_3$2V=[_hoisted_2$3d];function _sfc_render$2h(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3r,_hoisted_3$2V)}const __unplugin_components_13=_export_sfc(_sfc_main$3O,[["render",_sfc_render$2h]]),_sfc_main$3N={},_hoisted_1$3q={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3c=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.5 7.5H13.1353H1.5H0.5V6.5V1.60353V0.5L1.5 0.966667L13.3571 6.5L15.5 7.5ZM10.9924 6.5H1.5V2.0702L10.9924 6.5ZM15.5 8.5H0.5V15.5L15.5 8.5Z",fill:"currentColor"},null,-1),_hoisted_3$2U=[_hoisted_2$3c];function _sfc_render$2g(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3q,_hoisted_3$2U)}const __unplugin_components_12$1=_export_sfc(_sfc_main$3N,[["render",_sfc_render$2g]]),_sfc_main$3M={},_hoisted_1$3p={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3b=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.52941 14.5H0L7.52941 1.5V14.5ZM9.47059 13.5H14.2652L9.47059 5.2218V13.5ZM16 14.5H14.8444H9.47059H8.47059V13.5V3.49524V1.5L9.47059 3.22656L15.4208 13.5L16 14.5Z",fill:"currentColor"},null,-1),_hoisted_3$2T=[_hoisted_2$3b];function _sfc_render$2f(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3p,_hoisted_3$2T)}const __unplugin_components_11$2=_export_sfc(_sfc_main$3M,[["render",_sfc_render$2f]]),_sfc_main$3L={},_hoisted_1$3o={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3a=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.35355 2.26779L9.70711 2.62134L9.35355 2.97489L7.23223 5.09621L6.52513 4.38911L7.86416 3.05007L7.55768 3.0735C4.69176 3.52528 2.5 6.00714 2.5 9C2.5 12.3137 5.18629 15 8.5 15C11.8137 15 14.5 12.3137 14.5 9C14.5 7.01498 13.5366 5.25507 12.0496 4.16209L12.6419 3.35635C14.3741 4.62964 15.5 6.68338 15.5 9C15.5 12.866 12.366 16 8.5 16C4.63401 16 1.5 12.866 1.5 9C1.5 5.49977 4.06855 2.60038 7.4237 2.08231C7.52022 2.0674 7.61737 2.05447 7.71511 2.04356L6.52513 0.853572L7.23223 0.146465L9.35355 2.26779Z",fill:"currentColor"},null,-1),_hoisted_3$2S=[_hoisted_2$3a];function _sfc_render$2e(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3o,_hoisted_3$2S)}const __unplugin_components_10$5=_export_sfc(_sfc_main$3L,[["render",_sfc_render$2e]]),_sfc_main$3K={},_hoisted_1$3n={width:"14",height:"16",viewBox:"0 0 14 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$39=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.14645 2.26779L5.79289 2.62134L6.14645 2.97489L8.26777 5.09621L8.97487 4.38911L7.63584 3.05007L7.94232 3.0735C10.8082 3.52528 13 6.00714 13 9C13 12.3137 10.3137 15 7 15C3.68629 15 1 12.3137 1 9C1 7.01498 1.96344 5.25507 3.45037 4.16209L2.85811 3.35635C1.12586 4.62964 0 6.68338 0 9C0 12.866 3.13401 16 7 16C10.866 16 14 12.866 14 9C14 5.49977 11.4314 2.60038 8.0763 2.08231C7.97978 2.0674 7.88263 2.05447 7.78489 2.04356L8.97487 0.853572L8.26777 0.146465L6.14645 2.26779Z",fill:"currentColor"},null,-1),_hoisted_3$2R=[_hoisted_2$39];function _sfc_render$2d(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3n,_hoisted_3$2R)}const __unplugin_components_9$4=_export_sfc(_sfc_main$3K,[["render",_sfc_render$2d]]),_sfc_main$3J={},_hoisted_1$3m={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$38=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.0315 11.1503L10.609 2.59406H9.39038L5.96788 11.1503H5.09998V12.0253H7.89998V11.1503H7.38147L8.08144 9.4003H11.9179L12.6179 11.1503H12.1V12.0253H14.9V11.1503H14.0315ZM11.568 8.5253L9.99969 4.60441L8.43142 8.5253H11.568Z",fill:"currentColor"},null,-1),_hoisted_3$2Q=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.499 17.406L1.80957 14.7147L4.50088 12.0253L5.26929 12.7942L3.8888 14.1737L16.1078 14.1703L14.7306 12.7942L15.499 12.0252L18.1903 14.7146L15.5009 17.4059L14.732 16.6375L16.1106 15.2574L3.89264 15.2607L5.26795 16.6376L4.499 17.406Z",fill:"currentColor"},null,-1),_hoisted_4$14=[_hoisted_2$38,_hoisted_3$2Q];function _sfc_render$2c(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3m,_hoisted_4$14)}const __unplugin_components_8$7=_export_sfc(_sfc_main$3J,[["render",_sfc_render$2c]]),_sfc_main$3I={},_hoisted_1$3l={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$37=createStaticVNode('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.55957 5.99906L5.25088 3.30963L7.94031 6.00094L7.17136 6.76935L5.79198 5.38893L5.79519 14.6079L7.17142 13.2307L7.94037 13.9991L5.25094 16.6904L2.55963 14.001L3.32804 13.232L4.70812 14.6105L4.7049 5.39264L3.32798 6.76801L2.55957 5.99906Z" fill="currentColor"></path><rect x="9.44043" y="4.5" width="8" height="1.5" fill="currentColor"></rect><rect x="9.44043" y="7" width="8" height="1.5" fill="currentColor"></rect><rect x="9.44043" y="11.5" width="8" height="1.5" fill="currentColor"></rect><rect x="9.44043" y="14" width="8" height="1.5" fill="currentColor"></rect>',5),_hoisted_7$p=[_hoisted_2$37];function _sfc_render$2b(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3l,_hoisted_7$p)}const __unplugin_components_7$8=_export_sfc(_sfc_main$3I,[["render",_sfc_render$2b]]),_sfc_main$3H={},_hoisted_1$3k={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$36=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.55957 5.99906L5.25088 3.30963L7.94031 6.00094L7.17136 6.76935L5.79198 5.38893L5.79519 14.6079L7.17142 13.2307L7.94037 13.9991L5.25094 16.6904L2.55963 14.001L3.32804 13.232L4.70812 14.6105L4.7049 5.39264L3.32798 6.76801L2.55957 5.99906Z",fill:"currentColor"},null,-1),_hoisted_3$2P=createBaseVNode("rect",{x:"9.44043",y:"4.75",width:"8",height:"1.5",fill:"currentColor"},null,-1),_hoisted_4$13=createBaseVNode("rect",{x:"9.44043",y:"9.25",width:"8",height:"1.5",fill:"currentColor"},null,-1),_hoisted_5$H=createBaseVNode("rect",{x:"9.44043",y:"13.75",width:"8",height:"1.5",fill:"currentColor"},null,-1),_hoisted_6$v=[_hoisted_2$36,_hoisted_3$2P,_hoisted_4$13,_hoisted_5$H];function _sfc_render$2a(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3k,_hoisted_6$v)}const __unplugin_components_6$9=_export_sfc(_sfc_main$3H,[["render",_sfc_render$2a]]),ContentEditorPanel_vue_vue_type_style_index_0_lang="",ContentEditorPanel_vue_vue_type_style_index_1_lang="",_hoisted_1$3j={class:"sidebar-title"},_hoisted_2$35={class:"edit-container"},_hoisted_3$2O={class:"color"},_hoisted_4$12={class:"color-title subtitle"},_hoisted_5$G={class:"colors-container"},_hoisted_6$u={class:"cell-container"},_hoisted_7$o=createBaseVNode("span",{class:"cell red"},null,-1),_hoisted_8$k=[_hoisted_7$o],_hoisted_9$i={class:"cell-container"},_hoisted_10$i=createBaseVNode("span",{class:"cell yellow"},null,-1),_hoisted_11$f=[_hoisted_10$i],_hoisted_12$e={class:"cell-container"},_hoisted_13$e=createBaseVNode("span",{class:"cell blue"},null,-1),_hoisted_14$e=[_hoisted_13$e],_hoisted_15$e={class:"cell-container"},_hoisted_16$d=createBaseVNode("span",{class:"cell",style:{background:"rgb(255, 246, 179)"}},null,-1),_hoisted_17$c=[_hoisted_16$d],_hoisted_18$b={class:"cell-container"},_hoisted_19$b=createBaseVNode("span",{class:"cell",style:{background:"rgb(254, 191, 191)"}},null,-1),_hoisted_20$b=[_hoisted_19$b],_hoisted_21$b={class:"cell-container"},_hoisted_22$b=createBaseVNode("span",{class:"cell",style:{background:"rgb(100, 188, 56)"}},null,-1),_hoisted_23$a=[_hoisted_22$b],_hoisted_24$a={class:"color-picker"},_hoisted_25$9=createBaseVNode("img",{src:_imports_0$2,alt:"colorPicker"},null,-1),_hoisted_26$9={class:"opacity"},_hoisted_27$8={class:"opacity-title subtitle"},_hoisted_28$8={class:"tool"},_hoisted_29$6={class:"text"},_hoisted_30$6={class:"text-title subtitle"},_hoisted_31$6={class:"content-block"},_hoisted_32$4={class:"text-align"},_hoisted_33$3={class:"spacing"},_hoisted_34$3={class:"spacing-title"},_hoisted_35$3={class:"block"},_hoisted_36$3=createBaseVNode("div",{class:"arrow down"},null,-1),_hoisted_37$3=createBaseVNode("div",{class:"arrow up"},null,-1),_hoisted_38$3=createBaseVNode("div",{class:"arrow down"},null,-1),_hoisted_39$3=createBaseVNode("div",{class:"arrow up"},null,-1),_hoisted_40$3=createBaseVNode("div",{class:"arrow down"},null,-1),_hoisted_41$3=createBaseVNode("div",{class:"arrow up"},null,-1),_hoisted_42$2={class:"edit-container"},_hoisted_43$2={class:"overview"},_hoisted_44$2=["src"],_hoisted_45$2={class:"rotate"},_hoisted_46$2={class:"subtitle"},_hoisted_47$2={class:"buttons"},_hoisted_48$2=["title"],_hoisted_49$2=["title"],_hoisted_50$2={class:"flips"},_hoisted_51$2={class:"subtitle"},_hoisted_52$1={class:"buttons"},_hoisted_53$1=["title"],_hoisted_54$1=["title"],_hoisted_55$1={class:"opacity"},_hoisted_56$1={class:"opacity-title subtitle"},_hoisted_57$2={class:"tool"},_hoisted_58$2={class:"tools"},_hoisted_59$2={class:"subtitle"},_hoisted_60$2={class:"buttons"},_hoisted_61$2=["title"],_hoisted_62$2=["title"],_hoisted_63$2=["title"],_sfc_main$3G={__name:"ContentEditorPanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("contentEditorPanel")),o=computed(()=>n.getContentEditorType);computed(()=>n.getRightPanelButtonDisabled);const u=computed(()=>n.getCustomFonts),w=getCurrentInstance().appContext.app.config.globalProperties.$t;let g=reactive({color:"rgb(0, 0, 0)",opacity:100,fontFamily:"Helvetica",fontStyle:0,alignType:2,fontSize:14,lineSpacing:1,paragraphSpacing:0,characterSpacing:0}),v=ref("100%");const m=[25,50,75,100].map(re=>({label:`${re}%`,value:`${re}%`,class:"edit-select"})),d=re=>{const X=re.fontFamily;n.setCustomFonts(X)};core.addEvent("LoadFont",d),watch(()=>u.value,(re,X)=>{x.value=f(re)},{deep:!0});const f=re=>{if(re.length)return re.map(X=>({label:X.fontFamily,value:X.fontName,class:"edit-select"}))},x=ref([]);x.value=f(u.value);const k=computed(()=>[{label:w("regular"),value:0,class:"edit-select"},{label:w("bold"),value:1,class:"edit-select"},{label:w("boldOblique"),value:3,class:"edit-select"},{label:w("oblique"),value:2,class:"edit-select"}]),P=[12,14,16,20,24,28],S=P.map(re=>({label:`${re} pt`,value:re,class:"edit-select"})),E=ref(""),M=ref("rgb(0, 0, 0)");watch(()=>r.value,(re,X)=>{re&&n.closeElement("pageModePanel")});const T=()=>{core.setContentEditorProperty(o.value,{opacity:g.opacity})};watch(()=>g.fontFamily,(re,X)=>{core.setContentEditorProperty(o.value,{fontFamily:re})}),watch(()=>g.fontStyle,(re,X)=>{core.setContentEditorProperty(o.value,{fontStyle:re})}),watch(()=>g.opacity,(re,X)=>{v.value=re+"%"}),watch(()=>g.fontSize,(re,X)=>{typeof re=="number"&&core.setContentEditorProperty(o.value,{fontSize:g.fontSize})});const D=re=>{g.color=re,core.setContentEditorProperty(o.value,{color:re})},I=()=>{g.opacity=Number.isNaN(Number.parseInt(v.value))?100:Number.parseInt(v.value),core.setContentEditorProperty(o.value,{opacity:g.opacity})},N=re=>{g.alignType=re,core.setContentEditorProperty(o.value,{alignType:g.alignType})},O=re=>{re!==null&&(g.lineSpacing=Math.round(re*2)/2,core.setContentEditorProperty(o.value,{lineSpacing:g.lineSpacing}))},F=re=>{re!==null&&(g.paragraphSpacing=Math.round(re*2)/2,core.setContentEditorProperty(o.value,{paragraphSpacing:g.paragraphSpacing}))},U=re=>{re!==null&&(g.characterSpacing=Math.round(re*2)/2,core.setContentEditorProperty(o.value,{characterSpacing:g.characterSpacing}))},Y=re=>{for(const X in re){X==="type"&&n.setContentEditorType(re[X]),X==="isOpen"&&(re.isOpen?n.openElement("contentEditorPanel"):n.closeElement("contentEditorPanel")),X==="imageUrl"&&(E.value=re[X]);for(const j in g)X===j&&(g[j]=re[X],X==="fontSize"&&!P.includes(re.fontSize)&&(g.fontSize=re.fontSize+" pt"),X==="color"&&(M.value=re.color))}};core.addEvent("contentPropertyChange",Y);const Q=(re,X)=>{core.setContentEditorProperty(o.value,{[re]:X})},q=re=>{areColorsSimilar(re,g.color)||D(re)},ne=re=>{M.value=re},J=()=>{n.closeElement("contentEditorPanel")};return(re,X)=>{const j=__unplugin_components_14$3,Z=__unplugin_components_1$e,W=__unplugin_components_0$z,te=__unplugin_components_6$a,le=__unplugin_components_4$e,oe=__unplugin_components_7$9,Ee=__unplugin_components_6$9,Ae=__unplugin_components_7$8,ve=__unplugin_components_8$7,ke=__unplugin_components_9$4,Ce=__unplugin_components_10$5,Pe=__unplugin_components_11$2,Me=__unplugin_components_12$1,Le=__unplugin_components_13,Te=__unplugin_components_14$2,ye=__unplugin_components_15$1;return openBlock(),createElementBlock("div",{class:normalizeClass(["editor-panel property-panel",{closed:!r.value,mobile:unref(isMobileDevice)}]),id:"editorPanel",style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 88px)"})},[createBaseVNode("div",_hoisted_1$3j,[createTextVNode(toDisplayString$1(o.value==="text"?unref(w)("editorPanel.textProp"):unref(w)("editorPanel.imageProp"))+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(j,{key:0,class:"close-button",onClick:J})):createCommentVNode("",!0)]),withDirectives(createBaseVNode("div",_hoisted_2$35,[createBaseVNode("div",_hoisted_3$2O,[createBaseVNode("div",_hoisted_4$12,toDisplayString$1(unref(w)("editorPanel.fontColor")),1),createBaseVNode("div",_hoisted_5$G,[createBaseVNode("span",_hoisted_6$u,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(g).color,"rgb(255, 0, 0)")}]),onClick:X[0]||(X[0]=_e=>D("rgb(255, 0, 0)"))},_hoisted_8$k,2)]),createBaseVNode("span",_hoisted_9$i,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(g).color,"rgb(255, 236, 102)")}]),onClick:X[1]||(X[1]=_e=>D("rgb(255, 236, 102)"))},_hoisted_11$f,2)]),createBaseVNode("span",_hoisted_12$e,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(g).color,"rgb(45, 119, 250)")}]),onClick:X[2]||(X[2]=_e=>D("rgb(45, 119, 250)"))},_hoisted_14$e,2)]),unref(isMobileDevice)?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",_hoisted_15$e,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(g).color,"rgb(255, 246, 179)")}]),onClick:X[3]||(X[3]=_e=>D("rgb(255, 246, 179)"))},_hoisted_17$c,2)]),createBaseVNode("span",_hoisted_18$b,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(g).color,"rgb(254, 191, 191)")}]),onClick:X[4]||(X[4]=_e=>D("rgb(254, 191, 191)"))},_hoisted_20$b,2)]),createBaseVNode("span",_hoisted_21$b,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(g).color,"rgb(100, 188, 56)")}]),onClick:X[5]||(X[5]=_e=>D("rgb(100, 188, 56)"))},_hoisted_23$a,2)])],64)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_24$a,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:M.value})},null,4),createVNode(unref(NColorPicker),{to:"#editorPanel",onComplete:q,"onUpdate:value":ne,value:M.value,"show-alpha":!1},{label:withCtx(()=>[_hoisted_25$9]),_:1},8,["value"])])])]),createBaseVNode("div",_hoisted_26$9,[createBaseVNode("div",_hoisted_27$8,toDisplayString$1(unref(w)("opacity")),1),createBaseVNode("div",_hoisted_28$8,[createVNode(unref(NSlider),{value:unref(g).opacity,"onUpdate:value":X[6]||(X[6]=_e=>unref(g).opacity=_e),tooltip:!1,step:1,max:100,min:0,class:"width-slider","on-dragend":T},{thumb:withCtx(()=>[createVNode(Z)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(v),"onUpdate:value":[X[7]||(X[7]=_e=>isRef(v)?v.value=_e:v=_e),I],options:unref(m),to:"#editorPanel"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value","options"])])]),createBaseVNode("div",_hoisted_29$6,[createBaseVNode("div",_hoisted_30$6,toDisplayString$1(unref(w)("font")),1),createVNode(unref(NSelect),{value:unref(g).fontFamily,"onUpdate:value":X[8]||(X[8]=_e=>unref(g).fontFamily=_e),options:x.value,to:"#editorPanel",class:"text-family"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value","options"]),createBaseVNode("div",_hoisted_31$6,[createVNode(unref(NSelect),{value:unref(g).fontStyle,"onUpdate:value":X[9]||(X[9]=_e=>unref(g).fontStyle=_e),options:k.value,to:"#editorPanel",class:"font-style-select"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value","options"]),createVNode(unref(NSelect),{value:unref(g).fontSize,"onUpdate:value":X[10]||(X[10]=_e=>unref(g).fontSize=_e),options:unref(S),to:"#editorPanel",class:"font-size-select"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value","options"])]),createBaseVNode("div",_hoisted_32$4,[createBaseVNode("div",{class:normalizeClass({active:unref(g).alignType===2}),onClick:X[11]||(X[11]=_e=>N(2))},[createBaseVNode("span",{class:normalizeClass({border:unref(g).alignType===3})},[createVNode(te)],2)],2),createBaseVNode("div",{class:normalizeClass({active:unref(g).alignType===5}),onClick:X[12]||(X[12]=_e=>N(5))},[createBaseVNode("span",{class:normalizeClass({border:unref(g).alignType===2})},[createVNode(le)],2)],2),createBaseVNode("div",{class:normalizeClass({active:unref(g).alignType===3}),onClick:X[13]||(X[13]=_e=>N(3))},[createBaseVNode("span",null,[createVNode(oe)])],2)])]),createBaseVNode("div",_hoisted_33$3,[createBaseVNode("div",_hoisted_34$3,toDisplayString$1(unref(w)("editorPanel.spacing")),1),createBaseVNode("div",_hoisted_35$3,[createBaseVNode("div",null,[createVNode(Ee),createVNode(unref(NInputNumber),{value:unref(g).lineSpacing,"onUpdate:value":[X[14]||(X[14]=_e=>unref(g).lineSpacing=_e),O],placeholder:unref(w)("editorPanel.lineSpacing"),min:"1",max:"10",step:.5,"update-value-on-input":!1},{"minus-icon":withCtx(()=>[_hoisted_36$3]),"add-icon":withCtx(()=>[_hoisted_37$3]),_:1},8,["value","placeholder"])]),createBaseVNode("div",null,[createVNode(Ae),createVNode(unref(NInputNumber),{value:unref(g).paragraphSpacing,"onUpdate:value":[X[15]||(X[15]=_e=>unref(g).paragraphSpacing=_e),F],placeholder:unref(w)("editorPanel.paragraphSpacing"),min:"0",max:"10",step:.5,"update-value-on-input":!1},{"minus-icon":withCtx(()=>[_hoisted_38$3]),"add-icon":withCtx(()=>[_hoisted_39$3]),_:1},8,["value","placeholder"])]),createBaseVNode("div",null,[createVNode(ve),createVNode(unref(NInputNumber),{value:unref(g).characterSpacing,"onUpdate:value":[X[16]||(X[16]=_e=>unref(g).characterSpacing=_e),U],placeholder:unref(w)("editorPanel.characterSpacing"),min:"0",max:"10",step:.5,"update-value-on-input":!1},{"minus-icon":withCtx(()=>[_hoisted_40$3]),"add-icon":withCtx(()=>[_hoisted_41$3]),_:1},8,["value","placeholder"])])])])],512),[[vShow,o.value==="text"]]),withDirectives(createBaseVNode("div",_hoisted_42$2,[createBaseVNode("div",_hoisted_43$2,[withDirectives(createBaseVNode("img",{src:E.value},null,8,_hoisted_44$2),[[vShow,E.value]])]),createBaseVNode("div",_hoisted_45$2,[createBaseVNode("div",_hoisted_46$2,toDisplayString$1(unref(w)("editorPanel.rotate")),1),createBaseVNode("div",_hoisted_47$2,[createBaseVNode("div",{onClick:X[17]||(X[17]=_e=>Q("rotate","90")),title:unref(w)("editorPanel.rotateLeft")},[createVNode(ke),createTextVNode(toDisplayString$1(unref(w)("editorPanel.rotateLeft")),1)],8,_hoisted_48$2),createBaseVNode("div",{onClick:X[18]||(X[18]=_e=>Q("rotate","-90")),title:unref(w)("editorPanel.rotateRight")},[createVNode(Ce),createTextVNode(toDisplayString$1(unref(w)("editorPanel.rotateRight")),1)],8,_hoisted_49$2)])]),createBaseVNode("div",_hoisted_50$2,[createBaseVNode("div",_hoisted_51$2,toDisplayString$1(unref(w)("editorPanel.flip")),1),createBaseVNode("div",_hoisted_52$1,[createBaseVNode("div",{onClick:X[19]||(X[19]=_e=>Q("flip","x")),title:unref(w)("editorPanel.flipHorizontal")},[createBaseVNode("span",null,[createVNode(Pe)])],8,_hoisted_53$1),createBaseVNode("div",{onClick:X[20]||(X[20]=_e=>Q("flip","y")),title:unref(w)("editorPanel.flipVertical")},[createBaseVNode("span",null,[createVNode(Me)])],8,_hoisted_54$1)])]),createBaseVNode("div",_hoisted_55$1,[createBaseVNode("div",_hoisted_56$1,toDisplayString$1(unref(w)("opacity")),1),createBaseVNode("div",_hoisted_57$2,[createVNode(unref(NSlider),{value:unref(g).opacity,"onUpdate:value":X[21]||(X[21]=_e=>unref(g).opacity=_e),tooltip:!1,step:1,max:100,min:0,"on-dragend":T,class:"width-slider"},{thumb:withCtx(()=>[createVNode(Z)]),_:1},8,["value"]),createVNode(unref(NSelect),{value:unref(v),"onUpdate:value":[X[22]||(X[22]=_e=>isRef(v)?v.value=_e:v=_e),I],options:unref(m),to:"#editorPanel"},{arrow:withCtx(()=>[createVNode(W)]),_:1},8,["value","options"])])]),createBaseVNode("div",_hoisted_58$2,[createBaseVNode("div",_hoisted_59$2,toDisplayString$1(unref(w)("editorPanel.tools")),1),createBaseVNode("div",_hoisted_60$2,[createBaseVNode("div",{onClick:X[23]||(X[23]=_e=>Q("tool","replace")),title:unref(w)("editorPanel.replace")},[createBaseVNode("span",null,[createVNode(Le)])],8,_hoisted_61$2),createBaseVNode("div",{onClick:X[24]||(X[24]=_e=>Q("tool","export")),title:unref(w)("editorPanel.export")},[createBaseVNode("span",null,[createVNode(Te)])],8,_hoisted_62$2),createBaseVNode("div",{onClick:X[25]||(X[25]=_e=>Q("tool","crop")),title:unref(w)("editorPanel.crop")},[createBaseVNode("span",null,[createVNode(ye)])],8,_hoisted_63$2)])])],512),[[vShow,o.value==="image"]])],6)}}},_sfc_main$3F={},_hoisted_1$3i={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$34=createBaseVNode("g",{id:"btn / close"},[createBaseVNode("circle",{id:"Ellipse 2704",cx:"8",cy:"8",r:"7",fill:"#999999"}),createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.07107 7.29289L4.88909 4.11091L4.18198 4.81802L7.36396 8L4.18198 11.182L4.88909 11.8891L8.07107 8.70711L11.253 11.8891L11.9602 11.182L8.77817 8L11.9602 4.81802L11.253 4.11091L8.07107 7.29289Z",fill:"white"})],-1),_hoisted_3$2N=[_hoisted_2$34];function _sfc_render$29(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3i,_hoisted_3$2N)}const __unplugin_components_0$v=_export_sfc(_sfc_main$3F,[["render",_sfc_render$29]]),LinkPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$3h={class:"sidebar-title"},_hoisted_2$33={class:"sidebar-tabs-header"},_hoisted_3$2M={class:"sidebar-content"},_hoisted_4$11=["placeholder"],_sfc_main$3E={__name:"LinkPanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=useDocumentStore(),o=ref("URL"),u=computed(()=>n.isElementOpen("linkPanel")),s=computed(()=>r.getActiveTool);computed(()=>n.getCurrentPage);const w=computed(()=>r.getTotalPages);let g=ref(""),v=ref(""),y=ref("");watch(()=>s.value,(M,T)=>{M!=="link"&&n.closeElement("linkPanel")}),watch(()=>u.value,(M,T)=>{M&&(n.closeElement("pageModePanel"),o.value=g.value?"URL":v.value?"PAGE":y.value?"EMAIL":"URL")}),watch(()=>v.value,(M,T)=>{const D=/^\d+$/;M!==""&&(M>w.value||M<=0||!D.test(M))&&(v.value=T)});const m=M=>{o.value=M},d=()=>o.value==="URL"&&x(g.value)||o.value==="PAGE"&&v.value||o.value==="EMAIL"&&f(y.value),f=M=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M),x=M=>/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i.test(M),k=()=>{if(o.value==="URL")r.setPropertyPanel({destPage:"",url:g.value});else if(o.value==="PAGE")r.setPropertyPanel({url:"",destPage:v.value});else if(o.value==="EMAIL"){const M=y.value.startsWith("mailto:");r.setPropertyPanel({destPage:"",url:M?y.value:"mailto:"+y.value})}n.closeElement("linkPanel")},P=M=>{M?(M.url&&M.url.startsWith("mailto:")?(y.value=M.url.replace("mailto:",""),g.value="",v.value="",o.value="email"):M.url?(g.value=M.url,y.value="",v.value="",o.value="URL"):M.destPage?(v.value=M.destPage,g.value="",y.value="",o.value="PAGE"):(v.value="",g.value="",y.value="",o.value="URL"),n.openElement("linkPanel")):n.closeElement("linkPanel")};core.addEvent("linkPanelChange",P);const S=()=>{o.value==="URL"?g.value="":o.value==="PAGE"?v.value="":o.value==="EMAIL"&&(y.value="")},E=()=>{n.closeElement("linkPanel")};return(M,T)=>{const D=__unplugin_components_14$3,I=_sfc_main$4l,N=__unplugin_components_0$v;return openBlock(),createElementBlock("div",{class:normalizeClass(["link-panel",{closed:!u.value,mobile:unref(isMobileDevice)}]),id:"linkPanel",style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 88px)"})},[createBaseVNode("div",_hoisted_1$3h,[createTextVNode(toDisplayString$1(M.$t("linkPanel.linkTo"))+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(D,{key:0,class:"close-button",onClick:E})):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_2$33,[createVNode(I,{className:o.value==="URL"?"active":"",isActive:o.value==="URL","data-element":"URL",onClick:T[0]||(T[0]=O=>m("URL"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(M.$t("linkPanel.url")),1)]),_:1},8,["className","isActive"]),createVNode(I,{className:o.value==="PAGE"?"active":"",isActive:o.value==="PAGE","data-element":"PAGE",onClick:T[1]||(T[1]=O=>m("PAGE"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(M.$t("linkPanel.goToPages")),1)]),_:1},8,["className","isActive"]),createVNode(I,{className:o.value==="EMAIL"?"active":"",isActive:o.value==="EMAIL","data-element":"EMAIL",onClick:T[2]||(T[2]=O=>m("EMAIL"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(M.$t("linkPanel.email")),1)]),_:1},8,["className","isActive"])]),createBaseVNode("div",_hoisted_3$2M,[createBaseVNode("div",{class:normalizeClass(["input-container",{hidden:o.value!=="URL"}])},[withDirectives(createBaseVNode("input",{type:"text",placeholder:"https://www.example.com","onUpdate:modelValue":T[3]||(T[3]=O=>isRef(g)?g.value=O:g=O),name:"link"},null,512),[[vModelText,unref(g)]]),withDirectives(createVNode(N,{onClick:S},null,512),[[vShow,unref(g)]])],2),createBaseVNode("div",{class:normalizeClass(["input-container",{hidden:o.value!=="PAGE"}])},[withDirectives(createBaseVNode("input",{type:"text",pattern:"\\d*",placeholder:`1~${w.value}`,"onUpdate:modelValue":T[4]||(T[4]=O=>isRef(v)?v.value=O:v=O),onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",name:"link"},null,8,_hoisted_4$11),[[vModelText,unref(v)]]),withDirectives(createVNode(N,{onClick:S},null,512),[[vShow,unref(v)]])],2),createBaseVNode("div",{class:normalizeClass(["input-container",{hidden:o.value!=="EMAIL"}])},[withDirectives(createBaseVNode("input",{type:"text",placeholder:"support@compdf.com","onUpdate:modelValue":T[5]||(T[5]=O=>isRef(y)?y.value=O:y=O),name:"link"},null,512),[[vModelText,unref(y)]]),withDirectives(createVNode(N,{onClick:S},null,512),[[vShow,unref(y)]])],2),createBaseVNode("div",{class:normalizeClass(["save rect-button blue",{disabled:!d()}]),onClick:k},toDisplayString$1(M.$t("linkPanel.go")),3)])],6)}}},_imports_0$1=""+new URL("../images/stamp/Approved.png",import.meta.url).href,_imports_1=""+new URL("../images/stamp/NotApproved.png",import.meta.url).href,_imports_2=""+new URL("../images/stamp/Completed.png",import.meta.url).href,_imports_3=""+new URL("../images/stamp/Final.png",import.meta.url).href,_imports_4=""+new URL("../images/stamp/Draft.png",import.meta.url).href,_imports_5=""+new URL("../images/stamp/Confidential.png",import.meta.url).href,_imports_6=""+new URL("../images/stamp/ForPublicRelease.png",import.meta.url).href,_imports_7=""+new URL("../images/stamp/NotForPublicRelease.png",import.meta.url).href,_imports_8=""+new URL("../images/stamp/ForComment.png",import.meta.url).href,_imports_9=""+new URL("../images/stamp/Void.png",import.meta.url).href,_imports_10=""+new URL("../images/stamp/PreliminaryResults.png",import.meta.url).href,_imports_11=""+new URL("../images/stamp/InformationOnly.png",import.meta.url).href,_imports_12=""+new URL("../images/stamp/Witness.png",import.meta.url).href,_imports_13=""+new URL("../images/stamp/InitialHere.png",import.meta.url).href,_imports_14=""+new URL("../images/stamp/SignHere.png",import.meta.url).href,_imports_15=""+new URL("../images/stamp/revised.png",import.meta.url).href;class renderStampPreview{updateStampPreview({imgSrc:n,width:r,height:o,stampType:u,contents:s,stampColor:w,time:g}){this.width=r,this.height=o,this.imgSrc=n,this.stampType=u,this.contents=s,this.stampColor=w,this.time=g;const v=this.stampPreviewElement||document.createElement("div");v.innerHTML="",v.className="stamp-preview",this.applyStyles(v,{position:"absolute",border:"1px solid #00A4E4","z-index":85,"pointer-events":"none",left:"-9999px",top:"-9999px",width:r+"px",height:o+"px"}),document.body.appendChild(v);const y=document.createElement("img");this.applyStyles(y,{width:"100%",height:"100%"}),y.src=n,v.appendChild(y);const m=document.querySelector(".document");m.addEventListener("mousemove",this.handleMouseMove.bind(this,v)),m.addEventListener("mouseleave",()=>{v.style.left="-9999px",v.style.top="-9999px"}),this.stampPreviewElement=v}handleMouseMove(n,r){const o=n.getBoundingClientRect();this.applyStyles(n,{left:r.clientX-o.width/2+"px",top:r.clientY-o.height/2+"px"})}handleMouseLeave(n){this.applyStyles(n,{left:-9999,top:-9999})}hidePreview(){const n=this.stampPreviewElement||document.querySelector(".stamp-preview");n&&(n.style.display="none",n.remove(),this.stampPreviewElement=null,this.width=null,this.height=null,this.imgSrc=null,this.stampType=null,this.contents=null,this.stampColor=null,this.time=null)}applyStyles(n,r){Object.keys(r).forEach(o=>{n.style[o]=r[o]})}}const StampPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$3g={class:"sidebar-title"},_hoisted_2$32={class:"sidebar-tabs-header"},_hoisted_3$2L={class:"sidebar-content"},_hoisted_4$10={class:"block"},_hoisted_5$F={class:"block"},_hoisted_6$t={class:"block"},_hoisted_7$n={class:"block"},_hoisted_8$j={class:"block"},_hoisted_9$h={class:"block"},_hoisted_10$h={class:"block"},_hoisted_11$e={class:"block"},_hoisted_12$d={class:"block"},_hoisted_13$d={class:"block"},_hoisted_14$d={class:"block"},_hoisted_15$d={class:"block"},_hoisted_16$c={class:"block"},_hoisted_17$b={class:"block"},_hoisted_18$a={class:"block"},_hoisted_19$a={class:"block"},_hoisted_20$a={class:"dynamic-stamp red"},_hoisted_21$a=createBaseVNode("p",{class:"title"},"REVISED",-1),_hoisted_22$a={class:"dynamic-stamp green"},_hoisted_23$9=createBaseVNode("p",{class:"title"},"REVIEWED",-1),_hoisted_24$9={key:0,class:"empty-list"},_hoisted_25$8={class:"stamps-container"},_hoisted_26$8=["src"],_hoisted_27$7={class:"create-container"},_hoisted_28$7={key:0,class:"delete-page-popup"},_sfc_main$3D={__name:"StampPanel",props:["isHeaderDisabled"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useViewerStore(),u=useDocumentStore(),s=ref(!1),w=ref(0),g=computed(()=>o.getActiveElementTab("stampPanel")),v=computed(()=>o.isElementOpen("stampPanel")),y=computed(()=>u.getActiveTool);computed(()=>o.getCurrentPage);const m=computed(()=>o.getCustomStamps),d=ref(""),f=new renderStampPreview,x=()=>{o.openElement("createCustomStampDialog")};onMounted(()=>{E(),setInterval(E,1e3);const F=document.querySelector(".document-container");F&&F.addEventListener("click",P)});const k=F=>{var re;const U=core.getScrollViewElement();let Y=((re=document.querySelector(".document-container"))==null?void 0:re.style.marginLeft)||0;Y=parseFloat(Y);const Q=U.scrollLeft||0,q=U.scrollTop||0,{pageX:ne,pageY:J}=F;return{x:ne+Q-Y,y:J+q}},P=F=>{const U=k(F),Q=core.getSelectedPage(U,U).first;if(Q<1)return;const q=core.windowToPage(U,Q);if(f.stampPreviewElement){const{width:ne,height:J}=f,re={stampType:f.stampType,page:Q,rect:{x:q.x-ne/2,y:q.y-J/2,width:ne,height:J}};f.stampType==="dynamic"?(re.stampColor=f.stampColor,re.stampShape=0,re.contents=f.contents,re.time=d.value):f.stampType==="image"?re.imageBase64=f.imgSrc:re.contents=f.contents,core.handleStamp(re),f.hidePreview(),window.innerWidth<=640&&(u.setToolState("stamp"),o.toggleActiveHand(!1),n(0),r(0),o.closeElement("stampPanel"))}};watch(()=>y.value,(F,U)=>{F!=="stamp"&&o.closeElement("stampPanel")}),watch(()=>v.value,(F,U)=>{F&&S("STANDARD")});const S=F=>{o.setActiveElementTab("stampPanel",F)},E=()=>{const F=new Date;d.value=M(F)},M=F=>{const U=F.getFullYear(),Y=String(F.getMonth()+1).padStart(2,"0"),Q=String(F.getDate()).padStart(2,"0"),q=String(F.getHours()).padStart(2,"0"),ne=String(F.getMinutes()).padStart(2,"0"),J=String(F.getSeconds()).padStart(2,"0");return`${Q}/${Y}/${U} ${q}:${ne}:${J}`},T=async(F,U)=>{const Y=await core.getDynamicStampPreview({contents:U,time:d.value,stampColor:F,stampShape:0});f.updateStampPreview({imgSrc:Y.imgSrc,width:Y.width,height:Y.height,stampType:"dynamic",stampColor:F,contents:U,stampShape:0,time:d.value})},D=(F,U,Y)=>{U==="standard"?f.updateStampPreview({imgSrc:F.target.src,width:F.target.width,height:F.target.height,stampType:"standard",contents:Y}):f.updateStampPreview({imgSrc:F.target.src,width:F.target.width,height:F.target.height,stampType:"image",contents:Y})},I=()=>{o.closeElement("stampPanel"),u.setToolState("")},N=F=>{s.value=!0,w.value=F},O=()=>{o.removeCustomStamp(w.value),s.value=!1};return(F,U)=>{const Y=__unplugin_components_14$3,Q=_sfc_main$4l,q=__unplugin_components_2$f,ne=_sfc_main$4e;return openBlock(),createElementBlock("div",{class:normalizeClass(["stamp-panel",{closed:!v.value,mobile:unref(isMobileDevice)}]),style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 88px)"})},[createBaseVNode("div",_hoisted_1$3g,[createTextVNode(toDisplayString$1(F.$t("header.stamp"))+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(Y,{key:0,class:"close-button",onClick:I})):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_2$32,[createVNode(Q,{className:g.value==="STANDARD"?"active":"",isActive:g.value==="STANDARD","data-element":"STANDARD",onClick:U[0]||(U[0]=J=>S("STANDARD"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(F.$t("stampPanel.standard")),1)]),_:1},8,["className","isActive"]),createVNode(Q,{className:g.value==="DYNAMIC"?"active":"",isActive:g.value==="DYNAMIC","data-element":"DYNAMIC",onClick:U[1]||(U[1]=J=>S("DYNAMIC"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(F.$t("stampPanel.dynamic")),1)]),_:1},8,["className","isActive"]),createVNode(Q,{class:normalizeClass({active:g.value==="CUSTOM",mobile:unref(isMobileDevice)}),isActive:g.value==="CUSTOM","data-element":"CUSTOM",onClick:U[2]||(U[2]=J=>S("CUSTOM"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(F.$t("stampPanel.custom")),1)]),_:1},8,["class","isActive"])]),createBaseVNode("div",_hoisted_3$2L,[createBaseVNode("div",{class:normalizeClass(["standard-container",{hidden:g.value!=="STANDARD"}])},[createBaseVNode("div",_hoisted_4$10,[createBaseVNode("img",{onClick:U[3]||(U[3]=J=>D(J,"standard","Approved")),src:_imports_0$1,alt:"Approved"})]),createBaseVNode("div",_hoisted_5$F,[createBaseVNode("img",{onClick:U[4]||(U[4]=J=>D(J,"standard","Not Approved")),src:_imports_1,alt:"Not Approved"})]),createBaseVNode("div",_hoisted_6$t,[createBaseVNode("img",{onClick:U[5]||(U[5]=J=>D(J,"standard","Completed")),src:_imports_2,alt:"Completed"})]),createBaseVNode("div",_hoisted_7$n,[createBaseVNode("img",{onClick:U[6]||(U[6]=J=>D(J,"standard","Final")),src:_imports_3,alt:"Final"})]),createBaseVNode("div",_hoisted_8$j,[createBaseVNode("img",{onClick:U[7]||(U[7]=J=>D(J,"standard","Draft")),src:_imports_4,alt:"Draft"})]),createBaseVNode("div",_hoisted_9$h,[createBaseVNode("img",{onClick:U[8]||(U[8]=J=>D(J,"standard","Confidential")),src:_imports_5,alt:"Confidential"})]),createBaseVNode("div",_hoisted_10$h,[createBaseVNode("img",{onClick:U[9]||(U[9]=J=>D(J,"standard","For Public Release")),src:_imports_6,alt:"For Public Release"})]),createBaseVNode("div",_hoisted_11$e,[createBaseVNode("img",{onClick:U[10]||(U[10]=J=>D(J,"standard","Not For Public Release")),src:_imports_7,alt:"Not For Public Release"})]),createBaseVNode("div",_hoisted_12$d,[createBaseVNode("img",{onClick:U[11]||(U[11]=J=>D(J,"standard","For Comment")),src:_imports_8,alt:"For Comment"})]),createBaseVNode("div",_hoisted_13$d,[createBaseVNode("img",{onClick:U[12]||(U[12]=J=>D(J,"standard","Void")),src:_imports_9,alt:"Void"})]),createBaseVNode("div",_hoisted_14$d,[createBaseVNode("img",{onClick:U[13]||(U[13]=J=>D(J,"standard","Preliminary Results")),src:_imports_10,alt:"Preliminary Results"})]),createBaseVNode("div",_hoisted_15$d,[createBaseVNode("img",{onClick:U[14]||(U[14]=J=>D(J,"standard","Information Only")),src:_imports_11,alt:"Information Only"})]),createBaseVNode("div",_hoisted_16$c,[createBaseVNode("img",{onClick:U[15]||(U[15]=J=>D(J,"standard","Witness")),src:_imports_12,alt:"Witness"})]),createBaseVNode("div",_hoisted_17$b,[createBaseVNode("img",{onClick:U[16]||(U[16]=J=>D(J,"standard","Initial Here")),src:_imports_13,alt:"Initial Here"})]),createBaseVNode("div",_hoisted_18$a,[createBaseVNode("img",{onClick:U[17]||(U[17]=J=>D(J,"standard","Sign Here")),src:_imports_14,alt:"Sign Here"})]),createBaseVNode("div",_hoisted_19$a,[createBaseVNode("img",{onClick:U[18]||(U[18]=J=>D(J,"standard","revised")),src:_imports_15,alt:"revised"})])],2),createBaseVNode("div",{class:normalizeClass(["customize-container",{hidden:g.value!=="DYNAMIC"}])},[createBaseVNode("div",{class:"block",onClick:U[19]||(U[19]=J=>T(1,"REVISED"))},[createBaseVNode("div",_hoisted_20$a,[_hoisted_21$a,createBaseVNode("p",null,toDisplayString$1(d.value),1)])]),createBaseVNode("div",{class:"block",onClick:U[20]||(U[20]=J=>T(2,"REVIEWED"))},[createBaseVNode("div",_hoisted_22$a,[_hoisted_23$9,createBaseVNode("p",null,toDisplayString$1(d.value),1)])])],2),createBaseVNode("div",{class:normalizeClass(["custom-container",{hidden:g.value!=="CUSTOM"}])},[m.value.length===0?(openBlock(),createElementBlock("div",_hoisted_24$9,toDisplayString$1(F.$t("stampPanel.blank")),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_25$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(m.value,(J,re)=>(openBlock(),createElementBlock("div",{class:"block",key:re},[createBaseVNode("img",{onClick:U[21]||(U[21]=X=>D(X,"custom","")),src:J},null,8,_hoisted_26$8),createVNode(Q,{class:"close-button",onClick:X=>N(re)},{default:withCtx(()=>[createVNode(Y)]),_:2},1032,["onClick"])]))),128))]),createBaseVNode("div",_hoisted_27$7,[createBaseVNode("div",{class:"create-button",onClick:U[22]||(U[22]=J=>x())},toDisplayString$1(F.$t("stampPanel.create")),1)])],2)]),s.value?(openBlock(),createElementBlock("div",_hoisted_28$7,[createVNode(ne,{show:s.value,dialogName:F.dialogName},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:U[23]||(U[23]=J=>s.value=!1)},toDisplayString$1(F.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:O},toDisplayString$1(F.$t("ok")),1)]),default:withCtx(()=>[createVNode(q),createBaseVNode("p",null,toDisplayString$1(F.$t("signatures.deleteConfirm")),1)]),_:1},8,["show","dialogName"])])):createCommentVNode("",!0)],6)}}},_sfc_main$3C={},_hoisted_1$3f={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$31=createBaseVNode("mask",{id:"path-1-inside-1_334_4981",fill:"white"},[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.58408 11.3387C4.3368 11.6625 7.20552 10.7684 9.31754 8.65635C11.1899 6.78404 12.105 4.31705 12.0631 1.86338C12.9045 2.2377 13.6927 2.76991 14.3828 3.46C17.399 6.47625 17.399 11.3666 14.3828 14.3828C11.3665 17.3991 6.47623 17.3991 3.45998 14.3828C2.57505 13.4979 1.94975 12.4516 1.58408 11.3387Z"})],-1),_hoisted_3$2K=createBaseVNode("path",{d:"M1.58412 11.3387L1.75933 9.849L-0.574465 9.57451L0.159076 11.807L1.58412 11.3387ZM12.0631 1.86337L12.6728 0.492869L10.5232 -0.46347L10.5634 1.889L12.0631 1.86337ZM8.25692 7.59568C6.48322 9.36938 4.07577 10.1214 1.75933 9.849L1.40891 12.8285C4.59792 13.2035 7.9279 12.1673 10.3782 9.717L8.25692 7.59568ZM10.5634 1.889C10.5986 3.95285 9.82995 6.02265 8.25692 7.59568L10.3782 9.717C12.5498 7.54541 13.6115 4.68123 13.5629 1.83774L10.5634 1.889ZM11.4535 3.23387C12.1295 3.5346 12.7642 3.96264 13.3222 4.52064L15.4435 2.39932C14.6213 1.57714 13.6796 0.940768 12.6728 0.492869L11.4535 3.23387ZM13.3222 4.52064C15.7526 6.95111 15.7526 10.8917 13.3222 13.3221L15.4435 15.4435C19.0455 11.8414 19.0455 6.00136 15.4435 2.39932L13.3222 4.52064ZM13.3222 13.3221C10.8917 15.7526 6.95115 15.7526 4.52068 13.3221L2.39936 15.4435C6.0014 19.0455 11.8415 19.0455 15.4435 15.4435L13.3222 13.3221ZM4.52068 13.3221C3.80572 12.6072 3.30315 11.7652 3.00916 10.8705L0.159076 11.807C0.596442 13.1381 1.34447 14.3886 2.39936 15.4435L4.52068 13.3221Z",fill:"currentColor",mask:"url(#path-1-inside-1_334_4981)"},null,-1),_hoisted_4$$=[_hoisted_2$31,_hoisted_3$2K];function _sfc_render$28(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3f,_hoisted_4$$)}const __unplugin_components_8$6=_export_sfc(_sfc_main$3C,[["render",_sfc_render$28]]),_sfc_main$3B={},_hoisted_1$3e={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$30=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.99938 3.50634C9.58517 3.50634 9.24938 3.17055 9.24938 2.75634V1.57727C9.24938 1.16306 9.58517 0.827271 9.99938 0.827271C10.4136 0.827271 10.7494 1.16306 10.7494 1.57727V2.75634C10.7494 3.17055 10.4136 3.50634 9.99938 3.50634ZM14.7034 9.9044C14.7034 12.5498 12.5589 14.6944 9.91347 14.6944C7.26804 14.6944 5.1235 12.5498 5.1235 9.9044C5.1235 7.25898 7.26804 5.11444 9.91347 5.11444C12.5589 5.11444 14.7034 7.25898 14.7034 9.9044ZM14.5886 4.34193C14.2954 4.63444 14.2954 5.1087 14.5886 5.40121C14.8819 5.69373 15.3574 5.69373 15.6507 5.40121L16.4865 4.56749C16.7798 4.27497 16.7798 3.80071 16.4865 3.5082C16.1933 3.21569 15.7178 3.21569 15.4245 3.5082L14.5886 4.34193ZM16.4906 9.97809C16.4906 9.56388 16.8264 9.22809 17.2406 9.22809H18.4227C18.837 9.22809 19.1727 9.56388 19.1727 9.97809C19.1727 10.3923 18.837 10.7281 18.4227 10.7281H17.2406C16.8264 10.7281 16.4906 10.3923 16.4906 9.97809ZM15.6507 14.555C15.3574 14.2624 14.8819 14.2624 14.5887 14.555C14.2954 14.8475 14.2954 15.3217 14.5887 15.6142L15.4245 16.448C15.7178 16.7405 16.1933 16.7405 16.4866 16.448C16.7798 16.1555 16.7798 15.6812 16.4866 15.3887L15.6507 14.555ZM9.99947 16.4497C10.4137 16.4497 10.7495 16.7855 10.7495 17.1997V18.3788C10.7495 18.793 10.4137 19.1288 9.99947 19.1288C9.58526 19.1288 9.24947 18.793 9.24947 18.3788V17.1997C9.24947 16.7855 9.58526 16.4497 9.99947 16.4497ZM5.41081 15.6142C5.70408 15.3217 5.70408 14.8474 5.41081 14.5549C5.11754 14.2624 4.64205 14.2624 4.34878 14.5549L3.51289 15.3887C3.21962 15.6812 3.21962 16.1554 3.51289 16.4479C3.80616 16.7405 4.28165 16.7405 4.57492 16.4479L5.41081 15.6142ZM3.50939 9.97805C3.50939 10.3923 3.1736 10.728 2.75939 10.728H1.57727C1.16306 10.728 0.827271 10.3923 0.827271 9.97805C0.827271 9.56384 1.16306 9.22805 1.57727 9.22805H2.75939C3.1736 9.22805 3.50939 9.56384 3.50939 9.97805ZM4.34874 5.40119C4.64201 5.6937 5.1175 5.6937 5.41077 5.40119C5.70405 5.10867 5.70405 4.63442 5.41077 4.3419L4.57489 3.50818C4.28162 3.21566 3.80613 3.21566 3.51286 3.50818C3.21958 3.80069 3.21958 4.27495 3.51286 4.56746L4.34874 5.40119Z",fill:"currentColor"},null,-1),_hoisted_3$2J=[_hoisted_2$30];function _sfc_render$27(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3e,_hoisted_3$2J)}const __unplugin_components_7$7=_export_sfc(_sfc_main$3B,[["render",_sfc_render$27]]),_sfc_main$3A={},_hoisted_1$3d={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2$=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M22.5 5H2.5V19H22.5V5ZM6.34628 13.75L6.6731 12.7365H8.05023L8.37455 13.75H8.96333L7.66353 10H7.05979L5.76 13.75H6.34628ZM7.90054 12.2687H6.82279L7.33921 10.6575H7.38162L7.90054 12.2687ZM12 18V6H13V18H12ZM18.0694 12.6923C18.0694 13.3498 17.6078 13.75 16.8394 13.75H15.36V10H16.807C17.4831 10 17.8897 10.3586 17.8897 10.933V10.9381C17.8897 11.328 17.6128 11.6788 17.2585 11.7412V11.7853C17.745 11.8399 18.0694 12.1985 18.0694 12.6871V12.6923ZM15.9188 11.5956H16.5825C17.0764 11.5956 17.3334 11.4033 17.3334 11.0395V11.0343C17.3334 10.6809 17.0914 10.4756 16.6773 10.4756H15.9188V11.5956ZM16.7272 13.2744H15.9188V12.04H16.6947C17.2211 12.04 17.498 12.2479 17.498 12.6507V12.6559C17.498 13.0587 17.2311 13.2744 16.7272 13.2744Z",fill:"currentColor"},null,-1),_hoisted_3$2I=[_hoisted_2$2$];function _sfc_render$26(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3d,_hoisted_3$2I)}const __unplugin_components_6$8=_export_sfc(_sfc_main$3A,[["render",_sfc_render$26]]),_sfc_main$3z={},_hoisted_1$3c={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2_=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 4V20H20.5V4H3.5ZM4 12.5H20V11.5H4V12.5ZM11.4511 9.23649L11.1107 10.25H10.5L11.854 6.5H12.4828L13.8368 10.25H13.2235L12.8857 9.23649H11.4511ZM11.6071 8.76871H12.7297L12.1892 7.15748H12.145L11.6071 8.76871ZM13.8222 16.3923C13.8222 17.0498 13.3415 17.45 12.5411 17.45H11V13.7H12.5073C13.2115 13.7 13.6351 14.0586 13.6351 14.633V14.6382C13.6351 15.028 13.3467 15.3788 12.9777 15.4412V15.4854C13.4844 15.5399 13.8222 15.8986 13.8222 16.3871V16.3923ZM11.5821 15.2956H12.2734C12.7879 15.2956 13.0556 15.1033 13.0556 14.7395V14.7343C13.0556 14.3809 12.8035 14.1756 12.3721 14.1756H11.5821V15.2956ZM12.4241 16.9744H11.5821V15.74H12.3903C12.9387 15.74 13.2271 15.9479 13.2271 16.3507V16.3559C13.2271 16.7587 12.9491 16.9744 12.4241 16.9744Z",fill:"currentColor"},null,-1),_hoisted_3$2H=[_hoisted_2$2_];function _sfc_render$25(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3c,_hoisted_3$2H)}const __unplugin_components_5$8=_export_sfc(_sfc_main$3z,[["render",_sfc_render$25]]),_sfc_main$3y={},_hoisted_1$3b={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2Z=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 15H1V21H11V15ZM23 15H13V21H23V15Z",fill:"currentColor"},null,-1),_hoisted_3$2G=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1 3H8L11 6.2V13H1V3Z",fill:"currentColor"},null,-1),_hoisted_4$_=[_hoisted_2$2Z,_hoisted_3$2G];function _sfc_render$24(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3b,_hoisted_4$_)}const __unplugin_components_4$d=_export_sfc(_sfc_main$3y,[["render",_sfc_render$24]]),_sfc_main$3x={},_hoisted_1$3a={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2Y=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 5H1V19H11V5ZM19 5H13V19H23V9.2L19 5Z",fill:"currentColor"},null,-1),_hoisted_3$2F=[_hoisted_2$2Y];function _sfc_render$23(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$3a,_hoisted_3$2F)}const __unplugin_components_3$d=_export_sfc(_sfc_main$3x,[["render",_sfc_render$23]]),_sfc_main$3w={},_hoisted_1$39={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2X=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6 4H14L18 8.2V20H6V4Z",fill:"currentColor"},null,-1),_hoisted_3$2E=[_hoisted_2$2X];function _sfc_render$22(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$39,_hoisted_3$2E)}const __unplugin_components_1$a=_export_sfc(_sfc_main$3w,[["render",_sfc_render$22]]),RightPanelPageMode_vue_vue_type_style_index_0_lang="",_hoisted_1$38={class:"sidebar-title"},_hoisted_2$2W={class:"mode-container"},_hoisted_3$2D={class:"mode-item"},_hoisted_4$Z={class:"mode-tabs"},_hoisted_5$E={class:"mode-item"},_hoisted_6$s={class:"mode-tabs"},_hoisted_7$m={class:"mode-item"},_hoisted_8$i={class:"mode-tabs"},_sfc_main$3v={__name:"RightPanelPageMode",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen("pageModePanel")),u=computed(()=>n.getScrollMode),s=computed(()=>n.getPageMode),w=computed(()=>n.getThemeMode),g=computed(()=>r.getActiveTool);watch(o,(f,x)=>{f&&g.value==="cropPage"&&r.setToolState("")});const v=(f,x)=>{s.value!==0&&f==="Horizontal"&&(core.switchSpreadMode(0),n.setPageMode(0)),n.setScrollMode(f),core.switchScrollMode(x)},y=f=>{u.value==="Horizontal"&&(n.setScrollMode("Vertical"),core.switchScrollMode(0)),core.switchSpreadMode(f),n.setPageMode(f)},m=f=>{f!==w.value&&n.setThemeMode(f)},d=()=>{n.closeElement("pageModePanel")};return(f,x)=>{const k=__unplugin_components_14$3,P=__unplugin_components_1$a,S=_sfc_main$4l,E=__unplugin_components_3$d,M=__unplugin_components_4$d,T=__unplugin_components_5$8,D=__unplugin_components_6$8,I=__unplugin_components_7$7,N=__unplugin_components_8$6;return openBlock(),createElementBlock("div",{class:normalizeClass(["right-panel-page",{closed:!o.value,mobile:unref(isMobileDevice)}]),style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 44px)"})},[unref(isMobileDevice)?(openBlock(),createBlock(k,{key:0,class:"close-button",onClick:d})):createCommentVNode("",!0),createBaseVNode("div",_hoisted_1$38,toDisplayString$1(f.$t("header.viewSetting")),1),createBaseVNode("div",_hoisted_2$2W,[createBaseVNode("div",_hoisted_3$2D,[createBaseVNode("h2",null,toDisplayString$1(f.$t("pageModePanel.displayMode")),1),createBaseVNode("div",_hoisted_4$Z,[createVNode(S,{class:normalizeClass({active:s.value===0}),onClick:x[0]||(x[0]=O=>y(0)),title:f.$t("pageModePanel.singlePage")},{default:withCtx(()=>[createVNode(P)]),_:1},8,["class","title"]),createVNode(S,{class:normalizeClass({active:s.value===1}),onClick:x[1]||(x[1]=O=>y(1)),title:f.$t("pageModePanel.twoPages")},{default:withCtx(()=>[createVNode(E)]),_:1},8,["class","title"]),createVNode(S,{class:normalizeClass({active:s.value===2}),onClick:x[2]||(x[2]=O=>y(2)),title:f.$t("pageModePanel.coverMode")},{default:withCtx(()=>[createVNode(M)]),_:1},8,["class","title"])])]),createBaseVNode("div",_hoisted_5$E,[createBaseVNode("h2",null,toDisplayString$1(f.$t("pageModePanel.splitView")),1),createBaseVNode("div",_hoisted_6$s,[createVNode(S,{class:normalizeClass({active:u.value==="Vertical"}),onClick:x[3]||(x[3]=O=>v("Vertical",0)),title:f.$t("pageModePanel.vertical")},{default:withCtx(()=>[createVNode(T)]),_:1},8,["class","title"]),createVNode(S,{class:normalizeClass({active:u.value==="Horizontal"}),onClick:x[4]||(x[4]=O=>v("Horizontal",1)),title:f.$t("pageModePanel.horizontal")},{default:withCtx(()=>[createVNode(D)]),_:1},8,["class","title"])])]),createBaseVNode("div",_hoisted_7$m,[createBaseVNode("h2",null,toDisplayString$1(f.$t("pageModePanel.themes")),1),createBaseVNode("div",_hoisted_8$i,[createVNode(S,{onClick:x[5]||(x[5]=O=>m("Light")),class:normalizeClass({active:w.value==="Light"}),title:f.$t("header.light")},{default:withCtx(()=>[createVNode(I)]),_:1},8,["class","title"]),createVNode(S,{onClick:x[6]||(x[6]=O=>m("Dark")),class:normalizeClass({active:w.value==="Dark"}),title:f.$t("header.dark")},{default:withCtx(()=>[createVNode(N)]),_:1},8,["class","title"])])])])],6)}}},_sfc_main$3u={},_hoisted_1$37={width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2V=createBaseVNode("path",{d:"M5 0.0517578C5.2793 0.0517578 5.47803 0.245117 5.47803 0.524414V7.59814L5.44043 8.74219L7.04639 6.98047L8.271 5.77734C8.35693 5.69141 8.48047 5.64844 8.60938 5.64844C8.87793 5.64844 9.07129 5.85254 9.07129 6.11572C9.07129 6.24463 9.02832 6.35742 8.92627 6.46484L5.35986 10.0366C5.25781 10.144 5.13428 10.1978 5 10.1978C4.86572 10.1978 4.74219 10.144 4.64014 10.0366L1.0791 6.46484C0.977051 6.35742 0.928711 6.24463 0.928711 6.11572C0.928711 5.85254 1.12207 5.64844 1.39062 5.64844C1.51953 5.64844 1.64844 5.69141 1.729 5.77734L2.95361 6.98047L4.56494 8.74756L4.52197 7.59814V0.524414C4.52197 0.245117 4.7207 0.0517578 5 0.0517578Z",fill:"currentColor"},null,-1),_hoisted_3$2C=[_hoisted_2$2V];function _sfc_render$21(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$37,_hoisted_3$2C)}const __unplugin_components_7$6=_export_sfc(_sfc_main$3u,[["render",_sfc_render$21]]),_sfc_main$3t={},_hoisted_1$36={width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2U=createBaseVNode("path",{d:"M5 10.1978C4.7207 10.1978 4.52197 10.0044 4.52197 9.7251V2.65137L4.56494 1.50195L2.95361 3.26904L1.729 4.47217C1.64844 4.55811 1.51953 4.60107 1.39062 4.60107C1.12207 4.60107 0.928711 4.39697 0.928711 4.13379C0.928711 4.00488 0.977051 3.89209 1.0791 3.78467L4.64014 0.212891C4.74219 0.105469 4.86572 0.0517578 5 0.0517578C5.13428 0.0517578 5.25781 0.105469 5.35986 0.212891L8.92627 3.78467C9.02832 3.89209 9.07129 4.00488 9.07129 4.13379C9.07129 4.39697 8.87793 4.60107 8.60938 4.60107C8.48047 4.60107 8.35693 4.55811 8.271 4.47217L7.04639 3.26904L5.44043 1.50732L5.47803 2.65137V9.7251C5.47803 10.0044 5.2793 10.1978 5 10.1978Z",fill:"currentColor"},null,-1),_hoisted_3$2B=[_hoisted_2$2U];function _sfc_render$20(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$36,_hoisted_3$2B)}const __unplugin_components_6$7=_export_sfc(_sfc_main$3t,[["render",_sfc_render$20]]),_sfc_main$3s={},_hoisted_1$35={width:"10",height:"2",viewBox:"0 0 10 2",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2T=createBaseVNode("path",{d:"M1.04688 1.61084C0.789062 1.61084 0.568848 1.39062 0.568848 1.12744C0.568848 0.864258 0.789062 0.649414 1.04688 0.649414H8.95312C9.21094 0.649414 9.43115 0.864258 9.43115 1.12744C9.43115 1.39062 9.21094 1.61084 8.95312 1.61084H1.04688Z",fill:"currentColor"},null,-1),_hoisted_3$2A=[_hoisted_2$2T];function _sfc_render$1$(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$35,_hoisted_3$2A)}const __unplugin_components_5$7=_export_sfc(_sfc_main$3s,[["render",_sfc_render$1$]]),_sfc_main$3r={},_hoisted_1$34={width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2S=createBaseVNode("path",{d:"M5 9.6499C4.73682 9.6499 4.52197 9.44043 4.52197 9.18262V5.61084H1.04688C0.789062 5.61084 0.568848 5.39062 0.568848 5.12744C0.568848 4.86426 0.789062 4.64941 1.04688 4.64941H4.52197V1.07227C4.52197 0.814453 4.73682 0.60498 5 0.60498C5.26318 0.60498 5.4834 0.814453 5.4834 1.07227V4.64941H8.95312C9.21094 4.64941 9.43115 4.86426 9.43115 5.12744C9.43115 5.39062 9.21094 5.61084 8.95312 5.61084H5.4834V9.18262C5.4834 9.44043 5.26318 9.6499 5 9.6499Z",fill:"currentColor"},null,-1),_hoisted_3$2z=[_hoisted_2$2S];function _sfc_render$1_(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$34,_hoisted_3$2z)}const __unplugin_components_4$c=_export_sfc(_sfc_main$3r,[["render",_sfc_render$1_]]),_sfc_main$3q={},_hoisted_1$33={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},_hoisted_2$2R=createStaticVNode('<mask id="mask0_3348_1984" style="mask-type:luminance;" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="24"><circle cx="12" cy="12" r="12" fill="white"></circle></mask><g mask="url(#mask0_3348_1984)"><rect x="-22.2856" y="-29.1428" width="65.1427" height="80.5713" fill="url(#pattern0_3348_1984)"></rect></g><defs><pattern id="pattern0_3348_1984" patternContentUnits="objectBoundingBox" width="1" height="1"><use xlink:href="#image0_3348_1984" transform="scale(0.0263158 0.0212766)"></use></pattern><image id="image0_3348_1984" width="38" height="47" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAvCAYAAACPMrhmAAAKs2lDQ1BJQ0MgUHJvZmlsZQAASImVlgdUE9kax+/MpBdaAAEpoTfpLYD0Grp0EJWQUEKJMSGI2FBZVEBRRETAhi6CKLgWQNaCiGJFUSkquiCLirIuFkRFZQd4hLfvnffeeV/ON/d3vtz57n/uzD3nDwClj8Xnp8JSAKTx0gXBXq70yKhoOv45QAAWSAFFoMJiC/kuQUF+AI3Z8e/xqRtAU+MDo6le//7/fw1pTryQDQAUhHIcR8hOQ/kMmq1sviAdACQTrWuuTOdPcQXKsgJUIMonpzhxhtumOG6Ge6fnhAa7oTwCAIHCYgkSASB/Ruv0DHYi2oeigLIpj8PloeyNsiM7icVBeQvKC9LSlk8xqgHoxf1Tn8S/9YwT92SxEsU88yzTQXDnCvmprFX/53b870hLFc2uoYEmJUngHYyOSuieVacs9xUzLy4gcJa5nOn505wk8g6bZbbQLXqWOSx331kWpYS5zDJLMHcvN50ZOsuC5cHi/rzUAD9x/3immOOFHiGznMD1ZM5yVlJoxCxncMMDZlmYEuI7N8dNXBeIgsWaEwSe4mdME85pY7Pm1kpPCvWe0xAp1sOJd/cQ13lh4vn8dFdxT35q0Jz+VC9xXZgRIr43Hf3AZjmZ5RM01ydIvD8gHEQCc2CB/qwBHYQADxAMmOgVXTU9PjN9Srjbcv4qATcxKZ3ugp6ceDqTxzZeQDc3NWMAMHUOZ17zh97p8wXJE+ZqQvQ7X2gJAMZ8rhajBsDJCwBIbZur6TwDgCYBwEUeWyTImKlhpi5YQAKSQBY94apAE+gBI1SrNbAHzqhCHxAIQkEUWArYIAmkAQFYCdaADSAX5IMdYDcoAwfAYVANToBToBGcB5fBNXAL3ANd4AnoB0PgDRgFn8AEBEF4iArRIEVIDdKGDCFziAE5Qh6QHxQMRUGxUCLEg0TQGmgTlA8VQWXQIagG+gU6B12GbkCd0CNoABqG3kNfYQSmwLKwCqwDm8AM2AX2hUPhJXAivALOgnPg7XApXAkfhxvgy/AtuAvuh9/AYwhAyIg8oo4YIQzEDQlEopEERICsQ/KQEqQSqUOakXbkAdKPjCBfMDgMDUPHGGHsMd6YMAwbswKzDlOAKcNUYxowbZgHmAHMKOYHlopVxhpi7bBMbCQ2EbsSm4stwVZhz2KvYruwQ9hPOBxOHqeLs8F546JwybjVuALcPlw9rgXXiRvEjeHxeEW8Id4BH4hn4dPxufi9+OP4S/j7+CH8ZwKZoEYwJ3gSogk8wkZCCeEY4SLhPuElYYIoRdQm2hEDiRziKmIh8QixmXiXOEScIEmTdEkOpFBSMmkDqZRUR7pK6iN9IJPJGmRb8iIyl5xNLiWfJF8nD5C/UGQoBhQ3SgxFRNlOOUppoTyifKBSqTpUZ2o0NZ26nVpDvUJ9Rv0sQZMwlmBKcCTWS5RLNEjcl3grSZTUlnSRXCqZJVkieVryruSIFFFKR8pNiiW1Tqpc6pxUj9SYNE3aTDpQOk26QPqY9A3pVzJ4GR0ZDxmOTI7MYZkrMoM0hKZJc6OxaZtoR2hXaUOyOFldWaZssmy+7AnZDtlRORk5S7lwuUy5crkLcv3yiLyOPFM+Vb5Q/pR8t/zXeSrzXObFz9s6r27e/XnjCvMVnBXiFfIU6hW6FL4q0hU9FFMUdyo2Kj5VwigZKC1SWqm0X+mq0sh82fn289nz8+afmv9YGVY2UA5WXq18WPm28piKqoqXCl9lr8oVlRFVeVVn1WTVYtWLqsNqNDVHNa5asdoltdd0OboLPZVeSm+jj6orq3uri9QPqXeoT2joaoRpbNSo13iqSdJkaCZoFmu2ao5qqWn5a63RqtV6rE3UZmgnae/Rbtce19HVidDZrNOo80pXQZepm6Vbq9unR9Vz0luhV6n3UB+nz9BP0d+nf88ANrAySDIoN7hrCBtaG3IN9xl2LsAusF3AW1C5oMeIYuRilGFUazRgLG/sZ7zRuNH4rYmWSbTJTpN2kx+mVqappkdMn5jJmPmYbTRrNntvbmDONi83f2hBtfC0WG/RZPHO0tAy3nK/Za8VzcrfarNVq9V3axtrgXWd9bCNlk2sTYVND0OWEcQoYFy3xdq62q63PW/7xc7aLt3ulN2f9kb2KfbH7F8t1F0Yv/DIwkEHDQeWwyGHfke6Y6zjQcd+J3UnllOl03NnTWeOc5XzSxd9l2SX4y5vXU1dBa5nXcfd7NzWurW4I+5e7nnuHR4yHmEeZR7PPDU8Ez1rPUe9rLxWe7V4Y719vXd69zBVmGxmDXPUx8ZnrU+bL8U3xLfM97mfgZ/Ar9kf9vfx3+XfF6AdwAtoDASBzMBdgU+DdINWBP26CLcoaFH5ohfBZsFrgttDaCHLQo6FfAp1DS0MfRKmFyYKaw2XDI8Jrwkfj3CPKIrojzSJXBt5K0opihvVFI2PDo+uih5b7LF49+KhGKuY3JjuJbpLMpfcWKq0NHXphWWSy1jLTsdiYyNij8V+YwWyKlljccy4irhRtht7D/sNx5lTzBmOd4gvin+Z4JBQlPAq0SFxV+JwklNSSdII141bxn2X7J18IHk8JTDlaMpkakRqfRohLTbtHE+Gl8JrW666PHN5J9+Qn8vvX2G3YveKUYGvoEoICZcIm9JlUcNzW6Qn+kk0kOGYUZ7xeWX4ytOZ0pm8zNurDFZtXfUyyzPr59WY1ezVrWvU12xYM7DWZe2hddC6uHWt6zXX56wfyvbKrt5A2pCy4c5G041FGz9uitjUnKOSk50z+JPXT7W5ErmC3J7N9psPbMFs4W7p2Gqxde/WH3mcvJv5pvkl+d8K2AU3t5ltK902uT1he0ehdeH+HbgdvB3dO512VhdJF2UVDe7y39VQTC/OK/64e9nuGyWWJQf2kPaI9vSX+pU27dXau2Pvt7Kksq5y1/L6CuWKrRXj+zj77u933l93QOVA/oGvB7kHew95HWqo1KksOYw7nHH4xZHwI+0/M36uqVKqyq/6fpR3tL86uLqtxqam5pjyscJauFZUO3w85vi9E+4nmuqM6g7Vy9fnnwQnRSdf/xL7S/cp31Otpxmn685on6k4Szub1wA1rGoYbUxq7G+Kauo853Outdm++eyvxr8ePa9+vvyC3IXCi6SLORcnL2VdGmvht4xcTrw82Lqs9cmVyCsP2xa1dVz1vXr9mue1K+0u7ZeuO1w/f8PuxrmbjJuNt6xvNdy2un32jtWdsx3WHQ13be423bO919y5sPPifaf7lx+4P7j2kPnwVldAV2d3WHdvT0xPfy+n99Wj1EfvHmc8nniS3Yfty3sq9bTkmfKzyt/0f6vvt+6/MOA+cPt5yPMng+zBN78Lf/82lPOC+qLkpdrLmlfmr84Pew7fe7349dAb/puJkdw/pP+oeKv39syfzn/eHo0cHXoneDf5vuCD4oejHy0/to4FjT37lPZpYjzvs+Ln6i+ML+1fI76+nFj5Df+t9Lv+9+Yfvj/6JtMmJ/ksAWvaCiBowgkJALw/CgA1CvUK9wAgScz45OmAZrz9NIH/xDNeejqsAah0BiAMTf8WAA5mox4ETWk0g9BaqDOALSzE+Y8QJliYz/QiN6LWpGRy8gPqD/H6AHzvmZycaJyc/F6Fin0MQMunGX8+FdGoD3Y2mKI7W0nZ4F/iL/OdBdopifIkAAAEQklEQVRYCe2WzYsjRRjGn+5OV3cn6XxOdj7WHXFlHFdxRfak6ODFHUSvggcR9CK4Bw/+IR7FgwdBWA+KshcZFTzo4sJ6ED/AYVlFZnYnmWSSSXfS3elOp316x7mEwKRGD4t0haLo4q2qX5736bdaSdhwHzb1PmS6h5SByWYmUyxTTFYB2fjMY5lisgrIxmcek1UsJ7tgOt4PHPT72/Cc68h520A0wVhdR37hWZQbj8KyStNL5npWTvvZE0Uj3Gl/CVO9ipo4gD6aIBlOgH965IzRHdUQPvgmVh5/GbpuzgV0HHQqMC9wcbv7MVbqX6CiKVADA/A0gmlHYIMIcH3A8RA6IfYXX0Lj+Xdh5e3jc08cpVMZUqnrvQ8gGl+hqBmwUISZs6AIKhLxXYr43amHUHQfiepCjA+x/PM17E1sLF++Aj2Nm6NJg91g+n6pf4NVzUQeZfYS01RELk7hqFwKZowAfwCoBhJFhRqPcebbj7BXOovVjVfnwAKkwFwa/XPxCfScAhMF/krsVVhqFUXCKUIcgeUCQuUBhdunX+7jELrnQ3z2PvxLL8IqlE+EkwK75W7jVvkQC0xgPiGYYlOxCuHqEFoVhrCAkCA5755amKRQVG885HwBtd0Wun/8BuuJZ04EkyqwP4xuwmEKXdjosnforzZV6xDOVRcQ60uAWCFUg0pVCcRSEVK5gL7yTGh9Df73X58IlQZIKbad2+eSRST0VqzU4KOGIfXrc3SoWp4ptZQEypj/d0TVRlTQJ5hH7w2Y5p4G48ff5wPb2tqaGbi5uTlj/qhYKoQCYRL2mEAh+5AKuSF95icQAQ3PkdQEY23zx4Tjc8Aez1dwc7MBZjBxan18Hj8pbcJUEBEmJliYKpdU4FAZJU1VFygdVlEYWMj5NlSPRg+YVr/O8tFA8NTa7M2nZqVS+bRxAZ/GKiKNQITyCOXGZRi+AeVQwbAFFA4SDAlY6eVh9wVM14bm1AjYwFicQX7j4hTC7EcpsDX7ATT6TXRry/BoeidiDRvqSAgVtFm+mgmsToKBy8z1gXJHQ6lro9A1YcYV9M4JlNdWZ5NMzUqB2WYBr/cW8V5MP01KUB1eQT16nDAuwcTdBCbHAWtrWl+HB+wtBWVXwKb/g7frWCoWphBmP0qBpVu8sHAeu607uKqXEPPgsE2FOoC5nyB3l7cR0znoJwj4Ug7pN4/gvjbB4JUmHrs8n1rpOdJghi7w2sIinNs7uNZZht+ijwglmoC2SzCqNkhhWPy9kOAiRPWtFtbeWOI9yZIxZ5MGS/ctmnm888hZrGMHH/5poNmuA02B5K8E2h6BWCESPULhoQ4uXAlxafMchARUesapPnvShcfN9Txs7/Tw3c0Bfr1hsX4BT1708dxGEQ+v8Q4tssCeov1rsFOcOdcSqbtyrh3/o6AMTFbITLFMMVkFZOMzj2WKySogG5957H+j2N8vPYhqDhnSbgAAAABJRU5ErkJggg=="></image></defs>',3),_hoisted_5$D=[_hoisted_2$2R];function _sfc_render$1Z(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$33,_hoisted_5$D)}const __unplugin_components_3$c=_export_sfc(_sfc_main$3q,[["render",_sfc_render$1Z]]),_hoisted_1$32=createBaseVNode("div",{class:"divider"},null,-1),_hoisted_2$2Q=createBaseVNode("div",{class:"divider"},null,-1),_sfc_main$3p={__name:"RightPanelTabs",props:["activePanelTab"],setup(e){const n=useViewerStore(),r=(o,u)=>{n.setActiveElementTab("rightPanel",o)};return(o,u)=>{const s=_sfc_main$4l;return openBlock(),createElementBlock(Fragment,null,[createVNode(s,{className:e.activePanelTab==="GENERAL"?"active":"","data-element":"GENERAL",isActive:e.activePanelTab==="GENERAL",onClick:u[0]||(u[0]=w=>r("GENERAL"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(o.$t("rightPanel.general")),1)]),_:1},8,["className","isActive"]),_hoisted_1$32,createVNode(s,{className:e.activePanelTab==="APPEARANCE"?"active":"","data-element":"APPEARANCE",isActive:e.activePanelTab==="APPEARANCE",onClick:u[1]||(u[1]=w=>r("APPEARANCE"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(o.$t("rightPanel.appearance")),1)]),_:1},8,["className","isActive"]),_hoisted_2$2Q,createVNode(s,{className:e.activePanelTab==="PREFERENCE"?"active":"","data-element":"PREFERENCE",isActive:e.activePanelTab==="PREFERENCE",onClick:u[2]||(u[2]=w=>r("PREFERENCE"))},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(o.$t("rightPanel.preferences")),1)]),_:1},8,["className","isActive"])],64)}}},RightPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$31={class:"sidebar-title"},_hoisted_2$2P={class:"sidebar-tabs-header"},_hoisted_3$2y={class:"sidebar-content"},_hoisted_4$Y={class:"content-block"},_hoisted_5$C={key:0,class:"error-text"},_hoisted_6$r={key:0,class:"content-block"},_hoisted_7$l={class:"content-block"},_hoisted_8$h={value:"0"},_hoisted_9$g={value:"1"},_hoisted_10$g={class:"content-block"},_hoisted_11$d={class:"content-block"},_hoisted_12$c={class:"wider"},_hoisted_13$c={class:"colors-container"},_hoisted_14$c={class:"cell-container"},_hoisted_15$c=createBaseVNode("span",{class:"cell light-red"},null,-1),_hoisted_16$b=[_hoisted_15$c],_hoisted_17$a={class:"cell-container"},_hoisted_18$9=createBaseVNode("span",{class:"cell white"},null,-1),_hoisted_19$9=[_hoisted_18$9],_hoisted_20$9={class:"cell-container"},_hoisted_21$9=createBaseVNode("span",{class:"cell light-yellow"},null,-1),_hoisted_22$9=[_hoisted_21$9],_hoisted_23$8={class:"cell-container"},_hoisted_24$8=createBaseVNode("span",{class:"cell light-blue"},null,-1),_hoisted_25$7=[_hoisted_24$8],_hoisted_26$7={class:"color-picker"},_hoisted_27$6={class:"content-block"},_hoisted_28$6={class:"wider"},_hoisted_29$5={class:"colors-container"},_hoisted_30$5={class:"cell-container"},_hoisted_31$5=createBaseVNode("span",{class:"cell red"},null,-1),_hoisted_32$3=[_hoisted_31$5],_hoisted_33$2={class:"cell-container"},_hoisted_34$2=createBaseVNode("span",{class:"cell black"},null,-1),_hoisted_35$2=[_hoisted_34$2],_hoisted_36$2={class:"cell-container"},_hoisted_37$2=createBaseVNode("span",{class:"cell blue"},null,-1),_hoisted_38$2=[_hoisted_37$2],_hoisted_39$2={class:"color-picker"},_hoisted_40$2={class:"content-block"},_hoisted_41$2=createBaseVNode("option",{value:"Helvetica"},"Helvetica",-1),_hoisted_42$1=createBaseVNode("option",{value:"Courier"},"Courier",-1),_hoisted_43$1=createBaseVNode("option",{value:"Times"},"Times-Roman",-1),_hoisted_44$1=[_hoisted_41$2,_hoisted_42$1,_hoisted_43$1],_hoisted_45$1={class:"content-block"},_hoisted_46$1={class:"text-style"},_hoisted_47$1={value:"normal"},_hoisted_48$1={value:"bold"},_hoisted_49$1={value:"italic"},_hoisted_50$1={value:"boldItalic"},_hoisted_51$1=createStaticVNode('<option value="12">12</option><option value="14">14</option><option value="16">16</option><option value="20">20</option><option value="24">24</option><option value="28">28</option>',6),_hoisted_57$1=[_hoisted_51$1],_hoisted_58$1={class:"content-block"},_hoisted_59$1={value:"left"},_hoisted_60$1={value:"center"},_hoisted_61$1={value:"right"},_hoisted_62$1={class:"content-block"},_hoisted_63$1={class:"content-block"},_hoisted_64$1={class:"content-block"},_hoisted_65$1={value:"0"},_hoisted_66$1={value:"1"},_hoisted_67={value:"2"},_hoisted_68={value:"3"},_hoisted_69={value:"4"},_hoisted_70={value:"5"},_hoisted_71={class:"content-block"},_hoisted_72={class:"content-block"},_hoisted_73={class:"content-block"},_hoisted_74={value:"1"},_hoisted_75={value:"6"},_hoisted_76={class:"content-block"},_hoisted_77=["placeholder"],_hoisted_78={class:"content-block"},_hoisted_79={class:"content-block"},_hoisted_80={class:"button-content"},_hoisted_81={class:"content-block"},_hoisted_82={class:"button-content item-list"},_hoisted_83=["onClick"],_hoisted_84={class:"buttons"},_sfc_main$3o={__name:"RightPanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=useDocumentStore(),o=getCurrentInstance().appContext.app.config.globalProperties,u=computed(()=>{if(v.value==="form"){if(x.value==="textfield")return o.$t("header.textField");if(x.value==="checkbox")return o.$t("header.checkbox");if(x.value==="radiobutton")return o.$t("header.radioButton");if(x.value==="pushbutton")return o.$t("header.button");if(x.value==="listbox")return o.$t("header.listBox");if(x.value==="combobox")return o.$t("header.comboButton")}}),s=computed(()=>n.getActiveElementTab("rightPanel")),w=computed(()=>n.isElementOpen("rightPanel"));computed(()=>r.getActiveTool);const g=computed(()=>r.getTotalPages),v=computed(()=>n.getToolMode);computed(()=>n.getRightPanelButtonDisabled);let y=reactive(r.propertyPanel),m=y.destPage,d=y.url;ref("Helvetica");const f=ref(!1),x=ref(null),k=ref(null),P=ref(null),S=ref([]),E=ref(!0),M=ref("rgb(0, 0, 0)"),T=ref("rgb(0, 0, 0)"),D=le=>{if(le==="fieldName"&&r.setPropertyPanel({fieldName:y.fieldName}),le==="title"&&r.setPropertyPanel({title:y.title}),le==="destPage"){const oe=y.destPage;oe!==""&&oe!=m&&(r.setPropertyPanel({actionType:1,destPage:oe.toString()}),m=oe)}else if(le==="url"){let oe=y.url;oe!==""?(!oe.startsWith("http://")&&!oe.startsWith("https://")&&(oe="https://"+oe),r.setPropertyPanel({url:oe,actionType:6}),d=oe):y.url=d}};watch(()=>w.value,(le,oe)=>{le&&n.closeElement("pageModePanel")}),watch(()=>y.isHidden,(le,oe)=>{r.setPropertyPanel({isHidden:le})}),watch(()=>y.backgroundColor,(le,oe)=>{r.setPropertyPanel({backgroundColor:le})}),watch(()=>y.color,(le,oe)=>{r.setPropertyPanel({color:le})}),watch(()=>y.fontName,(le,oe)=>{r.setPropertyPanel({fontName:le})}),watch(()=>y.fontStyle,(le,oe)=>{r.setPropertyPanel({fontStyle:le})}),watch(()=>y.fontSize,(le,oe)=>{r.setPropertyPanel({fontSize:le})}),watch(()=>y.textAlignment,(le,oe)=>{r.setPropertyPanel({textAlignment:le})}),watch(()=>y.isMultiLine,(le,oe)=>{r.setPropertyPanel({isMultiLine:le})}),watch(()=>y.projectList,(le,oe)=>{r.setPropertyPanel({projectList:le})}),watch(()=>y.checkStyle,(le,oe)=>{r.setPropertyPanel({checkStyle:parseInt(le)})}),watch(()=>y.isChecked,(le,oe)=>{r.setPropertyPanel({isChecked:+le})}),watch(()=>y.required,(le,oe)=>{r.setPropertyPanel({required:+le})}),watch(()=>y.actionType,(le,oe)=>{(le==="1"&&y.destPage!==""||le==="2"&&y.url!=="")&&r.setPropertyPanel({actionType:le})}),watch(()=>y.destPage,(le,oe)=>{const Ee=/^\d+$/;le!==""&&(le>g.value||le<=0||!Ee.test(le))&&(y.destPage=oe)});const I=le=>{if(k.value="",P.value=null,y.required=0,le)x.value=le.type.replace("-",""),(x.value==="listbox"||x.value==="combobox"||x.value==="pushbutton")&&n.setActiveElementTab("rightPanel","PREFERENCE"),x.value!=="checkbox"&&(E.value=!0);else{x.value=null,te();return}for(const oe in le)for(const Ee in y)oe===Ee&&(Ee==="items"?S.value=Array.from(le[oe]):y[Ee]=le[oe])},N=le=>{le==="editor"?n.toggleElement("contentEditorPanel"):n.toggleElement("rightPanel")},O=(le,oe)=>{y[le]=oe},F=()=>{y.isChecked=!y.isChecked},U=()=>{y.required=!y.required},Y=()=>{const le=y.contents===""?" ":y.contents;r.setPropertyPanel({contents:le})},Q=le=>{f.value=le};core.addEvent("judgeRadioBtnIsOne",Q);const q=le=>{E.value=le};core.addEvent("judgeCheckboxIsOne",q);const ne=(le,oe)=>{P.value=le,k.value=oe},J=()=>{for(var le=0;le<S.value.length;le++)if(S.value[le]===k.value)return;if(k.value)S.value.push({Value:k.value,String:k.value});else return;P.value=null,r.setPropertyPanel({item:k.value}),k.value=""},re=()=>{for(var le=0;le<S.value.length;le++)S.value[le]===S.value[P.value]&&(S.value.splice(le,1),r.setPropertyPanel({deleteItemIndex:le,selected:0}),k.value="",P.value=null)},X=()=>{if(!!P.value){for(var le=0;le<S.value.length;le++)if(S.value[le]===S.value[P.value]){S.value.splice(le-1,2,S.value[le],S.value[le-1]),r.setPropertyPanel({moveOption:{fromIndex:le,toIndex:le-1}}),P.value-=1;break}}},j=()=>{if(P.value!==S.value.length-1){for(var le=0;le<S.value.length;le++)if(S.value[le]===S.value[P.value]&&le<S.value.length-1){S.value.splice(le,2,S.value[le+1],S.value[le]),r.setPropertyPanel({moveOption:{fromIndex:le,toIndex:le+1}}),P.value+=1;break}}},Z=(le,oe)=>{oe==="backgroundColor"&&(M.value=le),oe==="color"&&(T.value=le)},W=(le,oe)=>{areColorsSimilar(le,y[oe])||O(oe,le)},te=()=>{n.closeElement("rightPanel")};return core.addEvent("propertyChange",I),core.addEvent("toggleAttrbutePanel",N),core.addEvent("annotationDeselected",()=>{te()}),(le,oe)=>{const Ee=__unplugin_components_14$3,Ae=_sfc_main$3p,ve=__unplugin_components_1$f,ke=__unplugin_components_3$c,Ce=__unplugin_components_4$c,Pe=__unplugin_components_5$7,Me=__unplugin_components_6$7,Le=__unplugin_components_7$6;return openBlock(),createElementBlock("div",{class:normalizeClass(["right-panel",{closed:!w.value,mobile:unref(isMobileDevice)}]),style:normalizeStyle({height:unref(isMobileDevice)?"70%":e.isHeaderDisabled?"100%":"calc(100% - 88px)"})},[createBaseVNode("div",_hoisted_1$31,[createTextVNode(toDisplayString$1(u.value)+" ",1),unref(isMobileDevice)?(openBlock(),createBlock(Ee,{key:0,class:"close-button",onClick:te})):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_2$2P,[createVNode(Ae,{activePanelTab:s.value},null,8,["activePanelTab"])]),createBaseVNode("div",_hoisted_3$2y,[withDirectives(createBaseVNode("div",{class:"radio-top-tip"},toDisplayString$1(le.$t("rightPanel.radioBtnTip1")),513),[[vShow,f.value&&x.value==="radiobutton"]]),createBaseVNode("div",{class:normalizeClass(["general-container",{hidden:s.value!=="GENERAL"}])},[createBaseVNode("div",_hoisted_4$Y,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.name")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":oe[0]||(oe[0]=Te=>unref(y).fieldName=Te),onBlur:oe[1]||(oe[1]=Te=>D("fieldName")),name:"form"},null,544),[[vModelText,unref(y).fieldName]]),E.value?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$C,toDisplayString$1(le.$t("rightPanel.differentNameError")),1))]),x.value==="pushbutton"&&v.value==="form"?(openBlock(),createElementBlock("div",_hoisted_6$r,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.buttonText")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":oe[2]||(oe[2]=Te=>unref(y).title=Te),onBlur:oe[3]||(oe[3]=Te=>D("title")),name:"form"},null,544),[[vModelText,unref(y).title]])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_7$l,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.formField")),1),withDirectives(createBaseVNode("select",{name:"field",id:"field","onUpdate:modelValue":oe[4]||(oe[4]=Te=>unref(y).isHidden=Te)},[createBaseVNode("option",_hoisted_8$h,toDisplayString$1(le.$t("rightPanel.visible")),1),createBaseVNode("option",_hoisted_9$g,toDisplayString$1(le.$t("rightPanel.hidden")),1)],512),[[vModelSelect,unref(y).isHidden]])]),createBaseVNode("div",_hoisted_10$g,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.properties")),1),createBaseVNode("div",{class:"check-box",onClick:U},[createBaseVNode("div",{class:normalizeClass(["check",{active:unref(y).required}])},[withDirectives(createVNode(ve,null,null,512),[[vShow,unref(y).required]])],2),createBaseVNode("span",null,toDisplayString$1(le.$t("rightPanel.requried")),1)])])],2),createBaseVNode("div",{class:normalizeClass(["appearance-container",{hidden:s.value!=="APPEARANCE"}])},[createBaseVNode("div",_hoisted_11$d,[createBaseVNode("h2",_hoisted_12$c,toDisplayString$1(le.$t("rightPanel.backgroundColor")),1),createBaseVNode("div",_hoisted_13$c,[createBaseVNode("span",_hoisted_14$c,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(y).backgroundColor,"rgb(251, 189, 191)")}]),onClick:oe[5]||(oe[5]=Te=>O("backgroundColor","rgb(251, 189, 191)"))},_hoisted_16$b,2)]),createBaseVNode("span",_hoisted_17$a,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(y).backgroundColor,"rgb(255, 255, 255)")}]),onClick:oe[6]||(oe[6]=Te=>O("backgroundColor","rgb(255, 255, 255)"))},_hoisted_19$9,2)]),createBaseVNode("span",_hoisted_20$9,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(y).backgroundColor,"rgb(253, 244, 178)")||unref(areColorsSimilar)(unref(y).backgroundColor,"rgb(253, 244, 177)")}]),onClick:oe[7]||(oe[7]=Te=>O("backgroundColor","rgb(253, 244, 178)"))},_hoisted_22$9,2)]),createBaseVNode("span",_hoisted_23$8,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(y).backgroundColor,"rgb(221, 233, 255)")}]),onClick:oe[8]||(oe[8]=Te=>O("backgroundColor","rgb(221, 233, 255)"))},_hoisted_25$7,2)]),createBaseVNode("div",_hoisted_26$7,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:M.value})},null,4),createVNode(unref(NColorPicker),{to:".right-panel",onComplete:oe[9]||(oe[9]=Te=>W(Te,"backgroundColor")),"onUpdate:value":oe[10]||(oe[10]=Te=>Z(Te,"backgroundColor")),value:M.value,"show-alpha":!1},{label:withCtx(()=>[createVNode(ke)]),_:1},8,["value"])])])]),(x.value==="textfield"||x.value==="pushbutton"||x.value==="combobox"||x.value==="listbox")&&v.value==="form"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_27$6,[createBaseVNode("h2",_hoisted_28$6,toDisplayString$1(le.$t("font")),1),createBaseVNode("div",_hoisted_29$5,[createBaseVNode("span",_hoisted_30$5,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(y).color,"rgb(255, 0, 0)")}]),onClick:oe[11]||(oe[11]=Te=>O("color","rgb(255, 0, 0)"))},_hoisted_32$3,2)]),createBaseVNode("span",_hoisted_33$2,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(y).color,"rgb(0, 0, 0)")}]),onClick:oe[12]||(oe[12]=Te=>O("color","rgb(0, 0, 0)"))},_hoisted_35$2,2)]),createBaseVNode("span",_hoisted_36$2,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:unref(areColorsSimilar)(unref(y).color,"rgb(45, 119, 250)")||unref(areColorsSimilar)(unref(y).color,"rgb(45, 119, 249)")}]),onClick:oe[13]||(oe[13]=Te=>O("color","rgb(45, 119, 250)"))},_hoisted_38$2,2)]),createBaseVNode("div",_hoisted_39$2,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:T.value})},null,4),createVNode(unref(NColorPicker),{to:".right-panel",onComplete:oe[14]||(oe[14]=Te=>W(Te,"color")),"onUpdate:value":oe[15]||(oe[15]=Te=>Z(Te,"color")),value:T.value,"show-alpha":!1},{label:withCtx(()=>[createVNode(ke)]),_:1},8,["value"])])])]),createBaseVNode("div",_hoisted_40$2,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":oe[16]||(oe[16]=Te=>unref(y).fontName=Te)},_hoisted_44$1,512),[[vModelSelect,unref(y).fontName]])]),createBaseVNode("div",_hoisted_45$1,[createBaseVNode("div",_hoisted_46$1,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":oe[17]||(oe[17]=Te=>unref(y).fontStyle=Te),class:"font-family-select"},[createBaseVNode("option",_hoisted_47$1,toDisplayString$1(le.$t("regular")),1),createBaseVNode("option",_hoisted_48$1,toDisplayString$1(le.$t("bold")),1),createBaseVNode("option",_hoisted_49$1,toDisplayString$1(le.$t("oblique")),1),createBaseVNode("option",_hoisted_50$1,toDisplayString$1(le.$t("boldOblique")),1)],512),[[vModelSelect,unref(y).fontStyle]]),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":oe[18]||(oe[18]=Te=>unref(y).fontSize=Te),class:"font-size-select"},_hoisted_57$1,512),[[vModelSelect,unref(y).fontSize]])])])],64)):createCommentVNode("",!0)],2),createBaseVNode("div",{class:normalizeClass(["preferences-container",{hidden:s.value!=="PREFERENCE"}])},[x.value==="textfield"&&v.value==="form"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_58$1,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.alignment")),1),withDirectives(createBaseVNode("select",{name:"alignment",id:"alignment","onUpdate:modelValue":oe[19]||(oe[19]=Te=>unref(y).textAlignment=Te)},[createBaseVNode("option",_hoisted_59$1,toDisplayString$1(le.$t("rightPanel.left")),1),createBaseVNode("option",_hoisted_60$1,toDisplayString$1(le.$t("rightPanel.center")),1),createBaseVNode("option",_hoisted_61$1,toDisplayString$1(le.$t("rightPanel.right")),1)],512),[[vModelSelect,unref(y).textAlignment]])]),createBaseVNode("div",_hoisted_62$1,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.defaultValue")),1),withDirectives(createBaseVNode("textarea",{name:"default-value",id:"default-value",rows:"3","onUpdate:modelValue":oe[20]||(oe[20]=Te=>unref(y).contents=Te),onChange:Y},null,544),[[vModelText,unref(y).contents]])]),createBaseVNode("div",_hoisted_63$1,[createBaseVNode("div",{class:"check-box",onClick:oe[21]||(oe[21]=Te=>unref(y).isMultiLine=!unref(y).isMultiLine)},[createBaseVNode("div",{class:normalizeClass(["check",{active:unref(y).isMultiLine}])},[withDirectives(createVNode(ve,null,null,512),[[vShow,unref(y).isMultiLine]])],2),createBaseVNode("span",null,toDisplayString$1(le.$t("rightPanel.multiLine")),1)])])],64)):createCommentVNode("",!0),(x.value==="checkbox"||x.value==="radiobutton")&&v.value==="form"?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_64$1,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.buttonStyle")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":oe[22]||(oe[22]=Te=>unref(y).checkStyle=Te)},[createBaseVNode("option",_hoisted_65$1,toDisplayString$1(le.$t("rightPanel.check")),1),createBaseVNode("option",_hoisted_66$1,toDisplayString$1(le.$t("rightPanel.circle")),1),createBaseVNode("option",_hoisted_67,toDisplayString$1(le.$t("rightPanel.cross")),1),createBaseVNode("option",_hoisted_68,toDisplayString$1(le.$t("rightPanel.diamond")),1),createBaseVNode("option",_hoisted_69,toDisplayString$1(le.$t("rightPanel.square")),1),createBaseVNode("option",_hoisted_70,toDisplayString$1(le.$t("rightPanel.star")),1)],512),[[vModelSelect,unref(y).checkStyle]])]),createBaseVNode("div",_hoisted_71,[createBaseVNode("div",{class:"check-box",onClick:F},[createBaseVNode("div",{class:normalizeClass(["check",{active:unref(y).isChecked}])},[withDirectives(createVNode(ve,null,null,512),[[vShow,unref(y).isChecked]])],2),createBaseVNode("span",null,toDisplayString$1(le.$t("rightPanel.defaultChecked")),1)])]),createBaseVNode("div",_hoisted_72,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.properties")),1),createBaseVNode("div",{class:"check-box",onClick:U},[createBaseVNode("div",{class:normalizeClass(["check",{active:unref(y).required}])},[withDirectives(createVNode(ve,null,null,512),[[vShow,unref(y).required]])],2),createBaseVNode("span",null,toDisplayString$1(le.$t("rightPanel.requried")),1)])])],64)):createCommentVNode("",!0),x.value==="pushbutton"&&v.value==="form"?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("div",_hoisted_73,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.selectAction")),1),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":oe[23]||(oe[23]=Te=>unref(y).actionType=Te)},[withDirectives(createBaseVNode("option",{value:"0"},toDisplayString$1(le.$t("rightPanel.none")),513),[[vShow,unref(y).actionType==0]]),createBaseVNode("option",_hoisted_74,toDisplayString$1(le.$t("rightPanel.goPage")),1),createBaseVNode("option",_hoisted_75,toDisplayString$1(le.$t("rightPanel.openLink")),1)],512),[[vModelSelect,unref(y).actionType]])]),withDirectives(createBaseVNode("div",_hoisted_76,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.goPage")),1),withDirectives(createBaseVNode("input",{type:"text",pattern:"\\d*",placeholder:le.$t("rightPanel.addPage"),"onUpdate:modelValue":oe[24]||(oe[24]=Te=>unref(y).destPage=Te),onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onBlur:oe[25]||(oe[25]=Te=>D("destPage")),name:"form"},null,40,_hoisted_77),[[vModelText,unref(y).destPage]])],512),[[vShow,unref(y).actionType==1]]),withDirectives(createBaseVNode("div",_hoisted_78,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.openLink")),1),withDirectives(createBaseVNode("input",{type:"text",placeholder:"https://","onUpdate:modelValue":oe[26]||(oe[26]=Te=>unref(y).url=Te),onBlur:oe[27]||(oe[27]=Te=>D("url")),name:"form"},null,544),[[vModelText,unref(y).url]])],512),[[vShow,unref(y).actionType==6]])],64)):createCommentVNode("",!0),(x.value==="combobox"||x.value==="listbox")&&v.value==="form"?(openBlock(),createElementBlock(Fragment,{key:3},[createBaseVNode("div",_hoisted_79,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.item")),1),createBaseVNode("div",_hoisted_80,[withDirectives(createBaseVNode("input",{type:"text",class:"item","onUpdate:modelValue":oe[28]||(oe[28]=Te=>k.value=Te),name:"form"},null,512),[[vModelText,k.value,void 0,{trim:!0}]]),createBaseVNode("div",{class:normalizeClass(["operate-button",{disabled:!k.value}]),onClick:J},[createVNode(Ce)],2)])]),createBaseVNode("div",_hoisted_81,[createBaseVNode("h2",null,toDisplayString$1(le.$t("rightPanel.itemList")),1),createBaseVNode("div",_hoisted_82,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(S.value,(Te,ye)=>(openBlock(),createElementBlock("li",{key:ye,class:normalizeClass({active:ye===P.value}),onClick:_e=>ne(ye,Te.Value)},toDisplayString$1(Te.Value),11,_hoisted_83))),128))]),createBaseVNode("div",_hoisted_84,[createBaseVNode("div",{class:normalizeClass(["operate-button",{disabled:!P.value&&P.value!==0}]),onClick:re},[createVNode(Pe)],2),createBaseVNode("div",{class:normalizeClass(["operate-button",{disabled:P.value===0||!P.value}]),onClick:X},[createVNode(Me)],2),createBaseVNode("div",{class:normalizeClass(["operate-button",{disabled:P.value===S.value.length-1||!P.value&&P.value!==0}]),onClick:j},[createVNode(Le)],2)])])])],64)):createCommentVNode("",!0)],2),withDirectives(createBaseVNode("div",{class:"radio-bottom-tip"},toDisplayString$1(le.$t("rightPanel.radioBtnTip2")),513),[[vShow,x.value==="radiobutton"]]),withDirectives(createBaseVNode("div",{class:"radio-bottom-tip"},toDisplayString$1(le.$t("rightPanel.listBoxTip")),513),[[vShow,x.value==="combobox"]])])],6)}}},MovePageSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$30={key:0,class:"move-page-popup"},_hoisted_2$2O=["placeholder"],dialogName$i="movePageSettingDialog",_sfc_main$3n={__name:"MovePageSettingDialog",props:["totalPages","selectedPageList"],emits:["movePage"],setup(e,{emit:n}){const r=e,o=n,u=useViewerStore(),s=computed(()=>u.isElementOpen(dialogName$i)),w=ref("");let g=!1;const v=computed(()=>{if(typeof w.value!="number")return!0;const P=r.selectedPageList;return!!(P.length===1&&(P[0]===w.value||P[0]===w.value-1)||P.length>1&&y(P)&&(P.includes(w.value)||P.includes(w.value-1)))}),y=P=>{P.sort(function(E,M){return E-M});for(var S=0;S<P.length-1;S++)if(P[S]+1!==P[S+1])return!1;return!0},m=()=>{u.closeElement(dialogName$i),w.value=""},d=async()=>{o("movePage",w.value),m()},f=P=>{if(g)return;const S=P.target.valueAsNumber;isNaN(S)&&(P.target.value=""),S>r.totalPages&&(w.value=r.totalPages),S===0&&(P.target.value=S.toFixed(0))},x=()=>{g=!0},k=()=>{g=!1};return(P,S)=>{const E=_sfc_main$4e;return s.value?(openBlock(),createElementBlock("div",_hoisted_1$30,[createVNode(E,{show:s.value,dialogName:dialogName$i,close:!0},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(P.$t("documentEditor.moveTo")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:v.value}]),onClick:d},toDisplayString$1(P.$t("ok")),3)]),default:withCtx(()=>[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":S[0]||(S[0]=M=>w.value=M),type:"number",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onInput:f,placeholder:P.$t("documentEditor.inputPageTip"),onCompositionstart:x,onCompositionend:k,name:"document-editor"},null,40,_hoisted_2$2O),[[vModelText,w.value,void 0,{number:!0}]])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$3m={},_hoisted_1$2$={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2N=createBaseVNode("g",{id:"ic_btn_radio_dis"},[createBaseVNode("circle",{id:"ic",cx:"7",cy:"7",r:"5.625",fill:"white",stroke:"#666666"})],-1),_hoisted_3$2x=[_hoisted_2$2N];function _sfc_render$1Y(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2$,_hoisted_3$2x)}const __unplugin_components_1$9=_export_sfc(_sfc_main$3m,[["render",_sfc_render$1Y]]),_sfc_main$3l={},_hoisted_1$2_={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2M=createBaseVNode("g",{id:"ic_btn_radio_sel"},[createBaseVNode("circle",{id:"Radio",cx:"7",cy:"7",r:"6.125",fill:"#1460F3"}),createBaseVNode("circle",{id:"Radio_2",cx:"7",cy:"7",r:"2.625",fill:"white"})],-1),_hoisted_3$2w=[_hoisted_2$2M];function _sfc_render$1X(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2_,_hoisted_3$2w)}const __unplugin_components_0$u=_export_sfc(_sfc_main$3l,[["render",_sfc_render$1X]]),ExtractPageSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2Z={key:0,class:"extract-page-setting-popup"},_hoisted_2$2L={class:"title"},_hoisted_3$2v={class:"container"},_hoisted_4$X={class:"select-content"},_hoisted_5$B={key:0,class:"disabled-btn"},_hoisted_6$q={class:"addition"},_hoisted_7$k=["placeholder"],_hoisted_8$g={class:"check-content"},dialogName$h="extractPageSettingDialog",_sfc_main$3k={__name:"ExtractPageSettingDialog",props:["selectedPageList","totalPages"],emits:["extractPage"],setup(e,{emit:n}){const r=e,o=n,u=useViewerStore(),s=computed(()=>u.isElementOpen(dialogName$h)),w=ref("custom"),g=ref(""),v=ref(""),y=ref(!1),m=ref(!1);let d="";watch(()=>s.value,(M,T)=>{if(M){const D=r.selectedPageList.map(function(I){return I+1}).join(",");d=P(D),g.value=v.value=d}});const f=()=>{u.closeElement(dialogName$h),w.value="custom"},x=async()=>{const M={range:w.value==="custom"?g.value:w.value,separateFile:y.value,deleteAfter:w.value==="all"?!1:m.value};o("extractPage",M),f()},k=()=>{v.value=P(g.value),g.value=v.value},P=M=>{const T=r.totalPages,I=M.replace(/\s/g,"").match(/\d+-\d+|\d+|\d+/g);if(I){const N=I.flatMap(Y=>{if(Y.includes("-")){const[Q,q]=Y.split("-"),ne=Math.min(Q,q),J=Math.min(Math.max(Q,q),T);return Array.from({length:J-ne+1},(re,X)=>String(Number(ne)+X))}else return Math.min(Math.max(Y,1),T)}).sort((Y,Q)=>Y-Q),O=[];let F=N[0],U=N[0];for(let Y=1;Y<N.length;Y++){const Q=N[Y],q=Number(U);Number(Q)-q>1&&(O.push(S(F,U)),F=Q),U=Q}return O.push(S(F,U)),O.join(", ")}return d},S=(M,T)=>M===T?M.toString():`${M}-${T}`,E=computed(()=>{if(w.value==="all"||r.totalPages===1&&w.value!=="even"||r.totalPages>1&&w.value==="custom"&&g.value==="1-"+r.totalPages)return!0});return(M,T)=>{const D=__unplugin_components_0$u,I=__unplugin_components_1$9,N=__unplugin_components_1$f,O=_sfc_main$4e;return s.value?(openBlock(),createElementBlock("div",_hoisted_1$2Z,[createVNode(O,{show:s.value,dialogName:dialogName$h,close:!1},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(M.$t("documentEditor.extract")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:f},toDisplayString$1(M.$t("cancel")),1),createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:w.value==="pdf"&&(!M.inputFile||w.value==="custom"&&!v.value)}]),onClick:x},toDisplayString$1(M.$t("documentEditor.extract")),3)]),default:withCtx(()=>[createBaseVNode("p",_hoisted_2$2L,toDisplayString$1(M.$t("documentEditor.dialog.pageRange")),1),createBaseVNode("div",_hoisted_3$2v,[createBaseVNode("div",_hoisted_4$X,[createBaseVNode("div",{onClick:T[0]||(T[0]=F=>w.value="all"),class:"option"},[w.value==="all"?(openBlock(),createBlock(D,{key:0})):(openBlock(),createBlock(I,{key:1})),createTextVNode(toDisplayString$1(M.$t("documentEditor.dialog.allPages")),1)]),createBaseVNode("div",{onClick:T[1]||(T[1]=F=>w.value="odd"),class:"option"},[w.value==="odd"?(openBlock(),createBlock(D,{key:0})):(openBlock(),createBlock(I,{key:1})),createTextVNode(toDisplayString$1(M.$t("documentEditor.dialog.oddPage")),1)]),createBaseVNode("div",{onClick:T[2]||(T[2]=F=>w.value="even"),class:normalizeClass(["option",{disabled:e.totalPages===1}])},[e.totalPages===1?(openBlock(),createElementBlock("div",_hoisted_5$B)):w.value==="even"?(openBlock(),createBlock(D,{key:1})):(openBlock(),createBlock(I,{key:2})),createTextVNode(" "+toDisplayString$1(M.$t("documentEditor.dialog.evenPage")),1)],2),createBaseVNode("div",{onClick:T[4]||(T[4]=F=>w.value="custom"),class:"option custom-page"},[w.value==="custom"?(openBlock(),createBlock(D,{key:0})):(openBlock(),createBlock(I,{key:1})),createTextVNode(toDisplayString$1(M.$t("documentEditor.dialog.page"))+" ",1),createBaseVNode("div",_hoisted_6$q,[withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":T[3]||(T[3]=F=>g.value=F),placeholder:M.$t("documentEditor.dialog.pageTip"),onBlur:k,name:"document-editor"},null,40,_hoisted_7$k),[[vModelText,g.value]]),createBaseVNode("span",null,"/ "+toDisplayString$1(e.totalPages),1)])])])]),createBaseVNode("div",_hoisted_8$g,[createBaseVNode("div",{class:"check-box",onClick:T[5]||(T[5]=F=>y.value=!y.value)},[createBaseVNode("div",{class:normalizeClass(["check",{active:y.value}])},[withDirectives(createVNode(N,null,null,512),[[vShow,y.value]])],2),createBaseVNode("span",null,toDisplayString$1(M.$t("documentEditor.eachPage")),1)]),createBaseVNode("div",{class:normalizeClass(["check-box",{disabled:E.value}]),onClick:T[6]||(T[6]=()=>{E.value||(m.value=!m.value)})},[createBaseVNode("div",{class:normalizeClass(["check",{active:m.value}])},[withDirectives(createVNode(N,null,null,512),[[vShow,m.value&&!E.value]])],2),createBaseVNode("span",null,toDisplayString$1(M.$t("documentEditor.deleteAfter")),1)],2)])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},DeletePageDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2Y={key:0,class:"delete-page-popup"},dialogName$g="deletePageDialog",_sfc_main$3j={__name:"DeletePageDialog",props:["selectedPageList"],emits:["deletePage"],setup(e,{emit:n}){const{locale:r}=useI18n(),o=e,u=n,s=useViewerStore(),w=computed(()=>s.isElementOpen(dialogName$g)),g=computed(()=>o.selectedPageList.sort((m,d)=>m-d).map(m=>m+1).join(", ")),v=()=>{s.closeElement(dialogName$g)},y=async()=>{u("deletePage"),v()};return(m,d)=>{const f=__unplugin_components_2$f,x=_sfc_main$4e;return w.value?(openBlock(),createElementBlock("div",_hoisted_1$2Y,[createVNode(x,{show:w.value,dialogName:dialogName$g,close:!1},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:v},toDisplayString$1(m.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:y},toDisplayString$1(m.$t("documentEditor.delete")),1)]),default:withCtx(()=>[createVNode(f),createBaseVNode("p",null,toDisplayString$1(m.$t("documentEditor.deleteConfirmText"))+toDisplayString$1(unref(r)==="en"?` ${g.value}?`:""),1)]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$3i={},_hoisted_1$2X={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2K=createBaseVNode("path",{d:"M6.82225 3.96144L6.99439 4.05909H7.19231H11.75V13.25H1.25V2.75H4.6867L6.82225 3.96144Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$2u=createBaseVNode("path",{d:"M1.55867 13.25L3.84383 6.75H14.4413L12.1562 13.25H1.55867Z",fill:"transparent",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_4$W=[_hoisted_2$2K,_hoisted_3$2u];function _sfc_render$1W(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2X,_hoisted_4$W)}const __unplugin_components_0$t=_export_sfc(_sfc_main$3i,[["render",_sfc_render$1W]]),_sfc_main$3h={},_hoisted_1$2W={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2J=createBaseVNode("g",{id:"ic_btn_arrow_down"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.0596 5.90869L11.9398 6.72429L8.24969 10.7068L4.55957 6.72429L5.4398 5.90869L8.24969 8.94084L11.0596 5.90869Z",fill:"currentColor"})],-1),_hoisted_3$2t=[_hoisted_2$2J];function _sfc_render$1V(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2W,_hoisted_3$2t)}const __unplugin_components_0$s=_export_sfc(_sfc_main$3h,[["render",_sfc_render$1V]]),InsertPageSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2V={key:0,class:"add-page-setting-popup"},_hoisted_2$2I={class:"title"},_hoisted_3$2s={class:"container"},_hoisted_4$V={class:"select-content"},_hoisted_5$A={key:0,class:"addition"},_hoisted_6$p=createBaseVNode("option",{value:"A3"},"A3",-1),_hoisted_7$j=createBaseVNode("option",{value:"A4"},"A4",-1),_hoisted_8$f=createBaseVNode("option",{value:"A5"},"A5",-1),_hoisted_9$f=[_hoisted_6$p,_hoisted_7$j,_hoisted_8$f],_hoisted_10$f={key:1,class:"addition"},_hoisted_11$c={class:"file-input-underbox"},_hoisted_12$b={key:2,class:"addition from-pdf"},_hoisted_13$b={class:"addition"},_hoisted_14$b={value:"all"},_hoisted_15$b={value:"odd"},_hoisted_16$a={value:"even"},_hoisted_17$9={value:"custom"},_hoisted_18$8=["placeholder"],_hoisted_19$8={class:"title"},_hoisted_20$8={class:"container"},_hoisted_21$8={class:"select-content"},_hoisted_22$8={class:"left"},_hoisted_23$7={key:0,class:"right"},_hoisted_24$7={class:"addition"},_hoisted_25$6=["max"],_hoisted_26$6={class:"addition"},_hoisted_27$5={value:0},_hoisted_28$5={value:1},dialogName$f="insertPageSettingDialog",_sfc_main$3g={__name:"InsertPageSettingDialog",props:["selectedPageList","totalPages"],emits:["insertPage"],setup(e,{emit:n}){const r=e,o=n,u=useViewerStore(),s=computed(()=>u.isElementOpen(dialogName$f)),w=ref("blank"),g=ref("A4"),v=ref(null),y=ref("all"),m=ref(""),d=ref(""),f=ref("first"),x=ref(1),k=ref(1),P=ref("");watch(()=>s.value,(F,U)=>{F&&(r.selectedPageList.length>0&&(f.value="custom"),x.value=r.selectedPageList[0]+1)});const S=()=>{u.closeElement(dialogName$f),w.value="blank",g.value="A4",v.value=null,y.value="all",m.value="",d.value="",f.value="first",k.value=1,P.value=""},E=async()=>{const F={type:w.value==="pdf"?"pdf":"blank"};if(w.value==="custom"){const U={A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210}};F.size={width:U[g.value].width/25.4*72,height:U[g.value].height/25.4*72}}w.value==="pdf"&&v.value&&(F.file=v.value,F.range=y.value==="custom"?m.value:y.value,F.password=P.value),f.value==="custom"?(F.place=x.value-1+k.value,F.targetPlace=k.value):f.value==="last"?F.place=r.totalPages:F.place=0,o("insertPage",F),S()},M=async F=>{if(!F.target.files[0])return;let U=URL.createObjectURL(F.target.files[0]);const Y=await core.checkPassword(U,!0);if(Y===!1){F.target.value="";return}v.value=F.target.files[0],P.value=Y},T=F=>{const U=F.target.valueAsNumber;U>r.totalPages?x.value=r.totalPages:U<1&&(x.value=1)},D=()=>{x.value||(x.value=1)},I=()=>{d.value=N(m.value),m.value=d.value},N=F=>{const Y=F.replace(/\s/g,"").match(/\d+-\d+|\d+|\d+/g);if(Y){const Q=Y.flatMap(re=>{if(re.includes("-")){const[X,j]=re.split("-"),Z=Math.max(1,Math.min(X,j)),W=Math.max(1,X,j);return Array.from({length:W-Z+1},(te,le)=>String(Number(Z)+le))}else return Math.max(1,re)}).sort((re,X)=>re-X),q=[];let ne=Q[0],J=Q[0];for(let re=1;re<Q.length;re++){const X=Q[re],j=Number(J);Number(X)-j>1&&(q.push(O(ne,J)),ne=X),J=X}return q.push(O(ne,J)),q.join(", ")}return"1"},O=(F,U)=>F===U?F.toString():`${F}-${U}`;return(F,U)=>{const Y=__unplugin_components_0$u,Q=__unplugin_components_1$9,q=__unplugin_components_0$s,ne=__unplugin_components_0$t,J=_sfc_main$4e;return s.value?(openBlock(),createElementBlock("div",_hoisted_1$2V,[createVNode(J,{show:s.value,dialogName:dialogName$f,close:!1},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:S},toDisplayString$1(F.$t("cancel")),1),createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:w.value==="pdf"&&(!v.value||y.value==="custom"&&!d.value)}]),onClick:E},toDisplayString$1(F.$t("documentEditor.insert")),3)]),default:withCtx(()=>{var re,X;return[createBaseVNode("p",_hoisted_2$2I,toDisplayString$1(F.$t("documentEditor.dialog.insertPages")),1),createBaseVNode("div",_hoisted_3$2s,[createBaseVNode("div",_hoisted_4$V,[createBaseVNode("div",{onClick:U[0]||(U[0]=j=>w.value="blank"),class:"option"},[w.value==="blank"?(openBlock(),createBlock(Y,{key:0})):(openBlock(),createBlock(Q,{key:1})),createTextVNode(toDisplayString$1(F.$t("documentEditor.dialog.blankPage")),1)]),createBaseVNode("div",{onClick:U[1]||(U[1]=j=>w.value="custom"),class:"option"},[w.value==="custom"?(openBlock(),createBlock(Y,{key:0})):(openBlock(),createBlock(Q,{key:1})),createTextVNode(toDisplayString$1(F.$t("documentEditor.dialog.customPage")),1)]),w.value==="custom"?(openBlock(),createElementBlock("div",_hoisted_5$A,[withDirectives(createBaseVNode("select",{name:"customPageSize","onUpdate:modelValue":U[2]||(U[2]=j=>g.value=j)},_hoisted_9$f,512),[[vModelSelect,g.value]]),createVNode(q)])):createCommentVNode("",!0),createBaseVNode("div",{onClick:U[3]||(U[3]=j=>w.value="pdf"),class:"option"},[w.value==="pdf"?(openBlock(),createBlock(Y,{key:0})):(openBlock(),createBlock(Q,{key:1})),createTextVNode(toDisplayString$1(F.$t("documentEditor.dialog.fromPdf")),1)]),w.value==="pdf"?(openBlock(),createElementBlock("div",_hoisted_10$f,[createBaseVNode("div",_hoisted_11$c,[createBaseVNode("span",{class:normalizeClass({uploaded:(re=v.value)==null?void 0:re.name})},toDisplayString$1(((X=v.value)==null?void 0:X.name)||F.$t("documentEditor.dialog.selectFile")),3),createVNode(ne)]),createBaseVNode("input",{type:"file",onChange:M,accept:".pdf",name:"document-editor"},null,32)])):createCommentVNode("",!0),w.value==="pdf"?(openBlock(),createElementBlock("div",_hoisted_12$b,[createBaseVNode("span",null,toDisplayString$1(F.$t("documentEditor.dialog.pageRange")),1),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_13$b,[withDirectives(createBaseVNode("select",{name:"inputFileRange","onUpdate:modelValue":U[4]||(U[4]=j=>y.value=j)},[createBaseVNode("option",_hoisted_14$b,toDisplayString$1(F.$t("documentEditor.dialog.allPages")),1),createBaseVNode("option",_hoisted_15$b,toDisplayString$1(F.$t("documentEditor.dialog.oddPage")),1),createBaseVNode("option",_hoisted_16$a,toDisplayString$1(F.$t("documentEditor.dialog.evenPage")),1),createBaseVNode("option",_hoisted_17$9,toDisplayString$1(F.$t("documentEditor.dialog.customRange")),1)],512),[[vModelSelect,y.value]]),createVNode(q)]),y.value==="custom"?withDirectives((openBlock(),createElementBlock("input",{key:0,type:"text","onUpdate:modelValue":U[5]||(U[5]=j=>m.value=j),placeholder:F.$t("documentEditor.dialog.pageTip"),onBlur:I,name:"document-editor"},null,40,_hoisted_18$8)),[[vModelText,m.value]]):createCommentVNode("",!0)])])):createCommentVNode("",!0)])]),createBaseVNode("p",_hoisted_19$8,toDisplayString$1(F.$t("documentEditor.dialog.insertTo")),1),createBaseVNode("div",_hoisted_20$8,[createBaseVNode("div",_hoisted_21$8,[createBaseVNode("div",{onClick:U[6]||(U[6]=j=>f.value="first"),class:"option"},[f.value==="first"?(openBlock(),createBlock(Y,{key:0})):(openBlock(),createBlock(Q,{key:1})),createTextVNode(toDisplayString$1(F.$t("documentEditor.dialog.firstPage")),1)]),createBaseVNode("div",{onClick:U[7]||(U[7]=j=>f.value="last"),class:"option"},[f.value==="last"?(openBlock(),createBlock(Y,{key:0})):(openBlock(),createBlock(Q,{key:1})),createTextVNode(toDisplayString$1(F.$t("documentEditor.dialog.lastPage")),1)]),createBaseVNode("div",{onClick:U[10]||(U[10]=j=>f.value="custom"),class:normalizeClass(["option",{"custom-page":f.value==="custom"}])},[createBaseVNode("div",_hoisted_22$8,[f.value==="custom"?(openBlock(),createBlock(Y,{key:0})):(openBlock(),createBlock(Q,{key:1})),createTextVNode(toDisplayString$1(F.$t("documentEditor.dialog.page")),1)]),f.value==="custom"?(openBlock(),createElementBlock("div",_hoisted_23$7,[createBaseVNode("div",_hoisted_24$7,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":U[8]||(U[8]=j=>x.value=j),type:"number",max:e.totalPages,min:"1",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onInput:T,onBlur:D,name:"document-editor"},null,40,_hoisted_25$6),[[vModelText,x.value,void 0,{number:!0}]]),createBaseVNode("span",null,"/ "+toDisplayString$1(e.totalPages),1)]),createBaseVNode("div",_hoisted_26$6,[withDirectives(createBaseVNode("select",{name:"targetPlace","onUpdate:modelValue":U[9]||(U[9]=j=>k.value=j)},[createBaseVNode("option",_hoisted_27$5,toDisplayString$1(F.$t("documentEditor.dialog.before")),1),createBaseVNode("option",_hoisted_28$5,toDisplayString$1(F.$t("documentEditor.dialog.after")),1)],512),[[vModelSelect,k.value]]),createVNode(q)])])):createCommentVNode("",!0)],2)])])]}),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$3f={},_hoisted_1$2U={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2H=createBaseVNode("g",{id:"toolbar / pageedit / all select"},[createBaseVNode("path",{id:"Union","fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.5 2.5H6.5V13.5H17.5V2.5ZM6.5 1H5V2.5V2.9342H2H1.25V3.6842V18V18.75H2H16.3158H17.0658V18V15H17.5H19V13.5V2.5V1H17.5H6.5ZM2.75 4.4342H5V13.5V15H6.5H15.5658V17.25H2.75V4.4342ZM15.4446 6.94453L15.9749 6.4142L14.9142 5.35355L14.3839 5.88388L11.1016 9.16615L10.2177 8.28227L9.68734 7.75195L8.62667 8.8126L9.15701 9.34293L10.5712 10.7571L11.1016 11.2875L11.6319 10.7571L15.4446 6.94453Z",fill:"currentColor"})],-1),_hoisted_3$2r=[_hoisted_2$2H];function _sfc_render$1U(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2U,_hoisted_3$2r)}const __unplugin_components_10$4=_export_sfc(_sfc_main$3f,[["render",_sfc_render$1U]]),_sfc_main$3e={},_hoisted_1$2T={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2G=createBaseVNode("g",{id:"toolbar / pageedit / unselect"},[createBaseVNode("path",{id:"Union","fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.5 2.5H6.5V13.5H17.5V2.5ZM6.5 1H5V2.5V2.9342H2H1.25V3.6842V18V18.75H2H16.3158H17.0658V18V15H17.5H19V13.5V2.5V1H17.5H6.5ZM2.75 4.4342H5V13.5V15H6.5H15.5658V17.25H2.75V4.4342ZM8 8.75H16V7.25H8V8.75Z",fill:"currentColor"})],-1),_hoisted_3$2q=[_hoisted_2$2G];function _sfc_render$1T(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2T,_hoisted_3$2q)}const __unplugin_components_9$3=_export_sfc(_sfc_main$3e,[["render",_sfc_render$1T]]),_sfc_main$3d={},_hoisted_1$2S={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2F=createBaseVNode("g",{id:"toolbar / pageedit / reverse"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.9019 1.75H1.25V18.25H14.75V5.95882L10.9019 1.75ZM10.24 3.25L13.25 6.542V16.75H2.75V3.25H10.24ZM19.624 6.83397L16.25 1.77292V18.25H17.75V6.729L18.376 7.66603L19.624 6.83397Z",fill:"currentColor"})],-1),_hoisted_3$2p=[_hoisted_2$2F];function _sfc_render$1S(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2S,_hoisted_3$2p)}const __unplugin_components_8$5=_export_sfc(_sfc_main$3d,[["render",_sfc_render$1S]]),_sfc_main$3c={},_hoisted_1$2R={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2E=createBaseVNode("g",{id:"toolbar / pageedit / replace"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.25 1H13.3107L17.75 5.43934V10.75H16.25V6.061L12.689 2.5H3.75V17H10V18.5H2.25V1ZM14.3454 12.7983L15.3689 11.7017L18.9028 15H11V13.5H15.097L14.3454 12.7983ZM14.5339 19.5L15.5574 18.4034L14.8058 17.7017H18.9028V16.2017H11L14.5339 19.5Z",fill:"currentColor"})],-1),_hoisted_3$2o=[_hoisted_2$2E];function _sfc_render$1R(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2R,_hoisted_3$2o)}const __unplugin_components_7$5=_export_sfc(_sfc_main$3c,[["render",_sfc_render$1R]]),_sfc_main$3b={},_hoisted_1$2Q={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2D=createBaseVNode("g",{id:"toolbar / pageedit / extract"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.25 1.25H13.3107L17.75 5.68934V11H16.25V6.311L12.689 2.75H3.75V17.25H10V18.75H2.25V1.25ZM16.0174 16.25L15.1768 17.091L16.2374 18.1516L18.8891 15.5L16.2374 12.8483L15.1768 13.909L16.0174 14.75H11V16.25H16.0174Z",fill:"currentColor"})],-1),_hoisted_3$2n=[_hoisted_2$2D];function _sfc_render$1Q(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2Q,_hoisted_3$2n)}const __unplugin_components_6$6=_export_sfc(_sfc_main$3b,[["render",_sfc_render$1Q]]),_sfc_main$3a={},_hoisted_1$2P={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2C=createBaseVNode("g",{id:"toolbar / pageedit / copy"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.75 0.75H14.3866L18.25 4.69386V16.25H15.25V19.25H1.75V3.75H4.75V0.75ZM4.75 16.25H13.75V17.75H3.25V5.25H4.75V16.25ZM16.75 5.306L13.756 2.25H6.25V14.75H16.75V5.306ZM14.1974 7.35361C13.8798 6.13053 12.7917 5.25 11.5202 5.25C9.98499 5.25 8.75 6.52361 8.75 8.08333V8.91667L8.75503 9.08874C8.84189 10.569 10.0418 11.75 11.5202 11.75C12.8491 11.75 13.9777 10.7882 14.2357 9.47867L12.764 9.18872L12.7319 9.3182C12.5675 9.86695 12.0782 10.25 11.5202 10.25C10.8239 10.25 10.25 9.65813 10.25 8.91667V8.08333L10.2566 7.94617C10.3222 7.2702 10.8674 6.75 11.5202 6.75C12.1213 6.75 12.6427 7.19453 12.7641 7.81182L14.2359 7.52247L14.1974 7.35361Z",fill:"currentColor"})],-1),_hoisted_3$2m=[_hoisted_2$2C];function _sfc_render$1P(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2P,_hoisted_3$2m)}const __unplugin_components_5$6=_export_sfc(_sfc_main$3a,[["render",_sfc_render$1P]]),_sfc_main$39={},_hoisted_1$2O={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2B=createBaseVNode("g",{id:"toolbar / pageedit / rotate left"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 9.75V1.75H18.5V9.75V10.5V18.25H2V9.75H10ZM11.5 9.75V3.25H17V9.75H11.5ZM3.5 11.25V16.75H17.001V11.25H3.5ZM1.53769 5.46967L0.477028 6.53033L3.12868 9.18198L5.78033 6.53033L4.71967 5.46967L3.80559 6.38355C3.89386 5.03216 4.82757 3.82648 6.20838 3.4565C6.98256 3.24905 7.78597 3.33465 8.48622 3.68044L8.67454 3.78117L9.42454 2.48213C8.34118 1.85665 7.05293 1.67728 5.82015 2.00761C3.81662 2.54445 2.45713 4.28512 2.31137 6.24287L1.53769 5.46967Z",fill:"currentColor"})],-1),_hoisted_3$2l=[_hoisted_2$2B];function _sfc_render$1O(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2O,_hoisted_3$2l)}const __unplugin_components_4$b=_export_sfc(_sfc_main$39,[["render",_sfc_render$1O]]),_sfc_main$38={},_hoisted_1$2N={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2A=createBaseVNode("g",{id:"toolbar / pageedit / rotate left"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 9.75V1.75H1.5V9.75V10.5V18.25H18V9.75H10ZM8.5 9.75V3.25H3V9.75H8.5ZM16.5 11.25V16.75H2.999V11.25H16.5ZM18.4623 5.46967L19.523 6.53033L16.8713 9.18198L14.2197 6.53033L15.2803 5.46967L16.1944 6.38355C16.1061 5.03216 15.1724 3.82648 13.7916 3.4565C13.0174 3.24905 12.214 3.33465 11.5138 3.68044L11.3255 3.78117L10.5755 2.48213C11.6588 1.85665 12.9471 1.67728 14.1798 2.00761C16.1834 2.54445 17.5429 4.28512 17.6886 6.24287L18.4623 5.46967Z",fill:"currentColor"})],-1),_hoisted_3$2k=[_hoisted_2$2A];function _sfc_render$1N(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2N,_hoisted_3$2k)}const __unplugin_components_3$b=_export_sfc(_sfc_main$38,[["render",_sfc_render$1N]]),_sfc_main$37={},_hoisted_1$2M={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2z=createBaseVNode("g",{id:"toolbar / pageedit / delete"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 2.75V1.25H7V2.75H13ZM19 5.75V4.25H16.75H3.25H1V5.75H3.25V18.75H16.75V5.75H19ZM4.75 17.25V5.75H15.25V17.25H4.75ZM8.75 8.5V14.5H7.25V8.5H8.75ZM12.75 8.5V14.5H11.25V8.5H12.75Z",fill:"currentColor"})],-1),_hoisted_3$2j=[_hoisted_2$2z];function _sfc_render$1M(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2M,_hoisted_3$2j)}const __unplugin_components_8$4=_export_sfc(_sfc_main$37,[["render",_sfc_render$1M]]),_sfc_main$36={},_hoisted_1$2L={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2y=createBaseVNode("g",{id:"toolbar / pageedit / insert"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.25 1.25H13.3107L17.75 5.68934V11H16.25V6.311L12.689 2.75H3.75V17.25H10V18.75H2.25V1.25ZM14.75 18H13.25V15.75H11V14.25H13.25V12H14.75V14.25H17V15.75H14.75V18Z",fill:"currentColor"})],-1),_hoisted_3$2i=[_hoisted_2$2y];function _sfc_render$1L(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2L,_hoisted_3$2i)}const __unplugin_components_0$r=_export_sfc(_sfc_main$36,[["render",_sfc_render$1L]]),DocumentEditorContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$2K=["onClick"],_hoisted_2$2x=["src"],_sfc_main$35={__name:"DocumentEditorContainer",props:["Sortable"],setup(e){const{Sortable:n}=e,r=useViewerStore(),o=useDocumentStore(),u=reactive({pageList:[],selectedPageList:[]});let{pageList:s,selectedPageList:w}=u;const g=ref(null),v=ref(-2),y=ref(-2),m=ref(!1),d=ref(null),f=ref(0),x=ref(null),k=window.devicePixelRatio||1,P=window.innerWidth<768;let S=null;onMounted(()=>{n.create(g.value,{multiDrag:!0,selectedClass:"sortable-selected",dragClass:"sortable-drag",sort:!1,forceFallback:!0,fallbackTolerance:isMobileDevice?0:20,onStart:Z,onEnd:te,delay:isMobileDevice?200:0});const{width:ve,height:ke}=d.value[0].getBoundingClientRect(),Ce={width:ve,height:ke};core.getDocEditorPages(Ce),window.addEventListener("resize",Ee),Ee()}),onUnmounted(()=>{core.removeEvent("getDocEditorPages",M),window.addEventListener("resize",Ee)});const E=core.getPagesCount();for(let ve=0;ve<E;ve++)s.push({type:"page"});const M=ve=>{const{index:ke,pageData:Ce}=ve;s[ke]=Ce};core.addEvent("getDocEditorPages",M);const T=()=>{r.openElement("deletePageDialog")},D=async ve=>{const ke={type:"insert",pageIndex:ve.place};if(ve.type==="blank"){const Ce=ve.targetPlace?s[ve.place-1]:s[ve.place]||s[ve.place-1],Pe={type:ve.type,rotation:0,size:ve.size||{width:Ce.size.width,height:Ce.size.height}};s.splice(ve.place,0,Pe),ke.size=Pe.size,core.saveDocumentEdit(ke)}else if(ve.type==="pdf"){ke.file=ve.file,ke.range=ve.range,ke.password=ve.password||"";const{width:Ce,height:Pe}=d.value[0].getBoundingClientRect(),Me=await core.saveDocumentEdit(ke);if(!Me)return;const Le=s.length;for(let ye=0;ye<Me-Le;ye++)s.splice(ve.place+ye,0,{type:"page"});const Te={width:Ce,height:Pe};core.getDocEditorPages(Te,ve.place,Me-Le)}o.setDocEditorOperationList(ke),w.length=0},I=ve=>{const{width:ke,height:Ce}=ve,Pe=P?140:204,Me=P?141:216,Le=ke/k,Te=Ce/k,ye=Pe/Le,_e=Me/Te;let we=Math.min(ye,_e);we>1&&(we=1);const Se=Le*we,$e=Te*we;return{width:Se,height:$e}},N=ve=>{const ke=w.indexOf(ve);ke===-1?w.push(ve):w.splice(ke,1)},O=()=>{if(w.length<s.length){w.length=0;for(let ve=0;ve<s.length;ve++)w.push(ve)}else w.length=0},F=()=>{r.openElement("insertPageSettingDialog")},U=()=>{w.sort((ke,Ce)=>Ce-ke),w.forEach(ke=>{s.splice(ke,1)});const ve={type:"delete",selectedPageIndexArray:Array.from(w)};core.saveDocumentEdit(ve),o.setDocEditorOperationList(ve),w.length=0},Y=ve=>{w.forEach(Ce=>{const Pe=s[Ce];Pe.rotation+=ve,(Pe.rotation>3||Pe.rotation<-3)&&(Pe.rotation=0)});const ke={type:"rotate",selectedPageIndexArray:Array.from(w),rotation:ve};core.saveDocumentEdit(ke),o.setDocEditorOperationList(ke)},Q=ve=>new Map([[-3,-270],[-2,180],[-1,-90],[0,0],[1,90],[2,180],[3,270]]).get(ve),q=()=>{w.sort((ke,Ce)=>Ce-ke),w.forEach(ke=>{s.splice(ke,0,{...s[ke]})});const ve={type:"copy",selectedPageIndexArray:Array.from(w)};core.saveDocumentEdit(ve),o.setDocEditorOperationList(ve),w.length=0},ne=()=>{const ve=document.createElement("input");ve.type="file",ve.accept=".pdf",ve.click(),ve.addEventListener("change",async function(ke){const Ce=ke.target.files[0],Pe=w[0];let Me=URL.createObjectURL(Ce);const Le=await core.checkPassword(Me,!0);Le!==!1&&(D({type:"pdf",file:Ce,range:"all",place:Pe,password:Le}),U())})},J=()=>{r.openElement("extractPageSettingDialog")},re=async ve=>{let ke=ve.range.replace(/\s/g,"");const Ce=s.length;ve.range==="all"?ke="1-"+Ce:ve.range==="odd"?ke=Array.from({length:Ce},(Te,ye)=>ye+1).filter(Te=>Te%2!==0).join(","):ve.range==="even"&&(ke=Array.from({length:Ce},(Te,ye)=>ye+1).filter(Te=>Te%2===0).join(","));let Pe=ke.split(","),Me=[];Pe.forEach(Te=>{if(Te.includes("-")){let[ye,_e]=Te.split("-").map(we=>parseInt(we));for(let we=ye;we<=_e;we++)Me.push(we-1)}else Te&&Me.push(parseInt(Te)-1)});const Le={type:"extract",range:ve.separateFile?Me:ke,separateFile:ve.separateFile};if(await core.saveDocumentEdit(Le),o.setDocEditorOperationList(Le),ve.deleteAfter){Me.reverse().forEach(ye=>{s.splice(ye,1)});const Te={type:"delete",selectedPageIndexArray:Me};core.saveDocumentEdit(Te),o.setDocEditorOperationList(Te),w.length=0}},X=()=>{r.openElement("movePageSettingDialog")},j=ve=>{if(w.length===1||w.length<2&&v.value>=0||w.length>1&&v.value>=0&&!w.includes(v.value)){const ke=w.length===1&&w.includes(v.value)||w.length===1&&v.value<0,Ce=ke?w[0]:[v.value],Pe=Ce>ve?ve:ve-1;if(Ce===Pe)return;const[Me]=s.splice(Ce,1);s.splice(Pe,0,Me);const Le={type:"move",pageIndex:Ce,targetPageIndex:Pe};core.saveDocumentEdit(Le),o.setDocEditorOperationList(Le),ke&&(w[0]=Pe)}else{w.sort((ke,Ce)=>ke-Ce);for(let ke=0;ke<w.length;ke++){let Ce,Pe;if(w[ke]===ve)Ce=w[ke],Pe=ve;else if(w[ke]>ve)if(Ce=w[ke],w.includes(ve)){Pe=ve;for(let Te=0;Te<w.length;Te++)w[Te]===Pe&&Ce!==Pe&&Pe++}else Pe=ve;else Ce=w[ke]-ke,Pe=ve-1;if(w.includes(Ce)&&w.includes(Pe)&&Ce===Pe)continue;const[Me]=s.splice(Ce,1);s.splice(Pe,0,Me);const Le={type:"move",pageIndex:Ce,targetPageIndex:Pe};core.saveDocumentEdit(Le),o.setDocEditorOperationList(Le),w[ke]=w[ke]>ve?Pe:Pe-ke}}},Z=ve=>{v.value=ve.oldIndex,g.value.addEventListener(isMobileDevice?"touchmove":"mousemove",W),isMobileDevice&&(document.body.style.overscrollBehavior="none",document.body.style.userSelect="none",document.getElementById("app").style.touchAction="none",x.value.style.overflow="hidden")},W=ve=>{w.length>1&&w.includes(v.value)&&g.value.querySelector(".sortable-drag").style.setProperty("--after-content","'"+w.length+"'");let ke=isMobileDevice?document.elementFromPoint(ve.touches[0].clientX,ve.touches[0].clientY):ve.target;const Ce=g.value.children;for(let Pe=0;Pe<Ce.length;Pe++){const Me=Ce[Pe];if(Me.contains(ke)){const Le=Me.getBoundingClientRect(),Te=isMobileDevice?ve.touches[0].clientX-Le.left:ve.offsetX+30;m.value=Te<Le.width/2,m.value?y.value=Pe-1:y.value=Pe}}isMobileDevice&&Ae(ve.touches[0].clientY)},te=()=>{clearInterval(S),g.value.removeEventListener(isMobileDevice?"touchmove":"mousemove",W),y.value>-2&&!le(y.value)&&j(y.value+1),v.value=-2,y.value=-2,isMobileDevice&&(document.body.style.overscrollBehavior="auto",document.body.style.userSelect="auto",document.getElementById("app").style.touchAction="auto",x.value.style.overflow="auto")},le=ve=>{if(![ve-1,ve,ve+1].includes(y.value+1))return!1;if(w.includes(v.value)){if(w.length===1&&(w[0]===y.value+1||w[0]===y.value)||w.length>1&&oe(w)&&(w.includes(y.value+1)||w.includes(y.value)))return!0}else if([v.value,v.value-1].includes(y.value))return!0;return!1},oe=ve=>{ve.sort(function(Ce,Pe){return Ce-Pe});for(var ke=0;ke<ve.length-1;ke++)if(ve[ke]+1!==ve[ke+1])return!1;return!0},Ee=()=>{const ve=window.innerWidth,ke=ve>767?280:170;f.value=parseInt(ve%ke/2)},Ae=ve=>{const Ce=x.value,Me=Ce.getBoundingClientRect().height,Le=ve,Te=Ce.scrollHeight;Le<=100||Le>=Me-100?(clearInterval(S),S=setInterval(()=>{Le<=100?(Ce.scrollTop-=10,Ce.scrollTop<=0&&clearInterval(S)):Le>=Me-100&&(Ce.scrollTop+=10,Ce.scrollTop+Me>=Te&&clearInterval(S))},10)):clearInterval(S)};return(ve,ke)=>{const Ce=__unplugin_components_0$r,Pe=_sfc_main$4l,Me=__unplugin_components_8$4,Le=__unplugin_components_3$b,Te=__unplugin_components_4$b,ye=__unplugin_components_5$6,_e=__unplugin_components_6$6,we=__unplugin_components_7$5,Se=__unplugin_components_8$5,$e=__unplugin_components_9$3,Be=__unplugin_components_10$4,Oe=_sfc_main$3g,Ge=_sfc_main$3j,Ie=_sfc_main$3k,je=_sfc_main$3n;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:"document-editor-container",ref_key:"docEditorContainer",ref:x},[createBaseVNode("div",{class:normalizeClass(["tools-container",{mobile:unref(isMobileDevice)}])},[createVNode(Pe,{class:normalizeClass({"with-text":!unref(isMobileDevice)}),onClick:F},{default:withCtx(()=>[createVNode(Ce),createBaseVNode("span",null,toDisplayString$1(ve.$t("documentEditor.insert")),1)]),_:1},8,["class"]),createVNode(Pe,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(w).length||unref(w).length==unref(s).length}),onClick:T},{default:withCtx(()=>[createVNode(Me),createBaseVNode("span",null,toDisplayString$1(ve.$t("documentEditor.delete")),1)]),_:1},8,["class"]),createVNode(Pe,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(w).length}),onClick:ke[0]||(ke[0]=qe=>Y(1))},{default:withCtx(()=>[createVNode(Le),createBaseVNode("span",null,toDisplayString$1(ve.$t("documentEditor.rotateRight")),1)]),_:1},8,["class"]),createVNode(Pe,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(w).length}),onClick:ke[1]||(ke[1]=qe=>Y(-1))},{default:withCtx(()=>[createVNode(Te),createBaseVNode("span",null,toDisplayString$1(ve.$t("documentEditor.rotateLeft")),1)]),_:1},8,["class"]),createVNode(Pe,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(w).length}),onClick:q},{default:withCtx(()=>[createVNode(ye),createBaseVNode("span",null,toDisplayString$1(ve.$t("documentEditor.copy")),1)]),_:1},8,["class"]),createVNode(Pe,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(w).length}),onClick:J},{default:withCtx(()=>[createVNode(_e),createBaseVNode("span",null,toDisplayString$1(ve.$t("documentEditor.extract")),1)]),_:1},8,["class"]),createVNode(Pe,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(w).length}),onClick:ne},{default:withCtx(()=>[createVNode(we),createBaseVNode("span",null,toDisplayString$1(ve.$t("documentEditor.replace")),1)]),_:1},8,["class"]),createVNode(Pe,{class:normalizeClass({"with-text":!unref(isMobileDevice),disabled:!unref(w).length}),onClick:X},{default:withCtx(()=>[createVNode(Se),createBaseVNode("span",null,toDisplayString$1(ve.$t("documentEditor.move")),1)]),_:1},8,["class"]),createVNode(Pe,{class:"select-all",onClick:O},{default:withCtx(()=>[unref(w).length===unref(s).length?(openBlock(),createBlock($e,{key:0})):(openBlock(),createBlock(Be,{key:1}))]),_:1})],2),createBaseVNode("div",{class:"page-container",ref_key:"dragContainer",ref:g,style:normalizeStyle({"margin-left":f.value+"px"})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),(qe,Ue)=>(openBlock(),createElementBlock("div",{key:`${qe.type} - ${Ue}`,class:normalizeClass(["page",{selected:unref(w).includes(Ue),"drag-indicate-right":y.value===Ue&&!m.value,"drag-indicate-left":y.value+1===Ue&&m.value,"drag-indicate-disable":v.value>=0&&y.value>=-1&&le(Ue),"has-hover":!unref(isMobileDevice)&&v.value<0&&!unref(w).includes(Ue)}]),ref_for:!0,ref_key:"imgBoxEl",ref:d},[createBaseVNode("div",{class:"img-box",onClick:Je=>N(Ue)},[qe.img?(openBlock(),createElementBlock("img",{key:0,src:qe.img,style:normalizeStyle(`transform: rotate(${Q(qe.rotation)}deg);`)},null,12,_hoisted_2$2x)):qe.type==="blank"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass({"blank-page":qe.type==="blank"}),style:normalizeStyle({transform:"rotate("+Q(qe.rotation)+"deg)",width:I(qe.size).width+"px",height:I(qe.size).height+"px"})},null,6)):createCommentVNode("",!0)],8,_hoisted_1$2K),createBaseVNode("p",null,toDisplayString$1(Ue+1),1)],2))),128))],4)],512),createVNode(Oe,{onInsertPage:D,selectedPageList:unref(w),totalPages:unref(s).length},null,8,["selectedPageList","totalPages"]),createVNode(Ge,{onDeletePage:U,selectedPageList:unref(w)},null,8,["selectedPageList"]),createVNode(Ie,{onExtractPage:re,totalPages:unref(s).length,selectedPageList:unref(w)},null,8,["totalPages","selectedPageList"]),createVNode(je,{onMovePage:j,totalPages:unref(s).length,selectedPageList:unref(w)},null,8,["totalPages","selectedPageList"])],64)}}},PrintSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2J={key:0,class:"print-setting-popup"},_hoisted_2$2w={class:"select-content"},dialogName$e="printSettingDialog",_sfc_main$34={__name:"PrintSettingDialog",setup(e){const{triggerPrinting:n}=core,r=useViewerStore(),o=useDocumentStore(),u=computed(()=>r.isElementOpen(dialogName$e)),s=computed(()=>o.getCompareResult),w=ref("old"),g=()=>{r.closeElement(dialogName$e)},v=async()=>{let y=null;w.value==="old"?y=s.value.oldFile.url:w.value==="new"&&(y=s.value.newFile.url),g(),r.setDownloading(!0);try{await n(y),r.setDownloading(!1)}catch(m){console.log(m)}};return(y,m)=>{const d=__unplugin_components_0$u,f=__unplugin_components_1$9,x=_sfc_main$4e;return u.value?(openBlock(),createElementBlock("div",_hoisted_1$2J,[createVNode(x,{show:u.value,dialogName:dialogName$e,close:!0},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(y.$t("compare.printSetting")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:g},toDisplayString$1(y.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:v},toDisplayString$1(y.$t("ok")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$2w,[createBaseVNode("div",{onClick:m[0]||(m[0]=k=>w.value="old"),class:"option"},[w.value==="old"?(openBlock(),createBlock(d,{key:0})):(openBlock(),createBlock(f,{key:1})),createTextVNode(toDisplayString$1(y.$t("compare.printOldFile")),1)]),createBaseVNode("div",{onClick:m[1]||(m[1]=k=>w.value="new"),class:"option"},[w.value==="new"?(openBlock(),createBlock(d,{key:0})):(openBlock(),createBlock(f,{key:1})),createTextVNode(toDisplayString$1(y.$t("compare.printNewFile")),1)])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}};var FileSaver_min={exports:{}};(function(e,n){(function(r,o){o()})(commonjsGlobal,function(){function r(y,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function o(y,m,d){var f=new XMLHttpRequest;f.open("GET",y),f.responseType="blob",f.onload=function(){v(f.response,m,d)},f.onerror=function(){console.error("could not download file")},f.send()}function u(y){var m=new XMLHttpRequest;m.open("HEAD",y,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function s(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(m)}}var w=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,g=w.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=w.saveAs||(typeof window!="object"||window!==w?function(){}:"download"in HTMLAnchorElement.prototype&&!g?function(y,m,d){var f=w.URL||w.webkitURL,x=document.createElement("a");m=m||y.name||"download",x.download=m,x.rel="noopener",typeof y=="string"?(x.href=y,x.origin===location.origin?s(x):u(x.href)?o(y,m,d):s(x,x.target="_blank")):(x.href=f.createObjectURL(y),setTimeout(function(){f.revokeObjectURL(x.href)},4e4),setTimeout(function(){s(x)},0))}:"msSaveOrOpenBlob"in navigator?function(y,m,d){if(m=m||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(r(y,d),m);else if(u(y))o(y,m,d);else{var f=document.createElement("a");f.href=y,f.target="_blank",setTimeout(function(){s(f)})}}:function(y,m,d,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof y=="string")return o(y,m,d);var x=y.type==="application/octet-stream",k=/constructor/i.test(w.HTMLElement)||w.safari,P=/CriOS\/[\d]+/.test(navigator.userAgent);if((P||x&&k||g)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var T=S.result;T=P?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=T:location=T,f=null},S.readAsDataURL(y)}else{var E=w.URL||w.webkitURL,M=E.createObjectURL(y);f?f.location=M:location.href=M,f=null,setTimeout(function(){E.revokeObjectURL(M)},4e4)}});w.saveAs=v.saveAs=v,e.exports=v})})(FileSaver_min);const DownloadSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2I={key:0,class:"download-setting-popup"},_hoisted_2$2v={class:"select-content"},dialogName$d="downloadSettingDialog",_sfc_main$33={__name:"DownloadSettingDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$d)),u=computed(()=>r.getCompareResult),s=ref(1),w=()=>{n.closeElement(dialogName$d)},g=async()=>{const v=[];s.value===1?v.push(u.value.mergeFile):s.value===2&&v.push(u.value.oldFile,u.value.newFile),w(),n.setDownloading(!0);try{v.forEach(y=>{FileSaver_min.exports.saveAs(y.url,y.filename)}),n.setDownloading(!1)}catch(y){console.log(y)}};return(v,y)=>{const m=__unplugin_components_0$u,d=__unplugin_components_1$9,f=_sfc_main$4e;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$2I,[createVNode(f,{show:o.value,dialogName:dialogName$d,close:!0},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(v.$t("compare.downloadOptions")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:w},toDisplayString$1(v.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:g},toDisplayString$1(v.$t("ok")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$2v,[createBaseVNode("div",{onClick:y[0]||(y[0]=x=>s.value=2),class:"option"},[s.value===2?(openBlock(),createBlock(m,{key:0})):(openBlock(),createBlock(d,{key:1})),createTextVNode(toDisplayString$1(v.$t("compare.downloadTwoFiles")),1)]),createBaseVNode("div",{onClick:y[1]||(y[1]=x=>s.value=1),class:"option"},[s.value===1?(openBlock(),createBlock(m,{key:0})):(openBlock(),createBlock(d,{key:1})),createTextVNode(toDisplayString$1(v.$t("compare.downloadOneFile")),1)])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}};function getHash(){let e=window.location.href,n=e?e.indexOf("#"):-1;return 0<=n?e.substring(n+1):""}function getHashParameters(e,n){let r=typeof n,o=getHash().split("&").reduce(function(u,s){return s=s.split("="),u[decodeURIComponent(s[0])]=decodeURIComponent(s[1]),u},{});if(r==="boolean"&&typeof o[e]<"u"){if(r=o[e],r==="true"||r==="1")return!0;if(r==="false"||r==="0")return!1}return o[e]||n}const CompareSettingDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2H={key:0,class:"compare-setting-popup"},_hoisted_2$2u={class:"mode pc"},_hoisted_3$2h={class:"dialog-content"},_hoisted_4$U={class:"mode mobile"},_hoisted_5$z={class:"compare-items"},_hoisted_6$o={class:"title"},_hoisted_7$i={class:"row"},_hoisted_8$e={class:"row"},_hoisted_9$e={class:"opacity"},_hoisted_10$e={class:"title"},_hoisted_11$b={class:"row"},_hoisted_12$a={class:"percent-input"},_hoisted_13$a={class:"row"},_hoisted_14$a={class:"percent-input"},_hoisted_15$a={class:"mark-color"},_hoisted_16$9={class:"title"},_hoisted_17$8={class:"row"},_hoisted_18$7={class:"select color-select"},_hoisted_19$7={class:"colors-container mark"},_hoisted_20$7={class:"cell-container"},_hoisted_21$7={class:"cell-outer"},_hoisted_22$7={class:"drop-down"},_hoisted_23$6={class:"colors-container mark"},_hoisted_24$6={class:"cell-container"},_hoisted_25$5=["onClick"],_hoisted_26$5={class:"row"},_hoisted_27$4={class:"select color-select"},_hoisted_28$4={class:"colors-container mark"},_hoisted_29$4={class:"cell-container"},_hoisted_30$4={class:"cell-outer"},_hoisted_31$4={class:"drop-down"},_hoisted_32$2={class:"colors-container mark"},_hoisted_33$1={class:"cell-container"},_hoisted_34$1=["onClick"],_hoisted_35$1={class:"row"},_hoisted_36$1={class:"select"},_hoisted_37$1={class:"row"},_hoisted_38$1={class:"select color-select"},_hoisted_39$1={class:"colors-container mark"},_hoisted_40$1={class:"cell-container"},_hoisted_41$1={class:"cell-outer"},_hoisted_42={class:"drop-down"},_hoisted_43={class:"colors-container mark"},_hoisted_44={class:"cell-container"},_hoisted_45=["onClick"],_hoisted_46={class:"row"},_hoisted_47={class:"select color-select"},_hoisted_48={class:"colors-container mark"},_hoisted_49={class:"cell-container"},_hoisted_50={class:"cell-outer"},_hoisted_51={class:"drop-down"},_hoisted_52={class:"colors-container mark"},_hoisted_53={class:"cell-container"},_hoisted_54=["onClick"],_hoisted_55={class:"row"},_hoisted_56={class:"select color-select"},_hoisted_57={class:"colors-container mark"},_hoisted_58={class:"cell-container"},_hoisted_59={class:"cell-outer"},_hoisted_60={class:"drop-down"},_hoisted_61={class:"colors-container mark"},_hoisted_62={class:"cell-container"},_hoisted_63=["onClick"],_hoisted_64={class:"dialog-footer mobile"},_hoisted_65={class:"loading"},_hoisted_66={class:"loading-compare-tip"},dialogName$c="compareSettingDialog",_sfc_main$32={__name:"CompareSettingDialog",setup(e){const{t:n}=useI18n(),{compare:r,loadDocument:o,getOptionUrl:u}=core,s=useViewerStore(),w=useDocumentStore();getCurrentInstance().appContext.app.config.globalProperties;const g=computed(()=>s.isElementOpen(dialogName$c)),v=computed(()=>w.getCompareFiles),y=computed(()=>s.getCompareMode),m=ref(50),d=ref(50),f=computed(()=>w.getCompareSetting("oldFileColor")),x=computed(()=>w.getCompareSetting("newFileColor")),k=ref("0"),P=[{label:n("compare.normal"),value:"0"},{label:n("compare.multiply"),value:"1"},{label:n("compare.screen"),value:"2"},{label:n("compare.overlay"),value:"3"},{label:n("compare.darken"),value:"4"},{label:n("compare.lighten"),value:"5"},{label:n("compare.colorDodge"),value:"6"},{label:n("compare.colorBurn"),value:"7"},{label:n("compare.hardLight"),value:"8"},{label:n("compare.softLight"),value:"9"},{label:n("compare.difference"),value:"10"},{label:n("compare.exclusion"),value:"11"},{label:n("compare.hue"),value:"12"},{label:n("compare.saturation"),value:"13"},{label:n("compare.colour"),value:"14"},{label:n("compare.luminosity"),value:"15"}],S=ref(!0),E=ref(!0),M=ref("#93B9FD"),T=ref("#C0FFEC"),D=ref("#FBBDBF"),I=["#FBBDBF","#93B9FD","#FFF6B3","#C0FFEC"],N=ref(null),O=ref(null),F=ref(null),U=ref(null),Y=ref(null),Q=ref(!1),q=ref(null),ne=ref(null);watch(()=>m.value,(Ee,Ae)=>{const ve=/^\d+$/;Ee!==""&&(Ee>100||Ee<0||!ve.test(Ee))&&(m.value=Ae)}),watch(()=>d.value,(Ee,Ae)=>{const ve=/^\d+$/;Ee!==""&&(Ee>100||Ee<0||!ve.test(Ee))&&(d.value=Ae)});const J=async()=>{const Ee={leftFile:v.value.oldFile,leftFilePassword:v.value.oldFilePassword,rightFile:v.value.newFile,rightFilePassword:v.value.newFilePassword};if(y.value==="content"){let Ae=S.value,ve=E.value;!Ae&&!ve&&(Ae=ve=!0);const ke={type:1,textCompare:Ae,imgCompare:ve,replaceColor:M.value,insertColor:T.value,deleteColor:D.value};Object.assign(Ee,ke)}else{const Ae={type:2,inTransparency:m.value+"",newTransparency:d.value+"",coverType:k.value,inColor:f.value,newColor:x.value};Object.assign(Ee,Ae)}try{s.closeElement(dialogName$c),Q.value=!0;const Ae=await r(Ee);if(Ae&&Ae.url){w.resetSetting();const ve={filename:n("compare.byComPDFKit")+".pdf",progress:w.setLoadingProgress,pageChangedCallback:s.setCurrentPage,scaleChangedCallback:s.setCurrentScale,annotationsNumChangedCallback:w.setAnnotationsCount,distanceChangedCallback:w.setDistance,notUpdatePwd:!0};await o(Ae.url,ve),Q.value=!1;const ke=core.getPagesCount(),Ce=core.getScale();w.setTotalPages(ke),s.setCurrentScale(Ce),s.setCurrentPage(1),s.setUpload(!0),s.setCompareStatus("finished")}else if(Ae&&Array.isArray(Ae)){const ve=Ae[0],ke=Ae[1];w.setCompareResult({oldFile:ve,newFile:ke,mergeFile:Ae[2]}),W(ve.url,ve.fileName,2),W(ke.url,ke.fileName,3),Q.value=!1,s.setCompareStatus("next")}else Q.value=!1,s.setDownloadError("Compared")}catch(Ae){if(console.log(Ae),Q.value=!1,s.setDownloadError("Compared"),Ae==="invalid_file_error"||Ae==="no_password_given"||Ae==="incorrect_password"){s.setUpload(!1),w.setLoadingProgress(0),s.resetSetting();const ve=document.getElementById("fileInput");ve.value=""}}},re=Ee=>{Ee.target.value||(m.value=1)},X=Ee=>{Ee.target.value||(d.value=1)},j=(Ee,Ae)=>{Ee==="old"?w.setCompareSetting("oldFileColor",Ae):Ee==="new"?w.setCompareSetting("newFileColor",Ae):Ee==="replace"?M.value=Ae:Ee==="insert"?T.value=Ae:Ee==="delete"&&(D.value=Ae),y.value==="content"?(F.value.setShow(!1),U.value.setShow(!1),Y.value.setShow(!1)):(N.value.setShow(!1),O.value.setShow(!1))},Z=()=>{s.closeElement(dialogName$c)};async function W(Ee,Ae=null,ve){s.setUploadLoading(!0);let ke=null;ve===2?ke=w.getCompareFile("oldFilePassword"):ve===3&&(ke=w.getCompareFile("newFilePassword"));const Ce={extension:getHashParameters("extension",null),filename:Ae||getHashParameters("filename",null),externalPath:getHashParameters("p",""),documentId:getHashParameters("did",null),progress:w.setLoadingProgress,pageChangedCallback:s.setCurrentPage,scaleChangedCallback:ve===2?le():oe(),annotationsNumChangedCallback:w.setAnnotationsCount,distanceChangedCallback:w.setDistance,notUploadPdf:!0};ke&&(Ce.pwd=ke);try{await o(Ee,Ce,ve)}catch(Pe){console.log(Pe),s.setDownloadError("Loaded")}s.setUploadLoading(!1)}const te=Ee=>{s.setCompareMode(Ee)},le=Ee=>{q.value=Ee},oe=Ee=>{ne.value=Ee};return(Ee,Ae)=>{const ve=__unplugin_components_1$f,ke=__unplugin_components_1$e,Ce=__unplugin_components_0$s,Pe=_sfc_main$4e,Me=__unplugin_components_13$1;return openBlock(),createElementBlock(Fragment,null,[g.value?(openBlock(),createElementBlock("div",_hoisted_1$2H,[createVNode(Pe,{show:g.value,dialogName:dialogName$c,close:!1},{header:withCtx(()=>[createBaseVNode("div",_hoisted_2$2u,[createBaseVNode("div",{class:normalizeClass({selected:y.value==="content"}),onClick:Ae[0]||(Ae[0]=Le=>te("content"))},toDisplayString$1(Ee.$t("compare.contentComparison")),3),createBaseVNode("div",{class:normalizeClass({selected:y.value==="cover"}),onClick:Ae[1]||(Ae[1]=Le=>te("cover"))},toDisplayString$1(Ee.$t("compare.overlayComparison")),3)])]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:Z},toDisplayString$1(Ee.$t("compare.return")),1),createBaseVNode("div",{class:"rect-button blue",onClick:J},toDisplayString$1(Ee.$t("compare.compare")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_3$2h,[createBaseVNode("div",_hoisted_4$U,[createBaseVNode("div",{class:normalizeClass({selected:y.value==="content"}),onClick:Ae[2]||(Ae[2]=Le=>te("content"))},toDisplayString$1(Ee.$t("compare.contentComparison")),3),createBaseVNode("div",{class:normalizeClass({selected:y.value==="cover"}),onClick:Ae[3]||(Ae[3]=Le=>te("cover"))},toDisplayString$1(Ee.$t("compare.overlayComparison")),3)]),withDirectives(createBaseVNode("div",_hoisted_5$z,[createBaseVNode("p",_hoisted_6$o,toDisplayString$1(Ee.$t("compare.compareItems")),1),createBaseVNode("div",_hoisted_7$i,[createBaseVNode("div",{class:"check-box",onClick:Ae[4]||(Ae[4]=Le=>S.value=!S.value)},[createBaseVNode("div",{class:normalizeClass(["check",{active:S.value}])},[withDirectives(createVNode(ve,null,null,512),[[vShow,S.value]])],2),createBaseVNode("span",null,toDisplayString$1(Ee.$t("compare.text")),1)])]),createBaseVNode("div",_hoisted_8$e,[createBaseVNode("div",{class:"check-box",onClick:Ae[5]||(Ae[5]=Le=>E.value=!E.value)},[createBaseVNode("div",{class:normalizeClass(["check",{active:E.value}])},[withDirectives(createVNode(ve,null,null,512),[[vShow,E.value]])],2),createBaseVNode("span",null,toDisplayString$1(Ee.$t("compare.images")),1)])])],512),[[vShow,y.value==="content"]]),withDirectives(createBaseVNode("div",_hoisted_9$e,[createBaseVNode("p",_hoisted_10$e,toDisplayString$1(Ee.$t("opacity")),1),createBaseVNode("div",_hoisted_11$b,[createBaseVNode("span",null,toDisplayString$1(Ee.$t("compare.oldFile")),1),createVNode(unref(NSlider),{value:m.value,"onUpdate:value":Ae[6]||(Ae[6]=Le=>m.value=Le),step:10,max:100,min:0},{thumb:withCtx(()=>[createVNode(ke)]),_:1},8,["value"]),createBaseVNode("div",_hoisted_12$a,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":Ae[7]||(Ae[7]=Le=>m.value=Le),type:"number",step:"10",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onBlur:re,name:"compare"},null,544),[[vModelText,m.value]])])]),createBaseVNode("div",_hoisted_13$a,[createBaseVNode("span",null,toDisplayString$1(Ee.$t("compare.newFile")),1),createVNode(unref(NSlider),{value:d.value,"onUpdate:value":Ae[8]||(Ae[8]=Le=>d.value=Le),step:10,max:100,min:0},{thumb:withCtx(()=>[createVNode(ke)]),_:1},8,["value"]),createBaseVNode("div",_hoisted_14$a,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":Ae[9]||(Ae[9]=Le=>d.value=Le),type:"number",step:"10",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onBlur:X,name:"compare"},null,544),[[vModelText,d.value]])])])],512),[[vShow,y.value==="cover"]]),createBaseVNode("div",_hoisted_15$a,[createBaseVNode("p",_hoisted_16$9,toDisplayString$1(Ee.$t("compare.colorMark")),1),y.value==="cover"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_17$8,[createBaseVNode("span",null,toDisplayString$1(Ee.$t("compare.oldFile")),1),createVNode(unref(NPopover),{ref_key:"oldColorPopover",ref:N,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_18$7,[createBaseVNode("div",_hoisted_19$7,[createBaseVNode("span",_hoisted_20$7,[createBaseVNode("span",_hoisted_21$7,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${f.value};`)},null,4)])])]),createVNode(Ce)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_22$7,[(openBlock(),createElementBlock(Fragment,null,renderList(I,(Le,Te)=>createBaseVNode("div",{class:"drop-item",key:Te},[createBaseVNode("div",_hoisted_23$6,[createBaseVNode("span",_hoisted_24$6,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:f.value===Le}]),onClick:ye=>j("old",Le)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Le};`)},null,4)],10,_hoisted_25$5)])])])),64))])]),_:1},512)]),createBaseVNode("div",_hoisted_26$5,[createBaseVNode("span",null,toDisplayString$1(Ee.$t("compare.newFile")),1),createVNode(unref(NPopover),{ref_key:"newColorPopover",ref:O,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_27$4,[createBaseVNode("div",_hoisted_28$4,[createBaseVNode("span",_hoisted_29$4,[createBaseVNode("span",_hoisted_30$4,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${x.value};`)},null,4)])])]),createVNode(Ce)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_31$4,[(openBlock(),createElementBlock(Fragment,null,renderList(I,(Le,Te)=>createBaseVNode("div",{class:"drop-item",key:Te},[createBaseVNode("div",_hoisted_32$2,[createBaseVNode("span",_hoisted_33$1,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:x.value===Le}]),onClick:ye=>j("new",Le)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Le};`)},null,4)],10,_hoisted_34$1)])])])),64))])]),_:1},512)]),createBaseVNode("div",_hoisted_35$1,[createBaseVNode("span",null,toDisplayString$1(Ee.$t("compare.blendMode")),1),createVNode(unref(NPopselect),{value:k.value,"onUpdate:value":Ae[10]||(Ae[10]=Le=>k.value=Le),options:P,trigger:"click",placement:"bottom-start"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_36$1,[createBaseVNode("span",null,toDisplayString$1(P[parseInt(k.value)].label),1),createVNode(Ce)])]),_:1},8,["value"])])],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("div",_hoisted_37$1,[createBaseVNode("span",null,toDisplayString$1(Ee.$t("compare.replacedContent")),1),createVNode(unref(NPopover),{ref_key:"replaceColorPopover",ref:F,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_38$1,[createBaseVNode("div",_hoisted_39$1,[createBaseVNode("span",_hoisted_40$1,[createBaseVNode("span",_hoisted_41$1,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${M.value};`)},null,4)])])]),createVNode(Ce)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_42,[(openBlock(),createElementBlock(Fragment,null,renderList(I,(Le,Te)=>createBaseVNode("div",{class:"drop-item",key:Te},[createBaseVNode("div",_hoisted_43,[createBaseVNode("span",_hoisted_44,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:M.value===Le}]),onClick:ye=>j("replace",Le)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Le};`)},null,4)],10,_hoisted_45)])])])),64))])]),_:1},512)]),createBaseVNode("div",_hoisted_46,[createBaseVNode("span",null,toDisplayString$1(Ee.$t("compare.insertedContent")),1),createVNode(unref(NPopover),{ref_key:"insertColorPopover",ref:U,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_47,[createBaseVNode("div",_hoisted_48,[createBaseVNode("span",_hoisted_49,[createBaseVNode("span",_hoisted_50,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${T.value};`)},null,4)])])]),createVNode(Ce)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_51,[(openBlock(),createElementBlock(Fragment,null,renderList(I,(Le,Te)=>createBaseVNode("div",{class:"drop-item",key:Te},[createBaseVNode("div",_hoisted_52,[createBaseVNode("span",_hoisted_53,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:T.value===Le}]),onClick:ye=>j("insert",Le)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Le};`)},null,4)],10,_hoisted_54)])])])),64))])]),_:1},512)]),createBaseVNode("div",_hoisted_55,[createBaseVNode("span",null,toDisplayString$1(Ee.$t("compare.deletedContent")),1),createVNode(unref(NPopover),{ref_key:"deleteColorPopover",ref:Y,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,class:"color-popover"},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_56,[createBaseVNode("div",_hoisted_57,[createBaseVNode("span",_hoisted_58,[createBaseVNode("span",_hoisted_59,[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${D.value};`)},null,4)])])]),createVNode(Ce)])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_60,[(openBlock(),createElementBlock(Fragment,null,renderList(I,(Le,Te)=>createBaseVNode("div",{class:"drop-item",key:Te},[createBaseVNode("div",_hoisted_61,[createBaseVNode("span",_hoisted_62,[createBaseVNode("span",{class:normalizeClass(["cell-outer",{active:D.value===Le}]),onClick:ye=>j("delete",Le)},[createBaseVNode("span",{class:"cell",style:normalizeStyle(`background-color: ${Le};`)},null,4)],10,_hoisted_63)])])])),64))])]),_:1},512)])],64))]),createBaseVNode("div",_hoisted_64,[createBaseVNode("div",{class:"rect-button white",onClick:Z},toDisplayString$1(Ee.$t("compare.return")),1),createBaseVNode("div",{class:"rect-button blue",onClick:J},toDisplayString$1(Ee.$t("compare.compare")),1)])])]),_:1},8,["show"])])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["mask",{active:Q.value}])},[withDirectives(createBaseVNode("div",_hoisted_65,[createVNode(Me)],512),[[vShow,Q.value]]),createBaseVNode("div",_hoisted_66,[createBaseVNode("span",null,toDisplayString$1(Ee.$t("compare.comingSoon")),1)])],2)],64)}}},_sfc_main$31={},_hoisted_1$2G={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2t=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.625 9.375V3.75H9.375V9.375H3.75V10.625H9.375V16.25H10.625V10.625H16.25V9.375H10.625Z",fill:"currentColor"},null,-1),_hoisted_3$2g=[_hoisted_2$2t];function _sfc_render$1K(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2G,_hoisted_3$2g)}const __unplugin_components_3$a=_export_sfc(_sfc_main$31,[["render",_sfc_render$1K]]),_sfc_main$30={},_hoisted_1$2F={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2s=createBaseVNode("rect",{x:"3.75",y:"9.375",width:"12.5",height:"1.25",fill:"currentColor"},null,-1),_hoisted_3$2f=[_hoisted_2$2s];function _sfc_render$1J(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2F,_hoisted_3$2f)}const __unplugin_components_1$8=_export_sfc(_sfc_main$30,[["render",_sfc_render$1J]]),_sfc_main$2$={},_hoisted_1$2E={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2r=createBaseVNode("rect",{opacity:"0.01",width:"16",height:"16",transform:"matrix(0 -1 -1 0 16 16)",fill:"currentColor"},null,-1),_hoisted_3$2e=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 5.51025L7.5041 10.5L11.5 5.5L3.5 5.51025Z",fill:"currentColor"},null,-1),_hoisted_4$T=[_hoisted_2$2r,_hoisted_3$2e];function _sfc_render$1I(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2E,_hoisted_4$T)}const __unplugin_components_11$1=_export_sfc(_sfc_main$2$,[["render",_sfc_render$1I]]),ZoomOverlay_vue_vue_type_style_index_0_lang="",_hoisted_1$2D={class:"input-container"},_hoisted_2$2q={class:"drop-down-zoom"},_hoisted_3$2d=createBaseVNode("span",null,"%",-1),_hoisted_4$S={class:"drop-down zoom"},_sfc_main$2_={__name:"ZoomOverlay",props:["docNum"],setup(e){const{docNum:n}=e,r=ref(null),{proxy:{$forceUpdate:o}}=getCurrentInstance(),u=useViewerStore(),s=computed(()=>n===2?u.getOldScale:n===3?u.getNewScale:u.getScale),w=computed(()=>u.getUpload),g=()=>{s.value<=5||core.zoomOut(n)},v=()=>{s.value>1e3||core.zoomIn(n)},y=x=>{const k=/^(\d){0,4}$/,P=x.target.value;k.test(P)||P===""?n===2?u.setOldCurrentScale(P/100):n===3?u.setNewCurrentScale(P/100):u.setCurrentScale(P/100):(n===2?u.setOldCurrentScale(u.getOldScale/100):n===3?u.setNewCurrentScale(u.getNewScale/100):u.setCurrentScale(u.getScale/100),o())},m=x=>{let k="";if(x.target&&x.target.value?k=x.target.value:k=x,!k){s.value=u.getScale;return}if(/^(\d){0,4}$/.test(k)){let S=Math.max(5,k);S=Math.min(1e3,S),n===2?u.setOldCurrentScale(S/100):n===3?u.setNewCurrentScale(S/100):u.setCurrentScale(S/100),core.scaleChanged(S/100,n)}else n===2?u.setOldCurrentScale(u.getOldScale/100):n===3?u.setNewCurrentScale(u.getNewScale/100):u.setCurrentScale(u.getScale/100),o();r.value.setShow(!1)},d=computed(()=>s.value?s.value.toString().length*9:0),f=x=>{x.target.value?m(x):m("100")};return(x,k)=>{const P=__unplugin_components_11$1,S=__unplugin_components_1$8,E=_sfc_main$4l,M=__unplugin_components_3$a;return openBlock(),createElementBlock("div",{class:normalizeClass(["zoom-overlay",{disabled:!w.value}])},[createBaseVNode("div",_hoisted_1$2D,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":k[0]||(k[0]=T=>s.value=T),type:"text",pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",onInput:y,onKeydown:withKeys(m,["enter"]),onBlur:f,style:normalizeStyle({width:d.value+"px"}),name:"zoom"},null,36),[[vModelText,s.value]]),createBaseVNode("div",_hoisted_2$2q,[_hoisted_3$2d,createVNode(unref(NPopover),{ref_key:"popover",ref:r,placement:"bottom",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":4,disabled:!w.value},{trigger:withCtx(()=>[createVNode(P,{class:"arrow-left"})]),default:withCtx(()=>[createBaseVNode("div",_hoisted_4$S,[createBaseVNode("div",{class:"drop-item",onClick:k[1]||(k[1]=T=>m("10"))},"10%"),createBaseVNode("div",{class:"drop-item",onClick:k[2]||(k[2]=T=>m("25"))},"25%"),createBaseVNode("div",{class:"drop-item",onClick:k[3]||(k[3]=T=>m("50"))},"50%"),createBaseVNode("div",{class:"drop-item",onClick:k[4]||(k[4]=T=>m("100"))},"100%"),createBaseVNode("div",{class:"drop-item",onClick:k[5]||(k[5]=T=>m("150"))},"150%"),createBaseVNode("div",{class:"drop-item",onClick:k[6]||(k[6]=T=>m("200"))},"200%"),createBaseVNode("div",{class:"drop-item",onClick:k[7]||(k[7]=T=>m("300"))},"300%"),createBaseVNode("div",{class:"drop-item",onClick:k[8]||(k[8]=T=>m("400"))},"400%"),createBaseVNode("div",{class:"drop-item",onClick:k[9]||(k[9]=T=>m("500"))},"500%"),createBaseVNode("div",{class:"drop-item",onClick:k[10]||(k[10]=T=>m("1000"))},"1000%")])]),_:1},8,["disabled"])])]),createVNode(E,{img:"icon-header-zoom-out",onClick:g,title:x.$t("header.zoomOut"),class:normalizeClass({disabled:!w.value})},{default:withCtx(()=>[createVNode(S)]),_:1},8,["title","class"]),createVNode(E,{img:"icon-header-zoom-in",onClick:v,title:x.$t("header.zoomIn"),class:normalizeClass({disabled:!w.value})},{default:withCtx(()=>[createVNode(M)]),_:1},8,["title","class"])],2)}}},CompareDocumentContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$2C={class:"old"},_hoisted_2$2p={class:"file-type"},_hoisted_3$2c={class:"upload-tip"},_hoisted_4$R=createBaseVNode("br",null,null,-1),_hoisted_5$y={class:"rect-button white"},_hoisted_6$n={key:1,class:"uploaded pc"},_hoisted_7$h={class:"header-info"},_hoisted_8$d={class:"file-name"},_hoisted_9$d={class:"drop-area mobile"},_hoisted_10$d={class:"upload-tip mobile"},_hoisted_11$a={class:"text"},_hoisted_12$9={class:"rect-button white"},_hoisted_13$9={key:0,class:"file-name"},_hoisted_14$9={class:"new"},_hoisted_15$9={class:"file-type"},_hoisted_16$8={class:"upload-tip"},_hoisted_17$7=createBaseVNode("br",null,null,-1),_hoisted_18$6={class:"rect-button white"},_hoisted_19$6={key:1,class:"uploaded pc"},_hoisted_20$6={class:"header-info"},_hoisted_21$6={class:"file-name"},_hoisted_22$6={class:"drop-area mobile"},_hoisted_23$5={class:"upload-tip"},_hoisted_24$5={class:"text"},_hoisted_25$4={class:"rect-button white"},_hoisted_26$4={key:0,class:"file-name"},_sfc_main$2Z={__name:"CompareDocumentContainer",props:{docNum:Number},setup(e){const{loadDocument:n,initializeViewer:r,initConfig:o}=core,u=useViewerStore(),s=useDocumentStore(),w=computed(()=>u.getToolMode),g=computed(()=>u.getCompareStatus),v=ref(),y=ref(),m=ref(),d=ref();let f=computed(()=>s.getCompareFile("oldFile")),x=computed(()=>s.getCompareFile("newFile")),k=ref(!1),P=ref(!1);const S=computed(()=>u.getVerified);watch(()=>w.value,(Y,Q)=>{Q==="compare"&&Y!==Q&&(M(),O()),Y==="compare"&&Y!==Q&&setTimeout(()=>{S.value||(core.eventBus().dispatch("message",{type:"ERROR",message:"Invalid license"}),console.log("Invalid license")),N()},1)});const E=async(Y,Q)=>{if(!Y.target.files[0])return;let q=URL.createObjectURL(Y.target.files[0]);const ne=await core.checkPassword(q,!0);if(ne===!1){Y.target.value="";return}const J=Y.target.files[0].name;Q==="old"&&(s.setCompareFiles("oldFile",Y.target.files[0]),s.setCompareFiles("oldFilePassword",ne),F(q,J,2)),Q==="new"&&(s.setCompareFiles("newFile",Y.target.files[0]),s.setCompareFiles("newFilePassword",ne),F(q,J,3))},M=Y=>{Y==="old"?(s.setCompareFiles("oldFile",null),s.setCompareFiles("oldFilePassword","")):Y==="new"?(s.setCompareFiles("newFile",null),s.setCompareFiles("newFilePassword","")):s.initCompareFiles(),u.setCompareStatus("")},T=async(Y,Q)=>{Y.preventDefault();const q=Y.dataTransfer.files;if(k.value=!1,P.value=!1,q[0].type!=="application/pdf")return;let ne=URL.createObjectURL(q[0]);const J=await core.checkPassword(ne,!0);if(J===!1){Y.target.value="";return}const re=q[0].name;Q==="old"&&(s.setCompareFiles("oldFile",q[0]),s.setCompareFiles("oldFilePassword",J),F(ne,re,2)),Q==="new"&&(s.setCompareFiles("newFile",q[0]),s.setCompareFiles("newFilePassword",J),F(ne,re,3))},D=Y=>{Y==="old"&&(k.value=!0),Y==="new"&&(P.value=!0)},I=Y=>{const Q=document.getElementById("oldDropArea"),q=document.getElementById("newDropArea");let ne=Y.relatedTarget;for(;ne;){if(ne===Q||Q.contains(ne)||ne===q||q.contains(ne))return;ne=ne.parentElement}k.value=!1,P.value=!1},N=()=>{const Y=u.getLicense;!Y||(core.setDocumentViewer(2,null,{$t:instance.$t}),core.setDocumentViewer(3,null,{$t:instance.$t}),o({license:Y},2),r({container:v.value,viewer:y.value},2),o({license:Y},3),r({container:m.value,viewer:d.value},3))},O=()=>{core.deleteDocumentViewer(2),core.deleteDocumentViewer(3)};async function F(Y,Q,q){u.setUpload(!0),u.setUploadLoading(!0),await U(Y,Q,q),u.setUploadLoading(!1)}async function U(Y,Q,q){let ne=null;q===2?ne=s.getCompareFile("oldFilePassword"):q===3&&(ne=s.getCompareFile("newFilePassword"));const J={extension:getHashParameters("extension",null),filename:getHashParameters("filename",null)||Q,externalPath:getHashParameters("p",""),documentId:getHashParameters("did",null),progress:s.setLoadingProgress,pageChangedCallback:u.setCurrentPage,scaleChangedCallback:q===2?u.setOldCurrentScale:u.setNewCurrentScale,annotationsNumChangedCallback:s.setAnnotationsCount,distanceChangedCallback:s.setDistance,notUploadPdf:!0};ne&&(J.pwd=ne);try{await n(Y,J,q)}catch(re){console.log(re),(re==="invalid_file_error"||re==="no_password_given"||re==="incorrect_password")&&(u.setUpload(!1),s.setLoadingProgress(0),u.resetSetting())}}return window.instances.UI.loadCompareDocument=async(Y,Q="",q="",ne="")=>{if(!Y)return;const J=URL.createObjectURL(Y);ne==="old"&&(s.setCompareFiles("oldFile",Y),s.setCompareFiles("oldFilePassword",q),F(J,Q,2)),ne==="new"&&(s.setCompareFiles("newFile",Y),s.setCompareFiles("newFilePassword",q),F(J,Q,3))},(Y,Q)=>{const q=_sfc_main$2_,ne=__unplugin_components_1$g,J=_sfc_main$32,re=_sfc_main$33,X=_sfc_main$34;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:normalizeClass(["compare-document-container",{under:w.value!=="compare"||w.value==="compare"&&g.value==="finished"}])},[createBaseVNode("div",_hoisted_1$2C,[createBaseVNode("div",_hoisted_2$2p,toDisplayString$1(Y.$t("compare.oldFile")),1),createBaseVNode("div",{class:normalizeClass(["file-content",{"no-file":!unref(f)}])},[unref(f)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["drop-area pc",{"drag-over":unref(k)}]),id:"oldDropArea",onDragover:Q[1]||(Q[1]=withModifiers(()=>{},["prevent"])),onDragenter:Q[2]||(Q[2]=j=>D("old")),onDragleave:I,onDrop:Q[3]||(Q[3]=j=>T(j,"old"))},[createBaseVNode("div",_hoisted_3$2c,[createBaseVNode("p",null,[createTextVNode(toDisplayString$1(Y.$t("compare.dropFile[0]")),1),_hoisted_4$R,createTextVNode(toDisplayString$1(Y.$t("compare.dropFile[1]")),1)]),createBaseVNode("div",_hoisted_5$y,[createTextVNode(toDisplayString$1(Y.$t("compare.chooseOldFile")),1),createBaseVNode("input",{type:"file",onChange:Q[0]||(Q[0]=j=>E(j,"old")),accept:".pdf",name:"compare"},null,32)])])],34)),unref(f)?(openBlock(),createElementBlock("div",_hoisted_6$n,[createBaseVNode("div",_hoisted_7$h,[createVNode(q,{docNum:2}),createBaseVNode("p",_hoisted_8$d,toDisplayString$1(unref(f).name),1),createVNode(ne,{class:"close",onClick:Q[4]||(Q[4]=j=>M("old"))})])])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["old-file-container file-container pc",{"no-file":!unref(f)}]),ref_key:"oldFileContainer",ref:v},[createBaseVNode("div",{ref_key:"oldViewerContainer",ref:y,class:"document"},null,512)],2),createBaseVNode("div",_hoisted_9$d,[createBaseVNode("div",_hoisted_10$d,[createBaseVNode("div",_hoisted_11$a,[createBaseVNode("p",null,toDisplayString$1(Y.$t("compare.oldFile")),1)]),createBaseVNode("div",_hoisted_12$9,[createTextVNode(toDisplayString$1(Y.$t("compare.chooseOldFile"))+" ",1),createBaseVNode("input",{type:"file",onChange:Q[5]||(Q[5]=j=>E(j,"old")),accept:".pdf",name:"compare"},null,32),unref(f)?(openBlock(),createElementBlock("p",_hoisted_13$9,toDisplayString$1(unref(f).name),1)):createCommentVNode("",!0)])])])],2)]),createBaseVNode("div",_hoisted_14$9,[createBaseVNode("div",_hoisted_15$9,toDisplayString$1(Y.$t("compare.newFile")),1),createBaseVNode("div",{class:normalizeClass(["file-content",{"no-file":!unref(x)}])},[unref(x)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["drop-area pc",{"drag-over":unref(P)}]),id:"newDropArea",onDragover:Q[7]||(Q[7]=withModifiers(()=>{},["prevent"])),onDragenter:Q[8]||(Q[8]=j=>D("new")),onDragleave:I,onDrop:Q[9]||(Q[9]=j=>T(j,"new"))},[createBaseVNode("div",_hoisted_16$8,[createBaseVNode("p",null,[createTextVNode(toDisplayString$1(Y.$t("compare.dropFile[0]")),1),_hoisted_17$7,createTextVNode(toDisplayString$1(Y.$t("compare.dropFile[1]")),1)]),createBaseVNode("div",_hoisted_18$6,[createTextVNode(toDisplayString$1(Y.$t("compare.chooseNewFile")),1),createBaseVNode("input",{type:"file",onChange:Q[6]||(Q[6]=j=>E(j,"new")),accept:".pdf",name:"compare"},null,32)])])],34)),unref(x)?(openBlock(),createElementBlock("div",_hoisted_19$6,[createBaseVNode("div",_hoisted_20$6,[createVNode(q,{docNum:3}),createBaseVNode("p",_hoisted_21$6,toDisplayString$1(unref(x).name),1),createVNode(ne,{class:"close",onClick:Q[10]||(Q[10]=j=>M("new"))})])])):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["new-file-container file-container pc",{"no-file":!unref(x)}]),ref_key:"newFileContainer",ref:m},[createBaseVNode("div",{ref_key:"newViewerContainer",ref:d,class:"document"},null,512)],2),createBaseVNode("div",_hoisted_22$6,[createBaseVNode("div",_hoisted_23$5,[createBaseVNode("div",_hoisted_24$5,[createBaseVNode("p",null,toDisplayString$1(Y.$t("compare.newFile")),1)]),createBaseVNode("div",_hoisted_25$4,[createTextVNode(toDisplayString$1(Y.$t("compare.chooseNewFile"))+" ",1),createBaseVNode("input",{type:"file",onChange:Q[11]||(Q[11]=j=>E(j,"new")),accept:".pdf",name:"compare"},null,32),unref(x)?(openBlock(),createElementBlock("p",_hoisted_26$4,toDisplayString$1(unref(x).name),1)):createCommentVNode("",!0)])])])],2)])],2),createVNode(J),createVNode(re),createVNode(X)],64)}}},_imports_0=""+new URL("../images/curve-guide.gif",import.meta.url).href,MeasureCurveGuide_vue_vue_type_style_index_0_lang="",_hoisted_1$2B=createBaseVNode("img",{src:_imports_0,alt:""},null,-1),_hoisted_2$2o={class:"title"},_hoisted_3$2b={class:"got-button"},_sfc_main$2Y={__name:"MeasureCurveGuide",setup(e){const n=useDocumentStore(),r=computed(()=>n.getActiveTool),o=ref(!1),u=ref("calc(50% - 155px)"),s=ref("95px");let w=!1;watch(r,(v,y)=>{if(v==="curve"&&!w){const m=document.querySelector('[data-element="measureCurve"]');if(m){const d=m.getBoundingClientRect();u.value=d.left+d.width/2+"px",s.value=d.top+d.height+15+"px"}o.value=!0}else o.value=!1});const g=()=>{o.value=!1,w=!0};return(v,y)=>o.value?(openBlock(),createElementBlock("div",{key:0,class:"measure-curve-guide",style:normalizeStyle({left:u.value,top:s.value})},[_hoisted_1$2B,createBaseVNode("p",_hoisted_2$2o,toDisplayString$1(v.$t("measurement.howToMeasureCurve")),1),createBaseVNode("p",null,toDisplayString$1(v.$t("measurement.measureCurveStep[0]")),1),createBaseVNode("p",null,toDisplayString$1(v.$t("measurement.measureCurveStep[1]")),1),createBaseVNode("div",_hoisted_3$2b,[createBaseVNode("span",{onClick:g},toDisplayString$1(v.$t("measurement.gotIt")),1)])],4)):createCommentVNode("",!0)}},_sfc_main$2X={},_hoisted_1$2A={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2n=createBaseVNode("path",{d:"M2.52442 5.684L10 1.36798L17.4756 5.684V14.3161L10 18.6321L2.52442 14.3161V5.684Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$2a=createBaseVNode("path",{d:"M10.0003 6.50003L13.0314 8.25003V11.75L10.0003 13.5L6.96919 11.75V8.25003L10.0003 6.50003Z",fill:"currentColor"},null,-1),_hoisted_4$Q=[_hoisted_2$2n,_hoisted_3$2a];function _sfc_render$1H(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2A,_hoisted_4$Q)}const __unplugin_components_4$a=_export_sfc(_sfc_main$2X,[["render",_sfc_render$1H]]),_sfc_main$2W={},_hoisted_1$2z={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2m=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.54546 4.375L16.6666 4.375V5.625L8.54546 5.625C8.29821 6.2358 7.69939 6.66667 6.99994 6.66667C6.30049 6.66667 5.70167 6.2358 5.45442 5.625L3.33325 5.625L3.33325 4.375L5.45442 4.375C5.70167 3.7642 6.30049 3.33333 6.99994 3.33333C7.69939 3.33333 8.29821 3.7642 8.54546 4.375ZM3.33325 10.625L11.2877 10.625C11.5349 11.2358 12.1337 11.6667 12.8332 11.6667C13.5326 11.6667 14.1314 11.2358 14.3787 10.625H16.6666V9.375H14.3787C14.1314 8.7642 13.5326 8.33333 12.8332 8.33333C12.1337 8.33333 11.5349 8.7642 11.2877 9.375L3.33325 9.375L3.33325 10.625ZM5.45432 15.625H3.33325L3.33325 14.375H5.45432C5.70156 13.7642 6.30038 13.3333 6.99984 13.3333C7.69929 13.3333 8.29811 13.7642 8.54535 14.375L16.6666 14.375V15.625L8.54535 15.625C8.29811 16.2358 7.69929 16.6667 6.99984 16.6667C6.30038 16.6667 5.70156 16.2358 5.45432 15.625Z",fill:"currentColor"},null,-1),_hoisted_3$29=[_hoisted_2$2m];function _sfc_render$1G(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2z,_hoisted_3$29)}const __unplugin_components_19=_export_sfc(_sfc_main$2W,[["render",_sfc_render$1G]]),_sfc_main$2V={},_hoisted_1$2y={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2l=createBaseVNode("path",{d:"M17.8252 2.743H2.17484V17.4101C2.17484 17.4943 2.27256 17.5408 2.33791 17.4877L6.16578 14.3765H17.8252V2.743Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$28=createBaseVNode("path",{d:"M5.00003 6.77402H14",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_4$P=createBaseVNode("path",{d:"M5.00003 10.2973H11",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_5$x=[_hoisted_2$2l,_hoisted_3$28,_hoisted_4$P];function _sfc_render$1F(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2y,_hoisted_5$x)}const __unplugin_components_1$7=_export_sfc(_sfc_main$2V,[["render",_sfc_render$1F]]),_sfc_main$2U={},_hoisted_1$2x={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2k=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 3H0V17H20V3ZM9.5918 10.3271C9.5918 12.3794 8.41406 13.6626 6.54199 13.6626C4.65674 13.6626 3.48779 12.3794 3.48779 10.3271C3.48779 8.27051 4.67432 6.99609 6.54199 6.99609C8.40967 6.99609 9.5918 8.2749 9.5918 10.3271ZM4.8457 10.3271C4.8457 11.6719 5.49609 12.5376 6.54199 12.5376C7.57471 12.5376 8.23389 11.6719 8.23389 10.3271C8.23389 8.97803 7.57031 8.12109 6.54199 8.12109C5.50928 8.12109 4.8457 8.97803 4.8457 10.3271ZM12.1758 13.5V11.562L12.8042 10.8062L14.6455 13.5H16.2363L13.7622 9.93604L16.0737 7.15869H14.5972L12.2549 10.0063H12.1758V7.15869H10.8486V13.5H12.1758Z",fill:"currentColor"},null,-1),_hoisted_3$27=[_hoisted_2$2k];function _sfc_render$1E(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2x,_hoisted_3$27)}const __unplugin_components_0$q=_export_sfc(_sfc_main$2U,[["render",_sfc_render$1E]]),_sfc_main$2T={},_hoisted_1$2w={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2j=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.25 2.25H19.75V10.75H15.75V17.75H0.25V10.75V9.25V2.25ZM1.75 10.75H14.25V16.25H1.75V10.75ZM18.25 9.25H15.75H1.75V3.75H18.25V9.25ZM15 8L17 5.5H13L15 8Z",fill:"currentColor"},null,-1),_hoisted_3$26=[_hoisted_2$2j];function _sfc_render$1D(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2w,_hoisted_3$26)}const __unplugin_components_0$p=_export_sfc(_sfc_main$2T,[["render",_sfc_render$1D]]),_sfc_main$2S={},_hoisted_1$2v={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2i=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.75 2.25H0.25V17.75H19.75V2.25ZM18.25 10.75V16.25H1.75V10.75H18.25ZM18.25 9.25V3.75H1.75V9.25H18.25ZM6 5.5H3V7.5H6V5.5ZM3 12.5H6V14.5H3V12.5Z",fill:"currentColor"},null,-1),_hoisted_3$25=[_hoisted_2$2i];function _sfc_render$1C(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2v,_hoisted_3$25)}const __unplugin_components_0$o=_export_sfc(_sfc_main$2S,[["render",_sfc_render$1C]]),_sfc_main$2R={},_hoisted_1$2u={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2h=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 1.25C5.16751 1.25 1.25 5.16751 1.25 10C1.25 14.8325 5.16751 18.75 10 18.75C14.8325 18.75 18.75 14.8325 18.75 10C18.75 5.16751 14.8325 1.25 10 1.25ZM10 2.75C14.0041 2.75 17.25 5.99594 17.25 10C17.25 14.0041 14.0041 17.25 10 17.25C5.99594 17.25 2.75 14.0041 2.75 10C2.75 5.99594 5.99594 2.75 10 2.75ZM10 13C11.6569 13 13 11.6569 13 10C13 8.34315 11.6569 7 10 7C8.34315 7 7 8.34315 7 10C7 11.6569 8.34315 13 10 13Z",fill:"currentColor"},null,-1),_hoisted_3$24=[_hoisted_2$2h];function _sfc_render$1B(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2u,_hoisted_3$24)}const __unplugin_components_0$n=_export_sfc(_sfc_main$2R,[["render",_sfc_render$1B]]),_sfc_main$2Q={},_hoisted_1$2t={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2g=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.25 1.75H1.75V18.25H18.25V1.75ZM16.75 3.25V16.75H3.25V3.25H16.75ZM15.532 7.52861L14.468 6.47139L9.038 11.935L6.53204 9.41291L5.46796 10.4701L9.03873 14.0641L15.532 7.52861Z",fill:"currentColor"},null,-1),_hoisted_3$23=[_hoisted_2$2g];function _sfc_render$1A(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2t,_hoisted_3$23)}const __unplugin_components_0$m=_export_sfc(_sfc_main$2Q,[["render",_sfc_render$1A]]),_sfc_main$2P={},_hoisted_1$2s={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2f=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.25 2.25H19.75V17.75H0.25V2.25ZM18.25 11.75V3.75H1.75V16.25H13.75L18.25 11.75ZM11.25 5.5V8H9.75V7H8V13H8.75V14.5H5.75V13H6.5V7H4.75V8H3.25V5.5H11.25Z",fill:"currentColor"},null,-1),_hoisted_3$22=[_hoisted_2$2f];function _sfc_render$1z(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2s,_hoisted_3$22)}const __unplugin_components_0$l=_export_sfc(_sfc_main$2P,[["render",_sfc_render$1z]]),_sfc_main$2O={},_hoisted_1$2r={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2e=createBaseVNode("g",{id:"subtoolbar / mytools / links"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.8388 7.17154L14.331 11.6793L13.2703 10.6187L16.7175 7.17154L12.8284 3.28245L9.38125 6.7296L8.32059 5.66894L12.8284 1.16113L18.8388 7.17154ZM6.7296 9.38125L3.28245 12.8284L7.17154 16.7175L10.6187 13.2703L11.6793 14.331L7.17154 18.8388L1.16113 12.8284L5.66894 8.32059L6.7296 9.38125ZM9.11608 11.9445L11.9445 9.11608L10.8839 8.05542L8.05542 10.8839L9.11608 11.9445Z",fill:"currentColor"})],-1),_hoisted_3$21=[_hoisted_2$2e];function _sfc_render$1y(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2r,_hoisted_3$21)}const __unplugin_components_17=_export_sfc(_sfc_main$2O,[["render",_sfc_render$1y]]),_sfc_main$2N={},_hoisted_1$2q={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2d=createBaseVNode("g",{id:"subtoolbar / mytools / image"},[createBaseVNode("path",{id:"ic","fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.25 3.25H18.75V16.75H1.25V3.25ZM17.25 4.75H2.75V13.2095L5.79496 10L10.0643 13.5L12.3718 11.0678L17.1442 15.25H17.25V4.75ZM14.5 9C15.3284 9 16 8.32843 16 7.5C16 6.67157 15.3284 6 14.5 6C13.6716 6 13 6.67157 13 7.5C13 8.32843 13.6716 9 14.5 9Z",fill:"currentColor"})],-1),_hoisted_3$20=[_hoisted_2$2d];function _sfc_render$1x(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2q,_hoisted_3$20)}const __unplugin_components_16=_export_sfc(_sfc_main$2N,[["render",_sfc_render$1x]]),_sfc_main$2M={},_hoisted_1$2p={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2c=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.982 9.97521C13.1875 9.28619 14 7.98798 14 6.5C14 4.29086 12.2091 2.5 10 2.5C7.79086 2.5 6 4.29086 6 6.5C6 7.98798 6.81248 9.2862 8.018 9.97522C8.10745 10.1032 8.5 10.6962 8.5 11.25C8.5 11.875 8 12.5 8 12.5H2V14H18V12.5H12C12 12.5 11.5 11.875 11.5 11.25C11.5 10.6962 11.8926 10.1032 11.982 9.97521ZM18 17.5V16H2V17.5H18Z",fill:"currentColor"},null,-1),_hoisted_3$1$=[_hoisted_2$2c];function _sfc_render$1w(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2p,_hoisted_3$1$)}const __unplugin_components_15=_export_sfc(_sfc_main$2M,[["render",_sfc_render$1w]]),_sfc_main$2L={},_hoisted_1$2o={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2b=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.75 2.75V6H15.25V4.25H10.75V16.25H12.3337V17.75H7.66699V16.25H9.25V4.25H4.75V6H3.25V2.75H16.75Z",fill:"currentColor"},null,-1),_hoisted_3$1_=[_hoisted_2$2b];function _sfc_render$1v(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2o,_hoisted_3$1_)}const __unplugin_components_14$1=_export_sfc(_sfc_main$2L,[["render",_sfc_render$1v]]),_sfc_main$2K={},_hoisted_1$2n={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$2a=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.99164 3.52673L9.24244 3.56122L9.31142 5.05963L10.0606 5.02514L14.0731 4.84043L3.46978 15.4438L2.93945 15.9741L4.00011 17.0348L4.53044 16.5044L15.3467 5.68818L15.5465 10.0282L15.581 10.7774L17.0794 10.7084L17.0449 9.95918L16.769 3.96553L16.7345 3.21632L15.9853 3.25081L9.99164 3.52673Z",fill:"currentColor"},null,-1),_hoisted_3$1Z=[_hoisted_2$2a];function _sfc_render$1u(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2n,_hoisted_3$1Z)}const __unplugin_components_12=_export_sfc(_sfc_main$2K,[["render",_sfc_render$1u]]),_sfc_main$2J={},_hoisted_1$2m={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$29=createBaseVNode("circle",{cx:"10",cy:"10",r:"7",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$1Y=[_hoisted_2$29];function _sfc_render$1t(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2m,_hoisted_3$1Y)}const __unplugin_components_7$4=_export_sfc(_sfc_main$2J,[["render",_sfc_render$1t]]),_sfc_main$2I={},_hoisted_1$2l={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$28=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.57675 19.1757L1 17.7787L2.23629 17.3267L3.39858 16.9142L4.48804 16.5416L5.17445 16.3153L5.82936 16.1069L6.4531 15.9162L7.04603 15.7435L7.60849 15.5886L8.14082 15.4517L8.64337 15.3328C8.72467 15.3145 8.80474 15.297 8.88359 15.2802L9.34212 15.1884L9.77173 15.1147C11.0868 14.91 11.972 14.9785 12.4769 15.3262C12.7932 15.544 13.0243 15.7942 13.1655 16.0808C13.4151 16.5876 13.3721 16.9889 13.1388 17.5664L13.0118 17.8607L13.1178 17.8549C13.3318 17.8376 13.6024 17.7943 13.926 17.7239L14.1265 17.6785L14.3516 17.6235L14.8394 17.4928C14.9249 17.4688 15.0125 17.4435 15.1022 17.4171L15.6652 17.245L16.2781 17.0452L16.9408 16.8178L17.653 16.5629L18.4146 16.2803L19 17.6741L17.9462 18.0639L17.2946 18.2959L16.6828 18.5054L16.1097 18.6922C15.925 18.7507 15.7466 18.8054 15.5744 18.8563L15.076 18.9974C14.9159 19.0406 14.7618 19.0799 14.6135 19.1154L14.186 19.2101C13.0235 19.4455 12.271 19.399 11.8322 19.0549C11.4563 18.7602 11.3001 18.3582 11.3527 17.9256C11.3673 17.8051 11.3855 17.7161 11.4219 17.6072L11.4922 17.4224L11.6818 16.9751L11.7255 16.8448C11.7439 16.7759 11.7424 16.7393 11.7305 16.715C11.7102 16.674 11.6563 16.6156 11.5457 16.5395C11.436 16.4639 11.2053 16.4374 10.8597 16.4606L10.6123 16.4834C10.5683 16.4885 10.5228 16.4941 10.476 16.5004L10.1783 16.5455L9.84745 16.6054L9.48395 16.6803L9.08816 16.7701C9.01952 16.7863 8.94956 16.8031 8.87827 16.8206L8.43479 16.933L7.95999 17.0604L7.45428 17.203L6.63861 17.4454L5.75561 17.7221L4.80659 18.0333L3.79289 18.3792L3.08181 18.6292L2.34296 18.8946L1.57675 19.1757Z",fill:"#64BC38"},null,-1),_hoisted_3$1X=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.7275 1.00012L16.9702 5.24276L14.8385 7.37449L10.5958 3.13185L12.7275 1.00012ZM9.8887 3.83896L3.53515 10.1925L2.12094 15.8494L7.77779 14.4352L14.1313 8.0816L9.8887 3.83896Z",fill:"currentColor"},null,-1),_hoisted_4$O=[_hoisted_2$28,_hoisted_3$1X];function _sfc_render$1s(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2l,_hoisted_4$O)}const __unplugin_components_6$5=_export_sfc(_sfc_main$2I,[["render",_sfc_render$1s]]),_sfc_main$2H={},_hoisted_1$2k={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$27=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 14H13.9922L12.8923 11.25H7.10772L6.00776 14H7V15H3V14H4.39223L9.30364 1.72146H10.6964L15.6078 14H17V15H13V14ZM7.5077 10.25H12.4923L10 4.019L7.5077 10.25Z",fill:"currentColor"},null,-1),_hoisted_3$1W=createBaseVNode("path",{d:"M5.08299 17.9328L5.22219 18.0199C6.28806 18.7527 7.65967 18.7912 8.75772 18.1356L8.93809 18.0199C9.52914 17.6135 10.2863 17.5845 10.9011 17.9328L11.0403 18.0199C12.1062 18.7527 13.4778 18.7912 14.5759 18.1356L14.7562 18.0199C15.3473 17.6135 16.1045 17.5845 16.7193 17.9328L16.8585 18.0199C17.0638 18.161 17.2824 18.2777 17.5107 18.3686C17.8854 18.5177 18.3064 18.3253 18.451 17.9389C18.5956 17.5525 18.4091 17.1183 18.0344 16.9692C17.9483 16.9349 17.8647 16.8942 17.784 16.8471L17.6653 16.7718C16.5994 16.039 15.2278 16.0004 14.1298 16.6561L13.9494 16.7718C13.3584 17.1781 12.6011 17.2072 11.9864 16.8589L11.8472 16.7718C10.7813 16.039 9.40969 16.0004 8.31164 16.6561L8.13126 16.7718C7.54022 17.1781 6.78301 17.2072 6.16823 16.8589L6.02902 16.7718C4.96316 16.039 3.59155 16.0004 2.4935 16.6561L2.31312 16.7718C2.23868 16.823 2.16125 16.8684 2.08133 16.908L1.95963 16.9629C1.5862 17.1154 1.40339 17.5513 1.55131 17.9364C1.69922 18.3215 2.12186 18.51 2.49529 18.3575C2.64087 18.298 2.78242 18.228 2.91898 18.1478L3.11995 18.0199C3.711 17.6135 4.46821 17.5845 5.08299 17.9328Z",fill:"#FF0000"},null,-1),_hoisted_4$N=[_hoisted_2$27,_hoisted_3$1W];function _sfc_render$1r(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2k,_hoisted_4$N)}const __unplugin_components_5$5=_export_sfc(_sfc_main$2H,[["render",_sfc_render$1r]]),_sfc_main$2G={},_hoisted_1$2j={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$26=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.3494 15.3928H13.2139V16.3928H17.4996V15.3928H15.9649L10.6964 2.22146H9.30364L4.03508 15.3929H2.5V16.3929H6.78571V15.3929H5.65062L10 4.519L14.3494 15.3928Z",fill:"currentColor"},null,-1),_hoisted_3$1V=createBaseVNode("rect",{y:"10.5",width:"20",height:"1.5",fill:"#FF0000"},null,-1),_hoisted_4$M=[_hoisted_2$26,_hoisted_3$1V];function _sfc_render$1q(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2j,_hoisted_4$M)}const __unplugin_components_4$9=_export_sfc(_sfc_main$2G,[["render",_sfc_render$1q]]),_sfc_main$2F={},_hoisted_1$2i={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$25=createBaseVNode("rect",{y:"17",width:"20",height:"1.5",fill:"#FF0000"},null,-1),_hoisted_3$1U=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13 14H13.9922L12.8923 11.25H7.10772L6.00776 14H7V15H3V14H4.39223L9.30364 1.72146H10.6964L15.6078 14H17V15H13V14ZM7.5077 10.25H12.4923L10 4.019L7.5077 10.25Z",fill:"currentColor"},null,-1),_hoisted_4$L=[_hoisted_2$25,_hoisted_3$1U];function _sfc_render$1p(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2i,_hoisted_4$L)}const __unplugin_components_3$9=_export_sfc(_sfc_main$2F,[["render",_sfc_render$1p]]),_sfc_main$2E={},_hoisted_1$2h={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$24=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2 2H20L18 18H0L2 2Z",fill:"#FEF87C"},null,-1),_hoisted_3$1T=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6078 15.5L10.6964 3.22145H9.30364L4.39223 15.5H3V16.5H7V15.5H6.00776L7.10772 12.75H12.8923L13.9922 15.5H13V16.5H17V15.5H15.6078ZM12.4923 11.75L10 5.51899L7.5077 11.75H12.4923Z",fill:"currentColor"},null,-1),_hoisted_4$K=[_hoisted_2$24,_hoisted_3$1T];function _sfc_render$1o(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2h,_hoisted_4$K)}const __unplugin_components_1$6=_export_sfc(_sfc_main$2E,[["render",_sfc_render$1o]]),CToolButton_vue_vue_type_style_index_0_scoped_4d1120f8_lang="",_hoisted_1$2g=["title"],_sfc_main$2D={__name:"CToolButton",props:["item"],setup(e){const n=useViewerStore(),r=useDocumentStore(),{item:o}=e,{type:u,title:s,disabled:w,className:g,toolName:v}=o,y=["highlight","underline","squiggly","strikeout"],m=["square","circle","arrow","line"],d=["ink","freetext","stamp","image","link"],f=["textfield","checkbox","radiobutton","listbox","combobox","pushbutton"];computed(()=>{if(y.includes(v))return"markup";if(m.includes(v))return"shape";if(d.includes(v))return"annotation";if(f.includes(v))return"form"});const x=computed(()=>r.getActiveTool),k=computed(()=>v===x.value),P=T=>{if(r.setToolState(T),n.toggleActiveHand(!1),core.switchTool(0),core.switchAnnotationEditorMode(0),T==="stamp"?n.toggleElement("stampPanel"):n.closeElement("stampPanel"),x.value==="image"){const D=isMobileDevice?"annotaionImageInput":"signImageInput";document.getElementById(D).click()}},S=T=>{r.setMarkupToolState(T),P(T)},E=T=>{r.setShapeToolState(T),P(T)},M=()=>{y.includes(v)&&S(v),m.includes(v)&&E(v),d.includes(v)&&P(v),f.includes(v)&&P(v)};return(T,D)=>{const I=__unplugin_components_1$6,N=__unplugin_components_3$9,O=__unplugin_components_4$9,F=__unplugin_components_5$5,U=__unplugin_components_6$5,Y=__unplugin_components_7$4,Q=__unplugin_components_9$5,q=__unplugin_components_12,ne=__unplugin_components_13$2,J=__unplugin_components_14$1,re=__unplugin_components_15,X=__unplugin_components_16,j=__unplugin_components_17,Z=__unplugin_components_0$l,W=__unplugin_components_0$m,te=__unplugin_components_0$n,le=__unplugin_components_0$o,oe=__unplugin_components_0$p,Ee=__unplugin_components_0$q;return openBlock(),createElementBlock("div",{class:normalizeClass(["button custom-button",{active:k.value,[unref(u)]:unref(u),[unref(g)]:unref(g),"with-text":f.includes(unref(v))}]),onClick:D[0]||(D[0]=Ae=>M()),title:unref(s)},[unref(v)==="highlight"?(openBlock(),createBlock(I,{key:0})):createCommentVNode("",!0),unref(v)==="underline"?(openBlock(),createBlock(N,{key:1})):createCommentVNode("",!0),unref(v)==="strikeout"?(openBlock(),createBlock(O,{key:2})):createCommentVNode("",!0),unref(v)==="squiggly"?(openBlock(),createBlock(F,{key:3})):createCommentVNode("",!0),unref(v)==="ink"?(openBlock(),createBlock(U,{key:4})):createCommentVNode("",!0),unref(v)==="circle"?(openBlock(),createBlock(Y,{key:5})):createCommentVNode("",!0),unref(v)==="square"?(openBlock(),createBlock(Q,{key:6})):createCommentVNode("",!0),unref(v)==="arrow"?(openBlock(),createBlock(q,{key:7})):createCommentVNode("",!0),unref(v)==="line"?(openBlock(),createBlock(ne,{key:8})):createCommentVNode("",!0),unref(v)==="freetext"?(openBlock(),createBlock(J,{key:9})):createCommentVNode("",!0),unref(v)==="stamp"?(openBlock(),createBlock(re,{key:10})):createCommentVNode("",!0),unref(v)==="image"?(openBlock(),createBlock(X,{key:11})):createCommentVNode("",!0),unref(v)==="link"?(openBlock(),createBlock(j,{key:12})):createCommentVNode("",!0),unref(v)==="textfield"?(openBlock(),createElementBlock(Fragment,{key:13},[createVNode(Z),createBaseVNode("span",null,toDisplayString$1(T.$t("header.textField")),1)],64)):createCommentVNode("",!0),unref(v)==="checkbox"?(openBlock(),createElementBlock(Fragment,{key:14},[createVNode(W),createBaseVNode("span",null,toDisplayString$1(T.$t("header.checkbox")),1)],64)):createCommentVNode("",!0),unref(v)==="radiobutton"?(openBlock(),createElementBlock(Fragment,{key:15},[createVNode(te),createBaseVNode("span",null,toDisplayString$1(T.$t("header.radioButton")),1)],64)):createCommentVNode("",!0),unref(v)==="listbox"?(openBlock(),createElementBlock(Fragment,{key:16},[createVNode(le),createBaseVNode("span",null,toDisplayString$1(T.$t("header.listBox")),1)],64)):createCommentVNode("",!0),unref(v)==="combobox"?(openBlock(),createElementBlock(Fragment,{key:17},[createVNode(oe),createBaseVNode("span",null,toDisplayString$1(T.$t("header.comboButton")),1)],64)):createCommentVNode("",!0),unref(v)==="pushbutton"?(openBlock(),createElementBlock(Fragment,{key:18},[createVNode(Ee),createBaseVNode("span",null,toDisplayString$1(T.$t("header.button")),1)],64)):createCommentVNode("",!0)],10,_hoisted_1$2g)}}},__unplugin_components_3$8=_export_sfc(_sfc_main$2D,[["__scopeId","data-v-4d1120f8"]]),_hoisted_1$2f=["data-element","disabled","title"],_hoisted_2$23=["innerHTML"],_hoisted_3$1S=["src"],_sfc_main$2C={__name:"ToggleButton",props:["item"],setup(e){const n=useViewerStore();useDocumentStore();const{item:r}=e,{type:o,img:u,dataElement:s,title:w,disabled:g,className:v,element:y}=r,m=u==null?void 0:u.trim().toLowerCase().startsWith("<svg"),d=k=>{k==null||k.stopPropagation(),k==null||k.preventDefault()},f=computed(()=>n.isElementOpen(y)),x=()=>{n.toggleElement(y)};return(k,P)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["button custom-button",{active:f.value,[unref(o)]:unref(o),disabled:unref(g),[unref(v)]:unref(v)}]),"data-element":unref(s),onClick:P[0]||(P[0]=S=>unref(g)||!x?d():x()),disabled:unref(g),title:unref(w)},[unref(u)?(openBlock(),createElementBlock(Fragment,{key:0},[unref(m)?(openBlock(),createElementBlock("div",{key:0,innerHTML:unref(u),class:"img"},null,8,_hoisted_2$23)):(openBlock(),createElementBlock("img",{key:1,src:unref(u),alt:"",class:"img"},null,8,_hoisted_3$1S))],64)):createCommentVNode("",!0)],10,_hoisted_1$2f))}},StatefulButton_vue_vue_type_style_index_0_lang="",_hoisted_1$2e=["data-element","disabled","title"],_hoisted_2$22=["innerHTML"],_hoisted_3$1R=["src"],_hoisted_4$J={key:1,class:"text"},_sfc_main$2B={__name:"StatefulButton",props:["item"],setup(e){useViewerStore(),useDocumentStore();const{item:n}=e,{type:r,dataElement:o,title:u,disabled:s,className:w,initialState:g,states:v,mount:y,unmount:m}=n,d=D=>{D==null||D.stopPropagation(),D==null||D.preventDefault()},f=ref(g),x=v[f.value],k=ref(!1),{img:P}=x,S=P==null?void 0:P.trim().toLowerCase().startsWith("<svg"),E=()=>{M(),x.onClick(x)},M=()=>{f.value=g},T=computed(()=>x.getContent instanceof Function?x.getContent(x):x.getContent);return y&&onMounted(()=>{y()}),m&&onUnmounted(()=>{m()}),(D,I)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["button custom-button",{active:k.value,[unref(r)]:unref(r),disabled:unref(s),[unref(w)]:unref(w)}]),"data-element":unref(o),onClick:I[0]||(I[0]=N=>unref(s)||!E?d():E()),onDblclick:I[1]||(I[1]=N=>unref(s)?d:D.onDoubleClick),onMouseup:I[2]||(I[2]=N=>unref(s)?d:D.onDoubleClick),disabled:unref(s),title:unref(u)},[unref(P)?(openBlock(),createElementBlock(Fragment,{key:0},[unref(S)?(openBlock(),createElementBlock("div",{key:0,innerHTML:unref(P),class:"img"},null,8,_hoisted_2$22)):(openBlock(),createElementBlock("img",{key:1,src:unref(P),alt:"",class:"img"},null,8,_hoisted_3$1R))],64)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(T.value)+" ",1),e.item.dropItem?(openBlock(),createElementBlock("span",_hoisted_4$J,toDisplayString$1(e.item.text),1)):createCommentVNode("",!0)],42,_hoisted_1$2e))}},_hoisted_1$2d=["data-element","disabled","title"],_hoisted_2$21=["innerHTML"],_hoisted_3$1Q=["src"],_hoisted_4$I={key:1},_hoisted_5$w={key:2,class:"text"},_sfc_main$2A={__name:"ActionButton",props:["item"],setup(e){const{item:n}=e,{type:r,img:o,text:u,dataElement:s,onClick:w,title:g,disabled:v,className:y}=n,m=o==null?void 0:o.trim().toLowerCase().startsWith("<svg"),d=f=>{f==null||f.stopPropagation(),f==null||f.preventDefault()};return(f,x)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["button custom-button",{[unref(r)]:unref(r),disabled:unref(v),[unref(y)]:unref(y)}]),"data-element":unref(s),onClick:x[0]||(x[0]=k=>unref(v)||!unref(w)?d():unref(w)(k)),onDblclick:x[1]||(x[1]=k=>unref(v)?d:f.onDoubleClick),onMouseup:x[2]||(x[2]=k=>unref(v)?d:f.onDoubleClick),disabled:unref(v),title:unref(g)},[unref(o)?(openBlock(),createElementBlock(Fragment,{key:0},[unref(m)?(openBlock(),createElementBlock("div",{key:0,innerHTML:unref(o),class:"img"},null,8,_hoisted_2$21)):(openBlock(),createElementBlock("img",{key:1,src:unref(o),alt:"",class:"img"},null,8,_hoisted_3$1Q))],64)):unref(u)?(openBlock(),createElementBlock("div",_hoisted_4$I,toDisplayString$1(unref(u)),1)):createCommentVNode("",!0),e.item.dropItem?(openBlock(),createElementBlock("span",_hoisted_5$w,toDisplayString$1(e.item.text),1)):createCommentVNode("",!0)],42,_hoisted_1$2d))}},CustomButton_vue_vue_type_style_index_0_lang="",_sfc_main$2z={__name:"CustomButton",props:["item"],setup(e){const{item:n}=e,{type:r}=n;return(o,u)=>{const s=_sfc_main$2A,w=_sfc_main$2B,g=_sfc_main$2C,v=__unplugin_components_3$8;return openBlock(),createElementBlock(Fragment,null,[unref(r)==="actionButton"?(openBlock(),createBlock(s,{key:0,item:e.item},null,8,["item"])):createCommentVNode("",!0),unref(r)==="statefulButton"?(openBlock(),createBlock(w,{key:1,item:e.item},null,8,["item"])):createCommentVNode("",!0),unref(r)==="toggleButton"?(openBlock(),createBlock(g,{key:2,item:e.item},null,8,["item"])):createCommentVNode("",!0),unref(r)==="toolButton"?(openBlock(),createBlock(v,{key:3,item:e.item},null,8,["item"])):createCommentVNode("",!0)],64)}}},MeasurementPopup_vue_vue_type_style_index_0_scoped_4f492bad_lang="",_sfc_main$2y={__name:"MeasurementPopup",setup(e){const n=useViewerStore();useDocumentStore();const r=computed(()=>n.getPopupItems("measurementPopup")),o=computed(()=>n.isElementOpen("measurePanel")),u=computed(()=>n.isElementOpen("measurementSettingsDialog")),s=ref(!1),w=ref(0),g=ref(0),v=ref(null);let y,m=!1,d,f=null;const x=T=>{T==="reply"&&!n.isElementOpen("leftPanel")&&(s.value=!1),core.handlePopup({type:"measurement",tool:T})},k=async(T={})=>{const{rect:D}=T;if(s.value=!!D,await nextTick(),D&&s.value){const I=v.value.children[0];if(!I)return;const N=I.offsetWidth,O=I.offsetHeight+10;let F=D.right-N,U=D.bottom;const Y=window.innerWidth,Q=window.innerHeight;F>Y-N&&(F=Y-N),F=Math.max(0,F),U+O>Q&&(U=Math.max(0,D.top-O)),w.value=U,g.value=o.value?F+130:F}};core.addEvent("showMeasurementPopup",k);const P=()=>{s.value&&(s.value=!1,m=!0),m&&(clearTimeout(d),d=setTimeout(()=>{core.showPopup({type:"measurementPopup",pageIndex:f.pageIndex,annotation:f}),m=!1},200))},S=()=>{n.toggleElement("measurePanel")},E=()=>{n.openElement("measurementSettingsDialog")};onMounted(()=>{y=document.querySelector(".document-container"),y&&y.addEventListener("scroll",P)}),onUnmounted(()=>{y&&y.removeEventListener("scroll",P)});const M=T=>{if(s.value&&!T.measure){s.value=!1;return}f=T};return core.addEvent("annotationSelected",M),(T,D)=>{const I=_sfc_main$2z,N=__unplugin_components_1$7,O=_sfc_main$4l,F=__unplugin_components_19,U=__unplugin_components_4$a,Y=__unplugin_components_8$4;return openBlock(),createElementBlock("div",{ref_key:"measurementPopupRef",ref:v},[withDirectives(createBaseVNode("div",{class:"measurement-popup popup",style:normalizeStyle({top:`${w.value}px`,left:`${g.value}px`,transform:`translateX(${!unref(isMobileDevice)&&o.value?-130:0}px) translateY(5px)`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,(Q,q)=>(openBlock(),createElementBlock(Fragment,{key:`${Q.dataElement||new Date}-${q}`},[Q.name==="customButton"&&!Q.hidden?(openBlock(),createBlock(I,{key:0,item:Q,"data-element":Q.dataElement},null,8,["item","data-element"])):Q.type==="reply"&&!Q.hidden?(openBlock(),createBlock(O,{key:1,onClick:D[0]||(D[0]=ne=>x("reply")),title:T.$t("measurement.reply"),"data-element":Q.dataElement},{default:withCtx(()=>[createVNode(N)]),_:2},1032,["title","data-element"])):Q.type==="property"&&!Q.hidden?(openBlock(),createBlock(O,{key:2,onClick:S,title:T.$t("properties"),"data-element":Q.dataElement,isActive:o.value},{default:withCtx(()=>[createVNode(F)]),_:2},1032,["title","data-element","isActive"])):Q.type==="settings"&&!Q.hidden?(openBlock(),createBlock(O,{key:3,onClick:E,title:T.$t("header.settings.settings"),"data-element":Q.dataElement,isActive:u.value},{default:withCtx(()=>[createVNode(U)]),_:2},1032,["title","data-element","isActive"])):Q.type==="delete"&&!Q.hidden?(openBlock(),createBlock(O,{key:4,onClick:D[1]||(D[1]=ne=>x("delete")),title:T.$t("delete"),"data-element":Q.dataElement},{default:withCtx(()=>[createVNode(Y)]),_:2},1032,["title","data-element"])):["spacer","divider"].includes(Q.type)?(openBlock(),createElementBlock("div",{key:5,class:normalizeClass(Q.type)},null,2)):createCommentVNode("",!0)],64))),128))],4),[[vShow,s.value&&r.value.length]])],512)}}},__unplugin_components_22$1=_export_sfc(_sfc_main$2y,[["__scopeId","data-v-4f492bad"]]),_sfc_main$2x={},_hoisted_1$2c={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$20=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.9596 4.80005L13.2 5.88792L8 11.2L2.8 5.88792L4.0404 4.80005L8 8.84446L11.9596 4.80005Z",fill:"currentColor"},null,-1),_hoisted_3$1P=[_hoisted_2$20];function _sfc_render$1n(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2c,_hoisted_3$1P)}const __unplugin_components_0$k=_export_sfc(_sfc_main$2x,[["render",_sfc_render$1n]]),MeasurementSettingsDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$2b={class:"measurements-settings"},_hoisted_2$1$={class:"subtitle"},_hoisted_3$1O={class:"scale"},_hoisted_4$H={class:"left-text"},_hoisted_5$v={class:"right-text"},_hoisted_6$m={class:"form-box"},_hoisted_7$g={class:"form-box"},_hoisted_8$c={value:"pt"},_hoisted_9$c={value:"in"},_hoisted_10$c={value:"mm"},_hoisted_11$9={value:"cm"},_hoisted_12$8={value:"m"},_hoisted_13$8={value:"km"},_hoisted_14$8={value:"ft"},_hoisted_15$8={value:"yd"},_hoisted_16$7={value:"mi"},_hoisted_17$6=createBaseVNode("span",null,"=",-1),_hoisted_18$5={class:"form-box"},_hoisted_19$5={class:"form-box"},_hoisted_20$5={value:"pt"},_hoisted_21$5={value:"in"},_hoisted_22$5={value:"mm"},_hoisted_23$4={value:"cm"},_hoisted_24$4={value:"m"},_hoisted_25$3={value:"km"},_hoisted_26$3={value:"ft"},_hoisted_27$3={value:"yd"},_hoisted_28$3={value:"mi"},_hoisted_29$3={key:0,class:"error"},_hoisted_30$3={class:"discription"},_hoisted_31$3={class:"form-box"},_hoisted_32$1=createBaseVNode("option",{value:1},"1",-1),_hoisted_33=createBaseVNode("option",{value:.1},"0.1",-1),_hoisted_34=createBaseVNode("option",{value:.01},"0.01",-1),_hoisted_35=createBaseVNode("option",{value:.001},"0.001",-1),_hoisted_36=createBaseVNode("option",{value:1e-4},"0.0001",-1),_hoisted_37=[_hoisted_32$1,_hoisted_33,_hoisted_34,_hoisted_35,_hoisted_36],_hoisted_38={key:0,class:"caption"},_hoisted_39={class:"subtitle"},_hoisted_40={class:"check-content"},_hoisted_41=["onClick"],dialogName$b="measurementSettingsDialog",_sfc_main$2w={__name:"MeasurementSettingsDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$b)),u=computed(()=>r.getActiveTool),s=reactive({scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1}),w=reactive({showRadius:!0,showPerimeter:!0,showArea:!0,showArcLength:!0,showAngle:!0}),g={polygon:["showPerimeter","showArea"],rectangle:["showPerimeter","showArea"],circle:["showPerimeter","showArea","showRadius"],arc:["showRadius","showArcLength","showAngle"]},v=[{key:"showRadius",types:["circle","arc"],label:"measurement.radius"},{key:"showPerimeter",types:["circle","polygon","rectangle"],label:"measurement.perimeter"},{key:"showArea",types:["circle","polygon","rectangle"],label:"measurement.area"},{key:"showArcLength",types:["arc"],label:"measurement.arcLength"},{key:"showAngle",types:["arc"],label:"measurement.angle"}];let y={scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1},m={showPerimeter:!0,showArea:!0,showRadius:!0,showArcLength:!0,showAngle:!0};const d=ref(!1),f=ref("");let x="";const k=ref(!1);watch(o,(D,I)=>{D&&(k.value=!1,y||m?M({...y,...m}):(s.scale={base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},s.precision=1,w.showPerimeter=!0,w.showArea=!0,w.showRadius=!0,w.showArcLength=!0,w.showAngle=!0),d.value=!1,f.value=x||u.value)}),watch([s,w],D=>{if(D[0].scale.base===y.scale.base&&D[0].scale.baseUnit===y.scale.baseUnit&&D[0].scale.translate===y.scale.translate&&D[0].scale.translateUnit===y.scale.translateUnit&&D[0].precision===y.precision&&D[1].showPerimeter===m.showPerimeter&&D[1].showArea===m.showArea&&D[1].showRadius===m.showRadius&&D[1].showArcLength===m.showArcLength&&D[1].showAngle===m.showAngle){k.value=!1;return}k.value=!0});const P=()=>{n.closeElement(dialogName$b)},S=()=>{s.scale.base.toString().length>6&&(s.scale.base=s.scale.base.toString().slice(0,6)),s.scale.translate.toString().length>6&&(s.scale.translate=s.scale.translate.toString().slice(0,6)),d.value=s.scale.base<=0||s.scale.translate<=0},E=()=>{const I=(g[f.value]||[]).reduce((N,O)=>({...N,[O]:w[O]}),{});JSON.stringify(y)===JSON.stringify(s)?core.setMeasurementDefaults({...I}):core.setMeasurementDefaults({...JSON.parse(JSON.stringify(s)),...I}),P()},M=D=>{Object.entries(D).forEach(([I,N])=>{if(I==="scale"){Object.assign(s.scale,N);return}I in s&&(s[I]=N),I in w&&(w[I]=N)}),y=JSON.parse(JSON.stringify(s)),m=JSON.parse(JSON.stringify(w))};core.addEvent("updateMeasureData",M);const T=D=>{if(x="",!!D.hasOwnProperty("type")){if(D.type==="ink"&&D.arcPoints){x="arc";return}x=D.type}};return core.addEvent("measurePropertyChange",T),(D,I)=>{const N=__unplugin_components_0$k,O=__unplugin_components_1$f,F=_sfc_main$4e;return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$2b,[createVNode(F,{show:o.value,dialogName:dialogName$b},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(D.$t("measurement.measurementSettings")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:P},toDisplayString$1(D.$t("cancel")),1),createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:d.value||!k.value}]),onClick:E},toDisplayString$1(D.$t("measurement.done")),3)]),default:withCtx(()=>[createBaseVNode("p",_hoisted_2$1$,toDisplayString$1(D.$t("measurement.scale")),1),createBaseVNode("div",_hoisted_3$1O,[createBaseVNode("span",_hoisted_4$H,toDisplayString$1(D.$t("measurement.drawingDimensions")),1),createBaseVNode("span",_hoisted_5$v,toDisplayString$1(D.$t("measurement.actualSize")),1),createBaseVNode("div",_hoisted_6$m,[withDirectives(createBaseVNode("input",{type:"number",min:"1",max:"999999","onUpdate:modelValue":I[0]||(I[0]=U=>s.scale.base=U),onInput:S},null,544),[[vModelText,s.scale.base]])]),createBaseVNode("div",_hoisted_7$g,[withDirectives(createBaseVNode("select",{class:"unit-input","onUpdate:modelValue":I[1]||(I[1]=U=>s.scale.baseUnit=U)},[createBaseVNode("option",_hoisted_8$c,toDisplayString$1(D.$t("measurement.pt")),1),createBaseVNode("option",_hoisted_9$c,toDisplayString$1(D.$t("measurement.in")),1),createBaseVNode("option",_hoisted_10$c,toDisplayString$1(D.$t("measurement.mm")),1),createBaseVNode("option",_hoisted_11$9,toDisplayString$1(D.$t("measurement.cm")),1),createBaseVNode("option",_hoisted_12$8,toDisplayString$1(D.$t("measurement.m")),1),createBaseVNode("option",_hoisted_13$8,toDisplayString$1(D.$t("measurement.km")),1),createBaseVNode("option",_hoisted_14$8,toDisplayString$1(D.$t("measurement.ft")),1),createBaseVNode("option",_hoisted_15$8,toDisplayString$1(D.$t("measurement.yd")),1),createBaseVNode("option",_hoisted_16$7,toDisplayString$1(D.$t("measurement.mi")),1)],512),[[vModelSelect,s.scale.baseUnit]]),createVNode(N)]),_hoisted_17$6,createBaseVNode("div",_hoisted_18$5,[withDirectives(createBaseVNode("input",{type:"number",min:"1",max:"999999","onUpdate:modelValue":I[2]||(I[2]=U=>s.scale.translate=U),onInput:S},null,544),[[vModelText,s.scale.translate]])]),createBaseVNode("div",_hoisted_19$5,[withDirectives(createBaseVNode("select",{class:"unit-input","onUpdate:modelValue":I[3]||(I[3]=U=>s.scale.translateUnit=U)},[createBaseVNode("option",_hoisted_20$5,toDisplayString$1(D.$t("measurement.pt")),1),createBaseVNode("option",_hoisted_21$5,toDisplayString$1(D.$t("measurement.in")),1),createBaseVNode("option",_hoisted_22$5,toDisplayString$1(D.$t("measurement.mm")),1),createBaseVNode("option",_hoisted_23$4,toDisplayString$1(D.$t("measurement.cm")),1),createBaseVNode("option",_hoisted_24$4,toDisplayString$1(D.$t("measurement.m")),1),createBaseVNode("option",_hoisted_25$3,toDisplayString$1(D.$t("measurement.km")),1),createBaseVNode("option",_hoisted_26$3,toDisplayString$1(D.$t("measurement.ft")),1),createBaseVNode("option",_hoisted_27$3,toDisplayString$1(D.$t("measurement.yd")),1),createBaseVNode("option",_hoisted_28$3,toDisplayString$1(D.$t("measurement.mi")),1)],512),[[vModelSelect,s.scale.translateUnit]]),createVNode(N)]),d.value?(openBlock(),createElementBlock("p",_hoisted_29$3,toDisplayString$1(D.$t("measurement.scaleError")),1)):createCommentVNode("",!0)]),createBaseVNode("p",_hoisted_30$3,toDisplayString$1(D.$t("measurement.precision")),1),createBaseVNode("div",_hoisted_31$3,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":I[4]||(I[4]=U=>s.precision=U)},_hoisted_37,512),[[vModelSelect,s.precision]]),createVNode(N)]),["polygon","rectangle","circle","arc"].includes(f.value)?(openBlock(),createElementBlock("div",_hoisted_38,[createBaseVNode("p",_hoisted_39,toDisplayString$1(D.$t("measurement.showCaption")),1),createBaseVNode("div",_hoisted_40,[(openBlock(),createElementBlock(Fragment,null,renderList(v,U=>(openBlock(),createElementBlock(Fragment,{key:U.key},[U.types.includes(f.value)?(openBlock(),createElementBlock("div",{key:0,class:"check-box",onClick:Y=>w[U.key]=!w[U.key]},[createBaseVNode("div",{class:normalizeClass(["check",{active:w[U.key]}])},[withDirectives(createVNode(O,null,null,512),[[vShow,w[U.key]]])],2),createBaseVNode("span",null,toDisplayString$1(D.$t(U.label)),1)],8,_hoisted_41)):createCommentVNode("",!0)],64))),64))])])):createCommentVNode("",!0)]),_:1},8,["show"])],512)),[[vShow,o.value]])}}},_sfc_main$2v={},_hoisted_1$2a={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1_=createBaseVNode("circle",{cx:"8",cy:"7.99976",r:"7",fill:"currentColor"},null,-1),_hoisted_3$1N=createBaseVNode("path",{d:"M7.40967 10.8826H8.47852V11.9998H7.40967V10.8826ZM5.59961 6.58032C5.59961 5.80688 5.81803 5.18563 6.25488 4.71655C6.69173 4.2439 7.2915 4.00757 8.0542 4.00757C8.7596 4.00757 9.32357 4.20988 9.74609 4.6145C10.1722 5.01554 10.3853 5.52938 10.3853 6.15601C10.3853 6.53556 10.3065 6.84351 10.1489 7.07983C9.99495 7.31616 9.68164 7.66349 9.20898 8.12183C8.86523 8.45483 8.64144 8.73771 8.5376 8.97046C8.43734 9.19963 8.38721 9.53979 8.38721 9.99097H7.43115C7.43115 9.47892 7.49202 9.06714 7.61377 8.75562C7.73551 8.44051 8.00228 8.08065 8.41406 7.67603L8.84375 7.25171C8.97266 7.12996 9.0765 7.00285 9.15527 6.87036C9.2985 6.63761 9.37012 6.39591 9.37012 6.14526C9.37012 5.79435 9.26449 5.48999 9.05322 5.23218C8.84554 4.97437 8.5 4.84546 8.0166 4.84546C7.41862 4.84546 7.00505 5.06746 6.77588 5.51147C6.64697 5.75854 6.57357 6.11483 6.55566 6.58032H5.59961Z",fill:"white"},null,-1),_hoisted_4$G=[_hoisted_2$1_,_hoisted_3$1N];function _sfc_render$1m(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$2a,_hoisted_4$G)}const __unplugin_components_9$2=_export_sfc(_sfc_main$2v,[["render",_sfc_render$1m]]),_sfc_main$2u={},_hoisted_1$29={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1Z=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.96069 10.2896L2.96069 16.2896L2.96069 17.0396L3.71069 17.0396L9.71069 17.0396L9.71069 15.5396L5.52124 15.5396L9.71582 11.345L8.65516 10.2843L4.46069 14.4788L4.46069 10.2896L2.96069 10.2896Z",fill:"currentColor"},null,-1),_hoisted_3$1M=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.0393 9.71045L17.0393 3.71045L17.0393 2.96045L16.2893 2.96045L10.2893 2.96045L10.2893 4.46045L14.4788 4.46045L10.2842 8.65503L11.3448 9.71569L15.5393 5.52122L15.5393 9.71045L17.0393 9.71045Z",fill:"currentColor"},null,-1),_hoisted_4$F=[_hoisted_2$1Z,_hoisted_3$1M];function _sfc_render$1l(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$29,_hoisted_4$F)}const __unplugin_components_8$3=_export_sfc(_sfc_main$2u,[["render",_sfc_render$1l]]),_sfc_main$2t={},_hoisted_1$28={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1Y=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.1853 17.5647L9.1853 11.5647L9.1853 10.8147L8.4353 10.8147L2.4353 10.8147L2.4353 12.3147L6.62476 12.3147L2.43018 16.5093L3.49084 17.5699L7.6853 13.3755L7.6853 17.5647L9.1853 17.5647Z",fill:"currentColor"},null,-1),_hoisted_3$1L=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.8147 2.4353L10.8147 8.4353L10.8147 9.1853L11.5647 9.1853L17.5647 9.1853L17.5647 7.6853L13.3752 7.6853L17.5698 3.49072L16.5092 2.43006L12.3147 6.62453L12.3147 2.4353L10.8147 2.4353Z",fill:"currentColor"},null,-1),_hoisted_4$E=[_hoisted_2$1Y,_hoisted_3$1L];function _sfc_render$1k(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$28,_hoisted_4$E)}const __unplugin_components_7$3=_export_sfc(_sfc_main$2t,[["render",_sfc_render$1k]]),_sfc_main$2s={},_hoisted_1$27={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1X=createBaseVNode("path",{d:"M2.5 11.9037C3.09643 7.58461 4.96299 -0.313125 7.65776 2.64854C11.0262 6.35062 10.8157 17.4568 13.342 17.9857C15.3631 18.4088 17.6228 9.34754 18.5 4.76404",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$1K=[_hoisted_2$1X];function _sfc_render$1j(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$27,_hoisted_3$1K)}const __unplugin_components_3$7=_export_sfc(_sfc_main$2s,[["render",_sfc_render$1j]]),_sfc_main$2r={},_hoisted_1$26={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1W=createBaseVNode("path",{d:"M2.63672 18C2.63672 15.9828 3.03403 13.9854 3.80595 12.1218C4.57788 10.2582 5.70932 8.56494 7.13565 7.1386C8.56199 5.71227 10.2553 4.58083 12.1189 3.80891C13.9825 3.03698 15.9799 2.63968 17.997 2.63968",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$1J=createBaseVNode("path",{d:"M17.9966 2V18H2.00293",stroke:"currentColor","stroke-width":"1.5","stroke-dasharray":"3.6 1.8"},null,-1),_hoisted_4$D=createBaseVNode("path",{d:"M16.7554 4.56842L18.6333 2.63967L16.7298 0.736165",stroke:"currentColor","stroke-width":"1.4"},null,-1),_hoisted_5$u=createBaseVNode("path",{d:"M0.708008 16.838L2.63675 18.7159L4.54026 16.8124",stroke:"currentColor","stroke-width":"1.4"},null,-1),_hoisted_6$l=[_hoisted_2$1W,_hoisted_3$1J,_hoisted_4$D,_hoisted_5$u];function _sfc_render$1i(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$26,_hoisted_6$l)}const __unplugin_components_4$8=_export_sfc(_sfc_main$2r,[["render",_sfc_render$1i]]),_sfc_main$2q={},_hoisted_1$25={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1V=createBaseVNode("circle",{cx:"10.5",cy:"10",r:"8.25",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$1I=createBaseVNode("path",{d:"M17.0664 5.21002L3.37442 15.2833",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_4$C=createBaseVNode("path",{d:"M13.5967 2.37137L2.12094 11.0831",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_5$t=createBaseVNode("path",{d:"M18.9043 9.01334L7.85905 17.3793",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_6$k=[_hoisted_2$1V,_hoisted_3$1I,_hoisted_4$C,_hoisted_5$t];function _sfc_render$1h(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$25,_hoisted_6$k)}const __unplugin_components_5$4=_export_sfc(_sfc_main$2q,[["render",_sfc_render$1h]]),_sfc_main$2p={},_hoisted_1$24={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1U=createBaseVNode("rect",{x:"2.25",y:"3.75",width:"16.5",height:"12.5",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$1H=createBaseVNode("path",{d:"M18.2759 4.31778L2.203 16.3053",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_4$B=createBaseVNode("path",{d:"M12.2065 3.56934L2.14012 11.148",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_5$s=createBaseVNode("path",{d:"M18.8979 9.27121L9.43893 16.3618",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_6$j=[_hoisted_2$1U,_hoisted_3$1H,_hoisted_4$B,_hoisted_5$s];function _sfc_render$1g(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$24,_hoisted_6$j)}const __unplugin_components_6$4=_export_sfc(_sfc_main$2p,[["render",_sfc_render$1g]]),_sfc_main$2o={},_hoisted_1$23={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1T=createBaseVNode("path",{d:"M14.2041 4.48883L3.08548 11.1043",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$1G=createBaseVNode("path",{d:"M16.9145 8.71439L5.51183 15.5114",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_4$A=createBaseVNode("path",{d:"M2.95577 5.93301L10 1.86603L17.0442 5.93301V14.067L10 18.134L2.95577 14.067V5.93301Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_5$r=[_hoisted_2$1T,_hoisted_3$1G,_hoisted_4$A];function _sfc_render$1f(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$23,_hoisted_5$r)}const __unplugin_components_7$2=_export_sfc(_sfc_main$2o,[["render",_sfc_render$1f]]),_sfc_main$2n={},_hoisted_1$22={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1S=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1 3C1 1.89543 1.89543 1 3 1C3.83934 1 4.55793 1.51704 4.85462 2.25H16.1454C16.4421 1.51704 17.1607 1 18 1C19.1046 1 20 1.89543 20 3C20 3.83934 19.483 4.55793 18.75 4.85462V17V17.75H18H14.2011L15.0167 18.5765L14.0138 19.5928L11.9986 17.5505L11.4972 17.0423L11.9986 16.5342L14.0138 14.4918L15.0167 15.5082L14.2847 16.25H17.25V4.85462C16.7487 4.65168 16.3483 4.25135 16.1454 3.75H4.85462C4.65168 4.25135 4.25135 4.65168 3.75 4.85462V16.25H6.75V15H8.25V19H6.75V17.75H3H2.25V17V4.85462C1.51704 4.55793 1 3.83934 1 3Z",fill:"currentColor"},null,-1),_hoisted_3$1F=[_hoisted_2$1S];function _sfc_render$1e(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$22,_hoisted_3$1F)}const __unplugin_components_2$d=_export_sfc(_sfc_main$2n,[["render",_sfc_render$1e]]),_sfc_main$2m={},_hoisted_1$21={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1R=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.278 5.75735L14.7425 2.22181L13.505 3.45925L15.98 5.93421L14.9193 6.99487L12.4444 4.51991L10.6766 6.28768L13.1516 8.76264L12.0909 9.8233L9.61596 7.34834L7.84819 9.11611L10.3232 11.5911L9.26249 12.6517L6.78753 10.1768L5.01977 11.9445L7.49473 14.4195L6.43407 15.4802L3.95911 13.0052L2.72167 14.2426L6.2572 17.7782L18.278 5.75735ZM15.8031 1.16115L14.7425 0.100494L13.6818 1.16115L1.66101 13.182L0.600348 14.2426L1.66101 15.3033L5.19654 18.8388L6.2572 19.8995L7.31786 18.8388L19.3387 6.81801L20.3993 5.75735L19.3387 4.69669L15.8031 1.16115Z",fill:"currentColor"},null,-1),_hoisted_3$1E=[_hoisted_2$1R];function _sfc_render$1d(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$21,_hoisted_3$1E)}const __unplugin_components_0$j=_export_sfc(_sfc_main$2m,[["render",_sfc_render$1d]]),MeasurementBoard_vue_vue_type_style_index_0_lang="",_hoisted_1$20={class:"header-container"},_hoisted_2$1Q={key:0,class:"title"},_hoisted_3$1D={key:1,class:"title"},_hoisted_4$z={key:2,class:"title"},_hoisted_5$q={key:3,class:"title"},_hoisted_6$i={key:4,class:"title"},_hoisted_7$f={key:5,class:"title"},_hoisted_8$b={key:6,class:"title"},_hoisted_9$b={class:"content"},_hoisted_10$b={class:"has-input"},_hoisted_11$8={class:"has-tip"},_hoisted_12$7={class:"has-input"},_hoisted_13$7={class:"has-tip"},_hoisted_14$7={class:"has-tip"},_hoisted_15$7={class:"has-tip"},_hoisted_16$6={class:"has-tip"},_hoisted_17$5={class:"has-input"},_hoisted_18$4={class:"has-tip"},_hoisted_19$4={class:"has-input"},_hoisted_20$4={class:"has-tip"},_hoisted_21$4={class:"has-input"},_hoisted_22$4={class:"setting"},_sfc_main$2l={__name:"MeasurementBoard",setup(e){const n=useViewerStore(),r=useDocumentStore(),u=getCurrentInstance().appContext.app.config.globalProperties.$t,s=computed(()=>n.getToolMode),w=computed(()=>r.getActiveTool),g=computed(()=>{const J=s.value==="measurement"&&m.includes(w.value);return S.value||J}),v=computed(()=>{const J=m.includes(w.value)?w.value:"";return E.value||J});computed(()=>r.getMeasure),computed(()=>r.getPrecision);const y=computed(()=>n.isElementOpen("measurePanel")),m=["line","polyline","polygon","rectangle","circle","curve","arc"],d=reactive({scale:{base:1,baseUnit:"cm",translate:1,translateUnit:"cm"},precision:.1,length:0,angle:0,radius:0,perimeter:0,area:0,X:0,Y:0,arcLength:0,width:0}),f=ref(),x=ref(!1),k=reactive({right:30,y:100}),P=reactive({x:0,y:0}),S=ref(!1),E=ref(""),M=ref(!1),T=ref(0),D=computed(()=>`${d.scale.base} ${u("measurement."+d.scale.baseUnit)} = ${d.scale.translate} ${u("measurement."+d.scale.translateUnit)}`);watch(y,(J,re)=>{J&&k.right<260?T.value=k.right-260-30:T.value=0}),watch([g,w],(J,re)=>{(J[0]||J[1])&&!S.value&&q()});const I=J=>{for(const re in J)for(const X in d)if(re===X){if(re==="scale"){Object.assign(d.scale,J.scale);continue}d[X]=J[re]}};core.addEvent("updateMeasureData",I);const N=J=>{if(S.value=!!J.measure,!J.measure){E.value="";return}J.type==="ink"?E.value=J.arcPoints?"arc":"curve":E.value=J.type};core.addEvent("annotationSelected",N);const O=()=>{!S.value||(S.value=!1,E.value="",q())};core.addEvent("annotationDeselected",O);const F=()=>{n.openElement("measurementSettingsDialog")},U=J=>{x.value=!0,P.x=window.innerWidth-J.clientX-k.right,P.y=J.clientY-k.y,document.addEventListener("mousemove",Q),document.addEventListener("mouseup",Y)},Y=()=>{x.value=!1,document.removeEventListener("mousemove",Q),document.removeEventListener("mouseup",Y)},Q=J=>{if(x.value){const re=f.value.offsetWidth,X=f.value.offsetHeight,j=window.innerWidth-J.clientX-P.x,Z=J.clientY-P.y,W=window.innerWidth-re,te=window.innerHeight-X;k.right=Math.min(Math.max(j,0),W),k.y=Math.min(Math.max(Z,0),te)}},q=()=>{d.length=0,d.angle=0,d.radius=0,d.perimeter=0,d.area=0,d.X=0,d.Y=0,d.arcLength=0,d.width=0},ne=(J,re)=>{core.setPropertyPanel({[re]:J})};return(J,re)=>{const X=__unplugin_components_0$j,j=__unplugin_components_2$d,Z=__unplugin_components_7$2,W=__unplugin_components_6$4,te=__unplugin_components_5$4,le=__unplugin_components_4$8,oe=__unplugin_components_3$7,Ee=__unplugin_components_7$3,Ae=__unplugin_components_8$3,ve=__unplugin_components_9$2;return withDirectives((openBlock(),createElementBlock("div",{ref_key:"measurementBoard",ref:f,class:normalizeClass(["measurement-board",{fold:M.value}]),style:normalizeStyle({top:k.y+"px",right:k.right+"px",transform:`translateX(${T.value}px)`}),onMousedown:U},[createBaseVNode("div",_hoisted_1$20,[v.value==="line"?(openBlock(),createElementBlock("div",_hoisted_2$1Q,[createVNode(X),createBaseVNode("span",null,toDisplayString$1(unref(u)("header.measureLine")),1)])):v.value==="polyline"?(openBlock(),createElementBlock("div",_hoisted_3$1D,[createVNode(j),createBaseVNode("span",null,toDisplayString$1(unref(u)("header.measureMultiline")),1)])):v.value==="polygon"?(openBlock(),createElementBlock("div",_hoisted_4$z,[createVNode(Z),createBaseVNode("span",null,toDisplayString$1(unref(u)("header.measurePolygon")),1)])):v.value==="rectangle"?(openBlock(),createElementBlock("div",_hoisted_5$q,[createVNode(W),createBaseVNode("span",null,toDisplayString$1(unref(u)("header.measureRectangle")),1)])):v.value==="circle"?(openBlock(),createElementBlock("div",_hoisted_6$i,[createVNode(te),createBaseVNode("span",null,toDisplayString$1(unref(u)("header.measureCircle")),1)])):v.value==="arc"?(openBlock(),createElementBlock("div",_hoisted_7$f,[createVNode(le),createBaseVNode("span",null,toDisplayString$1(unref(u)("header.measureArc")),1)])):v.value==="curve"?(openBlock(),createElementBlock("div",_hoisted_8$b,[createVNode(oe),createBaseVNode("span",null,toDisplayString$1(unref(u)("header.measureCurve")),1)])):createCommentVNode("",!0),createBaseVNode("div",{onClick:re[0]||(re[0]=ke=>M.value=!M.value),class:"fold-button"},[M.value?(openBlock(),createBlock(Ae,{key:1})):(openBlock(),createBlock(Ee,{key:0}))])]),withDirectives(createBaseVNode("div",_hoisted_9$b,[createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.scale"))+":",1),createBaseVNode("span",null,toDisplayString$1(D.value),1),createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.precision"))+":",1),createBaseVNode("span",null,toDisplayString$1(d.precision),1),v.value==="line"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.length"))+":",1),createBaseVNode("span",_hoisted_10$b,[createVNode(unref(NInputNumber),{value:d.length,"onUpdate:value":[re[1]||(re[1]=ke=>d.length=ke),re[2]||(re[2]=ke=>ne(ke,"length"))],placeholder:"1",min:"1",max:"100",step:1,"update-value-on-input":!1,"show-button":!1,disabled:!E.value},null,8,["value","disabled"]),createTextVNode(" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1)]),createBaseVNode("span",_hoisted_11$8,[createTextVNode(toDisplayString$1(unref(u)("measurement.angle"))+": ",1),createVNode(unref(NTooltip),{trigger:"hover",style:{padding:"2px 10px","background-color":"#414960","box-shadow":"none","max-width":"280px","text-align":"center"},"arrow-style":"background-color: #414960;"},{trigger:withCtx(()=>[createVNode(ve)]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(unref(u)("measurement.lineAngleTip")),1)]),_:1})]),createBaseVNode("span",_hoisted_12$7,[createVNode(unref(NInputNumber),{value:d.angle,"onUpdate:value":[re[3]||(re[3]=ke=>d.angle=ke),re[4]||(re[4]=ke=>ne(ke,"angle"))],placeholder:"1",min:"-180",max:"180",step:1,"update-value-on-input":!1,"show-button":!1,disabled:!E.value},null,8,["value","disabled"]),createTextVNode("\xB0 ")]),createBaseVNode("span",_hoisted_13$7,[createTextVNode(" X: "),createVNode(unref(NTooltip),{trigger:"hover",style:{padding:"2px 10px","background-color":"#414960","box-shadow":"none","max-width":"280px","text-align":"center"},"arrow-style":"background-color: #414960;"},{trigger:withCtx(()=>[createVNode(ve)]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(unref(u)("measurement.xTip")),1)]),_:1})]),createBaseVNode("span",null,toDisplayString$1(d.X)+" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1),createBaseVNode("span",_hoisted_14$7,[createTextVNode(" Y: "),createVNode(unref(NTooltip),{trigger:"hover",style:{padding:"2px 10px","background-color":"#414960","box-shadow":"none","max-width":"280px","text-align":"center"},"arrow-style":"background-color: #414960;"},{trigger:withCtx(()=>[createVNode(ve)]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(unref(u)("measurement.yTip")),1)]),_:1})]),createBaseVNode("span",null,toDisplayString$1(d.Y)+" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1)],64)):createCommentVNode("",!0),v.value==="polyline"?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.length"))+":",1),createBaseVNode("span",null,toDisplayString$1(d.length)+" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1),createBaseVNode("span",_hoisted_15$7,[createTextVNode(toDisplayString$1(unref(u)("measurement.angle"))+": ",1),createVNode(unref(NTooltip),{trigger:"hover",style:{padding:"2px 10px","background-color":"#414960","box-shadow":"none","max-width":"250px","text-align":"center"},"arrow-style":"background-color: #414960;"},{trigger:withCtx(()=>[createVNode(ve)]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(unref(u)("measurement.multilineAngleTip")),1)]),_:1})]),createBaseVNode("span",null,toDisplayString$1(d.angle)+"\xB0",1)],64)):createCommentVNode("",!0),v.value==="curve"?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.length"))+":",1),createBaseVNode("span",null,toDisplayString$1(d.length)+" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1)],64)):createCommentVNode("",!0),v.value==="circle"?(openBlock(),createElementBlock(Fragment,{key:3},[createBaseVNode("span",_hoisted_16$6,[createTextVNode(toDisplayString$1(unref(u)("measurement.radius"))+": ",1),createVNode(unref(NTooltip),{trigger:"hover",style:{padding:"2px 10px","background-color":"#414960","box-shadow":"none","max-width":"280px","text-align":"center"},"arrow-style":"background-color: #414960;"},{trigger:withCtx(()=>[createVNode(ve)]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(unref(u)("measurement.circlrRadiusTip")),1)]),_:1})]),createBaseVNode("span",_hoisted_17$5,[createVNode(unref(NInputNumber),{value:d.radius,"onUpdate:value":[re[5]||(re[5]=ke=>d.radius=ke),re[6]||(re[6]=ke=>ne(ke,"radius"))],placeholder:"1",min:"1",max:"100",step:1,"update-value-on-input":!1,"show-button":!1,disabled:!E.value},null,8,["value","disabled"]),createTextVNode(" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1)]),createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.perimeter"))+":",1),createBaseVNode("span",null,toDisplayString$1(d.perimeter)+" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1),createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.area"))+":",1),createBaseVNode("span",null,toDisplayString$1(d.area)+" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`))+"\xB2",1)],64)):createCommentVNode("",!0),v.value==="arc"?(openBlock(),createElementBlock(Fragment,{key:4},[createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.radius"))+":",1),createBaseVNode("span",null,toDisplayString$1(d.radius)+" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1),createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.arcLength"))+":",1),createBaseVNode("span",null,toDisplayString$1(d.arcLength)+" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1),createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.angle"))+":",1),createBaseVNode("span",null,toDisplayString$1(d.angle)+"\xB0",1)],64)):createCommentVNode("",!0),v.value==="rectangle"?(openBlock(),createElementBlock(Fragment,{key:5},[createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.perimeter"))+":",1),createBaseVNode("span",null,toDisplayString$1(d.perimeter)+" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1),createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.area"))+":",1),createBaseVNode("span",null,toDisplayString$1(d.area)+" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`))+"\xB2",1),createBaseVNode("span",_hoisted_18$4,[createTextVNode(toDisplayString$1(unref(u)("measurement.rectanglelength"))+": ",1),createVNode(unref(NTooltip),{trigger:"hover",style:{padding:"2px 10px","background-color":"#414960","box-shadow":"none","max-width":"280px","text-align":"center"},"arrow-style":"background-color: #414960;"},{trigger:withCtx(()=>[createVNode(ve)]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(unref(u)("measurement.rectangleLengthTip")),1)]),_:1})]),createBaseVNode("span",_hoisted_19$4,[createVNode(unref(NInputNumber),{value:d.length,"onUpdate:value":[re[7]||(re[7]=ke=>d.length=ke),re[8]||(re[8]=ke=>ne(ke,"length"))],placeholder:"1",min:"1",max:"100",step:1,"update-value-on-input":!1,"show-button":!1,disabled:!E.value},null,8,["value","disabled"]),createTextVNode(" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1)]),createBaseVNode("span",_hoisted_20$4,[createTextVNode(toDisplayString$1(unref(u)("measurement.rectangleWidth"))+": ",1),createVNode(unref(NTooltip),{trigger:"hover",style:{padding:"2px 10px","background-color":"#414960","box-shadow":"none","max-width":"280px","text-align":"center"},"arrow-style":"background-color: #414960;"},{trigger:withCtx(()=>[createVNode(ve)]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(unref(u)("measurement.rectangleWidthTip")),1)]),_:1})]),createBaseVNode("span",_hoisted_21$4,[createVNode(unref(NInputNumber),{value:d.width,"onUpdate:value":[re[9]||(re[9]=ke=>d.width=ke),re[10]||(re[10]=ke=>ne(ke,"width"))],placeholder:"1",min:"1",max:"100",step:1,"update-value-on-input":!1,"show-button":!1,disabled:!E.value},null,8,["value","disabled"]),createTextVNode(" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1)])],64)):createCommentVNode("",!0),v.value==="polygon"?(openBlock(),createElementBlock(Fragment,{key:6},[createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.perimeter"))+":",1),createBaseVNode("span",null,toDisplayString$1(d.perimeter)+" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`)),1),createBaseVNode("span",null,toDisplayString$1(unref(u)("measurement.area"))+":",1),createBaseVNode("span",null,toDisplayString$1(d.area)+" "+toDisplayString$1(unref(u)(`measurement.${d.scale.translateUnit}`))+"\xB2",1)],64)):createCommentVNode("",!0)],512),[[vShow,!M.value]]),withDirectives(createBaseVNode("div",_hoisted_22$4,[createBaseVNode("span",{onClick:F},toDisplayString$1(unref(u)("header.settings.settings")),1)],512),[[vShow,!M.value]])],38)),[[vShow,g.value]])}}},RedactionTipDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1$={key:0,class:"redaction-tip-dialog"},_hoisted_2$1P={class:"title"},dialogName$a="redactionTipDialog",_sfc_main$2k={__name:"RedactionTipDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$a)),u=computed(()=>r.getFirstEnterRedactionTool),s=()=>{r.setRedactionPrompted(!0),r.setToolState(u.value),n.setDisableHeader(!0),n.resetPanels(),n.closeElement(dialogName$a)};return(w,g)=>{const v=__unplugin_components_2$f,y=_sfc_main$4e;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$1$,[createVNode(y,{show:o.value,dialogName:dialogName$a,close:!0},{default:withCtx(()=>[createVNode(v),createBaseVNode("p",_hoisted_2$1P,toDisplayString$1(w.$t("security.caution")),1),createBaseVNode("p",null,toDisplayString$1(w.$t("security.enterTip")),1),createBaseVNode("div",{class:"rect-button blue",onClick:s},toDisplayString$1(w.$t("security.understand")),1)]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_hoisted_1$1_={key:0,class:"layer-locked-tip-popup"},dialogName$9="unsupportedMobileDialog",_sfc_main$2j={__name:"UnsupportedMobileDialog",setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen(dialogName$9)),o=()=>{n.closeElement(dialogName$9)};return(u,s)=>{const w=__unplugin_components_2$f,g=_sfc_main$4e;return r.value?(openBlock(),createElementBlock("div",_hoisted_1$1_,[createVNode(g,{class:"layer-locked-tip-popup",show:r.value,dialogName:dialogName$9},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button blue",onClick:s[0]||(s[0]=v=>o())},toDisplayString$1(u.$t("layer.ok")),1)]),default:withCtx(()=>[createVNode(w),createBaseVNode("p",null,toDisplayString$1(u.$t("colorSeparation.accessOnPc")),1)]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$2i={},_hoisted_1$1Z={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1O=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 2.25H2.25V3V15H3.75V3.75H15V2.25H3ZM7.5 7.5H16.5V16.5H7.5V7.5ZM6 6H7.5H16.5H18V7.5V16.5V18H16.5H7.5H6V16.5V7.5V6Z",fill:"currentColor"},null,-1),_hoisted_3$1C=[_hoisted_2$1O];function _sfc_render$1c(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1Z,_hoisted_3$1C)}const __unplugin_components_1$5=_export_sfc(_sfc_main$2i,[["render",_sfc_render$1c]]),_sfc_main$2h={__name:"ContentEditorPopup",setup(e){const n=useViewerStore();useDocumentStore();const r=computed(()=>n.getPopupItems("contentEditorPopup")),o=computed(()=>n.isElementOpen("contentEditorPanel")),u=ref(!1),s=ref(0),w=ref(0),g=ref(null);let v,y=!1,m;const d=P=>{u.value=!1,core.handlePopup({type:"contentEditor",tool:P})},f=async(P={})=>{const{rect:S}=P;if(u.value=!!S,await nextTick(),S&&u.value){const E=g.value.children[0];if(!E)return;const M=E.offsetWidth,T=E.offsetHeight+10;let D=S.right-M,I=S.bottom;const N=window.innerWidth,O=window.innerHeight;D>N-M&&(D=N-M),D<0&&(D=0),I+T>O&&(I=Math.max(0,S.top-T)),s.value=I,w.value=o.value?D+130:D}};core.addEvent("showContentEditorPopup",f);const x=()=>{u.value&&(u.value=!1,y=!0),y&&(clearTimeout(m),m=setTimeout(()=>{core.showPopup({type:"contentEditorPupop"}),y=!1},200))},k=()=>{n.toggleElement("contentEditorPanel")};return onMounted(()=>{v=document.querySelector(".document-container"),v&&v.addEventListener("scroll",x)}),onUnmounted(()=>{v&&v.removeEventListener("scroll",x)}),(P,S)=>{const E=_sfc_main$2z,M=__unplugin_components_1$5,T=_sfc_main$4l,D=__unplugin_components_8$4,I=__unplugin_components_19;return openBlock(),createElementBlock("div",{ref_key:"contentEditorPopupRef",ref:g},[withDirectives(createBaseVNode("div",{class:"content-editor-popup popup",style:normalizeStyle({top:`${s.value}px`,left:`${w.value}px`,transform:`translateX(${!unref(isMobileDevice)&&o.value?-130:0}px) translateY(5px)`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,(N,O)=>(openBlock(),createElementBlock(Fragment,{key:`${N.dataElement||new Date}-${O}`},[N.name==="customButton"&&!N.hidden?(openBlock(),createBlock(E,{key:0,item:N,"data-element":N.dataElement},null,8,["item","data-element"])):N.type==="copy"&&!N.hidden?(openBlock(),createBlock(T,{key:1,onClick:S[0]||(S[0]=F=>d("copy")),title:P.$t("documentEditor.copy"),"data-element":N.dataElement},{default:withCtx(()=>[createVNode(M)]),_:2},1032,["title","data-element"])):N.type==="delete"&&!N.hidden?(openBlock(),createBlock(T,{key:2,onClick:S[1]||(S[1]=F=>d("delete")),title:P.$t("delete"),"data-element":N.dataElement},{default:withCtx(()=>[createVNode(D)]),_:2},1032,["title","data-element"])):N.type==="property"&&!N.hidden?(openBlock(),createBlock(T,{key:3,onClick:k,title:P.$t("properties"),"data-element":N.dataElement,isActive:o.value},{default:withCtx(()=>[createVNode(I)]),_:2},1032,["title","data-element","isActive"])):["spacer","divider"].includes(N.type)?(openBlock(),createElementBlock("div",{key:4,class:normalizeClass(N.type)},null,2)):createCommentVNode("",!0)],64))),128))],4),[[vShow,u.value&&r.value.length]])],512)}}},_sfc_main$2g={},_hoisted_1$1Y={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1N=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.3596 8.35973L10.7499 11.9694L10.7499 2C10.7499 1.58579 10.4142 1.25 9.99994 1.25C9.58573 1.25 9.24994 1.58579 9.24994 2L9.24994 11.9694L5.64024 8.35973C5.34735 8.06683 4.87247 8.06683 4.57958 8.35973C4.28669 8.65262 4.28669 9.12749 4.57958 9.42039L9.46961 14.3104C9.7625 14.6033 10.2374 14.6033 10.5303 14.3104L15.4203 9.42039C15.7132 9.12749 15.7132 8.65262 15.4203 8.35973C15.1274 8.06683 14.6525 8.06683 14.3596 8.35973ZM2.99994 16.1538C2.58573 16.1538 2.24994 16.4896 2.24994 16.9038C2.24994 17.318 2.58573 17.6538 2.99994 17.6538H17.3076C17.7218 17.6538 18.0576 17.318 18.0576 16.9038C18.0576 16.4896 17.7218 16.1538 17.3076 16.1538H2.99994Z",fill:"currentColor"},null,-1),_hoisted_3$1B=[_hoisted_2$1N];function _sfc_render$1b(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1Y,_hoisted_3$1B)}const __unplugin_components_0$i=_export_sfc(_sfc_main$2g,[["render",_sfc_render$1b]]),_sfc_main$2f={__name:"CropPagePopup",setup(e){const n=useViewerStore(),r=computed(()=>n.getPopupItems("cropPagePopup")),o=ref(!1),u=ref(0),s=ref(0),w=ref(null),g=ref(!0);let v,y=!1,m,d=0;const f=E=>{core.handlePopup({type:"cropPage",tool:E})},x=async E=>{var T;let{rect:M}=E;if(d=E.pageNumber,o.value=!!M,await nextTick(),n.setDisableHeader(o.value),o.value&&n.resetPanels(),M&&o.value){const D=core.pageToWindow({x:M.left,y:M.top},E.pageNumber),I=core.pageToWindow({x:M.right,y:M.bottom},E.pageNumber),N=core.getScrollViewElement();M={left:D.x-N.scrollLeft,top:D.y-N.scrollTop,right:I.x-N.scrollLeft,bottom:I.y-N.scrollTop};const O=(T=w.value)==null?void 0:T.children[0];if(!O)return;let F=M.left+(M.right-M.left)/2,U=M.bottom;const Y=O.offsetWidth,Q=O.offsetHeight+10,q=window.innerWidth,ne=window.innerHeight;g.value=!0,F-Y/2<0?(F=0,g.value=!1):F+Y/2>q&&(F=q-Y,g.value=!1),U+Q>ne&&(U=Math.max(0,M.top-Q)),u.value=U,s.value=F}};core.addEvent("snipSelected",x);const k=async()=>{const E=await core.getCropedPageImage(d);P(E),f("close")},P=(E,M)=>{const T=document.createElement("a");T.href=E,T.download=M||"image",document.body.appendChild(T),T.click(),document.body.removeChild(T)},S=()=>{o.value&&(o.value=!1,y=!0),y&&(clearTimeout(m),m=setTimeout(()=>{core.showPopup({type:"cropPagePupop",pageIndex:d-1}),y=!1},200))};return onMounted(()=>{v=document.querySelector(".document-container"),v&&v.addEventListener("scroll",S)}),onUnmounted(()=>{v&&v.removeEventListener("scroll",S)}),(E,M)=>{const T=_sfc_main$2z,D=__unplugin_components_0$i,I=_sfc_main$4l,N=__unplugin_components_1$g;return openBlock(),createElementBlock("div",{ref_key:"cropPagePopupRef",ref:w,onMousedown:M[1]||(M[1]=withModifiers(()=>{},["stop"])),onTouchstart:M[2]||(M[2]=withModifiers(()=>{},["stop"]))},[o.value&&r.value.length?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["crop-page-popup popup",{transform:g.value}]),style:normalizeStyle({top:`${u.value}px`,left:`${s.value}px`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,(O,F)=>(openBlock(),createElementBlock(Fragment,{key:`${O.dataElement||new Date}-${F}`},[O.name==="customButton"&&!O.hidden?(openBlock(),createBlock(T,{key:0,item:O},null,8,["item"])):O.type==="cropPage"&&!O.hidden?(openBlock(),createBlock(I,{key:1,onClick:k,title:E.$t("header.download"),"data-element":O.dataElement},{default:withCtx(()=>[createVNode(D)]),_:2},1032,["title","data-element"])):O.type==="close"&&!O.hidden?(openBlock(),createBlock(I,{key:2,onClick:M[0]||(M[0]=U=>f("close")),title:E.$t("exit"),"data-element":O.dataElement},{default:withCtx(()=>[createVNode(N)]),_:2},1032,["title","data-element"])):["spacer","divider"].includes(O.type)?(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(O.type)},null,2)):createCommentVNode("",!0)],64))),128))],6)):createCommentVNode("",!0)],544)}}},_sfc_main$2e={},_hoisted_1$1X={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1M=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.4216 5.35913H9.36765V3.85913H13.3676V5.35913H11.9745L9.48752 14.6409H10.6323V16.1409H6.63232V14.6409H7.9346L10.4216 5.35913Z",fill:"currentColor"},null,-1),_hoisted_3$1A=[_hoisted_2$1M];function _sfc_render$1a(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1X,_hoisted_3$1A)}const __unplugin_components_6$3=_export_sfc(_sfc_main$2e,[["render",_sfc_render$1a]]),_sfc_main$2d={},_hoisted_1$1W={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1L=createBaseVNode("path",{d:"M10.4934 16H5V4H10.8882C12.3739 4.02171 13.4265 4.44776 14.0461 5.27815C14.4189 5.78833 14.6053 6.39891 14.6053 7.10991C14.6053 7.84261 14.4189 8.43148 14.0461 8.87653C13.8377 9.12619 13.5307 9.35414 13.125 9.56038C13.7445 9.7829 14.2105 10.1357 14.523 10.6187C14.841 11.1018 15 11.6879 15 12.3772C15 13.0882 14.8191 13.7259 14.4572 14.2904C14.227 14.6649 13.9391 14.9796 13.5938 15.2347C13.2045 15.5278 12.744 15.7286 12.2122 15.8372C11.6859 15.9457 11.1129 16 10.4934 16ZM10.4359 10.7164H7.41776V13.9159H10.3947C10.9265 13.9159 11.3405 13.8453 11.6365 13.7042C12.1738 13.4437 12.4424 12.9444 12.4424 12.2062C12.4424 11.5821 12.182 11.1533 11.6612 10.9199C11.3706 10.7897 10.9622 10.7218 10.4359 10.7164ZM11.6941 8.42877C12.023 8.23338 12.1875 7.88331 12.1875 7.37856C12.1875 6.81954 11.9682 6.45047 11.5296 6.27137C11.1513 6.14654 10.6689 6.08412 10.0822 6.08412H7.41776V8.72999H10.3947C10.9265 8.72999 11.3596 8.62958 11.6941 8.42877Z",fill:"currentColor"},null,-1),_hoisted_3$1z=[_hoisted_2$1L];function _sfc_render$19(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1W,_hoisted_3$1z)}const __unplugin_components_5$3=_export_sfc(_sfc_main$2d,[["render",_sfc_render$19]]),_sfc_main$2c={},_hoisted_1$1V={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1K=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.394 4.97046H12.394V6.47046H17.394V4.97046ZM9.29604 4.99995L13.2075 14.7785H14.2V15.7785H11V14.7785H11.5919L10.792 12.7785H6.4074L5.60744 14.7785H6.2V15.7785H3V14.7785H3.9919L7.90332 4.99995H9.29604ZM8.59968 7.29749L10.392 11.7785H6.80738L8.59968 7.29749Z",fill:"currentColor"},null,-1),_hoisted_3$1y=[_hoisted_2$1K];function _sfc_render$18(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1V,_hoisted_3$1y)}const __unplugin_components_4$7=_export_sfc(_sfc_main$2c,[["render",_sfc_render$18]]),_sfc_main$2b={},_hoisted_1$1U={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1J=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 6.5V5H5V6.5H18Z",fill:"currentColor"},null,-1),_hoisted_3$1x=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 11V9.5H2V11H18Z",fill:"currentColor"},null,-1),_hoisted_4$y=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 15.5V14H8V15.5H18Z",fill:"currentColor"},null,-1),_hoisted_5$p=[_hoisted_2$1J,_hoisted_3$1x,_hoisted_4$y];function _sfc_render$17(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1U,_hoisted_5$p)}const __unplugin_components_2$c=_export_sfc(_sfc_main$2b,[["render",_sfc_render$17]]),_sfc_main$2a={},_hoisted_1$1T={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1I=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 6.5V5H2V6.5H18ZM15 11V9.5H5V11H15ZM18 14V15.5H2V14H18Z",fill:"currentColor"},null,-1),_hoisted_3$1w=[_hoisted_2$1I];function _sfc_render$16(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1T,_hoisted_3$1w)}const __unplugin_components_1$4=_export_sfc(_sfc_main$2a,[["render",_sfc_render$16]]);var _a;const isClient=typeof window<"u",isString$1=e=>typeof e=="string",noop=()=>{},isIOS=isClient&&((_a=window==null?void 0:window.navigator)==null?void 0:_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(e){return typeof e=="function"?e():unref(e)}function promiseTimeout(e,n=!1,r="Timeout"){return new Promise((o,u)=>{setTimeout(n?()=>u(r):o,e)})}function identity(e){return e}function tryOnScopeDispose(e){return getCurrentScope()?(onScopeDispose(e),!0):!1}function createUntil(e,n=!1){function r(d,{flush:f="sync",deep:x=!1,timeout:k,throwOnTimeout:P}={}){let S=null;const M=[new Promise(T=>{S=watch(e,D=>{d(D)!==n&&(S==null||S(),T(D))},{flush:f,deep:x,immediate:!0})})];return k!=null&&M.push(promiseTimeout(k,P).then(()=>resolveUnref(e)).finally(()=>S==null?void 0:S())),Promise.race(M)}function o(d,f){if(!isRef(d))return r(D=>D===d,f);const{flush:x="sync",deep:k=!1,timeout:P,throwOnTimeout:S}=f!=null?f:{};let E=null;const T=[new Promise(D=>{E=watch([e,d],([I,N])=>{n!==(I===N)&&(E==null||E(),D(I))},{flush:x,deep:k,immediate:!0})})];return P!=null&&T.push(promiseTimeout(P,S).then(()=>resolveUnref(e)).finally(()=>(E==null||E(),resolveUnref(e)))),Promise.race(T)}function u(d){return r(f=>Boolean(f),d)}function s(d){return o(null,d)}function w(d){return o(void 0,d)}function g(d){return r(Number.isNaN,d)}function v(d,f){return r(x=>{const k=Array.from(x);return k.includes(d)||k.includes(resolveUnref(d))},f)}function y(d){return m(1,d)}function m(d=1,f){let x=-1;return r(()=>(x+=1,x>=d),f)}return Array.isArray(resolveUnref(e))?{toMatch:r,toContains:v,changed:y,changedTimes:m,get not(){return createUntil(e,!n)}}:{toMatch:r,toBe:o,toBeTruthy:u,toBeNull:s,toBeNaN:g,toBeUndefined:w,changed:y,changedTimes:m,get not(){return createUntil(e,!n)}}}function until(e){return createUntil(e)}function unrefElement(e){var n;const r=resolveUnref(e);return(n=r==null?void 0:r.$el)!=null?n:r}const defaultWindow=isClient?window:void 0;isClient&&window.document;isClient&&window.navigator;isClient&&window.location;function useEventListener(...e){let n,r,o,u;if(isString$1(e[0])||Array.isArray(e[0])?([r,o,u]=e,n=defaultWindow):[n,r,o,u]=e,!n)return noop;Array.isArray(r)||(r=[r]),Array.isArray(o)||(o=[o]);const s=[],w=()=>{s.forEach(m=>m()),s.length=0},g=(m,d,f,x)=>(m.addEventListener(d,f,x),()=>m.removeEventListener(d,f,x)),v=watch(()=>[unrefElement(n),resolveUnref(u)],([m,d])=>{w(),m&&s.push(...r.flatMap(f=>o.map(x=>g(m,f,x,d))))},{immediate:!0,flush:"post"}),y=()=>{v(),w()};return tryOnScopeDispose(y),y}let _iOSWorkaround=!1;function onClickOutside(e,n,r={}){const{window:o=defaultWindow,ignore:u=[],capture:s=!0,detectIframe:w=!1}=r;if(!o)return;isIOS&&!_iOSWorkaround&&(_iOSWorkaround=!0,Array.from(o.document.body.children).forEach(f=>f.addEventListener("click",noop)));let g=!0;const v=f=>u.some(x=>{if(typeof x=="string")return Array.from(o.document.querySelectorAll(x)).some(k=>k===f.target||f.composedPath().includes(k));{const k=unrefElement(x);return k&&(f.target===k||f.composedPath().includes(k))}}),m=[useEventListener(o,"click",f=>{const x=unrefElement(e);if(!(!x||x===f.target||f.composedPath().includes(x))){if(f.detail===0&&(g=!v(f)),!g){g=!0;return}n(f)}},{passive:!0,capture:s}),useEventListener(o,"pointerdown",f=>{const x=unrefElement(e);x&&(g=!f.composedPath().includes(x)&&!v(f))},{passive:!0}),w&&useEventListener(o,"blur",f=>{var x;const k=unrefElement(e);((x=o.document.activeElement)==null?void 0:x.tagName)==="IFRAME"&&!(k!=null&&k.contains(o.document.activeElement))&&n(f)})].filter(Boolean);return()=>m.forEach(f=>f())}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};_global[globalKey];var SwipeDirection;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp$1=Object.defineProperty,__getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(e,n,r)=>n in e?__defProp$1(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,__spreadValues$1=(e,n)=>{for(var r in n||(n={}))__hasOwnProp$1.call(n,r)&&__defNormalProp$1(e,r,n[r]);if(__getOwnPropSymbols$1)for(var r of __getOwnPropSymbols$1(n))__propIsEnum$1.call(n,r)&&__defNormalProp$1(e,r,n[r]);return e};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues$1({linear:identity},_TransitionPresets);const _sfc_main$29={},_hoisted_1$1S={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1H=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.644 4.97046V3.22046H14.144V4.97046H12.394V6.47046H14.144V8.22046H15.644V6.47046H17.394V4.97046H15.644ZM13.2075 14.7785L9.29604 4.99995H7.90332L3.9919 14.7785H3V15.7785H6.2V14.7785H5.60744L6.4074 12.7785H10.792L11.5919 14.7785H11V15.7785H14.2V14.7785H13.2075ZM10.392 11.7785L8.59968 7.29749L6.80738 11.7785H10.392Z",fill:"currentColor"},null,-1),_hoisted_3$1v=[_hoisted_2$1H];function _sfc_render$15(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1S,_hoisted_3$1v)}const IncreaseFont=_export_sfc(_sfc_main$29,[["render",_sfc_render$15]]),_sfc_main$28={},_hoisted_1$1R={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1G=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15 6.5V5H2V6.5H15ZM18 11V9.5H2V11H18ZM12 14V15.5H2V14H12Z",fill:"currentColor"},null,-1),_hoisted_3$1u=[_hoisted_2$1G];function _sfc_render$14(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1R,_hoisted_3$1u)}const TextalignLeft=_export_sfc(_sfc_main$28,[["render",_sfc_render$14]]),FreetextPopup_vue_vue_type_style_index_0_lang="",_hoisted_1$1Q={class:"popup-container"},_hoisted_2$1F={class:"color-picker"},_hoisted_3$1t={class:"preview-container active"},_hoisted_4$x=createBaseVNode("img",{src:_imports_0$2,alt:"colorPicker"},null,-1),_hoisted_5$o={class:"text-font"},_hoisted_6$h=createBaseVNode("div",{class:"divider"},null,-1),_sfc_main$27={__name:"FreetextPopup",emits:["setActiveColor"],setup(e,{emit:n}){const r=useDocumentStore(),o=useViewerStore(),u=ref(null),s=ref(null),w=ref(null),g=ref("top"),v=ref(0),y=ref(!1),m=ref(!1),d=computed(()=>o.isElementOpen("freetextPanel")),f=computed(()=>o.isElementOpen("leftPanel")),x=computed(()=>r.getActiveTool),k=ref(0),P=ref(0),S=ref(null),E=[{label:"Helvetica",value:"Helvetica"},{label:"Times-Roman",value:"Times-Roman"},{label:"Courier",value:"Courier"}],M=reactive({fontName:"Helvetica",fontStyle:"normal",fontWeight:"normal",fontSize:14,color:"rgb(0, 0, 0)",textAlignment:"left"});let T,D=null;onClickOutside(w,()=>{y.value=!1});const I=()=>{o.toggleElement("freetextPanel")},N=()=>{M.fontWeight=M.fontWeight==="bold"?"normal":"bold",te({fontWeight:M.fontWeight})},O=oe=>{let Ee=M.fontSize;oe==="increase"?Ee+=1:oe==="decrease"&&(Ee-=1),Ee=Math.max(6,Ee),Ee=Math.min(72,Ee),M.fontSize=Ee,te({fontSize:M.fontSize})},F=()=>{M.fontStyle=M.fontStyle==="oblique"?"normal":"oblique",te({fontStyle:M.fontStyle})},U=async oe=>{const{rect:Ee,pageNumber:Ae}=oe,ve=core.pageToWindow({x:Ee.left,y:Ee.top},Ae),ke=core.pageToWindow({x:Ee.right,y:Ee.bottom},Ae),Ce=ke.x-ve.x,Pe={x:ve.x+Ce/2+(d.value?130:0),y:ve.y};if(m.value=!0,await nextTick(),!S.value)return;const Me=S.value,Le=Me.offsetWidth,Te=Me.offsetHeight+10;let ye=Math.max(Pe.x-Le/2,0);ye+Le>T.offsetWidth&&(ye=T.offsetWidth-Le);let _e=Pe.y-Te-8-T.scrollTop;g.value="top",_e<=150&&(_e=ke.y+15-T.scrollTop,g.value="bottom"),P.value=ye,k.value=_e},Y=async()=>{if(y.value=!y.value,!y.value)return;const oe=w.value.offsetLeft-u.value.scrollLeft,Ee=w.value.offsetWidth;await nextTick();const Ae=s.value.offsetWidth;let ve=oe+Ee/2-Ae/2;ve+Ae+P.value>T.offsetWidth&&(ve=T.offsetWidth-P.value-Ae),v.value=ve},Q=()=>{m.value=!1},q=oe=>{U(oe)},ne=oe=>{const Ee=oe.annotation;W(oe);const Ae=Ee.rect;U({rect:Ae,pageNumber:Ee.pageIndex+1}),D=oe},J=oe=>{const{annotation:Ee}=oe;D&&D.annotation.name===Ee.name&&W(oe)};watch(()=>f.value,()=>{if(!D)return;const oe=D.annotation;setTimeout(()=>{U({rect:oe.rect,pageNumber:oe.pageIndex+1})},320)}),core.addEvent("annotationDeselected",()=>{D=null,Q()}),core.addEvent("annotationSelectedAttr",ne),core.addEvent("mouseMoving",q),core.addEvent("annotationChanged",J);const re=()=>{m.value&&(m.value=!1)};onMounted(()=>{T=document.querySelector(".document-container"),T&&T.addEventListener("scroll",re),u.value.addEventListener("scroll",()=>{y.value&&(y.value=!1)})}),onUnmounted(()=>{T&&T.removeEventListener("scroll",re)});const X=oe=>{areColorsSimilar(oe,M.color)||(M.color=oe)},j=oe=>{M.color=oe=oe};watch(()=>M.color,oe=>{oe&&te({color:oe})}),watch(()=>M.fontName,oe=>{oe&&te({fontName:oe})}),watch(()=>x.value,(oe,Ee)=>{Ee==="freetext"&&oe!=="freetext"&&d.value&&o.closeElement("freetextPanel")});const Z=oe=>{M.textAlignment=oe,te({textAlignment:M.textAlignment}),y.value=!1},W=oe=>{const Ee=oe.annotation;for(const Ae in M)for(const ve in Ee)Ae===ve&&(M[ve]=Ee[Ae])},te=oe=>{D&&core.setAnnotationStyles(D,oe)},le=oe=>{D&&D.handleDelete()};return(oe,Ee)=>{const Ae=_sfc_main$4l,ve=__unplugin_components_1$4,ke=__unplugin_components_2$c,Ce=__unplugin_components_0$z,Pe=__unplugin_components_4$7,Me=__unplugin_components_5$3,Le=__unplugin_components_6$3,Te=__unplugin_components_19,ye=__unplugin_components_8$4;return withDirectives((openBlock(),createElementBlock("div",{ref_key:"freetextPopupRef",ref:S,class:"freetext-popup popup",style:normalizeStyle({top:`${k.value}px`,left:`${P.value}px`,transform:`translateX(${!unref(isMobileDevice)&&d.value?-130:0}px)`})},[createBaseVNode("div",{ref_key:"popupWrapperRef",ref:u,class:"popup-wrapper"},[withDirectives(createBaseVNode("div",{ref_key:"alignContainerRef",ref:s,class:normalizeClass(["align-container",g.value]),style:normalizeStyle({left:v.value+"px"}),onClick:Ee[3]||(Ee[3]=withModifiers(()=>{},["stop"]))},[createVNode(Ae,{isActive:M.textAlignment==="left",onClick:Ee[0]||(Ee[0]=_e=>Z("left"))},{default:withCtx(()=>[createVNode(TextalignLeft)]),_:1},8,["isActive"]),createVNode(Ae,{isActive:M.textAlignment==="center",onClick:Ee[1]||(Ee[1]=_e=>Z("center"))},{default:withCtx(()=>[createVNode(ve)]),_:1},8,["isActive"]),createVNode(Ae,{isActive:M.textAlignment==="right",onClick:Ee[2]||(Ee[2]=_e=>Z("right"))},{default:withCtx(()=>[createVNode(ke)]),_:1},8,["isActive"])],6),[[vShow,y.value]]),createBaseVNode("div",_hoisted_1$1Q,[createBaseVNode("div",_hoisted_2$1F,[createBaseVNode("div",_hoisted_3$1t,[createBaseVNode("div",{class:"preview",style:normalizeStyle({backgroundColor:M.color})},null,4)]),createVNode(unref(NColorPicker),{to:".freetext-popup",onComplete:X,"onUpdate:value":j,value:M.color,"show-alpha":!1},{label:withCtx(()=>[_hoisted_4$x]),_:1},8,["value"])]),createBaseVNode("div",_hoisted_5$o,[createVNode(unref(NSelect),{"consistent-menu-width":!1,value:M.fontName,"onUpdate:value":Ee[4]||(Ee[4]=_e=>M.fontName=_e),options:E,to:".freetext-popup",class:"text-family"},{arrow:withCtx(()=>[createVNode(Ce)]),_:1},8,["value"])]),createVNode(Ae,{onClick:Ee[5]||(Ee[5]=_e=>O("increase")),class:"button"},{default:withCtx(()=>[createVNode(IncreaseFont)]),_:1}),createVNode(Ae,{onClick:Ee[6]||(Ee[6]=_e=>O("decrease")),class:"button"},{default:withCtx(()=>[createVNode(Pe)]),_:1}),createVNode(Ae,{isActive:M.fontWeight==="bold",onClick:Ee[7]||(Ee[7]=_e=>N())},{default:withCtx(()=>[createVNode(Me)]),_:1},8,["isActive"]),createVNode(Ae,{isActive:M.fontStyle==="oblique",onClick:Ee[8]||(Ee[8]=_e=>F()),class:"button"},{default:withCtx(()=>[createVNode(Le)]),_:1},8,["isActive"]),createBaseVNode("div",{ref_key:"alignRef",ref:w},[createVNode(Ae,{isActive:y.value,class:"alignment",onClick:Y},{default:withCtx(()=>[M.textAlignment==="left"?(openBlock(),createBlock(TextalignLeft,{key:0})):M.textAlignment==="center"?(openBlock(),createBlock(ve,{key:1})):M.textAlignment==="right"?(openBlock(),createBlock(ke,{key:2})):createCommentVNode("",!0)]),_:1},8,["isActive"])],512),_hoisted_6$h,createVNode(Ae,{onClick:I,isActive:d.value,class:"property sidebar-style"},{default:withCtx(()=>[createVNode(Te)]),_:1},8,["isActive"]),createVNode(Ae,{onClick:le,class:"property sidebar-style"},{default:withCtx(()=>[createVNode(ye)]),_:1})])],512)],4)),[[vShow,m.value]])}}},_sfc_main$26={},_hoisted_1$1P={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1E=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6964 3L14.6078 12.7785H15.6004V13.7785H12.4004V12.7785H12.9923L12.1923 10.7785H7.80779L7.00783 12.7785H7.60039V13.7785H4.40039V12.7785H5.39229L9.30371 3H10.6964ZM10.0001 5.29754L11.7924 9.77853H8.20777L10.0001 5.29754ZM5.22219 16.9266L5.08299 16.8542C4.46821 16.565 3.711 16.5891 3.11995 16.9266L2.91898 17.0328C2.78242 17.0994 2.64087 17.1575 2.49529 17.2069C2.12186 17.3336 1.69922 17.177 1.55131 16.8572C1.40339 16.5374 1.5862 16.1755 1.95963 16.0488L2.08133 16.0032C2.16125 15.9703 2.23868 15.9326 2.31312 15.8901L2.4935 15.794C3.59155 15.2495 4.96316 15.2815 6.02902 15.8901L6.16823 15.9624C6.78301 16.2516 7.54022 16.2275 8.13126 15.8901L8.31164 15.794C9.40969 15.2495 10.7813 15.2815 11.8472 15.8901L11.9864 15.9624C12.6011 16.2516 13.3584 16.2275 13.9494 15.8901L14.1298 15.794C15.2278 15.2495 16.5994 15.2815 17.6653 15.8901L17.784 15.9526C17.8647 15.9917 17.9483 16.0256 18.0344 16.054C18.4091 16.1778 18.5956 16.5384 18.451 16.8593C18.3064 17.1802 17.8854 17.34 17.5107 17.2161C17.2824 17.1407 17.0638 17.0438 16.8585 16.9266L16.7193 16.8542C16.1045 16.565 15.3473 16.5891 14.7562 16.9266L14.5759 17.0226C13.4778 17.5671 12.1062 17.5351 11.0403 16.9266L10.9011 16.8542C10.2863 16.565 9.52914 16.5891 8.93809 16.9266L8.75772 17.0226C7.65967 17.5671 6.28806 17.5351 5.22219 16.9266Z",fill:"currentColor"},null,-1),_hoisted_3$1s=[_hoisted_2$1E];function _sfc_render$13(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1P,_hoisted_3$1s)}const __unplugin_components_6$2=_export_sfc(_sfc_main$26,[["render",_sfc_render$13]]),_sfc_main$25={},_hoisted_1$1O={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1D=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.696 3L13.8882 10.6785H18V12.1785H14.5118L15.8006 15.2785H17V16.2785H13V15.2785H14.1738L12.8773 12.1785H7.12195L5.82551 15.2785H7V16.2785H3V15.2785H4.19873L5.48749 12.1785H2V10.6785H6.11109L9.30329 3H10.696ZM9.99965 5.29754L12.25 10.6785H7.74927L9.99965 5.29754Z",fill:"currentColor"},null,-1),_hoisted_3$1r=[_hoisted_2$1D];function _sfc_render$12(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1O,_hoisted_3$1r)}const __unplugin_components_5$2=_export_sfc(_sfc_main$25,[["render",_sfc_render$12]]),_sfc_main$24={},_hoisted_1$1N={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1C=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6964 3L14.6078 12.7785H15.6004V13.7785H12.4004V12.7785H12.9923L12.1923 10.7785H7.80779L7.00783 12.7785H7.60039V13.7785H4.40039V12.7785H5.39229L9.30371 3H10.6964ZM10.0001 5.29754L11.7924 9.77853H8.20777L10.0001 5.29754ZM18 15.2785H2V16.7785H18V15.2785Z",fill:"currentColor"},null,-1),_hoisted_3$1q=[_hoisted_2$1C];function _sfc_render$11(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1N,_hoisted_3$1q)}const __unplugin_components_4$6=_export_sfc(_sfc_main$24,[["render",_sfc_render$11]]),_sfc_main$23={},_hoisted_1$1M={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1B=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 2.79999H2.8L1 17.2H17.2L19 2.79999ZM10.333 3.83661L14.7334 14.8375H15.85V15.9625H12.25V14.8375H12.9159L12.016 12.5875H7.08332L6.18337 14.8375H6.85V15.9625H3.25V14.8375H4.3659L8.76624 3.83661H10.333ZM9.54964 6.42134L11.566 11.4625H7.5333L9.54964 6.42134Z",fill:"currentColor"},null,-1),_hoisted_3$1p=[_hoisted_2$1B];function _sfc_render$10(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1M,_hoisted_3$1p)}const __unplugin_components_3$6=_export_sfc(_sfc_main$23,[["render",_sfc_render$10]]);var toggleSelection=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var n=document.activeElement,r=[],o=0;o<e.rangeCount;o++)r.push(e.getRangeAt(o));switch(n.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":n.blur();break;default:n=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(u){e.addRange(u)}),n&&n.focus()}},deselectCurrent=toggleSelection,clipboardToIE11Formatting={"text/plain":"Text","text/html":"Url",default:"Text"},defaultMessage="Copy to clipboard: #{key}, Enter";function format(e){var n=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,n)}function copy(e,n){var r,o,u,s,w,g,v=!1;n||(n={}),r=n.debug||!1;try{u=deselectCurrent(),s=document.createRange(),w=document.getSelection(),g=document.createElement("span"),g.textContent=e,g.ariaHidden="true",g.style.all="unset",g.style.position="fixed",g.style.top=0,g.style.clip="rect(0, 0, 0, 0)",g.style.whiteSpace="pre",g.style.webkitUserSelect="text",g.style.MozUserSelect="text",g.style.msUserSelect="text",g.style.userSelect="text",g.addEventListener("copy",function(m){if(m.stopPropagation(),n.format)if(m.preventDefault(),typeof m.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var d=clipboardToIE11Formatting[n.format]||clipboardToIE11Formatting.default;window.clipboardData.setData(d,e)}else m.clipboardData.clearData(),m.clipboardData.setData(n.format,e);n.onCopy&&(m.preventDefault(),n.onCopy(m.clipboardData))}),document.body.appendChild(g),s.selectNodeContents(g),w.addRange(s);var y=document.execCommand("copy");if(!y)throw new Error("copy command was unsuccessful");v=!0}catch(m){r&&console.error("unable to copy using execCommand: ",m),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(n.format||"text",e),n.onCopy&&n.onCopy(window.clipboardData),v=!0}catch(d){r&&console.error("unable to copy using clipboardData: ",d),r&&console.error("falling back to prompt"),o=format("message"in n?n.message:defaultMessage),window.prompt(o,e)}}finally{w&&(typeof w.removeRange=="function"?w.removeRange(s):w.removeAllRanges()),g&&document.body.removeChild(g),u()}return v}var copyToClipboard=copy;const TextPopup_vue_vue_type_style_index_0_lang="",_sfc_main$22={__name:"TextPopup",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.getPopupItems("textPopup")),u=ref(!1),s=ref(0),w=ref(0),g=ref(null),v=ref(!0),y=ref(null);let m,d=!1,f,x=0;const k=M=>{var I;if(M==="copy"&&y.value){if(!core.getPermission("allowsCopying")){n.openElement("permissionPasswordDialog");return}copyToClipboard(y.value),u.value=!1,y.value=null;return}const T={tool:M},D=(I=r[M])==null?void 0:I.color;D&&(T.color=D),core.handlePopup({type:"text",tool:T})},P=async M=>{const{show:T,rect:D,text:I}=M;if(u.value=T,y.value=I,await nextTick(),D&&u.value){const N=g.value.children[0];if(!N)return;let O=D.left+(D.right-D.left)/2,F=D.bottom;const U=N.offsetWidth,Y=N.offsetHeight+10,Q=window.innerWidth,q=window.innerHeight;v.value=!0,O-U/2<0?(O=0,v.value=!1):O+U/2>Q&&(O=Q-U,v.value=!1),F+Y>q&&(F=Math.max(0,D.top-Y)),s.value=F,w.value=O}};core.addEvent("showTextPopup",P);const S=()=>{u.value&&(u.value=!1,d=!0),d&&(clearTimeout(f),f=setTimeout(()=>{core.showPopup({type:"textPupop",pageIndex:x}),d=!1},200))};onMounted(()=>{m=document.querySelector(".document-container"),m&&m.addEventListener("scroll",S)}),onUnmounted(()=>{m&&m.removeEventListener("scroll",S)});const E=M=>{x=M.pageNumber-1};return core.addEvent("textSelected",E),(M,T)=>{const D=_sfc_main$2z,I=__unplugin_components_1$5,N=_sfc_main$4l,O=__unplugin_components_3$6,F=__unplugin_components_4$6,U=__unplugin_components_5$2,Y=__unplugin_components_6$2;return openBlock(),createElementBlock("div",{ref_key:"textPopupRef",ref:g},[u.value&&o.value.length?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["text-popup popup",{transform:v.value}]),style:normalizeStyle({top:`${s.value}px`,left:`${w.value}px`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,(Q,q)=>(openBlock(),createElementBlock(Fragment,{key:`${Q.dataElement||new Date}-${q}`},[Q.name==="customButton"&&!Q.hidden?(openBlock(),createBlock(D,{key:0,item:Q,"data-element":Q.dataElement},null,8,["item","data-element"])):Q.type==="copy"&&!Q.hidden?(openBlock(),createBlock(N,{key:1,onClick:T[0]||(T[0]=ne=>k("copy")),title:M.$t("documentEditor.copy"),"data-element":Q.dataElement},{default:withCtx(()=>[createVNode(I)]),_:2},1032,["title","data-element"])):Q.type==="highlight"&&!Q.hidden?(openBlock(),createBlock(N,{key:2,onClick:T[1]||(T[1]=ne=>k("highlight")),title:M.$t("header.highlight"),"data-element":Q.dataElement},{default:withCtx(()=>[createVNode(O)]),_:2},1032,["title","data-element"])):Q.type==="underline"&&!Q.hidden?(openBlock(),createBlock(N,{key:3,onClick:T[2]||(T[2]=ne=>k("underline")),title:M.$t("header.underline"),"data-element":Q.dataElement},{default:withCtx(()=>[createVNode(F)]),_:2},1032,["title","data-element"])):Q.type==="strikeout"&&!Q.hidden?(openBlock(),createBlock(N,{key:4,onClick:T[3]||(T[3]=ne=>k("strikeout")),title:M.$t("header.strikeout"),"data-element":Q.dataElement},{default:withCtx(()=>[createVNode(U)]),_:2},1032,["title","data-element"])):Q.type==="squiggly"&&!Q.hidden?(openBlock(),createBlock(N,{key:5,onClick:T[4]||(T[4]=ne=>k("squiggly")),title:M.$t("header.squiggly"),"data-element":Q.dataElement},{default:withCtx(()=>[createVNode(Y)]),_:2},1032,["title","data-element"])):["spacer","divider"].includes(Q.type)?(openBlock(),createElementBlock("div",{key:6,class:normalizeClass(Q.type)},null,2)):createCommentVNode("",!0)],64))),128))],6)):createCommentVNode("",!0)],512)}}},RedactionConfirmDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1L={key:0,class:"redaction-confirm-dialog"},_hoisted_2$1A=createBaseVNode("br",null,null,-1),_hoisted_3$1o={key:1},_sfc_main$21={__name:"RedactionConfirmDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.getRedactionConfirmDialog),u=computed(()=>o.value>=0),s=()=>{n.setRedactionConfirmDialog(-1)},w=async()=>{const g=o.value===1?"all":null;n.setCommonLoading(!0),s(),await core.applyRedactions(g),r.setToolState(""),n.setActiveToolMode("view"),n.setCommonLoading(!1)};return(g,v)=>{const y=_sfc_main$4e;return u.value?(openBlock(),createElementBlock("div",_hoisted_1$1L,[createVNode(y,{show:u.value,close:s,class:"confirm-dialog"},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(o.value===1?g.$t("documentEditor.save"):g.$t("security.note")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:s},toDisplayString$1(g.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:w},toDisplayString$1(o.value===1?g.$t("security.save"):g.$t("security.exitConfirm")),1)]),default:withCtx(()=>[o.value===1?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("p",null,toDisplayString$1(g.$t("security.saveTip[0]")),1),_hoisted_2$1A,createBaseVNode("p",null,toDisplayString$1(g.$t("security.saveTip[1]")),1)],64)):(openBlock(),createElementBlock("p",_hoisted_3$1o,toDisplayString$1(g.$t("security.exitTip")),1))]),_:1},8,["show"])])):createCommentVNode("",!0)}}},AddDigitalFileDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1K={key:0,class:"add-digital-file-dialog"},_hoisted_2$1z={class:"input-file row"},_hoisted_3$1n={class:"addition"},_hoisted_4$w={class:"icon-file"},_hoisted_5$n={class:"input-pwd row"},_hoisted_6$g=["placeholder"],_hoisted_7$e={key:0,class:"error-text"},dialogName$8="addDigitalFileDialog",_sfc_main$20={__name:"AddDigitalFileDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),u=getCurrentInstance().appContext.app.config.globalProperties.$t,s=computed(()=>n.isElementOpen(dialogName$8)),w=ref(null),g=ref(!1),v=ref(""),y=ref(null);watch(()=>s.value,(P,S)=>{P&&(w.value=null,g.value=!1)});const m=P=>{P&&(document.body.style.overflow=""),n.closeElement(dialogName$8),v.value=""},d=async()=>{if(!w.value)return;const P=await f();if(!P)return;n.setCommonLoading(!0);const S=P.subject,E=new Date,M=E.getFullYear(),T=E.getMonth()+1<10?`0${E.getMonth()+1}`:E.getMonth()+1,D=E.getDate()<10?`0${E.getDate()}`:E.getDate(),I=E.getHours()<10?`0${E.getHours()}`:E.getHours(),N=E.getMinutes()<10?`0${E.getMinutes()}`:E.getMinutes(),O=E.getSeconds()<10?`0${E.getSeconds()}`:E.getSeconds(),F=`${M}.${T}.${D} ${I}:${N}:${O}`,U=`${u("signatures.appearanceDialog.name")}: ${S.CN}
${u("signatures.appearanceDialog.date")}: ${F}`,Y=await core.getSignature({rect:{width:582,height:187,top:0,left:0,right:582,bottom:187},content:U,text:S.CN,isDrowLogo:!0,logoBase64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAAEYCAYAAACHjumMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA9kSURBVHgB7d1vbJXlGcfx635KpUWqJWgiZGgxg2ZG52k1pmqmJdYl6kZwW8S5F4hlKvGFmG3RZWYU4wuX7QUsMdpsSn3j3LJMo3FLJobqMmMWpDUuS4BkdpKAyWAFi4JAz737Oj2Hlv45PX+e+/x57u8nOZ4/Lbw4nvPjuq77fp7HSAy67x9tPSWyzhhJpSNzhbGSsmJa3fNWAeqBtSNiZMSk7YfWyLCkZfD9gSUjgrIYKVEmVKLoUTG22/013QIkjBE7bK3dQdiUruiAyQWLFdlChYJgWBmQdHobQVOcogKm64HjWwkWBM1K3/svXrxNUJCCAqbr/tE20xC96sIlJUDorIy4amYN1cz8ovl+oav3sw02ioYIFyDLSJttiIZu7B1dJ8grb8BoS+TieoCWCDifK/1brUSvTnxHMJc5W6TMG2ekTwDkx1xmTrMGjJZ+ms4CoEDm/vdfuOglwXlmBIwOdHXmQlsEFM7NKI+Z8XQHg9/zzZzBRNFuwgUojs5kdKVVcJ7zAiY7d2kTAEXTldauB0b7BOeca5G0NZKG6GMBUDJtlZrH0ysHB5YcE0ypYFgxAsqmrdKpSLYIMjIVDNULEB+qmElR9r/dAiAWVDGTMgFjTPSoAIiPabhVIIb2CPCjaTy9JPQ2KaI9AvxwbVLwB0NGenpLARA7vlsuYGxkrhUAsUtHUZsELnJraisFQOxcBRP8P96RW0K6QgDEznJM3/xntANQGt0PI4EjYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAmwUCFGjZUiOXXRLJMr0tjTLPFy8y0uJu+ppa3DzxHBM6v/+8lTpgjYyIdbe0fOieDcu4DA7fsXlEykTAYAYNiK+uiGTVigZZ7e5XX94gl7lAITiSy1hpc3dtrqfpds8yvU1qV/+wpNM7ygkbAgaZ4PhGxwIXJg1yi7vX6gQwYlMSmZ0TYfP8gJyx24oNGtPVe7wuSjjEq6O9QW7taJROd6+VCvzofLtfksQa0zd820PbCv19AiYguVC586ZG2p0KSVrAZI3YM3ZNIdUMLVLCESrwoM00ypCb0Wwc7nnotXy/SMAkkAbJHS5QbnXzlM52/hfDB9PqZjSvpt7uz9sy8elLEA2We3oaZX3PQqoVVISxts+FjMwVMgRMAugelN61C+UuV7UAlZYJmV39I65demn6z1iPrGMaLM/+ZJH86ZnFhAuqykh6e+ovz7VNf50Kpg5RsaD2uJlMo3nVPeiY+ioVTB3RuUrv2gvkpZ9fSLigBtlU6q3n+qa+QsDUCd1h+9LWC2XT2iYGuKhZxsijqd07W3PPaZFqnLZDT25sYrkZdcK0ytlTW9yDPn1GBVPD1vdMtEOEC+rJ1CqGT24NompBfZusYvgE1xitWnSFiDkL6pkx5la9J2BqRG6FSHfhAgnQrW0SAVMDchvmOA8LEuXMqXUETJXp8vOTG5tpiZA8kUkRMFW0aa3OW5oESCJjbRsBUyVb7l3IvAXJZsy1BEyFaSv0zCPNLEEjAJYhbyXpMPcXLlw4By7CYAiYSmGlCCHi014BhAtCxSfeM8IFIeNT7xHhgtDxyfdEV4t0oEu4IGR8+j352cYmVosQPALGA91Epxc7A0JHwMRsE0dEA+cQMDHSAxc5tgiYRMDEZOIsdM0CYBIBEwNdMdLlaE65AJyPgImBnomO5WhgJr4VZbrz5kaGusAcCJgy6Nxly3qGusBcCJgy6KVFmLsAcyNgSqT7XThpFJAfAVMCbY3uYe4CzIuAKQEXRgMKQ8AUSVeN7rqJ44yAQhAwRdCqZdNaWiOgUARMEdb3NLKhDigC35YC6WCXAxmB4hAwBeqlNQKKRsAUQKsXBrtA8QiYAlC9AKUhYOZB9QKUjoCZB9ULUDoCJg+qF6A8BEweVC9AeQiYPDrbua4RUA4CZg56zBG7doHy8A2aw709FwiA8nDGpFmsXtHAZV8LdPjUmOz53yHZd+Jo5vEhdxs7czpzDxAws7jndqqXfD4YPSS7/zsig+5GkCAfAmYWDHdnGjv7pbx88J/y8icfZR4DhSBgptFwYbg7iWBBOQiYae68mfYoR0Ol/+MPCBaUjICZhvZIMnOVvn8Nyh43awHKQcBMQXtE1YJ4ETBT3NIR9nFHvzrwXiZggLgQMFOE3B5tdS3RG4f3CRAnAiZLj5wOdXPdvf/4o+wfOypA3FiPzVq1Isy3QisXwgW+EDBZIc5f+v+9h7YIXhEwWasDq2Byq0WATwSMTFyxMaT5i+5zIVxQCQSMhDd/+eHeN9jngoogYESCql5edzOXwyc5AhqVQcCI7n8JY7We1giVRsCI7oExEoKXD35E9YKKImAkjBZJq5c3Du0XoJKCDxjdwRsCPTKawS4qjYBZGkZ7xOwF1RB8wFx2SfLbIz2HLrMXVAMVTAAVzOuHmb2gOgiYAGYwe45xZjpUR/AB09Kc7ApGV49oj1AtwQfM4kWSaPvHjghQLVQwi5JdwezjXC+oIiqYRcl+C/SSrkC1EDDNkmiHubQrqogWKeEt0mdnTgtQLRyLlHBUMKgmAgaANwQMAG8IGADeEDAJt6ypRYBqCT5gxr6wkmQXNV4gQLUEHzAnTkqiUcGgmmiREm45AYMqCj5gDh8ZlyRbvXipANVCi/SFJNr1S5YLUC0MeU8me8i7vLmFOQyqhhbpSFqSbs2lbQJUAwFzNNkVjOomYFAlwQfMpwkf8iqdw7QsWChApVHBBFDBqPtWXC1ApREwbgaT9N286r7Lr6GKQcWx0c759GjyB70aLlQxqDQCxtl/MPkBo6hiUGkEjHPgk+QPepWGy4MrOwWoFALGOXAwjIBRP7j863Jd6zIBKoGAEQ2YMFqknG1XraFVQkUQMDJxTphQlquVHj5Aq4RKIGCy3h06IyHRVum+FdcI4BMBkxXKStJUP159k3xrWbsAvhAwWX8LrILJeeqqblndwjlj4AcBk6VzmJBWk6Z65YbvUcnACwJmir37wgwYpZXMgyuvEyBOBMwUoQ16p3v4yuvlR6tuZAkbsSFgptAKJoQDH/PR1aXf3fBdzoKHWBAw0/z5vbCrGKX7ZN68+T7p+1o3QYOyEDDThN4mTbV2ebv8pvPbmf0ytE0ohenqPR52TzCLv/66RVoWGcGkQyfHZM/oIen/+AM5fGpMgEI0fKXzp32C8yy9OJKrr2wQTGppXCjtLZe4Gc01cl32UihjZ0/LCXcD5rJAMIO2Set7uKbzXPQcv7nrLWlls+/EEdk/dtTdH8081+ChyoEiYGahq0l7952VznbenvnoQFhvay5dKZip8+1+CRlD3jm8O3RWAJSHgJmDLleHvicGKBcBMwcNlz/sYoAJlIOAyeP3BAxQFgImD61i3mRnL1AyAmYeL7z+pQAoDQEzD73yoy5ZAygeAVOAp3eeEgDFI2AKoFUMsxigeARMgXQWw74YoDgETIG0imFfDFAcAqYIui/m8NHwLm8ClIqAKYK2SNtfYeALFIqAKZIeBMmyNVAYAqYEumzNwBeYHwFTAh34vsgOX2BeBEyJXnEDX1olID8Cpgy0SkB+BEwZaJWA/AiYMmmrxHljgNkRMDHQwwjYgAfMRMDEQOcwj/zyC+YxwDQETEx0HvP0zpMCYBIBEyPd5csZ8IBJBEzMfusChqEvMIGA8UAPiGQTHkDAePPEsyflwMFxAUJGwHiiK0qPu5Bh+RohI2A80pUlXb4mZBAqAsYzQgYhI2AqgJBBqAiYCsmFDINfhCSyIscEFZELmXeGuMYSwhAZa48LKkZXl3QJm814CEFkjB0WVJxuxuOwAiRdJGkZEVSFHlbw+LMchY3kiqwRKpgq0gMkNzz1OStMSKSoKS2vCapKh78btn3OXAaJEw0OLHGrSGZQUFW5q0bqOWVomZAUE/tg7Pg7gprw5t/PZFomjsZGEmQCxrVJ29kPUzty+2V0lYlqBvUsEzDaJhmb3iGoKbrKpNXMm++xMQ/16dyhAlQxtSlzrt8XT2ZmM6w0od6cCxiqmNqWmc24lSY256GemOkv3Nh7fMhVMilBzVp2SSS9axfKXTc1Cmpb59v9ErIZR1PbxvTdtEq1Ldc2feeJE8xnUNPMbC92PTB6v5hop6AuUNHUrtArGDPXD7o2He8TK1sFdSMXNJ3tDbJsKaf6qQUETB6ETP266+ZGWd+zUFatIGiqiYCZx429o+vSEu10v9gqqDurVjTI+tsvoKqpEgKmAF0Pj7bJmWi3e9gmqFud7QvkTlfZEDaVQ8AUgZYpOTRsbulYkLmnjfKHgClStprpcw83CBJBh8PaSmngrHb3BE58CJgSZYLmtHS7v2KLGHOtIDFaFplM4GjQdLgKZ3kmgAidUhAwMciFjTFRylqru4DbXOhcIUgUndtotXOZuy1bajLPF7swasne9PHi5omAwgQCJnAdu57nfAiAJ9S9ALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANASP2mADwgoAROS4AfBgJPmCsNcMCIH7W/ocKxsiIAIidNWaYgDGWCgbwwX23CJio6TUBEL9IBoMPmOE1G3UVaVAAxGl4eM1mhrzKWvuOAIiNNXaH3hMwakHTdvbDADGKJroCAkYm2iRrZYcAKJsxMqDtkT4mYHKoYoBYpCO7LfeYgMmiigHKZ6zdlqteMs8F5+nY1T/kKpmUACiOkZGh2x5eOfUlKphpbEP6bloloEjGHrORXTP9ZQJmGi3vrJHHBEDBrI02Tm2NcgiYWQzftnlAe0kBMK/M3KXnoVl3xDODyaPzref6rDFbBcCsNFz23r65b86fC/JK7epfZyS9071VrQJggpu5mHF5bO83Nw/k/TXBvFK7n2szabNbrLQJEDwzrIshs81cZvymoGC0TAiaVi1p2ZGvJZrxRwRFyVQz49Ln3roNAoQgGyzpBU3bs2cfKPyPCkqiQSNp6TbWbHFPrxUgaax9xwXEYCnBkkPAxCAXNpE1KWttyr2rbe6tvUKAeuAqFDdfPO5uw8aYkbSe5TFqeq3UUJnq/zPmsRQ9GquGAAAAAElFTkSuQmCC"});n.setCertSubject(S),n.setDigitalSignaturePreview(Y),n.setCommonLoading(!1),m(),n.openElement("signatureAppearanceDialog")},f=async()=>{const P=new FileReader,E=await new Promise((T,D)=>{P.addEventListener("load",async I=>{T(new Uint8Array(I.target.result))}),P.addEventListener("error",()=>{D("Error reading the local certificate")}),P.readAsArrayBuffer(w.value)}),M=await core.loadCertificates({pkcs12Buffer:E,password:v.value});return g.value=!M,M&&r.setPkcs12({pkcs12Buffer:E,password:v.value}),M},x=()=>{y.value.click()},k=P=>{const S=P.target.files[0],E=S==null?void 0:S.name.split(".").pop().toLowerCase();E!=="pfx"&&E!=="p12"||(w.value=S,y.value.value="")};return(P,S)=>{const E=__unplugin_components_0$t,M=_sfc_main$4e;return s.value?(openBlock(),createElementBlock("div",_hoisted_1$1K,[createVNode(M,{show:s.value,dialogName:dialogName$8,close:!0},{header:withCtx(()=>[createTextVNode(toDisplayString$1(unref(u)("signatures.addDigitalFileDialog.title")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:S[2]||(S[2]=T=>m("cancel"))},toDisplayString$1(unref(u)("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:d},toDisplayString$1(unref(u)("continue")),1)]),default:withCtx(()=>{var T,D;return[createBaseVNode("p",null,toDisplayString$1(unref(u)("signatures.addDigitalFileDialog.desc")),1),createBaseVNode("div",_hoisted_2$1z,[createBaseVNode("span",null,toDisplayString$1(unref(u)("signatures.addDigitalFileDialog.certificateFile")),1),createBaseVNode("div",_hoisted_3$1n,[createBaseVNode("div",{class:"file-input-underbox",onClick:x},[createBaseVNode("span",{class:normalizeClass({uploaded:(T=w.value)==null?void 0:T.name})},toDisplayString$1(((D=w.value)==null?void 0:D.name)||unref(u)("signatures.addDigitalFileDialog.uploadFile")),3),createBaseVNode("span",_hoisted_4$w,[createVNode(E)])]),createBaseVNode("input",{ref_key:"uploadFileEl",ref:y,type:"file",onChange:k,accept:".pfx,.p12",name:"digital-signature"},null,544)])]),createBaseVNode("div",_hoisted_5$n,[createBaseVNode("span",null,toDisplayString$1(unref(u)("signatures.addDigitalFileDialog.password")),1),createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":S[0]||(S[0]=I=>v.value=I),type:"password",placeholder:unref(u)("signatures.addDigitalFileDialog.enterPassword"),onInput:S[1]||(S[1]=I=>g.value&&(g.value=!1)),name:"digital-signature"},null,40,_hoisted_6$g),[[vModelText,v.value]]),g.value?(openBlock(),createElementBlock("p",_hoisted_7$e,toDisplayString$1(unref(u)("signatures.addDigitalFileDialog.invalidPassword")),1)):createCommentVNode("",!0)])])]}),_:1},8,["show"])])):createCommentVNode("",!0)}}},_hoisted_1$1J={key:0,class:"delete-page-popup"},dialogName$7="deleteConfirmDialog",_sfc_main$1$={__name:"DeleteSignatureDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$7)),u=computed(()=>r.getSelectedSignature),s=()=>{n.closeElement(dialogName$7),r.setSelectedSignature(null)},w=()=>{core.deleteSignature(JSON.parse(JSON.stringify(u.value))),s(),n.setSignatureVerify(0)};return(g,v)=>{const y=__unplugin_components_2$f,m=_sfc_main$4e;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$1J,[createVNode(m,{show:o.value,dialogName:dialogName$7},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:s},toDisplayString$1(g.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:w},toDisplayString$1(g.$t("ok")),1)]),default:withCtx(()=>[createVNode(y),createBaseVNode("p",null,toDisplayString$1(g.$t("signatures.deleteConfirm")),1)]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$1_={},_hoisted_1$1I={width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1y=createBaseVNode("path",{d:"M17.5 10.5C17.5 14.6421 14.1421 18 10 18C5.85786 18 2.5 14.6421 2.5 10.5C2.5 6.35786 5.85786 3 10 3C14.1421 3 17.5 6.35786 17.5 10.5Z",fill:"#FF6666"},null,-1),_hoisted_3$1m=createBaseVNode("path",{d:"M12 8.5L8 12.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"square","stroke-linejoin":"round"},null,-1),_hoisted_4$v=createBaseVNode("path",{d:"M8 8.5L12 12.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"square","stroke-linejoin":"round"},null,-1),_hoisted_5$m=[_hoisted_2$1y,_hoisted_3$1m,_hoisted_4$v];function _sfc_render$$(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1I,_hoisted_5$m)}const __unplugin_components_1$3=_export_sfc(_sfc_main$1_,[["render",_sfc_render$$]]),_sfc_main$1Z={},_hoisted_1$1H={width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1x=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 18C14.1421 18 17.5 14.6421 17.5 10.5C17.5 6.35786 14.1421 3 10 3C5.85786 3 2.5 6.35786 2.5 10.5C2.5 14.6421 5.85786 18 10 18ZM9.74283 13.4801L13.9095 8.48014L12.7572 7.51986L9.11627 11.8889L7.197 9.96967L6.13634 11.0303L8.63634 13.5303L9.21707 14.1111L9.74283 13.4801Z",fill:"#3CCD75"},null,-1),_hoisted_3$1l=[_hoisted_2$1x];function _sfc_render$_(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1H,_hoisted_3$1l)}const __unplugin_components_0$h=_export_sfc(_sfc_main$1Z,[["render",_sfc_render$_]]),CertificationViewerDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1G={key:0,class:"certification-details-dialog"},_hoisted_2$1w={class:"title"},_hoisted_3$1k={class:"desc"},_hoisted_4$u={class:"container"},_hoisted_5$l={class:"left"},_hoisted_6$f=["onFocus"],_hoisted_7$d={class:"right"},_hoisted_8$a={class:"tabs"},_hoisted_9$a={class:"panel"},_hoisted_10$a={class:"summary"},_hoisted_11$7={class:"title"},_hoisted_12$6={class:"info"},_hoisted_13$6={class:"abstracts"},_hoisted_14$6=createBaseVNode("span",null,"Digital Signature, Non-Repudiation",-1),_hoisted_15$6={class:"details"},_hoisted_16$5={class:"trust"},_hoisted_17$4={class:"trust-button"},dialogName$6="certificateViewerDialog",_sfc_main$1Y={__name:"CertificationViewerDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$6)),u=computed(()=>r.getSelectedSignature),s=computed(()=>u.value.signerList[0].certificateList[g.value]),w=ref(1),g=ref(0),v=()=>{n.closeElement(dialogName$6)},y=d=>{let f=d.slice(0,4),x=d.slice(4,6),k=d.slice(6,8),P=d.slice(8,10),S=d.slice(10,12),E=d.slice(12,14);return`${f}/${x}/${k} ${P}:${S}:${E}`},m=()=>{if(s.value.isTrusted)return;const d=core.addToTrustedCertificateLists(g.value);s.value.isTrusted=!!d,d&&r.setTrustedCertificateLists(d)};return(d,f)=>{const x=__unplugin_components_0$h,k=__unplugin_components_1$3,P=_sfc_main$4e;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$1G,[createVNode(P,{show:o.value,dialogName:dialogName$6},{header:withCtx(()=>[createBaseVNode("p",_hoisted_2$1w,toDisplayString$1(d.$t("signatures.certificateViewerDialog.title")),1),createBaseVNode("p",_hoisted_3$1k,toDisplayString$1(d.$t("signatures.certificateViewerDialog.title")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button blue",onClick:v},toDisplayString$1(d.$t("signatures.certificateViewerDialog.done")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_4$u,[createBaseVNode("div",_hoisted_5$l,[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.value.signerList,(S,E)=>(openBlock(),createElementBlock("p",{key:E,class:normalizeClass({highlighted:g.value===E}),onFocus:M=>g.value=E,onBlur:f[0]||(f[0]=M=>g.value=0),tabindex:"-1"},toDisplayString$1(S.certificateList[0].subject.CN),43,_hoisted_6$f))),128))]),createBaseVNode("div",_hoisted_7$d,[createBaseVNode("div",_hoisted_8$a,[createBaseVNode("div",{onClick:f[1]||(f[1]=S=>w.value=1),class:normalizeClass({active:w.value===1})},toDisplayString$1(d.$t("signatures.certificateViewerDialog.abstracts")),3),createBaseVNode("div",{onClick:f[2]||(f[2]=S=>w.value=2),class:normalizeClass({active:w.value===2})},toDisplayString$1(d.$t("signatures.certificateViewerDialog.details")),3),createBaseVNode("div",{onClick:f[3]||(f[3]=S=>w.value=3),class:normalizeClass({active:w.value===3})},toDisplayString$1(d.$t("signatures.certificateViewerDialog.trust")),3)]),createBaseVNode("div",_hoisted_9$a,[createBaseVNode("div",_hoisted_10$a,[createBaseVNode("div",_hoisted_11$7,toDisplayString$1(w.value===3?d.$t("signatures.certificateViewerDialog.sign"):d.$t("signatures.certificateViewerDialog.summary")),1),createBaseVNode("div",_hoisted_12$6,[withDirectives(createBaseVNode("div",_hoisted_13$6,[createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.issuedTo"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.issuer.CN)+" <"+toDisplayString$1(s.value.issuer.email)+">",1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.issuer"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.issuer.CN),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.validFrom"))+" ",1),createBaseVNode("span",null,toDisplayString$1(y(s.value.validDateStart)),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.validTo"))+" ",1),createBaseVNode("span",null,toDisplayString$1(y(s.value.validDateEnd)),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.intendedUsage"))+" ",1),_hoisted_14$6])],512),[[vShow,w.value===1]]),withDirectives(createBaseVNode("div",_hoisted_15$6,[createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.version"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.version),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.algorithm"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.signAlgOidType)+" ("+toDisplayString$1(s.value.signAlgOid)+")",1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.subject"))+" ",1),createBaseVNode("span",null,"C="+toDisplayString$1(s.value.subject.C)+",ST="+toDisplayString$1(s.value.subject.ST)+",L="+toDisplayString$1(s.value.subject.L)+",O="+toDisplayString$1(s.value.subject.O)+",OU="+toDisplayString$1(s.value.subject.OU)+",CN="+toDisplayString$1(s.value.subject.CN)+",emailAddress="+toDisplayString$1(s.value.subject.email),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.issuer"))+" ",1),createBaseVNode("span",null,"C="+toDisplayString$1(s.value.issuer.C)+",ST="+toDisplayString$1(s.value.issuer.ST)+",L="+toDisplayString$1(s.value.issuer.L)+",O="+toDisplayString$1(s.value.issuer.O)+",OU="+toDisplayString$1(s.value.issuer.OU)+",CN="+toDisplayString$1(s.value.issuer.CN)+",emailAddress="+toDisplayString$1(s.value.issuer.email),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.serialNumber"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.serialNumber),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.validFrom"))+" ",1),createBaseVNode("span",null,toDisplayString$1(y(s.value.validDateStart)),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.validTo"))+" ",1),createBaseVNode("span",null,toDisplayString$1(y(s.value.validDateEnd)),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.certificatePolicy"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.certificatePolicies[0]),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.crlDistributionPoints"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.CRLDistributionPoints),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.issuerInfoAccess"))+" ",1),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value.sccessInfo,(S,E)=>(openBlock(),createElementBlock("span",{key:E},toDisplayString$1(S.Key)+"="+toDisplayString$1(S.AccessInfo)+toDisplayString$1(E===s.value.sccessInfo.length-1?"":","),1))),128))]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.issuerKeyIdentifier"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.authorityKeyIdentifier),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.subjectKeyIdentifier"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.subjectKeyIdentifier),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.basicConstraints"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.basicConstraints),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.keyUsage"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.keyUsage),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.publicKey"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.publicKey),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.X509"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.X509Data),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.SHA1Digest"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.SHA1Digest),1)]),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(d.$t("signatures.certificateViewerDialog.MD5Digest"))+" ",1),createBaseVNode("span",null,toDisplayString$1(s.value.MD5Digest),1)])],512),[[vShow,w.value===2]]),withDirectives(createBaseVNode("div",_hoisted_16$5,[createBaseVNode("p",null,[s.value.isTrusted?(openBlock(),createBlock(x,{key:0})):(openBlock(),createBlock(k,{key:1})),createBaseVNode("span",null,toDisplayString$1(d.$t("signatures.certificateViewerDialog.sign")),1)]),createBaseVNode("p",null,[s.value.isTrusted?(openBlock(),createBlock(x,{key:0})):(openBlock(),createBlock(k,{key:1})),createBaseVNode("span",null,toDisplayString$1(d.$t("signatures.certificateViewerDialog.certify")),1)])],512),[[vShow,w.value===3]])]),withDirectives(createBaseVNode("div",_hoisted_17$4,[createBaseVNode("div",{class:normalizeClass(s.value.isTrusted&&"disabled"),onClick:m},toDisplayString$1(d.$t("signatures.certificateViewerDialog.addToTrust")),3)],512),[[vShow,w.value===3]])])])])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$1X={},_hoisted_1$1F={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1v=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.15125 14.4995C8.30837 14.4995 9.2063 13.7913 9.7756 12.6064H16.4175C16.6582 12.6064 16.8433 12.4074 16.8433 12.1713C16.8433 11.9353 16.6582 11.7409 16.4175 11.7409H10.1089C10.3264 11.0327 10.4514 10.2135 10.4838 9.31556C10.7754 9.25076 11.0762 9.21836 11.3863 9.21836C11.4928 9.21836 11.5483 9.26465 11.5483 9.3387C11.5483 9.68584 11.3169 9.98207 11.3169 10.431C11.3169 10.8476 11.6224 11.1207 12.0528 11.1207C13.0572 11.1207 14.256 9.5655 14.5568 9.5655C14.816 9.5655 14.5661 10.9309 15.7464 10.9309C15.9824 10.9309 16.2601 10.8661 16.4684 10.7273C16.6212 10.6208 16.7276 10.4681 16.7276 10.269C16.7276 10.0098 16.5517 9.77841 16.2786 9.77841C16.1305 9.77841 15.9963 9.88024 15.8852 9.88024C15.5288 9.88024 15.876 8.38986 14.8346 8.38986C13.9783 8.38986 12.8628 9.75527 12.599 9.75527C12.5573 9.75527 12.5342 9.73676 12.5342 9.69047C12.5342 9.5655 12.636 9.36185 12.636 9.13968C12.636 8.54723 12.2102 8.20009 11.5205 8.20009C11.1595 8.20009 10.8078 8.23249 10.4699 8.29266C10.2986 5.78865 9.0443 3.93262 7.26696 3.93262C5.91544 3.93262 4.97122 4.96014 4.97122 6.39035C4.97122 7.95941 5.96635 9.26465 7.04479 10.1209C6.54028 10.6301 6.14686 11.1901 5.90155 11.7409H2.856C2.61532 11.7409 2.43018 11.9353 2.43018 12.1713C2.43018 12.4028 2.61994 12.6064 2.856 12.6064H5.64235C5.62847 12.7221 5.61921 12.8378 5.61921 12.9443C5.61921 13.8978 6.15612 14.4995 7.15125 14.4995ZM7.81306 9.45897C6.93828 8.78784 5.99406 7.74643 5.99406 6.38565C5.99406 5.55715 6.51708 4.95544 7.27153 4.95544C8.50271 4.95544 9.38213 6.50599 9.46544 8.56567C8.85911 8.78784 8.29906 9.09795 7.81306 9.45897ZM3.15682 10.9678L3.67521 10.4494L4.1936 10.9631C4.35097 11.1159 4.5824 11.1159 4.73977 10.9631C4.89251 10.8104 4.89251 10.5697 4.73977 10.417L4.22137 9.90321L4.73977 9.38482C4.89251 9.23208 4.89251 8.99602 4.73977 8.84328C4.58703 8.68591 4.34634 8.68591 4.1936 8.83865L3.67521 9.35705L3.15682 8.84328C2.99945 8.69054 2.7634 8.69054 2.61066 8.84328C2.45329 8.99139 2.45329 9.2367 2.61066 9.38945L3.12442 9.90321L2.61066 10.417C2.45329 10.5743 2.45792 10.8058 2.61066 10.9631C2.7634 11.1205 3.00408 11.1159 3.15682 10.9678ZM9.01653 11.7409H7.07256C7.28084 11.3984 7.5678 11.0374 7.91957 10.7041C7.99826 10.7504 8.07231 10.7875 8.14637 10.8245C8.23894 10.8754 8.32688 10.8939 8.41482 10.8939C8.67402 10.8939 8.89156 10.7041 8.89156 10.4542C8.89156 10.3153 8.84064 10.1858 8.71567 10.0747C8.94247 9.92193 9.18315 9.78307 9.44235 9.66736C9.38218 10.4496 9.23406 11.1531 9.01653 11.7409ZM7.27156 13.481C6.88739 13.481 6.69299 13.231 6.69299 12.8423C6.69299 12.7682 6.70225 12.6895 6.71614 12.6062H8.59068C8.22965 13.1616 7.77606 13.481 7.27156 13.481Z",fill:"currentColor"},null,-1),_hoisted_3$1j=createBaseVNode("rect",{x:"10.625",y:"10.625",width:"7.5",height:"7.5",rx:"3.64583",fill:"#FFA400"},null,-1),_hoisted_4$t=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.625 15.247V15.3482H13.9881V15.247C13.9881 15.0268 14.0238 14.8363 14.1071 14.6815C14.1845 14.5149 14.4107 14.2708 14.7798 13.9435L14.881 13.8304C14.9881 13.6935 15.0476 13.5506 15.0476 13.3958C15.0476 13.1875 14.9881 13.0268 14.875 12.9077C14.756 12.7887 14.5833 12.7292 14.369 12.7292C14.1012 12.7292 13.9048 12.8125 13.7857 12.9851C13.6786 13.128 13.625 13.3304 13.625 13.5923H13C13 13.1577 13.125 12.8185 13.375 12.5685C13.625 12.3125 13.9702 12.1875 14.4107 12.1875C14.7917 12.1875 15.1012 12.2887 15.3393 12.503C15.5774 12.7113 15.6964 12.997 15.6964 13.3542C15.6964 13.6458 15.619 13.8899 15.4702 14.0804C15.4167 14.1458 15.25 14.3006 14.9702 14.5446C14.8571 14.6399 14.7738 14.747 14.7202 14.8542C14.6548 14.9732 14.625 15.1042 14.625 15.247ZM14.6131 16.4017C14.5298 16.4791 14.4227 16.5207 14.3036 16.5207C14.1846 16.5207 14.0774 16.4791 13.9941 16.3957C13.9108 16.3124 13.8691 16.2112 13.8691 16.0922C13.8691 15.9672 13.9108 15.866 13.9941 15.7886C14.0774 15.7053 14.1846 15.6696 14.3036 15.6696C14.4286 15.6696 14.5358 15.7053 14.6191 15.7886C14.7024 15.866 14.7441 15.9672 14.7441 16.0922C14.7441 16.2172 14.6965 16.3184 14.6131 16.4017Z",fill:"white"},null,-1),_hoisted_5$k=[_hoisted_2$1v,_hoisted_3$1j,_hoisted_4$t];function _sfc_render$Z(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1F,_hoisted_5$k)}const __unplugin_components_2$b=_export_sfc(_sfc_main$1X,[["render",_sfc_render$Z]]),_sfc_main$1W={},_hoisted_1$1E={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1u=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.15125 14.4995C8.30837 14.4995 9.2063 13.7913 9.7756 12.6064H16.4175C16.6582 12.6064 16.8433 12.4074 16.8433 12.1713C16.8433 11.9353 16.6582 11.7409 16.4175 11.7409H10.1089C10.3264 11.0327 10.4514 10.2135 10.4838 9.31556C10.7754 9.25076 11.0762 9.21836 11.3863 9.21836C11.4928 9.21836 11.5483 9.26465 11.5483 9.3387C11.5483 9.68584 11.3169 9.98207 11.3169 10.431C11.3169 10.8476 11.6224 11.1207 12.0528 11.1207C13.0572 11.1207 14.256 9.5655 14.5568 9.5655C14.816 9.5655 14.5661 10.9309 15.7464 10.9309C15.9824 10.9309 16.2601 10.8661 16.4684 10.7273C16.6212 10.6208 16.7276 10.4681 16.7276 10.269C16.7276 10.0098 16.5517 9.77841 16.2786 9.77841C16.1305 9.77841 15.9963 9.88024 15.8852 9.88024C15.5288 9.88024 15.876 8.38986 14.8346 8.38986C13.9783 8.38986 12.8628 9.75527 12.599 9.75527C12.5573 9.75527 12.5342 9.73676 12.5342 9.69047C12.5342 9.5655 12.636 9.36185 12.636 9.13968C12.636 8.54723 12.2102 8.20009 11.5205 8.20009C11.1595 8.20009 10.8078 8.23249 10.4699 8.29266C10.2986 5.78865 9.0443 3.93262 7.26696 3.93262C5.91544 3.93262 4.97122 4.96014 4.97122 6.39035C4.97122 7.95941 5.96635 9.26465 7.04479 10.1209C6.54028 10.6301 6.14686 11.1901 5.90155 11.7409H2.856C2.61532 11.7409 2.43018 11.9353 2.43018 12.1713C2.43018 12.4028 2.61994 12.6064 2.856 12.6064H5.64235C5.62847 12.7221 5.61921 12.8378 5.61921 12.9443C5.61921 13.8978 6.15612 14.4995 7.15125 14.4995ZM7.81306 9.45897C6.93828 8.78784 5.99406 7.74643 5.99406 6.38565C5.99406 5.55715 6.51708 4.95544 7.27153 4.95544C8.50271 4.95544 9.38213 6.50599 9.46544 8.56567C8.85911 8.78784 8.29906 9.09795 7.81306 9.45897ZM3.15682 10.9678L3.67521 10.4494L4.1936 10.9631C4.35097 11.1159 4.5824 11.1159 4.73977 10.9631C4.89251 10.8104 4.89251 10.5697 4.73977 10.417L4.22137 9.90321L4.73977 9.38482C4.89251 9.23208 4.89251 8.99602 4.73977 8.84328C4.58703 8.68591 4.34634 8.68591 4.1936 8.83865L3.67521 9.35705L3.15682 8.84328C2.99945 8.69054 2.7634 8.69054 2.61066 8.84328C2.45329 8.99139 2.45329 9.2367 2.61066 9.38945L3.12442 9.90321L2.61066 10.417C2.45329 10.5743 2.45792 10.8058 2.61066 10.9631C2.7634 11.1205 3.00408 11.1159 3.15682 10.9678ZM9.01653 11.7409H7.07256C7.28084 11.3984 7.5678 11.0374 7.91957 10.7041C7.99826 10.7504 8.07231 10.7875 8.14637 10.8245C8.23894 10.8754 8.32688 10.8939 8.41482 10.8939C8.67402 10.8939 8.89156 10.7041 8.89156 10.4542C8.89156 10.3153 8.84064 10.1858 8.71567 10.0747C8.94247 9.92193 9.18315 9.78307 9.44235 9.66736C9.38218 10.4496 9.23406 11.1531 9.01653 11.7409ZM7.27156 13.481C6.88739 13.481 6.69299 13.231 6.69299 12.8423C6.69299 12.7682 6.70225 12.6895 6.71614 12.6062H8.59068C8.22965 13.1616 7.77606 13.481 7.27156 13.481Z",fill:"currentColor"},null,-1),_hoisted_3$1i=createBaseVNode("rect",{x:"10.625",y:"10.625",width:"7.5",height:"7.5",rx:"3.64583",fill:"#BF3030"},null,-1),_hoisted_4$s=createBaseVNode("path",{d:"M15.625 13.125L13.125 15.625",stroke:"white","stroke-width":"0.9375","stroke-linecap":"square","stroke-linejoin":"round"},null,-1),_hoisted_5$j=createBaseVNode("path",{d:"M13.125 13.125L15.625 15.625",stroke:"white","stroke-width":"0.9375","stroke-linecap":"square","stroke-linejoin":"round"},null,-1),_hoisted_6$e=[_hoisted_2$1u,_hoisted_3$1i,_hoisted_4$s,_hoisted_5$j];function _sfc_render$Y(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1E,_hoisted_6$e)}const __unplugin_components_1$2=_export_sfc(_sfc_main$1W,[["render",_sfc_render$Y]]),_sfc_main$1V={},_hoisted_1$1D={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1t=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.15125 14.4995C8.30837 14.4995 9.2063 13.7913 9.7756 12.6064H16.4175C16.6582 12.6064 16.8433 12.4074 16.8433 12.1713C16.8433 11.9353 16.6582 11.7409 16.4175 11.7409H10.1089C10.3264 11.0327 10.4514 10.2135 10.4838 9.31556C10.7754 9.25076 11.0762 9.21836 11.3863 9.21836C11.4928 9.21836 11.5483 9.26465 11.5483 9.3387C11.5483 9.68584 11.3169 9.98207 11.3169 10.431C11.3169 10.8476 11.6224 11.1207 12.0528 11.1207C13.0572 11.1207 14.256 9.5655 14.5568 9.5655C14.816 9.5655 14.5661 10.9309 15.7464 10.9309C15.9824 10.9309 16.2601 10.8661 16.4684 10.7273C16.6212 10.6208 16.7276 10.4681 16.7276 10.269C16.7276 10.0098 16.5517 9.77841 16.2786 9.77841C16.1305 9.77841 15.9963 9.88024 15.8852 9.88024C15.5288 9.88024 15.876 8.38986 14.8346 8.38986C13.9783 8.38986 12.8628 9.75527 12.599 9.75527C12.5573 9.75527 12.5342 9.73676 12.5342 9.69047C12.5342 9.5655 12.636 9.36185 12.636 9.13968C12.636 8.54723 12.2102 8.20009 11.5205 8.20009C11.1595 8.20009 10.8078 8.23249 10.4699 8.29266C10.2986 5.78865 9.0443 3.93262 7.26696 3.93262C5.91544 3.93262 4.97122 4.96014 4.97122 6.39035C4.97122 7.95941 5.96635 9.26465 7.04479 10.1209C6.54028 10.6301 6.14686 11.1901 5.90155 11.7409H2.856C2.61532 11.7409 2.43018 11.9353 2.43018 12.1713C2.43018 12.4028 2.61994 12.6064 2.856 12.6064H5.64235C5.62847 12.7221 5.61921 12.8378 5.61921 12.9443C5.61921 13.8978 6.15612 14.4995 7.15125 14.4995ZM7.81306 9.45897C6.93828 8.78784 5.99406 7.74643 5.99406 6.38565C5.99406 5.55715 6.51708 4.95544 7.27153 4.95544C8.50271 4.95544 9.38213 6.50599 9.46544 8.56567C8.85911 8.78784 8.29906 9.09795 7.81306 9.45897ZM3.15682 10.9678L3.67521 10.4494L4.1936 10.9631C4.35097 11.1159 4.5824 11.1159 4.73977 10.9631C4.89251 10.8104 4.89251 10.5697 4.73977 10.417L4.22137 9.90321L4.73977 9.38482C4.89251 9.23208 4.89251 8.99602 4.73977 8.84328C4.58703 8.68591 4.34634 8.68591 4.1936 8.83865L3.67521 9.35705L3.15682 8.84328C2.99945 8.69054 2.7634 8.69054 2.61066 8.84328C2.45329 8.99139 2.45329 9.2367 2.61066 9.38945L3.12442 9.90321L2.61066 10.417C2.45329 10.5743 2.45792 10.8058 2.61066 10.9631C2.7634 11.1205 3.00408 11.1159 3.15682 10.9678ZM9.01653 11.7409H7.07256C7.28084 11.3984 7.5678 11.0374 7.91957 10.7041C7.99826 10.7504 8.07231 10.7875 8.14637 10.8245C8.23894 10.8754 8.32688 10.8939 8.41482 10.8939C8.67402 10.8939 8.89156 10.7041 8.89156 10.4542C8.89156 10.3153 8.84064 10.1858 8.71567 10.0747C8.94247 9.92193 9.18315 9.78307 9.44235 9.66736C9.38218 10.4496 9.23406 11.1531 9.01653 11.7409ZM7.27156 13.481C6.88739 13.481 6.69299 13.231 6.69299 12.8423C6.69299 12.7682 6.70225 12.6895 6.71614 12.6062H8.59068C8.22965 13.1616 7.77606 13.481 7.27156 13.481Z",fill:"currentColor"},null,-1),_hoisted_3$1h=createBaseVNode("rect",{x:"10.625",y:"10.625",width:"7.5",height:"7.5",rx:"3.64583",fill:"#30BF83"},null,-1),_hoisted_4$r=createBaseVNode("path",{d:"M12.8125 14.6875L14.2969 15.625L16.25 13.125",stroke:"white","stroke-width":"0.9375"},null,-1),_hoisted_5$i=[_hoisted_2$1t,_hoisted_3$1h,_hoisted_4$r];function _sfc_render$X(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1D,_hoisted_5$i)}const __unplugin_components_0$g=_export_sfc(_sfc_main$1V,[["render",_sfc_render$X]]),SignatureDetailsDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1C={key:0,class:"signature-details-dialog"},_hoisted_2$1s={class:"info"},_hoisted_3$1g={class:"title"},_hoisted_4$q={class:"desc"},_hoisted_5$h={class:"summary"},_hoisted_6$d={class:"title"},_hoisted_7$c=createBaseVNode("div",{class:"line-left"},null,-1),_hoisted_8$9=createBaseVNode("div",{class:"line-right"},null,-1),_hoisted_9$9={class:"content"},_hoisted_10$9={key:3},dialogName$5="signatureDetailsDialog",_sfc_main$1U={__name:"SignatureDetailsDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$5)),u=computed(()=>r.getSelectedSignature),s=computed(()=>{const v=u.value.signerList[0].certificateList[0].validDateEnd,y=v.substring(0,4),m=v.substring(4,6),d=v.substring(6,8),f=v.substring(8,10),x=v.substring(10,12),k=v.substring(12,14),P=v.substring(14);return new Date(`${y}-${m}-${d}T${f}:${x}:${k}${P}`)<new Date}),w=()=>{n.closeElement(dialogName$5)},g=()=>{w(),n.openElement("certificateViewerDialog")};return(v,y)=>{const m=__unplugin_components_0$w,d=__unplugin_components_0$g,f=__unplugin_components_1$2,x=__unplugin_components_2$b,k=_sfc_main$4e;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$1C,[createVNode(k,{show:o.value,dialogName:dialogName$5},{header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.detailsDialog.title")),1),createVNode(m,{class:"close",onClick:w})]),footer:withCtx(()=>[createBaseVNode("div",{class:"view-button",onClick:g},toDisplayString$1(v.$t("signatures.detailsDialog.viewCertificateDetails")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$1s,[u.value.signerList[0].isCertTrusted&&u.value.signerList[0].isSignVerified?(openBlock(),createBlock(d,{key:0})):u.value.signerList[0].isCertTrusted||u.value.signerList[0].isSignVerified?(openBlock(),createBlock(f,{key:1})):(openBlock(),createBlock(x,{key:2})),createBaseVNode("div",null,[createBaseVNode("p",_hoisted_3$1g,toDisplayString$1(v.$t("signatures.detailsDialog.signBy"))+' "'+toDisplayString$1(u.value.signerList[0].certificateList[0].subject.CN)+toDisplayString$1(u.value.signerList[0].certificateList[0].subject.email?"<"+u.value.signerList[0].certificateList[0].subject.email+">":"")+'"',1),createBaseVNode("p",_hoisted_4$q,toDisplayString$1(v.$t("signatures.detailsDialog.signingTime"))+" "+toDisplayString$1(unref(dayjs)(u.value.date).format("YYYY-MM-DD HH:mm:ss")),1)])]),createBaseVNode("div",_hoisted_5$h,[createBaseVNode("div",_hoisted_6$d,[_hoisted_7$c,createBaseVNode("span",null,toDisplayString$1(v.$t("signatures.detailsDialog.validitySummary")),1),_hoisted_8$9]),createBaseVNode("div",_hoisted_9$9,[!u.value.signerList[0].isCertTrusted&&!u.value.signerList[0].isSignVerified?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.detailsDialog.invalidIdentity")),1),createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.detailsDialog.invalidSignature")),1),createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.detailsDialog.alteredDoc")),1)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[u.value.signerList[0].isCertTrusted&&u.value.signerList[0].isSignVerified?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.detailsDialog.validIdentity")),1),createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.detailsDialog.validSignature")),1)],64)):!u.value.signerList[0].isCertTrusted&&u.value.signerList[0].isSignVerified?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.detailsDialog.invalidIdentity")),1),createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.detailsDialog.validSignature")),1),createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.detailsDialog.unknownIdentity")),1)],64)):u.value.signerList[0].isCertTrusted&&!u.value.signerList[0].isSignVerified?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.detailsDialog.validIdentity")),1),createBaseVNode("p",null,toDisplayString$1(v.$t("signatures.detailsDialog.invalidSignature")),1)],64)):createCommentVNode("",!0),s.value?(openBlock(),createElementBlock("p",_hoisted_10$9,toDisplayString$1(v.$t("signatures.detailsDialog.expiredCertificate")),1)):createCommentVNode("",!0),createBaseVNode("p",null,toDisplayString$1(u.value.signerList[0].diffInfo.length?v.$t("signatures.detailsDialog.alteredDoc"):v.$t("signatures.detailsDialog.notModifiedDoc")),1)],64))])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},DigitalKeyboardCreatePanel_vue_vue_type_style_index_0_lang="",_hoisted_1$1B={class:"paint-container"},_hoisted_2$1r={class:"keyboard-paint",style:{}},_hoisted_3$1f=["placeholder"],dialogName$4="digitalKeyboardCreatePanel",_sfc_main$1T={__name:"DigitalKeyboardCreatePanel",props:["text"],emits:["modifyText"],setup(e,{emit:n}){const{text:r}=e,o=n,u=ref(r),s=useViewerStore();computed(()=>s.isElementOpen(dialogName$4));const w=()=>{s.closeElement(dialogName$4),g()},g=()=>{u.value=""},v=()=>{o("modifyText",u.value),w()};return(y,m)=>{const d=__unplugin_components_0$w,f=_sfc_main$4e;return openBlock(),createBlock(f,{class:"digital-signature-dialog keyboard",show:!0,dialogName:dialogName$4},{header:withCtx(()=>[createVNode(d,{class:"close",onClick:w})]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:g},toDisplayString$1(y.$t("signatures.clear")),1),createBaseVNode("div",{class:"rect-button white",onClick:w},toDisplayString$1(y.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:v},toDisplayString$1(y.$t("ok")),1)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1B,[createBaseVNode("div",_hoisted_2$1r,[withDirectives(createBaseVNode("input",{"onUpdate:modelValue":m[0]||(m[0]=x=>u.value=x),type:"text",placeholder:y.$t("signatures.appearanceDialog.signHere"),name:"signature"},null,8,_hoisted_3$1f),[[vModelText,u.value]])])])]),_:1})}}},DigitalSignCreatePanel_vue_vue_type_style_index_0_lang="",_hoisted_1$1A=["width","height"],dialogName$3="digitalSignCreatePanel",_sfc_main$1S={__name:"DigitalSignCreatePanel",emits:["modifyImage"],setup(e,{emit:n}){const r=n,o=useViewerStore();useDocumentStore();const u=computed(()=>o.isElementOpen(dialogName$3)),s=ref(578),w=ref(isMobile?0:270),g=ref();watch(()=>u.value,(d,f)=>{d&&isMobile&&nextTick(()=>{const{clientWidth:x,clientHeight:k}=g.value;x&&s.value!==x&&(s.value=x),k&&w.value!==k&&(w.value=k)})});const v=()=>{o.closeElement(dialogName$3),y()},y=()=>{core.handleSign({flag:"clear"})},m=async()=>{const d=await core.handleSign({type:1,flag:"image"});r("modifyImage",d),v()};return(d,f)=>{const x=__unplugin_components_0$w,k=_sfc_main$4e;return openBlock(),createBlock(k,{class:"digital-signature-dialog trackpad",show:!0,dialogName:dialogName$3},{header:withCtx(()=>[createVNode(x,{class:"close",onClick:v})]),footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:y},toDisplayString$1(d.$t("signatures.clear")),1),createBaseVNode("div",{class:"rect-button white",onClick:v},toDisplayString$1(d.$t("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:m},toDisplayString$1(d.$t("ok")),1)]),default:withCtx(()=>[createBaseVNode("div",{class:"paint-container",ref_key:"paintContainer",ref:g},[createBaseVNode("canvas",{id:"digitalTrackpadCanvas",width:s.value,height:w.value},null,8,_hoisted_1$1A)],512)]),_:1})}}},SignatureAppearanceDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1z={key:0,class:"signature-appearance-dialog"},_hoisted_2$1q={class:"sign-content"},_hoisted_3$1e={class:"sign-popup-header"},_hoisted_4$p={key:0,class:"signatures-popup-lists"},_hoisted_5$g={key:0,class:"signatures-popup-empty"},_hoisted_6$c={class:"no-signatures"},_hoisted_7$b={key:1,class:"signatures-popup-list-container"},_hoisted_8$8=["onClick","src"],_hoisted_9$8={key:1,class:"signatures-popup-create"},_hoisted_10$8={class:"create-sign-header"},_hoisted_11$6=["src"],_hoisted_12$5={class:"preview-options"},_hoisted_13$5={class:"title"},_hoisted_14$5={class:"configurations"},_hoisted_15$5={class:"left"},_hoisted_16$4={class:"checkboxes"},_hoisted_17$3={class:"right"},_hoisted_18$3={class:"text-align"},_hoisted_19$3={class:"buttons"},_hoisted_20$3={key:0,class:"addition"},_hoisted_21$3={key:0},_hoisted_22$3={class:"select-box"},_hoisted_23$3=["value"],_hoisted_24$3=["value"],_hoisted_25$2=["value"],_hoisted_26$2=["value"],_hoisted_27$2={key:1},_hoisted_28$2={class:"left-btns"},_hoisted_29$2={key:0},_hoisted_30$2={key:1},_hoisted_31$2={class:"right-btns"},_hoisted_32={key:1,class:"delete-page-popup"},dialogName$2="signatureAppearanceDialog",_sfc_main$1R={__name:"SignatureAppearanceDialog",setup(e){const{t:n}=useI18n(),o=getCurrentInstance().appContext.app.config.globalProperties.$t,u=useViewerStore(),s=useDocumentStore(),w=ref(!1),g=ref(0),v=computed(()=>u.isElementOpen(dialogName$2)),y=computed(()=>u.getActiveElementTab("signPanel")),m=computed(()=>s.getActiveTool),d=computed(()=>u.getDigitalSignaturePreview),f=computed(()=>u.isElementOpen("digitalSignCreatePanel")),x=computed(()=>u.isElementOpen("digitalKeyboardCreatePanel")),k=computed(()=>s.getDisableDigitalSignature),P=computed(()=>s.getDisableElectronicSignature),S=computed(()=>u.getCertSubject),E=computed(()=>u.getThemeMode),M=ref(null),T=computed(()=>u.getDigitalSignaturesList),D=ref(""),I=ref(""),N=ref("create"),O=ref(!0);T.value.length>=5&&(O.value=!1);const F=reactive({name:!0,dName:!1,date:!0,version:!1,logo:!0,location:!1,reason:!1,labels:!0,alignment:"left",reasonText:n("signatures.none"),locationText:""});watch(v,(ke,Ce)=>{var Pe;ke&&(D.value=(Pe=S.value)==null?void 0:Pe.CN)}),watch(F,async(ke,Ce)=>{const Pe=re();await X(Pe)},{deep:!0}),watch(()=>T.value,ke=>{ke&&ke.length>=5?O.value=!1:O.value||(O.value=!0)},{deep:!0}),watch(()=>v.value,ke=>{ke&&T.value.length>0?N.value="list":ke&&T.value.length===0&&(N.value="create")});const U=ke=>{w.value=!0,g.value=ke},Y=()=>{u.removeDigitalSignature(g.value),w.value=!1};function Q(ke){const Ce=new Image;return Ce.src=ke,new Promise(Pe=>{Ce.onload=function(){const{width:Me,height:Le}=Ce;Pe({width:Me,height:Le})}})}const q=async ke=>{const{width:Ce,height:Pe}=await Q(ke);u.setCommonLoading(!0);const Me=re(),Le=Z(Me);Le.imageBase64=ke,Le.width=Ce,Le.height=Pe;const Te=s.getPkcs12;await core.handleSign({type:1,flag:"save",param:{annotation:toRaw(u.getSelectedSignatureField),...Le,appearance:"image"},pkcs12Buffer:Te.pkcs12Buffer,password:Te.password}),te(),u.setCommonLoading(!1)},ne=async ke=>{I.value=ke;const Ce=re();await X(Ce)},J=async ke=>{D.value=ke;const Ce=re();await X(Ce)},re=()=>{let ke="";return F.name&&(ke+=j("name")+`
`),F.date&&(ke+=j("date")+`
`),F.reason&&(ke+=j("reason")+`
`),F.dName&&(ke+=j("dName")+`
`),F.version&&(ke+=j("version")+`
`),F.location&&(ke+=j("location")),ke},X=async ke=>{const Ce=Z(ke);Ce.rect={width:582,height:187,top:0,left:0,right:582,bottom:187};const Pe=await core.getSignature(Ce);u.setDigitalSignaturePreview(Pe)},j=ke=>{let Ce={};switch(ke){case"name":Ce.title=o("signatures.appearanceDialog.name"),Ce.value=S.value.CN;break;case"date":const Pe=new Date,Me=Pe.getFullYear(),Le=Pe.getMonth()+1<10?`0${Pe.getMonth()+1}`:Pe.getMonth()+1,Te=Pe.getDate()<10?`0${Pe.getDate()}`:Pe.getDate(),ye=Pe.getHours()<10?`0${Pe.getHours()}`:Pe.getHours(),_e=Pe.getMinutes()<10?`0${Pe.getMinutes()}`:Pe.getMinutes(),we=Pe.getSeconds()<10?`0${Pe.getSeconds()}`:Pe.getSeconds(),Se=`${Me}.${Le}.${Te} ${ye}:${_e}:${we}`;Ce.title=o("signatures.appearanceDialog.date"),Ce.value=Se;break;case"reason":Ce.title=o("signatures.appearanceDialog.reason"),Ce.value=F.reasonText;break;case"dName":const Be=["CN","O","OU","email","L","ST","C"].map(Oe=>`${Oe}=${S.value[Oe]}`).join(",");Ce.title=o("signatures.appearanceDialog.dName"),Ce.value=Be;break;case"version":Ce.title=o("signatures.appearanceDialog.ComPDFKitVersion"),Ce.value="2.7.1";break;case"location":Ce.title=o("signatures.appearanceDialog.location"),Ce.value=F.locationText;break}return F.labels?`${Ce.title}: ${Ce.value}`:Ce.value},Z=ke=>{const Ce={content:ke,isContentAlginLeft:F.alignment!=="left"};return y.value!=="keyboard"?Ce.text="":Ce.text=D.value,(y.value==="image"||y.value==="trackpad")&&(Ce.imageBase64=I.value),F.logo&&(Ce.isDrowLogo=!0,Ce.logoBase64="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAAEYCAYAAACHjumMAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA9kSURBVHgB7d1vbJXlGcfx635KpUWqJWgiZGgxg2ZG52k1pmqmJdYl6kZwW8S5F4hlKvGFmG3RZWYU4wuX7QUsMdpsSn3j3LJMo3FLJobqMmMWpDUuS4BkdpKAyWAFi4JAz737Oj2Hlv45PX+e+/x57u8nOZ4/Lbw4nvPjuq77fp7HSAy67x9tPSWyzhhJpSNzhbGSsmJa3fNWAeqBtSNiZMSk7YfWyLCkZfD9gSUjgrIYKVEmVKLoUTG22/013QIkjBE7bK3dQdiUruiAyQWLFdlChYJgWBmQdHobQVOcogKm64HjWwkWBM1K3/svXrxNUJCCAqbr/tE20xC96sIlJUDorIy4amYN1cz8ovl+oav3sw02ioYIFyDLSJttiIZu7B1dJ8grb8BoS+TieoCWCDifK/1brUSvTnxHMJc5W6TMG2ekTwDkx1xmTrMGjJZ+ms4CoEDm/vdfuOglwXlmBIwOdHXmQlsEFM7NKI+Z8XQHg9/zzZzBRNFuwgUojs5kdKVVcJ7zAiY7d2kTAEXTldauB0b7BOeca5G0NZKG6GMBUDJtlZrH0ysHB5YcE0ypYFgxAsqmrdKpSLYIMjIVDNULEB+qmElR9r/dAiAWVDGTMgFjTPSoAIiPabhVIIb2CPCjaTy9JPQ2KaI9AvxwbVLwB0NGenpLARA7vlsuYGxkrhUAsUtHUZsELnJraisFQOxcBRP8P96RW0K6QgDEznJM3/xntANQGt0PI4EjYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAmwUCFGjZUiOXXRLJMr0tjTLPFy8y0uJu+ppa3DzxHBM6v/+8lTpgjYyIdbe0fOieDcu4DA7fsXlEykTAYAYNiK+uiGTVigZZ7e5XX94gl7lAITiSy1hpc3dtrqfpds8yvU1qV/+wpNM7ygkbAgaZ4PhGxwIXJg1yi7vX6gQwYlMSmZ0TYfP8gJyx24oNGtPVe7wuSjjEq6O9QW7taJROd6+VCvzofLtfksQa0zd820PbCv19AiYguVC586ZG2p0KSVrAZI3YM3ZNIdUMLVLCESrwoM00ypCb0Wwc7nnotXy/SMAkkAbJHS5QbnXzlM52/hfDB9PqZjSvpt7uz9sy8elLEA2We3oaZX3PQqoVVISxts+FjMwVMgRMAugelN61C+UuV7UAlZYJmV39I65demn6z1iPrGMaLM/+ZJH86ZnFhAuqykh6e+ovz7VNf50Kpg5RsaD2uJlMo3nVPeiY+ioVTB3RuUrv2gvkpZ9fSLigBtlU6q3n+qa+QsDUCd1h+9LWC2XT2iYGuKhZxsijqd07W3PPaZFqnLZDT25sYrkZdcK0ytlTW9yDPn1GBVPD1vdMtEOEC+rJ1CqGT24NompBfZusYvgE1xitWnSFiDkL6pkx5la9J2BqRG6FSHfhAgnQrW0SAVMDchvmOA8LEuXMqXUETJXp8vOTG5tpiZA8kUkRMFW0aa3OW5oESCJjbRsBUyVb7l3IvAXJZsy1BEyFaSv0zCPNLEEjAJYhbyXpMPcXLlw4By7CYAiYSmGlCCHi014BhAtCxSfeM8IFIeNT7xHhgtDxyfdEV4t0oEu4IGR8+j352cYmVosQPALGA91Epxc7A0JHwMRsE0dEA+cQMDHSAxc5tgiYRMDEZOIsdM0CYBIBEwNdMdLlaE65AJyPgImBnomO5WhgJr4VZbrz5kaGusAcCJgy6Nxly3qGusBcCJgy6KVFmLsAcyNgSqT7XThpFJAfAVMCbY3uYe4CzIuAKQEXRgMKQ8AUSVeN7rqJ44yAQhAwRdCqZdNaWiOgUARMEdb3NLKhDigC35YC6WCXAxmB4hAwBeqlNQKKRsAUQKsXBrtA8QiYAlC9AKUhYOZB9QKUjoCZB9ULUDoCJg+qF6A8BEweVC9AeQiYPDrbua4RUA4CZg56zBG7doHy8A2aw709FwiA8nDGpFmsXtHAZV8LdPjUmOz53yHZd+Jo5vEhdxs7czpzDxAws7jndqqXfD4YPSS7/zsig+5GkCAfAmYWDHdnGjv7pbx88J/y8icfZR4DhSBgptFwYbg7iWBBOQiYae68mfYoR0Ol/+MPCBaUjICZhvZIMnOVvn8Nyh43awHKQcBMQXtE1YJ4ETBT3NIR9nFHvzrwXiZggLgQMFOE3B5tdS3RG4f3CRAnAiZLj5wOdXPdvf/4o+wfOypA3FiPzVq1Isy3QisXwgW+EDBZIc5f+v+9h7YIXhEwWasDq2Byq0WATwSMTFyxMaT5i+5zIVxQCQSMhDd/+eHeN9jngoogYESCql5edzOXwyc5AhqVQcCI7n8JY7We1giVRsCI7oExEoKXD35E9YKKImAkjBZJq5c3Du0XoJKCDxjdwRsCPTKawS4qjYBZGkZ7xOwF1RB8wFx2SfLbIz2HLrMXVAMVTAAVzOuHmb2gOgiYAGYwe45xZjpUR/AB09Kc7ApGV49oj1AtwQfM4kWSaPvHjghQLVQwi5JdwezjXC+oIiqYRcl+C/SSrkC1EDDNkmiHubQrqogWKeEt0mdnTgtQLRyLlHBUMKgmAgaANwQMAG8IGADeEDAJt6ypRYBqCT5gxr6wkmQXNV4gQLUEHzAnTkqiUcGgmmiREm45AYMqCj5gDh8ZlyRbvXipANVCi/SFJNr1S5YLUC0MeU8me8i7vLmFOQyqhhbpSFqSbs2lbQJUAwFzNNkVjOomYFAlwQfMpwkf8iqdw7QsWChApVHBBFDBqPtWXC1ApREwbgaT9N286r7Lr6GKQcWx0c759GjyB70aLlQxqDQCxtl/MPkBo6hiUGkEjHPgk+QPepWGy4MrOwWoFALGOXAwjIBRP7j863Jd6zIBKoGAEQ2YMFqknG1XraFVQkUQMDJxTphQlquVHj5Aq4RKIGCy3h06IyHRVum+FdcI4BMBkxXKStJUP159k3xrWbsAvhAwWX8LrILJeeqqblndwjlj4AcBk6VzmJBWk6Z65YbvUcnACwJmir37wgwYpZXMgyuvEyBOBMwUoQ16p3v4yuvlR6tuZAkbsSFgptAKJoQDH/PR1aXf3fBdzoKHWBAw0/z5vbCrGKX7ZN68+T7p+1o3QYOyEDDThN4mTbV2ebv8pvPbmf0ytE0ohenqPR52TzCLv/66RVoWGcGkQyfHZM/oIen/+AM5fGpMgEI0fKXzp32C8yy9OJKrr2wQTGppXCjtLZe4Gc01cl32UihjZ0/LCXcD5rJAMIO2Set7uKbzXPQcv7nrLWlls+/EEdk/dtTdH8081+ChyoEiYGahq0l7952VznbenvnoQFhvay5dKZip8+1+CRlD3jm8O3RWAJSHgJmDLleHvicGKBcBMwcNlz/sYoAJlIOAyeP3BAxQFgImD61i3mRnL1AyAmYeL7z+pQAoDQEzD73yoy5ZAygeAVOAp3eeEgDFI2AKoFUMsxigeARMgXQWw74YoDgETIG0imFfDFAcAqYIui/m8NHwLm8ClIqAKYK2SNtfYeALFIqAKZIeBMmyNVAYAqYEumzNwBeYHwFTAh34vsgOX2BeBEyJXnEDX1olID8Cpgy0SkB+BEwZaJWA/AiYMmmrxHljgNkRMDHQwwjYgAfMRMDEQOcwj/zyC+YxwDQETEx0HvP0zpMCYBIBEyPd5csZ8IBJBEzMfusChqEvMIGA8UAPiGQTHkDAePPEsyflwMFxAUJGwHiiK0qPu5Bh+RohI2A80pUlXb4mZBAqAsYzQgYhI2AqgJBBqAiYCsmFDINfhCSyIscEFZELmXeGuMYSwhAZa48LKkZXl3QJm814CEFkjB0WVJxuxuOwAiRdJGkZEVSFHlbw+LMchY3kiqwRKpgq0gMkNzz1OStMSKSoKS2vCapKh78btn3OXAaJEw0OLHGrSGZQUFW5q0bqOWVomZAUE/tg7Pg7gprw5t/PZFomjsZGEmQCxrVJ29kPUzty+2V0lYlqBvUsEzDaJhmb3iGoKbrKpNXMm++xMQ/16dyhAlQxtSlzrt8XT2ZmM6w0od6cCxiqmNqWmc24lSY256GemOkv3Nh7fMhVMilBzVp2SSS9axfKXTc1Cmpb59v9ErIZR1PbxvTdtEq1Ldc2feeJE8xnUNPMbC92PTB6v5hop6AuUNHUrtArGDPXD7o2He8TK1sFdSMXNJ3tDbJsKaf6qQUETB6ETP266+ZGWd+zUFatIGiqiYCZx429o+vSEu10v9gqqDurVjTI+tsvoKqpEgKmAF0Pj7bJmWi3e9gmqFud7QvkTlfZEDaVQ8AUgZYpOTRsbulYkLmnjfKHgClStprpcw83CBJBh8PaSmngrHb3BE58CJgSZYLmtHS7v2KLGHOtIDFaFplM4GjQdLgKZ3kmgAidUhAwMciFjTFRylqru4DbXOhcIUgUndtotXOZuy1bajLPF7swasne9PHi5omAwgQCJnAdu57nfAiAJ9S9ALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANAQPAGwIGgDcEDABvCBgA3hAwALwhYAB4Q8AA8IaAAeANASP2mADwgoAROS4AfBgJPmCsNcMCIH7W/ocKxsiIAIidNWaYgDGWCgbwwX23CJio6TUBEL9IBoMPmOE1G3UVaVAAxGl4eM1mhrzKWvuOAIiNNXaH3hMwakHTdvbDADGKJroCAkYm2iRrZYcAKJsxMqDtkT4mYHKoYoBYpCO7LfeYgMmiigHKZ6zdlqteMs8F5+nY1T/kKpmUACiOkZGh2x5eOfUlKphpbEP6bloloEjGHrORXTP9ZQJmGi3vrJHHBEDBrI02Tm2NcgiYWQzftnlAe0kBMK/M3KXnoVl3xDODyaPzref6rDFbBcCsNFz23r65b86fC/JK7epfZyS9071VrQJggpu5mHF5bO83Nw/k/TXBvFK7n2szabNbrLQJEDwzrIshs81cZvymoGC0TAiaVi1p2ZGvJZrxRwRFyVQz49Ln3roNAoQgGyzpBU3bs2cfKPyPCkqiQSNp6TbWbHFPrxUgaax9xwXEYCnBkkPAxCAXNpE1KWttyr2rbe6tvUKAeuAqFDdfPO5uw8aYkbSe5TFqeq3UUJnq/zPmsRQ9GquGAAAAAElFTkSuQmCC"),y.value==="none"&&(Ce.isDrawOnlyContent=!0),Ce},W=async ke=>{if(!(ke===y.value&&["image","none"].includes(ke))){if(core.handleSign({flag:"create",type:1}),u.setActiveSignWay(ke),ke==="trackpad"&&u.openElement("digitalSignCreatePanel"),ke==="keyboard"){u.openElement("digitalKeyboardCreatePanel"),await nextTick();const Ce=document.querySelector(".digital-signature-dialog .keyboard-paint input");Ce.select(),Ce.focus()}le()}},te=ke=>{u.closeElement(dialogName$2),y.value!=="trackpad"&&le(),core.handleSign({flag:"reset"}),document.body.style.overflow="",!m.value&&ke==="cancel"&&k.value&&P.value&&u.openElement("selectSignTypeDialog"),u.setActiveSignWay("keyboard"),Object.assign(F,{name:!0,dName:!1,date:!0,version:!1,logo:!0,location:!1,reason:!1,labels:!0,alignment:"left",reasonText:o("signatures.none"),locationText:""})},le=async()=>{I.value="",y.value==="trackpad"&&core.handleSign({flag:"clear"});const ke=re();await X(ke)},oe=()=>{M.value.click()},Ee=async ke=>{let Ce=ke.target.files[0];if(Ce.size>1024*1024){window.$message.error(o("signatures.uploadError"),{duration:5e3,icon:()=>h$1("img",{src:MessageError})}),ke.target.value="";return}const Pe=new FileReader,Le=await new Promise((ye,_e)=>{Pe.addEventListener("load",async we=>{ye(we.target.result)}),Pe.addEventListener("error",()=>{_e("Error reading the local image")}),Pe.readAsDataURL(Ce)});I.value=Le;const Te=re();await X(Te)},Ae=async()=>{u.setCommonLoading(!0);const ke=re(),Ce=Z(ke),Pe=s.getPkcs12;await core.handleSign({type:1,flag:"save",param:{annotation:toRaw(u.getSelectedSignatureField),...Ce},pkcs12Buffer:Pe.pkcs12Buffer,password:Pe.password}),te(),u.setCommonLoading(!1),O.value&&T.value.length<5&&u.addDigitalSignature(d.value)},ve=()=>{y.value==="keyboard"&&W("keyboard"),y.value==="trackpad"&&W("trackpad")};return(ke,Ce)=>{const Pe=__unplugin_components_0$w,Me=__unplugin_components_1$d,Le=__unplugin_components_2$e,Te=__unplugin_components_14$3,ye=_sfc_main$4l,_e=__unplugin_components_1$f,we=__unplugin_components_6$a,Se=__unplugin_components_7$9,$e=__unplugin_components_0$s,Be=_sfc_main$4e,Oe=_sfc_main$1S,Ge=_sfc_main$1T,Ie=__unplugin_components_2$f;return openBlock(),createElementBlock(Fragment,null,[v.value?(openBlock(),createElementBlock("div",_hoisted_1$1z,[createVNode(Be,{show:v.value,dialogName:dialogName$2,class:"appearance-dialog"},createSlots({header:withCtx(()=>[createBaseVNode("p",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.title")),1),createVNode(Pe,{class:"close",onClick:te})]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$1q,[createBaseVNode("div",_hoisted_3$1e,[createBaseVNode("div",{onClick:Ce[0]||(Ce[0]=je=>N.value="list"),class:normalizeClass({active:N.value==="list"})},toDisplayString$1(unref(o)("signatures.mySignatures")),3),createBaseVNode("div",{onClick:Ce[1]||(Ce[1]=je=>N.value="create"),class:normalizeClass({active:N.value==="create"})},toDisplayString$1(unref(o)("signatures.createSignature")),3)]),N.value==="list"?(openBlock(),createElementBlock("div",_hoisted_4$p,[T.value.length===0?(openBlock(),createElementBlock("div",_hoisted_5$g,[createBaseVNode("div",_hoisted_6$c,[E.value==="Light"?(openBlock(),createBlock(Me,{key:0})):(openBlock(),createBlock(Le,{key:1})),createBaseVNode("div",{onClick:Ce[2]||(Ce[2]=je=>N.value="create")},toDisplayString$1(unref(o)("signatures.noSignatures")),1)])])):(openBlock(),createElementBlock("div",_hoisted_7$b,[(openBlock(!0),createElementBlock(Fragment,null,renderList(T.value,(je,qe)=>(openBlock(),createElementBlock("div",{class:"signatures-popup-list",key:qe},[createBaseVNode("img",{onClick:Ue=>q(je),src:je},null,8,_hoisted_8$8),createVNode(ye,{class:"close-button",onClick:Ue=>U(qe)},{default:withCtx(()=>[createVNode(Te)]),_:2},1032,["onClick"])]))),128))]))])):(openBlock(),createElementBlock("div",_hoisted_9$8,[createBaseVNode("div",_hoisted_10$8,[createBaseVNode("div",{onClick:Ce[3]||(Ce[3]=je=>W("keyboard")),class:normalizeClass({active:y.value==="keyboard"})},toDisplayString$1(unref(o)("signatures.keyboard")),3),createBaseVNode("div",{onClick:Ce[4]||(Ce[4]=je=>W("trackpad")),class:normalizeClass({active:y.value==="trackpad"})},toDisplayString$1(unref(o)("signatures.trackpad")),3),createBaseVNode("div",{onClick:Ce[5]||(Ce[5]=je=>W("image")),class:normalizeClass({active:y.value==="image"})},toDisplayString$1(unref(o)("signatures.image")),3),createBaseVNode("div",{onClick:Ce[6]||(Ce[6]=je=>W("none")),class:normalizeClass({active:y.value==="none"})},toDisplayString$1(unref(o)("signatures.none")),3)]),createBaseVNode("div",{class:"preview-area",onClick:Ce[7]||(Ce[7]=je=>ve())},[createBaseVNode("img",{src:d.value},null,8,_hoisted_11$6)]),createBaseVNode("div",_hoisted_12$5,[y.value==="image"?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:"upload",onClick:oe},[createTextVNode(toDisplayString$1(unref(o)("upload")),1),createBaseVNode("input",{ref_key:"uploadImageEl",ref:M,type:"file",onChange:Ee,accept:".png, .jpg, .jpeg",name:"signature"},null,544)]),createBaseVNode("span",{onClick:le},toDisplayString$1(unref(o)("signatures.clear")),1)],64)):createCommentVNode("",!0)]),createBaseVNode("p",_hoisted_13$5,toDisplayString$1(unref(o)("signatures.appearanceDialog.includeText")),1),createBaseVNode("div",_hoisted_14$5,[createBaseVNode("div",_hoisted_15$5,[createBaseVNode("div",_hoisted_16$4,[createBaseVNode("div",{class:"check-box",onClick:Ce[8]||(Ce[8]=je=>F.name=!F.name)},[createBaseVNode("div",{class:normalizeClass(["check",{active:F.name}])},[withDirectives(createVNode(_e,null,null,512),[[vShow,F.name]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.name")),1)]),createBaseVNode("div",{class:"check-box",onClick:Ce[9]||(Ce[9]=je=>F.dName=!F.dName)},[createBaseVNode("div",{class:normalizeClass(["check",{active:F.dName}])},[withDirectives(createVNode(_e,null,null,512),[[vShow,F.dName]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.dName")),1)]),createBaseVNode("div",{class:"check-box",onClick:Ce[10]||(Ce[10]=je=>F.date=!F.date)},[createBaseVNode("div",{class:normalizeClass(["check",{active:F.date}])},[withDirectives(createVNode(_e,null,null,512),[[vShow,F.date]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.date")),1)]),createBaseVNode("div",{class:"check-box",onClick:Ce[11]||(Ce[11]=je=>F.version=!F.version)},[createBaseVNode("div",{class:normalizeClass(["check",{active:F.version}])},[withDirectives(createVNode(_e,null,null,512),[[vShow,F.version]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.ComPDFKitVersion")),1)]),createBaseVNode("div",{class:"check-box",onClick:Ce[12]||(Ce[12]=je=>F.logo=!F.logo)},[createBaseVNode("div",{class:normalizeClass(["check",{active:F.logo}])},[withDirectives(createVNode(_e,null,null,512),[[vShow,F.logo]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.logo")),1)]),createBaseVNode("div",{class:"check-box",onClick:Ce[13]||(Ce[13]=je=>F.location=!F.location)},[createBaseVNode("div",{class:normalizeClass(["check",{active:F.location}])},[withDirectives(createVNode(_e,null,null,512),[[vShow,F.location]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.location")),1)]),createBaseVNode("div",{class:"check-box",onClick:Ce[14]||(Ce[14]=je=>F.reason=!F.reason)},[createBaseVNode("div",{class:normalizeClass(["check",{active:F.reason}])},[withDirectives(createVNode(_e,null,null,512),[[vShow,F.reason]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.reason")),1)]),createBaseVNode("div",{class:"check-box",onClick:Ce[15]||(Ce[15]=je=>F.labels=!F.labels)},[createBaseVNode("div",{class:normalizeClass(["check",{active:F.labels}])},[withDirectives(createVNode(_e,null,null,512),[[vShow,F.labels]])],2),createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.labels")),1)])])]),createBaseVNode("div",_hoisted_17$3,[createBaseVNode("div",_hoisted_18$3,[createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.textAlignment")),1),createBaseVNode("div",_hoisted_19$3,[createBaseVNode("div",{class:normalizeClass({active:F.alignment==="left"}),onClick:Ce[16]||(Ce[16]=je=>F.alignment="left")},[createVNode(we)],2),createBaseVNode("div",{class:normalizeClass({active:F.alignment==="right"}),onClick:Ce[17]||(Ce[17]=je=>F.alignment="right")},[createVNode(Se)],2)])]),F.reason||F.location?(openBlock(),createElementBlock("div",_hoisted_20$3,[F.reason?(openBlock(),createElementBlock("div",_hoisted_21$3,[createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.reason")),1),createBaseVNode("div",_hoisted_22$3,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":Ce[18]||(Ce[18]=je=>F.reasonText=je)},[createBaseVNode("option",{value:unref(o)("signatures.none")},toDisplayString$1(unref(o)("signatures.none")),9,_hoisted_23$3),createBaseVNode("option",{value:unref(o)("signatures.appearanceDialog.docOwner")},toDisplayString$1(unref(o)("signatures.appearanceDialog.docOwner")),9,_hoisted_24$3),createBaseVNode("option",{value:unref(o)("signatures.appearanceDialog.approvingDoc")},toDisplayString$1(unref(o)("signatures.appearanceDialog.approvingDoc")),9,_hoisted_25$2),createBaseVNode("option",{value:unref(o)("signatures.appearanceDialog.reviewedDoc")},toDisplayString$1(unref(o)("signatures.appearanceDialog.reviewedDoc")),9,_hoisted_26$2)],512),[[vModelSelect,F.reasonText]]),createVNode($e)])])):createCommentVNode("",!0),F.location?(openBlock(),createElementBlock("div",_hoisted_27$2,[createBaseVNode("span",null,toDisplayString$1(unref(o)("signatures.appearanceDialog.location")),1),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":Ce[19]||(Ce[19]=je=>F.locationText=je),name:"signature"},null,512),[[vModelText,F.locationText]])])):createCommentVNode("",!0)])):createCommentVNode("",!0)])])]))])]),_:2},[N.value==="create"?{name:"footer",fn:withCtx(()=>[createBaseVNode("div",_hoisted_28$2,[createBaseVNode("div",{class:normalizeClass(["check",{active:O.value,disabled:T.value.length>=5}]),onClick:Ce[20]||(Ce[20]=je=>T.value.length<5&&(O.value=!O.value))},[withDirectives(createVNode(_e,null,null,512),[[vShow,O.value]])],2),T.value.length<5?(openBlock(),createElementBlock("span",_hoisted_29$2,toDisplayString$1(unref(o)("signatures.saveSignature")),1)):(openBlock(),createElementBlock("span",_hoisted_30$2,toDisplayString$1(unref(o)("signatures.full")),1))]),createBaseVNode("div",_hoisted_31$2,[createBaseVNode("div",{class:"rect-button white",onClick:Ce[21]||(Ce[21]=je=>te("cancel"))},toDisplayString$1(unref(o)("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:Ae},toDisplayString$1(unref(o)("ok")),1)])]),key:"0"}:void 0]),1032,["show"]),withDirectives(createVNode(Oe,{onModifyImage:ne},null,512),[[vShow,f.value]]),x.value?(openBlock(),createBlock(Ge,{key:0,text:D.value,onModifyText:J},null,8,["text"])):createCommentVNode("",!0)])):createCommentVNode("",!0),w.value?(openBlock(),createElementBlock("div",_hoisted_32,[createVNode(Be,{show:w.value,dialogName:dialogName$2},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:Ce[22]||(Ce[22]=je=>w.value=!1)},toDisplayString$1(unref(o)("cancel")),1),createBaseVNode("div",{class:"rect-button blue",onClick:Y},toDisplayString$1(unref(o)("ok")),1)]),default:withCtx(()=>[createVNode(Ie),createBaseVNode("p",null,toDisplayString$1(unref(o)("signatures.deleteConfirm")),1)]),_:1},8,["show"])])):createCommentVNode("",!0)],64)}}},SelectSignTypeDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1y={key:0,class:"select-type-popup"},_hoisted_2$1p={class:"title title-color"},_hoisted_3$1d={class:"select-text"},_hoisted_4$o={class:"text"},_hoisted_5$f={class:"title"},_hoisted_6$b={class:"text"},_hoisted_7$a={class:"title"},dialogName$1="selectSignTypeDialog",_sfc_main$1Q={__name:"SelectSignTypeDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName$1)),u=computed(()=>r.getActiveTool),s=computed(()=>r.getDisableDigitalSignature),w=computed(()=>r.getDisableElectronicSignature),g=ref("electronic"),v=d=>{n.setSelectedSignatureField(d),u.value==="addDigitalSign"||!s.value&&w.value?n.openElement("addDigitalFileDialog"):u.value==="addElectronicSign"||s.value&&!w.value?m():n.openElement("selectSignTypeDialog")};core.addEvent("openSelectSignTypeDialog",v);const y=()=>{n.closeElement(dialogName$1),document.body.style.overflow="hidden",g.value==="digital"?n.openElement("addDigitalFileDialog"):m()},m=()=>{n.toggleElement("signCreatePanel"),n.setActiveToolMode("sign"),n.toggleActiveHand(!1),core.switchTool(0),core.switchAnnotationEditorMode(0)};return(d,f)=>{const x=__unplugin_components_0$u,k=__unplugin_components_1$9,P=_sfc_main$4e;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$1y,[createVNode(P,{show:o.value,dialogName:dialogName$1,close:!0},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button blue",onClick:y},toDisplayString$1(d.$t("signatures.selectTypeDialog.startSigning")),1)]),default:withCtx(()=>[createBaseVNode("p",_hoisted_2$1p,toDisplayString$1(d.$t("signatures.selectTypeDialog.selectType")),1),createBaseVNode("div",_hoisted_3$1d,[createBaseVNode("div",{onClick:f[0]||(f[0]=S=>g.value="electronic"),class:"option"},[g.value==="electronic"?(openBlock(),createBlock(x,{key:0})):(openBlock(),createBlock(k,{key:1})),createBaseVNode("div",_hoisted_4$o,[createBaseVNode("p",_hoisted_5$f,toDisplayString$1(d.$t("signatures.selectTypeDialog.signWithElectronic")),1),createBaseVNode("p",null,toDisplayString$1(d.$t("signatures.selectTypeDialog.signWithElectronicDesc")),1)])]),createBaseVNode("div",{onClick:f[1]||(f[1]=S=>g.value="digital"),class:"option"},[g.value==="digital"?(openBlock(),createBlock(x,{key:0})):(openBlock(),createBlock(k,{key:1})),createBaseVNode("div",_hoisted_6$b,[createBaseVNode("p",_hoisted_7$a,toDisplayString$1(d.$t("signatures.selectTypeDialog.signWithDigital")),1),createBaseVNode("p",null,toDisplayString$1(d.$t("signatures.selectTypeDialog.signWithDigitalDesc")),1)])])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},PreventDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1x={key:0,class:"edit-dialog"},_hoisted_2$1o={class:"edit"},_hoisted_3$1c={class:"close"},_hoisted_4$n={class:"warning"},_hoisted_5$e={class:"title"},_hoisted_6$a={class:"des"},_sfc_main$1P={__name:"PreventDialog",setup(e){const n=useViewerStore(),r=computed(()=>n.isElementOpen("contentEditorPreventDialog")),o=computed(()=>n.isElementOpen("docEditorPreventDialog")),u=()=>n.closeElement(r.value?"contentEditorPreventDialog":"docEditorPreventDialog");return(s,w)=>{const g=__unplugin_components_14$3,v=__unplugin_components_2$f;return r.value||o.value?(openBlock(),createElementBlock("div",_hoisted_1$1x,[createBaseVNode("div",_hoisted_2$1o,[createBaseVNode("div",_hoisted_3$1c,[createVNode(g,{onClick:u})]),createBaseVNode("div",_hoisted_4$n,[createVNode(v)]),createBaseVNode("div",_hoisted_5$e,toDisplayString$1(s.$t("prevent.title")),1),createBaseVNode("div",_hoisted_6$a,toDisplayString$1(r.value?s.$t("prevent.description"):s.$t("prevent.description1")),1),createBaseVNode("div",{class:"button",onClick:u},toDisplayString$1(s.$t("ok")),1)])])):createCommentVNode("",!0)}}},SettingsDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1w={class:"settings-popup"},_hoisted_2$1n={class:"title"},_hoisted_3$1b={class:"container"},_hoisted_4$m={class:"info"},_hoisted_5$d={class:"row"},_hoisted_6$9={class:"row"},_hoisted_7$9={class:"row"},_hoisted_8$7={class:"select-box"},_hoisted_9$7=createBaseVNode("option",{value:"en"},"English",-1),_hoisted_10$7=createBaseVNode("option",{value:"zh-CN"},"\u7B80\u4F53\u4E2D\u6587",-1),_hoisted_11$5=createBaseVNode("option",{value:"zh-TW"},"\u7E41\u9AD4\u4E2D\u6587",-1),_hoisted_12$4=createBaseVNode("option",{value:"fr"},"Fran\xE7ais",-1),_hoisted_13$4=createBaseVNode("option",{value:"ja"},"\u65E5\u672C\u8A9E",-1),_hoisted_14$4=createBaseVNode("option",{value:"th"},"\u0E44\u0E17\u0E22",-1),_hoisted_15$4=[_hoisted_9$7,_hoisted_10$7,_hoisted_11$5,_hoisted_12$4,_hoisted_13$4,_hoisted_14$4],_hoisted_16$3={class:"row"},_hoisted_17$2={class:"controller"},_hoisted_18$2={class:"row"},_hoisted_19$2={class:"controller"},_hoisted_20$2={class:"row"},_hoisted_21$2={class:"controller"},_hoisted_22$2={class:"title"},_hoisted_23$2={class:"version row"},_hoisted_24$2=createBaseVNode("span",null,"2.7.1",-1),_sfc_main$1O={__name:"SettingsDialog",setup(e){const{locale:n}=useI18n(),r=useViewerStore(),o=useDocumentStore(),u=ref(o.getAuthor),s=ref(o.getAnnotator),w=computed(()=>r.isElementOpen("settingsDialog")),g=computed(()=>o.getAuthor),v=computed(()=>o.getAnnotator),y=ref(n.value),m=ref(!0),d=ref(!0),f=ref(!1),x=ref(!1);watch(()=>w.value,(S,E)=>{S&&(m.value=o.getHighlightLink,d.value=o.getHighlightForm,f.value=!1)}),watch(g,(S,E)=>{u.value=S}),watch(v,(S,E)=>{s.value=S}),watch(x,S=>{S?core.enableFillConsecutively():core.disableFillConsecutively(),f.value=!0}),watch([u,s,y,m,d],(S,E)=>{S[0]!==o.getAuthor||S[1]!==o.getAnnotator||S[2]!==n.value||S[3]!==o.getHighlightLink||S[4]!==o.getHighlightForm?f.value=!0:f.value=!1});const k=()=>{r.closeElement("settingsDialog"),y.value=n.value},P=()=>{n.value=y.value,window.localStorage.setItem("language",y.value),r.closeElement("settingsDialog"),o.setAuthor(u.value?u.value:"ComPDFKit"),o.setAnnotator(s.value?s.value:"Guest"),o.setHighlightLink(m.value),o.setHighlightForm(d.value)};return(S,E)=>{const M=__unplugin_components_0$z,T=_sfc_main$4e;return openBlock(),createElementBlock("div",_hoisted_1$1w,[createVNode(T,{show:w.value},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:k},toDisplayString$1(S.$t("cancel")),1),createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:!f.value}]),onClick:P},toDisplayString$1(S.$t("documentEditor.save")),3)]),default:withCtx(()=>[createBaseVNode("p",_hoisted_2$1n,toDisplayString$1(S.$t("header.settings.settings")),1),createBaseVNode("div",_hoisted_3$1b,[createBaseVNode("div",_hoisted_4$m,[createBaseVNode("div",_hoisted_5$d,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.author")),1),withDirectives(createBaseVNode("input",{type:"text",placeholder:"ComPDFKit","onUpdate:modelValue":E[0]||(E[0]=D=>u.value=D),name:"settings"},null,512),[[vModelText,u.value]])]),createBaseVNode("div",_hoisted_6$9,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.annotator")),1),withDirectives(createBaseVNode("input",{type:"text",placeholder:"Guest","onUpdate:modelValue":E[1]||(E[1]=D=>s.value=D),name:"settings"},null,512),[[vModelText,s.value]])]),createBaseVNode("div",_hoisted_7$9,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.language")),1),createBaseVNode("div",_hoisted_8$7,[withDirectives(createBaseVNode("select",{name:"language","onUpdate:modelValue":E[2]||(E[2]=D=>y.value=D)},_hoisted_15$4,512),[[vModelSelect,y.value]]),createVNode(M)])])]),createBaseVNode("div",_hoisted_16$3,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.highlightLink")),1),createBaseVNode("div",_hoisted_17$2,[createVNode(unref(NSwitch),{value:m.value,"onUpdate:value":E[3]||(E[3]=D=>m.value=D)},null,8,["value"])])]),createBaseVNode("div",_hoisted_18$2,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.highlightForm")),1),createBaseVNode("div",_hoisted_19$2,[createVNode(unref(NSwitch),{value:d.value,"onUpdate:value":E[4]||(E[4]=D=>d.value=D)},null,8,["value"])])]),createBaseVNode("div",_hoisted_20$2,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.fillConsecutively")),1),createBaseVNode("div",_hoisted_21$2,[createVNode(unref(NSwitch),{value:x.value,"onUpdate:value":E[5]||(E[5]=D=>x.value=D)},null,8,["value"])])])]),createBaseVNode("p",_hoisted_22$2,toDisplayString$1(S.$t("header.settings.creationInfo")),1),createBaseVNode("div",_hoisted_23$2,[createBaseVNode("span",null,toDisplayString$1(S.$t("header.settings.version")),1),_hoisted_24$2])]),_:1},8,["show"])])}}},_sfc_main$1N={},_hoisted_1$1v={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1m=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.3033 12.5962L3.40381 2.69666L2.6967 3.40376L12.5962 13.3033L13.3033 12.5962ZM2 7.99996C2 7.99996 2.69777 6.96095 3.82074 5.94202L9.58576 11.707C9.08063 11.8902 8.54892 12 8 12C4.68629 12 2 7.99996 2 7.99996ZM14 7.99996C14 7.99996 13.3022 9.03896 12.1793 10.0579L6.41424 4.29288C6.91937 4.10972 7.45108 3.99996 8 3.99996C11.3137 3.99996 14 7.99996 14 7.99996Z",fill:"currentColor"},null,-1),_hoisted_3$1a=[_hoisted_2$1m];function _sfc_render$W(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1v,_hoisted_3$1a)}const __unplugin_components_4$5=_export_sfc(_sfc_main$1N,[["render",_sfc_render$W]]),_sfc_main$1M={},_hoisted_1$1u={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1l=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 12C11.3137 12 14 8 14 8C14 8 11.3137 4 8 4C4.68629 4 2 8 2 8C2 8 4.68629 12 8 12ZM8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10Z",fill:"currentColor"},null,-1),_hoisted_3$19=[_hoisted_2$1l];function _sfc_render$V(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1u,_hoisted_3$19)}const __unplugin_components_3$5=_export_sfc(_sfc_main$1M,[["render",_sfc_render$V]]),_sfc_main$1L={},_hoisted_1$1t={width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1k=createBaseVNode("path",{d:"M32.5 19.2321V13.1607C32.5 8.46629 28.6944 4.66071 24 4.66071V4.66071C19.3056 4.66071 15.5 8.46628 15.5 13.1607V19.2321",stroke:"#93B9FD","stroke-width":"4"},null,-1),_hoisted_3$18=createBaseVNode("rect",{x:"7",y:"16.8036",width:"34",height:"26.7143",rx:"2",fill:"currentColor"},null,-1),_hoisted_4$l=createBaseVNode("rect",{x:"15",y:"28",width:"18",height:"3",fill:"white"},null,-1),_hoisted_5$c=[_hoisted_2$1k,_hoisted_3$18,_hoisted_4$l];function _sfc_render$U(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1t,_hoisted_5$c)}const __unplugin_components_2$a=_export_sfc(_sfc_main$1L,[["render",_sfc_render$U]]),_sfc_main$1K={},_hoisted_1$1s={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1j=createBaseVNode("path",{d:"M13 1L1 13",stroke:"#BABABA","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_3$17=createBaseVNode("path",{d:"M1 1L13 13",stroke:"#BABABA","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_4$k=[_hoisted_2$1j,_hoisted_3$17];function _sfc_render$T(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1s,_hoisted_4$k)}const __unplugin_components_0$f=_export_sfc(_sfc_main$1K,[["render",_sfc_render$T]]),EnterDocumentPassword_vue_vue_type_style_index_0_lang="",_hoisted_1$1r={id:"passwordDialog",class:"enter-document-password-dialog"},_hoisted_2$1i={class:"password-container"},_hoisted_3$16={class:"modal-container"},_hoisted_4$j={class:"wrapper"},_hoisted_5$b={class:"header-container"},_hoisted_6$8=createBaseVNode("span",{class:"title"},null,-1),_hoisted_7$8={class:"password-title"},_hoisted_8$6={class:"input-container"},_hoisted_9$6=["type","placeholder"],_hoisted_10$6={class:"wrong-password",id:"passwordText"},_sfc_main$1J={__name:"EnterDocumentPassword",setup(e){const{t:n}=useI18n(),r=useViewerStore(),o=ref(!1),u=ref(""),s=ref(""),w=computed(()=>r.isElementOpen("permissionPasswordDialog")),g=y=>{y.param===!0||y.param===!1?o.value=y.param:o.value=!o.value};watch(()=>u.value,()=>{s.value=""}),watch(()=>w.value,()=>{u.value="",s.value=""});const v=async()=>{if(!await core.checkPermissionPassword(u.value)){s.value=n("passwordDialog.wrongPwd");return}r.closeElement("permissionPasswordDialog")};return(y,m)=>{const d=__unplugin_components_0$f,f=_sfc_main$4l,x=__unplugin_components_2$a,k=__unplugin_components_3$5,P=__unplugin_components_4$5;return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$1r,[createBaseVNode("div",_hoisted_2$1i,[createBaseVNode("div",_hoisted_3$16,[createBaseVNode("div",_hoisted_4$j,[createBaseVNode("div",_hoisted_5$b,[_hoisted_6$8,createVNode(f,{class:"close-button",id:"passwordCancel",onClick:m[0]||(m[0]=S=>unref(r).closeElement("permissionPasswordDialog"))},{default:withCtx(()=>[createVNode(d)]),_:1})]),createVNode(x,{class:"lock-icon"}),createBaseVNode("div",_hoisted_7$8,toDisplayString$1(y.$t("passwordDialog.enterPermissionPwd")),1),createBaseVNode("div",_hoisted_8$6,[withDirectives(createBaseVNode("input",{id:"password","onUpdate:modelValue":m[1]||(m[1]=S=>u.value=S),type:o.value?"text":"password",name:"password",placeholder:y.$t("passwordDialog.enterPwdPlaceholder")},null,8,_hoisted_9$6),[[vModelDynamic,u.value]]),createBaseVNode("span",{class:"eye-btn",id:"eyeVisible",onClick:g},[o.value?(openBlock(),createBlock(k,{key:0})):(openBlock(),createBlock(P,{key:1}))]),createBaseVNode("div",_hoisted_10$6,toDisplayString$1(s.value),1)]),createBaseVNode("span",{class:normalizeClass(["set-btn",!u.value.length&&"disabled"]),id:"passwordSubmit",onClick:v},toDisplayString$1(y.$t("ok")),3)])])])],512)),[[vShow,w.value]])}}},ModalContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$1q={className:"modal-container"},_hoisted_2$1h={className:"wrapper"},_hoisted_3$15={className:"header-container"},_hoisted_4$i={class:"title"},_sfc_main$1I={__name:"ModalContainer",props:["title","onCloseClick"],setup(e){return(n,r)=>{const o=__unplugin_components_0$f,u=_sfc_main$4l;return openBlock(),createElementBlock("div",_hoisted_1$1q,[createBaseVNode("div",_hoisted_2$1h,[createBaseVNode("div",_hoisted_3$15,[createBaseVNode("span",_hoisted_4$i,toDisplayString$1(e.title),1),createVNode(u,{className:"close-button",onClick:e.onCloseClick},{default:withCtx(()=>[createVNode(o)]),_:1},8,["onClick"])]),renderSlot(n.$slots,"default")])])}}},MessageSuccess=""+new URL("icon-message-success.c9ccee05.svg",import.meta.url).href,SetPassword_vue_vue_type_style_index_0_lang="",_hoisted_1$1p={class:"password-container"},_hoisted_2$1g={class:"encrypt-container"},_hoisted_3$14={class:"document"},_hoisted_4$h={class:"document-title"},_hoisted_5$a=["disabled","type","placeholder"],_hoisted_6$7={class:"wrong-password"},_hoisted_7$7={class:"permission"},_hoisted_8$5={class:"permission-title"},_hoisted_9$5=["disabled","type","placeholder"],_hoisted_10$5={class:"wrong-password"},_hoisted_11$4={class:"printing item"},_hoisted_12$3={class:"copy item"},_hoisted_13$3={class:"edit item"},_hoisted_14$3={class:"note"},_hoisted_15$3={class:"btn-container"},_sfc_main$1H={__name:"SetPassword",setup(e){const n=getCurrentInstance().appContext.app.config.globalProperties,r=useViewerStore(),o=ref(!1),u=ref(""),s=ref(""),w=ref(!1),g=ref(""),v=ref(""),y=ref(!1),m=ref(!1),d=ref(!1),f=ref(!1),x=reactive({allowsPrinting:!1,allowsCopying:!1,allowsDocumentChanges:!1}),k=computed(()=>r.isElementOpen("setPasswordModal"));watch(()=>u.value,(M,T)=>{M&&(M=M.replace(/\s/g,""),M=M.replace(/[^a-zA-Z0-9!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/,""),M=M.replace(/[\u4e00-\u9fa5\uFE30-\uFFA0]/,""),u.value=M),g.value=""}),watch(()=>s.value,(M,T)=>{M&&(M=M.replace(/\s/g,""),M=M.replace(/[^a-zA-Z0-9!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]/,""),M=M.replace(/[\u4e00-\u9fa5\uFE30-\uFFA0]/,""),s.value=M),v.value=""});const P=()=>{r.closeElement("setPasswordModal"),o.value=!1,u.value="",y.value=!1,s.value="",m.value=!1,d.value=!1,x.allowsPrinting=!1,x.allowsCopying=!1,x.allowsDocumentChanges=!1},S=async()=>{if(!u.value.length&&!s.value.length||w.value)return;if(E())y.value=!1;else{y.value=!0;return}w.value=!0;const M={};m.value&&(M.password=u.value),d.value&&(M.permissionPassword=s.value,M.permission={allowsPrinting:x.allowsPrinting,allowsCopying:x.allowsCopying,allowsDocumentChanges:x.allowsDocumentChanges});const T=await core.setPassword(M);P(),T?window.$message.success(n.$t("passwordDialog.setPwdSuccess"),{duration:3e3,icon:()=>h$1("img",{src:MessageSuccess})}):window.$message.error(n.$t("passwordDialog.setPwdFailure"),{duration:3e3,icon:()=>h$1("img",{src:MessageError})}),w.value=!1},E=()=>{const M=/^(?=.*[a-zA-Z]+$|.*\d+$|.*[@$!%*?&]+$)[a-zA-Z\d@$!%*?&]{1,20}$/,T=M.test(u.value),D=M.test(s.value);return m.value&&!T&&(g.value=n.$t("passwordDialog.supportTip")),d.value&&!D&&(v.value=n.$t("passwordDialog.supportTip")),m.value&&d.value&&u.value===s.value?(g.value=n.$t("passwordDialog.sameWord"),v.value=n.$t("passwordDialog.sameWord"),!1):u.value.length>20||s.value.length>20?(m.value&&u.value.length>20&&(g.value=n.$t("passwordDialog.long")),d.value&&s.value.length>20&&(v.value=n.$t("passwordDialog.long")),!1):(!m.value||T)&&(!d.value||D)};return(M,T)=>{const D=__unplugin_components_1$f,I=__unplugin_components_3$5,N=__unplugin_components_4$5,O=_sfc_main$1I;return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$1p,[createVNode(O,{onCloseClick:P,title:M.$t("passwordDialog.encryptPdf")},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$1g,[createBaseVNode("div",_hoisted_3$14,[createBaseVNode("div",_hoisted_4$h,[createBaseVNode("div",{class:normalizeClass(["check",{active:m.value}]),onClick:T[0]||(T[0]=F=>m.value=!m.value)},[withDirectives(createVNode(D,null,null,512),[[vShow,m.value]])],2),createBaseVNode("span",null,toDisplayString$1(M.$t("passwordDialog.documentPassword")),1)]),createBaseVNode("div",{class:normalizeClass(["input-container",!m.value&&"disable"])},[createBaseVNode("div",{class:normalizeClass(["input",!m.value&&"disabled"])},[withDirectives(createBaseVNode("input",{disabled:!m.value,type:o.value?"text":"password",name:"password","onUpdate:modelValue":T[1]||(T[1]=F=>u.value=F),placeholder:M.$t("passwordDialog.enterPwdPlaceholder")},null,8,_hoisted_5$a),[[vModelDynamic,u.value]]),createBaseVNode("span",{class:"eye-btn",onClick:T[2]||(T[2]=F=>o.value=!o.value)},[o.value?(openBlock(),createBlock(I,{key:0})):(openBlock(),createBlock(N,{key:1}))])],2),withDirectives(createBaseVNode("div",_hoisted_6$7,[createBaseVNode("p",null,toDisplayString$1(g.value),1)],512),[[vShow,g.value]])],2)]),createBaseVNode("div",_hoisted_7$7,[createBaseVNode("div",_hoisted_8$5,[createBaseVNode("div",{class:normalizeClass(["check",{active:d.value}]),onClick:T[3]||(T[3]=F=>d.value=!d.value)},[withDirectives(createVNode(D,null,null,512),[[vShow,d.value]])],2),createBaseVNode("span",null,toDisplayString$1(M.$t("passwordDialog.permissionPassword")),1)]),createBaseVNode("div",{class:normalizeClass(["input-container",!d.value&&"disable"])},[createBaseVNode("div",{class:normalizeClass(["input",!d.value&&"disabled"])},[withDirectives(createBaseVNode("input",{disabled:!d.value,type:f.value?"text":"password",name:"password","onUpdate:modelValue":T[4]||(T[4]=F=>s.value=F),placeholder:M.$t("passwordDialog.enterPwdPlaceholder")},null,8,_hoisted_9$5),[[vModelDynamic,s.value]]),createBaseVNode("span",{class:"eye-btn",onClick:T[5]||(T[5]=F=>f.value=!f.value)},[f.value?(openBlock(),createBlock(I,{key:0})):(openBlock(),createBlock(N,{key:1}))])],2),withDirectives(createBaseVNode("div",_hoisted_10$5,[createBaseVNode("p",null,toDisplayString$1(v.value),1)],512),[[vShow,v.value]])],2),createBaseVNode("div",{class:normalizeClass(["items",!d.value&&"disabled"])},[createBaseVNode("div",_hoisted_11$4,[createBaseVNode("div",{class:normalizeClass(["check",{active:x.allowsPrinting}]),onClick:T[6]||(T[6]=F=>d.value&&(x.allowsPrinting=!x.allowsPrinting))},[withDirectives(createVNode(D,null,null,512),[[vShow,x.allowsPrinting]])],2),createBaseVNode("span",null,toDisplayString$1(M.$t("passwordDialog.disablePrinting")),1)]),createBaseVNode("div",_hoisted_12$3,[createBaseVNode("div",{class:normalizeClass(["check",{active:x.allowsCopying}]),onClick:T[7]||(T[7]=F=>d.value&&(x.allowsCopying=!x.allowsCopying))},[withDirectives(createVNode(D,null,null,512),[[vShow,x.allowsCopying]])],2),createBaseVNode("span",null,toDisplayString$1(M.$t("passwordDialog.disableCopying")),1)]),createBaseVNode("div",_hoisted_13$3,[createBaseVNode("div",{class:normalizeClass(["check",{active:x.allowsDocumentChanges}]),onClick:T[8]||(T[8]=F=>d.value&&(x.allowsDocumentChanges=!x.allowsDocumentChanges))},[withDirectives(createVNode(D,null,null,512),[[vShow,x.allowsDocumentChanges]])],2),createBaseVNode("span",null,toDisplayString$1(M.$t("passwordDialog.disableEdit")),1)])],2)])]),createBaseVNode("div",_hoisted_14$3,[createBaseVNode("p",null,toDisplayString$1(M.$t("passwordDialog.note[0]")),1),createBaseVNode("p",null,toDisplayString$1(M.$t("passwordDialog.note[1]")),1),createBaseVNode("p",null,toDisplayString$1(M.$t("passwordDialog.note[2]")),1)]),createBaseVNode("div",_hoisted_15$3,[createBaseVNode("span",{onClick:P},toDisplayString$1(M.$t("cancel")),1),createBaseVNode("span",{class:normalizeClass(["blue",{disabled:!u.value&&m.value||!s.value&&d.value||!m.value&&!d.value||d.value&&!x.allowsPrinting&&!x.allowsCopying&&!x.allowsDocumentChanges}]),onClick:S},toDisplayString$1(M.$t("passwordDialog.encrypt")),3)])]),_:1},8,["title"])],512)),[[vShow,k.value]])}}},EnterPassword_vue_vue_type_style_index_0_lang="",_hoisted_1$1o={id:"passwordDialog",class:"password-dialog enter-password-dialog"},_hoisted_2$1f={class:"password-container"},_hoisted_3$13={class:"modal-container"},_hoisted_4$g={class:"wrapper"},_hoisted_5$9={class:"header-container"},_hoisted_6$6=createBaseVNode("span",{class:"title"},null,-1),_hoisted_7$6={class:"password-title"},_hoisted_8$4={class:"input-container"},_hoisted_9$4=["type","placeholder"],_hoisted_10$4=createBaseVNode("div",{class:"wrong-password",id:"passwordText"},null,-1),_hoisted_11$3={class:"set-btn",id:"passwordSubmit"},_sfc_main$1G={__name:"EnterPassword",setup(e){const n=ref(!1),r=o=>{o.param===!0||o.param===!1?n.value=o.param:n.value=!n.value};return(o,u)=>{const s=__unplugin_components_0$f,w=_sfc_main$4l,g=__unplugin_components_2$a,v=__unplugin_components_3$5,y=__unplugin_components_4$5;return openBlock(),createElementBlock("div",_hoisted_1$1o,[createBaseVNode("div",_hoisted_2$1f,[createBaseVNode("div",_hoisted_3$13,[createBaseVNode("div",_hoisted_4$g,[createBaseVNode("div",_hoisted_5$9,[_hoisted_6$6,createVNode(w,{class:"close-button",id:"passwordCancel"},{default:withCtx(()=>[createVNode(s)]),_:1})]),createVNode(g,{class:"lock-icon"}),createBaseVNode("div",_hoisted_7$6,toDisplayString$1(o.$t("passwordDialog.enterPwd")),1),createBaseVNode("div",_hoisted_8$4,[createBaseVNode("input",{id:"password",type:n.value?"text":"password",name:"password",placeholder:o.$t("passwordDialog.enterPwdPlaceholder")},null,8,_hoisted_9$4),createBaseVNode("span",{class:"eye-btn",id:"eyeVisible",onClick:r},[n.value?(openBlock(),createBlock(v,{key:0})):(openBlock(),createBlock(y,{key:1}))]),_hoisted_10$4]),createBaseVNode("span",_hoisted_11$3,toDisplayString$1(o.$t("ok")),1)])])])])}}},_sfc_main$1F={},_hoisted_1$1n={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1e=createBaseVNode("path",{d:"M7 4.07123L13 10.071L7 16.0709",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$12=[_hoisted_2$1e];function _sfc_render$S(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1n,_hoisted_3$12)}const __unplugin_components_10$3=_export_sfc(_sfc_main$1F,[["render",_sfc_render$S]]),_sfc_main$1E={},_hoisted_1$1m={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$1d=createBaseVNode("path",{d:"M13 4.07123L7 10.071L13 16.0709",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$11=[_hoisted_2$1d];function _sfc_render$R(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1m,_hoisted_3$11)}const __unplugin_components_0$e=_export_sfc(_sfc_main$1E,[["render",_sfc_render$R]]),PageNavOverlay_vue_vue_type_style_index_0_lang="",_hoisted_1$1l={key:0,class:"page-nav","data-element":"pageNavOverlay"},_hoisted_2$1c={class:"form-container"},_sfc_main$1D={__name:"PageNavOverlay",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=ref(n.getCurrentPage);effect(()=>o.value=n.getCurrentPage);const u=computed(()=>n.getFullMode),s=computed(()=>n.getCurrentPage===1),w=computed(()=>r.getTotalPages),g=computed(()=>w.value===n.getCurrentPage);watch(o,(d,f)=>{d!==""&&w.value!==0&&(d>w.value||d<=0)&&(o.value=f)});const v=()=>{core.previousPage()&&n.setCurrentPage(core.getCurrentPage())},y=()=>{core.nextPage()&&n.setCurrentPage(core.getCurrentPage())},m=d=>{if(d.target.blur(),!d.target.value){o.value=n.getCurrentPage;return}core.pageNumberChanged(d.target)};return(d,f)=>{const x=__unplugin_components_0$e,k=_sfc_main$4l,P=__unplugin_components_10$3;return w.value>0&&!u.value?(openBlock(),createElementBlock("div",_hoisted_1$1l,[createVNode(k,{className:"side-arrow-container",img:"icon-previous-left",title:s.value?null:d.$t("previousPage"),onClick:v,disabled:s.value},{default:withCtx(()=>[createVNode(x)]),_:1},8,["title","disabled"]),createBaseVNode("div",_hoisted_2$1c,[withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":f[0]||(f[0]=S=>o.value=S),onInput:f[1]||(f[1]=(...S)=>d.onChange&&d.onChange(...S)),onBlur:m,onKeydown:withKeys(m,["enter"]),tabIndex:"-1",style:normalizeStyle({width:o.value.toString().length*8+2+"px"}),pattern:"\\d*",onkeypress:"return (/[\\d]/.test(String.fromCharCode(event.keyCode)))",name:"page-nav"},null,36),[[vModelText,o.value]]),createBaseVNode("span",null,toDisplayString$1(`/${w.value}`),1)]),createVNode(k,{className:"side-arrow-container",img:"icon-next-right",title:g.value?null:d.$t("nextPage"),onClick:y,disabled:g.value},{default:withCtx(()=>[createVNode(P)]),_:1},8,["title","disabled"])])):createCommentVNode("",!0)}}},DocumentContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$1k=createStaticVNode('<div id="printServiceDialog" class="print-dialog"><div class="print-container"><div class="print-title">Preparing document for printing\u2026</div><div class="print-progress"><progress value="0" max="100"></progress><span class="relative-progress">0%</span></div></div></div>',1),_hoisted_2$1b=["innerHTML"],_hoisted_3$10={class:"loading"},_hoisted_4$f={class:"upload-container"},_hoisted_5$8={for:"fileInput"},_sfc_main$1C={__name:"DocumentContainer",props:["isHeaderDisabled"],setup(e){const{isHeaderDisabled:n}=e,{loadDocument:r,initializeViewer:o,initConfig:u,getDocumentViewer:s,switchTool:w,switchAnnotationEditorMode:g}=core,v=ref(),y=ref(),m=useViewerStore(),d=useDocumentStore(),f=computed(()=>m.getCustomLoading),x=window.localStorage.getItem("customStamps"),k=window.localStorage.getItem("electronicSignatures"),P=window.localStorage.getItem("digitalSignatures");x&&m.setCustomStamps(JSON.parse(x)),k&&m.setElectronicSignature(JSON.parse(k)),P&&m.setDigitalSignature(JSON.parse(P));const S=computed(()=>m.getDisableSignatureTool),E=computed(()=>m.isElementOpen("leftPanel")),M=computed(()=>isMobileDevice?0:E.value?260:0),T=computed(()=>isMobileDevice?0:m.isElementOpen("rightPanel")||m.isElementOpen("pageModePanel")||m.isElementOpen("stampPanel")||m.isElementOpen("linkPanel")||m.isElementOpen("contentEditorPanel")||m.isElementOpen("colorSeparationPanel")||m.isElementOpen("measurePanel")||m.isElementOpen("freetextPanel")?260:0),D=computed(()=>m.getToolMode),I=computed(()=>m.getCompareStatus),N=computed(()=>n||["view","document","separation"].includes(m.getToolMode)||D.value==="compare"&&I.value!=="finished"?0:["redaction","remove"].includes(Q.value)?window.innerWidth>500?44+48:44+88:D.value==="sign"&&S.value?0:ne.value&&D.value==="sign"?44+44:44),O=computed(()=>m.getUploadLoading&&m.getUpload),F=computed(()=>m.getActiveElementTab("leftPanel")),U=computed(()=>m.getUpload),Y=computed(()=>m.getDisabledElements("pageNavOverlay")),Q=computed(()=>d.getActiveTool),q=computed(()=>m.getScale),ne=computed(()=>m.getSignatureVerify),J=computed(()=>m.getCommonLoading),re=computed(()=>m.getVerified);let X=100,j=0;const Z=getHashParameters("d","");function W(){if(!isMobileDevice||Q.value==="polygon"||Q.value==="polyline")return;const ke=50,Ce=2,Pe=q.value<X+Ce*ke?q.value+ke:X;m.setCurrentScale(Pe/100),core.scaleChanged(Pe/100)}function te(ke){const Ce=v.value.querySelector(".page-nav");if(ke.target.nodeName==="A"||(Ce==null?void 0:Ce.contains(ke.target))||ke.target.nodeName==="rect")return;const Pe=new Date().getTime();Pe-j<300&&W(),j=Pe}async function le(ke){const Ce=ke.target.files[0];if(!Ce)return;E.value&&m.closeElement("leftPanel"),m.$patch({fullMode:!1,currentPage:0,scale:"",themeMode:"Light",pageMode:0,scrollMode:"Vertical",activeTab:0,searchStatus:!1,activeElements:{leftPanel:!1,rightPanel:!1,pageModePanel:!1},activeElementsTab:{leftPanel:"THUMBS",rightPanel:"GENERAL"},signatureVerify:0}),d.resetSetting(),core.clearSearchResults(),d.setToolState(""),m.setActiveToolMode("view"),m.setUploadLoading(!0);let Pe=Ce.name;m.setUpload(!0);let Me=URL.createObjectURL(Ce);await Ee(Me,{filename:Pe}),m.setUploadLoading(!1),URL.revokeObjectURL(Me)}const oe=computed(()=>d.getLoadingProgress);async function Ee(ke,{filename:Ce=null,password:Pe=""}){const Me={extension:getHashParameters("extension",null),filename:getHashParameters("filename",null)||Ce,externalPath:getHashParameters("p",""),documentId:getHashParameters("did",null),progress:d.setLoadingProgress,pageChangedCallback:m.setCurrentPage,scaleChangedCallback:m.setCurrentScale,annotationsNumChangedCallback:d.setAnnotationsCount,distanceChangedCallback:d.setDistance,permissionPasswordCallback:()=>m.openElement("permissionPasswordDialog"),password:Pe};try{const ye=await r(ke,Me);if(!ye||!ye.verified)return;re.value||(m.setVerified(ye.verified),m.setLicense(s()._license));const{pwd:_e}=ye;d.setFileHasPwd(!!_e),d.setPassword(_e),d.setCurrentPdfData(ke,Me),d.setOutline(core.getOutlines())}catch(ye){if(console.log(ye),ye==="invalid_file_error"||ye==="no_password_given"||ye==="incorrect_password"){m.setUpload(!1),m.resetSetting();const _e=document.getElementById("fileInput");_e.value="",d.setCurrentPdfData();return}}const Le=core.getPagesCount(),Te=core.getScale();d.setTotalPages(Le),m.setCurrentPage(1),m.setCurrentScale(Te),X=Math.round(Te*100)}window.instance.initOptions=async ke=>{m.setUpload(!0),m.setUploadLoading(!0),await u(ke),!Z&&!ke.initialDoc&&(m.setUpload(!1),m.setUploadLoading(!1)),ke.renderLayerPermission||m.setDisabledElements("layers");const Ce=ke&&ke.webviewerServer?ke.webviewerServer:"Standalone";m.setWebviewerMode(Ce);const Pe=we=>{we!==D.value&&m.setActiveToolMode(we)};core.addEvent("toolModeChanged",Pe);const Me=({tool:we})=>{d.setActiveTool(we)};core.addEvent("toolChanged",Me);const Le=document.querySelector(".thumbnail-view"),Te=document.querySelector(".annotation-view"),ye=document.querySelector(".outline-view"),_e=document.querySelector(".findbar-view");o({container:v.value,viewer:y.value,thumbnailView:Le,outlineView:ye,annotationView:Te,findbarView:_e,toggleButton:document.querySelector(".toggle-button")}),ke.autoJumpNextSign&&d.setAutoJumpNextSign(!0),ke.disableDigitalSignature&&d.setDisableDigitalSignature(ke.disableDigitalSignature),ke.disableElectronicSignature&&d.setDisableElectronicSignature(ke.disableElectronicSignature),core.addEvent("onPagesUpdated",we=>{const{pageNumber:Se}=we;d.setOutline(core.getOutlines());const $e=core.getPagesCount(),Be=core.getScale();d.setTotalPages($e),m.setCurrentPage(Se||1),m.setCurrentScale(Be);const Oe=m.getScrollMode,Ge=m.getPageMode,Ie=Oe==="Vertical"?0:1;core.switchScrollMode(Ie),core.switchSpreadMode(Ge)})},window.instances.UI.loadDocument=async(ke,{filename:Ce="",password:Pe=""}={})=>{if(!ke)return;E.value&&m.closeElement("leftPanel"),m.$patch({fullMode:!1,currentPage:0,scale:"",themeMode:"Light",pageMode:0,scrollMode:"Vertical",activeTab:0,searchStatus:!1,activeElements:{leftPanel:!1,rightPanel:!1},activeElementsTab:{leftPanel:"THUMBS",rightPanel:"GENERAL"}}),d.resetSetting(),core.clearSearchResults(),d.setToolState(""),m.setActiveToolMode("view"),m.setUploadLoading(!0),m.setUpload(!0);let Me=typeof ke=="string"?ke:URL.createObjectURL(ke);await Ee(Me,{filename:ke.name||Ce,password:Pe}),m.setUploadLoading(!1)};const Ae=(ke,Ce)=>{const Pe=ve(ke),Le=core.getSelectedPage(Pe,Pe).first;if(Le<1)return;const Te=core.windowToPage(Pe,Le);core.eventBus().dispatch(Ce,{event:ke,...Te})},ve=ke=>{var Te;const Ce=core.getScrollViewElement();let Pe=((Te=v.value)==null?void 0:Te.style.marginLeft)||0;Pe=parseFloat(Pe);const Me=Ce.scrollLeft||0,Le=Ce.scrollTop||0;return{x:ke.pageX+Me-Pe,y:ke.pageY+Le}};return onMounted(()=>{document.documentElement.addEventListener("keydown",ke=>{if(ke.target.tagName==="INPUT"||ke.target.tagName==="TEXTAREA")return;(ke.keyCode||ke.which)===27&&Q.value&&(d.setToolState(Q.value),m.toggleActiveHand(!1),w(0),g(0))})}),(ke,Ce)=>{const Pe=_sfc_main$1D,Me=_sfc_main$1G,Le=_sfc_main$1H,Te=_sfc_main$1J,ye=_sfc_main$1O,_e=_sfc_main$1P,we=_sfc_main$1Q,Se=_sfc_main$1R,$e=_sfc_main$1U,Be=_sfc_main$1Y,Oe=_sfc_main$1$,Ge=_sfc_main$20,Ie=_sfc_main$21,je=__unplugin_components_13$1,qe=_sfc_main$22,Ue=_sfc_main$27,Je=_sfc_main$2f,et=_sfc_main$2h,nt=_sfc_main$2j,st=_sfc_main$2k,gt=_sfc_main$2l,_t=_sfc_main$2w,wt=__unplugin_components_22$1,He=_sfc_main$2Y;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{ref_key:"mainContainer",ref:v,class:normalizeClass(["document-container",{under:D.value==="compare"&&I.value!=="finished"||D.value==="document","no-touch":["selectText","highlight","underline","squiggly","strikeout"].includes(Q.value),redact:["redaction","remove"].includes(Q.value)}]),style:normalizeStyle({width:`calc(100% - ${M.value}px - ${T.value}px)`,"margin-left":`${M.value}px`,"margin-right":`${T.value}px`,"margin-top":`${N.value}px`,top:e.isHeaderDisabled?"0px":"44px"}),onDblclick:W,onClick:te},[createBaseVNode("div",{ref_key:"viewerContainer",ref:y,class:"document",onClick:Ce[0]||(Ce[0]=Ve=>Ae(Ve,"pdfClick")),onMousedown:Ce[1]||(Ce[1]=Ve=>Ae(Ve,"pdfMousedown")),onDblclick:Ce[2]||(Ce[2]=Ve=>Ae(Ve,"pdfDbclick"))},null,544),Y.value?createCommentVNode("",!0):(openBlock(),createBlock(Pe,{key:0,style:normalizeStyle({left:`calc(50% + ${M.value/2}px - ${T.value/2}px)`})},null,8,["style"]))],38),createVNode(Me),_hoisted_1$1k,createVNode(Le),createVNode(Te),createVNode(ye),createVNode(_e),createVNode(we),createVNode(Se),createVNode($e),createVNode(Be),createVNode(Oe),createVNode(Ge),createVNode(Ie),O.value&&oe.value<100?(openBlock(),createElementBlock("div",{key:0,class:"loading-state",innerHTML:f.value?f.value.element:`${ke.$t("loading")}...`,style:normalizeStyle(f.value&&f.value.styles?f.value.styles:"")},null,12,_hoisted_2$1b)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["mask",{active:J.value}])},[withDirectives(createBaseVNode("div",_hoisted_3$10,[createVNode(je)],512),[[vShow,J.value]])],2),withDirectives(createBaseVNode("div",_hoisted_4$f,[createBaseVNode("input",{id:"fileInput",type:"file",accept:".pdf",onChange:le,name:"document"},null,32),createBaseVNode("label",_hoisted_5$8,toDisplayString$1(ke.$t("upload")),1)],512),[[vShow,!U.value&&F.value!=="COMPARISON"&&["compare","view"].includes(D.value)]]),createVNode(qe),createVNode(Ue),createVNode(Je),createVNode(et),createVNode(nt),createVNode(st),createVNode(gt),createVNode(_t),createVNode(wt),createVNode(He)],64)}}},SearchItem_vue_vue_type_style_index_0_lang="",_hoisted_1$1j={key:0,class:"page-title"},_hoisted_2$1a=["innerHTML"],_sfc_main$1B={__name:"SearchItem",props:["searchResults","result","currentIndex"],setup(e){const{searchResults:n,result:r,currentIndex:o}=e,u=o===0?o:o-1,s=n[o],w=n[u],g=w===s,v=w.pageNum!==s.pageNum,y=new RegExp(r.searchValue,"gi"),m=r.content.replace(y,function(x,k){return`<span class="highlight">${x}</span>`}),d=useDocumentStore(),f=x=>{core.setActiveSearchResult(toRaw(n[x]),x),d.setActiveSearchResult({index:x,searchResult:n[x]})};return(x,k)=>(openBlock(),createElementBlock(Fragment,null,[g||v?(openBlock(),createElementBlock("div",_hoisted_1$1j,toDisplayString$1(e.result.pageNum),1)):createCommentVNode("",!0),createBaseVNode("div",{class:"item-content",innerHTML:unref(m),onClick:k[0]||(k[0]=P=>f(e.currentIndex))},null,8,_hoisted_2$1a)],64))}},SearchContent_vue_vue_type_style_index_0_lang="",_hoisted_1$1i={class:"search-number"},_hoisted_2$19=createBaseVNode("div",{id:"findResultsCount",class:"toolbarLabel"},null,-1),_hoisted_3$$={class:"search-container"},_hoisted_4$e={key:1,class:"no-annotations"},_sfc_main$1A={__name:"SearchContent",setup(e){const n=useDocumentStore(),r=computed(()=>n.getSearchResults);return(o,u)=>{const s=_sfc_main$1B;return openBlock(),createElementBlock(Fragment,null,[withDirectives(createBaseVNode("div",_hoisted_1$1i,[_hoisted_2$19,createBaseVNode("div",null,toDisplayString$1(o.$t("leftPanel.page")),1)],512),[[vShow,r.value.length]]),createBaseVNode("div",_hoisted_3$$,[r.value.length?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(r.value,(w,g)=>(openBlock(),createBlock(s,{key:w,searchResults:r.value,result:w,currentIndex:g},null,8,["searchResults","result","currentIndex"]))),128)):(openBlock(),createElementBlock("div",_hoisted_4$e,toDisplayString$1(o.$t("leftPanel.noResults")),1))])],64)}}};var FUNC_ERROR_TEXT="Expected a function",NAN=0/0,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(e,n,r){var o,u,s,w,g,v,y=0,m=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);n=toNumber(n)||0,isObject$1(r)&&(m=!!r.leading,d="maxWait"in r,s=d?nativeMax(toNumber(r.maxWait)||0,n):s,f="trailing"in r?!!r.trailing:f);function x(N){var O=o,F=u;return o=u=void 0,y=N,w=e.apply(F,O),w}function k(N){return y=N,g=setTimeout(E,n),m?x(N):w}function P(N){var O=N-v,F=N-y,U=n-O;return d?nativeMin(U,s-F):U}function S(N){var O=N-v,F=N-y;return v===void 0||O>=n||O<0||d&&F>=s}function E(){var N=now();if(S(N))return M(N);g=setTimeout(E,P(N))}function M(N){return g=void 0,f&&o?x(N):(o=u=void 0,w)}function T(){g!==void 0&&clearTimeout(g),y=0,o=v=u=g=void 0}function D(){return g===void 0?w:M(now())}function I(){var N=now(),O=S(N);if(o=arguments,u=this,v=N,O){if(g===void 0)return k(v);if(d)return g=setTimeout(E,n),x(v)}return g===void 0&&(g=setTimeout(E,n)),w}return I.cancel=T,I.flush=D,I}function isObject$1(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function isObjectLike(e){return!!e&&typeof e=="object"}function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toNumber(e){if(typeof e=="number")return e;if(isSymbol(e))return NAN;if(isObject$1(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=isObject$1(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_debounce=debounce;const SearchHeader_vue_vue_type_style_index_0_lang="",_hoisted_1$1h={id:"findbarInputContainer",class:"findbar-input-container"},_hoisted_2$18={class:"input-container"},_hoisted_3$_=["placeholder"],_hoisted_4$d={class:"button-container"},waitTime=200,_sfc_main$1z={__name:"SearchHeader",setup(e){const n=ref(!1),r=ref(""),o=useDocumentStore(),u=useViewerStore(),s=ref([]),w=ref(0),g=()=>{const k=s.value,P=w.value;if(k.length>0){const S=P<=0?k.length-1:P-1;core.setActiveSearchResult(toRaw(k[S]),S),o.setActiveSearchResult({index:S,searchResult:k[S]}),w.value=S}},v=()=>{const k=s.value,P=w.value;if(k.length>0){const S=P===k.length-1?0:P+1;core.setActiveSearchResult(toRaw(k[S]),S),o.setActiveSearchResult({index:S,searchResult:k[S]}),w.value=S}},y=()=>{n.value=!1,r.value="",o.setSearchResults([]),core.clearSearchResults(),s.value=[],o.setActiveSearchResult(null)},m=lodash_debounce(async k=>{if(k&&k.length>0){n.value=!0;const P=await core.search(k);o.setSearchResults(P),s.value=P,o.setActiveSearchResult({index:0,searchResult:P[0]})}else y()},waitTime),d=k=>{m(k)};watch(r,()=>{d(r.value),w.value=0});const f=computed(()=>u.getActiveElementTab("leftPanel")),x=computed(()=>u.isElementOpen("leftPanel"));return watch([f,x],()=>{(f.value!=="SEARCH"||!x.value)&&(core.clearSearchResults(),r.value="",w.value=0,o.setActiveSearchResult(null))}),(k,P)=>{const S=__unplugin_components_0$v,E=__unplugin_components_0$e,M=_sfc_main$4l,T=__unplugin_components_10$3;return openBlock(),createElementBlock("div",{id:"findbar",class:normalizeClass(["findbar",{mobile:unref(isMobileDevice)}])},[createBaseVNode("div",_hoisted_1$1h,[createBaseVNode("div",_hoisted_2$18,[withDirectives(createBaseVNode("input",{type:"text",autocomplete:"off",placeholder:k.$t("leftPanel.searchPdf"),"onUpdate:modelValue":P[0]||(P[0]=D=>r.value=D),name:"search"},null,8,_hoisted_3$_),[[vModelText,r.value]]),createVNode(S,{id:"emptyInput",class:normalizeClass(["empty-input",!r.value&&"hidden"]),onClick:y},null,8,["class"])]),createBaseVNode("div",_hoisted_4$d,[createVNode(M,{img:"icon-previous-left",id:"findPrevious",class:normalizeClass(["toolbarButton",!s.value.length&&"disabled"]),title:k.$t("leftPanel.previousPhrase"),onClick:g},{default:withCtx(()=>[createVNode(E)]),_:1},8,["class","title"]),createVNode(M,{img:"icon-next-right",id:"findNext",class:normalizeClass(["toolbarButton",!s.value.length&&"disabled"]),title:k.$t("leftPanel.nextPhrase"),onClick:v},{default:withCtx(()=>[createVNode(T)]),_:1},8,["class","title"])])])],2)}}},_sfc_main$1y={};function _sfc_render$Q(e,n){const r=_sfc_main$1z,o=_sfc_main$1A;return openBlock(),createElementBlock(Fragment,null,[createVNode(r),createVNode(o)],64)}const __unplugin_components_6$1=_export_sfc(_sfc_main$1y,[["render",_sfc_render$Q]]),_sfc_main$1x={},_hoisted_1$1g={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$17=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 6C11 6.55228 10.5523 7 10 7C9.44772 7 9 6.55228 9 6C9 5.44772 9.44772 5 10 5C10.5523 5 11 5.44772 11 6ZM11 10C11 10.5523 10.5523 11 10 11C9.44772 11 9 10.5523 9 10C9 9.44772 9.44772 9 10 9C10.5523 9 11 9.44772 11 10ZM10 15C10.5523 15 11 14.5523 11 14C11 13.4477 10.5523 13 10 13C9.44772 13 9 13.4477 9 14C9 14.5523 9.44772 15 10 15Z",fill:"currentColor"},null,-1),_hoisted_3$Z=[_hoisted_2$17];function _sfc_render$P(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1g,_hoisted_3$Z)}const __unplugin_components_4$4=_export_sfc(_sfc_main$1x,[["render",_sfc_render$P]]),SignatureContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$1f={class:"container"},_hoisted_2$16={class:"signature-title"},_hoisted_3$Y={key:0,class:"signatures"},_hoisted_4$c=["onClick"],_hoisted_5$7=["title"],_hoisted_6$5={class:"drop-down medium"},_hoisted_7$5={key:1,class:"no-signatures"},_sfc_main$1w={__name:"SignatureContainer",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>r.getSignatures),u=computed(()=>r.getSelectedSignature),s=ref(!1),w=d=>{r.initSignatures(d)};core.addEvent("getSignatures",w);const g=d=>{d<0||core.pageNumberChanged({value:(d*1+1).toString()})},v=()=>{s.value=!1,r.setSelectedSignature(null)},y=d=>{s.value=!1,n.openElement(d)},m=(d,f)=>{s.value=!0,d.index=f,r.setSelectedSignature(d)};return(d,f)=>{const x=__unplugin_components_0$g,k=__unplugin_components_1$2,P=__unplugin_components_2$b,S=__unplugin_components_4$4,E=_sfc_main$4l;return openBlock(),createElementBlock("div",_hoisted_1$1f,[createBaseVNode("div",_hoisted_2$16,toDisplayString$1(d.$t("leftPanel.signatureList")),1),o.value.length?(openBlock(),createElementBlock("div",_hoisted_3$Y,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,(M,T)=>(openBlock(),createElementBlock("div",{key:T,class:normalizeClass(["signature",{focus:u.value&&u.value.index===M.index}]),onClick:D=>g(M.pageIndex)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(M.signerList,(D,I)=>{var N;return openBlock(),createElementBlock(Fragment,null,[D.isCertTrusted&&D.isSignVerified?(openBlock(),createBlock(x,{key:0})):D.isCertTrusted||D.isSignVerified?(openBlock(),createBlock(k,{key:1})):(openBlock(),createBlock(P,{key:2})),createBaseVNode("span",{title:M.name},toDisplayString$1((D.certificateList[0].subject.CN?D.certificateList[0].subject.CN:"")+"'s signature"),9,_hoisted_5$7),createVNode(unref(NPopover),{placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,show:((N=u.value)==null?void 0:N.index)===T&&s.value,onClickoutside:v},{trigger:withCtx(()=>[createVNode(E,{class:"more",onClick:withModifiers(O=>m(M,T),["stop"])},{default:withCtx(()=>[createVNode(S)]),_:2},1032,["onClick"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_6$5,[createBaseVNode("div",{class:"drop-item",onClick:f[0]||(f[0]=O=>y("signatureDetailsDialog"))},toDisplayString$1(d.$t("leftPanel.signatureDetails")),1),createBaseVNode("div",{class:"drop-item",onClick:f[1]||(f[1]=O=>y("certificateViewerDialog"))},toDisplayString$1(d.$t("leftPanel.certificationDetails")),1),createBaseVNode("div",{class:"drop-item",onClick:f[2]||(f[2]=O=>y("deleteConfirmDialog"))},toDisplayString$1(d.$t("delete")),1)])]),_:2},1032,["show"])],64)}),256))],10,_hoisted_4$c))),128))])):(openBlock(),createElementBlock("div",_hoisted_7$5,toDisplayString$1(d.$t("leftPanel.noSignatures")),1))])}}},Icon_vue_vue_type_style_index_0_lang="",_hoisted_1$1e=["xlink:href"],_sfc_main$1v={__name:"Icon",props:["className","color","glyph","fillColor","strokeColor","disabled"],setup(e){const n=e,r={filter:n.color};n.disabled||(r.color=n.color);const o=computed(()=>`#${n.glyph}`);return(u,s)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["icon",[e.className,{disabled:e.disabled}]]),style:r},[(openBlock(),createElementBlock("svg",mergeProps({class:"svg-icon","aria-hidden":"true"},toHandlers(u.$attrs,!0)),[createBaseVNode("use",{"xlink:href":o.value},null,8,_hoisted_1$1e)],16))],2))}};var axios$3={exports:{}},axios$2={exports:{}},bind$2=function e(n,r){return function(){for(var u=new Array(arguments.length),s=0;s<u.length;s++)u[s]=arguments[s];return n.apply(r,u)}},bind$1=bind$2,toString=Object.prototype.toString,kindOf=function(e){return function(n){var r=toString.call(n);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest(e){return e=e.toLowerCase(),function(r){return kindOf(r)===e}}function isArray(e){return Array.isArray(e)}function isUndefined(e){return typeof e>"u"}function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){var n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&isArrayBuffer(e.buffer),n}function isString(e){return typeof e=="string"}function isNumber(e){return typeof e=="number"}function isObject(e){return e!==null&&typeof e=="object"}function isPlainObject(e){if(kindOf(e)!=="object")return!1;var n=Object.getPrototypeOf(e);return n===null||n===Object.prototype}var isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList");function isFunction(e){return toString.call(e)==="[object Function]"}function isStream(e){return isObject(e)&&isFunction(e.pipe)}function isFormData(e){var n="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||toString.call(e)===n||isFunction(e.toString)&&e.toString()===n)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(e,n){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),isArray(e))for(var r=0,o=e.length;r<o;r++)n.call(null,e[r],r,e);else for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&n.call(null,e[u],u,e)}function merge(){var e={};function n(u,s){isPlainObject(e[s])&&isPlainObject(u)?e[s]=merge(e[s],u):isPlainObject(u)?e[s]=merge({},u):isArray(u)?e[s]=u.slice():e[s]=u}for(var r=0,o=arguments.length;r<o;r++)forEach(arguments[r],n);return e}function extend$1(e,n,r){return forEach(n,function(u,s){r&&typeof u=="function"?e[s]=bind$1(u,r):e[s]=u}),e}function stripBOM(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function inherits(e,n,r,o){e.prototype=Object.create(n.prototype,o),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)}function toFlatObject(e,n,r){var o,u,s,w={};n=n||{};do{for(o=Object.getOwnPropertyNames(e),u=o.length;u-- >0;)s=o[u],w[s]||(n[s]=e[s],w[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,n))&&e!==Object.prototype);return n}function endsWith(e,n,r){e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=n.length;var o=e.indexOf(n,r);return o!==-1&&o===r}function toArray(e){if(!e)return null;var n=e.length;if(isUndefined(n))return null;for(var r=new Array(n);n-- >0;)r[n]=e[n];return r}var isTypedArray=function(e){return function(n){return e&&n instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),utils$a={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,isTypedArray,isFileList},utils$9=utils$a;function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function e(n,r,o){if(!r)return n;var u;if(o)u=o(r);else if(utils$9.isURLSearchParams(r))u=r.toString();else{var s=[];utils$9.forEach(r,function(v,y){v===null||typeof v>"u"||(utils$9.isArray(v)?y=y+"[]":v=[v],utils$9.forEach(v,function(d){utils$9.isDate(d)?d=d.toISOString():utils$9.isObject(d)&&(d=JSON.stringify(d)),s.push(encode(y)+"="+encode(d))}))}),u=s.join("&")}if(u){var w=n.indexOf("#");w!==-1&&(n=n.slice(0,w)),n+=(n.indexOf("?")===-1?"?":"&")+u}return n},utils$8=utils$a;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function e(n,r,o){return this.handlers.push({fulfilled:n,rejected:r,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function e(n){this.handlers[n]&&(this.handlers[n]=null)};InterceptorManager$1.prototype.forEach=function e(n){utils$8.forEach(this.handlers,function(o){o!==null&&n(o)})};var InterceptorManager_1=InterceptorManager$1,utils$7=utils$a,normalizeHeaderName$1=function e(n,r){utils$7.forEach(n,function(u,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(n[r]=u,delete n[s])})},AxiosError_1,hasRequiredAxiosError;function requireAxiosError(){if(hasRequiredAxiosError)return AxiosError_1;hasRequiredAxiosError=1;var e=utils$a;function n(u,s,w,g,v){Error.call(this),this.message=u,this.name="AxiosError",s&&(this.code=s),w&&(this.config=w),g&&(this.request=g),v&&(this.response=v)}e.inherits(n,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var r=n.prototype,o={};return["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(u){o[u]={value:u}}),Object.defineProperties(n,o),Object.defineProperty(r,"isAxiosError",{value:!0}),n.from=function(u,s,w,g,v,y){var m=Object.create(r);return e.toFlatObject(u,m,function(f){return f!==Error.prototype}),n.call(m,u.message,s,w,g,v),m.name=u.name,y&&Object.assign(m,y),m},AxiosError_1=n,AxiosError_1}var transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},utils$6=utils$a;function toFormData$1(e,n){n=n||new FormData;var r=[];function o(s){return s===null?"":utils$6.isDate(s)?s.toISOString():utils$6.isArrayBuffer(s)||utils$6.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function u(s,w){if(utils$6.isPlainObject(s)||utils$6.isArray(s)){if(r.indexOf(s)!==-1)throw Error("Circular reference detected in "+w);r.push(s),utils$6.forEach(s,function(v,y){if(!utils$6.isUndefined(v)){var m=w?w+"."+y:y,d;if(v&&!w&&typeof v=="object"){if(utils$6.endsWith(y,"{}"))v=JSON.stringify(v);else if(utils$6.endsWith(y,"[]")&&(d=utils$6.toArray(v))){d.forEach(function(f){!utils$6.isUndefined(f)&&n.append(m,o(f))});return}}u(v,m)}}),r.pop()}else n.append(w,o(s))}return u(e),n}var toFormData_1=toFormData$1,settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var e=requireAxiosError();return settle=function(r,o,u){var s=u.config.validateStatus;!u.status||!s||s(u.status)?r(u):o(new e("Request failed with status code "+u.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(u.status/100)-4],u.config,u.request,u))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var e=utils$a;return cookies=e.isStandardBrowserEnv()?function(){return{write:function(o,u,s,w,g,v){var y=[];y.push(o+"="+encodeURIComponent(u)),e.isNumber(s)&&y.push("expires="+new Date(s).toGMTString()),e.isString(w)&&y.push("path="+w),e.isString(g)&&y.push("domain="+g),v===!0&&y.push("secure"),document.cookie=y.join("; ")},read:function(o){var u=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL$1=function e(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)},combineURLs$1=function e(n,r){return r?n.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):n},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function e(n,r){return n&&!isAbsoluteURL(r)?combineURLs(n,r):r},parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var e=utils$a,n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(o){var u={},s,w,g;return o&&e.forEach(o.split(`
`),function(y){if(g=y.indexOf(":"),s=e.trim(y.substr(0,g)).toLowerCase(),w=e.trim(y.substr(g+1)),s){if(u[s]&&n.indexOf(s)>=0)return;s==="set-cookie"?u[s]=(u[s]?u[s]:[]).concat([w]):u[s]=u[s]?u[s]+", "+w:w}}),u},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var e=utils$a;return isURLSameOrigin=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),u;function s(w){var g=w;return r&&(o.setAttribute("href",g),g=o.href),o.setAttribute("href",g),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return u=s(window.location.href),function(g){var v=e.isString(g)?s(g):g;return v.protocol===u.protocol&&v.host===u.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var CanceledError_1,hasRequiredCanceledError;function requireCanceledError(){if(hasRequiredCanceledError)return CanceledError_1;hasRequiredCanceledError=1;var e=requireAxiosError(),n=utils$a;function r(o){e.call(this,o==null?"canceled":o,e.ERR_CANCELED),this.name="CanceledError"}return n.inherits(r,e,{__CANCEL__:!0}),CanceledError_1=r,CanceledError_1}var parseProtocol,hasRequiredParseProtocol;function requireParseProtocol(){return hasRequiredParseProtocol||(hasRequiredParseProtocol=1,parseProtocol=function(n){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""}),parseProtocol}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var e=utils$a,n=requireSettle(),r=requireCookies(),o=buildURL$1,u=buildFullPath$1,s=requireParseHeaders(),w=requireIsURLSameOrigin(),g=transitional,v=requireAxiosError(),y=requireCanceledError(),m=requireParseProtocol();return xhr=function(f){return new Promise(function(k,P){var S=f.data,E=f.headers,M=f.responseType,T;function D(){f.cancelToken&&f.cancelToken.unsubscribe(T),f.signal&&f.signal.removeEventListener("abort",T)}e.isFormData(S)&&e.isStandardBrowserEnv()&&delete E["Content-Type"];var I=new XMLHttpRequest;if(f.auth){var N=f.auth.username||"",O=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";E.Authorization="Basic "+btoa(N+":"+O)}var F=u(f.baseURL,f.url);I.open(f.method.toUpperCase(),o(F,f.params,f.paramsSerializer),!0),I.timeout=f.timeout;function U(){if(!!I){var q="getAllResponseHeaders"in I?s(I.getAllResponseHeaders()):null,ne=!M||M==="text"||M==="json"?I.responseText:I.response,J={data:ne,status:I.status,statusText:I.statusText,headers:q,config:f,request:I};n(function(X){k(X),D()},function(X){P(X),D()},J),I=null}}if("onloadend"in I?I.onloadend=U:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(U)},I.onabort=function(){!I||(P(new v("Request aborted",v.ECONNABORTED,f,I)),I=null)},I.onerror=function(){P(new v("Network Error",v.ERR_NETWORK,f,I,I)),I=null},I.ontimeout=function(){var ne=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",J=f.transitional||g;f.timeoutErrorMessage&&(ne=f.timeoutErrorMessage),P(new v(ne,J.clarifyTimeoutError?v.ETIMEDOUT:v.ECONNABORTED,f,I)),I=null},e.isStandardBrowserEnv()){var Y=(f.withCredentials||w(F))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;Y&&(E[f.xsrfHeaderName]=Y)}"setRequestHeader"in I&&e.forEach(E,function(ne,J){typeof S>"u"&&J.toLowerCase()==="content-type"?delete E[J]:I.setRequestHeader(J,ne)}),e.isUndefined(f.withCredentials)||(I.withCredentials=!!f.withCredentials),M&&M!=="json"&&(I.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&I.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&I.upload&&I.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(T=function(q){!I||(P(!q||q&&q.type?new y:q),I.abort(),I=null)},f.cancelToken&&f.cancelToken.subscribe(T),f.signal&&(f.signal.aborted?T():f.signal.addEventListener("abort",T))),S||(S=null);var Q=m(F);if(Q&&["http","https","file"].indexOf(Q)===-1){P(new v("Unsupported protocol "+Q+":",v.ERR_BAD_REQUEST,f));return}I.send(S)})},xhr}var _null,hasRequired_null;function require_null(){return hasRequired_null||(hasRequired_null=1,_null=null),_null}var utils$5=utils$a,normalizeHeaderName=normalizeHeaderName$1,AxiosError$1=requireAxiosError(),transitionalDefaults=transitional,toFormData=toFormData_1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,n){!utils$5.isUndefined(e)&&utils$5.isUndefined(e["Content-Type"])&&(e["Content-Type"]=n)}function getDefaultAdapter(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=requireXhr()),e}function stringifySafely(e,n,r){if(utils$5.isString(e))try{return(n||JSON.parse)(e),utils$5.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(r||JSON.stringify)(e)}var defaults$4={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function e(n,r){if(normalizeHeaderName(r,"Accept"),normalizeHeaderName(r,"Content-Type"),utils$5.isFormData(n)||utils$5.isArrayBuffer(n)||utils$5.isBuffer(n)||utils$5.isStream(n)||utils$5.isFile(n)||utils$5.isBlob(n))return n;if(utils$5.isArrayBufferView(n))return n.buffer;if(utils$5.isURLSearchParams(n))return setContentTypeIfUnset(r,"application/x-www-form-urlencoded;charset=utf-8"),n.toString();var o=utils$5.isObject(n),u=r&&r["Content-Type"],s;if((s=utils$5.isFileList(n))||o&&u==="multipart/form-data"){var w=this.env&&this.env.FormData;return toFormData(s?{"files[]":n}:n,w&&new w)}else if(o||u==="application/json")return setContentTypeIfUnset(r,"application/json"),stringifySafely(n);return n}],transformResponse:[function e(n){var r=this.transitional||defaults$4.transitional,o=r&&r.silentJSONParsing,u=r&&r.forcedJSONParsing,s=!o&&this.responseType==="json";if(s||u&&utils$5.isString(n)&&n.length)try{return JSON.parse(n)}catch(w){if(s)throw w.name==="SyntaxError"?AxiosError$1.from(w,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):w}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:require_null()},validateStatus:function e(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$5.forEach(["delete","get","head"],function e(n){defaults$4.headers[n]={}});utils$5.forEach(["post","put","patch"],function e(n){defaults$4.headers[n]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$4,utils$4=utils$a,defaults$3=defaults_1,transformData$1=function e(n,r,o){var u=this||defaults$3;return utils$4.forEach(o,function(w){n=w.call(u,n,r)}),n},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(n){return!!(n&&n.__CANCEL__)}),isCancel$1}var utils$3=utils$a,transformData=transformData$1,isCancel=requireIsCancel(),defaults$2=defaults_1,CanceledError=requireCanceledError();function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError}var dispatchRequest$1=function e(n){throwIfCancellationRequested(n),n.headers=n.headers||{},n.data=transformData.call(n,n.data,n.headers,n.transformRequest),n.headers=utils$3.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(u){delete n.headers[u]});var r=n.adapter||defaults$2.adapter;return r(n).then(function(u){return throwIfCancellationRequested(n),u.data=transformData.call(n,u.data,u.headers,n.transformResponse),u},function(u){return isCancel(u)||(throwIfCancellationRequested(n),u&&u.response&&(u.response.data=transformData.call(n,u.response.data,u.response.headers,n.transformResponse))),Promise.reject(u)})},utils$2=utils$a,mergeConfig$2=function e(n,r){r=r||{};var o={};function u(m,d){return utils$2.isPlainObject(m)&&utils$2.isPlainObject(d)?utils$2.merge(m,d):utils$2.isPlainObject(d)?utils$2.merge({},d):utils$2.isArray(d)?d.slice():d}function s(m){if(utils$2.isUndefined(r[m])){if(!utils$2.isUndefined(n[m]))return u(void 0,n[m])}else return u(n[m],r[m])}function w(m){if(!utils$2.isUndefined(r[m]))return u(void 0,r[m])}function g(m){if(utils$2.isUndefined(r[m])){if(!utils$2.isUndefined(n[m]))return u(void 0,n[m])}else return u(void 0,r[m])}function v(m){if(m in r)return u(n[m],r[m]);if(m in n)return u(void 0,n[m])}var y={url:w,method:w,data:w,baseURL:g,transformRequest:g,transformResponse:g,paramsSerializer:g,timeout:g,timeoutMessage:g,withCredentials:g,adapter:g,responseType:g,xsrfCookieName:g,xsrfHeaderName:g,onUploadProgress:g,onDownloadProgress:g,decompress:g,maxContentLength:g,maxBodyLength:g,beforeRedirect:g,transport:g,httpAgent:g,httpsAgent:g,cancelToken:g,socketPath:g,responseEncoding:g,validateStatus:v};return utils$2.forEach(Object.keys(n).concat(Object.keys(r)),function(d){var f=y[d]||s,x=f(d);utils$2.isUndefined(x)&&f!==v||(o[d]=x)}),o},data,hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,data={version:"0.27.2"}),data}var VERSION=requireData().version,AxiosError=requireAxiosError(),validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(e,n){validators$1[e]=function(o){return typeof o===e||"a"+(n<1?"n ":" ")+e}});var deprecatedWarnings={};validators$1.transitional=function e(n,r,o){function u(s,w){return"[Axios v"+VERSION+"] Transitional option '"+s+"'"+w+(o?". "+o:"")}return function(s,w,g){if(n===!1)throw new AxiosError(u(w," has been removed"+(r?" in "+r:"")),AxiosError.ERR_DEPRECATED);return r&&!deprecatedWarnings[w]&&(deprecatedWarnings[w]=!0,console.warn(u(w," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(s,w,g):!0}};function assertOptions(e,n,r){if(typeof e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);for(var o=Object.keys(e),u=o.length;u-- >0;){var s=o[u],w=n[s];if(w){var g=e[s],v=g===void 0||w(g,s,e);if(v!==!0)throw new AxiosError("option "+s+" must be "+v,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new AxiosError("Unknown option "+s,AxiosError.ERR_BAD_OPTION)}}var validator$1={assertOptions,validators:validators$1},utils$1=utils$a,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,buildFullPath=buildFullPath$1,validator=validator$1,validators=validator.validators;function Axios$1(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function e(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=mergeConfig$1(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var o=r.transitional;o!==void 0&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var u=[],s=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(s=s&&x.synchronous,u.unshift(x.fulfilled,x.rejected))});var w=[];this.interceptors.response.forEach(function(x){w.push(x.fulfilled,x.rejected)});var g;if(!s){var v=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(v,u),v=v.concat(w),g=Promise.resolve(r);v.length;)g=g.then(v.shift(),v.shift());return g}for(var y=r;u.length;){var m=u.shift(),d=u.shift();try{y=m(y)}catch(f){d(f);break}}try{g=dispatchRequest(y)}catch(f){return Promise.reject(f)}for(;w.length;)g=g.then(w.shift(),w.shift());return g};Axios$1.prototype.getUri=function e(n){n=mergeConfig$1(this.defaults,n);var r=buildFullPath(n.baseURL,n.url);return buildURL(r,n.params,n.paramsSerializer)};utils$1.forEach(["delete","get","head","options"],function e(n){Axios$1.prototype[n]=function(r,o){return this.request(mergeConfig$1(o||{},{method:n,url:r,data:(o||{}).data}))}});utils$1.forEach(["post","put","patch"],function e(n){function r(o){return function(s,w,g){return this.request(mergeConfig$1(g||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:s,data:w}))}}Axios$1.prototype[n]=r(),Axios$1.prototype[n+"Form"]=r(!0)});var Axios_1=Axios$1,CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var e=requireCanceledError();function n(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var o;this.promise=new Promise(function(w){o=w});var u=this;this.promise.then(function(s){if(!!u._listeners){var w,g=u._listeners.length;for(w=0;w<g;w++)u._listeners[w](s);u._listeners=null}}),this.promise.then=function(s){var w,g=new Promise(function(v){u.subscribe(v),w=v}).then(s);return g.cancel=function(){u.unsubscribe(w)},g},r(function(w){u.reason||(u.reason=new e(w),o(u.reason))})}return n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.prototype.subscribe=function(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]},n.prototype.unsubscribe=function(o){if(!!this._listeners){var u=this._listeners.indexOf(o);u!==-1&&this._listeners.splice(u,1)}},n.source=function(){var o,u=new n(function(w){o=w});return{token:u,cancel:o}},CancelToken_1=n,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(n){return function(o){return n.apply(null,o)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){if(hasRequiredIsAxiosError)return isAxiosError;hasRequiredIsAxiosError=1;var e=utils$a;return isAxiosError=function(r){return e.isObject(r)&&r.isAxiosError===!0},isAxiosError}var utils=utils$a,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults$1=defaults_1;function createInstance(e){var n=new Axios(e),r=bind(Axios.prototype.request,n);return utils.extend(r,Axios.prototype,n),utils.extend(r,n),r.create=function(u){return createInstance(mergeConfig(e,u))},r}var axios$1=createInstance(defaults$1);axios$1.Axios=Axios;axios$1.CanceledError=requireCanceledError();axios$1.CancelToken=requireCancelToken();axios$1.isCancel=requireIsCancel();axios$1.VERSION=requireData().version;axios$1.toFormData=toFormData_1;axios$1.AxiosError=requireAxiosError();axios$1.Cancel=axios$1.CanceledError;axios$1.all=function e(n){return Promise.all(n)};axios$1.spread=requireSpread();axios$1.isAxiosError=requireIsAxiosError();axios$2.exports=axios$1;axios$2.exports.default=axios$1;(function(e){e.exports=axios$2.exports})(axios$3);const axios=getDefaultExportFromCjs(axios$3.exports);var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,n,r)=>n in e?__defProp(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,__spreadValues=(e,n)=>{for(var r in n||(n={}))__hasOwnProp.call(n,r)&&__defNormalProp(e,r,n[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(n))__propIsEnum.call(n,r)&&__defNormalProp(e,r,n[r]);return e},__spreadProps=(e,n)=>__defProps(e,__getOwnPropDescs(n));function useAxios(...e){const n=typeof e[0]=="string"?e[0]:void 0,r=isString$1(n)?1:0;let o={},u=axios,s={immediate:!!r,shallow:!0};const w=I=>!!(I!=null&&I.request);e.length>0+r&&(w(e[0+r])?u=e[0+r]:o=e[0+r]),e.length>1+r&&w(e[1+r])&&(u=e[1+r]),(e.length===2+r&&!w(e[1+r])||e.length===3+r)&&(s=e[e.length-1]);const g=shallowRef(),v=s.shallow?shallowRef():ref(),y=ref(!1),m=ref(!1),d=ref(!1),f=shallowRef(),x=axios.CancelToken.source;let k=x();const P=I=>{y.value||!m.value||(k.cancel(I),k=x(),d.value=!0,m.value=!1,y.value=!1)},S=I=>{m.value=I,y.value=!I},E=()=>new Promise((I,N)=>{until(y).toBe(!0).then(()=>I(D)).catch(N)}),M=(I,N)=>E().then(I,N),T=(I=n,N={})=>{f.value=void 0;const O=typeof I=="string"?I:n!=null?n:N.url;return O===void 0?(f.value=new axios$3.exports.AxiosError(axios$3.exports.AxiosError.ERR_INVALID_URL),y.value=!0,{then:M}):(P(),S(!0),u(O,__spreadProps(__spreadValues(__spreadValues({},o),typeof I=="object"?I:N),{cancelToken:k.token})).then(F=>{var U;g.value=F;const Y=F.data;v.value=Y,(U=s.onSuccess)==null||U.call(s,Y)}).catch(F=>{var U;f.value=F,(U=s.onError)==null||U.call(s,F)}).finally(()=>S(!1)),{then:M})};s.immediate&&n&&T();const D={response:g,data:v,error:f,finished:y,loading:m,isFinished:y,isLoading:m,cancel:P,isAborted:d,canceled:d,aborted:d,isCanceled:d,abort:P,execute:T};return __spreadProps(__spreadValues({},D),{then:M})}const Compare_vue_vue_type_style_index_0_lang="",_hoisted_1$1d=createBaseVNode("div",{class:"file-text"},[createBaseVNode("span",{class:"circle circle-red"}),createBaseVNode("p",null,"First File")],-1),_hoisted_2$15=createBaseVNode("div",{class:"file-text"},[createBaseVNode("span",{class:"circle circle-blue"}),createBaseVNode("p",null,"Second File")],-1),_sfc_main$1u={__name:"Compare",setup(e){const{loadDocument:n,getOptionUrl:r}=core,o=ref(),u=ref(),s=useViewerStore(),w=useDocumentStore();let g=reactive({firstFile:null,secondFile:null});const v=ref(!1),y=x=>x.click(),m=computed(()=>!(g.firstFile&&g.secondFile)),d=(x,k)=>{x.preventDefault(),g[k]=x.target.files[0]},f=async()=>{const x=r();if(!v.value&&!m.value){v.value=!0;const k=new FormData;k.append("firstFile",g.firstFile),k.append("secondFile",g.secondFile);const{data:P,isFinished:S}=await useAxios(`${x.compareBaseUrl||x.baseUrl}${x.compareUrl}`,{method:"POST",data:k,responseType:"arraybuffer"});if(S.value){v.value=!1;const E={progress:w.setLoadingProgress,pageChangedCallback:s.setCurrentPage,scaleChangedCallback:s.setCurrentScale,annotationsNumChangedCallback:w.setAnnotationsCount,distanceChangedCallback:w.setDistance};await n(P.value,E),s.toggleElement("leftPanel");const M=core.getPagesCount(),T=core.getScale();w.setTotalPages(M),s.setCurrentScale(T),s.setCurrentPage(1)}}};return(x,k)=>{const P=_sfc_main$1v;return openBlock(),createElementBlock(Fragment,null,[_hoisted_1$1d,createBaseVNode("button",{onClick:k[0]||(k[0]=S=>y(o.value))},"Select File"),createBaseVNode("input",{ref_key:"firstFileInput",ref:o,class:"hidden",type:"file",onChange:k[1]||(k[1]=S=>d(S,"firstFile")),accept:".pdf",name:"compare"},null,544),createBaseVNode("p",null,toDisplayString$1(unref(g).firstFile&&unref(g).firstFile.name),1),_hoisted_2$15,createBaseVNode("button",{onClick:k[2]||(k[2]=S=>y(u.value))},"Select File"),createBaseVNode("input",{ref_key:"secondFileInput",ref:u,class:"hidden",type:"file",onChange:k[3]||(k[3]=S=>d(S,"secondFile")),accept:".pdf",name:"compare"},null,544),createBaseVNode("p",null,toDisplayString$1(unref(g).secondFile&&unref(g).secondFile.name),1),createBaseVNode("button",{class:normalizeClass(["compare-button",{disabled:m.value}]),onClick:f},[createTextVNode(" Compare "),v.value?(openBlock(),createBlock(P,{key:0,glyph:"icon-loading",class:normalizeClass(x.iconClassName)},null,8,["class"])):createCommentVNode("",!0)],2)],64)}}},LayerPropertyDialog_vue_vue_type_style_index_0_lang="",_hoisted_1$1c={key:0,class:"layer-property-popup"},_hoisted_2$14={class:"title"},_hoisted_3$X={class:"container"},_hoisted_4$b=["placeholder"],_hoisted_5$6={class:"text-start"},_hoisted_6$4={class:"select-container"},_hoisted_7$4={value:1},_hoisted_8$3={value:0},_hoisted_9$3={class:"select-container"},_hoisted_10$3={value:0},_hoisted_11$2={value:1},_hoisted_12$2={value:2},_hoisted_13$2={class:"select-container"},_hoisted_14$2={value:0},_hoisted_15$2={value:1},_hoisted_16$2={value:2},dialogName="layerPropertyDialog",_sfc_main$1t={__name:"LayerPropertyDialog",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.isElementOpen(dialogName)),u=computed(()=>r.getSelectedLayer),s=ref(""),w=ref(0),g=ref(0),v=ref(3),y=ref(3),m=ref(!1);watch(o,(x,k)=>{x&&(s.value=u.value.name,w.value=u.value.defaultVisible,g.value=u.value.isLocked,v.value=u.value.printState,y.value=u.value.exportState),m.value=!1}),watch([s,w,g,v,y],(x,k)=>{!u.value||(m.value=!((u.value.name===x[0]||x[0].trim()==="")&&u.value.defaultVisible===x[1]&&u.value.isLocked===x[2]&&u.value.printState===x[3]&&u.value.exportState===x[4]))});const d=()=>{n.closeElement(dialogName),r.setSelectedLayer(null)},f=async()=>{const x={node:u.value.node};s.value!==""&&s.value!==u.value.name&&(x.name=u.value.name=s.value),w.value!==u.value.defaultVisible&&(x.defaultVisible=u.value.defaultVisible=w.value),g.value!==u.value.isLocked&&(x.isLocked=u.value.isLocked=g.value),v.value!==u.value.printState&&(x.printState=u.value.printState=v.value),y.value!==u.value.exportState&&(x.exportState=u.value.exportState=y.value),w.value!==u.value.visible&&(x.visible=u.value.visible=w.value,x.ocg=u.value.ocg),core.setLayers(x),d()};return(x,k)=>{const P=__unplugin_components_0$s,S=__unplugin_components_1$f,E=_sfc_main$4e;return o.value?(openBlock(),createElementBlock("div",_hoisted_1$1c,[createVNode(E,{show:o.value,dialogName,close:d},{header:withCtx(()=>[createBaseVNode("p",_hoisted_2$14,toDisplayString$1(x.$t("layer.layerProperty")),1)]),footer:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:!m.value}]),onClick:f},toDisplayString$1(x.$t("ok")),3)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_3$X,[createBaseVNode("span",null,toDisplayString$1(x.$t("layer.layerName")),1),withDirectives(createBaseVNode("input",{type:"text",placeholder:x.$t("layer.enterLayerName"),name:"layerName","onUpdate:modelValue":k[0]||(k[0]=M=>s.value=M),maxlength:"50"},null,8,_hoisted_4$b),[[vModelText,s.value]]),createBaseVNode("span",_hoisted_5$6,toDisplayString$1(x.$t("layer.defaultSettings")),1),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_6$4,[withDirectives(createBaseVNode("select",{name:"defaultSetting","onUpdate:modelValue":k[1]||(k[1]=M=>w.value=M)},[createBaseVNode("option",_hoisted_7$4,toDisplayString$1(x.$t("layer.defaultShow")),1),createBaseVNode("option",_hoisted_8$3,toDisplayString$1(x.$t("layer.defaultHide")),1)],512),[[vModelSelect,w.value]]),createVNode(P)]),createBaseVNode("div",{class:"check-box",onClick:k[2]||(k[2]=M=>g.value=(g.value+1)%2)},[createBaseVNode("div",{class:normalizeClass(["check",{active:g.value}])},[withDirectives(createVNode(S,null,null,512),[[vShow,g.value]])],2),createBaseVNode("span",null,toDisplayString$1(x.$t("layer.lockLayer")),1)])]),createBaseVNode("span",null,toDisplayString$1(x.$t("layer.printProperty")),1),createBaseVNode("div",_hoisted_9$3,[withDirectives(createBaseVNode("select",{name:"printProperty","onUpdate:modelValue":k[3]||(k[3]=M=>v.value=M)},[createBaseVNode("option",_hoisted_10$3,toDisplayString$1(x.$t("layer.always")),1),createBaseVNode("option",_hoisted_11$2,toDisplayString$1(x.$t("layer.never")),1),createBaseVNode("option",_hoisted_12$2,toDisplayString$1(x.$t("layer.printVisible")),1)],512),[[vModelSelect,v.value]]),createVNode(P)]),createBaseVNode("span",null,toDisplayString$1(x.$t("layer.exportProperty")),1),createBaseVNode("div",_hoisted_13$2,[withDirectives(createBaseVNode("select",{name:"exportProperty","onUpdate:modelValue":k[4]||(k[4]=M=>y.value=M)},[createBaseVNode("option",_hoisted_14$2,toDisplayString$1(x.$t("layer.always")),1),createBaseVNode("option",_hoisted_15$2,toDisplayString$1(x.$t("layer.never")),1),createBaseVNode("option",_hoisted_16$2,toDisplayString$1(x.$t("layer.exportVisible")),1)],512),[[vModelSelect,y.value]]),createVNode(P)])])]),_:1},8,["show"])])):createCommentVNode("",!0)}}},_sfc_main$1s={},_hoisted_1$1b={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$13=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 8H12V7C12 5.89543 11.1046 5 10 5C8.89543 5 8 5.89543 8 7V8ZM7 8H6C5.44772 8 5 8.44772 5 9V15C5 15.5523 5.44772 16 6 16H14C14.5523 16 15 15.5523 15 15V9C15 8.44772 14.5523 8 14 8H13V7C13 5.34315 11.6569 4 10 4C8.34315 4 7 5.34315 7 7V8Z",fill:"currentColor"},null,-1),_hoisted_3$W=[_hoisted_2$13];function _sfc_render$O(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1b,_hoisted_3$W)}const __unplugin_components_3$4=_export_sfc(_sfc_main$1s,[["render",_sfc_render$O]]),_sfc_main$1r={},_hoisted_1$1a={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$12=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 3H17V17H3V3ZM2 3C2 2.44772 2.44772 2 3 2H17C17.5523 2 18 2.44772 18 3V17C18 17.5523 17.5523 18 17 18H3C2.44772 18 2 17.5523 2 17V3ZM5.40381 5L15.3033 14.8995L14.5962 15.6066L4.6967 5.70711L5.40381 5ZM5.82074 8.24536C4.69777 9.2643 4 10.3033 4 10.3033C4 10.3033 6.68629 14.3033 10 14.3033C10.5489 14.3033 11.0806 14.1935 11.5858 14.0104L5.82074 8.24536ZM14.1793 12.3612C15.3022 11.3423 16 10.3033 16 10.3033C16 10.3033 13.3137 6.3033 10 6.3033C9.45108 6.3033 8.91937 6.41306 8.41424 6.59622L14.1793 12.3612Z",fill:"currentColor"},null,-1),_hoisted_3$V=[_hoisted_2$12];function _sfc_render$N(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$1a,_hoisted_3$V)}const __unplugin_components_2$9=_export_sfc(_sfc_main$1r,[["render",_sfc_render$N]]),_sfc_main$1q={},_hoisted_1$19={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$11=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 3H17V17H3V3ZM2 3C2 2.44772 2.44772 2 3 2H17C17.5523 2 18 2.44772 18 3V17C18 17.5523 17.5523 18 17 18H3C2.44772 18 2 17.5523 2 17V3ZM16 10C16 10 13.3137 14 10 14C6.68629 14 4 10 4 10C4 10 6.68629 6 10 6C13.3137 6 16 10 16 10ZM12 10C12 11.1046 11.1046 12 10 12C8.89543 12 8 11.1046 8 10C8 8.89543 8.89543 8 10 8C11.1046 8 12 8.89543 12 10Z",fill:"currentColor"},null,-1),_hoisted_3$U=[_hoisted_2$11];function _sfc_render$M(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$19,_hoisted_3$U)}const __unplugin_components_1$1=_export_sfc(_sfc_main$1q,[["render",_sfc_render$M]]),_sfc_main$1p={},_hoisted_1$18={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$10=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.01025 4L11 8.0041L6 12L6.01025 4Z",fill:"currentColor"},null,-1),_hoisted_3$T=[_hoisted_2$10];function _sfc_render$L(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$18,_hoisted_3$T)}const __unplugin_components_0$d=_export_sfc(_sfc_main$1p,[["render",_sfc_render$L]]),Layer_vue_vue_type_style_index_0_lang="",_hoisted_1$17={class:"layer"},_hoisted_2$$=["title"],_hoisted_3$S={class:"drop-down medium"},_sfc_main$1o={__name:"Layer",props:["layer","level"],setup(e,{emit:n}){const r=n,o=useDocumentStore(),u=useViewerStore(),s=computed(()=>o.getSelectedLayer),w=ref(!1),g=ref(!1),v=ref(!1),y=ref(""),m=ref(null),d=I=>{I.stopPropagation(),w.value=!w.value},f=()=>{g.value=!1,o.setSelectedLayer(null)},x=I=>{g.value=!1,u.openElement(I)},k=I=>{g.value=!0,o.setSelectedLayer(I)},P=I=>{if(I.isLocked){S(I);return}I.visible=(I.visible+1)%2,core.setLayers({node:I.node,visible:I.visible,ocg:I.ocg})},S=I=>{o.setSelectedLayer(I),r("showTipDialog",I)},E=async I=>{g.value=!1,u.setCommonLoading(!0);const O=(F=>{for(;F;){if(F.ocg)return F.ocg;F=F.children[0]}})(I);if(!O){console.error("Unable to export."),o.setSelectedLayer(null),u.setCommonLoading(!1);return}await core.exportLayers(O,!0),o.setSelectedLayer(null),u.setCommonLoading(!1)},M=I=>{y.value=I,v.value=!0,nextTick(()=>{m.value.focus(),m.value.select()})},T=I=>{if(!y.value.trim()){v.value=!1;return}I.name=y.value,core.setLayers({node:I.node,name:y.value}),v.value=!1},D=I=>{v.value&&m.value&&!m.value.contains(I.target)&&(v.value=!1)};return onMounted(()=>{window.addEventListener("click",D)}),onBeforeUnmount(()=>{window.removeEventListener("click",D)}),(I,N)=>{var J;const O=__unplugin_components_0$d,F=__unplugin_components_1$1,U=__unplugin_components_2$9,Y=__unplugin_components_3$4,Q=__unplugin_components_4$4,q=_sfc_main$4l,ne=resolveComponent("Layer",!0);return openBlock(),createElementBlock("div",_hoisted_1$17,[createBaseVNode("div",{class:normalizeClass(["layer-item",{focus:s.value&&s.value.node===e.layer.node}])},[createBaseVNode("div",{class:normalizeClass(["layer-item-toggle",w.value&&"active"]),style:normalizeStyle({marginLeft:12*e.level+"px"})},[e.layer.children.length?(openBlock(),createBlock(O,{key:0,onClick:d})):createCommentVNode("",!0)],6),e.layer.visible?(openBlock(),createBlock(F,{key:0,onClick:N[0]||(N[0]=re=>P(e.layer))})):(openBlock(),createBlock(U,{key:1,onClick:N[1]||(N[1]=re=>P(e.layer))})),createBaseVNode("div",{class:"layer-item-name",onClick:D},[v.value?withDirectives((openBlock(),createElementBlock("input",{key:1,type:"text","onUpdate:modelValue":N[3]||(N[3]=re=>y.value=re),onBlur:N[4]||(N[4]=re=>v.value=!1),onKeyup:N[5]||(N[5]=withKeys(re=>T(e.layer),["enter"])),ref_key:"nameInputRef",ref:m,maxlength:"50"},null,544)),[[vModelText,y.value]]):(openBlock(),createElementBlock("span",{key:0,onDblclick:N[2]||(N[2]=re=>M(e.layer.name)),title:e.layer.name},toDisplayString$1(e.layer.name),41,_hoisted_2$$))]),e.layer.isLocked?(openBlock(),createBlock(Y,{key:2,onClick:N[6]||(N[6]=re=>S(e.layer))})):createCommentVNode("",!0),createVNode(unref(NPopover),{placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,show:((J=s.value)==null?void 0:J.name)===e.layer.name&&g.value,onClickoutside:f,class:"no-margin-top"},{trigger:withCtx(()=>[createVNode(q,{class:"more",onClick:N[7]||(N[7]=withModifiers(re=>k(e.layer),["stop"])),title:I.$t("leftPanel.menu")},{default:withCtx(()=>[createVNode(Q)]),_:1},8,["title"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_3$S,[createBaseVNode("div",{class:"drop-item",onClick:N[8]||(N[8]=re=>x("layerPropertyDialog"))},toDisplayString$1(I.$t("leftPanel.layerProperty")),1),createBaseVNode("div",{class:"drop-item",onClick:N[9]||(N[9]=re=>E(e.layer))},toDisplayString$1(I.$t("leftPanel.exportLayer")),1)])]),_:1},8,["show"])],2),w.value?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(e.layer.children,re=>(openBlock(),createBlock(ne,{layer:re,level:e.level+1,onShowTipDialog:S},null,8,["layer","level"]))),256)):createCommentVNode("",!0)])}}},_sfc_main$1n={},_hoisted_1$16={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$_=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 5.25C3 4.83579 3.33579 4.5 3.75 4.5H16.2516C16.6659 4.5 17.0016 4.83579 17.0016 5.25C17.0016 5.66421 16.6659 6 16.2516 6H3.75C3.33579 6 3 5.66421 3 5.25ZM3 10.0006C3 9.58635 3.33579 9.25056 3.75 9.25056H16.2516C16.6659 9.25056 17.0016 9.58635 17.0016 10.0006C17.0016 10.4148 16.6659 10.7506 16.2516 10.7506H3.75C3.33579 10.7506 3 10.4148 3 10.0006ZM3.75 14.0012C3.33579 14.0012 3 14.337 3 14.7512C3 15.1654 3.33579 15.5012 3.75 15.5012H16.2516C16.6659 15.5012 17.0016 15.1654 17.0016 14.7512C17.0016 14.337 16.6659 14.0012 16.2516 14.0012H3.75Z",fill:"currentColor"},null,-1),_hoisted_3$R=[_hoisted_2$_];function _sfc_render$K(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$16,_hoisted_3$R)}const __unplugin_components_0$c=_export_sfc(_sfc_main$1n,[["render",_sfc_render$K]]),LayerContainer_vue_vue_type_style_index_0_lang="",_hoisted_1$15={class:"container"},_hoisted_2$Z={class:"layer-title"},_hoisted_3$Q={class:"drop-down medium"},_hoisted_4$a={key:1,class:"no-layers"},_hoisted_5$5={key:0,class:"layer-locked-tip-popup"},_sfc_main$1m={__name:"LayerContainer",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>r.getLayers),u=computed(()=>{const P=S=>S.some(E=>{if(E.exportState===0||E.exportState!==1&&E.visible)return!0;if(Array.isArray(E.children)&&E.children.length)return P(E.children)});return P(o.value)}),s=computed(()=>k(!1)),w=computed(()=>k(!0)),g=ref(!1),v=ref(),y=ref(!1),m=P=>{r.setLayers(P),y.value=!P.some(S=>S.children.length)};core.addEvent("getLayers",m);const d=P=>{g.value=!1,P?n.openElement("layerPropertyDialog"):r.setSelectedLayer(null)},f=()=>{g.value=!0},x=async P=>{if(v.value.setShow(!1),P==="show"||P==="hide"){const S=[],E=(M,T)=>{M.forEach(D=>{D.isLocked||(D.visible=T,S.push({node:D.node,visible:T,ocg:D.ocg})),Array.isArray(D.children)&&D.children.length&&E(D.children,T)})};E(o.value,P==="show"?1:0),S.length&&core.setLayers(S)}if(P==="restore"){const S=[],E=M=>{M.forEach(T=>{T.visible!==T.defaultVisible&&(T.visible=T.defaultVisible,S.push({node:T.node,visible:T.defaultVisible,ocg:T.ocg})),Array.isArray(T.children)&&T.children.length&&E(T.children)})};E(o.value),S.length&&core.setLayers(S)}P==="export"&&(n.setCommonLoading(!0),await core.exportLayers(null,!0),n.setCommonLoading(!1))},k=P=>o.value.some(S=>(P?S.visible:!S.visible)?!0:Array.isArray(S.children)&&S.children.length?k(S.children):!1);return(P,S)=>{const E=__unplugin_components_0$c,M=_sfc_main$1o,T=__unplugin_components_2$f,D=_sfc_main$4e,I=_sfc_main$1t;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$15,[createBaseVNode("div",_hoisted_2$Z,[createTextVNode(toDisplayString$1(P.$t("leftPanel.layers"))+" ",1),o.value.length?(openBlock(),createBlock(unref(NPopover),{key:0,placement:"bottom-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,class:"no-margin-top layer-title-popover",ref_key:"layersMenuPopover",ref:v},{trigger:withCtx(()=>[createVNode(E)]),default:withCtx(()=>[createBaseVNode("div",_hoisted_3$Q,[createBaseVNode("div",{class:normalizeClass(["drop-item",{disabled:!s.value}]),onClick:S[0]||(S[0]=N=>x("show"))},toDisplayString$1(P.$t("leftPanel.showAll")),3),createBaseVNode("div",{class:normalizeClass(["drop-item",{disabled:!w.value}]),onClick:S[1]||(S[1]=N=>x("hide"))},toDisplayString$1(P.$t("leftPanel.hideAll")),3),createBaseVNode("div",{class:"drop-item",onClick:S[2]||(S[2]=N=>x("restore"))},toDisplayString$1(P.$t("leftPanel.restoreSettings")),1),createBaseVNode("div",{class:normalizeClass(["drop-item",{disabled:!u.value}]),onClick:S[3]||(S[3]=N=>x("export"))},toDisplayString$1(P.$t("leftPanel.exportLayers")),3)])]),_:1},512)):createCommentVNode("",!0)]),o.value.length?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["layers",{single:y.value}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,N=>(openBlock(),createBlock(M,{layer:N,level:0,onShowTipDialog:f},null,8,["layer"]))),256))],2)):(openBlock(),createElementBlock("div",_hoisted_4$a,toDisplayString$1(P.$t("leftPanel.noLayers")),1))]),g.value?(openBlock(),createElementBlock("div",_hoisted_5$5,[createVNode(D,{show:g.value,close:!1},{footer:withCtx(()=>[createBaseVNode("div",{class:"rect-button white",onClick:S[4]||(S[4]=N=>d())},toDisplayString$1(P.$t("ok")),1),createBaseVNode("div",{class:"rect-button blue",onClick:S[5]||(S[5]=N=>d(!0))},toDisplayString$1(P.$t("layer.setProperty")),1)]),default:withCtx(()=>[createVNode(T),createBaseVNode("p",null,toDisplayString$1(P.$t("layer.lockedTip")),1)]),_:1},8,["show"])])):createCommentVNode("",!0),createVNode(I)],64)}}},Outlines_vue_vue_type_style_index_0_lang="",_hoisted_1$14={class:"outlines"},_hoisted_2$Y={class:"outline-item-title"},splitter="-",_sfc_main$1l={__name:"Outlines",props:{outline:{type:Object,required:!0}},setup(e,{emit:n}){const r=useDocumentStore(),o=useViewerStore(),{outline:u}=e,s=x=>{const k=x.title;return`${w(x)}${splitter}${k}`},w=x=>g(x).reverse().join(splitter),g=x=>{const k=[];let P=x;for(;P;)k.push(P.index),P=P.parent;return k},v=computed(()=>s(u)),y=ref(!1),m=computed(()=>r.getActiveOutlineId===v.value),d=()=>{r.setActiveOutlineId(v.value),core.pageNumberChanged({value:u.pageNumber}),isMobile&&o.closeElement("leftPanel")},f=x=>{x.stopPropagation(),y.value=!y.value};return(x,k)=>{const P=__unplugin_components_0$d,S=resolveComponent("Outlines",!0);return openBlock(),createElementBlock("div",_hoisted_1$14,[createBaseVNode("div",{class:normalizeClass(["outline-item",m.value&&"selected"]),onClick:d},[createBaseVNode("div",{class:normalizeClass(["outline-item-toggle",y.value&&"active"]),style:normalizeStyle({marginLeft:12*e.outline.level+"px"})},[e.outline.children.length?(openBlock(),createBlock(P,{key:0,onClick:f})):createCommentVNode("",!0)],6),createBaseVNode("div",_hoisted_2$Y,toDisplayString$1(e.outline.title),1)],2),y.value?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(e.outline.children,E=>(openBlock(),createBlock(S,{outline:E},null,8,["outline"]))),256)):createCommentVNode("",!0)])}}},OutlinesPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$13={class:"outline"},_hoisted_2$X={class:"outline-title"},_hoisted_3$P={key:0,class:"outlines-container"},_hoisted_4$9={key:1,class:"no-outlines"},_sfc_main$1k={__name:"OutlinesPanel",setup(e){const n=useDocumentStore(),r=computed(()=>n.getOutlines);return(o,u)=>{const s=_sfc_main$1l;return openBlock(),createElementBlock("div",_hoisted_1$13,[createBaseVNode("div",_hoisted_2$X,toDisplayString$1(o.$t("leftPanel.outlines")),1),r.value.length?(openBlock(),createElementBlock("div",_hoisted_3$P,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,w=>(openBlock(),createBlock(s,{outline:w},null,8,["outline"]))),256))])):(openBlock(),createElementBlock("div",_hoisted_4$9,toDisplayString$1(o.$t("leftPanel.noOutlines")),1))])}}},_sfc_main$1j={},_hoisted_1$12={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$W=createBaseVNode("path",{d:"M6.36661 7L3.19995 10.1667L6.36661 13.3333",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_3$O=createBaseVNode("path",{d:"M13.3333 3.2V7.63332C13.3333 8.3052 13.0664 8.94957 12.5913 9.42466C12.1162 9.89975 11.4718 10.1667 10.7999 10.1667H3.19995",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_4$8=[_hoisted_2$W,_hoisted_3$O];function _sfc_render$J(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$12,_hoisted_4$8)}const __unplugin_components_30=_export_sfc(_sfc_main$1j,[["render",_sfc_render$J]]),_sfc_main$1i={},_hoisted_1$11={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$V=createBaseVNode("path",{d:"M12.8 9.86666C12.8 10.1613 12.683 10.444 12.4746 10.6523C12.2662 10.8607 11.9836 10.9778 11.6889 10.9778H5.02227L2.80005 13.2V4.31111C2.80005 4.01642 2.91711 3.73381 3.12549 3.52543C3.33386 3.31706 3.61647 3.2 3.91116 3.2H11.6889C11.9836 3.2 12.2662 3.31706 12.4746 3.52543C12.683 3.73381 12.8 4.01642 12.8 4.31111V9.86666Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_3$N=[_hoisted_2$V];function _sfc_render$I(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$11,_hoisted_3$N)}const __unplugin_components_29=_export_sfc(_sfc_main$1i,[["render",_sfc_render$I]]),_sfc_main$1h={},_hoisted_1$10={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$U=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 4H15.5V15.5H4V4ZM2.5 2.5H4H15.5H17V4V15.5V17H15.5H4H2.5V15.5V4V2.5ZM7 9.25H6.25V10.75H7H13H13.75V9.25H13H7Z",fill:"currentColor"},null,-1),_hoisted_3$M=[_hoisted_2$U];function _sfc_render$H(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$10,_hoisted_3$M)}const __unplugin_components_28=_export_sfc(_sfc_main$1h,[["render",_sfc_render$H]]),_sfc_main$1g={},_hoisted_1$$={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$T=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 4H15.5V15.5H4V4ZM2.5 2.5H4H15.5H17V4V15.5V17H15.5H4H2.5V15.5V4V2.5ZM13.6441 8.40148L14.1745 7.87115L13.1138 6.81049L12.5835 7.34082L8.87115 11.0531L7.53033 9.71231L7 9.18198L5.93934 10.2426L6.46967 10.773L8.34082 12.6441L8.87115 13.1745L9.40148 12.6441L13.6441 8.40148Z",fill:"currentColor"},null,-1),_hoisted_3$L=[_hoisted_2$T];function _sfc_render$G(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$$,_hoisted_3$L)}const __unplugin_components_27=_export_sfc(_sfc_main$1g,[["render",_sfc_render$G]]),_sfc_main$1f={},_hoisted_1$_={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$S=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 4H15.5V15.5H4V4ZM2.5 2.5H4H15.5H17V4V15.5V17H15.5H4H2.5V15.5V4V2.5ZM7.06066 6L7.59099 6.53033L9.56066 8.5L11.5303 6.53033L12.0607 6L13.1213 7.06066L12.591 7.59099L10.6213 9.56066L12.591 11.5303L13.1213 12.0607L12.0607 13.1213L11.5303 12.591L9.56066 10.6213L7.59099 12.591L7.06066 13.1213L6 12.0607L6.53033 11.5303L8.5 9.56066L6.53033 7.59099L6 7.06066L7.06066 6Z",fill:"currentColor"},null,-1),_hoisted_3$K=[_hoisted_2$S];function _sfc_render$F(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$_,_hoisted_3$K)}const __unplugin_components_26=_export_sfc(_sfc_main$1f,[["render",_sfc_render$F]]),_sfc_main$1e={},_hoisted_1$Z={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$R=createBaseVNode("path",{d:"M13.5224 10.8835L10.6558 17.3333C10.0856 17.3333 9.53871 17.1068 9.13551 16.7036C8.73232 16.3004 8.5058 15.7536 8.5058 15.1834V12.3168H4.44954C4.24178 12.3191 4.03598 12.2763 3.84642 12.1912C3.65686 12.1061 3.48807 11.9808 3.35173 11.8241C3.21539 11.6673 3.11477 11.4827 3.05684 11.2832C2.99891 11.0836 2.98505 10.8739 3.01623 10.6685L4.00521 4.21857C4.05704 3.87679 4.23065 3.56526 4.49404 3.34138C4.75743 3.1175 5.09286 2.99635 5.43852 3.00026H13.5224M13.5224 10.8835V3.00026M13.5224 10.8835H15.4359C15.8415 10.8906 16.2356 10.7486 16.5434 10.4844C16.8512 10.2202 17.0513 9.85215 17.1057 9.45015V4.43357C17.0513 4.03157 16.8512 3.66352 16.5434 3.39931C16.2356 3.13509 15.8415 2.99309 15.4359 3.00026H13.5224",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_3$J=[_hoisted_2$R];function _sfc_render$E(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$Z,_hoisted_3$J)}const __unplugin_components_25=_export_sfc(_sfc_main$1e,[["render",_sfc_render$E]]),_sfc_main$1d={},_hoisted_1$Y={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$Q=createBaseVNode("path",{d:"M6.58333 8.44989L9.44994 1.99999C10.0202 1.99999 10.567 2.22651 10.9702 2.6297C11.3734 3.0329 11.5999 3.57975 11.5999 4.14996V7.01658H15.6562C15.8639 7.01422 16.0697 7.05707 16.2593 7.14215C16.4489 7.22722 16.6176 7.3525 16.754 7.50929C16.8903 7.66608 16.9909 7.85063 17.0489 8.05017C17.1068 8.24971 17.1207 8.45946 17.0895 8.66488L16.1005 15.1148C16.0487 15.4565 15.8751 15.7681 15.6117 15.992C15.3483 16.2158 15.0129 16.337 14.6672 16.3331H6.58333M6.58333 8.44989V16.3331M6.58333 8.44989H4.66986C4.26426 8.44271 3.87015 8.58471 3.56233 8.84893C3.25452 9.11315 3.05443 9.48119 3.00005 9.88319V14.8998C3.05443 15.3018 3.25452 15.6698 3.56233 15.934C3.87015 16.1983 4.26426 16.3403 4.66986 16.3331H6.58333",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_hoisted_3$I=[_hoisted_2$Q];function _sfc_render$D(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$Y,_hoisted_3$I)}const __unplugin_components_24=_export_sfc(_sfc_main$1d,[["render",_sfc_render$D]]),_sfc_main$1c={},_hoisted_1$X={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$P=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.5 10C6.5 10.8284 5.82843 11.5 5 11.5C4.17157 11.5 3.5 10.8284 3.5 10C3.5 9.17157 4.17157 8.5 5 8.5C5.82843 8.5 6.5 9.17157 6.5 10ZM11.5 10C11.5 10.8284 10.8284 11.5 10 11.5C9.17157 11.5 8.5 10.8284 8.5 10C8.5 9.17157 9.17157 8.5 10 8.5C10.8284 8.5 11.5 9.17157 11.5 10ZM15 11.5C15.8284 11.5 16.5 10.8284 16.5 10C16.5 9.17157 15.8284 8.5 15 8.5C14.1716 8.5 13.5 9.17157 13.5 10C13.5 10.8284 14.1716 11.5 15 11.5Z",fill:"currentColor"},null,-1),_hoisted_3$H=[_hoisted_2$P];function _sfc_render$C(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$X,_hoisted_3$H)}const __unplugin_components_22=_export_sfc(_sfc_main$1c,[["render",_sfc_render$C]]),_sfc_main$1b={},_hoisted_1$W={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$O=createBaseVNode("path",{d:"M10.0282 2L18.2999 10.2717L1.75648 10.6988L10.0282 18.9706",stroke:"currentColor","stroke-width":"1.5","stroke-linejoin":"round"},null,-1),_hoisted_3$G=[_hoisted_2$O];function _sfc_render$B(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$W,_hoisted_3$G)}const __unplugin_components_11=_export_sfc(_sfc_main$1b,[["render",_sfc_render$B]]),_sfc_main$1a={},_hoisted_1$V={width:"21",height:"20",viewBox:"5 5 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$N=createBaseVNode("path",{d:"M8.20577 10.933L15.25 6.86603L22.2942 10.933V19.067L15.25 23.134L8.20577 19.067V10.933Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$F=[_hoisted_2$N];function _sfc_render$A(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$V,_hoisted_3$F)}const __unplugin_components_10$2=_export_sfc(_sfc_main$1a,[["render",_sfc_render$A]]),_sfc_main$19={},_hoisted_1$U={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$M=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 3H2V15H5V18L10 15H18V3ZM5 6H11V7.5H5V6ZM5 9.5H15V11H5V9.5Z",fill:"currentColor"},null,-1),_hoisted_3$E=[_hoisted_2$M];function _sfc_render$z(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$U,_hoisted_3$E)}const __unplugin_components_0$b=_export_sfc(_sfc_main$19,[["render",_sfc_render$z]]),_sfc_main$18={},_hoisted_1$T={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$L=createBaseVNode("path",{d:"M3.25 18C3.25 9.71573 9.96573 3 18.25 3",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$D=[_hoisted_2$L];function _sfc_render$y(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$T,_hoisted_3$D)}const __unplugin_components_8$2=_export_sfc(_sfc_main$18,[["render",_sfc_render$y]]),AnnotationContent_vue_vue_type_style_index_0_lang="",_hoisted_1$S={class:"page-title"},_hoisted_2$K=["id","onClick"],_hoisted_3$C={class:"item-header"},_hoisted_4$7={class:"info"},_hoisted_5$4={class:"name"},_hoisted_6$3={class:"date"},_hoisted_7$3={key:0,class:"content"},_hoisted_8$2=["onClick"],_hoisted_9$2={key:0,class:"item-reply"},_hoisted_10$2={key:0},_hoisted_11$1=["placeholder"],_hoisted_12$1={class:"buttons"},_hoisted_13$1={class:"replies"},_hoisted_14$1={key:0,class:"info"},_hoisted_15$1={class:"info-header"},_hoisted_16$1={class:"name"},_hoisted_17$1={class:"date"},_hoisted_18$1={key:0,class:"content"},_hoisted_19$1={class:"buttons"},_hoisted_20$1={key:1,class:"content"},_hoisted_21$1={class:"drop-down"},_hoisted_22$1={class:"item-footer"},_hoisted_23$1={class:"drop-down"},_hoisted_24$1=["onClick"],_hoisted_25$1=["onClick"],_hoisted_26$1=["onClick"],_hoisted_27$1=["onClick"],_hoisted_28$1=["onClick"],_hoisted_29$1={class:"re"},_hoisted_30$1={key:0},_hoisted_31$1={key:1,class:"no-annotations"},_sfc_main$17={__name:"AnnotationContent",setup(e){const n=useDocumentStore(),r=useViewerStore();let o=computed(()=>n.getAllAnnotations);const u=computed(()=>r.getActiveElementTab("leftPanel")),s=computed(()=>r.isElementOpen("leftPanel")),w=computed(()=>n.getAnnotator),g=computed(()=>r.getToolMode),v=ref(null),y=ref(null),m=ref(!1),d=ref(""),f=ref(!1),x=ref(""),k=ref(""),P=ref(!1),S=ref(0),E=ref(0);let M=null,T=null,D=null;const I=ref(null);watch([u,s],(ke,Ce)=>{Ce[0]==="ANNOTATION"&&Ce[1]&&F()});const N=({annotations:ke})=>{var Pe;T=D,D=JSON.parse(JSON.stringify(ke)),n.initAnnotations(ke);const Ce=getCurrentInstance();(Pe=Ce==null?void 0:Ce.proxy)==null||Pe.$forceUpdate(),setTimeout(()=>{const Me=Ee(T,D);if(Me&&Me.name){const Le=document.getElementById(`annotationList-${Me.name}`);Le&&oe(Le)}})};core.addEvent("annotationUpdated",N);const O=ke=>{var Ce;core.jumpToAnnotation(ke),g.value!=="editor"&&core.selectAnnotation(ke),((Ce=v.value)==null?void 0:Ce.name)!==ke.name&&(d.value="",v.value=ke,m.value=!1),isMobile&&r.closeElement("leftPanel")},F=()=>{m.value=!1,d.value=""},U=(ke,Ce)=>{let Pe;ke.reviewAnnotState?Pe={type:"edit",annotation:ke,reviewAnnotState:ke.reviewAnnotState.annotPtr?{annotPtr:ke.reviewAnnotState.annotPtr,state:Ce}:Ce}:Pe={type:"add",annotation:ke,reviewAnnotState:Ce},core.handleReplyAnnotation(Pe),k.value=""},Y=ke=>{k.value?k.value="":k.value=ke.name},Q=(ke,Ce)=>{if(P.value){j();return}let Pe=ke.target;for(;Pe.parentElement&&!Pe.classList.contains("more");)Pe=Pe.parentElement;if(Pe.classList.contains("more")){const Me=Pe.getBoundingClientRect();S.value=Me.left,E.value=Me.bottom,P.value=!0,y.value=Ce}},q=ke=>{let Ce;ke.markedAnnotState?Ce={type:"edit",annotation:ke,markedAnnotState:ke.markedAnnotState.annotPtr?{annotPtr:ke.markedAnnotState.annotPtr,state:ke.markedAnnotState.state==="MARKED"?"UNMARKED":"MARKED"}:ke.markedAnnotState==="MARKED"?"UNMARKED":"MARKED"}:Ce={type:"add",annotation:ke,markedAnnotState:"MARKED"},core.handleReplyAnnotation(Ce)},ne=()=>{var Ce;if(d.value==="")return;const ke={type:"add",annotation:v.value,reply:{operate:"add-annot",type:"reply",author:w.value,title:w.value,contents:d.value,date:new Date,pageIndex:v.value.pageIndex,index:((Ce=v.value.replies)==null?void 0:Ce.length)||0}};core.handleReplyAnnotation(ke),d.value=""},J=()=>{if(m.value=!1,P.value=!1,f.value&&x.value!==y.value.contents){const ke={type:"edit",annotation:v.value,reply:{...y.value,operate:"mod-annot",contents:x.value,date:new Date}};core.handleReplyAnnotation(ke),f.value=!1}else f.value=!0,x.value=y.value.contents,nextTick(()=>{const ke=document.querySelector(".replyEditInput");ke.focus(),ke.setSelectionRange(ke.value.length,ke.value.length)})},re=()=>{const ke={type:"delete",annotation:v.value,reply:y.value};core.handleReplyAnnotation(ke),j()},X=ke=>{document.querySelector(".button.more.active").contains(ke.target)||j()},j=()=>{P.value=!1,f.value||(y.value=null)},Z=()=>{f.value=!1,x.value="",y.value=null},W=ke=>{document.querySelector(".button.state.active").contains(ke.target)||(k.value="")},te=(ke,Ce)=>{var Pe;m.value=!0,((Pe=v.value)==null?void 0:Pe.name)!==ke.name&&(v.value=ke,d.value=""),!Ce&&nextTick(()=>{var Me;(Me=document.querySelector(".annotReplyInput"))==null||Me.focus()})},le=ke=>{u.value!=="ANNOTATION"&&r.setActiveElementTab("leftPanel","ANNOTATION"),s.value||r.openElement("leftPanel"),te(ke,!0),M&&(clearTimeout(M),M=null),setTimeout(()=>{const Ce=document.querySelector(".annotation-item.selected");Ce.scrollIntoView({behavior:"smooth"}),Ce.classList.contains("flash-border")?(Ce.classList.remove("flash-border"),clearTimeout(M),M=null):(Ce.classList.add("flash-border"),M=setTimeout(()=>{var Pe;return(Pe=document.querySelector(".annotation-item.selected"))==null?void 0:Pe.classList.remove("flash-border")},2e3))})};core.addEvent("openAnnotationReply",le);const oe=(ke,Ce={behavior:"smooth",block:"start"})=>{ke.scrollIntoView(Ce)},Ee=(ke,Ce)=>{if(!(!ke||!Ce)){for(let Pe in Ce){let Me=Ce[Pe]||0,Le=ke[Pe]||0;if(Me&&Me.length>Le.length)return Me[Me.length-1]}return null}},Ae=ke=>{I.value=ke.name?ke:null,setTimeout(()=>{const Ce=document.querySelector(".annotation-item.selected-annotation");Ce&&oe(Ce)})};core.addEvent("annotationSelected",Ae);const ve=()=>{I.value=null};return core.addEvent("annotationDeselected",ve),(ke,Ce)=>{const Pe=__unplugin_components_1$6,Me=__unplugin_components_5$5,Le=__unplugin_components_4$9,Te=__unplugin_components_3$9,ye=__unplugin_components_2$d,_e=__unplugin_components_4$8,we=__unplugin_components_3$7,Se=__unplugin_components_8$2,$e=__unplugin_components_6$5,Be=__unplugin_components_0$j,Oe=__unplugin_components_13$2,Ge=__unplugin_components_12,Ie=__unplugin_components_9$5,je=__unplugin_components_5$4,qe=__unplugin_components_7$4,Ue=__unplugin_components_14$1,Je=__unplugin_components_0$b,et=__unplugin_components_15,nt=__unplugin_components_7$2,st=__unplugin_components_6$4,gt=__unplugin_components_10$2,_t=__unplugin_components_11,wt=__unplugin_components_22,He=_sfc_main$4l,Ve=__unplugin_components_24,ze=__unplugin_components_25,Ne=__unplugin_components_26,We=__unplugin_components_27,Fe=__unplugin_components_28,Ye=__unplugin_components_29,Ke=__unplugin_components_30;return openBlock(),createElementBlock("div",{class:normalizeClass(["annotation-view",{pb:!["view","sign","document"].includes(g.value)}])},[unref(o).annotationsCount>0?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(o).annotations,(Ze,ot)=>(openBlock(),createElementBlock("div",null,[Ze.pageAnnotationsCount>0?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",_hoisted_1$S,[createBaseVNode("span",null,toDisplayString$1(ke.$t("leftPanel.whichPage[0]"))+toDisplayString$1(ot*1+1)+toDisplayString$1(ke.$t("leftPanel.whichPage[1]")),1),createBaseVNode("span",null,toDisplayString$1(Ze.pageAnnotationsCount),1)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(Ze.annotations,(Qe,at)=>{var rt,ct,ht;return openBlock(),createElementBlock(Fragment,null,[!["link","reply"].includes(Qe.type)&&!Qe.isDelete&&!Qe.isHidden?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["annotation-item",{selected:v.value&&v.value.name===Qe.name,"selected-annotation":I.value&&I.value.name===Qe.name}]),id:Qe.name?`annotationList-${Qe.name}`:null,onClick:yt=>O(Qe)},[createBaseVNode("div",_hoisted_3$C,[Qe.type==="highlight"?(openBlock(),createBlock(Pe,{key:0})):Qe.type==="squiggly"?(openBlock(),createBlock(Me,{key:1})):Qe.type==="strikeout"?(openBlock(),createBlock(Le,{key:2})):Qe.type==="underline"?(openBlock(),createBlock(Te,{key:3})):Qe.type==="polyline"&&Qe.measure?(openBlock(),createBlock(ye,{key:4})):Qe.type==="ink"&&Qe.measure&&Qe.arcPoints?(openBlock(),createBlock(_e,{key:5})):Qe.type==="ink"&&Qe.measure?(openBlock(),createBlock(we,{key:6})):Qe.type==="arc"&&!Qe.measure&&Qe.arcPoints?(openBlock(),createBlock(Se,{key:7})):Qe.type==="ink"?(openBlock(),createBlock($e,{key:8})):Qe.type==="line"&&Qe.measure?(openBlock(),createBlock(Be,{key:9})):Qe.type==="line"&&((Qe.tail==="none"||Qe.tail==="unknown")&&(Qe.head==="none"||Qe.head==="unknown")||!Qe.tail&&!Qe.head)?(openBlock(),createBlock(Oe,{key:10})):Qe.type==="line"&&(Qe.tail==="openarrow"||Qe.head==="openarrow"||Qe.arrow)?(openBlock(),createBlock(Ge,{key:11})):Qe.type==="square"||Qe.type==="rectangle"&&!Qe.measure?(openBlock(),createBlock(Ie,{key:12})):Qe.type==="circle"&&Qe.measure?(openBlock(),createBlock(je,{key:13})):Qe.type==="circle"?(openBlock(),createBlock(qe,{key:14})):Qe.type==="freetext"?(openBlock(),createBlock(Ue,{key:15})):Qe.type==="text"?(openBlock(),createBlock(Je,{key:16})):Qe.type==="image"||Qe.type==="stamp"?(openBlock(),createBlock(et,{key:17})):Qe.type==="polygon"&&Qe.measure?(openBlock(),createBlock(nt,{key:18})):Qe.type==="rectangle"&&Qe.measure?(openBlock(),createBlock(st,{key:19})):Qe.type==="polygon"?(openBlock(),createBlock(gt,{key:20})):Qe.type==="polyline"?(openBlock(),createBlock(_t,{key:21})):createCommentVNode("",!0),createBaseVNode("div",_hoisted_4$7,[createBaseVNode("p",_hoisted_5$4,toDisplayString$1(Qe.author||Qe.title||"Guest"),1),createBaseVNode("p",_hoisted_6$3,toDisplayString$1(unref(dayjs)(Qe.date).format("DD/MM/YYYY HH:mm:ss")),1),Qe.contents?(openBlock(),createElementBlock("div",_hoisted_7$3,toDisplayString$1(Qe.contents),1)):createCommentVNode("",!0)]),createVNode(unref(NPopover),{trigger:"hover",placement:"bottom",class:"mark-popover"},{trigger:withCtx(()=>{var yt;return[createBaseVNode("div",{class:normalizeClass(["mark-box",{marked:Qe.markedAnnotState==="MARKED"||((yt=Qe.markedAnnotState)==null?void 0:yt.state)==="MARKED"}]),onClick:withModifiers(bt=>q(Qe),["stop"])},null,10,_hoisted_8$2)]}),default:withCtx(()=>{var yt;return[createBaseVNode("span",null,toDisplayString$1(Qe.markedAnnotState==="MARKED"||((yt=Qe.markedAnnotState)==null?void 0:yt.state)==="MARKED"?ke.$t("leftPanel.marked"):ke.$t("leftPanel.unmarked")),1)]}),_:2},1024)]),v.value&&v.value.name===Qe.name&&(m.value||((rt=Qe.replies)==null?void 0:rt.length))?(openBlock(),createElementBlock("div",_hoisted_9$2,[m.value?(openBlock(),createElementBlock("div",_hoisted_10$2,[withDirectives(createBaseVNode("textarea",{onClick:Ce[0]||(Ce[0]=withModifiers(()=>{},["stop"])),placeholder:ke.$t("leftPanel.replyPlaceholder"),"onUpdate:modelValue":Ce[1]||(Ce[1]=yt=>d.value=yt),class:"annotReplyInput"},null,8,_hoisted_11$1),[[vModelText,d.value]]),createBaseVNode("div",_hoisted_12$1,[createBaseVNode("span",{onClick:withModifiers(F,["stop"])},toDisplayString$1(ke.$t("cancel")),1),createBaseVNode("button",{class:normalizeClass({active:d.value,disabled:!d.value}),onClick:ne},toDisplayString$1(ke.$t("leftPanel.reply")),3)])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_13$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Qe.replies,(yt,bt)=>{var $t,At;return openBlock(),createElementBlock(Fragment,{key:bt},[yt.contents?(openBlock(),createElementBlock("div",_hoisted_14$1,[createBaseVNode("div",_hoisted_15$1,[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_16$1,toDisplayString$1(yt.author||yt.title||w.value),1),createBaseVNode("p",_hoisted_17$1,toDisplayString$1(unref(dayjs)(yt.date).format("DD/MM/YYYY HH:mm:ss")),1)]),createVNode(He,{class:normalizeClass(["more",{active:P.value&&yt.name===(($t=y.value)==null?void 0:$t.name)}]),onClick:Ft=>Q(Ft,yt)},{default:withCtx(()=>[createVNode(wt)]),_:2},1032,["class","onClick"])]),f.value&&yt.name===((At=y.value)==null?void 0:At.name)?(openBlock(),createElementBlock("div",_hoisted_18$1,[withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":Ce[2]||(Ce[2]=Ft=>x.value=Ft),class:"replyEditInput"},null,512),[[vModelText,x.value]]),createBaseVNode("div",_hoisted_19$1,[createBaseVNode("span",{onClick:Z},toDisplayString$1(ke.$t("cancel")),1),createBaseVNode("button",{class:normalizeClass([x.value&&x.value!==yt.contents?"active":"disabled"]),onClick:J},toDisplayString$1(ke.$t("leftPanel.confirm")),3)])])):(openBlock(),createElementBlock("div",_hoisted_20$1,toDisplayString$1(yt.contents),1))])):createCommentVNode("",!0)],64)}),128))]),createVNode(unref(NPopover),{placement:"bottom-start",trigger:"manual","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":96,class:"reply-popover",show:P.value,x:S.value,y:E.value,onClickoutside:X},{default:withCtx(()=>[createBaseVNode("div",_hoisted_21$1,[createBaseVNode("div",{class:"drop-item",onClick:J},toDisplayString$1(ke.$t("leftPanel.edit")),1),createBaseVNode("div",{class:"drop-item",onClick:re},toDisplayString$1(ke.$t("leftPanel.delete")),1)])]),_:1},8,["show","x","y"])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_22$1,[createVNode(unref(NPopover),{placement:"bottom",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":96,class:"state-popover",show:k.value===Qe.name,onClickoutside:W},{trigger:withCtx(()=>[createVNode(He,{class:normalizeClass(["state",{active:k.value===Qe.name}]),onClick:withModifiers(yt=>Y(Qe),["stop"])},{default:withCtx(()=>{var yt,bt,$t,At;return[Qe.reviewAnnotState==="ACCEPTED"||((yt=Qe.reviewAnnotState)==null?void 0:yt.state)==="ACCEPTED"?(openBlock(),createBlock(Ve,{key:0})):Qe.reviewAnnotState==="REJECTED"||((bt=Qe.reviewAnnotState)==null?void 0:bt.state)==="REJECTED"?(openBlock(),createBlock(ze,{key:1})):Qe.reviewAnnotState==="CANCELLED"||(($t=Qe.reviewAnnotState)==null?void 0:$t.state)==="CANCELLED"?(openBlock(),createBlock(Ne,{key:2})):Qe.reviewAnnotState==="COMPLETED"||((At=Qe.reviewAnnotState)==null?void 0:At.state)==="COMPLETED"?(openBlock(),createBlock(We,{key:3})):(openBlock(),createBlock(Fe,{key:4}))]}),_:2},1032,["class","onClick"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_23$1,[createBaseVNode("div",{class:"drop-item",onClick:yt=>U(Qe,"ACCEPTED")},[createVNode(Ve),createTextVNode(toDisplayString$1(ke.$t("leftPanel.accepted")),1)],8,_hoisted_24$1),createBaseVNode("div",{class:"drop-item",onClick:yt=>U(Qe,"REJECTED")},[createVNode(ze),createTextVNode(toDisplayString$1(ke.$t("leftPanel.rejected")),1)],8,_hoisted_25$1),createBaseVNode("div",{class:"drop-item",onClick:yt=>U(Qe,"CANCELLED")},[createVNode(Ne),createTextVNode(toDisplayString$1(ke.$t("leftPanel.cancelled")),1)],8,_hoisted_26$1),createBaseVNode("div",{class:"drop-item",onClick:yt=>U(Qe,"COMPLETED")},[createVNode(We),createTextVNode(toDisplayString$1(ke.$t("leftPanel.completed")),1)],8,_hoisted_27$1),createBaseVNode("div",{class:"drop-item",onClick:yt=>U(Qe,"NONE")},[createVNode(Fe),createTextVNode(toDisplayString$1(ke.$t("leftPanel.none")),1)],8,_hoisted_28$1)])]),_:2},1032,["show"]),createBaseVNode("div",_hoisted_29$1,[createVNode(Ye),(ht=(ct=Qe==null?void 0:Qe.replies)==null?void 0:ct.filter(yt=>yt.contents))!=null&&ht.length?(openBlock(),createElementBlock("span",_hoisted_30$1,toDisplayString$1(Qe.replies.filter(yt=>yt.contents).length),1)):createCommentVNode("",!0),createVNode(Ke,{class:"return",onClick:yt=>te(Qe)},null,8,["onClick"])])])],10,_hoisted_2$K)):createCommentVNode("",!0)],64)}),256))],64)):createCommentVNode("",!0)]))),256)):(openBlock(),createElementBlock("div",_hoisted_31$1,toDisplayString$1(ke.$t("leftPanel.noAnnotations")),1))],2)}}},_sfc_main$16={},_hoisted_1$R={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$J=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.56181 13.8733C9.85977 14.1611 10.3429 14.1611 10.6408 13.8733L14.7421 9.91282C15.0401 9.62509 15.0401 9.15858 14.7421 8.87085C14.4442 8.58311 13.9611 8.58311 13.6631 8.87085L10.75 11.6839L10.75 4C10.75 3.58579 10.4142 3.25 10 3.25C9.58581 3.25 9.25002 3.58579 9.25002 4L9.25003 11.4883L6.53951 8.87085C6.24155 8.58311 5.75846 8.58311 5.46049 8.87085C5.16253 9.15858 5.16253 9.62509 5.46049 9.91282L9.56181 13.8733ZM4 15.7543C3.58579 15.7543 3.25 16.0901 3.25 16.5043C3.25 16.9185 3.58579 17.2543 4 17.2543H16C16.4142 17.2543 16.75 16.9185 16.75 16.5043C16.75 16.0901 16.4142 15.7543 16 15.7543H4Z",fill:"currentColor"},null,-1),_hoisted_3$B=[_hoisted_2$J];function _sfc_render$x(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$R,_hoisted_3$B)}const __unplugin_components_2$8=_export_sfc(_sfc_main$16,[["render",_sfc_render$x]]),_sfc_main$15={},_hoisted_1$Q={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$I=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6374 2.96451C10.3413 2.67483 9.8613 2.67483 9.56523 2.96451L5.46391 6.97719C5.16784 7.26687 5.16784 7.73652 5.46391 8.0262C5.75999 8.31588 6.24002 8.31588 6.53609 8.0262L9.25012 5.37083L9.25012 12.8271C9.25012 13.2413 9.58591 13.5771 10.0001 13.5771C10.4143 13.5771 10.7501 13.2413 10.7501 12.8271L10.7501 5.17281L13.6665 8.0262C13.9626 8.31588 14.4426 8.31588 14.7387 8.0262C15.0348 7.73652 15.0348 7.26687 14.7387 6.97719L10.6374 2.96451ZM4 15.7516C3.58579 15.7516 3.25 16.0873 3.25 16.5016C3.25 16.9158 3.58579 17.2516 4 17.2516H16C16.4142 17.2516 16.75 16.9158 16.75 16.5016C16.75 16.0873 16.4142 15.7516 16 15.7516H4Z",fill:"currentColor"},null,-1),_hoisted_3$A=[_hoisted_2$I];function _sfc_render$w(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$Q,_hoisted_3$A)}const __unplugin_components_0$a=_export_sfc(_sfc_main$15,[["render",_sfc_render$w]]),AnnotationHeader_vue_vue_type_style_index_0_lang="",_hoisted_1$P={class:"annotation-header"},_hoisted_2$H={class:"annotation-title"},_hoisted_3$z={class:"annotation-header-buttons"},_sfc_main$14={__name:"AnnotationHeader",setup(e){const n=useDocumentStore(),r=useViewerStore(),o=computed(()=>r.isAnnotationExport),u=computed(()=>r.isAnnotationImport),{removeAllAnnotations:s,importAnnotations:w,exportXfdf:g}=core,v=()=>{uploadFile(isIOS$1?"":".xfdf").then(k=>{k.name.split(".").pop().toLowerCase()==="xfdf"&&w(k)})},y=computed(()=>n.getTotalPages),m=computed(()=>n.getAllAnnotations);computed(()=>n.getOptionUrl);const d=computed(()=>n.info);d.value&&d.value.token&&atob(d.value.token).replace(".pdf",".xfdf");const f=async()=>{try{r.setDownloading(!0);const x=await g(!0);r.setDownloading(!1),x||r.setDownloadError("Downloaded")}catch(x){console.log(x),r.setDownloading(!1),r.setDownloadError("Downloaded")}};return(x,k)=>{const P=__unplugin_components_0$a,S=_sfc_main$4l,E=__unplugin_components_2$8;return openBlock(),createElementBlock("div",_hoisted_1$P,[createBaseVNode("h2",_hoisted_2$H,toDisplayString$1(x.$t("leftPanel.annotations")),1),createBaseVNode("div",_hoisted_3$z,[o.value?(openBlock(),createBlock(S,{key:0,className:"button-icon",img:"icon-import",onClick:f,title:x.$t("leftPanel.exportAnnotations"),disabled:!m.value||m.value.annotationsCount===0},{default:withCtx(()=>[createVNode(P)]),_:1},8,["title","disabled"])):createCommentVNode("",!0),u.value?(openBlock(),createBlock(S,{key:1,className:"button-icon",img:"icon-export",onClick:v,title:x.$t("leftPanel.importAnnotations"),disabled:y.value<=0},{default:withCtx(()=>[createVNode(E)]),_:1},8,["title","disabled"])):createCommentVNode("",!0)])])}}},LeftPanel_vue_vue_type_style_index_0_lang="",_hoisted_1$O={class:"sidebar-content"},_hoisted_2$G=createBaseVNode("div",{class:"thumbnail-view"},null,-1),_sfc_main$13={__name:"LeftPanel",props:["isHeaderDisabled"],setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.getActiveElementTab("leftPanel")),u=computed(()=>n.isElementOpen("leftPanel")),s=computed(()=>r.getActiveTool);return watch(u,(w,g)=>{w&&s.value==="cropPage"&&r.setToolState("")}),(w,g)=>{const v=_sfc_main$14,y=_sfc_main$17,m=_sfc_main$1k,d=_sfc_main$1m,f=_sfc_main$1u,x=_sfc_main$1w,k=__unplugin_components_6$1;return openBlock(),createElementBlock("div",{class:normalizeClass(["left-panel",{closed:!u.value,mobile:unref(isMobileDevice)}]),id:"leftPanel",style:normalizeStyle({height:e.isHeaderDisabled?"100%":"calc(100% - 44px)"})},[createBaseVNode("div",_hoisted_1$O,[createBaseVNode("div",{class:normalizeClass(["thumbnail-container",{hidden:o.value!=="THUMBS"}])},[createBaseVNode("h2",null,toDisplayString$1(w.$t("leftPanel.thumbnails")),1),_hoisted_2$G],2),createBaseVNode("div",{class:normalizeClass(["annotation-container",{hidden:o.value!=="ANNOTATION"}])},[createVNode(v),createVNode(y)],2),withDirectives(createVNode(m,null,null,512),[[vShow,o.value==="OUTLINE"]]),createBaseVNode("div",{class:normalizeClass(["layer-container",{hidden:o.value!=="LAYER"}])},[createVNode(d)],2),createBaseVNode("div",{class:normalizeClass(["compare-container",{hidden:o.value!=="COMPARISON"}])},[createVNode(f)],2),createBaseVNode("div",{class:normalizeClass(["signature-container",{hidden:o.value!=="SIGNATURE"}])},[createVNode(x)],2),createBaseVNode("div",{class:normalizeClass(["findbar-container",{hidden:o.value!=="SEARCH"}])},[createVNode(k)],2)])],6)}}},SecurityApplyBar_vue_vue_type_style_index_0_lang="",_hoisted_1$N={class:"security-apply-bar"},_hoisted_2$F={class:"buttons"},_sfc_main$12={__name:"SecurityApplyBar",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=ref(0),u=w=>{if(!o.value){r.setToolState(""),n.setActiveToolMode("view");return}n.setRedactionConfirmDialog(w)},s=w=>{o.value=w};return core.addEvent("redactAnnotationChanged",s),(w,g)=>(openBlock(),createElementBlock("div",_hoisted_1$N,[createBaseVNode("span",null,toDisplayString$1(w.$t("security.applyTip")),1),createBaseVNode("div",_hoisted_2$F,[createBaseVNode("div",{class:"view-button",onClick:g[0]||(g[0]=v=>u(0))},toDisplayString$1(w.$t("security.exit")),1),createBaseVNode("div",{class:normalizeClass(["view-button apply-btn",{disabled:!o.value}]),onClick:g[1]||(g[1]=v=>u(1))},toDisplayString$1(w.$t("security.apply")),3)])]))}},SignatureVerifyBar_vue_vue_type_style_index_0_scoped_c3701190_lang="",_hoisted_1$M={class:"signature-verify"},_hoisted_2$E={key:0},_hoisted_3$y={key:0},_hoisted_4$6={key:1},_hoisted_5$3={key:2},_sfc_main$11={__name:"SignatureVerifyBar",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>n.getSignatureVerify),u=computed(()=>r.getSignatures),s=()=>{n.openElement("leftPanel"),n.setActiveElementTab("leftPanel","SIGNATURE")};return(w,g)=>{const v=__unplugin_components_0$g,y=__unplugin_components_1$2,m=__unplugin_components_2$b;return openBlock(),createElementBlock("div",_hoisted_1$M,[o.value===1?(openBlock(),createElementBlock("div",_hoisted_2$E,[createVNode(v),createBaseVNode("span",null,toDisplayString$1(w.$t("signatures.detailsDialog.validSignature")),1)])):u.value.length===1?(openBlock(),createElementBlock(Fragment,{key:1},[o.value===2?(openBlock(),createElementBlock("div",_hoisted_3$y,[createVNode(y),createBaseVNode("span",null,toDisplayString$1(w.$t("signatures.detailsDialog.invalidSignature")),1)])):(openBlock(),createElementBlock("div",_hoisted_4$6,[createVNode(m),createBaseVNode("span",null,toDisplayString$1(w.$t("signatures.detailsDialog.unknownSignature")),1)]))],64)):o.value===2||o.value===3?(openBlock(),createElementBlock("div",_hoisted_5$3,[createVNode(y),createBaseVNode("span",null,toDisplayString$1(w.$t("signatures.detailsDialog.atLeastOneInvalid")),1)])):createCommentVNode("",!0),createBaseVNode("div",{class:"view-button",onClick:s},toDisplayString$1(w.$t("signatures.detailsDialog.viewAllSignatures")),1)])}}},__unplugin_components_2$7=_export_sfc(_sfc_main$11,[["__scopeId","data-v-c3701190"]]),_sfc_main$10={},_hoisted_1$L={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$D=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.5663 0.846478C12.3457 0.625895 11.9792 0.658942 11.8017 0.915427L9.00221 4.95911C8.97541 4.99782 8.93581 5.02583 8.89039 5.03822L5.20212 6.04411C5.12329 6.06561 5.06548 6.13203 5.05485 6.21304C4.99741 6.65059 4.78835 8.10157 4.36452 9.61523C4.00509 10.8989 2.91361 13.3787 2.30714 14.7167C1.93791 14.5472 1.48666 14.6144 1.18254 14.9186C0.792017 15.3091 0.792017 15.9423 1.18254 16.3328C1.57307 16.7233 2.20623 16.7233 2.59676 16.3328C2.90731 16.0222 2.9709 15.5582 2.78754 15.1848C3.97427 14.6183 6.12247 13.6485 7.90006 13.1508C9.90855 12.5884 10.9209 12.4728 11.2798 12.4494C11.3716 12.4434 11.4526 12.3813 11.4768 12.2925L12.4771 8.6249C12.4895 8.57948 12.5175 8.53988 12.5562 8.51308L16.5999 5.71361C16.8563 5.53604 16.8894 5.16954 16.6688 4.94896L12.5663 0.846478ZM8.34417 7.93803C8.29817 7.89203 8.22119 7.90151 8.18771 7.95729L6.33809 11.04C6.28453 11.1293 6.38602 11.2308 6.47529 11.1772L9.558 9.32758C9.61378 9.2941 9.62326 9.21712 9.57726 9.17112L8.34417 7.93803ZM12.3814 12.3738C12.3814 12.1505 12.5293 11.9543 12.744 11.893L15.8033 11.0189C15.8931 10.9933 15.9883 10.9933 16.078 11.0189L19.1374 11.893C19.352 11.9543 19.5 12.1505 19.5 12.3738V15.913C19.5 16.0117 19.4713 16.1076 19.4146 16.1884C19.0137 16.7602 17.2809 19.1153 15.9407 19.1153C14.6004 19.1153 12.8677 16.7602 12.4667 16.1884C12.41 16.1076 12.3814 16.0117 12.3814 15.913V12.3738ZM14.9114 15.9254L14.9114 15.9255L15.6305 16.6446L17.9549 14.3201L17.2358 13.601L15.6305 15.2063L14.6993 14.2752L13.9802 14.9943L14.9114 15.9254Z",fill:"currentColor"},null,-1),_hoisted_3$x=[_hoisted_2$D];function _sfc_render$v(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$L,_hoisted_3$x)}const __unplugin_components_4$3=_export_sfc(_sfc_main$10,[["render",_sfc_render$v]]),_sfc_main$$={},_hoisted_1$K={width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$C=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.5623 7.9067L14.6557 3L11.5014 7.55623L7.64623 8.60766C7.64623 8.60766 7.44842 10.3155 6.94528 12.1125C6.58896 13.3851 5.50688 15.8434 4.90572 17.1698C4.5396 17.0014 4.09196 17.068 3.79034 17.3696C3.40322 17.7568 3.40322 18.3844 3.79034 18.7715C4.17746 19.1587 4.80511 19.1587 5.19223 18.7715C5.5 18.4638 5.56308 18.004 5.38149 17.6339C6.55777 17.0723 8.68764 16.1107 10.45 15.6172C13.034 14.8937 13.9547 14.9163 13.9547 14.9163L15.0061 11.061L19.5623 7.9067ZM10.7997 10.3601L12.2016 11.762L8.69685 13.8649L10.7997 10.3601ZM17.9547 17.5658C17.6177 16.9944 17.0028 16.7812 16.1476 16.8013C16.0495 16.8036 15.9455 16.8091 15.8353 16.8179L15.4861 16.854L15.0991 16.9101C15.0313 16.9211 14.962 16.933 14.891 16.9457L14.445 17.0323L13.9583 17.1398L13.4299 17.2684L12.8587 17.4186L12.2436 17.5906L11.2363 17.8906L10.5067 18.119L9.32254 18.5051L8.47165 18.7921L7.10044 19.2678L7.68591 21L8.57815 20.6888L9.82355 20.2659L10.5929 20.0127L11.3145 19.782L12.3087 19.4775L12.9138 19.3017L13.737 19.0778L14.2305 18.9546L14.6806 18.8519L15.088 18.7692L15.4535 18.7063L15.7779 18.6628C15.93 18.6459 16.0669 18.636 16.189 18.6332L16.3181 18.6327L16.2761 18.8388C16.2125 19.1636 16.1998 19.3368 16.2394 19.5948C16.324 20.1475 16.6955 20.5595 17.257 20.7155C17.7746 20.8593 18.5301 20.7995 19.6673 20.5229L20.2199 20.3798C20.4134 20.327 20.6166 20.2689 20.8298 20.2057L21.5002 20.0001L20.9702 18.2494L20.3733 18.4324L19.8368 18.5865L19.3603 18.7128L18.9431 18.8123C18.8784 18.8267 18.8163 18.8401 18.7565 18.8524L18.4273 18.9139C18.3273 18.9303 18.237 18.9427 18.1562 18.9514L18.0859 18.9576L18.118 18.7913C18.2062 18.2932 18.1885 17.9622 17.9547 17.5658Z",fill:"currentColor"},null,-1),_hoisted_3$w=[_hoisted_2$C];function _sfc_render$u(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$K,_hoisted_3$w)}const __unplugin_components_3$3=_export_sfc(_sfc_main$$,[["render",_sfc_render$u]]),_sfc_main$_={},_hoisted_1$J={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$B=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.5663 1.73124C12.3457 1.51066 11.9792 1.54371 11.8017 1.80019L9.00221 5.84387C8.97541 5.88258 8.93581 5.9106 8.89039 5.92298L5.20212 6.92888C5.12329 6.95038 5.06548 7.01679 5.05485 7.0978C4.99741 7.53536 4.78835 8.98634 4.36452 10.5C4.00509 11.7837 2.91361 14.2634 2.30714 15.6015C1.93791 15.4319 1.48666 15.4992 1.18254 15.8033C0.792017 16.1939 0.792017 16.827 1.18254 17.2175C1.57307 17.6081 2.20623 17.6081 2.59676 17.2175C2.90731 16.907 2.9709 16.443 2.78754 16.0696C3.97427 15.503 6.12247 14.5333 7.90006 14.0355C9.90855 13.4732 10.9209 13.3576 11.2798 13.3342C11.3716 13.3282 11.4526 13.266 11.4768 13.1773L12.4771 9.50966C12.4895 9.46424 12.5175 9.42465 12.5562 9.39785L16.5999 6.59838C16.8563 6.42081 16.8894 6.05431 16.6688 5.83373L12.5663 1.73124ZM8.34417 8.8228C8.29817 8.77679 8.22119 8.78627 8.18771 8.84206L6.33809 11.9248C6.28453 12.014 6.38602 12.1155 6.47529 12.062L9.558 10.2123C9.61378 10.1789 9.62326 10.1019 9.57726 10.0559L8.34417 8.8228ZM16.027 16.5933C15.9522 16.5981 15.8766 16.6005 15.8006 16.6005C15.7254 16.6005 15.6507 16.5982 15.5767 16.5935L14.0309 19.2709C13.9525 19.4067 13.7553 19.4035 13.6813 19.2651L13.0771 18.1343C13.0412 18.0671 12.9702 18.0262 12.8941 18.0287L11.6126 18.0708C11.4558 18.0759 11.3544 17.9067 11.4329 17.7709L12.9536 15.1369C12.5425 14.5632 12.3006 13.8601 12.3006 13.1005C12.3006 11.1675 13.8676 9.60053 15.8006 9.60053C17.7336 9.60053 19.3006 11.1675 19.3006 13.1005C19.3006 13.8592 19.0592 14.5615 18.649 15.1348L20.171 17.7709C20.2494 17.9067 20.148 18.0759 19.9912 18.0708L18.7098 18.0287C18.6336 18.0262 18.5627 18.0671 18.5268 18.1343L17.9225 19.2651C17.8486 19.4035 17.6514 19.4067 17.5729 19.2709L16.027 16.5933Z",fill:"currentColor"},null,-1),_hoisted_3$v=[_hoisted_2$B];function _sfc_render$t(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$J,_hoisted_3$v)}const __unplugin_components_2$6=_export_sfc(_sfc_main$_,[["render",_sfc_render$t]]),_sfc_main$Z={},_hoisted_1$I={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$A=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 16V4H18V16H3ZM1.5 3.5C1.5 2.94772 1.94772 2.5 2.5 2.5H18.5C19.0523 2.5 19.5 2.94772 19.5 3.5V16.5C19.5 17.0523 19.0523 17.5 18.5 17.5H2.5C1.94772 17.5 1.5 17.0523 1.5 16.5V3.5ZM10.3774 13.1117C9.88462 14.0732 9.12745 14.6461 8.15796 14.6461C7.29663 14.6461 6.83191 14.1213 6.83191 13.3C6.83191 13.2359 6.83592 13.1758 6.84393 13.1117H4V12.2865H7.06427C7.2766 11.8017 7.62113 11.305 8.06982 10.8523C7.13237 10.1151 6.27505 8.98137 6.27505 7.62728C6.27505 6.38937 7.09231 5.5 8.25811 5.5C9.79649 5.5 10.8862 7.10247 11.0304 9.27383C11.3268 9.21774 11.6313 9.1897 11.9398 9.1897C12.5407 9.1897 12.9093 9.49417 12.9093 10.003C12.9093 10.067 12.8995 10.1298 12.8864 10.1889L12.844 10.3525C12.8309 10.4018 12.8212 10.445 12.8212 10.4797C12.8212 10.5238 12.8372 10.5398 12.8732 10.5398C12.9385 10.5398 13.0642 10.443 13.2278 10.3047L13.4031 10.1546L13.5985 9.98918C13.9722 9.67931 14.4221 9.35395 14.8082 9.35395C15.3152 9.35395 15.4429 9.75975 15.5112 10.1168L15.5627 10.4004C15.5929 10.5465 15.6313 10.6479 15.7176 10.6479C15.7399 10.6479 15.7763 10.6396 15.8268 10.623L15.9467 10.5788L16.1042 10.5123L16.2995 10.4238L16.4637 11.245L16.2383 11.3483L16.0433 11.4309C15.8337 11.5152 15.6864 11.5574 15.6014 11.5574C15.0514 11.5574 14.8602 11.2147 14.7653 10.8984L14.7297 10.7655L14.6756 10.5353C14.6496 10.4385 14.6205 10.3755 14.5679 10.3755C14.501 10.3755 14.3806 10.4669 14.2239 10.6019L13.8668 10.916L13.6613 11.0903C13.2715 11.4106 12.8163 11.7176 12.4005 11.7176C12.0279 11.7176 11.7635 11.4812 11.7635 11.1207C11.7635 10.9165 11.8211 10.7485 11.8751 10.5908C11.9229 10.4515 11.9678 10.3202 11.9678 10.1792C11.9678 10.1151 11.9158 10.0711 11.8236 10.0711C11.5592 10.0711 11.2948 10.1031 11.0424 10.1552C11.0144 10.9484 10.9022 11.6695 10.7099 12.2865H16.6226V13.1117H10.3774ZM7.15643 7.61933C7.15643 8.80115 7.97369 9.69854 8.73086 10.2834C9.15551 9.96695 9.63625 9.70254 10.1611 9.51025C10.089 7.72749 9.32778 6.38542 8.26213 6.38542C7.60912 6.38542 7.15643 6.90222 7.15643 7.61933ZM8.07385 12.2865H9.76046C9.95676 11.7737 10.089 11.1528 10.141 10.4597C9.9207 10.5639 9.70837 10.684 9.51207 10.8122C9.58685 10.8763 9.70169 10.9542 9.85658 11.0458L9.22061 11.5887L8.82301 11.3611C8.51053 11.6576 8.25413 11.978 8.07385 12.2865ZM7.76133 13.2119C7.76133 13.5444 7.9336 13.7648 8.2621 13.7648C8.66673 13.7648 9.03129 13.5244 9.33176 13.1118H7.76934C7.76894 13.1154 7.76853 13.119 7.76813 13.1226C7.76457 13.1543 7.76133 13.1831 7.76133 13.2119Z",fill:"currentColor"},null,-1),_hoisted_3$u=[_hoisted_2$A];function _sfc_render$s(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$I,_hoisted_3$u)}const __unplugin_components_0$9=_export_sfc(_sfc_main$Z,[["render",_sfc_render$s]]),Danger=""+new URL("icon-danger.e75f0c25.svg",import.meta.url).href,SignatureToolBar_vue_vue_type_style_index_0_lang="",_hoisted_1$H={key:0,class:"signature-tool"},_sfc_main$Y={__name:"SignatureToolBar",setup(e){const{t:n}=useI18n(),{switchTool:r,switchAnnotationEditorMode:o,verifySignature:u}=core,s=useDocumentStore(),w=useViewerStore(),g=computed(()=>s.getActiveTool),v=computed(()=>s.getSignatures),y=computed(()=>s.getDisableDigitalSignature),m=computed(()=>s.getDisableElectronicSignature),d=computed(()=>w.getDisableSignatureTool);watch(()=>g.value,k=>{(k==="addDigitalSign"||k==="addElectronicSign")&&window.$message.warning(n("signatures.danger"),{duration:3e3,icon:()=>h$1("img",{src:Danger}),max:1,class:"sign-danger",style:{backgroundColor:"#FFF4E5"}})});const f=k=>{s.setToolState(k),w.toggleActiveHand(!1),r(0),o(0)},x=async()=>{f(""),await u();const k=v.value;if(k.length!==0){if(k.length===1){const P=k[0].signerList[0].isSignVerified,S=k[0].signerList[0].isCertTrusted;P&&S?w.setSignatureVerify(1):P?P&&!S&&w.setSignatureVerify(3):w.setSignatureVerify(2);return}else for(let P=0;P<k.length;P++){const S=k[P].signerList[0].isSignVerified,E=k[P].signerList[0].isCertTrusted;if(!(S&&E)&&(!S||!E)){w.setSignatureVerify(2);return}}w.setSignatureVerify(1)}};return(k,P)=>{const S=__unplugin_components_0$9,E=_sfc_main$4l,M=__unplugin_components_2$6,T=__unplugin_components_3$3,D=__unplugin_components_4$3;return d.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_1$H,[createVNode(E,{id:"createSignFieldButton",class:normalizeClass({active:g.value==="signatureFields"}),onClick:P[0]||(P[0]=I=>f("signatureFields")),title:k.$t("header.createSignField")},{default:withCtx(()=>[createVNode(S),createBaseVNode("span",null,toDisplayString$1(k.$t("header.createSignField")),1)]),_:1},8,["class","title"]),y.value?createCommentVNode("",!0):(openBlock(),createBlock(E,{key:0,class:normalizeClass({active:g.value==="addDigitalSign"}),onClick:P[1]||(P[1]=I=>f("addDigitalSign")),title:k.$t("header.addDigitalSign")},{default:withCtx(()=>[createVNode(M),createBaseVNode("span",null,toDisplayString$1(k.$t("header.addDigitalSign")),1)]),_:1},8,["class","title"])),m.value?createCommentVNode("",!0):(openBlock(),createBlock(E,{key:1,class:normalizeClass({active:g.value==="addElectronicSign"}),onClick:P[2]||(P[2]=I=>f("addElectronicSign")),title:k.$t("header.addElectronicSign")},{default:withCtx(()=>[createVNode(T),createBaseVNode("span",null,toDisplayString$1(k.$t("header.addElectronicSign")),1)]),_:1},8,["class","title"])),y.value?createCommentVNode("",!0):(openBlock(),createBlock(E,{key:2,onClick:x,title:k.$t("header.verifyDigitalSign"),disabled:!v.value.length},{default:withCtx(()=>[createVNode(D),createBaseVNode("span",null,toDisplayString$1(k.$t("header.verifyDigitalSign")),1)]),_:1},8,["title","disabled"]))]))}}},ComparedToolbar_vue_vue_type_style_index_0_lang="",_hoisted_1$G={class:"compare-toolbar"},_hoisted_2$z={class:"file-color"},_sfc_main$X={__name:"ComparedToolbar",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>r.getCompareSetting("oldFileColor")),u=computed(()=>r.getCompareSetting("newFileColor")),s=()=>{n.setCompareStatus("end"),r.initCompareFiles()};return(w,g)=>{const v=_sfc_main$2_,y=__unplugin_components_1$g;return openBlock(),createElementBlock("div",_hoisted_1$G,[createVNode(v),createBaseVNode("div",_hoisted_2$z,[createBaseVNode("div",null,[createBaseVNode("div",{class:"color",style:normalizeStyle({"background-color":o.value})},null,4),createBaseVNode("span",null,toDisplayString$1(w.$t("compare.oldFile")),1)]),createBaseVNode("div",null,[createBaseVNode("div",{class:"color",style:normalizeStyle({"background-color":u.value})},null,4),createBaseVNode("span",null,toDisplayString$1(w.$t("compare.newFile")),1)])]),createVNode(y,{class:"close",onClick:s})])}}},_sfc_main$W={},_hoisted_1$F={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$y=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.3107 1.25H2.25V18.75H10V17.25H3.75V2.75H12.689L16.25 6.311V10H17.75V5.68934L13.3107 1.25ZM5 6H14V10H5V6ZM11.4945 15.1106L12.7372 13.5H17.5V16.5H12.6887L11.4945 15.1106ZM9.56053 15.1617L12 18H17.5H19V16.5V13.5V12H17.5H12L9.56053 15.1617Z",fill:"currentColor"},null,-1),_hoisted_3$t=[_hoisted_2$y];function _sfc_render$r(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$F,_hoisted_3$t)}const __unplugin_components_2$5=_export_sfc(_sfc_main$W,[["render",_sfc_render$r]]),_sfc_main$V={},_hoisted_1$E={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$x=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.3107 1.25H2.25V18.75H17.75V5.68934L13.3107 1.25ZM12.689 2.75L16.25 6.311V17.25H3.75V2.75H12.689ZM15 8H5V12H15V8Z",fill:"currentColor"},null,-1),_hoisted_3$s=[_hoisted_2$x];function _sfc_render$q(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$E,_hoisted_3$s)}const __unplugin_components_0$8=_export_sfc(_sfc_main$V,[["render",_sfc_render$q]]),RedactionToolbar_vue_vue_type_style_index_0_lang="",_hoisted_1$D={class:"redaction-toolbar"},_sfc_main$U={__name:"RedactionToolbar",props:["items"],setup(e){const n=useDocumentStore(),r=useViewerStore(),o=computed(()=>n.getActiveTool),u=computed(()=>n.getRedactionPrompted),s=w=>{u.value?o.value!==w&&(n.setToolState(w),r.resetPanels()):(n.setFirstEnterRedactionTool(w),r.openElement("redactionTipDialog"))};return(w,g)=>{const v=__unplugin_components_0$8,y=_sfc_main$4l,m=__unplugin_components_2$5,d=_sfc_main$2z;return openBlock(),createElementBlock("div",_hoisted_1$D,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(f,x)=>(openBlock(),createElementBlock(Fragment,{key:x},[f.type==="fillBlack"?(openBlock(),createBlock(y,{key:0,"data-element":f.dataElement,class:normalizeClass(["with-text",{active:o.value==="redaction"}]),onClick:g[0]||(g[0]=k=>s("redaction")),title:w.$t(f.title)},{default:withCtx(()=>[createVNode(v),createBaseVNode("span",null,toDisplayString$1(w.$t(f.title)),1)]),_:2},1032,["data-element","class","title"])):f.type==="fillWhite"?(openBlock(),createBlock(y,{key:1,"data-element":f.dataElement,class:normalizeClass(["with-text",{active:o.value==="remove"}]),onClick:g[1]||(g[1]=k=>s("remove")),title:w.$t(f.title)},{default:withCtx(()=>[createVNode(m),createBaseVNode("span",null,toDisplayString$1(w.$t(f.title)),1)]),_:2},1032,["data-element","class","title"])):f.name==="customButton"&&!f.hidden&&!f.dropItem?(openBlock(),createBlock(d,{key:2,item:f},null,8,["item"])):createCommentVNode("",!0)],64))),128))])}}},_sfc_main$T={},_hoisted_1$C={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$w=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.8333 7.33333H15.8333H14.5H13.1666H11.8333H7.83331V6C7.83331 4.52724 9.02722 3.33333 10.5 3.33333C11.9727 3.33333 13.1666 4.52724 13.1666 6H14.5C14.5 3.79086 12.7091 2 10.5 2C8.29084 2 6.49998 3.79086 6.49998 6V7.33333H5.16665C4.43027 7.33333 3.83331 7.93029 3.83331 8.66667V16.6667C3.83331 17.403 4.43027 18 5.16665 18H15.8333C16.5697 18 17.1666 17.403 17.1666 16.6667V8.66667C17.1666 7.93029 16.5697 7.33333 15.8333 7.33333ZM6.49998 8.6784V8.66667H5.16665L5.16665 16.6667H15.8333L15.8333 8.66667H14.5V8.6784H13.1666H7.83331H6.49998Z",fill:"currentColor"},null,-1),_hoisted_3$r=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.1667 13.4263C11.8182 13.1626 12.2778 12.5238 12.2778 11.7778C12.2778 10.7959 11.4818 10 10.5 10C9.51817 10 8.72223 10.7959 8.72223 11.7778C8.72223 12.5239 9.18185 13.1626 9.83339 13.4264V14.6667C9.83339 15.0349 10.1319 15.3333 10.5001 15.3333C10.8683 15.3333 11.1667 15.0349 11.1667 14.6667V13.4263Z",fill:"currentColor"},null,-1),_hoisted_4$5=[_hoisted_2$w,_hoisted_3$r];function _sfc_render$p(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$C,_hoisted_4$5)}const __unplugin_components_2$4=_export_sfc(_sfc_main$T,[["render",_sfc_render$p]]),_sfc_main$S={},_hoisted_1$B={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$v=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.1666 7.25722V6C13.1666 4.52724 11.9727 3.33333 10.4999 3.33333C9.02716 3.33333 7.83325 4.52724 7.83325 6V7.25722H13.1666ZM10.4999 2C8.29078 2 6.49992 3.79086 6.49992 6V7.25722V7.33333H4.72214C4.23122 7.33333 3.83325 7.7313 3.83325 8.22222V17.1111C3.83325 17.602 4.23122 18 4.72214 18H16.2777C16.7686 18 17.1666 17.602 17.1666 17.1111V8.22222C17.1666 7.7313 16.7686 7.33333 16.2777 7.33333H14.4999V7.25722V6C14.4999 3.79086 12.7091 2 10.4999 2ZM5.16659 8.66667V16.6667H15.8333V8.66667H5.16659ZM7.50005 11.5707V13.0707H13.5001V11.5707H7.50005Z",fill:"currentColor"},null,-1),_hoisted_3$q=[_hoisted_2$v];function _sfc_render$o(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$B,_hoisted_3$q)}const __unplugin_components_0$7=_export_sfc(_sfc_main$S,[["render",_sfc_render$o]]),SecurityToolbar_vue_vue_type_style_index_0_lang="",_hoisted_1$A={class:"security-toolbar"},_sfc_main$R={__name:"SecurityToolbar",props:["items"],setup(e){const n=getCurrentInstance().appContext.app.config.globalProperties,r=ref(!1),o=useDocumentStore(),u=useViewerStore(),s=computed(()=>o.getFilehasPwd),w=computed(()=>u.getWebviewerMode),g=computed(()=>u.isElementOpen("setPasswordModal")),v=()=>{u.openElement("setPasswordModal")},y=async()=>{if(!s.value&&w.value!=="Standalone"||r.value)return;r.value=!0,await core.removePassword()?window.$message.success(n.$t("passwordDialog.removePwdSuccess"),{duration:3e3,icon:()=>h$1("img",{src:MessageSuccess})}):window.$message.error(n.$t("passwordDialog.removePwdFailure"),{duration:3e3,icon:()=>h$1("img",{src:MessageError})}),r.value=!1};return(m,d)=>{const f=__unplugin_components_0$7,x=_sfc_main$4l,k=__unplugin_components_2$4,P=_sfc_main$2z;return openBlock(),createElementBlock("div",_hoisted_1$A,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(S,E)=>(openBlock(),createElementBlock(Fragment,{key:E},[S.type==="encryption"?(openBlock(),createBlock(x,{key:0,"data-element":S.dataElement,class:normalizeClass(["with-text",{active:g.value}]),onClick:v,title:m.$t(S.title)},{default:withCtx(()=>[createVNode(f),createBaseVNode("span",null,toDisplayString$1(m.$t(S.title)),1)]),_:2},1032,["data-element","class","title"])):S.type==="decryption"?(openBlock(),createBlock(x,{key:1,"data-element":S.dataElement,class:normalizeClass(["with-text",{disabled:!s.value&&w.value!=="Standalone"}]),onClick:y,title:m.$t(S.title)},{default:withCtx(()=>[createVNode(k),createBaseVNode("span",null,toDisplayString$1(m.$t(S.title)),1)]),_:2},1032,["data-element","class","title"])):S.name==="customButton"&&!S.hidden&&!S.dropItem?(openBlock(),createBlock(P,{key:2,item:S},null,8,["item"])):createCommentVNode("",!0)],64))),128))])}}},_sfc_main$Q={__name:"PushButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),u=useViewerStore(),s=computed(()=>o.getActiveTool),w=g=>{o.setToolState(g),u.toggleActiveHand(!1),n(0),r(0)};return(g,v)=>{const y=__unplugin_components_0$q,m=_sfc_main$4l;return openBlock(),createBlock(m,{class:normalizeClass(["with-text",{active:s.value==="pushbutton"}]),title:g.$t("header.button"),onClick:v[0]||(v[0]=d=>w("pushbutton"))},{default:withCtx(()=>[createVNode(y),createBaseVNode("span",null,toDisplayString$1(g.$t("header.button")),1)]),_:1},8,["title","class"])}}},_sfc_main$P={__name:"ComboBox",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),u=useViewerStore(),s=computed(()=>o.getActiveTool),w=g=>{o.setToolState(g),u.toggleActiveHand(!1),n(0),r(0)};return(g,v)=>{const y=__unplugin_components_0$p,m=_sfc_main$4l;return openBlock(),createBlock(m,{class:normalizeClass(["with-text",{active:s.value==="combobox"}]),title:g.$t("header.comboButton"),onClick:v[0]||(v[0]=d=>w("combobox"))},{default:withCtx(()=>[createVNode(y),createBaseVNode("span",null,toDisplayString$1(g.$t("header.comboButton")),1)]),_:1},8,["title","class"])}}},_sfc_main$O={__name:"ListBox",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),u=useViewerStore(),s=computed(()=>o.getActiveTool),w=g=>{o.setToolState(g),u.toggleActiveHand(!1),n(0),r(0)};return(g,v)=>{const y=__unplugin_components_0$o,m=_sfc_main$4l;return openBlock(),createBlock(m,{class:normalizeClass(["with-text",{active:s.value==="listbox"}]),title:g.$t("header.listBox"),onClick:v[0]||(v[0]=d=>w("listbox"))},{default:withCtx(()=>[createVNode(y),createBaseVNode("span",null,toDisplayString$1(g.$t("header.listBox")),1)]),_:1},8,["title","class"])}}},_sfc_main$N={__name:"RadioButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),u=useViewerStore(),s=computed(()=>o.getActiveTool),w=g=>{o.setToolState(g),u.toggleActiveHand(!1),n(0),r(0)};return(g,v)=>{const y=__unplugin_components_0$n,m=_sfc_main$4l;return openBlock(),createBlock(m,{class:normalizeClass(["with-text",{active:s.value==="radiobutton"}]),title:g.$t("header.radioButton"),onClick:v[0]||(v[0]=d=>w("radiobutton"))},{default:withCtx(()=>[createVNode(y),createBaseVNode("span",null,toDisplayString$1(g.$t("header.radioButton")),1)]),_:1},8,["title","class"])}}},_sfc_main$M={__name:"CheckBoxButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),u=useViewerStore(),s=computed(()=>o.getActiveTool),w=g=>{o.setToolState(g),u.toggleActiveHand(!1),n(0),r(0)};return(g,v)=>{const y=__unplugin_components_0$m,m=_sfc_main$4l;return openBlock(),createBlock(m,{class:normalizeClass(["with-text",{active:s.value==="checkbox"}]),title:g.$t("header.checkbox"),onClick:v[0]||(v[0]=d=>w("checkbox"))},{default:withCtx(()=>[createVNode(y),createBaseVNode("span",null,toDisplayString$1(g.$t("header.checkbox")),1)]),_:1},8,["title","class"])}}},_sfc_main$L={__name:"TextFieldButton",props:["item"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),u=useViewerStore(),s=computed(()=>o.getActiveTool),w=g=>{o.setToolState(g),u.toggleActiveHand(!1),n(0),r(0)};return(g,v)=>{const y=__unplugin_components_0$l,m=_sfc_main$4l;return openBlock(),createBlock(m,{class:normalizeClass(["with-text",{active:s.value==="textfield"}]),title:g.$t("header.textField"),onClick:v[0]||(v[0]=d=>w("textfield"))},{default:withCtx(()=>[createVNode(y),createBaseVNode("span",null,toDisplayString$1(g.$t("header.textField")),1)]),_:1},8,["title","class"])}}},FormToolBar_vue_vue_type_style_index_0_scoped_949e7776_lang="",_hoisted_1$z={class:"form-tool"},_sfc_main$K={__name:"FormToolBar",props:["items"],setup(e){const n=useDocumentStore(),r=useViewerStore(),o=computed(()=>r.getToolMode);computed(()=>n.getActiveTool);const u=computed(()=>r.isElementOpen("rightPanel")),s=ref(!0);let w=null;const g=["textfield","checkbox","radiobutton","listbox","combobox","pushbutton","signatureFields"],v=()=>{r.toggleElement("rightPanel")},y=d=>{w=d};core.addEvent("annotationSelected",y);const m=()=>{setTimeout(()=>{document.getElementsByClassName("outline-container").length&&g.includes(w==null?void 0:w.type)?s.value=!1:s.value=!0})};return core.addEvent("changeRightPanelBtnDisabled",m),(d,f)=>{const x=_sfc_main$L,k=_sfc_main$M,P=_sfc_main$N,S=_sfc_main$O,E=_sfc_main$P,M=_sfc_main$Q,T=_sfc_main$2z,D=__unplugin_components_19,I=_sfc_main$4l;return openBlock(),createElementBlock("div",_hoisted_1$z,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(N,O)=>(openBlock(),createElementBlock(Fragment,{key:O},[N.type==="textFieldButton"&&!N.hidden?(openBlock(),createBlock(x,{key:0,item:N,"data-element":N.dataElement},null,8,["item","data-element"])):N.type==="checkBoxButton"&&!N.hidden?(openBlock(),createBlock(k,{key:1,item:N,"data-element":N.dataElement},null,8,["item","data-element"])):N.type==="radioButton"&&!N.hidden?(openBlock(),createBlock(P,{key:2,item:N,"data-element":N.dataElement},null,8,["item","data-element"])):N.type==="listBox"&&!N.hidden?(openBlock(),createBlock(S,{key:3,item:N,"data-element":N.dataElement},null,8,["item","data-element"])):N.type==="comboBox"&&!N.hidden?(openBlock(),createBlock(E,{key:4,item:N,"data-element":N.dataElement},null,8,["item","data-element"])):N.type==="pushButton"&&!N.hidden?(openBlock(),createBlock(M,{key:5,item:N,"data-element":N.dataElement},null,8,["item","data-element"])):N.name==="customButton"&&!N.hidden&&!N.dropItem?(openBlock(),createBlock(T,{key:6,item:N},null,8,["item"])):["spacer","divider"].includes(N.type)?(openBlock(),createElementBlock("div",{key:7,class:normalizeClass(N.type)},null,2)):N.type==="property"&&!N.hidden?(openBlock(),createBlock(I,{key:8,onClick:v,title:d.$t(N.title),"data-element":N.dataElement,isActive:u.value,disabled:s.value&&o.value==="form",id:N.id,class:"property"},{default:withCtx(()=>[createVNode(D)]),_:2},1032,["title","data-element","isActive","disabled","id"])):createCommentVNode("",!0)],64))),128))])}}},__unplugin_components_5$1=_export_sfc(_sfc_main$K,[["__scopeId","data-v-949e7776"]]),MeasurementToolBar_vue_vue_type_style_index_0_scoped_1c7ae7d5_lang="",_hoisted_1$y={class:"measurement-tool"},_sfc_main$J={__name:"MeasurementToolBar",props:["items"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),u=useViewerStore(),s=computed(()=>o.getActiveTool),w=computed(()=>u.isElementOpen("measurePanel")),g=ref(!0);let v=null;const y=x=>{o.setToolState(x),u.toggleActiveHand(!1),n(0),r(0)},m=()=>{u.toggleElement("measurePanel")},d=x=>{v=x,setTimeout(()=>{document.getElementsByClassName("outline-container").length&&v&&v.measure?g.value=!1:g.value=!0})};core.addEvent("annotationSelected",d);const f=()=>{v=null,g.value=!0};return core.addEvent("annotationDeselected",f),(x,k)=>{const P=__unplugin_components_0$j,S=_sfc_main$4l,E=__unplugin_components_2$d,M=__unplugin_components_3$7,T=__unplugin_components_4$8,D=__unplugin_components_5$4,I=__unplugin_components_6$4,N=__unplugin_components_7$2,O=_sfc_main$2z,F=__unplugin_components_19;return openBlock(),createElementBlock("div",_hoisted_1$y,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(U,Y)=>(openBlock(),createElementBlock(Fragment,{key:Y},[U.type==="line"&&!U.hidden?(openBlock(),createBlock(S,{key:0,"data-element":U.dataElement,class:normalizeClass(["with-text",{active:s.value==="line"}]),title:x.$t(U.title),onClick:k[0]||(k[0]=Q=>y("line"))},{default:withCtx(()=>[createVNode(P),createBaseVNode("span",null,toDisplayString$1(x.$t(U.title)),1)]),_:2},1032,["data-element","class","title"])):U.type==="polyline"&&!U.hidden?(openBlock(),createBlock(S,{key:1,"data-element":U.dataElement,class:normalizeClass(["with-text",{active:s.value==="polyline"}]),title:x.$t(U.title),onClick:k[1]||(k[1]=Q=>y("polyline"))},{default:withCtx(()=>[createVNode(E),createBaseVNode("span",null,toDisplayString$1(x.$t(U.title)),1)]),_:2},1032,["data-element","class","title"])):U.type==="curve"&&!U.hidden?(openBlock(),createBlock(S,{key:2,"data-element":U.dataElement,class:normalizeClass(["with-text",{active:s.value==="curve"}]),title:x.$t(U.title),onClick:k[2]||(k[2]=Q=>y("curve"))},{default:withCtx(()=>[createVNode(M),createBaseVNode("span",null,toDisplayString$1(x.$t(U.title)),1)]),_:2},1032,["data-element","class","title"])):U.type==="arc"&&!U.hidden?(openBlock(),createBlock(S,{key:3,"data-element":U.dataElement,class:normalizeClass(["with-text",{active:s.value==="arc"}]),title:x.$t(U.title),onClick:k[3]||(k[3]=Q=>y("arc"))},{default:withCtx(()=>[createVNode(T),createBaseVNode("span",null,toDisplayString$1(x.$t(U.title)),1)]),_:2},1032,["data-element","class","title"])):U.type==="circle"&&!U.hidden?(openBlock(),createBlock(S,{key:4,"data-element":U.dataElement,class:normalizeClass(["with-text",{active:s.value==="circle"}]),title:x.$t(U.title),onClick:k[4]||(k[4]=Q=>y("circle"))},{default:withCtx(()=>[createVNode(D),createBaseVNode("span",null,toDisplayString$1(x.$t(U.title)),1)]),_:2},1032,["data-element","class","title"])):U.type==="rectangle"&&!U.hidden?(openBlock(),createBlock(S,{key:5,"data-element":U.dataElement,class:normalizeClass(["with-text",{active:s.value==="rectangle"}]),title:x.$t(U.title),onClick:k[5]||(k[5]=Q=>y("rectangle"))},{default:withCtx(()=>[createVNode(I),createBaseVNode("span",null,toDisplayString$1(x.$t(U.title)),1)]),_:2},1032,["data-element","class","title"])):U.type==="polygon"&&!U.hidden?(openBlock(),createBlock(S,{key:6,"data-element":U.dataElement,class:normalizeClass(["with-text",{active:s.value==="polygon"}]),title:x.$t(U.title),onClick:k[6]||(k[6]=Q=>y("polygon"))},{default:withCtx(()=>[createVNode(N),createBaseVNode("span",null,toDisplayString$1(x.$t(U.title)),1)]),_:2},1032,["data-element","class","title"])):U.name==="customButton"&&!U.hidden&&!U.dropItem?(openBlock(),createBlock(O,{key:7,item:U},null,8,["item"])):["spacer","divider"].includes(U.type)?(openBlock(),createElementBlock("div",{key:8,class:normalizeClass(U.type)},null,2)):U.type==="property"&&!U.hidden?(openBlock(),createBlock(S,{key:9,onClick:m,title:x.$t(U.title),"data-element":U.dataElement,isActive:w.value,disabled:g.value&&!["line","polyline","curve","arc","circle","rectangle","polygon"].includes(s.value),id:U.id,class:"property"},{default:withCtx(()=>[createVNode(F)]),_:2},1032,["title","data-element","isActive","disabled","id"])):createCommentVNode("",!0)],64))),128))])}}},__unplugin_components_4$2=_export_sfc(_sfc_main$J,[["__scopeId","data-v-1c7ae7d5"]]),_sfc_main$I={},_hoisted_1$x={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$u=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.2802 7.62131L16.8105 8.15164L16.2802 8.68197L12.6589 12.3033L11.5982 11.2426L13.9392 8.90164H7.24989C5.7311 8.90164 4.49989 10.1329 4.49989 11.6516C4.49989 13.1704 5.7311 14.4016 7.24989 14.4016H14.7499V15.9016H7.24989C4.90268 15.9016 2.99989 13.9988 2.99989 11.6516C2.99989 9.30443 4.90268 7.40164 7.24989 7.40164H13.9392L11.5982 5.06066L12.6589 4L16.2802 7.62131Z",fill:"currentColor"},null,-1),_hoisted_3$p=[_hoisted_2$u];function _sfc_render$n(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$x,_hoisted_3$p)}const __unplugin_components_4$1=_export_sfc(_sfc_main$I,[["render",_sfc_render$n]]),_sfc_main$H={},_hoisted_1$w={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$t=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.53033 7.62131L3 8.15164L3.53033 8.68197L7.15164 12.3033L8.2123 11.2426L5.87132 8.90164H12.5607C14.0794 8.90164 15.3107 10.1329 15.3107 11.6516C15.3107 13.1704 14.0794 14.4016 12.5607 14.4016H5.06066V15.9016H12.5607C14.9079 15.9016 16.8107 13.9988 16.8107 11.6516C16.8107 9.30443 14.9079 7.40164 12.5607 7.40164H5.87132L8.2123 5.06066L7.15164 4L3.53033 7.62131Z",fill:"currentColor"},null,-1),_hoisted_3$o=[_hoisted_2$t];function _sfc_render$m(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$w,_hoisted_3$o)}const __unplugin_components_3$2=_export_sfc(_sfc_main$H,[["render",_sfc_render$m]]),_sfc_main$G={},_hoisted_1$v={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$s=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.5 3H1.75V3.75V16.25V17H2.5H19H19.75V16.25V10H18.25V15.5H18.2147L12.8718 10.8178L10.5643 13.25L6.29496 9.75L3.25 12.9595V4.5H13.75V3H2.5ZM14.5 8.25C14.5 9.07843 13.8284 9.75 13 9.75C12.1716 9.75 11.5 9.07843 11.5 8.25C11.5 7.42157 12.1716 6.75 13 6.75C13.8284 6.75 14.5 7.42157 14.5 8.25ZM16.75 6.75H14.5V5.25H16.75V3H18.25V5.25H20.5V6.75H18.25V9H16.75V6.75Z",fill:"currentColor"},null,-1),_hoisted_3$n=[_hoisted_2$s];function _sfc_render$l(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$v,_hoisted_3$n)}const __unplugin_components_2$3=_export_sfc(_sfc_main$G,[["render",_sfc_render$l]]),_sfc_main$F={},_hoisted_1$u={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$r=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.25 3H1.5V3.75V16.25V17H2.25H18.75H19.5V16.25V10H18V15.5H3V4.5H13.5V3H2.25ZM12.5 8V5.5H4.5V8H6V7H7.75V13H7V14.5H10V13H9.25V7H11V8H12.5ZM16.75 6.75H14.5V5.25H16.75V3H18.25V5.25H20.5V6.75H18.25V9H16.75V6.75Z",fill:"currentColor"},null,-1),_hoisted_3$m=[_hoisted_2$r];function _sfc_render$k(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$u,_hoisted_3$m)}const __unplugin_components_0$6=_export_sfc(_sfc_main$F,[["render",_sfc_render$k]]),ContentEditorToolBar_vue_vue_type_style_index_0_scoped_dbaed1aa_lang="",_hoisted_1$t={class:"edit-tool"},_hoisted_2$q=["data-element"],_sfc_main$E={__name:"ContentEditorToolBar",props:["items"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r,resetOperate:o}=core,u=useDocumentStore(),s=useViewerStore(),w=computed(()=>s.getToolMode),g=computed(()=>u.getActiveTool),v=computed(()=>s.getCurrentPage),y=computed(()=>s.isElementOpen("contentEditorPanel")),m=ref(0),d=ref(0),f=ref(!0),x=ref(!0),k=()=>{s.toggleElement("contentEditorPanel")},P=I=>{w.value==="editor"&&(x.value=I)};core.addEvent("changeRightPanelBtnDisabled",P);const S=I=>{u.setToolState(I),s.toggleActiveHand(!1),n(0),r(0),g.value==="addImage"&&isMobileDevice&&document.getElementById("editorImageInput").click()},E=I=>{const N=I.target.files[0];if(!N)return;if(N.size>2*1024*1024){window.$message.error(instance.$t("editorPanel.maximum"),{duration:3e3,icon:()=>h$1("img",{src:MessageError})}),I.target.value="";return}const O=new FileReader;O.onload=function(F){const U=new Image;U.onload=function(){const Y={imageBase64:F.target.result,width:U.width,height:U.height,pageNum:v.value};core.addEditorImage(Y)},U.onerror=function(Y){console.log(Y)},U.src=F.target.result},O.onerror=function(F){console.log(F)},O.readAsDataURL(N)},M=I=>{o({operation:I,pageNumber:v.value})},T=I=>{m.value=I.undoListLength,d.value=I.redoListLength};core.addEvent("changeOperateList",T);const D=I=>{if(!f.value)return;const N=I.key.toLowerCase();(I.ctrlKey||I.metaKey)&&N==="z"&&!I.shiftKey&&m.value&&M("undo"),(I.ctrlKey&&N==="y"||I.metaKey&&I.shiftKey&&N==="z")&&d.value&&M("redo")};return onMounted(()=>{document.addEventListener("keydown",D)}),onUnmounted(()=>{document.removeEventListener("keydown",D),f.value=!1}),(I,N)=>{const O=__unplugin_components_0$6,F=_sfc_main$4l,U=__unplugin_components_2$3,Y=__unplugin_components_3$2,Q=__unplugin_components_4$1,q=_sfc_main$2z,ne=__unplugin_components_19;return openBlock(),createElementBlock("div",_hoisted_1$t,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(J,re)=>(openBlock(),createElementBlock(Fragment,{key:re},[J.type==="addText"?(openBlock(),createBlock(F,{key:0,"data-element":J.dataElement,class:normalizeClass(["operate",{active:g.value==="addText"}]),onClick:N[0]||(N[0]=X=>S("addText")),title:I.$t(J.title)},{default:withCtx(()=>[createVNode(O),createTextVNode(toDisplayString$1(I.$t(J.title)),1)]),_:2},1032,["data-element","class","title"])):J.type==="addImage"?(openBlock(),createBlock(F,{key:1,"data-element":J.dataElement,class:normalizeClass(["operate",{active:g.value==="addImage"}]),onClick:N[1]||(N[1]=X=>S("addImage")),title:"Add Image"},{default:withCtx(()=>[createVNode(U),createTextVNode(toDisplayString$1(I.$t(J.title)),1),unref(isMobileDevice)?(openBlock(),createElementBlock("input",{key:0,type:"file",id:"editorImageInput",accept:".png, .jpg, .jpeg",style:{display:"none"},onChange:E,name:"editor"},null,32)):createCommentVNode("",!0)]),_:2},1032,["data-element","class"])):J.type==="divider"?(openBlock(),createElementBlock("div",{key:2,"data-element":J.dataElement,class:"divider pc"},null,8,_hoisted_2$q)):J.type==="undo"?(openBlock(),createBlock(F,{key:3,"data-element":J.dataElement,class:normalizeClass(["history",{disabled:!m.value}]),id:"undo",title:I.$t(J.title),onClick:N[2]||(N[2]=X=>M("undo"))},{default:withCtx(()=>[createVNode(Y)]),_:2},1032,["data-element","class","title"])):J.type==="redo"?(openBlock(),createBlock(F,{key:4,"data-element":J.dataElement,class:normalizeClass(["history",{disabled:!d.value}]),id:"redo",title:I.$t(J.title),onClick:N[3]||(N[3]=X=>M("redo"))},{default:withCtx(()=>[createVNode(Q)]),_:2},1032,["data-element","class","title"])):J.name==="customButton"&&!J.hidden&&!J.dropItem?(openBlock(),createBlock(q,{key:5,item:J},null,8,["item"])):["spacer","divider"].includes(J.type)?(openBlock(),createElementBlock("div",{key:6,class:normalizeClass(J.type)},null,2)):J.type==="property"&&!J.hidden?(openBlock(),createBlock(F,{key:7,onClick:k,title:I.$t(J.title),"data-element":J.dataElement,isActive:y.value,disabled:x.value&&w.value==="editor",id:J.id,class:"property"},{default:withCtx(()=>[createVNode(ne)]),_:2},1032,["title","data-element","isActive","disabled","id"])):createCommentVNode("",!0)],64))),128))])}}},__unplugin_components_3$1=_export_sfc(_sfc_main$E,[["__scopeId","data-v-dbaed1aa"]]),_sfc_main$D={__name:"StickyNoteButton",props:["item"],setup(e){const{switchAnnotationEditorMode:n,switchTool:r}=core,o=useViewerStore(),u=useDocumentStore(),s=v=>{u.setToolState(v),o.toggleActiveHand(!1)},w=computed(()=>u.getActiveTool);computed(()=>o.getActiveStickNote);const g=()=>{s("text"),o.toggleActiveStickNote(),n(0),r(0),o.closeActiveHand(),o.closeActiveMeasure()};return(v,y)=>{const m=__unplugin_components_0$b,d=_sfc_main$4l;return openBlock(),createBlock(d,mergeProps({isActive:w.value==="text"},{...e.item},{onClick:g,title:v.$t("header.note")}),{default:withCtx(()=>[createVNode(m)]),_:1},16,["isActive","title"])}}},Annotate_vue_vue_type_style_index_0_lang="",Annotate_vue_vue_type_style_index_1_scoped_42e45f72_lang="",_hoisted_1$s={key:1,class:"markup-container"},_hoisted_2$p={key:3,class:"shape-container"},_sfc_main$C={__name:"Annotate",props:["items"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useDocumentStore(),u=useViewerStore(),s=computed(()=>o.getActiveTool),w=computed(()=>["highlight","underline","squiggly","strikeout"].includes(s.value)),g=computed(()=>["square","circle","arrow","line","arc","polygon","polyline"].includes(s.value)),v=computed(()=>o.getMarkupToolState),y=computed(()=>o.getShapeToolState),m=computed(()=>u.isElementOpen("measurePanel")||u.isElementOpen("freetextPanel")),d=computed(()=>u.getToolMode),f=ref(!0),x=["text","ink","highlight","underline","squiggly","strikeout","square","circle","arrow","line","arc","polygon","polyline","freetext","stamp","image"];let k=null;const P=N=>{o.setMarkupToolState(N),D(N)},S=N=>{o.setShapeToolState(N),D(N)},E=()=>{s.value==="image"&&D("image")};core.addEvent("imageChange",E),onUnmounted(()=>{core.removeEvent("imageChange",E)});const M=()=>{if(!k&&s.value==="freetext"){u.toggleElement("freetextPanel");return}k.type==="freetext"?u.toggleElement("freetextPanel"):u.toggleElement("measurePanel")};computed(()=>o.getActiveToolColor);const T=N=>{k=N,setTimeout(()=>{(document.getElementsByClassName("outline-container").length||document.getElementsByClassName("text-editor").length)&&x.includes(k==null?void 0:k.type)&&!k.measure?f.value=!1:f.value=!0})},D=N=>{if(o.setToolState(N),u.toggleActiveHand(!1),n(0),r(0),N==="stamp"?u.toggleElement("stampPanel"):u.closeElement("stampPanel"),s.value==="image"){const O=isMobileDevice?"annotaionImageInput":"signImageInput";document.getElementById(O).click()}};core.addEvent("annotationSelected",T);const I=()=>{k=null,f.value=!0};return core.addEvent("annotationDeselected",I),(N,O)=>{const F=_sfc_main$D,U=__unplugin_components_1$6,Y=_sfc_main$4l,Q=__unplugin_components_3$9,q=__unplugin_components_4$9,ne=__unplugin_components_5$5,J=__unplugin_components_6$5,re=__unplugin_components_7$4,X=__unplugin_components_8$2,j=__unplugin_components_9$5,Z=__unplugin_components_10$2,W=__unplugin_components_11,te=__unplugin_components_12,le=__unplugin_components_13$2,oe=__unplugin_components_14$1,Ee=__unplugin_components_15,Ae=__unplugin_components_16,ve=__unplugin_components_17,ke=_sfc_main$2z,Ce=__unplugin_components_19;return openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(Pe,Me)=>(openBlock(),createElementBlock(Fragment,{key:`${Pe.type}-${Pe.dataElement||Me}`},[Pe.type==="note"&&!Pe.hidden?(openBlock(),createBlock(F,{key:0,"data-element":Pe.dataElement},null,8,["data-element"])):createCommentVNode("",!0),["highlight","underline","strikeout","squiggly"].includes(Pe.type)?(openBlock(),createElementBlock("div",_hoisted_1$s,[Pe.type==="highlight"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:0,"data-element":Pe.dataElement,class:normalizeClass({active:w.value&&v.value==="highlight"}),onClick:O[0]||(O[0]=withModifiers(Le=>P("highlight"),["stop"])),title:N.$t("header.highlight")},{default:withCtx(()=>[createVNode(U)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Pe.type==="underline"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:1,"data-element":Pe.dataElement,class:normalizeClass({active:w.value&&v.value==="underline"}),onClick:O[1]||(O[1]=withModifiers(Le=>P("underline"),["stop"])),title:N.$t("header.underline")},{default:withCtx(()=>[createVNode(Q)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Pe.type==="strikeout"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:2,"data-element":Pe.dataElement,class:normalizeClass({active:w.value&&v.value==="strikeout"}),onClick:O[2]||(O[2]=withModifiers(Le=>P("strikeout"),["stop"])),title:N.$t("header.strikeout")},{default:withCtx(()=>[createVNode(q)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Pe.type==="squiggly"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:3,"data-element":Pe.dataElement,class:normalizeClass({active:w.value&&v.value==="squiggly"}),onClick:O[3]||(O[3]=withModifiers(Le=>P("squiggly"),["stop"])),title:N.$t("header.squiggly")},{default:withCtx(()=>[createVNode(ne)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0)])):createCommentVNode("",!0),Pe.type==="ink"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:2,"data-element":Pe.dataElement,class:normalizeClass({active:s.value==="ink"}),onClick:O[4]||(O[4]=Le=>D("ink")),title:N.$t("header.ink")},{default:withCtx(()=>[createVNode(J)]),_:2},1032,["data-element","class","title"])):["circle","square","arrow","line","arc","polygon","polyline"].includes(Pe.type)?(openBlock(),createElementBlock("div",_hoisted_2$p,[Pe.type==="circle"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:0,"data-element":Pe.dataElement,class:normalizeClass({active:g.value&&y.value==="circle"}),onClick:O[5]||(O[5]=withModifiers(Le=>S("circle"),["stop"])),title:N.$t("header.circle")},{default:withCtx(()=>[createVNode(re)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Pe.type==="arc"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:1,"data-element":Pe.dataElement,class:normalizeClass({active:g.value&&y.value==="arc"}),onClick:O[6]||(O[6]=withModifiers(Le=>S("arc"),["stop"])),title:N.$t("header.arc")},{default:withCtx(()=>[createVNode(X)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Pe.type==="square"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:2,"data-element":Pe.dataElement,class:normalizeClass({active:g.value&&y.value==="square"}),onClick:O[7]||(O[7]=withModifiers(Le=>S("square"),["stop"])),title:N.$t("header.square")},{default:withCtx(()=>[createVNode(j)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Pe.type==="polygon"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:3,"data-element":Pe.dataElement,class:normalizeClass({active:g.value&&y.value==="polygon"}),onClick:O[8]||(O[8]=withModifiers(Le=>S("polygon"),["stop"])),title:N.$t("header.polygon")},{default:withCtx(()=>[createVNode(Z)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Pe.type==="polyline"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:4,"data-element":Pe.dataElement,class:normalizeClass({active:g.value&&y.value==="polyline"}),onClick:O[9]||(O[9]=withModifiers(Le=>S("polyline"),["stop"])),title:N.$t("header.polyline")},{default:withCtx(()=>[createVNode(W)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Pe.type==="arrow"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:5,"data-element":Pe.dataElement,class:normalizeClass({active:g.value&&y.value==="arrow"}),onClick:O[10]||(O[10]=withModifiers(Le=>S("arrow"),["stop"])),title:N.$t("header.arrow")},{default:withCtx(()=>[createVNode(te)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0),Pe.type==="line"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:6,"data-element":Pe.dataElement,class:normalizeClass({active:g.value&&y.value==="line"}),onClick:O[11]||(O[11]=withModifiers(Le=>S("line"),["stop"])),title:N.$t("header.line")},{default:withCtx(()=>[createVNode(le)]),_:2},1032,["data-element","class","title"])):createCommentVNode("",!0)])):Pe.type==="freetext"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:4,"data-element":Pe.dataElement,class:normalizeClass({active:s.value==="freetext"}),onClick:O[12]||(O[12]=Le=>D("freetext")),title:N.$t("header.freetext")},{default:withCtx(()=>[createVNode(oe)]),_:2},1032,["data-element","class","title"])):Pe.type==="stamp"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:5,"data-element":Pe.dataElement,class:normalizeClass({active:s.value==="stamp"}),onClick:O[13]||(O[13]=Le=>D("stamp")),title:N.$t("header.stamp")},{default:withCtx(()=>[createVNode(Ee)]),_:2},1032,["data-element","class","title"])):Pe.type==="image"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:6,"data-element":Pe.dataElement,class:normalizeClass({active:s.value==="image"}),onClick:O[14]||(O[14]=Le=>D("image")),title:N.$t("header.image")},{default:withCtx(()=>[createVNode(Ae)]),_:2},1032,["data-element","class","title"])):Pe.type==="link"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:7,"data-element":Pe.dataElement,class:normalizeClass({active:s.value==="link"}),onClick:O[15]||(O[15]=Le=>D("link")),title:N.$t("header.link")},{default:withCtx(()=>[createVNode(ve)]),_:2},1032,["data-element","class","title"])):Pe.name==="customButton"&&!Pe.hidden&&!Pe.dropItem?(openBlock(),createBlock(ke,{key:8,item:Pe},null,8,["item"])):["spacer","divider"].includes(Pe.type)?(openBlock(),createElementBlock("div",{key:9,class:normalizeClass(Pe.type)},null,2)):Pe.type==="property"&&!Pe.hidden?(openBlock(),createBlock(Y,{key:10,onClick:M,title:N.$t(Pe.title),"data-element":Pe.dataElement,isActive:m.value,disabled:f.value&&d.value==="annotation"&&s.value!=="freetext",id:Pe.id,class:"property sidebar-style"},{default:withCtx(()=>[createVNode(Ce)]),_:2},1032,["title","data-element","isActive","disabled","id"])):createCommentVNode("",!0)],64))),128)}}},__unplugin_components_2$2=_export_sfc(_sfc_main$C,[["__scopeId","data-v-42e45f72"]]),Toolbar_vue_vue_type_style_index_0_scoped_717dbea3_lang="",_hoisted_1$r={class:"scroll-container left"},_hoisted_2$o={class:"scroll-container right"},_sfc_main$B={__name:"Toolbar",setup(e){const n=getCurrentInstance().appContext.app.config.globalProperties,r=useViewerStore(),o=useDocumentStore(),u=r.getToolItems,s=computed(()=>r.getCompareStatus),w=computed(()=>r.getDisabledHeader),g=computed(()=>r.getToolMode),v=computed(()=>o.getActiveTool),y=computed(()=>r.getCurrentPage),m=computed(()=>r.getDisableSignatureTool),d=ref(!1),f=ref(null),x=ref(!1),k=ref(!1);watch(g,async(I,N)=>{d.value=!(["view","document","separation"].includes(I)||I==="compare"&&s!=="finished"),x.value=!1,k.value=!1,await nextTick(),d.value&&(f.value&&f.value.scrollLeft>0&&(x.value=!0),f.value&&f.value.scrollLeft+f.value.clientWidth<f.value.scrollWidth&&(k.value=!0))}),watch(s,async(I,N)=>{d.value=!(["view","document"].includes(g.value)||g.value==="compare"&&I!=="finished"),x.value=!1,k.value=!1});const P=()=>{f.value.scrollTo({left:f.value.scrollLeft-f.value.clientWidth,behavior:"smooth"})},S=()=>{f.value.scrollTo({left:f.value.scrollLeft+f.value.clientWidth,behavior:"smooth"})},E=I=>{x.value=I.target.scrollLeft>0,k.value=I.target.scrollLeft+I.target.clientWidth<I.target.scrollWidth-1},M=I=>{let N=I.target.files[0];if(!N)return;if(N&&N.size>2*1024*1024){window.$message.error(n.$t("signatures.uploadError"),{duration:5e3,icon:()=>h("img",{src:MessageError})}),I.target.value="";return}if(g.value==="annotation"&&(o.setToolState("image"),core.handleCreateStatus({bool:!0,fileData:N})),v.value!=="image")return;const O=new FileReader;O.onload=function(F){const U=new Image;U.onload=function(){const Y={imageBase64:F.target.result,width:U.width,height:U.height,pageNum:y.value};core.addAnnotationImage(Y)},U.onerror=function(Y){console.log(Y)},U.src=F.target.result},O.onerror=function(F){console.log(F)},O.readAsDataURL(N)},T=()=>{o.setToolState("image")},D=()=>{r.toggleElement("measurePanel")};return core.addEvent("toggleAnnotAttrbutePanel",D),(I,N)=>{const O=__unplugin_components_0$e,F=_sfc_main$4l,U=__unplugin_components_2$2,Y=__unplugin_components_3$1,Q=__unplugin_components_4$2,q=__unplugin_components_5$1,ne=_sfc_main$R,J=_sfc_main$U,re=_sfc_main$X,X=_sfc_main$Y,j=__unplugin_components_10$3;return g.value==="sign"&&m.value?createCommentVNode("",!0):withDirectives((openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["toolbar",{security:g.value==="security",editor:g.value==="editor",disabled:w.value}])},[withDirectives(createBaseVNode("div",_hoisted_1$r,[createVNode(F,{class:"flip-button",onClick:P},{default:withCtx(()=>[createVNode(O)]),_:1})],512),[[vShow,unref(isMobileDevice)&&x.value]]),createBaseVNode("div",{class:"tools",ref_key:"toolbarRef",ref:f,onScroll:E},[g.value==="annotation"?(openBlock(),createBlock(U,{key:0,items:unref(u)[g.value]},null,8,["items"])):g.value==="editor"?(openBlock(),createBlock(Y,{key:1,items:unref(u)[g.value]},null,8,["items"])):g.value==="measurement"?(openBlock(),createBlock(Q,{key:2,items:unref(u)[g.value]},null,8,["items"])):g.value==="form"?(openBlock(),createBlock(q,{key:3,items:unref(u)[g.value]},null,8,["items"])):g.value==="security"?(openBlock(),createBlock(ne,{key:4,items:unref(u)[g.value]},null,8,["items"])):g.value==="redaction"?(openBlock(),createBlock(J,{key:5,items:unref(u)[g.value]},null,8,["items"])):(openBlock(!0),createElementBlock(Fragment,{key:6},renderList(unref(u)[g.value],(Z,W)=>(openBlock(),createElementBlock(Fragment,{key:`${Z.type}-${Z.dataElement||W}`},[Z.type==="comparedToolbar"?(openBlock(),createBlock(re,{key:0})):Z.type==="signatureToolBar"?(openBlock(),createBlock(X,{key:1})):createCommentVNode("",!0)],64))),128))],544),withDirectives(createBaseVNode("div",_hoisted_2$o,[createVNode(F,{class:"flip-button",onClick:S},{default:withCtx(()=>[createVNode(j)]),_:1})],512),[[vShow,unref(isMobileDevice)&&k.value]]),unref(isMobileDevice)?(openBlock(),createElementBlock("input",{key:0,type:"file",id:"annotaionImageInput",accept:".png, .jpg, .jpeg",style:{display:"none"},onChange:M,onClick:T,name:"annotaion"},null,32)):createCommentVNode("",!0)],2)),[[vShow,d.value]])}}},__unplugin_components_1=_export_sfc(_sfc_main$B,[["__scopeId","data-v-717dbea3"]]),DocumentEditorHeader_vue_vue_type_style_index_0_lang="",_hoisted_1$q={class:"header-items document-editor-header"},_hoisted_2$n={class:"right-container"},_sfc_main$A={__name:"DocumentEditorHeader",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=computed(()=>r.getDocEditorOperationList),u=computed(()=>n.getToolMode),s=computed(()=>n.getScrollMode),w=computed(()=>n.getPageMode),g=computed(()=>n.getDocumentEditorSaveStatus),v=computed(()=>n.getDocumentEditorSaveAsStatus);watch(u,(f,x)=>{x==="document"&&r.setDocEditorOperationList("reset")});const y=()=>{r.setToolState(""),n.setActiveToolMode("view"),n.setCompareStatus(""),core.saveDocumentEdit("cancel")},m=async()=>{r.resetSetting(),r.setToolState(""),n.setActiveToolMode("view"),n.setUpload(!0),n.setUploadLoading(!0);const f=n.getScale,x=await core.saveDocumentEdit(),k=r.getPassword;await core.loadDocument(x,{password:k}),r.setCurrentPdfData(x);const P=core.getPagesCount();r.setTotalPages(P),r.setOutline(core.getOutlines()),n.setCurrentPage(1),core.switchScrollMode(s.value==="Vertical"?0:1),core.switchSpreadMode(w.value);const S=()=>{n.setCurrentScale(f/100),core.scaleChanged(f/100),core.removeEvent("documentloaded",S)};core.addEvent("documentloaded",S),n.setUploadLoading(!1)},d=async()=>{const{blobData:f,filename:x}=await core.saveDocumentEdit("saveAs");FileSaver_min.exports.saveAs(f,x)};return(f,x)=>(openBlock(),createElementBlock("div",_hoisted_1$q,[createBaseVNode("div",{class:"rect-button white",onClick:y},toDisplayString$1(f.$t("cancel")),1),createBaseVNode("div",_hoisted_2$n,[g.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["rect-button blue",{disabled:!o.value.length}]),onClick:m},toDisplayString$1(f.$t("documentEditor.save")),3)):createCommentVNode("",!0),v.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["rect-button blue",{disabled:!o.value.length}]),onClick:d},toDisplayString$1(f.$t("documentEditor.saveAs")),3)):createCommentVNode("",!0)])]))}},_sfc_main$z={},_hoisted_1$p={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$m=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.25 1.25H5H15H15.75V2V5.25H18H18.75V6V15V15.75H18H15V17.5V19H13.5H6.5H5V17.5V15.75H2H1.25V15V6V5.25H2H4.25V2V1.25ZM14.25 2.75V5.25H5.75V2.75H14.25ZM15 14.25H17.25V6.75H2.75V14.25H5V12.5V11H6.5H13.5H15V12.5V14.25ZM6.5 12.5H13.5V17.5H6.5V12.5ZM15 10C15.5523 10 16 9.55229 16 9C16 8.44772 15.5523 8 15 8C14.4477 8 14 8.44772 14 9C14 9.55229 14.4477 10 15 10Z",fill:"currentColor"},null,-1),_hoisted_3$l=[_hoisted_2$m];function _sfc_render$j(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$p,_hoisted_3$l)}const __unplugin_components_0$5=_export_sfc(_sfc_main$z,[["render",_sfc_render$j]]),_sfc_main$y={__name:"PrintButton",props:["item"],setup(e){const n=useViewerStore(),r=computed(()=>n.getToolMode),o=computed(()=>n.getCompareMode),u=async()=>{if(r.value==="compare"&&o.value==="content"){n.openElement("printSettingDialog");return}n.setDownloading(!0);try{const s=await core.webViewerNamedAction("Print");n.setDownloading(!1),s||n.setDownloadError("Print")}catch(s){console.log(s)}};return(s,w)=>{const g=__unplugin_components_0$5,v=_sfc_main$4l;return openBlock(),createBlock(v,mergeProps({...e.item},{onClick:u,title:s.$t("header.print")}),{default:withCtx(()=>[createVNode(g)]),_:1},16,["title"])}}},DownloadButton_vue_vue_type_style_index_0_lang="",_sfc_main$x={__name:"DownloadButton",setup(e){const n=useViewerStore(),r=computed(()=>n.getToolMode),o=computed(()=>n.getCompareMode),{download:u}=core,s=async()=>{if(r.value==="compare"&&o.value==="content"){n.openElement("downloadSettingDialog");return}n.setDownloading(!0);try{const w=await u();n.setDownloading(!1),w||n.setDownloadError("Downloaded")}catch(w){console.log(w)}};return(w,g)=>{const v=__unplugin_components_0$i,y=_sfc_main$4l;return openBlock(),createBlock(y,{onClick:s,title:w.$t("header.download")},{default:withCtx(()=>[createVNode(v)]),_:1},8,["title"])}}},CompareButtons_vue_vue_type_style_index_0_lang="",_hoisted_1$o={class:"compare-buttons"},_sfc_main$w={__name:"CompareButtons",setup(e){const{loadDocument:n}=core,r=useViewerStore(),o=useDocumentStore(),u=computed(()=>r.getCompareStatus),s=computed(()=>o.getCompareFile("oldFile")&&o.getCompareFile("newFile")&&u.value!=="finished"),w=computed(()=>o.getCurrentPdfData),g=()=>{r.closeElement("compareSettingDialog"),o.setToolState(""),r.setActiveToolMode("view"),u.value&&v(),r.setCompareStatus("")},v=async()=>{if(w.value){r.setUploadLoading(!0),o.setTotalPages(0);try{const f=w.value;f.options.notUpdatePwd=!0,await n(f.pdf,f.options)}catch(f){if(console.log(f),f==="invalid_file_error"||f==="no_password_given"||f==="incorrect_password"){r.setUpload(!1),o.setLoadingProgress(0),r.resetSetting();const x=document.getElementById("fileInput");x.value="",o.setCurrentPdfData();return}}r.setUploadLoading(!1);const m=core.getPagesCount(),d=core.getScale();o.setTotalPages(m),r.setCurrentPage(1),r.setCurrentScale(d)}},y=()=>{r.openElement("compareSettingDialog"),o.initCompareSetting(),r.setCompareMode("content"),r.setShowCompareTip(!1)};return(m,d)=>(openBlock(),createElementBlock("div",_hoisted_1$o,[createBaseVNode("div",{class:normalizeClass(["rect-button blue",{disabled:!s.value}]),onClick:y},toDisplayString$1(m.$t("compare.startCompare")),3),createBaseVNode("div",{class:"rect-button white",onClick:g},toDisplayString$1(m.$t("compare.exit")),1)]))}},_sfc_main$v={},_hoisted_1$n={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$l=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.70581 6.36601L10 2.73204L16.2943 6.36601V13.634L10 17.2679L3.70581 13.634V6.36601ZM9.43754 1.32475C9.78562 1.12379 10.2145 1.12379 10.5625 1.32475L17.2318 5.17523C17.5798 5.37619 17.7943 5.74758 17.7943 6.14951V13.8505C17.7943 14.2524 17.5798 14.6238 17.2318 14.8247L10.5625 18.6752C10.2145 18.8762 9.78561 18.8762 9.43754 18.6752L2.76831 14.8247C2.42023 14.6238 2.20581 14.2524 2.20581 13.8505V6.14951C2.20581 5.74758 2.42023 5.37619 2.76831 5.17523L9.43754 1.32475ZM11.875 9.99999C11.875 11.0355 11.0356 11.875 10 11.875C8.96451 11.875 8.12504 11.0355 8.12504 9.99999C8.12504 8.96445 8.96451 8.12499 10 8.12499C11.0356 8.12499 11.875 8.96445 11.875 9.99999ZM13.375 9.99999C13.375 11.8639 11.864 13.375 10 13.375C8.13608 13.375 6.62504 11.8639 6.62504 9.99999C6.62504 8.13603 8.13608 6.62499 10 6.62499C11.864 6.62499 13.375 8.13603 13.375 9.99999Z",fill:"currentColor"},null,-1),_hoisted_3$k=[_hoisted_2$l];function _sfc_render$i(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$n,_hoisted_3$k)}const __unplugin_components_10$1=_export_sfc(_sfc_main$v,[["render",_sfc_render$i]]),_sfc_main$u={},_hoisted_1$m={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$k=createBaseVNode("path",{d:"M18.3327 10C18.3327 10 14.6017 16.25 9.99935 16.25C5.39698 16.25 1.66602 10 1.66602 10C1.66602 10 5.39698 3.75 9.99935 3.75C14.6017 3.75 18.3327 10 18.3327 10Z",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_3$j=createBaseVNode("circle",{cx:"10",cy:"10",r:"2",stroke:"currentColor","stroke-width":"1.5"},null,-1),_hoisted_4$4=[_hoisted_2$k,_hoisted_3$j];function _sfc_render$h(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$m,_hoisted_4$4)}const __unplugin_components_9$1=_export_sfc(_sfc_main$u,[["render",_sfc_render$h]]),_sfc_main$t={},_hoisted_1$l={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$j=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.1722 3.67907C9.75796 3.67907 9.42218 3.34328 9.42218 2.92907V1.75C9.42218 1.33579 9.75796 1 10.1722 1C10.5864 1 10.9222 1.33579 10.9222 1.75V2.92907C10.9222 3.34328 10.5864 3.67907 10.1722 3.67907ZM10.0862 13.3672C11.9032 13.3672 13.3761 11.8942 13.3761 10.0772C13.3761 8.26024 11.9032 6.78727 10.0862 6.78727C8.26916 6.78727 6.79619 8.26024 6.79619 10.0772C6.79619 11.8942 8.26916 13.3672 10.0862 13.3672ZM10.0862 14.8672C12.7316 14.8672 14.8761 12.7227 14.8761 10.0772C14.8761 7.43181 12.7316 5.28727 10.0862 5.28727C7.44074 5.28727 5.29619 7.43181 5.29619 10.0772C5.29619 12.7227 7.44074 14.8672 10.0862 14.8672ZM14.7612 4.51466C14.468 4.80718 14.468 5.28144 14.7612 5.57395C15.0545 5.86646 15.53 5.86646 15.8233 5.57395L16.6592 4.74023C16.9524 4.44771 16.9524 3.97345 16.6592 3.68094C16.3659 3.38842 15.8904 3.38842 15.5971 3.68094L14.7612 4.51466ZM16.6633 10.1509C16.6633 9.73669 16.9991 9.4009 17.4133 9.4009H18.5954C19.0096 9.4009 19.3454 9.73669 19.3454 10.1509C19.3454 10.5651 19.0096 10.9009 18.5954 10.9009H17.4133C16.9991 10.9009 16.6633 10.5651 16.6633 10.1509ZM15.8233 14.7278C15.53 14.4353 15.0546 14.4353 14.7613 14.7278C14.468 15.0203 14.468 15.4946 14.7613 15.7871L15.5972 16.6208C15.8904 16.9134 16.3659 16.9134 16.6592 16.6208C16.9525 16.3283 16.9525 15.8541 16.6592 15.5615L15.8233 14.7278ZM10.1721 16.6227C10.5863 16.6227 10.9221 16.9585 10.9221 17.3727V18.5517C10.9221 18.966 10.5863 19.3017 10.1721 19.3017C9.75784 19.3017 9.42206 18.966 9.42206 18.5517V17.3727C9.42206 16.9585 9.75784 16.6227 10.1721 16.6227ZM5.58357 15.7871C5.87684 15.4946 5.87684 15.0204 5.58357 14.7279C5.2903 14.4353 4.81481 14.4353 4.52154 14.7279L3.68565 15.5616C3.39238 15.8541 3.39238 16.3284 3.68565 16.6209C3.97893 16.9134 4.45441 16.9134 4.74769 16.6209L5.58357 15.7871ZM3.68212 10.1509C3.68212 10.5651 3.34633 10.9009 2.93212 10.9009H1.75C1.33579 10.9009 1 10.5651 1 10.1509C1 9.7367 1.33579 9.40091 1.75 9.40091H2.93212C3.34633 9.40091 3.68212 9.7367 3.68212 10.1509ZM4.52151 5.57399C4.81478 5.8665 5.29027 5.8665 5.58354 5.57399C5.87681 5.28147 5.87681 4.80721 5.58354 4.5147L4.74765 3.68098C4.45438 3.38846 3.97889 3.38846 3.68562 3.68098C3.39235 3.97349 3.39235 4.44775 3.68562 4.74026L4.52151 5.57399Z",fill:"currentColor"},null,-1),_hoisted_3$i=[_hoisted_2$j];function _sfc_render$g(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$l,_hoisted_3$i)}const __unplugin_components_7$1=_export_sfc(_sfc_main$t,[["render",_sfc_render$g]]),_sfc_main$s={},_hoisted_1$k={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$i=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6 1.25H5.25V2V4H6.75V2.75H14.0533L17.25 6.75603V17.1111V17.25H6.75V16H5.25V18V18.75H6H18H18.75V18V17.1111V6.49346V6.23089L18.5862 6.02566L15.0005 1.5322L14.7753 1.25H14.4143H6ZM2 4.95819H1.25V5.70819V15V16.1967L2.32698 15.675L4.83876 14.4582H11.7778H12.5278V13.7082V5.70819V4.95819H11.7778H2ZM2.75 13.8033V6.45819H11.0278V12.9582H4.66667H4.49457L4.33969 13.0332L2.75 13.8033ZM9.11107 11.8166H4.66663V10.3166H9.11107V11.8166ZM4.66663 8.97222H9.11107V7.47222H4.66663V8.97222Z",fill:"currentColor"},null,-1),_hoisted_3$h=[_hoisted_2$i];function _sfc_render$f(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$k,_hoisted_3$h)}const __unplugin_components_0$4=_export_sfc(_sfc_main$s,[["render",_sfc_render$f]]),FlattenButton_vue_vue_type_style_index_0_lang="",_sfc_main$r={__name:"FlattenButton",props:["item"],setup(e){const n=useViewerStore(),{flattenPdfDownload:r}=core,o=async()=>{n.setDownloading(!0);try{const u=await r();n.setDownloading(!1),u||n.setDownloadError("Downloaded")}catch(u){console.log(u)}};return(u,s)=>{const w=__unplugin_components_0$4,g=_sfc_main$4l;return openBlock(),createBlock(g,mergeProps({...e.item},{onClick:o}),{default:withCtx(()=>[createVNode(w)]),_:1},16)}}},_sfc_main$q={},_hoisted_1$j={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$h=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 3V17H11.5625V18.5H3.5H2V17V3V1.5H3.5H11.5625L16.875 5.75V10H15.375V6.47094L11.0363 3H3.5ZM6.25001 6.0625H5.50001V7.5625H6.25001H8.37501H9.12501V6.0625H8.37501H6.25001ZM5.50001 9.25H6.25001H9.96876H10.7188V10.75H9.96876H6.25001H5.50001V9.25ZM6.25001 12.4375H5.50001V13.9375H6.25001H9.96876H10.7188V12.4375H9.96876H6.25001ZM12.5842 14.8916L13.62 13.8558V17.604V18.354H15.12V17.604V13.8558L16.1558 14.8916L17.2165 13.831L14.9003 11.5148L14.37 10.9845L13.8397 11.5148L11.5235 13.831L12.5842 14.8916Z",fill:"currentColor"},null,-1),_hoisted_3$g=[_hoisted_2$h];function _sfc_render$e(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$j,_hoisted_3$g)}const __unplugin_components_0$3=_export_sfc(_sfc_main$q,[["render",_sfc_render$e]]),_sfc_main$p={__name:"OpenFileButton",props:["item"],setup(e){return(n,r)=>{const o=__unplugin_components_0$3,u=_sfc_main$4l;return openBlock(),createBlock(u,mergeProps({...e.item},{title:n.$t("header.openFile")}),{default:withCtx(()=>[createVNode(o)]),_:1},16,["title"])}}},_sfc_main$o={},_hoisted_1$i={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$g=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.62109 10C2.62109 5.92468 5.9248 2.62097 10.0001 2.62097C14.0755 2.62097 17.3792 5.92468 17.3792 10C17.3792 14.0753 14.0755 17.379 10.0001 17.379C5.9248 17.379 2.62109 14.0753 2.62109 10ZM10.0001 1.12097C5.09637 1.12097 1.12109 5.09625 1.12109 10C1.12109 14.9038 5.09637 18.879 10.0001 18.879C14.9039 18.879 18.8792 14.9038 18.8792 10C18.8792 5.09625 14.9039 1.12097 10.0001 1.12097ZM6.02432 11.5C6.71468 11.5 7.27432 10.9404 7.27432 10.25C7.27432 9.55967 6.71468 9.00003 6.02432 9.00003C5.33396 9.00003 4.77432 9.55967 4.77432 10.25C4.77432 10.9404 5.33396 11.5 6.02432 11.5ZM10.0888 11.5C10.7792 11.5 11.3388 10.9404 11.3388 10.25C11.3388 9.55967 10.7792 9.00003 10.0888 9.00003C9.39848 9.00003 8.83884 9.55967 8.83884 10.25C8.83884 10.9404 9.39848 11.5 10.0888 11.5ZM15.4034 10.25C15.4034 10.9404 14.8437 11.5 14.1534 11.5C13.463 11.5 12.9034 10.9404 12.9034 10.25C12.9034 9.55967 13.463 9.00003 14.1534 9.00003C14.8437 9.00003 15.4034 9.55967 15.4034 10.25Z",fill:"currentColor"},null,-1),_hoisted_3$f=[_hoisted_2$g];function _sfc_render$d(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$i,_hoisted_3$f)}const __unplugin_components_0$2=_export_sfc(_sfc_main$o,[["render",_sfc_render$d]]),Dropdown_vue_vue_type_style_index_0_scoped_855c57bb_lang="",Dropdown_vue_vue_type_style_index_1_lang="",_hoisted_1$h={class:"drop-down"},_hoisted_2$f=["item","data-element"],_hoisted_3$e=["data-element"],_hoisted_4$3=["data-element"],_hoisted_5$2=["data-element"],_hoisted_6$2=["data-element"],_hoisted_7$2=["data-element"],_hoisted_8$1=["data-element"],_hoisted_9$1=["data-element"],_hoisted_10$1=["data-element"],_sfc_main$n={__name:"Dropdown",props:["rightItems"],setup(e){const n=e,r=useViewerStore(),o=ref(null),{download:u,webViewerNamedAction:s,flattenPdfDownload:w}=core,g=computed(()=>r.getPopoverChanged),v=computed(()=>o.value&&o.value.getMergedShow()),y=computed(()=>r.getUpload),m=computed(()=>r.getThemeMode),d=computed(()=>{const T=["downloadButton","flattenButton","printButton","settingButton"];return isMobileDevice&&T.push("themeMode","pageModeButton"),n.rightItems.filter(D=>T.includes(D.type)||D.name==="customButton"&&D.dropItem).every(D=>D.hidden)});watch(()=>g.value,(T,D)=>{T&&(o.value.setShow(!1),r.setPopoverChanged(!1))});const f=()=>{window.instance.changeFile(),o.value.setShow(!1)},x=async()=>{if(!core.getPermission("allowsCopying")){r.openElement("permissionPasswordDialog");return}o.value.setShow(!1),r.setDownloading(!0);try{const D=await u();r.setDownloading(!1),D||r.setDownloadError("Downloaded")}catch(D){console.log(D)}},k=async()=>{o.value.setShow(!1),r.setDownloading(!0);try{const T=await w();r.setDownloading(!1),T||r.setDownloadError("Downloaded")}catch(T){console.log(T)}},P=async()=>{if(!core.getPermission("allowsPrinting")){r.openElement("permissionPasswordDialog");return}o.value.setShow(!1),r.setDownloading(!0);try{const D=await s("Print");r.setDownloading(!1),D||r.setDownloadError("Print")}catch(D){console.log(D)}},S=()=>{o.value.setShow(!1),r.setPopoverChanged(!1),r.openElement("settingsDialog")},E=T=>{o.value.setShow(!1),T!==m.value&&r.setThemeMode(T)};watch(()=>m.value,T=>{THEME_CONFIG.mode=T,T==="Light"?document.documentElement.classList.remove("dark"):document.documentElement.classList.add("dark")});const M=()=>{o.value.setShow(!1),r.isElementOpen("pageModePanel")?r.closeElement("pageModePanel"):(r.openElement("pageModePanel"),r.closeElement("contentEditorPanel"))};return(T,D)=>{const I=__unplugin_components_0$2,N=__unplugin_components_11$1,O=_sfc_main$4l,F=_sfc_main$p,U=_sfc_main$x,Y=_sfc_main$r,Q=_sfc_main$y,q=__unplugin_components_7$1,ne=__unplugin_components_8$6,J=__unplugin_components_9$1,re=__unplugin_components_10$1,X=_sfc_main$2z;return openBlock(),createBlock(unref(NPopover),{ref_key:"popover",ref:o,placement:"top-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":4},{trigger:withCtx(()=>[withDirectives(createVNode(O,{class:normalizeClass(["more",{active:v.value,disabled:!y.value}])},{default:withCtx(()=>[createVNode(I),createVNode(N)]),_:1},8,["class"]),[[vShow,!d.value]])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$h,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(j,Z)=>(openBlock(),createElementBlock(Fragment,{key:`${j.type}-${j.dataElement||Z}`},[j.type==="openFileButton"&&!j.hidden?(openBlock(),createElementBlock("div",{key:0,item:j,"data-element":j.dataElement,class:"drop-item",onClick:f},[createVNode(F),createTextVNode(toDisplayString$1(T.$t("header.openFile")),1)],8,_hoisted_2$f)):createCommentVNode("",!0),j.type==="downloadButton"&&!j.hidden?(openBlock(),createElementBlock("div",{key:1,"data-element":j.dataElement,class:"drop-item",onClick:x},[createVNode(U),createTextVNode(toDisplayString$1(T.$t("header.download")),1)],8,_hoisted_3$e)):createCommentVNode("",!0),j.type==="flattenButton"&&!j.hidden?(openBlock(),createElementBlock("div",{key:2,"data-element":j.dataElement,class:"drop-item",onClick:k},[createVNode(Y),createTextVNode(toDisplayString$1(T.$t("header.flatten")),1)],8,_hoisted_4$3)):createCommentVNode("",!0),j.type==="printButton"&&!j.hidden?(openBlock(),createElementBlock("div",{key:3,"data-element":j.dataElement,class:"drop-item",onClick:P},[createVNode(Q),createTextVNode(toDisplayString$1(T.$t("header.print")),1)],8,_hoisted_5$2)):createCommentVNode("",!0),j.type==="themeMode"&&!j.hidden?(openBlock(),createElementBlock("div",{key:4,"data-element":j.dataElement,class:"drop-item",onClick:D[0]||(D[0]=W=>E("Light"))},[createVNode(O,null,{default:withCtx(()=>[createVNode(q)]),_:1}),createTextVNode(toDisplayString$1(T.$t("header.lightMode")),1)],8,_hoisted_6$2)):createCommentVNode("",!0),j.type==="themeMode"&&!j.hidden?(openBlock(),createElementBlock("div",{key:5,"data-element":j.dataElement,class:"drop-item",onClick:D[1]||(D[1]=W=>E("Dark"))},[createVNode(O,null,{default:withCtx(()=>[createVNode(ne)]),_:1}),createTextVNode(toDisplayString$1(T.$t("header.darkMode")),1)],8,_hoisted_7$2)):createCommentVNode("",!0)],64))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(j,Z)=>(openBlock(),createElementBlock(Fragment,{key:`${j.type}-${j.dataElement||Z}`},[j.type==="pageModeButton"&&!j.hidden?(openBlock(),createElementBlock("div",{key:0,"data-element":j.dataElement,class:"drop-item",onClick:M},[createVNode(O,null,{default:withCtx(()=>[createVNode(J)]),_:1}),createTextVNode(toDisplayString$1(T.$t("header.viewSetting")),1)],8,_hoisted_8$1)):createCommentVNode("",!0)],64))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(j,Z)=>(openBlock(),createElementBlock(Fragment,{key:`${j.type}-${j.dataElement||Z}`},[j.type==="settingButton"&&!j.hidden?(openBlock(),createElementBlock("div",{key:0,"data-element":j.dataElement,class:"drop-item",onClick:S},[createVNode(O,null,{default:withCtx(()=>[createVNode(re)]),_:1}),createTextVNode(toDisplayString$1(T.$t("header.settings.settings")),1)],8,_hoisted_9$1)):createCommentVNode("",!0),j.name==="customButton"&&j.dropItem&&!j.hidden?(openBlock(),createElementBlock("div",{key:1,"data-element":j.dataElement,class:"drop-item"},[createVNode(X,{item:j},null,8,["item"])],8,_hoisted_10$1)):createCommentVNode("",!0)],64))),128))])]),_:1},512)}}},__unplugin_components_14=_export_sfc(_sfc_main$n,[["__scopeId","data-v-855c57bb"]]),_sfc_main$m={},_hoisted_1$g={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$e=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.10986 13.9354C2.71178 11.5373 2.71178 7.64923 5.10986 5.25114C7.50795 2.85306 11.396 2.85306 13.7941 5.25114C16.1922 7.64923 16.1922 11.5373 13.7941 13.9354C11.396 16.3335 7.50795 16.3335 5.10986 13.9354ZM4.0492 4.19048C1.06533 7.17436 1.06533 12.0122 4.0492 14.996C6.85416 17.801 11.2974 17.9692 14.2988 15.5006L17.1989 18.4006C17.4918 18.6935 17.9666 18.6935 18.2595 18.4006C18.5524 18.1078 18.5524 17.6329 18.2595 17.34L15.3595 14.4399C17.8279 11.4385 17.6597 6.99539 14.8548 4.19048C11.8709 1.20661 7.03307 1.20661 4.0492 4.19048Z",fill:"currentColor"},null,-1),_hoisted_3$d=[_hoisted_2$e];function _sfc_render$c(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$g,_hoisted_3$d)}const __unplugin_components_0$1=_export_sfc(_sfc_main$m,[["render",_sfc_render$c]]),index_vue_vue_type_style_index_0_lang$1="",_hoisted_1$f={class:"search-container"},_sfc_main$l={__name:"index",props:["item"],setup(e){const n=useViewerStore(),r=computed(()=>n.getSearchStatus),o=computed(()=>n.getUpload),u=computed(()=>n.isElementOpen("leftPanel")),s=computed(()=>n.getActiveElementTab("leftPanel")),w=()=>{core.webViewerNamedAction("Find"),u.value&&s.value!=="SEARCH"?n.setSearchStatus(!0):u.value?(n.setSearchStatus(!1),n.toggleElement("leftPanel")):(n.setSearchStatus(!0),n.toggleElement("leftPanel")),n.setActiveElementTab("leftPanel","SEARCH")};return(g,v)=>{const y=__unplugin_components_0$1,m=_sfc_main$4l;return openBlock(),createElementBlock("div",_hoisted_1$f,[createVNode(m,mergeProps({id:"viewFind"},{...e.item},{isActive:r.value&&u.value,onClick:w,class:{disabled:!o.value},title:g.$t("header.search")}),{default:withCtx(()=>[createVNode(y)]),_:1},16,["isActive","class","title"])])}}},_sfc_main$k={},_hoisted_1$e={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$d=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.7463 7.94055L8.43134 3.20358C8.38986 2.6073 8.82031 2.08322 9.40947 2.01273L9.46546 2.00656C9.75502 1.97416 10.0451 2.06271 10.2681 2.25159C10.4911 2.44047 10.6276 2.71317 10.6457 3.00614L10.9886 8.17061C10.999 8.31659 11.1097 8.43516 11.2537 8.45444C11.3176 8.46288 11.382 8.44409 11.4315 8.40258C11.481 8.36108 11.5111 8.30063 11.5145 8.23584L11.7612 3.47595C11.7918 2.85998 12.3116 2.38523 12.923 2.41468H12.9309C13.5429 2.44972 14.0111 2.97745 13.9773 3.59407L13.7218 8.51438C13.7137 8.66679 13.8235 8.79975 13.9738 8.81936C14.1225 8.83876 14.2625 8.73915 14.2914 8.59018L14.8006 6.02337C14.9178 5.41517 15.497 5.01851 16.0954 5.13574L16.1041 5.13751C16.7058 5.25854 17.0969 5.84695 16.979 6.45353L16.3684 9.53687C15.8189 13.3474 15.0586 15.5052 14.3946 16.4246C13.3649 17.8508 11.5573 17.8667 10.1251 17.8667C8.69381 17.8667 7.16012 17.5291 6.44796 16.9993C5.73492 16.4696 4.77079 15.2575 4.15837 13.9327L4.16712 13.9283C4.11876 13.8639 4.0774 13.7945 4.04376 13.7212L3.105 11.685C2.84552 11.1243 3.08338 10.4577 3.63781 10.1918L3.64656 10.1874C3.91235 10.0626 4.21656 10.0497 4.49179 10.1517C4.76702 10.2536 4.99055 10.4619 5.11287 10.7304C5.62206 11.8234 5.94227 12.324 6.07526 12.2324C6.27386 12.0949 6.12075 11.7176 5.85478 9.21249C5.67578 7.53039 5.45319 5.85328 5.18724 4.18289C5.07653 3.5968 5.44002 3.02581 6.01489 2.88273L6.07526 2.86775C6.35866 2.79957 6.65742 2.85178 6.90147 3.01215C7.14552 3.17252 7.3134 3.42693 7.36572 3.71571L8.168 8.02341C8.19642 8.17613 8.33897 8.27937 8.49171 8.25787C8.64561 8.23564 8.75656 8.09774 8.7463 7.94143V7.94055Z",fill:"currentColor"},null,-1),_hoisted_3$c=[_hoisted_2$d];function _sfc_render$b(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$e,_hoisted_3$c)}const __unplugin_components_10=_export_sfc(_sfc_main$k,[["render",_sfc_render$b]]),_sfc_main$j={},_hoisted_1$d={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$c=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.33187 3.41643C4.74608 3.41643 5.08187 3.08064 5.08187 2.66643C5.08187 2.25221 4.74608 1.91643 4.33187 1.91643L1.66643 1.91643C1.25221 1.91643 0.916428 2.25221 0.916428 2.66643C0.916428 3.08064 1.25221 3.41643 1.66643 3.41643L2.35645 3.41643V3.8183L2.35645 15.3384V15.7404H1.66643C1.25221 15.7404 0.916428 16.0762 0.916428 16.4904C0.916428 16.9047 1.25221 17.2404 1.66643 17.2404H4.33187C4.74608 17.2404 5.08187 16.9047 5.08187 16.4904C5.08187 16.0762 4.74608 15.7404 4.33187 15.7404H3.85645V15.3384L3.85645 3.8183V3.41643H4.33187ZM7.30219 4.09613C7.10328 4.09613 6.91251 4.17515 6.77186 4.3158C6.63121 4.45645 6.55219 4.64722 6.55219 4.84613V12.8425C6.55219 13.1458 6.73492 13.4193 7.01518 13.5354C7.29543 13.6514 7.61802 13.5873 7.83252 13.3728L9.88684 11.3185L14.7821 16.2137C15.075 16.5066 15.5498 16.5066 15.8427 16.2137L18.6699 13.3866C18.8105 13.2459 18.8895 13.0551 18.8895 12.8562C18.8895 12.6573 18.8105 12.4665 18.6699 12.3259L13.7746 7.43067L15.8288 5.37646C16.0433 5.16196 16.1075 4.83937 15.9914 4.55912C15.8753 4.27886 15.6019 4.09613 15.2985 4.09613L7.30219 4.09613ZM9.35651 9.72747L8.05219 11.0318V5.59613L13.4879 5.59613L12.1836 6.90034C12.043 7.041 11.964 7.23176 11.964 7.43067C11.964 7.62959 12.043 7.82035 12.1836 7.961L17.0789 12.8562L15.3124 14.6227L10.4172 9.72747C10.1243 9.43458 9.64941 9.43458 9.35651 9.72747Z",fill:"currentColor"},null,-1),_hoisted_3$b=[_hoisted_2$c];function _sfc_render$a(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$d,_hoisted_3$b)}const __unplugin_components_9=_export_sfc(_sfc_main$j,[["render",_sfc_render$a]]),_sfc_main$i={},_hoisted_1$c={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$b=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.1142 2.47079H2V6.57766H6.1142V2.47079ZM18.0002 2.47076H13.886V6.57763H18.0002V2.47076ZM6.11436 13.4224H2.00016V17.5293H6.11436V13.4224ZM18.0002 13.4224H13.886V17.5293H18.0002V13.4224ZM9.08594 5.20866V3.8397H7.25741V5.20866H9.08594ZM12.743 5.20866V3.8397H10.9145V5.20866H12.743ZM4.74251 9.08729H3.3711V7.26201H4.74251V9.08729ZM4.74251 12.7379H3.3711V10.9126H4.74251V12.7379ZM15.2571 9.08734H16.6285V7.26206H15.2571V9.08734ZM15.2571 12.7379H16.6285V10.9126H15.2571V12.7379ZM9.08594 14.7913V16.1603H7.25741V14.7913H9.08594ZM12.743 14.7913V16.1603H10.9145V14.7913H12.743Z",fill:"currentColor"},null,-1),_hoisted_3$a=[_hoisted_2$b];function _sfc_render$9(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$c,_hoisted_3$a)}const __unplugin_components_8$1=_export_sfc(_sfc_main$i,[["render",_sfc_render$9]]),_sfc_main$h={__name:"ViewRotationControls",setup(e){const n=()=>{core.rotateCounterclockwise()},r=()=>{core.rotateClockwise()};return(o,u)=>{const s=_sfc_main$4l;return openBlock(),createElementBlock(Fragment,null,[createVNode(s,{img:"icon-header-counter-clockwise",title:"Rotate Counterclockwise",onClick:n}),createVNode(s,{img:"icon-header-clockwise",title:"Rotate Clockwise",onClick:r})],64)}}},_sfc_main$g={__name:"CropPageButton",props:["item","popoverTool"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useViewerStore(),u=useDocumentStore(),{item:s,popoverTool:w}=e,g=computed(()=>u.getActiveTool),v=()=>{w&&w[0].setShow(!1),u.setToolState(g.value==="cropPage"?"":"cropPage"),g.value==="cropPage"&&(o.resetPanels(),o.setActiveToolMode("view")),n(0),r(0),o.closeActiveStickNote(),o.setSearchStatus(!1),o.toggleActiveHand(!1)};return(y,m)=>{const d=__unplugin_components_8$1,f=_sfc_main$4l;return openBlock(),createBlock(f,mergeProps({isActive:g.value==="cropPage"&&!unref(isMobileDevice)},{...e.item},{onClick:v,title:y.$t("header.cropPage")}),{default:withCtx(()=>[createVNode(d)]),_:1},16,["isActive","title"])}}},_sfc_main$f={__name:"HandButton",props:["item","popoverTool"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,o=useViewerStore(),u=useDocumentStore(),{item:s,popoverTool:w}=e,g=computed(()=>o.getActiveHand),v=()=>{w&&w[0].setShow(!1),window.getSelection().empty(),o.toggleActiveHand(!g.value);const y=g.value?1:0;n(y),r(0),o.closeActiveStickNote(),core.webViewerNamedAction("Find",4),u.setToolState(""),o.setSearchStatus(!1)};return(y,m)=>{const d=__unplugin_components_10,f=_sfc_main$4l;return openBlock(),createBlock(f,mergeProps({isActive:g.value&&!unref(isMobileDevice),img:"icon-hand-tool"},{...e.item},{onClick:v,title:y.$t("header.pan")}),{default:withCtx(()=>[createVNode(d)]),_:1},16,["isActive","title"])}}},_sfc_main$e={},_hoisted_1$b={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$a=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 3.5H16.5V16.5H3.5V3.5ZM2 2H3.5H16.5H18V3.5V16.5V18H16.5H3.5H2V16.5V3.5V2ZM14.2461 14.9961H11.6868V13.4961H13.4961V11.6893H14.9961V14.2461V14.9961H14.2461ZM13.4961 6.5H11.6868V5H14.2461H14.9961V5.75V8.3078H13.4961V6.5ZM6.5 6.5H8.30664V5H5.75H5V5.75V8.3078H6.5V6.5ZM5.75 14.9961H8.30664V13.4961H6.5V11.6893H5V14.2461V14.9961H5.75Z",fill:"currentColor"},null,-1),_hoisted_3$9=[_hoisted_2$a];function _sfc_render$8(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$b,_hoisted_3$9)}const __unplugin_components_0=_export_sfc(_sfc_main$e,[["render",_sfc_render$8]]),FullScreenButton_vue_vue_type_style_index_0_lang="",_sfc_main$d={__name:"FullScreenButton",props:["item"],setup(e){const{requestFullScreenMode:n}=core,r=useViewerStore(),o=useDocumentStore(),u=computed(()=>r.isElementOpen("leftPanel"));core.addEvent("presentationmodechanged",({state:w})=>{w===1?r.setFullMode(!1):w===3&&r.setFullMode(!0)});const s=()=>{const w=navigator.userAgent.match(/(iPad)/)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;u.value&&(window.innerWidth<930||w)&&r.toggleElement("leftPanel");const g=document.getElementById("sign-image-save");g&&g.remove(),n(),o.setToolState("")};return(w,g)=>{const v=__unplugin_components_0,y=_sfc_main$4l;return openBlock(),createBlock(y,mergeProps({img:"icon-full-screen",className:"full-screen"},{...e.item},{onClick:s,title:w.$t("header.fullScreen")}),{default:withCtx(()=>[createVNode(v)]),_:1},16,["title"])}}},_sfc_main$c={};function _sfc_render$7(e,n){return openBlock(),createElementBlock("div")}const __unplugin_components_2$1=_export_sfc(_sfc_main$c,[["render",_sfc_render$7]]),_sfc_main$b={},_hoisted_1$a={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$9=createBaseVNode("rect",{x:"2",y:"8",width:"6",height:"9",fill:"#999999"},null,-1),_hoisted_3$8=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.5 3.5H2.5V7.25H8H17.5V3.5ZM7.25 8.75H2.5V16.5H7.25V8.75ZM8.75 16.5V8.75H17.5V16.5H8.75ZM2.5 2H1V3.5V16.5V18H2.5H17.5H19V16.5V3.5V2H17.5H2.5Z",fill:"currentColor"},null,-1),_hoisted_4$2=[_hoisted_2$9,_hoisted_3$8];function _sfc_render$6(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$a,_hoisted_4$2)}const __unplugin_components_8=_export_sfc(_sfc_main$b,[["render",_sfc_render$6]]),_sfc_main$a={},_hoisted_1$9={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$8=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.11004 13.9353C2.71196 11.5372 2.71196 7.64917 5.11004 5.25108C7.50813 2.853 11.3962 2.853 13.7943 5.25108C16.1924 7.64917 16.1924 11.5372 13.7943 13.9353C11.3962 16.3334 7.50813 16.3334 5.11004 13.9353ZM4.04938 4.19042C1.06551 7.17429 1.06551 12.0121 4.04938 14.996C6.85434 17.8009 11.2976 17.9691 14.299 15.5005L17.1991 18.4006C17.4919 18.6935 17.9668 18.6935 18.2597 18.4006C18.5526 18.1077 18.5526 17.6328 18.2597 17.3399L15.3596 14.4399C17.8281 11.4384 17.6598 6.99532 14.8549 4.19042C11.8711 1.20655 7.03325 1.20655 4.04938 4.19042Z",fill:"currentColor"},null,-1),_hoisted_3$7=[_hoisted_2$8];function _sfc_render$5(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$9,_hoisted_3$7)}const __unplugin_components_7=_export_sfc(_sfc_main$a,[["render",_sfc_render$5]]),_sfc_main$9={},_hoisted_1$8={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$7=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.0663 1.73124C11.8457 1.51066 11.4792 1.54371 11.3017 1.80019L8.50221 5.84387C8.47541 5.88258 8.43581 5.9106 8.39039 5.92299L4.70212 6.92888C4.62329 6.95038 4.56548 7.01679 4.55485 7.0978C4.49741 7.53536 4.28835 8.98634 3.86452 10.5C3.50509 11.7837 2.41361 14.2634 1.80715 15.6014C1.43791 15.4319 0.986657 15.4992 0.682542 15.8033C0.292017 16.1938 0.292017 16.827 0.682542 17.2175C1.07307 17.6081 1.70623 17.6081 2.09676 17.2175C2.40731 16.907 2.4709 16.443 2.28754 16.0696C3.47428 15.503 5.62248 14.5333 7.40006 14.0355C9.40855 13.4732 10.4209 13.3576 10.7798 13.3342C10.8716 13.3282 10.9526 13.266 10.9768 13.1773L11.9771 9.50966C11.9895 9.46424 12.0175 9.42465 12.0562 9.39785L16.0999 6.59838C16.3563 6.42081 16.3894 6.05431 16.1688 5.83373L12.0663 1.73124ZM7.84432 8.82278C7.79831 8.77678 7.72133 8.78626 7.68786 8.84204L5.83823 11.9248C5.78467 12.014 5.88616 12.1155 5.97543 12.062L9.05814 10.2123C9.11392 10.1789 9.1234 10.1019 9.0774 10.0559L7.84432 8.82278ZM15.5271 16.5933C15.4522 16.5981 15.3767 16.6005 15.3006 16.6005C15.2254 16.6005 15.1508 16.5982 15.0768 16.5935L13.531 19.2708C13.4525 19.4067 13.2553 19.4035 13.1814 19.2651L12.5771 18.1343C12.5412 18.0671 12.4703 18.0261 12.3942 18.0286L11.1127 18.0707C10.9559 18.0759 10.8545 17.9067 10.9329 17.7708L12.4536 15.1369C12.0425 14.5632 11.8006 13.8601 11.8006 13.1005C11.8006 11.1675 13.3676 9.60052 15.3006 9.60052C17.2336 9.60052 18.8006 11.1675 18.8006 13.1005C18.8006 13.8592 18.5592 14.5614 18.1491 15.1347L19.671 17.7708C19.7495 17.9067 19.6481 18.0759 19.4912 18.0707L18.2098 18.0286C18.1336 18.0261 18.0627 18.0671 18.0268 18.1343L17.4225 19.2651C17.3486 19.4035 17.1514 19.4067 17.0729 19.2708L15.5271 16.5933Z",fill:"currentColor"},null,-1),_hoisted_3$6=[_hoisted_2$7];function _sfc_render$4(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$8,_hoisted_3$6)}const __unplugin_components_6=_export_sfc(_sfc_main$9,[["render",_sfc_render$4]]),_sfc_main$8={},_hoisted_1$7={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$6=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.5 3.5H13.3V13.3H3.5V3.5ZM2 2H3.5H13.3H14.8V3.5V5.2H16.5H18V6.7V16.5V18H16.5H6.7H5.2V16.5V14.8H3.5H2V13.3V3.5V2ZM6.7 14.8V16.5H16.5V6.7H14.8V13.3V14.8H13.3H6.7Z",fill:"currentColor"},null,-1),_hoisted_3$5=[_hoisted_2$6];function _sfc_render$3(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$7,_hoisted_3$5)}const __unplugin_components_5=_export_sfc(_sfc_main$8,[["render",_sfc_render$3]]),_sfc_main$7={},_hoisted_1$6={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$5=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 1.25H2L0 18.75H18L20 1.25ZM10.4361 3.51788L15.0866 15.1442H16.5866V16.3942H12.7404V15.1442H13.7403L12.798 12.7885H6.91309L5.9711 15.1442H6.97115V16.3942H3.125V15.1442H4.62492L9.27547 3.51788H10.4361ZM9.85499 5.43124L12.298 11.5385H7.41292L9.85499 5.43124Z",fill:"currentColor"},null,-1),_hoisted_3$4=[_hoisted_2$5];function _sfc_render$2(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$6,_hoisted_3$4)}const __unplugin_components_4=_export_sfc(_sfc_main$7,[["render",_sfc_render$2]]),_sfc_main$6={},_hoisted_1$5={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$4=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 1.875H1.25V5.625H5V1.875ZM5 8.125H1.25V11.875H5V8.125ZM1.25 14.375H5V18.125H1.25V14.375ZM18.75 4.6875V2.8125H7.5V4.6875H18.75ZM18.75 9.0625V10.9375H7.5V9.0625H18.75ZM18.75 17.1875V15.3125H7.5V17.1875H18.75Z",fill:"currentColor"},null,-1),_hoisted_3$3=[_hoisted_2$4];function _sfc_render$1(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$5,_hoisted_3$3)}const __unplugin_components_3=_export_sfc(_sfc_main$6,[["render",_sfc_render$1]]),_sfc_main$5={},_hoisted_1$4={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$3=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.4375 1.4375H2.6875V2.1875V17.8125V18.5625H3.4375H16.5612H17.3112V17.8125V10V7.07031V6.77538L17.1103 6.55944L12.5675 1.67663L12.345 1.4375H12.0184H9.99936H3.4375ZM4.1875 17.0625V2.9375H9.99936H10.5V7.5V8.25H11.25H15.8112V10V17.0625H4.1875ZM15.2388 6.75L12 3.2688V6.75H15.2388Z",fill:"currentColor"},null,-1),_hoisted_3$2=[_hoisted_2$3];function _sfc_render(e,n){return openBlock(),createElementBlock("svg",_hoisted_1$4,_hoisted_3$2)}const __unplugin_components_2=_export_sfc(_sfc_main$5,[["render",_sfc_render]]),_sfc_main$4={__name:"LeftPanelTabs",props:["activePanelTab","popover"],setup(e){const n=useViewerStore(),{popover:r}=e,o=computed(()=>n.isElementOpen("leftPanel")),u=computed(()=>n.getActiveElementTab("leftPanel")),s=computed(()=>n.getDisabledElements("thumbnails")),w=computed(()=>n.getDisabledElements("outlines")),g=computed(()=>n.getDisabledElements("annotation")),v=computed(()=>n.getDisabledElements("layers")),y=computed(()=>n.getDisabledElements("signature")),m=computed(()=>n.getDisabledElements("search")),d=f=>{r&&r.setShow(!1),o.value||n.openElement("leftPanel"),f!==u.value&&(n.setActiveElementTab("leftPanel",f),f==="SEARCH"?(core.webViewerNamedAction("FindOpen"),n.setSearchStatus(!0)):(core.clearSearchResults(),n.setSearchStatus(!1)))};return(f,x)=>{const k=__unplugin_components_2,P=__unplugin_components_3,S=__unplugin_components_4,E=__unplugin_components_5,M=__unplugin_components_6,T=__unplugin_components_7;return openBlock(),createElementBlock(Fragment,null,[s.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["drop-item",{active:u.value==="THUMBS"}]),"data-element":"THUMBS",onClick:x[0]||(x[0]=D=>d("THUMBS"))},[createVNode(k),createTextVNode(toDisplayString$1(f.$t("leftPanel.thumbnails")),1)],2)),w.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["drop-item",{active:u.value==="OUTLINE"}]),"data-element":"OUTLINE",onClick:x[1]||(x[1]=D=>d("OUTLINE"))},[createVNode(P),createTextVNode(toDisplayString$1(f.$t("leftPanel.outlines")),1)],2)),g.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["drop-item",{active:u.value==="ANNOTATION"}]),"data-element":"ANNOTATION",onClick:x[2]||(x[2]=D=>d("ANNOTATION"))},[createVNode(S),createTextVNode(toDisplayString$1(f.$t("leftPanel.annotations")),1)],2)),v.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(["drop-item",{active:u.value==="LAYER"}]),"data-element":"LAYER",onClick:x[3]||(x[3]=D=>d("LAYER"))},[createVNode(E),createTextVNode(toDisplayString$1(f.$t("leftPanel.layers")),1)],2)),o.value&&u.value==="COMPARISON"?(openBlock(),createElementBlock("div",{key:4,class:normalizeClass(["drop-item",{active:u.value==="COMPARISON"}]),"data-element":"COMPARISON",onClick:x[4]||(x[4]=D=>d("COMPARISON"))},[createVNode(k),createTextVNode("Compare")],2)):createCommentVNode("",!0),y.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:5,"data-element":"SIGNATURE",class:normalizeClass(["drop-item",{active:u.value==="SIGNATURE"}]),onClick:x[5]||(x[5]=D=>d("SIGNATURE"))},[createVNode(M),createTextVNode(toDisplayString$1(f.$t("leftPanel.signature")),1)],2)),m.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:6,"data-element":"SEARCH",class:normalizeClass(["drop-item",{active:u.value==="SEARCH"}]),onClick:x[6]||(x[6]=D=>d("SEARCH"))},[createVNode(T),createTextVNode(toDisplayString$1(f.$t("leftPanel.search")),1)],2))],64)}}},ToggleElementButton_vue_vue_type_style_index_0_lang="",_hoisted_1$3=["title"],_hoisted_2$2={class:"drop-down medium left-panel-button-popover"},_sfc_main$3={__name:"ToggleElementButton",props:["item"],setup(e){const n=useViewerStore(),{item:r}=e,o=computed(()=>n.isElementOpen(r.element)),u=computed(()=>n.getActiveElementTab("leftPanel")),s=computed(()=>n.getPopoverChanged),w=computed(()=>n.getDisabledElements("thumbnails")),g=computed(()=>n.getDisabledElements("outlines")),v=computed(()=>n.getDisabledElements("annotation")),y=computed(()=>n.getDisabledElements("layers")),m=computed(()=>n.getDisabledElements("signature")),d=computed(()=>n.getDisabledElements("search")),f=computed(()=>!w.value||!g.value||!v.value||!y.value||!m.value||!d.value),x=S=>{S.stopPropagation()},k=ref(null),P=()=>{u.value==="SEARCH"&&core.webViewerNamedAction("Find"),n.toggleElement(r.element)};return watch(()=>s.value,(S,E)=>{S&&(k.value.setShow(!1),n.setPopoverChanged(!1))}),(S,E)=>{const M=__unplugin_components_11$1,T=_sfc_main$4,D=__unplugin_components_2,I=__unplugin_components_3,N=__unplugin_components_4,O=__unplugin_components_5,F=__unplugin_components_6,U=__unplugin_components_7,Y=__unplugin_components_8,Q=_sfc_main$4l;return openBlock(),createElementBlock("div",{title:S.$t("header.leftPanel"),class:normalizeClass(["left-panel-button toggle-button",{active:o.value}]),onClick:P},[createVNode(unref(NPopover),{ref_key:"popover",ref:k,placement:"top-start",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0,"z-index":4},{trigger:withCtx(()=>[createBaseVNode("div",{class:"arrow-container",onClick:x},[withDirectives(createVNode(M,{class:"arrow"},null,512),[[vShow,f.value]])])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$2,[createVNode(T,{activePanelTab:u.value,popover:k.value},null,8,["activePanelTab","popover"])])]),_:1},512),createVNode(Q,{isActive:o.value},{default:withCtx(()=>[u.value==="THUMBS"?(openBlock(),createBlock(D,{key:0})):u.value==="OUTLINE"?(openBlock(),createBlock(I,{key:1})):u.value==="ANNOTATION"?(openBlock(),createBlock(N,{key:2})):u.value==="LAYER"?(openBlock(),createBlock(O,{key:3})):u.value==="SIGNATURE"?(openBlock(),createBlock(F,{key:4})):u.value==="SEARCH"?(openBlock(),createBlock(U,{key:5})):(openBlock(),createBlock(Y,{key:6}))]),_:1},8,["isActive"])],10,_hoisted_1$3)}}},HeaderItems_vue_vue_type_style_index_0_lang="",_hoisted_1$2=["data-element"],_hoisted_2$1={class:"drop-down narrower hand-tools"},_hoisted_3$1={class:"drop-menu"},_hoisted_4$1={class:"drop-down narrower"},_hoisted_5$1=["data-element"],_hoisted_6$1=["data-element"],_hoisted_7$1=["data-element"],_hoisted_8=["data-element"],_hoisted_9=["data-element"],_hoisted_10=["data-element"],_hoisted_11=["data-element"],_hoisted_12=["data-element"],_hoisted_13=["data-element"],_hoisted_14=["data-element"],_hoisted_15=["data-element"],_hoisted_16={key:0,class:"tool-menu"},_hoisted_17=["data-element"],_hoisted_18=["data-element"],_hoisted_19=["data-element"],_hoisted_20=["data-element"],_hoisted_21=["data-element"],_hoisted_22=["data-element"],_hoisted_23=["data-element"],_hoisted_24=["data-element"],_hoisted_25=["data-element"],_hoisted_26=["data-element"],_hoisted_27=["data-element"],_hoisted_28={class:"right-container"},_hoisted_29={key:1,class:"header-items"},_hoisted_30=createBaseVNode("div",{class:"divider"},null,-1),_hoisted_31={class:"right-container"},_sfc_main$2={__name:"HeaderItems",props:["items","rightItems","toolMode"],setup(e){const{switchTool:n,switchAnnotationEditorMode:r}=core,u=getCurrentInstance().appContext.app.config.globalProperties.$t,s=e,w=useViewerStore(),g=useDocumentStore(),v=computed(()=>w.getCompareStatus),y=computed(()=>w.getUpload&&w.getVerified&&!w.getUploadLoading),m=computed(()=>w.getTools);let d=computed(()=>{const D={view:u("header.viewer"),form:u("header.forms"),annotation:u("header.annotations"),sign:u("header.signatures"),security:u("header.security"),redaction:u("security.redaction"),compare:u("header.compare"),editor:u("header.editor"),document:u("header.document"),separation:u("header.separation"),measurement:u("header.measurement")};return D[s.toolMode]?D[s.toolMode]:""});const f=computed(()=>w.getWebviewerMode),x=computed(()=>g.getActiveTool),k=computed(()=>g.getDisableDigitalSignature),P=ref(null),S=ref(null),E=D=>{if(f.value!=="Standalone"&&["editor","document"].includes(D)){D==="editor"?w.openElement("contentEditorPreventDialog"):w.openElement("docEditorPreventDialog");return}if(D==="sign"&&!k&&window.$message.info(u("signatures.tip"),{duration:3e3,showIcon:!1}),isMobileDevice&&["separation","measurement"].includes(D)){P.value.setShow(!1),w.openElement("unsupportedMobileDialog");return}w.setActiveToolMode(D),g.setToolState(""),w.toggleActiveHand(!1),n(0),r(0),P.value.setShow(!1),(D==="compare"||D==="document")&&w.resetPanels()},M=()=>{S.value[0].setShow(!1),g.setToolState("selectText"),n(0),r(0),w.closeActiveStickNote(),w.setSearchStatus(!1),w.toggleActiveHand(!1)},T=D=>!D.length||D.length&&D.every(I=>I.hidden);return(D,I)=>{const N=_sfc_main$2z,O=_sfc_main$3,F=__unplugin_components_2$1,U=_sfc_main$d,Y=_sfc_main$f,Q=_sfc_main$g,q=_sfc_main$2_,ne=_sfc_main$h,J=__unplugin_components_8$1,re=__unplugin_components_9,X=__unplugin_components_10,j=__unplugin_components_11$1,Z=_sfc_main$4l,W=_sfc_main$l,te=__unplugin_components_14,le=_sfc_main$w,oe=_sfc_main$x,Ee=_sfc_main$y,Ae=_sfc_main$A;return e.toolMode!=="compare"&&e.toolMode!=="document"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["header-items",{mobile:unref(isMobileDevice)}])},[unref(isMobileDevice)?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(e.items,(ve,ke)=>(openBlock(),createElementBlock(Fragment,{key:`${ve.type}-${ve.dataElement||ke}-mobile`},[ve.name==="customButton"&&!ve.hidden&&!ve.dropItem?(openBlock(),createBlock(N,{key:0,item:ve},null,8,["item"])):ve.type==="toggleElementButton"&&!ve.hidden?(openBlock(),createBlock(O,{key:1,item:ve,class:normalizeClass({disabled:!y.value}),"data-element":ve.dataElement},null,8,["item","class","data-element"])):ve.type==="selectTools"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["hand-tools",{"events-none":!y.value}]),"data-element":ve.dataElement},[createVNode(unref(NPopover),{ref_for:!0,ref_key:"popoverTool",ref:S,placement:"bottom",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0},{trigger:withCtx(()=>[createVNode(Z,{class:normalizeClass(["drop-menu",{disabled:!y.value}])},{default:withCtx(()=>[x.value==="cropPage"?(openBlock(),createBlock(J,{key:0})):["selectText","highlight","underline","squiggly","strikeout"].includes(x.value)?(openBlock(),createBlock(re,{key:1})):(openBlock(),createBlock(X,{key:2})),createVNode(j)]),_:1},8,["class"])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(Ce,Pe)=>(openBlock(),createElementBlock(Fragment,{key:`${Ce.type}-${Ce.dataElement||Pe}`},[Ce.type==="handToolButton"&&!Ce.hidden?(openBlock(),createBlock(Y,{key:0,item:Ce,"data-element":Ce.dataElement,popoverTool:S.value},null,8,["item","data-element","popoverTool"])):Ce.type==="cropPageButton"&&!Ce.hidden?(openBlock(),createBlock(Q,{key:1,item:Ce,"data-element":Ce.dataElement,popoverTool:S.value},null,8,["item","data-element","popoverTool"])):Ce.type==="selectTools"&&!Ce.hidden?(openBlock(),createBlock(Z,{key:2,"data-element":Ce.dataElement,onClick:M},{default:withCtx(()=>[createVNode(re)]),_:2},1032,["data-element"])):createCommentVNode("",!0)],64))),128))])]),_:2},1536)],10,_hoisted_1$2)):createCommentVNode("",!0)],64))),128)):(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(e.items,(ve,ke)=>(openBlock(),createElementBlock(Fragment,{key:`${ve.type}-${ve.dataElement||ke}`},[ve.name==="customButton"&&!ve.hidden&&!ve.dropItem?(openBlock(),createBlock(N,{key:0,item:ve},null,8,["item"])):ve.type==="toggleElementButton"&&!ve.hidden?(openBlock(),createBlock(O,{key:1,item:ve,class:normalizeClass({disabled:!y.value}),"data-element":ve.dataElement},null,8,["item","class","data-element"])):ve.type==="toolButton"&&!ve.hidden?(openBlock(),createBlock(F,{key:2,item:ve,"data-element":ve.dataElement},null,8,["item","data-element"])):ve.type==="fullScreenButton"&&!ve.hidden?(openBlock(),createBlock(U,{key:3,item:ve,class:normalizeClass({disabled:!y.value}),"data-element":ve.dataElement},null,8,["item","class","data-element"])):ve.type==="handToolButton"&&!ve.hidden?(openBlock(),createBlock(Y,{key:4,item:ve,class:normalizeClass({disabled:!y.value}),"data-element":ve.dataElement},null,8,["item","class","data-element"])):ve.type==="cropPageButton"&&!ve.hidden?(openBlock(),createBlock(Q,{key:5,item:ve,class:normalizeClass({disabled:!y.value}),"data-element":ve.dataElement},null,8,["item","class","data-element"])):ve.type==="zoomOverlay"&&!ve.hidden?(openBlock(),createBlock(q,{key:6,"data-element":ve.dataElement},null,8,["data-element"])):ve.type==="viewRotationControls"&&!ve.hidden?(openBlock(),createBlock(ne,{key:7,"data-element":ve.dataElement},null,8,["data-element"])):["spacer","divider"].includes(ve.type)?(openBlock(),createElementBlock("div",{key:8,class:normalizeClass(ve.type)},null,2)):createCommentVNode("",!0)],64))),128)),createBaseVNode("div",{class:normalizeClass(["tool-container mobile",{"events-none":!y.value}])},[T(m.value)?createCommentVNode("",!0):(openBlock(),createBlock(unref(NPopover),{key:0,ref_key:"popoverMode",ref:P,placement:"bottom",trigger:"click","show-arrow":!1,to:"#outerContainer",raw:!0},{trigger:withCtx(()=>[createBaseVNode("div",_hoisted_3$1,[createBaseVNode("span",null,toDisplayString$1(unref(d)),1),createVNode(j,{class:"arrow-left"})])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_4$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(m.value,(ve,ke)=>(openBlock(),createElementBlock(Fragment,{key:`${ve.dataElement||ke}`},[ve.element==="view"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:0,"data-element":ve.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="view"}]),onClick:I[0]||(I[0]=Ce=>E("view"))},toDisplayString$1(unref(u)("header.viewer")),11,_hoisted_5$1)):ve.element==="annotation"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:1,"data-element":ve.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="annotation"}]),onClick:I[1]||(I[1]=Ce=>E("annotation"))},toDisplayString$1(unref(u)("header.annotations")),11,_hoisted_6$1)):ve.element==="form"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:2,"data-element":ve.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="form"}]),onClick:I[2]||(I[2]=Ce=>E("form"))},toDisplayString$1(unref(u)("header.forms")),11,_hoisted_7$1)):ve.element==="sign"&&!ve.hidden&&f.value==="Standalone"?(openBlock(),createElementBlock("div",{key:3,"data-element":ve.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="sign"}]),onClick:I[3]||(I[3]=Ce=>E("sign"))},toDisplayString$1(unref(u)("header.signatures")),11,_hoisted_8)):ve.element==="security"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:4,"data-element":ve.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="security"}]),onClick:I[4]||(I[4]=Ce=>E("security"))},toDisplayString$1(unref(u)("header.security")),11,_hoisted_9)):ve.element==="redaction"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:5,"data-element":ve.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="redaction"}]),onClick:I[5]||(I[5]=Ce=>E("redaction"))},toDisplayString$1(unref(u)("security.redaction")),11,_hoisted_10)):ve.element==="compare"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:6,"data-element":ve.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="compare"}]),onClick:I[6]||(I[6]=Ce=>E("compare"))},toDisplayString$1(unref(u)("header.compare")),11,_hoisted_11)):ve.element==="editor"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:7,"data-element":ve.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="editor"}]),onClick:I[7]||(I[7]=Ce=>E("editor"))},toDisplayString$1(unref(u)("header.editor")),11,_hoisted_12)):ve.element==="document"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:8,"data-element":ve.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="document"}]),onClick:I[8]||(I[8]=Ce=>E("document"))},toDisplayString$1(unref(u)("header.document")),11,_hoisted_13)):ve.element==="separation"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:9,"data-element":ve.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="separation"}]),onClick:I[9]||(I[9]=Ce=>E("separation"))},toDisplayString$1(unref(u)("header.separation")),11,_hoisted_14)):ve.element==="measurement"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:10,"data-element":ve.dataElement,class:normalizeClass(["drop-item",{active:e.toolMode==="measurement"}]),onClick:I[10]||(I[10]=Ce=>E("measurement"))},toDisplayString$1(unref(u)("header.measurement")),11,_hoisted_15)):createCommentVNode("",!0)],64))),128))])]),_:1},512))],2),createBaseVNode("div",{class:normalizeClass(["tool-container pc",{"events-none":!y.value}])},[T(m.value)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_16,[(openBlock(!0),createElementBlock(Fragment,null,renderList(m.value,(ve,ke)=>(openBlock(),createElementBlock(Fragment,{key:`${ve.dataElement||ke}`},[ve.element==="view"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:0,"data-element":ve.dataElement,class:normalizeClass(["item",{active:e.toolMode==="view"}]),onClick:I[11]||(I[11]=Ce=>E("view"))},toDisplayString$1(unref(u)("header.viewer")),11,_hoisted_17)):ve.element==="annotation"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:1,"data-element":ve.dataElement,class:normalizeClass(["item",{active:e.toolMode==="annotation"}]),onClick:I[12]||(I[12]=Ce=>E("annotation"))},toDisplayString$1(unref(u)("header.annotations")),11,_hoisted_18)):ve.element==="form"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:2,"data-element":ve.dataElement,class:normalizeClass(["item",{active:e.toolMode==="form"}]),onClick:I[13]||(I[13]=Ce=>E("form"))},toDisplayString$1(unref(u)("header.forms")),11,_hoisted_19)):ve.element==="sign"&&!ve.hidden&&f.value==="Standalone"?(openBlock(),createElementBlock("div",{key:3,"data-element":ve.dataElement,class:normalizeClass(["item",{active:e.toolMode==="sign"}]),onClick:I[14]||(I[14]=Ce=>E("sign"))},toDisplayString$1(unref(u)("header.signatures")),11,_hoisted_20)):ve.element==="security"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:4,"data-element":ve.dataElement,class:normalizeClass(["item",{active:e.toolMode==="security"}]),onClick:I[15]||(I[15]=Ce=>E("security"))},toDisplayString$1(unref(u)("header.security")),11,_hoisted_21)):ve.element==="redaction"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:5,"data-element":ve.dataElement,class:normalizeClass(["item",{active:e.toolMode==="redaction"}]),onClick:I[16]||(I[16]=Ce=>E("redaction"))},toDisplayString$1(unref(u)("security.redaction")),11,_hoisted_22)):ve.element==="compare"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:6,"data-element":ve.dataElement,class:normalizeClass(["item",{active:e.toolMode==="compare"}]),onClick:I[17]||(I[17]=Ce=>E("compare"))},toDisplayString$1(unref(u)("header.compare")),11,_hoisted_23)):ve.element==="editor"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:7,"data-element":ve.dataElement,class:normalizeClass(["item",{active:e.toolMode==="editor"}]),onClick:I[18]||(I[18]=Ce=>E("editor"))},toDisplayString$1(unref(u)("header.editor")),11,_hoisted_24)):ve.element==="document"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:8,"data-element":ve.dataElement,class:normalizeClass(["item",{active:e.toolMode==="document"}]),onClick:I[19]||(I[19]=Ce=>E("document"))},toDisplayString$1(unref(u)("header.document")),11,_hoisted_25)):ve.element==="separation"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:9,"data-element":ve.dataElement,class:normalizeClass(["item",{active:e.toolMode==="separation"}]),onClick:I[20]||(I[20]=Ce=>E("separation"))},toDisplayString$1(unref(u)("header.separation")),11,_hoisted_26)):ve.element==="measurement"&&!ve.hidden?(openBlock(),createElementBlock("div",{key:10,"data-element":ve.dataElement,class:normalizeClass(["item",{active:e.toolMode==="measurement"}]),onClick:I[21]||(I[21]=Ce=>E("measurement"))},toDisplayString$1(unref(u)("header.measurement")),11,_hoisted_27)):createCommentVNode("",!0)],64))),128))]))],2),createBaseVNode("div",_hoisted_28,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(ve,ke)=>(openBlock(),createElementBlock(Fragment,{key:`${ve.type}-${ve.dataElement||ke}`},[ve.name==="customButton"&&!ve.hidden&&!ve.dropItem?(openBlock(),createBlock(N,{key:0,item:ve,"data-element":ve.dataElement},null,8,["item","data-element"])):ve.type==="searchButton"&&!ve.hidden?(openBlock(),createBlock(W,{key:1,item:ve,"data-element":ve.dataElement},null,8,["item","data-element"])):["spacer","divider"].includes(ve.type)?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(ve.type)},null,2)):createCommentVNode("",!0)],64))),128)),createVNode(te,{rightItems:e.rightItems},null,8,["rightItems"])])],2)):e.toolMode==="compare"?(openBlock(),createElementBlock("div",_hoisted_29,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.items,(ve,ke)=>(openBlock(),createElementBlock(Fragment,{key:`${ve.type}-${ve.dataElement||ke}`},[ve.type==="fullScreenButton"&&!ve.hidden?(openBlock(),createBlock(U,{key:0,item:ve,class:normalizeClass({disabled:v.value!=="finished"}),"data-element":ve.dataElement},null,8,["item","class","data-element"])):createCommentVNode("",!0)],64))),128)),_hoisted_30,createVNode(le),createBaseVNode("div",_hoisted_31,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.rightItems,(ve,ke)=>(openBlock(),createElementBlock(Fragment,{key:`${ve.type}-${ve.dataElement||ke}`},[ve.type==="downloadButton"&&!ve.hidden?(openBlock(),createBlock(oe,{key:0,item:ve,class:normalizeClass({disabled:v.value!=="finished"&&v.value!=="next"}),"data-element":ve.dataElement},null,8,["item","class","data-element"])):createCommentVNode("",!0),ve.type==="printButton"&&!ve.hidden?(openBlock(),createBlock(Ee,{key:1,item:ve,class:normalizeClass({disabled:v.value!=="finished"&&v.value!=="next"}),"data-element":ve.dataElement},null,8,["item","class","data-element"])):createCommentVNode("",!0)],64))),128))])])):e.toolMode==="document"?(openBlock(),createBlock(Ae,{key:2})):createCommentVNode("",!0)}}},Header_vue_vue_type_style_index_0_lang="",_hoisted_1$1={key:1,class:"click-tip"},_sfc_main$1={__name:"Header",setup(e){const n=useViewerStore(),r=useDocumentStore(),o=n.getActiveHeaderItems,u=n.getActiveRightHeaderItems,s=computed(()=>n.getToolMode),w=computed(()=>n.getSignatureVerify),g=computed(()=>n.getDisabledHeader),v=computed(()=>r.getActiveTool),y=computed(()=>n.isShowCompareTip),m=computed(()=>n.getCompareStatus),d=computed(()=>r.getCompareFile("oldFile")&&r.getCompareFile("newFile")&&m.value!=="finished");return onMounted(()=>{window.parent.location.pathname==="/demo/pdf-compare"&&(y.value||n.setShowCompareTip(!0))}),(f,x)=>{const k=_sfc_main$2,P=__unplugin_components_1,S=__unplugin_components_2$7,E=_sfc_main$12;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:normalizeClass(["header",{disabled:g.value||["redaction","remove"].includes(v.value)}]),"data-element":"header"},[createVNode(k,{items:unref(o),rightItems:unref(u),toolMode:s.value},null,8,["items","rightItems","toolMode"])],2),createVNode(P),w.value&&s.value==="sign"?(openBlock(),createBlock(S,{key:0})):createCommentVNode("",!0),withDirectives(createVNode(E,null,null,512),[[vShow,["redaction","remove"].includes(v.value)]]),s.value==="compare"&&d.value&&y.value?(openBlock(),createElementBlock("div",_hoisted_1$1,toDisplayString$1(f.$t("header.compareClickTip")),1)):createCommentVNode("",!0)],64)}}},initDocument=(e={})=>{const n=new ComPDFKitViewer(e);window.instance=n,core.setDocumentViewer(1,n)};/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,o)}return r}function _objectSpread2(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(r),!0).forEach(function(o){_defineProperty(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function _typeof(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(n){return typeof n}:_typeof=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(e)}function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _extends(){return _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(e,n){if(e==null)return{};var r={},o=Object.keys(e),u,s;for(s=0;s<o.length;s++)u=o[s],!(n.indexOf(u)>=0)&&(r[u]=e[u]);return r}function _objectWithoutProperties(e,n){if(e==null)return{};var r=_objectWithoutPropertiesLoose(e,n),o,u;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(u=0;u<s.length;u++)o=s[u],!(n.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,o)||(r[o]=e[o]))}return r}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _unsupportedIterableToArray(e,n){if(!!e){if(typeof e=="string")return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,n)}}function _arrayLikeToArray(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var version="1.15.2";function userAgent(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(e,n,r){e.addEventListener(n,r,!IE11OrLess&&captureMode)}function off(e,n,r){e.removeEventListener(n,r,!IE11OrLess&&captureMode)}function matches(e,n){if(!!n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function getParentOrHost(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function closest(e,n,r,o){if(e){r=r||document;do{if(n!=null&&(n[0]===">"?e.parentNode===r&&matches(e,n):matches(e,n))||o&&e===r)return e;if(e===r)break}while(e=getParentOrHost(e))}return null}var R_SPACE=/\s+/g;function toggleClass(e,n,r){if(e&&n)if(e.classList)e.classList[r?"add":"remove"](n);else{var o=(" "+e.className+" ").replace(R_SPACE," ").replace(" "+n+" "," ");e.className=(o+(r?" "+n:"")).replace(R_SPACE," ")}}function css(e,n,r){var o=e&&e.style;if(o){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(r=e.currentStyle),n===void 0?r:r[n];!(n in o)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),o[n]=r+(typeof r=="string"?"":"px")}}function matrix(e,n){var r="";if(typeof e=="string")r=e;else do{var o=css(e,"transform");o&&o!=="none"&&(r=o+" "+r)}while(!n&&(e=e.parentNode));var u=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return u&&new u(r)}function find(e,n,r){if(e){var o=e.getElementsByTagName(n),u=0,s=o.length;if(r)for(;u<s;u++)r(o[u],u);return o}return[]}function getWindowScrollingElement(){var e=document.scrollingElement;return e||document.documentElement}function getRect(e,n,r,o,u){if(!(!e.getBoundingClientRect&&e!==window)){var s,w,g,v,y,m,d;if(e!==window&&e.parentNode&&e!==getWindowScrollingElement()?(s=e.getBoundingClientRect(),w=s.top,g=s.left,v=s.bottom,y=s.right,m=s.height,d=s.width):(w=0,g=0,v=window.innerHeight,y=window.innerWidth,m=window.innerHeight,d=window.innerWidth),(n||r)&&e!==window&&(u=u||e.parentNode,!IE11OrLess))do if(u&&u.getBoundingClientRect&&(css(u,"transform")!=="none"||r&&css(u,"position")!=="static")){var f=u.getBoundingClientRect();w-=f.top+parseInt(css(u,"border-top-width")),g-=f.left+parseInt(css(u,"border-left-width")),v=w+s.height,y=g+s.width;break}while(u=u.parentNode);if(o&&e!==window){var x=matrix(u||e),k=x&&x.a,P=x&&x.d;x&&(w/=P,g/=k,d/=k,m/=P,v=w+m,y=g+d)}return{top:w,left:g,bottom:v,right:y,width:d,height:m}}}function isScrolledPast(e,n,r){for(var o=getParentAutoScrollElement(e,!0),u=getRect(e)[n];o;){var s=getRect(o)[r],w=void 0;if(r==="top"||r==="left"?w=u>=s:w=u<=s,!w)return o;if(o===getWindowScrollingElement())break;o=getParentAutoScrollElement(o,!1)}return!1}function getChild(e,n,r,o){for(var u=0,s=0,w=e.children;s<w.length;){if(w[s].style.display!=="none"&&w[s]!==Sortable.ghost&&(o||w[s]!==Sortable.dragged)&&closest(w[s],r.draggable,e,!1)){if(u===n)return w[s];u++}s++}return null}function lastChild(e,n){for(var r=e.lastElementChild;r&&(r===Sortable.ghost||css(r,"display")==="none"||n&&!matches(r,n));)r=r.previousElementSibling;return r||null}function index(e,n){var r=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Sortable.clone&&(!n||matches(e,n))&&r++;return r}function getRelativeScrollOffset(e){var n=0,r=0,o=getWindowScrollingElement();if(e)do{var u=matrix(e),s=u.a,w=u.d;n+=e.scrollLeft*s,r+=e.scrollTop*w}while(e!==o&&(e=e.parentNode));return[n,r]}function indexOfObject(e,n){for(var r in e)if(!!e.hasOwnProperty(r)){for(var o in n)if(n.hasOwnProperty(o)&&n[o]===e[r][o])return Number(r)}return-1}function getParentAutoScrollElement(e,n){if(!e||!e.getBoundingClientRect)return getWindowScrollingElement();var r=e,o=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var u=css(r);if(r.clientWidth<r.scrollWidth&&(u.overflowX=="auto"||u.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(u.overflowY=="auto"||u.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return getWindowScrollingElement();if(o||n)return r;o=!0}}while(r=r.parentNode);return getWindowScrollingElement()}function extend(e,n){if(e&&n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e}function isRectEqual(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var _throttleTimeout;function throttle(e,n){return function(){if(!_throttleTimeout){var r=arguments,o=this;r.length===1?e.call(o,r[0]):e.apply(o,r),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},n)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(e,n,r){e.scrollLeft+=n,e.scrollTop+=r}function clone(e){var n=window.Polymer,r=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):r?r(e).clone(!0)[0]:e.cloneNode(!0)}function setRect(e,n){css(e,"position","absolute"),css(e,"top",n.top),css(e,"left",n.left),css(e,"width",n.width),css(e,"height",n.height)}function unsetRect(e){css(e,"position",""),css(e,"top",""),css(e,"left",""),css(e,"width",""),css(e,"height","")}function getChildContainingRectFromElement(e,n,r){var o={};return Array.from(e.children).forEach(function(u){var s,w,g,v;if(!(!closest(u,n.draggable,e,!1)||u.animated||u===r)){var y=getRect(u);o.left=Math.min((s=o.left)!==null&&s!==void 0?s:1/0,y.left),o.top=Math.min((w=o.top)!==null&&w!==void 0?w:1/0,y.top),o.right=Math.max((g=o.right)!==null&&g!==void 0?g:-1/0,y.right),o.bottom=Math.max((v=o.bottom)!==null&&v!==void 0?v:-1/0,y.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(u){if(!(css(u,"display")==="none"||u===Sortable.ghost)){e.push({target:u,rect:getRect(u)});var s=_objectSpread2({},e[e.length-1].rect);if(u.thisAnimationDuration){var w=matrix(u,!0);w&&(s.top-=w.f,s.left-=w.e)}u.fromRect=s}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(indexOfObject(e,{target:o}),1)},animateAll:function(o){var u=this;if(!this.options.animation){clearTimeout(n),typeof o=="function"&&o();return}var s=!1,w=0;e.forEach(function(g){var v=0,y=g.target,m=y.fromRect,d=getRect(y),f=y.prevFromRect,x=y.prevToRect,k=g.rect,P=matrix(y,!0);P&&(d.top-=P.f,d.left-=P.e),y.toRect=d,y.thisAnimationDuration&&isRectEqual(f,d)&&!isRectEqual(m,d)&&(k.top-d.top)/(k.left-d.left)===(m.top-d.top)/(m.left-d.left)&&(v=calculateRealTime(k,f,x,u.options)),isRectEqual(d,m)||(y.prevFromRect=m,y.prevToRect=d,v||(v=u.options.animation),u.animate(y,k,d,v)),v&&(s=!0,w=Math.max(w,v),clearTimeout(y.animationResetTimer),y.animationResetTimer=setTimeout(function(){y.animationTime=0,y.prevFromRect=null,y.fromRect=null,y.prevToRect=null,y.thisAnimationDuration=null},v),y.thisAnimationDuration=v)}),clearTimeout(n),s?n=setTimeout(function(){typeof o=="function"&&o()},w):typeof o=="function"&&o(),e=[]},animate:function(o,u,s,w){if(w){css(o,"transition",""),css(o,"transform","");var g=matrix(this.el),v=g&&g.a,y=g&&g.d,m=(u.left-s.left)/(v||1),d=(u.top-s.top)/(y||1);o.animatingX=!!m,o.animatingY=!!d,css(o,"transform","translate3d("+m+"px,"+d+"px,0)"),this.forRepaintDummy=repaint(o),css(o,"transition","transform "+w+"ms"+(this.options.easing?" "+this.options.easing:"")),css(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){css(o,"transition",""),css(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},w)}}}}function repaint(e){return e.offsetWidth}function calculateRealTime(e,n,r,o){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-r.top,2)+Math.pow(n.left-r.left,2))*o.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function e(n){for(var r in defaults)defaults.hasOwnProperty(r)&&!(r in n)&&(n[r]=defaults[r]);plugins.forEach(function(o){if(o.pluginName===n.pluginName)throw"Sortable: Cannot mount plugin ".concat(n.pluginName," more than once")}),plugins.push(n)},pluginEvent:function e(n,r,o){var u=this;this.eventCanceled=!1,o.cancel=function(){u.eventCanceled=!0};var s=n+"Global";plugins.forEach(function(w){!r[w.pluginName]||(r[w.pluginName][s]&&r[w.pluginName][s](_objectSpread2({sortable:r},o)),r.options[w.pluginName]&&r[w.pluginName][n]&&r[w.pluginName][n](_objectSpread2({sortable:r},o)))})},initializePlugins:function e(n,r,o,u){plugins.forEach(function(g){var v=g.pluginName;if(!(!n.options[v]&&!g.initializeByDefault)){var y=new g(n,r,n.options);y.sortable=n,y.options=n.options,n[v]=y,_extends(o,y.defaults)}});for(var s in n.options)if(!!n.options.hasOwnProperty(s)){var w=this.modifyOption(n,s,n.options[s]);typeof w<"u"&&(n.options[s]=w)}},getEventProperties:function e(n,r){var o={};return plugins.forEach(function(u){typeof u.eventProperties=="function"&&_extends(o,u.eventProperties.call(r[u.pluginName],n))}),o},modifyOption:function e(n,r,o){var u;return plugins.forEach(function(s){!n[s.pluginName]||s.optionListeners&&typeof s.optionListeners[r]=="function"&&(u=s.optionListeners[r].call(n[s.pluginName],o))}),u}};function dispatchEvent(e){var n=e.sortable,r=e.rootEl,o=e.name,u=e.targetEl,s=e.cloneEl,w=e.toEl,g=e.fromEl,v=e.oldIndex,y=e.newIndex,m=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,x=e.putSortable,k=e.extraEventProperties;if(n=n||r&&r[expando],!!n){var P,S=n.options,E="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?P=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(P=document.createEvent("Event"),P.initEvent(o,!0,!0)),P.to=w||r,P.from=g||r,P.item=u||r,P.clone=s,P.oldIndex=v,P.newIndex=y,P.oldDraggableIndex=m,P.newDraggableIndex=d,P.originalEvent=f,P.pullMode=x?x.lastPutMode:void 0;var M=_objectSpread2(_objectSpread2({},k),PluginManager.getEventProperties(o,n));for(var T in M)P[T]=M[T];r&&r.dispatchEvent(P),S[E]&&S[E].call(n,P)}}var _excluded=["evt"],pluginEvent=function e(n,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.evt,s=_objectWithoutProperties(o,_excluded);PluginManager.pluginEvent.bind(Sortable)(n,r,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:u,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(g){_dispatchEvent({sortable:r,name:g,originalEvent:u})}},s))};function _dispatchEvent(e){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},e))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(!!documentExists){if(IE11OrLess)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),_detectDirection=function e(n,r){var o=css(n),u=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),s=getChild(n,0,r),w=getChild(n,1,r),g=s&&css(s),v=w&&css(w),y=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+getRect(s).width,m=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+getRect(w).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&g.float&&g.float!=="none"){var d=g.float==="left"?"left":"right";return w&&(v.clear==="both"||v.clear===d)?"vertical":"horizontal"}return s&&(g.display==="block"||g.display==="flex"||g.display==="table"||g.display==="grid"||y>=u&&o[CSSFloatProperty]==="none"||w&&o[CSSFloatProperty]==="none"&&y+m>u)?"vertical":"horizontal"},_dragElInRowColumn=function e(n,r,o){var u=o?n.left:n.top,s=o?n.right:n.bottom,w=o?n.width:n.height,g=o?r.left:r.top,v=o?r.right:r.bottom,y=o?r.width:r.height;return u===g||s===v||u+w/2===g+y/2},_detectNearestEmptySortable=function e(n,r){var o;return sortables.some(function(u){var s=u[expando].options.emptyInsertThreshold;if(!(!s||lastChild(u))){var w=getRect(u),g=n>=w.left-s&&n<=w.right+s,v=r>=w.top-s&&r<=w.bottom+s;if(g&&v)return o=u}}),o},_prepareGroup=function e(n){function r(s,w){return function(g,v,y,m){var d=g.options.group.name&&v.options.group.name&&g.options.group.name===v.options.group.name;if(s==null&&(w||d))return!0;if(s==null||s===!1)return!1;if(w&&s==="clone")return s;if(typeof s=="function")return r(s(g,v,y,m),w)(g,v,y,m);var f=(w?g:v).options.group.name;return s===!0||typeof s=="string"&&s===f||s.join&&s.indexOf(f)>-1}}var o={},u=n.group;(!u||_typeof(u)!="object")&&(u={name:u}),o.name=u.name,o.checkPull=r(u.pull,!0),o.checkPut=r(u.put),o.revertClone=u.revertClone,n.group=o},_hideGhostForTarget=function e(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function e(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(e){if(ignoreNextClick)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function e(n){if(dragEl){n=n.touches?n.touches[0]:n;var r=_detectNearestEmptySortable(n.clientX,n.clientY);if(r){var o={};for(var u in n)n.hasOwnProperty(u)&&(o[u]=n[u]);o.target=o.rootEl=r,o.preventDefault=void 0,o.stopPropagation=void 0,r[expando]._onDragOver(o)}}},_checkOutsideTargetEl=function e(n){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(n.target)};function Sortable(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=_extends({},n),e[expando]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(w,g){w.setData("Text",g.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,e,r);for(var o in r)!(o in n)&&(n[o]=r[o]);_prepareGroup(n);for(var u in this)u.charAt(0)==="_"&&typeof this[u]=="function"&&(this[u]=this[u].bind(this));this.nativeDraggable=n.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?on(e,"pointerdown",this._onTapStart):(on(e,"mousedown",this._onTapStart),on(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(e,"dragover",this),on(e,"dragenter",this)),sortables.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function e(n){!this.el.contains(n)&&n!==this.el&&(lastTarget=null)},_getDirection:function e(n,r){return typeof this.options.direction=="function"?this.options.direction.call(this,n,r,dragEl):this.options.direction},_onTapStart:function e(n){if(!!n.cancelable){var r=this,o=this.el,u=this.options,s=u.preventOnFilter,w=n.type,g=n.touches&&n.touches[0]||n.pointerType&&n.pointerType==="touch"&&n,v=(g||n).target,y=n.target.shadowRoot&&(n.path&&n.path[0]||n.composedPath&&n.composedPath()[0])||v,m=u.filter;if(_saveInputCheckedState(o),!dragEl&&!(/mousedown|pointerdown/.test(w)&&n.button!==0||u.disabled)&&!y.isContentEditable&&!(!this.nativeDraggable&&Safari&&v&&v.tagName.toUpperCase()==="SELECT")&&(v=closest(v,u.draggable,o,!1),!(v&&v.animated)&&lastDownEl!==v)){if(oldIndex=index(v),oldDraggableIndex=index(v,u.draggable),typeof m=="function"){if(m.call(this,n,v,this)){_dispatchEvent({sortable:r,rootEl:y,name:"filter",targetEl:v,toEl:o,fromEl:o}),pluginEvent("filter",r,{evt:n}),s&&n.cancelable&&n.preventDefault();return}}else if(m&&(m=m.split(",").some(function(d){if(d=closest(y,d.trim(),o,!1),d)return _dispatchEvent({sortable:r,rootEl:d,name:"filter",targetEl:v,fromEl:o,toEl:o}),pluginEvent("filter",r,{evt:n}),!0}),m)){s&&n.cancelable&&n.preventDefault();return}u.handle&&!closest(y,u.handle,o,!1)||this._prepareDragStart(n,g,v)}}},_prepareDragStart:function e(n,r,o){var u=this,s=u.el,w=u.options,g=s.ownerDocument,v;if(o&&!dragEl&&o.parentNode===s){var y=getRect(o);if(rootEl=s,dragEl=o,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=o,activeGroup=w.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(r||n).clientX,clientY:(r||n).clientY},tapDistanceLeft=tapEvt.clientX-y.left,tapDistanceTop=tapEvt.clientY-y.top,this._lastX=(r||n).clientX,this._lastY=(r||n).clientY,dragEl.style["will-change"]="all",v=function(){if(pluginEvent("delayEnded",u,{evt:n}),Sortable.eventCanceled){u._onDrop();return}u._disableDelayedDragEvents(),!FireFox&&u.nativeDraggable&&(dragEl.draggable=!0),u._triggerDragStart(n,r),_dispatchEvent({sortable:u,name:"choose",originalEvent:n}),toggleClass(dragEl,w.chosenClass,!0)},w.ignore.split(",").forEach(function(m){find(dragEl,m.trim(),_disableDraggable)}),on(g,"dragover",nearestEmptyInsertDetectEvent),on(g,"mousemove",nearestEmptyInsertDetectEvent),on(g,"touchmove",nearestEmptyInsertDetectEvent),on(g,"mouseup",u._onDrop),on(g,"touchend",u._onDrop),on(g,"touchcancel",u._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:n}),w.delay&&(!w.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(g,"mouseup",u._disableDelayedDrag),on(g,"touchend",u._disableDelayedDrag),on(g,"touchcancel",u._disableDelayedDrag),on(g,"mousemove",u._delayedDragTouchMoveHandler),on(g,"touchmove",u._delayedDragTouchMoveHandler),w.supportPointer&&on(g,"pointermove",u._delayedDragTouchMoveHandler),u._dragStartTimer=setTimeout(v,w.delay)}else v()}},_delayedDragTouchMoveHandler:function e(n){var r=n.touches?n.touches[0]:n;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function e(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function e(){var n=this.el.ownerDocument;off(n,"mouseup",this._disableDelayedDrag),off(n,"touchend",this._disableDelayedDrag),off(n,"touchcancel",this._disableDelayedDrag),off(n,"mousemove",this._delayedDragTouchMoveHandler),off(n,"touchmove",this._delayedDragTouchMoveHandler),off(n,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function e(n,r){r=r||n.pointerType=="touch"&&n,!this.nativeDraggable||r?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):r?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function e(n,r){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:r}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var o=this.options;!n&&toggleClass(dragEl,o.dragClass,!1),toggleClass(dragEl,o.ghostClass,!0),Sortable.active=this,n&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function e(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var n=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),r=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),n!==r);)r=n;if(dragEl.parentNode[expando]._isOutsideThisEl(n),r)do{if(r[expando]){var o=void 0;if(o=r[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:n,rootEl:r}),o&&!this.options.dragoverBubble)break}n=r}while(r=r.parentNode);_unhideGhostForTarget()}},_onTouchMove:function e(n){if(tapEvt){var r=this.options,o=r.fallbackTolerance,u=r.fallbackOffset,s=n.touches?n.touches[0]:n,w=ghostEl&&matrix(ghostEl,!0),g=ghostEl&&w&&w.a,v=ghostEl&&w&&w.d,y=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),m=(s.clientX-tapEvt.clientX+u.x)/(g||1)+(y?y[0]-ghostRelativeParentInitialScroll[0]:0)/(g||1),d=(s.clientY-tapEvt.clientY+u.y)/(v||1)+(y?y[1]-ghostRelativeParentInitialScroll[1]:0)/(v||1);if(!Sortable.active&&!awaitingDragStarted){if(o&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<o)return;this._onDragStart(n,!0)}if(ghostEl){w?(w.e+=m-(lastDx||0),w.f+=d-(lastDy||0)):w={a:1,b:0,c:0,d:1,e:m,f:d};var f="matrix(".concat(w.a,",").concat(w.b,",").concat(w.c,",").concat(w.d,",").concat(w.e,",").concat(w.f,")");css(ghostEl,"webkitTransform",f),css(ghostEl,"mozTransform",f),css(ghostEl,"msTransform",f),css(ghostEl,"transform",f),lastDx=m,lastDy=d,touchEvt=s}n.cancelable&&n.preventDefault()}},_appendGhost:function e(){if(!ghostEl){var n=this.options.fallbackOnBody?document.body:rootEl,r=getRect(dragEl,!0,PositionGhostAbsolutely,!0,n),o=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=n;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),r.top+=ghostRelativeParent.scrollTop,r.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,o.ghostClass,!1),toggleClass(ghostEl,o.fallbackClass,!0),toggleClass(ghostEl,o.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",r.top),css(ghostEl,"left",r.left),css(ghostEl,"width",r.width),css(ghostEl,"height",r.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,n.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function e(n,r){var o=this,u=n.dataTransfer,s=o.options;if(pluginEvent("dragStart",this,{evt:n}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),o.cloneId=_nextTick(function(){pluginEvent("clone",o),!Sortable.eventCanceled&&(o.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),o._hideClone(),_dispatchEvent({sortable:o,name:"clone"}))}),!r&&toggleClass(dragEl,s.dragClass,!0),r?(ignoreNextClick=!0,o._loopId=setInterval(o._emulateDragOver,50)):(off(document,"mouseup",o._onDrop),off(document,"touchend",o._onDrop),off(document,"touchcancel",o._onDrop),u&&(u.effectAllowed="move",s.setData&&s.setData.call(o,u,dragEl)),on(document,"drop",o),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,o._dragStartId=_nextTick(o._dragStarted.bind(o,r,n)),on(document,"selectstart",o),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function e(n){var r=this.el,o=n.target,u,s,w,g=this.options,v=g.group,y=Sortable.active,m=activeGroup===v,d=g.sort,f=putSortable||y,x,k=this,P=!1;if(_silent)return;function S(Z,W){pluginEvent(Z,k,_objectSpread2({evt:n,isOwner:m,axis:x?"vertical":"horizontal",revert:w,dragRect:u,targetRect:s,canSort:d,fromSortable:f,target:o,completed:M,onMove:function(le,oe){return _onMove(rootEl,r,dragEl,u,le,getRect(le),n,oe)},changed:T},W))}function E(){S("dragOverAnimationCapture"),k.captureAnimationState(),k!==f&&f.captureAnimationState()}function M(Z){return S("dragOverCompleted",{insertion:Z}),Z&&(m?y._hideClone():y._showClone(k),k!==f&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:y.options.ghostClass,!1),toggleClass(dragEl,g.ghostClass,!0)),putSortable!==k&&k!==Sortable.active?putSortable=k:k===Sortable.active&&putSortable&&(putSortable=null),f===k&&(k._ignoreWhileAnimating=o),k.animateAll(function(){S("dragOverAnimationComplete"),k._ignoreWhileAnimating=null}),k!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(o===dragEl&&!dragEl.animated||o===r&&!o.animated)&&(lastTarget=null),!g.dragoverBubble&&!n.rootEl&&o!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(n.target),!Z&&nearestEmptyInsertDetectEvent(n)),!g.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),P=!0}function T(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,g.draggable),_dispatchEvent({sortable:k,name:"change",toEl:r,newIndex,newDraggableIndex,originalEvent:n})}if(n.preventDefault!==void 0&&n.cancelable&&n.preventDefault(),o=closest(o,g.draggable,r,!0),S("dragOver"),Sortable.eventCanceled)return P;if(dragEl.contains(n.target)||o.animated&&o.animatingX&&o.animatingY||k._ignoreWhileAnimating===o)return M(!1);if(ignoreNextClick=!1,y&&!g.disabled&&(m?d||(w=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,y,dragEl,n))&&v.checkPut(this,y,dragEl,n))){if(x=this._getDirection(n,o)==="vertical",u=getRect(dragEl),S("dragOverValid"),Sortable.eventCanceled)return P;if(w)return parentEl=rootEl,E(),this._hideClone(),S("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),M(!0);var D=lastChild(r,g.draggable);if(!D||_ghostIsLast(n,x,this)&&!D.animated){if(D===dragEl)return M(!1);if(D&&r===n.target&&(o=D),o&&(s=getRect(o)),_onMove(rootEl,r,dragEl,u,o,s,n,!!o)!==!1)return E(),D&&D.nextSibling?r.insertBefore(dragEl,D.nextSibling):r.appendChild(dragEl),parentEl=r,T(),M(!0)}else if(D&&_ghostIsFirst(n,x,this)){var I=getChild(r,0,g,!0);if(I===dragEl)return M(!1);if(o=I,s=getRect(o),_onMove(rootEl,r,dragEl,u,o,s,n,!1)!==!1)return E(),r.insertBefore(dragEl,I),parentEl=r,T(),M(!0)}else if(o.parentNode===r){s=getRect(o);var N=0,O,F=dragEl.parentNode!==r,U=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||u,o.animated&&o.toRect||s,x),Y=x?"top":"left",Q=isScrolledPast(o,"top","top")||isScrolledPast(dragEl,"top","top"),q=Q?Q.scrollTop:void 0;lastTarget!==o&&(O=s[Y],pastFirstInvertThresh=!1,isCircumstantialInvert=!U&&g.invertSwap||F),N=_getSwapDirection(n,o,s,x,U?1:g.swapThreshold,g.invertedSwapThreshold==null?g.swapThreshold:g.invertedSwapThreshold,isCircumstantialInvert,lastTarget===o);var ne;if(N!==0){var J=index(dragEl);do J-=N,ne=parentEl.children[J];while(ne&&(css(ne,"display")==="none"||ne===ghostEl))}if(N===0||ne===o)return M(!1);lastTarget=o,lastDirection=N;var re=o.nextElementSibling,X=!1;X=N===1;var j=_onMove(rootEl,r,dragEl,u,o,s,n,X);if(j!==!1)return(j===1||j===-1)&&(X=j===1),_silent=!0,setTimeout(_unsilent,30),E(),X&&!re?r.appendChild(dragEl):o.parentNode.insertBefore(dragEl,X?re:o),Q&&scrollBy(Q,0,q-Q.scrollTop),parentEl=dragEl.parentNode,O!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(O-getRect(o)[Y])),T(),M(!0)}if(r.contains(dragEl))return M(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function e(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function e(){var n=this.el.ownerDocument;off(n,"mouseup",this._onDrop),off(n,"touchend",this._onDrop),off(n,"pointerup",this._onDrop),off(n,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function e(n){var r=this.el,o=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),pluginEvent("drop",this,{evt:n}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,o.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),n&&(moved&&(n.cancelable&&n.preventDefault(),!o.dropBubble&&n.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:n}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:n}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:n}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:n}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:n})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:n}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:n})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:n}),this.save()))),this._nulling()},_nulling:function e(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(n){n.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function e(n){switch(n.type){case"drop":case"dragend":this._onDrop(n);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(n),_globalDragOver(n));break;case"selectstart":n.preventDefault();break}},toArray:function e(){for(var n=[],r,o=this.el.children,u=0,s=o.length,w=this.options;u<s;u++)r=o[u],closest(r,w.draggable,this.el,!1)&&n.push(r.getAttribute(w.dataIdAttr)||_generateId(r));return n},sort:function e(n,r){var o={},u=this.el;this.toArray().forEach(function(s,w){var g=u.children[w];closest(g,this.options.draggable,u,!1)&&(o[s]=g)},this),r&&this.captureAnimationState(),n.forEach(function(s){o[s]&&(u.removeChild(o[s]),u.appendChild(o[s]))}),r&&this.animateAll()},save:function e(){var n=this.options.store;n&&n.set&&n.set(this)},closest:function e(n,r){return closest(n,r||this.options.draggable,this.el,!1)},option:function e(n,r){var o=this.options;if(r===void 0)return o[n];var u=PluginManager.modifyOption(this,n,r);typeof u<"u"?o[n]=u:o[n]=r,n==="group"&&_prepareGroup(o)},destroy:function e(){pluginEvent("destroy",this);var n=this.el;n[expando]=null,off(n,"mousedown",this._onTapStart),off(n,"touchstart",this._onTapStart),off(n,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(n,"dragover",this),off(n,"dragenter",this)),Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=n=null},_hideClone:function e(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function e(n){if(n.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function _onMove(e,n,r,o,u,s,w,g){var v,y=e[expando],m=y.options.onMove,d;return window.CustomEvent&&!IE11OrLess&&!Edge?v=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent("move",!0,!0)),v.to=n,v.from=e,v.dragged=r,v.draggedRect=o,v.related=u||n,v.relatedRect=s||getRect(n),v.willInsertAfter=g,v.originalEvent=w,e.dispatchEvent(v),m&&(d=m.call(y,v,w)),d}function _disableDraggable(e){e.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(e,n,r){var o=getRect(getChild(r.el,0,r.options,!0)),u=getChildContainingRectFromElement(r.el,r.options,ghostEl),s=10;return n?e.clientX<u.left-s||e.clientY<o.top&&e.clientX<o.right:e.clientY<u.top-s||e.clientY<o.bottom&&e.clientX<o.left}function _ghostIsLast(e,n,r){var o=getRect(lastChild(r.el,r.options.draggable)),u=getChildContainingRectFromElement(r.el,r.options,ghostEl),s=10;return n?e.clientX>u.right+s||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>u.bottom+s||e.clientX>o.right&&e.clientY>o.top}function _getSwapDirection(e,n,r,o,u,s,w,g){var v=o?e.clientY:e.clientX,y=o?r.height:r.width,m=o?r.top:r.left,d=o?r.bottom:r.right,f=!1;if(!w){if(g&&targetMoveDistance<y*u){if(!pastFirstInvertThresh&&(lastDirection===1?v>m+y*s/2:v<d-y*s/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)f=!0;else if(lastDirection===1?v<m+targetMoveDistance:v>d-targetMoveDistance)return-lastDirection}else if(v>m+y*(1-u)/2&&v<d-y*(1-u)/2)return _getInsertDirection(n)}return f=f||w,f&&(v<m+y*s/2||v>d-y*s/2)?v>m+y/2?1:-1:0}function _getInsertDirection(e){return index(dragEl)<index(e)?1:-1}function _generateId(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,r=n.length,o=0;r--;)o+=n.charCodeAt(r);return o.toString(36)}function _saveInputCheckedState(e){savedInputChecked.length=0;for(var n=e.getElementsByTagName("input"),r=n.length;r--;){var o=n[r];o.checked&&savedInputChecked.push(o)}}function _nextTick(e){return setTimeout(e,0)}function _cancelNextTick(e){return clearTimeout(e)}documentExists&&on(document,"touchmove",function(e){(Sortable.active||awaitingDragStarted)&&e.cancelable&&e.preventDefault()});Sortable.utils={on,off,css,find,is:function e(n,r){return!!closest(n,r,n,!1)},extend,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild};Sortable.get=function(e){return e[expando]};Sortable.mount=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n[0].constructor===Array&&(n=n[0]),n.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),o.utils)),PluginManager.mount(o)})};Sortable.create=function(e,n){return new Sortable(e,n)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(r){var o=r.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):o.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var o=r.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,o){var u=this,s=(r.touches?r.touches[0]:r).clientX,w=(r.touches?r.touches[0]:r).clientY,g=document.elementFromPoint(s,w);if(touchEvt$1=r,o||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(r,this.options,g,o);var v=getParentAutoScrollElement(g,!0);scrolling&&(!pointerElemChangedInterval||s!==lastAutoScrollX||w!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var y=getParentAutoScrollElement(document.elementFromPoint(s,w),!0);y!==v&&(v=y,clearAutoScrolls()),autoScroll(r,u.options,y,o)},10),lastAutoScrollX=s,lastAutoScrollY=w)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(g,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(r,this.options,getParentAutoScrollElement(g,!1),!1)}}},_extends(e,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(e){clearInterval(e.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(e,n,r,o){if(!!n.scroll){var u=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,w=n.scrollSensitivity,g=n.scrollSpeed,v=getWindowScrollingElement(),y=!1,m;scrollRootEl!==r&&(scrollRootEl=r,clearAutoScrolls(),scrollEl=n.scroll,m=n.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(r,!0)));var d=0,f=scrollEl;do{var x=f,k=getRect(x),P=k.top,S=k.bottom,E=k.left,M=k.right,T=k.width,D=k.height,I=void 0,N=void 0,O=x.scrollWidth,F=x.scrollHeight,U=css(x),Y=x.scrollLeft,Q=x.scrollTop;x===v?(I=T<O&&(U.overflowX==="auto"||U.overflowX==="scroll"||U.overflowX==="visible"),N=D<F&&(U.overflowY==="auto"||U.overflowY==="scroll"||U.overflowY==="visible")):(I=T<O&&(U.overflowX==="auto"||U.overflowX==="scroll"),N=D<F&&(U.overflowY==="auto"||U.overflowY==="scroll"));var q=I&&(Math.abs(M-u)<=w&&Y+T<O)-(Math.abs(E-u)<=w&&!!Y),ne=N&&(Math.abs(S-s)<=w&&Q+D<F)-(Math.abs(P-s)<=w&&!!Q);if(!autoScrolls[d])for(var J=0;J<=d;J++)autoScrolls[J]||(autoScrolls[J]={});(autoScrolls[d].vx!=q||autoScrolls[d].vy!=ne||autoScrolls[d].el!==x)&&(autoScrolls[d].el=x,autoScrolls[d].vx=q,autoScrolls[d].vy=ne,clearInterval(autoScrolls[d].pid),(q!=0||ne!=0)&&(y=!0,autoScrolls[d].pid=setInterval(function(){o&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var re=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*g:0,X=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*g:0;typeof m=="function"&&m.call(Sortable.dragged.parentNode[expando],X,re,e,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,X,re)}.bind({layer:d}),24))),d++}while(n.bubbleScroll&&f!==v&&(f=getParentAutoScrollElement(f,!1)));scrolling=y}},30),drop=function e(n){var r=n.originalEvent,o=n.putSortable,u=n.dragEl,s=n.activeSortable,w=n.dispatchSortableEvent,g=n.hideGhostForTarget,v=n.unhideGhostForTarget;if(!!r){var y=o||s;g();var m=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,d=document.elementFromPoint(m.clientX,m.clientY);v(),y&&!y.el.contains(d)&&(w("spill"),this.onSpill({dragEl:u,putSortable:o}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function e(n){var r=n.oldDraggableIndex;this.startIndex=r},onSpill:function e(n){var r=n.dragEl,o=n.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var u=getChild(this.sortable.el,this.startIndex,this.options);u?this.sortable.el.insertBefore(r,u):this.sortable.el.appendChild(r),this.sortable.animateAll(),o&&o.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function e(n){var r=n.dragEl,o=n.putSortable,u=o||this.sortable;u.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),u.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});var multiDragElements=[],multiDragClones=[],lastMultiDragSelect,multiDragSortable,initialFolding=!1,folding=!1,dragStarted=!1,dragEl$1,clonesFromRect,clonesHidden;function MultiDragPlugin(){function e(n){for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));n.options.avoidImplicitDeselect||(n.options.supportPointer?on(document,"pointerup",this._deselectMultiDrag):(on(document,"mouseup",this._deselectMultiDrag),on(document,"touchend",this._deselectMultiDrag))),on(document,"keydown",this._checkKeyDown),on(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(u,s){var w="";multiDragElements.length&&multiDragSortable===n?multiDragElements.forEach(function(g,v){w+=(v?", ":"")+g.textContent}):w=s.textContent,u.setData("Text",w)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(r){var o=r.dragEl;dragEl$1=o},delayEnded:function(){this.isMultiDrag=~multiDragElements.indexOf(dragEl$1)},setupClone:function(r){var o=r.sortable,u=r.cancel;if(!!this.isMultiDrag){for(var s=0;s<multiDragElements.length;s++)multiDragClones.push(clone(multiDragElements[s])),multiDragClones[s].sortableIndex=multiDragElements[s].sortableIndex,multiDragClones[s].draggable=!1,multiDragClones[s].style["will-change"]="",toggleClass(multiDragClones[s],this.options.selectedClass,!1),multiDragElements[s]===dragEl$1&&toggleClass(multiDragClones[s],this.options.chosenClass,!1);o._hideClone(),u()}},clone:function(r){var o=r.sortable,u=r.rootEl,s=r.dispatchSortableEvent,w=r.cancel;!this.isMultiDrag||this.options.removeCloneOnHide||multiDragElements.length&&multiDragSortable===o&&(insertMultiDragClones(!0,u),s("clone"),w())},showClone:function(r){var o=r.cloneNowShown,u=r.rootEl,s=r.cancel;!this.isMultiDrag||(insertMultiDragClones(!1,u),multiDragClones.forEach(function(w){css(w,"display","")}),o(),clonesHidden=!1,s())},hideClone:function(r){var o=this;r.sortable;var u=r.cloneNowHidden,s=r.cancel;!this.isMultiDrag||(multiDragClones.forEach(function(w){css(w,"display","none"),o.options.removeCloneOnHide&&w.parentNode&&w.parentNode.removeChild(w)}),u(),clonesHidden=!0,s())},dragStartGlobal:function(r){r.sortable,!this.isMultiDrag&&multiDragSortable&&multiDragSortable.multiDrag._deselectMultiDrag(),multiDragElements.forEach(function(o){o.sortableIndex=index(o)}),multiDragElements=multiDragElements.sort(function(o,u){return o.sortableIndex-u.sortableIndex}),dragStarted=!0},dragStarted:function(r){var o=this,u=r.sortable;if(!!this.isMultiDrag){if(this.options.sort&&(u.captureAnimationState(),this.options.animation)){multiDragElements.forEach(function(w){w!==dragEl$1&&css(w,"position","absolute")});var s=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(w){w!==dragEl$1&&setRect(w,s)}),folding=!0,initialFolding=!0}u.animateAll(function(){folding=!1,initialFolding=!1,o.options.animation&&multiDragElements.forEach(function(w){unsetRect(w)}),o.options.sort&&removeMultiDragElements()})}},dragOver:function(r){var o=r.target,u=r.completed,s=r.cancel;folding&&~multiDragElements.indexOf(o)&&(u(!1),s())},revert:function(r){var o=r.fromSortable,u=r.rootEl,s=r.sortable,w=r.dragRect;multiDragElements.length>1&&(multiDragElements.forEach(function(g){s.addAnimationState({target:g,rect:folding?getRect(g):w}),unsetRect(g),g.fromRect=w,o.removeAnimationState(g)}),folding=!1,insertMultiDragElements(!this.options.removeCloneOnHide,u))},dragOverCompleted:function(r){var o=r.sortable,u=r.isOwner,s=r.insertion,w=r.activeSortable,g=r.parentEl,v=r.putSortable,y=this.options;if(s){if(u&&w._hideClone(),initialFolding=!1,y.animation&&multiDragElements.length>1&&(folding||!u&&!w.options.sort&&!v)){var m=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(f){f!==dragEl$1&&(setRect(f,m),g.appendChild(f))}),folding=!0}if(!u)if(folding||removeMultiDragElements(),multiDragElements.length>1){var d=clonesHidden;w._showClone(o),w.options.animation&&!clonesHidden&&d&&multiDragClones.forEach(function(f){w.addAnimationState({target:f,rect:clonesFromRect}),f.fromRect=clonesFromRect,f.thisAnimationDuration=null})}else w._showClone(o)}},dragOverAnimationCapture:function(r){var o=r.dragRect,u=r.isOwner,s=r.activeSortable;if(multiDragElements.forEach(function(g){g.thisAnimationDuration=null}),s.options.animation&&!u&&s.multiDrag.isMultiDrag){clonesFromRect=_extends({},o);var w=matrix(dragEl$1,!0);clonesFromRect.top-=w.f,clonesFromRect.left-=w.e}},dragOverAnimationComplete:function(){folding&&(folding=!1,removeMultiDragElements())},drop:function(r){var o=r.originalEvent,u=r.rootEl,s=r.parentEl,w=r.sortable,g=r.dispatchSortableEvent,v=r.oldIndex,y=r.putSortable,m=y||this.sortable;if(!!o){var d=this.options,f=s.children;if(!dragStarted)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),toggleClass(dragEl$1,d.selectedClass,!~multiDragElements.indexOf(dragEl$1)),~multiDragElements.indexOf(dragEl$1))multiDragElements.splice(multiDragElements.indexOf(dragEl$1),1),lastMultiDragSelect=null,dispatchEvent({sortable:w,rootEl:u,name:"deselect",targetEl:dragEl$1,originalEvent:o});else{if(multiDragElements.push(dragEl$1),dispatchEvent({sortable:w,rootEl:u,name:"select",targetEl:dragEl$1,originalEvent:o}),o.shiftKey&&lastMultiDragSelect&&w.el.contains(lastMultiDragSelect)){var x=index(lastMultiDragSelect),k=index(dragEl$1);if(~x&&~k&&x!==k){var P,S;for(k>x?(S=x,P=k):(S=k,P=x+1);S<P;S++)~multiDragElements.indexOf(f[S])||(toggleClass(f[S],d.selectedClass,!0),multiDragElements.push(f[S]),dispatchEvent({sortable:w,rootEl:u,name:"select",targetEl:f[S],originalEvent:o}))}}else lastMultiDragSelect=dragEl$1;multiDragSortable=m}if(dragStarted&&this.isMultiDrag){if(folding=!1,(s[expando].options.sort||s!==u)&&multiDragElements.length>1){var E=getRect(dragEl$1),M=index(dragEl$1,":not(."+this.options.selectedClass+")");if(!initialFolding&&d.animation&&(dragEl$1.thisAnimationDuration=null),m.captureAnimationState(),!initialFolding&&(d.animation&&(dragEl$1.fromRect=E,multiDragElements.forEach(function(D){if(D.thisAnimationDuration=null,D!==dragEl$1){var I=folding?getRect(D):E;D.fromRect=I,m.addAnimationState({target:D,rect:I})}})),removeMultiDragElements(),multiDragElements.forEach(function(D){f[M]?s.insertBefore(D,f[M]):s.appendChild(D),M++}),v===index(dragEl$1))){var T=!1;multiDragElements.forEach(function(D){if(D.sortableIndex!==index(D)){T=!0;return}}),T&&(g("update"),g("sort"))}multiDragElements.forEach(function(D){unsetRect(D)}),m.animateAll()}multiDragSortable=m}(u===s||y&&y.lastPutMode!=="clone")&&multiDragClones.forEach(function(D){D.parentNode&&D.parentNode.removeChild(D)})}},nullingGlobal:function(){this.isMultiDrag=dragStarted=!1,multiDragClones.length=0},destroyGlobal:function(){this._deselectMultiDrag(),off(document,"pointerup",this._deselectMultiDrag),off(document,"mouseup",this._deselectMultiDrag),off(document,"touchend",this._deselectMultiDrag),off(document,"keydown",this._checkKeyDown),off(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(r){if(!(typeof dragStarted<"u"&&dragStarted)&&multiDragSortable===this.sortable&&!(r&&closest(r.target,this.options.draggable,this.sortable.el,!1))&&!(r&&r.button!==0))for(;multiDragElements.length;){var o=multiDragElements[0];toggleClass(o,this.options.selectedClass,!1),multiDragElements.shift(),dispatchEvent({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:o,originalEvent:r})}},_checkKeyDown:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(r){r.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},_extends(e,{pluginName:"multiDrag",utils:{select:function(r){var o=r.parentNode[expando];!o||!o.options.multiDrag||~multiDragElements.indexOf(r)||(multiDragSortable&&multiDragSortable!==o&&(multiDragSortable.multiDrag._deselectMultiDrag(),multiDragSortable=o),toggleClass(r,o.options.selectedClass,!0),multiDragElements.push(r))},deselect:function(r){var o=r.parentNode[expando],u=multiDragElements.indexOf(r);!o||!o.options.multiDrag||!~u||(toggleClass(r,o.options.selectedClass,!1),multiDragElements.splice(u,1))}},eventProperties:function(){var r=this,o=[],u=[];return multiDragElements.forEach(function(s){o.push({multiDragElement:s,index:s.sortableIndex});var w;folding&&s!==dragEl$1?w=-1:folding?w=index(s,":not(."+r.options.selectedClass+")"):w=index(s),u.push({multiDragElement:s,index:w})}),{items:_toConsumableArray(multiDragElements),clones:[].concat(multiDragClones),oldIndicies:o,newIndicies:u}},optionListeners:{multiDragKey:function(r){return r=r.toLowerCase(),r==="ctrl"?r="Control":r.length>1&&(r=r.charAt(0).toUpperCase()+r.substr(1)),r}}})}function insertMultiDragElements(e,n){multiDragElements.forEach(function(r,o){var u=n.children[r.sortableIndex+(e?Number(o):0)];u?n.insertBefore(r,u):n.appendChild(r)})}function insertMultiDragClones(e,n){multiDragClones.forEach(function(r,o){var u=n.children[r.sortableIndex+(e?Number(o):0)];u?n.insertBefore(r,u):n.appendChild(r)})}function removeMultiDragElements(){multiDragElements.forEach(function(e){e!==dragEl$1&&e.parentNode&&e.parentNode.removeChild(e)})}Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);const index_vue_vue_type_style_index_0_lang="",_hoisted_1={class:"loading"},_hoisted_2={class:"error-dialog"},_hoisted_3={class:"close-btn"},_hoisted_4={class:"fail-logo"},_hoisted_5={class:"text"},_hoisted_6={class:"mask active"},_hoisted_7=createBaseVNode("div",{id:"printContainer"},null,-1),_sfc_main={__name:"index",setup(e){Sortable.mount(new MultiDragPlugin);const n=useViewerStore(),r=computed(()=>n.getThemeMode),o=computed(()=>n.getDownloading),u=computed(()=>n.getDownloadError),s=computed(()=>n.isElementOpen("signCreatePanel")),w=computed(()=>n.isElementOpen("digitalSignCreatePanel")),g=computed(()=>n.getPopoverChanged),v=computed(()=>n.getToolMode),y=computed(()=>n.getScale),m=computed(()=>n.isElementOpen("createCustomStampDialog")),d=getCurrentInstance().appContext.app.config.globalProperties;provide("themeMode",r),initDocument({$t:d.$t});const f=!getHashParameters("header",!0),x=getHashParameters("css",null);if(x){const Q=document.createElement("link");Q.rel="stylesheet",Q.type="text/css",Q.href=x,document.getElementsByTagName("head")[0].appendChild(Q)}f&&n.setDisabledElements("header");const k=computed(()=>n.getDisabledElements("header"));window.instance.changeFile=()=>{document.getElementById("fileInput").click(),(s.value||w.value)&&(n.closeElement("signCreatePanel"),n.closeElement("digitalSignCreatePanel"),n.setActiveToolMode("view")),g.value||n.setPopoverChanged(!0),v.value==="document"&&core.saveDocumentEdit("cancel")};const P=()=>{n.setDownloadError("")},S=ref(),E=ref(1);let M=0,T=1,D=1,I=0,N=!1;const O=Q=>{Q.touches.length===2&&(M=Y(Q.touches),T=E.value,D=y.value,I=D,N=!0)},F=Q=>{if(N&&Q.touches.length===2){S.value.style.transform=`scale(${E.value})`;const q=Y(Q.touches);E.value=T*(q/M),I=Math.round(D*E.value),n.setCurrentScale(I/100)}},U=Q=>{N&&Q.touches.length<2&&(S.value.style.transform="",core.scaleChanged(I/100),E.value=1,N=!1)},Y=Q=>{const q=Q[0].clientX-Q[1].clientX,ne=Q[0].clientY-Q[1].clientY;return Math.sqrt(q*q+ne*ne)};return window.parent.postMessage({type:"documentViewerLoaded",docId:parseInt(getHashParameters("docId"),10)},"*"),(Q,q)=>{const ne=_sfc_main$1,J=_sfc_main$13,re=_sfc_main$1C,X=_sfc_main$2Z,j=_sfc_main$35,Z=_sfc_main$3o,W=_sfc_main$3v,te=_sfc_main$3D,le=_sfc_main$3E,oe=_sfc_main$3G,Ee=__unplugin_components_10$6,Ae=_sfc_main$3T,ve=_sfc_main$43,ke=__unplugin_components_13$1,Ce=__unplugin_components_14$3,Pe=_sfc_main$4l,Me=__unplugin_components_16$1,Le=_sfc_main$47,Te=_sfc_main$4i,ye=__unplugin_components_19$1;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{id:"outerContainer",class:normalizeClass(["app",{dark:r.value==="Dark"}])},[withDirectives(createBaseVNode("div",null,[createVNode(ne)],512),[[vShow,!k.value]]),createBaseVNode("div",{class:"content",ref_key:"contentRef",ref:S,onTouchstart:O,onTouchmove:F,onTouchend:U},[createVNode(J,{isHeaderDisabled:k.value},null,8,["isHeaderDisabled"]),createVNode(re,{isHeaderDisabled:k.value},null,8,["isHeaderDisabled"]),createVNode(X),v.value==="document"?(openBlock(),createBlock(j,{key:0,Sortable:unref(Sortable)},null,8,["Sortable"])):createCommentVNode("",!0),createVNode(Z,{isHeaderDisabled:k.value},null,8,["isHeaderDisabled"]),createVNode(W,{isHeaderDisabled:k.value},null,8,["isHeaderDisabled"]),createVNode(te,{isHeaderDisabled:k.value},null,8,["isHeaderDisabled"]),createVNode(le,{isHeaderDisabled:k.value},null,8,["isHeaderDisabled"]),createVNode(oe,{isHeaderDisabled:k.value},null,8,["isHeaderDisabled"]),createVNode(Ee,{isHeaderDisabled:k.value},null,8,["isHeaderDisabled"]),createVNode(Ae,{isHeaderDisabled:k.value},null,8,["isHeaderDisabled"]),createVNode(ve,{isHeaderDisabled:k.value},null,8,["isHeaderDisabled"])],544),createBaseVNode("div",{class:normalizeClass(["mask",{active:o.value||u.value!==""}])},[withDirectives(createBaseVNode("div",_hoisted_1,[createVNode(ke)],512),[[vShow,o.value]]),withDirectives(createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createVNode(Pe,{onClick:P},{default:withCtx(()=>[createVNode(Ce)]),_:1})]),createBaseVNode("div",_hoisted_4,[createVNode(Me)]),createBaseVNode("div",_hoisted_5,toDisplayString$1(u.value)+" failed",1),createBaseVNode("div",{class:"confirm-btn",onClick:P},"OK")],512),[[vShow,u.value!==""]])],2),withDirectives(createBaseVNode("div",_hoisted_6,[createVNode(Le)],512),[[vShow,s.value]]),m.value?(openBlock(),createBlock(Te,{key:0})):createCommentVNode("",!0)],2),_hoisted_7,createVNode(ye)],64)}}},store=createPinia();function setupStore(e){e.use(store)}const main="";function createEncapsulatedStore(e){return{dispatch(r){if(typeof e.dispatch=="function")return e.dispatch(r);throw new Error("Original store does not have a dispatch method.")},getState(r){if(typeof e.getState=="function")return JSON.parse(JSON.stringify(e.getState(r)));throw new Error("Original store does not have a getState method.")}}}const disableElements=e=>n=>{var o;const r=[...e.getActiveHeaderItems,...e.getTools,...e.getActiveRightHeaderItems,...e.getToolItems.annotation,...e.getToolItems.form,...e.getToolItems.security,...e.getToolItems.editor,...e.getToolItems.measurement,...e.getPopupItems("textPopup"),...e.getPopupItems("cropPagePopup")];if(Array.isArray(n))for(let u=0;u<r.length;u++)n.forEach(s=>{e.getDisabledElementsObj[s]?e.setDisabledElements(s):r[u].dataElement===s&&(r[u].hidden=!0)});else if(typeof n=="string"){if(e.getDisabledElementsObj[n]){e.setDisabledElements(n);return}const u=r.find(s=>s.dataElement===n);u?(u.hidden=!0,e.toolMode===u.element&&e.setActiveToolMode((o=e.tools[0])==null?void 0:o.element)):console.warn("DataElement not found.")}else console.error("Wrong dataElements type.")},enableElements=e=>n=>{const r=[...e.getActiveHeaderItems,...e.getTools,...e.getActiveRightHeaderItems,...e.getToolItems.annotation,...e.getToolItems.form,...e.getToolItems.security,...e.getToolItems.editor,...e.getToolItems.measurement,...e.getPopupItems("textPopup"),...e.getPopupItems("cropPagePopup")];if(Array.isArray(n))for(let o=0;o<r.length;o++)n.forEach(u=>{e.getDisabledElementsObj[u]?e.setEnabledElements(u):r[o].dataElement===u&&(r[o].hidden=!1)});else if(typeof n=="string"){if(e.getDisabledElementsObj[n]){e.setEnabledElements(n);return}const o=r.find(u=>u.dataElement===n);o?o.hidden=!1:console.warn("DataElement not found.")}else console.error("Wrong dataElements type.")},setHeaderItems=e=>n=>{const r={headers:e.headers,rightHeaders:e.rightHeaders,tools:e.tools,toolItems:e.toolItems},o=Object.create(Header).initialize(e,r);n(o),Object.keys(r).forEach(u=>{const s=r[u];e[u]=s})},Header={initialize(e){return this.headers={headers:e.headers,rightHeaders:e.rightHeaders,tools:e.tools,toolItems:e.toolItems},this.toolButtonObjects=e.toolItems,this.headerGroup="headers",this.index=-1,this},get(e){if(this.index!==-1){const n=this.headers[this.headerGroup][this.index];Object.keys(n).forEach(r=>{delete this[r]})}if(this._setIndex(e),this.index===-1)console.warn(`${e} does not exist in ${this.headerGroup} header`);else{const n=this.headers[this.headerGroup][this.index];Object.keys(n).forEach(r=>{this[r]=n[r]})}return this},getItems(){return this.headers[this.headerGroup]},getHeader(e){const n=Object.keys(this.headers);return n.includes(e)?(this.headerGroup=e,this._resetIndex()):console.warn(`Header must be one of: ${n.join(" or ")}.`),this},insertBefore(e){return this.index===-1?console.warn("Please use .get(dataElement) first before using insertBefore"):this.headers[this.headerGroup].splice(this.index,0,e),this},insertAfter(e){return this.index===-1?console.warn("Please use .get(dataElement) first before using insertAfter"):(this.index++,this.headers[this.headerGroup].splice(this.index,0,e)),this},delete(e){let n;return typeof e=="number"?n=e:typeof e=="string"?this._getIndexOfElement(e)===-1?console.warn(`${e} does not exist in ${this.headerGroup} header`):n=this._getIndexOfElement(e):typeof e>"u"?this.index===-1?console.warn("Please use .get(dataElement) first before using delete()"):n=this.index:Array.isArray(e)?e.forEach(r=>{(typeof r=="number"||typeof r=="string")&&this.delete(r)}):console.warn("Argument must be empty, a number, a string or an array"),n!==void 0&&n!==-1&&(this.headers[this.headerGroup].splice(n,1),this._resetIndex()),this},shift(){return this.headers[this.headerGroup].shift(),this},unshift(...e){return this.headers[this.headerGroup].unshift(...e),this},push(...e){return this.headers[this.headerGroup].push(...e),this},pop(){return this.headers[this.headerGroup].pop(),this},update(e){return Array.isArray(e)?this._updateItems(e):console.warn("Argument must be an array"),this},_updateItems(e){return this.headers[this.headerGroup].length=0,this.headers[this.headerGroup].push(...e),this},_setIndex(e){this.index=this._getIndexOfElement(e)},_getIndexOfElement(e){return this.headers[this.headerGroup].findIndex(n=>{let r;return n.type==="toolButton"?r=this.toolButtonObjects[n.toolName].dataElement:r=n.dataElement,r===e})},_resetIndex(){this.index=-1}},setActiveToolMode=e=>n=>{const r=e.tools.find(o=>o.dataElement===n);r?(r.hidden&&(r.hidden=!1),e.setActiveToolMode(r.element)):console.warn("DataElement not found.")},setActiveTool=(e,n)=>r=>{const o=e.getToolMode;if(o){if(!r){n.setToolState();return}const s=e.getToolItems[o].find(w=>w.dataElement===r);if(!s){console.warn("DataElement not match toolMode.");return}s.hidden&&(s.hidden=!1),n.setToolState(s.type)}else console.warn("DataElement not found.")},{locale}=i18n.global,setLanguage=e=>n=>{n&&!["zh-CN","en","ja","th","zh-TW","fr"].includes(n)&&(n="en"),locale.value=n,e.setLanguage(n),window.localStorage.setItem("currentLanguage",n)},getPassword=e=>()=>e.dispatch("getPassword"),createPopupAPI=(e,n)=>Object.create(PopupAPI).initialize(e,n),PopupAPI={initialize(e,n){return this.store=e,this.popupDataElement=n,this},add(e,n){Array.isArray(e)||(e=[e]);const r=this._getIndexByDataElement(n);this.getItems().splice(r+1,0,...e)},update(e){e||(e=[]),Array.isArray(e)||(e=[e]);const n=this.getItems();n.length=0,n.push(...e)},getItems(){return this.store.dispatch("getPopupItems")(this.popupDataElement)},_getIndexByDataElement(e){let n;return typeof e>"u"?n=-1:n=this.store.dispatch("getPopupItems")(this.popupDataElement).findIndex(r=>r.dataElement===e),n}},textPopup=e=>createPopupAPI(e,"textPopup"),openElement=e=>n=>{if(["rightPanel","contentEditorPanel","measurePanel","freetextPanel"].includes(n)&&e.getRightPanelButtonDisabled)return!1;e.dispatch("openElement")(n)},closeElement=e=>n=>e.dispatch("closeElement")(n),isElementOpen=e=>n=>e.dispatch("isElementOpen")(n),setActiveElementTab=e=>(n,r)=>{e.activeElementsTab.hasOwnProperty(n)?e.setActiveElementTab(n,r):console.warn("DataElement not found.")},setCustomFonts=e=>n=>{Array.isArray(n)?e.setCustomFonts(n):console.error("setCustomFonts: fonts must be an array")},setAnnotator=e=>n=>{e.setAnnotator(n||"Guest")},getToolColor=e=>n=>e[n].color,getTool=e=>n=>({...e[n]}),getActiveTool=e=>()=>e.getActiveTool,cropPagePopup=e=>createPopupAPI(e,"cropPagePopup"),setAutoJumpNextSign=e=>n=>{e.setAutoJumpNextSign(!!n)},setSignatureDialogTabs=e=>n=>{e.setSignatureDialogTabs(n)},setSignatureDialogProperties=e=>(n,r)=>{e.setSignatureDialogProperties(n,r)},setCustomLoading=e=>n=>{e.setCustomLoading(n)},disableAnnotationExport=e=>()=>{e.setAnnotationExport(!1)},disableAnnotationImport=e=>()=>{e.setAnnotationImport(!1)},enableAnnotationExport=e=>()=>{e.setAnnotationExport(!0)},enableAnnotationImport=e=>()=>{e.setAnnotationImport(!0)},enableSignatureTool=e=>()=>{e.setDisableSignatureTool(!1)},disableSignatureTool=e=>()=>{e.setDisableSignatureTool(!0)},setCustomStyle=e=>{const n=document.createElement("style");n.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(n)},setThemeMode=e=>n=>{e.setThemeMode(n)},disableDocumentEditorSave=e=>()=>{e.setDocumentEditorSaveStatus(!1)},disableDocumentEditorSaveAs=e=>()=>{e.setDocumentEditorSaveAsStatus(!1)},enableDocumentEditorSave=e=>()=>{e.setDocumentEditorSaveStatus(!0)},enableDocumentEditorSaveAs=e=>()=>{e.setDocumentEditorSaveAsStatus(!0)},saveDocumentEditor=(e,n,r)=>async()=>{const o=await r.saveDocumentEdit();if(!o)return;n.resetSetting(),n.setToolState(""),e.setActiveToolMode("view"),e.setUpload(!0),e.setUploadLoading(!0);const u=e.getScale,s=n.getPassword;await r.loadDocument(o,{password:s}),n.setCurrentPdfData(o);const w=r.getPagesCount();n.setTotalPages(w),n.setOutline(r.getOutlines()),e.setCurrentPage(1);const g=e.getScrollMode,v=e.getPageMode;r.switchScrollMode(g==="Vertical"?0:1),r.switchSpreadMode(v),e.setCurrentScale(u/100),r.scaleChanged(u/100),e.setUploadLoading(!1)},defineWebViewerInstanceUIAPIs=()=>{const{locale:e}=i18n.global,n=useViewerStore(),r=useDocumentStore(),o=createEncapsulatedStore(n),u=createEncapsulatedStore(r);n.setLanguage(e.value);const s="Core",w="UI",g={...core},v={disableElements:disableElements(n),enableElements:enableElements(n),setHeaderItems:setHeaderItems(n),setActiveToolMode:setActiveToolMode(n),setActiceToolMode:setActiveToolMode(n),setActiveTool:setActiveTool(n,r),setLanguage:setLanguage(n),getPassword:getPassword(u),textPopup:textPopup(o),openElement:openElement(n),closeElement:closeElement(n),isElementOpen:isElementOpen(n),setActiveElementTab:setActiveElementTab(n),setCustomFonts:setCustomFonts(n),setAnnotator:setAnnotator(r),getActiveTool:getActiveTool(r),getToolColor:getToolColor(r),getTool:getTool(r),cropPagePopup:cropPagePopup(o),setAutoJumpNextSign:setAutoJumpNextSign(r),setSignatureDialogTabs:setSignatureDialogTabs(n),setSignatureDialogProperties:setSignatureDialogProperties(n),setCustomLoading:setCustomLoading(n),disableAnnotationExport:disableAnnotationExport(n),disableAnnotationImport:disableAnnotationImport(n),enableAnnotationExport:enableAnnotationExport(n),enableAnnotationImport:enableAnnotationImport(n),enableSignatureTool:enableSignatureTool(n),disableSignatureTool:disableSignatureTool(n),setCustomStyle,setThemeMode:setThemeMode(n),disableDocumentEditorSave:disableDocumentEditorSave(n),disableDocumentEditorSaveAs:disableDocumentEditorSaveAs(n),enableDocumentEditorSave:enableDocumentEditorSave(n),enableDocumentEditorSaveAs:enableDocumentEditorSaveAs(n),saveDocumentEditor:saveDocumentEditor(n,r,core)};window.instances={[s]:g,[w]:v}},app=createApp(_sfc_main);setupStore(app);defineWebViewerInstanceUIAPIs();app.use(i18n);app.mount("#app");
