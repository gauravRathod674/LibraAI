function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(){n=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",d=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof M?t:M,i=Object.create(o.prototype),u=new E(r||[]);return a(i,"_invoke",{value:w(e,n,u)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",g="suspendedYield",A="executing",h="completed",P={};function M(){}function m(){}function v(){}var y={};s(y,u,(function(){return this}));var I=Object.getPrototypeOf,C=I&&I(I(R([])));C&&C!==r&&o.call(C,u)&&(y=C);var S=v.prototype=M.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(r,a,i,u){var l=f(e[r],e,a);if("throw"!==l.type){var d=l.arg,s=d.value;return s&&"object"==typeof s&&o.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(s).then((function(e){d.value=e,i(d)}),(function(e){return n("throw",e,i,u)}))}u(l.arg)}var r;a(this,"_invoke",{value:function(e,o){function a(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(a,a):a()}})}function w(t,n,r){var o=p;return function(a,i){if(o===A)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var u=r.delegate;if(u){var l=b(u,r);if(l){if(l===P)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=A;var d=f(t,n,r);if("normal"===d.type){if(o=r.done?h:g,d.arg===P)continue;return{value:d.arg,done:r.done}}"throw"===d.type&&(o=h,r.method="throw",r.arg=d.arg)}}}function b(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,b(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),P;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,P;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,P):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,P)}function G(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(G,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return m.prototype=v,a(S,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:m,configurable:!0}),m.displayName=s(v,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},_(x.prototype),s(x.prototype,l,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(c(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(S),s(S,d,"Generator"),s(S,u,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=o.call(i,"catchLoc"),d=o.call(i,"finallyLoc");if(l&&d){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,P):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),P},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),P}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),P}},t}function r(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function o(e,t,n,r,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,l,"next",e)}function l(e){o(i,r,a,u,l,"throw",e)}u(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,u=[],l=!0,d=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){d=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw o}}return u}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=("00"+Math.abs(t/60)).slice(-2),o=("00"+Math.abs(t%60)).slice(-2),a="".concat(n).concat(r,"'").concat(o,"'"),i=e.getFullYear(),u=("00"+(e.getMonth()+1)).slice(-2),l=("00"+e.getDate()).slice(-2),d=("00"+e.getHours()).slice(-2),s=("00"+e.getMinutes()).slice(-2),c=("00"+e.getSeconds()).slice(-2);return"D:".concat(i).concat(u).concat(l).concat(d).concat(s).concat(c).concat(a)}function A(e){if(!e)return new Date;var t=e.match(/D:(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})([-+]\d{2}'\d{2}')?/);if(t){var n=s(t,8),r=n[1],o=n[2],a=n[3],i=n[4],u=n[5],l=n[6];return n[7],new Date(parseInt(r),parseInt(o)-1,parseInt(a),parseInt(i),parseInt(u),parseInt(l))}throw new Error("Invalid timestamp format")}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Math.pow(10,t);return Math.round(e*n)/n}var P=l((function e(){var t=this;i(this,e),this.promise=new Promise((function(e,n){t.resolve=function(t){e(t)},t.reject=function(e){n(e)}}))}));function M(e,t){this.constructor===M&&function(e){throw new Error(e)}("Cannot initialize BaseException."),this.message=e,this.name=t}function m(e){return e.startsWith("#")?"hex":e.startsWith("rgb(")?"rgb":e.startsWith("hsl")?"hsl":"unknown"}function v(e){var t=m(e);if("hex"===t){var n=I(e),r=n.R,o=n.G,a=n.B;return{R:h(r/255),G:h(o/255),B:h(a/255)}}if("rgb"===t){var i=e.match(/(\d+),\s*(\d+),\s*(\d+)/);return{R:h(parseInt(i[1])/255),G:h(parseInt(i[2])/255),B:h(parseInt(i[3])/255)}}if("hsl"===t){var u=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!u)return{error:"Invalid HSL format"};var l=parseInt(u[1]),d=parseInt(u[2])/100,s=parseInt(u[3])/100,c=C(l,d,s),f=c.R,p=c.G,g=c.B;return{R:h(f/255),G:h(p/255),B:h(g/255)}}console.error({message:"Invalid color value"})}function y(e,t,n){return function(e,t,n){var r=(1<<24|e<<16|t<<8|n).toString(16).slice(1).toUpperCase();return"#".concat(r)}(Math.round(255*e),Math.round(255*t),Math.round(255*n))}function I(e){var t=e.slice(1),n=parseInt(t,16);return{R:n>>16&255,G:n>>8&255,B:255&n}}M.prototype=new Error,M.constructor=M,"undefined"!=typeof document&&document.documentElement.style;var C=function(e,t,n){var r,o,a;if(e/=360,0===t)r=o=a=Math.round(255*n);else{var i=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},u=n<.5?n*(1+t):n+t-n*t,l=2*n-u;r=Math.round(255*i(l,u,e+1/3)),o=Math.round(255*i(l,u,e)),a=Math.round(255*i(l,u,e-1/3))}return{R:r,G:o,B:a}},S={0:"left",1:"center",2:"right"},_={LEFT:0,CENTER:1,CENTERED:1,RIGHT:2},x={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,RICHMEDIA:26,REDACT:27,INTERCHANGE:28,ARC:29},w={1:"text",2:"link",3:"freetext",4:"line",5:"square",6:"circle",7:"polygon",8:"polyline",9:"highlight",10:"underline",11:"squiggly",12:"strikeout",13:"stamp",14:"caret",15:"ink",16:"popup",17:"fileattachment",18:"sound",19:"movie",20:"widget",21:"screen",22:"printermark",23:"trapnet",24:"watermark",25:"threed",26:"richmedia",27:"redact",28:"interchange",29:"arc"},b={PUSHBUTTON:0,CHECKBOX:1,RADIOBUTTON:2,TEXTFIELD:3,COMBOBOX:4,LISTBOX:5,SIGNATUREFIELDS:6,UNKNOWN:255},G={0:"pushbutton",1:"checkbox",2:"radiobutton",3:"textfield",4:"combobox",5:"listbox",6:"signatureFields",255:"unknown"},T=1,E=2,R=32,B={UNKNOWN:-1,NONE:0,OPENARROW:1,CLOSEDARROW:2,SQUARE:3,CIRCLE:4,DIAMOND:5,BUTT:6,ROPENARROW:7,RCLOSEDARROW:8,SLASH:9},F={"-1":"unknown",0:"none",1:"openarrow",2:"closedarrow",3:"square",4:"circle",5:"diamond",6:"butt",7:"ropenarrow",8:"rclosedarrow",9:"slash"};d(d(d(d(d({1:"none",0:"check"},"1","circle"),2,"cross"),3,"diamond"),4,"square"),5,"star");var D={0:"unknown",1:"standard",2:"image",3:"text",4:"digital"},L={0:"unknown",1:"goto",2:"gotor",3:"gotoe",4:"launch",5:"thread",6:"uri",7:"sound",8:"movie",9:"hide",10:"named",11:"submitform",12:"resetform",13:"importdata",14:"javascript",15:"setocgstate",16:"rendition",17:"trans",18:"goto3dview",19:"uop",255:"error"},U={solid:0,dashed:1,beveled:2,inset:3,underline:4},N={0:"solid",1:"dashed",2:"beveled",3:"inset",4:"underline"},k={0:"rect",1:"leftTriangle",2:"rightTriangle",3:"none"},O=l((function e(){i(this,e)}));d(O,"CSS",96),d(O,"PDF",72),d(O,"PDF_TO_CSS_UNITS",1);var H={MARKED:0,UNMARKED:1,ACCEPTED:2,REJECTED:3,CANCELLED:4,COMPLETED:5,NONE:6,ERROR:7},Y={0:"MARKED",1:"UNMARKED",2:"ACCEPTED",3:"REJECTED",4:"CANCELLED",5:"COMPLETED",6:"NONE",7:"ERROR"},W={DISTANCE:0,PERIMETER:1,AREA:2,ANGLE:3,COUNT:4,ARC:5},Q={0:"distance",1:"perimeter",2:"area",3:"angle",4:"count",5:"arc"},K={AREA:1,LENGTH:2,RADIUS:4,DIAMETER:8,ANGLE:16,COUNT:32,ARCLENGTH:64,GENERIC:128},q={1:"area",2:"length",4:"radius",8:"diameter",16:"angle",32:"count",64:"arclength",128:"generic"},J=function(){return l((function e(t,n,r){var o=this;i(this,e),this.sourceName=t,this.targetName=n,this.comObj=r,this.callbackId=1,this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(e){var t=e.data;if(t.targetName===o.sourceName)if(t.callback){var n=t.callbackId,a=o.callbackCapabilities[n];if(!a)throw new Error("Cannot resolve callback ".concat(n));if(delete o.callbackCapabilities[n],"resolve"!==t.callback)throw console.log({data:{action:t.data.action,data:t.data.data},message:t.reason&&t.reason.message}),new Error("Unexpected callback case");a.resolve(t.data)}else{var i=o.actionHandler[t.action];if(!i)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){var u=o.sourceName,l=t.sourceName;new Promise((function(e){e(i(t.data))})).then((function(e){r.postMessage({sourceName:u,targetName:l,callback:"resolve",callbackId:t.callbackId,data:e})}),(function(e){r.postMessage({data:t,sourceName:u,targetName:l,callback:"reject",callbackId:t.callbackId,reason:e})}))}else i(t.data)}},r.addEventListener("message",this._onComObjOnMessage)}),[{key:"on",value:function(e,t){var n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}},{key:"send",value:function(e,t){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t})}},{key:"sendWithPromise",value:function(e,t){var n=this.callbackId++,r=new P;this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t})}catch(e){r.reject(e)}return r.promise}},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}])}();function X(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){var e=new Uint8Array(r.result);t(e)},r.onerror=function(){n(r.error)},r.readAsArrayBuffer(e)}))}function j(e){for(var t=e.split(";base64,")[1],n=atob(t),r=new Uint8Array(n.length),o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}importScripts("./ComPDFKit.js");var ComPDFKitJS={opened_Font:[],opened_DefFont:[],ComPDFKitDownloadFont:function(e){if(ComPDFKitJS.opened_Font[e])return ComPDFKitJS.opened_Font[e];return!1},ComPDFKitDownloadFontA:function(e){if(ComPDFKitJS.opened_Font[e])return ComPDFKitJS.opened_Font[e];var t=fontsJson[e-1];if(!t)return!1;var fontFile=$(Z+t.filePath);return te.MessageHandler.send("LoadFont",{fontFamily:t.family}),ComPDFKitJS.opened_Font[e]=fontFile,fontFile},FontNameList:[],FontCount:1,opened_image:[],opened_files:[],opened_cert:[]},DataArray=[],LineType={},BorderStyle={},PageSize={},Rect={},RGBColor={},FontDa={},PDFDestination={},WidgetItem={},WidgetItemsArray={},TextFindItemArray=[],EditCharPlace={},EndEditCharPlace={},RectArray=[],CursorPoints={},EditTextStyle={},U8StringData="",PDFRange={},TextRectArray=[],ImageAreaInfo={},SignerArray=[],CertArray=[],AccessInfoArray=[],PolicyArray=[],CRLPointArray=[],OCSPUrlArray=[],DiffInfoArray=[],AnnotArray=[],fontsJson=null,Z="https://www.compdf.com/fonts/",LayerPrintData={},LayerZoomData={},SepColorsArray=[],SelectPointColorArray=[],MeasureVerticesArray=[],PermissionsInfo={};function V(e){return z.apply(this,arguments)}function z(){return(z=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new XMLHttpRequest;n.open("GET",e,t),n.responseType="arraybuffer";var r=function(){return(200===n.status||206===n.status)&&new Uint8Array(n.response)};if(t)return new Promise((function(e,t){n.onload=function(){return e(r())},n.onerror=function(){return t(new Error("Network error"))},n.send()}));try{return n.send(),r()}catch(e){return!1}}function ee(e){var t=parseInt(e.slice(1),16),n=t>>8&255,r=255&t;return{R:h((t>>16&255)/255),G:h(n/255),B:h(r/255)}}var te=function(){function e(){i(this,e)}return l(e,null,[{key:"setUp",value:(t=a(n().mark((function t(){var r,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=new J("worker","main",self),this.MessageHandler=r,o=!1,r.on("test",(function(e){o||(o=!0,r.send("test",e instanceof Uint8Array))})),r.send("ready",null),r.on("Ready",(function(t){return e.createDocumentHandler(self)}));case 6:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"createDocumentHandler",value:function(){var e=this.MessageHandler;e.on("InitConfig",(function(e){var t=e.license,n=e.appId,r=e.version,o=stringToNewUTF8(t),a=stringToNewUTF8(""),i=stringToNewUTF8(n),u=stringToNewUTF8(r);return Module._InitComPDFkit(o,!1,a,i,0,u),Ae()})),e.on("LoadFile",function(){var e=a(n().mark((function e(t){var r,o,a,i,u,l,fontFile,d;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ComPDFKitJS.opened_files=[],ComPDFKitJS.opened_files[0]=t.buffer,t.pagesPtr&&t.pagesPtr.length>0&&t.pagesPtr.forEach((function(e){Module._ClearPage(e.pagePtr)})),t.doc&&Module._ClearDocument(t.doc),t.fileList&&(ComPDFKitJS.opened_Font[0]=t.fileList),"https://www.compdf.com/fonts/"!==t.webFontURL&&(Z=t.webFontURL),!t.fontsJson||fontsJson){e.next=26;break}if(fontsJson=t.fontsJson,r=!!ComPDFKitJS.opened_Font[0],ComPDFKitJS.FontCount=r?t.fontsJson.length+1:t.fontsJson.length,r){e.next=25;break}for(o=[],a=0;a<t.fontsJson.length;a++)o.push($(Z+t.fontsJson[a].filePath,!0));if(!o.length){e.next=25;break}return i=null,e.prev=15,e.next=18,Promise.all(o);case 18:i=e.sent,e.next=24;break;case 21:e.prev=21,e.t0=e.catch(15),console.log(e.t0);case 24:if(i&&i.length)for(u=0;u<o.length;u++)l=ComPDFKitJS.opened_Font.length,i[u]&&(ComPDFKitJS.opened_Font[l]=i[u]);case 25:Module._InitComPDFkitFont(r);case 26:return t.enableDefaultFont&&!ComPDFKitJS.opened_DefFont[0]&&(fontFile=$("./DroidSansFallbackFull.ttf"),ComPDFKitJS.opened_DefFont[0]=fontFile),d=Module._InitDocument(),e.abrupt("return",d);case 29:case"end":return e.stop()}}),e,null,[[15,21]])})));return function(t){return e.apply(this,arguments)}}()),e.on("GetWebFontNameList",(function(){var e=ComPDFKitJS.FontNameList;return e.length?e:null})),e.on("LoadDocumentByStream",re),e.on("GetPageCount",(function(e){var t=e.doc;return Module._GetPageCount(t)})),e.on("GetPageSize",(function(e){var t=e.doc,n=e.pageIndex;PageSize.Width=0,PageSize.Height=0,Module._GetPageSizeForIndex(t,n);var r=Module._GetPage(t,n),o=Module._GetPageRotation(r);return{pagePtr:r,width:PageSize.Width,height:PageSize.Height,rotation:90*o}})),e.on("InitAnnot",(function(e){for(var t=e.pagePtr,n=Module._GetAnnotCount(t),r=[],o=0;o<n;o++){var a=Module._InitAnnot(t,o);if(a)if(!Module._IsReplyAnnot(a)){var i={annotPtr:a,type:Module._GetAnnotType(a),pagePtr:t};r.push(i)}}return{annotCount:r.length,annotations:r}})),e.on("GetAnnotation",(function(e){return function(e){var t=e.doc,n=e.pagePtr,r=e.annotPtr,o=e.typeInt;e.scale;var a=null;Rect={},Module._GetAnnotRect(n,r);var i={left:h(Rect.Left),top:h(Rect.Top),right:h(Rect.Right),bottom:h(Rect.Bottom)};Module._GetAnnotCreationDate(r);var u=A(U8StringData);Module._GetAnnotContent(r);var l=U8StringData;Module._GetAnnotTitle(r);var d=U8StringData;Module._GetAnnotAuthor(r);var c=U8StringData,f=h(Module._GetAnnotTransparency(r)),p={date:u,contents:l,rect:i,opacity:f,title:d,author:c},g=ze(n,r),P=g.replies,M=g.reviewAnnotState,m=g.markedAnnotState;P.length&&(p.replies=P);M&&(p.reviewAnnotState=M);m&&(p.markedAnnotState=m);switch(o){case x.TEXT:if(RGBColor={},Module._GetAnnotRGBColor(r)){var v=RGBColor,I=y(v.R,v.G,v.B);p.textColor=I}return p;case x.LINK:var C=Module._GetLinkActionType(r);if(p.actionType=L[C],RGBColor={},Module._GetAnnotFilledRGBColor(r)){var _=RGBColor,b=y(_.R,_.G,_.B);p.fillColor=b}return 1===C?(PDFDestination={},Module._GetLinkDestination(t,r),p.destPage=PDFDestination.PageIndex+1,p.url=""):6===C&&(Module._GetLinkUri(r),p.url=U8StringData,p.destPage=""),p;case x.FREETEXT:FontDa={},Module._GetFreeTextFont(r);var G=U8StringData,T=/bold/i.test(G)?"bold":"normal",E=/(oblique|italic)/i.test(G)?"oblique":"normal";p.fontName=G.split("-")[0],p.fontStyle=E,p.fontWeight=T,p.fontSize=FontDa.fontSize,p.borderWidth=Module._GetAnnotBorderWidth(r),RGBColor={},Module._GetFreeTextBorderColor(r)&&(p.borderColor=y(RGBColor.R,RGBColor.G,RGBColor.B)),p.fillOpacity=Module._GetAnnotFilledTransparency(r);var R=Module._GetTextAlignment(r);p.textAlignment=S[R];var B=FontDa,U=y(B.R,B.G,B.B);p.color=U,Module._GetFreeTextContent(r);var O=U8StringData;if(p.contents=O,RGBColor={},Module._GetFreeTextBgColor(r)){var H=RGBColor,Y=y(H.R,H.G,H.B);p.fillColor=Y}return p;case x.LINE:LinePoint={},Module._GetLinePoint(n,r);var Q=[LinePoint.StartPointX,LinePoint.StartPointY,LinePoint.EndPointX,LinePoint.EndPointY];if(p.linePoints=Q,LineType={},Module._GetLineType(r),p.tail=F[LineType.Tail],p.head=F[LineType.Head],RGBColor={},Module._GetAnnotRGBColor(r)&&(p.color=y(RGBColor.R,RGBColor.G,RGBColor.B)),RGBColor={},Module._GetAnnotBorderRGBColor(r)&&(p.borderColor=y(RGBColor.R,RGBColor.G,RGBColor.B)),p.borderWidth=Module._GetAnnotBorderWidth(r),(BorderStyle={}).DashArray=[],Module._GetAnnotBorderStyle(r),p.dashes=BorderStyle.DashArray,BorderStyle.Style&&(p.borderStyle=N[BorderStyle.Style]),Module._isMeasured(r)){p.measure=1,p.rulerPtr=Module._initRuler(t,r,W.DISTANCE);var K=et(r,p.rulerPtr,w[o]);Object.assign(p,K)}return p;case x.ARC:case x.SQUARE:case x.POLYGON:if(p.vertices=rt({pagePtr:n,annotPtr:r}),4===p.vertices.length){var q=s(p.vertices,4),J=q[0],X=q[1],j=q[2],Z=q[3];J.y===X.y&&X.x===j.x&&j.y===Z.y&&Z.x===J.x&&(p.type="rectangle")}if(RGBColor={},Module._GetAnnotRGBColor(r)&&(p.color=y(RGBColor.R,RGBColor.G,RGBColor.B)),RGBColor={},Module._GetAnnotFilledRGBColor(r)&&(p.fillColor=y(RGBColor.R,RGBColor.G,RGBColor.B)),RGBColor={},Module._GetAnnotBorderRGBColor(r)&&(p.borderColor=y(RGBColor.R,RGBColor.G,RGBColor.B)),p.fillTransparency=Module._GetAnnotFilledTransparency(r),p.borderWidth=Module._GetAnnotBorderWidth(r),(BorderStyle={}).DashArray=[],Module._GetAnnotBorderStyle(r),p.dashes=BorderStyle.DashArray,BorderStyle.Style&&(p.borderStyle=N[BorderStyle.Style]),Module._isMeasured(r)){p.measure=1,p.rulerPtr=Module._initRuler(t,r,W.AREA);var V=et(r,p.rulerPtr,w[o]);return Object.assign(p,V),p}return 5===o?p.type="square":29===o&&(p.type="arc"),p;case x.POLYLINE:if(p.vertices=rt({pagePtr:n,annotPtr:r}),RGBColor={},Module._GetAnnotRGBColor(r)&&(p.color=y(RGBColor.R,RGBColor.G,RGBColor.B)),RGBColor={},Module._GetAnnotBorderRGBColor(r)&&(p.borderColor=y(RGBColor.R,RGBColor.G,RGBColor.B)),p.borderWidth=Module._GetAnnotBorderWidth(r),(BorderStyle={}).DashArray=[],Module._GetAnnotBorderStyle(r),p.dashes=BorderStyle.DashArray,BorderStyle.Style&&(p.borderStyle=N[BorderStyle.Style]),Module._isMeasured(r)){p.measure=1,p.rulerPtr=Module._initRuler(t,r,W.PERIMETER);var z=et(r,p.rulerPtr,w[o]);return Object.assign(p,z),p}return p;case x.CIRCLE:if(p.borderWidth=Module._GetAnnotBorderWidth(r),BorderStyle.DashArray=[],Module._GetAnnotBorderStyle(r),p.dashes=BorderStyle.DashArray,RGBColor={},Module._GetAnnotRGBColor(r)){var $=RGBColor,ee=y($.R,$.G,$.B);p.borderColor=ee}if(RGBColor={},Module._GetAnnotFilledRGBColor(r)){var te=RGBColor,ne=y(te.R,te.G,te.B);p.fillColor=ne}if(p.fillTransparency=Module._GetAnnotFilledTransparency(r),Module._isMeasured(r)){LinePoint={},Module._GetLinePoint(n,r);var re=[LinePoint.StartPointX,LinePoint.StartPointY,LinePoint.EndPointX,LinePoint.EndPointY];p.linePoints=re,p.measure=1,p.rulerPtr=Module._initRuler(t,r,W.DISTANCE);var oe=et(r,p.rulerPtr,w[o]);Object.assign(p,oe)}return p;case x.HIGHLIGHT:case x.UNDERLINE:case x.SQUIGGLY:case x.STRIKEOUT:return a=function(e){var t=e.pagePtr,n=e.annotPtr;RGBColor={};var r={},o=Module._GetAnnotRGBColor(n);if(o){var a=RGBColor,i=y(a.R,a.G,a.B);r.color=i}return InkPointArray=[],Module._GetQuadPoints(t,n),r.quadPoints=InkPointArray,r}({pagePtr:n,annotPtr:r}),Object.assign(p,a),p;case x.STAMP:var ae=Module._GetStampType(r);return p.stampType=D[ae],0===ae?p.stampType="image":(TextStamp={},Module._GetTextStamp(r),p.stampColor=TextStamp.StampColor,p.stampShape=k[TextStamp.StampType],TextStamp.Date&&(p.time=TextStamp.Date)),p;case x.INK:if(RGBColor={},Module._GetAnnotRGBColor(r)){var ie=RGBColor,ue=y(ie.R,ie.G,ie.B);p.borderColor=ue}if(BorderStyle.DashArray=[],Module._GetAnnotBorderStyle(r),p.dashes=BorderStyle.DashArray,a=function(e){for(var t=e.pagePtr,n=e.annotPtr,r=Module._GetInkPathCount(n),o=[],a=0;a<r;a++)InkPointArray=[],Module._GetInkPoints(t,n,a),o.push(InkPointArray);var i=Module._GetAnnotBorderWidth(n);return{borderWidth:i,inkPointes:o}}({pagePtr:n,annotPtr:r}),Object.assign(p,a),3===a.inkPointes[0].length&&(p.arcPoints=a.inkPointes[0].map((function(e){return{x:e.PointX,y:e.PointY}}))),Module._isMeasured(r)){p.measure=1,p.rulerPtr=Module._initRuler(t,r,W.ARC);var le=et(r,p.rulerPtr,w[o]);Object.assign(p,le)}return p}return}({doc:e.doc,pagePtr:e.pagePtr,annotPtr:e.annotPtr,typeInt:e.typeInt,scale:e.scale})})),e.on("GetPermissionsInfo",(function(e){PermissionsInfo={};var t=e.doc;return Module._GetPermissionsInfo(t),PermissionsInfo})),e.on("CheckOwnerPassword",(function(e){var t=e.doc,n=e.pwd,r=stringToNewUTF8(n);return!!Module._CheckOwnerPassword(t,r)})),e.on("GetDynamicStampPreview",(function(e){var t=e.contents,n=e.time,r=e.stampShape,o=e.stampColor,a=Module._InitDocument();Module._CreateDocument(a),Module._InsertPage(a,0,595,842);var i=Module._GetPage(a,0),u=Module._CreateAnnot(a,i,13),l=stringToNewUTF8(t),d=stringToNewUTF8(n);Module._SetTextStamp(u,l,d,r,o,0),Module._UpdateAnnotAp(u,0),Rect={},Module._GetAnnotRect(i,u);for(var s=Rect,c=s.Left,f=s.Top,p=s.Right,g=s.Bottom,A=Math.ceil(p-c),h=Math.ceil(g-f),P=A*h,M=4*P,m=_malloc(M),v=0;v<P;v++)Module.HEAP32[m/4+v]=0;Module._RenderAnnot(u,A,h,m,0);var y=new Uint8Array(M);for(v=0;v<M;v+=4)y[v]=Module.HEAPU8[m+v+2],y[v+1]=Module.HEAPU8[m+v+1],y[v+2]=Module.HEAPU8[m+v],y[v+3]=Module.HEAPU8[m+v+3];return _free(m),{width:A,height:h,imageArray:y}})),e.on("GetRenderAnnot",(function(e){for(var t=e.pagePtr,n=e.annotPtr,r=e.width,o=e.height,a=r*o,i=_malloc(4*a),u=0;u<a;u++)Module.HEAP32[i/4+u]=0;var l=function(e,t,n,r,o){var a,i;1===o||3===o?(a=r,i=n):(a=n,i=r);Module._RenderAnnot(e,a,i,t,0);for(var u=new Uint8Array(a*i*4),l=0;l<i;l++)for(var d=0;d<a;d++){var s=4*(l*a+d),c=void 0,f=void 0;switch(o){case 1:c=i-1-l,f=d;break;case 2:c=a-1-d,f=i-1-l;break;case 3:c=l,f=a-1-d;break;default:c=d,f=l}var p=4*(f*n+c);u[p]=Module.HEAPU8[t+s+2],u[p+1]=Module.HEAPU8[t+s+1],u[p+2]=Module.HEAPU8[t+s],u[p+3]=Module.HEAPU8[t+s+3]}return{imageArray:u,width:a,height:i}}(n,i,r,o,Module._GetPageRotation(t)),d=l.imageArray;return _free(i),d})),e.on("GetWidgetAnnotation",(function(e){return function(e){var t=e.doc,n=e.pagePtr,r=e.annotPtr;e.typeInt;var o=e.signaturePtrList;Rect={},Module._GetAnnotRect(n,r);var a={left:h(Rect.Left),top:h(Rect.Top),right:h(Rect.Right),bottom:h(Rect.Bottom)};Module._GetAnnotCreationDate(r);var i=A(U8StringData);Module._GetAnnotContent(r);var u=U8StringData,l=Module._GetWidgetType(r),d=Module._GetRequiredFlag(r),s={date:i,contents:u,rect:a,required:d,type:G[l]};RGBColor={};var c=Module._GetWidgetBackgroundRGBColor(r);if(c){var f=RGBColor,p=y(f.R,f.G,f.B);s.backgroundColor=p}else s.backgroundColor=null;RGBColor={};var g=Module._GetWidgetBorderRGBColor(r);if(g){var P=RGBColor,M=y(P.R,P.G,P.B);s.borderColor=M}else s.borderColor=null;var m=Module._GetWidgetBorderStyle(r);s.borderStyle=N[m],Module._GetWidgetFieldName(r);var v=U8StringData;s.fieldName=v;var I=Module._GetAnnotBorderWidth(r);s.borderWidth=I;var C=Module._GetAnnotFlag(r);if(s.flag=C,0===C)s.isHidden=0;else{var _=!(C&T),x=!(C&R),w=!(C&E);s.isHidden=_&&x&&w?0:1}if(1===l){var b=Module._GetWidgetCheckStyle(r);if(s.checkStyle=b,RGBColor={},Module._GetWidgetCheckRGBColor(r)){var B=RGBColor,F=y(B.R,B.G,B.B);s.checkRGBColor=F}var D=Module._GetCheckBoxIsChecked(r);s.isChecked=D}if(2===l){var L=Module._GetWidgetCheckStyle(r);s.checkStyle=L;var U=Module._GetRadioButtonIsChecked(r);s.isChecked=U}if(3===l){if(1===Module._GetTextFieldSpe(r))return null;Module._GetTextFieldContent(r);var k=U8StringData;s.contents=k;var O=Module._IsMultiLine(r);s.isMultiLine=O;var H=Module._GetWidgetTextJustification(r);s.textAlignment=S[H],FontDa={},ue(s,r,Module._GetAnnotFontDa(r));var Y=U8StringData,W=/bold/i.test(Y),Q=/(oblique|italic)/i.test(Y),K={fontName:Y.split("-")[0],fontSize:FontDa.fontSize,isBold:W,isItalic:Q};Object.assign(s,K)}if(0===l){Module._GetButtonTitle(r);var q=U8StringData;s.title=q;var J=Module._GetBtnActionType(r);Module._GetBtnActionNamedAction(r);var X=U8StringData;if(s.actionName=X,1===J){var j=Module._GetBtnActionDestPage(t,r);s.destPage=j+1}else if(6===J){Module._GetBtnActionURI(r);var Z=U8StringData;s.url=Z}s.actionType=J,FontDa={},ue(s,r,Module._GetAnnotFontDa(r));var V=U8StringData,z=/bold/i.test(V),$=/(oblique|italic)/i.test(V),ee={fontName:V.split("-")[0],fontSize:FontDa.fontSize,isBold:z,isItalic:$};Object.assign(s,ee)}if(4===l||5===l){WidgetItem={},Module._GetItemsSelectedItem(r),s.selectedItem={values:WidgetItem.Values,strings:WidgetItem.Strings};var te=Module._GetItemsCount(r);s.itemsCount=te,WidgetItemsArray=[],Module._GetWidgetItems(r),s.items=WidgetItemsArray,Module._GetItemsSelectedValue(r);var ne=U8StringData;if(ne){for(var re=0;re<WidgetItemsArray.length;re++)if(WidgetItemsArray[re].Value===ne){s.selected=re;break}}else s.selected=null;FontDa={},ue(s,r,Module._GetAnnotFontDa(r));var oe=U8StringData,ae=/bold/i.test(oe),ie=/(oblique|italic)/i.test(oe),le={fontName:oe.split("-")[0],fontSize:FontDa.fontSize,isBold:ae,isItalic:ie};Object.assign(s,le)}if(6===l){for(var de=0;de<o.length;de++){var se=o[de];Module._IsSameAnnotDict(se,r)&&(SignerArray=[],Module._GetSigner(se),SignerArray.length&&(s.isSignedDigitally=!0),s.signaturePtr=se)}s.isSigned=Module._IsStampSignature(r)}return s}({doc:e.doc,pagePtr:e.pagePtr,annotPtr:e.annotPtr,typeInt:e.typeInt,signaturePtrList:e.signaturePtrList})})),e.on("GetSignatures",(function(e){return function(e){return de.apply(this,arguments)}(e)})),e.on("UpdateDigitalSignAp",function(){var e=a(n().mark((function e(t){var r,o,a,i,u,l,d,s,c,f,p,g,A,h,P,M,m;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for("data:image/png;base64,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",r=j("data:image/png;base64,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"),ComPDFKitJS.opened_image=[],ComPDFKitJS.opened_image[0]=r,t.imageBase64&&"image"===t.appearance?je(t):Ve(t),o=t.pkcs12Buffer,a=t.password,i=t.annotPtr,u=t.doc,ComPDFKitJS.opened_cert[0]=o,l=stringToNewUTF8(a),d=Module._GetPKCS12Cert(l,0,o.length),(DataArray=[]).push(ComPDFKitJS.opened_files[0]),s=Module._InitSignature2(i),Module._AddSignSaveDocument(u,s,d),c=[],f=0;f<DataArray.length;f++)p=new Uint8Array(DataArray[f]),c.push(p);return g=new Blob(c,{type:"application/pdf"}),e.next=18,X(g);case 18:for(A=e.sent,h=ComPDFKitJS.opened_files.length,ComPDFKitJS.opened_files[h]=A,DataArray=[],Module._AddSignModifyDocument(s,d,h,A.length),c=[],P=0;P<DataArray.length;P++)M=new Uint8Array(DataArray[P]),c.push(M);return ComPDFKitJS.opened_files[0]=c,ComPDFKitJS.opened_files.splice(h,1),m=new Blob(c,{type:"application/pdf"}),e.abrupt("return",m);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("CreateSignatureAP",function(){var e=a(n().mark((function e(t){var r,o,a,i,u,l,d,s,c,f,p;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t.rect,o=Module._InitDocument(),Module._CreateDocument(o),Module._InsertPage(o,0,595,842),Module._GetPageCount(o),a=Module._GetPage(o,0),Pe({annotPtr:i=Module._CreateWidget(o,a,6),date:new Date}),Me({pagePtr:a,annotPtr:i,rect:r}),Module._UpdateFormAp(i),t.annotPtr=i,Ve(t),u=r.width,l=r.height,s=4*(d=u*l),c=_malloc(s),f=0;f<d;f++)Module.HEAP32[c/4+f]=0;for(Module._RenderAnnot(i,u,l,c,0),p=new Uint8Array(s),f=0;f<s;f+=4)p[f]=Module.HEAPU8[c+f+2],p[f+1]=Module.HEAPU8[c+f+1],p[f+2]=Module.HEAPU8[c+f],p[f+3]=Module.HEAPU8[c+f+3];return _free(c),e.abrupt("return",p);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("UpdateSignatureAP",function(){var e=a(n().mark((function e(t){var r,o,a,i,u,l,d;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.doc,o=t.annotPtr,a=t.rect,i=t.pagePtr,u=t.imageBase64,l=t.imageArray,Me({pagePtr:i,annotPtr:o,rect:a}),d=l||u&&j(u),ComPDFKitJS.opened_image=[],ComPDFKitJS.opened_image[0]=d,Module._RemoveAP(o),Module._SetImageStampByStream(o,0,d.length,0),Module._SetStampSignature(o),Module._WidgetRemoveFromFields(r,o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("TestAddSignature",function(){var e=a(n().mark((function e(t){var r,o,a,i,u,l,d,s,c,f,p,g,A,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.doc,e.next=3,X(t.certFile);case 3:for(o=e.sent,ComPDFKitJS.opened_cert[0]=o,a=stringToNewUTF8("ComPDFKit"),i=Module._GetX509ByPKCS12Cert(0,o.length,a),u=Module._InitSignature2(annotPtr),DataArray=[],l=!!fontsJson||!!ComPDFKitJS.opened_DefFont[0],Module._SaveDocumentByStream(r,2,l),Module._AddSignSaveDocument(r,u,i),d=[],s=0;s<DataArray.length;s++)c=new Uint8Array(DataArray[s]),d.push(c);return f=new Blob(d,{type:"application/pdf"}),e.next=17,X(f);case 17:p=e.sent,g=ComPDFKitJS.opened_files.length,ComPDFKitJS.opened_files[g]=p,A=Module._InitDocument(),h=stringToNewUTF8(""),Module._LoadDocumentByStream(A,g,p.length,h);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("LoadCertificates",function(){var e=a(n().mark((function e(t){var r,o,a,i,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.pkcs12Buffer,o=t.password,ComPDFKitJS.opened_cert[0]=r,a=stringToNewUTF8(o),0!==(i=Module._GetX509ByPKCS12Cert(0,r.length,a))){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,Je(i);case 8:return u=e.sent,e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("AddSignature",function(){var e=a(n().mark((function e(t){var r,o,a,i,u,l,d,s,c,f,p,g,A,h,P,M,m;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.doc,o=t.pagePtr.pagePtr,e.next=4,X(t.certFile);case 4:for(a=e.sent,ComPDFKitJS.opened_cert[0]=a,i=stringToNewUTF8("ComPDFKit"),u=Module._GetPKCS12Cert(i,0,a.length),l={left:50,top:442,right:100,bottom:642},(DataArray=[]).push(ComPDFKitJS.opened_files[0]),Pe({annotPtr:d=Module._CreateWidget(r,o,6),date:new Date}),ke({annotPtr:d,fieldName:"signatureField1"}),Me({pagePtr:o,annotPtr:d,rect:l}),s=Module._InitSignature2(d),Module._AddSignSaveDocument(r,s,u),c=[],f=0;f<DataArray.length;f++)p=new Uint8Array(DataArray[f]),c.push(p);return g=new Blob(c,{type:"application/pdf"}),e.next=22,X(g);case 22:for(A=e.sent,h=ComPDFKitJS.opened_files.length,ComPDFKitJS.opened_files[h]=A,DataArray=[],Module._AddSignModifyDocument(s,u,1,ComPDFKitJS.opened_files[1].length),c=[],P=0;P<DataArray.length;P++)M=new Uint8Array(DataArray[P]),c.push(M);return m=new Blob(c,{type:"application/pdf"}),e.abrupt("return",m);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("PushRenderTask",(function(e){var t=e.pagePtr,n=e.scale,r=e.left,o=e.right,a=e.bottom,i=e.top,u=e.mode,l=void 0===u?-1:u,d=e.flag,s=void 0===d?0:d,c=e.form,f=function(e){for(var t=e.pagePtr,n=e.scale,r=e.left,o=e.right,a=e.bottom,i=e.top,u=e.mode,l=e.flag,d=e.form,s=parseInt(o-r)*parseInt(a-i),c=4*s,f=_malloc(c),p=0;p<s;p++)Module.HEAP32[f/4+p]=0;Module._RenderPageBitmapWithMatrix(t,n,r,o,a,i,u,f,l,d);var g=Ae("PDF VIEWER RENDER");if(g.code)return _free(f),g;var A=new Uint8Array(c);for(p=0;p<c;p+=4)A[p]=Module.HEAPU8[f+p+2],A[p+1]=Module.HEAPU8[f+p+1],A[p+2]=Module.HEAPU8[f+p],A[p+3]=Module.HEAPU8[f+p+3];return _free(f),{imageArray:A}}({pagePtr:t,scale:n,left:r,right:o,bottom:a,top:i,mode:l,flag:s,form:void 0===c?0:c});return f})),e.on("RenderPageBitmap",(function(e){var t=function(e){for(var t=e.pagePtr,n=e.x,r=e.y,o=e.width,a=e.height,i=e.mode,u=e.flag,l=e.form,d=parseInt(o)*parseInt(a),s=4*d,c=_malloc(s),f=0;f<d;f++)Module.HEAP32[c/4+f]=0;Module._RenderPageBitmap(t,n,r,o,a,i,c,u,l);var p=Ae("PDF VIEWER RENDER");if(p.code)return _free(c),p;var g=new Uint8Array(s);for(f=0;f<s;f+=4)g[f]=Module.HEAPU8[c+f+2],g[f+1]=Module.HEAPU8[c+f+1],g[f+2]=Module.HEAPU8[c+f],g[f+3]=Module.HEAPU8[c+f+3];return _free(c),{imageArray:g}}({pagePtr:e.pagePtr,x:e.x,y:e.y,width:e.width,height:e.height,mode:-1,flag:1,form:1});return t})),e.on("EditAnnotation",(function(e){var t=e.annotation;if(t.rect&&Me(t),t.color&&(t.type&&"freetext"===t.type?function(e){var t=e.annotPtr,n=e.fontName,r=e.fontWeight,o=e.fontStyle,a=e.fontSize,i=e.color,u=e.textAlignment,l=e.contents,d=le({fontName:n,fontWeight:r,fontStyle:o}),s=_[u.toUpperCase()],c=stringToNewUTF8(d),f=stringToNewUTF8(l),p=v(i);Module._SetFreeText(t,c,a,p.R,p.G,p.B,s,f)}(t):Ie(t)),isFinite(t.opacity)&&we(t),"contents"in t&&"mod-form"===t.operate){var n=Qe(t);if(n)return n}if("contents"in t&&"mod-annot"===t.operate&&(t.type&&"freetext"===t.type?function(e){var t=e.annotPtr,n=e.contents,r=stringToNewUTF8(n);Module._SetFreeTextContent(t,r)}(t):ye(t)),"fillColor"in t&&(t.type&&"freetext"===t.type?Se(t):xe({annotPtr:t.annotPtr,fillColor:t.fillColor})),"borderWidth"in t&&be({annotPtr:t.annotPtr,borderWidth:t.borderWidth}),t.borderColor&&(t.type&&"freetext"===t.type?Ce(t):_e({annotPtr:t.annotPtr,borderColor:t.borderColor})),"arcPoints"in t&&tt({pagePtr:t.pagePtr,annotPtr:t.annotPtr,vertices:t.arcPoints}),t.linePoints&&Ee(t),t.inkPointes&&Re(t),t.destPage&&"mod-annot"===t.operate&&Be(t),t.destPage&&"mod-form"===t.operate&&Ye(t),t.url&&"mod-annot"===t.operate&&Fe(t),t.url&&"mod-form"===t.operate&&We(t),(t.isHidden||0===t.isHidden)&&function(e){var t=e.annotPtr,n=e.isHidden,r=0;r=1==n?2:4;var o=Module._SetAnnotFlag(t,r)}(t),"required"in t&&function(e){var t=e.annotPtr,n=e.required;Module._SetRequiredFlag(t,n)}(t),t.isChecked||0===t.isChecked)if("checkbox"===t.type){var r=De(t);if(r)return r}else if("radiobutton"===t.type){var o=Le(t);if(o)return o}if(t.checkStyle&&Ue(t),t.backgroundColor&&"mod-form"===t.operate&&Ne(t),t.title&&"mod-form"===t.operate){var a=t.annotPtr,i=t.title,u=stringToNewUTF8(i);Module._SetButtonTitle(a,u)}if(t.fieldName&&ke(t),t.fontName&&"freetext"!==t.type&&Oe({annotPtr:t.annotPtr,fontName:t.fontName,fontSize:t.fontSize,color:t.color}),t.item&&Ke(t),t.moveOption&&function(e){var t=e.annotPtr,n=e.moveOption,r=n.fromIndex,o=n.toIndex,a=n.item;(function(e){var t=e.annotPtr,n=e.index;Module._RemoveOptionItem(t,n)})({annotPtr:t,index:r}),Ke({annotPtr:t,item:{value:a.Value,index:o}})}(t),t.selected||0===t.selected){var l=He(t);if(l)return l}if(t.hasOwnProperty("deleteItemIndex")&&function(e){var t=e.annotPtr,n=e.deleteItemIndex;if(Module._RemoveOptionItem(t,n),0===Module._GetItemsCount(t))return;He({annotPtr:t,selected:0})}(t),t.textAlignment&&"mod-form"===t.operate){var d=t.annotPtr,s=t.textAlignment,c=_[s.toUpperCase()];Module._SetWidgetTextJustification(d,c)}if(t.hasOwnProperty("isMultiLine")){var f=t.annotPtr,p=t.isMultiLine;Module._SetMultiLine(f,p)}t.author&&me(t),t.borderColor&&_e(t),Object.hasOwn(t,"fillColor")&&xe(t),t.fillTransparency&&Ge(t),t.quadPoints&&Te(t),t.borderStyle&&t.dashes&&nt(t),t.vertices&&tt(t),null==t.head&&null==t.tail||Module._SetLineType(t.annotPtr,B[t.head.toUpperCase()],B[t.tail.toUpperCase()]);var g=Module._GetPageRotation(t.pagePtr);"mod-annot"===t.operate?Module._UpdateAnnotAp(t.annotPtr,g):"mod-form"===t.operate&&Module._UpdateFormAp(t.annotPtr,g)})),e.on("FlattenPage",(function(e){var t=function(e){return he.apply(this,arguments)}({doc:e.doc,saveType:e.saveType,password:e.password,oldPassword:e.oldPassword});return t})),e.on("CreateAnnotation",(function(e){var t=e.doc,n=e.pagePtr,r=e.annotation;return"add-form"===r.operate?function(e,t,n){var r=n.type,o=n.date,a=n.fieldName,i=n.backgroundColor,u=n.checkStyle,l=n.rect,d=b[r.toUpperCase()],s=Module._CreateWidget(e,t,d),c=Ae("PDF FORM");if(c.code)return c;n.annotPtr=s,o&&Pe({annotPtr:s,date:o});i&&Ne({annotPtr:s,backgroundColor:i});u&&Ue({annotPtr:s,checkStyle:u});a&&ke({annotPtr:s,fieldName:a});var f=n.borderColor,p=n.borderWidth,g=n.borderStyle,A=n.isChecked,h=n.color,P=n.fontName,M=n.fontSize;(f||g||p)&&(!f&&(f="#43474D"),!g&&(g="solid"),!p&&0!==p&&(p=1),function(e){var t=e.annotPtr,n=e.borderColor,r=e.borderWidth,o=e.borderStyle;if(n){var a=v(n);Module._SetWidgetBorderRGBColor(t,a.R,a.G,a.B)}if(o){var i=U[o];Module._SetWidgetBorderStyle(t,i)}(0===r||r)&&be({annotPtr:t,borderWidth:r})}({annotPtr:s,borderColor:f,borderWidth:p,borderStyle:g}));switch(r){case"checkbox":(A||0===A)&&De({annotPtr:s,isChecked:A});break;case"radiobutton":(A||0===A)&&Le({annotPtr:s,isChecked:A});break;case"listbox":case"combobox":for(var m=n.items,y=n.selected,I=0;I<m.length;I++)Ke({annotPtr:s,item:{value:m[I].Value,index:I}});Oe({annotPtr:s,fontName:P,fontSize:M,color:h}),(y||0===y)&&He({annotPtr:s,selected:y});break;case"pushbutton":Oe({annotPtr:s,fontName:P,fontSize:M,color:h});var C=n.title,S=stringToNewUTF8(C);Module._SetButtonTitle(s,S),n.destPage&&Ye(n),n.url&&We(n);break;case"textfield":var x=n.isMultiLine,w=n.textAlignment,G=_[w.toUpperCase()];Module._SetMultiLine(s,x),Module._SetWidgetTextJustification(s,G),Module._SetTextFieldSpe(s,0),"contents"in n&&Qe({annotPtr:s,contents:n.contents}),Oe({annotPtr:s,fontName:P,fontSize:M,color:h})}if(Me({pagePtr:t,annotPtr:s,rect:l}),Module._UpdateFormAp(s),"signatureFields"===r){var T=n.imageBase64;if(T){var E=j(T);ComPDFKitJS.opened_image=[],ComPDFKitJS.opened_image[0]=E,Module._RemoveAP(s),Module._SetImageStampByStream(s,0,E.length,0),Module._SignWithName(s)}}return{annotPtr:s}}(t,n,r):function(e,t,n){var r=n.type,o=x[r.toUpperCase()],a=Module._CreateAnnot(e,t,o),i=Ae("PDF Annotation");if(i.code)return i;n.annotPtr=a;var u=n.color,l=n.borderColor,d=n.borderWidth,s=n.contents,c=n.date,f=n.opacity,p=n.fillTransparency,g=n.rect,A=n.author,h=n.fillColor,P=n.quadPoints,M=n.vertices,m=n.borderStyle,y=n.dashes;u&&"freetext"!==r&&Ie({annotPtr:a,color:u});l&&"freetext"!==r&&_e({annotPtr:a,borderColor:l});h&&"freetext"!==r&&xe({annotPtr:a,fillColor:h});s&&"freetext"!==r&&ye({annotPtr:a,contents:s});Pe({annotPtr:a,date:c}),isFinite(f)&&we({annotPtr:a,opacity:f});p&&Ge({annotPtr:a,fillTransparency:p});g&&Me({pagePtr:t,annotPtr:a,rect:g});A&&me({annotPtr:a,author:A});P&&Te({pagePtr:t,annotPtr:a,quadPoints:P});d&&be({annotPtr:a,borderWidth:d});m&&y&&nt({annotPtr:a,borderWidth:d,borderStyle:m,dashes:y});switch(o){case x.TEXT:break;case x.LINK:n.destPage&&Be(n),n.url&&Fe(n);break;case x.FREETEXT:var I=n.color,C=void 0===I?"rgb(0, 0, 0":I,S=n.fontSize,w=void 0===S?16:S,b=n.fontName,G=void 0===b?"Helvetica":b,T=n.fontStyle,E=void 0===T?"normal":T,R=n.fontWeight,F=void 0===R?"normal":R,D=n.textAlignment,L=void 0===D?"left":D;n.borderWidth;var U=n.borderColor,N=void 0===U?"rgb(0, 0, 0)":U,k=n.fillColor,O=void 0===k?"":k,H=n.contents;!function(e){var t=e.annotPtr,n=e.fontName,r=e.fontWeight,o=e.fontStyle,a=e.fontSize,i=e.color,u=e.textAlignment,l=e.contents,d=le({fontName:n,fontWeight:r,fontStyle:o}),s=_[u.toUpperCase()],c=stringToNewUTF8(d),f=stringToNewUTF8(l),p=v(i);Module._SetFreeText(t,c,a,p.R,p.G,p.B,s,f),Module._SetFreeTextType(t,0),Module._SetFreeTextBorderColor(t,0)}({annotPtr:a,color:C,fontName:G,fontSize:w,fontStyle:E,fontWeight:F,textAlignment:L,contents:void 0===H?"":H}),"fillColor"in n&&Se({annotPtr:a,fillColor:O}),"borderWidth"in n&&be({annotPtr:n.annotPtr,borderWidth:n.borderWidth}),"borderColor"in n&&Ce({annotPtr:a,borderColor:N});break;case x.POLYLINE:case x.POLYGON:M&&tt({pagePtr:t,annotPtr:a,vertices:M});break;case x.LINE:var Y=n.head,W=n.tail,Q=n.linePoints;null==Y&&null==W||Module._SetLineType(a,B[Y.toUpperCase()],B[W.toUpperCase()]),Ee({pagePtr:t,annotPtr:a,linePoints:Q});break;case x.SQUARE:case x.CIRCLE:!function(e){var t=e.annotPtr,n=e.borderWidth;be({annotPtr:t,borderWidth:n})}({annotPtr:a,borderWidth:d}),Ie({annotPtr:a,color:n.borderColor});break;case x.HIGHLIGHT:case x.UNDERLINE:case x.SQUIGGLY:case x.STRIKEOUT:var K=n.quadPoints;!function(e){var t=e.pagePtr,n=e.annotPtr,r=e.color,o=e.quadPoints;Ie({annotPtr:n,color:r}),Te({pagePtr:t,annotPtr:n,quadPoints:o})}({pagePtr:t,annotPtr:a,color:n.color,quadPoints:K});break;case x.STAMP:var q=n.stampType,J=Module._GetPageRotation(t);if("standard"===q){var X=function(e,t){var n=e.annotPtr,r=e.contents,o=stringToNewUTF8(r.replace(/ /g,""));Module._SetStandardStamp(n,o,t);var a=Ae("PDF Annotation STAMPS");if(a.code)return a}({annotPtr:a,contents:s},J);if(X)return X}else if("text"===q){n.annotPtr=a;var Z=function(e,t){var n=e.annotPtr,r=e.contents,o=e.time,a=e.stampShape,i=e.stampColor,u=stringToNewUTF8(r),l=stringToNewUTF8(o);Module._SetTextStamp(n,u,l,a,i,t);var d=Ae("PDF Annotation STAMPS");if(d.code)return d}(n,J);if(Z)return Z}else if("image"===q){n.annotPtr=a,n.doc=e;var V=function(e,t){var n=e.annotPtr,r=e.imageBase64;e.stampShape,e.rect,e.doc;var o=j(r);ye({annotPtr:n,contents:"image"}),ComPDFKitJS.opened_image=[],ComPDFKitJS.opened_image[0]=o,Module._SetImageStampByStream(n,0,o.length,t);var a=Ae("PDF Annotation STAMPS");if(a.code)return a}(n,J);if(V)return V}break;case x.INK:var z=n.inkPointes,$=n.borderColor;$&&Ie({annotPtr:a,color:$}),Re({pagePtr:t,annotPtr:a,inkPointes:z});break;case x.ARC:tt({pagePtr:t,annotPtr:a,vertices:n.arcPoints})}g&&Me({pagePtr:t,annotPtr:a,rect:g});var ee=Module._GetPageRotation(t);return Module._UpdateAnnotAp(n.annotPtr,ee),{annotPtr:a}}(t,n,r)})),e.on("GetAnnotRect",(function(e){var t=e.pagePtr,n=e.annotPtr;return Rect={},Module._GetAnnotRect(t,n),{left:Rect.Left,top:Rect.Top,right:Rect.Right,bottom:Rect.Bottom}})),e.on("SetAnnotRect",(function(e){var t=e.pagePtr,n=e.annotPtr,r=e.rect;Module._SetAnnotRect(t,n,r.left,r.right,r.bottom,r.top)})),e.on("RemoveAnnot",(function(e){var t=e.annotPtr;Module._RemoveAnnot(t);var n=Ae("PDF Annotation");if(n.code)return n})),e.on("RemoveFromPageIncludeReplyAnnot",(function(e){var t=e.pagePtr,n=e.annotPtr;Module._RemoveFromPageIncludeReplyAnnot(t,n);var r=Ae("PDF Annotation");if(r.code)return r})),e.on("GetCharIndexAtPos",(function(e){var t=e.pagePtr,n=e.textPtr,r=e.point,o=r.x,a=r.y;return-1!==Module._GetCharIndexAtPos(t,n,o,a,5,5)})),e.on("GetCharsRangeAtPos",(function(e){var t=e.pagePtr,n=e.textPtr,r=e.start,o=e.end;PDFRange={},Module._GetCharsRangeAtPos(t,n,r.x,r.y,o.x,o.y,5,5);var a=Module._GetTextContent(n,PDFRange.Location,PDFRange.Length),i=UTF8ToString(a);return TextRectArray=[],Module._GetRects(t,n,PDFRange.Location,PDFRange.Length),{textContent:i,textRects:TextRectArray}})),e.on("GetSelectionForWordAtPos",(function(e){var t=e.pagePtr,n=e.textPtr,r=e.start;e.end,Rect={},PDFRange={};var o=Module._GetSelectionForWordAtPos(t,n,r.x,r.y,5,5),a=UTF8ToString(o);return TextRectArray=[],Module._GetRects(t,n,PDFRange.Location,PDFRange.Length),{textContent:a,textRects:TextRectArray}})),e.on("XFDFExportAnnotations",(function(e){var t=function(e){XFDFData={},Module._XFDFExportAnnotations(e);var t=Ae("PDF Annotation XFDF");if(t.code)return t;return XFDFData}(e.doc);return t})),e.on("XFDFImportAnnotations",(function(e){var t=e.doc,n=e.xfdfBuffer,r=_malloc(n.length);Module.HEAPU8.set(n,r),Module._XFDFImportAnnotaitons(t,r,n.length),_free(r);var o=Ae("PDF Annotation XFDF");if(o.code)return o})),e.on("SaveDocumentByStream",(function(e){return pe(e)})),e.on("SetPassword",(function(e){var t=e.doc,n=e.password,r=stringToNewUTF8(n);Module._SetPassword(t,r,"","","","","","")})),e.on("CompareDocument",function(){var e=a(n().mark((function e(t){var r,o,a,i,u,l,d,s,c,f,p,g,A,h,P,M,m,v,y,I,C,S,_,x,w,b,G,T,E,R,B,F,D,L,U,N,k,O,H,Y,W,Q,K,q,J,j;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,o=r.leftFile,a=r.rightFile,i=r.leftFilePassword,u=r.rightFilePassword,e.next=4,X(o);case 4:return l=e.sent,d=Module._InitDocument(),ComPDFKitJS.opened_files[1]=l,s=stringToNewUTF8(i),Module._LoadDocumentByStream(d,1,l.length,s),c=Module._GetPageCount(d),e.next=12,X(a);case 12:if(f=e.sent,p=Module._InitDocument(),ComPDFKitJS.opened_files[2]=f,g=stringToNewUTF8(u),Module._LoadDocumentByStream(p,2,f.length,g),A=Module._GetPageCount(p),h=Math.min(c,A),1!==r.type){e.next=58;break}P=r.replaceColor,M=r.insertColor,m=r.deleteColor,v=r.textCompare,y=r.imgCompare,I=Module._InitCompare(d,p),C=0,v&&y?C=2:y&&(C=1),S=ee(P),_=ee(M),x=ee(m),Module._SetReplaceResColor(I,255*S.R,255*S.G,255*S.B),Module._SetInsertResColor(I,255*_.R,255*_.G,255*_.B),Module._SetDeleteResColor(I,255*x.R,255*x.G,255*x.B),Module._SetReplaceResTransparency(I,127.5),Module._SetInsertResTransparency(I,127.5),Module._SetDeleteResTransparency(I,127.5),w=0;case 34:if(!(w<h)){e.next=47;break}if(b=Module._DoCompare(I,w,w,C,1),!(G=Ae("PDF COMPARE"))||!G.code){e.next=39;break}return e.abrupt("return",G);case 39:Module._GetCompareResultsCount(b,1),CompareResultArray=[],Module._GetCompareResults(d,p,b,1),ResultsCountParams={},Module._GetResultsCountParams(b);case 44:w++,e.next=34;break;case 47:for(DataArray=[],Module._GenerateNewDoc(I),T=[],E=0;E<DataArray.length;E++)R=new Uint8Array(DataArray[E]),T.push(R);return DataArray=[],B=new Blob(T,{type:"application/pdf"}),F=fe(d,2),D=fe(p,2),e.abrupt("return",{oldDocument:F,newDocument:D,blobData:B});case 58:if(2!==r.type){e.next=82;break}if(L=r.inColor,U=r.newColor,N=r.inTransparency,k=r.newTransparency,O=r.coverType,H=Module._InitCompareDrawing(d,p),Module._SetBlendMode(H,O),Module._SetNoFill(H,1),Y=N/100,W=k/100,Module._SetStrokeAlphaCompare(H,Y),Module._SetStrokeAlphaCompared(H,W),Module._SetFillAlphaCompare(H,Y),Module._SetFillAlphaCompared(H,W),Q=ee(L),K=ee(U),Module._SetColorCompare(H,255*Q.R,255*Q.G,255*Q.B),Module._SetColorCompared(H,255*K.R,255*K.G,255*K.B),Module._CompareContent(H),!(q=Ae("PDF COMPARE"))||!q.code){e.next=77;break}return e.abrupt("return",q);case 77:return J=Module._GetDocGenerate(H),e.next=80,pe({doc:J});case 80:return j=e.sent,e.abrupt("return",{blobData:j});case 82:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("GetOutlines",(function(e){var t=e.doc,n=[];return ae(t,Module._GetOutlineRoot(t),n,-1),n})),e.on("InitText",(function(e){var t=e.pagePtr;return Module._InitText(t)})),e.on("ClearText",(function(e){var t=e.textPtr;Module._ClearText(t)})),e.on("ClearPage",(function(e){var t=e.pagePtr;Module._ClearPage(t)})),e.on("Search",(function(e){for(var t=e.pagesPtr,n=e.value,r=stringToNewUTF8(n),o=null,a=[],i=0;i<t.length;i++){var u=t[i],l=u.pageNumber,d=u.pagePtr,s=u.textPtr,c=Module._InitTextFind();if(Module._FindStart(s,c,r,0,0),(o=Ae("PDF VIEWER SEARCH")).code)return o;var f=1,p=0;do{if(TextFindItemArray=[],f=Module._FindNext(d,s,c)){for(var g=TextFindItemArray.length,A=[],h=0;h<g;h++){var P=TextFindItemArray[h],M=P.Left,m=P.Top,v=P.Right,y=P.Bottom;A.push({left:M,top:m,right:v,bottom:y})}a.push({pageNum:l,quads:A,content:TextFindItemArray[0].Content.replace(/\r?\n/gm," "),pageSearchIndex:p,searchValue:n}),p++}}while(f);Module._ClearTextFind(c)}return{searchResults:a}})),e.on("InitEditPage",(function(e){var t=e.pagePtr;return{editPagePtr:Module._InitEditPage(t),pagePtr:t}})),e.on("ClearEditPage",(function(e){Module._ClearEditPage(e)})),e.on("BeginEdit",(function(e){var t=e.editPagePtr,n=e.type;return Module._BeginEdit(t,n),Ae("PDF CONTENT EDIT")})),e.on("EndEdit",(function(e){Module._EndEdit(e)})),e.on("GetEditAreaCount",(function(e){return Module._GetEditAreaCount(e)})),e.on("GetEditArea",(function(e){var t=e.editPagePtr,n=e.index;return Module._GetEditArea(t,n)})),e.on("IsTextArea",(function(e){return Module._IsTextArea(e)})),e.on("IsImageArea",(function(e){return Module._IsImageArea(e)})),e.on("SetFrame",(function(e){var t=e.pagePtr,n=e.editAreaPtr,r=e.rect;Module._SetFrame(t,n,r.left,r.right,r.bottom,r.top,!0)})),e.on("GetFrame",(function(e){var t=e.pagePtr,n=e.editAreaPtr;return Rect={},Module._GetFrame(t,n),{left:Rect.Left,top:Rect.Top,right:Rect.Right,bottom:Rect.Bottom}})),e.on("GetBeginAndEndCharPlace",(function(e){return EditCharPlace={},EndEditCharPlace={},Module._GetBeginAndEndCharPlace(e),{start:EditCharPlace,end:EndEditCharPlace}})),e.on("GetTextByRange",(function(e){var t=e.editAreaPtr,n=e.start,r=e.end;return Module._GetTextByRange(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex),U8StringData})),e.on("GetText",function(){var e=a(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return EditCharPlace={},EndEditCharPlace={},e.next=4,Module._GetBeginAndEndCharPlace(t);case 4:return e.next=6,Module._GetTextByRange(t,EditCharPlace.SectionIndex,EditCharPlace.LineIndex,EditCharPlace.RunIndex,EditCharPlace.CharIndex,EndEditCharPlace.SectionIndex,EndEditCharPlace.LineIndex,EndEditCharPlace.RunIndex,EndEditCharPlace.CharIndex);case 6:return e.abrupt("return",U8StringData);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("SelectCharsRangeAtPos",(function(e){var t=e.pagePtr,n=e.editAreaPtr,r=e.startPoint,o=e.endPoint;return EditCharPlace={},EndEditCharPlace={},Module._SelectCharsRangeAtPos(t,n,r.x,r.y,o.x,o.y),{start:EditCharPlace,end:EndEditCharPlace}})),e.on("GetSectionAtPos",(function(e){var t=e.pagePtr,n=e.editAreaPtr,r=e.pointX,o=e.pointY;return EditCharPlace={},EndEditCharPlace={},Module._GetSectionAtPos(t,n,r,o),{start:EditCharPlace,end:EndEditCharPlace}})),e.on("GetTextCursorPoints",(function(e){var t=e.pagePtr,n=e.editAreaPtr,r=e.char;return CursorPoints={},Module._GetTextCursorPoints(t,n,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex),CursorPoints})),e.on("GetPrevCharPlace",(function(e){var t=e.editAreaPtr,n=e.char;return EditCharPlace={},EndEditCharPlace={},Module._GetPrevCharPlace(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex),{start:EditCharPlace,end:EndEditCharPlace}})),e.on("GetNextCharPlace",(function(e){var t=e.editAreaPtr,n=e.char;return EditCharPlace={},EndEditCharPlace={},Module._GetNextCharPlace(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex),{start:EditCharPlace,end:EndEditCharPlace}})),e.on("GetUpCharPlace",(function(e){var t=e.editAreaPtr,n=e.char;return EditCharPlace={},EndEditCharPlace={},Module._GetUpCharPlace(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex),{start:EditCharPlace,end:EndEditCharPlace}})),e.on("GetDownCharPlace",(function(e){var t=e.editAreaPtr,n=e.char;return EditCharPlace={},EndEditCharPlace={},Module._GetDownCharPlace(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex),{start:EditCharPlace,end:EndEditCharPlace}})),e.on("InsertText",(function(e){var t=e.editAreaPtr,n=e.char,r=e.text;EditCharPlace={};var o=stringToNewUTF8(r);return Module._InsertText(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,o,!0),EditCharPlace})),e.on("BackSpaceChar",(function(e){var t=e.editAreaPtr,n=e.char;return EditCharPlace={},Module._BackSpaceChar(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,!0),EditCharPlace})),e.on("DeleteChar",(function(e){var t=e.editAreaPtr,n=e.char;return EditCharPlace={},Module._DeleteChar(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,!0),EditCharPlace})),e.on("DeleteChars",(function(e){var t=e.editAreaPtr,n=e.start,r=e.end;return EditCharPlace={},Module._DeleteChars(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex,!0),EditCharPlace})),e.on("GetSelectLineRectsCounts",(function(e){var t=e.editAreaPtr,n=e.start,r=e.end;return Module._GetSelectLineRectsCounts(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex)})),e.on("GetSelectLineRects",(function(e){var t=e.pagePtr,n=e.editAreaPtr,r=e.start,o=e.end;return RectArray=[],Module._GetSelectLineRects(t,n,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex,o.SectionIndex,o.LineIndex,o.RunIndex,o.CharIndex),RectArray})),e.on("SetCharsFontColor",(function(e){var t=e.editAreaPtr,n=e.start,r=e.end,o=function(e){var t=m(e);if("hex"===t)return I(e);if("rgb"===t){var n=e.match(/(\d+),\s*(\d+),\s*(\d+)/);return n?{R:parseInt(n[1]),G:parseInt(n[2]),B:parseInt(n[3])}:{error:"Invalid RGB format"}}if("hsl"===t){var r=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!r)return{error:"Invalid HSL format"};var o=parseInt(r[1]),a=parseInt(r[2])/100,i=parseInt(r[3])/100;return C(o,a,i)}console.error({message:"Invalid color value"})}(e.color);Module._SetCharsFontColor(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex,o.R,o.G,o.B,!0)})),e.on("SetCharsFontTransparency",(function(e){var t=e.editAreaPtr,n=e.start,r=e.end,o=e.opacity;Module._SetCharsFontTransparency(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex,o,!0)})),e.on("SetTextAligningSection",(function(e){var t=e.editAreaPtr,n=e.char,r=e.alignType;Module._SetTextAligningSection(t,r,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,!0)})),e.on("SetTextAligningRange",(function(e){var t=e.editAreaPtr,n=e.start,r=e.end,o=e.alignType;Module._SetTextAligningRange(t,o,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex,!0)})),e.on("SetCharsFontSize",(function(e){var t=e.editAreaPtr,n=e.start,r=e.end,o=e.fontSize;Module._SetCharsFontSize(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex,o,!0,!0)})),e.on("SetFontFromNativeTrueTypeFont",(function(e){var t=e.editAreaPtr,n=e.start,r=e.end,o=e.fontFamily,a=stringToNewUTF8(o);Module._SetFontFromNativeTrueTypeFont(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex,a,!0)})),e.on("RefreshRange",(function(e){var t=e.editAreaPtr,n=e.start,r=e.end;return EditCharPlace={},EndEditCharPlace={},Module._RefreshRange(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex),{start:EditCharPlace,end:EndEditCharPlace}})),e.on("SetCharsFontStyle",function(){var e=a(n().mark((function e(t){var r,o,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.editAreaPtr,o=t.start,a=t.end,i=t.fontStyle,Module["_"+i](r,o.SectionIndex,o.LineIndex,o.RunIndex,o.CharIndex,a.SectionIndex,a.LineIndex,a.RunIndex,a.CharIndex,!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("CreateNewTextArea",(function(e){var t=e.pagePtr,n=e.editPagePtr,r=e.rect,o=e.fontData,a=e.alignType;return Module._CreateNewTextArea(t,n,r.left,r.right,r.bottom,r.top,stringToNewUTF8(o.fontName),o.fontSize,o.r,o.g,o.b,o.opacity,o.isBold,o.italic,a,!0)})),e.on("RemoveEditAreaByIndex",(function(e){var t=e.editPagePtr,n=e.editAreaIndex;Module._RemoveEditAreaByIndex(t,n,!0)})),e.on("RemoveEditArea",(function(e){var t=e.editPagePtr,n=e.editAreaPtr;Module._RemoveEditArea(t,n,!0)})),e.on("CopyArea",(function(e){var t=e.editPagePtr,n=e.editAreaPtr;return Module._CopyArea(t,n)})),e.on("PasteArea",(function(e){var t=e.pagePtr,n=e.editPagePtr,r=e.editAreaInfoPtr,o=e.rect,a=n;n||(a=Module._InitEditPage(t),Module._BeginEdit(a,3));var i=Module._PasteArea(t,a,r,o.left+5,o.top+5,!0);return n||(Module._EndEdit(a),Module._ClearEditPage(a)),i})),e.on("GetCopyAreaContent",(function(e){var t=e.editPagePtr,n=e.editAreaInfoPtr;return Module._GetCopyAreaContent(t,n),U8StringData})),e.on("GetTextStyle",(function(e){var t=e.editAreaPtr,n=e.char;return EditTextStyle={},Module._GetTextStyle(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex),EditTextStyle})),e.on("GetBaseFontName",(function(e){var t=e.editAreaPtr,n=e.char;return Module._GetBaseFontName(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex),U8StringData})),e.on("createEditorDoc",function(){var e=a(n().mark((function e(t){var r,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.doc,o=t.password,e.next=3,se(r,o);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("GetTextSectionAlignType",function(){var e=a(n().mark((function e(t){var r,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.editAreaPtr,o=t.char,e.abrupt("return",Module._GetTextSectionAlignType(r,o.SectionIndex,o.LineIndex,o.RunIndex,o.CharIndex));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("InsertPage",(function(e){var t=e.doc,n=e.index,r=e.width,o=e.height,a=Module._InsertPage(t,n,r,o),i=Ae("PDF EDITOR PAGE");return i.code?i:{status:a}})),e.on("ImportPagesAtIndex",function(){var e=a(n().mark((function e(t){var r,o,a,i,u,l,d,c,f,p,g,A,h,P,M,m,v,y;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.doc,o=t.file,a=t.range,i=t.index,u=t.password,e.next=3,X(o);case 3:if(l=e.sent,d=Module._InitDocument(),c=ComPDFKitJS.opened_files.length||0,ComPDFKitJS.opened_files[c]=l,f=stringToNewUTF8(u),Module._LoadDocumentByStream(d,c,l.length,f),p=Module._GetPageCount(d),A=!1,"all"===a?g="1-"+p:"odd"===a?g=Array.from({length:p},(function(e,t){return t+1})).filter((function(e){return e%2!=0})).join(","):"even"===a?g=Array.from({length:p},(function(e,t){return t+1})).filter((function(e){return e%2==0})).join(","):(h=p,P=a.replace(/\s/g,""),M=P.split(","),m=[],M.forEach((function(e){if(e.includes("-")){var t=e.split("-").map((function(e){return parseInt(e)})),n=s(t,2),r=n[0],o=n[1];if(r<=0&&(A=!0),r>h)return;o>h&&(o=h),m.push(r===h?r.toString():"".concat(r,"-").concat(o))}else{var a=parseInt(e);a<=0&&(A=!0),a<=h&&m.push(a.toString())}})),g=m.join(",")),g&&!A){e.next=14;break}return e.abrupt("return",0);case 14:if(g=stringToNewUTF8(g),v=Module._ImportPagesAtIndex(r,d,g,i),!(y=Ae("PDF EDITOR PAGE")).code){e.next=19;break}return e.abrupt("return",y);case 19:return ComPDFKitJS.opened_files.pop(),e.abrupt("return",{status:v});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("RemovePage",(function(e){var t=e.doc,n=e.index,r=Module._RemovePage(t,n),o=Ae("PDF EDITOR PAGE");return o.code?o:{status:r}})),e.on("RotatePage",(function(e){var t=e.pagePtr,n=e.rotation;Module._RotatePage(t,n);var r=Ae("PDF EDITOR PAGE");if(r.code)return r})),e.on("GetPageWithoutParse",(function(e){var t=e.doc,n=e.index;return Module._GetPageWithoutParse(t,n)})),e.on("CopyPage",(function(e){var t=e.doc,n=e.index,r=stringToNewUTF8(n+1+""),o=Module._ImportPagesAtIndex(t,t,r,n+1),a=Ae("PDF EDITOR PAGE");return a.code?a:{status:o}})),e.on("GetPageRotation",(function(e){return Module._GetPageRotation(e)})),e.on("ClearDocument",(function(e){Module._ClearDocument(e),ComPDFKitJS.opened_files=[]})),e.on("ExtractPage",function(){var e=a(n().mark((function e(t){var r,o,a,i,u,l,d,s,c,f,p,g,A,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.doc,o=t.range,a=t.separateFile,i=[],!a){e.next=20;break}u=0;case 4:if(!(u<o.length)){e.next=18;break}if(l=o[u]+1+"",d=stringToNewUTF8(l),s=Module._InitDocument(),Module._CreateDocument(s),Module._ImportPagesAtIndex(s,r,d,0),!(c=Ae("PDF EDITOR PAGE")).code){e.next=13;break}return e.abrupt("return",c);case 13:f=fe(s,2),i.push({name:l,blobData:f});case 15:u++,e.next=4;break;case 18:e.next=29;break;case 20:if(p=stringToNewUTF8(o),g=Module._InitDocument(),Module._CreateDocument(g),Module._ImportPagesAtIndex(g,r,p,0),!(A=Ae("PDF EDITOR PAGE")).code){e.next=27;break}return e.abrupt("return",A);case 27:h=fe(g,2),i.push(h);case 29:return e.abrupt("return",{blobDataList:i});case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("MovePage",(function(e){var t=e.doc,n=e.index,r=e.targetIndex,o=Module._MovePage(t,n,r),a=Ae("PDF EDITOR PAGE");return a.code?a:{status:o}})),e.on("CreateNewImageAreaByStream",function(){var e=a(n().mark((function e(t){var r,o,a,i,u,l,d,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pagePtr,o=t.editPagePtr,a=t.rect,i=t.imageBase64,u=j(i),ComPDFKitJS.opened_image=[],ComPDFKitJS.opened_image[0]=u,l=Module._CreateNewImageAreaByStream(r,o,a.left,a.right,a.bottom,a.top,0,u.length,!0),(d=Module._GetPageRotation(r))%4!=0&&(s=90*d,Module._RotateImage(l,s,!1)),e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("ReplaceImageAreaByStream",function(){var e=a(n().mark((function e(t){var r,o,a,i,u,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pagePtr,o=t.editPagePtr,a=t.editAreaPtr,i=t.rect,u=t.imageBase64,l=j(u),ComPDFKitJS.opened_image=[],ComPDFKitJS.opened_image[0]=l,e.abrupt("return",Module._ReplaceImageAreaByStream(r,o,a,i.left,i.right,i.bottom,i.top,0,l.length,!0));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("RotateImage",(function(e){var t=e.editAreaPtr,n=e.angle;return Module._RotateImage(t,n,!0)})),e.on("HorizontalMirrorImage",(function(e){return Module._HorizontalMirrorImage(e,!0)})),e.on("VerticalMirrorImage",(function(e){return Module._VerticalMirrorImage(e,!0)})),e.on("SetImageTransparency",(function(e){var t=e.editAreaPtr,n=e.opacity;return Module._SetImageTransparency(t,n,!0)})),e.on("GetImageTransparency",(function(e){return Module._GetImageTransparency(e)})),e.on("GetImageAreaSize",(function(e){return ImageAreaInfo={},Module._GetImageAreaSize(e),{width:ImageAreaInfo.Width,height:ImageAreaInfo.Height,stride:ImageAreaInfo.Stride}})),e.on("ExtractOriginalImage",(function(e){var t=function(e){for(var t=e.editAreaPtr,n=e.width,r=e.height,o=e.stride,a=parseInt(n)*parseInt(r),i=_malloc(o*r),u=0;u<a;u++)Module.HEAP32[i/4+u]=0;Module._GetImageAreaData(t,i);for(var l=new Uint8Array(o*r),d=0;d<r;d++)for(var s=0;s<n;s++){var c=d*o+4*s,f=d*n*4+4*s;l[f]=Module.HEAPU8[i+c+2],l[f+1]=Module.HEAPU8[i+c+1],l[f+2]=Module.HEAPU8[i+c],l[f+3]=Module.HEAPU8[i+c+3]}return _free(i),l}(e);return{imageArray:t}})),e.on("CutWithRect",(function(e){var t=e.pagePtr,n=e.editAreaPtr,r=e.rect;Module._CutWithRect(t,n,r.left,r.right,r.bottom,r.top,!0)})),e.on("GetClipRect",(function(e){var t=e.pagePtr,n=e.editAreaPtr;return Rect={},Module._GetClipRect(t,n),{left:Rect.Left,top:Rect.Top,right:Rect.Right,bottom:Rect.Bottom}})),e.on("SetClipRect",(function(e){var t=e.pagePtr,n=e.editAreaPtr,r=e.rect;Module._SetClipRect(t,n,r.left,r.right,r.bottom,r.top,!0)})),e.on("RemoveSignature",(function(e){var t=e.doc,n=e.signaturePtr;return Module._RemoveSignature(t,n,!0)})),e.on("AddToTrustedCertificates",(function(e){return function(e){var t=e.signerPtr,n=Module._GetSignCert(t);if(n){return CertArray=[],!!Module._ExportToFilePath(n,0)&&CertArray[0]}return!1}(e)})),e.on("CreateReplyAnnotation",(function(e){!function(e,t,n){var r=n.author,o=n.date,a=n.contents,i=n.title,u=Module._CreateReplyAnnotation(e,t);r&&me({annotPtr:u,author:r});a&&ye({annotPtr:u,contents:a});o&&Pe({annotPtr:u,date:o});i&&ve({annotPtr:u,title:i})}(e.pagePtr,e.annotPtr,e.reply)})),e.on("CreateReplyStateAnnotation",(function(e){var t=e.pagePtr,n=e.annotPtr,r=e.state,o=H[r],a=Module._CreateReplyStateAnnotation(t,n,o);return newStateInt=Module._GetState(a),{annotPtr:a,state:Y[newStateInt]}})),e.on("GetReplyAnnotation",(function(e){return ze(e.pagePtr,e.annotPtr)})),e.on("EditReplyAnnotation",(function(e){var t=e.reply;t.author&&me(t),t.contents&&ye(t),t.date&&Pe(t),t.title&&ve(t)})),e.on("SetState",(function(e){var t=e.reviewAnnotState,n=e.markedAnnotState;if(n){var r=H[n.state.toUpperCase()];Module._SetState(n.annotPtr,r);var o=Module._GetState(n.annotPtr);return{annotPtr:n.annotPtr,state:Y[o]}}if(t){var a=H[t.state.toUpperCase()];Module._SetState(t.annotPtr,a);var i=Module._GetState(t.annotPtr);return{annotPtr:t.annotPtr,state:Y[i]}}})),e.on("CanRedo",(function(e){return Module._CanRedo(e)})),e.on("CanUndo",(function(e){return Module._CanUndo(e)})),e.on("Redo",(function(e){return EditCharPlace={},{editAreaPtr:Module._Redo(e),editCharPlace:EditCharPlace}})),e.on("Undo",(function(e){return EditCharPlace={},{editAreaPtr:Module._Undo(e),editCharPlace:EditCharPlace}})),e.on("GetLineLeading",(function(e){var t=e.editAreaPtr,n=e.char;return Module._GetLineLeading(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex)})),e.on("SetLineLeading",(function(e){var t=e.editAreaPtr,n=e.char,r=e.spacing;Module._SetLineLeading(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r)})),e.on("GetSectionAfterLeading",(function(e){var t=e.editAreaPtr,n=e.char;return Module._GetSectionAfterLeading(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex)})),e.on("SetSectionAfterLeading",(function(e){var t=e.editAreaPtr,n=e.char,r=e.spacing;Module._SetSectionAfterLeading(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r)})),e.on("GetCharacterSpacing",(function(e){var t=e.editAreaPtr,n=e.start,r=e.end;return Module._GetCharacterSpacing(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex)})),e.on("SetCharacterSpacing",(function(e){var t=e.editAreaPtr,n=e.start,r=e.end,o=e.spacing;Module._SetCharacterSpacing(t,n.SectionIndex,n.LineIndex,n.RunIndex,n.CharIndex,r.SectionIndex,r.LineIndex,r.RunIndex,r.CharIndex,o)})),e.on("ApplyRedaction",(function(e){var t=e.annotPtr;return Module._ApplyRedaction(t)})),e.on("ApplyRedactionPage",(function(e){var t=e.pagePtr;return Module._ApplyRedactionPage(t)})),e.on("ErasureRedactionFromRect",(function(e){var t=e.pagePtr,n=e.rect;return Module._ErasureRedactionFromRect(t,n.left,n.right,n.bottom,n.top)})),e.on("GetStampRect",(function(e){var t=e.doc,n=e.pagePtr,r=e.annotation,o=r.contents,a=r.time,i=r.stampShape,u=r.stampColor,l=x[r.type.toUpperCase()],d=Module._CreateAnnot(t,n,l),s=stringToNewUTF8(o),c=stringToNewUTF8(a);Module._SetTextStamp(d,s,c,i,u,0);var f=Ae("PDF Annotation STAMPS");return f.code?f:(Module._UpdateAnnotAp(d,0),Module._GetAnnotRect(n,d),Module._RemoveAnnot(d),{left:Rect.Left,top:Rect.Top,right:Rect.Right,bottom:Rect.Bottom})})),e.on("GetLayers",(function(e){var t=Module._getLayerTree(e),n=Module._getRootNode(t),r=[],o=[],a=Module._getChildrenCount(n);return r.push.apply(r,c(function e(t,n){for(var r=[],a=0;a<n;a++){var i=Module._getChild(t,a);Module._getName(i);var u=Module._isLocked(i),l=Module._getLayerNodeDict(i),d=Module._getViewUsage(i),s=1!==d?1:0;s&&l&&o.push(l);var f=Module._getExportUsage(i);LayerPrintData={},Module._getPrintUsage(i),LayerZoomData={},Module._getZoomUsage(i);var p=Module._getChildrenCount(i),g=[];p>0&&g.push.apply(g,c(e(i,p))),r.push({node:i,ocg:l,name:U8StringData,isLocked:u,visible:s,defaultVisible:s,children:g,viewState:d,exportState:0===f?0:1===f?1:2,printState:0===LayerPrintData.print_state?0:1===LayerPrintData.print_state?1:2,zoom:LayerZoomData})}return r}(n,a))),{layers:r,ocgsPtr:o}})),e.on("SetLayer",(function(e){var t=e.node,n=e.name,r=e.defaultVisible,o=e.isLocked,a=e.printState,i=e.exportState;n&&Module._setName(t,stringToNewUTF8(n)),e.hasOwnProperty("defaultVisible")&&Module._setViewUsage(t,!r),e.hasOwnProperty("isLocked")&&Module._setLocked(t,o),e.hasOwnProperty("printState")&&Module._setPrintUsage(t,stringToNewUTF8(""),0===a?0:1===a?1:3),e.hasOwnProperty("exportState")&&Module._setExportUsage(t,0===i?0:1===i?1:3)})),e.on("RenderLayerBitmap",(function(e){var t=function(e){for(var t=e.pagePtr,n=e.x,r=e.y,o=e.width,a=e.height,i=e.mode,u=e.flag,l=e.ocgsPtr,d=e.form,s=parseInt(o)*parseInt(a),c=4*s,f=_malloc(c),p=0;p<s;p++)Module.HEAP32[f/4+p]=0;var g=l.length,A=_malloc(4*g);for(p=0;p<g;p++)Module.HEAP32[A/4+p]=l[p];Module._RenderLayerBitmap(t,n,r,o,a,i,f,u,A,g,d);var h=Ae("PDF VIEWER RENDER");if(h.code)return _free(f),h;var P=new Uint8Array(c);for(p=0;p<c;p+=4)P[p]=Module.HEAPU8[f+p+2],P[p+1]=Module.HEAPU8[f+p+1],P[p+2]=Module.HEAPU8[f+p],P[p+3]=Module.HEAPU8[f+p+3];return _free(f),{imageArray:P}}({pagePtr:e.pagePtr,x:e.x,y:e.y,width:e.width,height:e.height,ocgsPtr:e.ocgsPtr,mode:-1,flag:1,form:1});return t})),e.on("RenderLayerBitmapWithMatrix",(function(e){var t=e.pagePtr,n=e.scale,r=e.left,o=e.right,a=e.bottom,i=e.top,u=e.mode,l=void 0===u?-1:u,d=e.flag,s=void 0===d?0:d,c=e.ocgsPtr,f=e.form,p=function(e){for(var t=e.pagePtr,n=e.scale,r=e.left,o=e.right,a=e.bottom,i=e.top,u=e.mode,l=e.flag,d=e.ocgsPtr,s=e.form,c=parseInt(o-r)*parseInt(a-i),f=4*c,p=_malloc(f),g=0;g<c;g++)Module.HEAP32[p/4+g]=0;var A=d.length,h=_malloc(4*A);for(g=0;g<A;g++)Module.HEAP32[h/4+g]=d[g];Module._RenderPageBitmapWithMatrix2(t,n,r,o,a,i,u,p,l,h,A,s);var P=Ae("PDF VIEWER RENDER");if(P.code)return _free(p),P;var M=new Uint8Array(f);for(g=0;g<f;g+=4)M[g]=Module.HEAPU8[p+g+2],M[g+1]=Module.HEAPU8[p+g+1],M[g+2]=Module.HEAPU8[p+g],M[g+3]=Module.HEAPU8[p+g+3];return _free(p),{imageArray:M}}({pagePtr:t,scale:n,left:r,right:o,bottom:a,top:i,mode:l,flag:s,ocgsPtr:c,form:void 0===f?0:f});return p})),e.on("ExportLayers",(function(e){for(var t=e.doc,n=e.ocgsPtr,r=n.length,o=4*n.length,a=_malloc(o),i=0;i<n.length;i++)Module.HEAP32[a/4+i]=n[i];return fe(Module._exportDocumentLayer(t,a,r),2)})),e.on("InitColorList",(function(e){return Module._initColorList(e)})),e.on("GetPDFSeparationColor",function(){var e=a(n().mark((function e(t){var r,o,a,i,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pagePtr,o=t.fileData,a=o instanceof ArrayBuffer?new Uint8Array(o):o,i=_malloc(a.length),Module.HEAPU8.set(a,i),u=Module._getPDFSeparationColor(r,i,a.length),_free(i),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.on("GetColorsList",(function(e){SepColorsArray=[],Module._getColorsList(e);for(var t=[],n=0;n<SepColorsArray.length;n++){var r=SepColorsArray[n];t.push({index:n,name:r.ColorName,color:"rgb(".concat(r.R,", ").concat(r.G,", ").concat(r.B,")")})}return t})),e.on("GetSelectPointColor",(function(e){var t=e.pagePtr,n=e.sepColorPtr,r=e.point;return SelectPointColorArray=[],Module._getSelectPointColor(t,n,r.x,r.y),SelectPointColorArray})),e.on("RenderPageAndIgnoreColorByIndex",(function(e){var t=e.sepColorPtr,n=e.x,r=e.y,o=e.width,a=e.height,i=e.indexs,u=e.flag,l=void 0===u?0:u,d=e.rotate,s=function(e){for(var t=e.sepColorPtr,n=e.x,r=e.y,o=e.width,a=e.height,i=e.rotate,u=e.flag,l=e.indexs,d=parseInt(o)*parseInt(a),s=4*d,c=_malloc(s),f=0;f<d;f++)Module.HEAP32[c/4+f]=0;var p=l.length,g=_malloc(4*p);for(f=0;f<p;f++)Module.HEAP32[g/4+f]=l[f];Module._renderPageAndIgnoreColorByIndex(t,c,n,r,o,a,i,u,g,p);var A=Ae("PDF VIEWER COLOR RENDER");if(A.code)return _free(c),A;var h=new Uint8Array(s);for(f=0;f<s;f+=4)h[f]=Module.HEAPU8[c+f+2],h[f+1]=Module.HEAPU8[c+f+1],h[f+2]=Module.HEAPU8[c+f],h[f+3]=Module.HEAPU8[c+f+3];return _free(c),{imageArray:h}}({sepColorPtr:t,x:n,y:r,width:o,height:a,rotate:void 0===d?0:d,flag:l,indexs:i});return s})),e.on("CreateMeasurementAnnotation",(function(e){return function(e,t,n){var r="RECTANGLE"===n.type.toUpperCase()?"POLYGON":n.type.toUpperCase(),o=x[r],a=W[n.measureType.toUpperCase()],i=Module._CreateAnnot(e,t,o),u=Module._initRuler(e,i,a);n.captionType&&(MeasureInfo={},Module._getMeasureInfo(u),Module._SetMeasureInfo(u,MeasureInfo.factor,stringToNewUTF8(MeasureInfo.unit),stringToNewUTF8(MeasureInfo.decimalSymbol),stringToNewUTF8(MeasureInfo.thousandSymbol),stringToNewUTF8(MeasureInfo.display),MeasureInfo.precision,stringToNewUTF8(MeasureInfo.unitPrefix),stringToNewUTF8(MeasureInfo.unitSuffix),stringToNewUTF8(MeasureInfo.unitPosition),MeasureInfo.RulerBase,stringToNewUTF8(MeasureInfo.RulerBaseUnit),MeasureInfo.RulerTranslate,stringToNewUTF8(MeasureInfo.RulerTranslateUnit),K[n.captionType.toUpperCase()]));var l=Ae("PDF Annotation");if(l.code)return l;return n.pagePtr=t,n.annotPtr=i,n.rulerPtr=u,$e(e,n),{annotPtr:i,rulerPtr:u}}(e.doc,e.pagePtr,e.annotation)})),e.on("EditMeasurementAnnotation",(function(e){return $e(e.doc,e.annotation)})),e.on("GetMeasurementData",(function(e){return et(e.annotPtr,e.rulerPtr,e.type)})),e.on("GetMeasurementResult",(function(e){var t=e.annotPtr,n=e.rulerPtr,r=e.captionType,o=r?K[r.toUpperCase()]:Module._getCaptionTypes(t);return Module._getMeasurementResults(n,o)})),e.on("GetFactor",(function(e){return Module._getFactor(e)}))}}]);var t}();function ne(){return(ne=a(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(runtimeInitialized){e.next=5;break}return e.next=3,V(100);case 3:e.next=0;break;case 5:return e.abrupt("return",new Promise((function(e,t){e()})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){var t=e.doc,n=e.fileId,r=e.length,o=e.password,a=stringToNewUTF8(o);return Module._LoadDocumentByStream(t,n,r,a),PermissionsInfo={},Module._GetPermissionsInfo(t),PermissionsInfo}function oe(e){var t=e.doc,n=e.password,r=e.permissionPassword,o=void 0===r?"":r,a=e.permissions,i=void 0===a?"":a,u=stringToNewUTF8(n),l=o?stringToNewUTF8(o):"",d=i.allowsPrinting,s=i.allowsCopying,c=i.allowsDocumentChanges;return d=void 0===d||d,s=void 0===s||s,c=void 0===c||c,Module._SetPassword(t,u,l,d,1,s,c,1,1,1),Ae("PDF SECURITY ENCRYPT")}function ae(e,t,n,r){++r;var o=[];if(!Module._IsValid(t))return n;var a=Module._GetFirst(t);if(!Module._IsValid(a))return n;for(var i=ie(e,o,a,n,r);Module._IsValid(i);)i=ie(e,o,i,n,r);for(var u=0;u<o.length;u++)ae(e,o[u],n[u].children,r)}function ie(e,t,n,r,o){t.push(n),Module._GetTitle(n);var a={title:U8StringData,children:[],level:o};return function(e,t,n,r){1===n?(PDFDestination={},Module._GetOutlineDestination(e,t),r.pageNumber=PDFDestination.PageIndex+1,r.posX=PDFDestination.PosX<0?0:PDFDestination.PosX,r.posY=PDFDestination.PosY<0?0:PDFDestination.PosY):6===n&&(Module._GetUri(t),r.url=U8StringData)}(e,n,Module._GetOutlineActionType(e,n),a),r.push(a),Module._GetNext(n)}function ue(e,t,n){if(RGBColor={},n){var r=FontDa,o=y(r.R,r.G,r.B);e.color=o}else if(Module._GetAnnotRGBColor(t)){var a=RGBColor,i=y(a.R,a.G,a.B);e.color=i}else e.color="#000000"}function le(e){var t=e.fontName,n=e.fontWeight,r=e.fontStyle,o={Courier:{normal:"Courier",bold:"Courier-Bold",italic:"Courier-Oblique",boldItalic:"Courier-BoldOblique"},Helvetica:{normal:"Helvetica",bold:"Helvetica-Bold",italic:"Helvetica-Oblique",boldItalic:"Helvetica-BoldOblique"},Times:{normal:"Times",bold:"Times-Bold",italic:"Times-Italic",boldItalic:"Times-BoldItalic"}};return"normal"!==n&&"normal"!==r?o[t].boldItalic:"normal"!==n?o[t].bold:"normal"!==r?o[t].italic:o[t]?o[t].normal:t}function de(){return(de=a(n().mark((function e(r){var o,a,i,u,l,d,s,c,f,p,g,P,M,m,v,y,I,C,S,_,x,w,b,G;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.doc,a=[],i=[],u=Module._GetSignatureCount(o),l=0;case 5:if(!(l<u)){e.next=61;break}if(!(d=Module._InitSignature(o,l))){e.next=58;break}i.push(d),c={signaturePtr:d,signerList:s=[]},SignerArray=[],Module._GetSigner(d),f=[],p=0;case 16:if(!(p<SignerArray.length)){e.next=56;break}if(!(g=SignerArray[p])){e.next=53;break}if(P={signerPtr:g,isSignVerified:!1,isCertTrusted:!1,certificateList:f},!(M=Module._GetSignCert(g))){e.next=50;break}CertArray=[],Module._ExportToFilePath(M,1),ComPDFKitJS.opened_cert[0]=CertArray[0],CertArray=[],Module._GetSignCertChain(M),CertArray.push(M),m=0;case 29:if(!(m<CertArray.length)){e.next=39;break}return v=CertArray[m],e.next=33,Je(v);case 33:y=e.sent,I=t({certPtr:v},y),f.push(I);case 36:m++,e.next=29;break;case 39:if(C=ComPDFKitJS.opened_cert[0].length,S=Module._VerifyGetChain(d,M,0,C),_=void 0,_=S?null:Module._bEqualCert(M,0,C),S||_)for(P.isCertTrusted=!0,x=0;x<P.certificateList.length;x++)P.certificateList[x].isTrusted=!0;w=ComPDFKitJS.opened_files[0].length,1===Module._VerifySigner(d,g,0,w)&&(b=Module._VerifyDocument(o,d,0,w),P.isSignVerified=1===b),DiffInfoArray=[],Module._GetSignatureDiffInfo(d),P.diffInfo=DiffInfoArray;case 50:Module._GetTimeStampSignature(g),s.push(P);case 53:p++,e.next=16;break;case 56:SignerArray.length?(Rect={},Module._GetSignatureRect(o,d),c.rect={left:h(Rect.Left),top:h(Rect.Top),right:h(Rect.Right),bottom:h(Rect.Bottom)},Module._GetSignatureFieldName(d),c.fieldName=U8StringData,Module._GetSignatureName(d),c.name=f[0].subject[5]||"",Module._GetSignatureTime(d),G=U8StringData,c.date=A(G),Module._GetSignatureReason(d),c.reason=U8StringData,Module._GetSignatureLocation(d),c.location=U8StringData,c.pageIndex=Module._GetSignaturePageIndex(o,d),c.isDigital=1):c.isDigital=0,a.push(c);case 58:l++,e.next=5;break;case 61:return e.abrupt("return",{signatures:a,signaturePtrList:i});case 62:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){return ce.apply(this,arguments)}function ce(){return(ce=a(n().mark((function e(t,r){var o,a,i,u,l,d,s,c,f;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(DataArray=[],o=!!fontsJson||!!ComPDFKitJS.opened_DefFont[0],Module._SaveDocumentByStream(t,2,o),a=[],i=0;i<DataArray.length;i++)u=new Uint8Array(DataArray[i]),a.push(u);return DataArray=[],l=new Blob(a,{type:"application/pdf"}),e.next=9,X(l);case 9:return d=e.sent,s=Module._InitDocument(),c=ComPDFKitJS.opened_files.length,ComPDFKitJS.opened_files[c]=d,f=stringToNewUTF8(r),Module._LoadDocumentByStream(s,c,d.length,f),e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t){DataArray=[],1===t&&DataArray.push(ComPDFKitJS.opened_files[0]);var n=!!fontsJson||!!ComPDFKitJS.opened_DefFont[0];Module._SaveDocumentByStream(e,t,n);for(var r=[],o=0;o<DataArray.length;o++){var a=new Uint8Array(DataArray[o]);r.push(a)}return DataArray=[],new Blob(r,{type:"application/pdf"})}function pe(e){return ge.apply(this,arguments)}function ge(){return(ge=a(n().mark((function e(t){var r,o,a,i,u,l,d,s,c,f,p,g;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.doc,o=t.saveType,a=void 0===o?2:o,i=t.password,u=t.oldPassword,l=t.permissionPassword,d=void 0===l?"":l,s=t.permissions,c=void 0===s?"":s,f=null,2!==a){e.next=21;break}if(u!==i&&i||c){e.next=7;break}f=fe(r,a),e.next=19;break;case 7:if(!i&&!c){e.next=18;break}return e.next=10,se(r,u);case 10:if(p=e.sent,!(g=oe({doc:p,password:i,permissionPassword:d,permissions:c}))||!g.code){e.next=14;break}return e.abrupt("return",g);case 14:f=fe(p,a),ComPDFKitJS.opened_files.pop(),e.next=19;break;case 18:f=fe(r,a);case 19:e.next=22;break;case 21:f=fe(r,a);case 22:return e.abrupt("return",f);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){var t=Module._GetComPDFkitLicenseErrorcode(),n={code:t};if(t)switch(t){case-100:n.message="The license is invalid";break;case-101:n.message="The license is expired";break;case-102:n.message="The license does not support the current platform";break;case-103:case-104:n.message="The license does not support your domain";break;case-105:n.message="The license does not support the "+e;break;case-106:n.message="License has not been initialized";break;case-107:n.message="The license does not support the current version";break;case-1e3:n.message="Illegal access to the API interface";break;case-1001:n.message="Failed to read license file"}return n}function he(){return(he=a(n().mark((function e(t){var r,o,a,i,u,l,d,s,c,f,p,g,A,h,P,M;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.doc,o=t.saveType,a=void 0===o?2:o,i=t.password,u=void 0===i?"":i,l=t.oldPassword,d=void 0===l?"":l,e.next=3,se(r,d);case 3:for(s=e.sent,c=Module._GetPageCount(s),f=[],p=0;p<c;p++)g=Module._GetPage(s,p),f.push(g);A=0;case 8:if(!(A<f.length)){e.next=17;break}if(Module._FlattenPage(f[A]),!(h=Ae("PDF Annotation FLATTEN")).code){e.next=14;break}return ComPDFKitJS.opened_files.pop(),e.abrupt("return",h);case 14:A++,e.next=8;break;case 17:if(P=null,!u||u===d){e.next=26;break}if(!(M=oe({doc:s,password:u}))||!M.code){e.next=23;break}return ComPDFKitJS.opened_files.pop(),e.abrupt("return",M);case 23:P=fe(s,a),e.next=27;break;case 26:P=fe(s,a);case 27:return ComPDFKitJS.opened_files.pop(),e.abrupt("return",{blobData:P});case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e){var t=e.annotPtr,n=e.date;n=n||new Date;var r=stringToNewUTF8(g(n));Module._SetAnnotCreationDate(t,r),function(e){var t=e.annotPtr,n=e.date;n=n||new Date;var r=stringToNewUTF8(g(n));Module._SetAnnotRecentlyModifyDate(t,r)}({annotPtr:t,date:n})}function Me(e){var t=e.pagePtr,n=e.annotPtr,r=e.rect,o=r.left,a=r.right,i=r.bottom,u=r.top;return Module._SetAnnotRect(t,n,o,a,i,u)}function me(e){var t=e.annotPtr,n=e.author,r=stringToNewUTF8(n);return Module._SetAnnotAuthor(t,r)}function ve(e){var t=e.annotPtr,n=e.title,r=stringToNewUTF8(n);return Module._SetAnnotTitle(t,r)}function ye(e){var t=e.annotPtr,n=e.contents,r=stringToNewUTF8(n);return Module._SetAnnotContent(t,r)}function Ie(e){var t=e.annotPtr,n=v(e.color);return!!Module._SetAnnotRGBColor(t,n.R,n.G,n.B)}function Ce(e){var t=e.annotPtr,n=v(e.borderColor);return!!Module._SetFreeTextBorderColor(t,n.R,n.G,n.B)}function Se(e){var t=e.annotPtr,n=e.fillColor;if(n){var r=v(n);return!!Module._SetFreeTextBgColor(t,r.R,r.G,r.B)}Module._ClearFreeTextBgColor(t)}function _e(e){var t=e.annotPtr,n=v(e.borderColor);return!!Module._SetAnnotBorderRGBColor(t,n.R,n.G,n.B)}function xe(e){var t=e.annotPtr,n=e.fillColor;if(!n)return Module._ClearAnnotFilledRGBColor(t);var r=v(n);return!!Module._SetAnnotFilledRGBColor(t,r.R,r.G,r.B)}function we(e){var t=e.annotPtr,n=e.opacity,r=void 0===n?1:n;return Module._SetAnnotTransparency(t,r)}function be(e){var t=e.annotPtr,n=e.borderWidth;Module._SetAnnotBorderWidth(t,n)}function Ge(e){var t=e.annotPtr,n=e.fillTransparency,r=void 0===n?1:n;return Module._SetAnnotFilledTransparency(t,r)}function Te(e){for(var t=e.pagePtr,n=e.annotPtr,r=e.quadPoints,o=[],a=0;a<r.length;a++){var i=r[a];o.push(i.PointX,i.PointY)}for(var u=o.length,l=_malloc(4*u),d=0;d<u;d++)Module.HEAPF32[l/4+d]=o[d];var s=Module._SetQuadPoints(t,n,l,u);return _free(l),s}function Ee(e){var t=e.pagePtr,n=e.annotPtr,r=e.linePoints;return Module._SetLinePoint(t,n,r[0],r[1],r[2],r[3])}function Re(e){for(var t=e.pagePtr,n=e.annotPtr,r=e.inkPointes,o=[],a=[],i=r.length,u=0;u<i;u++){for(var l=r[u].length,d=0;d<l;d++)o.push(r[u][d].PointX,r[u][d].PointY);a.push(l)}for(var s=a.length,c=_malloc(4*s),f=0;f<s;f++)Module.HEAP32[c/4+f]=a[f];var p=o.length,g=_malloc(4*p);for(f=0;f<p;f++)Module.HEAPF32[g/4+f]=o[f];Module._SetInkPath(t,n,c,i,g),_free(g)}function Be(e){var t=e.doc,n=e.annotPtr,r=e.destPage,o=e.pageHeight;Module._SetLinkDestination(t,n,r-1,0,o,0)}function Fe(e){var t=e.annotPtr,n=e.url,r=stringToNewUTF8(n);Module._SetLinkUri(t,r)}function De(e){var t=e.annotPtr,n=e.isChecked;Module._SetCheckBoxIsChecked(t,n);var r=Ae("PDF FORM FILL");if(r.code)return r}function Le(e){var t=e.annotPtr,n=e.isChecked;Module._SetRadioButtonIsChecked(t,n);var r=Ae("PDF FORM FILL");if(r.code)return r}function Ue(e){var t=e.annotPtr,n=e.checkStyle;Module._SetWidgetCheckStyle(t,n)}function Ne(e){var t=e.annotPtr,n=v(e.backgroundColor);Module._SetWidgetBackgroundRGBColor(t,n.R,n.G,n.B)}function ke(e){var t=e.annotPtr,n=e.fieldName,r=stringToNewUTF8(n);Module._SetWidgetFieldName(t,r)}function Oe(e){var t=e.annotPtr,n=e.fontName,r=e.fontSize,o=e.color,a=stringToNewUTF8(n),i=v(o);Module._SetAnnotFontDa(t,a,r,i.R,i.G,i.B)}function He(e){var t=e.annotPtr,n=e.selected;Module._SetItemsSelectedIndex(t,n);var r=Ae("PDF FORM FILL");if(r.code)return r}function Ye(e){var t=e.doc,n=e.annotPtr,r=e.destPage,o=e.pageHeight,a=e.actionType,i=Module._InitAction();Module._SetActionType(i,a),r&&1==a&&(Module._SetDestination(i,t,r-1,0,o,0),Module._SetButtonAction(n,i),Module._ClearAction(i))}function We(e){var t=e.annotPtr,n=e.url,r=e.actionType,o=Module._InitAction();if(Module._SetActionType(o,r),n&&6==r){var a=stringToNewUTF8(n);Module._SetUriPath(o,a),Module._SetButtonAction(t,o),Module._ClearAction(o)}}function Qe(e){var t=e.annotPtr,n=e.contents,r=stringToNewUTF8(n);Module._SetTextFieldContent(t,r);var o=Ae("PDF FORM FILL");if(o.code)return o}function Ke(e){var t=e.annotPtr,n=e.item,r=n.index,o=n.value,a=stringToNewUTF8(o);Module._AddOptionItem(t,r,a,a)}function qe(e){switch(e){case"1.2.840.113549.1.1.1":default:return"RSA_RSA";case"1.2.840.113549.1.1.2":return"MD2RSA";case"1.2.840.113549.1.1.3":return"MD4RSA";case"1.2.840.113549.1.1.4":return"MD5RSA";case"1.2.840.113549.1.1.5":return"SHA1RSA";case"1.2.840.113549.1.1.11":return"SHA256RSA";case"1.2.156.10197.1.501":return"SM3SM2"}}function Je(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=a(n().mark((function e(t){var r,o,a,i,u,l,d,s,c,f,p,g,A,h,P,M,m,v,y,I,C,S,_;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=["C","ST","L","O","OU","CN","email"],o=Module._GetSignVersion(t),Module._GetSignAlgOid(t),i=qe(a=U8StringData),u={},l=0;l<7;l++)Module._GetSignSubject(t,l),u[r[l]]=U8StringData;for(d=[],s=0;s<7;s++)Module._GetSignIssuer(t,s),d[r[s]]=U8StringData;return Module._GetSignSerialNumber(t),c=U8StringData,Module._GetSignValidDate(t,0),f=U8StringData,Module._GetSignValidDate(t,1),p=U8StringData,AccessInfoArray=[],Module._GetAuthorityInfoAccess(t),g=AccessInfoArray,Module._GetSubjectKeyIdentifier(t),A=U8StringData,h=Module._GetKeyUsage(t),PolicyArray=[],Module._GetCertificatePolicies(t),P=PolicyArray,Module._GetAuthorityKeyIdentifier(t),M=U8StringData,CRLPointArray=[],Module._GetCRLDistributionPoints(t),m=CRLPointArray,Module._GetBasicConstraints(t),v=U8StringData,Module._GetPublicKey(t),y=U8StringData,Module._GetX509Data(t),I=U8StringData,Module._GetSHA1Digest(t),C=U8StringData,Module._GetMD5Digest(t),S=U8StringData,OCSPUrlArray=[],Module._GetOCSPUrl(t),_=OCSPUrlArray,e.abrupt("return",{version:o,signAlgOid:a,signAlgOidType:i,subject:u,issuer:d,serialNumber:c,validDateStart:f,validDateEnd:p,sccessInfo:g,subjectKeyIdentifier:A,keyUsage:h,certificatePolicies:P,authorityKeyIdentifier:M,CRLDistributionPoints:m,basicConstraints:v,publicKey:y,X509Data:I,SHA1Digest:C,MD5Digest:S,ocspURL:_});case 43:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=a(n().mark((function e(t){var r,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=j(t.imageBase64),o=ComPDFKitJS.opened_image.length,ComPDFKitJS.opened_image[o]=r,Module._UpdateAPWithImage(t.annotPtr,o,r.length,1,0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){var t=e.annotPtr,n=e.content,r=e.isDrawOnlyContent,o=void 0!==r&&r,a=e.isDrowLogo,i=void 0!==a&&a,u=e.isContentAlginLeft,l=void 0!==u&&u,d=e.text,s=e.logoBase64,c=void 0===s?"":s,f=e.imageBase64,p=void 0===f?"":f,g=stringToNewUTF8(n),A=stringToNewUTF8(d);ComPDFKitJS.opened_image=[];var h=ComPDFKitJS.opened_image.length,P=0;if(c){var M=j(c);ComPDFKitJS.opened_image[h]=M,P=M.length}var m=ComPDFKitJS.opened_image.length,v=0;if(p){var y=j(p);ComPDFKitJS.opened_image[m]=y,v=y.length}Module._UpdateApWithDigitalSigConfig(t,g,o,i,l,A,h,P,m,v,0,0,0,0,0,0)}function ze(e,t){AnnotArray=[];var n,r,o=[];Module._GetReplies(e,t);for(var a=0;a<AnnotArray.length;a++){var i=AnnotArray[a],u={annotPtr:i,repliesIndex:a+1};if(Module._IsReviewStateAnnot(i))stateInt=Module._GetState(i),n={annotPtr:i,state:Y[stateInt]};else if(Module._IsMarkedStateAnnot(i))stateInt=Module._GetState(i),r={annotPtr:i,state:Y[stateInt]};else{Module._GetAnnotAuthor(i),u.author=U8StringData,Module._GetAnnotCreationDate(i);var l=U8StringData;u.date=A(l),Module._GetAnnotContent(i),u.contents=U8StringData,Module._GetAnnotTitle(i),u.title=U8StringData,o.push(u)}}return{replies:o,reviewAnnotState:n,markedAnnotState:r}}function $e(e,t){var n=t.pagePtr,r=t.annotPtr,o=t.rulerPtr,a=t.color,i=t.borderColor,u=t.borderWidth,l=t.contents,d=t.date,s=t.opacity,c=t.fillTransparency,f=t.rect,p=t.author,g=t.fillColor,A=t.quadPoints,P=t.fontName,M=t.fontSize,m=t.vertices,y=t.borderStyle,I=t.dashes,C=t.head,S=t.tail,_=t.linePoints,x=t.inkPointes,w=t.arcPoints;i&&Ie({annotPtr:r,color:i}),i&&_e({annotPtr:r,borderColor:i}),Object.hasOwn(t,"fillColor")&&xe({annotPtr:r,fillColor:g}),d&&Pe({annotPtr:r,date:d}),isFinite(s)&&(!function(e){var t=e.annotPtr,n=e.opacity,r=void 0===n?1:n;Module._setMeasureTextTransparency(t,r)}({annotPtr:r,opacity:s}),we({annotPtr:r,opacity:s})),c&&Ge({annotPtr:r,fillTransparency:c}),f&&Me({pagePtr:n,annotPtr:r,rect:f}),p&&me({annotPtr:r,author:p}),A&&Te({pagePtr:n,annotPtr:r,quadPoints:A}),u&&be({annotPtr:r,borderWidth:u}),(y||I)&&nt({annotPtr:r,borderWidth:u,borderStyle:y,dashes:I}),P&&M&&a&&Oe({annotPtr:r,fontName:P,fontSize:M,color:a}),P&&M&&a&&function(e){var t=e.annotPtr,n=e.fontName,r=e.fontSize,o=e.color,a=e.opacity,i=void 0===a?1:a,u=stringToNewUTF8(n),l=v(o);Module._SetAnnotFont(t,u,r,i,l.R,l.G,l.B)}({annotPtr:r,fontName:P,fontSize:M,color:a}),m&&tt({pagePtr:n,annotPtr:r,vertices:m}),null==C&&null==S||Module._SetLineType(r,B[C.toUpperCase()],B[S.toUpperCase()]),_&&Ee({pagePtr:n,annotPtr:r,linePoints:_}),x&&Re({pagePtr:n,annotPtr:r,inkPointes:x});var b=t.precision,G=t.scale,T=t.labelPosition,E=t.leadLength,R=t.leadOffset,F=t.leadExtension;(b&&function(e){var t=e.rulerPtr,n=e.precision;Module._setPrecision(t,Math.pow(10,-Math.floor(Math.log10(n))))}({rulerPtr:o,precision:b}),G&&function(e){var t=e.rulerPtr,n=e.scale,r=n.base,o=n.baseUnit,a=n.translate,i=n.translateUnit;Module._setMeasureScale(t,r,stringToNewUTF8(o),a,stringToNewUTF8(i))}({rulerPtr:o,scale:G}),T&&function(e){var t=e.rulerPtr,n=e.labelPosition;if("top"===n)return Module._setLabelTop(t);if("inside"===n)Module._setLabelInside(t)}({rulerPtr:o,labelPosition:T}),E&&function(e){var t=e.rulerPtr,n=e.leadLength;Module._setLeadLength(t,n)}({rulerPtr:o,leadLength:E}),R&&function(e){var t=e.rulerPtr,n=e.leadOffset;Module._setLeadOffset(t,n)}({rulerPtr:o,leadOffset:R}),F&&function(e){var t=e.rulerPtr,n=e.leadExtension;Module._setLeadExtension(t,n)}({rulerPtr:o,leadExtension:F}),w)&&(PageSize.Width=0,PageSize.Height=0,Module._GetPageSizeForIndex(e,t.pageIndex),function(e){for(var t=e.rulerPtr,n=e.arcPoints,r=e.pageHeight,o=function(e,t){var n=e.map((function(e){return{x:e.x,y:t-e.y}}));return n}(n,r),a=[],i=0;i<o.length;i++){var u=o[i];a.push(u.x,u.y)}for(var l=a.length,d=_malloc(4*l),s=0;s<l;s++)Module.HEAPF32[d/4+s]=a[s];var c=Module._SetArcPoints(t,d);_free(d)}({rulerPtr:o,arcPoints:w,pageHeight:PageSize.Height}),Rect={},Module._GetArcRect(t.rulerPtr),Me({pagePtr:n,annotPtr:r,rect:{left:h(Rect.Left),top:h(PageSize.Height-Rect.Top),right:h(Rect.Right),bottom:h(PageSize.Height-Rect.Bottom)}}));Module._UpdateAnnotMeasure(o),t.hasOwnProperty("contents")&&ye({annotPtr:r,contents:l}),Module._UpdateAnnotAp(r,0),x&&u&&i&&s&&function(e){for(var t=e.pagePtr,n=e.annotPtr,r=e.inkPointes,o=e.borderWidth,a=e.borderColor,i=e.opacity,u=[],l=[],d=r.length,s=0;s<d;s++){for(var c=r[s].length,f=0;f<c;f++)u.push(r[s][f].PointX,r[s][f].PointY);l.push(c)}for(var p=l.length,g=_malloc(4*p),A=0;A<p;A++)Module.HEAP32[g/4+A]=l[A];var h=u.length,P=_malloc(4*h);for(A=0;A<h;A++)Module.HEAPF32[P/4+A]=u[A];var M=v(a);Module._UpdateAnnotApWithInk(t,n,g,d,P,o,M.R,M.G,M.B,i),_free(P)}({pagePtr:n,annotPtr:r,inkPointes:x,borderWidth:u,borderColor:i,opacity:s})}function et(e,t,n){MeasureInfo={},Module._getMeasureInfo(t);var r=Module._getCaptionTypes(e),o=Module._GetMeasureType(t);Module._setLabelInside(t);var a={captionType:q[r],measureType:Q[o],scale:{base:MeasureInfo.RulerBase,baseUnit:MeasureInfo.RulerBaseUnit,translate:MeasureInfo.RulerTranslate,translateUnit:MeasureInfo.RulerTranslateUnit},precision:MeasureInfo.precision,factor:MeasureInfo.factor};FontDa={},Module._GetAnnotFontDa(e);var i=U8StringData;switch(a.fontName=i,a.fontSize=FontDa.fontSize,a.color=y(FontDa.R,FontDa.G,FontDa.B),RGBColor={},hasColor=Module._GetAnnotRGBColor(e),hasColor&&(a.borderColor=y(RGBColor.R,RGBColor.G,RGBColor.B)),n){case"line":a.length=Module._getMeasurementResults(t,K.LENGTH),a.leadOffset=Module._getLeadOffset(t);var u=Module._getLeadLength(t),l=Module._getLeadExtension(t);u<0&&(l-=u,u=0),l<0&&(u-=l,l=0),a.leadLength=u,a.leadExtension=l,a.labelPosition="inside";break;case"rectangle":case"circle":case"polygon":a.area=Module._getMeasurementResults(t,K.AREA),a.perimeter=Module._getMeasurementResults(t,K.LENGTH),a.labelPosition="inside";break;case"polyline":a.perimeter=Module._getMeasurementResults(t,K.LENGTH);break;case"ink":"generic"===a.captionType&&(a.perimeter=Module._getMeasurementResults(t,K.GENERIC)),"arclength"===a.captionType&&(a.arcLength=Module._getMeasurementResults(t,K.ARCLENGTH))}return a}function tt(e){for(var t=e.pagePtr,n=e.annotPtr,r=e.vertices,o=[],a=0;a<r.length;a++){var i=r[a];o.push(i.x,i.y)}for(var u=o.length,l=_malloc(4*u),d=0;d<u;d++)Module.HEAPF32[l/4+d]=o[d];var s=Module._setVertices(t,n,l,u);return _free(l),s}function nt(e){for(var t=e.annotPtr,n=e.dashes,r=e.borderStyle,o=e.borderWidth,a=U[r],i=n.length,u=_malloc(4*i),l=0;l<i;l++)Module.HEAPF32[u/4+l]=n[l];var d=Module._SetAnnotBorderStyle(t,a,o,u,i);return _free(u),d}function rt(e){var t=e.pagePtr,n=e.annotPtr;MeasureVerticesArray=[],Module._getVertices(t,n);for(var r=[],o=0;o<MeasureVerticesArray.length;o++){var a=MeasureVerticesArray[o];a&&r.push({x:a.PointX,y:a.PointY})}return r}(function(){return ne.apply(this,arguments)})().then((function(){te.setUp()}));
//# sourceMappingURL=PDFWorker.js.map
